var LT=t=>{throw TypeError(t)};var Ub=(t,s,n)=>s.has(t)||LT("Cannot "+n);var ce=(t,s,n)=>(Ub(t,s,"read from private field"),n?n.call(t):s.get(t)),jt=(t,s,n)=>s.has(t)?LT("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,n),nt=(t,s,n,r)=>(Ub(t,s,"write to private field"),r?r.call(t,n):s.set(t,n),n),Vt=(t,s,n)=>(Ub(t,s,"access private method"),n);var tg=(t,s,n,r)=>({set _(a){nt(t,s,a,n)},get _(){return ce(t,s,r)}});function SG(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O6={exports:{}},Tj={},M6={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=Symbol.for("react.element"),CG=Symbol.for("react.portal"),kG=Symbol.for("react.fragment"),PG=Symbol.for("react.strict_mode"),AG=Symbol.for("react.profiler"),TG=Symbol.for("react.provider"),DG=Symbol.for("react.context"),EG=Symbol.for("react.forward_ref"),OG=Symbol.for("react.suspense"),MG=Symbol.for("react.memo"),_G=Symbol.for("react.lazy"),BT=Symbol.iterator;function RG(t){return t===null||typeof t!="object"?null:(t=BT&&t[BT]||t["@@iterator"],typeof t=="function"?t:null)}var _6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R6=Object.assign,I6={};function nh(t,s,n){this.props=t,this.context=s,this.refs=I6,this.updater=n||_6}nh.prototype.isReactComponent={};nh.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};nh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $6(){}$6.prototype=nh.prototype;function EC(t,s,n){this.props=t,this.context=s,this.refs=I6,this.updater=n||_6}var OC=EC.prototype=new $6;OC.constructor=EC;R6(OC,nh.prototype);OC.isPureReactComponent=!0;var VT=Array.isArray,F6=Object.prototype.hasOwnProperty,MC={current:null},L6={key:!0,ref:!0,__self:!0,__source:!0};function B6(t,s,n){var r,a={},i=null,l=null;if(s!=null)for(r in s.ref!==void 0&&(l=s.ref),s.key!==void 0&&(i=""+s.key),s)F6.call(s,r)&&!L6.hasOwnProperty(r)&&(a[r]=s[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:xf,type:t,key:i,ref:l,props:a,_owner:MC.current}}function IG(t,s){return{$$typeof:xf,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function _C(t){return typeof t=="object"&&t!==null&&t.$$typeof===xf}function $G(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return s[n]})}var UT=/\/+/g;function zb(t,s){return typeof t=="object"&&t!==null&&t.key!=null?$G(""+t.key):s.toString(36)}function ev(t,s,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case xf:case CG:l=!0}}if(l)return l=t,a=a(l),t=r===""?"."+zb(l,0):r,VT(a)?(n="",t!=null&&(n=t.replace(UT,"$&/")+"/"),ev(a,s,n,"",function(d){return d})):a!=null&&(_C(a)&&(a=IG(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(UT,"$&/")+"/")+t)),s.push(a)),1;if(l=0,r=r===""?".":r+":",VT(t))for(var o=0;o<t.length;o++){i=t[o];var c=r+zb(i,o);l+=ev(i,s,n,c,a)}else if(c=RG(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=r+zb(i,o++),l+=ev(i,s,n,c,a);else if(i==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return l}function ng(t,s,n){if(t==null)return t;var r=[],a=0;return ev(t,r,"","",function(i){return s.call(n,i,a++)}),r}function FG(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Nr={current:null},tv={transition:null},LG={ReactCurrentDispatcher:Nr,ReactCurrentBatchConfig:tv,ReactCurrentOwner:MC};function V6(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:ng,forEach:function(t,s,n){ng(t,function(){s.apply(this,arguments)},n)},count:function(t){var s=0;return ng(t,function(){s++}),s},toArray:function(t){return ng(t,function(s){return s})||[]},only:function(t){if(!_C(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Wt.Component=nh;Wt.Fragment=kG;Wt.Profiler=AG;Wt.PureComponent=EC;Wt.StrictMode=PG;Wt.Suspense=OG;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LG;Wt.act=V6;Wt.cloneElement=function(t,s,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R6({},t.props),a=t.key,i=t.ref,l=t._owner;if(s!=null){if(s.ref!==void 0&&(i=s.ref,l=MC.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)F6.call(s,c)&&!L6.hasOwnProperty(c)&&(r[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:xf,type:t.type,key:a,ref:i,props:r,_owner:l}};Wt.createContext=function(t){return t={$$typeof:DG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TG,_context:t},t.Consumer=t};Wt.createElement=B6;Wt.createFactory=function(t){var s=B6.bind(null,t);return s.type=t,s};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(t){return{$$typeof:EG,render:t}};Wt.isValidElement=_C;Wt.lazy=function(t){return{$$typeof:_G,_payload:{_status:-1,_result:t},_init:FG}};Wt.memo=function(t,s){return{$$typeof:MG,type:t,compare:s===void 0?null:s}};Wt.startTransition=function(t){var s=tv.transition;tv.transition={};try{t()}finally{tv.transition=s}};Wt.unstable_act=V6;Wt.useCallback=function(t,s){return Nr.current.useCallback(t,s)};Wt.useContext=function(t){return Nr.current.useContext(t)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(t){return Nr.current.useDeferredValue(t)};Wt.useEffect=function(t,s){return Nr.current.useEffect(t,s)};Wt.useId=function(){return Nr.current.useId()};Wt.useImperativeHandle=function(t,s,n){return Nr.current.useImperativeHandle(t,s,n)};Wt.useInsertionEffect=function(t,s){return Nr.current.useInsertionEffect(t,s)};Wt.useLayoutEffect=function(t,s){return Nr.current.useLayoutEffect(t,s)};Wt.useMemo=function(t,s){return Nr.current.useMemo(t,s)};Wt.useReducer=function(t,s,n){return Nr.current.useReducer(t,s,n)};Wt.useRef=function(t){return Nr.current.useRef(t)};Wt.useState=function(t){return Nr.current.useState(t)};Wt.useSyncExternalStore=function(t,s,n){return Nr.current.useSyncExternalStore(t,s,n)};Wt.useTransition=function(){return Nr.current.useTransition()};Wt.version="18.3.1";M6.exports=Wt;var b=M6.exports;const X=fs(b),RC=SG({__proto__:null,default:X},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BG=b,VG=Symbol.for("react.element"),UG=Symbol.for("react.fragment"),zG=Object.prototype.hasOwnProperty,qG=BG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HG={key:!0,ref:!0,__self:!0,__source:!0};function U6(t,s,n){var r,a={},i=null,l=null;n!==void 0&&(i=""+n),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(r in s)zG.call(s,r)&&!HG.hasOwnProperty(r)&&(a[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:VG,type:t,key:i,ref:l,props:a,_owner:qG.current}}Tj.Fragment=UG;Tj.jsx=U6;Tj.jsxs=U6;O6.exports=Tj;var e=O6.exports,z6={exports:{}},la={},q6={exports:{}},H6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(O,R){var q=O.length;O.push(R);e:for(;0<q;){var re=q-1>>>1,we=O[re];if(0<a(we,R))O[re]=R,O[q]=we,q=re;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var R=O[0],q=O.pop();if(q!==R){O[0]=q;e:for(var re=0,we=O.length,K=we>>>1;re<K;){var Ce=2*(re+1)-1,pe=O[Ce],F=Ce+1,Q=O[F];if(0>a(pe,q))F<we&&0>a(Q,pe)?(O[re]=Q,O[F]=q,re=F):(O[re]=pe,O[Ce]=q,re=Ce);else if(F<we&&0>a(Q,q))O[re]=Q,O[F]=q,re=F;else break e}}return R}function a(O,R){var q=O.sortIndex-R.sortIndex;return q!==0?q:O.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,x=!1,p=!1,f=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var R=n(d);R!==null;){if(R.callback===null)r(d);else if(R.startTime<=O)r(d),R.sortIndex=R.expirationTime,s(c,R);else break;R=n(d)}}function w(O){if(f=!1,v(O),!p)if(n(c)!==null)p=!0,H(N);else{var R=n(d);R!==null&&Y(w,R.startTime-O)}}function N(O,R){p=!1,f&&(f=!1,g(T),T=-1),x=!0;var q=h;try{for(v(R),m=n(c);m!==null&&(!(m.expirationTime>R)||O&&!$());){var re=m.callback;if(typeof re=="function"){m.callback=null,h=m.priorityLevel;var we=re(m.expirationTime<=R);R=t.unstable_now(),typeof we=="function"?m.callback=we:m===n(c)&&r(c),v(R)}else r(c);m=n(c)}if(m!==null)var K=!0;else{var Ce=n(d);Ce!==null&&Y(w,Ce.startTime-R),K=!1}return K}finally{m=null,h=q,x=!1}}var S=!1,k=null,T=-1,C=5,P=-1;function $(){return!(t.unstable_now()-P<C)}function V(){if(k!==null){var O=t.unstable_now();P=O;var R=!0;try{R=k(!0,O)}finally{R?I():(S=!1,k=null)}}else S=!1}var I;if(typeof y=="function")I=function(){y(V)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,U=_.port2;_.port1.onmessage=V,I=function(){U.postMessage(null)}}else I=function(){j(V,0)};function H(O){k=O,S||(S=!0,I())}function Y(O,R){T=j(function(){O(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||x||(p=!0,H(N))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var q=h;h=R;try{return O()}finally{h=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,R){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=h;h=O;try{return R()}finally{h=q}},t.unstable_scheduleCallback=function(O,R,q){var re=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?re+q:re):q=re,O){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=q+we,O={id:u++,callback:R,priorityLevel:O,startTime:q,expirationTime:we,sortIndex:-1},q>re?(O.sortIndex=q,s(d,O),n(c)===null&&O===n(d)&&(f?(g(T),T=-1):f=!0,Y(w,q-re))):(O.sortIndex=we,s(c,O),p||x||(p=!0,H(N))),O},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(O){var R=h;return function(){var q=h;h=R;try{return O.apply(this,arguments)}finally{h=q}}}})(H6);q6.exports=H6;var GG=q6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WG=b,na=GG;function Ve(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G6=new Set,Vx={};function kd(t,s){sm(t,s),sm(t+"Capture",s)}function sm(t,s){for(Vx[t]=s,t=0;t<s.length;t++)G6.add(s[t])}var Ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qw=Object.prototype.hasOwnProperty,KG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zT={},qT={};function YG(t){return Qw.call(qT,t)?!0:Qw.call(zT,t)?!1:KG.test(t)?qT[t]=!0:(zT[t]=!0,!1)}function QG(t,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XG(t,s,n,r){if(s===null||typeof s>"u"||QG(t,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function wr(t,s,n,r,a,i,l){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=i,this.removeEmptyString=l}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kn[t]=new wr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Kn[s]=new wr(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kn[t]=new wr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kn[t]=new wr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kn[t]=new wr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kn[t]=new wr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kn[t]=new wr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kn[t]=new wr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kn[t]=new wr(t,5,!1,t.toLowerCase(),null,!1,!1)});var IC=/[\-:]([a-z])/g;function $C(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(IC,$C);Kn[s]=new wr(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(IC,$C);Kn[s]=new wr(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(IC,$C);Kn[s]=new wr(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kn[t]=new wr(t,1,!1,t.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kn[t]=new wr(t,1,!1,t.toLowerCase(),null,!0,!0)});function FC(t,s,n,r){var a=Kn.hasOwnProperty(s)?Kn[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(XG(s,n,a,r)&&(n=null),r||a===null?YG(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,s,n):t.setAttribute(s,n))))}var ql=WG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rg=Symbol.for("react.element"),nu=Symbol.for("react.portal"),ru=Symbol.for("react.fragment"),LC=Symbol.for("react.strict_mode"),Xw=Symbol.for("react.profiler"),W6=Symbol.for("react.provider"),K6=Symbol.for("react.context"),BC=Symbol.for("react.forward_ref"),Zw=Symbol.for("react.suspense"),Jw=Symbol.for("react.suspense_list"),VC=Symbol.for("react.memo"),ro=Symbol.for("react.lazy"),Y6=Symbol.for("react.offscreen"),HT=Symbol.iterator;function Oh(t){return t===null||typeof t!="object"?null:(t=HT&&t[HT]||t["@@iterator"],typeof t=="function"?t:null)}var Zs=Object.assign,qb;function ax(t){if(qb===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);qb=s&&s[1]||""}return`
`+qb+t}var Hb=!1;function Gb(t,s){if(!t||Hb)return"";Hb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var r=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){r=d}t.call(s.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Hb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ax(t):""}function ZG(t){switch(t.tag){case 5:return ax(t.type);case 16:return ax("Lazy");case 13:return ax("Suspense");case 19:return ax("SuspenseList");case 0:case 2:case 15:return t=Gb(t.type,!1),t;case 11:return t=Gb(t.type.render,!1),t;case 1:return t=Gb(t.type,!0),t;default:return""}}function e1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ru:return"Fragment";case nu:return"Portal";case Xw:return"Profiler";case LC:return"StrictMode";case Zw:return"Suspense";case Jw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case K6:return(t.displayName||"Context")+".Consumer";case W6:return(t._context.displayName||"Context")+".Provider";case BC:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case VC:return s=t.displayName||null,s!==null?s:e1(t.type)||"Memo";case ro:s=t._payload,t=t._init;try{return e1(t(s))}catch{}}return null}function JG(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e1(s);case 8:return s===LC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ho(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Q6(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function eW(t){var s=Q6(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ag(t){t._valueTracker||(t._valueTracker=eW(t))}function X6(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return t&&(r=Q6(t)?t.checked?"true":"false":t.value),t=r,t!==n?(s.setValue(t),!0):!1}function kv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function t1(t,s){var n=s.checked;return Zs({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function GT(t,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=Ho(s.value!=null?s.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Z6(t,s){s=s.checked,s!=null&&FC(t,"checked",s,!1)}function s1(t,s){Z6(t,s);var n=Ho(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?n1(t,s.type,n):s.hasOwnProperty("defaultValue")&&n1(t,s.type,Ho(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function WT(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function n1(t,s,n){(s!=="number"||kv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ix=Array.isArray;function Tu(t,s,n,r){if(t=t.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=s.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ho(n),s=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function r1(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Ve(91));return Zs({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KT(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(Ve(92));if(ix(n)){if(1<n.length)throw Error(Ve(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:Ho(n)}}function J6(t,s){var n=Ho(s.value),r=Ho(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function YT(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function eI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a1(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?eI(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ig,tI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(s,n,r,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(ig=ig||document.createElement("div"),ig.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ig.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Ux(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var yx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tW=["Webkit","ms","Moz","O"];Object.keys(yx).forEach(function(t){tW.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),yx[s]=yx[t]})});function sI(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||yx.hasOwnProperty(t)&&yx[t]?(""+s).trim():s+"px"}function nI(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=sI(n,s[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var sW=Zs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i1(t,s){if(s){if(sW[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Ve(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Ve(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Ve(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Ve(62))}}function l1(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o1=null;function UC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var c1=null,Du=null,Eu=null;function QT(t){if(t=gf(t)){if(typeof c1!="function")throw Error(Ve(280));var s=t.stateNode;s&&(s=_j(s),c1(t.stateNode,t.type,s))}}function rI(t){Du?Eu?Eu.push(t):Eu=[t]:Du=t}function aI(){if(Du){var t=Du,s=Eu;if(Eu=Du=null,QT(t),s)for(t=0;t<s.length;t++)QT(s[t])}}function iI(t,s){return t(s)}function lI(){}var Wb=!1;function oI(t,s,n){if(Wb)return t(s,n);Wb=!0;try{return iI(t,s,n)}finally{Wb=!1,(Du!==null||Eu!==null)&&(lI(),aI())}}function zx(t,s){var n=t.stateNode;if(n===null)return null;var r=_j(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ve(231,s,typeof n));return n}var d1=!1;if(Ol)try{var Mh={};Object.defineProperty(Mh,"passive",{get:function(){d1=!0}}),window.addEventListener("test",Mh,Mh),window.removeEventListener("test",Mh,Mh)}catch{d1=!1}function nW(t,s,n,r,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(n,d)}catch(u){this.onError(u)}}var jx=!1,Pv=null,Av=!1,u1=null,rW={onError:function(t){jx=!0,Pv=t}};function aW(t,s,n,r,a,i,l,o,c){jx=!1,Pv=null,nW.apply(rW,arguments)}function iW(t,s,n,r,a,i,l,o,c){if(aW.apply(this,arguments),jx){if(jx){var d=Pv;jx=!1,Pv=null}else throw Error(Ve(198));Av||(Av=!0,u1=d)}}function Pd(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function cI(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function XT(t){if(Pd(t)!==t)throw Error(Ve(188))}function lW(t){var s=t.alternate;if(!s){if(s=Pd(t),s===null)throw Error(Ve(188));return s!==t?null:t}for(var n=t,r=s;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return XT(a),t;if(i===r)return XT(a),s;i=i.sibling}throw Error(Ve(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(Ve(189))}}if(n.alternate!==r)throw Error(Ve(190))}if(n.tag!==3)throw Error(Ve(188));return n.stateNode.current===n?t:s}function dI(t){return t=lW(t),t!==null?uI(t):null}function uI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=uI(t);if(s!==null)return s;t=t.sibling}return null}var mI=na.unstable_scheduleCallback,ZT=na.unstable_cancelCallback,oW=na.unstable_shouldYield,cW=na.unstable_requestPaint,hn=na.unstable_now,dW=na.unstable_getCurrentPriorityLevel,zC=na.unstable_ImmediatePriority,hI=na.unstable_UserBlockingPriority,Tv=na.unstable_NormalPriority,uW=na.unstable_LowPriority,xI=na.unstable_IdlePriority,Dj=null,_i=null;function mW(t){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(Dj,t,void 0,(t.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:pW,hW=Math.log,xW=Math.LN2;function pW(t){return t>>>=0,t===0?32:31-(hW(t)/xW|0)|0}var lg=64,og=4194304;function lx(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dv(t,s){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,i=t.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?r=lx(o):(i&=l,i!==0&&(r=lx(i)))}else l=n&~a,l!==0?r=lx(l):i!==0&&(r=lx(i));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,i=s&-s,a>=i||a===16&&(i&4194240)!==0))return s;if(r&4&&(r|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=r;0<s;)n=31-ti(s),a=1<<n,r|=t[n],s&=~a;return r}function fW(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gW(t,s){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-ti(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&r)&&(a[l]=fW(o,s)):c<=s&&(t.expiredLanes|=o),i&=~o}}function m1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pI(){var t=lg;return lg<<=1,!(lg&4194240)&&(lg=64),t}function Kb(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function pf(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ti(s),t[s]=n}function vW(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-ti(n),i=1<<a;s[a]=0,r[a]=-1,t[a]=-1,n&=~i}}function qC(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var r=31-ti(n),a=1<<r;a&s|t[r]&s&&(t[r]|=s),n&=~a}}var ys=0;function fI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gI,HC,vI,yI,jI,h1=!1,cg=[],Do=null,Eo=null,Oo=null,qx=new Map,Hx=new Map,co=[],yW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JT(t,s){switch(t){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":qx.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hx.delete(s.pointerId)}}function _h(t,s,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},s!==null&&(s=gf(s),s!==null&&HC(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function jW(t,s,n,r,a){switch(s){case"focusin":return Do=_h(Do,t,s,n,r,a),!0;case"dragenter":return Eo=_h(Eo,t,s,n,r,a),!0;case"mouseover":return Oo=_h(Oo,t,s,n,r,a),!0;case"pointerover":var i=a.pointerId;return qx.set(i,_h(qx.get(i)||null,t,s,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Hx.set(i,_h(Hx.get(i)||null,t,s,n,r,a)),!0}return!1}function bI(t){var s=Dc(t.target);if(s!==null){var n=Pd(s);if(n!==null){if(s=n.tag,s===13){if(s=cI(n),s!==null){t.blockedOn=s,jI(t.priority,function(){vI(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sv(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=x1(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);o1=r,n.target.dispatchEvent(r),o1=null}else return s=gf(n),s!==null&&HC(s),t.blockedOn=n,!1;s.shift()}return!0}function e4(t,s,n){sv(t)&&n.delete(s)}function bW(){h1=!1,Do!==null&&sv(Do)&&(Do=null),Eo!==null&&sv(Eo)&&(Eo=null),Oo!==null&&sv(Oo)&&(Oo=null),qx.forEach(e4),Hx.forEach(e4)}function Rh(t,s){t.blockedOn===s&&(t.blockedOn=null,h1||(h1=!0,na.unstable_scheduleCallback(na.unstable_NormalPriority,bW)))}function Gx(t){function s(a){return Rh(a,t)}if(0<cg.length){Rh(cg[0],t);for(var n=1;n<cg.length;n++){var r=cg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Do!==null&&Rh(Do,t),Eo!==null&&Rh(Eo,t),Oo!==null&&Rh(Oo,t),qx.forEach(s),Hx.forEach(s),n=0;n<co.length;n++)r=co[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<co.length&&(n=co[0],n.blockedOn===null);)bI(n),n.blockedOn===null&&co.shift()}var Ou=ql.ReactCurrentBatchConfig,Ev=!0;function NW(t,s,n,r){var a=ys,i=Ou.transition;Ou.transition=null;try{ys=1,GC(t,s,n,r)}finally{ys=a,Ou.transition=i}}function wW(t,s,n,r){var a=ys,i=Ou.transition;Ou.transition=null;try{ys=4,GC(t,s,n,r)}finally{ys=a,Ou.transition=i}}function GC(t,s,n,r){if(Ev){var a=x1(t,s,n,r);if(a===null)rN(t,s,r,Ov,n),JT(t,r);else if(jW(a,t,s,n,r))r.stopPropagation();else if(JT(t,r),s&4&&-1<yW.indexOf(t)){for(;a!==null;){var i=gf(a);if(i!==null&&gI(i),i=x1(t,s,n,r),i===null&&rN(t,s,r,Ov,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else rN(t,s,r,null,n)}}var Ov=null;function x1(t,s,n,r){if(Ov=null,t=UC(r),t=Dc(t),t!==null)if(s=Pd(t),s===null)t=null;else if(n=s.tag,n===13){if(t=cI(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Ov=t,null}function NI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dW()){case zC:return 1;case hI:return 4;case Tv:case uW:return 16;case xI:return 536870912;default:return 16}default:return 16}}var So=null,WC=null,nv=null;function wI(){if(nv)return nv;var t,s=WC,n=s.length,r,a="value"in So?So.value:So.textContent,i=a.length;for(t=0;t<n&&s[t]===a[t];t++);var l=n-t;for(r=1;r<=l&&s[n-r]===a[i-r];r++);return nv=a.slice(t,1<r?1-r:void 0)}function rv(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function dg(){return!0}function t4(){return!1}function oa(t){function s(n,r,a,i,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dg:t4,this.isPropagationStopped=t4,this}return Zs(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dg)},persist:function(){},isPersistent:dg}),s}var rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KC=oa(rh),ff=Zs({},rh,{view:0,detail:0}),SW=oa(ff),Yb,Qb,Ih,Ej=Zs({},ff,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ih&&(Ih&&t.type==="mousemove"?(Yb=t.screenX-Ih.screenX,Qb=t.screenY-Ih.screenY):Qb=Yb=0,Ih=t),Yb)},movementY:function(t){return"movementY"in t?t.movementY:Qb}}),s4=oa(Ej),CW=Zs({},Ej,{dataTransfer:0}),kW=oa(CW),PW=Zs({},ff,{relatedTarget:0}),Xb=oa(PW),AW=Zs({},rh,{animationName:0,elapsedTime:0,pseudoElement:0}),TW=oa(AW),DW=Zs({},rh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EW=oa(DW),OW=Zs({},rh,{data:0}),n4=oa(OW),MW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_W={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IW(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=RW[t])?!!s[t]:!1}function YC(){return IW}var $W=Zs({},ff,{key:function(t){if(t.key){var s=MW[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=rv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_W[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YC,charCode:function(t){return t.type==="keypress"?rv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FW=oa($W),LW=Zs({},Ej,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r4=oa(LW),BW=Zs({},ff,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YC}),VW=oa(BW),UW=Zs({},rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),zW=oa(UW),qW=Zs({},Ej,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HW=oa(qW),GW=[9,13,27,32],QC=Ol&&"CompositionEvent"in window,bx=null;Ol&&"documentMode"in document&&(bx=document.documentMode);var WW=Ol&&"TextEvent"in window&&!bx,SI=Ol&&(!QC||bx&&8<bx&&11>=bx),a4=" ",i4=!1;function CI(t,s){switch(t){case"keyup":return GW.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var au=!1;function KW(t,s){switch(t){case"compositionend":return kI(s);case"keypress":return s.which!==32?null:(i4=!0,a4);case"textInput":return t=s.data,t===a4&&i4?null:t;default:return null}}function YW(t,s){if(au)return t==="compositionend"||!QC&&CI(t,s)?(t=wI(),nv=WC=So=null,au=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return SI&&s.locale!=="ko"?null:s.data;default:return null}}var QW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l4(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!QW[t.type]:s==="textarea"}function PI(t,s,n,r){rI(r),s=Mv(s,"onChange"),0<s.length&&(n=new KC("onChange","change",null,n,r),t.push({event:n,listeners:s}))}var Nx=null,Wx=null;function XW(t){FI(t,0)}function Oj(t){var s=ou(t);if(X6(s))return t}function ZW(t,s){if(t==="change")return s}var AI=!1;if(Ol){var Zb;if(Ol){var Jb="oninput"in document;if(!Jb){var o4=document.createElement("div");o4.setAttribute("oninput","return;"),Jb=typeof o4.oninput=="function"}Zb=Jb}else Zb=!1;AI=Zb&&(!document.documentMode||9<document.documentMode)}function c4(){Nx&&(Nx.detachEvent("onpropertychange",TI),Wx=Nx=null)}function TI(t){if(t.propertyName==="value"&&Oj(Wx)){var s=[];PI(s,Wx,t,UC(t)),oI(XW,s)}}function JW(t,s,n){t==="focusin"?(c4(),Nx=s,Wx=n,Nx.attachEvent("onpropertychange",TI)):t==="focusout"&&c4()}function eK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oj(Wx)}function tK(t,s){if(t==="click")return Oj(s)}function sK(t,s){if(t==="input"||t==="change")return Oj(s)}function nK(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var di=typeof Object.is=="function"?Object.is:nK;function Kx(t,s){if(di(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Qw.call(s,a)||!di(t[a],s[a]))return!1}return!0}function d4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u4(t,s){var n=d4(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=s&&r>=s)return{node:n,offset:s-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d4(n)}}function DI(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?DI(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function EI(){for(var t=window,s=kv();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=kv(t.document)}return s}function XC(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function rK(t){var s=EI(),n=t.focusedElem,r=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&DI(n.ownerDocument.documentElement,n)){if(r!==null&&XC(n)){if(s=r.start,t=r.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!t.extend&&i>r&&(a=r,r=i,i=a),a=u4(n,i);var l=u4(n,r);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),i>r?(t.addRange(s),t.extend(l.node,l.offset)):(s.setEnd(l.node,l.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aK=Ol&&"documentMode"in document&&11>=document.documentMode,iu=null,p1=null,wx=null,f1=!1;function m4(t,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;f1||iu==null||iu!==kv(r)||(r=iu,"selectionStart"in r&&XC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wx&&Kx(wx,r)||(wx=r,r=Mv(p1,"onSelect"),0<r.length&&(s=new KC("onSelect","select",null,s,n),t.push({event:s,listeners:r}),s.target=iu)))}function ug(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var lu={animationend:ug("Animation","AnimationEnd"),animationiteration:ug("Animation","AnimationIteration"),animationstart:ug("Animation","AnimationStart"),transitionend:ug("Transition","TransitionEnd")},eN={},OI={};Ol&&(OI=document.createElement("div").style,"AnimationEvent"in window||(delete lu.animationend.animation,delete lu.animationiteration.animation,delete lu.animationstart.animation),"TransitionEvent"in window||delete lu.transitionend.transition);function Mj(t){if(eN[t])return eN[t];if(!lu[t])return t;var s=lu[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in OI)return eN[t]=s[n];return t}var MI=Mj("animationend"),_I=Mj("animationiteration"),RI=Mj("animationstart"),II=Mj("transitionend"),$I=new Map,h4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nc(t,s){$I.set(t,s),kd(s,[t])}for(var tN=0;tN<h4.length;tN++){var sN=h4[tN],iK=sN.toLowerCase(),lK=sN[0].toUpperCase()+sN.slice(1);nc(iK,"on"+lK)}nc(MI,"onAnimationEnd");nc(_I,"onAnimationIteration");nc(RI,"onAnimationStart");nc("dblclick","onDoubleClick");nc("focusin","onFocus");nc("focusout","onBlur");nc(II,"onTransitionEnd");sm("onMouseEnter",["mouseout","mouseover"]);sm("onMouseLeave",["mouseout","mouseover"]);sm("onPointerEnter",["pointerout","pointerover"]);sm("onPointerLeave",["pointerout","pointerover"]);kd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kd("onBeforeInput",["compositionend","keypress","textInput","paste"]);kd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ox="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oK=new Set("cancel close invalid load scroll toggle".split(" ").concat(ox));function x4(t,s,n){var r=t.type||"unknown-event";t.currentTarget=n,iW(r,s,void 0,t),t.currentTarget=null}function FI(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(s)for(var l=r.length-1;0<=l;l--){var o=r[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;x4(a,o,d),i=c}else for(l=0;l<r.length;l++){if(o=r[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;x4(a,o,d),i=c}}}if(Av)throw t=u1,Av=!1,u1=null,t}function Is(t,s){var n=s[b1];n===void 0&&(n=s[b1]=new Set);var r=t+"__bubble";n.has(r)||(LI(s,t,2,!1),n.add(r))}function nN(t,s,n){var r=0;s&&(r|=4),LI(n,t,r,s)}var mg="_reactListening"+Math.random().toString(36).slice(2);function Yx(t){if(!t[mg]){t[mg]=!0,G6.forEach(function(n){n!=="selectionchange"&&(oK.has(n)||nN(n,!1,t),nN(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[mg]||(s[mg]=!0,nN("selectionchange",!1,s))}}function LI(t,s,n,r){switch(NI(s)){case 1:var a=NW;break;case 4:a=wW;break;default:a=GC}n=a.bind(null,s,n,t),a=void 0,!d1||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(s,n,{capture:!0,passive:a}):t.addEventListener(s,n,!0):a!==void 0?t.addEventListener(s,n,{passive:a}):t.addEventListener(s,n,!1)}function rN(t,s,n,r,a){var i=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Dc(o),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}o=o.parentNode}}r=r.return}oI(function(){var d=i,u=UC(n),m=[];e:{var h=$I.get(t);if(h!==void 0){var x=KC,p=t;switch(t){case"keypress":if(rv(n)===0)break e;case"keydown":case"keyup":x=FW;break;case"focusin":p="focus",x=Xb;break;case"focusout":p="blur",x=Xb;break;case"beforeblur":case"afterblur":x=Xb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=s4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=kW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=VW;break;case MI:case _I:case RI:x=TW;break;case II:x=zW;break;case"scroll":x=SW;break;case"wheel":x=HW;break;case"copy":case"cut":case"paste":x=EW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=r4}var f=(s&4)!==0,j=!f&&t==="scroll",g=f?h!==null?h+"Capture":null:h;f=[];for(var y=d,v;y!==null;){v=y;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=zx(y,g),w!=null&&f.push(Qx(y,w,v)))),j)break;y=y.return}0<f.length&&(h=new x(h,p,null,n,u),m.push({event:h,listeners:f}))}}if(!(s&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&n!==o1&&(p=n.relatedTarget||n.fromElement)&&(Dc(p)||p[Ml]))break e;if((x||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,x?(p=n.relatedTarget||n.toElement,x=d,p=p?Dc(p):null,p!==null&&(j=Pd(p),p!==j||p.tag!==5&&p.tag!==6)&&(p=null)):(x=null,p=d),x!==p)){if(f=s4,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(f=r4,w="onPointerLeave",g="onPointerEnter",y="pointer"),j=x==null?h:ou(x),v=p==null?h:ou(p),h=new f(w,y+"leave",x,n,u),h.target=j,h.relatedTarget=v,w=null,Dc(u)===d&&(f=new f(g,y+"enter",p,n,u),f.target=v,f.relatedTarget=j,w=f),j=w,x&&p)t:{for(f=x,g=p,y=0,v=f;v;v=Vd(v))y++;for(v=0,w=g;w;w=Vd(w))v++;for(;0<y-v;)f=Vd(f),y--;for(;0<v-y;)g=Vd(g),v--;for(;y--;){if(f===g||g!==null&&f===g.alternate)break t;f=Vd(f),g=Vd(g)}f=null}else f=null;x!==null&&p4(m,h,x,f,!1),p!==null&&j!==null&&p4(m,j,p,f,!0)}}e:{if(h=d?ou(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var N=ZW;else if(l4(h))if(AI)N=sK;else{N=eK;var S=JW}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=tK);if(N&&(N=N(t,d))){PI(m,N,n,u);break e}S&&S(t,h,d),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&n1(h,"number",h.value)}switch(S=d?ou(d):window,t){case"focusin":(l4(S)||S.contentEditable==="true")&&(iu=S,p1=d,wx=null);break;case"focusout":wx=p1=iu=null;break;case"mousedown":f1=!0;break;case"contextmenu":case"mouseup":case"dragend":f1=!1,m4(m,n,u);break;case"selectionchange":if(aK)break;case"keydown":case"keyup":m4(m,n,u)}var k;if(QC)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else au?CI(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(SI&&n.locale!=="ko"&&(au||T!=="onCompositionStart"?T==="onCompositionEnd"&&au&&(k=wI()):(So=u,WC="value"in So?So.value:So.textContent,au=!0)),S=Mv(d,T),0<S.length&&(T=new n4(T,t,null,n,u),m.push({event:T,listeners:S}),k?T.data=k:(k=kI(n),k!==null&&(T.data=k)))),(k=WW?KW(t,n):YW(t,n))&&(d=Mv(d,"onBeforeInput"),0<d.length&&(u=new n4("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=k))}FI(m,s)})}function Qx(t,s,n){return{instance:t,listener:s,currentTarget:n}}function Mv(t,s){for(var n=s+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=zx(t,n),i!=null&&r.unshift(Qx(t,i,a)),i=zx(t,s),i!=null&&r.push(Qx(t,i,a))),t=t.return}return r}function Vd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p4(t,s,n,r,a){for(var i=s._reactName,l=[];n!==null&&n!==r;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,a?(c=zx(n,i),c!=null&&l.unshift(Qx(n,c,o))):a||(c=zx(n,i),c!=null&&l.push(Qx(n,c,o)))),n=n.return}l.length!==0&&t.push({event:s,listeners:l})}var cK=/\r\n?/g,dK=/\u0000|\uFFFD/g;function f4(t){return(typeof t=="string"?t:""+t).replace(cK,`
`).replace(dK,"")}function hg(t,s,n){if(s=f4(s),f4(t)!==s&&n)throw Error(Ve(425))}function _v(){}var g1=null,v1=null;function y1(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var j1=typeof setTimeout=="function"?setTimeout:void 0,uK=typeof clearTimeout=="function"?clearTimeout:void 0,g4=typeof Promise=="function"?Promise:void 0,mK=typeof queueMicrotask=="function"?queueMicrotask:typeof g4<"u"?function(t){return g4.resolve(null).then(t).catch(hK)}:j1;function hK(t){setTimeout(function(){throw t})}function aN(t,s){var n=s,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),Gx(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Gx(s)}function Mo(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function v4(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var ah=Math.random().toString(36).slice(2),Ti="__reactFiber$"+ah,Xx="__reactProps$"+ah,Ml="__reactContainer$"+ah,b1="__reactEvents$"+ah,xK="__reactListeners$"+ah,pK="__reactHandles$"+ah;function Dc(t){var s=t[Ti];if(s)return s;for(var n=t.parentNode;n;){if(s=n[Ml]||n[Ti]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=v4(t);t!==null;){if(n=t[Ti])return n;t=v4(t)}return s}t=n,n=t.parentNode}return null}function gf(t){return t=t[Ti]||t[Ml],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ou(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ve(33))}function _j(t){return t[Xx]||null}var N1=[],cu=-1;function rc(t){return{current:t}}function Us(t){0>cu||(t.current=N1[cu],N1[cu]=null,cu--)}function Os(t,s){cu++,N1[cu]=t.current,t.current=s}var Go={},lr=rc(Go),_r=rc(!1),rd=Go;function nm(t,s){var n=t.type.contextTypes;if(!n)return Go;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=s[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Rr(t){return t=t.childContextTypes,t!=null}function Rv(){Us(_r),Us(lr)}function y4(t,s,n){if(lr.current!==Go)throw Error(Ve(168));Os(lr,s),Os(_r,n)}function BI(t,s,n){var r=t.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(Ve(108,JG(t)||"Unknown",a));return Zs({},n,r)}function Iv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Go,rd=lr.current,Os(lr,t),Os(_r,_r.current),!0}function j4(t,s,n){var r=t.stateNode;if(!r)throw Error(Ve(169));n?(t=BI(t,s,rd),r.__reactInternalMemoizedMergedChildContext=t,Us(_r),Us(lr),Os(lr,t)):Us(_r),Os(_r,n)}var ml=null,Rj=!1,iN=!1;function VI(t){ml===null?ml=[t]:ml.push(t)}function fK(t){Rj=!0,VI(t)}function ac(){if(!iN&&ml!==null){iN=!0;var t=0,s=ys;try{var n=ml;for(ys=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ml=null,Rj=!1}catch(a){throw ml!==null&&(ml=ml.slice(t+1)),mI(zC,ac),a}finally{ys=s,iN=!1}}return null}var du=[],uu=0,$v=null,Fv=0,va=[],ya=0,ad=null,pl=1,fl="";function bc(t,s){du[uu++]=Fv,du[uu++]=$v,$v=t,Fv=s}function UI(t,s,n){va[ya++]=pl,va[ya++]=fl,va[ya++]=ad,ad=t;var r=pl;t=fl;var a=32-ti(r)-1;r&=~(1<<a),n+=1;var i=32-ti(s)+a;if(30<i){var l=a-a%5;i=(r&(1<<l)-1).toString(32),r>>=l,a-=l,pl=1<<32-ti(s)+a|n<<a|r,fl=i+t}else pl=1<<i|n<<a|r,fl=t}function ZC(t){t.return!==null&&(bc(t,1),UI(t,1,0))}function JC(t){for(;t===$v;)$v=du[--uu],du[uu]=null,Fv=du[--uu],du[uu]=null;for(;t===ad;)ad=va[--ya],va[ya]=null,fl=va[--ya],va[ya]=null,pl=va[--ya],va[ya]=null}var Xr=null,Qr=null,Hs=!1,Qa=null;function zI(t,s){var n=Na(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function b4(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Xr=t,Qr=Mo(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Xr=t,Qr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=ad!==null?{id:pl,overflow:fl}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=Na(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,Xr=t,Qr=null,!0):!1;default:return!1}}function w1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function S1(t){if(Hs){var s=Qr;if(s){var n=s;if(!b4(t,s)){if(w1(t))throw Error(Ve(418));s=Mo(n.nextSibling);var r=Xr;s&&b4(t,s)?zI(r,n):(t.flags=t.flags&-4097|2,Hs=!1,Xr=t)}}else{if(w1(t))throw Error(Ve(418));t.flags=t.flags&-4097|2,Hs=!1,Xr=t}}}function N4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xr=t}function xg(t){if(t!==Xr)return!1;if(!Hs)return N4(t),Hs=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!y1(t.type,t.memoizedProps)),s&&(s=Qr)){if(w1(t))throw qI(),Error(Ve(418));for(;s;)zI(t,s),s=Mo(s.nextSibling)}if(N4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ve(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){Qr=Mo(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}Qr=null}}else Qr=Xr?Mo(t.stateNode.nextSibling):null;return!0}function qI(){for(var t=Qr;t;)t=Mo(t.nextSibling)}function rm(){Qr=Xr=null,Hs=!1}function ek(t){Qa===null?Qa=[t]:Qa.push(t)}var gK=ql.ReactCurrentBatchConfig;function $h(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ve(309));var r=n.stateNode}if(!r)throw Error(Ve(147,t));var a=r,i=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===i?s.ref:(s=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},s._stringRef=i,s)}if(typeof t!="string")throw Error(Ve(284));if(!n._owner)throw Error(Ve(290,t))}return t}function pg(t,s){throw t=Object.prototype.toString.call(s),Error(Ve(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function w4(t){var s=t._init;return s(t._payload)}function HI(t){function s(g,y){if(t){var v=g.deletions;v===null?(g.deletions=[y],g.flags|=16):v.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)s(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function a(g,y){return g=$o(g,y),g.index=0,g.sibling=null,g}function i(g,y,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<y?(g.flags|=2,y):v):(g.flags|=2,y)):(g.flags|=1048576,y)}function l(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,y,v,w){return y===null||y.tag!==6?(y=hN(v,g.mode,w),y.return=g,y):(y=a(y,v),y.return=g,y)}function c(g,y,v,w){var N=v.type;return N===ru?u(g,y,v.props.children,w,v.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ro&&w4(N)===y.type)?(w=a(y,v.props),w.ref=$h(g,y,v),w.return=g,w):(w=uv(v.type,v.key,v.props,null,g.mode,w),w.ref=$h(g,y,v),w.return=g,w)}function d(g,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=xN(v,g.mode,w),y.return=g,y):(y=a(y,v.children||[]),y.return=g,y)}function u(g,y,v,w,N){return y===null||y.tag!==7?(y=Zc(v,g.mode,w,N),y.return=g,y):(y=a(y,v),y.return=g,y)}function m(g,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=hN(""+y,g.mode,v),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rg:return v=uv(y.type,y.key,y.props,null,g.mode,v),v.ref=$h(g,null,y),v.return=g,v;case nu:return y=xN(y,g.mode,v),y.return=g,y;case ro:var w=y._init;return m(g,w(y._payload),v)}if(ix(y)||Oh(y))return y=Zc(y,g.mode,v,null),y.return=g,y;pg(g,y)}return null}function h(g,y,v,w){var N=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:o(g,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rg:return v.key===N?c(g,y,v,w):null;case nu:return v.key===N?d(g,y,v,w):null;case ro:return N=v._init,h(g,y,N(v._payload),w)}if(ix(v)||Oh(v))return N!==null?null:u(g,y,v,w,null);pg(g,v)}return null}function x(g,y,v,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,o(y,g,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rg:return g=g.get(w.key===null?v:w.key)||null,c(y,g,w,N);case nu:return g=g.get(w.key===null?v:w.key)||null,d(y,g,w,N);case ro:var S=w._init;return x(g,y,v,S(w._payload),N)}if(ix(w)||Oh(w))return g=g.get(v)||null,u(y,g,w,N,null);pg(y,w)}return null}function p(g,y,v,w){for(var N=null,S=null,k=y,T=y=0,C=null;k!==null&&T<v.length;T++){k.index>T?(C=k,k=null):C=k.sibling;var P=h(g,k,v[T],w);if(P===null){k===null&&(k=C);break}t&&k&&P.alternate===null&&s(g,k),y=i(P,y,T),S===null?N=P:S.sibling=P,S=P,k=C}if(T===v.length)return n(g,k),Hs&&bc(g,T),N;if(k===null){for(;T<v.length;T++)k=m(g,v[T],w),k!==null&&(y=i(k,y,T),S===null?N=k:S.sibling=k,S=k);return Hs&&bc(g,T),N}for(k=r(g,k);T<v.length;T++)C=x(k,g,T,v[T],w),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?T:C.key),y=i(C,y,T),S===null?N=C:S.sibling=C,S=C);return t&&k.forEach(function($){return s(g,$)}),Hs&&bc(g,T),N}function f(g,y,v,w){var N=Oh(v);if(typeof N!="function")throw Error(Ve(150));if(v=N.call(v),v==null)throw Error(Ve(151));for(var S=N=null,k=y,T=y=0,C=null,P=v.next();k!==null&&!P.done;T++,P=v.next()){k.index>T?(C=k,k=null):C=k.sibling;var $=h(g,k,P.value,w);if($===null){k===null&&(k=C);break}t&&k&&$.alternate===null&&s(g,k),y=i($,y,T),S===null?N=$:S.sibling=$,S=$,k=C}if(P.done)return n(g,k),Hs&&bc(g,T),N;if(k===null){for(;!P.done;T++,P=v.next())P=m(g,P.value,w),P!==null&&(y=i(P,y,T),S===null?N=P:S.sibling=P,S=P);return Hs&&bc(g,T),N}for(k=r(g,k);!P.done;T++,P=v.next())P=x(k,g,T,P.value,w),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?T:P.key),y=i(P,y,T),S===null?N=P:S.sibling=P,S=P);return t&&k.forEach(function(V){return s(g,V)}),Hs&&bc(g,T),N}function j(g,y,v,w){if(typeof v=="object"&&v!==null&&v.type===ru&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case rg:e:{for(var N=v.key,S=y;S!==null;){if(S.key===N){if(N=v.type,N===ru){if(S.tag===7){n(g,S.sibling),y=a(S,v.props.children),y.return=g,g=y;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ro&&w4(N)===S.type){n(g,S.sibling),y=a(S,v.props),y.ref=$h(g,S,v),y.return=g,g=y;break e}n(g,S);break}else s(g,S);S=S.sibling}v.type===ru?(y=Zc(v.props.children,g.mode,w,v.key),y.return=g,g=y):(w=uv(v.type,v.key,v.props,null,g.mode,w),w.ref=$h(g,y,v),w.return=g,g=w)}return l(g);case nu:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(g,y.sibling),y=a(y,v.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else s(g,y);y=y.sibling}y=xN(v,g.mode,w),y.return=g,g=y}return l(g);case ro:return S=v._init,j(g,y,S(v._payload),w)}if(ix(v))return p(g,y,v,w);if(Oh(v))return f(g,y,v,w);pg(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(g,y.sibling),y=a(y,v),y.return=g,g=y):(n(g,y),y=hN(v,g.mode,w),y.return=g,g=y),l(g)):n(g,y)}return j}var am=HI(!0),GI=HI(!1),Lv=rc(null),Bv=null,mu=null,tk=null;function sk(){tk=mu=Bv=null}function nk(t){var s=Lv.current;Us(Lv),t._currentValue=s}function C1(t,s,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===n)break;t=t.return}}function Mu(t,s){Bv=t,tk=mu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Er=!0),t.firstContext=null)}function Ta(t){var s=t._currentValue;if(tk!==t)if(t={context:t,memoizedValue:s,next:null},mu===null){if(Bv===null)throw Error(Ve(308));mu=t,Bv.dependencies={lanes:0,firstContext:t}}else mu=mu.next=t;return s}var Ec=null;function rk(t){Ec===null?Ec=[t]:Ec.push(t)}function WI(t,s,n,r){var a=s.interleaved;return a===null?(n.next=n,rk(s)):(n.next=a.next,a.next=n),s.interleaved=n,_l(t,r)}function _l(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ao=!1;function ak(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KI(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nl(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function _o(t,s,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xt&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,_l(t,n)}return a=r.interleaved,a===null?(s.next=s,rk(r)):(s.next=a.next,a.next=s),r.interleaved=s,_l(t,n)}function av(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,qC(t,n)}}function S4(t,s){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=s:i=i.next=s}else a=i=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function Vv(t,s,n,r){var a=t.updateQueue;ao=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,x=o.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,f=o;switch(h=s,x=n,f.tag){case 1:if(p=f.payload,typeof p=="function"){m=p.call(x,m,h);break e}m=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=f.payload,h=typeof p=="function"?p.call(x,m,h):p,h==null)break e;m=Zs({},m,h);break e;case 2:ao=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else x={eventTime:x,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=x,c=m):u=u.next=x,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,s=a.shared.interleaved,s!==null){a=s;do l|=a.lane,a=a.next;while(a!==s)}else i===null&&(a.shared.lanes=0);ld|=l,t.lanes=l,t.memoizedState=m}}function C4(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var r=t[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ve(191,a));a.call(r)}}}var vf={},Ri=rc(vf),Zx=rc(vf),Jx=rc(vf);function Oc(t){if(t===vf)throw Error(Ve(174));return t}function ik(t,s){switch(Os(Jx,s),Os(Zx,t),Os(Ri,vf),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:a1(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=a1(s,t)}Us(Ri),Os(Ri,s)}function im(){Us(Ri),Us(Zx),Us(Jx)}function YI(t){Oc(Jx.current);var s=Oc(Ri.current),n=a1(s,t.type);s!==n&&(Os(Zx,t),Os(Ri,n))}function lk(t){Zx.current===t&&(Us(Ri),Us(Zx))}var Ys=rc(0);function Uv(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var lN=[];function ok(){for(var t=0;t<lN.length;t++)lN[t]._workInProgressVersionPrimary=null;lN.length=0}var iv=ql.ReactCurrentDispatcher,oN=ql.ReactCurrentBatchConfig,id=0,Xs=null,En=null,Fn=null,zv=!1,Sx=!1,ep=0,vK=0;function Qn(){throw Error(Ve(321))}function ck(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!di(t[n],s[n]))return!1;return!0}function dk(t,s,n,r,a,i){if(id=i,Xs=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,iv.current=t===null||t.memoizedState===null?NK:wK,t=n(r,a),Sx){i=0;do{if(Sx=!1,ep=0,25<=i)throw Error(Ve(301));i+=1,Fn=En=null,s.updateQueue=null,iv.current=SK,t=n(r,a)}while(Sx)}if(iv.current=qv,s=En!==null&&En.next!==null,id=0,Fn=En=Xs=null,zv=!1,s)throw Error(Ve(300));return t}function uk(){var t=ep!==0;return ep=0,t}function Si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Xs.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function Da(){if(En===null){var t=Xs.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var s=Fn===null?Xs.memoizedState:Fn.next;if(s!==null)Fn=s,En=t;else{if(t===null)throw Error(Ve(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Fn===null?Xs.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function tp(t,s){return typeof s=="function"?s(t):s}function cN(t){var s=Da(),n=s.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=t;var r=En,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((id&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=r):c=c.next=m,Xs.lanes|=u,ld|=u}d=d.next}while(d!==null&&d!==i);c===null?l=r:c.next=o,di(r,s.memoizedState)||(Er=!0),s.memoizedState=r,s.baseState=l,s.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do i=a.lane,Xs.lanes|=i,ld|=i,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function dN(t){var s=Da(),n=s.queue;if(n===null)throw Error(Ve(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=s.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);di(i,s.memoizedState)||(Er=!0),s.memoizedState=i,s.baseQueue===null&&(s.baseState=i),n.lastRenderedState=i}return[i,r]}function QI(){}function XI(t,s){var n=Xs,r=Da(),a=s(),i=!di(r.memoizedState,a);if(i&&(r.memoizedState=a,Er=!0),r=r.queue,mk(e3.bind(null,n,r,t),[t]),r.getSnapshot!==s||i||Fn!==null&&Fn.memoizedState.tag&1){if(n.flags|=2048,sp(9,JI.bind(null,n,r,a,s),void 0,null),Bn===null)throw Error(Ve(349));id&30||ZI(n,s,a)}return a}function ZI(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=Xs.updateQueue,s===null?(s={lastEffect:null,stores:null},Xs.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function JI(t,s,n,r){s.value=n,s.getSnapshot=r,t3(s)&&s3(t)}function e3(t,s,n){return n(function(){t3(s)&&s3(t)})}function t3(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!di(t,n)}catch{return!0}}function s3(t){var s=_l(t,1);s!==null&&si(s,t,1,-1)}function k4(t){var s=Si();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:t},s.queue=t,t=t.dispatch=bK.bind(null,Xs,t),[s.memoizedState,t]}function sp(t,s,n,r){return t={tag:t,create:s,destroy:n,deps:r,next:null},s=Xs.updateQueue,s===null?(s={lastEffect:null,stores:null},Xs.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,s.lastEffect=t)),t}function n3(){return Da().memoizedState}function lv(t,s,n,r){var a=Si();Xs.flags|=t,a.memoizedState=sp(1|s,n,void 0,r===void 0?null:r)}function Ij(t,s,n,r){var a=Da();r=r===void 0?null:r;var i=void 0;if(En!==null){var l=En.memoizedState;if(i=l.destroy,r!==null&&ck(r,l.deps)){a.memoizedState=sp(s,n,i,r);return}}Xs.flags|=t,a.memoizedState=sp(1|s,n,i,r)}function P4(t,s){return lv(8390656,8,t,s)}function mk(t,s){return Ij(2048,8,t,s)}function r3(t,s){return Ij(4,2,t,s)}function a3(t,s){return Ij(4,4,t,s)}function i3(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function l3(t,s,n){return n=n!=null?n.concat([t]):null,Ij(4,4,i3.bind(null,s,t),n)}function hk(){}function o3(t,s){var n=Da();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&ck(s,r[1])?r[0]:(n.memoizedState=[t,s],t)}function c3(t,s){var n=Da();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&ck(s,r[1])?r[0]:(t=t(),n.memoizedState=[t,s],t)}function d3(t,s,n){return id&21?(di(n,s)||(n=pI(),Xs.lanes|=n,ld|=n,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Er=!0),t.memoizedState=n)}function yK(t,s){var n=ys;ys=n!==0&&4>n?n:4,t(!0);var r=oN.transition;oN.transition={};try{t(!1),s()}finally{ys=n,oN.transition=r}}function u3(){return Da().memoizedState}function jK(t,s,n){var r=Io(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},m3(t))h3(s,n);else if(n=WI(t,s,n,r),n!==null){var a=vr();si(n,t,r,a),x3(n,s,r)}}function bK(t,s,n){var r=Io(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(m3(t))h3(s,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=s.lastRenderedReducer,i!==null))try{var l=s.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,di(o,l)){var c=s.interleaved;c===null?(a.next=a,rk(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}n=WI(t,s,a,r),n!==null&&(a=vr(),si(n,t,r,a),x3(n,s,r))}}function m3(t){var s=t.alternate;return t===Xs||s!==null&&s===Xs}function h3(t,s){Sx=zv=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function x3(t,s,n){if(n&4194240){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,qC(t,n)}}var qv={readContext:Ta,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},NK={readContext:Ta,useCallback:function(t,s){return Si().memoizedState=[t,s===void 0?null:s],t},useContext:Ta,useEffect:P4,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,lv(4194308,4,i3.bind(null,s,t),n)},useLayoutEffect:function(t,s){return lv(4194308,4,t,s)},useInsertionEffect:function(t,s){return lv(4,2,t,s)},useMemo:function(t,s){var n=Si();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var r=Si();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=jK.bind(null,Xs,t),[r.memoizedState,t]},useRef:function(t){var s=Si();return t={current:t},s.memoizedState=t},useState:k4,useDebugValue:hk,useDeferredValue:function(t){return Si().memoizedState=t},useTransition:function(){var t=k4(!1),s=t[0];return t=yK.bind(null,t[1]),Si().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var r=Xs,a=Si();if(Hs){if(n===void 0)throw Error(Ve(407));n=n()}else{if(n=s(),Bn===null)throw Error(Ve(349));id&30||ZI(r,s,n)}a.memoizedState=n;var i={value:n,getSnapshot:s};return a.queue=i,P4(e3.bind(null,r,i,t),[t]),r.flags|=2048,sp(9,JI.bind(null,r,i,n,s),void 0,null),n},useId:function(){var t=Si(),s=Bn.identifierPrefix;if(Hs){var n=fl,r=pl;n=(r&~(1<<32-ti(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=ep++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=vK++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},wK={readContext:Ta,useCallback:o3,useContext:Ta,useEffect:mk,useImperativeHandle:l3,useInsertionEffect:r3,useLayoutEffect:a3,useMemo:c3,useReducer:cN,useRef:n3,useState:function(){return cN(tp)},useDebugValue:hk,useDeferredValue:function(t){var s=Da();return d3(s,En.memoizedState,t)},useTransition:function(){var t=cN(tp)[0],s=Da().memoizedState;return[t,s]},useMutableSource:QI,useSyncExternalStore:XI,useId:u3,unstable_isNewReconciler:!1},SK={readContext:Ta,useCallback:o3,useContext:Ta,useEffect:mk,useImperativeHandle:l3,useInsertionEffect:r3,useLayoutEffect:a3,useMemo:c3,useReducer:dN,useRef:n3,useState:function(){return dN(tp)},useDebugValue:hk,useDeferredValue:function(t){var s=Da();return En===null?s.memoizedState=t:d3(s,En.memoizedState,t)},useTransition:function(){var t=dN(tp)[0],s=Da().memoizedState;return[t,s]},useMutableSource:QI,useSyncExternalStore:XI,useId:u3,unstable_isNewReconciler:!1};function qa(t,s){if(t&&t.defaultProps){s=Zs({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function k1(t,s,n,r){s=t.memoizedState,n=n(r,s),n=n==null?s:Zs({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $j={isMounted:function(t){return(t=t._reactInternals)?Pd(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var r=vr(),a=Io(t),i=Nl(r,a);i.payload=s,n!=null&&(i.callback=n),s=_o(t,i,a),s!==null&&(si(s,t,a,r),av(s,t,a))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var r=vr(),a=Io(t),i=Nl(r,a);i.tag=1,i.payload=s,n!=null&&(i.callback=n),s=_o(t,i,a),s!==null&&(si(s,t,a,r),av(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=vr(),r=Io(t),a=Nl(n,r);a.tag=2,s!=null&&(a.callback=s),s=_o(t,a,r),s!==null&&(si(s,t,r,n),av(s,t,r))}};function A4(t,s,n,r,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,l):s.prototype&&s.prototype.isPureReactComponent?!Kx(n,r)||!Kx(a,i):!0}function p3(t,s,n){var r=!1,a=Go,i=s.contextType;return typeof i=="object"&&i!==null?i=Ta(i):(a=Rr(s)?rd:lr.current,r=s.contextTypes,i=(r=r!=null)?nm(t,a):Go),s=new s(n,i),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=$j,t.stateNode=s,s._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),s}function T4(t,s,n,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==t&&$j.enqueueReplaceState(s,s.state,null)}function P1(t,s,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},ak(t);var i=s.contextType;typeof i=="object"&&i!==null?a.context=Ta(i):(i=Rr(s)?rd:lr.current,a.context=nm(t,i)),a.state=t.memoizedState,i=s.getDerivedStateFromProps,typeof i=="function"&&(k1(t,s,i,n),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&$j.enqueueReplaceState(a,a.state,null),Vv(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function lm(t,s){try{var n="",r=s;do n+=ZG(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:s,stack:a,digest:null}}function uN(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function A1(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var CK=typeof WeakMap=="function"?WeakMap:Map;function f3(t,s,n){n=Nl(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){Gv||(Gv=!0,F1=r),A1(t,s)},n}function g3(t,s,n){n=Nl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){A1(t,s)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){A1(t,s),typeof r!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})}),n}function D4(t,s,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CK;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),t=LK.bind(null,t,s,n),s.then(t,t))}function E4(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function O4(t,s,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=Nl(-1,1),s.tag=2,_o(n,s,1))),n.lanes|=1),t)}var kK=ql.ReactCurrentOwner,Er=!1;function ur(t,s,n,r){s.child=t===null?GI(s,null,n,r):am(s,t.child,n,r)}function M4(t,s,n,r,a){n=n.render;var i=s.ref;return Mu(s,a),r=dk(t,s,n,r,i,a),n=uk(),t!==null&&!Er?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Rl(t,s,a)):(Hs&&n&&ZC(s),s.flags|=1,ur(t,s,r,a),s.child)}function _4(t,s,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!bk(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=i,v3(t,s,i,r,a)):(t=uv(n.type,null,r,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Kx,n(l,r)&&t.ref===s.ref)return Rl(t,s,a)}return s.flags|=1,t=$o(i,r),t.ref=s.ref,t.return=s,s.child=t}function v3(t,s,n,r,a){if(t!==null){var i=t.memoizedProps;if(Kx(i,r)&&t.ref===s.ref)if(Er=!1,s.pendingProps=r=i,(t.lanes&a)!==0)t.flags&131072&&(Er=!0);else return s.lanes=t.lanes,Rl(t,s,a)}return T1(t,s,n,r,a)}function y3(t,s,n){var r=s.pendingProps,a=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Os(xu,zr),zr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Os(xu,zr),zr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Os(xu,zr),zr|=r}else i!==null?(r=i.baseLanes|n,s.memoizedState=null):r=n,Os(xu,zr),zr|=r;return ur(t,s,a,n),s.child}function j3(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function T1(t,s,n,r,a){var i=Rr(n)?rd:lr.current;return i=nm(s,i),Mu(s,a),n=dk(t,s,n,r,i,a),r=uk(),t!==null&&!Er?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Rl(t,s,a)):(Hs&&r&&ZC(s),s.flags|=1,ur(t,s,n,a),s.child)}function R4(t,s,n,r,a){if(Rr(n)){var i=!0;Iv(s)}else i=!1;if(Mu(s,a),s.stateNode===null)ov(t,s),p3(s,n,r),P1(s,n,r,a),r=!0;else if(t===null){var l=s.stateNode,o=s.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ta(d):(d=Rr(n)?rd:lr.current,d=nm(s,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||c!==d)&&T4(s,l,r,d),ao=!1;var h=s.memoizedState;l.state=h,Vv(s,r,l,a),c=s.memoizedState,o!==r||h!==c||_r.current||ao?(typeof u=="function"&&(k1(s,n,u,r),c=s.memoizedState),(o=ao||A4(s,n,o,r,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(s.flags|=4194308)):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=c),l.props=r,l.state=c,l.context=d,r=o):(typeof l.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{l=s.stateNode,KI(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:qa(s.type,o),l.props=d,m=s.pendingProps,h=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ta(c):(c=Rr(n)?rd:lr.current,c=nm(s,c));var x=n.getDerivedStateFromProps;(u=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&T4(s,l,r,c),ao=!1,h=s.memoizedState,l.state=h,Vv(s,r,l,a);var p=s.memoizedState;o!==m||h!==p||_r.current||ao?(typeof x=="function"&&(k1(s,n,x,r),p=s.memoizedState),(d=ao||A4(s,n,d,r,h,p,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,p,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,p,c)),typeof l.componentDidUpdate=="function"&&(s.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=p),l.props=r,l.state=p,l.context=c,r=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),r=!1)}return D1(t,s,n,r,i,a)}function D1(t,s,n,r,a,i){j3(t,s);var l=(s.flags&128)!==0;if(!r&&!l)return a&&j4(s,n,!1),Rl(t,s,i);r=s.stateNode,kK.current=s;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,t!==null&&l?(s.child=am(s,t.child,null,i),s.child=am(s,null,o,i)):ur(t,s,o,i),s.memoizedState=r.state,a&&j4(s,n,!0),s.child}function b3(t){var s=t.stateNode;s.pendingContext?y4(t,s.pendingContext,s.pendingContext!==s.context):s.context&&y4(t,s.context,!1),ik(t,s.containerInfo)}function I4(t,s,n,r,a){return rm(),ek(a),s.flags|=256,ur(t,s,n,r),s.child}var E1={dehydrated:null,treeContext:null,retryLane:0};function O1(t){return{baseLanes:t,cachePool:null,transitions:null}}function N3(t,s,n){var r=s.pendingProps,a=Ys.current,i=!1,l=(s.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Os(Ys,a&1),t===null)return S1(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(l=r.children,t=r.fallback,i?(r=s.mode,i=s.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Bj(l,r,0,null),t=Zc(t,r,n,null),i.return=s,t.return=s,i.sibling=t,s.child=i,s.child.memoizedState=O1(n),s.memoizedState=E1,t):xk(s,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return PK(t,s,l,r,o,a,n);if(i){i=r.fallback,l=s.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=c,s.deletions=null):(r=$o(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=$o(o,i):(i=Zc(i,l,n,null),i.flags|=2),i.return=s,r.return=s,r.sibling=i,s.child=r,r=i,i=s.child,l=t.child.memoizedState,l=l===null?O1(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~n,s.memoizedState=E1,r}return i=t.child,t=i.sibling,r=$o(i,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=r,s.memoizedState=null,r}function xk(t,s){return s=Bj({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function fg(t,s,n,r){return r!==null&&ek(r),am(s,t.child,null,n),t=xk(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function PK(t,s,n,r,a,i,l){if(n)return s.flags&256?(s.flags&=-257,r=uN(Error(Ve(422))),fg(t,s,l,r)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(i=r.fallback,a=s.mode,r=Bj({mode:"visible",children:r.children},a,0,null),i=Zc(i,a,l,null),i.flags|=2,r.return=s,i.return=s,r.sibling=i,s.child=r,s.mode&1&&am(s,t.child,null,l),s.child.memoizedState=O1(l),s.memoizedState=E1,i);if(!(s.mode&1))return fg(t,s,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(Ve(419)),r=uN(i,r,void 0),fg(t,s,l,r)}if(o=(l&t.childLanes)!==0,Er||o){if(r=Bn,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,_l(t,a),si(r,t,a,-1))}return jk(),r=uN(Error(Ve(421))),fg(t,s,l,r)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=BK.bind(null,t),a._reactRetry=s,null):(t=i.treeContext,Qr=Mo(a.nextSibling),Xr=s,Hs=!0,Qa=null,t!==null&&(va[ya++]=pl,va[ya++]=fl,va[ya++]=ad,pl=t.id,fl=t.overflow,ad=s),s=xk(s,r.children),s.flags|=4096,s)}function $4(t,s,n){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),C1(t.return,s,n)}function mN(t,s,n,r,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=s,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function w3(t,s,n){var r=s.pendingProps,a=r.revealOrder,i=r.tail;if(ur(t,s,r.children,n),r=Ys.current,r&2)r=r&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$4(t,n,s);else if(t.tag===19)$4(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Os(Ys,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)t=n.alternate,t!==null&&Uv(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),mN(s,!1,a,n,i);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&Uv(t)===null){s.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}mN(s,!0,n,null,i);break;case"together":mN(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ov(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Rl(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),ld|=s.lanes,!(n&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Ve(153));if(s.child!==null){for(t=s.child,n=$o(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=$o(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function AK(t,s,n){switch(s.tag){case 3:b3(s),rm();break;case 5:YI(s);break;case 1:Rr(s.type)&&Iv(s);break;case 4:ik(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;Os(Lv,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(Os(Ys,Ys.current&1),s.flags|=128,null):n&s.child.childLanes?N3(t,s,n):(Os(Ys,Ys.current&1),t=Rl(t,s,n),t!==null?t.sibling:null);Os(Ys,Ys.current&1);break;case 19:if(r=(n&s.childLanes)!==0,t.flags&128){if(r)return w3(t,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Os(Ys,Ys.current),r)break;return null;case 22:case 23:return s.lanes=0,y3(t,s,n)}return Rl(t,s,n)}var S3,M1,C3,k3;S3=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};M1=function(){};C3=function(t,s,n,r){var a=t.memoizedProps;if(a!==r){t=s.stateNode,Oc(Ri.current);var i=null;switch(n){case"input":a=t1(t,a),r=t1(t,r),i=[];break;case"select":a=Zs({},a,{value:void 0}),r=Zs({},r,{value:void 0}),i=[];break;case"textarea":a=r1(t,a),r=r1(t,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_v)}i1(n,r);var l;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vx.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vx.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Is("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(s.updateQueue=d)&&(s.flags|=4)}};k3=function(t,s,n,r){n!==r&&(s.flags|=4)};function Fh(t,s){if(!Hs)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xn(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(s)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,s}function TK(t,s,n){var r=s.pendingProps;switch(JC(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(s),null;case 1:return Rr(s.type)&&Rv(),Xn(s),null;case 3:return r=s.stateNode,im(),Us(_r),Us(lr),ok(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xg(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Qa!==null&&(V1(Qa),Qa=null))),M1(t,s),Xn(s),null;case 5:lk(s);var a=Oc(Jx.current);if(n=s.type,t!==null&&s.stateNode!=null)C3(t,s,n,r,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(Ve(166));return Xn(s),null}if(t=Oc(Ri.current),xg(s)){r=s.stateNode,n=s.type;var i=s.memoizedProps;switch(r[Ti]=s,r[Xx]=i,t=(s.mode&1)!==0,n){case"dialog":Is("cancel",r),Is("close",r);break;case"iframe":case"object":case"embed":Is("load",r);break;case"video":case"audio":for(a=0;a<ox.length;a++)Is(ox[a],r);break;case"source":Is("error",r);break;case"img":case"image":case"link":Is("error",r),Is("load",r);break;case"details":Is("toggle",r);break;case"input":GT(r,i),Is("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Is("invalid",r);break;case"textarea":KT(r,i),Is("invalid",r)}i1(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&hg(r.textContent,o,t),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&hg(r.textContent,o,t),a=["children",""+o]):Vx.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Is("scroll",r)}switch(n){case"input":ag(r),WT(r,i,!0);break;case"textarea":ag(r),YT(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_v)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),n==="select"&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[Ti]=s,t[Xx]=r,S3(t,s,!1,!1),s.stateNode=t;e:{switch(l=l1(n,r),n){case"dialog":Is("cancel",t),Is("close",t),a=r;break;case"iframe":case"object":case"embed":Is("load",t),a=r;break;case"video":case"audio":for(a=0;a<ox.length;a++)Is(ox[a],t);a=r;break;case"source":Is("error",t),a=r;break;case"img":case"image":case"link":Is("error",t),Is("load",t),a=r;break;case"details":Is("toggle",t),a=r;break;case"input":GT(t,r),a=t1(t,r),Is("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Zs({},r,{value:void 0}),Is("invalid",t);break;case"textarea":KT(t,r),a=r1(t,r),Is("invalid",t);break;default:a=r}i1(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?nI(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tI(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ux(t,c):typeof c=="number"&&Ux(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vx.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Is("scroll",t):c!=null&&FC(t,i,c,l))}switch(n){case"input":ag(t),WT(t,r,!1);break;case"textarea":ag(t),YT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ho(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Tu(t,!!r.multiple,i,!1):r.defaultValue!=null&&Tu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=_v)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Xn(s),null;case 6:if(t&&s.stateNode!=null)k3(t,s,t.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(Ve(166));if(n=Oc(Jx.current),Oc(Ri.current),xg(s)){if(r=s.stateNode,n=s.memoizedProps,r[Ti]=s,(i=r.nodeValue!==n)&&(t=Xr,t!==null))switch(t.tag){case 3:hg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hg(r.nodeValue,n,(t.mode&1)!==0)}i&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ti]=s,s.stateNode=r}return Xn(s),null;case 13:if(Us(Ys),r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Hs&&Qr!==null&&s.mode&1&&!(s.flags&128))qI(),rm(),s.flags|=98560,i=!1;else if(i=xg(s),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ve(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ve(317));i[Ti]=s}else rm(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Xn(s),i=!1}else Qa!==null&&(V1(Qa),Qa=null),i=!0;if(!i)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(t===null||Ys.current&1?Mn===0&&(Mn=3):jk())),s.updateQueue!==null&&(s.flags|=4),Xn(s),null);case 4:return im(),M1(t,s),t===null&&Yx(s.stateNode.containerInfo),Xn(s),null;case 10:return nk(s.type._context),Xn(s),null;case 17:return Rr(s.type)&&Rv(),Xn(s),null;case 19:if(Us(Ys),i=s.memoizedState,i===null)return Xn(s),null;if(r=(s.flags&128)!==0,l=i.rendering,l===null)if(r)Fh(i,!1);else{if(Mn!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(l=Uv(t),l!==null){for(s.flags|=128,Fh(i,!1),r=l.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)i=n,t=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Os(Ys,Ys.current&1|2),s.child}t=t.sibling}i.tail!==null&&hn()>om&&(s.flags|=128,r=!0,Fh(i,!1),s.lanes=4194304)}else{if(!r)if(t=Uv(l),t!==null){if(s.flags|=128,r=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),Fh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Hs)return Xn(s),null}else 2*hn()-i.renderingStartTime>om&&n!==1073741824&&(s.flags|=128,r=!0,Fh(i,!1),s.lanes=4194304);i.isBackwards?(l.sibling=s.child,s.child=l):(n=i.last,n!==null?n.sibling=l:s.child=l,i.last=l)}return i.tail!==null?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=hn(),s.sibling=null,n=Ys.current,Os(Ys,r?n&1|2:n&1),s):(Xn(s),null);case 22:case 23:return yk(),r=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?zr&1073741824&&(Xn(s),s.subtreeFlags&6&&(s.flags|=8192)):Xn(s),null;case 24:return null;case 25:return null}throw Error(Ve(156,s.tag))}function DK(t,s){switch(JC(s),s.tag){case 1:return Rr(s.type)&&Rv(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return im(),Us(_r),Us(lr),ok(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return lk(s),null;case 13:if(Us(Ys),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Ve(340));rm()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Us(Ys),null;case 4:return im(),null;case 10:return nk(s.type._context),null;case 22:case 23:return yk(),null;case 24:return null;default:return null}}var gg=!1,tr=!1,EK=typeof WeakSet=="function"?WeakSet:Set,lt=null;function hu(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){sn(t,s,r)}else n.current=null}function _1(t,s,n){try{n()}catch(r){sn(t,s,r)}}var F4=!1;function OK(t,s){if(g1=Ev,t=EI(),XC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,h=null;t:for(;;){for(var x;m!==n||a!==0&&m.nodeType!==3||(o=l+a),m!==i||r!==0&&m.nodeType!==3||(c=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===t)break t;if(h===n&&++d===a&&(o=l),h===i&&++u===r&&(c=l),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(v1={focusedElem:t,selectionRange:n},Ev=!1,lt=s;lt!==null;)if(s=lt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,lt=t;else for(;lt!==null;){s=lt;try{var p=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var f=p.memoizedProps,j=p.memoizedState,g=s.stateNode,y=g.getSnapshotBeforeUpdate(s.elementType===s.type?f:qa(s.type,f),j);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=s.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ve(163))}}catch(w){sn(s,s.return,w)}if(t=s.sibling,t!==null){t.return=s.return,lt=t;break}lt=s.return}return p=F4,F4=!1,p}function Cx(t,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&_1(s,n,i)}a=a.next}while(a!==r)}}function Fj(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function R1(t){var s=t.ref;if(s!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof s=="function"?s(t):s.current=t}}function P3(t){var s=t.alternate;s!==null&&(t.alternate=null,P3(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Ti],delete s[Xx],delete s[b1],delete s[xK],delete s[pK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function A3(t){return t.tag===5||t.tag===3||t.tag===4}function L4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||A3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function I1(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=_v));else if(r!==4&&(t=t.child,t!==null))for(I1(t,s,n),t=t.sibling;t!==null;)I1(t,s,n),t=t.sibling}function $1(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($1(t,s,n),t=t.sibling;t!==null;)$1(t,s,n),t=t.sibling}var Hn=null,Wa=!1;function Yl(t,s,n){for(n=n.child;n!==null;)T3(t,s,n),n=n.sibling}function T3(t,s,n){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(Dj,n)}catch{}switch(n.tag){case 5:tr||hu(n,s);case 6:var r=Hn,a=Wa;Hn=null,Yl(t,s,n),Hn=r,Wa=a,Hn!==null&&(Wa?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(Wa?(t=Hn,n=n.stateNode,t.nodeType===8?aN(t.parentNode,n):t.nodeType===1&&aN(t,n),Gx(t)):aN(Hn,n.stateNode));break;case 4:r=Hn,a=Wa,Hn=n.stateNode.containerInfo,Wa=!0,Yl(t,s,n),Hn=r,Wa=a;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&_1(n,s,l),a=a.next}while(a!==r)}Yl(t,s,n);break;case 1:if(!tr&&(hu(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){sn(n,s,o)}Yl(t,s,n);break;case 21:Yl(t,s,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Yl(t,s,n),tr=r):Yl(t,s,n);break;default:Yl(t,s,n)}}function B4(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EK),s.forEach(function(r){var a=VK.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function La(t,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=t,l=s,o=l;e:for(;o!==null;){switch(o.tag){case 5:Hn=o.stateNode,Wa=!1;break e;case 3:Hn=o.stateNode.containerInfo,Wa=!0;break e;case 4:Hn=o.stateNode.containerInfo,Wa=!0;break e}o=o.return}if(Hn===null)throw Error(Ve(160));T3(i,l,a),Hn=null,Wa=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){sn(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)D3(s,t),s=s.sibling}function D3(t,s){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(La(s,t),Ni(t),r&4){try{Cx(3,t,t.return),Fj(3,t)}catch(f){sn(t,t.return,f)}try{Cx(5,t,t.return)}catch(f){sn(t,t.return,f)}}break;case 1:La(s,t),Ni(t),r&512&&n!==null&&hu(n,n.return);break;case 5:if(La(s,t),Ni(t),r&512&&n!==null&&hu(n,n.return),t.flags&32){var a=t.stateNode;try{Ux(a,"")}catch(f){sn(t,t.return,f)}}if(r&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=n!==null?n.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Z6(a,i),l1(o,l);var d=l1(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?nI(a,m):u==="dangerouslySetInnerHTML"?tI(a,m):u==="children"?Ux(a,m):FC(a,u,m,d)}switch(o){case"input":s1(a,i);break;case"textarea":J6(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Tu(a,!!i.multiple,x,!1):h!==!!i.multiple&&(i.defaultValue!=null?Tu(a,!!i.multiple,i.defaultValue,!0):Tu(a,!!i.multiple,i.multiple?[]:"",!1))}a[Xx]=i}catch(f){sn(t,t.return,f)}}break;case 6:if(La(s,t),Ni(t),r&4){if(t.stateNode===null)throw Error(Ve(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(f){sn(t,t.return,f)}}break;case 3:if(La(s,t),Ni(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gx(s.containerInfo)}catch(f){sn(t,t.return,f)}break;case 4:La(s,t),Ni(t);break;case 13:La(s,t),Ni(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(gk=hn())),r&4&&B4(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(d=tr)||u,La(s,t),tr=d):La(s,t),Ni(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(lt=t,u=t.child;u!==null;){for(m=lt=u;lt!==null;){switch(h=lt,x=h.child,h.tag){case 0:case 11:case 14:case 15:Cx(4,h,h.return);break;case 1:hu(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{s=r,p.props=s.memoizedProps,p.state=s.memoizedState,p.componentWillUnmount()}catch(f){sn(r,n,f)}}break;case 5:hu(h,h.return);break;case 22:if(h.memoizedState!==null){U4(m);continue}}x!==null?(x.return=h,lt=x):U4(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=sI("display",l))}catch(f){sn(t,t.return,f)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){sn(t,t.return,f)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:La(s,t),Ni(t),r&4&&B4(t);break;case 21:break;default:La(s,t),Ni(t)}}function Ni(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(A3(n)){var r=n;break e}n=n.return}throw Error(Ve(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ux(a,""),r.flags&=-33);var i=L4(t);$1(t,i,a);break;case 3:case 4:var l=r.stateNode.containerInfo,o=L4(t);I1(t,o,l);break;default:throw Error(Ve(161))}}catch(c){sn(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function MK(t,s,n){lt=t,E3(t)}function E3(t,s,n){for(var r=(t.mode&1)!==0;lt!==null;){var a=lt,i=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||gg;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||tr;o=gg;var d=tr;if(gg=l,(tr=c)&&!d)for(lt=a;lt!==null;)l=lt,c=l.child,l.tag===22&&l.memoizedState!==null?z4(a):c!==null?(c.return=l,lt=c):z4(a);for(;i!==null;)lt=i,E3(i),i=i.sibling;lt=a,gg=o,tr=d}V4(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,lt=i):V4(t)}}function V4(t){for(;lt!==null;){var s=lt;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:tr||Fj(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!tr)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:qa(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;i!==null&&C4(s,i,r);break;case 3:var l=s.updateQueue;if(l!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}C4(s,l,n)}break;case 5:var o=s.stateNode;if(n===null&&s.flags&4){n=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Gx(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ve(163))}tr||s.flags&512&&R1(s)}catch(h){sn(s,s.return,h)}}if(s===t){lt=null;break}if(n=s.sibling,n!==null){n.return=s.return,lt=n;break}lt=s.return}}function U4(t){for(;lt!==null;){var s=lt;if(s===t){lt=null;break}var n=s.sibling;if(n!==null){n.return=s.return,lt=n;break}lt=s.return}}function z4(t){for(;lt!==null;){var s=lt;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{Fj(4,s)}catch(c){sn(s,n,c)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(c){sn(s,a,c)}}var i=s.return;try{R1(s)}catch(c){sn(s,i,c)}break;case 5:var l=s.return;try{R1(s)}catch(c){sn(s,l,c)}}}catch(c){sn(s,s.return,c)}if(s===t){lt=null;break}var o=s.sibling;if(o!==null){o.return=s.return,lt=o;break}lt=s.return}}var _K=Math.ceil,Hv=ql.ReactCurrentDispatcher,pk=ql.ReactCurrentOwner,ka=ql.ReactCurrentBatchConfig,Xt=0,Bn=null,Sn=null,Wn=0,zr=0,xu=rc(0),Mn=0,np=null,ld=0,Lj=0,fk=0,kx=null,Tr=null,gk=0,om=1/0,dl=null,Gv=!1,F1=null,Ro=null,vg=!1,Co=null,Wv=0,Px=0,L1=null,cv=-1,dv=0;function vr(){return Xt&6?hn():cv!==-1?cv:cv=hn()}function Io(t){return t.mode&1?Xt&2&&Wn!==0?Wn&-Wn:gK.transition!==null?(dv===0&&(dv=pI()),dv):(t=ys,t!==0||(t=window.event,t=t===void 0?16:NI(t.type)),t):1}function si(t,s,n,r){if(50<Px)throw Px=0,L1=null,Error(Ve(185));pf(t,n,r),(!(Xt&2)||t!==Bn)&&(t===Bn&&(!(Xt&2)&&(Lj|=n),Mn===4&&uo(t,Wn)),Ir(t,r),n===1&&Xt===0&&!(s.mode&1)&&(om=hn()+500,Rj&&ac()))}function Ir(t,s){var n=t.callbackNode;gW(t,s);var r=Dv(t,t===Bn?Wn:0);if(r===0)n!==null&&ZT(n),t.callbackNode=null,t.callbackPriority=0;else if(s=r&-r,t.callbackPriority!==s){if(n!=null&&ZT(n),s===1)t.tag===0?fK(q4.bind(null,t)):VI(q4.bind(null,t)),mK(function(){!(Xt&6)&&ac()}),n=null;else{switch(fI(r)){case 1:n=zC;break;case 4:n=hI;break;case 16:n=Tv;break;case 536870912:n=xI;break;default:n=Tv}n=L3(n,O3.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function O3(t,s){if(cv=-1,dv=0,Xt&6)throw Error(Ve(327));var n=t.callbackNode;if(_u()&&t.callbackNode!==n)return null;var r=Dv(t,t===Bn?Wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||s)s=Kv(t,r);else{s=r;var a=Xt;Xt|=2;var i=_3();(Bn!==t||Wn!==s)&&(dl=null,om=hn()+500,Xc(t,s));do try{$K();break}catch(o){M3(t,o)}while(!0);sk(),Hv.current=i,Xt=a,Sn!==null?s=0:(Bn=null,Wn=0,s=Mn)}if(s!==0){if(s===2&&(a=m1(t),a!==0&&(r=a,s=B1(t,a))),s===1)throw n=np,Xc(t,0),uo(t,r),Ir(t,hn()),n;if(s===6)uo(t,r);else{if(a=t.current.alternate,!(r&30)&&!RK(a)&&(s=Kv(t,r),s===2&&(i=m1(t),i!==0&&(r=i,s=B1(t,i))),s===1))throw n=np,Xc(t,0),uo(t,r),Ir(t,hn()),n;switch(t.finishedWork=a,t.finishedLanes=r,s){case 0:case 1:throw Error(Ve(345));case 2:Nc(t,Tr,dl);break;case 3:if(uo(t,r),(r&130023424)===r&&(s=gk+500-hn(),10<s)){if(Dv(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){vr(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=j1(Nc.bind(null,t,Tr,dl),s);break}Nc(t,Tr,dl);break;case 4:if(uo(t,r),(r&4194240)===r)break;for(s=t.eventTimes,a=-1;0<r;){var l=31-ti(r);i=1<<l,l=s[l],l>a&&(a=l),r&=~i}if(r=a,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_K(r/1960))-r,10<r){t.timeoutHandle=j1(Nc.bind(null,t,Tr,dl),r);break}Nc(t,Tr,dl);break;case 5:Nc(t,Tr,dl);break;default:throw Error(Ve(329))}}}return Ir(t,hn()),t.callbackNode===n?O3.bind(null,t):null}function B1(t,s){var n=kx;return t.current.memoizedState.isDehydrated&&(Xc(t,s).flags|=256),t=Kv(t,s),t!==2&&(s=Tr,Tr=n,s!==null&&V1(s)),t}function V1(t){Tr===null?Tr=t:Tr.push.apply(Tr,t)}function RK(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!di(i(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function uo(t,s){for(s&=~fk,s&=~Lj,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-ti(s),r=1<<n;t[n]=-1,s&=~r}}function q4(t){if(Xt&6)throw Error(Ve(327));_u();var s=Dv(t,0);if(!(s&1))return Ir(t,hn()),null;var n=Kv(t,s);if(t.tag!==0&&n===2){var r=m1(t);r!==0&&(s=r,n=B1(t,r))}if(n===1)throw n=np,Xc(t,0),uo(t,s),Ir(t,hn()),n;if(n===6)throw Error(Ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Nc(t,Tr,dl),Ir(t,hn()),null}function vk(t,s){var n=Xt;Xt|=1;try{return t(s)}finally{Xt=n,Xt===0&&(om=hn()+500,Rj&&ac())}}function od(t){Co!==null&&Co.tag===0&&!(Xt&6)&&_u();var s=Xt;Xt|=1;var n=ka.transition,r=ys;try{if(ka.transition=null,ys=1,t)return t()}finally{ys=r,ka.transition=n,Xt=s,!(Xt&6)&&ac()}}function yk(){zr=xu.current,Us(xu)}function Xc(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uK(n)),Sn!==null)for(n=Sn.return;n!==null;){var r=n;switch(JC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rv();break;case 3:im(),Us(_r),Us(lr),ok();break;case 5:lk(r);break;case 4:im();break;case 13:Us(Ys);break;case 19:Us(Ys);break;case 10:nk(r.type._context);break;case 22:case 23:yk()}n=n.return}if(Bn=t,Sn=t=$o(t.current,null),Wn=zr=s,Mn=0,np=null,fk=Lj=ld=0,Tr=kx=null,Ec!==null){for(s=0;s<Ec.length;s++)if(n=Ec[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,r.next=l}n.pending=r}Ec=null}return t}function M3(t,s){do{var n=Sn;try{if(sk(),iv.current=qv,zv){for(var r=Xs.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}zv=!1}if(id=0,Fn=En=Xs=null,Sx=!1,ep=0,pk.current=null,n===null||n.return===null){Mn=1,np=s,Sn=null;break}e:{var i=t,l=n.return,o=n,c=s;if(s=Wn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=E4(l);if(x!==null){x.flags&=-257,O4(x,l,o,i,s),x.mode&1&&D4(i,d,s),s=x,c=d;var p=s.updateQueue;if(p===null){var f=new Set;f.add(c),s.updateQueue=f}else p.add(c);break e}else{if(!(s&1)){D4(i,d,s),jk();break e}c=Error(Ve(426))}}else if(Hs&&o.mode&1){var j=E4(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),O4(j,l,o,i,s),ek(lm(c,o));break e}}i=c=lm(c,o),Mn!==4&&(Mn=2),kx===null?kx=[i]:kx.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s;var g=f3(i,c,s);S4(i,g);break e;case 1:o=c;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ro===null||!Ro.has(v)))){i.flags|=65536,s&=-s,i.lanes|=s;var w=g3(i,o,s);S4(i,w);break e}}i=i.return}while(i!==null)}I3(n)}catch(N){s=N,Sn===n&&n!==null&&(Sn=n=n.return);continue}break}while(!0)}function _3(){var t=Hv.current;return Hv.current=qv,t===null?qv:t}function jk(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Bn===null||!(ld&268435455)&&!(Lj&268435455)||uo(Bn,Wn)}function Kv(t,s){var n=Xt;Xt|=2;var r=_3();(Bn!==t||Wn!==s)&&(dl=null,Xc(t,s));do try{IK();break}catch(a){M3(t,a)}while(!0);if(sk(),Xt=n,Hv.current=r,Sn!==null)throw Error(Ve(261));return Bn=null,Wn=0,Mn}function IK(){for(;Sn!==null;)R3(Sn)}function $K(){for(;Sn!==null&&!oW();)R3(Sn)}function R3(t){var s=F3(t.alternate,t,zr);t.memoizedProps=t.pendingProps,s===null?I3(t):Sn=s,pk.current=null}function I3(t){var s=t;do{var n=s.alternate;if(t=s.return,s.flags&32768){if(n=DK(n,s),n!==null){n.flags&=32767,Sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mn=6,Sn=null;return}}else if(n=TK(n,s,zr),n!==null){Sn=n;return}if(s=s.sibling,s!==null){Sn=s;return}Sn=s=t}while(s!==null);Mn===0&&(Mn=5)}function Nc(t,s,n){var r=ys,a=ka.transition;try{ka.transition=null,ys=1,FK(t,s,n,r)}finally{ka.transition=a,ys=r}return null}function FK(t,s,n,r){do _u();while(Co!==null);if(Xt&6)throw Error(Ve(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ve(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(vW(t,i),t===Bn&&(Sn=Bn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vg||(vg=!0,L3(Tv,function(){return _u(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ka.transition,ka.transition=null;var l=ys;ys=1;var o=Xt;Xt|=4,pk.current=null,OK(t,n),D3(n,t),rK(v1),Ev=!!g1,v1=g1=null,t.current=n,MK(n),cW(),Xt=o,ys=l,ka.transition=i}else t.current=n;if(vg&&(vg=!1,Co=t,Wv=a),i=t.pendingLanes,i===0&&(Ro=null),mW(n.stateNode),Ir(t,hn()),s!==null)for(r=t.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Gv)throw Gv=!1,t=F1,F1=null,t;return Wv&1&&t.tag!==0&&_u(),i=t.pendingLanes,i&1?t===L1?Px++:(Px=0,L1=t):Px=0,ac(),null}function _u(){if(Co!==null){var t=fI(Wv),s=ka.transition,n=ys;try{if(ka.transition=null,ys=16>t?16:t,Co===null)var r=!1;else{if(t=Co,Co=null,Wv=0,Xt&6)throw Error(Ve(331));var a=Xt;for(Xt|=4,lt=t.current;lt!==null;){var i=lt,l=i.child;if(lt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(lt=d;lt!==null;){var u=lt;switch(u.tag){case 0:case 11:case 15:Cx(8,u,i)}var m=u.child;if(m!==null)m.return=u,lt=m;else for(;lt!==null;){u=lt;var h=u.sibling,x=u.return;if(P3(u),u===d){lt=null;break}if(h!==null){h.return=x,lt=h;break}lt=x}}}var p=i.alternate;if(p!==null){var f=p.child;if(f!==null){p.child=null;do{var j=f.sibling;f.sibling=null,f=j}while(f!==null)}}lt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,lt=l;else e:for(;lt!==null;){if(i=lt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cx(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,lt=g;break e}lt=i.return}}var y=t.current;for(lt=y;lt!==null;){l=lt;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,lt=v;else e:for(l=y;lt!==null;){if(o=lt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Fj(9,o)}}catch(N){sn(o,o.return,N)}if(o===l){lt=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,lt=w;break e}lt=o.return}}if(Xt=a,ac(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(Dj,t)}catch{}r=!0}return r}finally{ys=n,ka.transition=s}}return!1}function H4(t,s,n){s=lm(n,s),s=f3(t,s,1),t=_o(t,s,1),s=vr(),t!==null&&(pf(t,1,s),Ir(t,s))}function sn(t,s,n){if(t.tag===3)H4(t,t,n);else for(;s!==null;){if(s.tag===3){H4(s,t,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ro===null||!Ro.has(r))){t=lm(n,t),t=g3(s,t,1),s=_o(s,t,1),t=vr(),s!==null&&(pf(s,1,t),Ir(s,t));break}}s=s.return}}function LK(t,s,n){var r=t.pingCache;r!==null&&r.delete(s),s=vr(),t.pingedLanes|=t.suspendedLanes&n,Bn===t&&(Wn&n)===n&&(Mn===4||Mn===3&&(Wn&130023424)===Wn&&500>hn()-gk?Xc(t,0):fk|=n),Ir(t,s)}function $3(t,s){s===0&&(t.mode&1?(s=og,og<<=1,!(og&130023424)&&(og=4194304)):s=1);var n=vr();t=_l(t,s),t!==null&&(pf(t,s,n),Ir(t,n))}function BK(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),$3(t,n)}function VK(t,s){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ve(314))}r!==null&&r.delete(s),$3(t,n)}var F3;F3=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||_r.current)Er=!0;else{if(!(t.lanes&n)&&!(s.flags&128))return Er=!1,AK(t,s,n);Er=!!(t.flags&131072)}else Er=!1,Hs&&s.flags&1048576&&UI(s,Fv,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;ov(t,s),t=s.pendingProps;var a=nm(s,lr.current);Mu(s,n),a=dk(null,s,r,t,a,n);var i=uk();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Rr(r)?(i=!0,Iv(s)):i=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ak(s),a.updater=$j,s.stateNode=a,a._reactInternals=s,P1(s,r,t,n),s=D1(null,s,r,!0,i,n)):(s.tag=0,Hs&&i&&ZC(s),ur(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(ov(t,s),t=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=zK(r),t=qa(r,t),a){case 0:s=T1(null,s,r,t,n);break e;case 1:s=R4(null,s,r,t,n);break e;case 11:s=M4(null,s,r,t,n);break e;case 14:s=_4(null,s,r,qa(r.type,t),n);break e}throw Error(Ve(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:qa(r,a),T1(t,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:qa(r,a),R4(t,s,r,a,n);case 3:e:{if(b3(s),t===null)throw Error(Ve(387));r=s.pendingProps,i=s.memoizedState,a=i.element,KI(t,s),Vv(s,r,null,n);var l=s.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,s.flags&256){a=lm(Error(Ve(423)),s),s=I4(t,s,r,n,a);break e}else if(r!==a){a=lm(Error(Ve(424)),s),s=I4(t,s,r,n,a);break e}else for(Qr=Mo(s.stateNode.containerInfo.firstChild),Xr=s,Hs=!0,Qa=null,n=GI(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rm(),r===a){s=Rl(t,s,n);break e}ur(t,s,r,n)}s=s.child}return s;case 5:return YI(s),t===null&&S1(s),r=s.type,a=s.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,y1(r,a)?l=null:i!==null&&y1(r,i)&&(s.flags|=32),j3(t,s),ur(t,s,l,n),s.child;case 6:return t===null&&S1(s),null;case 13:return N3(t,s,n);case 4:return ik(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=am(s,null,r,n):ur(t,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:qa(r,a),M4(t,s,r,a,n);case 7:return ur(t,s,s.pendingProps,n),s.child;case 8:return ur(t,s,s.pendingProps.children,n),s.child;case 12:return ur(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,i=s.memoizedProps,l=a.value,Os(Lv,r._currentValue),r._currentValue=l,i!==null)if(di(i.value,l)){if(i.children===a.children&&!_r.current){s=Rl(t,s,n);break e}}else for(i=s.child,i!==null&&(i.return=s);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Nl(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),C1(i.return,n,s),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===s.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Ve(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),C1(l,n,s),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===s){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}ur(t,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,Mu(s,n),a=Ta(a),r=r(a),s.flags|=1,ur(t,s,r,n),s.child;case 14:return r=s.type,a=qa(r,s.pendingProps),a=qa(r.type,a),_4(t,s,r,a,n);case 15:return v3(t,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:qa(r,a),ov(t,s),s.tag=1,Rr(r)?(t=!0,Iv(s)):t=!1,Mu(s,n),p3(s,r,a),P1(s,r,a,n),D1(null,s,r,!0,t,n);case 19:return w3(t,s,n);case 22:return y3(t,s,n)}throw Error(Ve(156,s.tag))};function L3(t,s){return mI(t,s)}function UK(t,s,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(t,s,n,r){return new UK(t,s,n,r)}function bk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zK(t){if(typeof t=="function")return bk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===BC)return 11;if(t===VC)return 14}return 2}function $o(t,s){var n=t.alternate;return n===null?(n=Na(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uv(t,s,n,r,a,i){var l=2;if(r=t,typeof t=="function")bk(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case ru:return Zc(n.children,a,i,s);case LC:l=8,a|=8;break;case Xw:return t=Na(12,n,s,a|2),t.elementType=Xw,t.lanes=i,t;case Zw:return t=Na(13,n,s,a),t.elementType=Zw,t.lanes=i,t;case Jw:return t=Na(19,n,s,a),t.elementType=Jw,t.lanes=i,t;case Y6:return Bj(n,a,i,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W6:l=10;break e;case K6:l=9;break e;case BC:l=11;break e;case VC:l=14;break e;case ro:l=16,r=null;break e}throw Error(Ve(130,t==null?t:typeof t,""))}return s=Na(l,n,s,a),s.elementType=t,s.type=r,s.lanes=i,s}function Zc(t,s,n,r){return t=Na(7,t,r,s),t.lanes=n,t}function Bj(t,s,n,r){return t=Na(22,t,r,s),t.elementType=Y6,t.lanes=n,t.stateNode={isHidden:!1},t}function hN(t,s,n){return t=Na(6,t,null,s),t.lanes=n,t}function xN(t,s,n){return s=Na(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function qK(t,s,n,r,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kb(0),this.expirationTimes=Kb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kb(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Nk(t,s,n,r,a,i,l,o,c){return t=new qK(t,s,n,o,c),s===1?(s=1,i===!0&&(s|=8)):s=0,i=Na(3,null,null,s),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ak(i),t}function HK(t,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nu,key:r==null?null:""+r,children:t,containerInfo:s,implementation:n}}function B3(t){if(!t)return Go;t=t._reactInternals;e:{if(Pd(t)!==t||t.tag!==1)throw Error(Ve(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Rr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Ve(171))}if(t.tag===1){var n=t.type;if(Rr(n))return BI(t,n,s)}return s}function V3(t,s,n,r,a,i,l,o,c){return t=Nk(n,r,!0,t,a,i,l,o,c),t.context=B3(null),n=t.current,r=vr(),a=Io(n),i=Nl(r,a),i.callback=s??null,_o(n,i,a),t.current.lanes=a,pf(t,a,r),Ir(t,r),t}function Vj(t,s,n,r){var a=s.current,i=vr(),l=Io(a);return n=B3(n),s.context===null?s.context=n:s.pendingContext=n,s=Nl(i,l),s.payload={element:t},r=r===void 0?null:r,r!==null&&(s.callback=r),t=_o(a,s,l),t!==null&&(si(t,a,l,i),av(t,a,l)),l}function Yv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G4(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function wk(t,s){G4(t,s),(t=t.alternate)&&G4(t,s)}function GK(){return null}var U3=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sk(t){this._internalRoot=t}Uj.prototype.render=Sk.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Ve(409));Vj(t,s,null,null)};Uj.prototype.unmount=Sk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;od(function(){Vj(null,t,null,null)}),s[Ml]=null}};function Uj(t){this._internalRoot=t}Uj.prototype.unstable_scheduleHydration=function(t){if(t){var s=yI();t={blockedOn:null,target:t,priority:s};for(var n=0;n<co.length&&s!==0&&s<co[n].priority;n++);co.splice(n,0,t),n===0&&bI(t)}};function Ck(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function W4(){}function WK(t,s,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=Yv(l);i.call(d)}}var l=V3(s,r,t,0,null,!1,!1,"",W4);return t._reactRootContainer=l,t[Ml]=l.current,Yx(t.nodeType===8?t.parentNode:t),od(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var d=Yv(c);o.call(d)}}var c=Nk(t,0,!1,null,null,!1,!1,"",W4);return t._reactRootContainer=c,t[Ml]=c.current,Yx(t.nodeType===8?t.parentNode:t),od(function(){Vj(s,c,n,r)}),c}function qj(t,s,n,r,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Yv(l);o.call(c)}}Vj(s,l,t,a)}else l=WK(n,s,t,a,r);return Yv(l)}gI=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=lx(s.pendingLanes);n!==0&&(qC(s,n|1),Ir(s,hn()),!(Xt&6)&&(om=hn()+500,ac()))}break;case 13:od(function(){var r=_l(t,1);if(r!==null){var a=vr();si(r,t,1,a)}}),wk(t,1)}};HC=function(t){if(t.tag===13){var s=_l(t,134217728);if(s!==null){var n=vr();si(s,t,134217728,n)}wk(t,134217728)}};vI=function(t){if(t.tag===13){var s=Io(t),n=_l(t,s);if(n!==null){var r=vr();si(n,t,s,r)}wk(t,s)}};yI=function(){return ys};jI=function(t,s){var n=ys;try{return ys=t,s()}finally{ys=n}};c1=function(t,s,n){switch(s){case"input":if(s1(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==t&&r.form===t.form){var a=_j(r);if(!a)throw Error(Ve(90));X6(r),s1(r,a)}}}break;case"textarea":J6(t,n);break;case"select":s=n.value,s!=null&&Tu(t,!!n.multiple,s,!1)}};iI=vk;lI=od;var KK={usingClientEntryPoint:!1,Events:[gf,ou,_j,rI,aI,vk]},Lh={findFiberByHostInstance:Dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YK={bundleType:Lh.bundleType,version:Lh.version,rendererPackageName:Lh.rendererPackageName,rendererConfig:Lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ql.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dI(t),t===null?null:t.stateNode},findFiberByHostInstance:Lh.findFiberByHostInstance||GK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yg.isDisabled&&yg.supportsFiber)try{Dj=yg.inject(YK),_i=yg}catch{}}la.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KK;la.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ck(s))throw Error(Ve(200));return HK(t,s,null,n)};la.createRoot=function(t,s){if(!Ck(t))throw Error(Ve(299));var n=!1,r="",a=U3;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Nk(t,1,!1,null,null,n,!1,r,a),t[Ml]=s.current,Yx(t.nodeType===8?t.parentNode:t),new Sk(s)};la.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Ve(188)):(t=Object.keys(t).join(","),Error(Ve(268,t)));return t=dI(s),t=t===null?null:t.stateNode,t};la.flushSync=function(t){return od(t)};la.hydrate=function(t,s,n){if(!zj(s))throw Error(Ve(200));return qj(null,t,s,!0,n)};la.hydrateRoot=function(t,s,n){if(!Ck(t))throw Error(Ve(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",l=U3;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),s=V3(s,null,t,1,n??null,a,!1,i,l),t[Ml]=s.current,Yx(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new Uj(s)};la.render=function(t,s,n){if(!zj(s))throw Error(Ve(200));return qj(null,t,s,!1,n)};la.unmountComponentAtNode=function(t){if(!zj(t))throw Error(Ve(40));return t._reactRootContainer?(od(function(){qj(null,null,t,!1,function(){t._reactRootContainer=null,t[Ml]=null})}),!0):!1};la.unstable_batchedUpdates=vk;la.unstable_renderSubtreeIntoContainer=function(t,s,n,r){if(!zj(n))throw Error(Ve(200));if(t==null||t._reactInternals===void 0)throw Error(Ve(38));return qj(t,s,n,!1,r)};la.version="18.3.1-next-f1338f8080-20240426";function z3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z3)}catch(t){console.error(t)}}z3(),z6.exports=la;var Ad=z6.exports;const QK=fs(Ad);var q3,K4=Ad;q3=K4.createRoot,K4.hydrateRoot;const XK="modulepreload",ZK=function(t){return"/"+t},Y4={},Un=function(s,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=ZK(c),c in Y4)return;Y4[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":XK,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,x)=>{m.addEventListener("load",h),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})};function JK(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,a,i,l=[],o="",c=t.split("/");for(c[0]||c.shift();a=c.shift();)n=a[0],n==="*"?(l.push(n),o+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=a.indexOf("?",1),i=a.indexOf(".",1),l.push(a.substring(1,~r?r:~i?i:a.length)),o+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~r?"?":"")+"\\"+a.substring(i))):o+="/"+a;return{keys:l,pattern:new RegExp("^"+o+(s?"(?=$|/)":"/?$"),"i")}}var H3={exports:{}},G3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm=b;function eY(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var tY=typeof Object.is=="function"?Object.is:eY,sY=cm.useState,nY=cm.useEffect,rY=cm.useLayoutEffect,aY=cm.useDebugValue;function iY(t,s){var n=s(),r=sY({inst:{value:n,getSnapshot:s}}),a=r[0].inst,i=r[1];return rY(function(){a.value=n,a.getSnapshot=s,pN(a)&&i({inst:a})},[t,n,s]),nY(function(){return pN(a)&&i({inst:a}),t(function(){pN(a)&&i({inst:a})})},[t]),aY(n),n}function pN(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!tY(t,n)}catch{return!0}}function lY(t,s){return s()}var oY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lY:iY;G3.useSyncExternalStore=cm.useSyncExternalStore!==void 0?cm.useSyncExternalStore:oY;H3.exports=G3;var W3=H3.exports;const cY=RC.useInsertionEffect,dY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uY=dY?b.useLayoutEffect:b.useEffect,mY=cY||uY,K3=t=>{const s=b.useRef([t,(...n)=>s[0](...n)]).current;return mY(()=>{s[0]=t}),s[1]},hY="popstate",kk="pushState",Pk="replaceState",xY="hashchange",Q4=[hY,kk,Pk,xY],pY=t=>{for(const s of Q4)addEventListener(s,t);return()=>{for(const s of Q4)removeEventListener(s,t)}},Y3=(t,s)=>W3.useSyncExternalStore(pY,t,s),fY=()=>location.search,gY=({ssrSearch:t=""}={})=>Y3(fY,()=>t),X4=()=>location.pathname,vY=({ssrPath:t}={})=>Y3(X4,t?()=>t:X4),yY=(t,{replace:s=!1,state:n=null}={})=>history[s?Pk:kk](n,"",t),jY=(t={})=>[vY(t),yY],Z4=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Z4]>"u"){for(const t of[kk,Pk]){const s=history[t];history[t]=function(){const n=s.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Z4,{value:!0})}const bY=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",Q3=(t="")=>t==="/"?"":t,NY=(t,s)=>t[0]==="~"?t.slice(1):Q3(s)+t,wY=(t="",s)=>bY(J4(Q3(t)),J4(s)),J4=t=>{try{return decodeURI(t)}catch{return t}},X3={hook:jY,searchHook:gY,parser:JK,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Z3=b.createContext(X3),ih=()=>b.useContext(Z3),J3={},e$=b.createContext(J3),t$=()=>b.useContext(e$),Hj=t=>{const[s,n]=t.hook(t);return[wY(t.base,s),K3((r,a)=>n(NY(r,t.base),a))]},Yn=()=>Hj(ih()),Ak=(t,s,n,r)=>{const{pattern:a,keys:i}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",r),l=a.exec(n)||[],[o,...c]=l;return o!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((m,h)=>[m,c[h]])):l.groups;let u={...c};return d&&Object.assign(u,d),u})(),...r?[o]:[]]:[!1,null]},SY=t=>Ak(ih().parser,t,Yn()[0]),CY=({children:t,...s})=>{var u,m;const n=ih(),r=s.hook?X3:n;let a=r;const[i,l]=((u=s.ssrPath)==null?void 0:u.split("?"))??[];l&&(s.ssrSearch=l,s.ssrPath=i),s.hrefs=s.hrefs??((m=s.hook)==null?void 0:m.hrefs);let o=b.useRef({}),c=o.current,d=c;for(let h in r){const x=h==="base"?r[h]+(s[h]||""):s[h]||r[h];c===d&&x!==d[h]&&(o.current=d={...d}),d[h]=x,(x!==r[h]||x!==a[h])&&(a=d)}return b.createElement(Z3.Provider,{value:a,children:t})},eD=({children:t,component:s},n)=>s?b.createElement(s,{params:n}):typeof t=="function"?t(n):t,kY=t=>{let s=b.useRef(J3);const n=s.current;return s.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,a])=>a!==n[r])?t:n},Ie=({path:t,nest:s,match:n,...r})=>{const a=ih(),[i]=Hj(a),[l,o,c]=n??Ak(a.parser,t,i,s),d=kY({...t$(),...o});if(!l)return null;const u=c?b.createElement(CY,{base:c},eD(r,d)):eD(r,d);return b.createElement(e$.Provider,{value:d,children:u})},nn=b.forwardRef((t,s)=>{const n=ih(),[r,a]=Hj(n),{to:i="",href:l=i,onClick:o,asChild:c,children:d,className:u,replace:m,state:h,...x}=t,p=K3(j=>{j.ctrlKey||j.metaKey||j.altKey||j.shiftKey||j.button!==0||(o==null||o(j),j.defaultPrevented||(j.preventDefault(),a(l,t)))}),f=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return c&&b.isValidElement(d)?b.cloneElement(d,{onClick:p,href:f}):b.createElement("a",{...x,onClick:p,href:f,className:u!=null&&u.call?u(r===l):u,children:d,ref:s})}),s$=t=>Array.isArray(t)?t.flatMap(s=>s$(s&&s.type===b.Fragment?s.props.children:s)):[t],U1=({children:t,location:s})=>{const n=ih(),[r]=Hj(n);for(const a of s$(t)){let i=0;if(b.isValidElement(a)&&(i=Ak(n.parser,a.props.path,s||r,a.props.nest))[0])return b.cloneElement(a,{match:i})}return null};var lh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cd=typeof window>"u"||"Deno"in globalThis;function mr(){}function PY(t,s){return typeof t=="function"?t(s):t}function z1(t){return typeof t=="number"&&t>=0&&t!==1/0}function n$(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Fo(t,s){return typeof t=="function"?t(s):t}function Xa(t,s){return typeof t=="function"?t(s):t}function tD(t,s){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:l,stale:o}=t;if(l){if(r){if(s.queryHash!==Tk(l,s.options))return!1}else if(!rp(s.queryKey,l))return!1}if(n!=="all"){const c=s.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||a&&a!==s.state.fetchStatus||i&&!i(s))}function sD(t,s){const{exact:n,status:r,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(n){if(dd(s.options.mutationKey)!==dd(i))return!1}else if(!rp(s.options.mutationKey,i))return!1}return!(r&&s.state.status!==r||a&&!a(s))}function Tk(t,s){return((s==null?void 0:s.queryKeyHashFn)||dd)(t)}function dd(t){return JSON.stringify(t,(s,n)=>q1(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function rp(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(n=>rp(t[n],s[n])):!1}function Dk(t,s){if(t===s)return t;const n=nD(t)&&nD(s);if(n||q1(t)&&q1(s)){const r=n?t:Object.keys(t),a=r.length,i=n?s:Object.keys(s),l=i.length,o=n?[]:{},c=new Set(r);let d=0;for(let u=0;u<l;u++){const m=n?u:i[u];(!n&&c.has(m)||n)&&t[m]===void 0&&s[m]===void 0?(o[m]=void 0,d++):(o[m]=Dk(t[m],s[m]),o[m]===t[m]&&t[m]!==void 0&&d++)}return a===l&&d===a?t:o}return s}function Qv(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}function nD(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function q1(t){if(!rD(t))return!1;const s=t.constructor;if(s===void 0)return!0;const n=s.prototype;return!(!rD(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function rD(t){return Object.prototype.toString.call(t)==="[object Object]"}function AY(t){return new Promise(s=>{setTimeout(s,t)})}function H1(t,s,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,s):n.structuralSharing!==!1?Dk(t,s):s}function TY(t,s,n=0){const r=[...t,s];return n&&r.length>n?r.slice(1):r}function DY(t,s,n=0){const r=[s,...t];return n&&r.length>n?r.slice(0,-1):r}var Ek=Symbol();function r$(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===Ek?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function a$(t,s){return typeof t=="function"?t(...s):!!t}var Uc,xo,qu,N6,EY=(N6=class extends lh{constructor(){super();jt(this,Uc);jt(this,xo);jt(this,qu);nt(this,qu,s=>{if(!cd&&window.addEventListener){const n=()=>s();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ce(this,xo)||this.setEventListener(ce(this,qu))}onUnsubscribe(){var s;this.hasListeners()||((s=ce(this,xo))==null||s.call(this),nt(this,xo,void 0))}setEventListener(s){var n;nt(this,qu,s),(n=ce(this,xo))==null||n.call(this),nt(this,xo,s(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(s){ce(this,Uc)!==s&&(nt(this,Uc,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(n=>{n(s)})}isFocused(){var s;return typeof ce(this,Uc)=="boolean"?ce(this,Uc):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},Uc=new WeakMap,xo=new WeakMap,qu=new WeakMap,N6),Ok=new EY,Hu,po,Gu,w6,OY=(w6=class extends lh{constructor(){super();jt(this,Hu,!0);jt(this,po);jt(this,Gu);nt(this,Gu,s=>{if(!cd&&window.addEventListener){const n=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ce(this,po)||this.setEventListener(ce(this,Gu))}onUnsubscribe(){var s;this.hasListeners()||((s=ce(this,po))==null||s.call(this),nt(this,po,void 0))}setEventListener(s){var n;nt(this,Gu,s),(n=ce(this,po))==null||n.call(this),nt(this,po,s(this.setOnline.bind(this)))}setOnline(s){ce(this,Hu)!==s&&(nt(this,Hu,s),this.listeners.forEach(r=>{r(s)}))}isOnline(){return ce(this,Hu)}},Hu=new WeakMap,po=new WeakMap,Gu=new WeakMap,w6),Xv=new OY;function G1(){let t,s;const n=new Promise((a,i)=>{t=a,s=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),t(a)},n.reject=a=>{r({status:"rejected",reason:a}),s(a)},n}function MY(t){return Math.min(1e3*2**t,3e4)}function i$(t){return(t??"online")==="online"?Xv.isOnline():!0}var l$=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function fN(t){return t instanceof l$}function o$(t){let s=!1,n=0,r=!1,a;const i=G1(),l=f=>{var j;r||(h(new l$(f)),(j=t.abort)==null||j.call(t))},o=()=>{s=!0},c=()=>{s=!1},d=()=>Ok.isFocused()&&(t.networkMode==="always"||Xv.isOnline())&&t.canRun(),u=()=>i$(t.networkMode)&&t.canRun(),m=f=>{var j;r||(r=!0,(j=t.onSuccess)==null||j.call(t,f),a==null||a(),i.resolve(f))},h=f=>{var j;r||(r=!0,(j=t.onError)==null||j.call(t,f),a==null||a(),i.reject(f))},x=()=>new Promise(f=>{var j;a=g=>{(r||d())&&f(g)},(j=t.onPause)==null||j.call(t)}).then(()=>{var f;a=void 0,r||(f=t.onContinue)==null||f.call(t)}),p=()=>{if(r)return;let f;const j=n===0?t.initialPromise:void 0;try{f=j??t.fn()}catch(g){f=Promise.reject(g)}Promise.resolve(f).then(m).catch(g=>{var S;if(r)return;const y=t.retry??(cd?0:3),v=t.retryDelay??MY,w=typeof v=="function"?v(n,g):v,N=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(s||!N){h(g);return}n++,(S=t.onFail)==null||S.call(t,n,g),AY(w).then(()=>d()?void 0:x()).then(()=>{s?h(g):p()})})};return{promise:i,cancel:l,continue:()=>(a==null||a(),i),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?p():x().then(p),i)}}var _Y=t=>setTimeout(t,0);function RY(){let t=[],s=0,n=o=>{o()},r=o=>{o()},a=_Y;const i=o=>{s?t.push(o):a(()=>{n(o)})},l=()=>{const o=t;t=[],o.length&&a(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{a=o}}}var wn=RY(),zc,S6,c$=(S6=class{constructor(){jt(this,zc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),z1(this.gcTime)&&nt(this,zc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(cd?1/0:5*60*1e3))}clearGcTimeout(){ce(this,zc)&&(clearTimeout(ce(this,zc)),nt(this,zc,void 0))}},zc=new WeakMap,S6),Wu,qc,fa,Hc,Zn,df,Gc,Ha,ol,C6,IY=(C6=class extends c${constructor(s){super();jt(this,Ha);jt(this,Wu);jt(this,qc);jt(this,fa);jt(this,Hc);jt(this,Zn);jt(this,df);jt(this,Gc);nt(this,Gc,!1),nt(this,df,s.defaultOptions),this.setOptions(s.options),this.observers=[],nt(this,Hc,s.client),nt(this,fa,ce(this,Hc).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,nt(this,Wu,$Y(this.options)),this.state=s.state??ce(this,Wu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=ce(this,Zn))==null?void 0:s.promise}setOptions(s){this.options={...ce(this,df),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ce(this,fa).remove(this)}setData(s,n){const r=H1(this.state.data,s,this.options);return Vt(this,Ha,ol).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(s,n){Vt(this,Ha,ol).call(this,{type:"setState",state:s,setStateOptions:n})}cancel(s){var r,a;const n=(r=ce(this,Zn))==null?void 0:r.promise;return(a=ce(this,Zn))==null||a.cancel(s),n?n.then(mr).catch(mr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ce(this,Wu))}isActive(){return this.observers.some(s=>Xa(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ek||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Fo(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!n$(this.state.dataUpdatedAt,s)}onFocus(){var n;const s=this.observers.find(r=>r.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(n=ce(this,Zn))==null||n.continue()}onOnline(){var n;const s=this.observers.find(r=>r.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(n=ce(this,Zn))==null||n.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),ce(this,fa).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(n=>n!==s),this.observers.length||(ce(this,Zn)&&(ce(this,Gc)?ce(this,Zn).cancel({revert:!0}):ce(this,Zn).cancelRetry()),this.scheduleGc()),ce(this,fa).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Vt(this,Ha,ol).call(this,{type:"invalidate"})}fetch(s,n){var d,u,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ce(this,Zn))return ce(this,Zn).continueRetry(),ce(this,Zn).promise}if(s&&this.setOptions(s),!this.options.queryFn){const h=this.observers.find(x=>x.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(nt(this,Gc,!0),r.signal)})},i=()=>{const h=r$(this.options,n),p=(()=>{const f={client:ce(this,Hc),queryKey:this.queryKey,meta:this.meta};return a(f),f})();return nt(this,Gc,!1),this.options.persister?this.options.persister(h,p,this):h(p)},o=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ce(this,Hc),state:this.state,fetchFn:i};return a(h),h})();(d=this.options.behavior)==null||d.onFetch(o,this),nt(this,qc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Vt(this,Ha,ol).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta});const c=h=>{var x,p,f,j;fN(h)&&h.silent||Vt(this,Ha,ol).call(this,{type:"error",error:h}),fN(h)||((p=(x=ce(this,fa).config).onError)==null||p.call(x,h,this),(j=(f=ce(this,fa).config).onSettled)==null||j.call(f,this.state.data,h,this)),this.scheduleGc()};return nt(this,Zn,o$({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var x,p,f,j;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(g){c(g);return}(p=(x=ce(this,fa).config).onSuccess)==null||p.call(x,h,this),(j=(f=ce(this,fa).config).onSettled)==null||j.call(f,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,x)=>{Vt(this,Ha,ol).call(this,{type:"failed",failureCount:h,error:x})},onPause:()=>{Vt(this,Ha,ol).call(this,{type:"pause"})},onContinue:()=>{Vt(this,Ha,ol).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ce(this,Zn).start()}},Wu=new WeakMap,qc=new WeakMap,fa=new WeakMap,Hc=new WeakMap,Zn=new WeakMap,df=new WeakMap,Gc=new WeakMap,Ha=new WeakSet,ol=function(s){const n=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...d$(r.data,this.options),fetchMeta:s.meta??null};case"success":return nt(this,qc,void 0),{...r,data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=s.error;return fN(a)&&a.revert&&ce(this,qc)?{...ce(this,qc),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=n(this.state),wn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ce(this,fa).notify({query:this,type:"updated",action:s})})},C6);function d$(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:i$(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $Y(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,n=s!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ki,k6,FY=(k6=class extends lh{constructor(s={}){super();jt(this,ki);this.config=s,nt(this,ki,new Map)}build(s,n,r){const a=n.queryKey,i=n.queryHash??Tk(a,n);let l=this.get(i);return l||(l=new IY({client:s,queryKey:a,queryHash:i,options:s.defaultQueryOptions(n),state:r,defaultOptions:s.getQueryDefaults(a)}),this.add(l)),l}add(s){ce(this,ki).has(s.queryHash)||(ce(this,ki).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const n=ce(this,ki).get(s.queryHash);n&&(s.destroy(),n===s&&ce(this,ki).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){wn.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return ce(this,ki).get(s)}getAll(){return[...ce(this,ki).values()]}find(s){const n={exact:!0,...s};return this.getAll().find(r=>tD(n,r))}findAll(s={}){const n=this.getAll();return Object.keys(s).length>0?n.filter(r=>tD(s,r)):n}notify(s){wn.batch(()=>{this.listeners.forEach(n=>{n(s)})})}onFocus(){wn.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){wn.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},ki=new WeakMap,k6),Pi,or,Wc,Ai,to,P6,LY=(P6=class extends c${constructor(s){super();jt(this,Ai);jt(this,Pi);jt(this,or);jt(this,Wc);this.mutationId=s.mutationId,nt(this,or,s.mutationCache),nt(this,Pi,[]),this.state=s.state||u$(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){ce(this,Pi).includes(s)||(ce(this,Pi).push(s),this.clearGcTimeout(),ce(this,or).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){nt(this,Pi,ce(this,Pi).filter(n=>n!==s)),this.scheduleGc(),ce(this,or).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){ce(this,Pi).length||(this.state.status==="pending"?this.scheduleGc():ce(this,or).remove(this))}continue(){var s;return((s=ce(this,Wc))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var i,l,o,c,d,u,m,h,x,p,f,j,g,y,v,w,N,S,k,T;const n=()=>{Vt(this,Ai,to).call(this,{type:"continue"})};nt(this,Wc,o$({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(C,P)=>{Vt(this,Ai,to).call(this,{type:"failed",failureCount:C,error:P})},onPause:()=>{Vt(this,Ai,to).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ce(this,or).canRun(this)}));const r=this.state.status==="pending",a=!ce(this,Wc).canStart();try{if(r)n();else{Vt(this,Ai,to).call(this,{type:"pending",variables:s,isPaused:a}),await((l=(i=ce(this,or).config).onMutate)==null?void 0:l.call(i,s,this));const P=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,s));P!==this.state.context&&Vt(this,Ai,to).call(this,{type:"pending",context:P,variables:s,isPaused:a})}const C=await ce(this,Wc).start();return await((u=(d=ce(this,or).config).onSuccess)==null?void 0:u.call(d,C,s,this.state.context,this)),await((h=(m=this.options).onSuccess)==null?void 0:h.call(m,C,s,this.state.context)),await((p=(x=ce(this,or).config).onSettled)==null?void 0:p.call(x,C,null,this.state.variables,this.state.context,this)),await((j=(f=this.options).onSettled)==null?void 0:j.call(f,C,null,s,this.state.context)),Vt(this,Ai,to).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(g=ce(this,or).config).onError)==null?void 0:y.call(g,C,s,this.state.context,this)),await((w=(v=this.options).onError)==null?void 0:w.call(v,C,s,this.state.context)),await((S=(N=ce(this,or).config).onSettled)==null?void 0:S.call(N,void 0,C,this.state.variables,this.state.context,this)),await((T=(k=this.options).onSettled)==null?void 0:T.call(k,void 0,C,s,this.state.context)),C}finally{Vt(this,Ai,to).call(this,{type:"error",error:C})}}finally{ce(this,or).runNext(this)}}},Pi=new WeakMap,or=new WeakMap,Wc=new WeakMap,Ai=new WeakSet,to=function(s){const n=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wn.batch(()=>{ce(this,Pi).forEach(r=>{r.onMutationUpdate(s)}),ce(this,or).notify({mutation:this,type:"updated",action:s})})},P6);function u$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hl,Ga,uf,A6,BY=(A6=class extends lh{constructor(s={}){super();jt(this,hl);jt(this,Ga);jt(this,uf);this.config=s,nt(this,hl,new Set),nt(this,Ga,new Map),nt(this,uf,0)}build(s,n,r){const a=new LY({mutationCache:this,mutationId:++tg(this,uf)._,options:s.defaultMutationOptions(n),state:r});return this.add(a),a}add(s){ce(this,hl).add(s);const n=jg(s);if(typeof n=="string"){const r=ce(this,Ga).get(n);r?r.push(s):ce(this,Ga).set(n,[s])}this.notify({type:"added",mutation:s})}remove(s){if(ce(this,hl).delete(s)){const n=jg(s);if(typeof n=="string"){const r=ce(this,Ga).get(n);if(r)if(r.length>1){const a=r.indexOf(s);a!==-1&&r.splice(a,1)}else r[0]===s&&ce(this,Ga).delete(n)}}this.notify({type:"removed",mutation:s})}canRun(s){const n=jg(s);if(typeof n=="string"){const r=ce(this,Ga).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===s}else return!0}runNext(s){var r;const n=jg(s);if(typeof n=="string"){const a=(r=ce(this,Ga).get(n))==null?void 0:r.find(i=>i!==s&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wn.batch(()=>{ce(this,hl).forEach(s=>{this.notify({type:"removed",mutation:s})}),ce(this,hl).clear(),ce(this,Ga).clear()})}getAll(){return Array.from(ce(this,hl))}find(s){const n={exact:!0,...s};return this.getAll().find(r=>sD(n,r))}findAll(s={}){return this.getAll().filter(n=>sD(s,n))}notify(s){wn.batch(()=>{this.listeners.forEach(n=>{n(s)})})}resumePausedMutations(){const s=this.getAll().filter(n=>n.state.isPaused);return wn.batch(()=>Promise.all(s.map(n=>n.continue().catch(mr))))}},hl=new WeakMap,Ga=new WeakMap,uf=new WeakMap,A6);function jg(t){var s;return(s=t.options.scope)==null?void 0:s.id}function aD(t){return{onFetch:(s,n)=>{var u,m,h,x,p;const r=s.options,a=(h=(m=(u=s.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,i=((x=s.state.data)==null?void 0:x.pages)||[],l=((p=s.state.data)==null?void 0:p.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let f=!1;const j=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(s.signal.aborted?f=!0:s.signal.addEventListener("abort",()=>{f=!0}),s.signal)})},g=r$(s.options,s.fetchOptions),y=async(v,w,N)=>{if(f)return Promise.reject();if(w==null&&v.pages.length)return Promise.resolve(v);const k=(()=>{const $={client:s.client,queryKey:s.queryKey,pageParam:w,direction:N?"backward":"forward",meta:s.options.meta};return j($),$})(),T=await g(k),{maxPages:C}=s.options,P=N?DY:TY;return{pages:P(v.pages,T,C),pageParams:P(v.pageParams,w,C)}};if(a&&i.length){const v=a==="backward",w=v?VY:iD,N={pages:i,pageParams:l},S=w(r,N);o=await y(N,S,v)}else{const v=t??i.length;do{const w=c===0?l[0]??r.initialPageParam:iD(r,o);if(c>0&&w==null)break;o=await y(o,w),c++}while(c<v)}return o};s.options.persister?s.fetchFn=()=>{var f,j;return(j=(f=s.options).persister)==null?void 0:j.call(f,d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},n)}:s.fetchFn=d}}}function iD(t,{pages:s,pageParams:n}){const r=s.length-1;return s.length>0?t.getNextPageParam(s[r],s,n[r],n):void 0}function VY(t,{pages:s,pageParams:n}){var r;return s.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,s[0],s,n[0],n):void 0}var en,fo,go,Ku,Yu,vo,Qu,Xu,T6,UY=(T6=class{constructor(t={}){jt(this,en);jt(this,fo);jt(this,go);jt(this,Ku);jt(this,Yu);jt(this,vo);jt(this,Qu);jt(this,Xu);nt(this,en,t.queryCache||new FY),nt(this,fo,t.mutationCache||new BY),nt(this,go,t.defaultOptions||{}),nt(this,Ku,new Map),nt(this,Yu,new Map),nt(this,vo,0)}mount(){tg(this,vo)._++,ce(this,vo)===1&&(nt(this,Qu,Ok.subscribe(async t=>{t&&(await this.resumePausedMutations(),ce(this,en).onFocus())})),nt(this,Xu,Xv.subscribe(async t=>{t&&(await this.resumePausedMutations(),ce(this,en).onOnline())})))}unmount(){var t,s;tg(this,vo)._--,ce(this,vo)===0&&((t=ce(this,Qu))==null||t.call(this),nt(this,Qu,void 0),(s=ce(this,Xu))==null||s.call(this),nt(this,Xu,void 0))}isFetching(t){return ce(this,en).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ce(this,fo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=ce(this,en).get(s.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),n=ce(this,en).build(this,s),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Fo(s.staleTime,n))&&this.prefetchQuery(s),Promise.resolve(r))}getQueriesData(t){return ce(this,en).findAll(t).map(({queryKey:s,state:n})=>{const r=n.data;return[s,r]})}setQueryData(t,s,n){const r=this.defaultQueryOptions({queryKey:t}),a=ce(this,en).get(r.queryHash),i=a==null?void 0:a.state.data,l=PY(s,i);if(l!==void 0)return ce(this,en).build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,s,n){return wn.batch(()=>ce(this,en).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,s,n)]))}getQueryState(t){var n;const s=this.defaultQueryOptions({queryKey:t});return(n=ce(this,en).get(s.queryHash))==null?void 0:n.state}removeQueries(t){const s=ce(this,en);wn.batch(()=>{s.findAll(t).forEach(n=>{s.remove(n)})})}resetQueries(t,s){const n=ce(this,en);return wn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const n={revert:!0,...s},r=wn.batch(()=>ce(this,en).findAll(t).map(a=>a.cancel(n)));return Promise.all(r).then(mr).catch(mr)}invalidateQueries(t,s={}){return wn.batch(()=>(ce(this,en).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},s)))}refetchQueries(t,s={}){const n={...s,cancelRefetch:s.cancelRefetch??!0},r=wn.batch(()=>ce(this,en).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(mr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(mr)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const n=ce(this,en).build(this,s);return n.isStaleByTime(Fo(s.staleTime,n))?n.fetch(s):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(mr).catch(mr)}fetchInfiniteQuery(t){return t.behavior=aD(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(mr).catch(mr)}ensureInfiniteQueryData(t){return t.behavior=aD(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Xv.isOnline()?ce(this,fo).resumePausedMutations():Promise.resolve()}getQueryCache(){return ce(this,en)}getMutationCache(){return ce(this,fo)}getDefaultOptions(){return ce(this,go)}setDefaultOptions(t){nt(this,go,t)}setQueryDefaults(t,s){ce(this,Ku).set(dd(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...ce(this,Ku).values()],n={};return s.forEach(r=>{rp(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,s){ce(this,Yu).set(dd(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...ce(this,Yu).values()],n={};return s.forEach(r=>{rp(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const s={...ce(this,go).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Tk(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Ek&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ce(this,go).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ce(this,en).clear(),ce(this,fo).clear()}},en=new WeakMap,fo=new WeakMap,go=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,vo=new WeakMap,Qu=new WeakMap,Xu=new WeakMap,T6),kr,Yt,mf,cr,Kc,Zu,yo,jo,hf,Ju,em,Yc,Qc,bo,tm,ps,cx,W1,K1,Y1,Q1,X1,Z1,J1,m$,D6,zY=(D6=class extends lh{constructor(s,n){super();jt(this,ps);jt(this,kr);jt(this,Yt);jt(this,mf);jt(this,cr);jt(this,Kc);jt(this,Zu);jt(this,yo);jt(this,jo);jt(this,hf);jt(this,Ju);jt(this,em);jt(this,Yc);jt(this,Qc);jt(this,bo);jt(this,tm,new Set);this.options=n,nt(this,kr,s),nt(this,jo,null),nt(this,yo,G1()),this.options.experimental_prefetchInRender||ce(this,yo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ce(this,Yt).addObserver(this),lD(ce(this,Yt),this.options)?Vt(this,ps,cx).call(this):this.updateResult(),Vt(this,ps,Q1).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return e2(ce(this,Yt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return e2(ce(this,Yt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Vt(this,ps,X1).call(this),Vt(this,ps,Z1).call(this),ce(this,Yt).removeObserver(this)}setOptions(s){const n=this.options,r=ce(this,Yt);if(this.options=ce(this,kr).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xa(this.options.enabled,ce(this,Yt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Vt(this,ps,J1).call(this),ce(this,Yt).setOptions(this.options),n._defaulted&&!Qv(this.options,n)&&ce(this,kr).getQueryCache().notify({type:"observerOptionsUpdated",query:ce(this,Yt),observer:this});const a=this.hasListeners();a&&oD(ce(this,Yt),r,this.options,n)&&Vt(this,ps,cx).call(this),this.updateResult(),a&&(ce(this,Yt)!==r||Xa(this.options.enabled,ce(this,Yt))!==Xa(n.enabled,ce(this,Yt))||Fo(this.options.staleTime,ce(this,Yt))!==Fo(n.staleTime,ce(this,Yt)))&&Vt(this,ps,W1).call(this);const i=Vt(this,ps,K1).call(this);a&&(ce(this,Yt)!==r||Xa(this.options.enabled,ce(this,Yt))!==Xa(n.enabled,ce(this,Yt))||i!==ce(this,bo))&&Vt(this,ps,Y1).call(this,i)}getOptimisticResult(s){const n=ce(this,kr).getQueryCache().build(ce(this,kr),s),r=this.createResult(n,s);return HY(this,r)&&(nt(this,cr,r),nt(this,Zu,this.options),nt(this,Kc,ce(this,Yt).state)),r}getCurrentResult(){return ce(this,cr)}trackResult(s,n){return new Proxy(s,{get:(r,a)=>(this.trackProp(a),n==null||n(a),Reflect.get(r,a))})}trackProp(s){ce(this,tm).add(s)}getCurrentQuery(){return ce(this,Yt)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const n=ce(this,kr).defaultQueryOptions(s),r=ce(this,kr).getQueryCache().build(ce(this,kr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(s){return Vt(this,ps,cx).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),ce(this,cr)))}createResult(s,n){var C;const r=ce(this,Yt),a=this.options,i=ce(this,cr),l=ce(this,Kc),o=ce(this,Zu),d=s!==r?s.state:ce(this,mf),{state:u}=s;let m={...u},h=!1,x;if(n._optimisticResults){const P=this.hasListeners(),$=!P&&lD(s,n),V=P&&oD(s,r,n,a);($||V)&&(m={...m,...d$(u.data,s.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:p,errorUpdatedAt:f,status:j}=m;x=m.data;let g=!1;if(n.placeholderData!==void 0&&x===void 0&&j==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(P=i.data,g=!0):P=typeof n.placeholderData=="function"?n.placeholderData((C=ce(this,em))==null?void 0:C.state.data,ce(this,em)):n.placeholderData,P!==void 0&&(j="success",x=H1(i==null?void 0:i.data,P,n),h=!0)}if(n.select&&x!==void 0&&!g)if(i&&x===(l==null?void 0:l.data)&&n.select===ce(this,hf))x=ce(this,Ju);else try{nt(this,hf,n.select),x=n.select(x),x=H1(i==null?void 0:i.data,x,n),nt(this,Ju,x),nt(this,jo,null)}catch(P){nt(this,jo,P)}ce(this,jo)&&(p=ce(this,jo),x=ce(this,Ju),f=Date.now(),j="error");const y=m.fetchStatus==="fetching",v=j==="pending",w=j==="error",N=v&&y,S=x!==void 0,T={status:j,fetchStatus:m.fetchStatus,isPending:v,isSuccess:j==="success",isError:w,isInitialLoading:N,isLoading:N,data:x,dataUpdatedAt:m.dataUpdatedAt,error:p,errorUpdatedAt:f,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:w&&!S,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:w&&S,isStale:Mk(s,n),refetch:this.refetch,promise:ce(this,yo)};if(this.options.experimental_prefetchInRender){const P=I=>{T.status==="error"?I.reject(T.error):T.data!==void 0&&I.resolve(T.data)},$=()=>{const I=nt(this,yo,T.promise=G1());P(I)},V=ce(this,yo);switch(V.status){case"pending":s.queryHash===r.queryHash&&P(V);break;case"fulfilled":(T.status==="error"||T.data!==V.value)&&$();break;case"rejected":(T.status!=="error"||T.error!==V.reason)&&$();break}}return T}updateResult(){const s=ce(this,cr),n=this.createResult(ce(this,Yt),this.options);if(nt(this,Kc,ce(this,Yt).state),nt(this,Zu,this.options),ce(this,Kc).data!==void 0&&nt(this,em,ce(this,Yt)),Qv(n,s))return;nt(this,cr,n);const r=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!ce(this,tm).size)return!0;const l=new Set(i??ce(this,tm));return this.options.throwOnError&&l.add("error"),Object.keys(ce(this,cr)).some(o=>{const c=o;return ce(this,cr)[c]!==s[c]&&l.has(c)})};Vt(this,ps,m$).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Vt(this,ps,Q1).call(this)}},kr=new WeakMap,Yt=new WeakMap,mf=new WeakMap,cr=new WeakMap,Kc=new WeakMap,Zu=new WeakMap,yo=new WeakMap,jo=new WeakMap,hf=new WeakMap,Ju=new WeakMap,em=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,bo=new WeakMap,tm=new WeakMap,ps=new WeakSet,cx=function(s){Vt(this,ps,J1).call(this);let n=ce(this,Yt).fetch(this.options,s);return s!=null&&s.throwOnError||(n=n.catch(mr)),n},W1=function(){Vt(this,ps,X1).call(this);const s=Fo(this.options.staleTime,ce(this,Yt));if(cd||ce(this,cr).isStale||!z1(s))return;const r=n$(ce(this,cr).dataUpdatedAt,s)+1;nt(this,Yc,setTimeout(()=>{ce(this,cr).isStale||this.updateResult()},r))},K1=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ce(this,Yt)):this.options.refetchInterval)??!1},Y1=function(s){Vt(this,ps,Z1).call(this),nt(this,bo,s),!(cd||Xa(this.options.enabled,ce(this,Yt))===!1||!z1(ce(this,bo))||ce(this,bo)===0)&&nt(this,Qc,setInterval(()=>{(this.options.refetchIntervalInBackground||Ok.isFocused())&&Vt(this,ps,cx).call(this)},ce(this,bo)))},Q1=function(){Vt(this,ps,W1).call(this),Vt(this,ps,Y1).call(this,Vt(this,ps,K1).call(this))},X1=function(){ce(this,Yc)&&(clearTimeout(ce(this,Yc)),nt(this,Yc,void 0))},Z1=function(){ce(this,Qc)&&(clearInterval(ce(this,Qc)),nt(this,Qc,void 0))},J1=function(){const s=ce(this,kr).getQueryCache().build(ce(this,kr),this.options);if(s===ce(this,Yt))return;const n=ce(this,Yt);nt(this,Yt,s),nt(this,mf,s.state),this.hasListeners()&&(n==null||n.removeObserver(this),s.addObserver(this))},m$=function(s){wn.batch(()=>{s.listeners&&this.listeners.forEach(n=>{n(ce(this,cr))}),ce(this,kr).getQueryCache().notify({query:ce(this,Yt),type:"observerResultsUpdated"})})},D6);function qY(t,s){return Xa(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function lD(t,s){return qY(t,s)||t.state.data!==void 0&&e2(t,s,s.refetchOnMount)}function e2(t,s,n){if(Xa(s.enabled,t)!==!1&&Fo(s.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Mk(t,s)}return!1}function oD(t,s,n,r){return(t!==s||Xa(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Mk(t,n)}function Mk(t,s){return Xa(s.enabled,t)!==!1&&t.isStaleByTime(Fo(s.staleTime,t))}function HY(t,s){return!Qv(t.getCurrentResult(),s)}var No,wo,Pr,xl,El,mv,t2,E6,GY=(E6=class extends lh{constructor(n,r){super();jt(this,El);jt(this,No);jt(this,wo);jt(this,Pr);jt(this,xl);nt(this,No,n),this.setOptions(r),this.bindMethods(),Vt(this,El,mv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=ce(this,No).defaultMutationOptions(n),Qv(this.options,r)||ce(this,No).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ce(this,Pr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&dd(r.mutationKey)!==dd(this.options.mutationKey)?this.reset():((a=ce(this,Pr))==null?void 0:a.state.status)==="pending"&&ce(this,Pr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=ce(this,Pr))==null||n.removeObserver(this)}onMutationUpdate(n){Vt(this,El,mv).call(this),Vt(this,El,t2).call(this,n)}getCurrentResult(){return ce(this,wo)}reset(){var n;(n=ce(this,Pr))==null||n.removeObserver(this),nt(this,Pr,void 0),Vt(this,El,mv).call(this),Vt(this,El,t2).call(this)}mutate(n,r){var a;return nt(this,xl,r),(a=ce(this,Pr))==null||a.removeObserver(this),nt(this,Pr,ce(this,No).getMutationCache().build(ce(this,No),this.options)),ce(this,Pr).addObserver(this),ce(this,Pr).execute(n)}},No=new WeakMap,wo=new WeakMap,Pr=new WeakMap,xl=new WeakMap,El=new WeakSet,mv=function(){var r;const n=((r=ce(this,Pr))==null?void 0:r.state)??u$();nt(this,wo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},t2=function(n){wn.batch(()=>{var r,a,i,l,o,c,d,u;if(ce(this,xl)&&this.hasListeners()){const m=ce(this,wo).variables,h=ce(this,wo).context;(n==null?void 0:n.type)==="success"?((a=(r=ce(this,xl)).onSuccess)==null||a.call(r,n.data,m,h),(l=(i=ce(this,xl)).onSettled)==null||l.call(i,n.data,null,m,h)):(n==null?void 0:n.type)==="error"&&((c=(o=ce(this,xl)).onError)==null||c.call(o,n.error,m,h),(u=(d=ce(this,xl)).onSettled)==null||u.call(d,void 0,n.error,m,h))}this.listeners.forEach(m=>{m(ce(this,wo))})})},E6),h$=b.createContext(void 0),yt=t=>{const s=b.useContext(h$);if(t)return t;if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},WY=({client:t,children:s})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(h$.Provider,{value:t,children:s})),x$=b.createContext(!1),KY=()=>b.useContext(x$);x$.Provider;function YY(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var QY=b.createContext(YY()),XY=()=>b.useContext(QY),ZY=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},JY=t=>{b.useEffect(()=>{t.clearReset()},[t])},eQ=({result:t,errorResetBoundary:s,throwOnError:n,query:r,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&r&&(a&&t.data===void 0||a$(n,[t.error,r])),tQ=t=>{if(t.suspense){const s=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>s(n(...r)):s(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},sQ=(t,s)=>t.isLoading&&t.isFetching&&!s,nQ=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,cD=(t,s,n)=>s.fetchOptimistic(t).catch(()=>{n.clearReset()});function rQ(t,s,n){var m,h,x,p,f;const r=KY(),a=XY(),i=yt(n),l=i.defaultQueryOptions(t);(h=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||h.call(m,l),l._optimisticResults=r?"isRestoring":"optimistic",tQ(l),ZY(l,a),JY(a);const o=!i.getQueryCache().get(l.queryHash),[c]=b.useState(()=>new s(i,l)),d=c.getOptimisticResult(l),u=!r&&t.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(j=>{const g=u?c.subscribe(wn.batchCalls(j)):mr;return c.updateResult(),g},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(l)},[l,c]),nQ(l,d))throw cD(l,c,a);if(eQ({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((p=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||p.call(x,l,d),l.experimental_prefetchInRender&&!cd&&sQ(d,r)){const j=o?cD(l,c,a):(f=i.getQueryCache().get(l.queryHash))==null?void 0:f.promise;j==null||j.catch(mr).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function ye(t,s){return rQ(t,zY,s)}function aQ(t,s){const n=yt(s);return iQ({filters:{...t,status:"pending"}},n).length}function dD(t,s){return t.findAll(s.filters).map(n=>s.select?s.select(n):n.state)}function iQ(t={},s){const n=yt(s).getMutationCache(),r=b.useRef(t),a=b.useRef(null);return a.current||(a.current=dD(n,t)),b.useEffect(()=>{r.current=t}),b.useSyncExternalStore(b.useCallback(i=>n.subscribe(()=>{const l=Dk(a.current,dD(n,r.current));a.current!==l&&(a.current=l,wn.schedule(i))}),[n]),()=>a.current,()=>a.current)}function Ee(t,s){const n=yt(s),[r]=b.useState(()=>new GY(n,t));b.useEffect(()=>{r.setOptions(t)},[r,t]);const a=b.useSyncExternalStore(b.useCallback(l=>r.subscribe(wn.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=b.useCallback((l,o)=>{r.mutate(l,o).catch(mr)},[r]);if(a.error&&a$(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}class lQ{constructor(){this.cache=new Map}set(s,n,r=30){this.cache.set(s,{data:n,timestamp:Date.now(),ttl:r*60*1e3})}get(s){const n=this.cache.get(s);return n?Date.now()-n.timestamp>n.ttl?(this.cache.delete(s),null):n.data:null}has(s){return this.get(s)!==null}delete(s){this.cache.delete(s)}clear(){this.cache.clear()}cleanup(){const s=Date.now();for(const[n,r]of this.cache.entries())s-r.timestamp>r.ttl&&this.cache.delete(n)}}const wa=new lQ;setInterval(()=>wa.cleanup(),5*60*1e3);const oQ={"/api/properties":[{id:17,name:"Villa Samui Breeze",bedrooms:3,status:"active"},{id:18,name:"Villa Ocean View",bedrooms:2,status:"active"},{id:19,name:"Villa Tropical Paradise",bedrooms:4,status:"active"},{id:20,name:"Villa Aruna Demo",bedrooms:4,status:"active"}],"/api/tasks":[{id:1,title:"Pool Cleaning",status:"pending",priority:"high"},{id:2,title:"AC Maintenance",status:"in-progress",priority:"medium"},{id:3,title:"Garden Care",status:"completed",priority:"low"}],"/api/bookings":[{id:9,guestName:"John Smith",status:"confirmed",totalAmount:8500},{id:10,guestName:"Sarah Wilson",status:"pending",totalAmount:12e3}],"/api/dashboard/stats":{totalProperties:17,activeBookings:8,pendingTasks:23,monthlyRevenue:149400}};function cQ(t){return sessionStorage.getItem("app_visited")?null:(sessionStorage.setItem("app_visited","true"),oQ[t]||null)}async function dQ(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function ve(t,s,n){const r={method:t,credentials:"include",headers:n?{"Content-Type":"application/json"}:{}};n!==void 0&&(r.body=JSON.stringify(n));const a=await fetch(s,r),i=await a.text();let l=null;try{l=i?JSON.parse(i):{}}catch{console.warn(" Non-JSON response from server:",i),l={message:i||"No response body"}}if(!a.ok){const o=new Error((l==null?void 0:l.message)||`Request failed: ${a.status}`);throw o.status=a.status,o.data=l,o}return l}const uQ=({on401:t})=>async({queryKey:s})=>{const n=s[0],r=cQ(n);if(r)return console.log(`Instant data served: ${n}`),wa.set(n,r,60),r;if(wa.has(n)){const l=wa.get(n);return console.log(`Fast cache hit: ${n}`),l}const a=await fetch(n,{credentials:"include"});await dQ(a);const i=await a.json();return wa.set(n,i,30),i},Bs=new UY({defaultOptions:{queries:{queryFn:uQ({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!1,staleTime:120*1e3,gcTime:300*1e3,retry:2,networkMode:"online",notifyOnChangeProps:["data","error"]},mutations:{retry:!1,networkMode:"online"}}});typeof window<"u"&&(window.queryClient=Bs);const mQ=1,hQ=1e6;let gN=0;function xQ(){return gN=(gN+1)%Number.MAX_SAFE_INTEGER,gN.toString()}const vN=new Map,uD=t=>{if(vN.has(t))return;const s=setTimeout(()=>{vN.delete(t),Ax({type:"REMOVE_TOAST",toastId:t})},hQ);vN.set(t,s)},pQ=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,mQ)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===s.toast.id?{...n,...s.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=s;return n?uD(n):t.toasts.forEach(r=>{uD(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==s.toastId)}}},hv=[];let xv={toasts:[]};function Ax(t){xv=pQ(xv,t),hv.forEach(s=>{s(xv)})}function fQ({...t}){const s=xQ(),n=a=>Ax({type:"UPDATE_TOAST",toast:{...a,id:s}}),r=()=>Ax({type:"DISMISS_TOAST",toastId:s});return Ax({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||r()}}}),{id:s,dismiss:r,update:n}}function at(){const[t,s]=b.useState(xv);return b.useEffect(()=>(hv.push(s),()=>{const n=hv.indexOf(s);n>-1&&hv.splice(n,1)}),[t]),{...t,toast:fQ,dismiss:n=>Ax({type:"DISMISS_TOAST",toastId:n})}}function Be(t,s,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t==null||t(a),n===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function mD(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Gj(...t){return s=>{let n=!1;const r=t.map(a=>{const i=mD(a,s);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():mD(t[a],null)}}}}function kt(...t){return b.useCallback(Gj(...t),t)}function gQ(t,s){const n=b.createContext(s),r=i=>{const{children:l,...o}=i,c=b.useMemo(()=>o,Object.values(o));return e.jsx(n.Provider,{value:c,children:l})};r.displayName=t+"Provider";function a(i){const l=b.useContext(n);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,a]}function Pn(t,s=[]){let n=[];function r(i,l){const o=b.createContext(l),c=n.length;n=[...n,l];const d=m=>{var g;const{scope:h,children:x,...p}=m,f=((g=h==null?void 0:h[t])==null?void 0:g[c])||o,j=b.useMemo(()=>p,Object.values(p));return e.jsx(f.Provider,{value:j,children:x})};d.displayName=i+"Provider";function u(m,h){var f;const x=((f=h==null?void 0:h[t])==null?void 0:f[c])||o,p=b.useContext(x);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(l=>b.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[r,vQ(a,...s)]}function vQ(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=r.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return b.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}function Wo(t){const s=yQ(t),n=b.forwardRef((r,a)=>{const{children:i,...l}=r,o=b.Children.toArray(i),c=o.find(jQ);if(c){const d=c.props.children,u=o.map(m=>m===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:m);return e.jsx(s,{...l,ref:a,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return e.jsx(s,{...l,ref:a,children:i})});return n.displayName=`${t}.Slot`,n}var p$=Wo("Slot");function yQ(t){const s=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const l=NQ(a),o=bQ(i,a.props);return a.type!==b.Fragment&&(o.ref=r?Gj(r,l):l),b.cloneElement(a,o)}return b.Children.count(a)>1?b.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var f$=Symbol("radix.slottable");function g$(t){const s=({children:n})=>e.jsx(e.Fragment,{children:n});return s.displayName=`${t}.Slottable`,s.__radixId=f$,s}function jQ(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===f$}function bQ(t,s){const n={...s};for(const r in s){const a=t[r],i=s[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...t,...n}}function NQ(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Wj(t){const s=t+"CollectionProvider",[n,r]=Pn(s),[a,i]=n(s,{collectionRef:{current:null},itemMap:new Map}),l=f=>{const{scope:j,children:g}=f,y=X.useRef(null),v=X.useRef(new Map).current;return e.jsx(a,{scope:j,itemMap:v,collectionRef:y,children:g})};l.displayName=s;const o=t+"CollectionSlot",c=Wo(o),d=X.forwardRef((f,j)=>{const{scope:g,children:y}=f,v=i(o,g),w=kt(j,v.collectionRef);return e.jsx(c,{ref:w,children:y})});d.displayName=o;const u=t+"CollectionItemSlot",m="data-radix-collection-item",h=Wo(u),x=X.forwardRef((f,j)=>{const{scope:g,children:y,...v}=f,w=X.useRef(null),N=kt(j,w),S=i(u,g);return X.useEffect(()=>(S.itemMap.set(w,{ref:w,...v}),()=>void S.itemMap.delete(w))),e.jsx(h,{[m]:"",ref:N,children:y})});x.displayName=u;function p(f){const j=i(t+"CollectionConsumer",f);return X.useCallback(()=>{const y=j.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${m}]`));return Array.from(j.itemMap.values()).sort((S,k)=>v.indexOf(S.ref.current)-v.indexOf(k.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:l,Slot:d,ItemSlot:x},p,r]}var wQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=wQ.reduce((t,s)=>{const n=Wo(`Primitive.${s}`),r=b.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function _k(t,s){t&&Ad.flushSync(()=>t.dispatchEvent(s))}function an(t){const s=b.useRef(t);return b.useEffect(()=>{s.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=s.current)==null?void 0:r.call(s,...n)},[])}function SQ(t,s=globalThis==null?void 0:globalThis.document){const n=an(t);b.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[n,s])}var CQ="DismissableLayer",s2="dismissableLayer.update",kQ="dismissableLayer.pointerDownOutside",PQ="dismissableLayer.focusOutside",hD,v$=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Td=b.forwardRef((t,s)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,d=b.useContext(v$),[u,m]=b.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=b.useState({}),p=kt(s,k=>m(k)),f=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=f.indexOf(j),y=u?f.indexOf(u):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,w=y>=g,N=TQ(k=>{const T=k.target,C=[...d.branches].some(P=>P.contains(T));!w||C||(a==null||a(k),l==null||l(k),k.defaultPrevented||o==null||o())},h),S=DQ(k=>{const T=k.target;[...d.branches].some(P=>P.contains(T))||(i==null||i(k),l==null||l(k),k.defaultPrevented||o==null||o())},h);return SQ(k=>{y===d.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&o&&(k.preventDefault(),o()))},h),b.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(hD=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),xD(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=hD)}},[u,h,n,d]),b.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),xD())},[u,d]),b.useEffect(()=>{const k=()=>x({});return document.addEventListener(s2,k),()=>document.removeEventListener(s2,k)},[]),e.jsx(st.div,{...c,ref:p,style:{pointerEvents:v?w?"auto":"none":void 0,...t.style},onFocusCapture:Be(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Be(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Be(t.onPointerDownCapture,N.onPointerDownCapture)})});Td.displayName=CQ;var AQ="DismissableLayerBranch",y$=b.forwardRef((t,s)=>{const n=b.useContext(v$),r=b.useRef(null),a=kt(s,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),e.jsx(st.div,{...t,ref:a})});y$.displayName=AQ;function TQ(t,s=globalThis==null?void 0:globalThis.document){const n=an(t),r=b.useRef(!1),a=b.useRef(()=>{});return b.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let c=function(){j$(kQ,n,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);r.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,n]),{onPointerDownCapture:()=>r.current=!0}}function DQ(t,s=globalThis==null?void 0:globalThis.document){const n=an(t),r=b.useRef(!1);return b.useEffect(()=>{const a=i=>{i.target&&!r.current&&j$(PQ,n,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xD(){const t=new CustomEvent(s2);document.dispatchEvent(t)}function j$(t,s,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});s&&a.addEventListener(t,s,{once:!0}),r?_k(a,i):a.dispatchEvent(i)}var EQ=Td,OQ=y$,cn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},MQ="Portal",oh=b.forwardRef((t,s)=>{var o;const{container:n,...r}=t,[a,i]=b.useState(!1);cn(()=>i(!0),[]);const l=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?QK.createPortal(e.jsx(st.div,{...r,ref:s}),l):null});oh.displayName=MQ;function _Q(t,s){return b.useReducer((n,r)=>s[n][r]??n,t)}var An=t=>{const{present:s,children:n}=t,r=RQ(s),a=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=kt(r.ref,IQ(a));return typeof n=="function"||r.isPresent?b.cloneElement(a,{ref:i}):null};An.displayName="Presence";function RQ(t){const[s,n]=b.useState(),r=b.useRef(null),a=b.useRef(t),i=b.useRef("none"),l=t?"mounted":"unmounted",[o,c]=_Q(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const d=bg(r.current);i.current=o==="mounted"?d:"none"},[o]),cn(()=>{const d=r.current,u=a.current;if(u!==t){const h=i.current,x=bg(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),cn(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,m=x=>{const f=bg(r.current).includes(x.animationName);if(x.target===s&&f&&(c("ANIMATION_END"),!a.current)){const j=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=j)})}},h=x=>{x.target===s&&(i.current=bg(r.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:b.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function bg(t){return(t==null?void 0:t.animationName)||"none"}function IQ(t){var r,a;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var $Q=RC[" useInsertionEffect ".trim().toString()]||cn;function ra({prop:t,defaultProp:s,onChange:n=()=>{},caller:r}){const[a,i,l]=FQ({defaultProp:s,onChange:n}),o=t!==void 0,c=o?t:a;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const d=b.useCallback(u=>{var m;if(o){const h=LQ(u)?u(t):u;h!==t&&((m=l.current)==null||m.call(l,h))}else i(u)},[o,t,i,l]);return[c,d]}function FQ({defaultProp:t,onChange:s}){const[n,r]=b.useState(t),a=b.useRef(n),i=b.useRef(s);return $Q(()=>{i.current=s},[s]),b.useEffect(()=>{var l;a.current!==n&&((l=i.current)==null||l.call(i,n),a.current=n)},[n,a]),[n,r,i]}function LQ(t){return typeof t=="function"}var b$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),BQ="VisuallyHidden",Kj=b.forwardRef((t,s)=>e.jsx(st.span,{...t,ref:s,style:{...b$,...t.style}}));Kj.displayName=BQ;var VQ=Kj,Rk="ToastProvider",[Ik,UQ,zQ]=Wj("Toast"),[N$]=Pn("Toast",[zQ]),[qQ,Yj]=N$(Rk),w$=t=>{const{__scopeToast:s,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=t,[o,c]=b.useState(null),[d,u]=b.useState(0),m=b.useRef(!1),h=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Rk}\`. Expected non-empty \`string\`.`),e.jsx(Ik.Provider,{scope:s,children:e.jsx(qQ,{scope:s,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:b.useCallback(()=>u(x=>x+1),[]),onToastRemove:b.useCallback(()=>u(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:l})})};w$.displayName=Rk;var S$="ToastViewport",HQ=["F8"],n2="toast.viewportPause",r2="toast.viewportResume",C$=b.forwardRef((t,s)=>{const{__scopeToast:n,hotkey:r=HQ,label:a="Notifications ({hotkey})",...i}=t,l=Yj(S$,n),o=UQ(n),c=b.useRef(null),d=b.useRef(null),u=b.useRef(null),m=b.useRef(null),h=kt(s,m,l.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=l.toastCount>0;b.useEffect(()=>{const j=g=>{var v;r.length!==0&&r.every(w=>g[w]||g.code===w)&&((v=m.current)==null||v.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[r]),b.useEffect(()=>{const j=c.current,g=m.current;if(p&&j&&g){const y=()=>{if(!l.isClosePausedRef.current){const S=new CustomEvent(n2);g.dispatchEvent(S),l.isClosePausedRef.current=!0}},v=()=>{if(l.isClosePausedRef.current){const S=new CustomEvent(r2);g.dispatchEvent(S),l.isClosePausedRef.current=!1}},w=S=>{!j.contains(S.relatedTarget)&&v()},N=()=>{j.contains(document.activeElement)||v()};return j.addEventListener("focusin",y),j.addEventListener("focusout",w),j.addEventListener("pointermove",y),j.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",v),()=>{j.removeEventListener("focusin",y),j.removeEventListener("focusout",w),j.removeEventListener("pointermove",y),j.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",v)}}},[p,l.isClosePausedRef]);const f=b.useCallback(({tabbingDirection:j})=>{const y=o().map(v=>{const w=v.ref.current,N=[w,...rX(w)];return j==="forwards"?N:N.reverse()});return(j==="forwards"?y.reverse():y).flat()},[o]);return b.useEffect(()=>{const j=m.current;if(j){const g=y=>{var N,S,k;const v=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!v){const T=document.activeElement,C=y.shiftKey;if(y.target===j&&C){(N=d.current)==null||N.focus();return}const V=f({tabbingDirection:C?"backwards":"forwards"}),I=V.findIndex(_=>_===T);yN(V.slice(I+1))?y.preventDefault():C?(S=d.current)==null||S.focus():(k=u.current)==null||k.focus()}};return j.addEventListener("keydown",g),()=>j.removeEventListener("keydown",g)}},[o,f]),e.jsxs(OQ,{ref:c,role:"region","aria-label":a.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&e.jsx(a2,{ref:d,onFocusFromOutsideViewport:()=>{const j=f({tabbingDirection:"forwards"});yN(j)}}),e.jsx(Ik.Slot,{scope:n,children:e.jsx(st.ol,{tabIndex:-1,...i,ref:h})}),p&&e.jsx(a2,{ref:u,onFocusFromOutsideViewport:()=>{const j=f({tabbingDirection:"backwards"});yN(j)}})]})});C$.displayName=S$;var k$="ToastFocusProxy",a2=b.forwardRef((t,s)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=t,i=Yj(k$,n);return e.jsx(Kj,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:l=>{var d;const o=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&r()}})});a2.displayName=k$;var yf="Toast",GQ="toast.swipeStart",WQ="toast.swipeMove",KQ="toast.swipeCancel",YQ="toast.swipeEnd",P$=b.forwardRef((t,s)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...l}=t,[o,c]=ra({prop:r,defaultProp:a??!0,onChange:i,caller:yf});return e.jsx(An,{present:n||o,children:e.jsx(ZQ,{open:o,...l,ref:s,onClose:()=>c(!1),onPause:an(t.onPause),onResume:an(t.onResume),onSwipeStart:Be(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Be(t.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Be(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Be(t.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});P$.displayName=yf;var[QQ,XQ]=N$(yf,{onClose(){}}),ZQ=b.forwardRef((t,s)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:x,...p}=t,f=Yj(yf,n),[j,g]=b.useState(null),y=kt(s,_=>g(_)),v=b.useRef(null),w=b.useRef(null),N=a||f.duration,S=b.useRef(0),k=b.useRef(N),T=b.useRef(0),{onToastAdd:C,onToastRemove:P}=f,$=an(()=>{var U;(j==null?void 0:j.contains(document.activeElement))&&((U=f.viewport)==null||U.focus()),l()}),V=b.useCallback(_=>{!_||_===1/0||(window.clearTimeout(T.current),S.current=new Date().getTime(),T.current=window.setTimeout($,_))},[$]);b.useEffect(()=>{const _=f.viewport;if(_){const U=()=>{V(k.current),d==null||d()},H=()=>{const Y=new Date().getTime()-S.current;k.current=k.current-Y,window.clearTimeout(T.current),c==null||c()};return _.addEventListener(n2,H),_.addEventListener(r2,U),()=>{_.removeEventListener(n2,H),_.removeEventListener(r2,U)}}},[f.viewport,N,c,d,V]),b.useEffect(()=>{i&&!f.isClosePausedRef.current&&V(N)},[i,N,f.isClosePausedRef,V]),b.useEffect(()=>(C(),()=>P()),[C,P]);const I=b.useMemo(()=>j?_$(j):null,[j]);return f.viewport?e.jsxs(e.Fragment,{children:[I&&e.jsx(JQ,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),e.jsx(QQ,{scope:n,onClose:$,children:Ad.createPortal(e.jsx(Ik.ItemSlot,{scope:n,children:e.jsx(EQ,{asChild:!0,onEscapeKeyDown:Be(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||$(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":f.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Be(t.onKeyDown,_=>{_.key==="Escape"&&(o==null||o(_.nativeEvent),_.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:Be(t.onPointerDown,_=>{_.button===0&&(v.current={x:_.clientX,y:_.clientY})}),onPointerMove:Be(t.onPointerMove,_=>{if(!v.current)return;const U=_.clientX-v.current.x,H=_.clientY-v.current.y,Y=!!w.current,O=["left","right"].includes(f.swipeDirection),R=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,q=O?R(0,U):0,re=O?0:R(0,H),we=_.pointerType==="touch"?10:2,K={x:q,y:re},Ce={originalEvent:_,delta:K};Y?(w.current=K,Ng(WQ,m,Ce,{discrete:!1})):pD(K,f.swipeDirection,we)?(w.current=K,Ng(GQ,u,Ce,{discrete:!1}),_.target.setPointerCapture(_.pointerId)):(Math.abs(U)>we||Math.abs(H)>we)&&(v.current=null)}),onPointerUp:Be(t.onPointerUp,_=>{const U=w.current,H=_.target;if(H.hasPointerCapture(_.pointerId)&&H.releasePointerCapture(_.pointerId),w.current=null,v.current=null,U){const Y=_.currentTarget,O={originalEvent:_,delta:U};pD(U,f.swipeDirection,f.swipeThreshold)?Ng(YQ,x,O,{discrete:!0}):Ng(KQ,h,O,{discrete:!0}),Y.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),JQ=t=>{const{__scopeToast:s,children:n,...r}=t,a=Yj(yf,s),[i,l]=b.useState(!1),[o,c]=b.useState(!1);return sX(()=>l(!0)),b.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:e.jsx(oh,{asChild:!0,children:e.jsx(Kj,{...r,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",n]})})})},eX="ToastTitle",A$=b.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(st.div,{...r,ref:s})});A$.displayName=eX;var tX="ToastDescription",T$=b.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t;return e.jsx(st.div,{...r,ref:s})});T$.displayName=tX;var D$="ToastAction",E$=b.forwardRef((t,s)=>{const{altText:n,...r}=t;return n.trim()?e.jsx(M$,{altText:n,asChild:!0,children:e.jsx($k,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${D$}\`. Expected non-empty \`string\`.`),null)});E$.displayName=D$;var O$="ToastClose",$k=b.forwardRef((t,s)=>{const{__scopeToast:n,...r}=t,a=XQ(O$,n);return e.jsx(M$,{asChild:!0,children:e.jsx(st.button,{type:"button",...r,ref:s,onClick:Be(t.onClick,a.onClose)})})});$k.displayName=O$;var M$=b.forwardRef((t,s)=>{const{__scopeToast:n,altText:r,...a}=t;return e.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:s})});function _$(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),nX(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(..._$(r))}}),s}function Ng(t,s,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});s&&a.addEventListener(t,s,{once:!0}),r?_k(a,i):a.dispatchEvent(i)}var pD=(t,s,n=0)=>{const r=Math.abs(t.x),a=Math.abs(t.y),i=r>a;return s==="left"||s==="right"?i&&r>n:!i&&a>n};function sX(t=()=>{}){const s=an(t);cn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[s])}function nX(t){return t.nodeType===t.ELEMENT_NODE}function rX(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function yN(t){const s=document.activeElement;return t.some(n=>n===s?!0:(n.focus(),document.activeElement!==s))}var aX=w$,R$=C$,I$=P$,$$=A$,F$=T$,L$=E$,B$=$k;function V$(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(n=V$(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,s,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(s=V$(t))&&(r&&(r+=" "),r+=s);return r}const fD=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,gD=$t,jf=(t,s)=>n=>{var r;if((s==null?void 0:s.variants)==null)return gD(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=s,l=Object.keys(a).map(d=>{const u=n==null?void 0:n[d],m=i==null?void 0:i[d];if(u===null)return null;const h=fD(u)||fD(m);return a[d][h]}),o=n&&Object.entries(n).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=s==null||(r=s.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:m,className:h,...x}=u;return Object.entries(x).every(p=>{let[f,j]=p;return Array.isArray(j)?j.includes({...i,...o}[f]):{...i,...o}[f]===j})?[...d,m,h]:d},[]);return gD(t,l,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U$=(...t)=>t.filter((s,n,r)=>!!s&&r.indexOf(s)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=b.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:l,...o},c)=>b.createElement("svg",{ref:c,...lX,width:s,height:s,stroke:t,strokeWidth:r?Number(n)*24/Number(s):n,className:U$("lucide",a),...o},[...l.map(([d,u])=>b.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(t,s)=>{const n=b.forwardRef(({className:r,...a},i)=>b.createElement(oX,{ref:i,iconNode:s,className:U$(`lucide-${iX(t)}`,r),...a}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=Te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=Te("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Te("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=Te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=Te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=Te("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=Te("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Te("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=Te("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=Te("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Te("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=Te("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Te("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=Te("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=Te("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=Te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Te("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xX=Te("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=Te("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=Te("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=Te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=Te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Te("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=Te("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Te("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=Te("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Te("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=Te("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=Te("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Te("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Te("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Te("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=Te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=Te("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=Te("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Te("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=Te("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Te("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=Te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=Te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=Te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=Te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=Te("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Te("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=Te("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=Te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Te("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=Te("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=Te("Luggage",[["path",{d:"M6 20a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2",key:"1m57jg"}],["path",{d:"M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14",key:"1l99gc"}],["path",{d:"M10 20h4",key:"ni2waw"}],["circle",{cx:"16",cy:"20",r:"2",key:"1vifvg"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Te("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=Te("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=Te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=Te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=Te("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=Te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SX=Te("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=Te("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CX=Te("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=Te("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=Te("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PX=Te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=Te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=Te("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=Te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=Te("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=Te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Te("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=Te("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=Te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=Te("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=Te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=Te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _X=Te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=Te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=Te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Te("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=Te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=Te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=Te("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=Te("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=Te("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BX=Te("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=Te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=Te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=Te("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=Te("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=Te("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Te("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=Te("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=Te("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Te("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Vk="-",zX=t=>{const s=HX(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const o=l.split(Vk);return o[0]===""&&o.length!==1&&o.shift(),aF(o,s)||qX(l)},getConflictingClassGroupIds:(l,o)=>{const c=n[l]||[];return o&&r[l]?[...c,...r[l]]:c}}},aF=(t,s)=>{var l;if(t.length===0)return s.classGroupId;const n=t[0],r=s.nextPart.get(n),a=r?aF(t.slice(1),r):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(Vk);return(l=s.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},CD=/^\[(.+)\]$/,qX=t=>{if(CD.test(t)){const s=CD.exec(t)[1],n=s==null?void 0:s.substring(0,s.indexOf(":"));if(n)return"arbitrary.."+n}},HX=t=>{const{theme:s,prefix:n}=t,r={nextPart:new Map,validators:[]};return WX(Object.entries(t.classGroups),n).forEach(([i,l])=>{c2(l,r,i,s)}),r},c2=(t,s,n,r)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:kD(s,a);i.classGroupId=n;return}if(typeof a=="function"){if(GX(a)){c2(a(r),s,n,r);return}s.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,l])=>{c2(l,kD(s,i),n,r)})})},kD=(t,s)=>{let n=t;return s.split(Vk).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},GX=t=>t.isThemeGetter,WX=(t,s)=>s?t.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[s+l,o])):i);return[n,a]}):t,KX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=new Map,r=new Map;const a=(i,l)=>{n.set(i,l),s++,s>t&&(s=0,r=n,n=new Map)};return{get(i){let l=n.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return a(i,l),l},set(i,l){n.has(i)?n.set(i,l):a(i,l)}}},iF="!",YX=t=>{const{separator:s,experimentalParseClassName:n}=t,r=s.length===1,a=s[0],i=s.length,l=o=>{const c=[];let d=0,u=0,m;for(let j=0;j<o.length;j++){let g=o[j];if(d===0){if(g===a&&(r||o.slice(j,j+i)===s)){c.push(o.slice(u,j)),u=j+i;continue}if(g==="/"){m=j;continue}}g==="["?d++:g==="]"&&d--}const h=c.length===0?o:o.substring(u),x=h.startsWith(iF),p=x?h.substring(1):h,f=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:p,maybePostfixModifierPosition:f}};return n?o=>n({className:o,parseClassName:l}):l},QX=t=>{if(t.length<=1)return t;const s=[];let n=[];return t.forEach(r=>{r[0]==="["?(s.push(...n.sort(),r),n=[]):n.push(r)}),s.push(...n.sort()),s},XX=t=>({cache:KX(t.cacheSize),parseClassName:YX(t),...zX(t)}),ZX=/\s+/,JX=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=s,i=[],l=t.trim().split(ZX);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:x}=n(d);let p=!!x,f=r(p?h.substring(0,x):h);if(!f){if(!p){o=d+(o.length>0?" "+o:o);continue}if(f=r(h),!f){o=d+(o.length>0?" "+o:o);continue}p=!1}const j=QX(u).join(":"),g=m?j+iF:j,y=g+f;if(i.includes(y))continue;i.push(y);const v=a(f,p);for(let w=0;w<v.length;++w){const N=v[w];i.push(g+N)}o=d+(o.length>0?" "+o:o)}return o};function eZ(){let t=0,s,n,r="";for(;t<arguments.length;)(s=arguments[t++])&&(n=lF(s))&&(r&&(r+=" "),r+=n);return r}const lF=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=lF(t[r]))&&(n&&(n+=" "),n+=s);return n};function tZ(t,...s){let n,r,a,i=l;function l(c){const d=s.reduce((u,m)=>m(u),t());return n=XX(d),r=n.cache.get,a=n.cache.set,i=o,o(c)}function o(c){const d=r(c);if(d)return d;const u=JX(c,n);return a(c,u),u}return function(){return i(eZ.apply(null,arguments))}}const Rs=t=>{const s=n=>n[t]||[];return s.isThemeGetter=!0,s},oF=/^\[(?:([a-z-]+):)?(.+)\]$/i,sZ=/^\d+\/\d+$/,nZ=new Set(["px","full","screen"]),rZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rl=t=>Iu(t)||nZ.has(t)||sZ.test(t),Ql=t=>ch(t,"length",fZ),Iu=t=>!!t&&!Number.isNaN(Number(t)),NN=t=>ch(t,"number",Iu),Bh=t=>!!t&&Number.isInteger(Number(t)),cZ=t=>t.endsWith("%")&&Iu(t.slice(0,-1)),Lt=t=>oF.test(t),Xl=t=>rZ.test(t),dZ=new Set(["length","size","percentage"]),uZ=t=>ch(t,dZ,cF),mZ=t=>ch(t,"position",cF),hZ=new Set(["image","url"]),xZ=t=>ch(t,hZ,vZ),pZ=t=>ch(t,"",gZ),Vh=()=>!0,ch=(t,s,n)=>{const r=oF.exec(t);return r?r[1]?typeof s=="string"?r[1]===s:s.has(r[1]):n(r[2]):!1},fZ=t=>aZ.test(t)&&!iZ.test(t),cF=()=>!1,gZ=t=>lZ.test(t),vZ=t=>oZ.test(t),yZ=()=>{const t=Rs("colors"),s=Rs("spacing"),n=Rs("blur"),r=Rs("brightness"),a=Rs("borderColor"),i=Rs("borderRadius"),l=Rs("borderSpacing"),o=Rs("borderWidth"),c=Rs("contrast"),d=Rs("grayscale"),u=Rs("hueRotate"),m=Rs("invert"),h=Rs("gap"),x=Rs("gradientColorStops"),p=Rs("gradientColorStopPositions"),f=Rs("inset"),j=Rs("margin"),g=Rs("opacity"),y=Rs("padding"),v=Rs("saturate"),w=Rs("scale"),N=Rs("sepia"),S=Rs("skew"),k=Rs("space"),T=Rs("translate"),C=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Lt,s],V=()=>[Lt,s],I=()=>["",rl,Ql],_=()=>["auto",Iu,Lt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Lt],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[Iu,Lt];return{cacheSize:500,separator:":",theme:{colors:[Vh],spacing:[rl,Ql],blur:["none","",Xl,Lt],brightness:re(),borderColor:[t],borderRadius:["none","","full",Xl,Lt],borderSpacing:V(),borderWidth:I(),contrast:re(),grayscale:R(),hueRotate:re(),invert:R(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[cZ,Ql],inset:$(),margin:$(),opacity:re(),padding:V(),saturate:re(),scale:re(),sepia:R(),skew:re(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",Lt]}],container:["container"],columns:[{columns:[Xl]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),Lt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bh,Lt]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Lt]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",Bh,Lt]}],"grid-cols":[{"grid-cols":[Vh]}],"col-start-end":[{col:["auto",{span:["full",Bh,Lt]},Lt]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[Vh]}],"row-start-end":[{row:["auto",{span:[Bh,Lt]},Lt]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Lt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Lt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Lt,s]}],"min-w":[{"min-w":[Lt,s,"min","max","fit"]}],"max-w":[{"max-w":[Lt,s,"none","full","min","max","fit","prose",{screen:[Xl]},Xl]}],h:[{h:[Lt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Lt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Lt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Lt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Xl,Ql]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",NN]}],"font-family":[{font:[Vh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Lt]}],"line-clamp":[{"line-clamp":["none",Iu,NN]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rl,Lt]}],"list-image":[{"list-image":["none",Lt]}],"list-style-type":[{list:["none","disc","decimal",Lt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rl,Ql]}],"underline-offset":[{"underline-offset":["auto",rl,Lt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),mZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xZ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:H()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[rl,Lt]}],"outline-w":[{outline:[rl,Ql]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[rl,Ql]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Xl,pZ]}],"shadow-color":[{shadow:[Vh]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Xl,Lt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[v]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Lt]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",Lt]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",Lt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Bh,Lt]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Lt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Lt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Lt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rl,Ql,NN]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jZ=tZ(yZ);function Ue(...t){return jZ($t(t))}function Ba(t,s="THB"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}const bZ=aX,dF=b.forwardRef(({className:t,...s},n)=>e.jsx(R$,{ref:n,className:Ue("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));dF.displayName=R$.displayName;const NZ=jf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uF=b.forwardRef(({className:t,variant:s,...n},r)=>e.jsx(I$,{ref:r,className:Ue(NZ({variant:s}),t),...n}));uF.displayName=I$.displayName;const wZ=b.forwardRef(({className:t,...s},n)=>e.jsx(L$,{ref:n,className:Ue("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));wZ.displayName=L$.displayName;const mF=b.forwardRef(({className:t,...s},n)=>e.jsx(B$,{ref:n,className:Ue("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(on,{className:"h-4 w-4"})}));mF.displayName=B$.displayName;const hF=b.forwardRef(({className:t,...s},n)=>e.jsx($$,{ref:n,className:Ue("text-sm font-semibold",t),...s}));hF.displayName=$$.displayName;const xF=b.forwardRef(({className:t,...s},n)=>e.jsx(F$,{ref:n,className:Ue("text-sm opacity-90",t),...s}));xF.displayName=F$.displayName;function SZ(){const{toasts:t}=at();return e.jsxs(bZ,{children:[t.map(function({id:s,title:n,description:r,action:a,...i}){return e.jsxs(uF,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(hF,{children:n}),r&&e.jsx(xF,{children:r})]}),a,e.jsx(mF,{})]},s)}),e.jsx(dF,{})]})}var CZ=RC[" useId ".trim().toString()]||(()=>{}),kZ=0;function Zr(t){const[s,n]=b.useState(CZ());return cn(()=>{n(r=>r??String(kZ++))},[t]),t||(s?`radix-${s}`:"")}const PZ=["top","right","bottom","left"],Qo=Math.min,Gr=Math.max,Jv=Math.round,wg=Math.floor,Li=t=>({x:t,y:t}),AZ={left:"right",right:"left",bottom:"top",top:"bottom"},TZ={start:"end",end:"start"};function d2(t,s,n){return Gr(t,Qo(s,n))}function $l(t,s){return typeof t=="function"?t(s):t}function Fl(t){return t.split("-")[0]}function dh(t){return t.split("-")[1]}function Uk(t){return t==="x"?"y":"x"}function zk(t){return t==="y"?"height":"width"}const DZ=new Set(["top","bottom"]);function Ei(t){return DZ.has(Fl(t))?"y":"x"}function qk(t){return Uk(Ei(t))}function EZ(t,s,n){n===void 0&&(n=!1);const r=dh(t),a=qk(t),i=zk(a);let l=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=ey(l)),[l,ey(l)]}function OZ(t){const s=ey(t);return[u2(t),s,u2(s)]}function u2(t){return t.replace(/start|end/g,s=>TZ[s])}const PD=["left","right"],AD=["right","left"],MZ=["top","bottom"],_Z=["bottom","top"];function RZ(t,s,n){switch(t){case"top":case"bottom":return n?s?AD:PD:s?PD:AD;case"left":case"right":return s?MZ:_Z;default:return[]}}function IZ(t,s,n,r){const a=dh(t);let i=RZ(Fl(t),n==="start",r);return a&&(i=i.map(l=>l+"-"+a),s&&(i=i.concat(i.map(u2)))),i}function ey(t){return t.replace(/left|right|bottom|top/g,s=>AZ[s])}function $Z(t){return{top:0,right:0,bottom:0,left:0,...t}}function pF(t){return typeof t!="number"?$Z(t):{top:t,right:t,bottom:t,left:t}}function ty(t){const{x:s,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:s,right:s+r,bottom:n+a,x:s,y:n}}function TD(t,s,n){let{reference:r,floating:a}=t;const i=Ei(s),l=qk(s),o=zk(l),c=Fl(s),d=i==="y",u=r.x+r.width/2-a.width/2,m=r.y+r.height/2-a.height/2,h=r[o]/2-a[o]/2;let x;switch(c){case"top":x={x:u,y:r.y-a.height};break;case"bottom":x={x:u,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:m};break;case"left":x={x:r.x-a.width,y:m};break;default:x={x:r.x,y:r.y}}switch(dh(s)){case"start":x[l]-=h*(n&&d?-1:1);break;case"end":x[l]+=h*(n&&d?-1:1);break}return x}const FZ=async(t,s,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:l}=n,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(s));let d=await l.getElementRects({reference:t,floating:s,strategy:a}),{x:u,y:m}=TD(d,r,c),h=r,x={},p=0;for(let f=0;f<o.length;f++){const{name:j,fn:g}=o[f],{x:y,y:v,data:w,reset:N}=await g({x:u,y:m,initialPlacement:r,placement:h,strategy:a,middlewareData:x,rects:d,platform:l,elements:{reference:t,floating:s}});u=y??u,m=v??m,x={...x,[j]:{...x[j],...w}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(d=N.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:a}):N.rects),{x:u,y:m}=TD(d,h,c)),f=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:x}};async function dp(t,s){var n;s===void 0&&(s={});const{x:r,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:x=0}=$l(s,t),p=pF(x),j=o[h?m==="floating"?"reference":"floating":m],g=ty(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(j)))==null||n?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),y=m==="floating"?{x:r,y:a,width:l.floating.width,height:l.floating.height}:l.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),w=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},N=ty(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:v,strategy:c}):y);return{top:(g.top-N.top+p.top)/w.y,bottom:(N.bottom-g.bottom+p.bottom)/w.y,left:(g.left-N.left+p.left)/w.x,right:(N.right-g.right+p.right)/w.x}}const LZ=t=>({name:"arrow",options:t,async fn(s){const{x:n,y:r,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=s,{element:d,padding:u=0}=$l(t,s)||{};if(d==null)return{};const m=pF(u),h={x:n,y:r},x=qk(a),p=zk(x),f=await l.getDimensions(d),j=x==="y",g=j?"top":"left",y=j?"bottom":"right",v=j?"clientHeight":"clientWidth",w=i.reference[p]+i.reference[x]-h[x]-i.floating[p],N=h[x]-i.reference[x],S=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let k=S?S[v]:0;(!k||!await(l.isElement==null?void 0:l.isElement(S)))&&(k=o.floating[v]||i.floating[p]);const T=w/2-N/2,C=k/2-f[p]/2-1,P=Qo(m[g],C),$=Qo(m[y],C),V=P,I=k-f[p]-$,_=k/2-f[p]/2+T,U=d2(V,_,I),H=!c.arrow&&dh(a)!=null&&_!==U&&i.reference[p]/2-(_<V?P:$)-f[p]/2<0,Y=H?_<V?_-V:_-I:0;return{[x]:h[x]+Y,data:{[x]:U,centerOffset:_-U-Y,...H&&{alignmentOffset:Y}},reset:H}}}),BZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var n,r;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...j}=$l(t,s);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const g=Fl(a),y=Ei(o),v=Fl(o)===o,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=h||(v||!f?[ey(o)]:OZ(o)),S=p!=="none";!h&&S&&N.push(...IZ(o,f,p,w));const k=[o,...N],T=await dp(s,j),C=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&C.push(T[g]),m){const _=EZ(a,l,w);C.push(T[_[0]],T[_[1]])}if(P=[...P,{placement:a,overflows:C}],!C.every(_=>_<=0)){var $,V;const _=((($=i.flip)==null?void 0:$.index)||0)+1,U=k[_];if(U&&(!(m==="alignment"?y!==Ei(U):!1)||P.every(O=>O.overflows[0]>0&&Ei(O.placement)===y)))return{data:{index:_,overflows:P},reset:{placement:U}};let H=(V=P.filter(Y=>Y.overflows[0]<=0).sort((Y,O)=>Y.overflows[1]-O.overflows[1])[0])==null?void 0:V.placement;if(!H)switch(x){case"bestFit":{var I;const Y=(I=P.filter(O=>{if(S){const R=Ei(O.placement);return R===y||R==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(R=>R>0).reduce((R,q)=>R+q,0)]).sort((O,R)=>O[1]-R[1])[0])==null?void 0:I[0];Y&&(H=Y);break}case"initialPlacement":H=o;break}if(a!==H)return{reset:{placement:H}}}return{}}}};function DD(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function ED(t){return PZ.some(s=>t[s]>=0)}const VZ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:n}=s,{strategy:r="referenceHidden",...a}=$l(t,s);switch(r){case"referenceHidden":{const i=await dp(s,{...a,elementContext:"reference"}),l=DD(i,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:ED(l)}}}case"escaped":{const i=await dp(s,{...a,altBoundary:!0}),l=DD(i,n.floating);return{data:{escapedOffsets:l,escaped:ED(l)}}}default:return{}}}}},fF=new Set(["left","top"]);async function UZ(t,s){const{placement:n,platform:r,elements:a}=t,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),l=Fl(n),o=dh(n),c=Ei(n)==="y",d=fF.has(l)?-1:1,u=i&&c?-1:1,m=$l(s,t);let{mainAxis:h,crossAxis:x,alignmentAxis:p}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof p=="number"&&(x=o==="end"?p*-1:p),c?{x:x*u,y:h*d}:{x:h*d,y:x*u}}const zZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var n,r;const{x:a,y:i,placement:l,middlewareData:o}=s,c=await UZ(s,t);return l===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},qZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:n,y:r,placement:a}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:j=>{let{x:g,y}=j;return{x:g,y}}},...c}=$l(t,s),d={x:n,y:r},u=await dp(s,c),m=Ei(Fl(a)),h=Uk(m);let x=d[h],p=d[m];if(i){const j=h==="y"?"top":"left",g=h==="y"?"bottom":"right",y=x+u[j],v=x-u[g];x=d2(y,x,v)}if(l){const j=m==="y"?"top":"left",g=m==="y"?"bottom":"right",y=p+u[j],v=p-u[g];p=d2(y,p,v)}const f=o.fn({...s,[h]:x,[m]:p});return{...f,data:{x:f.x-n,y:f.y-r,enabled:{[h]:i,[m]:l}}}}}},HZ=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:n,y:r,placement:a,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=$l(t,s),u={x:n,y:r},m=Ei(a),h=Uk(m);let x=u[h],p=u[m];const f=$l(o,s),j=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(c){const v=h==="y"?"height":"width",w=i.reference[h]-i.floating[v]+j.mainAxis,N=i.reference[h]+i.reference[v]-j.mainAxis;x<w?x=w:x>N&&(x=N)}if(d){var g,y;const v=h==="y"?"width":"height",w=fF.has(Fl(a)),N=i.reference[m]-i.floating[v]+(w&&((g=l.offset)==null?void 0:g[m])||0)+(w?0:j.crossAxis),S=i.reference[m]+i.reference[v]+(w?0:((y=l.offset)==null?void 0:y[m])||0)-(w?j.crossAxis:0);p<N?p=N:p>S&&(p=S)}return{[h]:x,[m]:p}}}},GZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var n,r;const{placement:a,rects:i,platform:l,elements:o}=s,{apply:c=()=>{},...d}=$l(t,s),u=await dp(s,d),m=Fl(a),h=dh(a),x=Ei(a)==="y",{width:p,height:f}=i.floating;let j,g;m==="top"||m==="bottom"?(j=m,g=h===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(g=m,j=h==="end"?"top":"bottom");const y=f-u.top-u.bottom,v=p-u.left-u.right,w=Qo(f-u[j],y),N=Qo(p-u[g],v),S=!s.middlewareData.shift;let k=w,T=N;if((n=s.middlewareData.shift)!=null&&n.enabled.x&&(T=v),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(k=y),S&&!h){const P=Gr(u.left,0),$=Gr(u.right,0),V=Gr(u.top,0),I=Gr(u.bottom,0);x?T=p-2*(P!==0||$!==0?P+$:Gr(u.left,u.right)):k=f-2*(V!==0||I!==0?V+I:Gr(u.top,u.bottom))}await c({...s,availableWidth:T,availableHeight:k});const C=await l.getDimensions(o.floating);return p!==C.width||f!==C.height?{reset:{rects:!0}}:{}}}};function Jj(){return typeof window<"u"}function uh(t){return gF(t)?(t.nodeName||"").toLowerCase():"#document"}function Jr(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Ji(t){var s;return(s=(gF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function gF(t){return Jj()?t instanceof Node||t instanceof Jr(t).Node:!1}function hi(t){return Jj()?t instanceof Element||t instanceof Jr(t).Element:!1}function Ki(t){return Jj()?t instanceof HTMLElement||t instanceof Jr(t).HTMLElement:!1}function OD(t){return!Jj()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jr(t).ShadowRoot}const WZ=new Set(["inline","contents"]);function Af(t){const{overflow:s,overflowX:n,overflowY:r,display:a}=xi(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+n)&&!WZ.has(a)}const KZ=new Set(["table","td","th"]);function YZ(t){return KZ.has(uh(t))}const QZ=[":popover-open",":modal"];function e0(t){return QZ.some(s=>{try{return t.matches(s)}catch{return!1}})}const XZ=["transform","translate","scale","rotate","perspective"],ZZ=["transform","translate","scale","rotate","perspective","filter"],JZ=["paint","layout","strict","content"];function Hk(t){const s=Gk(),n=hi(t)?xi(t):t;return XZ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!s&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!s&&(n.filter?n.filter!=="none":!1)||ZZ.some(r=>(n.willChange||"").includes(r))||JZ.some(r=>(n.contain||"").includes(r))}function eJ(t){let s=Xo(t);for(;Ki(s)&&!hm(s);){if(Hk(s))return s;if(e0(s))return null;s=Xo(s)}return null}function Gk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tJ=new Set(["html","body","#document"]);function hm(t){return tJ.has(uh(t))}function xi(t){return Jr(t).getComputedStyle(t)}function t0(t){return hi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Xo(t){if(uh(t)==="html")return t;const s=t.assignedSlot||t.parentNode||OD(t)&&t.host||Ji(t);return OD(s)?s.host:s}function vF(t){const s=Xo(t);return hm(s)?t.ownerDocument?t.ownerDocument.body:t.body:Ki(s)&&Af(s)?s:vF(s)}function up(t,s,n){var r;s===void 0&&(s=[]),n===void 0&&(n=!0);const a=vF(t),i=a===((r=t.ownerDocument)==null?void 0:r.body),l=Jr(a);if(i){const o=m2(l);return s.concat(l,l.visualViewport||[],Af(a)?a:[],o&&n?up(o):[])}return s.concat(a,up(a,[],n))}function m2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yF(t){const s=xi(t);let n=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const a=Ki(t),i=a?t.offsetWidth:n,l=a?t.offsetHeight:r,o=Jv(n)!==i||Jv(r)!==l;return o&&(n=i,r=l),{width:n,height:r,$:o}}function Wk(t){return hi(t)?t:t.contextElement}function $u(t){const s=Wk(t);if(!Ki(s))return Li(1);const n=s.getBoundingClientRect(),{width:r,height:a,$:i}=yF(s);let l=(i?Jv(n.width):n.width)/r,o=(i?Jv(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const sJ=Li(0);function jF(t){const s=Jr(t);return!Gk()||!s.visualViewport?sJ:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function nJ(t,s,n){return s===void 0&&(s=!1),!n||s&&n!==Jr(t)?!1:s}function ud(t,s,n,r){s===void 0&&(s=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),i=Wk(t);let l=Li(1);s&&(r?hi(r)&&(l=$u(r)):l=$u(t));const o=nJ(i,n,r)?jF(i):Li(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,m=a.height/l.y;if(i){const h=Jr(i),x=r&&hi(r)?Jr(r):r;let p=h,f=m2(p);for(;f&&r&&x!==p;){const j=$u(f),g=f.getBoundingClientRect(),y=xi(f),v=g.left+(f.clientLeft+parseFloat(y.paddingLeft))*j.x,w=g.top+(f.clientTop+parseFloat(y.paddingTop))*j.y;c*=j.x,d*=j.y,u*=j.x,m*=j.y,c+=v,d+=w,p=Jr(f),f=m2(p)}}return ty({width:u,height:m,x:c,y:d})}function Kk(t,s){const n=t0(t).scrollLeft;return s?s.left+n:ud(Ji(t)).left+n}function bF(t,s,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=r.left+s.scrollLeft-(n?0:Kk(t,r)),i=r.top+s.scrollTop;return{x:a,y:i}}function rJ(t){let{elements:s,rect:n,offsetParent:r,strategy:a}=t;const i=a==="fixed",l=Ji(r),o=s?e0(s.floating):!1;if(r===l||o&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Li(1);const u=Li(0),m=Ki(r);if((m||!m&&!i)&&((uh(r)!=="body"||Af(l))&&(c=t0(r)),Ki(r))){const x=ud(r);d=$u(r),u.x=x.x+r.clientLeft,u.y=x.y+r.clientTop}const h=l&&!m&&!i?bF(l,c,!0):Li(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:n.y*d.y-c.scrollTop*d.y+u.y+h.y}}function aJ(t){return Array.from(t.getClientRects())}function iJ(t){const s=Ji(t),n=t0(t),r=t.ownerDocument.body,a=Gr(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),i=Gr(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+Kk(t);const o=-n.scrollTop;return xi(r).direction==="rtl"&&(l+=Gr(s.clientWidth,r.clientWidth)-a),{width:a,height:i,x:l,y:o}}function lJ(t,s){const n=Jr(t),r=Ji(t),a=n.visualViewport;let i=r.clientWidth,l=r.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=Gk();(!d||d&&s==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}const oJ=new Set(["absolute","fixed"]);function cJ(t,s){const n=ud(t,!0,s==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,i=Ki(t)?$u(t):Li(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,d=r*i.y;return{width:l,height:o,x:c,y:d}}function MD(t,s,n){let r;if(s==="viewport")r=lJ(t,n);else if(s==="document")r=iJ(Ji(t));else if(hi(s))r=cJ(s,n);else{const a=jF(t);r={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return ty(r)}function NF(t,s){const n=Xo(t);return n===s||!hi(n)||hm(n)?!1:xi(n).position==="fixed"||NF(n,s)}function dJ(t,s){const n=s.get(t);if(n)return n;let r=up(t,[],!1).filter(o=>hi(o)&&uh(o)!=="body"),a=null;const i=xi(t).position==="fixed";let l=i?Xo(t):t;for(;hi(l)&&!hm(l);){const o=xi(l),c=Hk(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&oJ.has(a.position)||Af(l)&&!c&&NF(t,l))?r=r.filter(u=>u!==l):a=o,l=Xo(l)}return s.set(t,r),r}function uJ(t){let{element:s,boundary:n,rootBoundary:r,strategy:a}=t;const l=[...n==="clippingAncestors"?e0(s)?[]:dJ(s,this._c):[].concat(n),r],o=l[0],c=l.reduce((d,u)=>{const m=MD(s,u,a);return d.top=Gr(m.top,d.top),d.right=Qo(m.right,d.right),d.bottom=Qo(m.bottom,d.bottom),d.left=Gr(m.left,d.left),d},MD(s,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mJ(t){const{width:s,height:n}=yF(t);return{width:s,height:n}}function hJ(t,s,n){const r=Ki(s),a=Ji(s),i=n==="fixed",l=ud(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const c=Li(0);function d(){c.x=Kk(a)}if(r||!r&&!i)if((uh(s)!=="body"||Af(a))&&(o=t0(s)),r){const x=ud(s,!0,i,s);c.x=x.x+s.clientLeft,c.y=x.y+s.clientTop}else a&&d();i&&!r&&a&&d();const u=a&&!r&&!i?bF(a,o):Li(0),m=l.left+o.scrollLeft-c.x-u.x,h=l.top+o.scrollTop-c.y-u.y;return{x:m,y:h,width:l.width,height:l.height}}function wN(t){return xi(t).position==="static"}function _D(t,s){if(!Ki(t)||xi(t).position==="fixed")return null;if(s)return s(t);let n=t.offsetParent;return Ji(t)===n&&(n=n.ownerDocument.body),n}function wF(t,s){const n=Jr(t);if(e0(t))return n;if(!Ki(t)){let a=Xo(t);for(;a&&!hm(a);){if(hi(a)&&!wN(a))return a;a=Xo(a)}return n}let r=_D(t,s);for(;r&&YZ(r)&&wN(r);)r=_D(r,s);return r&&hm(r)&&wN(r)&&!Hk(r)?n:r||eJ(t)||n}const xJ=async function(t){const s=this.getOffsetParent||wF,n=this.getDimensions,r=await n(t.floating);return{reference:hJ(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pJ(t){return xi(t).direction==="rtl"}const fJ={convertOffsetParentRelativeRectToViewportRelativeRect:rJ,getDocumentElement:Ji,getClippingRect:uJ,getOffsetParent:wF,getElementRects:xJ,getClientRects:aJ,getDimensions:mJ,getScale:$u,isElement:hi,isRTL:pJ};function SF(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function gJ(t,s){let n=null,r;const a=Ji(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:u,top:m,width:h,height:x}=d;if(o||s(),!h||!x)return;const p=wg(m),f=wg(a.clientWidth-(u+h)),j=wg(a.clientHeight-(m+x)),g=wg(u),v={rootMargin:-p+"px "+-f+"px "+-j+"px "+-g+"px",threshold:Gr(0,Qo(1,c))||1};let w=!0;function N(S){const k=S[0].intersectionRatio;if(k!==c){if(!w)return l();k?l(!1,k):r=setTimeout(()=>{l(!1,1e-7)},1e3)}k===1&&!SF(d,t.getBoundingClientRect())&&l(),w=!1}try{n=new IntersectionObserver(N,{...v,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,v)}n.observe(t)}return l(!0),i}function vJ(t,s,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Wk(t),u=a||i?[...d?up(d):[],...up(s)]:[];u.forEach(g=>{a&&g.addEventListener("scroll",n,{passive:!0}),i&&g.addEventListener("resize",n)});const m=d&&o?gJ(d,n):null;let h=-1,x=null;l&&(x=new ResizeObserver(g=>{let[y]=g;y&&y.target===d&&x&&(x.unobserve(s),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=x)==null||v.observe(s)})),n()}),d&&!c&&x.observe(d),x.observe(s));let p,f=c?ud(t):null;c&&j();function j(){const g=ud(t);f&&!SF(f,g)&&n(),f=g,p=requestAnimationFrame(j)}return n(),()=>{var g;u.forEach(y=>{a&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),m==null||m(),(g=x)==null||g.disconnect(),x=null,c&&cancelAnimationFrame(p)}}const yJ=zZ,jJ=qZ,bJ=BZ,NJ=GZ,wJ=VZ,RD=LZ,SJ=HZ,CJ=(t,s,n)=>{const r=new Map,a={platform:fJ,...n},i={...a.platform,_c:r};return FZ(t,s,{...a,platform:i})};var kJ=typeof document<"u",PJ=function(){},pv=kJ?b.useLayoutEffect:PJ;function sy(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let n,r,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==s.length)return!1;for(r=n;r--!==0;)if(!sy(t[r],s[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(s).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(s,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&t.$$typeof)&&!sy(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function CF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ID(t,s){const n=CF(t);return Math.round(s*n)/n}function SN(t){const s=b.useRef(t);return pv(()=>{s.current=t}),s}function AJ(t){t===void 0&&(t={});const{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[u,m]=b.useState({x:0,y:0,strategy:n,placement:s,middlewareData:{},isPositioned:!1}),[h,x]=b.useState(r);sy(h,r)||x(r);const[p,f]=b.useState(null),[j,g]=b.useState(null),y=b.useCallback(O=>{O!==S.current&&(S.current=O,f(O))},[]),v=b.useCallback(O=>{O!==k.current&&(k.current=O,g(O))},[]),w=i||p,N=l||j,S=b.useRef(null),k=b.useRef(null),T=b.useRef(u),C=c!=null,P=SN(c),$=SN(a),V=SN(d),I=b.useCallback(()=>{if(!S.current||!k.current)return;const O={placement:s,strategy:n,middleware:h};$.current&&(O.platform=$.current),CJ(S.current,k.current,O).then(R=>{const q={...R,isPositioned:V.current!==!1};_.current&&!sy(T.current,q)&&(T.current=q,Ad.flushSync(()=>{m(q)}))})},[h,s,n,$,V]);pv(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,m(O=>({...O,isPositioned:!1})))},[d]);const _=b.useRef(!1);pv(()=>(_.current=!0,()=>{_.current=!1}),[]),pv(()=>{if(w&&(S.current=w),N&&(k.current=N),w&&N){if(P.current)return P.current(w,N,I);I()}},[w,N,I,P,C]);const U=b.useMemo(()=>({reference:S,floating:k,setReference:y,setFloating:v}),[y,v]),H=b.useMemo(()=>({reference:w,floating:N}),[w,N]),Y=b.useMemo(()=>{const O={position:n,left:0,top:0};if(!H.floating)return O;const R=ID(H.floating,u.x),q=ID(H.floating,u.y);return o?{...O,transform:"translate("+R+"px, "+q+"px)",...CF(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:q}},[n,o,H.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:I,refs:U,elements:H,floatingStyles:Y}),[u,I,U,H,Y])}const TJ=t=>{function s(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&s(r)?r.current!=null?RD({element:r.current,padding:a}).fn(n):{}:r?RD({element:r,padding:a}).fn(n):{}}}},DJ=(t,s)=>({...yJ(t),options:[t,s]}),EJ=(t,s)=>({...jJ(t),options:[t,s]}),OJ=(t,s)=>({...SJ(t),options:[t,s]}),MJ=(t,s)=>({...bJ(t),options:[t,s]}),_J=(t,s)=>({...NJ(t),options:[t,s]}),RJ=(t,s)=>({...wJ(t),options:[t,s]}),IJ=(t,s)=>({...TJ(t),options:[t,s]});var $J="Arrow",kF=b.forwardRef((t,s)=>{const{children:n,width:r=10,height:a=5,...i}=t;return e.jsx(st.svg,{...i,ref:s,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});kF.displayName=$J;var FJ=kF;function s0(t){const[s,n]=b.useState(void 0);return cn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=t.offsetWidth,o=t.offsetHeight;n({width:l,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),s}var Yk="Popper",[PF,ic]=Pn(Yk),[LJ,AF]=PF(Yk),TF=t=>{const{__scopePopper:s,children:n}=t,[r,a]=b.useState(null);return e.jsx(LJ,{scope:s,anchor:r,onAnchorChange:a,children:n})};TF.displayName=Yk;var DF="PopperAnchor",EF=b.forwardRef((t,s)=>{const{__scopePopper:n,virtualRef:r,...a}=t,i=AF(DF,n),l=b.useRef(null),o=kt(s,l);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||l.current)}),r?null:e.jsx(st.div,{...a,ref:o})});EF.displayName=DF;var Qk="PopperContent",[BJ,VJ]=PF(Qk),OF=b.forwardRef((t,s)=>{var Q,Z,le,oe,Ae,ge;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:p,...f}=t,j=AF(Qk,n),[g,y]=b.useState(null),v=kt(s,xe=>y(xe)),[w,N]=b.useState(null),S=s0(w),k=(S==null?void 0:S.width)??0,T=(S==null?void 0:S.height)??0,C=r+(i!=="center"?"-"+i:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},$=Array.isArray(d)?d:[d],V=$.length>0,I={padding:P,boundary:$.filter(zJ),altBoundary:V},{refs:_,floatingStyles:U,placement:H,isPositioned:Y,middlewareData:O}=AJ({strategy:"fixed",placement:C,whileElementsMounted:(...xe)=>vJ(...xe,{animationFrame:x==="always"}),elements:{reference:j.anchor},middleware:[DJ({mainAxis:a+T,alignmentAxis:l}),c&&EJ({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?OJ():void 0,...I}),c&&MJ({...I}),_J({...I,apply:({elements:xe,rects:$e,availableWidth:ke,availableHeight:Ze})=>{const{width:gt,height:Kt}=$e.reference,be=xe.floating.style;be.setProperty("--radix-popper-available-width",`${ke}px`),be.setProperty("--radix-popper-available-height",`${Ze}px`),be.setProperty("--radix-popper-anchor-width",`${gt}px`),be.setProperty("--radix-popper-anchor-height",`${Kt}px`)}}),w&&IJ({element:w,padding:o}),qJ({arrowWidth:k,arrowHeight:T}),h&&RJ({strategy:"referenceHidden",...I})]}),[R,q]=RF(H),re=an(p);cn(()=>{Y&&(re==null||re())},[Y,re]);const we=(Q=O.arrow)==null?void 0:Q.x,K=(Z=O.arrow)==null?void 0:Z.y,Ce=((le=O.arrow)==null?void 0:le.centerOffset)!==0,[pe,F]=b.useState();return cn(()=>{g&&F(window.getComputedStyle(g).zIndex)},[g]),e.jsx("div",{ref:_.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:Y?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[(oe=O.transformOrigin)==null?void 0:oe.x,(Ae=O.transformOrigin)==null?void 0:Ae.y].join(" "),...((ge=O.hide)==null?void 0:ge.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(BJ,{scope:n,placedSide:R,onArrowChange:N,arrowX:we,arrowY:K,shouldHideArrow:Ce,children:e.jsx(st.div,{"data-side":R,"data-align":q,...f,ref:v,style:{...f.style,animation:Y?void 0:"none"}})})})});OF.displayName=Qk;var MF="PopperArrow",UJ={top:"bottom",right:"left",bottom:"top",left:"right"},_F=b.forwardRef(function(s,n){const{__scopePopper:r,...a}=s,i=VJ(MF,r),l=UJ[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(FJ,{...a,ref:n,style:{...a.style,display:"block"}})})});_F.displayName=MF;function zJ(t){return t!==null}var qJ=t=>({name:"transformOrigin",options:t,fn(s){var j,g,y;const{placement:n,rects:r,middlewareData:a}=s,l=((j=a.arrow)==null?void 0:j.centerOffset)!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[d,u]=RF(n),m={start:"0%",center:"50%",end:"100%"}[u],h=(((g=a.arrow)==null?void 0:g.x)??0)+o/2,x=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let p="",f="";return d==="bottom"?(p=l?m:`${h}px`,f=`${-c}px`):d==="top"?(p=l?m:`${h}px`,f=`${r.floating.height+c}px`):d==="right"?(p=`${-c}px`,f=l?m:`${x}px`):d==="left"&&(p=`${r.floating.width+c}px`,f=l?m:`${x}px`),{data:{x:p,y:f}}}});function RF(t){const[s,n="center"]=t.split("-");return[s,n]}var n0=TF,Tf=EF,r0=OF,a0=_F,[i0]=Pn("Tooltip",[ic]),l0=ic(),IF="TooltipProvider",HJ=700,h2="tooltip.open",[GJ,Xk]=i0(IF),$F=t=>{const{__scopeTooltip:s,delayDuration:n=HJ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=t,l=b.useRef(!0),o=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),e.jsx(GJ,{scope:s,isOpenDelayedRef:l,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:b.useCallback(d=>{o.current=d},[]),disableHoverableContent:a,children:i})};$F.displayName=IF;var mp="Tooltip",[WJ,o0]=i0(mp),FF=t=>{const{__scopeTooltip:s,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=t,c=Xk(mp,t.__scopeTooltip),d=l0(s),[u,m]=b.useState(null),h=Zr(),x=b.useRef(0),p=l??c.disableHoverableContent,f=o??c.delayDuration,j=b.useRef(!1),[g,y]=ra({prop:r,defaultProp:a??!1,onChange:k=>{k?(c.onOpen(),document.dispatchEvent(new CustomEvent(h2))):c.onClose(),i==null||i(k)},caller:mp}),v=b.useMemo(()=>g?j.current?"delayed-open":"instant-open":"closed",[g]),w=b.useCallback(()=>{window.clearTimeout(x.current),x.current=0,j.current=!1,y(!0)},[y]),N=b.useCallback(()=>{window.clearTimeout(x.current),x.current=0,y(!1)},[y]),S=b.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{j.current=!0,y(!0),x.current=0},f)},[f,y]);return b.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),e.jsx(n0,{...d,children:e.jsx(WJ,{scope:s,contentId:h,open:g,stateAttribute:v,trigger:u,onTriggerChange:m,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayedRef.current?S():w()},[c.isOpenDelayedRef,S,w]),onTriggerLeave:b.useCallback(()=>{p?N():(window.clearTimeout(x.current),x.current=0)},[N,p]),onOpen:w,onClose:N,disableHoverableContent:p,children:n})})};FF.displayName=mp;var x2="TooltipTrigger",LF=b.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,a=o0(x2,n),i=Xk(x2,n),l=l0(n),o=b.useRef(null),c=kt(s,o,a.onTriggerChange),d=b.useRef(!1),u=b.useRef(!1),m=b.useCallback(()=>d.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(Tf,{asChild:!0,...l,children:e.jsx(st.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Be(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Be(t.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Be(t.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Be(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:Be(t.onBlur,a.onClose),onClick:Be(t.onClick,a.onClose)})})});LF.displayName=x2;var KJ="TooltipPortal",[nLe,YJ]=i0(KJ,{forceMount:void 0}),xm="TooltipContent",BF=b.forwardRef((t,s)=>{const n=YJ(xm,t.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=t,l=o0(xm,t.__scopeTooltip);return e.jsx(An,{present:r||l.open,children:l.disableHoverableContent?e.jsx(VF,{side:a,...i,ref:s}):e.jsx(QJ,{side:a,...i,ref:s})})}),QJ=b.forwardRef((t,s)=>{const n=o0(xm,t.__scopeTooltip),r=Xk(xm,t.__scopeTooltip),a=b.useRef(null),i=kt(s,a),[l,o]=b.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:m}=r,h=b.useCallback(()=>{o(null),m(!1)},[m]),x=b.useCallback((p,f)=>{const j=p.currentTarget,g={x:p.clientX,y:p.clientY},y=tee(g,j.getBoundingClientRect()),v=see(g,y),w=nee(f.getBoundingClientRect()),N=aee([...v,...w]);o(N),m(!0)},[m]);return b.useEffect(()=>()=>h(),[h]),b.useEffect(()=>{if(c&&u){const p=j=>x(j,u),f=j=>x(j,c);return c.addEventListener("pointerleave",p),u.addEventListener("pointerleave",f),()=>{c.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",f)}}},[c,u,x,h]),b.useEffect(()=>{if(l){const p=f=>{const j=f.target,g={x:f.clientX,y:f.clientY},y=(c==null?void 0:c.contains(j))||(u==null?void 0:u.contains(j)),v=!ree(g,l);y?h():v&&(h(),d())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,u,l,d,h]),e.jsx(VF,{...t,ref:i})}),[XJ,ZJ]=i0(mp,{isInside:!1}),JJ=g$("TooltipContent"),VF=b.forwardRef((t,s)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=t,c=o0(xm,n),d=l0(n),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(h2,u),()=>document.removeEventListener(h2,u)),[u]),b.useEffect(()=>{if(c.trigger){const m=h=>{const x=h.target;x!=null&&x.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),e.jsx(Td,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:e.jsxs(r0,{"data-state":c.stateAttribute,...d,...o,ref:s,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(JJ,{children:r}),e.jsx(XJ,{scope:n,isInside:!0,children:e.jsx(VQ,{id:c.contentId,role:"tooltip",children:a||r})})]})})});BF.displayName=xm;var UF="TooltipArrow",eee=b.forwardRef((t,s)=>{const{__scopeTooltip:n,...r}=t,a=l0(n);return ZJ(UF,n).isInside?null:e.jsx(a0,{...a,...r,ref:s})});eee.displayName=UF;function tee(t,s){const n=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function see(t,s,n=5){const r=[];switch(s){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function nee(t){const{top:s,right:n,bottom:r,left:a}=t;return[{x:a,y:s},{x:n,y:s},{x:n,y:r},{x:a,y:r}]}function ree(t,s){const{x:n,y:r}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],d=o.x,u=o.y,m=c.x,h=c.y;u>r!=h>r&&n<(m-d)*(r-u)/(h-u)+d&&(a=!a)}return a}function aee(t){const s=t.slice();return s.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),iee(s)}function iee(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const a=t[r];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}s.pop();const n=[];for(let r=t.length-1;r>=0;r--){const a=t[r];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),s.length===1&&n.length===1&&s[0].x===n[0].x&&s[0].y===n[0].y?s:s.concat(n)}var lee=$F,oee=FF,cee=LF,zF=BF;const Df=lee,ko=oee,Po=cee,gl=b.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(zF,{ref:r,sideOffset:s,className:Ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));gl.displayName=zF.displayName;const hp=jf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=b.forwardRef(({className:t,variant:s,size:n,asChild:r=!1,...a},i)=>{const l=r?p$:"button";return e.jsx(l,{className:Ue(hp({variant:s,size:n,className:t})),ref:i,...a})});M.displayName="Button";const FT=class FT{static saveSession(s){try{localStorage.setItem(this.SESSION_KEY,JSON.stringify({...s,expiresAt:s.expiresAt.toISOString()}))}catch(n){console.error("Failed to save auth session:",n)}}static getSession(){try{const s=localStorage.getItem(this.SESSION_KEY);if(!s)return null;const n=JSON.parse(s),r=new Date(n.expiresAt);return r<=new Date?(this.clearSession(),null):{...n,expiresAt:r}}catch(s){return console.error("Failed to retrieve auth session:",s),this.clearSession(),null}}static clearSession(){try{localStorage.removeItem(this.SESSION_KEY)}catch(s){console.error("Failed to clear auth session:",s)}}};FT.SESSION_KEY="hostpilot_fast_auth_session";let md=FT;async function dee(t,s){const n=fetch("/api/auth/demo-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s}),credentials:"include"});try{const r=await n;if(!r.ok){const c=await r.json();throw new Error(c.message||"Login failed")}const a=await r.json();console.log("Login response data:",a);const i=a.user||a,l={id:i.id,email:i.email,name:`${i.firstName||""} ${i.lastName||""}`.trim()||i.email,role:i.role||i.primaryRole,organizationId:i.organizationId,permissions:i.permissions||[],listingsAccess:i.listingsAccess||[]};console.log("Created auth user:",l);const o={user:l,expiresAt:new Date(Date.now()+24*60*60*1e3)};return md.saveSession(o),l}catch(r){throw md.clearSession(),r}}async function uee(){md.clearSession(),fetch("/api/auth/demo-logout",{method:"POST",credentials:"include"}).catch(t=>{console.error("Logout API failed:",t)})}function _a(){const[t,s]=b.useState(null),[n,r]=b.useState(!0);b.useEffect(()=>{a()},[]);const a=async()=>{try{const o=await fetch("/api/auth/user",{credentials:"include"});if(o.ok){const c=await o.json();console.log("Server auth response:",c);const d={...c,permissions:[],listingsAccess:[]};console.log("Processed auth user:",d);const u={user:d,expiresAt:new Date(Date.now()+24*60*60*1e3)};md.saveSession(u),s(d)}else s(null)}catch(o){console.error("Auth check failed:",o),md.clearSession(),s(null)}finally{r(!1)}};return{user:t,isLoading:n,login:async(o,c)=>{const d=await dee(o,c);return s(d),d},logout:async()=>{try{s(null),await uee(),setTimeout(()=>{window.location.href="/"},100)}catch(o){console.error("Logout failed:",o),s(null),window.location.href="/"}},isAuthenticated:!!t}}const qF=b.createContext(void 0);function mee({children:t}){const[s,n]=b.useState(()=>localStorage.getItem("sidebarCollapsed")==="true");b.useEffect(()=>{localStorage.setItem("sidebarCollapsed",String(s))},[s]),b.useEffect(()=>{const a=i=>{i.key==="sidebarCollapsed"&&i.newValue!==null&&n(i.newValue==="true")};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const r=()=>{n(a=>!a)};return e.jsx(qF.Provider,{value:{collapsed:s,toggleCollapsed:r,setCollapsed:n},children:t})}function hee(){const t=b.useContext(qF);if(t===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return t}function xee({className:t}){const[s,n]=Yn(),{collapsed:r,toggleCollapsed:a}=hee(),[i,l]=b.useState(!1),[o,c]=b.useState(!1),{user:d,isAuthenticated:u,logout:m}=_a();b.useEffect(()=>{const g=window.matchMedia("(max-width: 767px)"),y=v=>{l(v.matches),v.matches||c(!1)};return y(g),g.addEventListener("change",y),()=>g.removeEventListener("change",y)},[]);const h=(d==null?void 0:d.role)||"guest",p=(g=>{const y=[{label:"Dashboard",icon:pn,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:ln,href:"/property-hub",tooltip:"Property Management"},{label:"Finance",icon:Je,href:"/finance-hub",tooltip:"Finance Hub"},{label:"System",icon:Jt,href:"/system-hub",tooltip:"System Settings"},{label:"Salaries",icon:Ru,href:"/salaries-wages",tooltip:"Staff Salaries"},{label:"Achievements",icon:ri,href:"/achievements",tooltip:"Achievements"}];return{admin:y,"portfolio-manager":y,staff:[{label:"Dashboard",icon:pn,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:ln,href:"/property-hub",tooltip:"Property Management"},{label:"Achievements",icon:ri,href:"/achievements",tooltip:"Achievements"}],owner:[{label:"Dashboard",icon:pn,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:ln,href:"/property-hub",tooltip:"Property Management"},{label:"Finance",icon:Je,href:"/finance-hub",tooltip:"Finance Hub"},{label:"Achievements",icon:ri,href:"/achievements",tooltip:"Achievements"}],guest:[{label:"My Stay",icon:fn,href:"/",tooltip:"Guest Dashboard"},{label:"Property Info",icon:Ft,href:"/property-info",tooltip:"Property Information"},{label:"Calendar",icon:tt,href:"/services",tooltip:"Services"}]}[g]||y})(h),f=async()=>{try{await m()}catch(g){console.error("Logout error:",g),window.location.href="/"}},j=g=>{n(g),i&&c(!1)};return u?e.jsxs(Df,{delayDuration:200,children:[i&&e.jsx("button",{"aria-expanded":o,"aria-label":o?"Close menu":"Open menu",onClick:()=>c(g=>!g),className:"max-h-screen fixed top-4 left-4 z-60 p-2 rounded-md bg-white/90 dark:bg-black/90 shadow-lg md:hidden",children:o?e.jsx(on,{className:"h-5 w-5"}):e.jsx(bX,{className:"h-5 w-5"})}),i&&o&&e.jsx("div",{onClick:()=>c(!1),className:"min-h-screen fixed inset-0 bg-black/50 z-40 md:hidden"}),e.jsxs("div",{className:Ue("sticky top-0 h-screen bg-white dark:bg-black text-black dark:text-slate-500 flex flex-col items-start transition-all duration-300 ease-in-out shadow-2xl",!i&&"flex-shrink-0",!i&&(r?"w-16":"w-64"),i&&"fixed left-0 top-0 z-50",i&&(o?"w-64 translate-x-0":"w-64 -translate-x-full pointer-events-none"),t),children:[e.jsx("div",{className:"w-full border-b border-slate-700/50 text-black dark:text-white",children:e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:Ue("w-10 h-10 bg-emerald-500 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",r&&"w-8 h-8"),children:e.jsx(Ft,{className:Ue("text-white",r?"h-4 w-4":"h-5 w-5")})}),!r&&!i&&e.jsx("div",{className:"flex flex-col min-w-0",children:e.jsx("span",{className:"font-bold text-sm text-black dark:text-white truncate",children:"HostPilotPro"})})]}),i&&o&&e.jsx("button",{"aria-label":"Close sidebar",onClick:()=>c(!1),className:"p-1 rounded-md",children:e.jsx(on,{className:"h-4 w-4"})})]})}),e.jsx("nav",{className:"flex-1 w-full overflow-y-auto py-4 px-2 text-black",children:e.jsx("ul",{className:"space-y-1",children:p.map((g,y)=>{const v=g.icon,w=s===g.href||s.startsWith(g.href+"?"),N=e.jsxs("button",{onClick:()=>j(g.href),className:Ue("w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200",w?"bg-emerald-500 text-white shadow-lg":"text-slate-900 hover:bg-slate-700/50 hover:text-white",(r||i&&!o)&&"justify-center px-2"),"data-testid":`nav-${g.label.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx(v,{className:Ue("flex-shrink-0","h-5 w-5")}),!r&&(!i||o)&&e.jsx("span",{className:"text-sm font-medium truncate",children:g.label})]},y);return r&&!i?e.jsx("li",{children:e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:N}),e.jsx(gl,{side:"right",className:"bg-slate-700 text-white border-slate-600",children:g.tooltip})]})},y):e.jsx("li",{children:N},y)})})}),e.jsxs("div",{className:"w-full border-t border-slate-700/50 flex-none",children:[!r&&(!i||o)&&e.jsx("div",{className:"px-4 py-3",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:f,className:"w-full justify-start text-slate-900 hover:bg-slate-700/50 hover:text-white",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Logout"]})}),!i&&e.jsx("div",{className:"p-3",children:e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",onClick:a,"aria-expanded":!r,"aria-label":r?"Expand sidebar":"Collapse sidebar",className:Ue("w-full h-10 text-slate-300 hover:bg-slate-700/50 hover:text-white transition-all duration-200",r&&"justify-center px-0"),"data-testid":"sidebar-toggle",children:r?e.jsx(Dd,{className:"h-5 w-5"}):e.jsxs(e.Fragment,{children:[e.jsx(Nf,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-sm",children:"Collapse"})]})})}),e.jsx(gl,{side:"right",className:"bg-slate-700 text-white border-slate-600",children:r?"Expand Sidebar":"Collapse Sidebar"})]})})]})]})]}):null}class pee{constructor(){this.cache=new Map,this.listeners=new Map,this.CACHE_DURATION=120*1e3}set(s,n){this.cache.set(s,{data:n,timestamp:Date.now(),key:s,isStale:!1}),this.notifyListeners(s,n)}addListener(s,n){this.listeners.has(s)||this.listeners.set(s,new Set),this.listeners.get(s).add(n)}removeListener(s,n){const r=this.listeners.get(s);r&&(r.delete(n),r.size===0&&this.listeners.delete(s))}notifyListeners(s,n){const r=this.listeners.get(s);r&&r.forEach(a=>a(s,n))}get(s){const n=this.cache.get(s);return n?Date.now()-n.timestamp>this.CACHE_DURATION?(this.cache.delete(s),null):n.data:null}isStale(s){const n=this.cache.get(s);return n?Date.now()-n.timestamp>this.CACHE_DURATION:!0}clear(s){if(!s){this.cache.clear();return}for(const[n]of this.cache)n.includes(s)&&this.cache.delete(n)}getAllCachedKeys(){return Array.from(this.cache.keys())}getCacheStats(){const s=Date.now();let n=0,r=0;for(const a of this.cache.values())s-a.timestamp>this.CACHE_DURATION?n++:r++;return{total:this.cache.size,expired:n,active:r}}async preloadDashboardData(){const n=["/api/dashboard/stats","/api/properties","/api/tasks","/api/bookings","/api/finance/analytics"].map(async r=>{try{const a=await fetch(r,{credentials:"include"});if(a.ok){const i=await a.json();this.set(r,i)}}catch(a){console.warn(`Failed to preload ${r}:`,a)}});await Promise.allSettled(n)}}const io=new pee;function fee(){typeof window<"u"&&setTimeout(()=>{io.preloadDashboardData()},1e3)}const HF=b.createContext(void 0);function gee({children:t}){const[,s]=b.useState({}),n=d=>io.get(d),r=(d,u)=>{io.set(d,u),s({})},c={getCachedData:n,setCachedData:r,refreshData:async d=>{try{const u=await fetch(d,{credentials:"include"});if(u.ok){const m=await u.json();return r(d,m),m}}catch(u){console.error(`Failed to refresh data for ${d}:`,u)}},isStale:d=>io.isStale(d),clearCache:d=>{io.clear(d),s({})},subscribeToCacheUpdates:(d,u)=>{const m=(h,x)=>{h===d&&u(x)};return io.addListener(d,m),()=>{io.removeListener(d,m)}}};return e.jsx(HF.Provider,{value:c,children:t})}function GF(){const t=b.useContext(HF);if(t===void 0)throw new Error("useCache must be used within a CacheProvider");return t}function WF(t,s,n={}){const{getCachedData:r,setCachedData:a,subscribeToCacheUpdates:i,isStale:l}=GF(),[o,c]=b.useState(()=>r(t)),[d,u]=b.useState(!o),[m,h]=b.useState(null);b.useEffect(()=>i(t,f=>{c(f),u(!1),h(null)}),[t,i]);const x=async(p=!0)=>{try{if(h(null),p){const j=r(t);if(j)return c(j),u(!1),l(t)&&n.backgroundRefresh!==!1&&x(!1),j}u(!0);let f;if(!s){const j=await fetch(t,{credentials:"include"});if(!j.ok)throw new Error(`HTTP ${j.status}: ${j.statusText}`);f=await j.json()}return a(t,f),c(f),f}catch(f){const j=f instanceof Error?f:new Error("Unknown error");h(j);const g=r(t);g&&c(g)}finally{u(!1)}};return b.useEffect(()=>{x()},[t]),b.useEffect(()=>{if(n.refetchInterval){const p=setInterval(()=>{x(!1)},n.refetchInterval);return()=>clearInterval(p)}},[n.refetchInterval]),{data:o,isLoading:d,error:m,refetch:()=>x(!1),isStale:l(t)}}const E=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Ue("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));E.displayName="Card";const L=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Ue("flex flex-col space-y-1.5 p-6",t),...s}));L.displayName="CardHeader";const B=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Ue("text-2xl font-semibold leading-none tracking-tight",t),...s}));B.displayName="CardTitle";const Me=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Ue("text-sm text-muted-foreground",t),...s}));Me.displayName="CardDescription";const D=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Ue("p-6 pt-0",t),...s}));D.displayName="CardContent";const vee=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Ue("flex items-center p-6 pt-0",t),...s}));vee.displayName="CardFooter";b.lazy(()=>Un(()=>Promise.resolve().then(()=>Moe),void 0));const yee=b.lazy(()=>Un(()=>import("./SimpleFilteredFinancialDashboard-DThYN0bG.js"),[]));b.lazy(()=>Un(()=>import("./FilteredPropertyDashboard-D236QvLv.js"),[]));function jee(){return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),e.jsx(D,{children:e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},t))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2].map(t=>e.jsxs(E,{children:[e.jsx(L,{children:e.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"},s))})})]},t))})]})}function bee(){return e.jsx(b.Suspense,{fallback:e.jsx(jee,{}),children:e.jsx(yee,{})})}const G=b.forwardRef(({className:t,type:s,...n},r)=>e.jsx("input",{type:s,className:Ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));G.displayName="Input";const Nee=jf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function z({className:t,variant:s,...n}){return e.jsx("div",{className:Ue(Nee({variant:s}),t),...n})}function p2(t,[s,n]){return Math.min(n,Math.max(s,t))}var wee=b.createContext(void 0);function mh(t){const s=b.useContext(wee);return t||s||"ltr"}var CN=0;function c0(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??$D()),document.body.insertAdjacentElement("beforeend",t[1]??$D()),CN++,()=>{CN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),CN--}},[])}function $D(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kN="focusScope.autoFocusOnMount",PN="focusScope.autoFocusOnUnmount",FD={bubbles:!1,cancelable:!0},See="FocusScope",Ef=b.forwardRef((t,s)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=b.useState(null),d=an(a),u=an(i),m=b.useRef(null),h=kt(s,f=>c(f)),x=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let f=function(v){if(x.paused||!o)return;const w=v.target;o.contains(w)?m.current=w:so(m.current,{select:!0})},j=function(v){if(x.paused||!o)return;const w=v.relatedTarget;w!==null&&(o.contains(w)||so(m.current,{select:!0}))},g=function(v){if(document.activeElement===document.body)for(const N of v)N.removedNodes.length>0&&so(o)};document.addEventListener("focusin",f),document.addEventListener("focusout",j);const y=new MutationObserver(g);return o&&y.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",j),y.disconnect()}}},[r,o,x.paused]),b.useEffect(()=>{if(o){BD.add(x);const f=document.activeElement;if(!o.contains(f)){const g=new CustomEvent(kN,FD);o.addEventListener(kN,d),o.dispatchEvent(g),g.defaultPrevented||(Cee(Dee(KF(o)),{select:!0}),document.activeElement===f&&so(o))}return()=>{o.removeEventListener(kN,d),setTimeout(()=>{const g=new CustomEvent(PN,FD);o.addEventListener(PN,u),o.dispatchEvent(g),g.defaultPrevented||so(f??document.body,{select:!0}),o.removeEventListener(PN,u),BD.remove(x)},0)}}},[o,d,u,x]);const p=b.useCallback(f=>{if(!n&&!r||x.paused)return;const j=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,g=document.activeElement;if(j&&g){const y=f.currentTarget,[v,w]=kee(y);v&&w?!f.shiftKey&&g===w?(f.preventDefault(),n&&so(v,{select:!0})):f.shiftKey&&g===v&&(f.preventDefault(),n&&so(w,{select:!0})):g===y&&f.preventDefault()}},[n,r,x.paused]);return e.jsx(st.div,{tabIndex:-1,...l,ref:h,onKeyDown:p})});Ef.displayName=See;function Cee(t,{select:s=!1}={}){const n=document.activeElement;for(const r of t)if(so(r,{select:s}),document.activeElement!==n)return}function kee(t){const s=KF(t),n=LD(s,t),r=LD(s.reverse(),t);return[n,r]}function KF(t){const s=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)s.push(n.currentNode);return s}function LD(t,s){for(const n of t)if(!Pee(n,{upTo:s}))return n}function Pee(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Aee(t){return t instanceof HTMLInputElement&&"select"in t}function so(t,{select:s=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Aee(t)&&s&&t.select()}}var BD=Tee();function Tee(){let t=[];return{add(s){const n=t[0];s!==n&&(n==null||n.pause()),t=VD(t,s),t.unshift(s)},remove(s){var n;t=VD(t,s),(n=t[0])==null||n.resume()}}}function VD(t,s){const n=[...t],r=n.indexOf(s);return r!==-1&&n.splice(r,1),n}function Dee(t){return t.filter(s=>s.tagName!=="A")}function d0(t){const s=b.useRef({value:t,previous:t});return b.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var Eee=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Ud=new WeakMap,Sg=new WeakMap,Cg={},AN=0,YF=function(t){return t&&(t.host||YF(t.parentNode))},Oee=function(t,s){return s.map(function(n){if(t.contains(n))return n;var r=YF(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Mee=function(t,s,n,r){var a=Oee(s,Array.isArray(t)?t:[t]);Cg[n]||(Cg[n]=new WeakMap);var i=Cg[n],l=[],o=new Set,c=new Set(a),d=function(m){!m||o.has(m)||(o.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(o.has(h))u(h);else try{var x=h.getAttribute(r),p=x!==null&&x!=="false",f=(Ud.get(h)||0)+1,j=(i.get(h)||0)+1;Ud.set(h,f),i.set(h,j),l.push(h),f===1&&p&&Sg.set(h,!0),j===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",h,g)}})};return u(s),o.clear(),AN++,function(){l.forEach(function(m){var h=Ud.get(m)-1,x=i.get(m)-1;Ud.set(m,h),i.set(m,x),h||(Sg.has(m)||m.removeAttribute(r),Sg.delete(m)),x||m.removeAttribute(n)}),AN--,AN||(Ud=new WeakMap,Ud=new WeakMap,Sg=new WeakMap,Cg={})}},u0=function(t,s,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=Eee(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),Mee(r,a,n,"aria-hidden")):function(){return null}},Di=function(){return Di=Object.assign||function(s){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Di.apply(this,arguments)};function QF(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function _ee(t,s,n){if(n||arguments.length===2)for(var r=0,a=s.length,i;r<a;r++)(i||!(r in s))&&(i||(i=Array.prototype.slice.call(s,0,r)),i[r]=s[r]);return t.concat(i||Array.prototype.slice.call(s))}var fv="right-scroll-bar-position",gv="width-before-scroll-bar",Ree="with-scroll-bars-hidden",Iee="--removed-body-scroll-bar-size";function TN(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function $ee(t,s){var n=b.useState(function(){return{value:t,callback:s,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=s,n.facade}var Fee=typeof window<"u"?b.useLayoutEffect:b.useEffect,UD=new WeakMap;function Lee(t,s){var n=$ee(null,function(r){return t.forEach(function(a){return TN(a,r)})});return Fee(function(){var r=UD.get(n);if(r){var a=new Set(r),i=new Set(t),l=n.current;a.forEach(function(o){i.has(o)||TN(o,null)}),i.forEach(function(o){a.has(o)||TN(o,l)})}UD.set(n,t)},[t]),n}function Bee(t){return t}function Vee(t,s){s===void 0&&(s=Bee);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var l=s(i,r);return n.push(l),function(){n=n.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(r=!0;n.length;){var l=n;n=[],l.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var l=[];if(n.length){var o=n;n=[],o.forEach(i),l=n}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),n}}}};return a}function Uee(t){t===void 0&&(t={});var s=Vee(null);return s.options=Di({async:!0,ssr:!1},t),s}var XF=function(t){var s=t.sideCar,n=QF(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Di({},n))};XF.isSideCarExport=!0;function zee(t,s){return t.useMedium(s),XF}var ZF=Uee(),DN=function(){},m0=b.forwardRef(function(t,s){var n=b.useRef(null),r=b.useState({onScrollCapture:DN,onWheelCapture:DN,onTouchMoveCapture:DN}),a=r[0],i=r[1],l=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,m=t.shards,h=t.sideCar,x=t.noRelative,p=t.noIsolation,f=t.inert,j=t.allowPinchZoom,g=t.as,y=g===void 0?"div":g,v=t.gapMode,w=QF(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,S=Lee([n,s]),k=Di(Di({},w),a);return b.createElement(b.Fragment,null,u&&b.createElement(N,{sideCar:ZF,removeScrollBar:d,shards:m,noRelative:x,noIsolation:p,inert:f,setCallbacks:i,allowPinchZoom:!!j,lockRef:n,gapMode:v}),l?b.cloneElement(b.Children.only(o),Di(Di({},k),{ref:S})):b.createElement(y,Di({},k,{className:c,ref:S}),o))});m0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};m0.classNames={fullWidth:gv,zeroRight:fv};var qee=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Hee(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=qee();return s&&t.setAttribute("nonce",s),t}function Gee(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function Wee(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var Kee=function(){var t=0,s=null;return{add:function(n){t==0&&(s=Hee())&&(Gee(s,n),Wee(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},Yee=function(){var t=Kee();return function(s,n){b.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&n])}},JF=function(){var t=Yee(),s=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return s},Qee={left:0,top:0,right:0,gap:0},EN=function(t){return parseInt(t||"",10)||0},Xee=function(t){var s=window.getComputedStyle(document.body),n=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[EN(n),EN(r),EN(a)]},Zee=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Qee;var s=Xee(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-n+s[2]-s[0])}},Jee=JF(),Fu="data-scroll-locked",ete=function(t,s,n,r){var a=t.left,i=t.top,l=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ree,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Fu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fv,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(gv,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(fv," .").concat(fv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(gv," .").concat(gv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fu,`] {
    `).concat(Iee,": ").concat(o,`px;
  }
`)},zD=function(){var t=parseInt(document.body.getAttribute(Fu)||"0",10);return isFinite(t)?t:0},tte=function(){b.useEffect(function(){return document.body.setAttribute(Fu,(zD()+1).toString()),function(){var t=zD()-1;t<=0?document.body.removeAttribute(Fu):document.body.setAttribute(Fu,t.toString())}},[])},ste=function(t){var s=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;tte();var i=b.useMemo(function(){return Zee(a)},[a]);return b.createElement(Jee,{styles:ete(i,!s,a,n?"":"!important")})},f2=!1;if(typeof window<"u")try{var kg=Object.defineProperty({},"passive",{get:function(){return f2=!0,!0}});window.addEventListener("test",kg,kg),window.removeEventListener("test",kg,kg)}catch{f2=!1}var zd=f2?{passive:!1}:!1,nte=function(t){return t.tagName==="TEXTAREA"},eL=function(t,s){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[s]!=="hidden"&&!(n.overflowY===n.overflowX&&!nte(t)&&n[s]==="visible")},rte=function(t){return eL(t,"overflowY")},ate=function(t){return eL(t,"overflowX")},qD=function(t,s){var n=s.ownerDocument,r=s;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=tL(t,r);if(a){var i=sL(t,r),l=i[1],o=i[2];if(l>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ite=function(t){var s=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[s,n,r]},lte=function(t){var s=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[s,n,r]},tL=function(t,s){return t==="v"?rte(s):ate(s)},sL=function(t,s){return t==="v"?ite(s):lte(s)},ote=function(t,s){return t==="h"&&s==="rtl"?-1:1},cte=function(t,s,n,r,a){var i=ote(t,window.getComputedStyle(s).direction),l=i*r,o=n.target,c=s.contains(o),d=!1,u=l>0,m=0,h=0;do{if(!o)break;var x=sL(t,o),p=x[0],f=x[1],j=x[2],g=f-j-i*p;(p||g)&&tL(t,o)&&(m+=g,h+=p);var y=o.parentNode;o=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(u&&Math.abs(m)<1||!u&&Math.abs(h)<1)&&(d=!0),d},Pg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},HD=function(t){return[t.deltaX,t.deltaY]},GD=function(t){return t&&"current"in t?t.current:t},dte=function(t,s){return t[0]===s[0]&&t[1]===s[1]},ute=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},mte=0,qd=[];function hte(t){var s=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),a=b.useState(mte++)[0],i=b.useState(JF)[0],l=b.useRef(t);b.useEffect(function(){l.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var f=_ee([t.lockRef.current],(t.shards||[]).map(GD),!0).filter(Boolean);return f.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=b.useCallback(function(f,j){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!l.current.allowPinchZoom;var g=Pg(f),y=n.current,v="deltaX"in f?f.deltaX:y[0]-g[0],w="deltaY"in f?f.deltaY:y[1]-g[1],N,S=f.target,k=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in f&&k==="h"&&S.type==="range")return!1;var T=qD(k,S);if(!T)return!0;if(T?N=k:(N=k==="v"?"h":"v",T=qD(k,S)),!T)return!1;if(!r.current&&"changedTouches"in f&&(v||w)&&(r.current=N),!N)return!0;var C=r.current||N;return cte(C,j,f,C==="h"?v:w)},[]),c=b.useCallback(function(f){var j=f;if(!(!qd.length||qd[qd.length-1]!==i)){var g="deltaY"in j?HD(j):Pg(j),y=s.current.filter(function(N){return N.name===j.type&&(N.target===j.target||j.target===N.shadowParent)&&dte(N.delta,g)})[0];if(y&&y.should){j.cancelable&&j.preventDefault();return}if(!y){var v=(l.current.shards||[]).map(GD).filter(Boolean).filter(function(N){return N.contains(j.target)}),w=v.length>0?o(j,v[0]):!l.current.noIsolation;w&&j.cancelable&&j.preventDefault()}}},[]),d=b.useCallback(function(f,j,g,y){var v={name:f,delta:j,target:g,should:y,shadowParent:xte(g)};s.current.push(v),setTimeout(function(){s.current=s.current.filter(function(w){return w!==v})},1)},[]),u=b.useCallback(function(f){n.current=Pg(f),r.current=void 0},[]),m=b.useCallback(function(f){d(f.type,HD(f),f.target,o(f,t.lockRef.current))},[]),h=b.useCallback(function(f){d(f.type,Pg(f),f.target,o(f,t.lockRef.current))},[]);b.useEffect(function(){return qd.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,zd),document.addEventListener("touchmove",c,zd),document.addEventListener("touchstart",u,zd),function(){qd=qd.filter(function(f){return f!==i}),document.removeEventListener("wheel",c,zd),document.removeEventListener("touchmove",c,zd),document.removeEventListener("touchstart",u,zd)}},[]);var x=t.removeScrollBar,p=t.inert;return b.createElement(b.Fragment,null,p?b.createElement(i,{styles:ute(a)}):null,x?b.createElement(ste,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function xte(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const pte=zee(ZF,hte);var Of=b.forwardRef(function(t,s){return b.createElement(m0,Di({},t,{ref:s,sideCar:pte}))});Of.classNames=m0.classNames;var fte=[" ","Enter","ArrowUp","ArrowDown"],gte=[" ","Enter"],hd="Select",[h0,x0,vte]=Wj(hd),[hh]=Pn(hd,[vte,ic]),p0=ic(),[yte,lc]=hh(hd),[jte,bte]=hh(hd),nL=t=>{const{__scopeSelect:s,children:n,open:r,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:x,form:p}=t,f=p0(s),[j,g]=b.useState(null),[y,v]=b.useState(null),[w,N]=b.useState(!1),S=mh(d),[k,T]=ra({prop:r,defaultProp:a??!1,onChange:i,caller:hd}),[C,P]=ra({prop:l,defaultProp:o,onChange:c,caller:hd}),$=b.useRef(null),V=j?p||!!j.closest("form"):!0,[I,_]=b.useState(new Set),U=Array.from(I).map(H=>H.props.value).join(";");return e.jsx(n0,{...f,children:e.jsxs(yte,{required:x,scope:s,trigger:j,onTriggerChange:g,valueNode:y,onValueNodeChange:v,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:Zr(),value:C,onValueChange:P,open:k,onOpenChange:T,dir:S,triggerPointerDownPosRef:$,disabled:h,children:[e.jsx(h0.Provider,{scope:s,children:e.jsx(jte,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(H=>{_(Y=>new Set(Y).add(H))},[]),onNativeOptionRemove:b.useCallback(H=>{_(Y=>{const O=new Set(Y);return O.delete(H),O})},[]),children:n})}),V?e.jsxs(PL,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:m,value:C,onChange:H=>P(H.target.value),disabled:h,form:p,children:[C===void 0?e.jsx("option",{value:""}):null,Array.from(I)]},U):null]})})};nL.displayName=hd;var rL="SelectTrigger",aL=b.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,i=p0(n),l=lc(rL,n),o=l.disabled||r,c=kt(s,l.onTriggerChange),d=x0(n),u=b.useRef("touch"),[m,h,x]=TL(f=>{const j=d().filter(v=>!v.disabled),g=j.find(v=>v.value===l.value),y=DL(j,f,g);y!==void 0&&l.onValueChange(y.value)}),p=f=>{o||(l.onOpenChange(!0),x()),f&&(l.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(Tf,{asChild:!0,...i,children:e.jsx(st.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":AL(l.value)?"":void 0,...a,ref:c,onClick:Be(a.onClick,f=>{f.currentTarget.focus(),u.current!=="mouse"&&p(f)}),onPointerDown:Be(a.onPointerDown,f=>{u.current=f.pointerType;const j=f.target;j.hasPointerCapture(f.pointerId)&&j.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(p(f),f.preventDefault())}),onKeyDown:Be(a.onKeyDown,f=>{const j=m.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&h(f.key),!(j&&f.key===" ")&&fte.includes(f.key)&&(p(),f.preventDefault())})})})});aL.displayName=rL;var iL="SelectValue",lL=b.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:l="",...o}=t,c=lc(iL,n),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=kt(s,c.onValueNodeChange);return cn(()=>{d(u)},[d,u]),e.jsx(st.span,{...o,ref:m,style:{pointerEvents:"none"},children:AL(c.value)?e.jsx(e.Fragment,{children:l}):i})});lL.displayName=iL;var Nte="SelectIcon",oL=b.forwardRef((t,s)=>{const{__scopeSelect:n,children:r,...a}=t;return e.jsx(st.span,{"aria-hidden":!0,...a,ref:s,children:r||""})});oL.displayName=Nte;var wte="SelectPortal",cL=t=>e.jsx(oh,{asChild:!0,...t});cL.displayName=wte;var xd="SelectContent",dL=b.forwardRef((t,s)=>{const n=lc(xd,t.__scopeSelect),[r,a]=b.useState();if(cn(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ad.createPortal(e.jsx(uL,{scope:t.__scopeSelect,children:e.jsx(h0.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(mL,{...t,ref:s})});dL.displayName=xd;var Ua=10,[uL,oc]=hh(xd),Ste="SelectContentImpl",Cte=Wo("SelectContent.RemoveScroll"),mL=b.forwardRef((t,s)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:p,hideWhenDetached:f,avoidCollisions:j,...g}=t,y=lc(xd,n),[v,w]=b.useState(null),[N,S]=b.useState(null),k=kt(s,Q=>w(Q)),[T,C]=b.useState(null),[P,$]=b.useState(null),V=x0(n),[I,_]=b.useState(!1),U=b.useRef(!1);b.useEffect(()=>{if(v)return u0(v)},[v]),c0();const H=b.useCallback(Q=>{const[Z,...le]=V().map(ge=>ge.ref.current),[oe]=le.slice(-1),Ae=document.activeElement;for(const ge of Q)if(ge===Ae||(ge==null||ge.scrollIntoView({block:"nearest"}),ge===Z&&N&&(N.scrollTop=0),ge===oe&&N&&(N.scrollTop=N.scrollHeight),ge==null||ge.focus(),document.activeElement!==Ae))return},[V,N]),Y=b.useCallback(()=>H([T,v]),[H,T,v]);b.useEffect(()=>{I&&Y()},[I,Y]);const{onOpenChange:O,triggerPointerDownPosRef:R}=y;b.useEffect(()=>{if(v){let Q={x:0,y:0};const Z=oe=>{var Ae,ge;Q={x:Math.abs(Math.round(oe.pageX)-(((Ae=R.current)==null?void 0:Ae.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((ge=R.current)==null?void 0:ge.y)??0))}},le=oe=>{Q.x<=10&&Q.y<=10?oe.preventDefault():v.contains(oe.target)||O(!1),document.removeEventListener("pointermove",Z),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",le,{capture:!0})}}},[v,O,R]),b.useEffect(()=>{const Q=()=>O(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[O]);const[q,re]=TL(Q=>{const Z=V().filter(Ae=>!Ae.disabled),le=Z.find(Ae=>Ae.ref.current===document.activeElement),oe=DL(Z,Q,le);oe&&setTimeout(()=>oe.ref.current.focus())}),we=b.useCallback((Q,Z,le)=>{const oe=!U.current&&!le;(y.value!==void 0&&y.value===Z||oe)&&(C(Q),oe&&(U.current=!0))},[y.value]),K=b.useCallback(()=>v==null?void 0:v.focus(),[v]),Ce=b.useCallback((Q,Z,le)=>{const oe=!U.current&&!le;(y.value!==void 0&&y.value===Z||oe)&&$(Q)},[y.value]),pe=r==="popper"?g2:hL,F=pe===g2?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:p,hideWhenDetached:f,avoidCollisions:j}:{};return e.jsx(uL,{scope:n,content:v,viewport:N,onViewportChange:S,itemRefCallback:we,selectedItem:T,onItemLeave:K,itemTextRefCallback:Ce,focusSelectedItem:Y,selectedItemText:P,position:r,isPositioned:I,searchRef:q,children:e.jsx(Of,{as:Cte,allowPinchZoom:!0,children:e.jsx(Ef,{asChild:!0,trapped:y.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:Be(a,Q=>{var Z;(Z=y.trigger)==null||Z.focus({preventScroll:!0}),Q.preventDefault()}),children:e.jsx(Td,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:e.jsx(pe,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Q=>Q.preventDefault(),...g,...F,onPlaced:()=>_(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Be(g.onKeyDown,Q=>{const Z=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!Z&&Q.key.length===1&&re(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let oe=V().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const Ae=Q.target,ge=oe.indexOf(Ae);oe=oe.slice(ge+1)}setTimeout(()=>H(oe)),Q.preventDefault()}})})})})})})});mL.displayName=Ste;var kte="SelectItemAlignedPosition",hL=b.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,i=lc(xd,n),l=oc(xd,n),[o,c]=b.useState(null),[d,u]=b.useState(null),m=kt(s,k=>u(k)),h=x0(n),x=b.useRef(!1),p=b.useRef(!0),{viewport:f,selectedItem:j,selectedItemText:g,focusSelectedItem:y}=l,v=b.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&f&&j&&g){const k=i.trigger.getBoundingClientRect(),T=d.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),P=g.getBoundingClientRect();if(i.dir!=="rtl"){const Ae=P.left-T.left,ge=C.left-Ae,xe=k.left-ge,$e=k.width+xe,ke=Math.max($e,T.width),Ze=window.innerWidth-Ua,gt=p2(ge,[Ua,Math.max(Ua,Ze-ke)]);o.style.minWidth=$e+"px",o.style.left=gt+"px"}else{const Ae=T.right-P.right,ge=window.innerWidth-C.right-Ae,xe=window.innerWidth-k.right-ge,$e=k.width+xe,ke=Math.max($e,T.width),Ze=window.innerWidth-Ua,gt=p2(ge,[Ua,Math.max(Ua,Ze-ke)]);o.style.minWidth=$e+"px",o.style.right=gt+"px"}const $=h(),V=window.innerHeight-Ua*2,I=f.scrollHeight,_=window.getComputedStyle(d),U=parseInt(_.borderTopWidth,10),H=parseInt(_.paddingTop,10),Y=parseInt(_.borderBottomWidth,10),O=parseInt(_.paddingBottom,10),R=U+H+I+O+Y,q=Math.min(j.offsetHeight*5,R),re=window.getComputedStyle(f),we=parseInt(re.paddingTop,10),K=parseInt(re.paddingBottom,10),Ce=k.top+k.height/2-Ua,pe=V-Ce,F=j.offsetHeight/2,Q=j.offsetTop+F,Z=U+H+Q,le=R-Z;if(Z<=Ce){const Ae=$.length>0&&j===$[$.length-1].ref.current;o.style.bottom="0px";const ge=d.clientHeight-f.offsetTop-f.offsetHeight,xe=Math.max(pe,F+(Ae?K:0)+ge+Y),$e=Z+xe;o.style.height=$e+"px"}else{const Ae=$.length>0&&j===$[0].ref.current;o.style.top="0px";const xe=Math.max(Ce,U+f.offsetTop+(Ae?we:0)+F)+le;o.style.height=xe+"px",f.scrollTop=Z-Ce+f.offsetTop}o.style.margin=`${Ua}px 0`,o.style.minHeight=q+"px",o.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[h,i.trigger,i.valueNode,o,d,f,j,g,i.dir,r]);cn(()=>v(),[v]);const[w,N]=b.useState();cn(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const S=b.useCallback(k=>{k&&p.current===!0&&(v(),y==null||y(),p.current=!1)},[v,y]);return e.jsx(Ate,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:x,onScrollButtonChange:S,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:e.jsx(st.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});hL.displayName=kte;var Pte="SelectPopperPosition",g2=b.forwardRef((t,s)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ua,...i}=t,l=p0(n);return e.jsx(r0,{...l,...i,ref:s,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});g2.displayName=Pte;var[Ate,Zk]=hh(xd,{}),v2="SelectViewport",xL=b.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:r,...a}=t,i=oc(v2,n),l=Zk(v2,n),o=kt(s,i.onViewportChange),c=b.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(h0.Slot,{scope:n,children:e.jsx(st.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Be(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=l;if(h!=null&&h.current&&m){const x=Math.abs(c.current-u.scrollTop);if(x>0){const p=window.innerHeight-Ua*2,f=parseFloat(m.style.minHeight),j=parseFloat(m.style.height),g=Math.max(f,j);if(g<p){const y=g+x,v=Math.min(p,y),w=y-v;m.style.height=v+"px",m.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});xL.displayName=v2;var pL="SelectGroup",[Tte,Dte]=hh(pL),Ete=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=Zr();return e.jsx(Tte,{scope:n,id:a,children:e.jsx(st.div,{role:"group","aria-labelledby":a,...r,ref:s})})});Ete.displayName=pL;var fL="SelectLabel",gL=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=Dte(fL,n);return e.jsx(st.div,{id:a.id,...r,ref:s})});gL.displayName=fL;var ny="SelectItem",[Ote,vL]=hh(ny),yL=b.forwardRef((t,s)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...l}=t,o=lc(ny,n),c=oc(ny,n),d=o.value===r,[u,m]=b.useState(i??""),[h,x]=b.useState(!1),p=kt(s,y=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,y,r,a)}),f=Zr(),j=b.useRef("touch"),g=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Ote,{scope:n,value:r,disabled:a,textId:f,isSelected:d,onItemTextChange:b.useCallback(y=>{m(v=>v||((y==null?void 0:y.textContent)??"").trim())},[]),children:e.jsx(h0.ItemSlot,{scope:n,value:r,disabled:a,textValue:u,children:e.jsx(st.div,{role:"option","aria-labelledby":f,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:p,onFocus:Be(l.onFocus,()=>x(!0)),onBlur:Be(l.onBlur,()=>x(!1)),onClick:Be(l.onClick,()=>{j.current!=="mouse"&&g()}),onPointerUp:Be(l.onPointerUp,()=>{j.current==="mouse"&&g()}),onPointerDown:Be(l.onPointerDown,y=>{j.current=y.pointerType}),onPointerMove:Be(l.onPointerMove,y=>{var v;j.current=y.pointerType,a?(v=c.onItemLeave)==null||v.call(c):j.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Be(l.onPointerLeave,y=>{var v;y.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:Be(l.onKeyDown,y=>{var w;((w=c.searchRef)==null?void 0:w.current)!==""&&y.key===" "||(gte.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})})})})});yL.displayName=ny;var dx="SelectItemText",jL=b.forwardRef((t,s)=>{const{__scopeSelect:n,className:r,style:a,...i}=t,l=lc(dx,n),o=oc(dx,n),c=vL(dx,n),d=bte(dx,n),[u,m]=b.useState(null),h=kt(s,g=>m(g),c.onItemTextChange,g=>{var y;return(y=o.itemTextRefCallback)==null?void 0:y.call(o,g,c.value,c.disabled)}),x=u==null?void 0:u.textContent,p=b.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:f,onNativeOptionRemove:j}=d;return cn(()=>(f(p),()=>j(p)),[f,j,p]),e.jsxs(e.Fragment,{children:[e.jsx(st.span,{id:c.textId,...i,ref:h}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ad.createPortal(i.children,l.valueNode):null]})});jL.displayName=dx;var bL="SelectItemIndicator",NL=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return vL(bL,n).isSelected?e.jsx(st.span,{"aria-hidden":!0,...r,ref:s}):null});NL.displayName=bL;var y2="SelectScrollUpButton",wL=b.forwardRef((t,s)=>{const n=oc(y2,t.__scopeSelect),r=Zk(y2,t.__scopeSelect),[a,i]=b.useState(!1),l=kt(s,r.onScrollButtonChange);return cn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?e.jsx(CL,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});wL.displayName=y2;var j2="SelectScrollDownButton",SL=b.forwardRef((t,s)=>{const n=oc(j2,t.__scopeSelect),r=Zk(j2,t.__scopeSelect),[a,i]=b.useState(!1),l=kt(s,r.onScrollButtonChange);return cn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?e.jsx(CL,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});SL.displayName=j2;var CL=b.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,i=oc("SelectScrollButton",n),l=b.useRef(null),o=x0(n),c=b.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),cn(()=>{var u;const d=o().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),e.jsx(st.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:Be(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:Be(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:Be(a.onPointerLeave,()=>{c()})})}),Mte="SelectSeparator",kL=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t;return e.jsx(st.div,{"aria-hidden":!0,...r,ref:s})});kL.displayName=Mte;var b2="SelectArrow",_te=b.forwardRef((t,s)=>{const{__scopeSelect:n,...r}=t,a=p0(n),i=lc(b2,n),l=oc(b2,n);return i.open&&l.position==="popper"?e.jsx(a0,{...a,...r,ref:s}):null});_te.displayName=b2;var Rte="SelectBubbleInput",PL=b.forwardRef(({__scopeSelect:t,value:s,...n},r)=>{const a=b.useRef(null),i=kt(r,a),l=d0(s);return b.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==s&&u){const m=new Event("change",{bubbles:!0});u.call(o,s),o.dispatchEvent(m)}},[l,s]),e.jsx(st.select,{...n,style:{...b$,...n.style},ref:i,defaultValue:s})});PL.displayName=Rte;function AL(t){return t===""||t===void 0}function TL(t){const s=an(t),n=b.useRef(""),r=b.useRef(0),a=b.useCallback(l=>{const o=n.current+l;s(o),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[s]),i=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function DL(t,s,n){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=Ite(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Ite(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var $te=nL,EL=aL,Fte=lL,Lte=oL,Bte=cL,OL=dL,Vte=xL,ML=gL,_L=yL,Ute=jL,zte=NL,RL=wL,IL=SL,$L=kL;const se=$te,ne=Fte,ee=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(EL,{ref:r,className:Ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,e.jsx(Lte,{asChild:!0,children:e.jsx(Xj,{className:"h-4 w-4 opacity-50"})})]}));ee.displayName=EL.displayName;const FL=b.forwardRef(({className:t,...s},n)=>e.jsx(RL,{ref:n,className:Ue("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Y$,{className:"h-4 w-4"})}));FL.displayName=RL.displayName;const LL=b.forwardRef(({className:t,...s},n)=>e.jsx(IL,{ref:n,className:Ue("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Xj,{className:"h-4 w-4"})}));LL.displayName=IL.displayName;const te=b.forwardRef(({className:t,children:s,position:n="popper",...r},a)=>e.jsx(Bte,{children:e.jsxs(OL,{ref:a,className:Ue("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[e.jsx(FL,{}),e.jsx(Vte,{className:Ue("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(LL,{})]})}));te.displayName=OL.displayName;const qte=b.forwardRef(({className:t,...s},n)=>e.jsx(ML,{ref:n,className:Ue("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));qte.displayName=ML.displayName;const A=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(_L,{ref:r,className:Ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(zte,{children:e.jsx(Qj,{className:"h-4 w-4"})})}),e.jsx(Ute,{children:s})]}));A.displayName=_L.displayName;const Hte=b.forwardRef(({className:t,...s},n)=>e.jsx($L,{ref:n,className:Ue("-mx-1 my-1 h-px bg-muted",t),...s}));Hte.displayName=$L.displayName;const Gte=[{id:1,name:"Villa Samui Breeze",location:"Koh Samui, Thailand",status:"active",bedrooms:3,bathrooms:2,capacity:6,occupancy:85,monthlyRevenue:125e3,roi:12.5,lastBooking:"2 days ago",maintenanceTasks:2,nextCheckIn:"Tomorrow",image:"",bookingsThisMonth:8,avgDailyRate:4500},{id:2,name:"Villa Ocean View",location:"Phuket, Thailand",status:"active",bedrooms:2,bathrooms:2,capacity:4,occupancy:72,monthlyRevenue:89e3,roi:9.8,lastBooking:"5 days ago",maintenanceTasks:0,nextCheckIn:"Next week",image:"",bookingsThisMonth:6,avgDailyRate:3200},{id:3,name:"Villa Tropical Paradise",location:"Krabi, Thailand",status:"maintenance",bedrooms:4,bathrooms:3,capacity:8,occupancy:0,monthlyRevenue:0,roi:0,lastBooking:"1 week ago",maintenanceTasks:5,nextCheckIn:"In renovation",image:"",bookingsThisMonth:0,avgDailyRate:0},{id:4,name:"Villa Aruna Demo",location:"Chiang Mai, Thailand",status:"active",bedrooms:5,bathrooms:4,capacity:10,occupancy:92,monthlyRevenue:18e4,roi:15.2,lastBooking:"Yesterday",maintenanceTasks:1,nextCheckIn:"Today",image:"",bookingsThisMonth:12,avgDailyRate:6e3}],pc={totalProperties:4,activeProperties:3,totalRevenue:394e3,avgOccupancy:62.3,totalBookings:26,pendingTasks:8};function Wte(){const[t,s]=b.useState(""),[n,r]=b.useState("all"),[a,i]=b.useState("overview"),l=b.useMemo(()=>Gte.filter(d=>{const u=t===""||d.name.toLowerCase().includes(t.toLowerCase())||d.location.toLowerCase().includes(t.toLowerCase()),m=n==="all"||d.status===n;return u&&m}),[t,n]),o=d=>{switch(d){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},c=d=>`${d.toLocaleString()}`;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Property Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive overview of your property portfolio performance"})]}),e.jsxs(M,{className:"gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Add Property"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(ln,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:pc.totalProperties}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[pc.activeProperties," active"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(pc.totalRevenue)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Avg Occupancy"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[pc.avgOccupancy,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Portfolio average"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Bookings"}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:pc.totalBookings}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Tasks"}),e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:pc.pendingTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Active Properties"}),e.jsx(ni,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:pc.activeProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently operating"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(G,{placeholder:"Search properties by name or location...",className:"pl-10",value:t,onChange:d=>s(d.target.value)})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsxs(ee,{className:"w-48",children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),e.jsx(ne,{placeholder:"Filter by status"})]}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(d=>e.jsxs(E,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:d.image}),e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:d.name}),e.jsxs(Me,{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"h-3 w-3"}),d.location]})]})]}),e.jsx(z,{className:o(d.status),children:d.status})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ln,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:[d.bedrooms,"BR/",d.bathrooms,"BA"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["Up to ",d.capacity]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Occupancy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d.occupancy}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[d.occupancy,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:c(d.monthlyRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ROI"}),e.jsxs("span",{className:"text-sm font-semibold",children:[d.roi,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Booking"}),e.jsx("span",{className:"text-sm",children:d.lastBooking})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Check-in"}),e.jsx("span",{className:"text-sm font-medium",children:d.nextCheckIn})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(pn,{className:"h-3 w-3 mr-1"}),"Analytics"]})]}),d.maintenanceTasks>0&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 rounded-md",children:[e.jsx(Et,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("span",{className:"text-sm text-yellow-800",children:[d.maintenanceTasks," pending task",d.maintenanceTasks>1?"s":""]})]})]})]},d.id))}),l.length===0&&e.jsx(E,{className:"py-12",children:e.jsxs(D,{className:"text-center",children:[e.jsx(ln,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or add a new property to get started."}),e.jsxs(M,{children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Add Your First Property"]})]})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Quick Insights"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(d=>d.status==="active").length}),e.jsx("div",{className:"text-green-800",children:"Active Properties"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(l.reduce((d,u)=>d+u.occupancy,0)/l.length||0),"%"]}),e.jsx("div",{className:"text-blue-800",children:"Average Occupancy"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c(l.reduce((d,u)=>d+u.monthlyRevenue,0))}),e.jsx("div",{className:"text-purple-800",children:"Total Revenue"})]})]})})]})]})}const gn=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:Ue("w-full caption-bottom text-sm",t),...s})}));gn.displayName="Table";const vn=b.forwardRef(({className:t,...s},n)=>e.jsx("thead",{ref:n,className:Ue("[&_tr]:border-b",t),...s}));vn.displayName="TableHeader";const yn=b.forwardRef(({className:t,...s},n)=>e.jsx("tbody",{ref:n,className:Ue("[&_tr:last-child]:border-0",t),...s}));yn.displayName="TableBody";const Kte=b.forwardRef(({className:t,...s},n)=>e.jsx("tfoot",{ref:n,className:Ue("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));Kte.displayName="TableFooter";const Ot=b.forwardRef(({className:t,...s},n)=>e.jsx("tr",{ref:n,className:Ue("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));Ot.displayName="TableRow";const Re=b.forwardRef(({className:t,...s},n)=>e.jsx("th",{ref:n,className:Ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));Re.displayName="TableHead";const Oe=b.forwardRef(({className:t,...s},n)=>e.jsx("td",{ref:n,className:Ue("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));Oe.displayName="TableCell";const Yte=b.forwardRef(({className:t,...s},n)=>e.jsx("caption",{ref:n,className:Ue("mt-4 text-sm text-muted-foreground",t),...s}));Yte.displayName="TableCaption";var f0="Dialog",[BL,VL]=Pn(f0),[Qte,vi]=BL(f0),UL=t=>{const{__scopeDialog:s,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,o=b.useRef(null),c=b.useRef(null),[d,u]=ra({prop:r,defaultProp:a??!1,onChange:i,caller:f0});return e.jsx(Qte,{scope:s,triggerRef:o,contentRef:c,contentId:Zr(),titleId:Zr(),descriptionId:Zr(),open:d,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(m=>!m),[u]),modal:l,children:n})};UL.displayName=f0;var zL="DialogTrigger",qL=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=vi(zL,n),i=kt(s,a.triggerRef);return e.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tP(a.open),...r,ref:i,onClick:Be(t.onClick,a.onOpenToggle)})});qL.displayName=zL;var Jk="DialogPortal",[Xte,HL]=BL(Jk,{forceMount:void 0}),GL=t=>{const{__scopeDialog:s,forceMount:n,children:r,container:a}=t,i=vi(Jk,s);return e.jsx(Xte,{scope:s,forceMount:n,children:b.Children.map(r,l=>e.jsx(An,{present:n||i.open,children:e.jsx(oh,{asChild:!0,container:a,children:l})}))})};GL.displayName=Jk;var ry="DialogOverlay",WL=b.forwardRef((t,s)=>{const n=HL(ry,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,i=vi(ry,t.__scopeDialog);return i.modal?e.jsx(An,{present:r||i.open,children:e.jsx(Jte,{...a,ref:s})}):null});WL.displayName=ry;var Zte=Wo("DialogOverlay.RemoveScroll"),Jte=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=vi(ry,n);return e.jsx(Of,{as:Zte,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(st.div,{"data-state":tP(a.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),pd="DialogContent",KL=b.forwardRef((t,s)=>{const n=HL(pd,t.__scopeDialog),{forceMount:r=n.forceMount,...a}=t,i=vi(pd,t.__scopeDialog);return e.jsx(An,{present:r||i.open,children:i.modal?e.jsx(ese,{...a,ref:s}):e.jsx(tse,{...a,ref:s})})});KL.displayName=pd;var ese=b.forwardRef((t,s)=>{const n=vi(pd,t.__scopeDialog),r=b.useRef(null),a=kt(s,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return u0(i)},[]),e.jsx(YL,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Be(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Be(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:Be(t.onFocusOutside,i=>i.preventDefault())})}),tse=b.forwardRef((t,s)=>{const n=vi(pd,t.__scopeDialog),r=b.useRef(!1),a=b.useRef(!1);return e.jsx(YL,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),YL=b.forwardRef((t,s)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,o=vi(pd,n),c=b.useRef(null),d=kt(s,c);return c0(),e.jsxs(e.Fragment,{children:[e.jsx(Ef,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Td,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":tP(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(nse,{titleId:o.titleId}),e.jsx(ase,{contentRef:c,descriptionId:o.descriptionId})]})]})}),eP="DialogTitle",QL=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=vi(eP,n);return e.jsx(st.h2,{id:a.titleId,...r,ref:s})});QL.displayName=eP;var XL="DialogDescription",ZL=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=vi(XL,n);return e.jsx(st.p,{id:a.descriptionId,...r,ref:s})});ZL.displayName=XL;var JL="DialogClose",e8=b.forwardRef((t,s)=>{const{__scopeDialog:n,...r}=t,a=vi(JL,n);return e.jsx(st.button,{type:"button",...r,ref:s,onClick:Be(t.onClick,()=>a.onOpenChange(!1))})});e8.displayName=JL;function tP(t){return t?"open":"closed"}var t8="DialogTitleWarning",[sse,s8]=gQ(t8,{contentName:pd,titleName:eP,docsSlug:"dialog"}),nse=({titleId:t})=>{const s=s8(t8),n=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},rse="DialogDescriptionWarning",ase=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s8(rse).contentName}}.`;return b.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},n8=UL,r8=qL,a8=GL,sP=WL,nP=KL,rP=QL,aP=ZL,iP=e8;const Ke=n8,cs=r8,ise=a8,i8=b.forwardRef(({className:t,...s},n)=>e.jsx(sP,{ref:n,className:Ue("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));i8.displayName=sP.displayName;const Ye=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(ise,{children:[e.jsx(i8,{}),e.jsxs(nP,{ref:r,className:Ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,e.jsxs(iP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(on,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ye.displayName=nP.displayName;const Qe=({className:t,...s})=>e.jsx("div",{className:Ue("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Qe.displayName="DialogHeader";const ir=({className:t,...s})=>e.jsx("div",{className:Ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ir.displayName="DialogFooter";const Xe=b.forwardRef(({className:t,...s},n)=>e.jsx(rP,{ref:n,className:Ue("text-lg font-semibold leading-none tracking-tight",t),...s}));Xe.displayName=rP.displayName;const Rt=b.forwardRef(({className:t,...s},n)=>e.jsx(aP,{ref:n,className:Ue("text-sm text-muted-foreground",t),...s}));Rt.displayName=aP.displayName;var ON="rovingFocusGroup.onEntryFocus",lse={bubbles:!1,cancelable:!0},Mf="RovingFocusGroup",[N2,l8,ose]=Wj(Mf),[cse,xh]=Pn(Mf,[ose]),[dse,use]=cse(Mf),o8=b.forwardRef((t,s)=>e.jsx(N2.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(N2.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(mse,{...t,ref:s})})}));o8.displayName=Mf;var mse=b.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=t,h=b.useRef(null),x=kt(s,h),p=mh(i),[f,j]=ra({prop:l,defaultProp:o??null,onChange:c,caller:Mf}),[g,y]=b.useState(!1),v=an(d),w=l8(n),N=b.useRef(!1),[S,k]=b.useState(0);return b.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(ON,v),()=>T.removeEventListener(ON,v)},[v]),e.jsx(dse,{scope:n,orientation:r,dir:p,loop:a,currentTabStopId:f,onItemFocus:b.useCallback(T=>j(T),[j]),onItemShiftTab:b.useCallback(()=>y(!0),[]),onFocusableItemAdd:b.useCallback(()=>k(T=>T+1),[]),onFocusableItemRemove:b.useCallback(()=>k(T=>T-1),[]),children:e.jsx(st.div,{tabIndex:g||S===0?-1:0,"data-orientation":r,...m,ref:x,style:{outline:"none",...t.style},onMouseDown:Be(t.onMouseDown,()=>{N.current=!0}),onFocus:Be(t.onFocus,T=>{const C=!N.current;if(T.target===T.currentTarget&&C&&!g){const P=new CustomEvent(ON,lse);if(T.currentTarget.dispatchEvent(P),!P.defaultPrevented){const $=w().filter(H=>H.focusable),V=$.find(H=>H.active),I=$.find(H=>H.id===f),U=[V,I,...$].filter(Boolean).map(H=>H.ref.current);u8(U,u)}}N.current=!1}),onBlur:Be(t.onBlur,()=>y(!1))})})}),c8="RovingFocusGroupItem",d8=b.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:l,...o}=t,c=Zr(),d=i||c,u=use(c8,n),m=u.currentTabStopId===d,h=l8(n),{onFocusableItemAdd:x,onFocusableItemRemove:p,currentTabStopId:f}=u;return b.useEffect(()=>{if(r)return x(),()=>p()},[r,x,p]),e.jsx(N2.ItemSlot,{scope:n,id:d,focusable:r,active:a,children:e.jsx(st.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:s,onMouseDown:Be(t.onMouseDown,j=>{r?u.onItemFocus(d):j.preventDefault()}),onFocus:Be(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:Be(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){u.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const g=pse(j,u.orientation,u.dir);if(g!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let v=h().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const w=v.indexOf(j.currentTarget);v=u.loop?fse(v,w+1):v.slice(w+1)}setTimeout(()=>u8(v))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:f!=null}):l})})});d8.displayName=c8;var hse={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xse(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pse(t,s,n){const r=xse(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return hse[r]}function u8(t,s=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:s}),document.activeElement!==n))return}function fse(t,s){return t.map((n,r)=>t[(s+r)%t.length])}var lP=o8,oP=d8,w2=["Enter"," "],gse=["ArrowDown","PageUp","Home"],m8=["ArrowUp","PageDown","End"],vse=[...gse,...m8],yse={ltr:[...w2,"ArrowRight"],rtl:[...w2,"ArrowLeft"]},jse={ltr:["ArrowLeft"],rtl:["ArrowRight"]},_f="Menu",[xp,bse,Nse]=Wj(_f),[Od,h8]=Pn(_f,[Nse,ic,xh]),g0=ic(),x8=xh(),[wse,Md]=Od(_f),[Sse,Rf]=Od(_f),p8=t=>{const{__scopeMenu:s,open:n=!1,children:r,dir:a,onOpenChange:i,modal:l=!0}=t,o=g0(s),[c,d]=b.useState(null),u=b.useRef(!1),m=an(i),h=mh(a);return b.useEffect(()=>{const x=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),e.jsx(n0,{...o,children:e.jsx(wse,{scope:s,open:n,onOpenChange:m,content:c,onContentChange:d,children:e.jsx(Sse,{scope:s,onClose:b.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:h,modal:l,children:r})})})};p8.displayName=_f;var Cse="MenuAnchor",cP=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=g0(n);return e.jsx(Tf,{...a,...r,ref:s})});cP.displayName=Cse;var dP="MenuPortal",[kse,f8]=Od(dP,{forceMount:void 0}),g8=t=>{const{__scopeMenu:s,forceMount:n,children:r,container:a}=t,i=Md(dP,s);return e.jsx(kse,{scope:s,forceMount:n,children:e.jsx(An,{present:n||i.open,children:e.jsx(oh,{asChild:!0,container:a,children:r})})})};g8.displayName=dP;var Aa="MenuContent",[Pse,uP]=Od(Aa),v8=b.forwardRef((t,s)=>{const n=f8(Aa,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,i=Md(Aa,t.__scopeMenu),l=Rf(Aa,t.__scopeMenu);return e.jsx(xp.Provider,{scope:t.__scopeMenu,children:e.jsx(An,{present:r||i.open,children:e.jsx(xp.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(Ase,{...a,ref:s}):e.jsx(Tse,{...a,ref:s})})})})}),Ase=b.forwardRef((t,s)=>{const n=Md(Aa,t.__scopeMenu),r=b.useRef(null),a=kt(s,r);return b.useEffect(()=>{const i=r.current;if(i)return u0(i)},[]),e.jsx(mP,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Be(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Tse=b.forwardRef((t,s)=>{const n=Md(Aa,t.__scopeMenu);return e.jsx(mP,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Dse=Wo("MenuContent.ScrollLock"),mP=b.forwardRef((t,s)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:x,disableOutsideScroll:p,...f}=t,j=Md(Aa,n),g=Rf(Aa,n),y=g0(n),v=x8(n),w=bse(n),[N,S]=b.useState(null),k=b.useRef(null),T=kt(s,k,j.onContentChange),C=b.useRef(0),P=b.useRef(""),$=b.useRef(0),V=b.useRef(null),I=b.useRef("right"),_=b.useRef(0),U=p?Of:b.Fragment,H=p?{as:Dse,allowPinchZoom:!0}:void 0,Y=R=>{var Q,Z;const q=P.current+R,re=w().filter(le=>!le.disabled),we=document.activeElement,K=(Q=re.find(le=>le.ref.current===we))==null?void 0:Q.textValue,Ce=re.map(le=>le.textValue),pe=Use(Ce,q,K),F=(Z=re.find(le=>le.textValue===pe))==null?void 0:Z.ref.current;(function le(oe){P.current=oe,window.clearTimeout(C.current),oe!==""&&(C.current=window.setTimeout(()=>le(""),1e3))})(q),F&&setTimeout(()=>F.focus())};b.useEffect(()=>()=>window.clearTimeout(C.current),[]),c0();const O=b.useCallback(R=>{var re,we;return I.current===((re=V.current)==null?void 0:re.side)&&qse(R,(we=V.current)==null?void 0:we.area)},[]);return e.jsx(Pse,{scope:n,searchRef:P,onItemEnter:b.useCallback(R=>{O(R)&&R.preventDefault()},[O]),onItemLeave:b.useCallback(R=>{var q;O(R)||((q=k.current)==null||q.focus(),S(null))},[O]),onTriggerLeave:b.useCallback(R=>{O(R)&&R.preventDefault()},[O]),pointerGraceTimerRef:$,onPointerGraceIntentChange:b.useCallback(R=>{V.current=R},[]),children:e.jsx(U,{...H,children:e.jsx(Ef,{asChild:!0,trapped:a,onMountAutoFocus:Be(i,R=>{var q;R.preventDefault(),(q=k.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Td,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:x,children:e.jsx(lP,{asChild:!0,...v,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:S,onEntryFocus:Be(c,R=>{g.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(r0,{role:"menu","aria-orientation":"vertical","data-state":_8(j.open),"data-radix-menu-content":"",dir:g.dir,...y,...f,ref:T,style:{outline:"none",...f.style},onKeyDown:Be(f.onKeyDown,R=>{const re=R.target.closest("[data-radix-menu-content]")===R.currentTarget,we=R.ctrlKey||R.altKey||R.metaKey,K=R.key.length===1;re&&(R.key==="Tab"&&R.preventDefault(),!we&&K&&Y(R.key));const Ce=k.current;if(R.target!==Ce||!vse.includes(R.key))return;R.preventDefault();const F=w().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);m8.includes(R.key)&&F.reverse(),Bse(F)}),onBlur:Be(t.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(C.current),P.current="")}),onPointerMove:Be(t.onPointerMove,pp(R=>{const q=R.target,re=_.current!==R.clientX;if(R.currentTarget.contains(q)&&re){const we=R.clientX>_.current?"right":"left";I.current=we,_.current=R.clientX}}))})})})})})})});v8.displayName=Aa;var Ese="MenuGroup",hP=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(st.div,{role:"group",...r,ref:s})});hP.displayName=Ese;var Ose="MenuLabel",y8=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(st.div,{...r,ref:s})});y8.displayName=Ose;var ay="MenuItem",WD="menu.itemSelect",v0=b.forwardRef((t,s)=>{const{disabled:n=!1,onSelect:r,...a}=t,i=b.useRef(null),l=Rf(ay,t.__scopeMenu),o=uP(ay,t.__scopeMenu),c=kt(s,i),d=b.useRef(!1),u=()=>{const m=i.current;if(!n&&m){const h=new CustomEvent(WD,{bubbles:!0,cancelable:!0});m.addEventListener(WD,x=>r==null?void 0:r(x),{once:!0}),_k(m,h),h.defaultPrevented?d.current=!1:l.onClose()}};return e.jsx(j8,{...a,ref:c,disabled:n,onClick:Be(t.onClick,u),onPointerDown:m=>{var h;(h=t.onPointerDown)==null||h.call(t,m),d.current=!0},onPointerUp:Be(t.onPointerUp,m=>{var h;d.current||(h=m.currentTarget)==null||h.click()}),onKeyDown:Be(t.onKeyDown,m=>{const h=o.searchRef.current!=="";n||h&&m.key===" "||w2.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});v0.displayName=ay;var j8=b.forwardRef((t,s)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=t,l=uP(ay,n),o=x8(n),c=b.useRef(null),d=kt(s,c),[u,m]=b.useState(!1),[h,x]=b.useState("");return b.useEffect(()=>{const p=c.current;p&&x((p.textContent??"").trim())},[i.children]),e.jsx(xp.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:e.jsx(oP,{asChild:!0,...o,focusable:!r,children:e.jsx(st.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:Be(t.onPointerMove,pp(p=>{r?l.onItemLeave(p):(l.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Be(t.onPointerLeave,pp(p=>l.onItemLeave(p))),onFocus:Be(t.onFocus,()=>m(!0)),onBlur:Be(t.onBlur,()=>m(!1))})})})}),Mse="MenuCheckboxItem",b8=b.forwardRef((t,s)=>{const{checked:n=!1,onCheckedChange:r,...a}=t;return e.jsx(k8,{scope:t.__scopeMenu,checked:n,children:e.jsx(v0,{role:"menuitemcheckbox","aria-checked":iy(n)?"mixed":n,...a,ref:s,"data-state":pP(n),onSelect:Be(a.onSelect,()=>r==null?void 0:r(iy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});b8.displayName=Mse;var N8="MenuRadioGroup",[_se,Rse]=Od(N8,{value:void 0,onValueChange:()=>{}}),w8=b.forwardRef((t,s)=>{const{value:n,onValueChange:r,...a}=t,i=an(r);return e.jsx(_se,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(hP,{...a,ref:s})})});w8.displayName=N8;var S8="MenuRadioItem",C8=b.forwardRef((t,s)=>{const{value:n,...r}=t,a=Rse(S8,t.__scopeMenu),i=n===a.value;return e.jsx(k8,{scope:t.__scopeMenu,checked:i,children:e.jsx(v0,{role:"menuitemradio","aria-checked":i,...r,ref:s,"data-state":pP(i),onSelect:Be(r.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,n)},{checkForDefaultPrevented:!1})})})});C8.displayName=S8;var xP="MenuItemIndicator",[k8,Ise]=Od(xP,{checked:!1}),P8=b.forwardRef((t,s)=>{const{__scopeMenu:n,forceMount:r,...a}=t,i=Ise(xP,n);return e.jsx(An,{present:r||iy(i.checked)||i.checked===!0,children:e.jsx(st.span,{...a,ref:s,"data-state":pP(i.checked)})})});P8.displayName=xP;var $se="MenuSeparator",A8=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t;return e.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});A8.displayName=$se;var Fse="MenuArrow",T8=b.forwardRef((t,s)=>{const{__scopeMenu:n,...r}=t,a=g0(n);return e.jsx(a0,{...a,...r,ref:s})});T8.displayName=Fse;var Lse="MenuSub",[rLe,D8]=Od(Lse),ux="MenuSubTrigger",E8=b.forwardRef((t,s)=>{const n=Md(ux,t.__scopeMenu),r=Rf(ux,t.__scopeMenu),a=D8(ux,t.__scopeMenu),i=uP(ux,t.__scopeMenu),l=b.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const m=o.current;return()=>{window.clearTimeout(m),c(null)}},[o,c]),e.jsx(cP,{asChild:!0,...d,children:e.jsx(j8,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":_8(n.open),...t,ref:Gj(s,a.onTriggerChange),onClick:m=>{var h;(h=t.onClick)==null||h.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Be(t.onPointerMove,pp(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Be(t.onPointerLeave,pp(m=>{var x,p;u();const h=(x=n.content)==null?void 0:x.getBoundingClientRect();if(h){const f=(p=n.content)==null?void 0:p.dataset.side,j=f==="right",g=j?-5:5,y=h[j?"left":"right"],v=h[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+g,y:m.clientY},{x:y,y:h.top},{x:v,y:h.top},{x:v,y:h.bottom},{x:y,y:h.bottom}],side:f}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Be(t.onKeyDown,m=>{var x;const h=i.searchRef.current!=="";t.disabled||h&&m.key===" "||yse[r.dir].includes(m.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),m.preventDefault())})})})});E8.displayName=ux;var O8="MenuSubContent",M8=b.forwardRef((t,s)=>{const n=f8(Aa,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,i=Md(Aa,t.__scopeMenu),l=Rf(Aa,t.__scopeMenu),o=D8(O8,t.__scopeMenu),c=b.useRef(null),d=kt(s,c);return e.jsx(xp.Provider,{scope:t.__scopeMenu,children:e.jsx(An,{present:r||i.open,children:e.jsx(xp.Slot,{scope:t.__scopeMenu,children:e.jsx(mP,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;l.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Be(t.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Be(t.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:Be(t.onKeyDown,u=>{var x;const m=u.currentTarget.contains(u.target),h=jse[l.dir].includes(u.key);m&&h&&(i.onOpenChange(!1),(x=o.trigger)==null||x.focus(),u.preventDefault())})})})})})});M8.displayName=O8;function _8(t){return t?"open":"closed"}function iy(t){return t==="indeterminate"}function pP(t){return iy(t)?"indeterminate":t?"checked":"unchecked"}function Bse(t){const s=document.activeElement;for(const n of t)if(n===s||(n.focus(),document.activeElement!==s))return}function Vse(t,s){return t.map((n,r)=>t[(s+r)%t.length])}function Use(t,s,n){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=n?t.indexOf(n):-1;let l=Vse(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==n));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function zse(t,s){const{x:n,y:r}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],d=o.x,u=o.y,m=c.x,h=c.y;u>r!=h>r&&n<(m-d)*(r-u)/(h-u)+d&&(a=!a)}return a}function qse(t,s){if(!s)return!1;const n={x:t.clientX,y:t.clientY};return zse(n,s)}function pp(t){return s=>s.pointerType==="mouse"?t(s):void 0}var Hse=p8,Gse=cP,Wse=g8,Kse=v8,Yse=hP,Qse=y8,Xse=v0,Zse=b8,Jse=w8,ene=C8,tne=P8,sne=A8,nne=T8,rne=E8,ane=M8,y0="DropdownMenu",[ine]=Pn(y0,[h8]),Sr=h8(),[lne,R8]=ine(y0),I8=t=>{const{__scopeDropdownMenu:s,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=t,c=Sr(s),d=b.useRef(null),[u,m]=ra({prop:a,defaultProp:i??!1,onChange:l,caller:y0});return e.jsx(lne,{scope:s,triggerId:Zr(),triggerRef:d,contentId:Zr(),open:u,onOpenChange:m,onOpenToggle:b.useCallback(()=>m(h=>!h),[m]),modal:o,children:e.jsx(Hse,{...c,open:u,onOpenChange:m,dir:r,modal:o,children:n})})};I8.displayName=y0;var $8="DropdownMenuTrigger",F8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=t,i=R8($8,n),l=Sr(n);return e.jsx(Gse,{asChild:!0,...l,children:e.jsx(st.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Gj(s,i.triggerRef),onPointerDown:Be(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Be(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});F8.displayName=$8;var one="DropdownMenuPortal",L8=t=>{const{__scopeDropdownMenu:s,...n}=t,r=Sr(s);return e.jsx(Wse,{...r,...n})};L8.displayName=one;var B8="DropdownMenuContent",V8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=R8(B8,n),i=Sr(n),l=b.useRef(!1);return e.jsx(Kse,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:s,onCloseAutoFocus:Be(t.onCloseAutoFocus,o=>{var c;l.current||(c=a.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:Be(t.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});V8.displayName=B8;var cne="DropdownMenuGroup",dne=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(Yse,{...a,...r,ref:s})});dne.displayName=cne;var une="DropdownMenuLabel",U8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(Qse,{...a,...r,ref:s})});U8.displayName=une;var mne="DropdownMenuItem",z8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(Xse,{...a,...r,ref:s})});z8.displayName=mne;var hne="DropdownMenuCheckboxItem",q8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(Zse,{...a,...r,ref:s})});q8.displayName=hne;var xne="DropdownMenuRadioGroup",pne=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(Jse,{...a,...r,ref:s})});pne.displayName=xne;var fne="DropdownMenuRadioItem",H8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(ene,{...a,...r,ref:s})});H8.displayName=fne;var gne="DropdownMenuItemIndicator",G8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(tne,{...a,...r,ref:s})});G8.displayName=gne;var vne="DropdownMenuSeparator",W8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(sne,{...a,...r,ref:s})});W8.displayName=vne;var yne="DropdownMenuArrow",jne=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(nne,{...a,...r,ref:s})});jne.displayName=yne;var bne="DropdownMenuSubTrigger",K8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(rne,{...a,...r,ref:s})});K8.displayName=bne;var Nne="DropdownMenuSubContent",Y8=b.forwardRef((t,s)=>{const{__scopeDropdownMenu:n,...r}=t,a=Sr(n);return e.jsx(ane,{...a,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Y8.displayName=Nne;var wne=I8,Sne=F8,Cne=L8,Q8=V8,X8=U8,Z8=z8,J8=q8,eB=H8,tB=G8,sB=W8,nB=K8,rB=Y8;const fp=wne,gp=Sne,kne=b.forwardRef(({className:t,inset:s,children:n,...r},a)=>e.jsxs(nB,{ref:a,className:Ue("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r,children:[n,e.jsx(Dd,{className:"ml-auto"})]}));kne.displayName=nB.displayName;const Pne=b.forwardRef(({className:t,...s},n)=>e.jsx(rB,{ref:n,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));Pne.displayName=rB.displayName;const pm=b.forwardRef(({className:t,sideOffset:s=4,...n},r)=>e.jsx(Cne,{children:e.jsx(Q8,{ref:r,sideOffset:s,className:Ue("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));pm.displayName=Q8.displayName;const xr=b.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(Z8,{ref:r,className:Ue("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n}));xr.displayName=Z8.displayName;const Ane=b.forwardRef(({className:t,children:s,checked:n,...r},a)=>e.jsxs(J8,{ref:a,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(tB,{children:e.jsx(Qj,{className:"h-4 w-4"})})}),s]}));Ane.displayName=J8.displayName;const Tne=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(eB,{ref:r,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(tB,{children:e.jsx(Q$,{className:"h-2 w-2 fill-current"})})}),s]}));Tne.displayName=eB.displayName;const vp=b.forwardRef(({className:t,inset:s,...n},r)=>e.jsx(X8,{ref:r,className:Ue("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...n}));vp.displayName=X8.displayName;const Bo=b.forwardRef(({className:t,...s},n)=>e.jsx(sB,{ref:n,className:Ue("-mx-1 my-1 h-px bg-muted",t),...s}));Bo.displayName=sB.displayName;var If=t=>t.type==="checkbox",Mc=t=>t instanceof Date,hr=t=>t==null;const aB=t=>typeof t=="object";var jn=t=>!hr(t)&&!Array.isArray(t)&&aB(t)&&!Mc(t),iB=t=>jn(t)&&t.target?If(t.target)?t.target.checked:t.target.value:t,Dne=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,lB=(t,s)=>t.has(Dne(s)),Ene=t=>{const s=t.constructor&&t.constructor.prototype;return jn(s)&&s.hasOwnProperty("isPrototypeOf")},fP=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $s(t){let s;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(fP&&(t instanceof Blob||r))&&(n||jn(t)))if(s=n?[]:{},!n&&!Ene(t))s=t;else for(const a in t)t.hasOwnProperty(a)&&(s[a]=$s(t[a]));else return t;return s}var j0=t=>/^\w*$/.test(t),Vs=t=>t===void 0,b0=t=>Array.isArray(t)?t.filter(Boolean):[],gP=t=>b0(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ge=(t,s,n)=>{if(!s||!jn(t))return n;const r=(j0(s)?[s]:gP(s)).reduce((a,i)=>hr(a)?a:a[i],t);return Vs(r)||r===t?Vs(t[s])?n:t[s]:r},Hr=t=>typeof t=="boolean",is=(t,s,n)=>{let r=-1;const a=j0(s)?[s]:gP(s),i=a.length,l=i-1;for(;++r<i;){const o=a[r];let c=n;if(r!==l){const d=t[o];c=jn(d)||Array.isArray(d)?d:isNaN(+a[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const ly={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ja={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},al={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vP=X.createContext(null);vP.displayName="HookFormContext";const $f=()=>X.useContext(vP),One=t=>{const{children:s,...n}=t;return X.createElement(vP.Provider,{value:n},s)};var oB=(t,s,n,r=!0)=>{const a={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const l=i;return s._proxyFormState[l]!==ja.all&&(s._proxyFormState[l]=!r||ja.all),n&&(n[l]=!0),t[l]}});return a};const N0=typeof window<"u"?b.useLayoutEffect:b.useEffect;function Mne(t){const s=$f(),{control:n=s.control,disabled:r,name:a,exact:i}=t||{},[l,o]=X.useState(n._formState),c=X.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return N0(()=>n._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!r&&o({...n._formState,...d})}}),[a,r,i]),X.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),X.useMemo(()=>oB(l,n,c.current,!1),[l,n])}var Oi=t=>typeof t=="string",cB=(t,s,n,r,a)=>Oi(t)?(r&&s.watch.add(t),Ge(n,t,a)):Array.isArray(t)?t.map(i=>(r&&s.watch.add(i),Ge(n,i))):(r&&(s.watchAll=!0),n);function _ne(t){const s=$f(),{control:n=s.control,name:r,defaultValue:a,disabled:i,exact:l}=t||{},o=X.useRef(a),[c,d]=X.useState(n._getWatch(r,o.current));return N0(()=>n._subscribe({name:r,formState:{values:!0},exact:l,callback:u=>!i&&d(cB(r,n._names,u.values||n._formValues,!1,o.current))}),[r,n,i,l]),X.useEffect(()=>n._removeUnmounted()),c}function Rne(t){const s=$f(),{name:n,disabled:r,control:a=s.control,shouldUnregister:i}=t,l=lB(a._names.array,n),o=_ne({control:a,name:n,defaultValue:Ge(a._formValues,n,Ge(a._defaultValues,n,t.defaultValue)),exact:!0}),c=Mne({control:a,name:n,exact:!0}),d=X.useRef(t),u=X.useRef(a.register(n,{...t.rules,value:o,...Hr(t.disabled)?{disabled:t.disabled}:{}})),m=X.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ge(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ge(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ge(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ge(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ge(c.errors,n)}}),[c,n]),h=X.useCallback(j=>u.current.onChange({target:{value:iB(j),name:n},type:ly.CHANGE}),[n]),x=X.useCallback(()=>u.current.onBlur({target:{value:Ge(a._formValues,n),name:n},type:ly.BLUR}),[n,a._formValues]),p=X.useCallback(j=>{const g=Ge(a._fields,n);g&&j&&(g._f.ref={focus:()=>j.focus&&j.focus(),select:()=>j.select&&j.select(),setCustomValidity:y=>j.setCustomValidity(y),reportValidity:()=>j.reportValidity()})},[a._fields,n]),f=X.useMemo(()=>({name:n,value:o,...Hr(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:h,onBlur:x,ref:p}),[n,r,c.disabled,h,x,p,o]);return X.useEffect(()=>{const j=a._options.shouldUnregister||i;a.register(n,{...d.current.rules,...Hr(d.current.disabled)?{disabled:d.current.disabled}:{}});const g=(y,v)=>{const w=Ge(a._fields,y);w&&w._f&&(w._f.mount=v)};if(g(n,!0),j){const y=$s(Ge(a._options.defaultValues,n));is(a._defaultValues,n,y),Vs(Ge(a._formValues,n))&&is(a._formValues,n,y)}return!l&&a.register(n),()=>{(l?j&&!a._state.action:j)?a.unregister(n):g(n,!1)}},[n,a,l,i]),X.useEffect(()=>{a._setDisabledField({disabled:r,name:n})},[r,n,a]),X.useMemo(()=>({field:f,formState:c,fieldState:m}),[f,c,m])}const Ine=t=>t.render(Rne(t));var dB=(t,s,n,r,a)=>s?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:a||!0}}:{},Or=t=>Array.isArray(t)?t:[t],KD=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}},S2=t=>hr(t)||!aB(t);function mo(t,s,n=new WeakSet){if(S2(t)||S2(s))return t===s;if(Mc(t)&&Mc(s))return t.getTime()===s.getTime();const r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;if(n.has(t)||n.has(s))return!0;n.add(t),n.add(s);for(const i of r){const l=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const o=s[i];if(Mc(l)&&Mc(o)||jn(l)&&jn(o)||Array.isArray(l)&&Array.isArray(o)?!mo(l,o,n):l!==o)return!1}}return!0}var dr=t=>jn(t)&&!Object.keys(t).length,yP=t=>t.type==="file",Za=t=>typeof t=="function",oy=t=>{if(!fP)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},uB=t=>t.type==="select-multiple",jP=t=>t.type==="radio",$ne=t=>jP(t)||If(t),MN=t=>oy(t)&&t.isConnected;function Fne(t,s){const n=s.slice(0,-1).length;let r=0;for(;r<n;)t=Vs(t)?r++:t[s[r++]];return t}function Lne(t){for(const s in t)if(t.hasOwnProperty(s)&&!Vs(t[s]))return!1;return!0}function dn(t,s){const n=Array.isArray(s)?s:j0(s)?[s]:gP(s),r=n.length===1?t:Fne(t,n),a=n.length-1,i=n[a];return r&&delete r[i],a!==0&&(jn(r)&&dr(r)||Array.isArray(r)&&Lne(r))&&dn(t,n.slice(0,-1)),t}var mB=t=>{for(const s in t)if(Za(t[s]))return!0;return!1};function cy(t,s={}){const n=Array.isArray(t);if(jn(t)||n)for(const r in t)Array.isArray(t[r])||jn(t[r])&&!mB(t[r])?(s[r]=Array.isArray(t[r])?[]:{},cy(t[r],s[r])):hr(t[r])||(s[r]=!0);return s}function hB(t,s,n){const r=Array.isArray(t);if(jn(t)||r)for(const a in t)Array.isArray(t[a])||jn(t[a])&&!mB(t[a])?Vs(s)||S2(n[a])?n[a]=Array.isArray(t[a])?cy(t[a],[]):{...cy(t[a])}:hB(t[a],hr(s)?{}:s[a],n[a]):n[a]=!mo(t[a],s[a]);return n}var Uh=(t,s)=>hB(t,s,cy(s));const YD={value:!1,isValid:!1},QD={value:!0,isValid:!0};var xB=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Vs(t[0].attributes.value)?Vs(t[0].value)||t[0].value===""?QD:{value:t[0].value,isValid:!0}:QD:YD}return YD},pB=(t,{valueAsNumber:s,valueAsDate:n,setValueAs:r})=>Vs(t)?t:s?t===""?NaN:t&&+t:n&&Oi(t)?new Date(t):r?r(t):t;const XD={isValid:!1,value:null};var fB=t=>Array.isArray(t)?t.reduce((s,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:s,XD):XD;function ZD(t){const s=t.ref;return yP(s)?s.files:jP(s)?fB(t.refs).value:uB(s)?[...s.selectedOptions].map(({value:n})=>n):If(s)?xB(t.refs).value:pB(Vs(s.value)?t.ref.value:s.value,t)}var Bne=(t,s,n,r)=>{const a={};for(const i of t){const l=Ge(s,i);l&&is(a,i,l._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:r}},dy=t=>t instanceof RegExp,zh=t=>Vs(t)?t:dy(t)?t.source:jn(t)?dy(t.value)?t.value.source:t.value:t,pu=t=>({isOnSubmit:!t||t===ja.onSubmit,isOnBlur:t===ja.onBlur,isOnChange:t===ja.onChange,isOnAll:t===ja.all,isOnTouch:t===ja.onTouched});const JD="AsyncFunction";var Vne=t=>!!t&&!!t.validate&&!!(Za(t.validate)&&t.validate.constructor.name===JD||jn(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===JD)),Une=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),C2=(t,s,n)=>!n&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Lu=(t,s,n,r)=>{for(const a of n||Object.keys(t)){const i=Ge(t,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],a)&&!r)return!0;if(l.ref&&s(l.ref,l.name)&&!r)return!0;if(Lu(o,s))break}else if(jn(o)&&Lu(o,s))break}}};function eE(t,s,n){const r=Ge(t,n);if(r||j0(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const i=a.join("."),l=Ge(s,i),o=Ge(t,i);if(l&&!Array.isArray(l)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};a.pop()}return{name:n}}var zne=(t,s,n,r)=>{n(t);const{name:a,...i}=t;return dr(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!r||ja.all))},qne=(t,s,n)=>!t||!s||t===s||Or(t).some(r=>r&&(n?r===s:r.startsWith(s)||s.startsWith(r))),Hne=(t,s,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(s||t):(n?r.isOnBlur:a.isOnBlur)?!t:(n?r.isOnChange:a.isOnChange)?t:!0,Gne=(t,s)=>!b0(Ge(t,s)).length&&dn(t,s),gB=(t,s,n)=>{const r=Or(Ge(t,n));return is(r,"root",s[n]),is(t,n,r),t},vv=t=>Oi(t);function tE(t,s,n="validate"){if(vv(t)||Array.isArray(t)&&t.every(vv)||Hr(t)&&!t)return{type:n,message:vv(t)?t:"",ref:s}}var Hd=t=>jn(t)&&!dy(t)?t:{value:t,message:""},k2=async(t,s,n,r,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:m,max:h,pattern:x,validate:p,name:f,valueAsNumber:j,mount:g}=t._f,y=Ge(n,f);if(!g||s.has(f))return{};const v=o?o[0]:l,w=V=>{a&&v.reportValidity&&(v.setCustomValidity(Hr(V)?"":V||""),v.reportValidity())},N={},S=jP(l),k=If(l),T=S||k,C=(j||yP(l))&&Vs(l.value)&&Vs(y)||oy(l)&&l.value===""||y===""||Array.isArray(y)&&!y.length,P=dB.bind(null,f,r,N),$=(V,I,_,U=al.maxLength,H=al.minLength)=>{const Y=V?I:_;N[f]={type:V?U:H,message:Y,ref:l,...P(V?U:H,Y)}};if(i?!Array.isArray(y)||!y.length:c&&(!T&&(C||hr(y))||Hr(y)&&!y||k&&!xB(o).isValid||S&&!fB(o).isValid)){const{value:V,message:I}=vv(c)?{value:!!c,message:c}:Hd(c);if(V&&(N[f]={type:al.required,message:I,ref:v,...P(al.required,I)},!r))return w(I),N}if(!C&&(!hr(m)||!hr(h))){let V,I;const _=Hd(h),U=Hd(m);if(!hr(y)&&!isNaN(y)){const H=l.valueAsNumber||y&&+y;hr(_.value)||(V=H>_.value),hr(U.value)||(I=H<U.value)}else{const H=l.valueAsDate||new Date(y),Y=q=>new Date(new Date().toDateString()+" "+q),O=l.type=="time",R=l.type=="week";Oi(_.value)&&y&&(V=O?Y(y)>Y(_.value):R?y>_.value:H>new Date(_.value)),Oi(U.value)&&y&&(I=O?Y(y)<Y(U.value):R?y<U.value:H<new Date(U.value))}if((V||I)&&($(!!V,_.message,U.message,al.max,al.min),!r))return w(N[f].message),N}if((d||u)&&!C&&(Oi(y)||i&&Array.isArray(y))){const V=Hd(d),I=Hd(u),_=!hr(V.value)&&y.length>+V.value,U=!hr(I.value)&&y.length<+I.value;if((_||U)&&($(_,V.message,I.message),!r))return w(N[f].message),N}if(x&&!C&&Oi(y)){const{value:V,message:I}=Hd(x);if(dy(V)&&!y.match(V)&&(N[f]={type:al.pattern,message:I,ref:l,...P(al.pattern,I)},!r))return w(I),N}if(p){if(Za(p)){const V=await p(y,n),I=tE(V,v);if(I&&(N[f]={...I,...P(al.validate,I.message)},!r))return w(I.message),N}else if(jn(p)){let V={};for(const I in p){if(!dr(V)&&!r)break;const _=tE(await p[I](y,n),v,I);_&&(V={..._,...P(I,_.message)},w(_.message),r&&(N[f]=V))}if(!dr(V)&&(N[f]={ref:v,...V},!r))return N}}return w(!0),N};const Wne={mode:ja.onSubmit,reValidateMode:ja.onChange,shouldFocusError:!0};function Kne(t={}){let s={...Wne,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Za(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},a=jn(s.defaultValues)||jn(s.values)?$s(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:$s(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const h={array:KD(),state:KD()},x=s.criteriaMode===ja.all,p=J=>Ne=>{clearTimeout(d),d=setTimeout(J,Ne)},f=async J=>{if(!s.disabled&&(u.isValid||m.isValid||J)){const Ne=s.resolver?dr((await k()).errors):await C(r,!0);Ne!==n.isValid&&h.state.next({isValid:Ne})}},j=(J,Ne)=>{!s.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((J||Array.from(o.mount)).forEach(De=>{De&&(Ne?is(n.validatingFields,De,Ne):dn(n.validatingFields,De))}),h.state.next({validatingFields:n.validatingFields,isValidating:!dr(n.validatingFields)}))},g=(J,Ne=[],De,We,qe=!0,Le=!0)=>{if(We&&De&&!s.disabled){if(l.action=!0,Le&&Array.isArray(Ge(r,J))){const pt=De(Ge(r,J),We.argA,We.argB);qe&&is(r,J,pt)}if(Le&&Array.isArray(Ge(n.errors,J))){const pt=De(Ge(n.errors,J),We.argA,We.argB);qe&&is(n.errors,J,pt),Gne(n.errors,J)}if((u.touchedFields||m.touchedFields)&&Le&&Array.isArray(Ge(n.touchedFields,J))){const pt=De(Ge(n.touchedFields,J),We.argA,We.argB);qe&&is(n.touchedFields,J,pt)}(u.dirtyFields||m.dirtyFields)&&(n.dirtyFields=Uh(a,i)),h.state.next({name:J,isDirty:$(J,Ne),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else is(i,J,Ne)},y=(J,Ne)=>{is(n.errors,J,Ne),h.state.next({errors:n.errors})},v=J=>{n.errors=J,h.state.next({errors:n.errors,isValid:!1})},w=(J,Ne,De,We)=>{const qe=Ge(r,J);if(qe){const Le=Ge(i,J,Vs(De)?Ge(a,J):De);Vs(Le)||We&&We.defaultChecked||Ne?is(i,J,Ne?Le:ZD(qe._f)):_(J,Le),l.mount&&f()}},N=(J,Ne,De,We,qe)=>{let Le=!1,pt=!1;const Qt={name:J};if(!s.disabled){if(!De||We){(u.isDirty||m.isDirty)&&(pt=n.isDirty,n.isDirty=Qt.isDirty=$(),Le=pt!==Qt.isDirty);const as=mo(Ge(a,J),Ne);pt=!!Ge(n.dirtyFields,J),as?dn(n.dirtyFields,J):is(n.dirtyFields,J,!0),Qt.dirtyFields=n.dirtyFields,Le=Le||(u.dirtyFields||m.dirtyFields)&&pt!==!as}if(De){const as=Ge(n.touchedFields,J);as||(is(n.touchedFields,J,De),Qt.touchedFields=n.touchedFields,Le=Le||(u.touchedFields||m.touchedFields)&&as!==De)}Le&&qe&&h.state.next(Qt)}return Le?Qt:{}},S=(J,Ne,De,We)=>{const qe=Ge(n.errors,J),Le=(u.isValid||m.isValid)&&Hr(Ne)&&n.isValid!==Ne;if(s.delayError&&De?(c=p(()=>y(J,De)),c(s.delayError)):(clearTimeout(d),c=null,De?is(n.errors,J,De):dn(n.errors,J)),(De?!mo(qe,De):qe)||!dr(We)||Le){const pt={...We,...Le&&Hr(Ne)?{isValid:Ne}:{},errors:n.errors,name:J};n={...n,...pt},h.state.next(pt)}},k=async J=>{j(J,!0);const Ne=await s.resolver(i,s.context,Bne(J||o.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return j(J),Ne},T=async J=>{const{errors:Ne}=await k(J);if(J)for(const De of J){const We=Ge(Ne,De);We?is(n.errors,De,We):dn(n.errors,De)}else n.errors=Ne;return Ne},C=async(J,Ne,De={valid:!0})=>{for(const We in J){const qe=J[We];if(qe){const{_f:Le,...pt}=qe;if(Le){const Qt=o.array.has(Le.name),as=qe._f&&Vne(qe._f);as&&u.validatingFields&&j([We],!0);const In=await k2(qe,o.disabled,i,x,s.shouldUseNativeValidation&&!Ne,Qt);if(as&&u.validatingFields&&j([We]),In[Le.name]&&(De.valid=!1,Ne))break;!Ne&&(Ge(In,Le.name)?Qt?gB(n.errors,In,Le.name):is(n.errors,Le.name,In[Le.name]):dn(n.errors,Le.name))}!dr(pt)&&await C(pt,Ne,De)}}return De.valid},P=()=>{for(const J of o.unMount){const Ne=Ge(r,J);Ne&&(Ne._f.refs?Ne._f.refs.every(De=>!MN(De)):!MN(Ne._f.ref))&&Q(J)}o.unMount=new Set},$=(J,Ne)=>!s.disabled&&(J&&Ne&&is(i,J,Ne),!mo(q(),a)),V=(J,Ne,De)=>cB(J,o,{...l.mount?i:Vs(Ne)?a:Oi(J)?{[J]:Ne}:Ne},De,Ne),I=J=>b0(Ge(l.mount?i:a,J,s.shouldUnregister?Ge(a,J,[]):[])),_=(J,Ne,De={})=>{const We=Ge(r,J);let qe=Ne;if(We){const Le=We._f;Le&&(!Le.disabled&&is(i,J,pB(Ne,Le)),qe=oy(Le.ref)&&hr(Ne)?"":Ne,uB(Le.ref)?[...Le.ref.options].forEach(pt=>pt.selected=qe.includes(pt.value)):Le.refs?If(Le.ref)?Le.refs.forEach(pt=>{(!pt.defaultChecked||!pt.disabled)&&(Array.isArray(qe)?pt.checked=!!qe.find(Qt=>Qt===pt.value):pt.checked=qe===pt.value||!!qe)}):Le.refs.forEach(pt=>pt.checked=pt.value===qe):yP(Le.ref)?Le.ref.value="":(Le.ref.value=qe,Le.ref.type||h.state.next({name:J,values:$s(i)})))}(De.shouldDirty||De.shouldTouch)&&N(J,qe,De.shouldTouch,De.shouldDirty,!0),De.shouldValidate&&R(J)},U=(J,Ne,De)=>{for(const We in Ne){if(!Ne.hasOwnProperty(We))return;const qe=Ne[We],Le=J+"."+We,pt=Ge(r,Le);(o.array.has(J)||jn(qe)||pt&&!pt._f)&&!Mc(qe)?U(Le,qe,De):_(Le,qe,De)}},H=(J,Ne,De={})=>{const We=Ge(r,J),qe=o.array.has(J),Le=$s(Ne);is(i,J,Le),qe?(h.array.next({name:J,values:$s(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&De.shouldDirty&&h.state.next({name:J,dirtyFields:Uh(a,i),isDirty:$(J,Le)})):We&&!We._f&&!hr(Le)?U(J,Le,De):_(J,Le,De),C2(J,o)&&h.state.next({...n}),h.state.next({name:l.mount?J:void 0,values:$s(i)})},Y=async J=>{l.mount=!0;const Ne=J.target;let De=Ne.name,We=!0;const qe=Ge(r,De),Le=as=>{We=Number.isNaN(as)||Mc(as)&&isNaN(as.getTime())||mo(as,Ge(i,De,as))},pt=pu(s.mode),Qt=pu(s.reValidateMode);if(qe){let as,In;const je=Ne.type?ZD(qe._f):iB(J),it=J.type===ly.BLUR||J.type===ly.FOCUS_OUT,Js=!Une(qe._f)&&!s.resolver&&!Ge(n.errors,De)&&!qe._f.deps||Hne(it,Ge(n.touchedFields,De),n.isSubmitted,Qt,pt),Se=C2(De,o,it);is(i,De,je),it?(qe._f.onBlur&&qe._f.onBlur(J),c&&c(0)):qe._f.onChange&&qe._f.onChange(J);const Ps=N(De,je,it),Lr=!dr(Ps)||Se;if(!it&&h.state.next({name:De,type:J.type,values:$s(i)}),Js)return(u.isValid||m.isValid)&&(s.mode==="onBlur"?it&&f():it||f()),Lr&&h.state.next({name:De,...Se?{}:Ps});if(!it&&Se&&h.state.next({...n}),s.resolver){const{errors:ji}=await k([De]);if(Le(je),We){const bi=eE(n.errors,r,De),ca=eE(ji,r,bi.name||De);as=ca.error,De=ca.name,In=dr(ji)}}else j([De],!0),as=(await k2(qe,o.disabled,i,x,s.shouldUseNativeValidation))[De],j([De]),Le(je),We&&(as?In=!1:(u.isValid||m.isValid)&&(In=await C(r,!0)));We&&(qe._f.deps&&R(qe._f.deps),S(De,In,as,Ps))}},O=(J,Ne)=>{if(Ge(n.errors,Ne)&&J.focus)return J.focus(),1},R=async(J,Ne={})=>{let De,We;const qe=Or(J);if(s.resolver){const Le=await T(Vs(J)?J:qe);De=dr(Le),We=J?!qe.some(pt=>Ge(Le,pt)):De}else J?(We=(await Promise.all(qe.map(async Le=>{const pt=Ge(r,Le);return await C(pt&&pt._f?{[Le]:pt}:pt)}))).every(Boolean),!(!We&&!n.isValid)&&f()):We=De=await C(r);return h.state.next({...!Oi(J)||(u.isValid||m.isValid)&&De!==n.isValid?{}:{name:J},...s.resolver||!J?{isValid:De}:{},errors:n.errors}),Ne.shouldFocus&&!We&&Lu(r,O,J?qe:o.mount),We},q=J=>{const Ne={...l.mount?i:a};return Vs(J)?Ne:Oi(J)?Ge(Ne,J):J.map(De=>Ge(Ne,De))},re=(J,Ne)=>({invalid:!!Ge((Ne||n).errors,J),isDirty:!!Ge((Ne||n).dirtyFields,J),error:Ge((Ne||n).errors,J),isValidating:!!Ge(n.validatingFields,J),isTouched:!!Ge((Ne||n).touchedFields,J)}),we=J=>{J&&Or(J).forEach(Ne=>dn(n.errors,Ne)),h.state.next({errors:J?n.errors:{}})},K=(J,Ne,De)=>{const We=(Ge(r,J,{_f:{}})._f||{}).ref,qe=Ge(n.errors,J)||{},{ref:Le,message:pt,type:Qt,...as}=qe;is(n.errors,J,{...as,...Ne,ref:We}),h.state.next({name:J,errors:n.errors,isValid:!1}),De&&De.shouldFocus&&We&&We.focus&&We.focus()},Ce=(J,Ne)=>Za(J)?h.state.subscribe({next:De=>J(V(void 0,Ne),De)}):V(J,Ne,!0),pe=J=>h.state.subscribe({next:Ne=>{qne(J.name,Ne.name,J.exact)&&zne(Ne,J.formState||u,gt,J.reRenderRoot)&&J.callback({values:{...i},...n,...Ne})}}).unsubscribe,F=J=>(l.mount=!0,m={...m,...J.formState},pe({...J,formState:m})),Q=(J,Ne={})=>{for(const De of J?Or(J):o.mount)o.mount.delete(De),o.array.delete(De),Ne.keepValue||(dn(r,De),dn(i,De)),!Ne.keepError&&dn(n.errors,De),!Ne.keepDirty&&dn(n.dirtyFields,De),!Ne.keepTouched&&dn(n.touchedFields,De),!Ne.keepIsValidating&&dn(n.validatingFields,De),!s.shouldUnregister&&!Ne.keepDefaultValue&&dn(a,De);h.state.next({values:$s(i)}),h.state.next({...n,...Ne.keepDirty?{isDirty:$()}:{}}),!Ne.keepIsValid&&f()},Z=({disabled:J,name:Ne})=>{(Hr(J)&&l.mount||J||o.disabled.has(Ne))&&(J?o.disabled.add(Ne):o.disabled.delete(Ne))},le=(J,Ne={})=>{let De=Ge(r,J);const We=Hr(Ne.disabled)||Hr(s.disabled);return is(r,J,{...De||{},_f:{...De&&De._f?De._f:{ref:{name:J}},name:J,mount:!0,...Ne}}),o.mount.add(J),De?Z({disabled:Hr(Ne.disabled)?Ne.disabled:s.disabled,name:J}):w(J,!0,Ne.value),{...We?{disabled:Ne.disabled||s.disabled}:{},...s.progressive?{required:!!Ne.required,min:zh(Ne.min),max:zh(Ne.max),minLength:zh(Ne.minLength),maxLength:zh(Ne.maxLength),pattern:zh(Ne.pattern)}:{},name:J,onChange:Y,onBlur:Y,ref:qe=>{if(qe){le(J,Ne),De=Ge(r,J);const Le=Vs(qe.value)&&qe.querySelectorAll&&qe.querySelectorAll("input,select,textarea")[0]||qe,pt=$ne(Le),Qt=De._f.refs||[];if(pt?Qt.find(as=>as===Le):Le===De._f.ref)return;is(r,J,{_f:{...De._f,...pt?{refs:[...Qt.filter(MN),Le,...Array.isArray(Ge(a,J))?[{}]:[]],ref:{type:Le.type,name:J}}:{ref:Le}}}),w(J,!1,void 0,Le)}else De=Ge(r,J,{}),De._f&&(De._f.mount=!1),(s.shouldUnregister||Ne.shouldUnregister)&&!(lB(o.array,J)&&l.action)&&o.unMount.add(J)}}},oe=()=>s.shouldFocusError&&Lu(r,O,o.mount),Ae=J=>{Hr(J)&&(h.state.next({disabled:J}),Lu(r,(Ne,De)=>{const We=Ge(r,De);We&&(Ne.disabled=We._f.disabled||J,Array.isArray(We._f.refs)&&We._f.refs.forEach(qe=>{qe.disabled=We._f.disabled||J}))},0,!1))},ge=(J,Ne)=>async De=>{let We;De&&(De.preventDefault&&De.preventDefault(),De.persist&&De.persist());let qe=$s(i);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:Le,values:pt}=await k();n.errors=Le,qe=$s(pt)}else await C(r);if(o.disabled.size)for(const Le of o.disabled)dn(qe,Le);if(dn(n.errors,"root"),dr(n.errors)){h.state.next({errors:{}});try{await J(qe,De)}catch(Le){We=Le}}else Ne&&await Ne({...n.errors},De),oe(),setTimeout(oe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dr(n.errors)&&!We,submitCount:n.submitCount+1,errors:n.errors}),We)throw We},xe=(J,Ne={})=>{Ge(r,J)&&(Vs(Ne.defaultValue)?H(J,$s(Ge(a,J))):(H(J,Ne.defaultValue),is(a,J,$s(Ne.defaultValue))),Ne.keepTouched||dn(n.touchedFields,J),Ne.keepDirty||(dn(n.dirtyFields,J),n.isDirty=Ne.defaultValue?$(J,$s(Ge(a,J))):$()),Ne.keepError||(dn(n.errors,J),u.isValid&&f()),h.state.next({...n}))},$e=(J,Ne={})=>{const De=J?$s(J):a,We=$s(De),qe=dr(J),Le=qe?a:We;if(Ne.keepDefaultValues||(a=De),!Ne.keepValues){if(Ne.keepDirtyValues){const pt=new Set([...o.mount,...Object.keys(Uh(a,i))]);for(const Qt of Array.from(pt))Ge(n.dirtyFields,Qt)?is(Le,Qt,Ge(i,Qt)):H(Qt,Ge(Le,Qt))}else{if(fP&&Vs(J))for(const pt of o.mount){const Qt=Ge(r,pt);if(Qt&&Qt._f){const as=Array.isArray(Qt._f.refs)?Qt._f.refs[0]:Qt._f.ref;if(oy(as)){const In=as.closest("form");if(In){In.reset();break}}}}if(Ne.keepFieldsRef)for(const pt of o.mount)H(pt,Ge(Le,pt));else r={}}i=s.shouldUnregister?Ne.keepDefaultValues?$s(a):{}:$s(Le),h.array.next({values:{...Le}}),h.state.next({values:{...Le}})}o={mount:Ne.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!Ne.keepIsValid||!!Ne.keepDirtyValues,l.watch=!!s.shouldUnregister,h.state.next({submitCount:Ne.keepSubmitCount?n.submitCount:0,isDirty:qe?!1:Ne.keepDirty?n.isDirty:!!(Ne.keepDefaultValues&&!mo(J,a)),isSubmitted:Ne.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:qe?{}:Ne.keepDirtyValues?Ne.keepDefaultValues&&i?Uh(a,i):n.dirtyFields:Ne.keepDefaultValues&&J?Uh(a,J):Ne.keepDirty?n.dirtyFields:{},touchedFields:Ne.keepTouched?n.touchedFields:{},errors:Ne.keepErrors?n.errors:{},isSubmitSuccessful:Ne.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ke=(J,Ne)=>$e(Za(J)?J(i):J,Ne),Ze=(J,Ne={})=>{const De=Ge(r,J),We=De&&De._f;if(We){const qe=We.refs?We.refs[0]:We.ref;qe.focus&&(qe.focus(),Ne.shouldSelect&&Za(qe.select)&&qe.select())}},gt=J=>{n={...n,...J}},be={control:{register:le,unregister:Q,getFieldState:re,handleSubmit:ge,setError:K,_subscribe:pe,_runSchema:k,_focusError:oe,_getWatch:V,_getDirty:$,_setValid:f,_setFieldArray:g,_setDisabledField:Z,_setErrors:v,_getFieldArray:I,_reset:$e,_resetDefaultValues:()=>Za(s.defaultValues)&&s.defaultValues().then(J=>{ke(J,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:Ae,_subjects:h,_proxyFormState:u,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state(J){l=J},get _defaultValues(){return a},get _names(){return o},set _names(J){o=J},get _formState(){return n},get _options(){return s},set _options(J){s={...s,...J}}},subscribe:F,trigger:R,register:le,handleSubmit:ge,watch:Ce,setValue:H,getValues:q,reset:ke,resetField:xe,clearErrors:we,unregister:Q,setError:K,setFocus:Ze,getFieldState:re};return{...be,formControl:be}}var Zl=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const n=(Math.random()*16+t)%16|0;return(s=="x"?n:n&3|8).toString(16)})},_N=(t,s,n={})=>n.shouldFocus||Vs(n.shouldFocus)?n.focusName||`${t}.${Vs(n.focusIndex)?s:n.focusIndex}.`:"",RN=(t,s)=>[...t,...Or(s)],IN=t=>Array.isArray(t)?t.map(()=>{}):void 0;function $N(t,s,n){return[...t.slice(0,s),...Or(n),...t.slice(s)]}var FN=(t,s,n)=>Array.isArray(t)?(Vs(t[n])&&(t[n]=void 0),t.splice(n,0,t.splice(s,1)[0]),t):[],LN=(t,s)=>[...Or(s),...Or(t)];function Yne(t,s){let n=0;const r=[...t];for(const a of s)r.splice(a-n,1),n++;return b0(r).length?r:[]}var BN=(t,s)=>Vs(s)?[]:Yne(t,Or(s).sort((n,r)=>n-r)),VN=(t,s,n)=>{[t[s],t[n]]=[t[n],t[s]]},sE=(t,s,n)=>(t[s]=n,t);function Qne(t){const s=$f(),{control:n=s.control,name:r,keyName:a="id",shouldUnregister:i,rules:l}=t,[o,c]=X.useState(n._getFieldArray(r)),d=X.useRef(n._getFieldArray(r).map(Zl)),u=X.useRef(o),m=X.useRef(r),h=X.useRef(!1);m.current=r,u.current=o,n._names.array.add(r),l&&n.register(r,l),N0(()=>n._subjects.array.subscribe({next:({values:S,name:k})=>{if(k===m.current||!k){const T=Ge(S,m.current);Array.isArray(T)&&(c(T),d.current=T.map(Zl))}}}).unsubscribe,[n]);const x=X.useCallback(S=>{h.current=!0,n._setFieldArray(r,S)},[n,r]),p=(S,k)=>{const T=Or($s(S)),C=RN(n._getFieldArray(r),T);n._names.focus=_N(r,C.length-1,k),d.current=RN(d.current,T.map(Zl)),x(C),c(C),n._setFieldArray(r,C,RN,{argA:IN(S)})},f=(S,k)=>{const T=Or($s(S)),C=LN(n._getFieldArray(r),T);n._names.focus=_N(r,0,k),d.current=LN(d.current,T.map(Zl)),x(C),c(C),n._setFieldArray(r,C,LN,{argA:IN(S)})},j=S=>{const k=BN(n._getFieldArray(r),S);d.current=BN(d.current,S),x(k),c(k),!Array.isArray(Ge(n._fields,r))&&is(n._fields,r,void 0),n._setFieldArray(r,k,BN,{argA:S})},g=(S,k,T)=>{const C=Or($s(k)),P=$N(n._getFieldArray(r),S,C);n._names.focus=_N(r,S,T),d.current=$N(d.current,S,C.map(Zl)),x(P),c(P),n._setFieldArray(r,P,$N,{argA:S,argB:IN(k)})},y=(S,k)=>{const T=n._getFieldArray(r);VN(T,S,k),VN(d.current,S,k),x(T),c(T),n._setFieldArray(r,T,VN,{argA:S,argB:k},!1)},v=(S,k)=>{const T=n._getFieldArray(r);FN(T,S,k),FN(d.current,S,k),x(T),c(T),n._setFieldArray(r,T,FN,{argA:S,argB:k},!1)},w=(S,k)=>{const T=$s(k),C=sE(n._getFieldArray(r),S,T);d.current=[...C].map((P,$)=>!P||$===S?Zl():d.current[$]),x(C),c([...C]),n._setFieldArray(r,C,sE,{argA:S,argB:T},!0,!1)},N=S=>{const k=Or($s(S));d.current=k.map(Zl),x([...k]),c([...k]),n._setFieldArray(r,[...k],T=>T,{},!0,!1)};return X.useEffect(()=>{if(n._state.action=!1,C2(r,n._names)&&n._subjects.state.next({...n._formState}),h.current&&(!pu(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!pu(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([r]).then(S=>{const k=Ge(S.errors,r),T=Ge(n._formState.errors,r);(T?!k&&T.type||k&&(T.type!==k.type||T.message!==k.message):k&&k.type)&&(k?is(n._formState.errors,r,k):dn(n._formState.errors,r),n._subjects.state.next({errors:n._formState.errors}))});else{const S=Ge(n._fields,r);S&&S._f&&!(pu(n._options.reValidateMode).isOnSubmit&&pu(n._options.mode).isOnSubmit)&&k2(S,n._names.disabled,n._formValues,n._options.criteriaMode===ja.all,n._options.shouldUseNativeValidation,!0).then(k=>!dr(k)&&n._subjects.state.next({errors:gB(n._formState.errors,k,r)}))}n._subjects.state.next({name:r,values:$s(n._formValues)}),n._names.focus&&Lu(n._fields,(S,k)=>{if(n._names.focus&&k.startsWith(n._names.focus)&&S.focus)return S.focus(),1}),n._names.focus="",n._setValid(),h.current=!1},[o,r,n]),X.useEffect(()=>(!Ge(n._formValues,r)&&n._setFieldArray(r),()=>{const S=(k,T)=>{const C=Ge(n._fields,k);C&&C._f&&(C._f.mount=T)};n._options.shouldUnregister||i?n.unregister(r):S(r,!1)}),[r,n,a,i]),{swap:X.useCallback(y,[x,r,n]),move:X.useCallback(v,[x,r,n]),prepend:X.useCallback(f,[x,r,n]),append:X.useCallback(p,[x,r,n]),remove:X.useCallback(j,[x,r,n]),insert:X.useCallback(g,[x,r,n]),update:X.useCallback(w,[x,r,n]),replace:X.useCallback(N,[x,r,n]),fields:X.useMemo(()=>o.map((S,k)=>({...S,[a]:d.current[k]||Zl()})),[o,a])}}function Zt(t={}){const s=X.useRef(void 0),n=X.useRef(void 0),[r,a]=X.useState({isDirty:!1,isValidating:!1,isLoading:Za(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Za(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!Za(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=Kne(t);s.current={...o,formState:r}}const i=s.current.control;return i._options=t,N0(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),X.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),X.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),X.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),X.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),X.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),X.useEffect(()=>{t.values&&!mo(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,a(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),X.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=oB(r,i),s.current}const nE=(t,s,n)=>{if(t&&"reportValidity"in t){const r=Ge(n,s);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},vB=(t,s)=>{for(const n in s.fields){const r=s.fields[n];r&&r.ref&&"reportValidity"in r.ref?nE(r.ref,n,t):r.refs&&r.refs.forEach(a=>nE(a,n,t))}},Xne=(t,s)=>{s.shouldUseNativeValidation&&vB(t,s);const n={};for(const r in t){const a=Ge(s.fields,r),i=Object.assign(t[r]||{},{ref:a&&a.ref});if(Zne(s.names||Object.keys(t),r)){const l=Object.assign({},Ge(n,r));is(l,"root",i),is(n,r,l)}else is(n,r,i)}return n},Zne=(t,s)=>t.some(n=>n.startsWith(s+"."));var Jne=function(t,s){for(var n={};t.length;){var r=t[0],a=r.code,i=r.message,l=r.path.join(".");if(!n[l])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[l]={message:o.message,type:o.code}}else n[l]={message:i,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(m){return t.push(m)})}),s){var c=n[l].types,d=c&&c[r.code];n[l]=dB(l,s,n,a,d?[].concat(d,r.message):r.message)}t.shift()}return n},xs=function(t,s,n){return n===void 0&&(n={}),function(r,a,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,s)).then(function(d){return i.shouldUseNativeValidation&&vB({},i),{errors:{},values:n.raw?r:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:Xne(Jne(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},ts;(function(t){t.assertEqual=a=>{};function s(a){}t.assertIs=s;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const i={};for(const l of a)i[l]=l;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),l={};for(const o of i)l[o]=a[o];return t.objectValues(l)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&i.push(l);return i},t.find=(a,i)=>{for(const l of a)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ts||(ts={}));var rE;(function(t){t.mergeShapes=(s,n)=>({...s,...n})})(rE||(rE={}));const ct=ts.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lo=t=>{switch(typeof t){case"undefined":return ct.undefined;case"string":return ct.string;case"number":return Number.isNaN(t)?ct.nan:ct.number;case"boolean":return ct.boolean;case"function":return ct.function;case"bigint":return ct.bigint;case"symbol":return ct.symbol;case"object":return Array.isArray(t)?ct.array:t===null?ct.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ct.promise:typeof Map<"u"&&t instanceof Map?ct.map:typeof Set<"u"&&t instanceof Set?ct.set:typeof Date<"u"&&t instanceof Date?ct.date:ct.object;default:return ct.unknown}},ze=ts.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ll extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=s}format(s){const n=s||function(i){return i.message},r={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let o=r,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(n(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return a(this),r}static assert(s){if(!(s instanceof Ll))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ts.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=n=>n.message){const n={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];n[i]=n[i]||[],n[i].push(s(a))}else r.push(s(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ll.create=t=>new Ll(t);const P2=(t,s)=>{let n;switch(t.code){case ze.invalid_type:t.received===ct.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ze.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ts.jsonStringifyReplacer)}`;break;case ze.unrecognized_keys:n=`Unrecognized key(s) in object: ${ts.joinValues(t.keys,", ")}`;break;case ze.invalid_union:n="Invalid input";break;case ze.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ts.joinValues(t.options)}`;break;case ze.invalid_enum_value:n=`Invalid enum value. Expected ${ts.joinValues(t.options)}, received '${t.received}'`;break;case ze.invalid_arguments:n="Invalid function arguments";break;case ze.invalid_return_type:n="Invalid function return type";break;case ze.invalid_date:n="Invalid date";break;case ze.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ts.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ze.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ze.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ze.custom:n="Invalid input";break;case ze.invalid_intersection_types:n="Intersection results could not be merged";break;case ze.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ze.not_finite:n="Number must be finite";break;default:n=s.defaultError,ts.assertNever(t)}return{message:n}};let ere=P2;function tre(){return ere}const sre=t=>{const{data:s,path:n,errorMaps:r,issueData:a}=t,i=[...n,...a.path||[]],l={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:s,defaultError:o}).message;return{...a,path:i,message:o}};function rt(t,s){const n=tre(),r=sre({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===P2?void 0:P2].filter(a=>!!a)});t.common.issues.push(r)}class aa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,n){const r=[];for(const a of n){if(a.status==="aborted")return Mt;a.status==="dirty"&&s.dirty(),r.push(a.value)}return{status:s.value,value:r}}static async mergeObjectAsync(s,n){const r=[];for(const a of n){const i=await a.key,l=await a.value;r.push({key:i,value:l})}return aa.mergeObjectSync(s,r)}static mergeObjectSync(s,n){const r={};for(const a of n){const{key:i,value:l}=a;if(i.status==="aborted"||l.status==="aborted")return Mt;i.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(r[i.value]=l.value)}return{status:s.value,value:r}}}const Mt=Object.freeze({status:"aborted"}),mx=t=>({status:"dirty",value:t}),Ra=t=>({status:"valid",value:t}),aE=t=>t.status==="aborted",iE=t=>t.status==="dirty",fm=t=>t.status==="valid",uy=t=>typeof Promise<"u"&&t instanceof Promise;var ht;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s==null?void 0:s.message})(ht||(ht={}));class Zo{constructor(s,n,r,a){this._cachedPath=[],this.parent=s,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const lE=(t,s)=>{if(fm(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ll(t.common.issues);return this._error=n,this._error}}};function zt(t){if(!t)return{};const{errorMap:s,invalid_type_error:n,required_error:r,description:a}=t;if(s&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:a}:{errorMap:(l,o)=>{const{message:c}=t;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??r??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??n??o.defaultError}},description:a}}class es{get description(){return this._def.description}_getType(s){return lo(s.data)}_getOrReturnCtx(s,n){return n||{common:s.parent.common,data:s.data,parsedType:lo(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new aa,ctx:{common:s.parent.common,data:s.data,parsedType:lo(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const n=this._parse(s);if(uy(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(s){const n=this._parse(s);return Promise.resolve(n)}parse(s,n){const r=this.safeParse(s,n);if(r.success)return r.data;throw r.error}safeParse(s,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:lo(s)},a=this._parseSync({data:s,path:r.path,parent:r});return lE(r,a)}"~validate"(s){var r,a;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:lo(s)};if(!this["~standard"].async)try{const i=this._parseSync({data:s,path:[],parent:n});return fm(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(a=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:n}).then(i=>fm(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(s,n){const r=await this.safeParseAsync(s,n);if(r.success)return r.data;throw r.error}async safeParseAsync(s,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:lo(s)},a=this._parse({data:s,path:r.path,parent:r}),i=await(uy(a)?a:Promise.resolve(a));return lE(r,i)}refine(s,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const l=s(a),o=()=>i.addIssue({code:ze.custom,...r(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(s,n){return this._refinement((r,a)=>s(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(s){return new ym({schema:this,typeName:_t.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Vo.create(this,this._def)}nullable(){return jm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Bi.create(this)}promise(){return py.create(this,this._def)}or(s){return hy.create([this,s],this._def)}and(s){return xy.create(this,s,this._def)}transform(s){return new ym({...zt(this._def),schema:this,typeName:_t.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const n=typeof s=="function"?s:()=>s;return new D2({...zt(this._def),innerType:this,defaultValue:n,typeName:_t.ZodDefault})}brand(){return new Cre({typeName:_t.ZodBranded,type:this,...zt(this._def)})}catch(s){const n=typeof s=="function"?s:()=>s;return new E2({...zt(this._def),innerType:this,catchValue:n,typeName:_t.ZodCatch})}describe(s){const n=this.constructor;return new n({...this._def,description:s})}pipe(s){return bP.create(this,s)}readonly(){return O2.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const nre=/^c[^\s-]{8,}$/i,rre=/^[0-9a-z]+$/,are=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ire=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,lre=/^[a-z0-9_-]{21}$/i,ore=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,cre=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dre=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ure="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let UN;const mre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xre=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,pre=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fre=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,gre=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vre=new RegExp(`^${yB}$`);function jB(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${n}`}function yre(t){return new RegExp(`^${jB(t)}$`)}function jre(t){let s=`${yB}T${jB(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${n.join("|")})`,new RegExp(`^${s}$`)}function bre(t,s){return!!((s==="v4"||!s)&&mre.test(t)||(s==="v6"||!s)&&xre.test(t))}function Nre(t,s){if(!ore.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||s&&a.alg!==s)}catch{return!1}}function wre(t,s){return!!((s==="v4"||!s)&&hre.test(t)||(s==="v6"||!s)&&pre.test(t))}class vl extends es{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==ct.string){const i=this._getOrReturnCtx(s);return rt(i,{code:ze.invalid_type,expected:ct.string,received:i.parsedType}),Mt}const r=new aa;let a;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")s.data.length>i.value&&(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const l=s.data.length>i.value,o=s.data.length<i.value;(l||o)&&(a=this._getOrReturnCtx(s,a),l?rt(a,{code:ze.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&rt(a,{code:ze.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")dre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"email",code:ze.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")UN||(UN=new RegExp(ure,"u")),UN.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"emoji",code:ze.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")ire.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"uuid",code:ze.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")lre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"nanoid",code:ze.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")nre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"cuid",code:ze.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")rre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"cuid2",code:ze.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")are.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"ulid",code:ze.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{a=this._getOrReturnCtx(s,a),rt(a,{validation:"url",code:ze.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"regex",code:ze.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?jre(i).test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?vre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?yre(i).test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?cre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"duration",code:ze.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?bre(s.data,i.version)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"ip",code:ze.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?Nre(s.data,i.alg)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"jwt",code:ze.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?wre(s.data,i.version)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"cidr",code:ze.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?fre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"base64",code:ze.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?gre.test(s.data)||(a=this._getOrReturnCtx(s,a),rt(a,{validation:"base64url",code:ze.invalid_string,message:i.message}),r.dirty()):ts.assertNever(i);return{status:r.value,value:s.data}}_regex(s,n,r){return this.refinement(a=>s.test(a),{validation:n,code:ze.invalid_string,...ht.errToObj(r)})}_addCheck(s){return new vl({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...ht.errToObj(s)})}url(s){return this._addCheck({kind:"url",...ht.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...ht.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...ht.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...ht.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...ht.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...ht.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...ht.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...ht.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...ht.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...ht.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...ht.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...ht.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,offset:(s==null?void 0:s.offset)??!1,local:(s==null?void 0:s.local)??!1,...ht.errToObj(s==null?void 0:s.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof(s==null?void 0:s.precision)>"u"?null:s==null?void 0:s.precision,...ht.errToObj(s==null?void 0:s.message)})}duration(s){return this._addCheck({kind:"duration",...ht.errToObj(s)})}regex(s,n){return this._addCheck({kind:"regex",regex:s,...ht.errToObj(n)})}includes(s,n){return this._addCheck({kind:"includes",value:s,position:n==null?void 0:n.position,...ht.errToObj(n==null?void 0:n.message)})}startsWith(s,n){return this._addCheck({kind:"startsWith",value:s,...ht.errToObj(n)})}endsWith(s,n){return this._addCheck({kind:"endsWith",value:s,...ht.errToObj(n)})}min(s,n){return this._addCheck({kind:"min",value:s,...ht.errToObj(n)})}max(s,n){return this._addCheck({kind:"max",value:s,...ht.errToObj(n)})}length(s,n){return this._addCheck({kind:"length",value:s,...ht.errToObj(n)})}nonempty(s){return this.min(1,ht.errToObj(s))}trim(){return new vl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxLength(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}}vl.create=t=>new vl({checks:[],typeName:_t.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...zt(t)});function Sre(t,s){const n=(t.toString().split(".")[1]||"").length,r=(s.toString().split(".")[1]||"").length,a=n>r?n:r,i=Number.parseInt(t.toFixed(a).replace(".","")),l=Number.parseInt(s.toFixed(a).replace(".",""));return i%l/10**a}class fd extends es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==ct.number){const i=this._getOrReturnCtx(s);return rt(i,{code:ze.invalid_type,expected:ct.number,received:i.parsedType}),Mt}let r;const a=new aa;for(const i of this._def.checks)i.kind==="int"?ts.isInteger(s.data)||(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?Sre(s.data,i.value)!==0&&(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.not_finite,message:i.message}),a.dirty()):ts.assertNever(i);return{status:a.value,value:s.data}}gte(s,n){return this.setLimit("min",s,!0,ht.toString(n))}gt(s,n){return this.setLimit("min",s,!1,ht.toString(n))}lte(s,n){return this.setLimit("max",s,!0,ht.toString(n))}lt(s,n){return this.setLimit("max",s,!1,ht.toString(n))}setLimit(s,n,r,a){return new fd({...this._def,checks:[...this._def.checks,{kind:s,value:n,inclusive:r,message:ht.toString(a)}]})}_addCheck(s){return new fd({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:ht.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ht.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ht.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ht.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ht.toString(s)})}multipleOf(s,n){return this._addCheck({kind:"multipleOf",value:s,message:ht.toString(n)})}finite(s){return this._addCheck({kind:"finite",message:ht.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ht.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ht.toString(s)})}get minValue(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxValue(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&ts.isInteger(s.value))}get isFinite(){let s=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(s===null||r.value<s)&&(s=r.value)}return Number.isFinite(n)&&Number.isFinite(s)}}fd.create=t=>new fd({checks:[],typeName:_t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...zt(t)});class gd extends es{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==ct.bigint)return this._getInvalidInput(s);let r;const a=new aa;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(s,r),rt(r,{code:ze.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ts.assertNever(i);return{status:a.value,value:s.data}}_getInvalidInput(s){const n=this._getOrReturnCtx(s);return rt(n,{code:ze.invalid_type,expected:ct.bigint,received:n.parsedType}),Mt}gte(s,n){return this.setLimit("min",s,!0,ht.toString(n))}gt(s,n){return this.setLimit("min",s,!1,ht.toString(n))}lte(s,n){return this.setLimit("max",s,!0,ht.toString(n))}lt(s,n){return this.setLimit("max",s,!1,ht.toString(n))}setLimit(s,n,r,a){return new gd({...this._def,checks:[...this._def.checks,{kind:s,value:n,inclusive:r,message:ht.toString(a)}]})}_addCheck(s){return new gd({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ht.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ht.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ht.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ht.toString(s)})}multipleOf(s,n){return this._addCheck({kind:"multipleOf",value:s,message:ht.toString(n)})}get minValue(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s}get maxValue(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s}}gd.create=t=>new gd({checks:[],typeName:_t.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...zt(t)});class my extends es{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==ct.boolean){const r=this._getOrReturnCtx(s);return rt(r,{code:ze.invalid_type,expected:ct.boolean,received:r.parsedType}),Mt}return Ra(s.data)}}my.create=t=>new my({typeName:_t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...zt(t)});class gm extends es{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==ct.date){const i=this._getOrReturnCtx(s);return rt(i,{code:ze.invalid_type,expected:ct.date,received:i.parsedType}),Mt}if(Number.isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return rt(i,{code:ze.invalid_date}),Mt}const r=new aa;let a;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(a=this._getOrReturnCtx(s,a),rt(a,{code:ze.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ts.assertNever(i);return{status:r.value,value:new Date(s.data.getTime())}}_addCheck(s){return new gm({...this._def,checks:[...this._def.checks,s]})}min(s,n){return this._addCheck({kind:"min",value:s.getTime(),message:ht.toString(n)})}max(s,n){return this._addCheck({kind:"max",value:s.getTime(),message:ht.toString(n)})}get minDate(){let s=null;for(const n of this._def.checks)n.kind==="min"&&(s===null||n.value>s)&&(s=n.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const n of this._def.checks)n.kind==="max"&&(s===null||n.value<s)&&(s=n.value);return s!=null?new Date(s):null}}gm.create=t=>new gm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_t.ZodDate,...zt(t)});class oE extends es{_parse(s){if(this._getType(s)!==ct.symbol){const r=this._getOrReturnCtx(s);return rt(r,{code:ze.invalid_type,expected:ct.symbol,received:r.parsedType}),Mt}return Ra(s.data)}}oE.create=t=>new oE({typeName:_t.ZodSymbol,...zt(t)});class cE extends es{_parse(s){if(this._getType(s)!==ct.undefined){const r=this._getOrReturnCtx(s);return rt(r,{code:ze.invalid_type,expected:ct.undefined,received:r.parsedType}),Mt}return Ra(s.data)}}cE.create=t=>new cE({typeName:_t.ZodUndefined,...zt(t)});class dE extends es{_parse(s){if(this._getType(s)!==ct.null){const r=this._getOrReturnCtx(s);return rt(r,{code:ze.invalid_type,expected:ct.null,received:r.parsedType}),Mt}return Ra(s.data)}}dE.create=t=>new dE({typeName:_t.ZodNull,...zt(t)});class uE extends es{constructor(){super(...arguments),this._any=!0}_parse(s){return Ra(s.data)}}uE.create=t=>new uE({typeName:_t.ZodAny,...zt(t)});class mE extends es{constructor(){super(...arguments),this._unknown=!0}_parse(s){return Ra(s.data)}}mE.create=t=>new mE({typeName:_t.ZodUnknown,...zt(t)});class Jo extends es{_parse(s){const n=this._getOrReturnCtx(s);return rt(n,{code:ze.invalid_type,expected:ct.never,received:n.parsedType}),Mt}}Jo.create=t=>new Jo({typeName:_t.ZodNever,...zt(t)});class hE extends es{_parse(s){if(this._getType(s)!==ct.undefined){const r=this._getOrReturnCtx(s);return rt(r,{code:ze.invalid_type,expected:ct.void,received:r.parsedType}),Mt}return Ra(s.data)}}hE.create=t=>new hE({typeName:_t.ZodVoid,...zt(t)});class Bi extends es{_parse(s){const{ctx:n,status:r}=this._processInputParams(s),a=this._def;if(n.parsedType!==ct.array)return rt(n,{code:ze.invalid_type,expected:ct.array,received:n.parsedType}),Mt;if(a.exactLength!==null){const l=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(l||o)&&(rt(n,{code:l?ze.too_big:ze.too_small,minimum:o?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(rt(n,{code:ze.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(rt(n,{code:ze.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,o)=>a.type._parseAsync(new Zo(n,l,n.path,o)))).then(l=>aa.mergeArray(r,l));const i=[...n.data].map((l,o)=>a.type._parseSync(new Zo(n,l,n.path,o)));return aa.mergeArray(r,i)}get element(){return this._def.type}min(s,n){return new Bi({...this._def,minLength:{value:s,message:ht.toString(n)}})}max(s,n){return new Bi({...this._def,maxLength:{value:s,message:ht.toString(n)}})}length(s,n){return new Bi({...this._def,exactLength:{value:s,message:ht.toString(n)}})}nonempty(s){return this.min(1,s)}}Bi.create=(t,s)=>new Bi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_t.ZodArray,...zt(s)});function su(t){if(t instanceof Nn){const s={};for(const n in t.shape){const r=t.shape[n];s[n]=Vo.create(su(r))}return new Nn({...t._def,shape:()=>s})}else return t instanceof Bi?new Bi({...t._def,type:su(t.element)}):t instanceof Vo?Vo.create(su(t.unwrap())):t instanceof jm?jm.create(su(t.unwrap())):t instanceof vd?vd.create(t.items.map(s=>su(s))):t}class Nn extends es{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),n=ts.objectKeys(s);return this._cached={shape:s,keys:n},this._cached}_parse(s){if(this._getType(s)!==ct.object){const d=this._getOrReturnCtx(s);return rt(d,{code:ze.invalid_type,expected:ct.object,received:d.parsedType}),Mt}const{status:r,ctx:a}=this._processInputParams(s),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Jo&&this._def.unknownKeys==="strip"))for(const d in a.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Zo(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Jo){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")o.length>0&&(rt(a,{code:ze.unrecognized_keys,keys:o}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Zo(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,h=await u.value;d.push({key:m,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>aa.mergeObjectSync(r,d)):aa.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(s){return ht.errToObj,new Nn({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(n,r)=>{var i,l;const a=((l=(i=this._def).errorMap)==null?void 0:l.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ht.errToObj(s).message??a}:{message:a}}}:{}})}strip(){return new Nn({...this._def,unknownKeys:"strip"})}passthrough(){return new Nn({...this._def,unknownKeys:"passthrough"})}extend(s){return new Nn({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new Nn({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:_t.ZodObject})}setKey(s,n){return this.augment({[s]:n})}catchall(s){return new Nn({...this._def,catchall:s})}pick(s){const n={};for(const r of ts.objectKeys(s))s[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Nn({...this._def,shape:()=>n})}omit(s){const n={};for(const r of ts.objectKeys(this.shape))s[r]||(n[r]=this.shape[r]);return new Nn({...this._def,shape:()=>n})}deepPartial(){return su(this)}partial(s){const n={};for(const r of ts.objectKeys(this.shape)){const a=this.shape[r];s&&!s[r]?n[r]=a:n[r]=a.optional()}return new Nn({...this._def,shape:()=>n})}required(s){const n={};for(const r of ts.objectKeys(this.shape))if(s&&!s[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Vo;)i=i._def.innerType;n[r]=i}return new Nn({...this._def,shape:()=>n})}keyof(){return bB(ts.objectKeys(this.shape))}}Nn.create=(t,s)=>new Nn({shape:()=>t,unknownKeys:"strip",catchall:Jo.create(),typeName:_t.ZodObject,...zt(s)});Nn.strictCreate=(t,s)=>new Nn({shape:()=>t,unknownKeys:"strict",catchall:Jo.create(),typeName:_t.ZodObject,...zt(s)});Nn.lazycreate=(t,s)=>new Nn({shape:t,unknownKeys:"strip",catchall:Jo.create(),typeName:_t.ZodObject,...zt(s)});class hy extends es{_parse(s){const{ctx:n}=this._processInputParams(s),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new Ll(o.ctx.common.issues));return rt(n,{code:ze.invalid_union,unionErrors:l}),Mt}if(n.common.async)return Promise.all(r.map(async i=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(a);{let i;const l=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new Ll(c));return rt(n,{code:ze.invalid_union,unionErrors:o}),Mt}}get options(){return this._def.options}}hy.create=(t,s)=>new hy({options:t,typeName:_t.ZodUnion,...zt(s)});function A2(t,s){const n=lo(t),r=lo(s);if(t===s)return{valid:!0,data:t};if(n===ct.object&&r===ct.object){const a=ts.objectKeys(s),i=ts.objectKeys(t).filter(o=>a.indexOf(o)!==-1),l={...t,...s};for(const o of i){const c=A2(t[o],s[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(n===ct.array&&r===ct.array){if(t.length!==s.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const l=t[i],o=s[i],c=A2(l,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return n===ct.date&&r===ct.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class xy extends es{_parse(s){const{status:n,ctx:r}=this._processInputParams(s),a=(i,l)=>{if(aE(i)||aE(l))return Mt;const o=A2(i.value,l.value);return o.valid?((iE(i)||iE(l))&&n.dirty(),{status:n.value,value:o.data}):(rt(r,{code:ze.invalid_intersection_types}),Mt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,l])=>a(i,l)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}xy.create=(t,s,n)=>new xy({left:t,right:s,typeName:_t.ZodIntersection,...zt(n)});class vd extends es{_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.parsedType!==ct.array)return rt(r,{code:ze.invalid_type,expected:ct.array,received:r.parsedType}),Mt;if(r.data.length<this._def.items.length)return rt(r,{code:ze.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Mt;!this._def.rest&&r.data.length>this._def.items.length&&(rt(r,{code:ze.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Zo(r,l,r.path,o)):null}).filter(l=>!!l);return r.common.async?Promise.all(i).then(l=>aa.mergeArray(n,l)):aa.mergeArray(n,i)}get items(){return this._def.items}rest(s){return new vd({...this._def,rest:s})}}vd.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new vd({items:t,typeName:_t.ZodTuple,rest:null,...zt(s)})};class xE extends es{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.parsedType!==ct.map)return rt(r,{code:ze.invalid_type,expected:ct.map,received:r.parsedType}),Mt;const a=this._def.keyType,i=this._def.valueType,l=[...r.data.entries()].map(([o,c],d)=>({key:a._parse(new Zo(r,o,r.path,[d,"key"])),value:i._parse(new Zo(r,c,r.path,[d,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Mt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Mt;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(d.value,u.value)}return{status:n.value,value:o}}}}xE.create=(t,s,n)=>new xE({valueType:s,keyType:t,typeName:_t.ZodMap,...zt(n)});class yp extends es{_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.parsedType!==ct.set)return rt(r,{code:ze.invalid_type,expected:ct.set,received:r.parsedType}),Mt;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(rt(r,{code:ze.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(rt(r,{code:ze.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return Mt;u.status==="dirty"&&n.dirty(),d.add(u.value)}return{status:n.value,value:d}}const o=[...r.data.values()].map((c,d)=>i._parse(new Zo(r,c,r.path,d)));return r.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(s,n){return new yp({...this._def,minSize:{value:s,message:ht.toString(n)}})}max(s,n){return new yp({...this._def,maxSize:{value:s,message:ht.toString(n)}})}size(s,n){return this.min(s,n).max(s,n)}nonempty(s){return this.min(1,s)}}yp.create=(t,s)=>new yp({valueType:t,minSize:null,maxSize:null,typeName:_t.ZodSet,...zt(s)});class pE extends es{get schema(){return this._def.getter()}_parse(s){const{ctx:n}=this._processInputParams(s);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}pE.create=(t,s)=>new pE({getter:t,typeName:_t.ZodLazy,...zt(s)});class T2 extends es{_parse(s){if(s.data!==this._def.value){const n=this._getOrReturnCtx(s);return rt(n,{received:n.data,code:ze.invalid_literal,expected:this._def.value}),Mt}return{status:"valid",value:s.data}}get value(){return this._def.value}}T2.create=(t,s)=>new T2({value:t,typeName:_t.ZodLiteral,...zt(s)});function bB(t,s){return new vm({values:t,typeName:_t.ZodEnum,...zt(s)})}class vm extends es{_parse(s){if(typeof s.data!="string"){const n=this._getOrReturnCtx(s),r=this._def.values;return rt(n,{expected:ts.joinValues(r),received:n.parsedType,code:ze.invalid_type}),Mt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const n=this._getOrReturnCtx(s),r=this._def.values;return rt(n,{received:n.data,code:ze.invalid_enum_value,options:r}),Mt}return Ra(s.data)}get options(){return this._def.values}get enum(){const s={};for(const n of this._def.values)s[n]=n;return s}get Values(){const s={};for(const n of this._def.values)s[n]=n;return s}get Enum(){const s={};for(const n of this._def.values)s[n]=n;return s}extract(s,n=this._def){return vm.create(s,{...this._def,...n})}exclude(s,n=this._def){return vm.create(this.options.filter(r=>!s.includes(r)),{...this._def,...n})}}vm.create=bB;class fE extends es{_parse(s){const n=ts.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(s);if(r.parsedType!==ct.string&&r.parsedType!==ct.number){const a=ts.objectValues(n);return rt(r,{expected:ts.joinValues(a),received:r.parsedType,code:ze.invalid_type}),Mt}if(this._cache||(this._cache=new Set(ts.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const a=ts.objectValues(n);return rt(r,{received:r.data,code:ze.invalid_enum_value,options:a}),Mt}return Ra(s.data)}get enum(){return this._def.values}}fE.create=(t,s)=>new fE({values:t,typeName:_t.ZodNativeEnum,...zt(s)});class py extends es{unwrap(){return this._def.type}_parse(s){const{ctx:n}=this._processInputParams(s);if(n.parsedType!==ct.promise&&n.common.async===!1)return rt(n,{code:ze.invalid_type,expected:ct.promise,received:n.parsedType}),Mt;const r=n.parsedType===ct.promise?n.data:Promise.resolve(n.data);return Ra(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}py.create=(t,s)=>new py({type:t,typeName:_t.ZodPromise,...zt(s)});class ym extends es{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:n,ctx:r}=this._processInputParams(s),a=this._def.effect||null,i={addIssue:l=>{rt(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const l=a.transform(r.data,i);if(r.common.async)return Promise.resolve(l).then(async o=>{if(n.value==="aborted")return Mt;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?Mt:c.status==="dirty"||n.value==="dirty"?mx(c.value):c});{if(n.value==="aborted")return Mt;const o=this._def.schema._parseSync({data:l,path:r.path,parent:r});return o.status==="aborted"?Mt:o.status==="dirty"||n.value==="dirty"?mx(o.value):o}}if(a.type==="refinement"){const l=o=>{const c=a.refinement(o,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Mt:(o.status==="dirty"&&n.dirty(),l(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Mt:(o.status==="dirty"&&n.dirty(),l(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!fm(l))return Mt;const o=a.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>fm(l)?Promise.resolve(a.transform(l.value,i)).then(o=>({status:n.value,value:o})):Mt);ts.assertNever(a)}}ym.create=(t,s,n)=>new ym({schema:t,typeName:_t.ZodEffects,effect:s,...zt(n)});ym.createWithPreprocess=(t,s,n)=>new ym({schema:s,effect:{type:"preprocess",transform:t},typeName:_t.ZodEffects,...zt(n)});class Vo extends es{_parse(s){return this._getType(s)===ct.undefined?Ra(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Vo.create=(t,s)=>new Vo({innerType:t,typeName:_t.ZodOptional,...zt(s)});class jm extends es{_parse(s){return this._getType(s)===ct.null?Ra(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}jm.create=(t,s)=>new jm({innerType:t,typeName:_t.ZodNullable,...zt(s)});class D2 extends es{_parse(s){const{ctx:n}=this._processInputParams(s);let r=n.data;return n.parsedType===ct.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}D2.create=(t,s)=>new D2({innerType:t,typeName:_t.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...zt(s)});class E2 extends es{_parse(s){const{ctx:n}=this._processInputParams(s),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return uy(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ll(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ll(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}E2.create=(t,s)=>new E2({innerType:t,typeName:_t.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...zt(s)});class gE extends es{_parse(s){if(this._getType(s)!==ct.nan){const r=this._getOrReturnCtx(s);return rt(r,{code:ze.invalid_type,expected:ct.nan,received:r.parsedType}),Mt}return{status:"valid",value:s.data}}}gE.create=t=>new gE({typeName:_t.ZodNaN,...zt(t)});class Cre extends es{_parse(s){const{ctx:n}=this._processInputParams(s),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class bP extends es{_parse(s){const{status:n,ctx:r}=this._processInputParams(s);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Mt:i.status==="dirty"?(n.dirty(),mx(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Mt:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(s,n){return new bP({in:s,out:n,typeName:_t.ZodPipeline})}}class O2 extends es{_parse(s){const n=this._def.innerType._parse(s),r=a=>(fm(a)&&(a.value=Object.freeze(a.value)),a);return uy(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}O2.create=(t,s)=>new O2({innerType:t,typeName:_t.ZodReadonly,...zt(s)});var _t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_t||(_t={}));const Pe=vl.create,ms=fd.create;gd.create;const Ur=my.create,Ao=gm.create;Jo.create;const kre=Bi.create,ds=Nn.create;hy.create;xy.create;vd.create;const hx=T2.create,zs=vm.create;py.create;Vo.create;jm.create;const xa={string:t=>vl.create({...t,coerce:!0}),number:t=>fd.create({...t,coerce:!0}),boolean:t=>my.create({...t,coerce:!0}),bigint:t=>gd.create({...t,coerce:!0}),date:t=>gm.create({...t,coerce:!0})};var Pre="Label",NB=b.forwardRef((t,s)=>e.jsx(st.label,{...t,ref:s,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));NB.displayName=Pre;var wB=NB;const Are=jf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),W=b.forwardRef(({className:t,...s},n)=>e.jsx(wB,{ref:n,className:Ue(Are(),t),...s}));W.displayName=wB.displayName;const os=One,SB=b.createContext({}),me=({...t})=>e.jsx(SB.Provider,{value:{name:t.name},children:e.jsx(Ine,{...t})}),w0=()=>{const t=b.useContext(SB),s=b.useContext(CB),{getFieldState:n,formState:r}=$f(),a=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},CB=b.createContext({}),de=b.forwardRef(({className:t,...s},n)=>{const r=b.useId();return e.jsx(CB.Provider,{value:{id:r},children:e.jsx("div",{ref:n,className:Ue("space-y-2",t),...s})})});de.displayName="FormItem";const he=b.forwardRef(({className:t,...s},n)=>{const{error:r,formItemId:a}=w0();return e.jsx(W,{ref:n,className:Ue(r&&"text-destructive",t),htmlFor:a,...s})});he.displayName="FormLabel";const ue=b.forwardRef(({...t},s)=>{const{error:n,formItemId:r,formDescriptionId:a,formMessageId:i}=w0();return e.jsx(p$,{ref:s,id:r,"aria-describedby":n?`${a} ${i}`:`${a}`,"aria-invalid":!!n,...t})});ue.displayName="FormControl";const ls=b.forwardRef(({className:t,...s},n)=>{const{formDescriptionId:r}=w0();return e.jsx("p",{ref:n,id:r,className:Ue("text-sm text-muted-foreground",t),...s})});ls.displayName="FormDescription";const fe=b.forwardRef(({className:t,children:s,...n},r)=>{const{error:a,formMessageId:i}=w0(),l=a?String((a==null?void 0:a.message)??""):s;return l?e.jsx("p",{ref:r,id:i,className:Ue("text-sm font-medium text-destructive",t),...n,children:l}):null});fe.displayName="FormMessage";const mt=b.forwardRef(({className:t,...s},n)=>e.jsx("textarea",{className:Ue("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));mt.displayName="Textarea";var S0="Checkbox",[Tre]=Pn(S0),[Dre,NP]=Tre(S0);function Ere(t){const{__scopeCheckbox:s,checked:n,children:r,defaultChecked:a,disabled:i,form:l,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=t,[h,x]=ra({prop:n,defaultProp:a??!1,onChange:c,caller:S0}),[p,f]=b.useState(null),[j,g]=b.useState(null),y=b.useRef(!1),v=p?!!l||!!p.closest("form"):!0,w={checked:h,disabled:i,setChecked:x,control:p,setControl:f,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:Uo(a)?!1:a,isFormControl:v,bubbleInput:j,setBubbleInput:g};return e.jsx(Dre,{scope:s,...w,children:Ore(m)?m(w):r})}var kB="CheckboxTrigger",PB=b.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:n,...r},a)=>{const{control:i,value:l,disabled:o,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:p}=NP(kB,t),f=kt(a,u),j=b.useRef(c);return b.useEffect(()=>{const g=i==null?void 0:i.form;if(g){const y=()=>m(j.current);return g.addEventListener("reset",y),()=>g.removeEventListener("reset",y)}},[i,m]),e.jsx(st.button,{type:"button",role:"checkbox","aria-checked":Uo(c)?"mixed":c,"aria-required":d,"data-state":OB(c),"data-disabled":o?"":void 0,disabled:o,value:l,...r,ref:f,onKeyDown:Be(s,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:Be(n,g=>{m(y=>Uo(y)?!0:!y),p&&x&&(h.current=g.isPropagationStopped(),h.current||g.stopPropagation())})})});PB.displayName=kB;var wP=b.forwardRef((t,s)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=t;return e.jsx(Ere,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:o,required:l,onCheckedChange:d,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(PB,{...m,ref:s,__scopeCheckbox:n}),h&&e.jsx(EB,{__scopeCheckbox:n})]})})});wP.displayName=S0;var AB="CheckboxIndicator",TB=b.forwardRef((t,s)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,i=NP(AB,n);return e.jsx(An,{present:r||Uo(i.checked)||i.checked===!0,children:e.jsx(st.span,{"data-state":OB(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});TB.displayName=AB;var DB="CheckboxBubbleInput",EB=b.forwardRef(({__scopeCheckbox:t,...s},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:o,disabled:c,name:d,value:u,form:m,bubbleInput:h,setBubbleInput:x}=NP(DB,t),p=kt(n,x),f=d0(i),j=s0(r);b.useEffect(()=>{const y=h;if(!y)return;const v=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(v,"checked").set,S=!a.current;if(f!==i&&N){const k=new Event("click",{bubbles:S});y.indeterminate=Uo(i),N.call(y,Uo(i)?!1:i),y.dispatchEvent(k)}},[h,f,i,a]);const g=b.useRef(Uo(i)?!1:i);return e.jsx(st.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??g.current,required:o,disabled:c,name:d,value:u,form:m,...s,tabIndex:-1,ref:p,style:{...s.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});EB.displayName=DB;function Ore(t){return typeof t=="function"}function Uo(t){return t==="indeterminate"}function OB(t){return Uo(t)?"indeterminate":t?"checked":"unchecked"}const _c=b.forwardRef(({className:t,...s},n)=>e.jsx(wP,{ref:n,className:Ue("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(TB,{className:Ue("flex items-center justify-center text-current"),children:e.jsx(Qj,{className:"h-4 w-4"})})}));_c.displayName=wP.displayName;function Tt(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function $r(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function mn(t,s){const n=Tt(t);return isNaN(s)?$r(t,NaN):(s&&n.setDate(n.getDate()+s),n)}function Oa(t,s){const n=Tt(t);if(isNaN(s))return $r(t,NaN);if(!s)return n;const r=n.getDate(),a=$r(t,n.getTime());a.setMonth(n.getMonth()+s+1,0);const i=a.getDate();return r>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const SP=6048e5,Mre=864e5,MB=6e4,_B=36e5,Ag=43200,vE=1440;let _re={};function ph(){return _re}function Yi(t,s){var o,c,d,u;const n=ph(),r=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Tt(t),i=a.getDay(),l=(i<r?7:0)+i-r;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function yd(t){return Yi(t,{weekStartsOn:1})}function RB(t){const s=Tt(t),n=s.getFullYear(),r=$r(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=yd(r),i=$r(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=yd(i);return s.getTime()>=a.getTime()?n+1:s.getTime()>=l.getTime()?n:n-1}function Dr(t){const s=Tt(t);return s.setHours(0,0,0,0),s}function bm(t){const s=Tt(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function ei(t,s){const n=Dr(t),r=Dr(s),a=+n-bm(n),i=+r-bm(r);return Math.round((a-i)/Mre)}function Rre(t){const s=RB(t),n=$r(t,0);return n.setFullYear(s,0,4),n.setHours(0,0,0,0),yd(n)}function M2(t,s){const n=s*7;return mn(t,n)}function Ire(t,s){return Oa(t,s*12)}function $re(t){let s;return t.forEach(function(n){const r=Tt(n);(s===void 0||s<r||isNaN(Number(r)))&&(s=r)}),s||new Date(NaN)}function Fre(t){let s;return t.forEach(n=>{const r=Tt(n);(!s||s>r||isNaN(+r))&&(s=r)}),s||new Date(NaN)}function yv(t,s){const n=Tt(t),r=Tt(s),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function Lre(t){return $r(t,Date.now())}function nr(t,s){const n=Dr(t),r=Dr(s);return+n==+r}function CP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Bre(t){if(!CP(t)&&typeof t!="number")return!1;const s=Tt(t);return!isNaN(Number(s))}function Nm(t,s){const n=Tt(t),r=Tt(s),a=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return a*12+i}function Vre(t,s,n){const r=Yi(t,n),a=Yi(s,n),i=+r-bm(r),l=+a-bm(a);return Math.round((i-l)/SP)}function _2(t,s){const n=Tt(t),r=Tt(s),a=yE(n,r),i=Math.abs(ei(n,r));n.setDate(n.getDate()-a*i);const l=+(yE(n,r)===-a),o=a*(i-l);return o===0?0:o}function yE(t,s){const n=t.getFullYear()-s.getFullYear()||t.getMonth()-s.getMonth()||t.getDate()-s.getDate()||t.getHours()-s.getHours()||t.getMinutes()-s.getMinutes()||t.getSeconds()-s.getSeconds()||t.getMilliseconds()-s.getMilliseconds();return n<0?-1:n>0?1:n}function Ure(t){return s=>{const r=(t?Math[t]:Math.trunc)(s);return r===0?0:r}}function zre(t,s){return+Tt(t)-+Tt(s)}function qre(t){const s=Tt(t);return s.setHours(23,59,59,999),s}function zo(t){const s=Tt(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(23,59,59,999),s}function Hre(t){const s=Tt(t);return+qre(s)==+zo(s)}function Gre(t,s){const n=Tt(t),r=Tt(s),a=yv(n,r),i=Math.abs(Nm(n,r));let l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*i);let o=yv(n,r)===-a;Hre(Tt(t))&&i===1&&yv(t,r)===1&&(o=!1),l=a*(i-Number(o))}return l===0?0:l}function Wre(t,s,n){const r=zre(t,s)/1e3;return Ure(n==null?void 0:n.roundingMethod)(r)}function Cn(t){const s=Tt(t);return s.setDate(1),s.setHours(0,0,0,0),s}function IB(t){const s=Tt(t),n=$r(t,0);return n.setFullYear(s.getFullYear(),0,1),n.setHours(0,0,0,0),n}function kP(t,s){var o,c,d,u;const n=ph(),r=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Tt(t),i=a.getDay(),l=(i<r?-7:0)+6-(i-r);return a.setDate(a.getDate()+l),a.setHours(23,59,59,999),a}function $B(t){return kP(t,{weekStartsOn:1})}const Kre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Yre=(t,s,n)=>{let r;const a=Kre[t];return typeof a=="string"?r=a:s===1?r=a.one:r=a.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function zN(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Qre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Xre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jre={date:zN({formats:Qre,defaultWidth:"full"}),time:zN({formats:Xre,defaultWidth:"full"}),dateTime:zN({formats:Zre,defaultWidth:"full"})},eae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tae=(t,s,n,r)=>eae[t];function qh(t){return(s,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):l;a=t.formattingValues[o]||t.formattingValues[l]}else{const l=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;a=t.values[o]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return a[i]}}const sae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},iae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oae=(t,s)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},cae={ordinalNumber:oae,era:qh({values:sae,defaultWidth:"wide"}),quarter:qh({values:nae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:qh({values:rae,defaultWidth:"wide"}),day:qh({values:aae,defaultWidth:"wide"}),dayPeriod:qh({values:iae,defaultWidth:"wide",formattingValues:lae,defaultFormattingWidth:"wide"})};function Hh(t){return(s,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=s.match(a);if(!i)return null;const l=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?uae(o,m=>m.test(l)):dae(o,m=>m.test(l));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=s.slice(l.length);return{value:d,rest:u}}}function dae(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function uae(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function mae(t){return(s,n={})=>{const r=s.match(t.matchPattern);if(!r)return null;const a=r[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const o=s.slice(a.length);return{value:l,rest:o}}}const hae=/^(\d+)(th|st|nd|rd)?/i,xae=/\d+/i,pae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fae={any:[/^b/i,/^(a|c)/i]},gae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vae={any:[/1/i,/2/i,/3/i,/4/i]},yae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Sae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cae={ordinalNumber:mae({matchPattern:hae,parsePattern:xae,valueCallback:t=>parseInt(t,10)}),era:Hh({matchPatterns:pae,defaultMatchWidth:"wide",parsePatterns:fae,defaultParseWidth:"any"}),quarter:Hh({matchPatterns:gae,defaultMatchWidth:"wide",parsePatterns:vae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Hh({matchPatterns:yae,defaultMatchWidth:"wide",parsePatterns:jae,defaultParseWidth:"any"}),day:Hh({matchPatterns:bae,defaultMatchWidth:"wide",parsePatterns:Nae,defaultParseWidth:"any"}),dayPeriod:Hh({matchPatterns:wae,defaultMatchWidth:"any",parsePatterns:Sae,defaultParseWidth:"any"})},PP={code:"en-US",formatDistance:Yre,formatLong:Jre,formatRelative:tae,localize:cae,match:Cae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kae(t){const s=Tt(t);return ei(s,IB(s))+1}function FB(t){const s=Tt(t),n=+yd(s)-+Rre(s);return Math.round(n/SP)+1}function LB(t,s){var u,m,h,x;const n=Tt(t),r=n.getFullYear(),a=ph(),i=(s==null?void 0:s.firstWeekContainsDate)??((m=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(h=a.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,l=$r(t,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const o=Yi(l,s),c=$r(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const d=Yi(c,s);return n.getTime()>=o.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Pae(t,s){var o,c,d,u;const n=ph(),r=(s==null?void 0:s.firstWeekContainsDate)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=LB(t,s),i=$r(t,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Yi(i,s)}function BB(t,s){const n=Tt(t),r=+Yi(n,s)-+Pae(n,s);return Math.round(r/SP)+1}function gs(t,s){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return n+r}const Jl={y(t,s){const n=t.getFullYear(),r=n>0?n:1-n;return gs(s==="yy"?r%100:r,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):gs(n+1,2)},d(t,s){return gs(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return gs(t.getHours()%12||12,s.length)},H(t,s){return gs(t.getHours(),s.length)},m(t,s){return gs(t.getMinutes(),s.length)},s(t,s){return gs(t.getSeconds(),s.length)},S(t,s){const n=s.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return gs(a,s.length)}},Gd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jE={G:function(t,s,n){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Jl.y(t,s)},Y:function(t,s,n,r){const a=LB(t,r),i=a>0?a:1-a;if(s==="YY"){const l=i%100;return gs(l,2)}return s==="Yo"?n.ordinalNumber(i,{unit:"year"}):gs(i,s.length)},R:function(t,s){const n=RB(t);return gs(n,s.length)},u:function(t,s){const n=t.getFullYear();return gs(n,s.length)},Q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return gs(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,n){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return gs(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,n){const r=t.getMonth();switch(s){case"M":case"MM":return Jl.M(t,s);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,n){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return gs(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,n,r){const a=BB(t,r);return s==="wo"?n.ordinalNumber(a,{unit:"week"}):gs(a,s.length)},I:function(t,s,n){const r=FB(t);return s==="Io"?n.ordinalNumber(r,{unit:"week"}):gs(r,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Jl.d(t,s)},D:function(t,s,n){const r=kae(t);return s==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gs(r,s.length)},E:function(t,s,n){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return gs(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return gs(i,s.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,n){const r=t.getDay(),a=r===0?7:r;switch(s){case"i":return String(a);case"ii":return gs(a,s.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,n){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,n){const r=t.getHours();let a;switch(r===12?a=Gd.noon:r===0?a=Gd.midnight:a=r/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,n){const r=t.getHours();let a;switch(r>=17?a=Gd.evening:r>=12?a=Gd.afternoon:r>=4?a=Gd.morning:a=Gd.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Jl.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Jl.H(t,s)},K:function(t,s,n){const r=t.getHours()%12;return s==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gs(r,s.length)},k:function(t,s,n){let r=t.getHours();return r===0&&(r=24),s==="ko"?n.ordinalNumber(r,{unit:"hour"}):gs(r,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Jl.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Jl.s(t,s)},S:function(t,s){return Jl.S(t,s)},X:function(t,s,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return NE(r);case"XXXX":case"XX":return wc(r);case"XXXXX":case"XXX":default:return wc(r,":")}},x:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"x":return NE(r);case"xxxx":case"xx":return wc(r);case"xxxxx":case"xxx":default:return wc(r,":")}},O:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+bE(r,":");case"OOOO":default:return"GMT"+wc(r,":")}},z:function(t,s,n){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+bE(r,":");case"zzzz":default:return"GMT"+wc(r,":")}},t:function(t,s,n){const r=Math.trunc(t.getTime()/1e3);return gs(r,s.length)},T:function(t,s,n){const r=t.getTime();return gs(r,s.length)}};function bE(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+s+gs(i,2)}function NE(t,s){return t%60===0?(t>0?"-":"+")+gs(Math.abs(t)/60,2):wc(t,s)}function wc(t,s=""){const n=t>0?"-":"+",r=Math.abs(t),a=gs(Math.trunc(r/60),2),i=gs(r%60,2);return n+a+s+i}const wE=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},VB=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},Aae=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return wE(t,s);let i;switch(r){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",wE(r,s)).replace("{{time}}",VB(a,s))},Tae={p:VB,P:Aae},Dae=/^D+$/,Eae=/^Y+$/,Oae=["D","DD","YY","YYYY"];function Mae(t){return Dae.test(t)}function _ae(t){return Eae.test(t)}function Rae(t,s,n){const r=Iae(t,s,n);if(console.warn(r),Oae.includes(t))throw new RangeError(r)}function Iae(t,s,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $ae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lae=/^'([^]*?)'?$/,Bae=/''/g,Vae=/[a-zA-Z]/;function ut(t,s,n){var u,m,h,x,p,f,j,g;const r=ph(),a=(n==null?void 0:n.locale)??r.locale??PP,i=(n==null?void 0:n.firstWeekContainsDate)??((m=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((x=(h=r.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((f=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((g=(j=r.locale)==null?void 0:j.options)==null?void 0:g.weekStartsOn)??0,o=Tt(t);if(!Bre(o))throw new RangeError("Invalid time value");let c=s.match(Fae).map(y=>{const v=y[0];if(v==="p"||v==="P"){const w=Tae[v];return w(y,a.formatLong)}return y}).join("").match($ae).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:Uae(y)};if(jE[v])return{isToken:!0,value:y};if(v.match(Vae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const v=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&_ae(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Mae(v))&&Rae(v,s,String(t));const w=jE[v[0]];return w(o,v,a.localize,d)}).join("")}function Uae(t){const s=t.match(Lae);return s?s[1].replace(Bae,"'"):t}function zae(t,s,n){const r=ph(),a=(n==null?void 0:n.locale)??r.locale??PP,i=2520,l=yv(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:l});let c,d;l>0?(c=Tt(s),d=Tt(t)):(c=Tt(t),d=Tt(s));const u=Wre(d,c),m=(bm(d)-bm(c))/1e3,h=Math.round((u-m)/60);let x;if(h<2)return n!=null&&n.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,o):u<10?a.formatDistance("lessThanXSeconds",10,o):u<20?a.formatDistance("lessThanXSeconds",20,o):u<40?a.formatDistance("halfAMinute",0,o):u<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):h===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",h,o);if(h<45)return a.formatDistance("xMinutes",h,o);if(h<90)return a.formatDistance("aboutXHours",1,o);if(h<vE){const p=Math.round(h/60);return a.formatDistance("aboutXHours",p,o)}else{if(h<i)return a.formatDistance("xDays",1,o);if(h<Ag){const p=Math.round(h/vE);return a.formatDistance("xDays",p,o)}else if(h<Ag*2)return x=Math.round(h/Ag),a.formatDistance("aboutXMonths",x,o)}if(x=Gre(d,c),x<12){const p=Math.round(h/Ag);return a.formatDistance("xMonths",p,o)}else{const p=x%12,f=Math.trunc(x/12);return p<3?a.formatDistance("aboutXYears",f,o):p<9?a.formatDistance("overXYears",f,o):a.formatDistance("almostXYears",f+1,o)}}function jp(t,s){return zae(t,Lre(t),s)}function qae(t){const s=Tt(t),n=s.getFullYear(),r=s.getMonth(),a=$r(t,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function Hae(t){return Math.trunc(+Tt(t)/1e3)}function Gae(t){const s=Tt(t),n=s.getMonth();return s.setFullYear(s.getFullYear(),n+1,0),s.setHours(0,0,0,0),s}function Wae(t,s){return Vre(Gae(t),Cn(t),s)+1}function fy(t,s){const n=Tt(t),r=Tt(s);return n.getTime()>r.getTime()}function bp(t,s){const n=Tt(t),r=Tt(s);return+n<+r}function AP(t,s){const n=Tt(t),r=Tt(s);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Kae(t,s){const n=Tt(t),r=Tt(s);return n.getFullYear()===r.getFullYear()}function jv(t,s){return mn(t,-s)}function Ts(t,s){const r=Zae(t);let a;if(r.date){const c=Jae(r.date,2);a=eie(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let l=0,o;if(r.time&&(l=tie(r.time),isNaN(l)))return new Date(NaN);if(r.timezone){if(o=sie(r.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(i+l),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+l+o)}const Tg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Yae=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Qae=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Xae=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Zae(t){const s={},n=t.split(Tg.dateTimeDelimiter);let r;if(n.length>2)return s;if(/:/.test(n[0])?r=n[0]:(s.date=n[0],r=n[1],Tg.timeZoneDelimiter.test(s.date)&&(s.date=t.split(Tg.timeZoneDelimiter)[0],r=t.substr(s.date.length,t.length))),r){const a=Tg.timezone.exec(r);a?(s.time=r.replace(a[1],""),s.timezone=a[1]):s.time=r}return s}function Jae(t,s){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?a:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function eie(t,s){if(s===null)return new Date(NaN);const n=t.match(Yae);if(!n)return new Date(NaN);const r=!!n[4],a=Gh(n[1]),i=Gh(n[2])-1,l=Gh(n[3]),o=Gh(n[4]),c=Gh(n[5])-1;if(r)return lie(s,o,c)?nie(s,o,c):new Date(NaN);{const d=new Date(0);return!aie(s,i,l)||!iie(s,a)?new Date(NaN):(d.setUTCFullYear(s,i,Math.max(a,l)),d)}}function Gh(t){return t?parseInt(t):1}function tie(t){const s=t.match(Qae);if(!s)return NaN;const n=qN(s[1]),r=qN(s[2]),a=qN(s[3]);return oie(n,r,a)?n*_B+r*MB+a*1e3:NaN}function qN(t){return t&&parseFloat(t.replace(",","."))||0}function sie(t){if(t==="Z")return 0;const s=t.match(Xae);if(!s)return 0;const n=s[1]==="+"?-1:1,r=parseInt(s[2]),a=s[3]&&parseInt(s[3])||0;return cie(r,a)?n*(r*_B+a*MB):NaN}function nie(t,s,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const a=r.getUTCDay()||7,i=(s-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+i),r}const rie=[31,null,31,30,31,30,31,31,30,31,30,31];function UB(t){return t%400===0||t%4===0&&t%100!==0}function aie(t,s,n){return s>=0&&s<=11&&n>=1&&n<=(rie[s]||(UB(t)?29:28))}function iie(t,s){return s>=1&&s<=(UB(t)?366:365)}function lie(t,s,n){return s>=1&&s<=53&&n>=0&&n<=6}function oie(t,s,n){return t===24?s===0&&n===0:n>=0&&n<60&&s>=0&&s<60&&t>=0&&t<25}function cie(t,s){return s>=0&&s<=59}function HN(t,s){const n=Tt(t),r=n.getFullYear(),a=n.getDate(),i=$r(t,0);i.setFullYear(r,s,15),i.setHours(0,0,0,0);const l=qae(i);return n.setMonth(s,Math.min(a,l)),n}function SE(t,s){const n=Tt(t);return isNaN(+n)?$r(t,NaN):(n.setFullYear(s),n)}function die(t,s){return Oa(t,-s)}var Pt=function(){return Pt=Object.assign||function(s){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])}return s},Pt.apply(this,arguments)};function uie(t,s){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function zB(t,s,n){for(var r=0,a=s.length,i;r<a;r++)(i||!(r in s))&&(i||(i=Array.prototype.slice.call(s,0,r)),i[r]=s[r]);return t.concat(i||Array.prototype.slice.call(s))}function Ff(t){return t.mode==="multiple"}function Lf(t){return t.mode==="range"}function C0(t){return t.mode==="single"}var mie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function hie(t,s){return ut(t,"LLLL y",s)}function xie(t,s){return ut(t,"d",s)}function pie(t,s){return ut(t,"LLLL",s)}function fie(t){return"".concat(t)}function gie(t,s){return ut(t,"cccccc",s)}function vie(t,s){return ut(t,"yyyy",s)}var yie=Object.freeze({__proto__:null,formatCaption:hie,formatDay:xie,formatMonthCaption:pie,formatWeekNumber:fie,formatWeekdayName:gie,formatYearCaption:vie}),jie=function(t,s,n){return ut(t,"do MMMM (EEEE)",n)},bie=function(){return"Month: "},Nie=function(){return"Go to next month"},wie=function(){return"Go to previous month"},Sie=function(t,s){return ut(t,"cccc",s)},Cie=function(t){return"Week n. ".concat(t)},kie=function(){return"Year: "},Pie=Object.freeze({__proto__:null,labelDay:jie,labelMonthDropdown:bie,labelNext:Nie,labelPrevious:wie,labelWeekNumber:Cie,labelWeekday:Sie,labelYearDropdown:kie});function Aie(){var t="buttons",s=mie,n=PP,r={},a={},i=1,l={},o=new Date;return{captionLayout:t,classNames:s,formatters:yie,labels:Pie,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:i,styles:l,today:o,mode:"default"}}function Tie(t){var s=t.fromYear,n=t.toYear,r=t.fromMonth,a=t.toMonth,i=t.fromDate,l=t.toDate;return r?i=Cn(r):s&&(i=new Date(s,0,1)),a?l=zo(a):n&&(l=new Date(n,11,31)),{fromDate:i?Dr(i):void 0,toDate:l?Dr(l):void 0}}var qB=b.createContext(void 0);function Die(t){var s,n=t.initialProps,r=Aie(),a=Tie(n),i=a.fromDate,l=a.toDate,o=(s=n.captionLayout)!==null&&s!==void 0?s:r.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(C0(n)||Ff(n)||Lf(n))&&(c=n.onSelect);var d=Pt(Pt(Pt({},r),n),{captionLayout:o,classNames:Pt(Pt({},r.classNames),n.classNames),components:Pt({},n.components),formatters:Pt(Pt({},r.formatters),n.formatters),fromDate:i,labels:Pt(Pt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Pt(Pt({},r.modifiers),n.modifiers),modifiersClassNames:Pt(Pt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Pt(Pt({},r.styles),n.styles),toDate:l});return e.jsx(qB.Provider,{value:d,children:t.children})}function _s(){var t=b.useContext(qB);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function HB(t){var s=_s(),n=s.locale,r=s.classNames,a=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:n})})}function Eie(t){return e.jsx("svg",Pt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function GB(t){var s,n,r=t.onChange,a=t.value,i=t.children,l=t.caption,o=t.className,c=t.style,d=_s(),u=(n=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&n!==void 0?n:Eie;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:r,children:i}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function Oie(t){var s,n=_s(),r=n.fromDate,a=n.toDate,i=n.styles,l=n.locale,o=n.formatters.formatMonthCaption,c=n.classNames,d=n.components,u=n.labels.labelMonthDropdown;if(!r)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});var m=[];if(Kae(r,a))for(var h=Cn(r),x=r.getMonth();x<=a.getMonth();x++)m.push(HN(h,x));else for(var h=Cn(new Date),x=0;x<=11;x++)m.push(HN(h,x));var p=function(j){var g=Number(j.target.value),y=HN(Cn(t.displayMonth),g);t.onChange(y)},f=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:GB;return e.jsx(f,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:p,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:l}),children:m.map(function(j){return e.jsx("option",{value:j.getMonth(),children:o(j,{locale:l})},j.getMonth())})})}function Mie(t){var s,n=t.displayMonth,r=_s(),a=r.fromDate,i=r.toDate,l=r.locale,o=r.styles,c=r.classNames,d=r.components,u=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,h=[];if(!a)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var x=a.getFullYear(),p=i.getFullYear(),f=x;f<=p;f++)h.push(SE(IB(new Date),f));var j=function(y){var v=SE(Cn(n),Number(y.target.value));t.onChange(v)},g=(s=d==null?void 0:d.Dropdown)!==null&&s!==void 0?s:GB;return e.jsx(g,{name:"years","aria-label":m(),className:c.dropdown_year,style:o.dropdown_year,onChange:j,value:n.getFullYear(),caption:u(n,{locale:l}),children:h.map(function(y){return e.jsx("option",{value:y.getFullYear(),children:u(y,{locale:l})},y.getFullYear())})})}function _ie(t,s){var n=b.useState(t),r=n[0],a=n[1],i=s===void 0?r:s;return[i,a]}function Rie(t){var s=t.month,n=t.defaultMonth,r=t.today,a=s||n||r||new Date,i=t.toDate,l=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(i&&Nm(i,a)<0){var d=-1*(c-1);a=Oa(i,d)}return l&&Nm(a,l)<0&&(a=l),Cn(a)}function Iie(){var t=_s(),s=Rie(t),n=_ie(s,t.month),r=n[0],a=n[1],i=function(l){var o;if(!t.disableNavigation){var c=Cn(l);a(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[r,i]}function $ie(t,s){for(var n=s.reverseMonths,r=s.numberOfMonths,a=Cn(t),i=Cn(Oa(a,r)),l=Nm(i,a),o=[],c=0;c<l;c++){var d=Oa(a,c);o.push(d)}return n&&(o=o.reverse()),o}function Fie(t,s){if(!s.disableNavigation){var n=s.toDate,r=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=r?i:1,o=Cn(t);if(!n)return Oa(o,l);var c=Nm(n,t);if(!(c<i))return Oa(o,l)}}function Lie(t,s){if(!s.disableNavigation){var n=s.fromDate,r=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=r?i:1,o=Cn(t);if(!n)return Oa(o,-l);var c=Nm(o,n);if(!(c<=0))return Oa(o,-l)}}var WB=b.createContext(void 0);function Bie(t){var s=_s(),n=Iie(),r=n[0],a=n[1],i=$ie(r,s),l=Fie(r,s),o=Lie(r,s),c=function(m){return i.some(function(h){return AP(m,h)})},d=function(m,h){c(m)||(h&&bp(m,h)?a(Oa(m,1+s.numberOfMonths*-1)):a(m))},u={currentMonth:r,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx(WB.Provider,{value:u,children:t.children})}function Bf(){var t=b.useContext(WB);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function CE(t){var s,n=_s(),r=n.classNames,a=n.styles,i=n.components,l=Bf().goToMonth,o=function(u){l(Oa(u,t.displayIndex?-t.displayIndex:0))},c=(s=i==null?void 0:i.CaptionLabel)!==null&&s!==void 0?s:HB,d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[e.jsx("div",{className:r.vhidden,children:d}),e.jsx(Oie,{onChange:o,displayMonth:t.displayMonth}),e.jsx(Mie,{onChange:o,displayMonth:t.displayMonth})]})}function Vie(t){return e.jsx("svg",Pt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Uie(t){return e.jsx("svg",Pt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var gy=b.forwardRef(function(t,s){var n=_s(),r=n.classNames,a=n.styles,i=[r.button_reset,r.button];t.className&&i.push(t.className);var l=i.join(" "),o=Pt(Pt({},a.button_reset),a.button);return t.style&&Object.assign(o,t.style),e.jsx("button",Pt({},t,{ref:s,type:"button",className:l,style:o}))});function zie(t){var s,n,r=_s(),a=r.dir,i=r.locale,l=r.classNames,o=r.styles,c=r.labels,d=c.labelPrevious,u=c.labelNext,m=r.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var h=d(t.previousMonth,{locale:i}),x=[l.nav_button,l.nav_button_previous].join(" "),p=u(t.nextMonth,{locale:i}),f=[l.nav_button,l.nav_button_next].join(" "),j=(s=m==null?void 0:m.IconRight)!==null&&s!==void 0?s:Uie,g=(n=m==null?void 0:m.IconLeft)!==null&&n!==void 0?n:Vie;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(gy,{name:"previous-month","aria-label":h,className:x,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?e.jsx(j,{className:l.nav_icon,style:o.nav_icon}):e.jsx(g,{className:l.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(gy,{name:"next-month","aria-label":p,className:f,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?e.jsx(g,{className:l.nav_icon,style:o.nav_icon}):e.jsx(j,{className:l.nav_icon,style:o.nav_icon})})]})}function kE(t){var s=_s().numberOfMonths,n=Bf(),r=n.previousMonth,a=n.nextMonth,i=n.goToMonth,l=n.displayMonths,o=l.findIndex(function(p){return AP(t.displayMonth,p)}),c=o===0,d=o===l.length-1,u=s>1&&(c||!d),m=s>1&&(d||!c),h=function(){r&&i(r)},x=function(){a&&i(a)};return e.jsx(zie,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:x})}function qie(t){var s,n=_s(),r=n.classNames,a=n.disableNavigation,i=n.styles,l=n.captionLayout,o=n.components,c=(s=o==null?void 0:o.CaptionLabel)!==null&&s!==void 0?s:HB,d;return a?d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?d=e.jsx(CE,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx(CE,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(kE,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(kE,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:r.caption,style:i.caption,children:d})}function Hie(t){var s=_s(),n=s.footer,r=s.styles,a=s.classNames.tfoot;return n?e.jsx("tfoot",{className:a,style:r.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:n})})}):e.jsx(e.Fragment,{})}function Gie(t,s,n){for(var r=n?yd(new Date):Yi(new Date,{locale:t,weekStartsOn:s}),a=[],i=0;i<7;i++){var l=mn(r,i);a.push(l)}return a}function Wie(){var t=_s(),s=t.classNames,n=t.styles,r=t.showWeekNumber,a=t.locale,i=t.weekStartsOn,l=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=Gie(a,i,l);return e.jsxs("tr",{style:n.head_row,className:s.head_row,children:[r&&e.jsx("td",{style:n.head_cell,className:s.head_cell}),d.map(function(u,m){return e.jsx("th",{scope:"col",className:s.head_cell,style:n.head_cell,"aria-label":c(u,{locale:a}),children:o(u,{locale:a})},m)})]})}function Kie(){var t,s=_s(),n=s.classNames,r=s.styles,a=s.components,i=(t=a==null?void 0:a.HeadRow)!==null&&t!==void 0?t:Wie;return e.jsx("thead",{style:r.head,className:n.head,children:e.jsx(i,{})})}function Yie(t){var s=_s(),n=s.locale,r=s.formatters.formatDay;return e.jsx(e.Fragment,{children:r(t.date,{locale:n})})}var TP=b.createContext(void 0);function Qie(t){if(!Ff(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(TP.Provider,{value:s,children:t.children})}return e.jsx(Xie,{initialProps:t.initialProps,children:t.children})}function Xie(t){var s=t.initialProps,n=t.children,r=s.selected,a=s.min,i=s.max,l=function(d,u,m){var h,x;(h=s.onDayClick)===null||h===void 0||h.call(s,d,u,m);var p=!!(u.selected&&a&&(r==null?void 0:r.length)===a);if(!p){var f=!!(!u.selected&&i&&(r==null?void 0:r.length)===i);if(!f){var j=r?zB([],r):[];if(u.selected){var g=j.findIndex(function(y){return nr(d,y)});j.splice(g,1)}else j.push(d);(x=s.onSelect)===null||x===void 0||x.call(s,j,d,u,m)}}},o={disabled:[]};r&&o.disabled.push(function(d){var u=i&&r.length>i-1,m=r.some(function(h){return nr(h,d)});return!!(u&&!m)});var c={selected:r,onDayClick:l,modifiers:o};return e.jsx(TP.Provider,{value:c,children:n})}function DP(){var t=b.useContext(TP);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Zie(t,s){var n=s||{},r=n.from,a=n.to;return r&&a?nr(a,t)&&nr(r,t)?void 0:nr(a,t)?{from:a,to:void 0}:nr(r,t)?void 0:fy(r,t)?{from:t,to:a}:{from:r,to:t}:a?fy(t,a)?{from:a,to:t}:{from:t,to:a}:r?bp(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var EP=b.createContext(void 0);function Jie(t){if(!Lf(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(EP.Provider,{value:s,children:t.children})}return e.jsx(ele,{initialProps:t.initialProps,children:t.children})}function ele(t){var s=t.initialProps,n=t.children,r=s.selected,a=r||{},i=a.from,l=a.to,o=s.min,c=s.max,d=function(x,p,f){var j,g;(j=s.onDayClick)===null||j===void 0||j.call(s,x,p,f);var y=Zie(x,r);(g=s.onSelect)===null||g===void 0||g.call(s,y,x,p,f)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],l?(u.range_end=[l],nr(i,l)||(u.range_middle=[{after:i,before:l}])):u.range_end=[i]):l&&(u.range_start=[l],u.range_end=[l]),o&&(i&&!l&&u.disabled.push({after:jv(i,o-1),before:mn(i,o-1)}),i&&l&&u.disabled.push({after:i,before:mn(i,o-1)}),!i&&l&&u.disabled.push({after:jv(l,o-1),before:mn(l,o-1)})),c){if(i&&!l&&(u.disabled.push({before:mn(i,-c+1)}),u.disabled.push({after:mn(i,c-1)})),i&&l){var m=ei(l,i)+1,h=c-m;u.disabled.push({before:jv(i,h)}),u.disabled.push({after:mn(l,h)})}!i&&l&&(u.disabled.push({before:mn(l,-c+1)}),u.disabled.push({after:mn(l,c-1)}))}return e.jsx(EP.Provider,{value:{selected:r,onDayClick:d,modifiers:u},children:n})}function OP(){var t=b.useContext(EP);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function bv(t){return Array.isArray(t)?zB([],t):t!==void 0?[t]:[]}function tle(t){var s={};return Object.entries(t).forEach(function(n){var r=n[0],a=n[1];s[r]=bv(a)}),s}var pi;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(pi||(pi={}));var sle=pi.Selected,il=pi.Disabled,nle=pi.Hidden,rle=pi.Today,GN=pi.RangeEnd,WN=pi.RangeMiddle,KN=pi.RangeStart,ale=pi.Outside;function ile(t,s,n){var r,a=(r={},r[sle]=bv(t.selected),r[il]=bv(t.disabled),r[nle]=bv(t.hidden),r[rle]=[t.today],r[GN]=[],r[WN]=[],r[KN]=[],r[ale]=[],r);return t.fromDate&&a[il].push({before:t.fromDate}),t.toDate&&a[il].push({after:t.toDate}),Ff(t)?a[il]=a[il].concat(s.modifiers[il]):Lf(t)&&(a[il]=a[il].concat(n.modifiers[il]),a[KN]=n.modifiers[KN],a[WN]=n.modifiers[WN],a[GN]=n.modifiers[GN]),a}var KB=b.createContext(void 0);function lle(t){var s=_s(),n=DP(),r=OP(),a=ile(s,n,r),i=tle(s.modifiers),l=Pt(Pt({},a),i);return e.jsx(KB.Provider,{value:l,children:t.children})}function YB(){var t=b.useContext(KB);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function ole(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function cle(t){return!!(t&&typeof t=="object"&&"from"in t)}function dle(t){return!!(t&&typeof t=="object"&&"after"in t)}function ule(t){return!!(t&&typeof t=="object"&&"before"in t)}function mle(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function hle(t,s){var n,r=s.from,a=s.to;if(r&&a){var i=ei(a,r)<0;i&&(n=[a,r],r=n[0],a=n[1]);var l=ei(t,r)>=0&&ei(a,t)>=0;return l}return a?nr(a,t):r?nr(r,t):!1}function xle(t){return CP(t)}function ple(t){return Array.isArray(t)&&t.every(CP)}function fle(t,s){return s.some(function(n){if(typeof n=="boolean")return n;if(xle(n))return nr(t,n);if(ple(n))return n.includes(t);if(cle(n))return hle(t,n);if(mle(n))return n.dayOfWeek.includes(t.getDay());if(ole(n)){var r=ei(n.before,t),a=ei(n.after,t),i=r>0,l=a<0,o=fy(n.before,n.after);return o?l&&i:i||l}return dle(n)?ei(t,n.after)>0:ule(n)?ei(n.before,t)>0:typeof n=="function"?n(t):!1})}function MP(t,s,n){var r=Object.keys(s).reduce(function(i,l){var o=s[l];return fle(t,o)&&i.push(l),i},[]),a={};return r.forEach(function(i){return a[i]=!0}),n&&!AP(t,n)&&(a.outside=!0),a}function gle(t,s){for(var n=Cn(t[0]),r=zo(t[t.length-1]),a,i,l=n;l<=r;){var o=MP(l,s),c=!o.disabled&&!o.hidden;if(!c){l=mn(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),a||(a=l),l=mn(l,1)}return i||a}var vle=365;function QB(t,s){var n=s.moveBy,r=s.direction,a=s.context,i=s.modifiers,l=s.retry,o=l===void 0?{count:0,lastFocused:t}:l,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,h={day:mn,week:M2,month:Oa,year:Ire,startOfWeek:function(j){return a.ISOWeek?yd(j):Yi(j,{locale:m,weekStartsOn:c})},endOfWeek:function(j){return a.ISOWeek?$B(j):kP(j,{locale:m,weekStartsOn:c})}},x=h[n](t,r==="after"?1:-1);r==="before"&&d?x=$re([d,x]):r==="after"&&u&&(x=Fre([u,x]));var p=!0;if(i){var f=MP(x,i);p=!f.disabled&&!f.hidden}return p?x:o.count>vle?o.lastFocused:QB(x,{moveBy:n,direction:r,context:a,modifiers:i,retry:Pt(Pt({},o),{count:o.count+1})})}var XB=b.createContext(void 0);function yle(t){var s=Bf(),n=YB(),r=b.useState(),a=r[0],i=r[1],l=b.useState(),o=l[0],c=l[1],d=gle(s.displayMonths,n),u=a??(o&&s.isDateDisplayed(o))?o:d,m=function(){c(a),i(void 0)},h=function(j){i(j)},x=_s(),p=function(j,g){if(a){var y=QB(a,{moveBy:j,direction:g,context:x,modifiers:n});nr(a,y)||(s.goToDate(y,a),h(y))}},f={focusedDay:a,focusTarget:u,blur:m,focus:h,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return e.jsx(XB.Provider,{value:f,children:t.children})}function _P(){var t=b.useContext(XB);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function jle(t,s){var n=YB(),r=MP(t,n,s);return r}var RP=b.createContext(void 0);function ble(t){if(!C0(t.initialProps)){var s={selected:void 0};return e.jsx(RP.Provider,{value:s,children:t.children})}return e.jsx(Nle,{initialProps:t.initialProps,children:t.children})}function Nle(t){var s=t.initialProps,n=t.children,r=function(i,l,o){var c,d,u;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,l,o),l.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,i,l,o);return}(u=s.onSelect)===null||u===void 0||u.call(s,i,i,l,o)},a={selected:s.selected,onDayClick:r};return e.jsx(RP.Provider,{value:a,children:n})}function ZB(){var t=b.useContext(RP);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function wle(t,s){var n=_s(),r=ZB(),a=DP(),i=OP(),l=_P(),o=l.focusDayAfter,c=l.focusDayBefore,d=l.focusWeekAfter,u=l.focusWeekBefore,m=l.blur,h=l.focus,x=l.focusMonthBefore,p=l.focusMonthAfter,f=l.focusYearBefore,j=l.focusYearAfter,g=l.focusStartOfWeek,y=l.focusEndOfWeek,v=function(Y){var O,R,q,re;C0(n)?(O=r.onDayClick)===null||O===void 0||O.call(r,t,s,Y):Ff(n)?(R=a.onDayClick)===null||R===void 0||R.call(a,t,s,Y):Lf(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,t,s,Y):(re=n.onDayClick)===null||re===void 0||re.call(n,t,s,Y)},w=function(Y){var O;h(t),(O=n.onDayFocus)===null||O===void 0||O.call(n,t,s,Y)},N=function(Y){var O;m(),(O=n.onDayBlur)===null||O===void 0||O.call(n,t,s,Y)},S=function(Y){var O;(O=n.onDayMouseEnter)===null||O===void 0||O.call(n,t,s,Y)},k=function(Y){var O;(O=n.onDayMouseLeave)===null||O===void 0||O.call(n,t,s,Y)},T=function(Y){var O;(O=n.onDayPointerEnter)===null||O===void 0||O.call(n,t,s,Y)},C=function(Y){var O;(O=n.onDayPointerLeave)===null||O===void 0||O.call(n,t,s,Y)},P=function(Y){var O;(O=n.onDayTouchCancel)===null||O===void 0||O.call(n,t,s,Y)},$=function(Y){var O;(O=n.onDayTouchEnd)===null||O===void 0||O.call(n,t,s,Y)},V=function(Y){var O;(O=n.onDayTouchMove)===null||O===void 0||O.call(n,t,s,Y)},I=function(Y){var O;(O=n.onDayTouchStart)===null||O===void 0||O.call(n,t,s,Y)},_=function(Y){var O;(O=n.onDayKeyUp)===null||O===void 0||O.call(n,t,s,Y)},U=function(Y){var O;switch(Y.key){case"ArrowLeft":Y.preventDefault(),Y.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowRight":Y.preventDefault(),Y.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowDown":Y.preventDefault(),Y.stopPropagation(),d();break;case"ArrowUp":Y.preventDefault(),Y.stopPropagation(),u();break;case"PageUp":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?f():x();break;case"PageDown":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?j():p();break;case"Home":Y.preventDefault(),Y.stopPropagation(),g();break;case"End":Y.preventDefault(),Y.stopPropagation(),y();break}(O=n.onDayKeyDown)===null||O===void 0||O.call(n,t,s,Y)},H={onClick:v,onFocus:w,onBlur:N,onKeyDown:U,onKeyUp:_,onMouseEnter:S,onMouseLeave:k,onPointerEnter:T,onPointerLeave:C,onTouchCancel:P,onTouchEnd:$,onTouchMove:V,onTouchStart:I};return H}function Sle(){var t=_s(),s=ZB(),n=DP(),r=OP(),a=C0(t)?s.selected:Ff(t)?n.selected:Lf(t)?r.selected:void 0;return a}function Cle(t){return Object.values(pi).includes(t)}function kle(t,s){var n=[t.classNames.day];return Object.keys(s).forEach(function(r){var a=t.modifiersClassNames[r];if(a)n.push(a);else if(Cle(r)){var i=t.classNames["day_".concat(r)];i&&n.push(i)}}),n}function Ple(t,s){var n=Pt({},t.styles.day);return Object.keys(s).forEach(function(r){var a;n=Pt(Pt({},n),(a=t.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function Ale(t,s,n){var r,a,i,l=_s(),o=_P(),c=jle(t,s),d=wle(t,c),u=Sle(),m=!!(l.onDayClick||l.mode!=="default");b.useEffect(function(){var S;c.outside||o.focusedDay&&m&&nr(o.focusedDay,t)&&((S=n.current)===null||S===void 0||S.focus())},[o.focusedDay,t,n,m,c.outside]);var h=kle(l,c).join(" "),x=Ple(l,c),p=!!(c.outside&&!l.showOutsideDays||c.hidden),f=(i=(a=l.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:Yie,j=e.jsx(f,{date:t,displayMonth:s,activeModifiers:c}),g={style:x,className:h,children:j,role:"gridcell"},y=o.focusTarget&&nr(o.focusTarget,t)&&!c.outside,v=o.focusedDay&&nr(o.focusedDay,t),w=Pt(Pt(Pt({},g),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=v||y?0:-1,r)),d),N={isButton:m,isHidden:p,activeModifiers:c,selectedDays:u,buttonProps:w,divProps:g};return N}function Tle(t){var s=b.useRef(null),n=Ale(t.date,t.displayMonth,s);return n.isHidden?e.jsx("div",{role:"gridcell"}):n.isButton?e.jsx(gy,Pt({name:"day",ref:s},n.buttonProps)):e.jsx("div",Pt({},n.divProps))}function Dle(t){var s=t.number,n=t.dates,r=_s(),a=r.onWeekNumberClick,i=r.styles,l=r.classNames,o=r.locale,c=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,u=d(Number(s),{locale:o});if(!a)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:u});var m=c(Number(s),{locale:o}),h=function(x){a(s,n,x)};return e.jsx(gy,{name:"week-number","aria-label":m,className:l.weeknumber,style:i.weeknumber,onClick:h,children:u})}function Ele(t){var s,n,r=_s(),a=r.styles,i=r.classNames,l=r.showWeekNumber,o=r.components,c=(s=o==null?void 0:o.Day)!==null&&s!==void 0?s:Tle,d=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:Dle,u;return l&&(u=e.jsx("td",{className:i.cell,style:a.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:a.row,children:[u,t.dates.map(function(m){return e.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:m})},Hae(m))})]})}function PE(t,s,n){for(var r=n!=null&&n.ISOWeek?$B(s):kP(s,n),a=n!=null&&n.ISOWeek?yd(t):Yi(t,n),i=ei(r,a),l=[],o=0;o<=i;o++)l.push(mn(a,o));var c=l.reduce(function(d,u){var m=n!=null&&n.ISOWeek?FB(u):BB(u,n),h=d.find(function(x){return x.weekNumber===m});return h?(h.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function Ole(t,s){var n=PE(Cn(t),zo(t),s);if(s!=null&&s.useFixedWeeks){var r=Wae(t,s);if(r<6){var a=n[n.length-1],i=a.dates[a.dates.length-1],l=M2(i,6-r),o=PE(M2(i,1),l,s);n.push.apply(n,o)}}return n}function Mle(t){var s,n,r,a=_s(),i=a.locale,l=a.classNames,o=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,x=a.ISOWeek,p=Ole(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:x,locale:i,weekStartsOn:m,firstWeekContainsDate:h}),f=(s=u==null?void 0:u.Head)!==null&&s!==void 0?s:Kie,j=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:Ele,g=(r=u==null?void 0:u.Footer)!==null&&r!==void 0?r:Hie;return e.jsxs("table",{id:t.id,className:l.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(f,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:p.map(function(y){return e.jsx(j,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),e.jsx(g,{displayMonth:t.displayMonth})]})}function _le(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Rle=_le()?b.useLayoutEffect:b.useEffect,YN=!1,Ile=0;function AE(){return"react-day-picker-".concat(++Ile)}function $le(t){var s,n=t??(YN?AE():null),r=b.useState(n),a=r[0],i=r[1];return Rle(function(){a===null&&i(AE())},[]),b.useEffect(function(){YN===!1&&(YN=!0)},[]),(s=t??a)!==null&&s!==void 0?s:void 0}function Fle(t){var s,n,r=_s(),a=r.dir,i=r.classNames,l=r.styles,o=r.components,c=Bf().displayMonths,d=$le(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,m=[i.month],h=l.month,x=t.displayIndex===0,p=t.displayIndex===c.length-1,f=!x&&!p;a==="rtl"&&(s=[x,p],p=s[0],x=s[1]),x&&(m.push(i.caption_start),h=Pt(Pt({},h),l.caption_start)),p&&(m.push(i.caption_end),h=Pt(Pt({},h),l.caption_end)),f&&(m.push(i.caption_between),h=Pt(Pt({},h),l.caption_between));var j=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:qie;return e.jsxs("div",{className:m.join(" "),style:h,children:[e.jsx(j,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(Mle,{id:u,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function Lle(t){var s=_s(),n=s.classNames,r=s.styles;return e.jsx("div",{className:n.months,style:r.months,children:t.children})}function Ble(t){var s,n,r=t.initialProps,a=_s(),i=_P(),l=Bf(),o=b.useState(!1),c=o[0],d=o[1];b.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=Pt(Pt({},a.styles.root),a.style),h=Object.keys(r).filter(function(p){return p.startsWith("data-")}).reduce(function(p,f){var j;return Pt(Pt({},p),(j={},j[f]=r[f],j))},{}),x=(n=(s=r.components)===null||s===void 0?void 0:s.Months)!==null&&n!==void 0?n:Lle;return e.jsx("div",Pt({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:e.jsx(x,{children:l.displayMonths.map(function(p,f){return e.jsx(Fle,{displayIndex:f,displayMonth:p},f)})})}))}function Vle(t){var s=t.children,n=uie(t,["children"]);return e.jsx(Die,{initialProps:n,children:e.jsx(Bie,{children:e.jsx(ble,{initialProps:n,children:e.jsx(Qie,{initialProps:n,children:e.jsx(Jie,{initialProps:n,children:e.jsx(lle,{children:e.jsx(yle,{children:s})})})})})})})}function Ule(t){return e.jsx(Vle,Pt({},t,{children:e.jsx(Ble,{initialProps:t})}))}function Rc({className:t,classNames:s,showOutsideDays:n=!0,...r}){return e.jsx(Ule,{showOutsideDays:n,className:Ue("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ue(hp({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ue(hp({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...a})=>e.jsx(Nf,{className:"h-4 w-4"}),IconRight:({...a})=>e.jsx(Dd,{className:"h-4 w-4"})},...r})}Rc.displayName="Calendar";var k0="Popover",[JB]=Pn(k0,[ic]),Vf=ic(),[zle,cc]=JB(k0),eV=t=>{const{__scopePopover:s,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:l=!1}=t,o=Vf(s),c=b.useRef(null),[d,u]=b.useState(!1),[m,h]=ra({prop:r,defaultProp:a??!1,onChange:i,caller:k0});return e.jsx(n0,{...o,children:e.jsx(zle,{scope:s,contentId:Zr(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:d,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:l,children:n})})};eV.displayName=k0;var tV="PopoverAnchor",qle=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=cc(tV,n),i=Vf(n),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return b.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Tf,{...i,...r,ref:s})});qle.displayName=tV;var sV="PopoverTrigger",nV=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=cc(sV,n),i=Vf(n),l=kt(s,a.triggerRef),o=e.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":oV(a.open),...r,ref:l,onClick:Be(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:e.jsx(Tf,{asChild:!0,...i,children:o})});nV.displayName=sV;var IP="PopoverPortal",[Hle,Gle]=JB(IP,{forceMount:void 0}),rV=t=>{const{__scopePopover:s,forceMount:n,children:r,container:a}=t,i=cc(IP,s);return e.jsx(Hle,{scope:s,forceMount:n,children:e.jsx(An,{present:n||i.open,children:e.jsx(oh,{asChild:!0,container:a,children:r})})})};rV.displayName=IP;var wm="PopoverContent",aV=b.forwardRef((t,s)=>{const n=Gle(wm,t.__scopePopover),{forceMount:r=n.forceMount,...a}=t,i=cc(wm,t.__scopePopover);return e.jsx(An,{present:r||i.open,children:i.modal?e.jsx(Kle,{...a,ref:s}):e.jsx(Yle,{...a,ref:s})})});aV.displayName=wm;var Wle=Wo("PopoverContent.RemoveScroll"),Kle=b.forwardRef((t,s)=>{const n=cc(wm,t.__scopePopover),r=b.useRef(null),a=kt(s,r),i=b.useRef(!1);return b.useEffect(()=>{const l=r.current;if(l)return u0(l)},[]),e.jsx(Of,{as:Wle,allowPinchZoom:!0,children:e.jsx(iV,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Be(t.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Be(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Be(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),Yle=b.forwardRef((t,s)=>{const n=cc(wm,t.__scopePopover),r=b.useRef(!1),a=b.useRef(!1);return e.jsx(iV,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),iV=b.forwardRef((t,s)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=t,h=cc(wm,n),x=Vf(n);return c0(),e.jsx(Ef,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Td,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(r0,{"data-state":oV(h.open),role:"dialog",id:h.contentId,...x,...m,ref:s,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),lV="PopoverClose",Qle=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=cc(lV,n);return e.jsx(st.button,{type:"button",...r,ref:s,onClick:Be(t.onClick,()=>a.onOpenChange(!1))})});Qle.displayName=lV;var Xle="PopoverArrow",Zle=b.forwardRef((t,s)=>{const{__scopePopover:n,...r}=t,a=Vf(n);return e.jsx(a0,{...a,...r,ref:s})});Zle.displayName=Xle;function oV(t){return t?"open":"closed"}var Jle=eV,eoe=nV,toe=rV,cV=aV;const fu=Jle,gu=eoe,Ic=b.forwardRef(({className:t,align:s="center",sideOffset:n=4,...r},a)=>e.jsx(toe,{children:e.jsx(cV,{ref:a,align:s,sideOffset:n,className:Ue("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Ic.displayName=cV.displayName;const soe=ds({title:Pe().min(1,"Title is required").max(100,"Title too long"),description:Pe().optional(),type:Pe().min(1,"Task type is required"),department:Pe().optional(),priority:zs(["low","medium","high","urgent"]).default("medium"),propertyId:ms().min(1,"Property is required"),assignedTo:Pe().optional(),dueDate:Ao().optional(),estimatedCost:ms().optional(),isRecurring:Ur().default(!1),recurringType:zs(["daily","weekly","monthly","yearly"]).optional(),recurringInterval:ms().min(1).default(1).optional()}),noe=[{value:"cleaning",label:"Cleaning"},{value:"maintenance",label:"Maintenance"},{value:"pool-service",label:"Pool Service"},{value:"garden",label:"Garden Care"},{value:"inspection",label:"Inspection"},{value:"repair",label:"Repair"},{value:"landscaping",label:"Landscaping"},{value:"technology",label:"Technology"},{value:"security",label:"Security"},{value:"guest-service",label:"Guest Service"}],roe=[{value:"housekeeping",label:"Housekeeping"},{value:"maintenance",label:"Maintenance"},{value:"landscaping",label:"Landscaping"},{value:"pool",label:"Pool Service"},{value:"guest-services",label:"Guest Services"},{value:"security",label:"Security"},{value:"technology",label:"Technology"}],TE=[{name:"Deep Clean",title:"Deep Cleaning Service",description:"Complete deep cleaning including floors, windows, bathrooms, kitchen, furniture, and all surfaces. Remove all stains and sanitize all areas.",type:"cleaning",department:"housekeeping",priority:"medium",estimatedCost:150},{name:"Steam Clean",title:"Steam Cleaning Service",description:"Professional steam cleaning of carpets, upholstery, mattresses, and curtains. Deep sanitization using high-temperature steam.",type:"cleaning",department:"housekeeping",priority:"medium",estimatedCost:120},{name:"General Maintenance",title:"General Property Maintenance",description:"Routine maintenance check including plumbing, electrical, HVAC, locks, doors, windows, and general property condition assessment.",type:"maintenance",department:"maintenance",priority:"low",estimatedCost:80},{name:"Pool Service",title:"Pool Cleaning & Maintenance",description:"Complete pool service including water testing, chemical balancing, skimming, vacuuming, filter cleaning, and equipment check.",type:"pool-service",department:"pool",priority:"medium",estimatedCost:100},{name:"Garden Care",title:"Garden Maintenance",description:"Lawn mowing, hedge trimming, weeding, plant care, and general garden tidying to keep property landscape pristine.",type:"garden",department:"landscaping",priority:"low",estimatedCost:90}];function P0({isOpen:t,onOpenChange:s,trigger:n,onCreated:r}){const[a,i]=b.useState(),{toast:l}=at(),o=yt();X.useEffect(()=>{console.log("CreateTaskDialog - isOpen changed to:",t)},[t]);const{data:c=[]}=ye({queryKey:["/api/properties"]}),{data:d=[]}=ye({queryKey:["/api/users"]}),u=Array.isArray(c)?c:[],m=Array.isArray(d)?d:[];console.log("usersArray",m);const h=Zt({resolver:xs(soe),defaultValues:{title:"",description:"",type:"",department:"",priority:"medium",propertyId:0,assignedTo:"unassigned",estimatedCost:void 0,isRecurring:!1,recurringInterval:1}}),x=Ee({mutationFn:async g=>{const y={...g,dueDate:a?a.toISOString():null,estimatedCost:g.estimatedCost||null,assignedTo:g.assignedTo==="unassigned"?null:g.assignedTo,description:g.description||null,department:g.department||null,recurringType:g.isRecurring?g.recurringType:null,recurringInterval:g.isRecurring?g.recurringInterval:null};return console.log("Creating task with data:",y),await ve("POST","/api/tasks",y)},onSuccess:g=>{console.log("Task created successfully:",g),o.invalidateQueries({queryKey:["/api/tasks"]}),o.invalidateQueries({queryKey:["/api/dashboard"]}),o.invalidateQueries({queryKey:["/api/dashboard/recent-tasks"]}),o.invalidateQueries({queryKey:["/api/dashboard/task-stats"]}),o.invalidateQueries({queryKey:["/api/dashboard/stats"]}),o.refetchQueries({queryKey:["/api/tasks"]}),o.refetchQueries({queryKey:["/api/dashboard/recent-tasks"]}),o.refetchQueries({queryKey:["/api/dashboard/task-stats"]}),l({title:"Success",description:`Task "${g.title||"New task"}" created successfully`}),r==null||r(g),h.reset(),i(void 0),s(!1)},onError:g=>{console.error("Task creation error:",g),l({title:"Error",description:g.message||"Failed to create task. Please try again.",variant:"destructive"})}}),p=g=>{const y=TE.find(v=>v.name===g);y&&(h.setValue("title",y.title),h.setValue("description",y.description),h.setValue("type",y.type),h.setValue("department",y.department),h.setValue("priority",y.priority),h.setValue("estimatedCost",y.estimatedCost),l({title:"Template Applied",description:`"${y.name}" template has been applied. You can still modify the fields.`}))},f=g=>{console.log("Form submitted with data:",g),x.mutate(g)},j=e.jsxs(Ye,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create New Task"}),e.jsx(Rt,{children:"Add a new task to be assigned and tracked in the system."})]}),e.jsxs("div",{className:"border-b pb-4 mb-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quick Templates"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:TE.map(g=>e.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>p(g.name),className:"text-xs h-auto py-2","data-testid":`button-template-${g.name.toLowerCase().replace(" ","-")}`,children:g.name},g.name))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click a template to auto-fill the form"})]}),e.jsx(os,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(f),className:"space-y-4",children:[e.jsx(me,{control:h.control,name:"title",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Task Title *"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"e.g. Pool cleaning and chemical balancing",...g})}),e.jsx(fe,{})]})}),e.jsx(me,{control:h.control,name:"description",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Description"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Detailed description of the task...",rows:3,...g})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:h.control,name:"propertyId",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Property *"}),e.jsxs(se,{onValueChange:y=>g.onChange(parseInt(y)),children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})})}),e.jsx(te,{children:u.map(y=>e.jsx(A,{value:y.id.toString(),children:y.name},y.id))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:h.control,name:"type",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Task Type *"}),e.jsxs(se,{onValueChange:g.onChange,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select type"})})}),e.jsx(te,{children:noe.map(y=>e.jsx(A,{value:y.value,children:y.label},y.value))})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:h.control,name:"department",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Department"}),e.jsxs(se,{onValueChange:g.onChange,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select department"})})}),e.jsx(te,{children:roe.map(y=>e.jsx(A,{value:y.value,children:y.label},y.value))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:h.control,name:"priority",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Priority"}),e.jsxs(se,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select priority"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"low",children:"Low"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"urgent",children:"Urgent"})]})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:h.control,name:"assignedTo",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Assign To"}),e.jsxs(se,{onValueChange:g.onChange,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select assignee"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"unassigned",children:"Unassigned"}),m.filter(y=>y.role==="staff"||y.role==="admin").map(y=>e.jsxs(A,{value:y.id,children:[y.name," (",y.role,")"]},y.id))]})]}),e.jsx(fe,{})]})}),e.jsxs(de,{children:[e.jsx(he,{children:"Due Date"}),e.jsxs(fu,{children:[e.jsx(gu,{asChild:!0,children:e.jsx(ue,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[a?ut(a,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(tt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ic,{className:"w-auto p-0",align:"start",children:e.jsx(Rc,{mode:"single",selected:a,onSelect:i,disabled:g=>g<new Date,initialFocus:!0})})]}),e.jsx(ls,{children:"Optional deadline for this task"})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/10",children:[e.jsx(me,{control:h.control,name:"isRecurring",render:({field:g})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{children:"Recurring Task"}),e.jsx(ls,{children:"Create a task that repeats on a schedule"})]}),e.jsx(ue,{children:e.jsx(_c,{checked:g.value,onCheckedChange:g.onChange})})]})}),h.watch("isRecurring")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:h.control,name:"recurringType",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Frequency"}),e.jsxs(se,{onValueChange:g.onChange,value:g.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select frequency"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"yearly",children:"Yearly"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:h.control,name:"recurringInterval",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Every"}),e.jsx(ue,{children:e.jsx(G,{type:"number",min:"1",placeholder:"1",...g,onChange:y=>g.onChange(parseInt(y.target.value)||1)})}),e.jsxs(ls,{children:[h.watch("recurringType")==="daily"&&"day(s)",h.watch("recurringType")==="weekly"&&"week(s)",h.watch("recurringType")==="monthly"&&"month(s)",h.watch("recurringType")==="yearly"&&"year(s)"]}),e.jsx(fe,{})]})})]})]}),e.jsx(me,{control:h.control,name:"estimatedCost",render:({field:g})=>e.jsxs(de,{children:[e.jsx(he,{children:"Estimated Cost (THB)"}),e.jsx(ue,{children:e.jsx(G,{type:"number",placeholder:"0.00",...g,onChange:y=>g.onChange(parseFloat(y.target.value))})}),e.jsx(ls,{children:"Optional estimated cost in Thai Baht"}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:x.isPending,children:"Cancel"}),e.jsx(M,{type:"submit",disabled:x.isPending,children:x.isPending?"Creating...":"Create Task"})]})]})})]});return n?e.jsxs(Ke,{open:t,onOpenChange:s,children:[e.jsx(cs,{asChild:!0,children:n}),j]}):e.jsx(Ke,{open:t,onOpenChange:s,children:j})}function aoe(){var In;const{user:t}=_a(),[s,n]=b.useState(""),[r,a]=b.useState("all"),[i,l]=b.useState("all"),[o,c]=b.useState("all"),[d,u]=b.useState("all"),[m,h]=b.useState(null),[x,p]=b.useState(!1),[f,j]=b.useState(!1),[g,y]=b.useState(!1),[v,w]=b.useState(null),[N,S]=b.useState({}),[k,T]=b.useState([]),{toast:C}=at(),P=yt(),$=je=>{const it=je.getFullYear(),Js=String(je.getMonth()+1).padStart(2,"0"),Se=String(je.getDate()).padStart(2,"0");return`${it}-${Js}-${Se}`},V=je=>{const it=new Date,Js=new Date,Se=new Date;switch(je){case"today":Js.setHours(0,0,0,0),Se.setHours(23,59,59,999);break;case"this-week":Js.setDate(it.getDate()-it.getDay()),Js.setHours(0,0,0,0),Se.setDate(Js.getDate()+6),Se.setHours(23,59,59,999);break;case"next-7-days":Js.setHours(0,0,0,0),Se.setDate(it.getDate()+7),Se.setHours(23,59,59,999);break;case"next-30-days":Js.setHours(0,0,0,0),Se.setDate(it.getDate()+30),Se.setHours(23,59,59,999);break;case"next-90-days":Js.setHours(0,0,0,0),Se.setDate(it.getDate()+90),Se.setHours(23,59,59,999);break;default:return null}return{from:$(Js),to:$(Se)}},I=je=>{if(u(je),je==="all")h(null);else{if(je==="custom")return;{const it=V(je);h(it)}}},[_]=Yn(),U=X.useMemo(()=>{try{const je=_.includes("?")?_.split("?")[1]:window.location.search.slice(1),it=new URLSearchParams(je).get("propertyId");return it&&!Number.isNaN(Number(it))?String(Number(it)):""}catch{return""}},[_]),H=b.useMemo(()=>{const je=new URLSearchParams;return m&&(je.append("due_from",m.from),je.append("due_to",m.to)),U&&je.append("propertyId",U),je.toString()},[m,U]),{data:Y=[],isLoading:O,error:R}=ye({queryKey:["/api/tasks",H],queryFn:async()=>{const je=`/api/tasks${H?`?${H}`:""}`;return(await fetch(je)).json()},staleTime:0,gcTime:0}),q=Array.isArray(Y)?Y:[];console.log("UltraFastTasks - Tasks loaded:",q.length,"tasks");const{data:re=[]}=ye({queryKey:["/api/properties"]}),{data:we=[]}=ye({queryKey:["/api/users"]}),K=Array.isArray(re)?re:[],Ce=Array.isArray(we)?we:[],pe=b.useMemo(()=>{const je=new Map;return K.forEach(it=>{je.set(it.id,it.name)}),je},[K]),F=b.useMemo(()=>{const je=new Map;return Ce.forEach(it=>{je.set(it.id,it.name)}),je},[Ce]),Q=b.useMemo(()=>q.map(je=>({...je,propertyName:pe.get(je.propertyId)||`Property ${je.propertyId}`,assigneeName:je.assignedTo?F.get(je.assignedTo)||"Unknown User":"Unassigned"})),[q,pe,F]),Z=b.useMemo(()=>Q.filter(je=>{const it=!U||je.propertyId===Number(U),Js=s===""||je.title&&je.title.toLowerCase().includes(s.toLowerCase())||je.description&&je.description.toLowerCase().includes(s.toLowerCase())||je.propertyName&&je.propertyName.toLowerCase().includes(s.toLowerCase()),Se=r==="all"||je.status===r,Ps=i==="all"||je.priority===i,Lr=o==="all"||je.type===o;return it&&Js&&Se&&Ps&&Lr}),[Q,s,r,i,o,U]),le=b.useMemo(()=>({totalTasks:Q.length,pendingTasks:Q.filter(je=>je.status==="pending").length,inProgressTasks:Q.filter(je=>je.status==="in-progress").length,completedTasks:Q.filter(je=>je.status==="completed").length,overdueTasks:Q.filter(je=>je.dueDate?new Date(je.dueDate)<new Date&&je.status!=="completed":!1).length,highPriorityTasks:Q.filter(je=>je.priority==="high"||je.priority==="urgent").length}),[Q]),oe=je=>{switch(je){case"pending":return"bg-yellow-100 text-yellow-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Ae=je=>{switch(je){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-orange-100 text-orange-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ge=je=>{switch(je){case"pending":return e.jsx(et,{className:"h-4 w-4"});case"in-progress":return e.jsx(Ws,{className:"h-4 w-4"});case"completed":return e.jsx(ni,{className:"h-4 w-4"});default:return e.jsx(Et,{className:"h-4 w-4"})}},xe=je=>{try{return new Date(je).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return je}},$e=Ee({mutationFn:async je=>await ve("PUT",`/api/tasks/${je}`,{status:"completed"}),onSuccess:async()=>{await P.invalidateQueries({queryKey:["/api/tasks"]}),await P.refetchQueries({queryKey:["/api/tasks"]}),t!=null&&t.id&&(console.log(" Task completed! Invalidating achievement cache for user:",t.id),await P.invalidateQueries({queryKey:[`/api/achievements/user/${t.id}`]}),await P.invalidateQueries({queryKey:["/api/achievements/definitions"]}),await P.refetchQueries({queryKey:[`/api/achievements/user/${t.id}`]})),C({title:"Success",description:"Task completed successfully"})},onError:je=>{C({title:"Error",description:je.message||"Failed to complete task",variant:"destructive"})}}),ke=Ee({mutationFn:async({id:je,data:it})=>await ve("PUT",`/api/tasks/${je}`,it),onSuccess:async(je,it)=>{await P.invalidateQueries({queryKey:["/api/tasks"]}),await P.refetchQueries({queryKey:["/api/tasks"]}),(it.data.status==="completed"||it.data.status==="approved")&&(t!=null&&t.id)&&(console.log(" Task status updated! Invalidating achievement cache for user:",t.id,"status:",it.data.status),await P.invalidateQueries({queryKey:[`/api/achievements/user/${t.id}`]}),await P.invalidateQueries({queryKey:["/api/achievements/definitions"]}),await P.refetchQueries({queryKey:[`/api/achievements/user/${t.id}`]})),y(!1),w(null),S({}),T([]),C({title:"Success",description:"Task updated successfully"})},onError:je=>{C({title:"Error",description:je.message||"Failed to update task",variant:"destructive"})}}),Ze=Ee({mutationFn:async()=>(P.invalidateQueries({queryKey:["/api/tasks"]}),"refreshed"),onSuccess:()=>{C({title:"Tasks Refreshed",description:"Task list updated with latest data"})}}),gt=Ee({mutationFn:async()=>await ve("DELETE","/api/tasks/bulk-delete/expired"),onSuccess:je=>{P.invalidateQueries({queryKey:["/api/tasks"]}),C({title:"Expired tasks deleted",description:`Successfully deleted ${(je==null?void 0:je.deletedCount)||0} expired tasks`}),j(!1)},onError:je=>{C({title:"Error deleting expired tasks",description:je.message||"Failed to delete expired tasks",variant:"destructive"})}}),Kt=Ee({mutationFn:async()=>await ve("DELETE","/api/tasks/bulk-delete/completed"),onSuccess:je=>{P.invalidateQueries({queryKey:["/api/tasks"]}),C({title:"Completed tasks deleted",description:`Successfully deleted ${(je==null?void 0:je.deletedCount)||0} completed tasks`}),j(!1)},onError:je=>{C({title:"Error deleting completed tasks",description:je.message||"Failed to delete completed tasks",variant:"destructive"})}}),be=Ee({mutationFn:async()=>await ve("DELETE","/api/tasks/bulk-delete/old"),onSuccess:je=>{P.invalidateQueries({queryKey:["/api/tasks"]}),C({title:"Old tasks deleted",description:`Successfully deleted ${(je==null?void 0:je.deletedCount)||0} old tasks`}),j(!1)},onError:je=>{C({title:"Error deleting old tasks",description:je.message||"Failed to delete old tasks",variant:"destructive"})}}),J=je=>{console.log(" Complete task button clicked! Task ID:",je),$e.mutate(je)},Ne=je=>{console.log(" Edit task button clicked! Task ID:",je);const it=Q.find(Js=>Js.id===je);it&&(w(it),S({title:it.title||"",description:it.description||"",type:it.type||"maintenance",priority:it.priority||"medium",status:it.status||"pending",assignedTo:it.assignedTo||"",dueDate:it.dueDate?it.dueDate.split("T")[0]:"",propertyId:it.propertyId||""}),T(it.evidencePhotos||[]),y(!0))},De=je=>{const it=je.target.files;if(!it)return;const Js=["image/jpeg","image/jpg","image/png"],Se=6,Ps=1920,Lr=1080;if(k.length+it.length>Se){C({title:"Too many photos",description:`You can upload a maximum of ${Se} photos per task. Currently have ${k.length} photo(s).`,variant:"destructive"}),je.target.value="";return}Array.from(it).forEach(ji=>{if(!Js.includes(ji.type)){C({title:"Invalid file type",description:"Only .jpg and .png files are allowed",variant:"destructive"});return}const bi=new FileReader;bi.onloadend=()=>{if(bi.result){const ca=new Image;ca.onload=()=>{if(ca.width>Ps||ca.height>Lr){C({title:"Photo too large",description:`Photo dimensions must not exceed ${Ps}${Lr} pixels (Full HD). This photo is ${ca.width}${ca.height} pixels.`,variant:"destructive"});return}T(nl=>[...nl,bi.result])},ca.src=bi.result}},bi.readAsDataURL(ji)}),je.target.value=""},We=je=>{T(it=>it.filter((Js,Se)=>Se!==je))},qe=()=>{if(v){const je={};N.title&&(je.title=N.title),N.description&&(je.description=N.description),N.type&&(je.type=N.type),N.priority&&(je.priority=N.priority),N.status&&(je.status=N.status),N.assignedTo&&(je.assignedTo=N.assignedTo),N.propertyId&&(je.propertyId=N.propertyId),N.dueDate&&(je.dueDate=new Date(N.dueDate)),je.evidencePhotos=k,console.log("Sending update data:",je),ke.mutate({id:v.id,data:je})}},Le=()=>{Ze.mutate()},pt=()=>{gt.mutate()},Qt=()=>{Kt.mutate()},as=()=>{be.mutate()};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Task Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage all property maintenance and operational tasks"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",onClick:Le,disabled:Ze.isPending,className:"gap-2",children:[e.jsx(Ss,{className:`h-4 w-4 ${Ze.isPending?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>{console.log("Create Task button clicked"),p(!0),console.log("Dialog state should be:",!0)},className:"gap-2","data-testid":"button-create-task",children:[e.jsx(bt,{className:"h-4 w-4"}),"Create Task"]}),e.jsxs(M,{onClick:()=>j(!0),variant:"outline",className:"gap-2 border-red-200 text-red-600 hover:bg-red-50",children:[e.jsx(br,{className:"h-4 w-4"}),"Bulk Actions"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:le.totalTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All tasks"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending"}),e.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:le.pendingTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting start"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:le.inProgressTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Completed"}),e.jsx(ni,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:le.completedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recently finished"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"High Priority"}),e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:le.highPriorityTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Urgent attention"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:le.overdueTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Past due date"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(G,{placeholder:"Search tasks by title, description, or property...",className:"pl-10",value:s,onChange:je=>n(je.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(fp,{children:[e.jsx(gp,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-44",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),d==="all"&&"All Dates",d==="today"&&"Today",d==="this-week"&&"This Week",d==="next-7-days"&&"Next 7 Days",d==="next-30-days"&&"Next 30 Days",d==="next-90-days"&&"Next 90 Days",d==="custom"&&"Custom Range"]})}),e.jsxs(pm,{align:"end",children:[e.jsx(xr,{onClick:()=>I("all"),children:"All Dates"}),e.jsx(xr,{onClick:()=>I("today"),children:"Today"}),e.jsx(xr,{onClick:()=>I("this-week"),children:"This Week"}),e.jsx(xr,{onClick:()=>I("next-7-days"),children:"Next 7 Days"}),e.jsx(xr,{onClick:()=>I("next-30-days"),children:"Next 30 Days"}),e.jsx(xr,{onClick:()=>I("next-90-days"),children:"Next 90 Days"})]})]}),e.jsxs(se,{value:r,onValueChange:a,children:[e.jsxs(ee,{className:"w-40",children:[e.jsx(Zi,{className:"h-4 w-4 mr-2"}),e.jsx(ne,{placeholder:"Status"})]}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"in-progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"})]})]}),e.jsxs(se,{value:i,onValueChange:l,children:[e.jsx(ee,{className:"w-40",children:e.jsx(ne,{placeholder:"Priority"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Priority"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"low",children:"Low"})]})]}),e.jsxs(se,{value:o,onValueChange:c,children:[e.jsx(ee,{className:"w-40",children:e.jsx(ne,{placeholder:"Type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"landscaping",children:"Landscaping"}),e.jsx(A,{value:"technology",children:"Technology"}),e.jsx(A,{value:"security",children:"Security"})]})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{children:["Tasks (",Z.length,")"]}),e.jsx(Me,{children:"Manage all property tasks and assignments"})]}),e.jsx(D,{children:Z.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ws,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or create a new task."}),e.jsxs(M,{onClick:()=>p(!0),children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Create New Task"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Task"}),e.jsx(Re,{children:"Property"}),e.jsx(Re,{children:"Assignee"}),e.jsx(Re,{children:"Type"}),e.jsx(Re,{children:"Priority"}),e.jsx(Re,{children:"Due Date"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:[...Z].sort((je,it)=>new Date(it.dueDate).getTime()-new Date(je.dueDate).getTime()).map(je=>e.jsxs(Ot,{children:[e.jsx(Oe,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:je.title||"Untitled Task"}),e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:je.description||"No description"}),je.estimatedCost&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:e.jsxs("span",{children:["",parseFloat(je.estimatedCost||0).toLocaleString()]})})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:je.propertyName})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:je.assigneeName})]})}),e.jsx(Oe,{children:e.jsx(z,{variant:"outline",className:"capitalize",children:(je.type||"").replace("-"," ")})}),e.jsx(Oe,{children:e.jsx(z,{className:Ae(je.priority||"medium"),children:je.priority||"medium"})}),e.jsx(Oe,{children:e.jsx("div",{className:"text-sm",children:je.dueDate?xe(je.dueDate):"No due date"})}),e.jsx(Oe,{children:e.jsx(z,{className:oe(je.status||"pending"),children:e.jsxs("span",{className:"flex items-center gap-1",children:[ge(je.status||"pending"),(je.status||"pending").replace("-"," ")]})})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>Ne(je.id),children:"Edit"}),je.status!=="completed"&&e.jsx(M,{variant:"default",size:"sm",onClick:()=>J(je.id),disabled:$e.isPending,children:$e.isPending?"Completing...":"Complete"})]})})]},je.id))})]})})})]}),e.jsx(P0,{isOpen:x,onOpenChange:p,onCreated:()=>{P.invalidateQueries({queryKey:["/api/tasks"],exact:!1}),P.refetchQueries({queryKey:["/api/tasks"],exact:!1})}}),e.jsx(Ke,{open:f,onOpenChange:j,children:e.jsxs(Ye,{className:"sm:max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Bulk Task Management"}),e.jsxs(Rt,{children:["Clean up old tasks to improve performance. We currently have"," ",q.length," tasks."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs(M,{onClick:pt,variant:"destructive",className:"w-full",disabled:gt.isPending,children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),gt.isPending?"Deleting...":"Delete Expired Tasks (30+ days old)"]}),e.jsxs(M,{onClick:Qt,variant:"outline",className:"w-full border-orange-200 text-orange-600 hover:bg-orange-50",disabled:Kt.isPending,children:[e.jsx(ni,{className:"mr-2 h-4 w-4"}),Kt.isPending?"Deleting...":"Delete All Completed Tasks"]}),e.jsxs(M,{onClick:as,variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50",disabled:be.isPending,children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),be.isPending?"Deleting...":"Delete Tasks Older Than 90 Days"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{children:" Expired tasks: Tasks older than 30 days"}),e.jsx("p",{children:" Completed tasks: All tasks marked as completed"}),e.jsx("p",{children:" Old tasks: All tasks older than 90 days regardless of status"})]})]}),e.jsx(ir,{children:e.jsx(M,{variant:"outline",onClick:()=>j(!1),children:"Cancel"})})]})}),e.jsx(Ke,{open:g,onOpenChange:y,children:e.jsxs(Ye,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Edit Task"}),e.jsx(Rt,{children:"Update task details and save changes"})]}),e.jsxs("div",{className:"grid gap-4 py-4 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"title",className:"text-right font-medium",children:"Title"}),e.jsx(G,{id:"title",value:N.title||"",onChange:je=>S({...N,title:je.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"description",className:"text-right font-medium",children:"Description"}),e.jsx(G,{id:"description",value:N.description||"",onChange:je=>S({...N,description:je.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"type",className:"text-right font-medium",children:"Type"}),e.jsxs(se,{value:N.type||"maintenance",onValueChange:je=>S({...N,type:je}),children:[e.jsx(ee,{className:"col-span-3",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"inspection",children:"Inspection"}),e.jsx(A,{value:"repair",children:"Repair"}),e.jsx(A,{value:"setup",children:"Setup"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"priority",className:"text-right font-medium",children:"Priority"}),e.jsxs(se,{value:N.priority||"medium",onValueChange:je=>S({...N,priority:je}),children:[e.jsx(ee,{className:"col-span-3",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"low",children:"Low"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"status",className:"text-right font-medium",children:"Status"}),e.jsxs(se,{value:N.status||"pending",onValueChange:je=>S({...N,status:je}),children:[e.jsx(ee,{className:"col-span-3",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"approved",children:"Approved"}),e.jsx(A,{value:"in-progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"assignedTo",className:"text-right font-medium",children:"Assignee"}),e.jsxs(se,{value:N.assignedTo||"",onValueChange:je=>S({...N,assignedTo:je}),children:[e.jsx(ee,{className:"col-span-3",children:e.jsx(ne,{placeholder:"Select assignee"})}),e.jsx(te,{children:Ce.filter(je=>je.role==="staff"||je.role==="admin").map(je=>e.jsxs(A,{value:je.id,children:[je.firstName," ",je.lastName]},je.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"dueDate",className:"text-right font-medium",children:"Due Date"}),e.jsx(G,{id:"dueDate",type:"date",value:N.dueDate||"",onChange:je=>S({...N,dueDate:je.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"propertyId",className:"text-right font-medium",children:"Property"}),e.jsxs(se,{value:((In=N.propertyId)==null?void 0:In.toString())||"",onValueChange:je=>S({...N,propertyId:parseInt(je)}),children:[e.jsx(ee,{className:"col-span-3",children:e.jsx(ne,{placeholder:"Select property"})}),e.jsx(te,{children:K.map(je=>e.jsx(A,{value:je.id.toString(),children:je.name},je.id))})]})]}),k.length>0&&e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx("label",{className:"text-right font-medium pt-2",children:"Evidence Photos"}),e.jsx("div",{className:"col-span-3",children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:k.map((je,it)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:je,alt:`Evidence ${it+1}`,className:"w-full h-20 object-cover rounded border"}),e.jsx("button",{onClick:()=>We(it),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`button-remove-photo-${it}`,children:e.jsx(on,{className:"h-3 w-3"})})]},it))})})]})]}),e.jsxs(ir,{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",id:"evidence-upload",accept:".jpg, .jpeg,.png, .pdf",multiple:!0,onChange:De,className:"hidden","data-testid":"input-evidence-upload"}),e.jsxs(M,{variant:"outline",onClick:()=>{var je;return(je=document.getElementById("evidence-upload"))==null?void 0:je.click()},className:"bg-blue-600 text-white hover:bg-blue-700",disabled:k.length>=10,"data-testid":"button-upload-evidence",children:[e.jsx(mi,{className:"h-4 w-4 mr-2"}),"Upload Evidence"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[k.length,"/10 photos"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>{y(!1),T([])},children:"Cancel"}),e.jsx(M,{onClick:qe,disabled:ke.isPending,children:ke.isPending?"Saving...":"Save Changes"})]})]})]})})]})}function Cr(){const{data:t,isLoading:s}=ye({queryKey:["/api/auth/user"],retry:!1});return{user:t,isLoading:s,isAuthenticated:!!t}}function ioe(){return W3.useSyncExternalStore(loe,()=>!0,()=>!1)}function loe(){return()=>{}}var $P="Avatar",[ooe]=Pn($P),[coe,dV]=ooe($P),uV=b.forwardRef((t,s)=>{const{__scopeAvatar:n,...r}=t,[a,i]=b.useState("idle");return e.jsx(coe,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(st.span,{...r,ref:s})})});uV.displayName=$P;var mV="AvatarImage",hV=b.forwardRef((t,s)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=t,l=dV(mV,n),o=doe(r,i),c=an(d=>{a(d),l.onImageLoadingStatusChange(d)});return cn(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?e.jsx(st.img,{...i,ref:s,src:r}):null});hV.displayName=mV;var xV="AvatarFallback",pV=b.forwardRef((t,s)=>{const{__scopeAvatar:n,delayMs:r,...a}=t,i=dV(xV,n),[l,o]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)}},[r]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(st.span,{...a,ref:s}):null});pV.displayName=xV;function DE(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function doe(t,{referrerPolicy:s,crossOrigin:n}){const r=ioe(),a=b.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[l,o]=b.useState(()=>DE(i,t));return cn(()=>{o(DE(i,t))},[i,t]),cn(()=>{const c=m=>()=>{o(m)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),s&&(i.referrerPolicy=s),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,n,s]),l}var fV=uV,gV=hV,vV=pV;const ai=b.forwardRef(({className:t,...s},n)=>e.jsx(fV,{ref:n,className:Ue("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));ai.displayName=fV.displayName;const _d=b.forwardRef(({className:t,...s},n)=>e.jsx(gV,{ref:n,className:Ue("aspect-square h-full w-full",t),...s}));_d.displayName=gV.displayName;const ii=b.forwardRef(({className:t,...s},n)=>e.jsx(vV,{ref:n,className:Ue("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));ii.displayName=vV.displayName;function uoe(t,s){return b.useReducer((n,r)=>s[n][r]??n,t)}var FP="ScrollArea",[yV]=Pn(FP),[moe,Ia]=yV(FP),jV=b.forwardRef((t,s)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...l}=t,[o,c]=b.useState(null),[d,u]=b.useState(null),[m,h]=b.useState(null),[x,p]=b.useState(null),[f,j]=b.useState(null),[g,y]=b.useState(0),[v,w]=b.useState(0),[N,S]=b.useState(!1),[k,T]=b.useState(!1),C=kt(s,$=>c($)),P=mh(a);return e.jsx(moe,{scope:n,type:r,dir:P,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:u,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:f,onScrollbarYChange:j,scrollbarYEnabled:k,onScrollbarYEnabledChange:T,onCornerWidthChange:y,onCornerHeightChange:w,children:e.jsx(st.div,{dir:P,...l,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":v+"px",...t.style}})})});jV.displayName=FP;var bV="ScrollAreaViewport",NV=b.forwardRef((t,s)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=t,l=Ia(bV,n),o=b.useRef(null),c=kt(s,o,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(st.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});NV.displayName=bV;var el="ScrollAreaScrollbar",LP=b.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=Ia(el,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=t.orientation==="horizontal";return b.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?e.jsx(hoe,{...r,ref:s,forceMount:n}):a.type==="scroll"?e.jsx(xoe,{...r,ref:s,forceMount:n}):a.type==="auto"?e.jsx(wV,{...r,ref:s,forceMount:n}):a.type==="always"?e.jsx(BP,{...r,ref:s}):null});LP.displayName=el;var hoe=b.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=Ia(el,t.__scopeScrollArea),[i,l]=b.useState(!1);return b.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(An,{present:n||i,children:e.jsx(wV,{"data-state":i?"visible":"hidden",...r,ref:s})})}),xoe=b.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=Ia(el,t.__scopeScrollArea),i=t.orientation==="horizontal",l=T0(()=>c("SCROLL_END"),100),[o,c]=uoe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),b.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const h=()=>{const x=d[u];m!==x&&(c("SCROLL"),l()),m=x};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,l]),e.jsx(An,{present:n||o!=="hidden",children:e.jsx(BP,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:s,onPointerEnter:Be(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Be(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),wV=b.forwardRef((t,s)=>{const n=Ia(el,t.__scopeScrollArea),{forceMount:r,...a}=t,[i,l]=b.useState(!1),o=t.orientation==="horizontal",c=T0(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;l(o?d:u)}},10);return Sm(n.viewport,c),Sm(n.content,c),e.jsx(An,{present:r||i,children:e.jsx(BP,{"data-state":i?"visible":"hidden",...a,ref:s})})}),BP=b.forwardRef((t,s)=>{const{orientation:n="vertical",...r}=t,a=Ia(el,t.__scopeScrollArea),i=b.useRef(null),l=b.useRef(0),[o,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=AV(o.viewport,o.content),u={...r,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function m(h,x){return joe(h,l.current,o,x)}return n==="horizontal"?e.jsx(poe,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,x=EE(h,o,a.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):n==="vertical"?e.jsx(foe,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,x=EE(h,o);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),poe=b.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...a}=t,i=Ia(el,t.__scopeScrollArea),[l,o]=b.useState(),c=b.useRef(null),d=kt(s,c,i.onScrollbarXChange);return b.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(CV,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":A0(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),DV(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:yy(l.paddingLeft),paddingEnd:yy(l.paddingRight)}})}})}),foe=b.forwardRef((t,s)=>{const{sizes:n,onSizesChange:r,...a}=t,i=Ia(el,t.__scopeScrollArea),[l,o]=b.useState(),c=b.useRef(null),d=kt(s,c,i.onScrollbarYChange);return b.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(CV,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":A0(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),DV(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:yy(l.paddingTop),paddingEnd:yy(l.paddingBottom)}})}})}),[goe,SV]=yV(el),CV=b.forwardRef((t,s)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...h}=t,x=Ia(el,n),[p,f]=b.useState(null),j=kt(s,C=>f(C)),g=b.useRef(null),y=b.useRef(""),v=x.viewport,w=r.content-r.viewport,N=an(u),S=an(c),k=T0(m,10);function T(C){if(g.current){const P=C.clientX-g.current.left,$=C.clientY-g.current.top;d({x:P,y:$})}}return b.useEffect(()=>{const C=P=>{const $=P.target;(p==null?void 0:p.contains($))&&N(P,w)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,p,w,N]),b.useEffect(S,[r,S]),Sm(p,k),Sm(x.content,k),e.jsx(goe,{scope:n,scrollbar:p,hasThumb:a,onThumbChange:an(i),onThumbPointerUp:an(l),onThumbPositionChange:S,onThumbPointerDown:an(o),children:e.jsx(st.div,{...h,ref:j,style:{position:"absolute",...h.style},onPointerDown:Be(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),T(C))}),onPointerMove:Be(t.onPointerMove,T),onPointerUp:Be(t.onPointerUp,C=>{const P=C.target;P.hasPointerCapture(C.pointerId)&&P.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,x.viewport&&(x.viewport.style.scrollBehavior=""),g.current=null})})})}),vy="ScrollAreaThumb",kV=b.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=SV(vy,t.__scopeScrollArea);return e.jsx(An,{present:n||a.hasThumb,children:e.jsx(voe,{ref:s,...r})})}),voe=b.forwardRef((t,s)=>{const{__scopeScrollArea:n,style:r,...a}=t,i=Ia(vy,n),l=SV(vy,n),{onThumbPositionChange:o}=l,c=kt(s,m=>l.onThumbChange(m)),d=b.useRef(void 0),u=T0(()=>{d.current&&(d.current(),d.current=void 0)},100);return b.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(u(),!d.current){const x=boe(m,o);d.current=x,o()}};return o(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,u,o]),e.jsx(st.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Be(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),p=m.clientX-x.left,f=m.clientY-x.top;l.onThumbPointerDown({x:p,y:f})}),onPointerUp:Be(t.onPointerUp,l.onThumbPointerUp)})});kV.displayName=vy;var VP="ScrollAreaCorner",PV=b.forwardRef((t,s)=>{const n=Ia(VP,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?e.jsx(yoe,{...t,ref:s}):null});PV.displayName=VP;var yoe=b.forwardRef((t,s)=>{const{__scopeScrollArea:n,...r}=t,a=Ia(VP,n),[i,l]=b.useState(0),[o,c]=b.useState(0),d=!!(i&&o);return Sm(a.scrollbarX,()=>{var m;const u=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Sm(a.scrollbarY,()=>{var m;const u=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(u),l(u)}),d?e.jsx(st.div,{...r,ref:s,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function yy(t){return t?parseInt(t,10):0}function AV(t,s){const n=t/s;return isNaN(n)?0:n}function A0(t){const s=AV(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*s;return Math.max(r,18)}function joe(t,s,n,r="ltr"){const a=A0(n),i=a/2,l=s||i,o=a-l,c=n.scrollbar.paddingStart+l,d=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,m=r==="ltr"?[0,u]:[u*-1,0];return TV([c,d],m)(t)}function EE(t,s,n="ltr"){const r=A0(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,l=s.content-s.viewport,o=i-r,c=n==="ltr"?[0,l]:[l*-1,0],d=p2(t,c);return TV([0,l],[0,o])(d)}function TV(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(n-t[0])}}function DV(t,s){return t>0&&t<s}var boe=(t,s=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},l=n.left!==i.left,o=n.top!==i.top;(l||o)&&s(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function T0(t,s){const n=an(t),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,s)},[n,s])}function Sm(t,s){const n=an(s);cn(()=>{let r=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(t),()=>{window.cancelAnimationFrame(r),a.unobserve(t)}}},[t,n])}var EV=jV,Noe=NV,woe=PV;const Cm=b.forwardRef(({className:t,children:s,...n},r)=>e.jsxs(EV,{ref:r,className:Ue("relative overflow-hidden",t),...n,children:[e.jsx(Noe,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(OV,{}),e.jsx(woe,{})]}));Cm.displayName=EV.displayName;const OV=b.forwardRef(({className:t,orientation:s="vertical",...n},r)=>e.jsx(LP,{ref:r,orientation:s,className:Ue("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:e.jsx(kV,{className:"relative flex-1 rounded-full bg-border"})}));OV.displayName=LP.displayName;function Soe(){const[t,s]=b.useState({isOpen:!1,type:null,lastOpenTime:null}),[n,r]=b.useState(!1);b.useEffect(()=>{if(t.isOpen&&t.lastOpenTime){const o=setTimeout(()=>{Date.now()-t.lastOpenTime>1500&&r(!0)},1600);return()=>clearTimeout(o)}else r(!1)},[t.isOpen,t.lastOpenTime]),b.useEffect(()=>{const o=c=>{c.key==="Escape"&&t.isOpen&&l()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t.isOpen]);const a=b.useCallback(o=>{s({isOpen:!0,type:o,lastOpenTime:Date.now()}),r(!1)},[]),i=b.useCallback(()=>{s({isOpen:!1,type:null,lastOpenTime:null}),r(!1)},[]),l=b.useCallback(()=>{document.querySelectorAll("[data-radix-popper-content-wrapper]").forEach(u=>u.remove()),document.querySelectorAll("[data-radix-portal]").forEach(u=>u.remove()),s({isOpen:!1,type:null,lastOpenTime:null}),r(!1),document.body.style.overflow="",document.body.style.pointerEvents="";const d=document.body;d.style.position="",d.style.zIndex=""},[]);return{modalState:t,isStuck:n,openModal:a,closeModal:i,forceCloseAll:l}}function Coe(){const t=yt(),{openModal:s,closeModal:n}=Soe(),{isAuthenticated:r}=Cr(),[a,i]=b.useState(!1),{data:l=[]}=ye({queryKey:["/api/notifications"],staleTime:10*60*1e3,refetchOnMount:!1,enabled:r&&a}),{data:o=[]}=ye({queryKey:["/api/notifications/unread"],refetchInterval:r&&a?6e4:!1,staleTime:5*60*1e3,refetchOnMount:!1,enabled:r&&a}),c=Ee({mutationFn:async j=>ve("POST",`/api/notifications/${j}/read`),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),d=Ee({mutationFn:async()=>ve("POST","/api/notifications/read-all"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),u=Ee({mutationFn:async j=>ve("DELETE",`/api/notifications/${j}`),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),m=j=>{switch(j){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"normal":return"bg-blue-500";case"low":return"bg-gray-500";default:return"bg-blue-500"}},h=j=>{switch(j){case"task_assignment":return"";case"booking_update":return"";case"payout_action":return"";case"maintenance_approval":return"";default:return""}},x=j=>{j.isRead||c.mutate(j.id),j.actionUrl&&(window.location.href=j.actionUrl)},p=o.length,f=j=>{i(j),j?s("notifications"):n()};return e.jsxs(fp,{open:a,onOpenChange:f,children:[e.jsx(gp,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"icon",className:"relative",children:[e.jsx(xn,{className:"h-4 w-4"}),p>0&&e.jsx(z,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:p>99?"99+":p})]})}),e.jsxs(pm,{align:"end",className:"w-80",children:[e.jsxs(vp,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Notifications"}),p>0&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:j=>{j.preventDefault(),j.stopPropagation(),d.mutate()},disabled:d.isPending,children:[e.jsx(Qj,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),e.jsx(Bo,{}),!Array.isArray(l)||l.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):e.jsx(Cm,{className:"h-96",children:l.slice(0,10).map(j=>e.jsx(xr,{className:"flex flex-col items-start p-3 cursor-pointer relative",onSelect:g=>g.preventDefault(),onClick:g=>{g.stopPropagation(),x(j)},children:e.jsxs("div",{className:"flex items-start justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("span",{className:"text-lg",children:h(j.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:j.title}),!j.isRead&&e.jsx("div",{className:`w-2 h-2 rounded-full ${m(j.priority)}`})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:j.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:jp(new Date(j.createdAt),{addSuffix:!0})})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!j.isRead&&e.jsx(M,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),c.mutate(j.id)},disabled:c.isPending,className:"h-6 w-6 p-0",children:e.jsx(Gt,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),u.mutate(j.id)},disabled:u.isPending,className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:e.jsx(on,{className:"h-3 w-3"})})]})]})},j.id))}),Array.isArray(l)&&l.length>10&&e.jsxs(e.Fragment,{children:[e.jsx(Bo,{}),e.jsx(xr,{className:"text-center text-muted-foreground",children:"Showing latest 10 notifications"})]})]})]})}function koe({isOpen:t,onClose:s}){const[n,r]=b.useState(""),[,a]=Yn(),{data:i=[],isLoading:l}=ye({queryKey:[`/api/global-search?q=${encodeURIComponent(n)}`],enabled:n.length>2&&n.trim().length>0}),o=m=>{a(m.path),s()},c=m=>{m.key==="Escape"?s():m.key==="Enter"&&i.length>0&&o(i[0])};b.useEffect(()=>{t&&r("")},[t]);const d=m=>{switch(m){case"property":return fn;case"booking":return tt;case"task":return wl;case"user":return dt;case"finance":return Je;default:return hs}},u=m=>{switch(m){case"property":return"Property";case"booking":return"Booking";case"task":return"Task";case"user":return"User";case"finance":return"Finance";default:return"Result"}};return e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"max-w-2xl p-0 flex flex-col",style:{maxHeight:"80vh"},children:[e.jsx(Qe,{className:"px-6 py-4 border-b shrink-0",children:e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-5 w-5"}),"Global Search"]})}),e.jsx("div",{className:"px-6 py-4 border-b shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(G,{placeholder:"Search properties, bookings, tasks, users, finance records...",value:n,onChange:m=>r(m.target.value),onKeyDown:c,className:"pl-9 pr-4",autoFocus:!0}),n&&e.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>r(""),children:e.jsx(on,{className:"h-3 w-3"})})]})}),e.jsx("div",{className:"px-6 py-4 overflow-y-auto flex-1 min-h-0",children:l?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching..."})]}):n.length<=2?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(hs,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type at least 3 characters to search"}),e.jsxs("div",{className:"mt-4 text-xs text-muted-foreground",children:[e.jsx("p",{children:"Search across:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-2",children:[e.jsx(z,{variant:"outline",className:"text-xs",children:"Properties"}),e.jsx(z,{variant:"outline",className:"text-xs",children:"Bookings"}),e.jsx(z,{variant:"outline",className:"text-xs",children:"Tasks"}),e.jsx(z,{variant:"outline",className:"text-xs",children:"Users"}),e.jsx(z,{variant:"outline",className:"text-xs",children:"Finance"})]})]})]}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(hs,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:['No results found for "',n,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Try different keywords or check spelling"})]}):e.jsx("div",{className:"space-y-2",children:i.map(m=>{const h=d(m.type);return e.jsx("div",{className:"p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>o(m),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-primary/10",children:e.jsx(h,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:m.title}),e.jsx(z,{variant:"secondary",className:"text-xs",children:u(m.type)}),m.badge&&e.jsx(z,{variant:m.badge.variant,className:"text-xs",children:m.badge.text})]}),m.subtitle&&e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:m.subtitle}),m.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m.description})]})]})})},`${m.type}-${m.id}`)})})}),i.length>0&&e.jsx("div",{className:"px-6 py-3 border-t bg-muted/30 shrink-0",children:e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border rounded",children:"Enter"})," to open first result,",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border rounded ml-1",children:"Esc"})," to close"]})})]})})}function Poe(){const[t,s]=b.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"ghost",size:"sm",className:"hidden md:flex h-8 w-8 p-0",onClick:()=>s(!0),title:"Global Search (Ctrl+K)",children:e.jsx(hs,{className:"h-4 w-4"})}),e.jsx(koe,{isOpen:t,onClose:()=>s(!1)})]})}const Aoe={admin:qt,"portfolio-manager":hX,owner:fn,staff:Cf,"retail-agent":yr,"referral-agent":dt,guest:et},Toe={admin:"bg-red-500","portfolio-manager":"bg-blue-500",owner:"bg-green-500",staff:"bg-yellow-500","retail-agent":"bg-purple-500","referral-agent":"bg-orange-500",guest:"bg-gray-500"};function ec({title:t,subtitle:s,action:n}){const{user:r}=Cr(),[,a]=Yn(),i=(r==null?void 0:r.role)||"guest",l=Aoe[i]||et,o=Toe[i]||"bg-gray-500",c=Ee({mutationFn:async()=>await ve("POST","/api/auth/demo-logout",{}),onSuccess:()=>{window.location.href="/"}});return e.jsx("header",{className:"sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800 bg-white/95 dark:bg-gray-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-gray-900/60 shadow-sm",children:e.jsxs("div",{className:"flex h-14 items-center gap-4 px-4 lg:px-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate lg:text-xl",children:t}),s&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s})]})})}),e.jsx("div",{className:"flex items-center gap-2",children:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Poe,{}),e.jsx(Coe,{}),e.jsx(M,{variant:"ghost",size:"sm",className:"hidden sm:flex h-8 w-8 p-0",onClick:()=>a("/help"),title:"Help Center",children:e.jsx(Zv,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"hidden sm:flex h-8 w-8 p-0",onClick:()=>a("/simple-settings"),title:"Settings",children:e.jsx(Jt,{className:"h-4 w-4"})}),e.jsxs(fp,{children:[e.jsx(gp,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:"flex items-center gap-3 pl-2 hover:bg-gray-100 dark:hover:bg-gray-800",children:[e.jsxs("div",{className:"hidden sm:block text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(z,{variant:"secondary",className:"text-xs",children:i==="portfolio-manager"?"PM":i==="retail-agent"?"Retail":i==="referral-agent"?"Referral":i.charAt(0).toUpperCase()+i.slice(1)})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(ai,{className:"h-8 w-8 lg:h-9 lg:w-9",children:[e.jsx(_d,{src:r==null?void 0:r.profileImageUrl}),e.jsx(ii,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-sm",children:((r==null?void 0:r.firstName)||"U").charAt(0)})]}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 ${o} rounded-full flex items-center justify-center border-2 border-white dark:border-gray-900`,children:e.jsx(l,{className:"w-1.5 h-1.5 text-white"})})]})]})}),e.jsxs(pm,{align:"end",className:"w-56",children:[e.jsx(vp,{children:"My Account"}),e.jsx(Bo,{}),e.jsxs(xr,{className:"flex items-center gap-2",onClick:()=>a("/profile"),children:[e.jsx(Ht,{className:"h-4 w-4"}),"Profile"]}),e.jsxs(xr,{className:"flex items-center gap-2",onClick:()=>{try{window.location.href="/settings"}catch(d){console.error("Settings navigation error:",d),window.location.href="/simple-settings"}},children:[e.jsx(Jt,{className:"h-4 w-4"}),"Settings"]}),e.jsx(Bo,{}),e.jsxs(xr,{className:"flex items-center gap-2 text-red-600 focus:text-red-600",onClick:()=>c.mutate(),disabled:c.isPending,children:[e.jsx(ga,{className:"h-4 w-4"}),c.isPending?"Logging out...":"Logout"]})]})]})]})]})})}function Dg({title:t,value:s,icon:n,color:r}){const a={primary:"bg-primary/10 text-primary",success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-600",accent:"bg-orange-100 text-orange-600"};return e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s})]}),e.jsx("div",{className:`p-3 rounded-lg ${a[r]}`,children:e.jsx(n,{className:"w-6 h-6"})})]})})})}const Es={auth:{user:()=>["/api/auth/user"]},properties:{all:()=>["/api/properties"],detail:t=>["/api/properties",t]},finance:{all:()=>["/api/finance"],analytics:t=>t?[`/api/finance/analytics?propertyId=${t}`]:["/api/finance/analytics"]},bookings:{all:()=>["/api/bookings"],withSource:t=>t?[`/api/bookings/with-source?propertyId=${t}`]:["/api/bookings/with-source"]},tasks:{all:()=>["/api/tasks"],byProperty:t=>["/api/tasks",{propertyId:t}]},utilities:{all:()=>["/api/utilities"],byProperty:t=>["/api/utilities",{propertyId:t}]},dashboard:{summary:()=>["/api/dashboard"]},documents:{all:()=>["/api/property-documents"],expiring:()=>["/api/property-documents/expiring"],byProperty:t=>["/api/property-documents",{propertyId:t}]},users:{all:()=>["/api/users"]}},MV=t=>{t.invalidateQueries({queryKey:Es.finance.all()}),t.invalidateQueries({predicate:s=>{const n=s.queryKey[0];return typeof n=="string"&&n.includes("/api/finance/analytics")}}),t.invalidateQueries({queryKey:Es.dashboard.summary()})},R2=t=>{t.invalidateQueries({queryKey:Es.properties.all()}),t.invalidateQueries({queryKey:Es.dashboard.summary()})},Np=t=>{t.invalidateQueries({queryKey:Es.bookings.all()}),t.invalidateQueries({predicate:s=>{const n=s.queryKey[0];return typeof n=="string"&&n.includes("/api/bookings/with-source")}}),t.invalidateQueries({queryKey:Es.finance.all()}),t.invalidateQueries({queryKey:Es.dashboard.summary()})};function D0({open:t,onOpenChange:s}){const[n,r]=b.useState({propertyId:"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:"",totalAmount:"",paymentStatus:"pending",amountPaid:"",specialRequests:""}),a=yt(),{toast:i}=at(),{user:l}=_a(),{data:o=[]}=ye({queryKey:["/api/properties"]}),c=Ee({mutationFn:async m=>await ve("POST","/api/bookings",m),onMutate:async m=>{try{await a.cancelQueries(Es.bookings.all())}catch{}await a.cancelQueries({queryKey:["/api/bookings"]});const h=a.getQueryData(Es.bookings.all()),x=a.getQueryData(["/api/bookings"]),p=m!=null&&m.propertyId?a.getQueryData(Es.bookings.withSource(String(m.propertyId))):null,f={id:-Date.now(),...m,totalAmount:String(m.totalAmount??"0"),createdAt:new Date().toISOString()};try{a.setQueryData(Es.bookings.all(),j=>j?[f,...j]:[f])}catch{a.setQueryData(["/api/bookings"],j=>j?[f,...j]:[f])}if(m!=null&&m.propertyId)try{a.setQueryData(Es.bookings.withSource(String(m.propertyId)),j=>j?[f,...j]:[f])}catch{}return{previousAll:h,previousApi:x,previousByProp:p}},onError:(m,h,x)=>{if(console.error("Booking creation error:",m),(x==null?void 0:x.previousAll)!==void 0)try{a.setQueryData(Es.bookings.all(),x.previousAll)}catch{a.setQueryData(["/api/bookings"],x.previousApi)}else(x==null?void 0:x.previousApi)!==void 0&&a.setQueryData(["/api/bookings"],x.previousApi);if((x==null?void 0:x.previousByProp)!==void 0&&(h!=null&&h.propertyId))try{a.setQueryData(Es.bookings.withSource(String(h.propertyId)),x.previousByProp)}catch{}i({title:"Error",description:(m==null?void 0:m.message)||"Failed to create booking",variant:"destructive"})},onSuccess:async m=>{try{a.setQueryData(Es.bookings.all(),h=>{if(!h)return[m];const x=h.filter(p=>!(typeof p.id=="number"&&p.id<0));return[m,...x]})}catch{a.setQueryData(["/api/bookings"],h=>{if(!h)return[m];const x=h.filter(p=>!(typeof p.id=="number"&&p.id<0));return[m,...x]})}Np(a),l!=null&&l.id&&(a.invalidateQueries({queryKey:[`/api/achievements/user/${l.id}`]}),a.invalidateQueries({queryKey:["/api/achievements/definitions"]})),i({title:"Success",description:`Booking created successfully for ${m.guestName}`}),s(!1),r({propertyId:"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:"",totalAmount:"",paymentStatus:"pending",amountPaid:"",specialRequests:""})},onSettled:()=>{try{Np(a)}catch{a.invalidateQueries({queryKey:["/api/bookings"]})}a.invalidateQueries({queryKey:["/api/properties"]})}}),d=m=>{if(m.preventDefault(),!n.propertyId){i({title:"Validation Error",description:"Please select a property",variant:"destructive"});return}if(!n.guestName){i({title:"Validation Error",description:"Guest name is required",variant:"destructive"});return}const h=parseFloat(n.totalAmount),x=parseFloat(n.amountPaid);if(isNaN(h)||!isFinite(h)){i({title:"Validation Error",description:"Total amount must be a valid number",variant:"destructive"});return}if(isNaN(x)||!isFinite(x)){i({title:"Validation Error",description:"Amount paid must be a valid number",variant:"destructive"});return}if(h<0){i({title:"Validation Error",description:"Total amount cannot be negative",variant:"destructive"});return}if(x<0){i({title:"Validation Error",description:"Amount paid cannot be negative",variant:"destructive"});return}if(x>h){i({title:"Validation Error",description:"Amount paid cannot exceed total amount",variant:"destructive"});return}const p=Math.max(0,h-x),f={propertyId:parseInt(n.propertyId),guestName:n.guestName,guestEmail:n.guestEmail||null,guestPhone:n.guestPhone||null,checkIn:n.checkIn,checkOut:n.checkOut,guests:parseInt(n.guests)||1,totalAmount:n.totalAmount||"0",paymentStatus:n.paymentStatus,amountPaid:n.amountPaid||"0",amountDue:p.toFixed(2),specialRequests:n.specialRequests||null};c.mutate(f)},u=(m,h)=>r(x=>({...x,[m]:h}));return e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"w-[95vw] max-w-2xl p-0 overflow-y-auto max-h-[90vh]",children:[e.jsx(Qe,{className:"sticky top-0 z-10 border-b bg-white/90 backdrop-blur px-6 py-4",children:e.jsx(Xe,{children:"Create New Booking"})}),e.jsxs("form",{onSubmit:d,className:"flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"propertyId",children:"Property"}),e.jsxs(se,{value:n.propertyId,onValueChange:m=>u("propertyId",m),required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsx(te,{children:Array.isArray(o)?o.map(m=>e.jsx(A,{value:m.id.toString(),children:m.name},m.id)):[]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guests",children:"Number of Guests"}),e.jsx(G,{id:"guests",type:"number",value:n.guests,onChange:m=>u("guests",m.target.value),placeholder:"1",min:"1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guestName",children:"Guest Name"}),e.jsx(G,{id:"guestName",value:n.guestName,onChange:m=>u("guestName",m.target.value),placeholder:"Full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guestEmail",children:"Guest Email"}),e.jsx(G,{id:"guestEmail",type:"email",value:n.guestEmail,onChange:m=>u("guestEmail",m.target.value),placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guestPhone",children:"Guest Phone"}),e.jsx(G,{id:"guestPhone",value:n.guestPhone,onChange:m=>u("guestPhone",m.target.value),placeholder:"+1234567890"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"checkIn",children:"Check-in Date"}),e.jsx(G,{id:"checkIn",type:"date",value:n.checkIn,onChange:m=>u("checkIn",m.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"checkOut",children:"Check-out Date"}),e.jsx(G,{id:"checkOut",type:"date",value:n.checkOut,onChange:m=>u("checkOut",m.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"totalAmount",children:"Total Amount"}),e.jsx(G,{id:"totalAmount",type:"number",step:"0.01",value:n.totalAmount,onChange:m=>u("totalAmount",m.target.value),placeholder:"0.00",min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"paymentStatus",children:"Payment Status"}),e.jsxs(se,{value:n.paymentStatus,onValueChange:m=>u("paymentStatus",m),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select payment status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"pending",children:"Payment Pending"}),e.jsx(A,{value:"partial",children:"Partial Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"amountPaid",children:"Amount Paid"}),e.jsx(G,{id:"amountPaid",type:"number",step:"0.01",value:n.amountPaid,onChange:m=>u("amountPaid",m.target.value),placeholder:"0.00",min:"0",max:n.totalAmount||void 0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"amountDue",children:"Amount Due"}),e.jsx(G,{id:"amountDue",type:"number",step:"0.01",value:(parseFloat(n.totalAmount)||0)-(parseFloat(n.amountPaid)||0),readOnly:!0,className:"bg-muted",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Auto-calculated: Total - Paid"})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"specialRequests",children:"Special Requests"}),e.jsx(mt,{id:"specialRequests",value:n.specialRequests,onChange:m=>u("specialRequests",m.target.value),placeholder:"Any special requests or notes...",rows:3})]})]}),e.jsxs("div",{className:"sticky bottom-0 z-10 flex items-center justify-end gap-2 border-t bg-white/90 backdrop-blur px-6 py-3",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:c.isPending,children:c.isPending?"Creating...":"Create Booking"})]})]})]})})}var E0="Tabs",[Doe]=Pn(E0,[xh]),_V=xh(),[Eoe,UP]=Doe(E0),RV=b.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=t,u=mh(o),[m,h]=ra({prop:r,onChange:a,defaultProp:i??"",caller:E0});return e.jsx(Eoe,{scope:n,baseId:Zr(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:c,children:e.jsx(st.div,{dir:u,"data-orientation":l,...d,ref:s})})});RV.displayName=E0;var IV="TabsList",$V=b.forwardRef((t,s)=>{const{__scopeTabs:n,loop:r=!0,...a}=t,i=UP(IV,n),l=_V(n);return e.jsx(lP,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:e.jsx(st.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});$V.displayName=IV;var FV="TabsTrigger",LV=b.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=t,l=UP(FV,n),o=_V(n),c=UV(l.baseId,r),d=zV(l.baseId,r),u=r===l.value;return e.jsx(oP,{asChild:!0,...o,focusable:!a,active:u,children:e.jsx(st.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:Be(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(r):m.preventDefault()}),onKeyDown:Be(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(r)}),onFocus:Be(t.onFocus,()=>{const m=l.activationMode!=="manual";!u&&!a&&m&&l.onValueChange(r)})})})});LV.displayName=FV;var BV="TabsContent",VV=b.forwardRef((t,s)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...l}=t,o=UP(BV,n),c=UV(o.baseId,r),d=zV(o.baseId,r),u=r===o.value,m=b.useRef(u);return b.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(An,{present:a||u,children:({present:h})=>e.jsx(st.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});VV.displayName=BV;function UV(t,s){return`${t}-trigger-${s}`}function zV(t,s){return`${t}-content-${s}`}var Ooe=RV,qV=$V,HV=LV,GV=VV;const ft=Ooe,xt=b.forwardRef(({className:t,...s},n)=>e.jsx(qV,{ref:n,className:Ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));xt.displayName=qV.displayName;const ae=b.forwardRef(({className:t,...s},n)=>e.jsx(HV,{ref:n,className:Ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));ae.displayName=HV.displayName;const ie=b.forwardRef(({className:t,...s},n)=>e.jsx(GV,{ref:n,className:Ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));ie.displayName=GV.displayName;console.log(" Property Dialog component loaded");function O0({open:t,onOpenChange:s}){const[n,r]=b.useState({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active"}),[a,i]=b.useState(""),[l,o]=b.useState(!1),c=yt(),{toast:d}=at(),{user:u}=_a(),m=Ee({mutationFn:async f=>{console.log(" Frontend: Submitting property data:",f);const j=await ve("POST","/api/properties",f);return console.log(" Frontend: Property created successfully:",j),j},onSuccess:async f=>{console.log(" Frontend: Property creation successful, invalidating cache"),wa.delete("/api/properties"),wa.delete("/api/dashboard/stats"),wa.delete("/api/dashboard"),console.log(" FastCache cleared for properties and dashboard"),R2(c),u!=null&&u.id&&(c.invalidateQueries({queryKey:[`/api/achievements/user/${u.id}`]}),c.invalidateQueries({queryKey:["/api/achievements/definitions"]})),d({title:"Success",description:`Property "${f.name}" created successfully!`}),s(!1),r({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active"})},onError:f=>{console.error(" Frontend: Property creation error:",f);let j="Failed to create property";f.message?j=f.message:f.errors&&Array.isArray(f.errors)&&(j=f.errors.map(g=>{var y;return g.message||((y=g.path)==null?void 0:y.join("."))+": "+g.message}).join(", ")),d({title:"Error",description:j,variant:"destructive"})}}),h=f=>{var g;if(f.preventDefault(),console.log(" Frontend: Form submitted with data:",n),!n.name.trim()){d({title:"Validation Error",description:"Property name is required",variant:"destructive"});return}if(!n.address.trim()){d({title:"Validation Error",description:"Property address is required",variant:"destructive"});return}const j={organizationId:"default-org",name:n.name.trim(),address:n.address.trim(),description:((g=n.description)==null?void 0:g.trim())||"",bedrooms:n.bedrooms?parseInt(n.bedrooms):null,bathrooms:n.bathrooms?parseInt(n.bathrooms):null,maxGuests:n.maxGuests?parseInt(n.maxGuests):null,pricePerNight:n.pricePerNight?parseFloat(n.pricePerNight):null,currency:"THB",status:n.status};console.log(" Frontend: Final property data being submitted:",j),m.mutate(j)},x=(f,j)=>{r(g=>({...g,[f]:j}))},p=async()=>{var j,g,y,v;if(!a.trim()){d({title:"Validation Error",description:"Please enter an Airbnb URL",variant:"destructive"});return}if(!(a.includes("airbnb.com")||a.includes("abnb.me")||a.includes("airbnb.")||a.includes("www.airbnb")||/airbnb/i.test(a))){d({title:"Invalid URL",description:"Please enter a valid Airbnb listing URL",variant:"destructive"});return}o(!0);try{const N=await(await ve("POST","/api/properties/import/airbnb",{url:a.trim()})).json();if(N.success)r({name:N.property.name||"",address:N.property.address||"",description:N.property.description||"",bedrooms:((j=N.property.bedrooms)==null?void 0:j.toString())||"",bathrooms:((g=N.property.bathrooms)==null?void 0:g.toString())||"",maxGuests:((y=N.property.maxGuests)==null?void 0:y.toString())||"",pricePerNight:((v=N.property.pricePerNight)==null?void 0:v.toString())||"",status:"active"}),d({title:"Import Successful",description:"Property data imported from Airbnb. Please review and save."}),i("");else throw new Error(N.message||"Failed to import property data")}catch(w){console.error("Airbnb import error:",w),d({title:"Import Failed",description:w.message||"Could not import from Airbnb. Please enter property details manually.",variant:"destructive"})}finally{o(!1)}};return e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Add New Property"})}),e.jsxs(ft,{defaultValue:"manual",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-2",children:[e.jsxs(ae,{value:"manual",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Create from Scratch"]}),e.jsxs(ae,{value:"airbnb",children:[e.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Import from Airbnb"]})]}),e.jsx(ie,{value:"airbnb",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Import from Airbnb"}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Enter an Airbnb listing URL to automatically import property details, photos, and amenities."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"airbnb-url",children:"Airbnb Listing URL"}),e.jsx(G,{id:"airbnb-url",value:a,onChange:f=>i(f.target.value),placeholder:"https://www.airbnb.com/rooms/12345678",className:"mt-1"})]}),e.jsx(M,{type:"button",onClick:p,disabled:l||!a.trim(),className:"w-full",children:l?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing from Airbnb..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Import Property Data"]})})]})]})}),e.jsx(ie,{value:"manual",className:"mt-4",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"name",children:"Property Name"}),e.jsx(G,{id:"name",value:n.name,onChange:f=>x("name",f.target.value),placeholder:"Enter property name",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"status",children:"Status"}),e.jsxs(se,{value:n.status,onValueChange:f=>x("status",f),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"address",children:"Address"}),e.jsx(G,{id:"address",value:n.address,onChange:f=>x("address",f.target.value),placeholder:"Enter full address",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:n.description,onChange:f=>x("description",f.target.value),placeholder:"Describe the property...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(G,{id:"bedrooms",type:"number",value:n.bedrooms,onChange:f=>x("bedrooms",f.target.value),placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(G,{id:"bathrooms",type:"number",value:n.bathrooms,onChange:f=>x("bathrooms",f.target.value),placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"maxGuests",children:"Max Guests"}),e.jsx(G,{id:"maxGuests",type:"number",value:n.maxGuests,onChange:f=>x("maxGuests",f.target.value),placeholder:"0",min:"1"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"pricePerNight",children:"Price/Night"}),e.jsx(G,{id:"pricePerNight",type:"number",step:"0.01",value:n.pricePerNight,onChange:f=>x("pricePerNight",f.target.value),placeholder:"0.00",min:"0"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:m.isPending,children:m.isPending?"Creating...":"Create Property"})]})]})})]})]})})}function Nt(t){if(t==null)return"0";const s=typeof t=="string"?parseFloat(t):t;return typeof s!="number"||isNaN(s)?"0":new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}function I2(){var C;Cr();const{toast:t}=at(),[s,n]=b.useState(!1),[r,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState({}),[d,u]=b.useState("overview"),{data:m}=ye({queryKey:["/api/dashboard/stats"],staleTime:30*1e3,refetchOnMount:!0}),{data:h=[]}=ye({queryKey:["/api/properties"],staleTime:30*1e3,refetchOnMount:!0}),{data:x=[]}=ye({queryKey:["/api/dashboard/recent-tasks"],staleTime:5*60*1e3,refetchOnMount:!1}),{data:p={}}=ye({queryKey:["/api/dashboard/task-stats"],staleTime:5*60*1e3,refetchOnMount:!1}),{data:f=[]}=ye({queryKey:["/api/bookings"],staleTime:0,refetchOnMount:!0});console.log(" Dashboard - Bookings data:",f,"Count:",f.length);const{data:j=[]}=ye({queryKey:["/api/property-documents/expiring?days=30"],staleTime:0,refetchOnMount:!0});console.log(" Dashboard - Expiring Documents:",j,"Count:",j.length);const{data:g=[]}=ye({queryKey:["/api/property-insurance/expiring/30"],staleTime:0,refetchOnMount:!0}),y=f.filter(P=>parseFloat(P.amountDue||"0")>0);b.useEffect(()=>{if(j&&Array.isArray(j)&&j.length>0){const P=new Date,$=j.filter(V=>V.expiryDate?new Date(V.expiryDate)<P:!1);$.length>0&&t({title:" Documents Expired",description:`${$.length} property document${$.length>1?"s have":" has"} expired. Check the dashboard for details.`,variant:"destructive"})}},[j,t]),b.useEffect(()=>{if(y.length>0){const P=y.reduce(($,V)=>$+parseFloat(V.amountDue||"0"),0);t({title:" Outstanding Payments",description:`${y.length} customer${y.length>1?"s have":" has"} outstanding balances totaling ${Nt(P)}`,variant:"default"})}},[y.length,t]);const v=f.sort((P,$)=>new Date($.createdAt||0).getTime()-new Date(P.createdAt||0).getTime()).slice(0,3),w=x.slice(0,5),N=new Map;h.forEach(P=>{N.set(P.id,P.name)});const S=h.filter(P=>!(o.searchText&&!P.name.toLowerCase().includes(o.searchText.toLowerCase())||o.area&&P.area!==o.area||o.bedroomCount&&P.bedrooms!==o.bedroomCount)),k=P=>{switch(P){case"active":case"confirmed":case"paid":case"completed":return"default";case"pending":case"scheduled":return"secondary";case"overdue":case"high":return"destructive";case"maintenance":case"in-progress":case"medium":return"outline";default:return"secondary"}},T=P=>{switch(P){case"high":return e.jsx(Et,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(et,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(Fe,{className:"h-4 w-4 text-green-500"});default:return null}};return e.jsxs("div",{className:"container mx-auto bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(ec,{title:"Enhanced Admin Dashboard",subtitle:"Comprehensive property management overview with advanced filtering"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsx(E,{className:"mb-6",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(G,{placeholder:"Search properties...",value:o.searchText||"",onChange:P=>c($=>({...$,searchText:P.target.value}))}),e.jsxs(se,{value:o.area||"all",onValueChange:P=>c($=>({...$,area:P==="all"?void 0:P})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Areas"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Areas"}),e.jsx(A,{value:"Chaweng",children:"Chaweng"}),e.jsx(A,{value:"Lamai",children:"Lamai"}),e.jsx(A,{value:"Bophut",children:"Bophut"}),e.jsx(A,{value:"Nathon",children:"Nathon"})]})]}),e.jsxs(se,{value:((C=o.bedroomCount)==null?void 0:C.toString())||"all",onValueChange:P=>c($=>({...$,bedroomCount:P==="all"?void 0:parseInt(P)})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Bedrooms"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Bedrooms"}),e.jsx(A,{value:"2",children:"2 Bedrooms"}),e.jsx(A,{value:"3",children:"3 Bedrooms"}),e.jsx(A,{value:"4",children:"4 Bedrooms"}),e.jsx(A,{value:"5",children:"5+ Bedrooms"})]})]}),e.jsx(M,{variant:"outline",onClick:()=>c({}),className:"w-full",children:"Clear Filters"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(Dg,{title:"Total Properties",value:S.length,icon:Ft,color:"primary"}),e.jsx(Dg,{title:"Active Properties",value:S.filter(P=>P.status==="active").length,icon:fn,color:"success"}),e.jsx(Dg,{title:"Expired Documents",value:j.filter(P=>P.expiryDate?new Date(P.expiryDate)<new Date:!1).length,icon:Et,color:"warning"}),e.jsx(Dg,{title:"High Priority Tasks",value:p.highPriority||0,icon:Et,color:"accent"})]}),e.jsxs(ft,{value:d,onValueChange:u,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"properties",children:"Properties"}),e.jsx(ae,{value:"tasks",children:"Tasks"}),e.jsx(ae,{value:"bookings",children:"Bookings"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent Bookings"})}),e.jsx(D,{children:v.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No bookings found"}):e.jsx("div",{className:"space-y-4",children:v.map(P=>{const $=N.get(P.propertyId)||P.property||`Property #${P.propertyId}`,V=P.totalAmount||P.guestTotalPrice||P.platformPayout||P.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(fn,{className:"w-6 h-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.guestName}),e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:$})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[new Date(P.checkIn).toLocaleDateString()," ","-"," ",new Date(P.checkOut).toLocaleDateString()]}),e.jsx("p",{className:"text-sm text-gray-500",children:Nt(V)})]})]},P.id)})})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Task Overview"})}),e.jsx(D,{children:w.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No tasks found"}):e.jsx("div",{className:"space-y-4",children:w.map(P=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${P.status==="pending"?"bg-yellow-500":P.status==="in-progress"?"bg-blue-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.title}),e.jsx("p",{className:"text-sm text-gray-500",children:P.type})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.status==="pending"?"bg-yellow-100 text-yellow-800":P.status==="in-progress"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:P.status.replace("-"," ")})})]},P.id))})})]})]}),y.length>0&&e.jsxs(E,{className:"border-red-200 bg-red-50",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2 text-red-800",children:[e.jsx(Je,{className:"h-5 w-5"}),"Outstanding Payments (",y.length,")"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(P=>{const $=N.get(P.propertyId)||`Property #${P.propertyId}`,V=parseFloat(P.amountDue||"0");return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-red-100",children:e.jsx(Je,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:$})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(z,{variant:"destructive",children:[Nt(V)," due"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Check-in:"," ",new Date(P.checkIn).toLocaleDateString()]})]})]},P.id)})}),y.length>5&&e.jsxs("p",{className:"text-sm text-gray-600 mt-3 text-center",children:["+",y.length-5," more customers with outstanding balances"]})]})]}),(j.length>0||g.length>0)&&e.jsxs(E,{className:"border-orange-200 bg-orange-50",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(Et,{className:"h-5 w-5"}),"Expiry Alerts (",j.length+g.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[j.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-900 mb-3",children:"Property Documents Expiring"}),e.jsx("div",{className:"space-y-3",children:j.map(P=>{const $=N.get(P.propertyId)||`Property #${P.propertyId}`,V=Math.ceil((new Date(P.expiryDate).getTime()-Date.now())/(1e3*60*60*24)),I=V<0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${I?"bg-red-100":"bg-orange-100"}`,children:e.jsx(Ft,{className:`w-5 h-5 ${I?"text-red-600":"text-orange-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.docType||"Document"}),e.jsx("p",{className:"text-sm text-gray-600",children:$})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(z,{variant:I?"destructive":"outline",className:I?"":"border-orange-300 text-orange-700",children:I?"Expired":`${V} days left`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(P.expiryDate).toLocaleDateString()})]})]},P.id)})})]}),g.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-900 mb-3",children:"Property Insurance Expiring"}),e.jsx("div",{className:"space-y-3",children:g.map(P=>{const $=N.get(P.propertyId)||`Property #${P.propertyId}`,V=Math.ceil((new Date(P.expiryDate).getTime()-Date.now())/(1e3*60*60*24)),I=V<0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${I?"bg-red-100":"bg-blue-100"}`,children:e.jsx(Ft,{className:`w-5 h-5 ${I?"text-red-600":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:P.insuranceType||"Insurance"}),e.jsx("p",{className:"text-sm text-gray-600",children:$})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(z,{variant:I?"destructive":"outline",className:I?"":"border-blue-300 text-blue-700",children:I?"Expired":`${V} days left`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(P.expiryDate).toLocaleDateString()})]})]},P.id)})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>n(!0),children:[e.jsx(bt,{className:"w-6 h-6 text-primary"}),e.jsx("span",{children:"New Booking"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>a(!0),children:[e.jsx(fn,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{children:"Add Property"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>l(!0),children:[e.jsx(Yo,{className:"w-6 h-6 text-yellow-600"}),e.jsx("span",{children:"Create Task"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>window.location.href="/finances",children:[e.jsx(Bt,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{children:"View Reports"})]})]})]}),e.jsxs(ie,{value:"properties",className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4",children:S.map(P=>e.jsx(E,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>window.location.href=`/property-hub?property=${P.id}`,children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:P.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[P.address||"No address"," "," ",P.bedrooms||0," bedrooms"]}),e.jsx("p",{className:"text-sm font-medium text-green-600",children:P.pricePerNight?`${P.pricePerNight}/night`:"No price set"})]}),e.jsx(z,{variant:k(P.status),children:P.status})]})})},P.id))}),e.jsx("div",{className:"text-center pt-4",children:e.jsx(M,{variant:"outline",onClick:()=>window.location.href="/property-hub",className:"w-full",children:"View All Properties in Property Management Hub"})})]}),e.jsx(ie,{value:"tasks",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:w.length===0?e.jsx(E,{children:e.jsx(D,{className:"p-8 text-center text-muted-foreground",children:"No tasks found"})}):w.map(P=>{const $=N.get(P.propertyId)||P.property||`Property #${P.propertyId}`;return e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[T(P.priority),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:P.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[$,"  ",P.type]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Due Date:"," ",P.dueDate?new Date(P.dueDate).toLocaleDateString():P.scheduledDate?new Date(P.scheduledDate).toLocaleDateString():"No date"]})]})]}),e.jsx(z,{variant:k(P.status),children:P.status})]})})},P.id)})})}),e.jsx(ie,{value:"bookings",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:f.length===0?e.jsx(E,{children:e.jsx(D,{className:"p-8 text-center text-muted-foreground",children:"No bookings found"})}):f.map(P=>{const $=N.get(P.propertyId)||P.property||`Property #${P.propertyId}`,V=P.totalAmount||P.guestTotalPrice||P.platformPayout||P.netHostPayout||0;return e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:P.guestName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:$}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(P.checkIn).toLocaleDateString()," ",""," ",new Date(P.checkOut).toLocaleDateString()]}),e.jsx("p",{className:"text-sm font-medium text-green-600",children:Nt(V)})]}),e.jsx(z,{variant:k(P.status),children:P.status})]})})},P.id)})})})]})]})]}),e.jsx(D0,{open:s,onOpenChange:n}),e.jsx(O0,{open:r,onOpenChange:a}),e.jsx(P0,{isOpen:i,onOpenChange:l})]})}const Moe=Object.freeze(Object.defineProperty({__proto__:null,default:I2},Symbol.toStringTag,{value:"Module"})),Ci={monthlyEarnings:89e3,thisMonthBookings:12,pendingCommissions:15600,currentRank:1,totalAgents:25,conversionRate:32.5},_oe=[{type:"booking",message:"New booking: Villa Samui Breeze",amount:8e3,time:"2 hours ago"},{type:"commission",message:"Commission paid",amount:2400,time:"1 day ago"},{type:"quote",message:"Quote generated for Villa Ocean View",amount:6500,time:"3 hours ago"},{type:"ranking",message:"Moved to #1 position",amount:null,time:"Yesterday"}],Roe=[{id:"quote-generator",title:"Quote Generator",description:"Generate instant quotes for clients",icon:hs,color:"bg-blue-600 hover:bg-blue-700",route:"/agent/quote-generator",stats:"4 properties available"},{id:"commissions",title:"Commissions",description:"Track earnings and payouts",icon:Je,color:"bg-green-600 hover:bg-green-700",route:"/agent/commissions",stats:`${Ci.monthlyEarnings.toLocaleString()} this month`},{id:"proposals",title:"Proposals",description:"Manage client proposals",icon:vt,color:"bg-purple-600 hover:bg-purple-700",route:"/agent/proposals",stats:"3 pending reviews"},{id:"media-download",title:"Media Library",description:"Download property media",icon:Ns,color:"bg-orange-600 hover:bg-orange-700",route:"/agent/media-download",stats:"48 files available"},{id:"leaderboard",title:"Leaderboard",description:"View agent rankings",icon:ri,color:"bg-yellow-600 hover:bg-yellow-700",route:"/agent/leaderboard",stats:`Rank #${Ci.currentRank} of ${Ci.totalAgents}`}];function WV(){const t=n=>{window.location.href=n},s=n=>{switch(n){case"booking":return e.jsx(tt,{className:"h-4 w-4 text-blue-600"});case"commission":return e.jsx(Je,{className:"h-4 w-4 text-green-600"});case"quote":return e.jsx(hs,{className:"h-4 w-4 text-purple-600"});case"ranking":return e.jsx(ri,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(dt,{className:"h-4 w-4 text-gray-600"})}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Retail Agent Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's your performance overview"})]}),e.jsxs(z,{variant:"default",className:"bg-green-100 text-green-800 px-3 py-1",children:["Rank #",Ci.currentRank," Agent"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",Ci.monthlyEarnings.toLocaleString()]})]}),e.jsx(Je,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bookings This Month"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Ci.thisMonthBookings})]}),e.jsx(tt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Commissions"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",Ci.pendingCommissions.toLocaleString()]})]}),e.jsx(Vn,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Ci.conversionRate,"%"]})]}),e.jsx(Bt,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Access your most used tools"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Roe.map(n=>e.jsx(E,{className:"hover:shadow-lg transition-all cursor-pointer border-2 hover:border-blue-200",onClick:()=>t(n.route),children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${n.color}`,children:e.jsx(n.icon,{className:"h-6 w-6 text-white"})}),e.jsx(Dd,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:n.description}),e.jsx(z,{variant:"outline",className:"text-xs",children:n.stats})]})},n.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:_oe.map((n,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s(n.type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:n.message}),e.jsx("p",{className:"text-xs text-gray-500",children:n.time})]})]}),n.amount&&e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-green-600",children:["",n.amount.toLocaleString()]})})]},r))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5"}),"Performance Summary"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"This Month Goal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"100,000 target"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"89%"}),e.jsx("p",{className:"text-xs text-gray-500",children:"11K to go"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Ranking Position"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Out of ",Ci.totalAgents," agents"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["#",Ci.currentRank]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Top performer"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Avg. Deal Size"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"7,400"}),e.jsx("p",{className:"text-xs text-gray-500",children:"+12% vs last month"})]})]})]})})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Need Help?"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(M,{variant:"outline",size:"sm",children:" Agent Training"}),e.jsx(M,{variant:"outline",size:"sm",children:" Support Chat"}),e.jsx(M,{variant:"outline",size:"sm",children:" Monthly Report"}),e.jsx(M,{variant:"outline",size:"sm",children:" Set Goals"})]})})]})]})}const Ioe=()=>{const[t,s]=b.useState("services");b.useEffect(()=>{const d=new URLSearchParams(window.location.search).get("tab")||"services";s(d);const u=m=>{console.log("Received tab change event:",m.detail.tab),s(m.detail.tab)};return window.addEventListener("changeReferralTab",u),()=>window.removeEventListener("changeReferralTab",u)},[]);const n=c=>{console.log("Changing to tab:",c),s(c)},r=[{id:1,name:"Villa Samui Breeze",referralDate:"2024-01-15",client:"Johnson Family",monthlyRevenue:85e3,occupancyRate:78,totalBookings:12,averageRating:4.8,commission:8500,status:"Active"},{id:2,name:"Villa Tropical Paradise",referralDate:"2024-03-20",client:"Thompson Estate",monthlyRevenue:12e4,occupancyRate:85,totalBookings:15,averageRating:4.9,commission:12e3,status:"Active"}],a=[{id:1,name:"Villa Ocean View",bedrooms:3,bathrooms:2,maxGuests:6,location:"Koh Samui",priceRange:"6,500 - 8,500/night",amenities:["Pool","WiFi","AC","Kitchen"]},{id:2,name:"Villa Aruna Premium",bedrooms:5,bathrooms:4,maxGuests:10,location:"Koh Samui",priceRange:"18,000 - 25,000/night",amenities:["Private Pool","Chef Service","WiFi","AC","Gym"]},{id:3,name:"Villa Beachfront Elite",bedrooms:4,bathrooms:3,maxGuests:8,location:"Koh Samui",priceRange:"12,000 - 16,000/night",amenities:["Beach Access","Pool","WiFi","AC","BBQ"]}],i=[{title:"Guest Management",description:"Complete guest experience from check-in to check-out",features:["24/7 guest support","Check-in/out coordination","Concierge services","Issue resolution"]},{title:"Property Maintenance",description:"Regular upkeep and maintenance of properties",features:["Scheduled cleaning","Pool maintenance","Garden care","Repairs & fixes"]},{title:"Revenue Optimization",description:"Maximize booking income through smart pricing",features:["Dynamic pricing","Multi-platform listing","Revenue analytics","Booking optimization"]},{title:"Financial Management",description:"Complete financial oversight and reporting",features:["Monthly statements","Expense tracking","Tax preparation","Owner payouts"]}],l=()=>{console.log("Downloading management services PDF..."),alert("Management Services PDF would be downloaded here")},o=c=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(c);return e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6 pt-20 lg:pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Referral Agent Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Property Management Services & Referral Tracking"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(z,{variant:"secondary",className:"bg-green-50 text-green-700",children:[e.jsx(dt,{className:"w-3 h-3 mr-1"}),"Real Estate Agent"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs(M,{variant:t==="services"?"default":"outline",onClick:()=>n("services"),className:"flex items-center gap-2",children:[e.jsx(vt,{className:"h-4 w-4"}),"Service Overview"]}),e.jsxs(M,{variant:t==="properties"?"default":"outline",onClick:()=>n("properties"),className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),"Property Browse"]}),e.jsxs(M,{variant:t==="referred"?"default":"outline",onClick:()=>n("referred"),className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"My Referrals"]}),e.jsxs(M,{variant:t==="finances"?"default":"outline",onClick:()=>n("finances"),className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Commission Tracking"]})]}),e.jsxs(ft,{value:t,onValueChange:n,className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(ae,{value:"services",children:"Service Overview"}),e.jsx(ae,{value:"properties",children:"Property Browse"}),e.jsx(ae,{value:"referred",children:"My Referrals"}),e.jsx(ae,{value:"finances",children:"Commission Tracking"})]}),e.jsx(ie,{value:"services",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Property Management Services"]}),e.jsx(Me,{children:"Comprehensive villa management services for property owners"})]}),e.jsxs(M,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),"Download PDF Brochure"]})]})}),e.jsxs(D,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map((c,d)=>e.jsxs(E,{className:"border border-gray-200",children:[e.jsxs(L,{className:"pb-3",children:[e.jsx(B,{className:"text-lg",children:c.title}),e.jsx(Me,{children:c.description})]}),e.jsx(D,{children:e.jsx("ul",{className:"space-y-1 text-sm",children:c.features.map((u,m)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),u]},m))})})]},d))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Referral Commission Structure"}),e.jsxs("p",{className:"text-blue-800 text-sm",children:["As a referral partner, you receive ",e.jsx("strong",{children:"10% of our monthly management commission"})," for every property you refer to our management services. This provides you with ongoing passive income for successful referrals."]})]})]})]})}),e.jsx(ie,{value:"properties",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"w-5 h-5"}),"Available Properties Portfolio"]}),e.jsx(Me,{children:"Browse our managed properties (limited information for referral purposes)"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(c=>e.jsxs(E,{className:"border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs(L,{className:"pb-3",children:[e.jsx(B,{className:"text-lg",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ft,{className:"w-4 h-4"}),c.location]})]}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.bedrooms}),e.jsx("div",{className:"text-muted-foreground",children:"Bedrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.bathrooms}),e.jsx("div",{className:"text-muted-foreground",children:"Bathrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.maxGuests}),e.jsx("div",{className:"text-muted-foreground",children:"Guests"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-600",children:c.priceRange}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Nightly rate range"})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.amenities.slice(0,3).map((d,u)=>e.jsx(z,{variant:"outline",className:"text-xs",children:d},u)),c.amenities.length>3&&e.jsxs(z,{variant:"outline",className:"text-xs",children:["+",c.amenities.length-3," more"]})]})})]})]},c.id))})})]})}),e.jsx(ie,{value:"referred",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"My Referred Properties"]}),e.jsx(Me,{children:"Properties you've referred and their performance metrics"})]}),e.jsx(D,{children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(dt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No referrals yet. Start referring clients to earn 10% monthly commissions!"})]}):e.jsx("div",{className:"space-y-4",children:r.map(c=>e.jsxs(E,{className:"border border-gray-200",children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:c.name}),e.jsxs(Me,{children:["Referred: ",new Date(c.referralDate).toLocaleDateString()," | Client: ",c.client]})]}),e.jsx(z,{variant:c.status==="Active"?"default":"secondary",children:c.status})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-green-600",children:o(c.monthlyRevenue)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-blue-600",children:[c.occupancyRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Occupancy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-purple-600",children:c.totalBookings}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bookings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-yellow-600 flex items-center justify-center gap-1",children:[e.jsx(ks,{className:"w-3 h-3 fill-current"}),c.averageRating]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rating"})]})]})})]},c.id))})})]})}),e.jsxs(ie,{value:"finances",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium",children:"Total Monthly Commission"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o(r.reduce((c,d)=>c+d.commission,0))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["From ",r.length," active referrals"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium",children:"Average Occupancy"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[r.length>0?Math.round(r.reduce((c,d)=>c+d.occupancyRate,0)/r.length):0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all referrals"})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium",children:"Total Properties"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active referrals"})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Commission Details"]}),e.jsx(Me,{children:"Detailed breakdown of your 10% referral commissions"})]}),e.jsx(D,{children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Bt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No commission data available yet."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Property"}),e.jsx("th",{className:"text-left py-2",children:"Monthly Revenue"}),e.jsx("th",{className:"text-left py-2",children:"Management Fee (Base)"}),e.jsx("th",{className:"text-left py-2",children:"Your Commission (10%)"}),e.jsx("th",{className:"text-left py-2",children:"Status"})]})}),e.jsx("tbody",{children:r.map(c=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:c.client})]})}),e.jsx("td",{className:"py-3",children:o(c.monthlyRevenue)}),e.jsx("td",{className:"py-3",children:o(c.commission*10)}),e.jsx("td",{className:"py-3 font-semibold text-green-600",children:o(c.commission)}),e.jsx("td",{className:"py-3",children:e.jsx(z,{variant:c.status==="Active"?"default":"secondary",children:c.status})})]},c.id))})]})})})]})]})]})]})},KV=()=>e.jsx(Ioe,{});function $oe({children:t}){const[s,n]=b.useState(!1);return b.useEffect(()=>{n(!0)},[]),s?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})})}function Foe(){const{user:t}=_a();b.useEffect(()=>{(t==null?void 0:t.role)==="retail-agent"&&(window.location.href="/agent/hub")},[t==null?void 0:t.role]);const s=()=>{switch(t==null?void 0:t.role){case"staff":return e.jsx(I2,{});case"retail-agent":return e.jsx(WV,{});case"referral-agent":return e.jsx(KV,{});case"admin":case"portfolio-manager":case"owner":default:return e.jsx(I2,{})}};return e.jsx($oe,{children:s()})}function YV({property:t,isSelected:s=!1,onSelect:n,onViewDetails:r,onDelete:a,expiryStatus:i,rentcastData:l}){var P,$;const o=V=>{switch(V==null?void 0:V.toLowerCase()){case"active":return"bg-emerald-500/90 text-white";case"maintenance":return"bg-amber-500/90 text-white";case"inactive":return"bg-slate-500/90 text-white";default:return"bg-slate-500/90 text-white"}},c=V=>V>=4.8?"text-amber-400":V>=4.5?"text-amber-300":"text-amber-200",d=V=>V>=85?"from-emerald-500 to-teal-500":V>=70?"from-blue-500 to-cyan-500":V>=50?"from-amber-500 to-orange-500":"from-red-500 to-rose-500",u=t.name||"Property",m=t.address||"Unknown Address",h=t.bedrooms??0,x=t.bathrooms??0,p=t.maxGuests??0,f=parseFloat(t.pricePerNight||"0"),j=t.monthlyRevenue??0,g=t.occupancyRate??0,y=t.rating??4.7,v=Array.isArray(t.images)&&t.images.length>0&&t.images[0]||`https://picsum.photos/seed/property-${t.id||"0"}/800/600`,w=d(g),N=t.googleMapsLink||"";let S="";const k=N.match(/src=(?:\"|')([^\"']+)(?:\"|')/i);k&&k[1]?S=k[1]:N&&(N.startsWith("http")||N.includes("google.com/maps")||N.includes("maps.google"))?S=N:S=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(m)}`;const T=(V,I)=>{try{const _=I||t.currency||"THB";return new Intl.NumberFormat("en-US",{style:"currency",currency:_}).format(V)}catch{return`${V}`}},C=V=>V?V>=1e3?`${Math.round(V/100)/10}k`:`${V}`:"0";return e.jsx("div",{className:"group relative h-full",children:e.jsxs("div",{className:`h-full rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 cursor-pointer transform hover:scale-105 border-2 ${s?"border-emerald-500 ring-2 ing-emerald-300":"border-slate-200 hover:border-emerald-300"}`,children:[e.jsxs("div",{className:"relative h-48 sm:h-56 overflow-hidden bg-slate-100",children:[e.jsx("img",{src:v,alt:u,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",onError:V=>{V.currentTarget.src=`https://picsum.photos/seed/property-${t.id||"0"}/800/600`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4 z-20",children:e.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-bold backdrop-blur-md ${o(t.status)}`,children:t.status==="active"?" Active":t.status||"Status"})}),e.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 z-20",children:e.jsxs("div",{className:"flex items-center gap-1 bg-black/60 backdrop-blur-md px-3 py-1.5 rounded-full",children:[e.jsx(ks,{className:`h-4 w-4 ${c(y)}`,fill:"currentColor"}),e.jsx("span",{className:"text-white font-semibold text-sm",children:y?y.toFixed(1):""})]})}),i&&e.jsx("div",{className:"absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-20",children:e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full backdrop-blur-md text-xs font-semibold ${i==="expired"?"bg-red-500/90 text-white":"bg-amber-500/90 text-white"}`,children:[e.jsx(Ut,{className:"h-3.5 w-3.5"}),i==="expired"?"Expired":"Expiring Soon"]})}),n&&e.jsx("div",{className:"absolute top-3 left-3 z-30 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("input",{type:"checkbox",checked:s,onChange:V=>n(V.target.checked),className:"w-5 h-5 cursor-pointer rounded border-2 border-white bg-emerald-500 checked:bg-emerald-600 shadow-lg",onClick:V=>V.stopPropagation()})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 p-4 sm:p-5 lg:p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-slate-900 truncate mb-1",children:u}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-slate-600",children:[e.jsx(ws,{className:"h-4 w-4 flex-shrink-0 text-emerald-600"}),e.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"truncate underline-offset-2 hover:underline text-slate-700",onClick:V=>V.stopPropagation(),title:"Open location in Google Maps",children:m})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-xl p-2.5 text-center border border-blue-200/50",children:[e.jsx(fn,{className:"h-4 w-4 mx-auto mb-1 text-blue-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-blue-900",children:h}),e.jsx("div",{className:"text-xs text-blue-700",children:"Beds"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100/50 rounded-xl p-2.5 text-center border border-teal-200/50",children:[e.jsx(G$,{className:"h-4 w-4 mx-auto mb-1 text-teal-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-teal-900",children:x}),e.jsx("div",{className:"text-xs text-teal-700",children:"Baths"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-xl p-2.5 text-center border border-emerald-200/50",children:[e.jsx(dt,{className:"h-4 w-4 mx-auto mb-1 text-emerald-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-emerald-900",children:p}),e.jsx("div",{className:"text-xs text-emerald-700",children:"Guests"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-slate-700",children:"Occupancy"}),e.jsxs("span",{className:"text-xs sm:text-sm font-bold text-emerald-700",children:[g,"%"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${w} rounded-full transition-all duration-700 shadow-md`,style:{width:`${Math.min(g,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-100/50 rounded-xl p-3 border border-amber-200/50",children:[e.jsx("div",{className:"text-xs text-amber-700 font-semibold mb-1",children:"Price / Night"}),e.jsx("div",{className:"text-sm sm:text-sm font-bold text-amber-900",children:T(f,t.currency)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-100/50 rounded-xl p-3 border border-emerald-200/50",children:[e.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Monthly"}),e.jsx("div",{className:"text-sm sm:text-xl font-bold text-emerald-900",children:C(j)})]})]}),l&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4 text-purple-600"}),e.jsx("div",{className:"text-xs font-bold text-purple-900",children:"RentCast Market Intelligence"})]}),(l.rentEstimate||l.valueEstimate)&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.rentEstimate&&e.jsxs("div",{className:"bg-white/80 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] text-purple-600 font-semibold mb-0.5",children:"MONTHLY RENT"}),e.jsxs("div",{className:"text-base font-bold text-purple-900",children:["$",((P=l.rentEstimate.estimatedRent)==null?void 0:P.toLocaleString())||"N/A"]}),l.rentEstimate.rentRangeLow&&l.rentEstimate.rentRangeHigh&&e.jsxs("div",{className:"text-[9px] text-purple-700",children:["$",l.rentEstimate.rentRangeLow.toLocaleString()," ","- $",l.rentEstimate.rentRangeHigh.toLocaleString()]}),l.rentEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-[9px] text-purple-600 mt-0.5",children:[l.rentEstimate.comparablesCount," comps"]})]}),l.valueEstimate&&e.jsxs("div",{className:"bg-white/80 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] text-indigo-600 font-semibold mb-0.5",children:"PROPERTY VALUE"}),e.jsxs("div",{className:"text-base font-bold text-indigo-900",children:["$",Math.round((l.valueEstimate.estimatedValue||0)/1e3),"k"]}),l.valueEstimate.valueRangeLow&&l.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-[9px] text-indigo-700",children:["$",Math.round(l.valueEstimate.valueRangeLow/1e3),"k - $",Math.round(l.valueEstimate.valueRangeHigh/1e3),"k"]}),l.valueEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-[9px] text-indigo-600 mt-0.5",children:[l.valueEstimate.comparablesCount," comps"]})]})]}),l.propertyDetails&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] font-semibold text-purple-700 mb-1.5",children:"PROPERTY DATA"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[10px]",children:[l.propertyDetails.squareFootage&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Sq Ft:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.squareFootage.toLocaleString()})]}),l.propertyDetails.yearBuilt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Built:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.yearBuilt})]}),l.propertyDetails.lotSize&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Lot:"}),e.jsxs("span",{className:"font-medium text-purple-900",children:[l.propertyDetails.lotSize.toLocaleString()," ","sf"]})]}),l.propertyDetails.propertyType&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.propertyType})]}),l.propertyDetails.lastSalePrice&&e.jsxs("div",{className:"flex justify-between col-span-2",children:[e.jsx("span",{className:"text-purple-600",children:"Last Sale:"}),e.jsxs("span",{className:"font-medium text-purple-900",children:["$",l.propertyDetails.lastSalePrice.toLocaleString(),l.propertyDetails.lastSaleDate&&` (${new Date(l.propertyDetails.lastSaleDate).getFullYear()})`]})]})]})]}),l.marketData&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-700 mb-1.5",children:"MARKET STATS"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[10px]",children:[l.marketData.medianRent&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Median Rent:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",l.marketData.medianRent.toLocaleString()]})]}),l.marketData.averageRent&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Avg Rent:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",l.marketData.averageRent.toLocaleString()]})]}),l.marketData.medianPrice&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Median Price:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",Math.round(l.marketData.medianPrice/1e3),"k"]})]}),l.marketData.averagePrice&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Avg Price:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",Math.round(l.marketData.averagePrice/1e3),"k"]})]}),l.marketData.inventoryCount&&e.jsxs("div",{className:"flex justify-between col-span-2",children:[e.jsx("span",{className:"text-indigo-600",children:"Market Inventory:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:[l.marketData.inventoryCount.toLocaleString()," ","listings"]})]})]})]}),(($=l.nearbyRentals)==null?void 0:$.count)>0&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsxs("div",{className:"text-[10px] font-semibold text-purple-700 mb-1.5",children:["NEARBY RENTALS (",l.nearbyRentals.count,")"]}),e.jsx("div",{className:"space-y-1.5",children:l.nearbyRentals.listings.slice(0,2).map((V,I)=>e.jsxs("div",{className:"text-[9px] bg-purple-50 rounded p-1.5",children:[e.jsx("div",{className:"font-medium text-purple-900 truncate",children:V.address}),e.jsxs("div",{className:"flex justify-between text-purple-700",children:[e.jsxs("span",{children:["$",V.price.toLocaleString(),"/mo"]}),e.jsxs("span",{children:[V.bedrooms,"bd ",V.bathrooms,"ba"]})]})]},I))})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-slate-200",children:[e.jsx("button",{onClick:r,className:"flex-1 px-3 py-2.5 sm:py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-semibold text-xs sm:text-sm rounded-lg shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:"View Details"}),a&&e.jsx("button",{onClick:a,className:"px-3 py-2.5 sm:py-3 bg-red-50 hover:bg-red-100 text-red-600 font-semibold text-xs sm:text-sm rounded-lg border border-red-200 shadow-sm hover:shadow-md transition-all duration-200",children:"Delete"})]})]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors duration-300 rounded-2xl pointer-events-none"})]})})}function Loe(){const[t,s]=b.useState(!1),[n,r]=b.useState(new Set),[a,i]=b.useState(""),[,l]=Yn(),o=yt(),{toast:c}=at(),{data:d=[],isLoading:u}=ye({queryKey:Es.properties.all()}),m=Array.isArray(d)?d:[],h=Ee({mutationFn:async v=>{await ve("DELETE",`/api/properties/${v}`)},onSuccess:()=>{R2(o),c({title:"Success",description:"Property deleted successfully"}),r(new Set)},onError:()=>{c({title:"Error",description:"Failed to delete property",variant:"destructive"})}}),x=Ee({mutationFn:async v=>{await Promise.all(v.map(w=>ve("DELETE",`/api/properties/${w}`)))},onSuccess:()=>{R2(o),c({title:"Success",description:"Selected properties deleted"}),r(new Set)},onError:()=>{c({title:"Error",description:"Bulk delete failed",variant:"destructive"})}}),p=v=>{window.confirm("Are you sure you want to delete this property?")&&h.mutate(v)},f=()=>{n.size!==0&&window.confirm(`Delete ${n.size} selected properties?`)&&x.mutate(Array.from(n))},j=(v,w)=>{r(N=>{const S=new Set(N);return w?S.add(v):S.delete(v),S})},g=v=>{l(`/property/${v}`)},y=b.useMemo(()=>{const v=a.trim().toLowerCase();return v?m.filter(w=>w?[w.name,w.title,w.location,w.address,String(w.id)].join(" ").toLowerCase().includes(v):!1):m},[m,a]);return e.jsxs(e.Fragment,{children:[e.jsx(ec,{title:"Properties",action:e.jsxs(M,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Property"]})}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("label",{htmlFor:"property-search",className:"sr-only",children:"Search properties"}),e.jsxs("div",{className:"relative w-full sm:w-[420px]",children:[e.jsx("input",{id:"property-search",value:a,onChange:v=>i(v.target.value),placeholder:"Search by name, location or id...",className:"w-full rounded-lg border border-slate-200 px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-400"}),a&&e.jsx("button",{onClick:()=>i(""),"aria-label":"Clear search",className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700",children:""})]}),n.size>0&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-600",children:[n.size," selected"]}),e.jsxs(M,{variant:"destructive",size:"sm",onClick:f,className:"flex items-center gap-2",children:[e.jsx(br,{className:"w-4 h-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm text-slate-600 hidden sm:block",children:u?"Loading":`${y.length} of ${m.length} properties`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{size:"sm",variant:"ghost",onClick:()=>{const v=y.map(w=>w==null?void 0:w.id).filter(Boolean);r(new Set(v))},children:[e.jsx(wl,{className:"w-4 h-4 mr-2"}),"Select All"]}),e.jsxs(M,{size:"sm",onClick:()=>s(!0),className:"hidden sm:inline-flex bg-primary hover:bg-primary/90",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add"]})]})]})]}),u?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((v,w)=>e.jsx("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-white to-slate-50 p-4 h-56 animate-pulse"},w))}):y.length===0?e.jsxs("div",{className:"border border-dashed border-slate-200 rounded-lg py-16 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"No properties found"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xl text-center",children:"Try adding your first property or clear the search/filter to show results."}),e.jsx("div",{className:"mt-4",children:e.jsxs(M,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Your First Property"]})})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:y.filter((v,w,N)=>v&&v.id&&N.findIndex(S=>S.id===v.id)===w).map(v=>e.jsx(YV,{property:v,isSelected:n.has(v.id),onSelect:w=>j(v.id,w),onViewDetails:()=>g(v.id),onDelete:()=>p(v.id)},`property-${v.id}`))})]})}),e.jsx(O0,{open:t,onOpenChange:s})]})}function Boe({bookings:t}){const[s,n]=b.useState(new Date),r=new Date(s.getFullYear(),s.getMonth(),1);new Date(s.getFullYear(),s.getMonth()+1,0);const a=new Date(r);a.setDate(a.getDate()-a.getDay());const i=[],l=new Date(a);for(let x=0;x<42;x++)i.push(new Date(l)),l.setDate(l.getDate()+1);const o=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=()=>{n(new Date(s.getFullYear(),s.getMonth()-1,1))},u=()=>{n(new Date(s.getFullYear(),s.getMonth()+1,1))},m=x=>t.some(p=>{const f=new Date(p.checkIn),j=new Date(p.checkOut);return x>=f&&x<=j}),h=x=>x.getMonth()===s.getMonth();return e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{children:[o[s.getMonth()]," ",s.getFullYear()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:d,children:e.jsx(Nf,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:u,children:e.jsx(Dd,{className:"w-4 h-4"})})]})]})}),e.jsxs(D,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:c.map(x=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:x},x))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:i.map((x,p)=>{const f=h(x),j=m(x);return e.jsxs("div",{className:`aspect-square p-1 text-center text-sm border border-gray-100 relative ${f?"text-gray-900":"text-gray-400"} ${j?"bg-primary text-white":"hover:bg-gray-50"}`,children:[e.jsx("span",{children:x.getDate()}),j&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})})]},p)})}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-primary rounded"}),e.jsx("span",{children:"Booked"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-200 rounded"}),e.jsx("span",{children:"Available"})]})]})]})]})}var Voe="Separator",OE="horizontal",Uoe=["horizontal","vertical"],QV=b.forwardRef((t,s)=>{const{decorative:n,orientation:r=OE,...a}=t,i=zoe(r)?r:OE,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(st.div,{"data-orientation":i,...o,...a,ref:s})});QV.displayName=Voe;function zoe(t){return Uoe.includes(t)}var XV=QV;const Wr=b.forwardRef(({className:t,orientation:s="horizontal",decorative:n=!0,...r},a)=>e.jsx(XV,{ref:a,decorative:n,orientation:s,className:Ue("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Wr.displayName=XV.displayName;function qoe({open:t,onOpenChange:s,bookingId:n}){var T,C,P,$,V;const[r,a]=b.useState(""),[i,l]=b.useState(""),o=yt(),{toast:c}=at(),{data:d,isLoading:u}=ye({queryKey:["/api/bookings",n],queryFn:async()=>{const I=await fetch(`/api/bookings/${n}`);if(!I.ok)throw new Error("Failed to fetch booking");return I.json()},enabled:!!n&&t}),{data:m=[]}=ye({queryKey:["/api/properties"]}),h=m.find(I=>I.id===(d==null?void 0:d.propertyId)),x=Ee({mutationFn:async I=>await ve("PATCH",`/api/bookings/${n}`,{status:I}),onSuccess:()=>{Np(o),a(""),c({title:"Success",description:"Booking status updated successfully"})},onError:I=>{c({title:"Error",description:I.message||"Failed to update booking status",variant:"destructive"})}}),p=Ee({mutationFn:async I=>await ve("PATCH",`/api/bookings/${n}`,{amountPaid:I.toString(),paymentStatus:I>=parseFloat((d==null?void 0:d.totalAmount)||"0")?"paid":"partial"}),onSuccess:()=>{Np(o),MV(o),l(""),c({title:"Success",description:"Payment updated successfully"})},onError:I=>{c({title:"Error",description:I.message||"Failed to update payment",variant:"destructive"})}}),f=()=>{if(!(!r||r===(d==null?void 0:d.status))){if(r.toLowerCase()==="checked-out"){const I=parseFloat((d==null?void 0:d.amountDue)||"0");if(I>0){const _=(d==null?void 0:d.currency)==="USD"?"$":(d==null?void 0:d.currency)==="EUR"?"":(d==null?void 0:d.currency)==="GBP"?"":(d==null?void 0:d.currency)||"THB";c({title:"Payment Required",description:`Please clear all outstanding payments (${_} ${v(I)}) before checking out the guest.`,variant:"destructive"});return}}x.mutate(r)}},j=(I=!1)=>{if(!d)return;let _;if(I)_=parseFloat(d.totalAmount||"0");else{if(_=parseFloat(i),isNaN(_)||_<=0){c({title:"Validation Error",description:"Please enter a valid payment amount",variant:"destructive"});return}const U=parseFloat(d.amountPaid||"0"),H=parseFloat(d.totalAmount||"0"),Y=U+_;if(Y>H){c({title:"Validation Error",description:"Payment amount cannot exceed the total due",variant:"destructive"});return}_=Y}p.mutate(_)},g=()=>{window.open(`/api/bookings/${n}/invoice`,"_blank")},y=I=>{switch(I==null?void 0:I.toLowerCase()){case"paid":return"bg-green-100 text-green-800 border-green-200";case"partial":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"pending":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=I=>{const _=typeof I=="string"?parseFloat(I):I;return isNaN(_)?"0.00":_.toLocaleString("en-AU",{minimumFractionDigits:2,maximumFractionDigits:2})},w=I=>{switch(I==null?void 0:I.toLowerCase()){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"checked-in":return"bg-blue-100 text-blue-800 border-blue-200";case"checked-out":return"bg-purple-100 text-purple-800 border-purple-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=I=>{switch(I==null?void 0:I.toLowerCase()){case"confirmed":return e.jsx(Fe,{className:"w-4 h-4"});case"pending":return e.jsx(et,{className:"w-4 h-4"});case"cancelled":return e.jsx(ar,{className:"w-4 h-4"});default:return e.jsx(et,{className:"w-4 h-4"})}},S=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",k=()=>{if(!(d!=null&&d.checkIn)||!(d!=null&&d.checkOut))return 0;const I=new Date(d.checkIn),_=new Date(d.checkOut);return Math.ceil((_.getTime()-I.getTime())/(1e3*60*60*24))};return n?e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsx(Xe,{className:"text-2xl",children:"Booking Details"})}),u?e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading booking details..."}):d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{className:`${w(d.status)} flex items-center gap-1 text-sm px-3 py-1`,children:[N(d.status),d.status]}),(((T=d.status)==null?void 0:T.toLowerCase())==="pending"||((C=d.status)==null?void 0:C.toLowerCase())==="confirmed")&&(d.paymentStatus==="paid"||d.paymentStatus==="partial")&&e.jsxs(z,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1 text-sm px-3 py-1",children:[e.jsx(yr,{className:"w-3 h-3"}),d.paymentStatus==="paid"?"Pre-Paid":"Partial Pre-Paid"]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Booking ID: #",d.id]})]}),(((P=d.status)==null?void 0:P.toLowerCase())==="pending"||(($=d.status)==null?void 0:$.toLowerCase())==="confirmed")&&(d.paymentStatus==="paid"||d.paymentStatus==="partial")&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(Ut,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Payment Received - Awaiting Check-in"}),e.jsxs("p",{className:"text-sm text-blue-700",children:[d.paymentStatus==="paid"?`Full payment of ${d.currency||"THB"} $${v(d.amountPaid||0)} has been received.`:`Partial payment of ${d.currency||"THB"} $${v(d.amountPaid||0)} received. ${d.currency||"THB"} $${v(d.amountDue||0)} still due.`," Guest has not checked in yet."]})]})]}),e.jsx(Wr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5"}),"Guest Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium",children:d.guestName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Guests"}),e.jsxs("p",{className:"font-medium",children:[d.guests||1," guest",d.guests>1?"s":""]})]}),d.guestEmail&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gi,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:d.guestEmail})]}),d.guestPhone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($i,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:d.guestPhone})]})]})]}),e.jsx(Wr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"Property Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:(h==null?void 0:h.name)||"Unknown Property"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(h==null?void 0:h.address)||"N/A"}),(h==null?void 0:h.bedrooms)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ko,{className:"w-4 h-4"}),e.jsxs("span",{children:[h.bedrooms," Bedroom",h.bedrooms>1?"s":""]})]})]})]}),e.jsx(Wr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Booking Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check-in"}),e.jsx("p",{className:"font-medium",children:S(d.checkIn)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check-out"}),e.jsx("p",{className:"font-medium",children:S(d.checkOut)})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k()," night",k()>1?"s":""]})]}),e.jsx(Wr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Financial Information"]}),d.paymentStatus&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(z,{className:`${y(d.paymentStatus)} flex items-center gap-1 px-3 py-1`,children:[e.jsx(yr,{className:"w-3 h-3"}),d.paymentStatus.charAt(0).toUpperCase()+d.paymentStatus.slice(1)]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),e.jsxs("p",{className:"text-xl font-bold",children:[d.currency||"THB"," $",v(d.totalAmount||0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Paid"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:[d.currency||"THB"," $",v(d.amountPaid||0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Due"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:[d.currency||"THB"," $",v(d.amountDue||0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform"}),e.jsx("p",{className:"font-medium",children:d.bookingPlatform||"Direct"})]})]}),((V=d.status)==null?void 0:V.toLowerCase())==="checked-in"&&parseFloat(d.amountDue||"0")>0&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(Ut,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Outstanding Payment"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["Guest has checked in with ",d.currency||"THB"," $",v(d.amountDue||0)," still due"]})]})]}),parseFloat(d.amountDue||"0")>0&&e.jsxs("div",{className:"space-y-3 p-4 bg-slate-50 rounded-lg border",children:[e.jsx(W,{className:"text-sm font-medium",children:"Record Payment"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{type:"number",placeholder:"Enter amount",value:i,onChange:I=>l(I.target.value),step:"0.01",min:"0",max:d.amountDue,className:"flex-1","data-testid":"input-payment-amount"}),e.jsxs(M,{onClick:()=>j(!1),disabled:!i||p.isPending,size:"sm","data-testid":"button-add-payment",children:[e.jsx(yr,{className:"w-4 h-4 mr-1"}),p.isPending?"Processing...":"Add Payment"]})]}),e.jsxs(M,{onClick:()=>j(!0),disabled:p.isPending,className:"w-full",variant:"default","data-testid":"button-mark-fully-paid",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),p.isPending?"Processing...":"Mark as Fully Paid"]})]}),parseFloat(d.amountDue||"0")===0&&d.paymentStatus==="paid"&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Fe,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Payment Completed"})]})]}),d.specialRequests&&e.jsxs(e.Fragment,{children:[e.jsx(Wr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Special Requests"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.specialRequests})]})]}),e.jsx(Wr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:"Update Status"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(se,{value:r||d.status,onValueChange:a,children:[e.jsx(ee,{className:"flex-1",children:e.jsx(ne,{placeholder:"Select status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"confirmed",children:"Confirmed"}),e.jsx(A,{value:"checked-in",children:"Checked-in"}),e.jsx(A,{value:"checked-out",children:"Checked-out"}),e.jsx(A,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(M,{onClick:f,disabled:!r||r===d.status||x.isPending,children:x.isPending?"Updating...":"Update"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(M,{variant:"outline",className:"flex-1",onClick:()=>s(!1),children:"Close"}),e.jsxs(M,{className:"flex-1",onClick:g,children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Generate Invoice"]})]})]}):e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Booking not found"})]})}):null}function fh({fallbackRoute:t="/",variant:s="ghost",position:n="top-left",className:r="",children:a}){const[,i]=Yn(),l=()=>{window.history.length>1?window.history.back():i(t)},o=n==="floating"?"fixed bottom-4 left-4 z-50 shadow-lg":"";return e.jsxs(M,{onClick:l,variant:s,size:"sm",className:`${o} ${r}`,children:[e.jsx(Il,{className:"h-4 w-4 mr-2"}),a||"Back"]})}function zP({role:t,...s}){const n=r=>{switch(r){case"admin":return"/dashboard";case"portfolio-manager":return"/dashboard";case"staff":return"/staff-dashboard";case"owner":return"/owner-dashboard";case"retail-agent":return"/retail-agent";case"referral-agent":return"/referral-agent";case"guest":return"/guest-portal";default:return"/"}};return e.jsx(fh,{fallbackRoute:n(t),...s})}function Hoe(){const[t,s]=b.useState("bookings"),[n,r]=b.useState("list"),[a,i]=b.useState(""),[l,o]=b.useState("all"),[c,d]=b.useState("all"),[u,m]=b.useState("all"),[h,x]=b.useState("all"),[p,f]=b.useState(!1),[j,g]=b.useState(null),[y,v]=b.useState(!1),w=yt(),S=aQ()>0,T=(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams).get("propertyId"),{data:C=[],isLoading:P}=ye({queryKey:T?Es.bookings.withSource(T):Es.bookings.all(),staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:$=[],isLoading:V}=ye({queryKey:["/api/properties"],staleTime:0});b.useEffect(()=>{const q=setInterval(()=>{try{w.invalidateQueries(Es.bookings.all())}catch{w.invalidateQueries({queryKey:["/api/bookings"]})}w.invalidateQueries({queryKey:["/api/properties"]})},3e4);return()=>clearInterval(q)},[w]);const I=Array.isArray(C)?C:[],_=Array.isArray($)?$:[],U=T?_.find(q=>q.id===parseInt(T)):null,H=q=>{g(q),v(!0)},Y=q=>{switch(q){case"Confirmed":return"bg-green-100 text-green-800 border-green-200";case"Pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},O=T?I:I.filter(q=>{var le;const re=_.find(oe=>oe.id===q.propertyId),we=(re==null?void 0:re.name)||"",K=(re==null?void 0:re.address)||"",Ce=l==="all"||q.propertyId===parseInt(l),pe=a===""||we.toLowerCase().includes(a.toLowerCase())||q.guestName&&q.guestName.toLowerCase().includes(a.toLowerCase()),F=c==="all"||K.toLowerCase().includes(c.toLowerCase()),Q=u==="all",Z=h==="all"||((le=q.status)==null?void 0:le.toLowerCase())===h.toLowerCase();return Ce&&pe&&F&&Q&&Z}),R=_.map(q=>({...q,bookings:O.filter(re=>re.propertyId===q.id)})).filter(q=>q.bookings.length>0||(a===""||q.name.toLowerCase().includes(a.toLowerCase()))&&(c==="all"||q.address&&q.address.toLowerCase().includes(c.toLowerCase())));return e.jsxs("div",{className:"relative container mx-auto min-h-screen bg-background",children:[S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 bg-white/90 dark:bg-slate-800/90 p-5 rounded-lg shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-t-transparent animate-spin border-primary"}),e.jsx("div",{className:"text-base font-medium",children:"Saving changes"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Please wait  updating data."})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-8 h-8 text-primary"}),e.jsx("div",{children:T&&U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(fh,{fallbackRoute:T?`/bookings?propertyId=${T}`:"/bookings",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Property"})})}),e.jsxs("h1",{className:"text-3xl font-bold",children:["Bookings - ",U.name]}),e.jsx("p",{className:"text-muted-foreground",children:"Viewing all bookings for this property"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Unified Calendar & Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all bookings, calendars, and property schedules"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[T&&e.jsx(M,{variant:"outline",onClick:()=>window.location.href="/bookings","data-testid":"button-view-all-bookings",children:"View All Bookings"}),e.jsxs(M,{className:"gap-2",onClick:()=>f(!0),"data-testid":"button-new-booking",children:[e.jsx(bt,{className:"w-4 h-4"}),"New Booking"]}),e.jsxs(M,{variant:"outline",className:"gap-2",onClick:()=>s("live"),"data-testid":"button-live-calendar",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Live Calendar"]})]})]}),!T&&e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(Zi,{className:"w-5 h-5"}),"Filters & Search"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(G,{type:"text",placeholder:"Search property or guest...",value:a,onChange:q=>i(q.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(se,{value:l,onValueChange:o,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),_.map(q=>e.jsx(A,{value:String(q.id),children:q.name},q.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Area"}),e.jsxs(se,{value:c,onValueChange:d,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Areas"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Areas"}),e.jsx(A,{value:"Bophut",children:"Bophut"}),e.jsx(A,{value:"Lamai",children:"Lamai"}),e.jsx(A,{value:"Chaweng",children:"Chaweng"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Manager"}),e.jsxs(se,{value:u,onValueChange:m,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Managers"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Managers"}),e.jsx(A,{value:"Dean",children:"Dean"}),e.jsx(A,{value:"Jane",children:"Jane"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(se,{value:h,onValueChange:x,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"Confirmed",children:"Confirmed"}),e.jsx(A,{value:"Pending",children:"Pending"}),e.jsx(A,{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"View Mode"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:n==="list"?"default":"outline",size:"sm",onClick:()=>r("list"),className:"flex-1",children:e.jsx(bD,{className:"w-4 h-4"})}),e.jsx(M,{variant:n==="grid"?"default":"outline",size:"sm",onClick:()=>r("grid"),className:"flex-1",children:e.jsx(eF,{className:"w-4 h-4"})})]})]})]})})]}),e.jsxs(ft,{value:t,onValueChange:s,children:[e.jsxs(xt,{className:"grid w-full grid-cols-3",children:[e.jsxs(ae,{value:"bookings",className:"gap-2",children:[e.jsx(bD,{className:"w-4 h-4"}),"Booking List"]}),e.jsxs(ae,{value:"calendar",className:"gap-2",children:[e.jsx(tt,{className:"w-4 h-4"}),"Multi-Property Calendar"]}),e.jsxs(ae,{value:"live",className:"gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Live Calendar"]})]}),e.jsxs(ie,{value:"bookings",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Individual Bookings (",O.length,")"]}),e.jsxs(z,{variant:"outline",children:["Total Revenue: ",O.reduce((q,re)=>q+(parseFloat(re.totalAmount)||0),0).toLocaleString()]})]}),P?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading bookings..."})}):O.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Bookings Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||l!=="all"||c!=="all"||h!=="all"?"Try adjusting your filters":"Create your first booking to get started"}),e.jsxs(M,{onClick:()=>f(!0),children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"New Booking"]})]}):n==="list"?e.jsx("div",{className:"space-y-3",children:O.map(q=>{var pe,F;const re=_.find(Q=>Q.id===q.propertyId),we=q.checkIn?new Date(q.checkIn).toLocaleDateString():"N/A",K=q.checkOut?new Date(q.checkOut).toLocaleDateString():"N/A",Ce=q.checkIn&&q.checkOut?Math.ceil((new Date(q.checkOut).getTime()-new Date(q.checkIn).getTime())/(1e3*60*60*24)):0;return e.jsx(E,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>H(q.id),"data-testid":`booking-card-${q.id}`,children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(dt,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:q.guestName||"Guest"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(re==null?void 0:re.name)||"Property"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-4 h-4"}),e.jsx("span",{children:(re==null?void 0:re.address)||"N/A"})]}),(re==null?void 0:re.bedrooms)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ko,{className:"w-4 h-4"}),e.jsxs("span",{children:[re.bedrooms," BR"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["",parseFloat(q.totalAmount||0).toLocaleString()]}),Ce>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Ce," nights"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm",children:[we,"  ",K]}),e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(z,{className:Y(q.status),children:q.status}),(((pe=q.status)==null?void 0:pe.toLowerCase())==="pending"||((F=q.status)==null?void 0:F.toLowerCase())==="confirmed")&&(q.paymentStatus==="paid"||q.paymentStatus==="partial")&&e.jsxs(z,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1",children:[e.jsx(yr,{className:"w-3 h-3"}),q.paymentStatus==="paid"?"Pre-Paid":"Partial"]})]})]})]})})},q.id)})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(q=>{var Ce,pe;const re=_.find(F=>F.id===q.propertyId),we=q.checkIn?new Date(q.checkIn).toLocaleDateString():"N/A",K=q.checkOut?new Date(q.checkOut).toLocaleDateString():"N/A";return e.jsxs(E,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>H(q.id),"data-testid":`booking-card-grid-${q.id}`,children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsx(B,{className:"text-lg",children:q.guestName||"Guest"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:Y(q.status),children:q.status}),(((Ce=q.status)==null?void 0:Ce.toLowerCase())==="pending"||((pe=q.status)==null?void 0:pe.toLowerCase())==="confirmed")&&(q.paymentStatus==="paid"||q.paymentStatus==="partial")&&e.jsxs(z,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1",children:[e.jsx(yr,{className:"w-3 h-3"}),q.paymentStatus==="paid"?"Pre-Paid":"Partial"]})]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(re==null?void 0:re.name)||"Property"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(re==null?void 0:re.address)||"N/A",(re==null?void 0:re.bedrooms)&&`  ${re.bedrooms} BR`]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Check-in:"}),e.jsx("span",{className:"text-sm font-medium",children:we})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Check-out:"}),e.jsx("span",{className:"text-sm font-medium",children:K})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Amount:"}),e.jsxs("span",{className:"text-sm font-medium",children:["",parseFloat(q.totalAmount||0).toLocaleString()]})]})]})})]},q.id)})})]}),e.jsxs(ie,{value:"calendar",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Multi-Property Calendar (",R.length," ","properties)"]}),e.jsxs(z,{variant:"outline",children:["Total Bookings:"," ",R.reduce((q,re)=>q+re.bookings.length,0)]})]}),V?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading properties..."})}):R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-muted-foreground",children:a||c!=="all"?"Try adjusting your filters":"No properties available"})]}):e.jsx("div",{className:"space-y-4",children:R.map(q=>e.jsxs(E,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(L,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{className:"text-xl",children:q.name}),e.jsxs(z,{variant:"secondary",children:[q.bookings.length," Booking",q.bookings.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-4 h-4"}),e.jsxs("span",{children:["Address: ",q.address||"N/A"]})]}),q.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ko,{className:"w-4 h-4"}),e.jsxs("span",{children:[q.bedrooms," Bedrooms"]})]}),q.bathrooms&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:[q.bathrooms," Bathrooms"]})})]})]}),e.jsx(D,{children:q.bookings.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No bookings for this property"}):e.jsx("div",{className:"space-y-3",children:q.bookings.map(re=>{const we=re.checkIn?new Date(re.checkIn).toLocaleDateString():"N/A",K=re.checkOut?new Date(re.checkOut).toLocaleDateString():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:re.guestName||"Guest"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[we,"  ",K]})]})]}),e.jsx(z,{className:Y(re.status),children:re.status})]},re.id)})})})]},q.id))})]}),e.jsxs(ie,{value:"live",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5"}),"Live Booking Calendar"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{onClick:()=>f(!0),className:"gap-2",children:[e.jsx(bt,{className:"w-4 h-4"}),"New Booking"]})})]}),P?e.jsx(E,{children:e.jsx(D,{className:"p-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar..."})})}):e.jsx(Boe,{bookings:I.map(q=>({...q,checkIn:q.checkIn||q.checkInDate,checkOut:q.checkOut||q.checkOutDate}))}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{children:["Upcoming Bookings (",O.length,")"]})}),e.jsx(D,{children:O.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No bookings to display"}):e.jsx("div",{className:"space-y-3",children:O.slice(0,10).map(q=>{const re=_.find(Ce=>Ce.id===q.propertyId),we=q.checkIn?new Date(q.checkIn).toLocaleDateString():"N/A",K=q.checkOut?new Date(q.checkOut).toLocaleDateString():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:q.guestName||"Guest"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(re==null?void 0:re.name)||"Property"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[we,"  ",K]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["",parseFloat(q.totalAmount||0).toLocaleString()]})]}),e.jsx(z,{className:Y(q.status),children:q.status})]},q.id)})})})]})]})]}),e.jsx(E,{className:"mt-6",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Showing"," ",t==="bookings"?O.length:R.length,t==="bookings"?" bookings":" properties"]}),e.jsx("span",{children:t==="bookings"?`Total Revenue: ${O.reduce((q,re)=>q+(parseFloat(re.totalAmount)||0),0).toLocaleString()}`:`Total Properties: ${R.length}`})]})})})]}),e.jsx(D0,{open:p,onOpenChange:f}),e.jsx(qoe,{open:y,onOpenChange:v,bookingId:j})]})}var qP="Radio",[Goe,ZV]=Pn(qP),[Woe,Koe]=Goe(qP),JV=b.forwardRef((t,s)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:i,disabled:l,value:o="on",onCheck:c,form:d,...u}=t,[m,h]=b.useState(null),x=kt(s,j=>h(j)),p=b.useRef(!1),f=m?d||!!m.closest("form"):!0;return e.jsxs(Woe,{scope:n,checked:a,disabled:l,children:[e.jsx(st.button,{type:"button",role:"radio","aria-checked":a,"data-state":nU(a),"data-disabled":l?"":void 0,disabled:l,value:o,...u,ref:x,onClick:Be(t.onClick,j=>{a||c==null||c(),f&&(p.current=j.isPropagationStopped(),p.current||j.stopPropagation())})}),f&&e.jsx(sU,{control:m,bubbles:!p.current,name:r,value:o,checked:a,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});JV.displayName=qP;var eU="RadioIndicator",tU=b.forwardRef((t,s)=>{const{__scopeRadio:n,forceMount:r,...a}=t,i=Koe(eU,n);return e.jsx(An,{present:r||i.checked,children:e.jsx(st.span,{"data-state":nU(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});tU.displayName=eU;var Yoe="RadioBubbleInput",sU=b.forwardRef(({__scopeRadio:t,control:s,checked:n,bubbles:r=!0,...a},i)=>{const l=b.useRef(null),o=kt(l,i),c=d0(n),d=s0(s);return b.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&x){const p=new Event("click",{bubbles:r});x.call(u,n),u.dispatchEvent(p)}},[c,n,r]),e.jsx(st.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sU.displayName=Yoe;function nU(t){return t?"checked":"unchecked"}var Qoe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],M0="RadioGroup",[Xoe]=Pn(M0,[xh,ZV]),rU=xh(),aU=ZV(),[Zoe,Joe]=Xoe(M0),iU=b.forwardRef((t,s)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:i,required:l=!1,disabled:o=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...h}=t,x=rU(n),p=mh(d),[f,j]=ra({prop:i,defaultProp:a??null,onChange:m,caller:M0});return e.jsx(Zoe,{scope:n,name:r,required:l,disabled:o,value:f,onValueChange:j,children:e.jsx(lP,{asChild:!0,...x,orientation:c,dir:p,loop:u,children:e.jsx(st.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":o?"":void 0,dir:p,...h,ref:s})})})});iU.displayName=M0;var lU="RadioGroupItem",oU=b.forwardRef((t,s)=>{const{__scopeRadioGroup:n,disabled:r,...a}=t,i=Joe(lU,n),l=i.disabled||r,o=rU(n),c=aU(n),d=b.useRef(null),u=kt(s,d),m=i.value===a.value,h=b.useRef(!1);return b.useEffect(()=>{const x=f=>{Qoe.includes(f.key)&&(h.current=!0)},p=()=>h.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",p)}},[]),e.jsx(oP,{asChild:!0,...o,focusable:!l,active:m,children:e.jsx(JV,{disabled:l,required:i.required,checked:m,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:Be(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Be(a.onFocus,()=>{var x;h.current&&((x=d.current)==null||x.click())})})})});oU.displayName=lU;var ece="RadioGroupIndicator",cU=b.forwardRef((t,s)=>{const{__scopeRadioGroup:n,...r}=t,a=aU(n);return e.jsx(tU,{...a,...r,ref:s})});cU.displayName=ece;var dU=iU,uU=oU,tce=cU;const mU=b.forwardRef(({className:t,...s},n)=>e.jsx(dU,{className:Ue("grid gap-2",t),...s,ref:n}));mU.displayName=dU.displayName;const hU=b.forwardRef(({className:t,...s},n)=>e.jsx(uU,{ref:n,className:Ue("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(tce,{className:"flex items-center justify-center",children:e.jsx(Q$,{className:"h-2.5 w-2.5 fill-current text-current"})})}));hU.displayName=uU.displayName;const ME=[{value:"auto-bill-guest",label:"Auto-Bill Guest",icon:yr,description:"Charge automatically to guest bill",color:"text-blue-600"},{value:"auto-bill-owner",label:"Auto-Bill Owner",icon:Ht,description:"Charge to property owner account",color:"text-green-600"},{value:"owner-gift",label:"Owner Gift",icon:ip,description:"Complimentary from property owner",color:"text-purple-600"},{value:"company-gift",label:"Company Gift",icon:ln,description:"Complimentary from management company",color:"text-orange-600"}],_E={transportation:Lo,massage:Cf,chef:kf,cleaning:fn,activities:tt,concierge:Ht},sce=ds({serviceId:Pe().min(1,"Please select a service"),propertyId:Pe().min(1,"Please select a property"),guestName:Pe().min(1,"Guest name is required"),guestEmail:Pe().email("Valid email required").optional().or(hx("")),guestPhone:Pe().optional(),scheduledDate:Pe().min(1,"Date and time required"),duration:Pe().optional(),quantity:Pe().default("1"),billingType:zs(["auto-bill-guest","auto-bill-owner","owner-gift","company-gift"]),price:Pe().optional(),dateDue:Pe().optional(),giftReason:Pe().optional(),notes:Pe().optional(),internalNotes:Pe().optional()}).refine(t=>t.billingType==="owner-gift"||t.billingType==="company-gift"?!0:t.price&&t.price.trim().length>0,{message:"Price is required",path:["price"]});function nce({open:t,onOpenChange:s,selectedPropertyId:n,selectedServiceId:r,bookerRole:a="manager"}){const{toast:i}=at(),l=yt(),[o,c]=b.useState(null),[d,u]=b.useState(0),m=Zt({resolver:xs(sce),defaultValues:{serviceId:(r==null?void 0:r.toString())||"",propertyId:(n==null?void 0:n.toString())||"",guestName:"",guestEmail:"",guestPhone:"",scheduledDate:"",duration:"",quantity:"1",billingType:"auto-bill-guest",price:"",dateDue:"",giftReason:"",notes:"",internalNotes:""}}),{data:h}=ye({queryKey:["/api/addon-services"]}),{data:x}=ye({queryKey:["/api/properties"]}),p=m.watch("serviceId"),f=m.watch("duration"),j=m.watch("quantity"),g=m.watch("billingType"),y=m.watch("price");b.useEffect(()=>{t&&r&&m.setValue("serviceId",r.toString()),t&&n&&m.setValue("propertyId",n.toString())},[t,r,n,m]),b.useEffect(()=>{if(h&&p){const P=h.find($=>$.id.toString()===p);if(P){c(P);let $=0;const V=parseInt(j)||1;if(P.pricingModel==="fixed")$=parseFloat(P.basePrice||"0")*V;else if(P.pricingModel==="variable"&&f){const I=parseInt(f)||0,_=parseFloat(P.hourlyRate||"0"),U=parseFloat(P.minimumCharge||"0");$=Math.max(I/60*_*V,U)}else P.pricingModel==="complimentary"&&($=0);u($)}}},[h,p,f,j]);const v=Ee({mutationFn:async P=>{const $={"auto-bill-guest":"auto_guest","auto-bill-owner":"auto_owner","owner-gift":"owner_gift","company-gift":"company_gift"},V={service_id:parseInt(P.serviceId),property_id:parseInt(P.propertyId),guest_name:P.guestName,guest_email:P.guestEmail||null,guest_phone:P.guestPhone||null,billing_type:$[P.billingType],price:P.price||(d>0?d.toString():null),date_due:P.dateDue||null,scheduled_date:new Date(P.scheduledDate).toISOString()};return await ve("POST","/api/service-bookings",V)},onSuccess:()=>{i({title:"Service Booked Successfully",description:`${o==null?void 0:o.name} has been scheduled for ${m.getValues("guestName")}`}),l.invalidateQueries({queryKey:["/api/service-bookings"]}),l.invalidateQueries({queryKey:["/api/addon-bookings"]}),l.invalidateQueries({queryKey:["/api/finances"]}),m.reset(),s(!1)},onError:P=>{i({title:"Booking Failed",description:P.message,variant:"destructive"})}}),w=P=>{if(console.log(" Form submitted with data:",P),(P.billingType==="owner-gift"||P.billingType==="company-gift")&&!P.giftReason){m.setError("giftReason",{message:"Gift reason is required for complimentary services"}),i({title:"Missing Information",description:"Please provide a reason for the complimentary service",variant:"destructive"});return}v.mutate(P)},{data:N}=ye({queryKey:["/api/system-settings"]}),S=P=>{const $=(N==null?void 0:N.defaultCurrency)||"AUD";return new Intl.NumberFormat("en-AU",{style:"currency",currency:$}).format(P)},k=y&&parseFloat(y)>0?parseFloat(y):d,T=g==="owner-gift"||g==="company-gift",C=ME.find(P=>P.value===g);return e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Book Add-on Service"]}),e.jsx(Rt,{children:"Schedule an add-on service with flexible pricing and billing options"})]}),e.jsx(os,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(w),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{control:m.control,name:"serviceId",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Service"}),e.jsxs(se,{onValueChange:P.onChange,value:P.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select a service"})})}),e.jsx(te,{children:h==null?void 0:h.map($=>{const V=_E[$.category]||Ht;return e.jsx(A,{value:$.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:$.name}),e.jsx(z,{variant:"outline",className:"ml-auto",children:$.pricingModel})]})},$.id)})})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:m.control,name:"propertyId",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Property"}),e.jsxs(se,{onValueChange:P.onChange,value:P.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})})}),e.jsx(te,{children:x==null?void 0:x.map($=>e.jsx(A,{value:$.id.toString(),children:$.name},$.id))})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{control:m.control,name:"guestName",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Name"}),e.jsx(ue,{children:e.jsx(G,{...P,placeholder:"Guest full name"})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(me,{control:m.control,name:"guestEmail",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Email (Optional)"}),e.jsx(ue,{children:e.jsx(G,{...P,type:"email",placeholder:"guest@example.com"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:m.control,name:"guestPhone",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Phone (Optional)"}),e.jsx(ue,{children:e.jsx(G,{...P,placeholder:"+61 400 000 000"})}),e.jsx(fe,{})]})})]})]})]}),o&&e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[(()=>{const P=_E[o.category]||Ht;return e.jsx(P,{className:"w-5 h-5"})})(),o.name,e.jsx(z,{variant:"outline",children:o.pricingModel})]}),e.jsx(Me,{children:o.description})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(me,{control:m.control,name:"scheduledDate",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{className:"text-red-600",children:"Date & Time *"}),e.jsx(ue,{children:e.jsx(G,{type:"datetime-local",value:P.value,onChange:P.onChange,onBlur:P.onBlur,name:P.name,ref:P.ref,required:!0})}),e.jsx(fe,{})]})}),o.pricingModel==="variable"&&e.jsx(me,{control:m.control,name:"duration",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Duration (minutes)"}),e.jsx(ue,{children:e.jsx(G,{...P,type:"number",placeholder:"60"})}),e.jsxs(ls,{children:["Rate: ",S(o.hourlyRate||0),"/hour"]}),e.jsx(fe,{})]})}),e.jsx(me,{control:m.control,name:"quantity",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Quantity"}),e.jsx(ue,{children:e.jsx(G,{...P,type:"number",min:"1"})}),e.jsx(fe,{})]})})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"Billing & Payment"]})}),e.jsxs(D,{children:[e.jsx(me,{control:m.control,name:"billingType",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"How should this be billed?"}),e.jsx(ue,{children:e.jsx(mU,{onValueChange:P.onChange,value:P.value,className:"grid grid-cols-2 gap-4",children:ME.map($=>{const V=$.icon;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hU,{value:$.value,id:$.value}),e.jsxs(W,{htmlFor:$.value,className:"flex items-center gap-2 cursor-pointer flex-1 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(V,{className:`w-4 h-4 ${$.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:$.label}),e.jsx("div",{className:"text-xs text-gray-500",children:$.description})]})]})]},$.value)})})}),e.jsx(fe,{})]})}),T&&e.jsx(me,{control:m.control,name:"giftReason",render:({field:P})=>e.jsxs(de,{className:"mt-4",children:[e.jsx(he,{children:"Gift Reason"}),e.jsx(ue,{children:e.jsx(G,{...P,placeholder:"e.g., Welcome gift, Apology for inconvenience"})}),e.jsx(ls,{children:"Explain why this service is being provided complimentary"}),e.jsx(fe,{})]})}),!T&&e.jsx(me,{control:m.control,name:"price",render:({field:P})=>e.jsxs(de,{className:"mt-4",children:[e.jsx(he,{children:"Price"}),e.jsx(ue,{children:e.jsx(G,{...P,type:"number",step:"0.01",placeholder:d>0?S(d):"0.00"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:m.control,name:"dateDue",render:({field:P})=>e.jsxs(de,{className:"mt-4",children:[e.jsx(he,{children:"Payment Due Date (Optional)"}),e.jsx(ue,{children:e.jsx(G,{...P,type:"date",min:new Date().toISOString().split("T")[0]})}),e.jsx(ls,{children:"When should this payment be due?"}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Price:"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:T?"Complimentary":S(k)})]}),C&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600",children:[e.jsx(C.icon,{className:`w-4 h-4 ${C.color}`}),e.jsx("span",{children:C.description})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:m.control,name:"notes",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Notes"}),e.jsx(ue,{children:e.jsx(mt,{...P,placeholder:"Special requests or instructions"})}),e.jsx(ls,{children:"Visible to guest and staff"}),e.jsx(fe,{})]})}),(a==="manager"||a==="staff")&&e.jsx(me,{control:m.control,name:"internalNotes",render:({field:P})=>e.jsxs(de,{children:[e.jsx(he,{children:"Internal Notes"}),e.jsx(ue,{children:e.jsx(mt,{...P,placeholder:"Staff-only notes"})}),e.jsx(ls,{children:"Only visible to staff and management"}),e.jsx(fe,{})]})})]}),e.jsxs(ir,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:v.isPending,onClick:P=>{console.log(" Book Service button clicked"),console.log("Form values:",m.getValues()),console.log("Form errors:",m.formState.errors),console.log("Form is valid:",m.formState.isValid)},children:v.isPending?"Booking...":"Book Service"})]})]})})]})})}function rce({open:t,onClose:s}){const{toast:n}=at(),[r,a]=b.useState(null),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,u]=b.useState(""),[m,h]=b.useState(""),[x,p]=b.useState(""),[f,j]=b.useState(""),[g,y]=b.useState(""),[v,w]=b.useState("owner"),[N,S]=b.useState(!1),{data:k=[]}=ye({queryKey:["/api/properties"]}),T=["application/pdf","image/jpeg","image/jpg","image/png"],C=V=>{var _;const I=(_=V.target.files)==null?void 0:_[0];if(I){if(!T.includes(I.type)){n({title:"Invalid file type",description:"Only PDF, JPG, and PNG files are allowed.",variant:"destructive"}),V.target.value="";return}if(I.size>10*1024*1024){n({title:"File too large",description:"File size must be less than 10MB.",variant:"destructive"}),V.target.value="";return}a(I)}},P=async V=>{if(V.preventDefault(),!r){n({title:"Missing file",description:"Please attach a receipt (PDF, JPG, or PNG).",variant:"destructive"});return}if(!i){n({title:"Missing property",description:"Please select a property.",variant:"destructive"});return}if(!o){n({title:"Missing bill type",description:"Please select a bill type.",variant:"destructive"});return}if(!m){n({title:"Missing due date",description:"Please select a due date.",variant:"destructive"});return}if(!g){n({title:"Missing billing month",description:"Please select a billing month.",variant:"destructive"});return}S(!0);try{const I=new FormData;I.append("receipt",r),I.append("property_id",i),I.append("bill_type",o),I.append("amount",d||"0"),I.append("due_date",m),I.append("provider",x||""),I.append("account_number",f||""),I.append("billing_month",g),I.append("responsible_party",v);const _=await fetch("/api/utility-bills",{method:"POST",body:I,credentials:"include"}),U=await _.json();if(!_.ok)throw new Error(U.error||"Upload failed");n({title:"Upload successful",description:"Utility bill has been uploaded successfully."}),Bs.invalidateQueries({queryKey:["/api/utility-bills"]}),$()}catch(I){console.error("Upload error:",I),n({title:"Upload failed",description:I.message||"An error occurred while uploading the bill.",variant:"destructive"})}finally{S(!1)}},$=()=>{a(null),l(""),c(""),u(""),h(""),p(""),j(""),y(""),w("owner"),s()};return e.jsx(Ke,{open:t,onOpenChange:$,children:e.jsxs(Ye,{className:"sm:max-w-[500px] max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Upload Utility Bill"})}),e.jsxs("form",{onSubmit:P,className:"space-y-4 overflow-y-auto px-1",style:{maxHeight:"calc(90vh - 120px)"},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"property",children:"Property *"}),e.jsxs(se,{value:i,onValueChange:l,required:!0,children:[e.jsx(ee,{id:"property","data-testid":"select-property",children:e.jsx(ne,{placeholder:"Select property"})}),e.jsx(te,{children:k.map(V=>e.jsx(A,{value:V.id.toString(),children:V.name},V.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"billType",children:"Bill Type *"}),e.jsxs(se,{value:o,onValueChange:c,required:!0,children:[e.jsx(ee,{id:"billType","data-testid":"select-bill-type",children:e.jsx(ne,{placeholder:"Select type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"electricity",children:"Electricity"}),e.jsx(A,{value:"water",children:"Water"}),e.jsx(A,{value:"gas",children:"Gas"}),e.jsx(A,{value:"internet",children:"Internet"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"amount",children:"Amount"}),e.jsx(G,{id:"amount",type:"number",step:"0.01",min:"0",value:d,onChange:V=>u(V.target.value),placeholder:"0.00","data-testid":"input-amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"dueDate",children:"Due Date *"}),e.jsx(G,{id:"dueDate",type:"date",value:m,onChange:V=>h(V.target.value),required:!0,"data-testid":"input-due-date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"billingMonth",children:"Billing Month * (YYYY-MM)"}),e.jsx(G,{id:"billingMonth",type:"month",value:g,onChange:V=>y(V.target.value),required:!0,"data-testid":"input-billing-month"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"provider",children:"Provider"}),e.jsx(G,{id:"provider",type:"text",value:x,onChange:V=>p(V.target.value),placeholder:"e.g. Energy Australia","data-testid":"input-provider"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"accountNumber",children:"Account Number"}),e.jsx(G,{id:"accountNumber",type:"text",value:f,onChange:V=>j(V.target.value),placeholder:"Optional","data-testid":"input-account-number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"responsibleParty",children:"Responsible Party"}),e.jsxs(se,{value:v,onValueChange:w,children:[e.jsx(ee,{id:"responsibleParty","data-testid":"select-responsible-party",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"company",children:"Company"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"receipt",children:"Receipt * (PDF, JPG, PNG - max 10MB)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{id:"receipt",type:"file",accept:".pdf,image/jpeg,image/jpg,image/png",onChange:C,required:!0,"data-testid":"input-receipt-file",className:"flex-1"}),r&&e.jsx(M,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(null),"data-testid":"button-remove-file",children:e.jsx(on,{className:"w-4 h-4"})})]}),r&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",r.name," (",(r.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:$,disabled:N,"data-testid":"button-cancel-upload",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:N,"data-testid":"button-submit-upload",children:N?e.jsxs(e.Fragment,{children:[e.jsx(mi,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mi,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})]})})}function ace(){const[t,s]=b.useState("addon-services"),[n,r]=b.useState(!1),[a,i]=b.useState(),[l,o]=b.useState(),[c,d]=b.useState(!1),[u,m]=b.useState("all"),[h,x]=b.useState("all"),[p,f]=b.useState("all"),[j,g]=b.useState(""),[y,v]=b.useState(""),{toast:w}=at(),{data:N=[]}=ye({queryKey:["/api/addon-services"]}),{data:S=[]}=ye({queryKey:["/api/addon-bookings"]}),{data:k}=ye({queryKey:["/api/service-bookings"]}),T=Array.isArray(k==null?void 0:k.bookings)?k.bookings:[],{data:C=[]}=ye({queryKey:["/api/utility-bills"]}),{data:P=[]}=ye({queryKey:["/api/properties"]}),{data:$}=ye({queryKey:["/api/system-settings"]}),V=Ee({mutationFn:async({billId:O,status:R})=>await ve("PATCH",`/api/utility-bills/${O}`,{status:R}),onSuccess:async()=>{await Bs.refetchQueries({queryKey:["/api/utility-bills"]}),w({title:"Status Updated",description:"Bill status has been updated successfully."})},onError:O=>{w({title:"Update Failed",description:O.message||"Failed to update bill status.",variant:"destructive"})}}),I=Ee({mutationFn:async O=>await ve("DELETE",`/api/utility-bills/${O}`),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/utility-bills"]}),w({title:"Bill Deleted",description:"Utility bill has been deleted successfully."})},onError:O=>{w({title:"Delete Failed",description:O.message||"Failed to delete bill.",variant:"destructive"})}}),_=b.useMemo(()=>C.filter(O=>{if(u!=="all"&&O.propertyId!==parseInt(u)||h!=="all"&&O.type!==h||p!=="all"&&O.status!==p)return!1;const R=new Date(O.dueDate);return!(j&&new Date(j)>R||y&&new Date(y)<R)}),[C,u,h,p,j,y]),U=O=>{if(O==null)return"$0.00";const R=O/100,q=($==null?void 0:$.defaultCurrency)||"AUD";return new Intl.NumberFormat("en-AU",{style:"currency",currency:q}).format(R)},H=O=>{switch(O){case"chef":return e.jsx(kf,{className:"w-5 h-5"});case"massage":return e.jsx(dm,{className:"w-5 h-5"});case"transportation":return e.jsx(Lo,{className:"w-5 h-5"});case"activities":return e.jsx(ws,{className:"w-5 h-5"});default:return e.jsx(dt,{className:"w-5 h-5"})}},Y=O=>{switch(O){case"active":return"default";case"pending":return"secondary";case"confirmed":return"default";case"completed":return"outline";case"paid":return"outline";case"overdue":return"destructive";default:return"secondary"}};return e.jsxs("div",{className:"min-h-screen flex bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(ec,{title:"Services & Utilities",action:e.jsxs(M,{className:"bg-primary hover:bg-primary/90",onClick:()=>{i(void 0),r(!0)},"data-testid":"button-add-service",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Service"]})}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsx(M,{variant:t==="addon-services"?"default":"ghost",size:"sm",onClick:()=>s("addon-services"),children:"Add-on Services"}),e.jsx(M,{variant:t==="service-bookings"?"default":"ghost",size:"sm",onClick:()=>s("service-bookings"),children:"Service Bookings"}),e.jsx(M,{variant:t==="utility-bills"?"default":"ghost",size:"sm",onClick:()=>s("utility-bills"),children:"Utility Bills"})]}),t==="addon-services"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(O=>e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:H(O.category)}),e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:O.name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:O.category})]})]}),e.jsx(z,{variant:O.isActive?"default":"secondary",children:O.isActive?"Active":"Inactive"})]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:O.description}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{children:e.jsx("span",{className:"text-lg font-semibold text-primary",children:O.pricingModel==="complimentary"?"Complimentary":O.pricingModel==="variable"?O.hourlyRate?`$${Number(O.hourlyRate).toFixed(2)}/hr`:"$0.00/hr":O.defaultPriceCents!=null?`$${(O.defaultPriceCents/100).toFixed(2)}`:O.basePrice!=null?`$${Number(O.basePrice).toFixed(2)}`:"$0.00"})}),e.jsx(z,{variant:"outline",className:"capitalize",children:O.pricingModel})]}),e.jsxs(M,{onClick:()=>{i(O.id),r(!0)},className:"w-full",size:"sm",disabled:!O.isActive,children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Book Service"]})]})]},O.id))}),N.length===0&&e.jsx(E,{children:e.jsxs(D,{className:"text-center py-12",children:[e.jsx(dt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Add-on Services"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start by adding services like cleaning, massage, or chef services."}),e.jsxs(M,{className:"bg-primary hover:bg-primary/90",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add First Service"]})]})})]}),t==="service-bookings"&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Service Bookings"})}),e.jsx(D,{children:T.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No service bookings found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Booking ID"}),e.jsx(Re,{children:"Service"}),e.jsx(Re,{children:"Guest"}),e.jsx(Re,{children:"Property"}),e.jsx(Re,{children:"Scheduled Date"}),e.jsx(Re,{children:"Price"}),e.jsx(Re,{children:"Billing Type"}),e.jsx(Re,{children:"Due Date"})]})}),e.jsx(yn,{children:T.map(O=>{var R;return e.jsxs(Ot,{children:[e.jsx(Oe,{className:"font-mono text-xs",children:O.bookingIdRef||"N/A"}),e.jsx(Oe,{children:O.serviceName||"Unknown"}),e.jsx(Oe,{children:O.guestName}),e.jsx(Oe,{children:O.propertyName||`Property ${O.propertyId}`}),e.jsx(Oe,{children:new Date(O.scheduledDate).toLocaleDateString()}),e.jsx(Oe,{children:O.priceCents?U(O.priceCents):e.jsx(z,{variant:"secondary",children:"Complimentary"})}),e.jsx(Oe,{className:"capitalize",children:((R=O.billingType)==null?void 0:R.replace("_"," "))||"N/A"}),e.jsx(Oe,{children:O.dateDue?new Date(O.dateDue).toLocaleDateString():"-"})]},O.id)})})]})})})]}),t==="utility-bills"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Property"}),e.jsxs(se,{value:u,onValueChange:m,children:[e.jsx(ee,{"data-testid":"select-filter-property",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),P.map(O=>e.jsx(A,{value:O.id.toString(),children:O.name},O.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Type"}),e.jsxs(se,{value:h,onValueChange:x,children:[e.jsx(ee,{"data-testid":"select-filter-type",children:e.jsx(ne,{placeholder:"All Types"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"electricity",children:"Electricity"}),e.jsx(A,{value:"water",children:"Water"}),e.jsx(A,{value:"gas",children:"Gas"}),e.jsx(A,{value:"internet",children:"Internet"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Status"}),e.jsxs(se,{value:p,onValueChange:f,children:[e.jsx(ee,{"data-testid":"select-filter-status",children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"uploaded",children:"Uploaded"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date From"}),e.jsx(G,{type:"date",value:j,onChange:O=>g(O.target.value),"data-testid":"input-filter-date-from"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date To"}),e.jsx(G,{type:"date",value:y,onChange:O=>v(O.target.value),"data-testid":"input-filter-date-to"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",_.length," of ",C.length," bills"]}),e.jsxs(M,{variant:"default",onClick:()=>d(!0),"data-testid":"button-upload-receipt",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Upload Receipt"]})]})]})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Utility Bills & Recurring Expenses"})}),e.jsx(D,{children:_.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:C.length===0?"No utility bills found":"No bills match the current filters"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Type"}),e.jsx(Re,{children:"Provider"}),e.jsx(Re,{children:"Property"}),e.jsx(Re,{children:"Amount"}),e.jsx(Re,{children:"Due Date"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:_.map(O=>e.jsxs(Ot,{children:[e.jsx(Oe,{className:"capitalize",children:O.type}),e.jsx(Oe,{children:O.provider||"-"}),e.jsx(Oe,{children:O.propertyName||`Property ${O.propertyId}`}),e.jsx(Oe,{children:O.amount?`$${Number(O.amount).toFixed(2)}`:"-"}),e.jsx(Oe,{children:e.jsx("span",{className:`${new Date(O.dueDate)<new Date&&O.status!=="paid"?"text-red-600 font-medium":"text-gray-900"}`,children:new Date(O.dueDate).toLocaleDateString()})}),e.jsx(Oe,{children:e.jsxs(se,{value:O.status,onValueChange:R=>{V.mutate({billId:O.id,status:R})},disabled:V.isPending,children:[e.jsx(ee,{className:"w-[120px]","data-testid":`select-status-${O.id}`,children:e.jsx(ne,{children:e.jsx(z,{variant:Y(O.status),className:"cursor-pointer",children:O.status})})}),e.jsxs(te,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"uploaded",children:"Uploaded"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex space-x-2",children:[O.receiptUrl&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>window.open(O.receiptUrl,"_blank"),"data-testid":`button-view-receipt-${O.id}`,children:[e.jsx(Hi,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this utility bill?")&&I.mutate(O.id)},disabled:I.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${O.id}`,children:e.jsx(br,{className:"w-3 h-3"})})]})})]},O.id))})]})})})]})]})]})]}),e.jsx(nce,{open:n,onOpenChange:r,selectedServiceId:a,selectedPropertyId:l,bookerRole:"manager"}),e.jsx(rce,{open:c,onClose:()=>d(!1)})]})}function ice(){var C;const[t,s]=b.useState("all"),{data:n=[]}=ye({queryKey:["/api/properties"]}),{data:r=[]}=ye({queryKey:["/api/finance"]}),{data:a=[]}=ye({queryKey:["/api/bookings"]}),i=t==="all"?r:r.filter(P=>P.propertyId.toString()===t),l=t==="all"?a:a.filter(P=>P.propertyId.toString()===t),o=l.filter(P=>P.status!=="cancelled").reduce((P,$)=>{const V=parseFloat($.platformPayout||$.totalAmount||"0");return P+V},0),c=i.filter(P=>P.type==="income").reduce((P,$)=>P+parseFloat($.amount||"0"),0),d=o+c,u=i.filter(P=>P.type==="expense").reduce((P,$)=>P+parseFloat($.amount||"0"),0),m=d-u,h=Dr(new Date),x=Cn(h),p=zo(h),f=_2(p,x)+1,j=l.filter(P=>P.status!=="cancelled").reduce((P,$)=>{const V=Dr(Ts($.checkIn)),I=Dr(Ts($.checkOut)),_=mn(p,1),U=V>x?V:x,H=I<_?I:_;return U<H?P+_2(H,U):P},0),y=(t==="all"?n.length:1)*f,v=y>0?(j/y*100).toFixed(1):"0",w=l.filter(P=>P.status==="confirmed"&&bp(h,Ts(P.checkIn))).reduce((P,$)=>{const V=parseFloat($.platformPayout||$.totalAmount||"0");return P+V},0),N=l.filter(P=>P.status==="confirmed"&&bp(h,Ts(P.checkIn))).length,S=[...i].sort((P,$)=>new Date($.date).getTime()-new Date(P.date).getTime()).slice(0,10),k=t==="all"?n.map(P=>{const $=r.filter(I=>I.propertyId===P.id&&I.type==="income").reduce((I,_)=>I+parseFloat(_.amount||"0"),0),V=d>0?($/d*100).toFixed(0):0;return{name:P.name,revenue:$,percentage:V}}).filter(P=>P.revenue>0):[],T=t==="all"?"All Properties":((C=n.find(P=>P.id.toString()===t))==null?void 0:C.name)||"Unknown";return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Financial Dashboard"}),e.jsx("div",{className:"w-64",children:e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{"data-testid":"select-property-filter",children:e.jsx(ne,{placeholder:"Filter by Property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),n.map(P=>e.jsx(A,{value:P.id.toString(),children:P.name},P.id))]})]})})]}),t!=="all"&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing finances for: ",e.jsx("strong",{children:T})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Bt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-total-revenue",children:Nt(d)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bookings: ",Nt(o)," + Other: ",Nt(c)]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Booking Revenue"}),e.jsx(tt,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"text-booking-revenue",children:Nt(o)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l.filter(P=>P.status!=="cancelled").length," bookings"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Occupancy Rate"}),e.jsx(tt,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600","data-testid":"text-occupancy-rate",children:[v,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[j," of ",y," days booked"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Payments"}),e.jsx(et,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"text-pending-payments",children:Nt(w)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N," upcoming booking",N!==1?"s":""]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(Ed,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"text-total-expenses",children:Nt(u)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.filter(P=>P.type==="expense").length," transactions"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(Fi,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${m>=0?"text-blue-600":"text-red-600"}`,"data-testid":"text-net-profit",children:Nt(m)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Profit margin: ",d>0?(m/d*100).toFixed(1):0,"%"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Properties"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t==="all"?n.length:1}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t==="all"?"All properties":T})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent Transactions"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:S.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No transactions found"}):S.map(P=>{const $=n.find(V=>V.id===P.propertyId);return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:P.category}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[($==null?void 0:$.name)||"Unknown Property","  ",new Date(P.date).toLocaleDateString()]})]}),e.jsxs("span",{className:`font-medium ${P.type==="income"?"text-green-600":"text-red-600"}`,children:[P.type==="income"?"+":"-",Nt(parseFloat(P.amount))]})]},P.id)})})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:t==="all"?"Revenue by Property":"Revenue Breakdown"})}),e.jsx(D,{children:t==="all"?e.jsx("div",{className:"space-y-3",children:k.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No revenue data available"}):k.map((P,$)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:P.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:Nt(P.revenue)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",P.percentage,"%)"]})]})]},$))}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Income"}),e.jsx("span",{className:"font-medium text-green-600",children:Nt(d)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Expenses"}),e.jsx("span",{className:"font-medium text-red-600",children:Nt(u)})]}),e.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Net Profit"}),e.jsx("span",{className:`font-bold ${m>=0?"text-blue-600":"text-red-600"}`,children:Nt(m)})]})]})})]})]}),e.jsxs(E,{className:"mt-6",children:[e.jsx(L,{children:e.jsx(B,{children:"Summary"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transactions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[d>0&&u>0?(m/d*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit Margin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length>0?Nt(d/i.filter(P=>P.type==="income").length||0):Nt(0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg. Transaction Value"})]})]})})]})]})}var _0="Switch",[lce]=Pn(_0),[oce,cce]=lce(_0),xU=b.forwardRef((t,s)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...m}=t,[h,x]=b.useState(null),p=kt(s,v=>x(v)),f=b.useRef(!1),j=h?u||!!h.closest("form"):!0,[g,y]=ra({prop:a,defaultProp:i??!1,onChange:d,caller:_0});return e.jsxs(oce,{scope:n,checked:g,disabled:o,children:[e.jsx(st.button,{type:"button",role:"switch","aria-checked":g,"aria-required":l,"data-state":vU(g),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:p,onClick:Be(t.onClick,v=>{y(w=>!w),j&&(f.current=v.isPropagationStopped(),f.current||v.stopPropagation())})}),j&&e.jsx(gU,{control:h,bubbles:!f.current,name:r,value:c,checked:g,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});xU.displayName=_0;var pU="SwitchThumb",fU=b.forwardRef((t,s)=>{const{__scopeSwitch:n,...r}=t,a=cce(pU,n);return e.jsx(st.span,{"data-state":vU(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:s})});fU.displayName=pU;var dce="SwitchBubbleInput",gU=b.forwardRef(({__scopeSwitch:t,control:s,checked:n,bubbles:r=!0,...a},i)=>{const l=b.useRef(null),o=kt(l,i),c=d0(n),d=s0(s);return b.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&x){const p=new Event("click",{bubbles:r});x.call(u,n),u.dispatchEvent(p)}},[c,n,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});gU.displayName=dce;function vU(t){return t?"checked":"unchecked"}var yU=xU,uce=fU;const At=b.forwardRef(({className:t,...s},n)=>e.jsx(yU,{className:Ue("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:n,children:e.jsx(uce,{className:Ue("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));At.displayName=yU.displayName;function RE(){const{user:t}=Cr(),{toast:s}=at(),n=yt(),[r,a]=b.useState("profile"),[i,l]=b.useState({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",email:(t==null?void 0:t.email)||"",phone:"",timezone:"UTC",language:"en"}),[o,c]=b.useState({emailNotifications:!0,pushNotifications:!0,taskReminders:!0}),[d,u]=b.useState("system"),[m,h]=b.useState({organizationName:"HostPilotPro",currency:"THB",dateFormat:"DD/MM/YYYY"});b.useEffect(()=>{t&&l(k=>({...k,firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||""}))},[t]);const x=Ee({mutationFn:async k=>(await ve("PATCH",`/api/users/${t==null?void 0:t.id}`,k)).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/auth/user"]}),n.invalidateQueries({queryKey:["/api/users"]}),s({title:"Profile Updated",description:"Your profile settings have been saved successfully."})},onError:k=>{s({title:"Update Failed",description:(k==null?void 0:k.message)||"Failed to update profile settings.",variant:"destructive"})}}),p=(k,T)=>{l(C=>({...C,[k]:T}))},f=()=>{const k=`${i.firstName} ${i.lastName}`.trim();x.mutate({name:k,email:i.email})},j=(k,T)=>{c(C=>({...C,[k]:T})),s({title:"Setting Updated",description:"Notification preference has been saved."})},g=k=>{u(k);const T=document.documentElement;k==="dark"?T.classList.add("dark"):k==="light"?T.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?T.classList.add("dark"):T.classList.remove("dark"),localStorage.setItem("theme",k),s({title:"Theme Updated",description:`Theme changed to ${k} mode.`})},y=(k,T)=>{h(C=>({...C,[k]:T})),s({title:"Setting Updated",description:`${k} has been updated.`})},v=[{value:"USD",label:"US Dollar ($)"},{value:"EUR",label:"Euro ()"},{value:"GBP",label:"British Pound ()"},{value:"THB",label:"Thai Baht ()"},{value:"JPY",label:"Japanese Yen ()"},{value:"AUD",label:"Australian Dollar (A$)"}],w=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"},{value:"Asia/Bangkok",label:"Bangkok"},{value:"Australia/Sydney",label:"Sydney"}],N=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"th",label:"Thai"},{value:"ja",label:"Japanese"}],S=(t==null?void 0:t.role)==="admin";return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Jt,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Settings"})]}),e.jsxs(ft,{value:r,onValueChange:a,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"profile","data-testid":"tab-profile",children:"Profile"}),e.jsx(ae,{value:"notifications","data-testid":"tab-notifications",children:"Notifications"}),e.jsx(ae,{value:"appearance","data-testid":"tab-appearance",children:"Appearance"}),S&&e.jsx(ae,{value:"system","data-testid":"tab-system",children:"System"})]}),e.jsx(ie,{value:"profile",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-5 w-5"}),"Personal Information"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"firstName",children:"First Name"}),e.jsx(G,{id:"firstName","data-testid":"input-firstName",value:i.firstName,onChange:k=>p("firstName",k.target.value),placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"lastName",children:"Last Name"}),e.jsx(G,{id:"lastName","data-testid":"input-lastName",value:i.lastName,onChange:k=>p("lastName",k.target.value),placeholder:"Enter last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"email",children:"Email Address"}),e.jsx(G,{id:"email","data-testid":"input-email",type:"email",value:i.email,onChange:k=>p("email",k.target.value),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"phone",children:"Phone Number"}),e.jsx(G,{id:"phone","data-testid":"input-phone",value:i.phone,onChange:k=>p("phone",k.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(se,{value:i.timezone,onValueChange:k=>p("timezone",k),children:[e.jsx(ee,{"data-testid":"select-timezone",children:e.jsx(ne,{placeholder:"Select timezone"})}),e.jsx(te,{children:w.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"language",children:"Language"}),e.jsxs(se,{value:i.language,onValueChange:k=>p("language",k),children:[e.jsx(ee,{"data-testid":"select-language",children:e.jsx(ne,{placeholder:"Select language"})}),e.jsx(te,{children:N.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(z,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(qt,{className:"h-3 w-3"}),t==null?void 0:t.role," Access Level"]}),e.jsxs(M,{onClick:f,disabled:x.isPending,"data-testid":"button-save-profile",children:[e.jsx(Sf,{className:"h-4 w-4 mr-2"}),x.isPending?"Saving...":"Save Profile"]})]})]})]})}),e.jsx(ie,{value:"notifications",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-5 w-5"}),"Notification Preferences"]})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(W,{className:"text-base",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(At,{"data-testid":"toggle-emailNotifications",checked:o.emailNotifications,onCheckedChange:k=>j("emailNotifications",k)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(W,{className:"text-base",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive browser push notifications"})]}),e.jsx(At,{"data-testid":"toggle-pushNotifications",checked:o.pushNotifications,onCheckedChange:k=>j("pushNotifications",k)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(W,{className:"text-base",children:"Task Reminders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get reminded about upcoming and overdue tasks"})]}),e.jsx(At,{"data-testid":"toggle-taskReminders",checked:o.taskReminders,onCheckedChange:k=>j("taskReminders",k)})]})]})]})}),e.jsx(ie,{value:"appearance",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(sF,{className:"h-5 w-5"}),"Theme & Display"]})}),e.jsx(D,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(W,{className:"text-base",children:"Theme Preference"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"light",label:"Light",icon:IX},{value:"dark",label:"Dark",icon:wX},{value:"system",label:"System",icon:NX}].map(({value:k,label:T,icon:C})=>e.jsxs(M,{variant:d===k?"default":"outline",className:"flex flex-col items-center gap-2 h-auto py-4",onClick:()=>g(k),"data-testid":`button-theme-${k}`,children:[e.jsx(C,{className:"h-5 w-5"}),T]},k))})]})})]})}),S&&e.jsx(ie,{value:"system",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"System Configuration"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"orgName",children:"Organization Name"}),e.jsx(G,{id:"orgName","data-testid":"input-orgName",value:m.organizationName,onChange:k=>y("organizationName",k.target.value),placeholder:"Enter organization name"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"currency",children:"Default Currency"}),e.jsxs(se,{value:m.currency,onValueChange:k=>y("currency",k),children:[e.jsx(ee,{"data-testid":"select-currency",children:e.jsx(ne,{placeholder:"Select currency"})}),e.jsx(te,{children:v.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"dateFormat",children:"Date Format"}),e.jsxs(se,{value:m.dateFormat,onValueChange:k=>y("dateFormat",k),children:[e.jsx(ee,{"data-testid":"select-dateFormat",children:e.jsx(ne,{placeholder:"Select date format"})}),e.jsxs(te,{children:[e.jsx(A,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(A,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(A,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),e.jsxs("div",{className:"pt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Settings are saved automatically"]})]})]})})]})]})}const mce=jf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),li=b.forwardRef(({className:t,variant:s,...n},r)=>e.jsx("div",{ref:r,role:"alert",className:Ue(mce({variant:s}),t),...n}));li.displayName="Alert";const jU=b.forwardRef(({className:t,...s},n)=>e.jsx("h5",{ref:n,className:Ue("mb-1 font-medium leading-none tracking-tight",t),...s}));jU.displayName="AlertTitle";const oi=b.forwardRef(({className:t,...s},n)=>e.jsx("div",{ref:n,className:Ue("text-sm [&_p]:leading-relaxed",t),...s}));oi.displayName="AlertDescription";const QN=[{email:"admin@test.com",role:"Admin",password:"admin123",permissions:"Full system access, User management, God Mode"},{email:"manager@test.com",role:"JOHN DO (Portfolio Manager)",password:"manager123",permissions:"Property management, Financial oversight"},{email:"owner@test.com",role:"Property Owner",password:"owner123",permissions:"Own properties, Financial reports"},{email:"staff@test.com",role:"Staff Member",password:"staff123",permissions:"Task management, Property operations"},{email:"retail@test.com",role:"Retail Agent",password:"retail123",permissions:"Booking management, Commission tracking"},{email:"referral@test.com",role:"Referral Agent",password:"referral123",permissions:"Property referrals, Commission tracking"}];function hce(){const[,t]=Yn(),{login:s,user:n,isLoading:r}=_a(),[a,i]=b.useState(""),[l,o]=b.useState(""),[c,d]=b.useState(!1),[u,m]=b.useState("");if(n&&!r)return X.useEffect(()=>{t("/")},[t]),null;const h=async p=>{p.preventDefault(),d(!0),m("");try{await s(a,l),t("/")}catch(f){m(f.message||"Login failed. Please check your credentials."),d(!1)}},x=async p=>{const f=QN.find(g=>g.email===p),j=(f==null?void 0:f.password)||"123456";i(p),o(j),d(!0),m("");try{await s(p,j),t("/")}catch(g){m(g.message||"Demo login failed."),d(!1)}};return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"h-6 w-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs("div",{className:"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"hidden lg:block space-y-8",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"HostPilotPro"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Complete Hospitality Management Platform"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ln,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Property Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Comprehensive property oversight with intelligent automation"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(dt,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Multi-Role Access"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Role-based permissions for admins, managers, owners, staff, and agents"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(qt,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Secure Platform"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Enterprise-grade security with encrypted sessions and audit trails"})]})]})]})]}),e.jsx("div",{className:"w-full max-w-md mx-auto lg:mx-0",children:e.jsxs(E,{className:"shadow-xl border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:[e.jsxs(L,{className:"text-center",children:[e.jsx(B,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Welcome Back"}),e.jsx(Me,{className:"text-gray-600 dark:text-gray-300",children:"Sign in to your HostPilotPro account"})]}),e.jsxs(D,{className:"space-y-6",children:[u&&e.jsx(li,{className:"border-red-200 bg-red-50 dark:bg-red-900/20",children:e.jsx(oi,{className:"text-red-700 dark:text-red-300",children:u})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"email",children:"Email"}),e.jsx(G,{id:"email",type:"email",value:a,onChange:p=>i(p.target.value),placeholder:"Enter your email",required:!0,disabled:c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"password",children:"Password"}),e.jsx(G,{id:"password",type:"password",value:l,onChange:p=>o(p.target.value),placeholder:"Enter your password",required:!0,disabled:c})]}),e.jsx(M,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-500",children:"Demo Accounts"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2",children:QN.slice(0,4).map(p=>e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>x(p.email),disabled:c,className:"justify-start text-left",children:[e.jsx(Fe,{className:"mr-2 h-4 w-4 text-green-600"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:p.role}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:p.email})]})]},p.email))}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:QN.slice(4).map(p=>e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>x(p.email),disabled:c,className:"justify-start text-left",children:[e.jsx(Fe,{className:"mr-2 h-4 w-4 text-blue-600"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:p.role}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:p.email})]})]},p.email))})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Demo passwords: admin123, manager123, owner123, staff123, 123456, guest123"})})]})]})})]})})}const Eg={saveProfile:(t,s)=>{try{return localStorage.setItem(`profile_${t}`,JSON.stringify(s)),!0}catch(n){return console.error("Error saving profile:",n),!1}},getProfile:t=>{try{const s=localStorage.getItem(`profile_${t}`);return s?JSON.parse(s):null}catch(s){return console.error("Error loading profile:",s),null}},saveNotifications:(t,s)=>{try{return localStorage.setItem(`notifications_${t}`,JSON.stringify(s)),!0}catch(n){return console.error("Error saving notifications:",n),!1}},getNotifications:t=>{try{const s=localStorage.getItem(`notifications_${t}`);return s?JSON.parse(s):null}catch(s){return console.error("Error loading notifications:",s),null}}};function xce(){const{user:t}=_a(),{toast:s}=at(),[n,r]=b.useState(!1),[a,i]=b.useState(!1),[l,o]=b.useState({firstName:(t==null?void 0:t.firstName)||"Demo",lastName:(t==null?void 0:t.lastName)||"Admin",email:(t==null?void 0:t.email)||"admin@test.com",phone:(t==null?void 0:t.phone)||"+66 2 123 4567",company:(t==null?void 0:t.company)||"HostPilotPro",department:(t==null?void 0:t.department)||"Administration",timezone:(t==null?void 0:t.timezone)||"Asia/Bangkok",language:(t==null?void 0:t.language)||"English"});b.useEffect(()=>{if(t){const j=Eg.getProfile(t.id);j&&o(y=>({...y,...j}));const g=Eg.getNotifications(t.id);g&&d(g)}},[t]);const[c,d]=b.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,taskReminders:!0,bookingAlerts:!0,maintenanceAlerts:!0,paymentNotifications:!0,weeklyReports:!0,monthlyReports:!0,systemUpdates:!1}),[u,m]=b.useState({twoFactorEnabled:!1,sessionTimeout:"4 hours",passwordLastChanged:"2024-12-15"}),h=()=>{if(t){const j={firstName:l.firstName,lastName:l.lastName,email:l.email,phone:l.phone,company:l.company,department:l.department},g=Eg.saveProfile(t.id,j);s(g?{title:"Profile Updated",description:"Your profile information has been saved successfully."}:{title:"Save Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}r(!1)},x=(j,g)=>{const y={...c,[j]:g};d(y),t&&Eg.saveNotifications(t.id,y),s({title:"Notification Settings Updated",description:`${j.replace(/([A-Z])/g," $1").toLowerCase()} ${g?"enabled":"disabled"}.`})},p=j=>{switch(j){case"admin":return"System Administrator";case"portfolio-manager":return"Portfolio Manager";case"owner":return"Property Owner";case"staff":return"Staff Member";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";case"guest":return"Guest";default:return j}},f=j=>{switch(j){case"admin":return"bg-red-500";case"portfolio-manager":return"bg-blue-500";case"owner":return"bg-green-500";case"staff":return"bg-purple-500";case"retail-agent":return"bg-orange-500";case"referral-agent":return"bg-yellow-500";case"guest":return"bg-gray-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(nn,{href:"/",children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Il,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account information and preferences"})]})]}),e.jsx(z,{className:`${f(t==null?void 0:t.role)} text-white`,children:p(t==null?void 0:t.role)})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(E,{className:"lg:col-span-1",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-5 w-5"}),"Profile Overview"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(ai,{className:"h-24 w-24",children:[e.jsx(_d,{src:t==null?void 0:t.profileImageUrl}),e.jsxs(ii,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-2xl",children:[l.firstName.charAt(0),l.lastName.charAt(0)]})]}),e.jsx(M,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 rounded-full h-8 w-8 p-0",onClick:()=>s({title:"Photo Upload",description:"Photo upload feature coming soon!"}),children:e.jsx(bf,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[l.firstName," ",l.lastName]}),e.jsx("p",{className:"text-gray-600",children:l.email}),e.jsx(z,{variant:"secondary",className:"mt-2",children:p(t==null?void 0:t.role)})]})]}),e.jsx(Wr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Company"}),e.jsx("span",{className:"text-sm font-medium",children:l.company})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Department"}),e.jsx("span",{className:"text-sm font-medium",children:l.department})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Timezone"}),e.jsx("span",{className:"text-sm font-medium",children:l.timezone})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Language"}),e.jsx("span",{className:"text-sm font-medium",children:l.language})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Gi,{className:"h-5 w-5"}),"Personal Information"]}),e.jsx(M,{variant:n?"default":"outline",size:"sm",onClick:()=>n?h():r(!0),children:n?e.jsxs(e.Fragment,{children:[e.jsx(Sf,{className:"h-4 w-4 mr-2"}),"Save Changes"]}):"Edit Profile"})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"firstName",children:"First Name"}),e.jsx(G,{id:"firstName",value:l.firstName,onChange:j=>o(g=>({...g,firstName:j.target.value})),disabled:!n})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"lastName",children:"Last Name"}),e.jsx(G,{id:"lastName",value:l.lastName,onChange:j=>o(g=>({...g,lastName:j.target.value})),disabled:!n})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"email",children:"Email Address"}),e.jsx(G,{id:"email",type:"email",value:l.email,onChange:j=>o(g=>({...g,email:j.target.value})),disabled:!n})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"phone",children:"Phone Number"}),e.jsx(G,{id:"phone",value:l.phone,onChange:j=>o(g=>({...g,phone:j.target.value})),disabled:!n})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"company",children:"Company"}),e.jsx(G,{id:"company",value:l.company,onChange:j=>o(g=>({...g,company:j.target.value})),disabled:!n})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"department",children:"Department"}),e.jsx(G,{id:"department",value:l.department,onChange:j=>o(g=>({...g,department:j.target.value})),disabled:!n})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-5 w-5"}),"Notification Preferences"]})}),e.jsx(D,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(c).map(([j,g])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g?e.jsx(xn,{className:"h-4 w-4 text-green-600"}):e.jsx(W$,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:j.replace(/([A-Z])/g," $1").replace(/^./,y=>y.toUpperCase())})]}),e.jsx(At,{checked:g,onCheckedChange:y=>x(j,y)})]},j))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5"}),"Security Settings"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsx(At,{checked:u.twoFactorEnabled,onCheckedChange:j=>{m(g=>({...g,twoFactorEnabled:j})),s({title:"Security Setting Updated",description:`Two-factor authentication ${j?"enabled":"disabled"}.`})}})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Password Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Last Changed"}),e.jsx("span",{className:"text-xs font-medium",children:u.passwordLastChanged})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Session Timeout"}),e.jsx("span",{className:"text-xs font-medium",children:u.sessionTimeout})]}),e.jsx(M,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>s({title:"Change Password",description:"Password change feature coming soon!"}),children:"Change Password"})]})]})]})]})]})]})]})}function pce(){const[t,s]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(!1),{toast:l}=at(),{data:o=[]}=ye({queryKey:["/api/auth/demo-users"]}),c=Ee({mutationFn:async x=>await ve("POST","/api/auth/demo-login",x),onSuccess:x=>{var p;l({title:"Login successful",description:`Welcome! Redirecting to your ${(p=x.user)==null?void 0:p.role} dashboard...`}),setTimeout(()=>{window.location.href=x.redirectUrl||"/dashboard"},1e3)},onError:x=>{l({title:"Login failed",description:x.message||"Invalid credentials",variant:"destructive"})}}),d=x=>{if(x.preventDefault(),!t||!n){l({title:"Missing credentials",description:"Please enter both email and password",variant:"destructive"});return}c.mutate({email:t,password:n})},u=x=>{s(x.email),r(x.password),c.mutate({email:x.email,password:x.password})},m=x=>{navigator.clipboard.writeText(`${x.email} / ${x.password}`),l({title:"Copied to clipboard",description:`${x.email} / ${x.password}`})},h=x=>({admin:"bg-red-100 text-red-800","portfolio-manager":"bg-blue-100 text-blue-800",owner:"bg-green-100 text-green-800",staff:"bg-yellow-100 text-yellow-800","retail-agent":"bg-purple-100 text-purple-800","referral-agent":"bg-indigo-100 text-indigo-800",guest:"bg-gray-100 text-gray-800"})[x]||"bg-gray-100 text-gray-800";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 pt-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Ft,{className:"h-10 w-10 text-blue-600"}),e.jsx("h1",{className:"text-5xl font-bold text-gray-900",children:"HostPilotPro"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Complete property management platform for hospitality professionals. Manage properties, track tasks, handle bookings, and monitor finances."})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs(E,{className:"w-full",children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-5 w-5"}),"Login to HostPilotPro"]}),e.jsx(Me,{children:"Enter your credentials or use a demo account below"})]}),e.jsx(D,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"email",children:"Email"}),e.jsx(G,{id:"email",type:"email",value:t,onChange:x=>s(x.target.value),placeholder:"admin@hostpilotpro.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{id:"password",type:a?"text":"password",value:n,onChange:x=>r(x.target.value),placeholder:"Enter password",required:!0}),e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?e.jsx(Z$,{className:"h-4 w-4"}):e.jsx(Gt,{className:"h-4 w-4"})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:c.isPending,children:c.isPending?"Signing in...":"Sign In"})]})})]}),e.jsxs(E,{className:"w-full",children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-5 w-5"}),"Demo Accounts"]}),e.jsx(Me,{children:"Click any account to login instantly, or copy credentials"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map((x,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-medium text-sm",children:[x.firstName," ",x.lastName]}),e.jsx(z,{variant:"secondary",className:`text-xs ${h(x.role)}`,children:x.role})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[x.email," / ",x.password]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>m(x),className:"h-8 w-8 p-0",children:e.jsx(gX,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",onClick:()=>u(x),disabled:c.isPending,className:"text-xs bg-blue-600 hover:bg-blue-700",children:"Login"})]})]},p))})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Property Management"})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Track properties, owners, and status updates with real-time management tools."})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Agent Dashboards"})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Referral and retail agent portals with commission tracking and booking management."})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Financial Toolkit"})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue tracking, expense monitoring, and automated invoice generation."})})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(z,{variant:"secondary",className:"text-sm px-4 py-2",children:"Multi-tenant ready  Role-based access  Real-time updates"})})]})})}function fce(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(E,{className:"w-full max-w-md mx-4",children:e.jsxs(D,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(Ut,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function gce(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Maintenance Suggestions & Approval"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pending Suggestions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"Pool Filter Replacement"}),e.jsx("p",{className:"text-gray-600",children:"Villa Samui - Recommended based on usage patterns"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Cost: $150"})]}),e.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"AC Maintenance"}),e.jsx("p",{className:"text-gray-600",children:"Villa Aruna - Due for quarterly service"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Cost: $250"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recently Approved"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"Garden Maintenance"}),e.jsx("p",{className:"text-gray-600",children:"Villa Paradise - Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cost: $120"})]})})]})]})]})}function XN(){const{user:t}=Cr(),{toast:s}=at(),n=yt(),[r,a]=b.useState("overview"),[i,l]=b.useState(""),{data:o=[],isLoading:c}=ye({queryKey:["/api/checkins"],retry:!1}),{data:d=[],isLoading:u}=ye({queryKey:["/api/checkouts"],retry:!1}),{data:m=[],isLoading:h}=ye({queryKey:["/api/checkins"],retry:!1}),{data:x=[]}=ye({queryKey:["/api/properties"],retry:!1}),p=S=>{switch(S){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=S=>{switch(S){case"management":return e.jsx(Ht,{className:"h-4 w-4"});case"housekeeping":return e.jsx(Fe,{className:"h-4 w-4"});case"pool":return e.jsx(ns,{className:"h-4 w-4"});case"maintenance":return e.jsx(Jt,{className:"h-4 w-4"});default:return e.jsx(vt,{className:"h-4 w-4"})}},j=(S,k="THB")=>{const T=typeof S=="string"?parseFloat(S):S;return new Intl.NumberFormat("th-TH",{style:"currency",currency:k,minimumFractionDigits:2}).format(T)},g=({checkIn:S,onComplete:k})=>{const[T,C]=b.useState({electricMeterReading:"",meterReadingMethod:"manual",guestNames:[""],passportNumbers:[""],depositType:"none",depositAmount:"",depositCurrency:"THB",completionNotes:""}),P=()=>{k(S.id,T)};return e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Complete Check-in"]})}),e.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-5 w-5"}),"Complete Guest Check-in"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Electric Meter Reading (kWh)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"reading",children:"Current Reading"}),e.jsx(G,{id:"reading",type:"number",step:"0.001",placeholder:"0.000",value:T.electricMeterReading,onChange:$=>C({...T,electricMeterReading:$.target.value})})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"method",children:"Reading Method"}),e.jsxs(se,{value:T.meterReadingMethod,onValueChange:$=>C({...T,meterReadingMethod:$}),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ht,{className:"h-4 w-4"}),"Guest Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guestName",children:"Guest Name"}),e.jsx(G,{id:"guestName",placeholder:"Full name from passport",value:T.guestNames[0],onChange:$=>C({...T,guestNames:[$.target.value,...T.guestNames.slice(1)]})})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"passportNumber",children:"Passport Number"}),e.jsx(G,{id:"passportNumber",placeholder:"Passport number",value:T.passportNumbers[0],onChange:$=>C({...T,passportNumbers:[$.target.value,...T.passportNumbers.slice(1)]})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Security Deposit"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"depositType",children:"Deposit Type"}),e.jsxs(se,{value:T.depositType,onValueChange:$=>C({...T,depositType:$}),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"none",children:"No Deposit"}),e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"digital",children:"Digital Payment"})]})]})]}),T.depositType!=="none"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"depositAmount",children:"Amount"}),e.jsx(G,{id:"depositAmount",type:"number",placeholder:"0.00",value:T.depositAmount,onChange:$=>C({...T,depositAmount:$.target.value})})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"depositCurrency",children:"Currency"}),e.jsxs(se,{value:T.depositCurrency,onValueChange:$=>C({...T,depositCurrency:$}),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"THB",children:"THB (Thai Baht)"}),e.jsx(A,{value:"USD",children:"USD (US Dollar)"}),e.jsx(A,{value:"EUR",children:"EUR (Euro)"}),e.jsx(A,{value:"GBP",children:"GBP (British Pound)"})]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"notes",children:"Completion Notes"}),e.jsx(mt,{id:"notes",placeholder:"Any additional notes or observations...",value:T.completionNotes,onChange:$=>C({...T,completionNotes:$.target.value}),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"outline",children:"Cancel"}),e.jsx(M,{onClick:P,className:"bg-green-600 hover:bg-green-700",children:"Complete Check-in"})]})]})]})]})},y=({checkOut:S,onComplete:k})=>{const[T,C]=b.useState({electricMeterReading:"",meterReadingMethod:"manual",paymentStatus:"included",paymentMethod:"",discountAmount:"",discountReason:"",completionNotes:"",handlerComments:""}),P=()=>{k(S.id,T)};return e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"bg-red-600 hover:bg-red-700",children:[e.jsx(ga,{className:"h-4 w-4 mr-1"}),"Complete Check-out"]})}),e.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-5 w-5"}),"Complete Guest Check-out"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Final Electric Meter Reading (kWh)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"reading",children:"Final Reading"}),e.jsx(G,{id:"reading",type:"number",step:"0.001",placeholder:"0.000",value:T.electricMeterReading,onChange:$=>C({...T,electricMeterReading:$.target.value})})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"method",children:"Reading Method"}),e.jsxs(se,{value:T.meterReadingMethod,onValueChange:$=>C({...T,meterReadingMethod:$}),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Electricity Payment"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"paymentStatus",children:"Payment Status"}),e.jsxs(se,{value:T.paymentStatus,onValueChange:$=>C({...T,paymentStatus:$}),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"included",children:"Included in Stay"}),e.jsx(A,{value:"paid_by_guest",children:"Paid by Guest"}),e.jsx(A,{value:"not_charged",children:"Not Charged"})]})]})]}),T.paymentStatus==="paid_by_guest"&&e.jsxs("div",{children:[e.jsx(W,{htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(se,{value:T.paymentMethod,onValueChange:$=>C({...T,paymentMethod:$}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select method"})}),e.jsxs(te,{children:[e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"digital",children:"Digital Payment"}),e.jsx(A,{value:"deducted_from_deposit",children:"Deducted from Deposit"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(W,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Discount (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"discountAmount",children:"Discount Amount (THB)"}),e.jsx(G,{id:"discountAmount",type:"number",step:"0.01",placeholder:"0.00",value:T.discountAmount,onChange:$=>C({...T,discountAmount:$.target.value})})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"discountReason",children:"Discount Reason"}),e.jsxs(se,{value:T.discountReason,onValueChange:$=>C({...T,discountReason:$}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select reason"})}),e.jsxs(te,{children:[e.jsx(A,{value:"power_outage",children:"Power Outage"}),e.jsx(A,{value:"goodwill_gesture",children:"Goodwill Gesture"}),e.jsx(A,{value:"maintenance_issue",children:"Maintenance Issue"}),e.jsx(A,{value:"guest_complaint",children:"Guest Complaint"}),e.jsx(A,{value:"other",children:"Other"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"completionNotes",children:"Completion Notes"}),e.jsx(mt,{id:"completionNotes",placeholder:"Any observations about the check-out process...",value:T.completionNotes,onChange:$=>C({...T,completionNotes:$.target.value}),rows:2})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"handlerComments",children:"Handler Comments"}),e.jsx(mt,{id:"handlerComments",placeholder:"Private comments for internal reference...",value:T.handlerComments,onChange:$=>C({...T,handlerComments:$.target.value}),rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"outline",children:"Cancel"}),e.jsx(M,{onClick:P,className:"bg-green-600 hover:bg-green-700",children:"Complete Check-out"})]})]})]})]})},v=Ee({mutationFn:({id:S,data:k})=>ve("PUT",`/api/guest-checkins/${S}/complete`,k),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/guest-checkins"]}),s({title:"Check-in Completed",description:"Guest check-in has been successfully completed."})},onError:S=>{s({title:"Error",description:S.message||"Failed to complete check-in",variant:"destructive"})}}),w=Ee({mutationFn:({id:S,data:k})=>ve("PUT",`/api/guest-checkouts/${S}/complete`,k),onSuccess:S=>{n.invalidateQueries({queryKey:["/api/guest-checkouts"]}),S.depositRefundAlert?s({title:"Check-out Completed with Alert",description:"Manual deposit refund required for non-THB currency.",variant:"default"}):s({title:"Check-out Completed",description:"Guest check-out has been successfully completed."})},onError:S=>{s({title:"Error",description:S.message||"Failed to complete check-out",variant:"destructive"})}}),N=Ee({mutationFn:({id:S,data:k})=>ve("PUT",`/api/checkin-checkout-demo-tasks/${S}/complete`,k),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/checkin-checkout-demo-tasks"]}),s({title:"Task Completed",description:"Demo task has been marked as completed."})},onError:S=>{s({title:"Error",description:S.message||"Failed to complete task",variant:"destructive"})}});return t?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(cl,{className:"h-8 w-8 text-blue-600"})}),"Check-in/Check-out Workflow"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage guest arrivals, departures, and electric meter readings with OCR automation"})]})}),e.jsxs(ft,{value:r,onValueChange:a,className:"space-y-6",children:[e.jsxs(xt,{className:"grid grid-cols-5 w-full max-w-2xl",children:[e.jsxs(ae,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(pX,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(ae,{value:"checkins",className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-4 w-4"}),"Check-ins"]}),e.jsxs(ae,{value:"checkouts",className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-4 w-4"}),"Check-outs"]}),e.jsxs(ae,{value:"tasks",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Demo Tasks"]}),e.jsxs(ae,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Settings"]})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Check-ins"}),e.jsx(cl,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.filter(S=>S.status==="pending").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Awaiting staff assignment"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Check-outs"}),e.jsx(ga,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.filter(S=>S.status==="pending").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Awaiting completion"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(B,{className:"text-sm font-medium",children:"Active Tasks"}),e.jsx(Fe,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.filter(S=>S.status!=="completed").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Across all departments"})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(Me,{children:"Latest check-in/check-out workflow activities"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:[...o.slice(0,3),...d.slice(0,3)].sort((S,k)=>new Date(k.createdAt||k.scheduledDate).getTime()-new Date(S.createdAt||S.scheduledDate).getTime()).slice(0,5).map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[S.checkInId?e.jsx(ga,{className:"h-5 w-5 text-red-500"}):e.jsx(cl,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.checkInId?"Check-out":"Check-in"," - Property #",S.propertyId]}),e.jsx("p",{className:"text-sm text-gray-600",children:ut(new Date(S.scheduledDate),"MMM dd, yyyy at HH:mm")})]})]}),e.jsx(z,{className:p(S.status),children:S.status.replace("_"," ")})]},`${S.id}-${S.checkInId?"out":"in"}`))})})]})]}),e.jsx(ie,{value:"checkins",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-5 w-5"}),"Guest Check-ins"]}),e.jsx(Me,{children:"Manage guest arrivals with passport documentation and electric meter readings"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(cl,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No check-ins found"})]}):o.map(S=>{var k,T;return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cl,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Property #",S.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",ut(new Date(S.scheduledDate),"MMM dd, yyyy at HH:mm")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:p(S.status),children:S.status.replace("_"," ")}),S.status==="pending"&&(t==null?void 0:t.role)==="staff"&&e.jsx(g,{checkIn:S,onComplete:(C,P)=>v.mutate({id:C,data:P})})]})]}),S.status==="completed"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Electric Reading"}),e.jsxs("p",{className:"font-medium",children:[S.electricMeterReading," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guest Names"}),e.jsx("p",{className:"font-medium",children:((k=S.guestNames)==null?void 0:k.join(", "))||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Deposit"}),e.jsx("p",{className:"font-medium",children:S.depositType==="none"?"No Deposit":`${j(S.depositAmount,S.depositCurrency)}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Method"}),e.jsx("p",{className:"font-medium",children:(T=S.meterReadingMethod)==null?void 0:T.replace("_"," ")})]})]}),S.completionNotes&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Notes"}),e.jsx("p",{className:"text-sm",children:S.completionNotes})]})]},S.id)})})})]})}),e.jsx(ie,{value:"checkouts",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-5 w-5"}),"Guest Check-outs"]}),e.jsx(Me,{children:"Process guest departures with electricity billing and payment collection"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No check-outs found"})]}):d.map(S=>{var k;return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ga,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Property #",S.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",ut(new Date(S.scheduledDate),"MMM dd, yyyy at HH:mm")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:p(S.status),children:S.status.replace("_"," ")}),S.status==="pending"&&(t==null?void 0:t.role)==="staff"&&e.jsx(y,{checkOut:S,onComplete:(T,C)=>w.mutate({id:T,data:C})})]})]}),S.status==="completed"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Electric Usage"}),e.jsxs("p",{className:"font-medium",children:[S.electricityUsed," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Charge"}),e.jsxs("p",{className:"font-medium",children:[j(S.totalElectricityCharge),S.discountAmount>0&&e.jsxs("span",{className:"text-sm text-green-600 ml-1",children:["(-",j(S.discountAmount),")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payment Status"}),e.jsx("p",{className:"font-medium",children:(k=S.paymentStatus)==null?void 0:k.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rate"}),e.jsxs("p",{className:"font-medium",children:[S.electricityRatePerKwh," THB/kWh"]})]})]}),(S.discountReason||S.handlerComments)&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[S.discountReason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Discount Reason"}),e.jsx("p",{className:"text-sm",children:S.discountReason})]}),S.handlerComments&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Handler Comments"}),e.jsx("p",{className:"text-sm",children:S.handlerComments})]})]})]},S.id)})})})]})}),e.jsx(ie,{value:"tasks",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"Check-in/Check-out Demo Tasks"]}),e.jsx(Me,{children:"Role-specific tasks for pool staff, housekeepers, hosting staff, and managers"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Fe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No demo tasks found"})]}):m.map(S=>{var k;return e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[f(S.department),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:S.title}),e.jsx("p",{className:"text-sm text-gray-600",children:S.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{variant:"outline",className:"text-xs",children:S.department}),e.jsx(z,{className:p(S.status),children:S.status.replace("_"," ")}),S.status==="pending"&&(t==null?void 0:t.role)==="staff"&&e.jsxs(M,{size:"sm",onClick:()=>N.mutate({id:S.id,data:{completionNotes:"Task completed via workflow interface"}}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Task Type"}),e.jsx("p",{className:"font-medium",children:(k=S.taskType)==null?void 0:k.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Assigned Role"}),e.jsx("p",{className:"font-medium",children:S.assignedRole})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:ut(new Date(S.dueDate),"MMM dd, HH:mm")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[S.estimatedDuration||30," min"]})]})]})]},S.id)})})})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Workflow Settings"]}),e.jsx(Me,{children:"Configure electricity rates, OCR settings, and notification preferences"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Electricity Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"defaultRate",children:"Default Rate (THB per kWh)"}),e.jsx(G,{id:"defaultRate",type:"number",step:"0.01",defaultValue:"7.00",placeholder:"7.00"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"currency",children:"Currency"}),e.jsxs(se,{defaultValue:"THB",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"THB",children:"THB (Thai Baht)"}),e.jsx(A,{value:"USD",children:"USD (US Dollar)"}),e.jsx(A,{value:"EUR",children:"EUR (Euro)"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(bf,{className:"h-4 w-4"}),"OCR Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{htmlFor:"autoOcr",children:"Auto OCR Processing"}),e.jsx("input",{type:"checkbox",id:"autoOcr",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{htmlFor:"manualOverride",children:"Manual Override Allowed"}),e.jsx("input",{type:"checkbox",id:"manualOverride",defaultChecked:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"confidence",children:"Minimum Confidence (%)"}),e.jsx(G,{id:"confidence",type:"number",min:"50",max:"100",defaultValue:"85"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),"Notification Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Deposit Refund Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"High Usage Warnings"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Task Assignment Notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Completion Confirmations"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Settings"})})]})})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Et,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to access the check-in/check-out workflow."})]})})}function IE(){const[t,s]=b.useState("overview"),[n,r]=b.useState(1),[a,i]=b.useState(null),[l,o]=b.useState(null),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,x]=b.useState(!1),{toast:p}=at(),f=yt(),{data:j=[],isLoading:g}=ye({queryKey:["/api/checkins",n],queryFn:()=>ve("GET","/api/checkins"),retry:!1}),{data:y=[],isLoading:v}=ye({queryKey:["/api/checkouts",n],queryFn:()=>ve("GET","/api/checkouts"),retry:!1}),{data:w=[],isLoading:N}=ye({queryKey:["/api/checkins-tasks",n],queryFn:()=>ve("GET","/api/checkins"),retry:!1}),{data:S=[],isLoading:k}=ye({queryKey:["/api/checkins-history",n],queryFn:()=>ve("GET","/api/checkins"),retry:!1}),T=Array.isArray(j)?j:[],C=Array.isArray(y)?y:[],P=Array.isArray(w)?w:[],$=Array.isArray(S)?S:[],{data:V=[]}=ye({queryKey:["/api/properties"],queryFn:()=>ve("GET","/api/properties")}),I=Ee({mutationFn:F=>ve("POST","/api/guest-checkin/check-ins",F),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/guest-checkin/check-ins"]}),f.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),d(!1),p({title:"Check-in Created",description:"Guest check-in has been successfully created."})},onError:F=>{p({title:"Error",description:F.message||"Failed to create check-in",variant:"destructive"})}}),_=Ee({mutationFn:F=>ve("POST","/api/guest-checkin/check-outs",F),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),f.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),m(!1),p({title:"Check-out Created",description:"Guest check-out has been successfully created."})},onError:F=>{p({title:"Error",description:F.message||"Failed to create check-out",variant:"destructive"})}}),U=Ee({mutationFn:F=>ve("POST",`/api/guest-checkin/check-ins/${F}/complete`),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/guest-checkin/check-ins"]}),f.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),p({title:"Check-in Completed",description:"Guest check-in has been marked as completed."})},onError:F=>{p({title:"Error",description:F.message||"Failed to complete check-in",variant:"destructive"})}}),H=Ee({mutationFn:F=>ve("POST",`/api/guest-checkin/check-outs/${F}/complete`),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),f.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),p({title:"Check-out Completed",description:"Guest check-out has been marked as completed."})},onError:F=>{p({title:"Error",description:F.message||"Failed to complete check-out",variant:"destructive"})}}),Y=Ee({mutationFn:F=>ve("POST",`/api/guest-checkin/check-outs/${F.id}/process-refund`,F),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),f.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),x(!1),p({title:"Refund Processed",description:"Deposit refund has been successfully processed."})},onError:F=>{p({title:"Error",description:F.message||"Failed to process refund",variant:"destructive"})}});Ee({mutationFn:F=>ve("POST","/api/guest-checkin/calculate-electricity",F)}),Ee({mutationFn:F=>ve("POST","/api/guest-checkin/calculate-refund",F)});const O=F=>{const Q={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",approved:"bg-green-100 text-green-800",refused:"bg-red-100 text-red-800",processed:"bg-purple-100 text-purple-800"};return e.jsx(z,{className:Q[F]||"bg-gray-100 text-gray-800",children:F.replace("_"," ").toUpperCase()})},R=F=>F==="check_in"?e.jsx(wi,{className:"h-4 w-4"}):e.jsx(wi,{className:"h-4 w-4 rotate-180"}),q=F=>({luggage:e.jsx(wi,{className:"h-4 w-4"}),"dollar-sign":e.jsx(Je,{className:"h-4 w-4"}),calendar:e.jsx(tt,{className:"h-4 w-4"}),check:e.jsx(Fe,{className:"h-4 w-4"}),alert:e.jsx(Ut,{className:"h-4 w-4"})})[F]||e.jsx(vt,{className:"h-4 w-4"}),re=()=>{const F=T.filter(oe=>new Date(oe.checkInDate).toDateString()===new Date().toDateString()),Q=C.filter(oe=>new Date(oe.checkOutDate).toDateString()===new Date().toDateString()),Z=P.filter(oe=>oe.status==="pending"),le=[...T,...C].filter(oe=>oe.completedAt&&new Date(oe.completedAt).toDateString()===new Date().toDateString());return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Today's Check-ins"}),e.jsx(wi,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:F.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[F.filter(oe=>oe.taskStatus==="completed").length," completed"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Today's Check-outs"}),e.jsx(wi,{className:"h-4 w-4 text-orange-600 rotate-180"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Q.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Q.filter(oe=>oe.taskStatus==="completed").length," completed"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Tasks"}),e.jsx(FX,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Z.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z.filter(oe=>oe.priority==="high").length," high priority"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Completed Today"}),e.jsx(Fe,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:le.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All processes"})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Recent Activity"}),e.jsx(Me,{children:"Latest check-in and check-out activities"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:$.slice(0,5).map(oe=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:q(oe.entryIcon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:oe.entryTitle}),e.jsx("p",{className:"text-sm text-gray-500",children:oe.entryDescription})]}),e.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:new Date(oe.createdAt).toLocaleTimeString()})]},oe.id))})})]})]})},we=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Guest Check-ins"}),e.jsxs(M,{onClick:()=>d(!0),children:[e.jsx(wi,{className:"h-4 w-4 mr-2"}),"New Check-in"]})]}),e.jsx("div",{className:"grid gap-6",children:g?e.jsx("div",{className:"text-center py-8",children:"Loading check-ins..."}):T.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No check-ins found"}):T.map(F=>e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:F.guestName}),e.jsxs(Me,{children:["Check-in: ",new Date(F.checkInDate).toLocaleDateString()," ",F.numberOfGuests," guest",F.numberOfGuests>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[O(F.taskStatus),F.taskStatus!=="completed"&&e.jsxs(M,{size:"sm",onClick:()=>U.mutate(F.id),disabled:U.isPending,children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Contact Info"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[F.guestEmail&&e.jsxs("div",{children:[" ",F.guestEmail]}),F.guestPhone&&e.jsxs("div",{children:[" ",F.guestPhone]})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Deposit"}),e.jsx("div",{className:"text-sm text-gray-600",children:F.depositType==="none"?"No deposit":e.jsxs("div",{children:[F.depositType.toUpperCase(),": ",F.depositAmount," ",F.depositCurrency]})})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Meter Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:F.meterReading?e.jsxs("div",{children:[F.meterReading," kWh",F.meterReadingMethod==="ocr_auto"&&F.ocrConfidence&&e.jsxs("div",{className:"text-xs text-green-600",children:["OCR: ",parseFloat(F.ocrConfidence).toFixed(1),"% confidence"]})]}):"Not recorded"})]})]}),F.passportPhotos&&F.passportPhotos.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{className:"text-sm font-medium",children:"Passport Documentation"}),e.jsx("div",{className:"flex space-x-2 mt-2",children:F.passportPhotos.map((Q,Z)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Q,alt:`Passport ${Z+1}`,className:"w-16 h-16 object-cover rounded border cursor-pointer",onClick:()=>window.open(Q,"_blank")}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:Z+1})]},Z))}),F.passportNumbers&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Passport Numbers: ",F.passportNumbers.join(", ")]})]}),F.checkInNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{className:"text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.checkInNotes})]}),F.completedAt&&e.jsxs("div",{className:"mt-4 text-sm text-green-600",children:[" Completed on ",new Date(F.completedAt).toLocaleString()," by ",F.staffName||F.completedBy]})]})]},F.id))})]}),K=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Guest Check-outs"}),e.jsxs(M,{onClick:()=>m(!0),children:[e.jsx(wi,{className:"h-4 w-4 mr-2 rotate-180"}),"New Check-out"]})]}),e.jsx("div",{className:"grid gap-6",children:v?e.jsx("div",{className:"text-center py-8",children:"Loading check-outs..."}):C.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No check-outs found"}):C.map(F=>{var Q;return e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(B,{className:"text-lg",children:["Check-out #",F.id]}),e.jsxs(Me,{children:["Check-out: ",new Date(F.checkOutDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[O(F.taskStatus),F.taskStatus!=="completed"&&e.jsxs(M,{size:"sm",onClick:()=>H.mutate(F.id),disabled:H.isPending,children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Complete"]}),F.taskStatus==="completed"&&F.refundStatus==="pending"&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{o(F),x(!0)},children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),"Process Refund"]})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Electricity Usage"}),e.jsx("div",{className:"text-sm text-gray-600",children:F.unitsUsed?e.jsxs("div",{children:[F.unitsUsed," kWh used",e.jsxs("div",{className:"text-xs",children:["@ ",F.ratePerKwh," THB/kWh"]})]}):"Not calculated"})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Electricity Cost"}),e.jsx("div",{className:"text-sm text-gray-600",children:F.totalElectricityCost?e.jsxs("div",{className:"font-medium text-orange-600",children:[F.totalElectricityCost," THB"]}):"Not calculated"})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Billing Method"}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx(z,{variant:"outline",className:F.electricityBilling==="included"?"bg-green-50 text-green-700":F.electricityBilling==="guest_pays"?"bg-orange-50 text-orange-700":"bg-blue-50 text-blue-700",children:F.electricityBilling.replace("_"," ").toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm font-medium",children:"Final Refund"}),e.jsx("div",{className:"text-sm text-gray-600",children:F.finalRefundAmount?e.jsxs("div",{className:"font-medium text-green-600",children:[F.finalRefundAmount," THB"]}):"Pending calculation"})]})]}),F.finalMeterReading&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{className:"text-sm font-medium",children:"Final Meter Reading"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[F.finalMeterReading," kWh",F.finalMeterReadingMethod==="ocr_auto"&&F.finalOcrConfidence&&e.jsxs("span",{className:"text-xs text-green-600 ml-2",children:["(OCR: ",parseFloat(F.finalOcrConfidence).toFixed(1),"% confidence)"]})]})]}),F.discounts&&parseFloat(F.discounts)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{className:"text-sm font-medium",children:"Discounts Applied"}),e.jsxs("div",{className:"text-sm text-green-600",children:["-",F.discounts," THB",F.discountReason&&e.jsx("div",{className:"text-xs text-gray-500",children:F.discountReason})]})]}),F.damageCosts&&parseFloat(F.damageCosts)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{className:"text-sm font-medium",children:"Damage Costs"}),e.jsxs("div",{className:"text-sm text-red-600",children:["+",F.damageCosts," THB",F.damageCostReason&&e.jsx("div",{className:"text-xs text-gray-500",children:F.damageCostReason})]})]}),F.refundStatus==="processed"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{className:"text-sm font-medium",children:"Refund Status"}),e.jsxs("div",{className:"text-sm text-green-600",children:[" Processed via ",(Q=F.refundMethod)==null?void 0:Q.toUpperCase()," on ",F.refundProcessedAt?new Date(F.refundProcessedAt).toLocaleString():"N/A",F.refundReceiptUrl&&e.jsxs(M,{size:"sm",variant:"link",className:"h-auto p-0 ml-2",onClick:()=>window.open(F.refundReceiptUrl,"_blank"),children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"View Receipt"]})]})]}),F.checkOutNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(W,{className:"text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.checkOutNotes})]})]})]},F.id)})})]}),Ce=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Check-in/Check-out Tasks"}),e.jsx(z,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"Demo Mode"})]}),e.jsx("div",{className:"grid gap-4",children:N?e.jsx("div",{className:"text-center py-8",children:"Loading tasks..."}):P.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No tasks found"}):P.map(F=>e.jsx(E,{children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[R(F.taskType),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:F.taskTitle}),e.jsx("p",{className:"text-sm text-gray-500",children:F.taskDescription})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{variant:"outline",className:F.priority==="high"?"bg-red-50 text-red-700":F.priority==="normal"?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-700",children:F.priority.toUpperCase()}),O(F.status)]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["Assigned to: ",e.jsx("span",{className:"font-medium",children:F.assignedTo}),F.dueDate&&e.jsxs("span",{className:"ml-4",children:["Due: ",new Date(F.dueDate).toLocaleDateString()]})]}),F.requiresApproval&&e.jsx("div",{className:"mt-2",children:e.jsx(z,{variant:"outline",className:"bg-yellow-50 text-yellow-700",children:"Requires Approval"})})]})},F.id))})]}),pe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Electricity & OCR Settings"}),e.jsx(Me,{children:"Configure default rates and OCR preferences for this property"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"rate-per-kwh",children:"Default Rate per kWh (THB)"}),e.jsx(G,{id:"rate-per-kwh",type:"number",step:"0.01",defaultValue:"7.00"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"currency",children:"Currency"}),e.jsxs(se,{defaultValue:"THB",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"THB",children:"THB - Thai Baht"}),e.jsx(A,{value:"USD",children:"USD - US Dollar"}),e.jsx(A,{value:"EUR",children:"EUR - Euro"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"ocr-provider",children:"OCR Provider"}),e.jsxs(se,{defaultValue:"openai_vision",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"manual",children:"Manual Entry Only"}),e.jsx(A,{value:"openai_vision",children:"OpenAI Vision API"}),e.jsx(A,{value:"google_vision",children:"Google Vision API"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"billing-default",children:"Default Billing Method"}),e.jsxs(se,{defaultValue:"included",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"included",children:"Electricity Included"}),e.jsx(A,{value:"guest_pays",children:"Guest Pays"}),e.jsx(A,{value:"company_compensates",children:"Company Compensates"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",children:"Reset to Defaults"}),e.jsxs(M,{children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Notification Preferences"}),e.jsx(Me,{children:"Configure when to receive notifications about check-in/out activities"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-base",children:"New Check-in Created"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when staff creates a new check-in"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-base",children:"Check-out Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when a check-out process is completed"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-base",children:"Refund Requires Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when a refund needs management approval"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-base",children:"High Priority Tasks"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified about urgent check-in/out tasks"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{children:"Save Preferences"})})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(wi,{className:"h-8 w-8 mr-3 text-blue-600"}),"Guest Check-In / Check-Out Tracker"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Automated guest arrival and departure management with OCR meter reading and refund calculations"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4 text-gray-500"}),e.jsxs(se,{value:n.toString(),onValueChange:F=>r(parseInt(F)),children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{})}),e.jsx(te,{children:V.map(F=>e.jsx(A,{value:F.id.toString(),children:F.name},F.id))})]})]})})]})}),e.jsxs(ft,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsxs(ae,{value:"overview",className:"flex items-center",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(ae,{value:"check-ins",className:"flex items-center",children:[e.jsx(wi,{className:"h-4 w-4 mr-2"}),"Check-ins"]}),e.jsxs(ae,{value:"check-outs",className:"flex items-center",children:[e.jsx(wi,{className:"h-4 w-4 mr-2 rotate-180"}),"Check-outs"]}),e.jsxs(ae,{value:"tasks",className:"flex items-center",children:[e.jsx(et,{className:"h-4 w-4 mr-2"}),"Demo Tasks"]}),e.jsxs(ae,{value:"settings",className:"flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(ie,{value:"overview",children:e.jsx(re,{})}),e.jsx(ie,{value:"check-ins",children:e.jsx(we,{})}),e.jsx(ie,{value:"check-outs",children:e.jsx(K,{})}),e.jsx(ie,{value:"tasks",children:e.jsx(Ce,{})}),e.jsx(ie,{value:"settings",children:e.jsx(pe,{})})]})]}),e.jsx(Ke,{open:c,onOpenChange:d,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create New Check-in"}),e.jsx(Rt,{children:"Register a new guest arrival with passport documentation and meter reading"})]}),e.jsxs("form",{onSubmit:F=>{F.preventDefault();const Q=new FormData(F.target);I.mutate({propertyId:n,guestName:Q.get("guestName"),guestEmail:Q.get("guestEmail"),guestPhone:Q.get("guestPhone"),numberOfGuests:parseInt(Q.get("numberOfGuests")||"1"),checkInDate:Q.get("checkInDate"),depositType:Q.get("depositType"),depositAmount:Q.get("depositAmount"),depositCurrency:Q.get("depositCurrency")||"THB",meterReading:Q.get("meterReading"),meterReadingMethod:Q.get("meterReadingMethod"),checkInNotes:Q.get("checkInNotes"),taskStatus:"pending"})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guestName",children:"Guest Name *"}),e.jsx(G,{id:"guestName",name:"guestName",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"numberOfGuests",children:"Number of Guests"}),e.jsx(G,{id:"numberOfGuests",name:"numberOfGuests",type:"number",defaultValue:"1",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guestEmail",children:"Email"}),e.jsx(G,{id:"guestEmail",name:"guestEmail",type:"email"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"guestPhone",children:"Phone"}),e.jsx(G,{id:"guestPhone",name:"guestPhone"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"checkInDate",children:"Check-in Date *"}),e.jsx(G,{id:"checkInDate",name:"checkInDate",type:"datetime-local",defaultValue:new Date().toISOString().slice(0,16),required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"depositType",children:"Deposit Type"}),e.jsxs(se,{name:"depositType",defaultValue:"none",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"none",children:"No Deposit"}),e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"digital",children:"Digital/Card"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"depositAmount",children:"Deposit Amount"}),e.jsx(G,{id:"depositAmount",name:"depositAmount",type:"number",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"depositCurrency",children:"Currency"}),e.jsxs(se,{name:"depositCurrency",defaultValue:"THB",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"THB",children:"THB"}),e.jsx(A,{value:"USD",children:"USD"}),e.jsx(A,{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"meterReading",children:"Meter Reading (kWh)"}),e.jsx(G,{id:"meterReading",name:"meterReading",type:"number",step:"0.1"})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"meterReadingMethod",children:"Reading Method"}),e.jsxs(se,{name:"meterReadingMethod",defaultValue:"manual",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"checkInNotes",children:"Check-in Notes"}),e.jsx(mt,{id:"checkInNotes",name:"checkInNotes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:I.isPending,children:I.isPending?"Creating...":"Create Check-in"})]})]})]})}),e.jsx(Ke,{open:u,onOpenChange:m,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create New Check-out"}),e.jsx(Rt,{children:"Process guest departure with final meter reading and refund calculation"})]}),e.jsxs("form",{onSubmit:F=>{F.preventDefault();const Q=new FormData(F.target);_.mutate({propertyId:n,checkInId:parseInt(Q.get("checkInId")),checkOutDate:Q.get("checkOutDate"),finalMeterReading:Q.get("finalMeterReading"),finalMeterReadingMethod:Q.get("finalMeterReadingMethod"),electricityBilling:Q.get("electricityBilling"),discounts:Q.get("discounts")||"0",discountReason:Q.get("discountReason"),damageCosts:Q.get("damageCosts")||"0",damageCostReason:Q.get("damageCostReason"),checkOutNotes:Q.get("checkOutNotes"),taskStatus:"pending"})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"checkInId",children:"Associated Check-in *"}),e.jsxs(se,{name:"checkInId",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select check-in..."})}),e.jsx(te,{children:T.filter(F=>F.taskStatus==="completed").map(F=>e.jsxs(A,{value:F.id.toString(),children:["#",F.id," - ",F.guestName]},F.id))})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"checkOutDate",children:"Check-out Date *"}),e.jsx(G,{id:"checkOutDate",name:"checkOutDate",type:"datetime-local",defaultValue:new Date().toISOString().slice(0,16),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"finalMeterReading",children:"Final Meter Reading (kWh) *"}),e.jsx(G,{id:"finalMeterReading",name:"finalMeterReading",type:"number",step:"0.1",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"finalMeterReadingMethod",children:"Reading Method"}),e.jsxs(se,{name:"finalMeterReadingMethod",defaultValue:"manual",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"electricityBilling",children:"Electricity Billing Method *"}),e.jsxs(se,{name:"electricityBilling",defaultValue:"included",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"included",children:"Electricity Included in Stay"}),e.jsx(A,{value:"guest_pays",children:"Guest Pays for Usage"}),e.jsx(A,{value:"company_compensates",children:"Company Compensates"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"discounts",children:"Discounts (THB)"}),e.jsx(G,{id:"discounts",name:"discounts",type:"number",step:"0.01",defaultValue:"0"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"damageCosts",children:"Damage Costs (THB)"}),e.jsx(G,{id:"damageCosts",name:"damageCosts",type:"number",step:"0.01",defaultValue:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"discountReason",children:"Discount Reason"}),e.jsx(G,{id:"discountReason",name:"discountReason",placeholder:"e.g., Long stay discount"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"damageCostReason",children:"Damage Cost Reason"}),e.jsx(G,{id:"damageCostReason",name:"damageCostReason",placeholder:"e.g., Broken towel rack"})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"checkOutNotes",children:"Check-out Notes"}),e.jsx(mt,{id:"checkOutNotes",name:"checkOutNotes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:_.isPending,children:_.isPending?"Creating...":"Create Check-out"})]})]})]})}),e.jsx(Ke,{open:h,onOpenChange:x,children:e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Process Deposit Refund"}),e.jsxs(Rt,{children:["Complete the refund process for check-out #",l==null?void 0:l.id]})]}),l&&e.jsxs("form",{onSubmit:F=>{F.preventDefault();const Q=new FormData(F.target);Y.mutate({id:l.id,refundMethod:Q.get("refundMethod"),refundReceiptUrl:Q.get("refundReceiptUrl")})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Refund Summary"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Deposit Paid: ",e.jsxs("span",{className:"font-medium",children:[l.depositPaid," THB"]})]}),e.jsxs("div",{children:["Electricity Cost: ",e.jsxs("span",{className:"font-medium text-orange-600",children:["-",l.electricityCost," THB"]})]}),l.discounts&&parseFloat(l.discounts)>0&&e.jsxs("div",{children:["Discounts: ",e.jsxs("span",{className:"font-medium text-green-600",children:["+",l.discounts," THB"]})]}),l.damageCosts&&parseFloat(l.damageCosts)>0&&e.jsxs("div",{children:["Damage Costs: ",e.jsxs("span",{className:"font-medium text-red-600",children:["-",l.damageCosts," THB"]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"font-medium text-lg",children:["Final Refund: ",e.jsxs("span",{className:"text-green-600",children:[l.finalRefundAmount," THB"]})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"refundMethod",children:"Refund Method *"}),e.jsxs(se,{name:"refundMethod",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select refund method..."})}),e.jsxs(te,{children:[e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"bank",children:"Bank Transfer"}),e.jsx(A,{value:"digital",children:"Digital Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"refundReceiptUrl",children:"Receipt Photo URL (Optional)"}),e.jsx(G,{id:"refundReceiptUrl",name:"refundReceiptUrl",placeholder:"Upload receipt photo..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:Y.isPending,children:Y.isPending?"Processing...":"Process Refund"})]})]})]})})]})}function $E(){const[t,s]=b.useState(ut(new Date,"yyyy-MM-dd")),[n,r]=b.useState(!1),{data:a,isLoading:i,refetch:l}=ye({queryKey:["/api/daily-operations/summary",t],enabled:!!t,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:o,isLoading:c}=ye({queryKey:["/api/daily-operations/staff",t],enabled:!!t&&!!a,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:d,isLoading:u}=ye({queryKey:["/api/daily-operations/properties",t],enabled:!!t&&!!a,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:m,isLoading:h}=ye({queryKey:["/api/daily-operations/tasks",t],enabled:!!t&&!!a,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),x=Ee({mutationFn:async w=>await ve("POST",`/api/daily-operations/refresh/${w}`),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/daily-operations"]})}}),p=async()=>{r(!0);try{await x.mutateAsync(t)}finally{r(!1)}},f=()=>{const w=ut(jv(new Date(t),1),"yyyy-MM-dd"),N=ut(mn(new Date(t),1),"yyyy-MM-dd");return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>s(w),children:"Previous Day"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>s(ut(new Date,"yyyy-MM-dd")),children:"Today"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>s(N),children:"Next Day"})]})},j=w=>{switch(w==null?void 0:w.toLowerCase()){case"cleaning":return"";case"pool":return"";case"garden":return"";case"maintenance":return"";default:return""}},g=w=>{const N={completed:"bg-green-100 text-green-800","in-progress":"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800"};return e.jsx(z,{className:N[w]||"bg-gray-100 text-gray-800",children:w.replace("-"," ").toUpperCase()})},y=w=>{const N={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return e.jsx(z,{className:N[w]||"bg-gray-100 text-gray-800",children:w.toUpperCase()})};return i?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((w,N)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},N))}),e.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-0 z-50",children:e.jsx(fh,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex justify-between items-center pt-12",children:[e.jsxs("div",{className:"mt-3",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(K$,{className:"h-8 w-8"}),"Daily Operations Dashboard"]}),e.jsx("p",{className:"text-muted-foreground",children:ut(new Date(t),"EEEE, MMMM do, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[f(),e.jsxs(M,{onClick:p,disabled:n,variant:"outline",size:"sm",children:[e.jsx(Ss,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"Refresh Data"]})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(Yo,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.totalTasksAssigned}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned across all departments"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Staff Scheduled"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.totalStaffScheduled}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for operations"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Urgency Alerts"}),e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.overdueTasks+a.uncleanedCheckinProperties+a.unassignedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires immediate attention"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Properties Active"}),e.jsx(Ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(d==null?void 0:d.length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"With scheduled operations"})]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"departments",children:"Departments"}),e.jsx(ae,{value:"staff",children:"Staff"}),e.jsx(ae,{value:"properties",children:"Properties"}),e.jsx(ae,{value:"tasks",children:"Task Details"})]}),e.jsx(ie,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Department Breakdown"}),e.jsx(Me,{children:"Task completion by department"})]}),e.jsx(D,{className:"space-y-4",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:" Cleaning"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.cleaningCompleted,"/",a.cleaningTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a.cleaningTasks>0?a.cleaningCompleted/a.cleaningTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:" Pool"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.poolCompleted,"/",a.poolTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-cyan-600 h-2 rounded-full",style:{width:`${a.poolTasks>0?a.poolCompleted/a.poolTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:" Garden"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.gardenCompleted,"/",a.gardenTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${a.gardenTasks>0?a.gardenCompleted/a.gardenTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:" Maintenance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.maintenanceCompleted,"/",a.maintenanceTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${a.maintenanceTasks>0?a.maintenanceCompleted/a.maintenanceTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:" General"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.generalCompleted,"/",a.generalTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${a.generalTasks>0?a.generalCompleted/a.generalTasks*100:0}%`}})})]})]})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5 text-red-500"}),"Urgency Alerts"]}),e.jsx(Me,{children:"Items requiring immediate attention"})]}),e.jsx(D,{className:"space-y-3",children:a&&e.jsxs(e.Fragment,{children:[a.overdueTasks>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"text-red-800",children:"Overdue Tasks"}),e.jsx(z,{className:"bg-red-100 text-red-800",children:a.overdueTasks})]}),a.uncleanedCheckinProperties>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("span",{className:"text-yellow-800",children:"Uncleaned Check-ins"}),e.jsx(z,{className:"bg-yellow-100 text-yellow-800",children:a.uncleanedCheckinProperties})]}),a.unassignedTasks>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("span",{className:"text-orange-800",children:"Unassigned Tasks"}),e.jsx(z,{className:"bg-orange-100 text-orange-800",children:a.unassignedTasks})]}),a.tasksWithoutProof>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-blue-800",children:"Tasks Missing Proof"}),e.jsx(z,{className:"bg-blue-100 text-blue-800",children:a.tasksWithoutProof})]}),a.overdueTasks===0&&a.uncleanedCheckinProperties===0&&a.unassignedTasks===0&&a.tasksWithoutProof===0&&e.jsxs("div",{className:"flex items-center justify-center p-4 text-green-600",children:[e.jsx(Fe,{className:"h-5 w-5 mr-2"}),"All operations on track"]})]})})]})]})}),e.jsx(ie,{value:"departments",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"flex items-center gap-2",children:" Cleaning Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:a.cleaningTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.cleaningCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[a.cleaningTasks>0?Math.round(a.cleaningCompleted/a.cleaningTasks*100):0,"%"]})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"flex items-center gap-2",children:" Maintenance Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:a.maintenanceTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.maintenanceCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[a.maintenanceTasks>0?Math.round(a.maintenanceCompleted/a.maintenanceTasks*100):0,"%"]})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"flex items-center gap-2",children:" Pool Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:a.poolTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.poolCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[a.poolTasks>0?Math.round(a.poolCompleted/a.poolTasks*100):0,"%"]})]})]})})]})]})})}),e.jsx(ie,{value:"staff",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Staff Assignments"}),e.jsx(Me,{children:"Daily staff scheduling and workload"})]}),e.jsx(D,{children:c?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):o&&o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(w=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h4",{className:"font-semibold",children:["Staff Member #",w.staffId]}),e.jsx(z,{className:w.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:w.isAvailable?"Available":"Unavailable"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Shift:"}),e.jsx("p",{children:w.shiftStart&&w.shiftEnd?`${w.shiftStart} - ${w.shiftEnd}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks Assigned:"}),e.jsx("p",{className:"font-semibold",children:w.totalTasksAssigned})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks Completed:"}),e.jsx("p",{className:"font-semibold text-green-600",children:w.totalTasksCompleted})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Department Focus:"}),e.jsx("p",{children:w.departmentFocus||"General"})]})]}),w.notes&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"})," ",w.notes]})]},w.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No staff assignments found for this date"})})]})}),e.jsx(ie,{value:"properties",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Property Operations"}),e.jsx(Me,{children:"Daily property status and activities"})]}),e.jsx(D,{children:u?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):d&&d.length>0?e.jsx("div",{className:"space-y-4",children:d.map(w=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:w.propertyName||`Property #${w.propertyId}`}),w.propertyAddress&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(ws,{className:"h-3 w-3"}),w.propertyAddress]})]}),e.jsxs("div",{className:"flex gap-2",children:[g(w.operationStatus),w.isUrgent&&e.jsxs(z,{className:"bg-red-100 text-red-800",children:[e.jsx(Et,{className:"h-3 w-3 mr-1"}),"Urgent"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Check-in/out:"}),e.jsxs("div",{className:"flex gap-2",children:[w.hasCheckin&&e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"Check-in"}),w.hasCheckout&&e.jsx(z,{className:"bg-purple-100 text-purple-800",children:"Check-out"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cleaning:"}),e.jsx("p",{className:w.cleaningCompleted?"text-green-600 font-semibold":w.needsCleaning?"text-red-600 font-semibold":"",children:w.cleaningCompleted?"Completed":w.needsCleaning?"Required":"Not needed"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Maintenance:"}),e.jsxs("p",{children:[w.maintenanceCompleted,"/",w.maintenanceTasks]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Services:"}),e.jsxs("p",{children:[w.recurringCompleted,"/",w.recurringServices]})]})]}),w.urgencyReason&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm",children:[e.jsx("span",{className:"text-red-800 font-semibold",children:"Urgency:"})," ",w.urgencyReason.replace("_"," ")]}),w.statusNotes&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"})," ",w.statusNotes]})]},w.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No property operations found for this date"})})]})}),e.jsx(ie,{value:"tasks",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Task Details"}),e.jsx(Me,{children:"All tasks scheduled for this date"})]}),e.jsx(D,{children:h?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):m&&m.length>0?e.jsx("div",{className:"space-y-4",children:m.map(w=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[j(w.department||"general")," ",w.title]}),w.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:w.description})]}),e.jsxs("div",{className:"flex gap-2",children:[g(w.status),y(w.priority),w.isOverdue&&e.jsxs(z,{className:"bg-red-100 text-red-800",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"Overdue"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Property:"}),e.jsx("p",{children:w.propertyName||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Assigned to:"}),e.jsx("p",{children:w.assignedUserName||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),e.jsx("p",{children:w.dueDate?ut(new Date(w.dueDate),"MMM dd, HH:mm"):"No deadline"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Proof Photos:"}),e.jsx("p",{className:w.hasProof?"text-green-600":"text-red-600",children:w.hasProof?"Available":"Missing"})]})]})]},w.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tasks found for this date"})})]})})]})]})}var HP="Progress",GP=100,[vce]=Pn(HP),[yce,jce]=vce(HP),bU=b.forwardRef((t,s)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=bce,...l}=t;(a||a===0)&&!FE(a)&&console.error(Nce(`${a}`,"Progress"));const o=FE(a)?a:GP;r!==null&&!LE(r,o)&&console.error(wce(`${r}`,"Progress"));const c=LE(r,o)?r:null,d=jy(c)?i(c,o):void 0;return e.jsx(yce,{scope:n,value:c,max:o,children:e.jsx(st.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":jy(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":SU(c,o),"data-value":c??void 0,"data-max":o,...l,ref:s})})});bU.displayName=HP;var NU="ProgressIndicator",wU=b.forwardRef((t,s)=>{const{__scopeProgress:n,...r}=t,a=jce(NU,n);return e.jsx(st.div,{"data-state":SU(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:s})});wU.displayName=NU;function bce(t,s){return`${Math.round(t/s*100)}%`}function SU(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function jy(t){return typeof t=="number"}function FE(t){return jy(t)&&!isNaN(t)&&t>0}function LE(t,s){return jy(t)&&!isNaN(t)&&t<=s&&t>=0}function Nce(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${GP}\`.`}function wce(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${GP} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var CU=bU,Sce=wU;const fi=b.forwardRef(({className:t,value:s,...n},r)=>e.jsx(CU,{ref:r,className:Ue("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:e.jsx(Sce,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));fi.displayName=CU.displayName;function Cce({title:t,showBackButton:s=!0,backPath:n,roleBasedActions:r}){const{user:a}=Cr();Yn();const[i,l]=b.useState(!0),[o,c]=b.useState("THB"),d=()=>{window.location.href="/api/logout"},u=p=>{switch(p){case"admin":return"Administrator";case"portfolio-manager":return"Portfolio Manager";case"owner":return"Property Owner";case"staff":return"Staff Member";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";case"guest":return"Guest";default:return p}},m=p=>{switch(p){case"admin":return"bg-red-500";case"portfolio-manager":return"bg-blue-500";case"owner":return"bg-green-500";case"staff":return"bg-purple-500";case"retail-agent":return"bg-orange-500";case"referral-agent":return"bg-yellow-500";case"guest":return"bg-gray-500";default:return"bg-gray-500"}},h=()=>{if(n)return n;switch(a==null?void 0:a.role){case"admin":return"/";case"portfolio-manager":return"/portfolio-manager-dashboard";case"owner":return"/owner-dashboard";case"staff":return"/staff-dashboard";case"retail-agent":return"/retail-agent-dashboard";case"referral-agent":return"/referral-agent-dashboard";case"guest":return"/enhanced-guest-dashboard";default:return"/"}},x={THB:"",USD:"$",EUR:"",GBP:""};return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nn,{href:h(),children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Il,{className:"h-4 w-4"}),"Back"]})}),e.jsx(nn,{href:"/",children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(fn,{className:"h-4 w-4"}),"Home"]})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:t}),a&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u(a==null?void 0:a.role)," Dashboard"]})]})]}),e.jsx("div",{className:"flex-1 flex justify-center",children:r}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(fp,{children:[e.jsx(gp,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),x[o]," ",o]})}),e.jsxs(pm,{align:"end",children:[e.jsx(vp,{children:"Select Currency"}),e.jsx(Bo,{}),Object.entries(x).map(([p,f])=>e.jsxs(xr,{onClick:()=>c(p),className:o===p?"bg-gray-100 dark:bg-gray-700":"",children:[e.jsx("span",{className:"mr-2",children:f}),p," - ",p==="THB"?"Thai Baht":p==="USD"?"US Dollar":p==="EUR"?"Euro":"British Pound",p==="THB"&&e.jsx(z,{variant:"secondary",className:"ml-2",children:"Default"})]},p))]})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(!i),className:i?"text-blue-600":"text-gray-400",children:i?e.jsx(xn,{className:"h-4 w-4"}):e.jsx(W$,{className:"h-4 w-4"})}),e.jsxs(fp,{children:[e.jsx(gp,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"gap-2",children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsx(z,{className:`${m(a==null?void 0:a.role)} text-white`,children:u(a==null?void 0:a.role)})]})}),e.jsxs(pm,{align:"end",className:"w-56",children:[e.jsx(vp,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[a==null?void 0:a.firstName," ",a==null?void 0:a.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a==null?void 0:a.email})]})}),e.jsx(Bo,{}),e.jsxs(xr,{onClick:()=>{try{window.location.href="/settings"}catch(p){console.error("Settings navigation error:",p),window.location.href="/simple-settings"}},className:"w-full flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Settings"]}),e.jsx(Bo,{}),e.jsxs(xr,{onClick:d,className:"text-red-600",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})}function kU(){const[t,s]=b.useState("navigation"),[n,r]=b.useState(!1),a={reservationId:"Demo1234",guestName:"Liam Andersen",property:"Villa Aruna",checkIn:"July 5, 2025",checkOut:"July 10, 2025",electricityUsage:{start:1e3,end:1100,rate:7,total:700},deposit:{amount:8e3,refund:7300}},i=[{id:"navigation",name:"Navigation & UI",description:"Back buttons, logout menus, consistent navigation",completionRate:85,tests:[{id:"nav-1",name:"Unified Top Bar",status:"passed",description:"Consistent navigation bar across all dashboards",details:" Back buttons present,  Logout functionality,  Role badges"},{id:"nav-2",name:"Currency Selector",status:"passed",description:"THB default with USD/EUR conversion",details:" Currency dropdown,  Default THB,  Live conversion support"},{id:"nav-3",name:"Notification Toggle",status:"passed",description:"Settings notification toggle in user menu",details:" Bell icon toggle,  Settings integration"},{id:"nav-4",name:"Sidebar Scrolling",status:"warning",description:"Collapsible categories and scrolling",details:" Needs category collapse implementation"},{id:"nav-5",name:"Role-based Access",status:"passed",description:"Proper role routing and permissions",details:" Admin, PM, Owner, Staff, Agent, Guest routes"}]},{id:"booking-simulation",name:"Booking Simulation",description:"Demo1234 - Liam Andersen at Villa Aruna testing",completionRate:92,tests:[{id:"book-1",name:"Reservation Data",status:"passed",description:"Demo1234 booking consistency",details:` ${a.guestName} at ${a.property}`,route:"/enhanced-guest-dashboard"},{id:"book-2",name:"Electricity Billing",status:"passed",description:"10001100 kWh @7 THB = 700 THB",details:` ${a.electricityUsage.start}${a.electricityUsage.end} kWh = ${a.electricityUsage.total} THB`},{id:"book-3",name:"Deposit Calculation",status:"passed",description:"8000 THB - 700 THB = 7300 THB refund",details:` ${a.deposit.amount} THB deposit  ${a.deposit.refund} THB refund`},{id:"book-4",name:"Check-in/out Photos",status:"passed",description:"Passport and property photo uploads",details:" Passport documentation,  Check-in/out photos"},{id:"book-5",name:"Scheduled Services",status:"passed",description:"Pool, garden, chef, cleaning tasks visible",details:" Service timeline,  Guest visibility,  Status tracking"},{id:"book-6",name:"AI Property Info",status:"passed",description:"Restaurants, beaches, rules recommendations",details:" Local recommendations,  Property rules,  Area info"},{id:"book-7",name:"Checkout Survey",status:"passed",description:"Guest satisfaction survey enabled",details:" Survey form,  Rating system,  Feedback collection",route:"/guest-checkout-survey"}]},{id:"task-modules",name:"Task Management",description:"Portfolio Manager, Housekeeping, Pool, Garden dashboards",completionRate:78,tests:[{id:"task-1",name:"Portfolio Manager Scope",status:"passed",description:"PM sees only assigned properties",details:" Property filtering,  Role-based access"},{id:"task-2",name:"Department Dashboards",status:"passed",description:"Housekeeping, Pool, Garden separate tabs",details:" Department separation,  Task categorization"},{id:"task-3",name:"Task Filtering",status:"passed",description:"Date range, type, property filters",details:" Multiple filter options,  Advanced search"},{id:"task-4",name:"Completion Logs",status:"passed",description:"Task history visible per property",details:" Historical tracking,  Property-specific logs"},{id:"task-5",name:"Auto-scheduling",status:"warning",description:"Recurring task generation needs validation",details:" Rules engine needs testing",route:"/auto-scheduling-recurring-task-generator"}]},{id:"utility-system",name:"Utility Management",description:"Bills tracking, provider management, AI alerts",completionRate:88,tests:[{id:"util-1",name:"Service Tracking",status:"passed",description:"Electricity, Internet, Water, Pest control",details:" Multiple utility types,  Provider management"},{id:"util-2",name:"Manual Entry",status:"passed",description:"Provider and account number per villa",details:" Property-specific accounts,  Manual configuration"},{id:"util-3",name:"AI Pattern Alerts",status:"passed",description:"Missed upload notifications (e.g., electric bill by 20th)",details:" Smart alerts,  Pattern recognition,  Automated notifications"},{id:"util-4",name:"Receipt Upload",status:"passed",description:"Track status: Pending, Paid, Overdue",details:" File uploads,  Status tracking,  Payment monitoring"},{id:"util-5",name:"Custom Utilities",status:"passed",description:"Gas, Residence Fees custom additions",details:" Custom utility types,  Flexible configuration"}]},{id:"owner-dashboard",name:"Owner Dashboard",description:"Income, expenses, occupancy, service history",completionRate:95,tests:[{id:"owner-1",name:"Monthly Overview",status:"passed",description:"Income, expenses, occupancy metrics",details:" Financial summary,  Occupancy rates,  Performance metrics"},{id:"owner-2",name:"Utility Log",status:"passed",description:"Complete utility payment history",details:" Payment tracking,  Historical data,  Cost analysis"},{id:"owner-3",name:"Service History",status:"passed",description:"AC, pool, garden, pest service dates",details:" Maintenance timeline,  Service tracking,  Next service dates"},{id:"owner-4",name:"Document Center",status:"passed",description:"License, plans, passport uploads",details:" Document management,  Upload system,  Approval workflow"},{id:"owner-5",name:"Hostaway Sync",status:"passed",description:"API placeholder integration",details:" API framework,  Booking sync ready,  Platform integration"},{id:"owner-6",name:"Chat Integration",status:"passed",description:"Chat tab when enabled",details:" Conditional visibility,  Communication system"},{id:"owner-7",name:"Payout System",status:"passed",description:"Request payout and balance management",details:" Payout requests,  Balance tracking,  Payment workflow"}]},{id:"misc-fixes",name:"System Fixes",description:"Duplicate removal, staff modules, consistency",completionRate:70,tests:[{id:"misc-1",name:"Duplicate Modules",status:"warning",description:"Remove duplicate navigation items",details:" Some duplicates detected in sidebar"},{id:"misc-2",name:"Reservation IDs",status:"passed",description:"Consistent Demo1234, Demo1235 usage",details:" Standardized demo IDs across all modules"},{id:"misc-3",name:"Staff Salary Module",status:"passed",description:"Emergency task log + advance salary request",details:" Task logging,  Salary advances,  Emergency workflows"},{id:"misc-4",name:"Back/Home Buttons",status:"passed",description:"All views have navigation buttons",details:" Universal back buttons,  Home navigation"},{id:"misc-5",name:"Data Consistency",status:"warning",description:"Cross-module data alignment",details:" Some modules need data sync validation"}]}],l=async()=>{r(!0),await new Promise(h=>setTimeout(h,3e3)),r(!1)},o=h=>{switch(h){case"passed":return"text-green-600 bg-green-50";case"failed":return"text-red-600 bg-red-50";case"warning":return"text-yellow-600 bg-yellow-50";case"pending":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},c=h=>{switch(h){case"passed":return e.jsx(Fe,{className:"h-4 w-4"});case"failed":return e.jsx(ar,{className:"h-4 w-4"});case"warning":return e.jsx(Et,{className:"h-4 w-4"});case"pending":return e.jsx(et,{className:"h-4 w-4"});default:return e.jsx(et,{className:"h-4 w-4"})}},d=Math.round(i.reduce((h,x)=>h+x.completionRate,0)/i.length),u=i.reduce((h,x)=>h+x.tests.length,0),m=i.reduce((h,x)=>h+x.tests.filter(p=>p.status==="passed").length,0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[e.jsx(Cce,{title:"Sandbox Testing Dashboard",showBackButton:!1,roleBasedActions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"outline",className:"text-blue-600",children:"Mr. Property Siam Magic Tools"}),e.jsx(z,{variant:"secondary",children:"Testing Mode"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Overall Progress"}),e.jsxs("p",{className:"text-2xl font-bold",children:[d,"%"]})]}),e.jsx(Bt,{className:"h-8 w-8 text-green-600"})]}),e.jsx(fi,{value:d,className:"mt-3"})]})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tests Passed"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m,"/",u]})]}),e.jsx(Fe,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Demo Scenario"}),e.jsx("p",{className:"text-sm font-bold",children:a.reservationId}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.guestName})]}),e.jsx(dt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Test Categories"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(Zj,{className:"h-8 w-8 text-purple-600"})]}),e.jsx(M,{onClick:l,disabled:n,size:"sm",className:"mt-2 w-full",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"h-3 w-3 mr-1 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mm,{className:"h-3 w-3 mr-1"}),"Run All Tests"]})})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-yellow-600"}),"Active Demo Scenario"]}),e.jsx(Me,{children:"Testing with consistent demo data across all modules"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reservation"}),e.jsx("p",{className:"font-bold",children:a.reservationId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Guest"}),e.jsx("p",{className:"font-bold",children:a.guestName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Property"}),e.jsx("p",{className:"font-bold",children:a.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stay Period"}),e.jsxs("p",{className:"font-bold",children:[a.checkIn," - ",a.checkOut]})]})]}),e.jsx(Wr,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4 text-blue-600"}),"Electricity Billing Test"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.electricityUsage.start," kWh  ",a.electricityUsage.end," kWh = ",a.electricityUsage.end-a.electricityUsage.start," kWh  ",a.electricityUsage.rate," THB = ",a.electricityUsage.total," THB"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4 text-green-600"}),"Deposit Refund Test"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.deposit.amount," THB deposit - ",a.electricityUsage.total," THB electricity = ",a.deposit.refund," THB refund"]})]})]})]})]}),e.jsxs(ft,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsx(xt,{className:"grid w-full grid-cols-6",children:i.map(h=>e.jsx(ae,{value:h.id,className:"text-xs",children:h.name},h.id))}),i.map(h=>e.jsx(ie,{value:h.id,className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(B,{children:h.name}),e.jsx(Me,{children:h.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[h.completionRate,"%"]}),e.jsx(fi,{value:h.completionRate,className:"w-24"})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"grid gap-4",children:h.tests.map(x=>e.jsx("div",{className:`p-4 rounded-lg border ${o(x.status)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c(x.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:x.name}),x.role&&e.jsx(z,{variant:"outline",className:"text-xs",children:x.role})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:x.description}),x.details&&e.jsx("p",{className:"text-xs font-mono bg-white/50 dark:bg-black/20 p-2 rounded",children:x.details})]})]}),x.route&&e.jsx(nn,{href:x.route,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1",children:[e.jsx(Hi,{className:"h-3 w-3"}),"Test"]})})]})},x.id))})})]})},h.id))]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Quick Test Access"}),e.jsx(Me,{children:"Direct links to key testing scenarios"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(nn,{href:"/enhanced-guest-dashboard",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(dt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Guest Dashboard"})]})}),e.jsx(nn,{href:"/enhanced-agent-booking-demo",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(mX,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Agent Demo"})]})}),e.jsx(nn,{href:"/guest-checkin-checkout-tracker",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(tt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Check-in/out"})]})}),e.jsx(nn,{href:"/property-utilities-maintenance",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(wf,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Utilities"})]})}),e.jsx(nn,{href:"/owner-dashboard",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(fn,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Owner Dashboard"})]})}),e.jsx(nn,{href:"/staff-dashboard",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Cf,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Staff Dashboard"})]})}),e.jsx(nn,{href:"/guest-checkout-survey",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Ea,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Survey System"})]})}),e.jsx(nn,{href:"/settings",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Jt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Settings"})]})})]})})]})]})]})}const kce=Object.freeze(Object.defineProperty({__proto__:null,default:kU},Symbol.toStringTag,{value:"Module"})),Wd={id:"Demo1234",guestName:"Liam Andersen",propertyName:"Villa Aruna",checkIn:"2025-07-05"},Pce=[{id:"spa",name:"Spa & Wellness",icon:ks,keywords:["massage","spa","wellness","treatment"]},{id:"dining",name:"Dining",icon:kf,keywords:["dinner","chef","meal","restaurant","food"]},{id:"housekeeping",name:"Housekeeping",icon:Ko,keywords:["cleaning","towels","bed","room","housekeeping"]},{id:"transport",name:"Transportation",icon:Lo,keywords:["taxi","transfer","airport","car","driver"]},{id:"concierge",name:"Concierge",icon:ws,keywords:["recommendation","booking","tour","tickets"]},{id:"general",name:"General",icon:$i,keywords:["other","help","question","request"]}];function Ace(){const{user:t}=Cr(),{toast:s}=at(),n=yt(),[r,a]=b.useState(""),[i,l]=b.useState(null),o=b.useRef(null),c=(t==null?void 0:t.role)==="guest",d=["admin","portfolio-manager","staff"].includes((t==null?void 0:t.role)||""),{data:u=[],isLoading:m}=ye({queryKey:["/api/guest-portal/chat-messages",Wd.id],enabled:!!t}),{data:h=[],isLoading:x}=ye({queryKey:["/api/guest-portal/service-requests",Wd.id],enabled:!!t}),{data:p=[],isLoading:f}=ye({queryKey:["/api/guest-portal/notifications"],enabled:d}),j=Ee({mutationFn:async k=>ve("POST","/api/guest-portal/send-message",k),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/guest-portal/chat-messages"]}),n.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),n.invalidateQueries({queryKey:["/api/guest-portal/notifications"]}),a(""),s({title:"Message sent",description:"Your message has been sent successfully."})},onError:k=>{s({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),g=Ee({mutationFn:async({requestId:k,action:T,notes:C})=>ve("POST",`/api/guest-portal/service-requests/${k}/action`,{action:T,notes:C}),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),n.invalidateQueries({queryKey:["/api/guest-portal/notifications"]}),l(null),s({title:"Request updated",description:"Service request has been updated successfully."})},onError:k=>{s({title:"Error",description:"Failed to update request. Please try again.",variant:"destructive"})}});b.useEffect(()=>{var k;(k=o.current)==null||k.scrollIntoView({behavior:"smooth"})},[u]);const y=()=>{if(!r.trim())return;const k={reservationId:Wd.id,messageText:r,senderType:c?"guest":"staff",senderId:(t==null?void 0:t.id)||"demo-user"};j.mutate(k)},v=(k,T)=>{i&&g.mutate({requestId:i.id,action:k,notes:T})},w=new Date(Wd.checkIn),N=new Date(w);N.setDate(w.getDate()-7);const S=new Date>=N;return m||x?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})}):c?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Guest Portal"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome back, ",Wd.guestName,"! Your stay at ",Wd.propertyName]})]}),!S&&e.jsxs(li,{className:"mb-6",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsxs(oi,{children:["Full access unlocks 7 days before check-in (",N.toLocaleDateString(),"). Chat and basic information are available now."]})]}),e.jsxs(ft,{defaultValue:"chat",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-3",children:[e.jsx(ae,{value:"chat",children:" Chat & Requests"}),e.jsx(ae,{value:"services",children:" Confirmed Services"}),e.jsx(ae,{value:"info",disabled:!S,children:" Arrival & Info"})]}),e.jsx(ie,{value:"chat",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(um,{className:"h-5 w-5"}),"Chat with our team"]}),e.jsx(Me,{children:"Ask questions, request services, or get recommendations. Our AI will help route your requests."})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Cm,{className:"h-96 border rounded-lg p-4",children:e.jsxs("div",{className:"space-y-4",children:[u.map(k=>e.jsx("div",{className:`flex gap-3 ${k.senderType==="guest"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex items-start gap-2 max-w-xs lg:max-w-md ${k.senderType==="guest"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:k.senderType==="guest"?e.jsx(Ht,{className:"h-4 w-4"}):k.isSystemGenerated?e.jsx(ui,{className:"h-4 w-4"}):e.jsx(Ht,{className:"h-4 w-4"})}),e.jsxs("div",{className:`p-3 rounded-lg ${k.senderType==="guest"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:k.messageText}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(k.createdAt).toLocaleTimeString()})]})]})},k.id)),e.jsx("div",{ref:o})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{placeholder:"Type your message or request...",value:r,onChange:k=>a(k.target.value),onKeyPress:k=>k.key==="Enter"&&y(),className:"flex-1"}),e.jsx(M,{onClick:y,disabled:!r.trim()||j.isPending,children:e.jsx(Bk,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Pce.map(k=>{const T=k.icon;return e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>a(`I would like to request ${k.name.toLowerCase()}`),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),k.name]},k.id)})})]})})]})}),e.jsx(ie,{value:"services",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Confirmed Services & Requests"}),e.jsx(Me,{children:"View all confirmed services and add-ons for your stay"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[h.filter(k=>k.status==="accepted").map(k=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:k.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:k.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(z,{variant:"secondary",children:k.category}),e.jsx(z,{variant:k.billingType==="guest_billable"?"destructive":"default",children:k.billingType})]})]}),e.jsxs(z,{variant:"default",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Confirmed"]})]}),k.scheduledDate&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(tt,{className:"h-4 w-4"}),"Scheduled: ",new Date(k.scheduledDate).toLocaleDateString()]})]},k.id)),h.filter(k=>k.status==="accepted").length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Fe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No confirmed services yet"}),e.jsx("p",{className:"text-sm",children:"Request services through the chat to get started"})]})]})})]})}),e.jsx(ie,{value:"info",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(EX,{className:"h-5 w-5"}),"Arrival Details"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Please provide your arrival details for a smooth check-in"}),e.jsx(M,{children:"Update Arrival Info"})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(uX,{className:"h-5 w-5"}),"House Manual"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Important information about your stay"}),e.jsx(M,{variant:"outline",children:"View Manual"})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-5 w-5"}),"Area Guide"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Local recommendations and attractions"}),e.jsx(M,{variant:"outline",children:"Explore Area"})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Service Schedule"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Cleaning and maintenance schedule"}),e.jsx(M,{variant:"outline",children:"View Schedule"})]})]})]})})]})]})}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Guest Portal Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage guest communications and service requests"})]}),e.jsxs(ft,{defaultValue:"notifications",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-3",children:[e.jsxs(ae,{value:"notifications",children:[" Notifications",p.length>0&&e.jsx(z,{variant:"destructive",className:"ml-2",children:p.length})]}),e.jsx(ae,{value:"requests",children:" All Requests"}),e.jsx(ae,{value:"chat",children:" Chat Monitor"})]}),e.jsx(ie,{value:"notifications",children:e.jsxs("div",{className:"space-y-4",children:[p.map(k=>e.jsxs(E,{className:"border-l-4 border-l-orange-500",children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-5 w-5"}),"New Service Request"]}),e.jsx(z,{variant:"outline",children:"Pending"})]}),e.jsxs(Me,{children:["From ",k.guestName," - ",k.propertyName]})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:k.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:k.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>v("accept"),disabled:g.isPending,children:[e.jsx(ni,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsx(M,{variant:"outline",onClick:()=>l(k),children:"Edit"}),e.jsxs(M,{variant:"destructive",onClick:()=>v("decline"),disabled:g.isPending,children:[e.jsx(ar,{className:"h-4 w-4 mr-2"}),"Decline"]})]})]})})]},k.id)),p.length===0&&e.jsx(E,{children:e.jsxs(D,{className:"text-center py-8",children:[e.jsx(xn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-gray-500",children:"No pending notifications"})]})})]})}),e.jsx(ie,{value:"requests",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"All Service Requests"}),e.jsx(Me,{children:"Complete history of service requests across all reservations"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[h.map(k=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:k.serviceType}),e.jsx(z,{variant:k.status==="accepted"?"default":k.status==="pending"?"secondary":"destructive",children:k.status})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:k.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:k.guestName}),e.jsx("span",{children:""}),e.jsx("span",{children:k.propertyName}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(k.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 text-right",children:[e.jsx(z,{variant:k.billingType==="guest_billable"?"destructive":"outline",children:k.billingType}),k.estimatedCost&&e.jsxs("span",{className:"text-sm font-semibold",children:["",k.estimatedCost]})]})]})},k.id)),h.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No service requests found"})]})]})})]})}),e.jsx(ie,{value:"chat",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Chat Monitor"}),e.jsx(Me,{children:"Monitor guest conversations and AI-generated requests"})]}),e.jsx(D,{children:e.jsx(Cm,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:u.map(k=>e.jsx("div",{className:`p-3 rounded-lg border ${k.senderType==="guest"?"bg-blue-50 dark:bg-blue-950":"bg-gray-50 dark:bg-gray-950"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[k.senderType==="guest"?e.jsx(Ht,{className:"h-4 w-4"}):k.isSystemGenerated?e.jsx(ui,{className:"h-4 w-4"}):e.jsx(Ht,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-sm",children:k.senderType==="guest"?"Guest":k.isSystemGenerated?"AI Assistant":"Staff"})]}),e.jsx("p",{className:"text-sm",children:k.messageText})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(k.createdAt).toLocaleTimeString()})]})},k.id))})})})]})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(E,{className:"w-full max-w-md",children:[e.jsx(L,{children:e.jsx(B,{children:"Edit Service Request"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:i.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:i.description})]}),e.jsx(mt,{placeholder:"Add notes or modifications...",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{onClick:()=>v("accept"),disabled:g.isPending,className:"flex-1",children:"Accept"}),e.jsx(M,{variant:"destructive",onClick:()=>v("decline"),disabled:g.isPending,className:"flex-1",children:"Decline"})]}),e.jsx(M,{variant:"outline",onClick:()=>l(null),className:"w-full",children:"Cancel"})]})})]})})]})})}const Tce={restaurant:kf,beach:UX,viewpoint:SX,spa:cp,market:MX,tour:bf},Dce={restaurant:"bg-orange-100 text-orange-800",beach:"bg-blue-100 text-blue-800",viewpoint:"bg-green-100 text-green-800",spa:"bg-purple-100 text-purple-800",market:"bg-yellow-100 text-yellow-800",tour:"bg-red-100 text-red-800"};function Ece(){const{toast:t}=at(),s=yt(),[n,r]=b.useState("all"),[a,i]=b.useState(!1),[l,o]=b.useState({preferredCategories:[],travelStyle:"romantic",budgetPreference:"luxury",activityLevel:"relaxing",groupSize:2,hasChildren:!1,specialInterests:[]}),c={reservationId:"Demo1234",guestId:"guest-liam-andersen",propertyId:1,guestName:"Liam Andersen",checkInDate:"2025-07-05",checkOutDate:"2025-07-10",property:{name:"Villa Aruna",location:"Koh Samui, Thailand"}},{data:d=[],isLoading:u}=ye({queryKey:["/api/guest-activity-recommendations",c.propertyId,n],queryFn:()=>{const v=new URLSearchParams;return n!=="all"&&v.append("category",n),v.append("isFeatured","true"),ve("GET",`/api/guest-activity-recommendations/${c.propertyId}?${v}`)}}),{data:m}=ye({queryKey:["/api/guest-activity-preferences",c.reservationId],queryFn:()=>ve("GET",`/api/guest-activity-preferences/${c.reservationId}`)}),h=Ee({mutationFn:v=>ve("POST","/api/guest-recommendation-interactions",v),onSuccess:()=>{}}),x=Ee({mutationFn:v=>m?ve("PUT",`/api/guest-activity-preferences/${c.reservationId}`,v):ve("POST","/api/guest-activity-preferences",{...v,organizationId:"default-org",reservationId:c.reservationId,guestId:c.guestId,propertyId:c.propertyId}),onSuccess:()=>{t({title:"Preferences Updated",description:"Your activity preferences have been saved. We'll show you more personalized recommendations!"}),s.invalidateQueries({queryKey:["/api/guest-activity-preferences"]}),i(!1)}}),p=(v,w,N)=>{h.mutate({organizationId:"default-org",reservationId:c.reservationId,guestId:c.guestId,recommendationId:v.id,interactionType:w,sessionId:`session-${Date.now()}`,deviceType:"desktop",clickedElement:N,viewDuration:w==="view"?30:void 0})},f=()=>{x.mutate({preferredCategories:l.preferredCategories,travelStyle:l.travelStyle,budgetPreference:l.budgetPreference,activityLevel:l.activityLevel,groupSize:l.groupSize,hasChildren:l.hasChildren,specialInterests:l.specialInterests,preferencesSetBy:"guest"})},j=[{value:"all",label:"All Recommendations"},{value:"restaurant",label:"Restaurants"},{value:"beach",label:"Beaches"},{value:"tour",label:"Tours & Activities"},{value:"spa",label:"Spa & Wellness"},{value:"viewpoint",label:"Viewpoints"},{value:"market",label:"Markets & Shopping"}],g=n==="all"?d:d.filter(v=>v.category===n);return(()=>{const v=new Date,w=new Date(c.checkInDate),N=new Date(c.checkOutDate),S=new Date(w);return S.setDate(S.getDate()-3),v>=S&&v<=N})()?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["Discover ",c.property.location]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome ",c.guestName,"! Here are personalized recommendations for your stay at ",c.property.name]})]}),e.jsxs(M,{onClick:()=>i(!0),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(dm,{className:"h-4 w-4"}),"Customize Preferences"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Browse by Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(v=>e.jsx(M,{onClick:()=>r(v.value),variant:n===v.value?"default":"outline",size:"sm",children:v.label},v.value))})]})]}),u?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(v=>e.jsxs(E,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),e.jsxs(D,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},v))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(v=>{const w=Tce[v.category]||ws;return e.jsxs(E,{className:"hover:shadow-xl transition-all duration-300 bg-white",onMouseEnter:()=>p(v,"view"),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-lg flex items-center justify-center",children:e.jsx(w,{className:"h-12 w-12 text-white"})}),v.isFeatured&&e.jsx(z,{className:"absolute top-3 right-3 bg-yellow-500 text-white",children:"Featured"}),e.jsx(z,{className:`absolute top-3 left-3 ${Dce[v.category]}`,children:v.category})]}),e.jsxs(D,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:v.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:v.shortDescription}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ws,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:v.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(et,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:v.operatingHours})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ks,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-gray-600",children:v.estimatedPrice})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:v.tags.slice(0,3).map((N,S)=>e.jsx(z,{variant:"secondary",className:"text-xs",children:N},S))}),e.jsxs("div",{className:"flex gap-2",children:[v.googleMapsLink&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{p(v,"click","maps"),window.open(v.googleMapsLink,"_blank")},children:[e.jsx(CX,{className:"h-4 w-4 mr-1"}),"Maps"]}),v.websiteUrl&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{p(v,"click","website"),window.open(v.websiteUrl,"_blank")},children:[e.jsx(Ii,{className:"h-4 w-4 mr-1"}),"Website"]}),v.phoneNumber&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{p(v,"click","phone"),window.open(`tel:${v.phoneNumber}`,"_blank")},children:[e.jsx($i,{className:"h-4 w-4 mr-1"}),"Call"]})]}),v.bookingUrl&&e.jsxs(M,{className:"w-full mt-3",onClick:()=>{p(v,"click","booking"),window.open(v.bookingUrl,"_blank")},children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Book Now"]})]})]},v.id)})}),g.length===0&&!u&&e.jsx(E,{children:e.jsxs(D,{className:"text-center py-12",children:[e.jsx(ws,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No recommendations found"}),e.jsx("p",{className:"text-gray-600",children:"Try selecting a different category or customize your preferences."})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(E,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(L,{children:[e.jsx(B,{children:"Customize Your Preferences"}),e.jsx(Me,{children:"Tell us about your interests to get more personalized recommendations"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Preferred Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.slice(1).map(v=>{var w;return e.jsx(M,{size:"sm",variant:(w=l.preferredCategories)!=null&&w.includes(v.value)?"default":"outline",onClick:()=>{const N=l.preferredCategories||[];N.includes(v.value)?o({...l,preferredCategories:N.filter(S=>S!==v.value)}):o({...l,preferredCategories:[...N,v.value]})},children:v.label},v.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Travel Style"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["romantic","family","adventure","relaxation","cultural"].map(v=>e.jsx(M,{size:"sm",variant:l.travelStyle===v?"default":"outline",onClick:()=>o({...l,travelStyle:v}),children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Budget Preference"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["budget","moderate","luxury"].map(v=>e.jsx(M,{size:"sm",variant:l.budgetPreference===v?"default":"outline",onClick:()=>o({...l,budgetPreference:v}),children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Activity Level"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["relaxing","moderate","active"].map(v=>e.jsx(M,{size:"sm",variant:l.activityLevel===v?"default":"outline",onClick:()=>o({...l,activityLevel:v}),children:v.charAt(0).toUpperCase()+v.slice(1)},v))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{onClick:f,disabled:x.isPending,className:"flex-1",children:x.isPending?"Saving...":"Save Preferences"}),e.jsx(M,{variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(E,{children:[e.jsxs(L,{className:"text-center",children:[e.jsx(B,{className:"text-2xl",children:"Activity Recommendations"}),e.jsx(Me,{children:"Activity recommendations will be available 3 days before your check-in date."})]}),e.jsxs(D,{className:"text-center",children:[e.jsx(tt,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsxs("p",{className:"text-lg mb-2",children:["Check-in: ",new Date(c.checkInDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recommendations available from: ",new Date(new Date(c.checkInDate).getTime()-3*24*60*60*1e3).toLocaleDateString()]})]})]})})})}function Oce(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Help & Support"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," support@hostpilotpro.com"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +1 (555) 123-4567"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Support Hours:"})," 9 AM - 6 PM (Monday - Friday)"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Links"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:" Property Management Guide"}),e.jsx("p",{children:" Booking System Tutorial"}),e.jsx("p",{children:" Financial Reports Help"}),e.jsx("p",{children:" Task Management Overview"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-green-600",children:" All systems operational"}),e.jsx("p",{className:"text-green-600",children:" Database connectivity: Good"}),e.jsx("p",{className:"text-green-600",children:" API services: Running"})]})]})]})]})}function BE(){const[,t]=Yn();return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>t("/"),className:"mb-4","data-testid":"button-back-dashboard",children:[e.jsx(Il,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get quick assistance with HostPilotPro - Your property management platform"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx($i,{className:"h-5 w-5"}),"Contact Support"]}),e.jsx(Me,{children:"Immediate assistance available"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($i,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"+66 (0) 76-123-456"}),e.jsx(z,{className:"text-xs",children:"24/7 Available"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gi,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"support@hostpilotpro.com"}),e.jsx(z,{variant:"secondary",className:"text-xs",children:"Response within 2 hours"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(um,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Live Chat"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Available in-app"}),e.jsx(z,{variant:"outline",className:"text-xs",children:"Online now"})]})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5"}),"Quick Actions"]}),e.jsx(Me,{children:"Fast solutions for common tasks"})]}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(um,{className:"h-4 w-4 mr-2"}),"Start Live Chat Support"]}),e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"View User Guide"]}),e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(Ii,{className:"h-4 w-4 mr-2"}),"Knowledge Base"]}),e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Training Videos"]})]})]}),e.jsxs(E,{className:"md:col-span-2",children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Zv,{className:"h-5 w-5"}),"Common Solutions"]}),e.jsx(Me,{children:"Quick fixes for frequent questions"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Property Management"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Adding Properties:"})," Go to Property Hub  Add New Property"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Task Assignment:"})," Use Daily Operations  Create Task"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Booking Management:"})," Access via Bookings tab"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Financial Tools"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Invoice Generation:"})," Finance Hub  Invoice Generator"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Revenue Reports:"})," Admin Dashboard  Financial Reports"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Commission Tracking:"})," Finance Engine  Commission System"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"User Management"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Add Users:"})," Admin  User Management  Add User"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Permissions:"})," Click Permissions button next to any user"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Role Changes:"})," Edit user profile and update role"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"AI Assistant"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Captain Cortex:"})," Click the AI button in bottom-right corner"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Smart Queries:"})," Ask about properties, revenue, or tasks"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Report Generation:"})," Request automated insights"]})]})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5"}),"Platform Status"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"System Status"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"All Systems Operational"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"API Response"}),e.jsx(z,{variant:"outline",children:"< 50ms average"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Last Update"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Today, 2:30 PM"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2 text-red-600",children:[e.jsx($i,{className:"h-5 w-5"}),"Emergency Support"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-red-800",children:"24/7 Emergency Hotline"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:"+66 (0) 76-999-888"}),e.jsx("p",{className:"text-xs text-red-700",children:"For critical system issues or property emergencies"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Technical Support"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:"+66 (0) 76-888-777"}),e.jsx("p",{className:"text-xs text-blue-700",children:"For urgent technical assistance"})]})]})]})]})]})}function Mce(){const[t,s]=b.useState(""),n=[{id:"1",title:"Getting Started with HostPilotPro",description:"Learn the basics of property management and initial setup",category:"Getting Started",tags:["setup","basics","onboarding"],readTime:"5 min",difficulty:"beginner"},{id:"2",title:"Managing Properties and Bookings",description:"Complete guide to property setup and booking management",category:"Properties",tags:["properties","bookings","calendar"],readTime:"8 min",difficulty:"beginner"},{id:"3",title:"Finance Intelligence Module",description:"AI-powered financial analysis and business insights",category:"Finance",tags:["finance","ai","analytics","reports"],readTime:"12 min",difficulty:"intermediate"},{id:"4",title:"Staff Management & Payroll",description:"Manage staff salaries, wages, and payroll information",category:"Staff",tags:["staff","payroll","salaries","admin"],readTime:"10 min",difficulty:"intermediate"},{id:"5",title:"Task Automation and Scheduling",description:"Set up automatic task creation and scheduling rules",category:"Tasks",tags:["tasks","automation","scheduling"],readTime:"15 min",difficulty:"advanced"},{id:"6",title:"User Roles and Permissions",description:"Configure user access levels and module permissions",category:"Administration",tags:["users","permissions","roles","security"],readTime:"7 min",difficulty:"intermediate"}],r=[{question:"How do I reset a user's password?",answer:"Navigate to User Management, select the user, and click 'Reset Password'. An email will be sent to the user with reset instructions.",category:"User Management"},{question:"Can I export financial reports?",answer:"Yes! Go to Finance Hub  Finance Intelligence and click 'Export Report' to download PDF or CSV reports with AI insights.",category:"Finance"},{question:"How do I set up automated tasks?",answer:"Go to Task Management  Automation Rules to create recurring tasks based on property events, dates, or booking triggers.",category:"Tasks"},{question:"What's the difference between Admin and Portfolio Manager roles?",answer:"Admins have full system access including user management and system settings. Portfolio Managers can manage properties and view reports but cannot access admin-only features.",category:"Roles"},{question:"How do I add a new property?",answer:"Navigate to Property Management and click 'Add Property'. Fill in the required details including address, amenities, and owner information.",category:"Properties"},{question:"Can I integrate with external booking platforms?",answer:"Yes, HostPilotPro supports integrations with Airbnb, Booking.com, and VRBO through our API connections panel in Settings.",category:"Integrations"}],a=[{title:"Video Tutorials",description:"Watch step-by-step guides",icon:rF,action:()=>window.open("https://youtube.com/@hostpilotpro","_blank")},{title:"Contact Support",description:"Get help from our team",icon:um,action:()=>window.open("mailto:support@hostpilotpro.com","_blank")},{title:"Community Forum",description:"Connect with other users",icon:dt,action:()=>window.open("https://community.hostpilotpro.com","_blank")},{title:"System Status",description:"Check service availability",icon:wl,action:()=>window.open("https://status.hostpilotpro.com","_blank")}],i=n.filter(d=>t===""||d.title.toLowerCase().includes(t.toLowerCase())||d.description.toLowerCase().includes(t.toLowerCase())||d.tags.some(u=>u.toLowerCase().includes(t.toLowerCase()))),l=r.filter(d=>t===""||d.question.toLowerCase().includes(t.toLowerCase())||d.answer.toLowerCase().includes(t.toLowerCase())),o=d=>{switch(d){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},c=d=>{switch(d){case"Properties":return fn;case"Finance":return Je;case"Tasks":return wl;case"Staff":return dt;case"Administration":return Jt;default:return vt}};return e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(Zv,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Help Center"})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Find answers, guides, and resources to help you get the most out of HostPilotPro"})]}),e.jsxs("div",{className:"relative mb-8 max-w-md mx-auto",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(G,{placeholder:"Search help articles and FAQs...",value:t,onChange:d=>s(d.target.value),className:"pl-9"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:a.map((d,u)=>e.jsx(E,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:d.action,children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(d.icon,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-medium mb-1",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600",children:d.description}),e.jsx(Hi,{className:"h-3 w-3 mx-auto mt-2 text-gray-400"})]})},u))}),e.jsxs(ft,{defaultValue:"articles",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-2",children:[e.jsx(ae,{value:"articles",children:"Help Articles"}),e.jsx(ae,{value:"faq",children:"FAQ"})]}),e.jsx(ie,{value:"articles",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:i.map(d=>{const u=c(d.category);return e.jsx(E,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:e.jsx(u,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:d.title}),e.jsx(z,{variant:"secondary",className:"text-xs",children:d.category}),e.jsx(z,{className:`text-xs ${o(d.difficulty)}`,children:d.difficulty})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:d.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(et,{className:"h-3 w-3"}),d.readTime]}),e.jsx("div",{className:"flex gap-1",children:d.tags.map(m=>e.jsx(z,{variant:"outline",className:"text-xs",children:m},m))})]})]})]}),e.jsx(q$,{className:"h-5 w-5 text-gray-400"})]})})},d.id)})})}),e.jsx(ie,{value:"faq",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:l.map((d,u)=>e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(Zv,{className:"h-5 w-5 text-blue-600"}),d.question]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:d.answer}),e.jsx(z,{variant:"outline",className:"mt-3 text-xs",children:d.category})]})]},u))})})]}),e.jsx(E,{className:"mt-8 bg-blue-50",children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Still need help?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Our support team is here to help you succeed"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(M,{onClick:()=>window.open("mailto:support@hostpilotpro.com","_blank"),children:[e.jsx(Gi,{className:"h-4 w-4 mr-2"}),"Email Support"]}),e.jsxs(M,{variant:"outline",onClick:()=>window.open("tel:+1-555-HOSTPRO","_blank"),children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Call Support"]})]})]})})]})}var R0="Collapsible",[_ce]=Pn(R0),[Rce,WP]=_ce(R0),PU=b.forwardRef((t,s)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:l,...o}=t,[c,d]=ra({prop:r,defaultProp:a??!1,onChange:l,caller:R0});return e.jsx(Rce,{scope:n,disabled:i,contentId:Zr(),open:c,onOpenToggle:b.useCallback(()=>d(u=>!u),[d]),children:e.jsx(st.div,{"data-state":YP(c),"data-disabled":i?"":void 0,...o,ref:s})})});PU.displayName=R0;var AU="CollapsibleTrigger",TU=b.forwardRef((t,s)=>{const{__scopeCollapsible:n,...r}=t,a=WP(AU,n);return e.jsx(st.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":YP(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:s,onClick:Be(t.onClick,a.onOpenToggle)})});TU.displayName=AU;var KP="CollapsibleContent",DU=b.forwardRef((t,s)=>{const{forceMount:n,...r}=t,a=WP(KP,t.__scopeCollapsible);return e.jsx(An,{present:n||a.open,children:({present:i})=>e.jsx(Ice,{...r,ref:s,present:i})})});DU.displayName=KP;var Ice=b.forwardRef((t,s)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=t,l=WP(KP,n),[o,c]=b.useState(r),d=b.useRef(null),u=kt(s,d),m=b.useRef(0),h=m.current,x=b.useRef(0),p=x.current,f=l.open||o,j=b.useRef(f),g=b.useRef(void 0);return b.useEffect(()=>{const y=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(y)},[]),cn(()=>{const y=d.current;if(y){g.current=g.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const v=y.getBoundingClientRect();m.current=v.height,x.current=v.width,j.current||(y.style.transitionDuration=g.current.transitionDuration,y.style.animationName=g.current.animationName),c(r)}},[l.open,r]),e.jsx(st.div,{"data-state":YP(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!f,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...t.style},children:f&&a})});function YP(t){return t?"open":"closed"}var $ce=PU;const EU=$ce,OU=TU,MU=DU,Fce=ds({name:Pe().min(1,"Name is required"),email:Pe().email("Invalid email address"),role:zs(["admin","portfolio-manager","staff","owner","guest"]),status:zs(["active","inactive"])}),Lce=ds({name:Pe().min(1,"Name is required"),email:Pe().email("Invalid email address"),role:zs(["admin","portfolio-manager","staff","owner","guest"]),password:Pe().min(6,"Password must be at least 6 characters")}),fc={"Core Dashboard":{"Admin Dashboard":{view:!0,edit:!0,create:!1,delete:!1},"Portfolio Manager Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Owner Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Staff Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Retail Agent Hub":{view:!0,edit:!1,create:!1,delete:!1}},"Property Management":{"Property CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Property Settings":{view:!0,edit:!0,create:!1,delete:!1},"Property Goals":{view:!0,edit:!0,create:!0,delete:!1},"Property Hub":{view:!0,edit:!1,create:!1,delete:!1},"Property Overview":{view:!0,edit:!1,create:!1,delete:!1}},"Task Management":{"Task CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Task Templates":{view:!0,edit:!0,create:!0,delete:!1},"Task Automation":{view:!0,edit:!0,create:!1,delete:!1},"Daily Operations":{view:!0,edit:!1,create:!1,delete:!1},"Maintenance Tracking":{view:!0,edit:!0,create:!0,delete:!1}},"Booking & Guest Services":{"Booking CRUD":{view:!0,edit:!0,create:!0,delete:!1},"Guest Portal":{view:!0,edit:!1,create:!1,delete:!1},"Check-in/Check-out":{view:!0,edit:!0,create:!1,delete:!1},"Guest Communication":{view:!0,edit:!0,create:!0,delete:!1},"Guest Services":{view:!0,edit:!1,create:!1,delete:!1}},"Financial Management":{"Finance CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Invoice Generator":{view:!0,edit:!0,create:!0,delete:!1},"Finance Engine":{view:!0,edit:!0,create:!1,delete:!1},"Smart Pricing":{view:!0,edit:!0,create:!1,delete:!1},"OTA Payout Logic":{view:!0,edit:!1,create:!1,delete:!1},"Owner Invoicing":{view:!0,edit:!0,create:!0,delete:!1},"Commission System":{view:!0,edit:!0,create:!1,delete:!1}},"Utilities & Maintenance":{"Utility Tracker":{view:!0,edit:!0,create:!0,delete:!1},"Water Management":{view:!0,edit:!0,create:!0,delete:!1},"Maintenance System":{view:!0,edit:!0,create:!0,delete:!1},"Vendor Management":{view:!0,edit:!0,create:!0,delete:!0},"Supply Orders":{view:!0,edit:!0,create:!0,delete:!1}},"Staff & Operations":{"Staff Management":{view:!0,edit:!0,create:!0,delete:!1},"Staff Permissions":{view:!0,edit:!0,create:!1,delete:!1},"Staff Workload":{view:!0,edit:!1,create:!1,delete:!1},"Staff Skills":{view:!0,edit:!0,create:!0,delete:!1},"Operational Efficiency":{view:!0,edit:!1,create:!1,delete:!1}},"Reports & Analytics":{"Financial Reports":{view:!0,edit:!1,create:!1,delete:!1},"Performance Analytics":{view:!0,edit:!1,create:!1,delete:!1},"Portfolio Health":{view:!0,edit:!1,create:!1,delete:!1},"Sustainability Metrics":{view:!0,edit:!1,create:!1,delete:!1},"Revenue Forecasting":{view:!0,edit:!1,create:!1,delete:!1}},"AI & Automation":{"Captain Cortex AI":{view:!0,edit:!1,create:!1,delete:!1},"AI Notifications":{view:!0,edit:!0,create:!1,delete:!1},"AI Task Automation":{view:!0,edit:!0,create:!1,delete:!1},"Smart Suggestions":{view:!0,edit:!1,create:!1,delete:!1}},"System Administration":{"User Management":{view:!0,edit:!0,create:!0,delete:!0},"System Settings":{view:!0,edit:!0,create:!1,delete:!1},"API Connections":{view:!0,edit:!0,create:!1,delete:!1},"Sandbox Testing":{view:!0,edit:!0,create:!1,delete:!1},"System Integrity":{view:!0,edit:!1,create:!1,delete:!1}}};function $2(){const[t,s]=b.useState(""),[n,r]=b.useState("all"),[a,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,x]=b.useState(null),[p,f]=b.useState({}),[j,g]=b.useState([]),{toast:y}=at(),v=yt(),{data:w=[],isLoading:N}=ye({queryKey:["/api/users"]}),S=Zt({resolver:xs(Fce),defaultValues:{name:"",email:"",role:"staff",status:"active"}}),k=Zt({resolver:xs(Lce),defaultValues:{name:"",email:"",role:"staff",password:""}}),T=Ee({mutationFn:async R=>{const{id:q,...re}=R;return ve("PATCH",`/api/users/${q}`,re)},onSuccess:()=>{v.invalidateQueries({queryKey:["/api/users"]}),o(!1),i(null),S.reset(),y({title:"Success",description:"User updated successfully"})},onError:R=>{y({title:"Error",description:R.message||"Failed to update user",variant:"destructive"})}}),C=Ee({mutationFn:async R=>ve("POST","/api/users",R),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/users"]}),d(!1),k.reset(),y({title:"Success",description:"User created successfully"})},onError:R=>{y({title:"Error",description:R.message||"Failed to create user",variant:"destructive"})}}),P=R=>{i(R),S.reset({name:R.name||`${R.firstName||""} ${R.lastName||""}`.trim(),email:R.email,role:R.role,status:R.status||"active"}),o(!0)},$=R=>{a&&T.mutate({...R,id:a.id})},V=R=>{C.mutate(R)},I=R=>{x(R);const q={};Object.keys(fc).forEach(re=>{q[re]={},Object.keys(fc[re]).forEach(we=>{const K=R.role==="admin",Ce=R.role==="portfolio-manager",pe=R.role==="staff";R.role,q[re][we]={view:!0,edit:K||Ce&&!re.includes("System"),create:K||Ce&&!re.includes("System"),delete:K},re==="System Administration"&&!K&&(q[re][we]={view:!1,edit:!1,create:!1,delete:!1}),re==="Financial Management"&&pe&&(q[re][we].edit=!1,q[re][we].create=!1)})}),f(q),m(!0)},_=(R,q,re,we)=>{f(K=>({...K,[R]:{...K[R],[q]:{...K[R][q],[re]:we}}}))},U=R=>{g(q=>q.includes(R)?q.filter(re=>re!==R):[...q,R])},H=()=>{y({title:"Success",description:`Permissions updated for ${(h==null?void 0:h.name)||(h==null?void 0:h.email)}`}),m(!1)},Y=w.filter(R=>{var we,K;const q=!t||((we=R.name)==null?void 0:we.toLowerCase().includes(t.toLowerCase()))||((K=R.email)==null?void 0:K.toLowerCase().includes(t.toLowerCase()))||`${R.firstName||""} ${R.lastName||""}`.toLowerCase().includes(t.toLowerCase()),re=n==="all"||R.role===n;return q&&re}),O={admin:"bg-red-100 text-red-800","portfolio-manager":"bg-blue-100 text-blue-800",staff:"bg-green-100 text-green-800",owner:"bg-purple-100 text-purple-800",guest:"bg-gray-100 text-gray-800"};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage users, permissions, and access controls"})]}),e.jsxs(Ke,{open:c,onOpenChange:d,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(SD,{className:"w-4 h-4 mr-2"}),"Add User"]})}),e.jsxs(Ye,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Add New User"})}),e.jsx(os,{...k,children:e.jsxs("form",{onSubmit:k.handleSubmit(V),className:"space-y-4",children:[e.jsx(me,{control:k.control,name:"name",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Full Name"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Enter full name",...R})}),e.jsx(fe,{})]})}),e.jsx(me,{control:k.control,name:"email",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Email"}),e.jsx(ue,{children:e.jsx(G,{type:"email",placeholder:"Enter email address",...R})}),e.jsx(fe,{})]})}),e.jsx(me,{control:k.control,name:"password",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Password"}),e.jsx(ue,{children:e.jsx(G,{type:"password",placeholder:"Enter password",...R})}),e.jsx(fe,{})]})}),e.jsx(me,{control:k.control,name:"role",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Role"}),e.jsxs(se,{onValueChange:R.onChange,defaultValue:R.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select role"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"guest",children:"Guest"})]})]}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:C.isPending,children:C.isPending?"Creating...":"Create User"})]})]})})]})]}),e.jsx(Ke,{open:u,onOpenChange:m,children:e.jsxs(Ye,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5"}),"Manage Permissions: ",(h==null?void 0:h.name)||(h==null?void 0:h.email)]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:O[h==null?void 0:h.role],children:h==null?void 0:h.role}),e.jsx("span",{className:"text-sm text-gray-600",children:h==null?void 0:h.email})]}),e.jsx("div",{className:"ml-auto text-xs text-gray-500",children:"Configure granular permissions for each module and operation"})]}),e.jsx("div",{className:"space-y-3",children:Object.keys(fc).map(R=>e.jsx("div",{className:"border rounded-lg",children:e.jsxs(EU,{children:[e.jsx(OU,{className:"w-full p-3 flex items-center justify-between hover:bg-gray-50",onClick:()=>U(R),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xj,{className:`h-4 w-4 transition-transform ${j.includes(R)?"rotate-180":""}`}),e.jsx("h3",{className:"font-semibold",children:R}),e.jsxs(z,{variant:"outline",children:[Object.keys(fc[R]).length," modules"]})]})}),e.jsx(MU,{children:e.jsx("div",{className:"p-3 border-t space-y-3",children:Object.keys(fc[R]).map(q=>{var re,we,K,Ce,pe,F,Q,Z;return e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("div",{className:"font-medium text-sm",children:q}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-3 w-3 text-blue-500"}),e.jsx("span",{className:"text-xs",children:"View"}),e.jsx(At,{checked:((we=(re=p[R])==null?void 0:re[q])==null?void 0:we.view)||!1,onCheckedChange:le=>_(R,q,"view",le)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-3 w-3 text-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Edit"}),e.jsx(At,{checked:((Ce=(K=p[R])==null?void 0:K[q])==null?void 0:Ce.edit)||!1,onCheckedChange:le=>_(R,q,"edit",le)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(SD,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(At,{checked:((F=(pe=p[R])==null?void 0:pe[q])==null?void 0:F.create)||!1,onCheckedChange:le=>_(R,q,"create",le)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zi,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-xs",children:"Delete"}),e.jsx(At,{checked:((Z=(Q=p[R])==null?void 0:Q[q])==null?void 0:Z.delete)||!1,onCheckedChange:le=>_(R,q,"delete",le)})]})]})]},q)})})})]})},R))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(M,{onClick:H,children:"Save Permissions"})]})]})]})})]}),e.jsxs(ft,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsxs(ae,{value:"users",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-4 h-4"}),"Users"]}),e.jsxs(ae,{value:"permissions",className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-4 h-4"}),"Permissions"]}),e.jsxs(ae,{value:"access",className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Access Control"]}),e.jsxs(ae,{value:"visibility",className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4"}),"Property Visibility"]})]}),e.jsx(ie,{value:"users",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"User Management"]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hs,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(G,{placeholder:"Search users...",className:"pl-10",value:t,onChange:R=>s(R.target.value)})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"Filter by role"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Roles"}),e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owner"})]})]})]}),N?e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((R,q)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-48 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-8 w-16 bg-gray-300 rounded"})]})]},q))}):e.jsxs("div",{className:"space-y-4",children:[Y.map(R=>{const q=R.name||`${R.firstName||""} ${R.lastName||""}`.trim()||R.email,re=q.split(" ").map(we=>we[0]).join("").toUpperCase();return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:re}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:q}),e.jsx("p",{className:"text-sm text-gray-600",children:R.email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",R.role]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:O[R.role],children:R.role}),e.jsx(z,{variant:(R.status||"active")==="active"?"default":"secondary",children:R.status||"active"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>P(R),children:"Edit"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>I(R),children:[e.jsx(qt,{className:"w-4 h-4 mr-1"}),"Permissions"]})]})]},R.id)}),Y.length===0&&!N&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your filters."})]})]})]})}),e.jsx(ie,{value:"permissions",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"Global Permission Templates"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Manage Permissions"}),e.jsx("p",{className:"text-blue-800 text-sm",children:'Click the "Permissions" button next to any user in the Users tab to configure their detailed module access. Each user can have granular permissions for View, Edit, Create, and Delete operations across all platform modules.'})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:"Admin Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Full system access"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"User management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"System settings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"All CRUD operations"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Portfolio Manager"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Property management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Financial oversight"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"Limited staff management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No system admin"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:"Staff Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Task management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Guest services"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"Basic financial view"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No financial edit"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-700 mb-2",children:"Owner Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Own properties view"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Financial reports"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Payout requests"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No management access"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Total Platform Modules Coverage"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:Object.keys(fc).map(R=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium",children:R}),e.jsxs("div",{className:"text-xs text-gray-600",children:[Object.keys(fc[R]).length," modules"]})]},R))})]})]})})]})}),e.jsx(ie,{value:"access",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-5 h-5"}),"User Access & Visibility Manager"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Dashboard Access"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Admin Dashboard"}),e.jsx(z,{className:"bg-red-100 text-red-800",children:"Admin Only"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Financial Dashboard"}),e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"Admin/PM"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Staff Dashboard"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Staff"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Feature Access"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"User Management"}),e.jsx(z,{className:"bg-red-100 text-red-800",children:"Admin Only"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Property CRUD"}),e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"Admin/PM"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Task Creation"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"All Staff"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Data Visibility"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"All Properties"}),e.jsx(z,{className:"bg-red-100 text-red-800",children:"Admin"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Assigned Properties"}),e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"PM/Staff"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Own Properties"}),e.jsx(z,{className:"bg-purple-100 text-purple-800",children:"Owner"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Access Control Matrix"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Feature"}),e.jsx("th",{className:"text-center p-2",children:"Admin"}),e.jsx("th",{className:"text-center p-2",children:"PM"}),e.jsx("th",{className:"text-center p-2",children:"Staff"}),e.jsx("th",{className:"text-center p-2",children:"Owner"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"User Management"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-red-600",children:""}),e.jsx("td",{className:"text-center p-2 text-red-600",children:""}),e.jsx("td",{className:"text-center p-2 text-red-600",children:""})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Financial Reports"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-red-600",children:""}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"Limited"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Property Management"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"Limited"}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"View Only"})]})]})]})})]})]})})]})}),e.jsx(ie,{value:"visibility",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"w-5 h-5"}),"Property Visibility Control"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Property Assignment"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Villa Samui Breeze"}),e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"PM: Jane"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Owner: Alice Owner"}),e.jsx("p",{children:"Staff Access: Bob Staff, Carol Manager"})]})]}),e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Villa Aruna"}),e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"PM: Jane"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Owner: Alice Owner"}),e.jsx("p",{children:"Staff Access: Bob Staff"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Visibility Rules"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Admin Global Access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Can view all properties"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"PM Property Assignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only assigned properties"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Owner Property Restriction"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only owned properties"})]}),e.jsx(At,{defaultChecked:!0})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Current Property Access Matrix"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Property"}),e.jsx("th",{className:"text-center p-2",children:"Admin"}),e.jsx("th",{className:"text-center p-2",children:"PM Jane"}),e.jsx("th",{className:"text-center p-2",children:"Staff Bob"}),e.jsx("th",{className:"text-center p-2",children:"Owner Alice"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Samui Breeze"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Aruna"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Paradise"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:""}),e.jsx("td",{className:"text-center p-2 text-red-600",children:""}),e.jsx("td",{className:"text-center p-2 text-red-600",children:""}),e.jsx("td",{className:"text-center p-2 text-red-600",children:""})]})]})]})})]})]})})]})})]}),e.jsx(Ke,{open:l,onOpenChange:o,children:e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Edit User"})}),e.jsx(os,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit($),className:"space-y-4",children:[e.jsx(me,{control:S.control,name:"name",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Name"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Enter user name",...R})}),e.jsx(fe,{})]})}),e.jsx(me,{control:S.control,name:"email",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Email"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Enter email address",...R})}),e.jsx(fe,{})]})}),e.jsx(me,{control:S.control,name:"role",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Role"}),e.jsxs(se,{onValueChange:R.onChange,defaultValue:R.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select a role"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"guest",children:"Guest"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:S.control,name:"status",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Status"}),e.jsxs(se,{onValueChange:R.onChange,defaultValue:R.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select status"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:T.isPending,children:T.isPending?"Saving...":"Save Changes"})]})]})})]})})]})}const Bce=Object.freeze(Object.defineProperty({__proto__:null,default:$2},Symbol.toStringTag,{value:"Module"})),Vce=[{id:1,avatar:"/api/placeholder/40/40",firstName:"John",lastName:"Smith",email:"john.smith@example.com",title:"Property Manager",userGroups:["Property Managers","Administrators"],lastLogin:"2 hours ago",phone:"+66 123 456 789",preferredContact:"Email",address:"123 Sukhumvit Road, Bangkok",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!1,canAccessFinance:!0},notifications:{dashboard:!0,mobile:!1,email:!0,sms:!1},listingsAccess:[1,2,3]},{id:2,avatar:"/api/placeholder/40/40",firstName:"Sarah",lastName:"Wilson",email:"sarah.wilson@example.com",title:"Villa Coordinator",userGroups:["Staff"],lastLogin:"1 day ago",phone:"+66 987 654 321",preferredContact:"Phone",address:"456 Patong Beach, Phuket",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!1,canAccessFinance:!1},notifications:{dashboard:!0,mobile:!0,email:!0,sms:!0},listingsAccess:[1,4]},{id:3,avatar:"/api/placeholder/40/40",firstName:"Michael",lastName:"Chen",email:"michael.chen@example.com",title:"Operations Manager",userGroups:["Property Managers"],lastLogin:"3 hours ago",phone:"+66 555 123 456",preferredContact:"Email",address:"789 Chaweng Beach, Koh Samui",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!0,canAccessFinance:!0},notifications:{dashboard:!0,mobile:!1,email:!0,sms:!1},listingsAccess:[2,3,4]}],Uce=[{id:1,name:"Villa Samui Breeze",image:"/api/placeholder/100/80"},{id:2,name:"Villa Ocean View",image:"/api/placeholder/100/80"},{id:3,name:"Villa Aruna Demo",image:"/api/placeholder/100/80"},{id:4,name:"Villa Tropical Paradise",image:"/api/placeholder/100/80"}];function zce({users:t,onEditUser:s}){const[n,r]=b.useState(""),a=t.filter(i=>i.firstName.toLowerCase().includes(n.toLowerCase())||i.lastName.toLowerCase().includes(n.toLowerCase())||i.email.toLowerCase().includes(n.toLowerCase()));return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"text-gray-600",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(M,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add new"]})]})]}),e.jsxs(ft,{defaultValue:"users",className:"w-full",children:[e.jsxs(xt,{className:"grid w-32 grid-cols-2",children:[e.jsx(ae,{value:"users",children:"Users"}),e.jsx(ae,{value:"groups",children:"Groups"})]}),e.jsx(ie,{value:"users",className:"mt-4",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(G,{placeholder:"Search users...",value:n,onChange:i=>r(i.target.value),className:"pl-10"})]})})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Groups"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(ai,{className:"h-8 w-8 mr-3",children:[e.jsx(_d,{src:i.avatar}),e.jsxs(ii,{children:[i.firstName[0],i.lastName[0]]})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[i.firstName," ",i.lastName]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:i.userGroups.map((l,o)=>e.jsx(z,{variant:"secondary",className:"text-xs",children:l},o))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.lastLogin}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>s(i),className:"text-blue-600 hover:text-blue-900",children:e.jsx(jr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-900",children:e.jsx(br,{className:"w-4 h-4"})})]})})]},i.id))})]})})]})}function qce({user:t,onSave:s,onCancel:n}){const[r,a]=b.useState({...t}),i=()=>{s(r)},l=(c,d)=>{a(u=>({...u,[c]:d}))},o=(c,d,u)=>{a(m=>({...m,[c]:{...m[c],[d]:u}}))};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit User: ",r.firstName," ",r.lastName]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(M,{variant:"outline",onClick:n,children:[e.jsx(on,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(M,{onClick:i,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Sf,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs(ft,{defaultValue:"basic",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"basic",children:"Basic Info"}),e.jsx(ae,{value:"address",children:"Address"}),e.jsx(ae,{value:"permissions",children:"Access Permissions"}),e.jsx(ae,{value:"notifications",children:"Notifications"}),e.jsx(ae,{value:"listings",children:"Listings Access"})]}),e.jsx(ie,{value:"basic",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs(ai,{className:"h-20 w-20",children:[e.jsx(_d,{src:r.avatar}),e.jsxs(ii,{className:"text-lg",children:[r.firstName[0],r.lastName[0]]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(mi,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx(G,{value:r.firstName,onChange:c=>l("firstName",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx(G,{value:r.lastName,onChange:c=>l("lastName",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(G,{value:r.title,onChange:c=>l("title",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(G,{type:"email",value:r.email,onChange:c=>l("email",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx(G,{value:r.phone,onChange:c=>l("phone",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Contact Method"}),e.jsxs("select",{value:r.preferredContact,onChange:c=>l("preferredContact",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"SMS",children:"SMS"})]})]})]})]})}),e.jsx(ie,{value:"address",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{value:r.address,onChange:c=>l("address",c.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})})}),e.jsx(ie,{value:"permissions",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Access Permissions"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.permissions).map(([c,d])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:c,checked:d,onChange:u=>o("permissions",c,u.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:c,className:"ml-3 text-sm text-gray-700",children:c.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase())})]},c))})]})}),e.jsx(ie,{value:"notifications",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notification Settings"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.notifications).map(([c,d])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"text-sm text-gray-700",children:[c.charAt(0).toUpperCase()+c.slice(1)," Notifications"]}),e.jsx("button",{type:"button",onClick:()=>o("notifications",c,!d),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${d?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${d?"translate-x-5":"translate-x-0"}`})})]},c))})]})}),e.jsx(ie,{value:"listings",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Listings Access"}),e.jsx(M,{variant:"outline",size:"sm",children:"Select All"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Uce.map(c=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${r.listingsAccess.includes(c.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{const d=r.listingsAccess.includes(c.id)?r.listingsAccess.filter(u=>u!==c.id):[...r.listingsAccess,c.id];l("listingsAccess",d)},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-12 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Villa Property"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("input",{type:"checkbox",checked:r.listingsAccess.includes(c.id),onChange:()=>{},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})})]})},c.id))})]})})]})})]})}function VE(){const[t,s]=Yn(),[n,r]=b.useState(Vce),[a,i]=b.useState(null),l=d=>{i(d),s("/user-management/edit")},o=d=>{r(u=>u.map(m=>m.id===d.id?d:m)),s("/user-management"),i(null)},c=()=>{s("/user-management"),i(null)};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs(U1,{children:[e.jsx(Ie,{path:"/user-management/edit",children:a&&e.jsx(qce,{user:a,onSave:o,onCancel:c})}),e.jsx(Ie,{children:e.jsx(zce,{users:n,onEditUser:l})})]})})}function Hce(){const[t,s]=b.useState("2025"),n=[{id:1,owner:"Alice Owner",property:"Villa Samui Breeze",currentRevenue:85e3,targetRevenue:12e4,progress:71,upgradePlan:"Premium Package",status:"in-progress",deadline:"2025-06-30"},{id:2,owner:"Bob Johnson",property:"Villa Aruna",currentRevenue:45e3,targetRevenue:6e4,progress:75,upgradePlan:"Standard Plus",status:"on-track",deadline:"2025-08-15"},{id:3,owner:"Carol Smith",property:"Villa Paradise",currentRevenue:25e3,targetRevenue:8e4,progress:31,upgradePlan:"Full Renovation",status:"at-risk",deadline:"2025-12-31"}],r=[{name:"Premium Package",features:["Professional Photography","Enhanced Listings","Concierge Service"],estimatedIncrease:"40-60%",cost:"$5,000"},{name:"Standard Plus",features:["Updated Amenities","Marketing Boost","Guest Experience"],estimatedIncrease:"25-35%",cost:"$3,000"},{name:"Full Renovation",features:["Complete Makeover","Premium Furnishing","Smart Home"],estimatedIncrease:"80-120%",cost:"$15,000"}],a=i=>{switch(i){case"on-track":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"at-risk":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Vn,{className:"w-8 h-8"}),"Owner Targets & Upgrades"]}),e.jsx("p",{className:"text-gray-600",children:"Track revenue targets and upgrade progress for property owners"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{className:"w-32",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"2024",children:"2024"}),e.jsx(A,{value:"2025",children:"2025"}),e.jsx(A,{value:"2026",children:"2026"})]})]}),e.jsxs(M,{children:[e.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Set New Target"]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"targets",children:"Revenue Targets"}),e.jsx(ae,{value:"upgrades",children:"Upgrade Plans"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Owners"}),e.jsx("p",{className:"text-2xl font-bold",children:"12"})]}),e.jsx(dt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On Track"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"8"})]}),e.jsx(Bt,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"3"})]}),e.jsx(Vn,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:"67%"})]}),e.jsx(Je,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Owner Progress Overview"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:n.map(i=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ft,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.owner}),e.jsx("p",{className:"text-sm text-gray-600",children:i.property})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(z,{className:a(i.status),children:i.status.replace("-"," ")}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Due: ",i.deadline]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Revenue"}),e.jsxs("p",{className:"font-semibold",children:["$",i.currentRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Target Revenue"}),e.jsxs("p",{className:"font-semibold",children:["$",i.targetRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Upgrade Plan"}),e.jsx("p",{className:"font-semibold",children:i.upgradePlan})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[i.progress,"%"]})]}),e.jsx(fi,{value:i.progress,className:"h-2"})]})]},i.id))})})]})]}),e.jsx(ie,{value:"targets",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Revenue Targets Management"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(G,{placeholder:"Owner name"}),e.jsx(G,{placeholder:"Target amount",type:"number"}),e.jsx(G,{placeholder:"Deadline",type:"date"}),e.jsx(M,{children:"Set Target"})]}),e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.owner}),e.jsx("p",{className:"text-sm text-gray-600",children:i.property})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",i.targetRevenue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:i.deadline})]}),e.jsx(fi,{value:i.progress,className:"w-24 h-2"}),e.jsx(M,{variant:"outline",size:"sm",children:"Edit"})]})]},i.id))})]})})]})}),e.jsx(ie,{value:"upgrades",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Upgrade Plans & Packages"})}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map((i,l)=>e.jsxs(E,{className:"border-2",children:[e.jsxs(L,{children:[e.jsx(B,{className:"text-lg",children:i.name}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.cost})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expected Increase"}),e.jsx("p",{className:"font-semibold text-green-600",children:i.estimatedIncrease})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Features Included:"}),e.jsx("ul",{className:"space-y-1",children:i.features.map((o,c)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),o]},c))})]}),e.jsx(M,{className:"w-full mt-4",children:"Select Plan"})]})})]},l))})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Target Achievement Rate"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"67%"}),e.jsx("p",{className:"text-gray-600",children:"Average Progress"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q1 2025"}),e.jsx("span",{className:"font-semibold",children:"72%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q2 2025"}),e.jsx("span",{className:"font-semibold",children:"68%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q3 2025"}),e.jsx("span",{className:"font-semibold",children:"61%"})]})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Upgrade ROI Analysis"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"156%"}),e.jsx("p",{className:"text-gray-600",children:"Average ROI"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Premium Package"}),e.jsx("span",{className:"font-semibold text-green-600",children:"180%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Standard Plus"}),e.jsx("span",{className:"font-semibold text-green-600",children:"145%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Full Renovation"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"142%"})]})]})]})})]})]})})]})]})}function F2(){const[t,s]=b.useState(""),[n,r]=b.useState("all"),[a,i]=b.useState("all"),[l,o]=b.useState("today"),c=[{id:1,timestamp:"2025-01-21 15:42:33",user:"John Admin",userRole:"admin",action:"USER_LOGIN",entity:"System",details:"Admin user logged in successfully",ipAddress:"192.168.1.100",severity:"info"},{id:2,timestamp:"2025-01-21 15:40:15",user:"Jane Manager",userRole:"portfolio-manager",action:"PROPERTY_UPDATE",entity:"Villa Samui Breeze",details:"Updated property pricing from $150/night to $175/night",ipAddress:"192.168.1.101",severity:"medium"},{id:3,timestamp:"2025-01-21 15:35:22",user:"Bob Staff",userRole:"staff",action:"TASK_COMPLETED",entity:"Pool Cleaning Task #45",details:"Pool cleaning task marked as completed with photos uploaded",ipAddress:"192.168.1.102",severity:"low"},{id:4,timestamp:"2025-01-21 15:30:08",user:"John Admin",userRole:"admin",action:"USER_PERMISSIONS_MODIFIED",entity:"Staff User: Carol Wilson",details:"Granted property management permissions to staff user",ipAddress:"192.168.1.100",severity:"high"},{id:5,timestamp:"2025-01-21 15:25:41",user:"System",userRole:"system",action:"BOOKING_CREATED",entity:"Booking #BK-2025-0156",details:"New booking created via Hostaway API integration",ipAddress:"API",severity:"medium"},{id:6,timestamp:"2025-01-21 15:20:17",user:"Alice Owner",userRole:"owner",action:"PAYOUT_REQUESTED",entity:"Owner Payout #PO-2025-0089",details:"Requested payout of $2,450.00 for December earnings",ipAddress:"192.168.1.103",severity:"medium"},{id:7,timestamp:"2025-01-21 15:15:52",user:"John Admin",userRole:"admin",action:"FINANCE_RESET",entity:"User Balance: Bob Johnson",details:"Admin reset user balance from $1,200 to $0 - Reason: Account reconciliation",ipAddress:"192.168.1.100",severity:"critical"}],d=x=>{switch(x){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";case"info":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=x=>{switch(x){case"admin":return"bg-red-100 text-red-800";case"portfolio-manager":return"bg-blue-100 text-blue-800";case"staff":return"bg-green-100 text-green-800";case"owner":return"bg-purple-100 text-purple-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=x=>{switch(x){case"USER_LOGIN":return e.jsx(Ht,{className:"w-4 h-4"});case"PROPERTY_UPDATE":return e.jsx(Gt,{className:"w-4 h-4"});case"TASK_COMPLETED":return e.jsx(Gs,{className:"w-4 h-4"});case"USER_PERMISSIONS_MODIFIED":return e.jsx(qt,{className:"w-4 h-4"});case"FINANCE_RESET":return e.jsx(qt,{className:"w-4 h-4"});default:return e.jsx(Gs,{className:"w-4 h-4"})}},h={totalLogs:c.length,criticalActions:c.filter(x=>x.severity==="critical").length,adminActions:c.filter(x=>x.userRole==="admin").length,systemActions:c.filter(x=>x.userRole==="system").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Gs,{className:"w-8 h-8"}),"Activity Logs"]}),e.jsx("p",{className:"text-gray-600",children:"Monitor system activities and user actions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Export Logs"]}),e.jsxs(M,{children:[e.jsx(Zi,{className:"w-4 h-4 mr-2"}),"Advanced Filter"]})]})]}),e.jsxs(ft,{defaultValue:"logs",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"logs",children:"Activity Logs"}),e.jsx(ae,{value:"critical",children:"Critical Actions"}),e.jsx(ae,{value:"analytics",children:"Analytics"}),e.jsx(ae,{value:"settings",children:"Log Settings"})]}),e.jsxs(ie,{value:"logs",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Logs"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalLogs})]}),e.jsx(Gs,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Actions"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:h.criticalActions})]}),e.jsx(qt,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admin Actions"}),e.jsx("p",{className:"text-2xl font-bold",children:h.adminActions})]}),e.jsx(Ht,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"System Actions"}),e.jsx("p",{className:"text-2xl font-bold",children:h.systemActions})]}),e.jsx(Gs,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(G,{placeholder:"Search logs...",className:"pl-10",value:t,onChange:x=>s(x.target.value)})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Filter by user"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Users"}),e.jsx(A,{value:"admin",children:"Admin Users"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Managers"}),e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owners"}),e.jsx(A,{value:"system",children:"System"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Filter by action"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Actions"}),e.jsx(A,{value:"USER_LOGIN",children:"User Login"}),e.jsx(A,{value:"PROPERTY_UPDATE",children:"Property Update"}),e.jsx(A,{value:"TASK_COMPLETED",children:"Task Completed"}),e.jsx(A,{value:"USER_PERMISSIONS_MODIFIED",children:"Permissions Modified"}),e.jsx(A,{value:"FINANCE_RESET",children:"Finance Reset"})]})]}),e.jsxs(se,{value:l,onValueChange:o,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Date range"})}),e.jsxs(te,{children:[e.jsx(A,{value:"today",children:"Today"}),e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent Activity"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:m(x.action)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium",children:x.action.replace(/_/g," ")}),e.jsx(z,{className:d(x.severity),children:x.severity})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.details}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"w-3 h-3"}),x.user]}),e.jsx(z,{className:u(x.userRole),variant:"outline",children:x.userRole}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-3 h-3"}),x.timestamp]}),e.jsxs("span",{children:["IP: ",x.ipAddress]})]})]})]}),e.jsx(z,{variant:"outline",className:"text-xs",children:x.entity})]})},x.id))})})]})]}),e.jsx(ie,{value:"critical",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5 text-red-500"}),"Critical Actions Requiring Attention"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.filter(x=>x.severity==="critical"||x.severity==="high").map(x=>e.jsx("div",{className:"border-l-4 border-red-500 bg-red-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-red-800",children:x.action.replace(/_/g," ")}),e.jsx(z,{className:"bg-red-200 text-red-800",children:x.severity})]}),e.jsx("p",{className:"text-sm text-red-700 mb-2",children:x.details}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-red-600",children:[e.jsxs("span",{children:["User: ",x.user]}),e.jsxs("span",{children:["Entity: ",x.entity]}),e.jsxs("span",{children:["Time: ",x.timestamp]})]})]}),e.jsx(M,{variant:"outline",size:"sm",children:"Review"})]})},x.id))})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Activity by User Role"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Admin"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"60%"}})}),e.jsx("span",{className:"text-sm",children:"3"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Portfolio Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Staff"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Owner"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"System"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Activity by Severity"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Critical"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:h.criticalActions})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"High"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Medium"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"43%"}})}),e.jsx("span",{className:"text-sm",children:"3"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Low"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Info"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]})]})})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Logging Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Log Retention"}),e.jsxs(se,{defaultValue:"90",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"30",children:"30 days"}),e.jsx(A,{value:"90",children:"90 days"}),e.jsx(A,{value:"180",children:"180 days"}),e.jsx(A,{value:"365",children:"1 year"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Auto Export"}),e.jsxs(se,{defaultValue:"monthly",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"disabled",children:"Disabled"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"quarterly",children:"Quarterly"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Alert Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Critical Action Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed Login Attempts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Permission Changes"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Financial Actions"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}const Gce=Object.freeze(Object.defineProperty({__proto__:null,default:F2},Symbol.toStringTag,{value:"Module"})),Wce=ds({name:Pe().min(1,"Service name is required"),apiKey:Pe().min(1,"API key is required"),apiSecret:Pe().optional(),baseUrl:Pe().url().optional(),isActive:Ur().default(!0),description:Pe().optional()}),Kce=[{service:"lodgify",name:"Lodgify Property Management",icon:fn,color:"bg-amber-100 text-amber-700",description:"Sync properties, bookings, and financial data from Lodgify",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Lodgify API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.lodgify.com",type:"text"}]},{service:"makcorps",name:"Makcorps Hotel Pricing",icon:ns,color:"bg-indigo-100 text-indigo-700",description:"Real-time hotel pricing from 200+ OTAs (Booking.com, Expedia, Agoda, etc.)",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Makcorps API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.makcorps.com",type:"text"}]},{service:"rentcast",name:"RentCast Property Data",icon:fn,color:"bg-teal-100 text-teal-700",description:"140M+ property records, rental estimates (AVM), valuations, market data & trends",fields:[{name:"apiKey",label:"API Key",placeholder:"Your RentCast API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.rentcast.io/v1",type:"text"}]},{service:"stripe",name:"Stripe Payment Processing",icon:yr,color:"bg-purple-100 text-purple-700",description:"Process payments and manage subscriptions",fields:[{name:"apiKey",label:"Publishable Key",placeholder:"pk_live_...",type:"text"},{name:"apiSecret",label:"Secret Key",placeholder:"sk_live_...",type:"password"}]},{service:"hostaway",name:"Hostaway Property Management",icon:fn,color:"bg-blue-100 text-blue-700",description:"Sync properties, bookings, and guest data",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Hostaway API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.hostaway.com",type:"text"}]},{service:"openai",name:"OpenAI AI Assistant",icon:Sa,color:"bg-green-100 text-green-700",description:"AI-powered recommendations and automation",fields:[{name:"apiKey",label:"API Key",placeholder:"sk-...",type:"password"}]},{service:"twilio",name:"Twilio SMS Notifications",icon:Pf,color:"bg-red-100 text-red-700",description:"Send SMS notifications to guests and staff",fields:[{name:"apiKey",label:"Account SID",placeholder:"AC...",type:"text"},{name:"apiSecret",label:"Auth Token",placeholder:"Your auth token",type:"password"}]}];function _U(){const[t,s]=b.useState(null),[n,r]=b.useState({}),[a,i]=b.useState(null),{toast:l}=at(),o=yt(),c=Zt({resolver:xs(Wce),defaultValues:{isActive:!0}}),{data:d=[],isLoading:u}=ye({queryKey:["/api/admin/api-connections"],queryFn:()=>ve("GET","/api/admin/api-connections")}),m=Array.isArray(d)?d:[],h=Ee({mutationFn:w=>ve("PUT",`/api/admin/api-connections/${w.service}`,w.config),onSuccess:(w,N)=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]}),s(null),c.reset(),l({title:"Connection Updated",description:`${N.service} configuration has been saved successfully.`})},onError:w=>{l({title:"Update Failed",description:w.message||"Failed to update API connection",variant:"destructive"})}}),x=Ee({mutationFn:w=>ve("POST",`/api/admin/api-connections/${w}/test`),onSuccess:(w,N)=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]}),i(null),l({title:"Connection Test Successful",description:`${N} API is working correctly.`})},onError:(w,N)=>{i(null),l({title:"Connection Test Failed",description:`${N}: ${w.message||"Connection test failed"}`,variant:"destructive"})}}),p=Ee({mutationFn:w=>ve("PATCH",`/api/admin/api-connections/${w.service}/toggle`,{isActive:w.isActive}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]})}}),f=w=>{const N=m.find(S=>S.service===w.service);s(w.service),c.reset({name:w.name,isActive:(N==null?void 0:N.isActive)??!0,description:w.description})},j=w=>{i(w),x.mutate(w)},g=w=>{r(N=>({...N,[w]:!N[w]}))},y=w=>{if(!w)return e.jsx(ar,{className:"h-4 w-4 text-gray-400"});switch(w.status){case"connected":return e.jsx(Fe,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(ar,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ut,{className:"h-4 w-4 text-yellow-500"})}},v=w=>{if(!w)return e.jsx(z,{variant:"secondary",children:"Not Configured"});switch(w.status){case"connected":return e.jsx(z,{variant:"default",className:"bg-green-100 text-green-700",children:"Connected"});case"error":return e.jsx(z,{variant:"destructive",children:"Error"});default:return e.jsx(z,{variant:"secondary",children:"Disconnected"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(Jt,{className:"h-8 w-8 text-blue-600"}),"API Connections"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure third-party integrations for your property management system"})]})}),e.jsxs(li,{children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsxs(oi,{children:[e.jsx("strong",{children:"Security Notice:"})," All API keys are encrypted and stored securely. Only administrators can view and modify these settings."]})]}),e.jsxs(ft,{defaultValue:"services",className:"space-y-6",children:[e.jsxs(xt,{children:[e.jsx(ae,{value:"services",children:"Service Connections"}),e.jsx(ae,{value:"logs",children:"Connection Logs"}),e.jsx(ae,{value:"settings",children:"Global Settings"})]}),e.jsx(ie,{value:"services",children:e.jsx("div",{className:"grid gap-6",children:Kce.map(w=>{const N=m.find(k=>k.service===w.service),S=w.icon;return e.jsxs(E,{className:"relative",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${w.color}`,children:e.jsx(S,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[w.name,y(N)]}),e.jsx(Me,{children:w.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[v(N),e.jsx(At,{checked:(N==null?void 0:N.isActive)??!1,onCheckedChange:k=>p.mutate({service:w.service,isActive:k}),disabled:!(N!=null&&N.hasCredentials)})]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:N!=null&&N.hasCredentials?`Last tested: ${N.lastTested||"Never"}`:"No credentials configured"}),e.jsxs("div",{className:"flex gap-2",children:[(N==null?void 0:N.hasCredentials)&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>j(w.service),disabled:a===w.service,children:[e.jsx(Zj,{className:"h-4 w-4 mr-1"}),a===w.service?"Testing...":"Test"]}),e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>f(w),children:[e.jsx(tF,{className:"h-4 w-4 mr-1"}),"Configure"]})}),e.jsxs(Ye,{className:"sm:max-w-md",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Configure ",w.name]}),e.jsxs(Rt,{children:["Enter your API credentials for ",w.name]})]}),e.jsx(os,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(k=>h.mutate({service:w.service,config:k})),className:"space-y-4",children:[w.fields.map(k=>e.jsx(me,{control:c.control,name:k.name,render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:k.label}),e.jsx(ue,{children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{type:k.type==="password"&&!n[k.name]?"password":"text",placeholder:k.placeholder,...T}),k.type==="password"&&e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>g(k.name),children:n[k.name]?e.jsx(Z$,{className:"h-4 w-4"}):e.jsx(Gt,{className:"h-4 w-4"})})]})}),e.jsx(fe,{})]})},k.name)),e.jsx(me,{control:c.control,name:"isActive",render:({field:k})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{children:"Enable Service"}),e.jsx(ls,{children:"Activate this integration for your organization"})]}),e.jsx(ue,{children:e.jsx(At,{checked:k.value,onCheckedChange:k.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(cs,{asChild:!0,children:e.jsx(M,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(M,{type:"submit",disabled:h.isPending,children:h.isPending?"Saving...":"Save Configuration"})]})]})})]})]})]})]})})]},w.service)})})}),e.jsx(ie,{value:"logs",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Connection Activity Logs"}),e.jsx(Me,{children:"Monitor API connection status and error logs"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ns,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Connection logs will appear here when services are tested or used"})]})})]})}),e.jsx(ie,{value:"settings",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Global API Settings"}),e.jsx(Me,{children:"Configure global settings for all API integrations"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Automatic Testing"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Automatically test connections every 24 hours"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Error Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Send email notifications when connections fail"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Debug Logging"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable detailed logging for troubleshooting"})]}),e.jsx(At,{})]})]})]})})]})]})}const Yce=Object.freeze(Object.defineProperty({__proto__:null,default:_U},Symbol.toStringTag,{value:"Module"})),Qce=ds({logoUrl:Pe().url().optional().or(hx("")),primaryColor:Pe().min(7,"Must be a valid hex color").optional().or(hx("")),secondaryColor:Pe().min(7,"Must be a valid hex color").optional().or(hx("")),reportTheme:zs(["modern","classic","minimal","corporate"]).optional(),customDomain:Pe().url().optional().or(hx(""))}),Xce=ds({mode:zs(["full","summary","financial-only","limited"])});function Zce(){const{toast:t}=at(),s=yt(),[n,r]=b.useState(""),{data:a=[],isLoading:i}=ye({queryKey:["/api/admin/users"],staleTime:2*60*1e3}),l=a.filter(f=>f.role==="owner"),{data:o,isLoading:c}=ye({queryKey:["/api/owner-settings",n],enabled:!!n,staleTime:1*60*1e3}),d=Zt({resolver:xs(Qce),defaultValues:{logoUrl:"",primaryColor:"#3b82f6",secondaryColor:"#06b6d4",reportTheme:"modern",customDomain:""}}),u=Zt({resolver:xs(Xce),defaultValues:{mode:"summary"}});b.useState(()=>{o!=null&&o.customBranding&&d.reset({logoUrl:o.customBranding.logoUrl||"",primaryColor:o.customBranding.primaryColor||"#3b82f6",secondaryColor:o.customBranding.secondaryColor||"#06b6d4",reportTheme:o.customBranding.reportTheme||"modern",customDomain:o.customBranding.customDomain||""}),o!=null&&o.transparencyMode&&u.reset({mode:o.transparencyMode})});const m=Ee({mutationFn:async f=>ve("PATCH",`/api/owner-settings/${n}/branding`,f),onSuccess:()=>{t({title:"Branding Updated",description:"Custom branding settings have been saved successfully."}),s.invalidateQueries({queryKey:["/api/owner-settings"]})},onError:f=>{t({title:"Update Failed",description:f.message||"Failed to update branding settings",variant:"destructive"})}}),h=Ee({mutationFn:async f=>ve("PATCH",`/api/owner-settings/${n}/transparency`,f),onSuccess:()=>{t({title:"Transparency Updated",description:"Owner transparency mode has been updated successfully."}),s.invalidateQueries({queryKey:["/api/owner-settings"]})},onError:f=>{t({title:"Update Failed",description:f.message||"Failed to update transparency settings",variant:"destructive"})}}),x=f=>{m.mutate(f)},p=f=>{h.mutate(f)};return i?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ln,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Organization Branding"}),e.jsx("p",{className:"text-gray-600",children:"Manage custom branding and transparency settings for property owners"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Select Owner"]}),e.jsx(Me,{children:"Choose a property owner to configure their branding and transparency settings"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"owner-select",children:"Property Owner"}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select an owner to configure..."})}),e.jsx(te,{children:l.map(f=>e.jsx(A,{value:f.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:f.username}),e.jsx(z,{variant:"secondary",className:"ml-2",children:f.email})]})},f.id))})]})]}),l.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(dt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No property owners found in the system."}),e.jsx("p",{className:"text-sm",children:"Owners will appear here once they are created."})]})]})})]}),n&&e.jsxs(ft,{defaultValue:"branding",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-3",children:[e.jsxs(ae,{value:"branding",className:"flex items-center gap-2",children:[e.jsx(sF,{className:"w-4 h-4"}),"Custom Branding"]}),e.jsxs(ae,{value:"transparency",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Transparency"]}),e.jsxs(ae,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Preview"]})]}),e.jsx(ie,{value:"branding",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Custom Branding Configuration"}),e.jsx(Me,{children:"Customize the visual appearance for this owner's reports and documents"})]}),e.jsx(D,{children:c?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):e.jsx(os,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(x),className:"space-y-6",children:[e.jsx(me,{control:d.control,name:"logoUrl",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Company Logo URL"}),e.jsx(ue,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{placeholder:"https://example.com/logo.png",...f}),e.jsx(M,{type:"button",variant:"outline",size:"sm",children:e.jsx(mi,{className:"w-4 h-4"})})]})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:d.control,name:"primaryColor",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Primary Brand Color"}),e.jsx(ue,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{type:"color",className:"w-16 h-10",...f}),e.jsx(G,{placeholder:"#3b82f6",...f})]})}),e.jsx(fe,{})]})}),e.jsx(me,{control:d.control,name:"secondaryColor",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Secondary Brand Color"}),e.jsx(ue,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{type:"color",className:"w-16 h-10",...f}),e.jsx(G,{placeholder:"#06b6d4",...f})]})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:d.control,name:"reportTheme",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Report Theme"}),e.jsxs(se,{onValueChange:f.onChange,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Choose a report theme"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"modern",children:"Modern"}),e.jsx(A,{value:"classic",children:"Classic"}),e.jsx(A,{value:"minimal",children:"Minimal"}),e.jsx(A,{value:"corporate",children:"Corporate"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:d.control,name:"customDomain",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Custom Domain (Optional)"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"https://reports.yourcompany.com",...f})}),e.jsx(fe,{})]})}),e.jsx(M,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?"Saving...":"Save Branding Settings"})]})})})]})}),e.jsx(ie,{value:"transparency",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Owner Transparency Settings"}),e.jsx(Me,{children:"Control what financial and operational information this owner can access"})]}),e.jsx(D,{children:e.jsx(os,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(p),className:"space-y-6",children:[e.jsx(me,{control:u.control,name:"mode",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Transparency Level"}),e.jsxs(se,{onValueChange:f.onChange,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select transparency level"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"full",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Full Transparency"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete access to all financial and operational data"})]})}),e.jsx(A,{value:"summary",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Summary Reports"}),e.jsx("div",{className:"text-sm text-gray-500",children:"High-level summaries and key metrics only"})]})}),e.jsx(A,{value:"financial-only",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Financial Only"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Access to financial data, limited operational details"})]})}),e.jsx(A,{value:"limited",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Limited Access"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Basic property status and essential information only"})]})})]})]}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Transparency Level Details"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Full:"})," Complete financial reports, task details, guest information"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Summary:"})," Monthly summaries, key performance indicators, basic metrics"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Financial Only:"})," Revenue, expenses, payouts - no operational details"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Limited:"})," Property status, basic booking information, essential notifications"]})]})]}),e.jsx(M,{type:"submit",className:"w-full",disabled:h.isPending,children:h.isPending?"Updating...":"Update Transparency Settings"})]})})})]})}),e.jsx(ie,{value:"preview",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Branding Preview"}),e.jsx(Me,{children:"Preview how the custom branding will appear in owner reports and documents"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:d.watch("primaryColor")||"#3b82f6"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d.watch("logoUrl")?e.jsx("img",{src:d.watch("logoUrl"),alt:"Company Logo",className:"h-12 w-auto",onError:f=>{f.target.style.display="none"}}):e.jsx("div",{className:"h-12 w-24 rounded flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:d.watch("primaryColor")||"#3b82f6"},children:"LOGO"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Monthly Property Report"}),e.jsx("p",{className:"text-gray-600",children:"December 2024"})]})]}),e.jsxs(z,{style:{backgroundColor:d.watch("secondaryColor")||"#06b6d4",color:"white"},children:[d.watch("reportTheme")||"Modern"," Theme"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Revenue"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:d.watch("primaryColor")||"#3b82f6"},children:"128,500"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Occupancy"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:d.watch("secondaryColor")||"#06b6d4"},children:"85%"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Net Profit"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"89,200"})]})]}),d.watch("customDomain")&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Custom Domain:"})," ",d.watch("customDomain")]})})]}),e.jsx("div",{className:"text-center text-gray-500 text-sm",children:"This is a preview of how your branding will appear in owner reports and documents. Save your settings to apply these changes."})]})})]})})]})]})}const UE=[{code:"THA",name:"Thailand"},{code:"USA",name:"United States"},{code:"GBR",name:"United Kingdom"},{code:"SGP",name:"Singapore"},{code:"MYS",name:"Malaysia"},{code:"IDN",name:"Indonesia"},{code:"VNM",name:"Vietnam"},{code:"PHL",name:"Philippines"}],ZN=[{value:"contract",label:"Rental Contract"},{value:"deposit_rules",label:"Deposit Rules"},{value:"terms_conditions",label:"Terms & Conditions"},{value:"privacy_policy",label:"Privacy Policy"},{value:"cancellation_policy",label:"Cancellation Policy"},{value:"house_rules",label:"House Rules"}];function Jce(){const[t,s]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState({countryCode:"",docType:"",templateText:""}),{toast:u}=at(),m=yt(),{data:h=[],isLoading:x}=ye({queryKey:["/api/legal-templates",t,n],queryFn:()=>{const C=new URLSearchParams;return t&&C.append("countryCode",t),n&&C.append("docType",n),ve("GET",`/api/legal-templates?${C.toString()}`).then(P=>P.json())}}),{data:p=[]}=ye({queryKey:["/api/legal-templates/countries"],queryFn:()=>ve("GET","/api/legal-templates/countries").then(C=>C.json())}),{data:f=[]}=ye({queryKey:["/api/legal-templates/doc-types"],queryFn:()=>ve("GET","/api/legal-templates/doc-types").then(C=>C.json())}),j=Ee({mutationFn:C=>ve("POST","/api/legal-templates",{body:C}).then(P=>P.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),m.invalidateQueries({queryKey:["/api/legal-templates/countries"]}),m.invalidateQueries({queryKey:["/api/legal-templates/doc-types"]}),u({title:"Success",description:"Legal template created successfully"}),i(!1),v()},onError:()=>{u({title:"Error",description:"Failed to create legal template",variant:"destructive"})}}),g=Ee({mutationFn:({id:C,...P})=>ve("PUT",`/api/legal-templates/${C}`,{body:P}).then($=>$.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),u({title:"Success",description:"Legal template updated successfully"}),i(!1),o(null),v()},onError:()=>{u({title:"Error",description:"Failed to update legal template",variant:"destructive"})}}),y=Ee({mutationFn:C=>ve("DELETE",`/api/legal-templates/${C}`).then(P=>P.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),m.invalidateQueries({queryKey:["/api/legal-templates/countries"]}),m.invalidateQueries({queryKey:["/api/legal-templates/doc-types"]}),u({title:"Success",description:"Legal template deleted successfully"})},onError:()=>{u({title:"Error",description:"Failed to delete legal template",variant:"destructive"})}}),v=()=>{d({countryCode:"",docType:"",templateText:""}),o(null)},w=C=>{if(C.preventDefault(),!c.countryCode||!c.docType||!c.templateText){u({title:"Error",description:"All fields are required",variant:"destructive"});return}l?g.mutate({id:l.id,...c}):j.mutate(c)},N=C=>{o(C),d({countryCode:C.countryCode,docType:C.docType,templateText:C.templateText}),i(!0)},S=C=>{confirm("Are you sure you want to delete this legal template?")&&y.mutate(C)},k=C=>{var P;return((P=UE.find($=>$.code===C))==null?void 0:P.name)||C},T=C=>{var P;return((P=ZN.find($=>$.value===C))==null?void 0:P.label)||C};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Legal Templates Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage country-specific legal documents and contract templates"})]}),e.jsxs(Ke,{open:a,onOpenChange:i,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{onClick:v,children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Template"]})}),e.jsxs(Ye,{className:"max-w-4xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:l?"Edit Legal Template":"Create Legal Template"}),e.jsx(Rt,{children:l?"Update the legal template details":"Create a new country-specific legal template"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"countryCode",children:"Country"}),e.jsxs(se,{value:c.countryCode,onValueChange:C=>d(P=>({...P,countryCode:C})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select country"})}),e.jsx(te,{children:UE.map(C=>e.jsxs(A,{value:C.code,children:[C.name," (",C.code,")"]},C.code))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"docType",children:"Document Type"}),e.jsxs(se,{value:c.docType,onValueChange:C=>d(P=>({...P,docType:C})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select document type"})}),e.jsx(te,{children:ZN.map(C=>e.jsx(A,{value:C.value,children:C.label},C.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"templateText",children:"Template Content"}),e.jsx(mt,{id:"templateText",value:c.templateText,onChange:C=>d(P=>({...P,templateText:C.target.value})),placeholder:"Enter the legal template text...",className:"min-h-[300px]"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:j.isPending||g.isPending,children:l?"Update Template":"Create Template"})]})]})]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(xt,{children:[e.jsx(ae,{value:"overview",children:" Overview"}),e.jsx(ae,{value:"templates",children:" Templates"}),e.jsx(ae,{value:"countries",children:" Countries"})]}),e.jsx(ie,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Templates"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.length})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Countries"}),e.jsx(Ii,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:p.length})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Document Types"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:f.length})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Recent Updates"}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(C=>new Date(C.createdAt)>new Date(Date.now()-7*24*60*60*1e3)).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]})]})}),e.jsxs(ie,{value:"templates",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"Filter by country"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All countries"}),p.map(C=>e.jsx(A,{value:C,children:k(C)},C))]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"Filter by document type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All document types"}),f.map(C=>e.jsx(A,{value:C,children:T(C)},C))]})]})]}),x?e.jsx("div",{className:"text-center py-8",children:"Loading templates..."}):e.jsxs("div",{className:"grid gap-4",children:[h.map(C=>e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"text-lg",children:T(C.docType)}),e.jsx(z,{variant:"secondary",children:k(C.countryCode)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>N(C),children:e.jsx(jr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>S(C.id),disabled:y.isPending,children:e.jsx(br,{className:"w-4 h-4"})})]})]}),e.jsxs(Me,{children:["Created: ",new Date(C.createdAt).toLocaleDateString()]})]}),e.jsx(D,{children:e.jsxs("div",{className:"bg-muted p-4 rounded-md",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Template Preview:"}),e.jsx("div",{className:"text-sm max-h-32 overflow-y-auto",children:C.templateText.length>200?`${C.templateText.substring(0,200)}...`:C.templateText})]})})]},C.id)),h.length===0&&e.jsx(E,{children:e.jsxs(D,{className:"text-center py-8",children:[e.jsx(vt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No legal templates found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first template to get started"})]})})]})]}),e.jsx(ie,{value:"countries",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.map(C=>{const P=h.filter($=>$.countryCode===C);return e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ii,{className:"w-5 h-5"}),k(C)]}),e.jsxs(Me,{children:[P.length," template(s) available"]})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-2",children:ZN.map($=>{const V=P.some(I=>I.docType===$.value);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:$.label}),e.jsx(z,{variant:V?"default":"secondary",children:V?"Available":"Missing"})]},$.value)})})})]},C)}),p.length===0&&e.jsx(E,{className:"col-span-full",children:e.jsxs(D,{className:"text-center py-8",children:[e.jsx(Ii,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No countries configured"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add legal templates to see countries here"})]})})]})})]})]})}function ede(){var _,U,H,Y,O,R,q,re,we;const[t,s]=b.useState(!1),[n,r]=b.useState(!1),[a,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState("all"),[u,m]=b.useState("all"),[h,x]=b.useState(""),[p,f]=b.useState([]),{toast:j}=at(),g=yt(),{data:y=[],isLoading:v}=ye({queryKey:["/api/marketing-packs"]}),{data:w=[]}=ye({queryKey:["/api/properties"]}),{data:N={}}=ye({queryKey:["/api/marketing-packs/analytics"]}),S=Ee({mutationFn:K=>ve("POST","/api/marketing-packs",K),onSuccess:()=>{j({title:"Success",description:"Marketing pack created successfully"}),g.invalidateQueries({queryKey:["/api/marketing-packs"]}),s(!1)},onError:()=>{j({title:"Error",description:"Failed to create marketing pack",variant:"destructive"})}}),k=Ee({mutationFn:K=>ve("DELETE",`/api/marketing-packs/${K}`),onSuccess:()=>{j({title:"Success",description:"Marketing pack deleted successfully"}),g.invalidateQueries({queryKey:["/api/marketing-packs"]})},onError:()=>{j({title:"Error",description:"Failed to delete marketing pack",variant:"destructive"})}}),T=Ee({mutationFn:K=>ve("POST","/api/marketing-packs/bulk-generate",K),onSuccess:K=>{j({title:"Success",description:K.message}),g.invalidateQueries({queryKey:["/api/marketing-packs"]}),o(!1),f([])},onError:()=>{j({title:"Error",description:"Failed to bulk generate marketing packs",variant:"destructive"})}}),C=K=>{K.preventDefault();const Ce=new FormData(K.target),pe={propertyId:parseInt(Ce.get("propertyId")),packType:Ce.get("packType"),targetAudience:Ce.get("targetAudience"),language:Ce.get("language"),status:"draft"};S.mutate(pe)},P=K=>{K.preventDefault();const Ce=new FormData(K.target),pe={propertyIds:p,packType:Ce.get("packType"),targetAudience:Ce.get("targetAudience"),language:Ce.get("language")};T.mutate(pe)},$=K=>{switch(K){case"published":return"default";case"generated":return"secondary";case"draft":return"outline";case"archived":return"destructive";default:return"outline"}},V=K=>{switch(K){case"luxury":return"";case"premium":return"";case"standard":return"";case"agent-focused":return"";default:return""}},I=y.filter(K=>{var Q;const Ce=c==="all"||K.status===c,pe=u==="all"||K.packType===u,F=!h||((Q=K.propertyName)==null?void 0:Q.toLowerCase().includes(h.toLowerCase()))||K.packType.toLowerCase().includes(h.toLowerCase())||K.targetAudience.toLowerCase().includes(h.toLowerCase());return Ce&&pe&&F});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Marketing Pack Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate and manage AI-powered marketing materials for your properties"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>o(!0),variant:"outline",children:[e.jsx(kX,{className:"h-4 w-4 mr-2"}),"Bulk Generate"]}),e.jsxs(M,{onClick:()=>s(!0),children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Create Pack"]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(xt,{children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"packs",children:"Marketing Packs"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(ie,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Packs"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(N==null?void 0:N.totalPacks)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all properties"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Published"}),e.jsx(z,{variant:"default",className:"h-4 w-4 rounded-full"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((_=N==null?void 0:N.statusDistribution)==null?void 0:_.published)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready for use"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Generated"}),e.jsx(VX,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((U=N==null?void 0:N.statusDistribution)==null?void 0:U.generated)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI generated content"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Draft"}),e.jsx(jr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((H=N==null?void 0:N.statusDistribution)==null?void 0:H.draft)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Work in progress"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Pack Type Distribution"}),e.jsx(Me,{children:"Distribution of marketing pack types"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:(Y=N==null?void 0:N.packTypeDistribution)==null?void 0:Y.map(K=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:V(K.packType)}),e.jsx("span",{className:"capitalize",children:K.packType})]}),e.jsx(z,{variant:"outline",children:K.count})]},K.packType))})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Target Audience Distribution"}),e.jsx(Me,{children:"Marketing focus by audience type"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:(O=N==null?void 0:N.audienceDistribution)==null?void 0:O.map(K=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"capitalize",children:K.audience})]}),e.jsx(z,{variant:"outline",children:K.count})]},K.audience))})})]})]})]}),e.jsxs(ie,{value:"packs",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(G,{placeholder:"Search packs...",value:h,onChange:K=>x(K.target.value),className:"max-w-sm"}),e.jsxs(se,{value:c,onValueChange:d,children:[e.jsx(ee,{className:"w-[180px]",children:e.jsx(ne,{placeholder:"Filter by status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"draft",children:"Draft"}),e.jsx(A,{value:"generated",children:"Generated"}),e.jsx(A,{value:"published",children:"Published"}),e.jsx(A,{value:"archived",children:"Archived"})]})]}),e.jsxs(se,{value:u,onValueChange:m,children:[e.jsx(ee,{className:"w-[180px]",children:e.jsx(ne,{placeholder:"Filter by type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"standard",children:"Standard"}),e.jsx(A,{value:"premium",children:"Premium"}),e.jsx(A,{value:"luxury",children:"Luxury"}),e.jsx(A,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(K=>{var Ce;return e.jsxs(E,{className:"hover:shadow-md transition-shadow",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(B,{className:"text-lg",children:[e.jsx("span",{className:"mr-2",children:V(K.packType)}),K.propertyName]}),e.jsxs(Me,{className:"capitalize",children:[K.packType,"  ",K.targetAudience]})]}),e.jsx(z,{variant:$(K.status),children:K.status})]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(yD,{className:"h-4 w-4"}),e.jsx("span",{className:"uppercase",children:K.language})]}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-3",children:[(Ce=K.aiSummary)==null?void 0:Ce.substring(0,100),"..."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{i(K),r(!0)},children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),"View"]}),K.pdfUrl&&e.jsx(M,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:K.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"PDF"]})}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>k.mutate(K.id),children:e.jsx(br,{className:"h-4 w-4"})})]})]})})]},K.id)})}),I.length===0&&!v&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(vt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No marketing packs found"}),e.jsx("p",{className:"text-muted-foreground",children:"Create your first marketing pack to get started."})]})]}),e.jsx(ie,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-5 w-5"}),"Language Distribution"]}),e.jsx(Me,{children:"Marketing packs by language"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:(R=N==null?void 0:N.languageDistribution)==null?void 0:R.map(K=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yD,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"uppercase",children:K.language})]}),e.jsx(z,{variant:"outline",children:K.count})]},K.language))})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Monthly Trends"}),e.jsx(Me,{children:"Pack creation over time"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:(q=N==null?void 0:N.monthlyTrends)==null?void 0:q.map(K=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:new Date(K.month).toLocaleDateString("en-US",{year:"numeric",month:"short"})}),e.jsxs(z,{variant:"outline",children:[K.count," packs"]})]},K.month))})})]})]})})]}),e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"sm:max-w-[425px]",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create Marketing Pack"}),e.jsx(Rt,{children:"Generate AI-powered marketing materials for your property."})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"propertyId",children:"Property"}),e.jsxs(se,{name:"propertyId",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsx(te,{children:w.map(K=>e.jsxs(A,{value:K.id.toString(),children:[K.name," - ",K.bedrooms,"BR"]},K.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"packType",children:"Pack Type"}),e.jsxs(se,{name:"packType",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select pack type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"standard",children:"Standard"}),e.jsx(A,{value:"premium",children:"Premium"}),e.jsx(A,{value:"luxury",children:"Luxury"}),e.jsx(A,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsxs(se,{name:"targetAudience",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select target audience"})}),e.jsxs(te,{children:[e.jsx(A,{value:"general",children:"General"}),e.jsx(A,{value:"families",children:"Families"}),e.jsx(A,{value:"couples",children:"Couples"}),e.jsx(A,{value:"business",children:"Business"}),e.jsx(A,{value:"luxury",children:"Luxury"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"language",children:"Language"}),e.jsxs(se,{name:"language",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select language"})}),e.jsxs(te,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"th",children:"Thai"}),e.jsx(A,{value:"zh",children:"Chinese"}),e.jsx(A,{value:"ja",children:"Japanese"}),e.jsx(A,{value:"ko",children:"Korean"})]})]})]}),e.jsx(ir,{children:e.jsx(M,{type:"submit",disabled:S.isPending,children:S.isPending?"Creating...":"Create Pack"})})]})]})}),e.jsx(Ke,{open:n,onOpenChange:r,children:e.jsxs(Ye,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx("span",{children:V((a==null?void 0:a.packType)||"")}),a==null?void 0:a.propertyName," - ",a==null?void 0:a.packType]}),e.jsxs(Rt,{children:["Generated for ",a==null?void 0:a.targetAudience," audience in ",(re=a==null?void 0:a.language)==null?void 0:re.toUpperCase()]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{variant:$(a.status),children:a.status}),e.jsx(z,{variant:"outline",children:(we=a.language)==null?void 0:we.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"AI Generated Content"}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:a.aiSummary})})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(a.createdAt).toLocaleDateString(),a.updatedAt!==a.createdAt&&e.jsxs(e.Fragment,{children:["  ","Updated: ",new Date(a.updatedAt).toLocaleDateString()]})]})]})]})}),e.jsx(Ke,{open:l,onOpenChange:o,children:e.jsxs(Ye,{className:"sm:max-w-[500px]",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Bulk Generate Marketing Packs"}),e.jsx(Rt,{children:"Generate marketing packs for multiple properties at once."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Select Properties"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2 space-y-2",children:w.map(K=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:p.includes(K.id),onChange:Ce=>{Ce.target.checked?f([...p,K.id]):f(p.filter(pe=>pe!==K.id))}}),e.jsxs("span",{className:"text-sm",children:[K.name," - ",K.bedrooms,"BR"]})]},K.id))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.length," properties selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"packType",children:"Pack Type"}),e.jsxs(se,{name:"packType",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select pack type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"standard",children:"Standard"}),e.jsx(A,{value:"premium",children:"Premium"}),e.jsx(A,{value:"luxury",children:"Luxury"}),e.jsx(A,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsxs(se,{name:"targetAudience",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select target audience"})}),e.jsxs(te,{children:[e.jsx(A,{value:"general",children:"General"}),e.jsx(A,{value:"families",children:"Families"}),e.jsx(A,{value:"couples",children:"Couples"}),e.jsx(A,{value:"business",children:"Business"}),e.jsx(A,{value:"luxury",children:"Luxury"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"language",children:"Language"}),e.jsxs(se,{name:"language",required:!0,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select language"})}),e.jsxs(te,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"th",children:"Thai"}),e.jsx(A,{value:"zh",children:"Chinese"}),e.jsx(A,{value:"ja",children:"Japanese"}),e.jsx(A,{value:"ko",children:"Korean"})]})]})]}),e.jsx(ir,{children:e.jsx(M,{type:"submit",disabled:T.isPending||p.length===0,children:T.isPending?"Generating...":`Generate ${p.length} Packs`})})]})]})})]})}const JN=t=>{switch(t){case"critical":return"destructive";case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},ew=t=>{switch(t){case"open":return"destructive";case"in-progress":return"default";case"resolved":return"secondary";default:return"outline"}},tw=t=>{switch(t){case"missing-task":return e.jsx(et,{className:"h-4 w-4"});case"overdue-maintenance":return e.jsx(Et,{className:"h-4 w-4"});case"booking-conflict":return e.jsx(Ut,{className:"h-4 w-4"});case"payout-mismatch":return e.jsx(Bt,{className:"h-4 w-4"});default:return e.jsx(Gs,{className:"h-4 w-4"})}};function RU(){var m,h,x,p,f,j,g;const[t,s]=b.useState("overview"),{toast:n}=at(),r=yt(),{data:a,isLoading:i}=ye({queryKey:["/api/ai-ops-anomalies"],staleTime:1e3*60*2}),{data:l,isLoading:o}=ye({queryKey:["/api/ai-ops-anomalies/analytics"],staleTime:1e3*60*2}),c=Ee({mutationFn:()=>ve("POST","/api/ai-ops-anomalies/detect"),onSuccess:y=>{n({title:"Anomaly Detection Complete",description:y.message}),r.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),r.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{n({title:"Detection Failed",description:"Failed to detect anomalies",variant:"destructive"})}}),d=Ee({mutationFn:()=>ve("POST","/api/ai-ops-anomalies/auto-fix"),onSuccess:y=>{n({title:"Auto-Fix Complete",description:y.message}),r.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),r.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{n({title:"Auto-Fix Failed",description:"Failed to auto-fix anomalies",variant:"destructive"})}}),u=Ee({mutationFn:({id:y,fixAction:v})=>ve("POST",`/api/ai-ops-anomalies/${y}/resolve`,{fixAction:v}),onSuccess:()=>{n({title:"Anomaly Resolved",description:"Anomaly has been marked as resolved"}),r.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),r.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{n({title:"Resolution Failed",description:"Failed to resolve anomaly",variant:"destructive"})}});return i||o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(vs,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"AI Operations Anomalies"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage system anomalies with AI-powered detection and auto-fix capabilities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>c.mutate(),disabled:c.isPending,variant:"outline",children:[c.isPending?e.jsx(vs,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(mm,{className:"h-4 w-4 mr-2"}),"Detect Anomalies"]}),e.jsxs(M,{onClick:()=>d.mutate(),disabled:d.isPending,variant:"default",children:[d.isPending?e.jsx(vs,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Auto-Fix"]})]})]}),e.jsxs(ft,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(xt,{children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"anomalies",children:"Anomalies"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(ie,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Anomalies"}),e.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.totalAnomalies)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Detected across all properties"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Open Issues"}),e.jsx(Et,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((h=(m=l==null?void 0:l.statusDistribution)==null?void 0:m.find(y=>y.status==="open"))==null?void 0:h.count)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requiring attention"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Auto-Fix Rate"}),e.jsx(ns,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(l==null?void 0:l.autoFixSuccessRate)||"0.0","%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully auto-resolved"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Resolved"}),e.jsx(Fe,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((p=(x=l==null?void 0:l.statusDistribution)==null?void 0:x.find(y=>y.status==="resolved"))==null?void 0:p.count)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Issues fixed"})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Recent Anomalies"}),e.jsx(Me,{children:"Latest detected system anomalies"})]}),e.jsx(D,{children:a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.slice(0,5).map(y=>{var v;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[tw(y.anomalyType),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:((v=y.details)==null?void 0:v.description)||"Unknown anomaly"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(z,{variant:JN(y.severity),children:y.severity}),e.jsx(z,{variant:ew(y.status),children:y.status}),e.jsx("span",{className:"text-sm text-muted-foreground",children:jp(new Date(y.detectedAt),{addSuffix:!0})})]})]})]}),y.status==="open"&&e.jsx(M,{size:"sm",variant:"outline",onClick:()=>u.mutate({id:y.id,fixAction:"Manually resolved from overview"}),disabled:u.isPending,children:"Resolve"})]},y.id)})}):e.jsxs(li,{children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(oi,{children:"No anomalies detected. Your system is running smoothly!"})]})})]})]}),e.jsx(ie,{value:"anomalies",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"All Anomalies"}),e.jsx(Me,{children:"Complete list of system anomalies"})]}),e.jsx(D,{children:a&&a.length>0?e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Type"}),e.jsx(Re,{children:"Description"}),e.jsx(Re,{children:"Severity"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Auto-Fixed"}),e.jsx(Re,{children:"Detected"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:a.map(y=>{var v,w;return e.jsxs(Ot,{children:[e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[tw(y.anomalyType),e.jsx("span",{className:"capitalize",children:y.anomalyType.replace("-"," ")})]})}),e.jsx(Oe,{className:"max-w-md",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(v=y.details)==null?void 0:v.description}),((w=y.details)==null?void 0:w.recommendation)&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y.details.recommendation})]})}),e.jsx(Oe,{children:e.jsx(z,{variant:JN(y.severity),children:y.severity})}),e.jsx(Oe,{children:e.jsx(z,{variant:ew(y.status),children:y.status})}),e.jsx(Oe,{children:y.autoFixed?e.jsx(Fe,{className:"h-4 w-4 text-green-500"}):e.jsx("span",{className:"text-muted-foreground",children:""})}),e.jsx(Oe,{children:jp(new Date(y.detectedAt),{addSuffix:!0})}),e.jsx(Oe,{children:y.status==="open"&&e.jsx(M,{size:"sm",variant:"outline",onClick:()=>u.mutate({id:y.id,fixAction:"Manually resolved"}),disabled:u.isPending,children:"Resolve"})})]},y.id)})})]}):e.jsxs(li,{children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(oi,{children:"No anomalies found. Run detection to scan for issues."})]})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Status Distribution"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:(f=l==null?void 0:l.statusDistribution)==null?void 0:f.map(y=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(z,{variant:ew(y.status),children:y.status})}),e.jsx("span",{className:"font-medium",children:y.count})]},y.status))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Severity Distribution"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:(j=l==null?void 0:l.severityDistribution)==null?void 0:j.map(y=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(z,{variant:JN(y.severity),children:y.severity})}),e.jsx("span",{className:"font-medium",children:y.count})]},y.severity))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Anomaly Types"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:(g=l==null?void 0:l.typeDistribution)==null?void 0:g.map(y=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[tw(y.type),e.jsx("span",{className:"capitalize",children:y.type.replace("-"," ")})]}),e.jsx("span",{className:"font-medium",children:y.count})]},y.type))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"AI Performance"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-Fix Success Rate"}),e.jsxs("span",{className:"text-2xl font-bold",children:[l==null?void 0:l.autoFixSuccessRate,"%"]})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${l==null?void 0:l.autoFixSuccessRate}%`}})})]})})]})]})})]})]})}const tde=Object.freeze(Object.defineProperty({__proto__:null,default:RU},Symbol.toStringTag,{value:"Module"}));function sde(){const[t,s]=b.useState(""),[n,r]=b.useState("weekly"),a=[{id:1,name:"Pool Cleaning Schedule",frequency:"Weekly",nextRun:"2025-01-22 10:00",department:"pool",taskTemplate:"Pool cleaning and chemical balance check",assignedTo:"Pool Team",property:"All Properties",status:"active",lastGenerated:"2025-01-15 10:00",tasksCreated:12},{id:2,name:"Deep Cleaning Rotation",frequency:"Monthly",nextRun:"2025-01-25 09:00",department:"cleaning",taskTemplate:"Deep cleaning of property including all rooms",assignedTo:"Housekeeping Team",property:"Villa Samui Breeze",status:"active",lastGenerated:"2024-12-25 09:00",tasksCreated:8},{id:3,name:"Garden Maintenance",frequency:"Bi-weekly",nextRun:"2025-01-23 08:00",department:"garden",taskTemplate:"Garden pruning, watering, and landscaping maintenance",assignedTo:"Garden Team",property:"Villa Aruna",status:"paused",lastGenerated:"2025-01-09 08:00",tasksCreated:15},{id:4,name:"AC System Inspection",frequency:"Monthly",nextRun:"2025-01-28 14:00",department:"maintenance",taskTemplate:"Air conditioning system inspection and filter replacement",assignedTo:"Maintenance Team",property:"All Properties",status:"active",lastGenerated:"2024-12-28 14:00",tasksCreated:6},{id:5,name:"Wi-Fi & Tech Check",frequency:"Weekly",nextRun:"2025-01-24 16:00",department:"general",taskTemplate:"Internet connectivity and smart device functionality check",assignedTo:"Tech Support",property:"All Properties",status:"active",lastGenerated:"2025-01-17 16:00",tasksCreated:20}],i=[{id:1,title:"Pool Cleaning - Villa Samui Breeze",generatedBy:"Pool Cleaning Schedule",createdAt:"2025-01-21 10:00",assignedTo:"Pool Team",dueDate:"2025-01-21 15:00",status:"pending",department:"pool"},{id:2,title:"Wi-Fi Check - Villa Aruna",generatedBy:"Wi-Fi & Tech Check",createdAt:"2025-01-21 16:00",assignedTo:"Tech Support",dueDate:"2025-01-21 17:00",status:"in-progress",department:"general"},{id:3,title:"Deep Cleaning - Villa Paradise",generatedBy:"Deep Cleaning Rotation",createdAt:"2025-01-20 09:00",assignedTo:"Housekeeping Team",dueDate:"2025-01-20 17:00",status:"completed",department:"cleaning"}],l=d=>{switch(d){case"pool":return"bg-blue-100 text-blue-800";case"cleaning":return"bg-green-100 text-green-800";case"garden":return"bg-emerald-100 text-emerald-800";case"maintenance":return"bg-orange-100 text-orange-800";case"general":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},o=d=>{switch(d){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},c={activeRules:a.filter(d=>d.status==="active").length,totalTasksGenerated:a.reduce((d,u)=>d+u.tasksCreated,0),pendingTasks:i.filter(d=>d.status==="pending").length,completedTasks:i.filter(d=>d.status==="completed").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(wD,{className:"w-8 h-8"}),"Auto-Schedule Task Generator"]}),e.jsx("p",{className:"text-gray-600",children:"Automate recurring task creation with smart scheduling rules"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Global Settings"]}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Create Rule"]})]})]}),e.jsxs(ft,{defaultValue:"rules",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"rules",children:"Scheduling Rules"}),e.jsx(ae,{value:"tasks",children:"Generated Tasks"}),e.jsx(ae,{value:"analytics",children:"Analytics"}),e.jsx(ae,{value:"settings",children:"System Settings"})]}),e.jsxs(ie,{value:"rules",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Rules"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.activeRules})]}),e.jsx(mm,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tasks Generated"}),e.jsx("p",{className:"text-2xl font-bold",children:c.totalTasksGenerated})]}),e.jsx(wD,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.pendingTasks})]}),e.jsx(et,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.completedTasks})]}),e.jsx(tt,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Create New Scheduling Rule"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsx(G,{placeholder:"Rule name",value:t,onChange:d=>s(d.target.value)}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"bi-weekly",children:"Bi-weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs(se,{defaultValue:"all",children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(A,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(A,{value:"villa-paradise",children:"Villa Paradise"})]})]}),e.jsxs(se,{defaultValue:"cleaning",children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Department"})}),e.jsxs(te,{children:[e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"pool",children:"Pool"}),e.jsx(A,{value:"garden",children:"Garden"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"general",children:"General"})]})]}),e.jsx(G,{placeholder:"Assigned to"}),e.jsx(M,{children:"Create Rule"})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Active Scheduling Rules"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:a.map(d=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600",children:d.taskTemplate})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:o(d.status),children:d.status}),e.jsx(z,{className:l(d.department),children:d.department})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Frequency"}),e.jsx("p",{className:"text-sm font-medium",children:d.frequency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Run"}),e.jsx("p",{className:"text-sm font-medium",children:d.nextRun})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Assigned To"}),e.jsx("p",{className:"text-sm font-medium",children:d.assignedTo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Property"}),e.jsx("p",{className:"text-sm font-medium",children:d.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tasks Created"}),e.jsx("p",{className:"text-sm font-medium",children:d.tasksCreated})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:e.jsxs("span",{children:["Last generated: ",d.lastGenerated]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(jr,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(M,{variant:"outline",size:"sm",children:d.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(PX,{className:"w-3 h-3 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(mm,{className:"w-3 h-3 mr-1"}),"Resume"]})}),e.jsxs(M,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-800",children:[e.jsx(LX,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]},d.id))})})]})]}),e.jsx(ie,{value:"tasks",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recently Generated Tasks"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:i.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Generated by: ",d.generatedBy]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",d.createdAt,"  Due: ",d.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:l(d.department),children:d.department}),e.jsx(z,{className:o(d.status),children:d.status}),e.jsx("span",{className:"text-sm text-gray-600",children:d.assignedTo})]})]},d.id))})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Task Generation by Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pool"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"12"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"General"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"33%"}})}),e.jsx("span",{className:"text-sm",children:"20"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Garden"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"15"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Cleaning"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"13%"}})}),e.jsx("span",{className:"text-sm",children:"8"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maintenance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"10%"}})}),e.jsx("span",{className:"text-sm",children:"6"})]})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Completion Rate by Rule"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"94%"}),e.jsx("p",{className:"text-gray-600",children:"Average Completion Rate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Pool Cleaning Schedule"}),e.jsx("span",{className:"font-semibold text-green-600",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Wi-Fi & Tech Check"}),e.jsx("span",{className:"font-semibold text-green-600",children:"95%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Deep Cleaning Rotation"}),e.jsx("span",{className:"font-semibold text-green-600",children:"88%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"AC System Inspection"}),e.jsx("span",{className:"font-semibold text-orange-600",children:"83%"})]})]})]})})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Global System Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Task Generation"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-generate tasks"}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Skip holidays"}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Weekend generation"}),e.jsx(At,{})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Notifications"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Rule creation alerts"}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Task generation alerts"}),e.jsx(At,{})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed generation alerts"}),e.jsx(At,{defaultChecked:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Default Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default Assignment"}),e.jsx(G,{placeholder:"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Task Due Hours"}),e.jsx(G,{type:"number",placeholder:"24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Priority Level"}),e.jsxs(se,{defaultValue:"medium",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"low",children:"Low"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"urgent",children:"Urgent"})]})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function nde(){const[t,s]=b.useState("all"),[n,r]=b.useState("all"),[a,i]=b.useState("month"),[l,o]=b.useState({minRevenue:"",maxRevenue:"",minBookings:"",dateFrom:"",dateTo:""}),c=[{name:"Airbnb",totalBookings:45,grossRevenue:67500,hostFee:3375,guestServiceFee:8100,netPayout:64125,averageNightly:1500,commissionRate:5,color:"bg-red-100 text-red-800"},{name:"Booking.com",totalBookings:32,grossRevenue:52800,hostFee:7920,guestServiceFee:0,netPayout:44880,averageNightly:1650,commissionRate:15,color:"bg-blue-100 text-blue-800"},{name:"VRBO",totalBookings:28,grossRevenue:47600,hostFee:3808,guestServiceFee:4760,netPayout:43792,averageNightly:1700,commissionRate:8,color:"bg-yellow-100 text-yellow-800"},{name:"Expedia",totalBookings:15,grossRevenue:24750,hostFee:4455,guestServiceFee:0,netPayout:20295,averageNightly:1650,commissionRate:18,color:"bg-purple-100 text-purple-800"}],d=[{property:"Villa Samui Breeze",airbnb:{bookings:18,gross:27e3,net:25650},booking:{bookings:12,gross:19800,net:16830},vrbo:{bookings:10,gross:17e3,net:15640},expedia:{bookings:5,gross:8250,net:6765},total:{bookings:45,gross:72050,net:64885}},{property:"Villa Aruna",airbnb:{bookings:15,gross:22500,net:21375},booking:{bookings:10,gross:16500,net:14025},vrbo:{bookings:8,gross:13600,net:12512},expedia:{bookings:4,gross:6600,net:5412},total:{bookings:37,gross:59200,net:53324}},{property:"Villa Paradise",airbnb:{bookings:12,gross:18e3,net:17100},booking:{bookings:10,gross:16500,net:14025},vrbo:{bookings:10,gross:17e3,net:15640},expedia:{bookings:6,gross:9900,net:8118},total:{bookings:38,gross:61400,net:54883}}],u=[{month:"Oct 2024",airbnb:21500,booking:16200,vrbo:14800,expedia:7200},{month:"Nov 2024",airbnb:22800,booking:17100,vrbo:15600,expedia:8100},{month:"Dec 2024",airbnb:23200,booking:17900,vrbo:16200,expedia:8400},{month:"Jan 2025",airbnb:24e3,booking:18400,vrbo:16800,expedia:9e3}],m=c.reduce((j,g)=>j+g.grossRevenue,0),h=c.reduce((j,g)=>j+g.netPayout,0),x=m-h,p=x/m*100,f=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ru,{className:"w-8 h-8"}),"OTA Revenue & Net Payout Calculation"]}),e.jsx("p",{className:"text-gray-600",children:"Analyze commission structures and actual payouts across booking platforms"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]}),e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Filters & Property Selection"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Property"}),e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"villa-samui-breeze",children:"Villa Samui Breeze"}),e.jsx(A,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(A,{value:"villa-paradise",children:"Villa Paradise"}),e.jsx(A,{value:"villa-tropical",children:"Villa Tropical"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"OTA Platform"}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select platform"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Platforms"}),e.jsx(A,{value:"airbnb",children:"Airbnb"}),e.jsx(A,{value:"booking",children:"Booking.com"}),e.jsx(A,{value:"vrbo",children:"VRBO"}),e.jsx(A,{value:"expedia",children:"Expedia"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time Period"}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select period"})}),e.jsxs(te,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"}),e.jsx(A,{value:"custom",children:"Custom Range"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Bookings"}),e.jsx(G,{type:"number",placeholder:"e.g. 10",value:l.minBookings,onChange:j=>o({...l,minBookings:j.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Revenue ($)"}),e.jsx(G,{type:"number",placeholder:"e.g. 5000",value:l.minRevenue,onChange:j=>o({...l,minRevenue:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Revenue ($)"}),e.jsx(G,{type:"number",placeholder:"e.g. 50000",value:l.maxRevenue,onChange:j=>o({...l,maxRevenue:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date From"}),e.jsx(G,{type:"date",value:l.dateFrom,onChange:j=>o({...l,dateFrom:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date To"}),e.jsx(G,{type:"date",value:l.dateTo,onChange:j=>o({...l,dateTo:j.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(M,{onClick:()=>{console.log("Filters applied:",l,t,n,a)},children:"Apply Filters"}),e.jsx(M,{variant:"outline",onClick:()=>{o({minRevenue:"",maxRevenue:"",minBookings:"",dateFrom:"",dateTo:""}),s("all"),r("all"),i("month")},children:"Clear Filters"}),e.jsxs(z,{variant:"outline",className:"ml-2 px-3 py-1",children:[t==="all"?"All Properties":t," ",n==="all"?"All Platforms":n," ",a]})]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"overview",children:"Revenue Overview"}),e.jsx(ae,{value:"platforms",children:"Platform Analysis"}),e.jsx(ae,{value:"properties",children:"Property Breakdown"}),e.jsx(ae,{value:"trends",children:"Monthly Trends"}),e.jsx(ae,{value:"calculator",children:"Payout Calculator"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Gross Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:f(m)})]}),e.jsx(Je,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Payout Received"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f(h)})]}),e.jsx(Bt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Commission Loss"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:f(x)})]}),e.jsx(DX,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Commission Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[p.toFixed(1),"%"]})]}),e.jsx(pn,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(A,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(A,{value:"villa-paradise",children:"Villa Paradise"})]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Platforms"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Platforms"}),e.jsx(A,{value:"airbnb",children:"Airbnb"}),e.jsx(A,{value:"booking",children:"Booking.com"}),e.jsx(A,{value:"vrbo",children:"VRBO"}),e.jsx(A,{value:"expedia",children:"Expedia"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"This Month"})}),e.jsxs(te,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Revenue vs Payout Comparison"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c.map(j=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:j.color,children:j.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[j.commissionRate,"% commission"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:f(j.netPayout)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["from ",f(j.grossRevenue)]})]})]}),e.jsxs("div",{className:"flex gap-1 h-3",children:[e.jsx("div",{className:"bg-green-400 rounded-l",style:{width:`${j.netPayout/j.grossRevenue*100}%`}}),e.jsx("div",{className:"bg-red-400 rounded-r",style:{width:`${j.hostFee/j.grossRevenue*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Net Payout: ",(j.netPayout/j.grossRevenue*100).toFixed(1),"%"]}),e.jsxs("span",{children:["Commission: ",(j.hostFee/j.grossRevenue*100).toFixed(1),"%"]})]})]},j.name))})})]})]}),e.jsx(ie,{value:"platforms",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(j=>e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsx(z,{className:j.color,children:j.name}),e.jsxs("span",{className:"text-lg font-bold",children:[j.commissionRate,"%"]})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-xl font-bold",children:j.totalBookings})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Nightly Rate"}),e.jsx("p",{className:"text-xl font-bold",children:f(j.averageNightly)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Gross Revenue"}),e.jsx("span",{className:"font-medium",children:f(j.grossRevenue)})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsxs("span",{className:"text-sm",children:["Host Fee (",j.commissionRate,"%)"]}),e.jsxs("span",{className:"font-medium",children:["-",f(j.hostFee)]})]}),j.guestServiceFee>0&&e.jsxs("div",{className:"flex justify-between text-orange-600",children:[e.jsx("span",{className:"text-sm",children:"Guest Service Fee"}),e.jsxs("span",{className:"font-medium",children:["-",f(j.guestServiceFee)]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-green-600 font-bold",children:[e.jsx("span",{children:"Net Payout"}),e.jsx("span",{children:f(j.netPayout)})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payout Efficiency"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[(j.netPayout/j.grossRevenue*100).toFixed(1),"%"]})]})})]})]},j.name))})}),e.jsx(ie,{value:"properties",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Revenue Breakdown by Property"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-6",children:d.map(j=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-4",children:j.property}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Airbnb"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.airbnb.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:f(j.airbnb.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",f(j.airbnb.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Booking.com"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.booking.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:f(j.booking.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",f(j.booking.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"VRBO"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.vrbo.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:f(j.vrbo.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",f(j.vrbo.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Expedia"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.expedia.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:f(j.expedia.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",f(j.expedia.gross)]})]}),e.jsxs("div",{className:"space-y-2 border-l pl-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.total.bookings," bookings"]}),e.jsx("p",{className:"font-bold text-green-600",children:f(j.total.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",f(j.total.gross)]})]})]})]},j.property))})})]})}),e.jsx(ie,{value:"trends",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Monthly Revenue Trends"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:u.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:j.month})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 font-medium",children:f(j.airbnb)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Airbnb"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-600 font-medium",children:f(j.booking)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Booking.com"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-yellow-600 font-medium",children:f(j.vrbo)}),e.jsx("p",{className:"text-xs text-gray-500",children:"VRBO"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-purple-600 font-medium",children:f(j.expedia)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expedia"})]}),e.jsxs("div",{className:"text-center border-l pl-4",children:[e.jsx("p",{className:"text-green-600 font-bold",children:f(j.airbnb+j.booking+j.vrbo+j.expedia)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total"})]})]})]},j.month))})})]})}),e.jsx(ie,{value:"calculator",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Payout Calculator"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Booking Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Guest Total Payment"}),e.jsx(G,{type:"number",placeholder:"1500.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"OTA Platform"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select platform"})}),e.jsxs(te,{children:[e.jsx(A,{value:"airbnb",children:"Airbnb (5%)"}),e.jsx(A,{value:"booking",children:"Booking.com (15%)"}),e.jsx(A,{value:"vrbo",children:"VRBO (8%)"}),e.jsx(A,{value:"expedia",children:"Expedia (18%)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Custom Commission Rate (%)"}),e.jsx(G,{type:"number",placeholder:"5.0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Calculated Payout"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Guest Payment:"}),e.jsx("span",{className:"font-medium",children:"$1,500.00"})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Platform Commission (5%):"}),e.jsx("span",{className:"font-medium",children:"-$75.00"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-green-600 font-bold",children:[e.jsx("span",{children:"Your Net Payout:"}),e.jsx("span",{children:"$1,425.00"})]}),e.jsx("div",{className:"text-center pt-2",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Payout Efficiency: 95.0%"})})]})]})]}),e.jsx(M,{className:"w-full",children:"Calculate Payout"})]})]})})]})]})}const rde=()=>{const[t,s]=b.useState("overview"),[n,r]=b.useState(null),[a,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,m]=b.useState({otaPlatform:"",payoutStatus:"",dateRange:""}),h=yt(),{data:x,isLoading:p}=ye({queryKey:["/api/ota-payout/bookings",u],queryFn:()=>ve("GET","/api/ota-payout/bookings"),retry:!1}),f=Array.isArray(x)?x:[],{data:j,isLoading:g}=ye({queryKey:["/api/ota-payout/alerts"],queryFn:()=>ve("GET","/api/ota-payout/alerts"),retry:!1}),y=Array.isArray(j)?j:[],{data:v,isLoading:w}=ye({queryKey:["/api/ota-payout/analytics"],queryFn:()=>ve("GET","/api/ota-payout/analytics"),retry:!1}),N=Ee({mutationFn:_=>ve(`/api/ota-payout/bookings/${_}/confirm`,{method:"PUT"}).then(U=>U.json()),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/ota-payout/bookings"]}),h.invalidateQueries({queryKey:["/api/ota-payout/analytics"]})}});Ee({mutationFn:({payoutId:_,data:U})=>ve(`/api/ota-payout/bookings/${_}/override`,{method:"PUT",body:JSON.stringify(U),headers:{"Content-Type":"application/json"}}).then(H=>H.json()),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/ota-payout/bookings"]}),h.invalidateQueries({queryKey:["/api/ota-payout/analytics"]}),i(!1),r(null)}});const S=Ee({mutationFn:({alertId:_,resolutionNotes:U})=>ve(`/api/ota-payout/alerts/${_}/resolve`,{method:"PUT",body:JSON.stringify({resolutionNotes:U}),headers:{"Content-Type":"application/json"}}).then(H=>H.json()),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/ota-payout/alerts"]}),o(!1),d(null)}}),k=_=>{switch(_.toLowerCase()){case"airbnb":return"";case"booking_com":return"";case"vrbo":return"";case"direct":return"";default:return""}},T=_=>{switch(_){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"received":return"bg-blue-100 text-blue-800";case"discrepancy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=_=>{switch(_){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},P=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"col-span-full",children:e.jsxs(li,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Et,{className:"h-4 w-4 text-orange-600"}),e.jsx(jU,{className:"text-orange-800",children:"Revenue Calculation Notice"}),e.jsx(oi,{className:"text-orange-700",children:"All internal calculations (fees, commissions, splits) are based on net received payout. OTA commissions are not part of your earnings."})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Net Payout"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v&&v.totalNetPayout!=null?Ba(v.totalNetPayout,"THB"):"0"})]}),e.jsx(Bt,{className:"h-8 w-8 text-green-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Actual revenue after OTA commissions"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"OTA Commissions"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:v&&v.totalOtaCommissions!=null?Ba(v.totalOtaCommissions,"THB"):"0"})]}),e.jsx(Ed,{className:"h-8 w-8 text-red-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Total platform fees deducted"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Commission Rate"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v&&v.averageOtaCommissionRate!=null?`${v.averageOtaCommissionRate.toFixed(1)}%`:"0.0%"})]}),e.jsx(ap,{className:"h-8 w-8 text-blue-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Across all platforms"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:v&&v.totalBookings!=null?v.totalBookings:"0"})]}),e.jsx(tt,{className:"h-8 w-8 text-purple-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"All tracked reservations"})]})}),e.jsx("div",{className:"col-span-full",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-5 w-5"}),"Platform Revenue Breakdown"]}),e.jsx(Me,{children:"Revenue distribution by OTA platform showing guest payments vs net payouts"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v!=null&&v.platformBreakdown&&Array.isArray(v.platformBreakdown)?v.platformBreakdown.map(_=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx("span",{children:k(_.platform)}),_.platform.replace("_",".")]}),e.jsxs(z,{variant:"outline",children:[_.bookingCount," bookings"]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Paid:"}),e.jsx("span",{className:"font-medium",children:_.totalGuestPayments!=null?Ba(_.totalGuestPayments,"THB"):"0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payout:"}),e.jsx("span",{className:"font-medium text-green-600",children:_.totalNetPayouts!=null?Ba(_.totalNetPayouts,"THB"):"0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Commission:"}),e.jsxs("span",{className:"font-medium text-red-600",children:[_.averageCommissionRate!=null?_.averageCommissionRate.toFixed(1):"0.0","%"]})]})]})]},_.platform)):e.jsx("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"No platform data available"})})})]})})]}),$=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Zi,{className:"h-5 w-5"}),"Filter Booking Payouts"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"platform-filter",children:"OTA Platform"}),e.jsxs(se,{value:u.otaPlatform,onValueChange:_=>m(U=>({...U,otaPlatform:_})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All platforms"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All platforms"}),e.jsx(A,{value:"airbnb",children:"Airbnb"}),e.jsx(A,{value:"booking_com",children:"Booking.com"}),e.jsx(A,{value:"vrbo",children:"VRBO"}),e.jsx(A,{value:"direct",children:"Direct"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"status-filter",children:"Payout Status"}),e.jsxs(se,{value:u.payoutStatus,onValueChange:_=>m(U=>({...U,payoutStatus:_})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All statuses"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All statuses"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"confirmed",children:"Confirmed"}),e.jsx(A,{value:"received",children:"Received"}),e.jsx(A,{value:"discrepancy",children:"Discrepancy"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(M,{variant:"outline",onClick:()=>m({otaPlatform:"",payoutStatus:"",dateRange:""}),className:"w-full",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Reset Filters"]})})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5"}),"Booking Payouts"]}),e.jsxs(z,{variant:"outline",children:[f.length," records"]})]}),e.jsx(Me,{children:"Track all booking payouts with transparent OTA commission deductions"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:p?e.jsx("div",{className:"text-center py-8",children:"Loading payouts..."}):f.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No payouts found"}):f.map(_=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:k(_.otaPlatform)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:_.guestName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.reservationCode,"  ",_.propertyName]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Paid:"}),e.jsx("p",{className:"font-medium",children:_.guestPaidAmount?Ba(parseFloat(_.guestPaidAmount),_.currency):"0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"OTA Commission:"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",_.otaCommissionAmount?Ba(parseFloat(_.otaCommissionAmount),_.currency):"0","(",_.otaCommissionRate,"%)"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payout:"}),e.jsx("p",{className:"font-semibold text-green-600",children:_.netPayoutAmount?Ba(parseFloat(_.netPayoutAmount),_.currency):"0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(z,{className:T(_.payoutStatus),children:_.payoutStatus})]})]}),_.manualOverride&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-600",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Manual override applied: ",_.overrideReason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[_.payoutStatus==="pending"&&e.jsxs(M,{size:"sm",onClick:()=>N.mutate(_.id),disabled:N.isPending,children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Confirm"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{r(_),i(!0)},children:[e.jsx(AX,{className:"h-4 w-4 mr-1"}),"Override"]})]})]})},_.id))})})]})]}),V=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),"Payout Alerts & Issues"]}),e.jsx(Me,{children:"Monitor payout discrepancies and manual review requirements"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:g?e.jsx("div",{className:"text-center py-8",children:"Loading alerts..."}):y.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No alerts found"}):y.map(_=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:C(_.severity),children:_.severity}),e.jsx(z,{variant:"outline",children:_.alertType}),_.isResolved&&e.jsx(z,{className:"bg-green-100 text-green-800",children:"Resolved"})]}),e.jsx("p",{className:"font-medium",children:_.alertMessage}),_.booking&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Related to: ",_.booking.guestName," (",_.booking.reservationCode,")"]}),_.isResolved&&_.resolutionNotes&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 text-sm",children:[e.jsx("p",{className:"font-medium text-green-800",children:"Resolution:"}),e.jsx("p",{className:"text-green-700",children:_.resolutionNotes})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!_.isResolved&&e.jsxs(M,{size:"sm",onClick:()=>{d(_),o(!0)},children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Resolve"]}),e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),"View"]})]})]})},_.id))})})]})}),I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"Monthly Revenue Trends"]}),e.jsx(Me,{children:"Track guest payments vs net payouts over time"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:v!=null&&v.monthlyTrends&&Array.isArray(v.monthlyTrends)?v.monthlyTrends.map(_=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:_.month}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Commission Impact: ",_.otaCommissions!=null?Ba(_.otaCommissions,"THB"):"0"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Payments:"}),e.jsx("p",{className:"font-medium",children:_.guestPayments!=null?Ba(_.guestPayments,"THB"):"0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payouts:"}),e.jsx("p",{className:"font-medium text-green-600",children:_.netPayouts!=null?Ba(_.netPayouts,"THB"):"0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Loss Ratio:"}),e.jsxs("p",{className:"font-medium text-red-600",children:[_.otaCommissions!=null&&_.guestPayments!=null&&_.guestPayments>0?(_.otaCommissions/_.guestPayments*100).toFixed(1):"0.0","%"]})]})]})]},_.month)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No trend data available"})})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ap,{className:"h-5 w-5"}),"Payout Status Distribution"]})}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v!=null&&v.payoutStatusBreakdown&&Array.isArray(v.payoutStatusBreakdown)?v.payoutStatusBreakdown.map(_=>e.jsxs("div",{className:"border rounded-lg p-4 text-center",children:[e.jsx(z,{className:T(_.status),variant:"outline",children:_.status}),e.jsx("p",{className:"font-semibold text-lg mt-2",children:_.count}),e.jsx("p",{className:"text-sm text-muted-foreground",children:_.totalAmount!=null?Ba(_.totalAmount,"THB"):"0"})]},_.status)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No status breakdown data available"})})})]})]});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ns,{className:"h-8 w-8 text-yellow-600"}),"OTA Payout Logic  Smart Revenue Tracking"]}),e.jsx("p",{className:"text-lg text-gray-600 mt-2",children:"Comprehensive revenue transparency with dual pricing logic for accurate financial reporting"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Export Report"]}),e.jsxs(M,{children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Configure Rules"]})]})]})}),e.jsxs(ft,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsxs(ae,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(Vn,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(ae,{value:"payouts",className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Payouts"]}),e.jsxs(ae,{value:"alerts",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),"Alerts"]}),e.jsxs(ae,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-4 w-4"}),"Analytics"]})]}),e.jsx(ie,{value:"overview",children:e.jsx(P,{})}),e.jsx(ie,{value:"payouts",children:e.jsx($,{})}),e.jsx(ie,{value:"alerts",children:e.jsx(V,{})}),e.jsx(ie,{value:"analytics",children:e.jsx(I,{})})]}),e.jsx(Ke,{open:a,onOpenChange:i,children:e.jsxs(Ye,{className:"max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Override Payout Calculation"}),e.jsxs(Rt,{children:["Manually adjust payout amounts for booking ",n==null?void 0:n.reservationCode]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"net-payout",children:"Net Payout Amount (THB)"}),e.jsx(G,{id:"net-payout",type:"number",defaultValue:n==null?void 0:n.netPayoutAmount,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"commission-amount",children:"OTA Commission Amount (THB)"}),e.jsx(G,{id:"commission-amount",type:"number",defaultValue:n==null?void 0:n.otaCommissionAmount,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"commission-rate",children:"OTA Commission Rate (%)"}),e.jsx(G,{id:"commission-rate",type:"number",defaultValue:n==null?void 0:n.otaCommissionRate,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"override-reason",children:"Override Reason"}),e.jsx(mt,{id:"override-reason",placeholder:"Explain why this override is necessary...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{children:"Apply Override"})]})]})]})}),e.jsx(Ke,{open:l,onOpenChange:o,children:e.jsxs(Ye,{className:"max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Resolve Alert"}),e.jsx(Rt,{children:"Mark this alert as resolved and add resolution notes"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border rounded p-3",children:[e.jsx("p",{className:"font-medium",children:c==null?void 0:c.alertMessage}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Type: ",c==null?void 0:c.alertType,"  Severity: ",c==null?void 0:c.severity]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"resolution-notes",children:"Resolution Notes"}),e.jsx(mt,{id:"resolution-notes",placeholder:"Describe how this issue was resolved...",rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>{var _;if(c){const U=(_=document.getElementById("resolution-notes"))==null?void 0:_.value;S.mutate({alertId:c.id,resolutionNotes:U})}},disabled:S.isPending,children:S.isPending?"Resolving...":"Mark Resolved"})]})]})]})})]})})};function zE(){const[t,s]=b.useState(""),[n,r]=b.useState("all"),[a,i]=b.useState("all"),l=[{name:"Bronze",color:"bg-orange-100 text-orange-800",minStays:1,benefits:["Welcome drink","Late checkout"]},{name:"Silver",color:"bg-gray-100 text-gray-800",minStays:3,benefits:["Room upgrade","Spa discount 10%","Priority booking"]},{name:"Gold",color:"bg-yellow-100 text-yellow-800",minStays:5,benefits:["Free breakfast","Airport transfer","Spa discount 20%"]},{name:"Platinum",color:"bg-purple-100 text-purple-800",minStays:10,benefits:["Free night after 5 stays","Concierge service","Spa discount 30%"]}],o=[{id:1,name:"Sarah Johnson",email:"sarah.johnson@email.com",tier:"Platinum",totalStays:12,totalSpent:18500,lastStay:"2024-12-15",nextBooking:"2025-02-10",favoriteProperty:"Villa Samui Breeze",preferences:["Ocean view","Late checkout","Spa services"],pointsBalance:2400,rewardsEarned:8,status:"active",joinDate:"2023-01-15"},{id:2,name:"Michael Chen",email:"m.chen@business.com",tier:"Gold",totalStays:8,totalSpent:12800,lastStay:"2025-01-05",nextBooking:"2025-03-20",favoriteProperty:"Villa Aruna",preferences:["Pool access","Business center","Early checkin"],pointsBalance:1850,rewardsEarned:5,status:"active",joinDate:"2023-06-20"},{id:3,name:"Emma Williams",email:"emma.w@travel.com",tier:"Silver",totalStays:4,totalSpent:6200,lastStay:"2024-11-28",nextBooking:null,favoriteProperty:"Villa Paradise",preferences:["Garden view","Yoga space","Healthy meals"],pointsBalance:920,rewardsEarned:2,status:"active",joinDate:"2024-03-10"},{id:4,name:"David Kim",email:"david.kim@startup.io",tier:"Bronze",totalStays:2,totalSpent:3100,lastStay:"2024-08-15",nextBooking:null,favoriteProperty:"Villa Samui Breeze",preferences:["WiFi","Workspace","Coffee machine"],pointsBalance:465,rewardsEarned:1,status:"inactive",joinDate:"2024-07-05"},{id:5,name:"Lisa Anderson",email:"lisa.anderson@family.com",tier:"Gold",totalStays:6,totalSpent:9800,lastStay:"2024-12-30",nextBooking:"2025-04-15",favoriteProperty:"Villa Paradise",preferences:["Family rooms","Pool safety","Kids activities"],pointsBalance:1470,rewardsEarned:4,status:"active",joinDate:"2023-11-08"}],c=[{id:1,guestName:"Sarah Johnson",activity:"Earned 150 points from Villa Samui Breeze stay",date:"2024-12-15",type:"points_earned"},{id:2,guestName:"Michael Chen",activity:"Redeemed free spa treatment (500 points)",date:"2025-01-05",type:"reward_redeemed"},{id:3,guestName:"Emma Williams",activity:"Upgraded to Silver tier (4 stays completed)",date:"2024-11-28",type:"tier_upgrade"},{id:4,guestName:"Lisa Anderson",activity:"Booked next stay with Gold tier benefits",date:"2024-12-30",type:"booking_made"}],d=x=>{switch(x){case"Bronze":return e.jsx(Fk,{className:"w-4 h-4"});case"Silver":return e.jsx(ks,{className:"w-4 h-4"});case"Gold":return e.jsx(ri,{className:"w-4 h-4"});case"Platinum":return e.jsx(Jc,{className:"w-4 h-4"});default:return e.jsx(dt,{className:"w-4 h-4"})}},u=x=>{switch(x){case"Bronze":return"bg-orange-100 text-orange-800";case"Silver":return"bg-gray-100 text-gray-800";case"Gold":return"bg-yellow-100 text-yellow-800";case"Platinum":return"bg-purple-100 text-purple-800";default:return"bg-blue-100 text-blue-800"}},m=x=>x==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",h={totalGuests:o.length,activeGuests:o.filter(x=>x.status==="active").length,totalPointsIssued:o.reduce((x,p)=>x+p.pointsBalance,0),averageStays:(o.reduce((x,p)=>x+p.totalStays,0)/o.length).toFixed(1)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(dm,{className:"w-8 h-8"}),"Loyalty Guest Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track guest loyalty, rewards, and retention programs"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(ip,{className:"w-4 h-4 mr-2"}),"Send Rewards"]}),e.jsxs(M,{children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Add Guest"]})]})]}),e.jsxs(ft,{defaultValue:"guests",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"guests",children:"Loyalty Guests"}),e.jsx(ae,{value:"tiers",children:"Tier Management"}),e.jsx(ae,{value:"rewards",children:"Rewards Program"}),e.jsx(ae,{value:"analytics",children:"Analytics"}),e.jsx(ae,{value:"settings",children:"Program Settings"})]}),e.jsxs(ie,{value:"guests",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Loyalty Guests"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalGuests})]}),e.jsx(dt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.activeGuests})]}),e.jsx(dm,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Points Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.totalPointsIssued.toLocaleString()})]}),e.jsx(ks,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Stays per Guest"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:h.averageStays})]}),e.jsx(Bt,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(G,{placeholder:"Search guests...",value:t,onChange:x=>s(x.target.value)}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Tiers"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Tiers"}),e.jsx(A,{value:"Bronze",children:"Bronze"}),e.jsx(A,{value:"Silver",children:"Silver"}),e.jsx(A,{value:"Gold",children:"Gold"}),e.jsx(A,{value:"Platinum",children:"Platinum"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Loyalty Members"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[d(x.tier),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.email})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:u(x.tier),children:x.tier}),e.jsx(z,{className:m(x.status),children:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Stays"}),e.jsx("p",{className:"font-medium",children:x.totalStays})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Spent"}),e.jsxs("p",{className:"font-medium",children:["$",x.totalSpent.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Points Balance"}),e.jsx("p",{className:"font-medium text-purple-600",children:x.pointsBalance})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Stay"}),e.jsx("p",{className:"font-medium",children:x.lastStay})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Booking"}),e.jsx("p",{className:"font-medium",children:x.nextBooking||"None scheduled"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Rewards Earned"}),e.jsx("p",{className:"font-medium text-green-600",children:x.rewardsEarned})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preferences"}),e.jsx("div",{className:"flex gap-1",children:x.preferences.slice(0,3).map((p,f)=>e.jsx(z,{variant:"outline",className:"text-xs",children:p},f))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Profile"}),e.jsx(M,{variant:"outline",size:"sm",children:"Send Offer"})]})]})]},x.id))})})]})]}),e.jsx(ie,{value:"tiers",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(x=>e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d(x.name),e.jsxs("span",{children:[x.name," Tier"]})]}),e.jsxs(z,{className:x.color,children:[x.minStays,"+ stays"]})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Member Benefits:"}),e.jsx("ul",{className:"space-y-1",children:x.benefits.map((p,f)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx(ks,{className:"w-3 h-3 text-yellow-500"}),p]},f))})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Current Members: ",o.filter(p=>p.tier===x.name).length]})})]})]},x.name))})}),e.jsx(ie,{value:"rewards",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent Reward Activities"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ip,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.activity})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:x.date}),e.jsx(z,{variant:"outline",className:"text-xs",children:x.type.replace("_"," ")})]})]},x.id))})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Tier Distribution"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:l.map(x=>{const p=o.filter(j=>j.tier===x.name).length,f=(p/o.length*100).toFixed(1);return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[d(x.name),x.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${f}%`}})}),e.jsxs("span",{className:"text-sm w-12",children:[p," (",f,"%)"]})]})]},x.name)})})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Guest Retention Metrics"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"80%"}),e.jsx("p",{className:"text-gray-600",children:"Retention Rate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Repeat Bookings"}),e.jsx("span",{className:"font-semibold",children:"75%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Tier Progression"}),e.jsx("span",{className:"font-semibold",children:"65%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Referral Rate"}),e.jsx("span",{className:"font-semibold",children:"25%"})]})]})]})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Loyalty Program Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Points System"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Points per $1 spent"}),e.jsx(G,{type:"number",defaultValue:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Points expiry (months)"}),e.jsx(G,{type:"number",defaultValue:"24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Bonus points for reviews"}),e.jsx(G,{type:"number",defaultValue:"100"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Communication"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Welcome email"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Birthday offers"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Points expiry alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tier upgrade notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function qE(){const[t,s]=b.useState("all"),[n,r]=b.useState("all"),[a,i]=b.useState("month"),[l,o]=b.useState("invoices"),c=[{id:1,name:"Owner Revenue Share",description:"Monthly revenue distribution to property owners",defaultItems:["Booking Revenue Share","Management Fee","Maintenance Deduction","Utility Charges"]},{id:2,name:"Portfolio Manager Commission",description:"Commission payments to portfolio managers",defaultItems:["Management Commission","Performance Bonus","Override Commission"]},{id:3,name:"Agent Commission",description:"Commission payments to retail and referral agents",defaultItems:["Booking Commission","Referral Bonus","Performance Incentive"]},{id:4,name:"Service Provider Payment",description:"Payments to external service providers",defaultItems:["Service Fee","Materials Cost","Labor Charges"]},{id:5,name:"Expense Reimbursement",description:"Reimbursement for business expenses",defaultItems:["Travel Expenses","Material Purchases","Service Payments"]}],[d,u]=b.useState({invoiceNumber:"",clientType:"",clientName:"",property:"",template:"",issueDate:"",dueDate:"",description:"",items:[]}),[m,h]=b.useState({description:"",amount:""}),x=[{id:"INV-2025-001",clientName:"John Smith",clientType:"Owner",property:"Villa Samui Breeze",issueDate:"2025-01-15",dueDate:"2025-02-14",amount:2450,status:"paid",description:"December 2024 Revenue Share",items:[{description:"Booking Revenue (70% share)",amount:2100},{description:"Management Fee",amount:-150},{description:"Cleaning Services",amount:-75},{description:"Utility Charges",amount:-125},{description:"Platform Fees",amount:600}]},{id:"INV-2025-002",clientName:"Sarah Wilson",clientType:"Portfolio Manager",property:"Multiple Properties",issueDate:"2025-01-18",dueDate:"2025-02-17",amount:3200,status:"pending",description:"January 2025 Commission Payment",items:[{description:"Management Commission (15%)",amount:2800},{description:"Performance Bonus",amount:400}]},{id:"INV-2025-003",clientName:"Mike Chen",clientType:"Retail Agent",property:"Villa Aruna",issueDate:"2025-01-20",dueDate:"2025-02-19",amount:850,status:"overdue",description:"December 2024 Booking Commission",items:[{description:"Booking Commission (10%)",amount:750},{description:"Referral Bonus",amount:100}]},{id:"INV-2025-004",clientName:"HostPilotPro Management",clientType:"Internal",property:"Villa Paradise",issueDate:"2025-01-21",dueDate:"2025-02-20",amount:1200,status:"draft",description:"January 2025 Operating Expenses",items:[{description:"Staff Salaries",amount:800},{description:"Maintenance Costs",amount:250},{description:"Marketing Expenses",amount:150}]}],p=x.filter(P=>{const $=t==="all"||P.status===t,V=n==="all"||P.clientType===n,I=new Date(P.issueDate),_=new Date;let U=!0;if(a==="week"){const H=new Date(_.getTime()-6048e5);U=I>=H}else if(a==="month"){const H=new Date(_.getFullYear(),_.getMonth()-1,_.getDate());U=I>=H}else if(a==="quarter"){const H=new Date(_.getFullYear(),_.getMonth()-3,_.getDate());U=I>=H}else if(a==="year"){const H=new Date(_.getFullYear()-1,_.getMonth(),_.getDate());U=I>=H}return $&&V&&U}),f=P=>{switch(P){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},j=P=>{switch(P){case"Owner":return e.jsx(Ht,{className:"w-4 h-4"});case"Portfolio Manager":return e.jsx(Ft,{className:"w-4 h-4"});case"Retail Agent":return e.jsx(Ht,{className:"w-4 h-4"});case"Internal":return e.jsx(Ft,{className:"w-4 h-4"});default:return e.jsx(Ht,{className:"w-4 h-4"})}},g=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(P),y=()=>{m.description&&m.amount&&(u(P=>({...P,items:[...P.items,{description:m.description,amount:parseFloat(m.amount)}]})),h({description:"",amount:""}))},v=()=>{if(!d.clientName||!d.clientType||d.items.length===0){alert("Please fill in all required fields and add at least one line item.");return}const P={...d,id:d.invoiceNumber,amount:N(),status:"draft"};console.log("Creating invoice:",P),T(),o("invoices"),alert("Invoice created successfully!")},w=P=>{u($=>({...$,items:$.items.filter((V,I)=>I!==P)}))},N=()=>d.items.reduce((P,$)=>P+$.amount,0),S=P=>{const $=c.find(V=>V.name===P);if($){const V=$.defaultItems.map(I=>({description:I,amount:0}));u(I=>({...I,template:P,items:V}))}},k=()=>{const P=new Date().getFullYear(),$=String(new Date().getMonth()+1).padStart(2,"0"),V=String(x.length+1).padStart(3,"0");return`INV-${P}-${$}-${V}`},T=()=>{u({invoiceNumber:"",clientType:"",clientName:"",property:"",template:"",issueDate:"",dueDate:"",description:"",items:[]}),h({description:"",amount:""})},C={totalInvoices:x.length,totalAmount:x.reduce((P,$)=>P+$.amount,0),paidInvoices:x.filter(P=>P.status==="paid").length,overdueInvoices:x.filter(P=>P.status==="overdue").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(vt,{className:"w-8 h-8"}),"Invoice Generator"]}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and track invoices for owners, agents, and service providers"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{onClick:()=>{o("create"),d.invoiceNumber||u(P=>({...P,invoiceNumber:k(),issueDate:new Date().toISOString().split("T")[0]}))},children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"New Invoice"]})]})]}),e.jsxs(ft,{value:l,onValueChange:o,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"invoices",children:"All Invoices"}),e.jsx(ae,{value:"create",children:"Create Invoice"}),e.jsx(ae,{value:"templates",children:"Templates"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(ie,{value:"invoices",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold",children:C.totalInvoices})]}),e.jsx(vt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold",children:g(C.totalAmount)})]}),e.jsx(Je,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:C.paidInvoices})]}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Paid"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:C.overdueInvoices})]}),e.jsx(z,{className:"bg-red-100 text-red-800",children:"Overdue"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"draft",children:"Draft"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Clients"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Clients"}),e.jsx(A,{value:"Owner",children:"Owners"}),e.jsx(A,{value:"Portfolio Manager",children:"Portfolio Managers"}),e.jsx(A,{value:"Retail Agent",children:"Retail Agents"}),e.jsx(A,{value:"Internal",children:"Internal"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"This Month"})}),e.jsxs(te,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{children:"Recent Invoices"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",p.length," of ",x.length," invoices"]}),(t!=="all"||n!=="all"||a!=="month")&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{s("all"),r("all"),i("month")},children:"Clear Filters"})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:p.map(P=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[j(P.clientType),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:P.id}),e.jsx("p",{className:"text-sm text-gray-600",children:P.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:f(P.status),children:P.status}),e.jsx("span",{className:"font-bold text-green-600",children:g(P.amount)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Client"}),e.jsx("p",{className:"font-medium",children:P.clientName}),e.jsx("p",{className:"text-xs text-gray-500",children:P.clientType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Property"}),e.jsx("p",{className:"font-medium",children:P.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Issue Date"}),e.jsx("p",{className:"font-medium",children:P.issueDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:P.dueDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Line Items"}),e.jsxs("p",{className:"font-medium",children:[P.items.length," items"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-3 h-3"}),"Created: ",P.issueDate]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Gt,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),"PDF"]}),P.status==="draft"&&e.jsx(M,{size:"sm",children:"Send Invoice"})]})]})]},P.id))})})]})]}),e.jsx(ie,{value:"create",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Create New Invoice"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Invoice Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:d.invoiceNumber,onChange:P=>u({...d,invoiceNumber:P.target.value}),placeholder:"INV-2025-005"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>u({...d,invoiceNumber:k()}),children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Client Type"}),e.jsxs(se,{value:d.clientType,onValueChange:P=>u({...d,clientType:P}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select client type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"owner",children:"Property Owner"}),e.jsx(A,{value:"pm",children:"Portfolio Manager"}),e.jsx(A,{value:"agent",children:"Retail Agent"}),e.jsx(A,{value:"referral",children:"Referral Agent"}),e.jsx(A,{value:"vendor",children:"Service Provider"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Client Name"}),e.jsx(G,{value:d.clientName,onChange:P=>u({...d,clientName:P.target.value}),placeholder:"Enter client name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Property"}),e.jsxs(se,{value:d.property,onValueChange:P=>u({...d,property:P}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(A,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(A,{value:"villa-paradise",children:"Villa Paradise"}),e.jsx(A,{value:"multiple",children:"Multiple Properties"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Template"}),e.jsxs(se,{value:d.template,onValueChange:P=>{u({...d,template:P}),S(P)},children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select template"})}),e.jsx(te,{children:c.map(P=>e.jsx(A,{value:P.name,children:P.name},P.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Issue Date"}),e.jsx(G,{type:"date",value:d.issueDate,onChange:P=>u({...d,issueDate:P.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Due Date"}),e.jsx(G,{type:"date",value:d.dueDate,onChange:P=>u({...d,dueDate:P.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Description"}),e.jsx(G,{value:d.description,onChange:P=>u({...d,description:P.target.value}),placeholder:"Invoice description"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Line Items"}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(G,{value:m.description,onChange:P=>h({...m,description:P.target.value}),placeholder:"Description"}),e.jsx(G,{type:"number",value:m.amount,onChange:P=>h({...m,amount:P.target.value}),placeholder:"Amount"}),e.jsx(M,{variant:"outline",onClick:y,disabled:!m.description||!m.amount,children:"Add Item"})]}),d.items.length>0&&e.jsx("div",{className:"space-y-2 pt-3 border-t",children:d.items.map((P,$)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsx(G,{value:P.description,onChange:V=>{const I=[...d.items];I[$].description=V.target.value,u({...d,items:I})},className:"mb-1"})}),e.jsx("div",{className:"w-32 mx-2",children:e.jsx(G,{type:"number",value:P.amount,onChange:V=>{const I=[...d.items];I[$].amount=parseFloat(V.target.value)||0,u({...d,items:I})}})}),e.jsx(M,{variant:"destructive",size:"sm",onClick:()=>w($),children:"Remove"})]},$))}),d.items.length===0&&e.jsx("div",{className:"text-sm text-gray-600",children:d.template?"Template items loaded above. You can edit amounts or add new items.":"Add line items or select a template to populate default items"})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"text-lg font-bold",children:["Total: ",e.jsx("span",{className:"text-green-600",children:g(N())})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{variant:"outline",onClick:()=>{console.log("Saving invoice as draft:",d),alert("Invoice saved as draft")},children:"Save as Draft"}),e.jsx(M,{onClick:v,disabled:!d.invoiceNumber||!d.clientName||d.items.length===0,children:"Generate Invoice"}),e.jsx(M,{variant:"outline",onClick:T,children:"Clear Form"})]})]})]})]})}),e.jsx(ie,{value:"templates",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(P=>e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsx("span",{children:P.name}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{o("create"),S(P.name)},children:"Use Template"})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:P.description}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Default Line Items:"}),e.jsx("ul",{className:"space-y-1",children:P.defaultItems.map(($,V)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx(vt,{className:"w-3 h-3 text-gray-400"}),$]},V))})]})]})]},P.id))})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Invoice Status Distribution"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Paid"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pending"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Overdue"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Draft"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Monthly Invoice Totals"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:g(C.totalAmount)}),e.jsx("p",{className:"text-gray-600",children:"January 2025 Total"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Owners"}),e.jsx("span",{className:"font-semibold",children:"$2,450"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Portfolio Managers"}),e.jsx("span",{className:"font-semibold",children:"$3,200"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Agents"}),e.jsx("span",{className:"font-semibold",children:"$850"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Internal"}),e.jsx("span",{className:"font-semibold",children:"$1,200"})]})]})]})]})]})})]})]})}function ade(){const[t,s]=b.useState("all"),[n,r]=b.useState("all"),[a,i]=b.useState("month"),l=[{id:1,name:"Niran Thaksin",position:"Head Housekeeper",baseSalary:25e3,overtimeRate:150,currentAdvance:5e3,totalOvertime:32.5,overtimeEarnings:4875,status:"active",department:"housekeeping"},{id:2,name:"Somchai Patel",position:"Pool Maintenance",baseSalary:22e3,overtimeRate:135,currentAdvance:0,totalOvertime:15,overtimeEarnings:2025,status:"active",department:"maintenance"},{id:3,name:"Malee Kasem",position:"Guest Relations",baseSalary:28e3,overtimeRate:170,currentAdvance:8e3,totalOvertime:28,overtimeEarnings:4760,status:"active",department:"guest_services"},{id:4,name:"Kamon Saetang",position:"Security Guard",baseSalary:2e4,overtimeRate:120,currentAdvance:3e3,totalOvertime:45,overtimeEarnings:5400,status:"active",department:"security"},{id:5,name:"Ploy Chamnong",position:"Chef Assistant",baseSalary:18e3,overtimeRate:110,currentAdvance:2e3,totalOvertime:12,overtimeEarnings:1320,status:"active",department:"kitchen"}],o=[{id:1,staffName:"Niran Thaksin",date:"2025-01-20",regularHours:8,overtimeHours:4,reason:"Guest checkout deep cleaning",approvedBy:"Jane Manager",amount:600,status:"approved"},{id:2,staffName:"Malee Kasem",date:"2025-01-19",regularHours:8,overtimeHours:3,reason:"Late guest check-in assistance",approvedBy:"Pending",amount:510,status:"pending"},{id:3,staffName:"Kamon Saetang",date:"2025-01-18",regularHours:8,overtimeHours:6,reason:"Night security coverage",approvedBy:"John Admin",amount:720,status:"approved"},{id:4,staffName:"Somchai Patel",date:"2025-01-17",regularHours:8,overtimeHours:2,reason:"Emergency pool repair",approvedBy:"Jane Manager",amount:270,status:"approved"}],c=[{id:1,staffName:"Malee Kasem",requestDate:"2025-01-10",amount:8e3,reason:"Medical emergency for family member",approvedBy:"John Admin",repaymentPlan:"4 months",remainingBalance:6e3,status:"active"},{id:2,staffName:"Niran Thaksin",requestDate:"2025-01-05",amount:5e3,reason:"Children school fees",approvedBy:"Jane Manager",repaymentPlan:"3 months",remainingBalance:3333,status:"active"},{id:3,staffName:"Kamon Saetang",requestDate:"2024-12-20",amount:3e3,reason:"Home renovation",approvedBy:"John Admin",repaymentPlan:"2 months",remainingBalance:1500,status:"active"},{id:4,staffName:"Ploy Chamnong",requestDate:"2024-12-15",amount:2e3,reason:"Motorbike repair",approvedBy:"Jane Manager",repaymentPlan:"2 months",remainingBalance:1e3,status:"active"}],d=x=>{switch(x){case"housekeeping":return"bg-blue-100 text-blue-800";case"maintenance":return"bg-orange-100 text-orange-800";case"guest_services":return"bg-green-100 text-green-800";case"security":return"bg-red-100 text-red-800";case"kitchen":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},u=x=>{switch(x){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=x=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(x),h={totalStaff:l.length,totalOvertimeHours:o.reduce((x,p)=>x+p.overtimeHours,0),totalOvertimePay:o.reduce((x,p)=>x+p.amount,0),totalAdvances:c.reduce((x,p)=>x+p.remainingBalance,0)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(et,{className:"w-8 h-8"}),"Staff Advance & Overtime Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track salary advances, overtime hours, and additional compensation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Generate Report"]}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"New Request"]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"overview",children:"Staff Overview"}),e.jsx(ae,{value:"overtime",children:"Overtime Records"}),e.jsx(ae,{value:"advances",children:"Salary Advances"}),e.jsx(ae,{value:"payroll",children:"Payroll Summary"}),e.jsx(ae,{value:"settings",children:"Settings"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalStaff})]}),e.jsx(dt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overtime Hours"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:h.totalOvertimeHours})]}),e.jsx(et,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overtime Pay"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m(h.totalOvertimePay)})]}),e.jsx(Je,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Advances"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m(h.totalAdvances)})]}),e.jsx(Ut,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Staff"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Staff"}),l.map(x=>e.jsx(A,{value:x.name,children:x.name},x.id))]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"approved",children:"Approved"}),e.jsx(A,{value:"pending",children:"Pending"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"This Month"})}),e.jsxs(te,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Staff Members"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(dt,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.position})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:d(x.department),children:x.department.replace("_"," ")}),e.jsx(z,{className:u(x.status),children:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:m(x.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Rate"}),e.jsxs("p",{className:"font-medium",children:[m(x.overtimeRate),"/hr"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Overtime"}),e.jsxs("p",{className:"font-medium text-orange-600",children:[x.totalOvertime," hrs"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Earnings"}),e.jsx("p",{className:"font-medium text-green-600",children:m(x.overtimeEarnings)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Advance"}),e.jsx("p",{className:"font-medium text-red-600",children:m(x.currentAdvance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Net Earnings"}),e.jsx("p",{className:"font-medium text-blue-600",children:m(x.baseSalary+x.overtimeEarnings-x.currentAdvance)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Department: ",x.department.replace("_"," "),"  Position: ",x.position]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(M,{variant:"outline",size:"sm",children:"Edit"})]})]})]},x.id))})})]})]}),e.jsx(ie,{value:"overtime",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Overtime Records"}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Log Overtime"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(et,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.staffName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.date,"  ",x.regularHours,"h regular + ",x.overtimeHours,"h overtime"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-green-600",children:m(x.amount)}),e.jsx(z,{className:u(x.status),children:x.status}),e.jsx("p",{className:"text-xs text-gray-500",children:x.status==="approved"?`by ${x.approvedBy}`:"Pending approval"})]})]},x.id))})})]})}),e.jsx(ie,{value:"advances",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Salary Advances"}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"New Advance"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Je,{className:"w-5 h-5 text-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.staffName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",x.requestDate,"  Approved by: ",x.approvedBy]})]})]}),e.jsx(z,{className:u(x.status),children:x.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Original Amount"}),e.jsx("p",{className:"font-medium",children:m(x.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Remaining Balance"}),e.jsx("p",{className:"font-medium text-red-600",children:m(x.remainingBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Repayment Plan"}),e.jsx("p",{className:"font-medium",children:x.repaymentPlan})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Progress"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${(x.amount-x.remainingBalance)/x.amount*100}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((x.amount-x.remainingBalance)/x.amount*100).toFixed(1),"% repaid"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Monthly deduction: ",m(x.remainingBalance/parseInt(x.repaymentPlan))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(M,{variant:"outline",size:"sm",children:"Adjust Plan"})]})]})]},x.id))})})]})}),e.jsx(ie,{value:"payroll",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Monthly Payroll Summary"})}),e.jsxs(D,{children:[e.jsx("div",{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.position})]}),e.jsx(z,{className:d(x.department),children:x.department.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:m(x.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Pay"}),e.jsxs("p",{className:"font-medium text-green-600",children:["+",m(x.overtimeEarnings)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Advance Deduction"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",m(x.currentAdvance/3)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Net Pay"}),e.jsx("p",{className:"font-bold text-blue-600",children:m(x.baseSalary+x.overtimeEarnings-x.currentAdvance/3)})]}),e.jsx("div",{children:e.jsxs(M,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"Process Pay"]})})]})]},x.id))}),e.jsx("div",{className:"border-t pt-4 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Base Salaries"}),e.jsx("p",{className:"text-lg font-bold",children:m(l.reduce((x,p)=>x+p.baseSalary,0))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Overtime Pay"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:m(l.reduce((x,p)=>x+p.overtimeEarnings,0))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Advance Deductions"}),e.jsxs("p",{className:"text-lg font-bold text-red-600",children:["-",m(l.reduce((x,p)=>x+p.currentAdvance/3,0))]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Net Payroll"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:m(l.reduce((x,p)=>x+p.baseSalary+p.overtimeEarnings-p.currentAdvance/3,0))})]})]})})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Payroll Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Overtime Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Standard Overtime Multiplier"}),e.jsx(G,{type:"number",defaultValue:"1.5",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Overtime Multiplier"}),e.jsx(G,{type:"number",defaultValue:"2.0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Daily Overtime Threshold (hours)"}),e.jsx(G,{type:"number",defaultValue:"8"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Advance Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Maximum Advance (% of salary)"}),e.jsx(G,{type:"number",defaultValue:"50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default Repayment Period (months)"}),e.jsx(G,{type:"number",defaultValue:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Minimum Service Period (months)"}),e.jsx(G,{type:"number",defaultValue:"6"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Approval Workflow"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Require manager approval for overtime"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Require admin approval for advances"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-approve overtime under 2 hours"}),e.jsx("input",{type:"checkbox"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Send notifications for pending approvals"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function ide(){const[t,s]=b.useState("all"),[n,r]=b.useState("all"),[a,i]=b.useState("realistic"),l=[{id:1,name:"Property Management Demo",description:"Comprehensive property portfolio with Villa Samui Breeze, Villa Aruna, and Villa Paradise",status:"active",lastUpdated:"2025-01-22",records:145,coverage:"100%",features:["Properties","Bookings","Tasks","Maintenance","Financial Tracking"]},{id:2,name:"Guest Services Demo",description:"Complete guest lifecycle from check-in to check-out with AI recommendations",status:"active",lastUpdated:"2025-01-22",records:89,coverage:"95%",features:["Guest Portal","Smart Requests","Activity Recommendations","Service Timeline"]},{id:3,name:"Financial Operations Demo",description:"Revenue tracking, commission calculations, and expense management",status:"active",lastUpdated:"2025-01-22",records:267,coverage:"98%",features:["Booking Revenue","Commission Tracking","Expense Reports","Invoicing"]},{id:4,name:"Staff Management Demo",description:"Staff profiles, task assignments, payroll, and performance tracking",status:"active",lastUpdated:"2025-01-22",records:156,coverage:"92%",features:["Staff Profiles","Task Management","Payroll","Overtime Tracking"]},{id:5,name:"Agent & Partner Demo",description:"Retail and referral agent management with commission tracking",status:"active",lastUpdated:"2025-01-22",records:78,coverage:"88%",features:["Agent Profiles","Commission Tracking","Performance Analytics","Booking Engine"]}],o=[{id:1,name:"John Admin",role:"admin",email:"admin@test.com",lastActive:"2025-01-22 09:30",sessionsCount:15,modulesAccessed:8},{id:2,name:"Jane Manager",role:"portfolio-manager",email:"manager@test.com",lastActive:"2025-01-22 08:45",sessionsCount:12,modulesAccessed:6},{id:3,name:"Bob Owner",role:"owner",email:"owner@test.com",lastActive:"2025-01-21 18:20",sessionsCount:8,modulesAccessed:4},{id:4,name:"Sarah Staff",role:"staff",email:"staff@test.com",lastActive:"2025-01-22 07:15",sessionsCount:20,modulesAccessed:5},{id:5,name:"Mike Agent",role:"retail-agent",email:"agent@test.com",lastActive:"2025-01-21 16:30",sessionsCount:6,modulesAccessed:3}],c={totalModules:l.length,activeModules:l.filter(h=>h.status==="active").length,totalRecords:l.reduce((h,x)=>h+x.records,0),averageCoverage:(l.reduce((h,x)=>h+parseInt(x.coverage),0)/l.length).toFixed(1)},d=h=>{switch(h){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"updating":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},u=h=>{switch(h){case"admin":return"bg-red-100 text-red-800";case"portfolio-manager":return"bg-blue-100 text-blue-800";case"owner":return"bg-green-100 text-green-800";case"staff":return"bg-purple-100 text-purple-800";case"retail-agent":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},m=h=>{const x=parseInt(h);return x>=95?"text-green-600":x>=80?"text-yellow-600":"text-red-600"};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Pa,{className:"w-8 h-8"}),"System-Wide Demo Integration"]}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive demo data management and system integration overview"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Configure Demo"]}),e.jsxs(M,{children:[e.jsx(mm,{className:"w-4 h-4 mr-2"}),"Refresh All Data"]})]})]}),e.jsxs(ft,{defaultValue:"modules",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"modules",children:"Demo Modules"}),e.jsx(ae,{value:"users",children:"Demo Users"}),e.jsx(ae,{value:"integration",children:"Integration Status"}),e.jsx(ae,{value:"analytics",children:"System Analytics"}),e.jsx(ae,{value:"settings",children:"Demo Settings"})]}),e.jsxs(ie,{value:"modules",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Modules"}),e.jsx("p",{className:"text-2xl font-bold",children:c.totalModules})]}),e.jsx(Pa,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Modules"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.activeModules})]}),e.jsx(Fe,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Demo Records"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.totalRecords.toLocaleString()})]}),e.jsx(Je,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Coverage"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[c.averageCoverage,"%"]})]}),e.jsx(ns,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Modules"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Modules"}),e.jsx(A,{value:"property",children:"Property Management"}),e.jsx(A,{value:"guest",children:"Guest Services"}),e.jsx(A,{value:"financial",children:"Financial Operations"}),e.jsx(A,{value:"staff",children:"Staff Management"})]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"updating",children:"Updating"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Demo Mode"})}),e.jsxs(te,{children:[e.jsx(A,{value:"realistic",children:"Realistic Data"}),e.jsx(A,{value:"minimal",children:"Minimal Data"}),e.jsx(A,{value:"comprehensive",children:"Comprehensive"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Demo Modules"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:l.map(h=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pa,{className:"w-5 h-5 text-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:d(h.status),children:h.status}),e.jsx("span",{className:`font-bold ${m(h.coverage)}`,children:h.coverage})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:h.lastUpdated})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Demo Records"}),e.jsx("p",{className:"font-medium text-purple-600",children:h.records})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Coverage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:h.coverage}})}),e.jsx("span",{className:"text-sm",children:h.coverage})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Features"}),e.jsxs("p",{className:"font-medium",children:[h.features.length," modules"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Features Included"}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[h.features.slice(0,3).map((x,p)=>e.jsx(z,{variant:"outline",className:"text-xs",children:x},p)),h.features.length>3&&e.jsxs(z,{variant:"outline",className:"text-xs",children:["+",h.features.length-3," more"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(M,{variant:"outline",size:"sm",children:"Refresh Data"})]})]})]},h.id))})})]})]}),e.jsx(ie,{value:"users",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Demo User Accounts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(z,{className:u(h.role),children:h.role}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("p",{className:"font-medium",children:[h.sessionsCount," sessions"]}),e.jsxs("p",{className:"text-gray-500",children:[h.modulesAccessed," modules accessed"]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("p",{className:"text-gray-500",children:"Last active:"}),e.jsx("p",{className:"font-medium",children:h.lastActive})]}),e.jsx(M,{variant:"outline",size:"sm",children:"Login As"})]})]},h.id))})})]})}),e.jsx(ie,{value:"integration",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"System Integration Health"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Database Connection"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Demo Data Sync"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Synced"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Cross-Module References"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Valid"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"User Authentication"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"API Endpoints"}),e.jsx(z,{className:"bg-yellow-100 text-yellow-800",children:"98% Responsive"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Data Consistency Report"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"99.2%"}),e.jsx("p",{className:"text-gray-600",children:"Overall Data Integrity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Property Records"}),e.jsx("span",{className:"font-semibold",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"User Profiles"}),e.jsx("span",{className:"font-semibold",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Financial Data"}),e.jsx("span",{className:"font-semibold",children:"98.5%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Task Management"}),e.jsx("span",{className:"font-semibold",children:"99.1%"})]})]})]})]})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Usage Statistics"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"1,247"}),e.jsx("p",{className:"text-gray-600",children:"Total Demo Interactions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Page Views"}),e.jsx("span",{className:"font-semibold",children:"856"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"API Calls"}),e.jsx("span",{className:"font-semibold",children:"391"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"User Sessions"}),e.jsx("span",{className:"font-semibold",children:"61"})]})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Most Accessed Modules"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property Management"}),e.jsx("span",{className:"font-semibold",children:"34%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Financial Dashboard"}),e.jsx("span",{className:"font-semibold",children:"28%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Task Management"}),e.jsx("span",{className:"font-semibold",children:"18%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Guest Services"}),e.jsx("span",{className:"font-semibold",children:"12%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Staff Management"}),e.jsx("span",{className:"font-semibold",children:"8%"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Performance Metrics"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"245ms"}),e.jsx("p",{className:"text-gray-600",children:"Average Response Time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Uptime"}),e.jsx("span",{className:"font-semibold",children:"99.8%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Error Rate"}),e.jsx("span",{className:"font-semibold",children:"0.2%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Cache Hit Rate"}),e.jsx("span",{className:"font-semibold",children:"94.5%"})]})]})]})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Demo Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Data Generation"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-refresh demo data"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Generate realistic timestamps"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Cross-reference data integrity"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Refresh interval (hours)"}),e.jsx(G,{type:"number",defaultValue:"24"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Demo Modes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default demo mode"}),e.jsxs(se,{defaultValue:"realistic",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"minimal",children:"Minimal Data"}),e.jsx(A,{value:"realistic",children:"Realistic Data"}),e.jsx(A,{value:"comprehensive",children:"Comprehensive"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"User session timeout (minutes)"}),e.jsx(G,{type:"number",defaultValue:"60"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx("div",{children:e.jsx(M,{variant:"outline",children:"Reset All Demo Data"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{variant:"outline",children:"Export Configuration"}),e.jsx(M,{children:"Save Settings"})]})]})]})]})})]})]})}function lde(){const[t,s]=b.useState("all"),[n,r]=b.useState("all"),[a,i]=b.useState("all"),l=[{id:1,property:"Villa Samui Breeze",category:"HVAC",description:"Air conditioning system service and filter replacement",date:"2025-01-20",technician:"Somchai HVAC Services",cost:2500,status:"completed",warrantyExpiry:"2025-07-20",nextService:"2025-04-20",priority:"medium",photos:["ac_service_1.jpg","filter_replacement.jpg"]},{id:2,property:"Villa Aruna",category:"Pool",description:"Pool pump replacement and chemical balancing",date:"2025-01-18",technician:"AquaTech Pool Services",cost:4200,status:"completed",warrantyExpiry:"2026-01-18",nextService:"2025-02-18",priority:"high",photos:["pool_pump_before.jpg","pool_pump_after.jpg"]},{id:3,property:"Villa Paradise",category:"Plumbing",description:"Kitchen sink faucet repair and pipe inspection",date:"2025-01-15",technician:"Thailand Plumbing Co.",cost:800,status:"completed",warrantyExpiry:"2025-06-15",nextService:"2025-07-15",priority:"low",photos:["faucet_repair.jpg"]},{id:4,property:"Villa Samui Breeze",category:"Electrical",description:"Main electrical panel upgrade and safety inspection",date:"2025-01-12",technician:"PowerTech Electrical",cost:6500,status:"in_progress",warrantyExpiry:"2027-01-12",nextService:"2025-06-12",priority:"high",photos:["electrical_panel_new.jpg"]},{id:5,property:"Villa Aruna",category:"Garden",description:"Irrigation system installation and landscaping",date:"2025-01-10",technician:"Green Gardens Thailand",cost:3200,status:"scheduled",warrantyExpiry:"2025-12-10",nextService:"2025-03-10",priority:"medium",photos:[]}],o=[{id:1,property:"Villa Paradise",item:"Water heater unit",category:"Plumbing",purchaseDate:"2024-01-15",warrantyExpiry:"2025-01-15",daysUntilExpiry:-7,status:"expired",vendor:"Rheem Thailand",cost:8500},{id:2,property:"Villa Samui Breeze",item:"Refrigerator - Kitchen",category:"Appliances",purchaseDate:"2023-06-20",warrantyExpiry:"2025-06-20",daysUntilExpiry:149,status:"warning",vendor:"Samsung Electronics",cost:15e3},{id:3,property:"Villa Aruna",item:"Solar panel system",category:"Electrical",purchaseDate:"2022-11-10",warrantyExpiry:"2027-11-10",daysUntilExpiry:1024,status:"active",vendor:"Thai Solar Solutions",cost:45e3}],c=[{id:1,property:"Villa Samui Breeze",prediction:"Pool pump replacement recommended",confidence:87,category:"Pool",estimatedCost:4500,timeframe:"2-3 months",reasoning:"Based on usage patterns and similar equipment lifecycle",priority:"medium"},{id:2,property:"Villa Paradise",prediction:"HVAC system deep cleaning required",confidence:92,category:"HVAC",estimatedCost:1200,timeframe:"1 month",reasoning:"Seasonal maintenance due and efficiency monitoring indicates need",priority:"high"},{id:3,property:"Villa Aruna",prediction:"Roof inspection and minor repairs",confidence:74,category:"Structure",estimatedCost:2800,timeframe:"6 months",reasoning:"Age of property and recent weather patterns suggest preventive maintenance",priority:"low"}],d=p=>{switch(p){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},u=p=>{switch(p){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=p=>{switch(p){case"active":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=p=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(p),x={totalRecords:l.length,completedTasks:l.filter(p=>p.status==="completed").length,totalCost:l.reduce((p,f)=>p+f.cost,0),warrantyAlerts:o.filter(p=>p.status==="warning"||p.status==="expired").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ws,{className:"w-8 h-8"}),"Maintenance Log & Warranty Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track maintenance records, warranty status, and AI-powered service predictions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Log Maintenance"]})]})]}),e.jsxs(ft,{defaultValue:"maintenance",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"maintenance",children:"Maintenance Log"}),e.jsx(ae,{value:"warranty",children:"Warranty Tracker"}),e.jsx(ae,{value:"predictions",children:"AI Predictions"}),e.jsx(ae,{value:"analytics",children:"Analytics"}),e.jsx(ae,{value:"settings",children:"Settings"})]}),e.jsxs(ie,{value:"maintenance",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalRecords})]}),e.jsx(Ws,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.completedTasks})]}),e.jsx(Fe,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h(x.totalCost)})]}),e.jsx(Je,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Warranty Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.warrantyAlerts})]}),e.jsx(Et,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(A,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(A,{value:"villa-paradise",children:"Villa Paradise"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Categories"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Categories"}),e.jsx(A,{value:"hvac",children:"HVAC"}),e.jsx(A,{value:"pool",children:"Pool"}),e.jsx(A,{value:"plumbing",children:"Plumbing"}),e.jsx(A,{value:"electrical",children:"Electrical"}),e.jsx(A,{value:"garden",children:"Garden"})]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"completed",children:"Completed"}),e.jsx(A,{value:"in_progress",children:"In Progress"}),e.jsx(A,{value:"scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(G,{placeholder:"Search maintenance...",className:"pl-10"})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Maintenance Records"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:l.map(p=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ws,{className:"w-5 h-5 text-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:p.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.property,"  ",p.category]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Technician: ",p.technician]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:u(p.priority),children:p.priority}),e.jsx(z,{className:d(p.status),children:p.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium",children:p.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost"}),e.jsx("p",{className:"font-medium text-green-600",children:h(p.cost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Warranty Until"}),e.jsx("p",{className:"font-medium",children:p.warrantyExpiry})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Service"}),e.jsx("p",{className:"font-medium",children:p.nextService})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Photos"}),e.jsxs("p",{className:"font-medium",children:[p.photos.length," attachments"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Category: ",p.category,"  Priority: ",p.priority]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Photos"}),e.jsx(M,{variant:"outline",size:"sm",children:"Edit Record"})]})]})]},p.id))})})]})]}),e.jsx(ie,{value:"warranty",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warranty Alerts"}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Warranty"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qt,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:p.item}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.property,"  ",p.category]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Vendor: ",p.vendor,"  Cost: ",h(p.cost)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(z,{className:m(p.status),children:p.status}),e.jsx("p",{className:"text-sm font-medium mt-1",children:p.daysUntilExpiry<0?`Expired ${Math.abs(p.daysUntilExpiry)} days ago`:`${p.daysUntilExpiry} days remaining`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Expires: ",p.warrantyExpiry]})]})]},p.id))})})]})}),e.jsx(ie,{value:"predictions",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"AI Maintenance Predictions"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c.map(p=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:p.prediction}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.property,"  ",p.category]}),e.jsx("p",{className:"text-xs text-gray-500",children:p.reasoning})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:u(p.priority),children:p.priority}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[p.confidence,"% confidence"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Estimated Cost"}),e.jsx("p",{className:"font-medium text-orange-600",children:h(p.estimatedCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Timeframe"}),e.jsx("p",{className:"font-medium",children:p.timeframe})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Confidence"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${p.confidence}%`}})}),e.jsxs("span",{className:"text-sm",children:[p.confidence,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["AI Recommendation  ",p.category,"  ",p.priority," priority"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"Schedule Maintenance"}),e.jsx(M,{variant:"outline",size:"sm",children:"Dismiss"})]})]})]},p.id))})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Maintenance Cost by Category"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"HVAC Systems"}),e.jsx("span",{className:"font-bold",children:h(2500)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pool Maintenance"}),e.jsx("span",{className:"font-bold",children:h(4200)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Electrical Work"}),e.jsx("span",{className:"font-bold",children:h(6500)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Garden & Landscaping"}),e.jsx("span",{className:"font-bold",children:h(3200)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Plumbing"}),e.jsx("span",{className:"font-bold",children:h(800)})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Upcoming Maintenance"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Aruna - Pool Service"}),e.jsx("span",{className:"text-sm font-medium",children:"Feb 18, 2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Paradise - HVAC Service"}),e.jsx("span",{className:"text-sm font-medium",children:"Mar 10, 2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Samui - Pool Service"}),e.jsx("span",{className:"text-sm font-medium",children:"Apr 20, 2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Aruna - Electrical Inspection"}),e.jsx("span",{className:"text-sm font-medium",children:"Jun 12, 2025"})]})]})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Maintenance Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warranty expiry alerts (days before)"}),e.jsx(G,{type:"number",defaultValue:"30",className:"w-20"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Maintenance due reminders"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"AI prediction notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"AI Prediction Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Minimum confidence threshold"}),e.jsx(G,{type:"number",defaultValue:"75",className:"w-20"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Enable predictive maintenance"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-schedule high confidence predictions"}),e.jsx("input",{type:"checkbox"})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function ode(){const[t,s]=b.useState("all"),[n,r]=b.useState("current"),[a,i]=b.useState("all"),l=[{id:1,name:"Somchai Jaidee",role:"Maintenance Supervisor",department:"Maintenance",email:"somchai@hostpilotpro.com",phone:"+66 81 234 5678",address:"123 Soi Sukhumvit 42, Bangkok 10110",startDate:"2023-03-15",baseSalary:35e3,status:"active",avatar:"/avatars/somchai.jpg",skills:["HVAC","Plumbing","Electrical","Pool Maintenance"],certifications:["Thai Electrical License","Pool Chemical Handler"],emergencyContact:{name:"Malee Jaidee",relationship:"Spouse",phone:"+66 89 765 4321"}},{id:2,name:"Niran Thepsiri",role:"Housekeeping Manager",department:"Housekeeping",email:"niran@hostpilotpro.com",phone:"+66 82 345 6789",address:"456 Thanon Phra Ram 4, Bangkok 10110",startDate:"2022-11-20",baseSalary:32e3,status:"active",avatar:"/avatars/niran.jpg",skills:["Team Leadership","Quality Control","Inventory Management"],certifications:["Hospitality Management Certificate"],emergencyContact:{name:"Preecha Thepsiri",relationship:"Father",phone:"+66 81 876 5432"}},{id:3,name:"Apinya Khamchong",role:"Guest Services Coordinator",department:"Guest Services",email:"apinya@hostpilotpro.com",phone:"+66 83 456 7890",address:"789 Soi Thonglor 15, Bangkok 10110",startDate:"2023-08-10",baseSalary:28e3,status:"active",avatar:"/avatars/apinya.jpg",skills:["Customer Service","English/Thai Translation","Concierge Services"],certifications:["Tourism Authority License","First Aid Certificate"],emergencyContact:{name:"Siriporn Khamchong",relationship:"Mother",phone:"+66 84 567 8901"}},{id:4,name:"Wichai Suwanapong",role:"Security Officer",department:"Security",email:"wichai@hostpilotpro.com",phone:"+66 85 567 8901",address:"321 Soi Asoke 12, Bangkok 10110",startDate:"2024-01-05",baseSalary:26e3,status:"active",avatar:"/avatars/wichai.jpg",skills:["Security Protocols","Emergency Response","CCTV Operations"],certifications:["Security Guard License","CPR Certification"],emergencyContact:{name:"Chanida Suwanapong",relationship:"Sister",phone:"+66 86 678 9012"}}],o=[{id:1,staffId:1,payPeriod:"January 2025",baseSalary:35e3,overtime:2800,bonus:5e3,deductions:1200,netPay:41600,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:14},{id:2,staffId:2,payPeriod:"January 2025",baseSalary:32e3,overtime:1600,bonus:3e3,deductions:1e3,netPay:35600,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:8},{id:3,staffId:3,payPeriod:"January 2025",baseSalary:28e3,overtime:1200,bonus:2e3,deductions:800,netPay:30400,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:6},{id:4,staffId:4,payPeriod:"January 2025",baseSalary:26e3,overtime:2400,bonus:1500,deductions:700,netPay:29200,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:12}],c=[{staffId:1,date:"2025-01-22",checkIn:"08:00",checkOut:"17:00",status:"present",hoursWorked:8,overtime:1},{staffId:1,date:"2025-01-21",checkIn:"08:00",checkOut:"18:30",status:"present",hoursWorked:8,overtime:2.5},{staffId:2,date:"2025-01-22",checkIn:"07:30",checkOut:"16:30",status:"present",hoursWorked:8,overtime:0},{staffId:3,date:"2025-01-22",checkIn:"09:00",checkOut:"18:00",status:"present",hoursWorked:8,overtime:0}],d=p=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(p),u=p=>{switch(p){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},m=p=>{switch(p){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=p=>{switch(p){case"Maintenance":return"bg-orange-100 text-orange-800";case"Housekeeping":return"bg-purple-100 text-purple-800";case"Guest Services":return"bg-blue-100 text-blue-800";case"Security":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x={totalStaff:l.length,activeStaff:l.filter(p=>p.status==="active").length,monthlyPayroll:o.reduce((p,f)=>p+f.netPay,0),totalOvertime:o.reduce((p,f)=>p+f.overtime,0)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(dt,{className:"w-8 h-8"}),"Staff Profile & Payroll"]}),e.jsx("p",{className:"text-gray-600",children:"Manage staff profiles, payroll processing, and attendance tracking"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Export Payroll"]}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Staff"]})]})]}),e.jsxs(ft,{defaultValue:"profiles",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"profiles",children:"Staff Profiles"}),e.jsx(ae,{value:"payroll",children:"Payroll Management"}),e.jsx(ae,{value:"attendance",children:"Attendance"}),e.jsx(ae,{value:"analytics",children:"Analytics"}),e.jsx(ae,{value:"settings",children:"Settings"})]}),e.jsxs(ie,{value:"profiles",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalStaff})]}),e.jsx(dt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Staff"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.activeStaff})]}),e.jsx(dt,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Payroll"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d(x.monthlyPayroll)})]}),e.jsx(Je,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Overtime"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:d(x.totalOvertime)})]}),e.jsx(et,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Departments"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Departments"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"housekeeping",children:"Housekeeping"}),e.jsx(A,{value:"guest-services",children:"Guest Services"}),e.jsx(A,{value:"security",children:"Security"})]})]}),e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Staff"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Staff"}),e.jsx(A,{value:"active",children:"Active Only"}),e.jsx(A,{value:"inactive",children:"Inactive Only"})]})]}),e.jsx(G,{placeholder:"Search staff..."}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(p=>e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ai,{className:"w-12 h-12",children:[e.jsx(_d,{src:p.avatar,alt:p.name}),e.jsx(ii,{children:p.name.split(" ").map(f=>f[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.role}),e.jsx(z,{className:h(p.department),children:p.department})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:u(p.status),children:p.status}),e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(jr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gi,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:p.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($i,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:p.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:p.address})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Started: ",p.startDate]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[d(p.baseSalary),"/month"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Skills"}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[p.skills.slice(0,3).map((f,j)=>e.jsx(z,{variant:"outline",className:"text-xs",children:f},j)),p.skills.length>3&&e.jsxs(z,{variant:"outline",className:"text-xs",children:["+",p.skills.length-3," more"]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emergency Contact"}),e.jsxs("p",{className:"text-sm",children:[p.emergencyContact.name," (",p.emergencyContact.relationship,")"]}),e.jsx("p",{className:"text-xs text-gray-600",children:p.emergencyContact.phone})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(M,{variant:"outline",size:"sm",className:"flex-1",children:"View Profile"}),e.jsx(M,{variant:"outline",size:"sm",className:"flex-1",children:"Payroll History"})]})]})},p.id))})]}),e.jsxs(ie,{value:"payroll",className:"space-y-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Pay Period"})}),e.jsxs(te,{children:[e.jsx(A,{value:"current",children:"January 2025"}),e.jsx(A,{value:"previous",children:"December 2024"}),e.jsx(A,{value:"november",children:"November 2024"})]})]}),e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Staff"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Staff"}),l.map(p=>e.jsx(A,{value:p.id.toString(),children:p.name},p.id))]})]}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"processing",children:"Processing"})]})]}),e.jsx(M,{children:"Generate Payroll"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Payroll Records - January 2025"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(p=>{const f=l.find(j=>j.id===p.staffId);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ai,{className:"w-10 h-10",children:e.jsx(ii,{children:f==null?void 0:f.name.split(" ").map(j=>j[0]).join("")})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:f==null?void 0:f.name}),e.jsx("p",{className:"text-sm text-gray-600",children:f==null?void 0:f.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:m(p.status),children:p.status}),e.jsx("span",{className:"font-bold text-green-600",children:d(p.netPay)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:d(p.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Overtime"}),e.jsx("p",{className:"font-medium text-blue-600",children:d(p.overtime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Bonus"}),e.jsx("p",{className:"font-medium text-green-600",children:d(p.bonus)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Deductions"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",d(p.deductions)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Working Days"}),e.jsxs("p",{className:"font-medium",children:[p.workingDays," days"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"OT Hours"}),e.jsxs("p",{className:"font-medium",children:[p.overtimeHours,"h"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Pay Date: ",p.payDate]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"w-4 h-4 mr-1"}),"Payslip"]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(yr,{className:"w-4 h-4 mr-1"}),"Payment"]})]})]})]},p.id)})})})]})]}),e.jsx(ie,{value:"attendance",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Daily Attendance - January 22, 2025"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.map((p,f)=>{const j=l.find(g=>g.id===p.staffId);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ai,{className:"w-8 h-8",children:e.jsx(ii,{children:j==null?void 0:j.name.split(" ").map(g=>g[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j==null?void 0:j.name}),e.jsx("p",{className:"text-sm text-gray-600",children:j==null?void 0:j.department})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Check In"}),e.jsx("p",{className:"font-medium",children:p.checkIn})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Check Out"}),e.jsx("p",{className:"font-medium",children:p.checkOut})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Hours"}),e.jsxs("p",{className:"font-medium",children:[p.hoursWorked,"h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Overtime"}),e.jsxs("p",{className:"font-medium text-blue-600",children:[p.overtime,"h"]})]})]}),e.jsx(z,{className:"bg-green-100 text-green-800",children:p.status})]},f)})})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Payroll Cost by Department"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maintenance"}),e.jsx("span",{className:"font-bold",children:d(41600)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Housekeeping"}),e.jsx("span",{className:"font-bold",children:d(35600)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Guest Services"}),e.jsx("span",{className:"font-bold",children:d(30400)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Security"}),e.jsx("span",{className:"font-bold",children:d(29200)})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Overtime by Staff"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Somchai (14h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(2800)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Wichai (12h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(2400)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Niran (8h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(1600)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Apinya (6h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(1200)})]})]})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Payroll Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Pay Period Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Pay frequency"}),e.jsxs(se,{defaultValue:"monthly",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"bi-weekly",children:"Bi-weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Pay day"}),e.jsx(G,{type:"number",defaultValue:"31"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Overtime Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Overtime rate multiplier"}),e.jsx(G,{type:"number",step:"0.1",defaultValue:"1.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Standard hours per day"}),e.jsx(G,{type:"number",defaultValue:"8"})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function IU(){const[t,s]=b.useState(!1),[n,r]=b.useState(0),a=[{category:"Database Integrity",icon:Pa,status:"healthy",issues:0,checks:[{name:"Property Records",status:"pass",description:"All property records are valid"},{name:"Booking Consistency",status:"pass",description:"No orphaned booking records"},{name:"User Account Integrity",status:"warning",description:"2 inactive accounts need review"},{name:"Financial Records",status:"pass",description:"All transactions balanced"}]},{category:"API Endpoints",icon:OX,status:"healthy",issues:1,checks:[{name:"Authentication Service",status:"pass",description:"All auth endpoints responding"},{name:"Property Management API",status:"pass",description:"CRUD operations working"},{name:"Booking Engine API",status:"warning",description:"Slow response times detected"},{name:"Financial API",status:"pass",description:"All payment endpoints active"}]},{category:"User Access Control",icon:dt,status:"warning",issues:3,checks:[{name:"Role Permissions",status:"pass",description:"All roles configured correctly"},{name:"Admin Access",status:"pass",description:"Admin permissions verified"},{name:"Guest Access",status:"warning",description:"3 expired guest sessions found"},{name:"Staff Permissions",status:"pass",description:"Staff access levels correct"}]},{category:"Property Data",icon:Ft,status:"healthy",issues:0,checks:[{name:"Property Listings",status:"pass",description:"All properties have complete data"},{name:"Amenity Information",status:"pass",description:"Amenities properly configured"},{name:"Pricing Data",status:"pass",description:"All pricing rules valid"},{name:"Availability Calendar",status:"pass",description:"Calendar sync operational"}]}],i=[{id:1,type:"warning",message:"3 guest sessions expired and need cleanup",timestamp:"2025-01-22 09:30:00",category:"User Access"},{id:2,type:"info",message:"Database backup completed successfully",timestamp:"2025-01-22 08:00:00",category:"System"},{id:3,type:"warning",message:"Booking API response time increased to 2.3s",timestamp:"2025-01-22 07:45:00",category:"Performance"},{id:4,type:"success",message:"Security scan completed - no vulnerabilities found",timestamp:"2025-01-22 06:00:00",category:"Security"}],l=[{name:"Database Query Speed",value:95,unit:"ms avg",status:"good"},{name:"API Response Time",value:230,unit:"ms avg",status:"warning"},{name:"Memory Usage",value:68,unit:"% used",status:"good"},{name:"CPU Utilization",value:42,unit:"% avg",status:"good"},{name:"Storage Usage",value:73,unit:"% used",status:"good"},{name:"Active Connections",value:156,unit:"concurrent",status:"good"}],o=u=>{switch(u){case"pass":case"healthy":case"good":case"success":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"error":case"critical":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},c=u=>{switch(u){case"pass":case"healthy":case"good":case"success":return Fe;case"warning":return Et;case"error":case"critical":return ar;default:return Fe}},d=()=>{s(!0),r(0);const u=setInterval(()=>{r(m=>m>=100?(clearInterval(u),s(!1),100):m+10)},300)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(qt,{className:"w-8 h-8"}),"System Integrity Check"]}),e.jsx("p",{className:"text-gray-600",children:"Monitor system health, database integrity, and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{onClick:d,disabled:t,children:[e.jsx(Ss,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),t?"Scanning...":"Run Full Scan"]})]})]}),t&&e.jsx(E,{className:"mb-6",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Gs,{className:"w-5 h-5 animate-pulse"}),e.jsx("span",{className:"font-medium",children:"System Scan in Progress..."})]}),e.jsx(fi,{value:n,className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[n,"% Complete"]})]})}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"database",children:"Database"}),e.jsx(ae,{value:"performance",children:"Performance"}),e.jsx(ae,{value:"security",children:"Security"}),e.jsx(ae,{value:"alerts",children:"Alerts"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"System Status"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Healthy"})]}),e.jsx(Fe,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Issues"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"4"})]}),e.jsx(Et,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Scan"}),e.jsx("p",{className:"text-2xl font-bold",children:"2h ago"})]}),e.jsx(et,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"99.8%"})]}),e.jsx(Gs,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((u,m)=>{const h=u.icon,x=c(u.status);return e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),u.category]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx(z,{className:o(u.status),children:u.status})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.checks.map((p,f)=>{const j=c(p.status);return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:p.name}),e.jsx("p",{className:"text-xs text-gray-600",children:p.description})]})]}),e.jsx(z,{className:o(p.status),variant:"outline",children:p.status})]},f)})})})]},m)})})]}),e.jsxs(ie,{value:"database",className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Database Health Check"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(Pa,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"font-medium",children:"Total Tables"}),e.jsx("p",{className:"text-2xl font-bold",children:"24"})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(Fe,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"font-medium",children:"Healthy Tables"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"22"})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(Et,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"font-medium",children:"Need Attention"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"2"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Table Status Details"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:[{name:"properties",records:1245,status:"healthy",lastCheck:"5 min ago"},{name:"bookings",records:3567,status:"healthy",lastCheck:"5 min ago"},{name:"users",records:892,status:"warning",lastCheck:"5 min ago"},{name:"tasks",records:2134,status:"healthy",lastCheck:"5 min ago"},{name:"financial_transactions",records:8901,status:"healthy",lastCheck:"5 min ago"}].map((u,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pa,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.records.toLocaleString()," records"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:u.lastCheck}),e.jsx(z,{className:o(u.status),children:u.status})]})]},m))})})]})]}),e.jsx(ie,{value:"performance",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((u,m)=>e.jsx(E,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsx(z,{className:o(u.status),children:u.status})]}),e.jsx("p",{className:"text-2xl font-bold",children:u.value}),e.jsx("p",{className:"text-sm text-gray-600",children:u.unit})]})},m))})}),e.jsx(ie,{value:"security",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Security Status"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"SSL Certificate"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Valid"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Firewall Status"}),e.jsx(z,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Last Security Scan"}),e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"6h ago"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed Login Attempts"}),e.jsx(z,{className:"bg-yellow-100 text-yellow-800",children:"3 today"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Access Control"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Active Sessions"}),e.jsx("span",{className:"font-bold",children:"156"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Admin Sessions"}),e.jsx("span",{className:"font-bold",children:"3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Guest Sessions"}),e.jsx("span",{className:"font-bold",children:"89"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Expired Sessions"}),e.jsx("span",{className:"font-bold text-yellow-600",children:"3"})]})]})})]})]})}),e.jsx(ie,{value:"alerts",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent System Alerts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:i.map(u=>e.jsx(li,{children:e.jsxs(oi,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u.type==="warning"&&e.jsx(Et,{className:"w-4 h-4 text-yellow-500"}),u.type==="success"&&e.jsx(Fe,{className:"w-4 h-4 text-green-500"}),u.type==="info"&&e.jsx(Gs,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{children:u.message}),e.jsxs("p",{className:"text-sm text-gray-500",children:[u.category,"  ",u.timestamp]})]})]}),e.jsx(z,{variant:"outline",children:u.type})]})},u.id))})})]})})]})]})}const cde=Object.freeze(Object.defineProperty({__proto__:null,default:IU},Symbol.toStringTag,{value:"Module"}));function dde(){const[t,s]=b.useState("all"),[n,r]=b.useState("all"),[a,i]=b.useState("current"),[l,o]=b.useState(!1),[c,d]=b.useState({property:"",utilityType:"",provider:"",accountNumber:"",rate:"",autoPayEnabled:!1}),{toast:u}=at(),m=yt(),{data:h=[],isLoading:x}=ye({queryKey:["/api/automation/utility-alerts"],refetchInterval:6e4}),p=Ee({mutationFn:async()=>{const C=await fetch("/api/automation/check-utility-alerts",{method:"POST",headers:{"Content-Type":"application/json"}});if(!C.ok)throw new Error("Failed to trigger alert check");return C.json()},onSuccess:()=>{u({title:"Alert Check Triggered",description:"Manual utility alert check has been initiated successfully."}),m.invalidateQueries({queryKey:["/api/automation/utility-alerts"]})},onError:C=>{u({title:"Error",description:C.message||"Failed to trigger alert check",variant:"destructive"})}}),f=Ee({mutationFn:async()=>{const P=await fetch("/api/automation/utility-alerts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({alertType:"test_alert",alertTitle:"Test Alert - System Check",alertMessage:"This is a test alert to verify the utility alert system is working correctly.",alertSeverity:"info",propertyId:1,utilityType:"electricity"})});if(!P.ok)throw new Error("Failed to create test alert");return P.json()},onSuccess:()=>{u({title:"Test Alert Created",description:"A test alert has been generated successfully. Check the alerts list below."}),m.invalidateQueries({queryKey:["/api/automation/utility-alerts"]})},onError:C=>{u({title:"Error",description:C.message||"Failed to create test alert",variant:"destructive"})}}),j=Ee({mutationFn:async()=>{const C={utilityBills:y,properties:g,monthlyStats:w,generatedAt:new Date().toISOString(),reportType:"utility_tracker_summary"},P=[["Property","Utility Type","Provider","Amount (THB)","Status","Due Date"],...y.map(_=>{var U;return[((U=g.find(H=>H.id===_.propertyId))==null?void 0:U.name)||"Unknown",_.type.replace("_"," ").toUpperCase(),_.provider,_.amount.toString(),_.status.toUpperCase(),_.dueDate]})].map(_=>_.join(",")).join(`
`),$=new Blob([P],{type:"text/csv"}),V=window.URL.createObjectURL($),I=document.createElement("a");return I.href=V,I.download=`utility-report-${new Date().toISOString().split("T")[0]}.csv`,I.click(),window.URL.revokeObjectURL(V),C},onSuccess:()=>{u({title:"Report Exported",description:"Utility report has been downloaded as CSV file."})},onError:C=>{u({title:"Export Failed",description:C.message||"Failed to export report",variant:"destructive"})}}),{data:g=[]}=ye({queryKey:["/api/properties"]}),{data:y=[]}=ye({queryKey:["/api/utility-bills"]}),v=[{id:"electricity",name:"Electricity",icon:ns,color:"text-yellow-500"},{id:"water",name:"Water",icon:wf,color:"text-blue-500"},{id:"internet",name:"Internet",icon:Pf,color:"text-green-500"},{id:"gas",name:"Gas",icon:J$,color:"text-orange-500"},{id:"security",name:"Security",icon:qt,color:"text-red-500"},{id:"maintenance",name:"Maintenance",icon:Jt,color:"text-purple-500"}],w={totalAmount:y.reduce((C,P)=>C+parseFloat(P.amount||"0"),0),paidAmount:y.filter(C=>C.status==="paid").reduce((C,P)=>C+parseFloat(P.amount||"0"),0),pendingAmount:y.filter(C=>C.status==="pending").reduce((C,P)=>C+parseFloat(P.amount||"0"),0),overdueAmount:y.filter(C=>C.status==="overdue").reduce((C,P)=>C+parseFloat(P.amount||"0"),0),billCount:y.length,averagePerProperty:g.length>0?y.reduce((C,P)=>C+parseFloat(P.amount||"0"),0)/g.length:0},N=(C,P)=>new Intl.NumberFormat("en-US",{style:"currency",currency:P}).format(C),S=C=>{switch(C){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},k=C=>{switch(C){case"paid":return Fe;case"pending":return et;case"overdue":return Et;default:return et}},T=y.filter(C=>!(t!=="all"&&C.propertyId!==parseInt(t)||n!=="all"&&C.type!==n));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Lo,{className:"w-8 h-8"}),"Utility Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track utility bills, usage, and payments across all properties"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"outline",children:[e.jsx(mi,{className:"w-4 h-4 mr-2"}),"Upload Bill"]})}),e.jsxs(Ye,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Upload Utility Bill"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Property"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsx(te,{children:g.map(C=>e.jsx(A,{value:C.id.toString(),children:C.name},C.id))})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Utility Type"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select type"})}),e.jsx(te,{children:v.map(C=>e.jsx(A,{value:C.id,children:C.name},C.id))})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Bill Amount"}),e.jsx(G,{type:"number",placeholder:"Enter amount"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Due Date"}),e.jsx(G,{type:"date"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Upload Receipt"}),e.jsx(G,{type:"file",accept:".pdf,.jpg,.png"})]}),e.jsx(M,{className:"w-full",onClick:()=>{u({title:"Bill Upload",description:"Bill upload functionality will be integrated with actual backend storage."})},children:"Upload Bill"})]})]})]}),e.jsxs(M,{variant:"outline",onClick:()=>j.mutate(),disabled:j.isPending,children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),j.isPending?"Exporting...":"Export Report"]}),e.jsxs(M,{children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Utility Account"]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-6",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"bills",children:"Bills"}),e.jsx(ae,{value:"accounts",children:"Accounts"}),e.jsx(ae,{value:"analytics",children:"Analytics"}),e.jsx(ae,{value:"alerts",children:"Alerts"}),e.jsx(ae,{value:"settings",children:"Settings"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Monthly"}),e.jsx("p",{className:"text-2xl font-bold",children:N(w.totalAmount,"THB")})]}),e.jsx(Je,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Bills"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:N(w.paidAmount,"THB")})]}),e.jsx(Fe,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:N(w.pendingAmount,"THB")})]}),e.jsx(et,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:N(w.overdueAmount,"THB")})]}),e.jsx(Et,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:v.map(C=>{const P=C.icon,$=y.filter(I=>I.type===C.id),V=$.reduce((I,_)=>I+_.amount,0);return e.jsx(E,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(P,{className:`w-8 h-8 mx-auto mb-2 ${C.color}`}),e.jsx("p",{className:"font-medium text-sm",children:C.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[$.length," bills"]}),e.jsx("p",{className:"text-sm font-bold mt-1",children:N(V,"THB")})]})},C.id)})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent Bills"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(C=>{const P=g.find(_=>_.id===C.propertyId),$=v.find(_=>_.id===C.type),V=k(C.status),I=($==null?void 0:$.icon)||Lo;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:`w-5 h-5 ${$==null?void 0:$.color}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:P==null?void 0:P.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[$==null?void 0:$.name,"  ",C.period]}),e.jsx("p",{className:"text-xs text-gray-500",children:C.provider})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx(z,{className:S(C.status),children:C.status})]}),e.jsx("p",{className:"font-bold",children:N(C.amount,C.currency)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Due: ",C.dueDate]})]})]},C.id)})})})]})]}),e.jsxs(ie,{value:"bills",className:"space-y-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),g.map(C=>e.jsx(A,{value:C.id.toString(),children:C.name},C.id))]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Utilities"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Utilities"}),v.map(C=>e.jsx(A,{value:C.id,children:C.name},C.id))]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Current Month"})}),e.jsxs(te,{children:[e.jsx(A,{value:"current",children:"Current Month"}),e.jsx(A,{value:"last",children:"Last Month"}),e.jsx(A,{value:"last3",children:"Last 3 Months"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{children:["Utility Bills (",T.length,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:T.map(C=>{const P=g.find(_=>_.id===C.propertyId),$=v.find(_=>_.id===C.type),V=k(C.status),I=($==null?void 0:$.icon)||Lo;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:`w-6 h-6 ${$==null?void 0:$.color}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:P==null?void 0:P.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[$==null?void 0:$.name," Bill"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx(z,{className:S(C.status),children:C.status})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Provider"}),e.jsx("p",{className:"font-medium",children:C.provider})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Period"}),e.jsx("p",{className:"font-medium",children:C.period})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Usage"}),e.jsx("p",{className:"font-medium",children:C.usage})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-bold text-lg",children:N(C.amount,C.currency)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Due: ",C.dueDate,"  Account: ",C.accountNumber]}),e.jsxs("div",{className:"flex gap-2",children:[C.receiptUrl&&e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Gt,{className:"w-4 h-4 mr-1"}),"View Receipt"]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(vt,{className:"w-4 h-4 mr-1"}),"Mark Paid"]})]})]})]},C.id)})})})]})]}),e.jsx(ie,{value:"accounts",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Utility Accounts Setup"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:g.map(C=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:C.name}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map(P=>{const $=P.icon;return e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:`w-4 h-4 ${P.color}`}),e.jsx("span",{className:"text-sm",children:P.name})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{d({property:C.name,utilityType:P.name,provider:"",accountNumber:"",rate:"",autoPayEnabled:!1}),o(!0)},children:"Setup"})]},P.id)})})]},C.id))})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Monthly Trends"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"January 2025"}),e.jsx("span",{className:"font-bold",children:N(8940,"THB")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"December 2024"}),e.jsx("span",{className:"font-bold",children:N(8230,"THB")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"November 2024"}),e.jsx("span",{className:"font-bold",children:N(7890,"THB")})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Cost by Utility Type"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:v.map(C=>{const $=y.filter(I=>I.type===C.id).reduce((I,_)=>I+_.amount,0),V=C.icon;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:`w-4 h-4 ${C.color}`}),e.jsx("span",{className:"text-sm",children:C.name})]}),e.jsx("span",{className:"font-medium",children:N($,"THB")})]},C.id)})})})]})]})}),e.jsx(ie,{value:"alerts",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{children:"Utility Alert System"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>f.mutate(),disabled:f.isPending,children:[e.jsx(Zj,{className:"w-4 h-4 mr-2"}),f.isPending?"Testing...":"Test Alert"]}),e.jsxs(M,{size:"sm",onClick:()=>p.mutate(),disabled:p.isPending,children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),p.isPending?"Checking...":"Manual Check"]})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:x?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Ss,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"Loading alerts..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xn,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Alerts"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"All utility bills are up to date. Use the buttons above to test the alert system."})]}):h.map(C=>{const P={urgent:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:Et,iconColor:"text-red-500"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:et,iconColor:"text-yellow-500"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:xn,iconColor:"text-blue-500"}},$=P[C.alertSeverity]||P.info,V=$.icon;return e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded ${$.bg} ${$.border}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:`w-5 h-5 ${$.iconColor}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${$.text}`,children:C.alertTitle}),e.jsx("p",{className:`text-sm ${$.text.replace("800","600")}`,children:C.alertMessage}),C.propertyName&&e.jsxs("p",{className:`text-xs ${$.text.replace("800","500")} mt-1`,children:["Property: ",C.propertyName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:C.alertSeverity==="urgent"?"destructive":"secondary",children:C.alertStatus||"Active"}),e.jsx(M,{size:"sm",variant:"outline",children:C.alertSeverity==="urgent"?"Resolve":"View"})]})]},C.id)})})})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Notification Settings"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive email alerts for due bills"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get SMS alerts for overdue bills"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-pay Reminders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reminders 7 days before due date"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Default Currency"}),e.jsxs(se,{defaultValue:"THB",children:[e.jsx(ee,{className:"w-32",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"THB",children:"THB"}),e.jsx(A,{value:"USD",children:"USD"}),e.jsx(A,{value:"EUR",children:"EUR"}),e.jsx(A,{value:"IDR",children:"IDR"})]})]})]}),e.jsx(M,{children:"Save Settings"})]})})]})})]}),e.jsx(Ke,{open:l,onOpenChange:o,children:e.jsxs(Ye,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Setup Utility Account"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Property"}),e.jsx(G,{value:c.property,disabled:!0,className:"bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Utility Type"}),e.jsx(G,{value:c.utilityType,disabled:!0,className:"bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Provider Name"}),e.jsx(G,{placeholder:"e.g., PEA, Metropolitan Waterworks",value:c.provider,onChange:C=>d({...c,provider:C.target.value})})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Account Number"}),e.jsx(G,{placeholder:"Enter account number",value:c.accountNumber,onChange:C=>d({...c,accountNumber:C.target.value})})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Rate per Unit (THB)"}),e.jsx(G,{type:"number",placeholder:"e.g., 7.50",value:c.rate,onChange:C=>d({...c,rate:C.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(At,{checked:c.autoPayEnabled,onCheckedChange:C=>d({...c,autoPayEnabled:C})}),e.jsx(W,{children:"Enable Auto-pay Notifications"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{className:"flex-1",onClick:()=>{console.log("Setting up utility account:",c),o(!1),d({property:"",utilityType:"",provider:"",accountNumber:"",rate:"",autoPayEnabled:!1})},children:"Save Account Setup"}),e.jsx(M,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]})})]})}function $U(){const[t,s]=b.useState("all"),[n,r]=b.useState({email:!0,sms:!1,inApp:!0,slack:!1}),a=[{id:1,name:"Villa Samui Breeze",location:"Koh Samui"},{id:2,name:"Villa Tropical Paradise",location:"Phuket"},{id:3,name:"Villa Aruna",location:"Bali"},{id:4,name:"Villa Gala",location:"Krabi"}],i=[{id:1,type:"maintenance",priority:"high",title:"Pool Maintenance Due",description:"Villa Samui Breeze pool hasn't been cleaned in 6 days. AI recommends immediate action based on guest check-in tomorrow.",property:"Villa Samui Breeze",confidence:92,suggestedAction:"Schedule pool cleaning",estimatedCost:800,currency:"THB",dueDate:"2025-01-23",aiReasoning:"Historical data shows guest complaints increase by 45% when pool maintenance exceeds 7 days"},{id:2,type:"booking",priority:"medium",title:"Price Optimization Opportunity",description:"Villa Tropical Paradise rates are 15% below market average for next weekend. AI suggests price adjustment.",property:"Villa Tropical Paradise",confidence:87,suggestedAction:"Increase rates by 12%",estimatedCost:0,currency:"THB",dueDate:"2025-01-24",aiReasoning:"Similar properties in area showing 95% occupancy at higher rates"},{id:3,type:"guest",priority:"low",title:"Guest Experience Enhancement",description:"Repeat guest Sarah Johnson prefers extra towels. AI suggests proactive preparation.",property:"Villa Aruna",confidence:78,suggestedAction:"Add extra towels to housekeeping checklist",estimatedCost:0,currency:"THB",dueDate:"2025-01-25",aiReasoning:"Guest mentioned towel preference in previous 3 stays"},{id:4,type:"financial",priority:"high",title:"Utility Bill Alert",description:"Villa Gala electricity usage up 35% this month. AI recommends investigation.",property:"Villa Gala",confidence:95,suggestedAction:"Check AC units and appliances",estimatedCost:500,currency:"THB",dueDate:"2025-01-23",aiReasoning:"Usage pattern indicates potential equipment malfunction"}],l=[{id:1,type:"sent",channel:"email",recipient:"property.manager@company.com",subject:"AI Alert: Pool Maintenance Required",timestamp:"2025-01-22 14:30:00",status:"delivered"},{id:2,type:"sent",channel:"sms",recipient:"+66 89 123 4567",subject:"Price optimization alert for Villa Tropical Paradise",timestamp:"2025-01-22 13:15:00",status:"delivered"},{id:3,type:"scheduled",channel:"email",recipient:"owner@villa-aruna.com",subject:"Weekly AI Performance Report",timestamp:"2025-01-23 09:00:00",status:"pending"}],o=[{id:1,name:"Maintenance Reminders",trigger:"Days since last service > 7",action:"Send notification to maintenance team",frequency:"Daily check",enabled:!0,properties:["All Properties"]},{id:2,name:"Price Optimization",trigger:"Rate variance > 10% from market",action:"Alert revenue manager",frequency:"Hourly check",enabled:!0,properties:["Villa Samui Breeze","Villa Tropical Paradise"]},{id:3,name:"Guest Preference Alerts",trigger:"Repeat guest booking detected",action:"Send preference reminder to housekeeping",frequency:"On booking confirmation",enabled:!1,properties:["All Properties"]}],c=h=>{switch(h){case"maintenance":return Jt;case"booking":return tt;case"guest":return dt;case"financial":return Je;default:return xn}},d=h=>{switch(h){case"maintenance":return"text-blue-500";case"booking":return"text-green-500";case"guest":return"text-purple-500";case"financial":return"text-orange-500";default:return"text-gray-500"}},u=h=>{switch(h){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=(h,x)=>new Intl.NumberFormat("en-US",{style:"currency",currency:x}).format(h);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Sa,{className:"w-8 h-8"}),"AI Notifications & Reminders"]}),e.jsx("p",{className:"text-gray-600",children:"Intelligent alerts and automated reminders powered by AI analysis"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Configure AI"]}),e.jsxs(M,{children:[e.jsx(xn,{className:"w-4 h-4 mr-2"}),"Test Notification"]})]})]}),e.jsxs(ft,{defaultValue:"insights",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"insights",children:"AI Insights"}),e.jsx(ae,{value:"automation",children:"Automation Rules"}),e.jsx(ae,{value:"history",children:"History"}),e.jsx(ae,{value:"channels",children:"Channels"}),e.jsx(ae,{value:"settings",children:"Settings"})]}),e.jsxs(ie,{value:"insights",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Insights"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(Sa,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"High Priority"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.filter(h=>h.priority==="high").length})]}),e.jsx(Et,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Confidence"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.round(i.reduce((h,x)=>h+x.confidence,0)/i.length),"%"]})]}),e.jsx(Vn,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Savings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"2,500"})]}),e.jsx(Bt,{className:"w-8 h-8 text-blue-500"})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(W,{children:"Filter by Property:"}),e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{className:"w-64",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),a.map(h=>e.jsx(A,{value:h.name,children:h.name},h.id))]})]})]})})}),e.jsx("div",{className:"space-y-4",children:i.map(h=>{const x=c(h.type);return e.jsx(E,{className:"border-l-4 border-l-blue-500",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:`w-6 h-6 ${d(h.type)}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.title}),e.jsx("p",{className:"text-sm text-gray-600",children:h.property})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:u(h.priority),children:h.priority}),e.jsxs(z,{variant:"outline",children:[h.confidence,"% confidence"]})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:h.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Suggested Action"}),e.jsx("p",{className:"text-blue-800",children:h.suggestedAction})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Estimated Cost"}),e.jsx("p",{className:"text-green-800",children:h.estimatedCost>0?m(h.estimatedCost,h.currency):"No cost"})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Due Date"}),e.jsx("p",{className:"text-orange-800",children:h.dueDate})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"AI Reasoning:"}),e.jsx("p",{className:"text-gray-700 text-sm",children:h.aiReasoning})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Accept & Schedule"]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Ea,{className:"w-4 h-4 mr-2"}),"Discuss"]}),e.jsx(M,{variant:"outline",size:"sm",children:"Dismiss"})]})]})},h.id)})})]}),e.jsx(ie,{value:"automation",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Automation Rules"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(h=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ui,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.frequency})]})]}),e.jsx(At,{checked:h.enabled})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Trigger Condition"}),e.jsx("p",{children:h.trigger})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Action"}),e.jsx("p",{children:h.action})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-gray-500 font-medium text-sm",children:"Applied to:"}),e.jsx("div",{className:"flex gap-2 mt-1",children:h.properties.map((x,p)=>e.jsx(z,{variant:"outline",children:x},p))})]})]},h.id))})})]})}),e.jsx(ie,{value:"history",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Notification History"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:l.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h.channel==="email"&&e.jsx(Gi,{className:"w-4 h-4 text-blue-500"}),h.channel==="sms"&&e.jsx(RX,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:h.subject}),e.jsxs("p",{className:"text-xs text-gray-600",children:["To: ",h.recipient]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.timestamp})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(z,{className:h.status==="delivered"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:h.status})})]},h.id))})})]})}),e.jsx(ie,{value:"channels",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Email Notifications"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enable Email Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send notifications via email"})]}),e.jsx(At,{checked:n.email,onCheckedChange:h=>r({...n,email:h})})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Default Recipients"}),e.jsx(G,{value:"admin@hostpilotpro.com",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Email Template"}),e.jsxs(se,{defaultValue:"standard",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"standard",children:"Standard Template"}),e.jsx(A,{value:"detailed",children:"Detailed Template"}),e.jsx(A,{value:"minimal",children:"Minimal Template"})]})]})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"SMS Notifications"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enable SMS Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send critical alerts via SMS"})]}),e.jsx(At,{checked:n.sms,onCheckedChange:h=>r({...n,sms:h})})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Phone Number"}),e.jsx(G,{value:"+66 89 123 4567",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Priority Threshold"}),e.jsxs(se,{defaultValue:"high",children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Alerts"}),e.jsx(A,{value:"medium",children:"Medium & High"}),e.jsx(A,{value:"high",children:"High Priority Only"})]})]})]})]})]})]})}),e.jsx(ie,{value:"settings",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"AI Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(W,{children:"AI Analysis Frequency"}),e.jsxs(se,{defaultValue:"hourly",children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"realtime",children:"Real-time"}),e.jsx(A,{value:"hourly",children:"Every Hour"}),e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Minimum Confidence Level"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(G,{type:"range",min:"50",max:"95",defaultValue:"75",className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium",children:"75%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Learning Mode"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow AI to learn from user actions"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Proactive Suggestions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate preventive recommendations"})]}),e.jsx(At,{defaultChecked:!0})]}),e.jsx(M,{children:"Save AI Settings"})]})]})})]})]})}const ude=Object.freeze(Object.defineProperty({__proto__:null,default:$U},Symbol.toStringTag,{value:"Module"}));function mde(){const[t,s]=b.useState("all"),[n,r]=b.useState("month"),[a,i]=b.useState(!1),[l,o]=b.useState({reportType:"comprehensive",includeRevenue:!0,includeExpenses:!0,includeOwnerBalances:!0,includeTransactions:!0,format:"pdf"}),c=[{id:1,name:"Villa Samui Breeze",location:"Koh Samui"},{id:2,name:"Villa Tropical Paradise",location:"Phuket"},{id:3,name:"Villa Aruna",location:"Bali"},{id:4,name:"Villa Gala",location:"Krabi"}],d={totalRevenue:245e3,totalExpenses:89500,netProfit:155500,profitMargin:63.4,ownerPayouts:171500,pendingPayouts:28750,commissions:24500,managementFees:36750},u=[{source:"Airbnb",amount:125e3,percentage:51,bookings:28},{source:"VRBO",amount:75e3,percentage:31,bookings:18},{source:"Booking.com",amount:3e4,percentage:12,bookings:12},{source:"Direct",amount:15e3,percentage:6,bookings:5}],m=[{category:"Cleaning & Maintenance",amount:32500,percentage:36.3},{category:"Utilities",amount:28e3,percentage:31.3},{category:"Marketing",amount:12e3,percentage:13.4},{category:"Property Management",amount:1e4,percentage:11.2},{category:"Insurance & Legal",amount:7e3,percentage:7.8}],h=[{id:1,ownerName:"John Smith",property:"Villa Samui Breeze",currentBalance:45e3,pendingPayout:12500,lastPayout:"2025-01-15",totalEarnings:156e3,status:"active"},{id:2,ownerName:"Sarah Johnson",property:"Villa Tropical Paradise",currentBalance:28e3,pendingPayout:8750,lastPayout:"2025-01-18",totalEarnings:98500,status:"active"},{id:3,ownerName:"Michael Chen",property:"Villa Aruna",currentBalance:35e3,pendingPayout:5500,lastPayout:"2025-01-20",totalEarnings:125e3,status:"pending_review"},{id:4,ownerName:"Lisa Wong",property:"Villa Gala",currentBalance:52e3,pendingPayout:2e3,lastPayout:"2025-01-12",totalEarnings:18e4,status:"active"}],x=[{id:1,date:"2025-01-22",type:"revenue",description:"Airbnb booking - Villa Samui Breeze",amount:8500,property:"Villa Samui Breeze",status:"completed"},{id:2,date:"2025-01-22",type:"expense",description:"Pool cleaning service",amount:-800,property:"Villa Tropical Paradise",status:"completed"},{id:3,date:"2025-01-21",type:"payout",description:"Owner payout - John Smith",amount:-12500,property:"Villa Samui Breeze",status:"pending"},{id:4,date:"2025-01-21",type:"commission",description:"Management fee - 15%",amount:1275,property:"Villa Tropical Paradise",status:"completed"}],p=v=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(v),f=v=>{switch(v){case"revenue":return H$;case"expense":return z$;case"payout":return Fi;case"commission":return Vn;default:return Wi}},j=v=>{switch(v){case"revenue":return"text-green-600";case"expense":return"text-red-600";case"payout":return"text-blue-600";case"commission":return"text-purple-600";default:return"text-gray-600"}},g=v=>{switch(v){case"active":return"bg-green-100 text-green-800";case"pending_review":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},y=v=>{switch(v){case"active":case"completed":return Fe;case"pending_review":case"pending":return et;default:return Ut}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Pa,{className:"w-8 h-8"}),"Finance Engine"]}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive financial management and analytics dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),c.map(v=>e.jsx(A,{value:v.id.toString(),children:v.name},v.id))]})]}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{className:"w-32",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{onClick:()=>i(!0),children:"Generate Report"})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-6",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"revenue",children:"Revenue"}),e.jsx(ae,{value:"expenses",children:"Expenses"}),e.jsx(ae,{value:"owners",children:"Owner Balances"}),e.jsx(ae,{value:"transactions",children:"Transactions"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:p(d.totalRevenue)})]}),e.jsx(Bt,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:p(d.totalExpenses)})]}),e.jsx(Ed,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p(d.netProfit)})]}),e.jsx(Je,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Profit Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[d.profitMargin,"%"]})]}),e.jsx(Vn,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ap,{className:"w-5 h-5"}),"Revenue by Source"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500",style:{backgroundColor:`hsl(${220+w*30}, 70%, 50%)`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:v.source}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v.bookings," bookings"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:p(v.amount)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v.percentage,"%"]})]})]},w))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"w-5 h-5"}),"Expense Categories"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:m.map((v,w)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500",style:{backgroundColor:`hsl(${10+w*25}, 70%, 50%)`}}),e.jsx("p",{className:"font-medium",children:v.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:p(v.amount)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v.percentage,"%"]})]})]},w))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(E,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(Fi,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Owner Payouts"}),e.jsx("p",{className:"text-xl font-bold",children:p(d.ownerPayouts)})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(et,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Payouts"}),e.jsx("p",{className:"text-xl font-bold",children:p(d.pendingPayouts)})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(Vn,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Commissions"}),e.jsx("p",{className:"text-xl font-bold",children:p(d.commissions)})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(yr,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Management Fees"}),e.jsx("p",{className:"text-xl font-bold",children:p(d.managementFees)})]})})]})]}),e.jsx(ie,{value:"revenue",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Revenue Analysis"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Revenue by Platform"}),e.jsx("div",{className:"space-y-2",children:u.map((v,w)=>e.jsxs("div",{className:"flex justify-between items-center p-2 rounded border",children:[e.jsx("span",{children:v.source}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:p(v.amount)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[v.bookings," bookings"]})]})]},w))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Monthly Trend"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"January 2025"}),e.jsx("span",{className:"font-bold",children:p(245e3)})]}),e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"December 2024"}),e.jsx("span",{className:"font-bold",children:p(22e4)})]}),e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"November 2024"}),e.jsx("span",{className:"font-bold",children:p(198e3)})]})]})]})]})})]})}),e.jsx(ie,{value:"expenses",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Expense Analysis"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:m.map((v,w)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:v.category}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:p(v.amount)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[v.percentage,"% of total"]})]})]})},w))})})]})}),e.jsx(ie,{value:"owners",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Owner Balances & Payouts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:h.map(v=>{const w=y(v.status);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:v.ownerName}),e.jsx("p",{className:"text-sm text-gray-600",children:v.property})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx(z,{className:g(v.status),children:v.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Current Balance"}),e.jsx("p",{className:"font-bold text-lg",children:p(v.currentBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Pending Payout"}),e.jsx("p",{className:"font-bold text-yellow-600",children:p(v.pendingPayout)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Last Payout"}),e.jsx("p",{className:"font-medium",children:v.lastPayout})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Earnings"}),e.jsx("p",{className:"font-bold text-green-600",children:p(v.totalEarnings)})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(M,{size:"sm",variant:"outline",children:"Process Payout"}),e.jsx(M,{size:"sm",variant:"outline",children:"View Details"})]})]},v.id)})})})]})}),e.jsx(ie,{value:"transactions",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent Transactions"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:x.map(v=>{const w=f(v.type),N=y(v.status);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:`w-5 h-5 ${j(v.type)}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:v.description}),e.jsx("p",{className:"text-sm text-gray-600",children:v.property}),e.jsx("p",{className:"text-xs text-gray-500",children:v.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx(z,{className:g(v.status),children:v.status})]}),e.jsxs("p",{className:`font-bold text-lg ${v.amount>0?"text-green-600":"text-red-600"}`,children:[v.amount>0?"+":"",p(Math.abs(v.amount))]})]})]},v.id)})})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Performance Metrics"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Average Daily Revenue"}),e.jsx("span",{className:"font-bold",children:p(7903)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Revenue Growth (MoM)"}),e.jsx("span",{className:"font-bold text-green-600",children:"+11.4%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Expense Ratio"}),e.jsx("span",{className:"font-bold",children:"36.5%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Owner Satisfaction"}),e.jsx("span",{className:"font-bold text-green-600",children:"94.2%"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Financial Goals"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Monthly Revenue Target"}),e.jsx("span",{children:"97.8%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"97.8%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Expense Control"}),e.jsx("span",{children:"89.5%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"89.5%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Profit Margin Goal"}),e.jsx("span",{children:"105.7%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"100%"}})})]})]})})]})]})})]})]})}var hde=Array.isArray,Fr=hde,xde=typeof sg=="object"&&sg&&sg.Object===Object&&sg,FU=xde,pde=FU,fde=typeof self=="object"&&self&&self.Object===Object&&self,gde=pde||fde||Function("return this")(),tl=gde,vde=tl,yde=vde.Symbol,Uf=yde,HE=Uf,LU=Object.prototype,jde=LU.hasOwnProperty,bde=LU.toString,Wh=HE?HE.toStringTag:void 0;function Nde(t){var s=jde.call(t,Wh),n=t[Wh];try{t[Wh]=void 0;var r=!0}catch{}var a=bde.call(t);return r&&(s?t[Wh]=n:delete t[Wh]),a}var wde=Nde,Sde=Object.prototype,Cde=Sde.toString;function kde(t){return Cde.call(t)}var Pde=kde,GE=Uf,Ade=wde,Tde=Pde,Dde="[object Null]",Ede="[object Undefined]",WE=GE?GE.toStringTag:void 0;function Ode(t){return t==null?t===void 0?Ede:Dde:WE&&WE in Object(t)?Ade(t):Tde(t)}var Hl=Ode;function Mde(t){return t!=null&&typeof t=="object"}var Gl=Mde,_de=Hl,Rde=Gl,Ide="[object Symbol]";function $de(t){return typeof t=="symbol"||Rde(t)&&_de(t)==Ide}var gh=$de,Fde=Fr,Lde=gh,Bde=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vde=/^\w*$/;function Ude(t,s){if(Fde(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Lde(t)?!0:Vde.test(t)||!Bde.test(t)||s!=null&&t in Object(s)}var QP=Ude;function zde(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var dc=zde;const vh=fs(dc);var qde=Hl,Hde=dc,Gde="[object AsyncFunction]",Wde="[object Function]",Kde="[object GeneratorFunction]",Yde="[object Proxy]";function Qde(t){if(!Hde(t))return!1;var s=qde(t);return s==Wde||s==Kde||s==Gde||s==Yde}var XP=Qde;const Dt=fs(XP);var Xde=tl,Zde=Xde["__core-js_shared__"],Jde=Zde,sw=Jde,KE=function(){var t=/[^.]+$/.exec(sw&&sw.keys&&sw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function eue(t){return!!KE&&KE in t}var tue=eue,sue=Function.prototype,nue=sue.toString;function rue(t){if(t!=null){try{return nue.call(t)}catch{}try{return t+""}catch{}}return""}var BU=rue,aue=XP,iue=tue,lue=dc,oue=BU,cue=/[\\^$.*+?()[\]{}|]/g,due=/^\[object .+?Constructor\]$/,uue=Function.prototype,mue=Object.prototype,hue=uue.toString,xue=mue.hasOwnProperty,pue=RegExp("^"+hue.call(xue).replace(cue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fue(t){if(!lue(t)||iue(t))return!1;var s=aue(t)?pue:due;return s.test(oue(t))}var gue=fue;function vue(t,s){return t==null?void 0:t[s]}var yue=vue,jue=gue,bue=yue;function Nue(t,s){var n=bue(t,s);return jue(n)?n:void 0}var Rd=Nue,wue=Rd,Sue=wue(Object,"create"),I0=Sue,YE=I0;function Cue(){this.__data__=YE?YE(null):{},this.size=0}var kue=Cue;function Pue(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var Aue=Pue,Tue=I0,Due="__lodash_hash_undefined__",Eue=Object.prototype,Oue=Eue.hasOwnProperty;function Mue(t){var s=this.__data__;if(Tue){var n=s[t];return n===Due?void 0:n}return Oue.call(s,t)?s[t]:void 0}var _ue=Mue,Rue=I0,Iue=Object.prototype,$ue=Iue.hasOwnProperty;function Fue(t){var s=this.__data__;return Rue?s[t]!==void 0:$ue.call(s,t)}var Lue=Fue,Bue=I0,Vue="__lodash_hash_undefined__";function Uue(t,s){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bue&&s===void 0?Vue:s,this}var zue=Uue,que=kue,Hue=Aue,Gue=_ue,Wue=Lue,Kue=zue;function yh(t){var s=-1,n=t==null?0:t.length;for(this.clear();++s<n;){var r=t[s];this.set(r[0],r[1])}}yh.prototype.clear=que;yh.prototype.delete=Hue;yh.prototype.get=Gue;yh.prototype.has=Wue;yh.prototype.set=Kue;var Yue=yh;function Que(){this.__data__=[],this.size=0}var Xue=Que;function Zue(t,s){return t===s||t!==t&&s!==s}var ZP=Zue,Jue=ZP;function eme(t,s){for(var n=t.length;n--;)if(Jue(t[n][0],s))return n;return-1}var $0=eme,tme=$0,sme=Array.prototype,nme=sme.splice;function rme(t){var s=this.__data__,n=tme(s,t);if(n<0)return!1;var r=s.length-1;return n==r?s.pop():nme.call(s,n,1),--this.size,!0}var ame=rme,ime=$0;function lme(t){var s=this.__data__,n=ime(s,t);return n<0?void 0:s[n][1]}var ome=lme,cme=$0;function dme(t){return cme(this.__data__,t)>-1}var ume=dme,mme=$0;function hme(t,s){var n=this.__data__,r=mme(n,t);return r<0?(++this.size,n.push([t,s])):n[r][1]=s,this}var xme=hme,pme=Xue,fme=ame,gme=ome,vme=ume,yme=xme;function jh(t){var s=-1,n=t==null?0:t.length;for(this.clear();++s<n;){var r=t[s];this.set(r[0],r[1])}}jh.prototype.clear=pme;jh.prototype.delete=fme;jh.prototype.get=gme;jh.prototype.has=vme;jh.prototype.set=yme;var F0=jh,jme=Rd,bme=tl,Nme=jme(bme,"Map"),JP=Nme,QE=Yue,wme=F0,Sme=JP;function Cme(){this.size=0,this.__data__={hash:new QE,map:new(Sme||wme),string:new QE}}var kme=Cme;function Pme(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var Ame=Pme,Tme=Ame;function Dme(t,s){var n=t.__data__;return Tme(s)?n[typeof s=="string"?"string":"hash"]:n.map}var L0=Dme,Eme=L0;function Ome(t){var s=Eme(this,t).delete(t);return this.size-=s?1:0,s}var Mme=Ome,_me=L0;function Rme(t){return _me(this,t).get(t)}var Ime=Rme,$me=L0;function Fme(t){return $me(this,t).has(t)}var Lme=Fme,Bme=L0;function Vme(t,s){var n=Bme(this,t),r=n.size;return n.set(t,s),this.size+=n.size==r?0:1,this}var Ume=Vme,zme=kme,qme=Mme,Hme=Ime,Gme=Lme,Wme=Ume;function bh(t){var s=-1,n=t==null?0:t.length;for(this.clear();++s<n;){var r=t[s];this.set(r[0],r[1])}}bh.prototype.clear=zme;bh.prototype.delete=qme;bh.prototype.get=Hme;bh.prototype.has=Gme;bh.prototype.set=Wme;var eA=bh,VU=eA,Kme="Expected a function";function tA(t,s){if(typeof t!="function"||s!=null&&typeof s!="function")throw new TypeError(Kme);var n=function(){var r=arguments,a=s?s.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var l=t.apply(this,r);return n.cache=i.set(a,l)||i,l};return n.cache=new(tA.Cache||VU),n}tA.Cache=VU;var UU=tA;const Yme=fs(UU);var Qme=UU,Xme=500;function Zme(t){var s=Qme(t,function(r){return n.size===Xme&&n.clear(),r}),n=s.cache;return s}var Jme=Zme,ehe=Jme,the=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,she=/\\(\\)?/g,nhe=ehe(function(t){var s=[];return t.charCodeAt(0)===46&&s.push(""),t.replace(the,function(n,r,a,i){s.push(a?i.replace(she,"$1"):r||n)}),s}),rhe=nhe;function ahe(t,s){for(var n=-1,r=t==null?0:t.length,a=Array(r);++n<r;)a[n]=s(t[n],n,t);return a}var sA=ahe,XE=Uf,ihe=sA,lhe=Fr,ohe=gh,ZE=XE?XE.prototype:void 0,JE=ZE?ZE.toString:void 0;function zU(t){if(typeof t=="string")return t;if(lhe(t))return ihe(t,zU)+"";if(ohe(t))return JE?JE.call(t):"";var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var che=zU,dhe=che;function uhe(t){return t==null?"":dhe(t)}var qU=uhe,mhe=Fr,hhe=QP,xhe=rhe,phe=qU;function fhe(t,s){return mhe(t)?t:hhe(t,s)?[t]:xhe(phe(t))}var HU=fhe,ghe=gh;function vhe(t){if(typeof t=="string"||ghe(t))return t;var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var B0=vhe,yhe=HU,jhe=B0;function bhe(t,s){s=yhe(s,t);for(var n=0,r=s.length;t!=null&&n<r;)t=t[jhe(s[n++])];return n&&n==r?t:void 0}var nA=bhe,Nhe=nA;function whe(t,s,n){var r=t==null?void 0:Nhe(t,s);return r===void 0?n:r}var GU=whe;const ea=fs(GU);function She(t){return t==null}var Che=She;const It=fs(Che);var khe=Hl,Phe=Fr,Ahe=Gl,The="[object String]";function Dhe(t){return typeof t=="string"||!Phe(t)&&Ahe(t)&&khe(t)==The}var Ehe=Dhe;const jd=fs(Ehe);var WU={exports:{}},js={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA=Symbol.for("react.element"),aA=Symbol.for("react.portal"),V0=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),z0=Symbol.for("react.profiler"),q0=Symbol.for("react.provider"),H0=Symbol.for("react.context"),Ohe=Symbol.for("react.server_context"),G0=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),K0=Symbol.for("react.suspense_list"),Y0=Symbol.for("react.memo"),Q0=Symbol.for("react.lazy"),Mhe=Symbol.for("react.offscreen"),KU;KU=Symbol.for("react.module.reference");function $a(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case rA:switch(t=t.type,t){case V0:case z0:case U0:case W0:case K0:return t;default:switch(t=t&&t.$$typeof,t){case Ohe:case H0:case G0:case Q0:case Y0:case q0:return t;default:return s}}case aA:return s}}}js.ContextConsumer=H0;js.ContextProvider=q0;js.Element=rA;js.ForwardRef=G0;js.Fragment=V0;js.Lazy=Q0;js.Memo=Y0;js.Portal=aA;js.Profiler=z0;js.StrictMode=U0;js.Suspense=W0;js.SuspenseList=K0;js.isAsyncMode=function(){return!1};js.isConcurrentMode=function(){return!1};js.isContextConsumer=function(t){return $a(t)===H0};js.isContextProvider=function(t){return $a(t)===q0};js.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===rA};js.isForwardRef=function(t){return $a(t)===G0};js.isFragment=function(t){return $a(t)===V0};js.isLazy=function(t){return $a(t)===Q0};js.isMemo=function(t){return $a(t)===Y0};js.isPortal=function(t){return $a(t)===aA};js.isProfiler=function(t){return $a(t)===z0};js.isStrictMode=function(t){return $a(t)===U0};js.isSuspense=function(t){return $a(t)===W0};js.isSuspenseList=function(t){return $a(t)===K0};js.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===V0||t===z0||t===U0||t===W0||t===K0||t===Mhe||typeof t=="object"&&t!==null&&(t.$$typeof===Q0||t.$$typeof===Y0||t.$$typeof===q0||t.$$typeof===H0||t.$$typeof===G0||t.$$typeof===KU||t.getModuleId!==void 0)};js.typeOf=$a;WU.exports=js;var _he=WU.exports,Rhe=Hl,Ihe=Gl,$he="[object Number]";function Fhe(t){return typeof t=="number"||Ihe(t)&&Rhe(t)==$he}var YU=Fhe;const Lhe=fs(YU);var Bhe=YU;function Vhe(t){return Bhe(t)&&t!=+t}var Uhe=Vhe;const zf=fs(Uhe);var pr=function(s){return s===0?0:s>0?1:-1},$c=function(s){return jd(s)&&s.indexOf("%")===s.length-1},He=function(s){return Lhe(s)&&!zf(s)},zhe=function(s){return It(s)},_n=function(s){return He(s)||jd(s)},qhe=0,Nh=function(s){var n=++qhe;return"".concat(s||"").concat(n)},fr=function(s,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!He(s)&&!jd(s))return r;var i;if($c(s)){var l=s.indexOf("%");i=n*parseFloat(s.slice(0,l))/100}else i=+s;return zf(i)&&(i=r),a&&i>n&&(i=n),i},ho=function(s){if(!s)return null;var n=Object.keys(s);return n&&n.length?s[n[0]]:null},Hhe=function(s){if(!Array.isArray(s))return!1;for(var n=s.length,r={},a=0;a<n;a++)if(!r[s[a]])r[s[a]]=!0;else return!0;return!1},Kr=function(s,n){return He(s)&&He(n)?function(r){return s+r*(n-s)}:function(){return n}};function by(t,s,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof s=="function"?s(r):ea(r,s))===n})}var Ghe=function(s,n){return He(s)&&He(n)?s-n:jd(s)&&jd(n)?s.localeCompare(n):s instanceof Date&&n instanceof Date?s.getTime()-n.getTime():String(s).localeCompare(String(n))};function Bu(t,s){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(s,n)||t[n]!==s[n]))return!1;for(var r in s)if({}.hasOwnProperty.call(s,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function L2(t){"@babel/helpers - typeof";return L2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},L2(t)}var Whe=["viewBox","children"],Khe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],eO=["points","pathLength"],nw={svg:Whe,polygon:eO,polyline:eO},iA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ny=function(s,n){if(!s||typeof s=="function"||typeof s=="boolean")return null;var r=s;if(b.isValidElement(s)&&(r=s.props),!vh(r))return null;var a={};return Object.keys(r).forEach(function(i){iA.includes(i)&&(a[i]=n||function(l){return r[i](r,l)})}),a},Yhe=function(s,n,r){return function(a){return s(n,r,a),null}},bd=function(s,n,r){if(!vh(s)||L2(s)!=="object")return null;var a=null;return Object.keys(s).forEach(function(i){var l=s[i];iA.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=Yhe(l,n,r))}),a},Qhe=["children"],Xhe=["children"];function tO(t,s){if(t==null)return{};var n=Zhe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zhe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function B2(t){"@babel/helpers - typeof";return B2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},B2(t)}var sO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Sl=function(s){return typeof s=="string"?s:s?s.displayName||s.name||"Component":""},nO=null,rw=null,lA=function t(s){if(s===nO&&Array.isArray(rw))return rw;var n=[];return b.Children.forEach(s,function(r){It(r)||(_he.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),rw=n,nO=s,n};function ta(t,s){var n=[],r=[];return Array.isArray(s)?r=s.map(function(a){return Sl(a)}):r=[Sl(s)],lA(t).forEach(function(a){var i=ea(a,"type.displayName")||ea(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function qr(t,s){var n=ta(t,s);return n&&n[0]}var rO=function(s){if(!s||!s.props)return!1;var n=s.props,r=n.width,a=n.height;return!(!He(r)||r<=0||!He(a)||a<=0)},Jhe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],exe=function(s){return s&&s.type&&jd(s.type)&&Jhe.indexOf(s.type)>=0},txe=function(s){return s&&B2(s)==="object"&&"clipDot"in s},sxe=function(s,n,r,a){var i,l=(i=nw==null?void 0:nw[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Dt(s)&&(a&&l.includes(n)||Khe.includes(n))||r&&iA.includes(n)},wt=function(s,n,r){if(!s||typeof s=="function"||typeof s=="boolean")return null;var a=s;if(b.isValidElement(s)&&(a=s.props),!vh(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;sxe((o=a)===null||o===void 0?void 0:o[l],l,n,r)&&(i[l]=a[l])}),i},V2=function t(s,n){if(s===n)return!0;var r=b.Children.count(s);if(r!==b.Children.count(n))return!1;if(r===0)return!0;if(r===1)return aO(Array.isArray(s)?s[0]:s,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=s[a],l=n[a];if(Array.isArray(i)||Array.isArray(l)){if(!t(i,l))return!1}else if(!aO(i,l))return!1}return!0},aO=function(s,n){if(It(s)&&It(n))return!0;if(!It(s)&&!It(n)){var r=s.props||{},a=r.children,i=tO(r,Qhe),l=n.props||{},o=l.children,c=tO(l,Xhe);return a&&o?Bu(i,c)&&V2(a,o):!a&&!o?Bu(i,c):!1}return!1},iO=function(s,n){var r=[],a={};return lA(s).forEach(function(i,l){if(exe(i))r.push(i);else if(i){var o=Sl(i.type),c=n[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var m=d(i,o,l);r.push(m),a[o]=!0}}}),r},nxe=function(s){var n=s&&s.type;return n&&sO[n]?sO[n]:null},rxe=function(s,n){return lA(n).indexOf(s)},axe=["children","width","height","viewBox","className","style","title","desc"];function U2(){return U2=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U2.apply(this,arguments)}function ixe(t,s){if(t==null)return{};var n=lxe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lxe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function z2(t){var s=t.children,n=t.width,r=t.height,a=t.viewBox,i=t.className,l=t.style,o=t.title,c=t.desc,d=ixe(t,axe),u=a||{width:n,height:r,x:0,y:0},m=$t("recharts-surface",i);return X.createElement("svg",U2({},wt(d,!0,"svg"),{className:m,width:n,height:r,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),X.createElement("title",null,o),X.createElement("desc",null,c),s)}var oxe=["children","className"];function q2(){return q2=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q2.apply(this,arguments)}function cxe(t,s){if(t==null)return{};var n=dxe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dxe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ss=X.forwardRef(function(t,s){var n=t.children,r=t.className,a=cxe(t,oxe),i=$t("recharts-layer",r);return X.createElement("g",q2({className:i},wt(a,!0),{ref:s}),n)}),ci=function(s,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function uxe(t,s,n){var r=-1,a=t.length;s<0&&(s=-s>a?0:a+s),n=n>a?a:n,n<0&&(n+=a),a=s>n?0:n-s>>>0,s>>>=0;for(var i=Array(a);++r<a;)i[r]=t[r+s];return i}var mxe=uxe,hxe=mxe;function xxe(t,s,n){var r=t.length;return n=n===void 0?r:n,!s&&n>=r?t:hxe(t,s,n)}var pxe=xxe,fxe="\\ud800-\\udfff",gxe="\\u0300-\\u036f",vxe="\\ufe20-\\ufe2f",yxe="\\u20d0-\\u20ff",jxe=gxe+vxe+yxe,bxe="\\ufe0e\\ufe0f",Nxe="\\u200d",wxe=RegExp("["+Nxe+fxe+jxe+bxe+"]");function Sxe(t){return wxe.test(t)}var QU=Sxe;function Cxe(t){return t.split("")}var kxe=Cxe,XU="\\ud800-\\udfff",Pxe="\\u0300-\\u036f",Axe="\\ufe20-\\ufe2f",Txe="\\u20d0-\\u20ff",Dxe=Pxe+Axe+Txe,Exe="\\ufe0e\\ufe0f",Oxe="["+XU+"]",H2="["+Dxe+"]",G2="\\ud83c[\\udffb-\\udfff]",Mxe="(?:"+H2+"|"+G2+")",ZU="[^"+XU+"]",JU="(?:\\ud83c[\\udde6-\\uddff]){2}",ez="[\\ud800-\\udbff][\\udc00-\\udfff]",_xe="\\u200d",tz=Mxe+"?",sz="["+Exe+"]?",Rxe="(?:"+_xe+"(?:"+[ZU,JU,ez].join("|")+")"+sz+tz+")*",Ixe=sz+tz+Rxe,$xe="(?:"+[ZU+H2+"?",H2,JU,ez,Oxe].join("|")+")",Fxe=RegExp(G2+"(?="+G2+")|"+$xe+Ixe,"g");function Lxe(t){return t.match(Fxe)||[]}var Bxe=Lxe,Vxe=kxe,Uxe=QU,zxe=Bxe;function qxe(t){return Uxe(t)?zxe(t):Vxe(t)}var Hxe=qxe,Gxe=pxe,Wxe=QU,Kxe=Hxe,Yxe=qU;function Qxe(t){return function(s){s=Yxe(s);var n=Wxe(s)?Kxe(s):void 0,r=n?n[0]:s.charAt(0),a=n?Gxe(n,1).join(""):s.slice(1);return r[t]()+a}}var Xxe=Qxe,Zxe=Xxe,Jxe=Zxe("toUpperCase"),epe=Jxe;const X0=fs(epe);function Ds(t){return function(){return t}}const nz=Math.cos,wy=Math.sin,yi=Math.sqrt,Sy=Math.PI,Z0=2*Sy,W2=Math.PI,K2=2*W2,Sc=1e-6,tpe=K2-Sc;function rz(t){this._+=t[0];for(let s=1,n=t.length;s<n;++s)this._+=arguments[s]+t[s]}function spe(t){let s=Math.floor(t);if(!(s>=0))throw new Error(`invalid digits: ${t}`);if(s>15)return rz;const n=10**s;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class npe{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?rz:spe(s)}moveTo(s,n){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,n){this._append`L${this._x1=+s},${this._y1=+n}`}quadraticCurveTo(s,n,r,a){this._append`Q${+s},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(s,n,r,a,i,l){this._append`C${+s},${+n},${+r},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(s,n,r,a,i){if(s=+s,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=r-s,d=a-n,u=l-s,m=o-n,h=u*u+m*m;if(this._x1===null)this._append`M${this._x1=s},${this._y1=n}`;else if(h>Sc)if(!(Math.abs(m*c-d*u)>Sc)||!i)this._append`L${this._x1=s},${this._y1=n}`;else{let x=r-l,p=a-o,f=c*c+d*d,j=x*x+p*p,g=Math.sqrt(f),y=Math.sqrt(h),v=i*Math.tan((W2-Math.acos((f+h-j)/(2*g*y)))/2),w=v/y,N=v/g;Math.abs(w-1)>Sc&&this._append`L${s+w*u},${n+w*m}`,this._append`A${i},${i},0,0,${+(m*x>u*p)},${this._x1=s+N*c},${this._y1=n+N*d}`}}arc(s,n,r,a,i,l){if(s=+s,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(a),c=r*Math.sin(a),d=s+o,u=n+c,m=1^l,h=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Sc||Math.abs(this._y1-u)>Sc)&&this._append`L${d},${u}`,r&&(h<0&&(h=h%K2+K2),h>tpe?this._append`A${r},${r},0,1,${m},${s-o},${n-c}A${r},${r},0,1,${m},${this._x1=d},${this._y1=u}`:h>Sc&&this._append`A${r},${r},0,${+(h>=W2)},${m},${this._x1=s+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(s,n,r,a){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function oA(t){let s=3;return t.digits=function(n){if(!arguments.length)return s;if(n==null)s=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);s=r}return t},()=>new npe(s)}function cA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function az(t){this._context=t}az.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._context.lineTo(t,s);break}}};function J0(t){return new az(t)}function iz(t){return t[0]}function lz(t){return t[1]}function oz(t,s){var n=Ds(!0),r=null,a=J0,i=null,l=oA(o);t=typeof t=="function"?t:t===void 0?iz:Ds(t),s=typeof s=="function"?s:s===void 0?lz:Ds(s);function o(c){var d,u=(c=cA(c)).length,m,h=!1,x;for(r==null&&(i=a(x=l())),d=0;d<=u;++d)!(d<u&&n(m=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(m,d,c),+s(m,d,c));if(x)return i=null,x+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ds(+c),o):t},o.y=function(c){return arguments.length?(s=typeof c=="function"?c:Ds(+c),o):s},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ds(!!c),o):n},o.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),o):a},o.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),o):r},o}function Og(t,s,n){var r=null,a=Ds(!0),i=null,l=J0,o=null,c=oA(d);t=typeof t=="function"?t:t===void 0?iz:Ds(+t),s=typeof s=="function"?s:Ds(s===void 0?0:+s),n=typeof n=="function"?n:n===void 0?lz:Ds(+n);function d(m){var h,x,p,f=(m=cA(m)).length,j,g=!1,y,v=new Array(f),w=new Array(f);for(i==null&&(o=l(y=c())),h=0;h<=f;++h){if(!(h<f&&a(j=m[h],h,m))===g)if(g=!g)x=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=x;--p)o.point(v[p],w[p]);o.lineEnd(),o.areaEnd()}g&&(v[h]=+t(j,h,m),w[h]=+s(j,h,m),o.point(r?+r(j,h,m):v[h],n?+n(j,h,m):w[h]))}if(y)return o=null,y+""||null}function u(){return oz().defined(a).curve(l).context(i)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:Ds(+m),r=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Ds(+m),d):t},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Ds(+m),d):r},d.y=function(m){return arguments.length?(s=typeof m=="function"?m:Ds(+m),n=null,d):s},d.y0=function(m){return arguments.length?(s=typeof m=="function"?m:Ds(+m),d):s},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Ds(+m),d):n},d.lineX0=d.lineY0=function(){return u().x(t).y(s)},d.lineY1=function(){return u().x(t).y(n)},d.lineX1=function(){return u().x(r).y(s)},d.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Ds(!!m),d):a},d.curve=function(m){return arguments.length?(l=m,i!=null&&(o=l(i)),d):l},d.context=function(m){return arguments.length?(m==null?i=o=null:o=l(i=m),d):i},d}class cz{constructor(s,n){this._context=s,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,n){switch(s=+s,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,n):this._context.moveTo(s,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,n,s,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,s,this._y0,s,n);break}}this._x0=s,this._y0=n}}function rpe(t){return new cz(t,!0)}function ape(t){return new cz(t,!1)}const dA={draw(t,s){const n=yi(s/Sy);t.moveTo(n,0),t.arc(0,0,n,0,Z0)}},ipe={draw(t,s){const n=yi(s/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},dz=yi(1/3),lpe=dz*2,ope={draw(t,s){const n=yi(s/lpe),r=n*dz;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},cpe={draw(t,s){const n=yi(s),r=-n/2;t.rect(r,r,n,n)}},dpe=.8908130915292852,uz=wy(Sy/10)/wy(7*Sy/10),upe=wy(Z0/10)*uz,mpe=-nz(Z0/10)*uz,hpe={draw(t,s){const n=yi(s*dpe),r=upe*n,a=mpe*n;t.moveTo(0,-n),t.lineTo(r,a);for(let i=1;i<5;++i){const l=Z0*i/5,o=nz(l),c=wy(l);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*a,c*r+o*a)}t.closePath()}},aw=yi(3),xpe={draw(t,s){const n=-yi(s/(aw*3));t.moveTo(0,n*2),t.lineTo(-aw*n,-n),t.lineTo(aw*n,-n),t.closePath()}},da=-.5,ua=yi(3)/2,Y2=1/yi(12),ppe=(Y2/2+1)*3,fpe={draw(t,s){const n=yi(s/ppe),r=n/2,a=n*Y2,i=r,l=n*Y2+n,o=-i,c=l;t.moveTo(r,a),t.lineTo(i,l),t.lineTo(o,c),t.lineTo(da*r-ua*a,ua*r+da*a),t.lineTo(da*i-ua*l,ua*i+da*l),t.lineTo(da*o-ua*c,ua*o+da*c),t.lineTo(da*r+ua*a,da*a-ua*r),t.lineTo(da*i+ua*l,da*l-ua*i),t.lineTo(da*o+ua*c,da*c-ua*o),t.closePath()}};function gpe(t,s){let n=null,r=oA(a);t=typeof t=="function"?t:Ds(t||dA),s=typeof s=="function"?s:Ds(s===void 0?64:+s);function a(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+s.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Ds(i),a):t},a.size=function(i){return arguments.length?(s=typeof i=="function"?i:Ds(+i),a):s},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function Cy(){}function ky(t,s,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+s)/6,(t._y0+4*t._y1+n)/6)}function mz(t){this._context=t}mz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ky(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ky(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function vpe(t){return new mz(t)}function hz(t){this._context=t}hz.prototype={areaStart:Cy,areaEnd:Cy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:ky(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function ype(t){return new hz(t)}function xz(t){this._context=t}xz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ky(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function jpe(t){return new xz(t)}function pz(t){this._context=t}pz.prototype={areaStart:Cy,areaEnd:Cy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,s){t=+t,s=+s,this._point?this._context.lineTo(t,s):(this._point=1,this._context.moveTo(t,s))}};function bpe(t){return new pz(t)}function lO(t){return t<0?-1:1}function oO(t,s,n){var r=t._x1-t._x0,a=s-t._x1,i=(t._y1-t._y0)/(r||a<0&&-0),l=(n-t._y1)/(a||r<0&&-0),o=(i*a+l*r)/(r+a);return(lO(i)+lO(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function cO(t,s){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-s)/2:s}function iw(t,s,n){var r=t._x0,a=t._y0,i=t._x1,l=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,a+o*s,i-o,l-o*n,i,l)}function Py(t){this._context=t}Py.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iw(this,this._t0,cO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){var n=NaN;if(t=+t,s=+s,!(t===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,iw(this,cO(this,n=oO(this,t,s)),n);break;default:iw(this,this._t0,n=oO(this,t,s));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s,this._t0=n}}};function fz(t){this._context=new gz(t)}(fz.prototype=Object.create(Py.prototype)).point=function(t,s){Py.prototype.point.call(this,s,t)};function gz(t){this._context=t}gz.prototype={moveTo:function(t,s){this._context.moveTo(s,t)},closePath:function(){this._context.closePath()},lineTo:function(t,s){this._context.lineTo(s,t)},bezierCurveTo:function(t,s,n,r,a,i){this._context.bezierCurveTo(s,t,r,n,i,a)}};function Npe(t){return new Py(t)}function wpe(t){return new fz(t)}function vz(t){this._context=t}vz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,s=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],s[0]):this._context.moveTo(t[0],s[0]),n===2)this._context.lineTo(t[1],s[1]);else for(var r=dO(t),a=dO(s),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],t[l],s[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,s){this._x.push(+t),this._y.push(+s)}};function dO(t){var s,n=t.length-1,r,a=new Array(n),i=new Array(n),l=new Array(n);for(a[0]=0,i[0]=2,l[0]=t[0]+2*t[1],s=1;s<n-1;++s)a[s]=1,i[s]=4,l[s]=4*t[s]+2*t[s+1];for(a[n-1]=2,i[n-1]=7,l[n-1]=8*t[n-1]+t[n],s=1;s<n;++s)r=a[s]/i[s-1],i[s]-=r,l[s]-=r*l[s-1];for(a[n-1]=l[n-1]/i[n-1],s=n-2;s>=0;--s)a[s]=(l[s]-a[s+1])/i[s];for(i[n-1]=(t[n]+a[n-1])/2,s=0;s<n-1;++s)i[s]=2*t[s+1]-a[s+1];return[a,i]}function Spe(t){return new vz(t)}function eb(t,s){this._context=t,this._t=s}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(t,s);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,s)}break}}this._x=t,this._y=s}};function Cpe(t){return new eb(t,.5)}function kpe(t){return new eb(t,0)}function Ppe(t){return new eb(t,1)}function km(t,s){if((l=t.length)>1)for(var n=1,r,a,i=t[s[0]],l,o=i.length;n<l;++n)for(a=i,i=t[s[n]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function Q2(t){for(var s=t.length,n=new Array(s);--s>=0;)n[s]=s;return n}function Ape(t,s){return t[s]}function Tpe(t){const s=[];return s.key=t,s}function Dpe(){var t=Ds([]),s=Q2,n=km,r=Ape;function a(i){var l=Array.from(t.apply(this,arguments),Tpe),o,c=l.length,d=-1,u;for(const m of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+r(m,l[o].key,d,i)]).data=m;for(o=0,u=cA(s(l));o<c;++o)l[u[o]].index=o;return n(l,u),l}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Ds(Array.from(i)),a):t},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Ds(+i),a):r},a.order=function(i){return arguments.length?(s=i==null?Q2:typeof i=="function"?i:Ds(Array.from(i)),a):s},a.offset=function(i){return arguments.length?(n=i??km,a):n},a}function Epe(t,s){if((r=t.length)>0){for(var n,r,a=0,i=t[0].length,l;a<i;++a){for(l=n=0;n<r;++n)l+=t[n][a][1]||0;if(l)for(n=0;n<r;++n)t[n][a][1]/=l}km(t,s)}}function Ope(t,s){if((a=t.length)>0){for(var n=0,r=t[s[0]],a,i=r.length;n<i;++n){for(var l=0,o=0;l<a;++l)o+=t[l][n][1]||0;r[n][1]+=r[n][0]=-o/2}km(t,s)}}function Mpe(t,s){if(!(!((l=t.length)>0)||!((i=(a=t[s[0]]).length)>0))){for(var n=0,r=1,a,i,l;r<i;++r){for(var o=0,c=0,d=0;o<l;++o){for(var u=t[s[o]],m=u[r][1]||0,h=u[r-1][1]||0,x=(m-h)/2,p=0;p<o;++p){var f=t[s[p]],j=f[r][1]||0,g=f[r-1][1]||0;x+=j-g}c+=m,d+=x*m}a[r-1][1]+=a[r-1][0]=n,c&&(n-=d/c)}a[r-1][1]+=a[r-1][0]=n,km(t,s)}}function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},wp(t)}var _pe=["type","size","sizeType"];function X2(){return X2=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X2.apply(this,arguments)}function uO(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function mO(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?uO(Object(n),!0).forEach(function(r){Rpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rpe(t,s,n){return s=Ipe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Ipe(t){var s=$pe(t,"string");return wp(s)=="symbol"?s:s+""}function $pe(t,s){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Fpe(t,s){if(t==null)return{};var n=Lpe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lpe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}var yz={symbolCircle:dA,symbolCross:ipe,symbolDiamond:ope,symbolSquare:cpe,symbolStar:hpe,symbolTriangle:xpe,symbolWye:fpe},Bpe=Math.PI/180,Vpe=function(s){var n="symbol".concat(X0(s));return yz[n]||dA},Upe=function(s,n,r){if(n==="area")return s;switch(r){case"cross":return 5*s*s/9;case"diamond":return .5*s*s/Math.sqrt(3);case"square":return s*s;case"star":{var a=18*Bpe;return 1.25*s*s*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*s*s/4;case"wye":return(21-10*Math.sqrt(3))*s*s/8;default:return Math.PI*s*s/4}},zpe=function(s,n){yz["symbol".concat(X0(s))]=n},uA=function(s){var n=s.type,r=n===void 0?"circle":n,a=s.size,i=a===void 0?64:a,l=s.sizeType,o=l===void 0?"area":l,c=Fpe(s,_pe),d=mO(mO({},c),{},{type:r,size:i,sizeType:o}),u=function(){var j=Vpe(r),g=gpe().type(j).size(Upe(i,o,r));return g()},m=d.className,h=d.cx,x=d.cy,p=wt(d,!0);return h===+h&&x===+x&&i===+i?X.createElement("path",X2({},p,{className:$t("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(x,")"),d:u()})):null};uA.registerSymbol=zpe;function Pm(t){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Pm(t)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z2.apply(this,arguments)}function hO(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qpe(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?hO(Object(n),!0).forEach(function(r){Sp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hpe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Gpe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bz(r.key),r)}}function Wpe(t,s,n){return s&&Gpe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kpe(t,s,n){return s=Ay(s),Ype(t,jz()?Reflect.construct(s,n||[],Ay(t).constructor):s.apply(t,n))}function Ype(t,s){if(s&&(Pm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qpe(t)}function Qpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jz=function(){return!!t})()}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ay(t)}function Xpe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&J2(t,s)}function J2(t,s){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},J2(t,s)}function Sp(t,s,n){return s=bz(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function bz(t){var s=Zpe(t,"string");return Pm(s)=="symbol"?s:s+""}function Zpe(t,s){if(Pm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ma=32,mA=function(t){function s(){return Hpe(this,s),Kpe(this,s,arguments)}return Xpe(s,t),Wpe(s,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=ma/2,l=ma/6,o=ma/3,c=r.inactive?a:r.color;if(r.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:ma,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(ma,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return X.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ma/8,"h").concat(ma,"v").concat(ma*3/4,"h").concat(-ma,"z"),className:"recharts-legend-icon"});if(X.isValidElement(r.legendIcon)){var d=qpe({},r);return delete d.legendIcon,X.cloneElement(r.legendIcon,d)}return X.createElement(uA,{fill:c,cx:i,cy:i,size:ma,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:ma,height:ma},m={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,p){var f=x.formatter||c,j=$t(Sp(Sp({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",x.inactive));if(x.type==="none")return null;var g=Dt(x.value)?null:x.value;ci(!Dt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=x.inactive?d:x.color;return X.createElement("li",Z2({className:j,style:m,key:"legend-item-".concat(p)},bd(r.props,x,p)),X.createElement(z2,{width:l,height:l,viewBox:u,style:h},r.renderIcon(x)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},f?f(g,x,p):g))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,l=r.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(b.PureComponent);Sp(mA,"displayName","Legend");Sp(mA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Jpe=F0;function efe(){this.__data__=new Jpe,this.size=0}var tfe=efe;function sfe(t){var s=this.__data__,n=s.delete(t);return this.size=s.size,n}var nfe=sfe;function rfe(t){return this.__data__.get(t)}var afe=rfe;function ife(t){return this.__data__.has(t)}var lfe=ife,ofe=F0,cfe=JP,dfe=eA,ufe=200;function mfe(t,s){var n=this.__data__;if(n instanceof ofe){var r=n.__data__;if(!cfe||r.length<ufe-1)return r.push([t,s]),this.size=++n.size,this;n=this.__data__=new dfe(r)}return n.set(t,s),this.size=n.size,this}var hfe=mfe,xfe=F0,pfe=tfe,ffe=nfe,gfe=afe,vfe=lfe,yfe=hfe;function wh(t){var s=this.__data__=new xfe(t);this.size=s.size}wh.prototype.clear=pfe;wh.prototype.delete=ffe;wh.prototype.get=gfe;wh.prototype.has=vfe;wh.prototype.set=yfe;var Nz=wh,jfe="__lodash_hash_undefined__";function bfe(t){return this.__data__.set(t,jfe),this}var Nfe=bfe;function wfe(t){return this.__data__.has(t)}var Sfe=wfe,Cfe=eA,kfe=Nfe,Pfe=Sfe;function Ty(t){var s=-1,n=t==null?0:t.length;for(this.__data__=new Cfe;++s<n;)this.add(t[s])}Ty.prototype.add=Ty.prototype.push=kfe;Ty.prototype.has=Pfe;var wz=Ty;function Afe(t,s){for(var n=-1,r=t==null?0:t.length;++n<r;)if(s(t[n],n,t))return!0;return!1}var Sz=Afe;function Tfe(t,s){return t.has(s)}var Cz=Tfe,Dfe=wz,Efe=Sz,Ofe=Cz,Mfe=1,_fe=2;function Rfe(t,s,n,r,a,i){var l=n&Mfe,o=t.length,c=s.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(t),u=i.get(s);if(d&&u)return d==s&&u==t;var m=-1,h=!0,x=n&_fe?new Dfe:void 0;for(i.set(t,s),i.set(s,t);++m<o;){var p=t[m],f=s[m];if(r)var j=l?r(f,p,m,s,t,i):r(p,f,m,t,s,i);if(j!==void 0){if(j)continue;h=!1;break}if(x){if(!Efe(s,function(g,y){if(!Ofe(x,y)&&(p===g||a(p,g,n,r,i)))return x.push(y)})){h=!1;break}}else if(!(p===f||a(p,f,n,r,i))){h=!1;break}}return i.delete(t),i.delete(s),h}var kz=Rfe,Ife=tl,$fe=Ife.Uint8Array,Ffe=$fe;function Lfe(t){var s=-1,n=Array(t.size);return t.forEach(function(r,a){n[++s]=[a,r]}),n}var Bfe=Lfe;function Vfe(t){var s=-1,n=Array(t.size);return t.forEach(function(r){n[++s]=r}),n}var hA=Vfe,xO=Uf,pO=Ffe,Ufe=ZP,zfe=kz,qfe=Bfe,Hfe=hA,Gfe=1,Wfe=2,Kfe="[object Boolean]",Yfe="[object Date]",Qfe="[object Error]",Xfe="[object Map]",Zfe="[object Number]",Jfe="[object RegExp]",ege="[object Set]",tge="[object String]",sge="[object Symbol]",nge="[object ArrayBuffer]",rge="[object DataView]",fO=xO?xO.prototype:void 0,lw=fO?fO.valueOf:void 0;function age(t,s,n,r,a,i,l){switch(n){case rge:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case nge:return!(t.byteLength!=s.byteLength||!i(new pO(t),new pO(s)));case Kfe:case Yfe:case Zfe:return Ufe(+t,+s);case Qfe:return t.name==s.name&&t.message==s.message;case Jfe:case tge:return t==s+"";case Xfe:var o=qfe;case ege:var c=r&Gfe;if(o||(o=Hfe),t.size!=s.size&&!c)return!1;var d=l.get(t);if(d)return d==s;r|=Wfe,l.set(t,s);var u=zfe(o(t),o(s),r,a,i,l);return l.delete(t),u;case sge:if(lw)return lw.call(t)==lw.call(s)}return!1}var ige=age;function lge(t,s){for(var n=-1,r=s.length,a=t.length;++n<r;)t[a+n]=s[n];return t}var Pz=lge,oge=Pz,cge=Fr;function dge(t,s,n){var r=s(t);return cge(t)?r:oge(r,n(t))}var uge=dge;function mge(t,s){for(var n=-1,r=t==null?0:t.length,a=0,i=[];++n<r;){var l=t[n];s(l,n,t)&&(i[a++]=l)}return i}var hge=mge;function xge(){return[]}var pge=xge,fge=hge,gge=pge,vge=Object.prototype,yge=vge.propertyIsEnumerable,gO=Object.getOwnPropertySymbols,jge=gO?function(t){return t==null?[]:(t=Object(t),fge(gO(t),function(s){return yge.call(t,s)}))}:gge,bge=jge;function Nge(t,s){for(var n=-1,r=Array(t);++n<t;)r[n]=s(n);return r}var wge=Nge,Sge=Hl,Cge=Gl,kge="[object Arguments]";function Pge(t){return Cge(t)&&Sge(t)==kge}var Age=Pge,vO=Age,Tge=Gl,Az=Object.prototype,Dge=Az.hasOwnProperty,Ege=Az.propertyIsEnumerable,Oge=vO(function(){return arguments}())?vO:function(t){return Tge(t)&&Dge.call(t,"callee")&&!Ege.call(t,"callee")},xA=Oge,Dy={exports:{}};function Mge(){return!1}var _ge=Mge;Dy.exports;(function(t,s){var n=tl,r=_ge,a=s&&!s.nodeType&&s,i=a&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===a,o=l?n.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||r;t.exports=d})(Dy,Dy.exports);var Tz=Dy.exports,Rge=9007199254740991,Ige=/^(?:0|[1-9]\d*)$/;function $ge(t,s){var n=typeof t;return s=s??Rge,!!s&&(n=="number"||n!="symbol"&&Ige.test(t))&&t>-1&&t%1==0&&t<s}var pA=$ge,Fge=9007199254740991;function Lge(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Fge}var fA=Lge,Bge=Hl,Vge=fA,Uge=Gl,zge="[object Arguments]",qge="[object Array]",Hge="[object Boolean]",Gge="[object Date]",Wge="[object Error]",Kge="[object Function]",Yge="[object Map]",Qge="[object Number]",Xge="[object Object]",Zge="[object RegExp]",Jge="[object Set]",eve="[object String]",tve="[object WeakMap]",sve="[object ArrayBuffer]",nve="[object DataView]",rve="[object Float32Array]",ave="[object Float64Array]",ive="[object Int8Array]",lve="[object Int16Array]",ove="[object Int32Array]",cve="[object Uint8Array]",dve="[object Uint8ClampedArray]",uve="[object Uint16Array]",mve="[object Uint32Array]",Fs={};Fs[rve]=Fs[ave]=Fs[ive]=Fs[lve]=Fs[ove]=Fs[cve]=Fs[dve]=Fs[uve]=Fs[mve]=!0;Fs[zge]=Fs[qge]=Fs[sve]=Fs[Hge]=Fs[nve]=Fs[Gge]=Fs[Wge]=Fs[Kge]=Fs[Yge]=Fs[Qge]=Fs[Xge]=Fs[Zge]=Fs[Jge]=Fs[eve]=Fs[tve]=!1;function hve(t){return Uge(t)&&Vge(t.length)&&!!Fs[Bge(t)]}var xve=hve;function pve(t){return function(s){return t(s)}}var Dz=pve,Ey={exports:{}};Ey.exports;(function(t,s){var n=FU,r=s&&!s.nodeType&&s,a=r&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===r,l=i&&n.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();t.exports=o})(Ey,Ey.exports);var fve=Ey.exports,gve=xve,vve=Dz,yO=fve,jO=yO&&yO.isTypedArray,yve=jO?vve(jO):gve,Ez=yve,jve=wge,bve=xA,Nve=Fr,wve=Tz,Sve=pA,Cve=Ez,kve=Object.prototype,Pve=kve.hasOwnProperty;function Ave(t,s){var n=Nve(t),r=!n&&bve(t),a=!n&&!r&&wve(t),i=!n&&!r&&!a&&Cve(t),l=n||r||a||i,o=l?jve(t.length,String):[],c=o.length;for(var d in t)(s||Pve.call(t,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Sve(d,c)))&&o.push(d);return o}var Tve=Ave,Dve=Object.prototype;function Eve(t){var s=t&&t.constructor,n=typeof s=="function"&&s.prototype||Dve;return t===n}var Ove=Eve;function Mve(t,s){return function(n){return t(s(n))}}var Oz=Mve,_ve=Oz,Rve=_ve(Object.keys,Object),Ive=Rve,$ve=Ove,Fve=Ive,Lve=Object.prototype,Bve=Lve.hasOwnProperty;function Vve(t){if(!$ve(t))return Fve(t);var s=[];for(var n in Object(t))Bve.call(t,n)&&n!="constructor"&&s.push(n);return s}var Uve=Vve,zve=XP,qve=fA;function Hve(t){return t!=null&&qve(t.length)&&!zve(t)}var qf=Hve,Gve=Tve,Wve=Uve,Kve=qf;function Yve(t){return Kve(t)?Gve(t):Wve(t)}var tb=Yve,Qve=uge,Xve=bge,Zve=tb;function Jve(t){return Qve(t,Zve,Xve)}var eye=Jve,bO=eye,tye=1,sye=Object.prototype,nye=sye.hasOwnProperty;function rye(t,s,n,r,a,i){var l=n&tye,o=bO(t),c=o.length,d=bO(s),u=d.length;if(c!=u&&!l)return!1;for(var m=c;m--;){var h=o[m];if(!(l?h in s:nye.call(s,h)))return!1}var x=i.get(t),p=i.get(s);if(x&&p)return x==s&&p==t;var f=!0;i.set(t,s),i.set(s,t);for(var j=l;++m<c;){h=o[m];var g=t[h],y=s[h];if(r)var v=l?r(y,g,h,s,t,i):r(g,y,h,t,s,i);if(!(v===void 0?g===y||a(g,y,n,r,i):v)){f=!1;break}j||(j=h=="constructor")}if(f&&!j){var w=t.constructor,N=s.constructor;w!=N&&"constructor"in t&&"constructor"in s&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(f=!1)}return i.delete(t),i.delete(s),f}var aye=rye,iye=Rd,lye=tl,oye=iye(lye,"DataView"),cye=oye,dye=Rd,uye=tl,mye=dye(uye,"Promise"),hye=mye,xye=Rd,pye=tl,fye=xye(pye,"Set"),Mz=fye,gye=Rd,vye=tl,yye=gye(vye,"WeakMap"),jye=yye,eS=cye,tS=JP,sS=hye,nS=Mz,rS=jye,_z=Hl,Sh=BU,NO="[object Map]",bye="[object Object]",wO="[object Promise]",SO="[object Set]",CO="[object WeakMap]",kO="[object DataView]",Nye=Sh(eS),wye=Sh(tS),Sye=Sh(sS),Cye=Sh(nS),kye=Sh(rS),Cc=_z;(eS&&Cc(new eS(new ArrayBuffer(1)))!=kO||tS&&Cc(new tS)!=NO||sS&&Cc(sS.resolve())!=wO||nS&&Cc(new nS)!=SO||rS&&Cc(new rS)!=CO)&&(Cc=function(t){var s=_z(t),n=s==bye?t.constructor:void 0,r=n?Sh(n):"";if(r)switch(r){case Nye:return kO;case wye:return NO;case Sye:return wO;case Cye:return SO;case kye:return CO}return s});var Pye=Cc,ow=Nz,Aye=kz,Tye=ige,Dye=aye,PO=Pye,AO=Fr,TO=Tz,Eye=Ez,Oye=1,DO="[object Arguments]",EO="[object Array]",Mg="[object Object]",Mye=Object.prototype,OO=Mye.hasOwnProperty;function _ye(t,s,n,r,a,i){var l=AO(t),o=AO(s),c=l?EO:PO(t),d=o?EO:PO(s);c=c==DO?Mg:c,d=d==DO?Mg:d;var u=c==Mg,m=d==Mg,h=c==d;if(h&&TO(t)){if(!TO(s))return!1;l=!0,u=!1}if(h&&!u)return i||(i=new ow),l||Eye(t)?Aye(t,s,n,r,a,i):Tye(t,s,c,n,r,a,i);if(!(n&Oye)){var x=u&&OO.call(t,"__wrapped__"),p=m&&OO.call(s,"__wrapped__");if(x||p){var f=x?t.value():t,j=p?s.value():s;return i||(i=new ow),a(f,j,n,r,i)}}return h?(i||(i=new ow),Dye(t,s,n,r,a,i)):!1}var Rye=_ye,Iye=Rye,MO=Gl;function Rz(t,s,n,r,a){return t===s?!0:t==null||s==null||!MO(t)&&!MO(s)?t!==t&&s!==s:Iye(t,s,n,r,Rz,a)}var gA=Rz,$ye=Nz,Fye=gA,Lye=1,Bye=2;function Vye(t,s,n,r){var a=n.length,i=a,l=!r;if(t==null)return!i;for(t=Object(t);a--;){var o=n[a];if(l&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++a<i;){o=n[a];var c=o[0],d=t[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in t))return!1}else{var m=new $ye;if(r)var h=r(d,u,c,t,s,m);if(!(h===void 0?Fye(u,d,Lye|Bye,r,m):h))return!1}}return!0}var Uye=Vye,zye=dc;function qye(t){return t===t&&!zye(t)}var Iz=qye,Hye=Iz,Gye=tb;function Wye(t){for(var s=Gye(t),n=s.length;n--;){var r=s[n],a=t[r];s[n]=[r,a,Hye(a)]}return s}var Kye=Wye;function Yye(t,s){return function(n){return n==null?!1:n[t]===s&&(s!==void 0||t in Object(n))}}var $z=Yye,Qye=Uye,Xye=Kye,Zye=$z;function Jye(t){var s=Xye(t);return s.length==1&&s[0][2]?Zye(s[0][0],s[0][1]):function(n){return n===t||Qye(n,t,s)}}var eje=Jye;function tje(t,s){return t!=null&&s in Object(t)}var sje=tje,nje=HU,rje=xA,aje=Fr,ije=pA,lje=fA,oje=B0;function cje(t,s,n){s=nje(s,t);for(var r=-1,a=s.length,i=!1;++r<a;){var l=oje(s[r]);if(!(i=t!=null&&n(t,l)))break;t=t[l]}return i||++r!=a?i:(a=t==null?0:t.length,!!a&&lje(a)&&ije(l,a)&&(aje(t)||rje(t)))}var dje=cje,uje=sje,mje=dje;function hje(t,s){return t!=null&&mje(t,s,uje)}var xje=hje,pje=gA,fje=GU,gje=xje,vje=QP,yje=Iz,jje=$z,bje=B0,Nje=1,wje=2;function Sje(t,s){return vje(t)&&yje(s)?jje(bje(t),s):function(n){var r=fje(n,t);return r===void 0&&r===s?gje(n,t):pje(s,r,Nje|wje)}}var Cje=Sje;function kje(t){return t}var Ch=kje;function Pje(t){return function(s){return s==null?void 0:s[t]}}var Aje=Pje,Tje=nA;function Dje(t){return function(s){return Tje(s,t)}}var Eje=Dje,Oje=Aje,Mje=Eje,_je=QP,Rje=B0;function Ije(t){return _je(t)?Oje(Rje(t)):Mje(t)}var $je=Ije,Fje=eje,Lje=Cje,Bje=Ch,Vje=Fr,Uje=$je;function zje(t){return typeof t=="function"?t:t==null?Bje:typeof t=="object"?Vje(t)?Lje(t[0],t[1]):Fje(t):Uje(t)}var sl=zje;function qje(t,s,n,r){for(var a=t.length,i=n+(r?1:-1);r?i--:++i<a;)if(s(t[i],i,t))return i;return-1}var Fz=qje;function Hje(t){return t!==t}var Gje=Hje;function Wje(t,s,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===s)return r;return-1}var Kje=Wje,Yje=Fz,Qje=Gje,Xje=Kje;function Zje(t,s,n){return s===s?Xje(t,s,n):Yje(t,Qje,n)}var Jje=Zje,e0e=Jje;function t0e(t,s){var n=t==null?0:t.length;return!!n&&e0e(t,s,0)>-1}var s0e=t0e;function n0e(t,s,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(s,t[r]))return!0;return!1}var r0e=n0e;function a0e(){}var i0e=a0e,cw=Mz,l0e=i0e,o0e=hA,c0e=1/0,d0e=cw&&1/o0e(new cw([,-0]))[1]==c0e?function(t){return new cw(t)}:l0e,u0e=d0e,m0e=wz,h0e=s0e,x0e=r0e,p0e=Cz,f0e=u0e,g0e=hA,v0e=200;function y0e(t,s,n){var r=-1,a=h0e,i=t.length,l=!0,o=[],c=o;if(n)l=!1,a=x0e;else if(i>=v0e){var d=s?null:f0e(t);if(d)return g0e(d);l=!1,a=p0e,c=new m0e}else c=s?[]:o;e:for(;++r<i;){var u=t[r],m=s?s(u):u;if(u=n||u!==0?u:0,l&&m===m){for(var h=c.length;h--;)if(c[h]===m)continue e;s&&c.push(m),o.push(u)}else a(c,m,n)||(c!==o&&c.push(m),o.push(u))}return o}var j0e=y0e,b0e=sl,N0e=j0e;function w0e(t,s){return t&&t.length?N0e(t,b0e(s)):[]}var S0e=w0e;const _O=fs(S0e);function Lz(t,s,n){return s===!0?_O(t,n):Dt(s)?_O(t,s):t}function Am(t){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Am(t)}var C0e=["ref"];function RO(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ll(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?RO(Object(n),!0).forEach(function(r){sb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k0e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function IO(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vz(r.key),r)}}function P0e(t,s,n){return s&&IO(t.prototype,s),n&&IO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0e(t,s,n){return s=Oy(s),T0e(t,Bz()?Reflect.construct(s,n||[],Oy(t).constructor):s.apply(t,n))}function T0e(t,s){if(s&&(Am(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(t)}function D0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bz=function(){return!!t})()}function Oy(t){return Oy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oy(t)}function E0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&aS(t,s)}function aS(t,s){return aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},aS(t,s)}function sb(t,s,n){return s=Vz(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Vz(t){var s=O0e(t,"string");return Am(s)=="symbol"?s:s+""}function O0e(t,s){if(Am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function M0e(t,s){if(t==null)return{};var n=_0e(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _0e(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function R0e(t){return t.value}function I0e(t,s){if(X.isValidElement(t))return X.cloneElement(t,s);if(typeof t=="function")return X.createElement(t,s);s.ref;var n=M0e(s,C0e);return X.createElement(mA,n)}var $O=1,Cl=function(t){function s(){var n;k0e(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=A0e(this,s,[].concat(a)),sb(n,"lastBoundingBox",{width:-1,height:-1}),n}return E0e(s,t),P0e(s,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>$O||Math.abs(a.height-this.lastBoundingBox.height)>$O)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ll({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,m,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(l==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((d||0)-x.width)/2}}else m=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var p=this.getBBoxSnapshot();h={top:((u||0)-p.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ll(ll({},m),h)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,m=ll(ll({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return X.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){r.wrapperNode=x}},I0e(i,ll(ll({},this.props),{},{payload:Lz(u,d,R0e)})))}}],[{key:"getWithHeight",value:function(r,a){var i=ll(ll({},this.defaultProps),r.props),l=i.layout;return l==="vertical"&&He(r.props.height)?{height:r.props.height}:l==="horizontal"?{width:r.props.width||a}:null}}])}(b.PureComponent);sb(Cl,"displayName","Legend");sb(Cl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var FO=Uf,$0e=xA,F0e=Fr,LO=FO?FO.isConcatSpreadable:void 0;function L0e(t){return F0e(t)||$0e(t)||!!(LO&&t&&t[LO])}var B0e=L0e,V0e=Pz,U0e=B0e;function Uz(t,s,n,r,a){var i=-1,l=t.length;for(n||(n=U0e),a||(a=[]);++i<l;){var o=t[i];s>0&&n(o)?s>1?Uz(o,s-1,n,r,a):V0e(a,o):r||(a[a.length]=o)}return a}var zz=Uz;function z0e(t){return function(s,n,r){for(var a=-1,i=Object(s),l=r(s),o=l.length;o--;){var c=l[t?o:++a];if(n(i[c],c,i)===!1)break}return s}}var q0e=z0e,H0e=q0e,G0e=H0e(),W0e=G0e,K0e=W0e,Y0e=tb;function Q0e(t,s){return t&&K0e(t,s,Y0e)}var qz=Q0e,X0e=qf;function Z0e(t,s){return function(n,r){if(n==null)return n;if(!X0e(n))return t(n,r);for(var a=n.length,i=s?a:-1,l=Object(n);(s?i--:++i<a)&&r(l[i],i,l)!==!1;);return n}}var J0e=Z0e,ebe=qz,tbe=J0e,sbe=tbe(ebe),vA=sbe,nbe=vA,rbe=qf;function abe(t,s){var n=-1,r=rbe(t)?Array(t.length):[];return nbe(t,function(a,i,l){r[++n]=s(a,i,l)}),r}var Hz=abe;function ibe(t,s){var n=t.length;for(t.sort(s);n--;)t[n]=t[n].value;return t}var lbe=ibe,BO=gh;function obe(t,s){if(t!==s){var n=t!==void 0,r=t===null,a=t===t,i=BO(t),l=s!==void 0,o=s===null,c=s===s,d=BO(s);if(!o&&!d&&!i&&t>s||i&&l&&c&&!o&&!d||r&&l&&c||!n&&c||!a)return 1;if(!r&&!i&&!d&&t<s||d&&n&&a&&!r&&!i||o&&n&&a||!l&&a||!c)return-1}return 0}var cbe=obe,dbe=cbe;function ube(t,s,n){for(var r=-1,a=t.criteria,i=s.criteria,l=a.length,o=n.length;++r<l;){var c=dbe(a[r],i[r]);if(c){if(r>=o)return c;var d=n[r];return c*(d=="desc"?-1:1)}}return t.index-s.index}var mbe=ube,dw=sA,hbe=nA,xbe=sl,pbe=Hz,fbe=lbe,gbe=Dz,vbe=mbe,ybe=Ch,jbe=Fr;function bbe(t,s,n){s.length?s=dw(s,function(i){return jbe(i)?function(l){return hbe(l,i.length===1?i[0]:i)}:i}):s=[ybe];var r=-1;s=dw(s,gbe(xbe));var a=pbe(t,function(i,l,o){var c=dw(s,function(d){return d(i)});return{criteria:c,index:++r,value:i}});return fbe(a,function(i,l){return vbe(i,l,n)})}var Nbe=bbe;function wbe(t,s,n){switch(n.length){case 0:return t.call(s);case 1:return t.call(s,n[0]);case 2:return t.call(s,n[0],n[1]);case 3:return t.call(s,n[0],n[1],n[2])}return t.apply(s,n)}var Sbe=wbe,Cbe=Sbe,VO=Math.max;function kbe(t,s,n){return s=VO(s===void 0?t.length-1:s,0),function(){for(var r=arguments,a=-1,i=VO(r.length-s,0),l=Array(i);++a<i;)l[a]=r[s+a];a=-1;for(var o=Array(s+1);++a<s;)o[a]=r[a];return o[s]=n(l),Cbe(t,this,o)}}var Pbe=kbe;function Abe(t){return function(){return t}}var Tbe=Abe,Dbe=Rd,Ebe=function(){try{var t=Dbe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Gz=Ebe,Obe=Tbe,UO=Gz,Mbe=Ch,_be=UO?function(t,s){return UO(t,"toString",{configurable:!0,enumerable:!1,value:Obe(s),writable:!0})}:Mbe,Rbe=_be,Ibe=800,$be=16,Fbe=Date.now;function Lbe(t){var s=0,n=0;return function(){var r=Fbe(),a=$be-(r-n);if(n=r,a>0){if(++s>=Ibe)return arguments[0]}else s=0;return t.apply(void 0,arguments)}}var Bbe=Lbe,Vbe=Rbe,Ube=Bbe,zbe=Ube(Vbe),qbe=zbe,Hbe=Ch,Gbe=Pbe,Wbe=qbe;function Kbe(t,s){return Wbe(Gbe(t,s,Hbe),t+"")}var Ybe=Kbe,Qbe=ZP,Xbe=qf,Zbe=pA,Jbe=dc;function eNe(t,s,n){if(!Jbe(n))return!1;var r=typeof s;return(r=="number"?Xbe(n)&&Zbe(s,n.length):r=="string"&&s in n)?Qbe(n[s],t):!1}var nb=eNe,tNe=zz,sNe=Nbe,nNe=Ybe,zO=nb,rNe=nNe(function(t,s){if(t==null)return[];var n=s.length;return n>1&&zO(t,s[0],s[1])?s=[]:n>2&&zO(s[0],s[1],s[2])&&(s=[s[0]]),sNe(t,tNe(s,1),[])}),aNe=rNe;const yA=fs(aNe);function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cp(t)}function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iS.apply(this,arguments)}function iNe(t,s){return dNe(t)||cNe(t,s)||oNe(t,s)||lNe()}function lNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oNe(t,s){if(t){if(typeof t=="string")return qO(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qO(t,s)}}function qO(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function cNe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function dNe(t){if(Array.isArray(t))return t}function HO(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function uw(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?HO(Object(n),!0).forEach(function(r){uNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uNe(t,s,n){return s=mNe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function mNe(t){var s=hNe(t,"string");return Cp(s)=="symbol"?s:s+""}function hNe(t,s){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function xNe(t){return Array.isArray(t)&&_n(t[0])&&_n(t[1])?t.join(" ~ "):t}var pNe=function(s){var n=s.separator,r=n===void 0?" : ":n,a=s.contentStyle,i=a===void 0?{}:a,l=s.itemStyle,o=l===void 0?{}:l,c=s.labelStyle,d=c===void 0?{}:c,u=s.payload,m=s.formatter,h=s.itemSorter,x=s.wrapperClassName,p=s.labelClassName,f=s.label,j=s.labelFormatter,g=s.accessibilityLayer,y=g===void 0?!1:g,v=function(){if(u&&u.length){var V={padding:0,margin:0},I=(h?yA(u,h):u).map(function(_,U){if(_.type==="none")return null;var H=uw({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},o),Y=_.formatter||m||xNe,O=_.value,R=_.name,q=O,re=R;if(Y&&q!=null&&re!=null){var we=Y(O,R,_,U,u);if(Array.isArray(we)){var K=iNe(we,2);q=K[0],re=K[1]}else q=we}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:H},_n(re)?X.createElement("span",{className:"recharts-tooltip-item-name"},re):null,_n(re)?X.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,X.createElement("span",{className:"recharts-tooltip-item-value"},q),X.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:V},I)}return null},w=uw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=uw({margin:0},d),S=!It(f),k=S?f:"",T=$t("recharts-default-tooltip",x),C=$t("recharts-tooltip-label",p);S&&j&&u!==void 0&&u!==null&&(k=j(f,u));var P=y?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",iS({className:T,style:w},P),X.createElement("p",{className:C,style:N},X.isValidElement(k)?k:"".concat(k)),v())};function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},kp(t)}function _g(t,s,n){return s=fNe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function fNe(t){var s=gNe(t,"string");return kp(s)=="symbol"?s:s+""}function gNe(t,s){if(kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Kh="recharts-tooltip-wrapper",vNe={visibility:"hidden"};function yNe(t){var s=t.coordinate,n=t.translateX,r=t.translateY;return $t(Kh,_g(_g(_g(_g({},"".concat(Kh,"-right"),He(n)&&s&&He(s.x)&&n>=s.x),"".concat(Kh,"-left"),He(n)&&s&&He(s.x)&&n<s.x),"".concat(Kh,"-bottom"),He(r)&&s&&He(s.y)&&r>=s.y),"".concat(Kh,"-top"),He(r)&&s&&He(s.y)&&r<s.y))}function GO(t){var s=t.allowEscapeViewBox,n=t.coordinate,r=t.key,a=t.offsetTopLeft,i=t.position,l=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&He(i[r]))return i[r];var u=n[r]-o-a,m=n[r]+a;if(s[r])return l[r]?u:m;if(l[r]){var h=u,x=c[r];return h<x?Math.max(m,c[r]):Math.max(u,c[r])}var p=m+o,f=c[r]+d;return p>f?Math.max(u,c[r]):Math.max(m,c[r])}function jNe(t){var s=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(s,"px, ").concat(n,"px, 0)"):"translate(".concat(s,"px, ").concat(n,"px)")}}function bNe(t){var s=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,a=t.position,i=t.reverseDirection,l=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,d,u,m;return l.height>0&&l.width>0&&n?(u=GO({allowEscapeViewBox:s,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),m=GO({allowEscapeViewBox:s,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=jNe({translateX:u,translateY:m,useTranslate3d:o})):d=vNe,{cssProperties:d,cssClasses:yNe({translateX:u,translateY:m,coordinate:n})}}function Tm(t){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tm(t)}function WO(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function KO(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?WO(Object(n),!0).forEach(function(r){oS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NNe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function wNe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kz(r.key),r)}}function SNe(t,s,n){return s&&wNe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function CNe(t,s,n){return s=My(s),kNe(t,Wz()?Reflect.construct(s,n||[],My(t).constructor):s.apply(t,n))}function kNe(t,s){if(s&&(Tm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PNe(t)}function PNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wz=function(){return!!t})()}function My(t){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},My(t)}function ANe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&lS(t,s)}function lS(t,s){return lS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},lS(t,s)}function oS(t,s,n){return s=Kz(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Kz(t){var s=TNe(t,"string");return Tm(s)=="symbol"?s:s+""}function TNe(t,s){if(Tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YO=1,DNe=function(t){function s(){var n;NNe(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=CNe(this,s,[].concat(a)),oS(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),oS(n,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return ANe(s,t),SNe(s,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>YO||Math.abs(r.height-this.state.lastBoundingBox.height)>YO)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,m=a.hasPayload,h=a.isAnimationActive,x=a.offset,p=a.position,f=a.reverseDirection,j=a.useTranslate3d,g=a.viewBox,y=a.wrapperStyle,v=bNe({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:x,position:p,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:j,viewBox:g}),w=v.cssClasses,N=v.cssProperties,S=KO(KO({transition:h&&i?"transform ".concat(o,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},y);return X.createElement("div",{tabIndex:-1,className:w,style:S,ref:function(T){r.wrapperNode=T}},d)}}])}(b.PureComponent),ENe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Id={isSsr:ENe()};function Dm(t){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Dm(t)}function QO(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function XO(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?QO(Object(n),!0).forEach(function(r){jA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ONe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function MNe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qz(r.key),r)}}function _Ne(t,s,n){return s&&MNe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function RNe(t,s,n){return s=_y(s),INe(t,Yz()?Reflect.construct(s,n||[],_y(t).constructor):s.apply(t,n))}function INe(t,s){if(s&&(Dm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Ne(t)}function $Ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yz=function(){return!!t})()}function _y(t){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_y(t)}function FNe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&cS(t,s)}function cS(t,s){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},cS(t,s)}function jA(t,s,n){return s=Qz(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Qz(t){var s=LNe(t,"string");return Dm(s)=="symbol"?s:s+""}function LNe(t,s){if(Dm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function BNe(t){return t.dataKey}function VNe(t,s){return X.isValidElement(t)?X.cloneElement(t,s):typeof t=="function"?X.createElement(t,s):X.createElement(pNe,s)}var Ar=function(t){function s(){return ONe(this,s),RNe(this,s,arguments)}return FNe(s,t),_Ne(s,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,m=a.filterNull,h=a.isAnimationActive,x=a.offset,p=a.payload,f=a.payloadUniqBy,j=a.position,g=a.reverseDirection,y=a.useTranslate3d,v=a.viewBox,w=a.wrapperStyle,N=p??[];m&&N.length&&(N=Lz(p.filter(function(k){return k.value!=null&&(k.hide!==!0||r.props.includeHidden)}),f,BNe));var S=N.length>0;return X.createElement(DNe,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:h,active:i,coordinate:u,hasPayload:S,offset:x,position:j,reverseDirection:g,useTranslate3d:y,viewBox:v,wrapperStyle:w},VNe(d,XO(XO({},this.props),{},{payload:N})))}}])}(b.PureComponent);jA(Ar,"displayName","Tooltip");jA(Ar,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Id.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var UNe=tl,zNe=function(){return UNe.Date.now()},qNe=zNe,HNe=/\s/;function GNe(t){for(var s=t.length;s--&&HNe.test(t.charAt(s)););return s}var WNe=GNe,KNe=WNe,YNe=/^\s+/;function QNe(t){return t&&t.slice(0,KNe(t)+1).replace(YNe,"")}var XNe=QNe,ZNe=XNe,ZO=dc,JNe=gh,JO=NaN,ewe=/^[-+]0x[0-9a-f]+$/i,twe=/^0b[01]+$/i,swe=/^0o[0-7]+$/i,nwe=parseInt;function rwe(t){if(typeof t=="number")return t;if(JNe(t))return JO;if(ZO(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=ZO(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=ZNe(t);var n=twe.test(t);return n||swe.test(t)?nwe(t.slice(2),n?2:8):ewe.test(t)?JO:+t}var Xz=rwe,awe=dc,mw=qNe,eM=Xz,iwe="Expected a function",lwe=Math.max,owe=Math.min;function cwe(t,s,n){var r,a,i,l,o,c,d=0,u=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError(iwe);s=eM(s)||0,awe(n)&&(u=!!n.leading,m="maxWait"in n,i=m?lwe(eM(n.maxWait)||0,s):i,h="trailing"in n?!!n.trailing:h);function x(S){var k=r,T=a;return r=a=void 0,d=S,l=t.apply(T,k),l}function p(S){return d=S,o=setTimeout(g,s),u?x(S):l}function f(S){var k=S-c,T=S-d,C=s-k;return m?owe(C,i-T):C}function j(S){var k=S-c,T=S-d;return c===void 0||k>=s||k<0||m&&T>=i}function g(){var S=mw();if(j(S))return y(S);o=setTimeout(g,f(S))}function y(S){return o=void 0,h&&r?x(S):(r=a=void 0,l)}function v(){o!==void 0&&clearTimeout(o),d=0,r=c=a=o=void 0}function w(){return o===void 0?l:y(mw())}function N(){var S=mw(),k=j(S);if(r=arguments,a=this,c=S,k){if(o===void 0)return p(c);if(m)return clearTimeout(o),o=setTimeout(g,s),x(c)}return o===void 0&&(o=setTimeout(g,s)),l}return N.cancel=v,N.flush=w,N}var dwe=cwe,uwe=dwe,mwe=dc,hwe="Expected a function";function xwe(t,s,n){var r=!0,a=!0;if(typeof t!="function")throw new TypeError(hwe);return mwe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),uwe(t,s,{leading:r,maxWait:s,trailing:a})}var pwe=xwe;const Zz=fs(pwe);function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Pp(t)}function tM(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Rg(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?tM(Object(n),!0).forEach(function(r){fwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fwe(t,s,n){return s=gwe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function gwe(t){var s=vwe(t,"string");return Pp(s)=="symbol"?s:s+""}function vwe(t,s){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function ywe(t,s){return wwe(t)||Nwe(t,s)||bwe(t,s)||jwe()}function jwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bwe(t,s){if(t){if(typeof t=="string")return sM(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sM(t,s)}}function sM(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function Nwe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function wwe(t){if(Array.isArray(t))return t}var xx=b.forwardRef(function(t,s){var n=t.aspect,r=t.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=t.width,l=i===void 0?"100%":i,o=t.height,c=o===void 0?"100%":o,d=t.minWidth,u=d===void 0?0:d,m=t.minHeight,h=t.maxHeight,x=t.children,p=t.debounce,f=p===void 0?0:p,j=t.id,g=t.className,y=t.onResize,v=t.style,w=v===void 0?{}:v,N=b.useRef(null),S=b.useRef();S.current=y,b.useImperativeHandle(s,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var k=b.useState({containerWidth:a.width,containerHeight:a.height}),T=ywe(k,2),C=T[0],P=T[1],$=b.useCallback(function(I,_){P(function(U){var H=Math.round(I),Y=Math.round(_);return U.containerWidth===H&&U.containerHeight===Y?U:{containerWidth:H,containerHeight:Y}})},[]);b.useEffect(function(){var I=function(R){var q,re=R[0].contentRect,we=re.width,K=re.height;$(we,K),(q=S.current)===null||q===void 0||q.call(S,we,K)};f>0&&(I=Zz(I,f,{trailing:!0,leading:!1}));var _=new ResizeObserver(I),U=N.current.getBoundingClientRect(),H=U.width,Y=U.height;return $(H,Y),_.observe(N.current),function(){_.disconnect()}},[$,f]);var V=b.useMemo(function(){var I=C.containerWidth,_=C.containerHeight;if(I<0||_<0)return null;ci($c(l)||$c(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),ci(!n||n>0,"The aspect(%s) must be greater than zero.",n);var U=$c(l)?I:l,H=$c(c)?_:c;n&&n>0&&(U?H=U/n:H&&(U=H*n),h&&H>h&&(H=h)),ci(U>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,H,l,c,u,m,n);var Y=!Array.isArray(x)&&Sl(x.type).endsWith("Chart");return X.Children.map(x,function(O){return X.isValidElement(O)?b.cloneElement(O,Rg({width:U,height:H},Y?{style:Rg({height:"100%",width:"100%",maxHeight:H,maxWidth:U},O.props.style)}:{})):O})},[n,x,c,h,m,u,C,l]);return X.createElement("div",{id:j?"".concat(j):void 0,className:$t("recharts-responsive-container",g),style:Rg(Rg({},w),{},{width:l,height:c,minWidth:u,minHeight:m,maxHeight:h}),ref:N},V)}),Em=function(s){return null};Em.displayName="Cell";function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ap(t)}function nM(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function dS(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?nM(Object(n),!0).forEach(function(r){Swe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Swe(t,s,n){return s=Cwe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Cwe(t){var s=kwe(t,"string");return Ap(s)=="symbol"?s:s+""}function kwe(t,s){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Kd={widthCache:{},cacheCount:0},Pwe=2e3,Awe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rM="recharts_measurement_span";function Twe(t){var s=dS({},t);return Object.keys(s).forEach(function(n){s[n]||delete s[n]}),s}var Dx=function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s==null||Id.isSsr)return{width:0,height:0};var r=Twe(n),a=JSON.stringify({text:s,copyStyle:r});if(Kd.widthCache[a])return Kd.widthCache[a];try{var i=document.getElementById(rM);i||(i=document.createElement("span"),i.setAttribute("id",rM),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=dS(dS({},Awe),r);Object.assign(i.style,l),i.textContent="".concat(s);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return Kd.widthCache[a]=c,++Kd.cacheCount>Pwe&&(Kd.cacheCount=0,Kd.widthCache={}),c}catch{return{width:0,height:0}}},Dwe=function(s){return{top:s.top+window.scrollY-document.documentElement.clientTop,left:s.left+window.scrollX-document.documentElement.clientLeft}};function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tp(t)}function Ry(t,s){return _we(t)||Mwe(t,s)||Owe(t,s)||Ewe()}function Ewe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Owe(t,s){if(t){if(typeof t=="string")return aM(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aM(t,s)}}function aM(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function Mwe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function _we(t){if(Array.isArray(t))return t}function Rwe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function iM(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$we(r.key),r)}}function Iwe(t,s,n){return s&&iM(t.prototype,s),n&&iM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $we(t){var s=Fwe(t,"string");return Tp(s)=="symbol"?s:s+""}function Fwe(t,s){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Lwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Bwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Jz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Vwe=Object.keys(Jz),vu="NaN";function Uwe(t,s){return t*Jz[s]}var Ig=function(){function t(s,n){Rwe(this,t),this.num=s,this.unit=n,this.num=s,this.unit=n,Number.isNaN(s)&&(this.unit=""),n!==""&&!Lwe.test(n)&&(this.num=NaN,this.unit=""),Vwe.includes(n)&&(this.num=Uwe(s,n),this.unit="px")}return Iwe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=Bwe.exec(n))!==null&&r!==void 0?r:[],i=Ry(a,3),l=i[1],o=i[2];return new t(parseFloat(l),o??"")}}])}();function eq(t){if(t.includes(vu))return vu;for(var s=t;s.includes("*")||s.includes("/");){var n,r=(n=lM.exec(s))!==null&&n!==void 0?n:[],a=Ry(r,4),i=a[1],l=a[2],o=a[3],c=Ig.parse(i??""),d=Ig.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return vu;s=s.replace(lM,u.toString())}for(;s.includes("+")||/.-\d+(?:\.\d+)?/.test(s);){var m,h=(m=oM.exec(s))!==null&&m!==void 0?m:[],x=Ry(h,4),p=x[1],f=x[2],j=x[3],g=Ig.parse(p??""),y=Ig.parse(j??""),v=f==="+"?g.add(y):g.subtract(y);if(v.isNaN())return vu;s=s.replace(oM,v.toString())}return s}var cM=/\(([^()]*)\)/;function zwe(t){for(var s=t;s.includes("(");){var n=cM.exec(s),r=Ry(n,2),a=r[1];s=s.replace(cM,eq(a))}return s}function qwe(t){var s=t.replace(/\s+/g,"");return s=zwe(s),s=eq(s),s}function Hwe(t){try{return qwe(t)}catch{return vu}}function hw(t){var s=Hwe(t.slice(5,-1));return s===vu?"":s}var Gwe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Wwe=["dx","dy","angle","className","breakAll"];function uS(){return uS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uS.apply(this,arguments)}function dM(t,s){if(t==null)return{};var n=Kwe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kwe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uM(t,s){return Zwe(t)||Xwe(t,s)||Qwe(t,s)||Ywe()}function Ywe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qwe(t,s){if(t){if(typeof t=="string")return mM(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mM(t,s)}}function mM(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function Xwe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Zwe(t){if(Array.isArray(t))return t}var tq=/[ \f\n\r\t\v\u2028\u2029]+/,sq=function(s){var n=s.children,r=s.breakAll,a=s.style;try{var i=[];It(n)||(r?i=n.toString().split(""):i=n.toString().split(tq));var l=i.map(function(c){return{word:c,width:Dx(c,a).width}}),o=r?0:Dx("",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},Jwe=function(s,n,r,a,i){var l=s.maxLines,o=s.children,c=s.style,d=s.breakAll,u=He(l),m=o,h=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(H,Y){var O=Y.word,R=Y.width,q=H[H.length-1];if(q&&(a==null||i||q.width+R+r<Number(a)))q.words.push(O),q.width+=R+r;else{var re={words:[O],width:R};H.push(re)}return H},[])},x=h(n),p=function(U){return U.reduce(function(H,Y){return H.width>Y.width?H:Y})};if(!u)return x;for(var f="",j=function(U){var H=m.slice(0,U),Y=sq({breakAll:d,style:c,children:H+f}).wordsWithComputedWidth,O=h(Y),R=O.length>l||p(O).width>Number(a);return[R,O]},g=0,y=m.length-1,v=0,w;g<=y&&v<=m.length-1;){var N=Math.floor((g+y)/2),S=N-1,k=j(S),T=uM(k,2),C=T[0],P=T[1],$=j(N),V=uM($,1),I=V[0];if(!C&&!I&&(g=N+1),C&&I&&(y=N-1),!C&&I){w=P;break}v++}return w||x},hM=function(s){var n=It(s)?[]:s.toString().split(tq);return[{words:n}]},e1e=function(s){var n=s.width,r=s.scaleToFit,a=s.children,i=s.style,l=s.breakAll,o=s.maxLines;if((n||r)&&!Id.isSsr){var c,d,u=sq({breakAll:l,children:a,style:i});if(u){var m=u.wordsWithComputedWidth,h=u.spaceWidth;c=m,d=h}else return hM(a);return Jwe({breakAll:l,children:a,maxLines:o,style:i},c,d,n,r)}return hM(a)},xM="#808080",Nd=function(s){var n=s.x,r=n===void 0?0:n,a=s.y,i=a===void 0?0:a,l=s.lineHeight,o=l===void 0?"1em":l,c=s.capHeight,d=c===void 0?"0.71em":c,u=s.scaleToFit,m=u===void 0?!1:u,h=s.textAnchor,x=h===void 0?"start":h,p=s.verticalAnchor,f=p===void 0?"end":p,j=s.fill,g=j===void 0?xM:j,y=dM(s,Gwe),v=b.useMemo(function(){return e1e({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:m,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,m,y.style,y.width]),w=y.dx,N=y.dy,S=y.angle,k=y.className,T=y.breakAll,C=dM(y,Wwe);if(!_n(r)||!_n(i))return null;var P=r+(He(w)?w:0),$=i+(He(N)?N:0),V;switch(f){case"start":V=hw("calc(".concat(d,")"));break;case"middle":V=hw("calc(".concat((v.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:V=hw("calc(".concat(v.length-1," * -").concat(o,")"));break}var I=[];if(m){var _=v[0].width,U=y.width;I.push("scale(".concat((He(U)?U/_:1)/_,")"))}return S&&I.push("rotate(".concat(S,", ").concat(P,", ").concat($,")")),I.length&&(C.transform=I.join(" ")),X.createElement("text",uS({},wt(C,!0),{x:P,y:$,className:$t("recharts-text",k),textAnchor:x,fill:g.includes("url")?xM:g}),v.map(function(H,Y){var O=H.words.join(T?"":" ");return X.createElement("tspan",{x:P,dy:Y===0?V:o,key:"".concat(O,"-").concat(Y)},O)}))};function qo(t,s){return t==null||s==null?NaN:t<s?-1:t>s?1:t>=s?0:NaN}function t1e(t,s){return t==null||s==null?NaN:s<t?-1:s>t?1:s>=t?0:NaN}function bA(t){let s,n,r;t.length!==2?(s=qo,n=(o,c)=>qo(t(o),c),r=(o,c)=>t(o)-c):(s=t===qo||t===t1e?t:s1e,n=t,r=t);function a(o,c,d=0,u=o.length){if(d<u){if(s(c,c)!==0)return u;do{const m=d+u>>>1;n(o[m],c)<0?d=m+1:u=m}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(s(c,c)!==0)return u;do{const m=d+u>>>1;n(o[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function l(o,c,d=0,u=o.length){const m=a(o,c,d,u-1);return m>d&&r(o[m-1],c)>-r(o[m],c)?m-1:m}return{left:a,center:l,right:i}}function s1e(){return 0}function nq(t){return t===null?NaN:+t}function*n1e(t,s){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const r1e=bA(qo),Hf=r1e.right;bA(nq).center;class pM extends Map{constructor(s,n=l1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),s!=null)for(const[r,a]of s)this.set(r,a)}get(s){return super.get(fM(this,s))}has(s){return super.has(fM(this,s))}set(s,n){return super.set(a1e(this,s),n)}delete(s){return super.delete(i1e(this,s))}}function fM({_intern:t,_key:s},n){const r=s(n);return t.has(r)?t.get(r):n}function a1e({_intern:t,_key:s},n){const r=s(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function i1e({_intern:t,_key:s},n){const r=s(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function l1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function o1e(t=qo){if(t===qo)return rq;if(typeof t!="function")throw new TypeError("compare is not a function");return(s,n)=>{const r=t(s,n);return r||r===0?r:(t(n,n)===0)-(t(s,s)===0)}}function rq(t,s){return(t==null||!(t>=t))-(s==null||!(s>=s))||(t<s?-1:t>s?1:0)}const c1e=Math.sqrt(50),d1e=Math.sqrt(10),u1e=Math.sqrt(2);function Iy(t,s,n){const r=(s-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),l=i>=c1e?10:i>=d1e?5:i>=u1e?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(t*d),c=Math.round(s*d),o/d<t&&++o,c/d>s&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(t/d),c=Math.round(s/d),o*d<t&&++o,c*d>s&&--c),c<o&&.5<=n&&n<2?Iy(t,s,n*2):[o,c,d]}function mS(t,s,n){if(s=+s,t=+t,n=+n,!(n>0))return[];if(t===s)return[t];const r=s<t,[a,i,l]=r?Iy(s,t,n):Iy(t,s,n);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(r)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function hS(t,s,n){return s=+s,t=+t,n=+n,Iy(t,s,n)[2]}function xS(t,s,n){s=+s,t=+t,n=+n;const r=s<t,a=r?hS(s,t,n):hS(t,s,n);return(r?-1:1)*(a<0?1/-a:a)}function gM(t,s){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function vM(t,s){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function aq(t,s,n=0,r=1/0,a){if(s=Math.floor(s),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=s&&s<=r))return t;for(a=a===void 0?rq:o1e(a);r>n;){if(r-n>600){const c=r-n+1,d=s-n+1,u=Math.log(c),m=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),x=Math.max(n,Math.floor(s-d*m/c+h)),p=Math.min(r,Math.floor(s+(c-d)*m/c+h));aq(t,s,x,p,a)}const i=t[s];let l=n,o=r;for(Yh(t,n,s),a(t[r],i)>0&&Yh(t,n,r);l<o;){for(Yh(t,l,o),++l,--o;a(t[l],i)<0;)++l;for(;a(t[o],i)>0;)--o}a(t[n],i)===0?Yh(t,n,o):(++o,Yh(t,o,r)),o<=s&&(n=o+1),s<=o&&(r=o-1)}return t}function Yh(t,s,n){const r=t[s];t[s]=t[n],t[n]=r}function m1e(t,s,n){if(t=Float64Array.from(n1e(t)),!(!(r=t.length)||isNaN(s=+s))){if(s<=0||r<2)return vM(t);if(s>=1)return gM(t);var r,a=(r-1)*s,i=Math.floor(a),l=gM(aq(t,i).subarray(0,i+1)),o=vM(t.subarray(i+1));return l+(o-l)*(a-i)}}function h1e(t,s,n=nq){if(!(!(r=t.length)||isNaN(s=+s))){if(s<=0||r<2)return+n(t[0],0,t);if(s>=1)return+n(t[r-1],r-1,t);var r,a=(r-1)*s,i=Math.floor(a),l=+n(t[i],i,t),o=+n(t[i+1],i+1,t);return l+(o-l)*(a-i)}}function x1e(t,s,n){t=+t,s=+s,n=(a=arguments.length)<2?(s=t,t=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((s-t)/n))|0,i=new Array(a);++r<a;)i[r]=t+r*n;return i}function Fa(t,s){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(s).domain(t);break}return this}function Wl(t,s){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const pS=Symbol("implicit");function NA(){var t=new pM,s=[],n=[],r=pS;function a(i){let l=t.get(i);if(l===void 0){if(r!==pS)return r;t.set(i,l=s.push(i)-1)}return n[l%n.length]}return a.domain=function(i){if(!arguments.length)return s.slice();s=[],t=new pM;for(const l of i)t.has(l)||t.set(l,s.push(l)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return NA(s,n).unknown(r)},Fa.apply(a,arguments),a}function Dp(){var t=NA().unknown(void 0),s=t.domain,n=t.range,r=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete t.unknown;function m(){var h=s().length,x=a<r,p=x?a:r,f=x?r:a;i=(f-p)/Math.max(1,h-c+d*2),o&&(i=Math.floor(i)),p+=(f-p-i*(h-c))*u,l=i*(1-c),o&&(p=Math.round(p),l=Math.round(l));var j=x1e(h).map(function(g){return p+i*g});return n(x?j.reverse():j)}return t.domain=function(h){return arguments.length?(s(h),m()):s()},t.range=function(h){return arguments.length?([r,a]=h,r=+r,a=+a,m()):[r,a]},t.rangeRound=function(h){return[r,a]=h,r=+r,a=+a,o=!0,m()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(h){return arguments.length?(o=!!h,m()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),m()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),m()):c},t.paddingOuter=function(h){return arguments.length?(d=+h,m()):d},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),m()):u},t.copy=function(){return Dp(s(),[r,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},Fa.apply(m(),arguments)}function iq(t){var s=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return iq(s())},t}function Ex(){return iq(Dp.apply(null,arguments).paddingInner(1))}function wA(t,s,n){t.prototype=s.prototype=n,n.constructor=t}function lq(t,s){var n=Object.create(t.prototype);for(var r in s)n[r]=s[r];return n}function Gf(){}var Ep=.7,$y=1/Ep,Vu="\\s*([+-]?\\d+)\\s*",Op="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",p1e=/^#([0-9a-f]{3,8})$/,f1e=new RegExp(`^rgb\\(${Vu},${Vu},${Vu}\\)$`),g1e=new RegExp(`^rgb\\(${Vi},${Vi},${Vi}\\)$`),v1e=new RegExp(`^rgba\\(${Vu},${Vu},${Vu},${Op}\\)$`),y1e=new RegExp(`^rgba\\(${Vi},${Vi},${Vi},${Op}\\)$`),j1e=new RegExp(`^hsl\\(${Op},${Vi},${Vi}\\)$`),b1e=new RegExp(`^hsla\\(${Op},${Vi},${Vi},${Op}\\)$`),yM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wA(Gf,Mp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jM,formatHex:jM,formatHex8:N1e,formatHsl:w1e,formatRgb:bM,toString:bM});function jM(){return this.rgb().formatHex()}function N1e(){return this.rgb().formatHex8()}function w1e(){return oq(this).formatHsl()}function bM(){return this.rgb().formatRgb()}function Mp(t){var s,n;return t=(t+"").trim().toLowerCase(),(s=p1e.exec(t))?(n=s[1].length,s=parseInt(s[1],16),n===6?NM(s):n===3?new Mr(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):n===8?$g(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):n===4?$g(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=f1e.exec(t))?new Mr(s[1],s[2],s[3],1):(s=g1e.exec(t))?new Mr(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=v1e.exec(t))?$g(s[1],s[2],s[3],s[4]):(s=y1e.exec(t))?$g(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=j1e.exec(t))?CM(s[1],s[2]/100,s[3]/100,1):(s=b1e.exec(t))?CM(s[1],s[2]/100,s[3]/100,s[4]):yM.hasOwnProperty(t)?NM(yM[t]):t==="transparent"?new Mr(NaN,NaN,NaN,0):null}function NM(t){return new Mr(t>>16&255,t>>8&255,t&255,1)}function $g(t,s,n,r){return r<=0&&(t=s=n=NaN),new Mr(t,s,n,r)}function S1e(t){return t instanceof Gf||(t=Mp(t)),t?(t=t.rgb(),new Mr(t.r,t.g,t.b,t.opacity)):new Mr}function fS(t,s,n,r){return arguments.length===1?S1e(t):new Mr(t,s,n,r??1)}function Mr(t,s,n,r){this.r=+t,this.g=+s,this.b=+n,this.opacity=+r}wA(Mr,fS,lq(Gf,{brighter(t){return t=t==null?$y:Math.pow($y,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ep:Math.pow(Ep,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mr(ed(this.r),ed(this.g),ed(this.b),Fy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wM,formatHex:wM,formatHex8:C1e,formatRgb:SM,toString:SM}));function wM(){return`#${Fc(this.r)}${Fc(this.g)}${Fc(this.b)}`}function C1e(){return`#${Fc(this.r)}${Fc(this.g)}${Fc(this.b)}${Fc((isNaN(this.opacity)?1:this.opacity)*255)}`}function SM(){const t=Fy(this.opacity);return`${t===1?"rgb(":"rgba("}${ed(this.r)}, ${ed(this.g)}, ${ed(this.b)}${t===1?")":`, ${t})`}`}function Fy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ed(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fc(t){return t=ed(t),(t<16?"0":"")+t.toString(16)}function CM(t,s,n,r){return r<=0?t=s=n=NaN:n<=0||n>=1?t=s=NaN:s<=0&&(t=NaN),new Ja(t,s,n,r)}function oq(t){if(t instanceof Ja)return new Ja(t.h,t.s,t.l,t.opacity);if(t instanceof Gf||(t=Mp(t)),!t)return new Ja;if(t instanceof Ja)return t;t=t.rgb();var s=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(s,n,r),i=Math.max(s,n,r),l=NaN,o=i-a,c=(i+a)/2;return o?(s===i?l=(n-r)/o+(n<r)*6:n===i?l=(r-s)/o+2:l=(s-n)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new Ja(l,o,c,t.opacity)}function k1e(t,s,n,r){return arguments.length===1?oq(t):new Ja(t,s,n,r??1)}function Ja(t,s,n,r){this.h=+t,this.s=+s,this.l=+n,this.opacity=+r}wA(Ja,k1e,lq(Gf,{brighter(t){return t=t==null?$y:Math.pow($y,t),new Ja(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ep:Math.pow(Ep,t),new Ja(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,s=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*s,a=2*n-r;return new Mr(xw(t>=240?t-240:t+120,a,r),xw(t,a,r),xw(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Ja(kM(this.h),Fg(this.s),Fg(this.l),Fy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fy(this.opacity);return`${t===1?"hsl(":"hsla("}${kM(this.h)}, ${Fg(this.s)*100}%, ${Fg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function kM(t){return t=(t||0)%360,t<0?t+360:t}function Fg(t){return Math.max(0,Math.min(1,t||0))}function xw(t,s,n){return(t<60?s+(n-s)*t/60:t<180?n:t<240?s+(n-s)*(240-t)/60:s)*255}const SA=t=>()=>t;function P1e(t,s){return function(n){return t+n*s}}function A1e(t,s,n){return t=Math.pow(t,n),s=Math.pow(s,n)-t,n=1/n,function(r){return Math.pow(t+r*s,n)}}function T1e(t){return(t=+t)==1?cq:function(s,n){return n-s?A1e(s,n,t):SA(isNaN(s)?n:s)}}function cq(t,s){var n=s-t;return n?P1e(t,n):SA(isNaN(t)?s:t)}const PM=function t(s){var n=T1e(s);function r(a,i){var l=n((a=fS(a)).r,(i=fS(i)).r),o=n(a.g,i.g),c=n(a.b,i.b),d=cq(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return r.gamma=t,r}(1);function D1e(t,s){s||(s=[]);var n=t?Math.min(s.length,t.length):0,r=s.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+s[a]*i;return r}}function E1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function O1e(t,s){var n=s?s.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),l;for(l=0;l<r;++l)a[l]=kh(t[l],s[l]);for(;l<n;++l)i[l]=s[l];return function(o){for(l=0;l<r;++l)i[l]=a[l](o);return i}}function M1e(t,s){var n=new Date;return t=+t,s=+s,function(r){return n.setTime(t*(1-r)+s*r),n}}function Ly(t,s){return t=+t,s=+s,function(n){return t*(1-n)+s*n}}function _1e(t,s){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(s===null||typeof s!="object")&&(s={});for(a in s)a in t?n[a]=kh(t[a],s[a]):r[a]=s[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var gS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pw=new RegExp(gS.source,"g");function R1e(t){return function(){return t}}function I1e(t){return function(s){return t(s)+""}}function $1e(t,s){var n=gS.lastIndex=pw.lastIndex=0,r,a,i,l=-1,o=[],c=[];for(t=t+"",s=s+"";(r=gS.exec(t))&&(a=pw.exec(s));)(i=a.index)>n&&(i=s.slice(n,i),o[l]?o[l]+=i:o[++l]=i),(r=r[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:Ly(r,a)})),n=pw.lastIndex;return n<s.length&&(i=s.slice(n),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?I1e(c[0].x):R1e(s):(s=c.length,function(d){for(var u=0,m;u<s;++u)o[(m=c[u]).i]=m.x(d);return o.join("")})}function kh(t,s){var n=typeof s,r;return s==null||n==="boolean"?SA(s):(n==="number"?Ly:n==="string"?(r=Mp(s))?(s=r,PM):$1e:s instanceof Mp?PM:s instanceof Date?M1e:E1e(s)?D1e:Array.isArray(s)?O1e:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?_1e:Ly)(t,s)}function CA(t,s){return t=+t,s=+s,function(n){return Math.round(t*(1-n)+s*n)}}function F1e(t,s){s===void 0&&(s=t,t=kh);for(var n=0,r=s.length-1,a=s[0],i=new Array(r<0?0:r);n<r;)i[n]=t(a,a=s[++n]);return function(l){var o=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return i[o](l-o)}}function L1e(t){return function(){return t}}function By(t){return+t}var AM=[0,1];function gr(t){return t}function vS(t,s){return(s-=t=+t)?function(n){return(n-t)/s}:L1e(isNaN(s)?NaN:.5)}function B1e(t,s){var n;return t>s&&(n=t,t=s,s=n),function(r){return Math.max(t,Math.min(s,r))}}function V1e(t,s,n){var r=t[0],a=t[1],i=s[0],l=s[1];return a<r?(r=vS(a,r),i=n(l,i)):(r=vS(r,a),i=n(i,l)),function(o){return i(r(o))}}function U1e(t,s,n){var r=Math.min(t.length,s.length)-1,a=new Array(r),i=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),s=s.slice().reverse());++l<r;)a[l]=vS(t[l],t[l+1]),i[l]=n(s[l],s[l+1]);return function(o){var c=Hf(t,o,1,r)-1;return i[c](a[c](o))}}function Wf(t,s){return s.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rb(){var t=AM,s=AM,n=kh,r,a,i,l=gr,o,c,d;function u(){var h=Math.min(t.length,s.length);return l!==gr&&(l=B1e(t[0],t[h-1])),o=h>2?U1e:V1e,c=d=null,m}function m(h){return h==null||isNaN(h=+h)?i:(c||(c=o(t.map(r),s,n)))(r(l(h)))}return m.invert=function(h){return l(a((d||(d=o(s,t.map(r),Ly)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,By),u()):t.slice()},m.range=function(h){return arguments.length?(s=Array.from(h),u()):s.slice()},m.rangeRound=function(h){return s=Array.from(h),n=CA,u()},m.clamp=function(h){return arguments.length?(l=h?!0:gr,u()):l!==gr},m.interpolate=function(h){return arguments.length?(n=h,u()):n},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,x){return r=h,a=x,u()}}function kA(){return rb()(gr,gr)}function z1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vy(t,s){if((n=(t=s?t.toExponential(s-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Om(t){return t=Vy(Math.abs(t)),t?t[1]:NaN}function q1e(t,s){return function(n,r){for(var a=n.length,i=[],l=0,o=t[0],c=0;a>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),i.push(n.substring(a-=o,a+o)),!((c+=o+1)>r));)o=t[l=(l+1)%t.length];return i.reverse().join(s)}}function H1e(t){return function(s){return s.replace(/[0-9]/g,function(n){return t[+n]})}}var G1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _p(t){if(!(s=G1e.exec(t)))throw new Error("invalid format: "+t);var s;return new PA({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}_p.prototype=PA.prototype;function PA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}PA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function W1e(t){e:for(var s=t.length,n=1,r=-1,a;n<s;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var dq;function K1e(t,s){var n=Vy(t,s);if(!n)return t+"";var r=n[0],a=n[1],i=a-(dq=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=r.length;return i===l?r:i>l?r+new Array(i-l+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Vy(t,Math.max(0,s+i-1))[0]}function TM(t,s){var n=Vy(t,s);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const DM={"%":(t,s)=>(t*100).toFixed(s),b:t=>Math.round(t).toString(2),c:t=>t+"",d:z1e,e:(t,s)=>t.toExponential(s),f:(t,s)=>t.toFixed(s),g:(t,s)=>t.toPrecision(s),o:t=>Math.round(t).toString(8),p:(t,s)=>TM(t*100,s),r:TM,s:K1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function EM(t){return t}var OM=Array.prototype.map,MM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Y1e(t){var s=t.grouping===void 0||t.thousands===void 0?EM:q1e(OM.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?EM:H1e(OM.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(m){m=_p(m);var h=m.fill,x=m.align,p=m.sign,f=m.symbol,j=m.zero,g=m.width,y=m.comma,v=m.precision,w=m.trim,N=m.type;N==="n"?(y=!0,N="g"):DM[N]||(v===void 0&&(v=12),w=!0,N="g"),(j||h==="0"&&x==="=")&&(j=!0,h="0",x="=");var S=f==="$"?n:f==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",k=f==="$"?r:/[%p]/.test(N)?l:"",T=DM[N],C=/[defgprs%]/.test(N);v=v===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function P($){var V=S,I=k,_,U,H;if(N==="c")I=T($)+I,$="";else{$=+$;var Y=$<0||1/$<0;if($=isNaN($)?c:T(Math.abs($),v),w&&($=W1e($)),Y&&+$==0&&p!=="+"&&(Y=!1),V=(Y?p==="("?p:o:p==="-"||p==="("?"":p)+V,I=(N==="s"?MM[8+dq/3]:"")+I+(Y&&p==="("?")":""),C){for(_=-1,U=$.length;++_<U;)if(H=$.charCodeAt(_),48>H||H>57){I=(H===46?a+$.slice(_+1):$.slice(_))+I,$=$.slice(0,_);break}}}y&&!j&&($=s($,1/0));var O=V.length+$.length+I.length,R=O<g?new Array(g-O+1).join(h):"";switch(y&&j&&($=s(R+$,R.length?g-I.length:1/0),R=""),x){case"<":$=V+$+I+R;break;case"=":$=V+R+$+I;break;case"^":$=R.slice(0,O=R.length>>1)+V+$+I+R.slice(O);break;default:$=R+V+$+I;break}return i($)}return P.toString=function(){return m+""},P}function u(m,h){var x=d((m=_p(m),m.type="f",m)),p=Math.max(-8,Math.min(8,Math.floor(Om(h)/3)))*3,f=Math.pow(10,-p),j=MM[8+p/3];return function(g){return x(f*g)+j}}return{format:d,formatPrefix:u}}var Lg,AA,uq;Q1e({thousands:",",grouping:[3],currency:["$",""]});function Q1e(t){return Lg=Y1e(t),AA=Lg.format,uq=Lg.formatPrefix,Lg}function X1e(t){return Math.max(0,-Om(Math.abs(t)))}function Z1e(t,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Om(s)/3)))*3-Om(Math.abs(t)))}function J1e(t,s){return t=Math.abs(t),s=Math.abs(s)-t,Math.max(0,Om(s)-Om(t))+1}function mq(t,s,n,r){var a=xS(t,s,n),i;switch(r=_p(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(s));return r.precision==null&&!isNaN(i=Z1e(a,l))&&(r.precision=i),uq(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=J1e(a,Math.max(Math.abs(t),Math.abs(s))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=X1e(a))&&(r.precision=i-(r.type==="%")*2);break}}return AA(r)}function uc(t){var s=t.domain;return t.ticks=function(n){var r=s();return mS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=s();return mq(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=s(),a=0,i=r.length-1,l=r[a],o=r[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=hS(l,o,n),d===c)return r[a]=l,r[i]=o,s(r);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function Uy(){var t=kA();return t.copy=function(){return Wf(t,Uy())},Fa.apply(t,arguments),uc(t)}function hq(t){var s;function n(r){return r==null||isNaN(r=+r)?s:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,By),n):t.slice()},n.unknown=function(r){return arguments.length?(s=r,n):s},n.copy=function(){return hq(t).unknown(s)},t=arguments.length?Array.from(t,By):[0,1],uc(n)}function xq(t,s){t=t.slice();var n=0,r=t.length-1,a=t[n],i=t[r],l;return i<a&&(l=n,n=r,r=l,l=a,a=i,i=l),t[n]=s.floor(a),t[r]=s.ceil(i),t}function _M(t){return Math.log(t)}function RM(t){return Math.exp(t)}function e2e(t){return-Math.log(-t)}function t2e(t){return-Math.exp(-t)}function s2e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function n2e(t){return t===10?s2e:t===Math.E?Math.exp:s=>Math.pow(t,s)}function r2e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),s=>Math.log(s)/t)}function IM(t){return(s,n)=>-t(-s,n)}function TA(t){const s=t(_M,RM),n=s.domain;let r=10,a,i;function l(){return a=r2e(r),i=n2e(r),n()[0]<0?(a=IM(a),i=IM(i),t(e2e,t2e)):t(_M,RM),s}return s.base=function(o){return arguments.length?(r=+o,l()):r},s.domain=function(o){return arguments.length?(n(o),l()):n()},s.ticks=o=>{const c=n();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let h=a(d),x=a(u),p,f;const j=o==null?10:+o;let g=[];if(!(r%1)&&x-h<j){if(h=Math.floor(h),x=Math.ceil(x),d>0){for(;h<=x;++h)for(p=1;p<r;++p)if(f=h<0?p/i(-h):p*i(h),!(f<d)){if(f>u)break;g.push(f)}}else for(;h<=x;++h)for(p=r-1;p>=1;--p)if(f=h>0?p/i(-h):p*i(h),!(f<d)){if(f>u)break;g.push(f)}g.length*2<j&&(g=mS(d,u,j))}else g=mS(h,x,Math.min(x-h,j)).map(i);return m?g.reverse():g},s.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=_p(c)).precision==null&&(c.trim=!0),c=AA(c)),o===1/0)return c;const d=Math.max(1,r*o/s.ticks().length);return u=>{let m=u/i(Math.round(a(u)));return m*r<r-.5&&(m*=r),m<=d?c(u):""}},s.nice=()=>n(xq(n(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),s}function pq(){const t=TA(rb()).domain([1,10]);return t.copy=()=>Wf(t,pq()).base(t.base()),Fa.apply(t,arguments),t}function $M(t){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/t))}}function FM(t){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*t}}function DA(t){var s=1,n=t($M(s),FM(s));return n.constant=function(r){return arguments.length?t($M(s=+r),FM(s)):s},uc(n)}function fq(){var t=DA(rb());return t.copy=function(){return Wf(t,fq()).constant(t.constant())},Fa.apply(t,arguments)}function LM(t){return function(s){return s<0?-Math.pow(-s,t):Math.pow(s,t)}}function a2e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i2e(t){return t<0?-t*t:t*t}function EA(t){var s=t(gr,gr),n=1;function r(){return n===1?t(gr,gr):n===.5?t(a2e,i2e):t(LM(n),LM(1/n))}return s.exponent=function(a){return arguments.length?(n=+a,r()):n},uc(s)}function OA(){var t=EA(rb());return t.copy=function(){return Wf(t,OA()).exponent(t.exponent())},Fa.apply(t,arguments),t}function l2e(){return OA.apply(null,arguments).exponent(.5)}function BM(t){return Math.sign(t)*t*t}function o2e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function gq(){var t=kA(),s=[0,1],n=!1,r;function a(i){var l=o2e(t(i));return isNaN(l)?r:n?Math.round(l):l}return a.invert=function(i){return t.invert(BM(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((s=Array.from(i,By)).map(BM)),a):s.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return gq(t.domain(),s).round(n).clamp(t.clamp()).unknown(r)},Fa.apply(a,arguments),uc(a)}function vq(){var t=[],s=[],n=[],r;function a(){var l=0,o=Math.max(1,s.length);for(n=new Array(o-1);++l<o;)n[l-1]=h1e(t,l/o);return i}function i(l){return l==null||isNaN(l=+l)?r:s[Hf(n,l)]}return i.invertExtent=function(l){var o=s.indexOf(l);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let o of l)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(qo),a()},i.range=function(l){return arguments.length?(s=Array.from(l),a()):s.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return vq().domain(t).range(s).unknown(r)},Fa.apply(i,arguments)}function yq(){var t=0,s=1,n=1,r=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[Hf(r,c,0,n)]:i}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*s-(c-n)*t)/(n+1);return l}return l.domain=function(c){return arguments.length?([t,s]=c,t=+t,s=+s,o()):[t,s]},l.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],s]:[r[d-1],r[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return r.slice()},l.copy=function(){return yq().domain([t,s]).range(a).unknown(i)},Fa.apply(uc(l),arguments)}function jq(){var t=[.5],s=[0,1],n,r=1;function a(i){return i!=null&&i<=i?s[Hf(t,i,0,r)]:n}return a.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,s.length-1),a):t.slice()},a.range=function(i){return arguments.length?(s=Array.from(i),r=Math.min(t.length,s.length-1),a):s.slice()},a.invertExtent=function(i){var l=s.indexOf(i);return[t[l-1],t[l]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return jq().domain(t).range(s).unknown(n)},Fa.apply(a,arguments)}const fw=new Date,gw=new Date;function Rn(t,s,n,r){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),s(i,1),t(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),s(i,o),t(i);while(d<i&&i<l);return c},a.filter=i=>Rn(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;s(l,-1),!i(l););else for(;--o>=0;)for(;s(l,1),!i(l););}),n&&(a.count=(i,l)=>(fw.setTime(+i),gw.setTime(+l),t(fw),t(gw),Math.floor(n(fw,gw))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?l=>r(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const zy=Rn(()=>{},(t,s)=>{t.setTime(+t+s)},(t,s)=>s-t);zy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rn(s=>{s.setTime(Math.floor(s/t)*t)},(s,n)=>{s.setTime(+s+n*t)},(s,n)=>(n-s)/t):zy);zy.range;const yl=1e3,Ca=yl*60,jl=Ca*60,Bl=jl*24,MA=Bl*7,VM=Bl*30,vw=Bl*365,Lc=Rn(t=>{t.setTime(t-t.getMilliseconds())},(t,s)=>{t.setTime(+t+s*yl)},(t,s)=>(s-t)/yl,t=>t.getUTCSeconds());Lc.range;const _A=Rn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yl)},(t,s)=>{t.setTime(+t+s*Ca)},(t,s)=>(s-t)/Ca,t=>t.getMinutes());_A.range;const RA=Rn(t=>{t.setUTCSeconds(0,0)},(t,s)=>{t.setTime(+t+s*Ca)},(t,s)=>(s-t)/Ca,t=>t.getUTCMinutes());RA.range;const IA=Rn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yl-t.getMinutes()*Ca)},(t,s)=>{t.setTime(+t+s*jl)},(t,s)=>(s-t)/jl,t=>t.getHours());IA.range;const $A=Rn(t=>{t.setUTCMinutes(0,0,0)},(t,s)=>{t.setTime(+t+s*jl)},(t,s)=>(s-t)/jl,t=>t.getUTCHours());$A.range;const Kf=Rn(t=>t.setHours(0,0,0,0),(t,s)=>t.setDate(t.getDate()+s),(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*Ca)/Bl,t=>t.getDate()-1);Kf.range;const ab=Rn(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/Bl,t=>t.getUTCDate()-1);ab.range;const bq=Rn(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/Bl,t=>Math.floor(t/Bl));bq.range;function $d(t){return Rn(s=>{s.setDate(s.getDate()-(s.getDay()+7-t)%7),s.setHours(0,0,0,0)},(s,n)=>{s.setDate(s.getDate()+n*7)},(s,n)=>(n-s-(n.getTimezoneOffset()-s.getTimezoneOffset())*Ca)/MA)}const ib=$d(0),qy=$d(1),c2e=$d(2),d2e=$d(3),Mm=$d(4),u2e=$d(5),m2e=$d(6);ib.range;qy.range;c2e.range;d2e.range;Mm.range;u2e.range;m2e.range;function Fd(t){return Rn(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-t)%7),s.setUTCHours(0,0,0,0)},(s,n)=>{s.setUTCDate(s.getUTCDate()+n*7)},(s,n)=>(n-s)/MA)}const lb=Fd(0),Hy=Fd(1),h2e=Fd(2),x2e=Fd(3),_m=Fd(4),p2e=Fd(5),f2e=Fd(6);lb.range;Hy.range;h2e.range;x2e.range;_m.range;p2e.range;f2e.range;const FA=Rn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,s)=>{t.setMonth(t.getMonth()+s)},(t,s)=>s.getMonth()-t.getMonth()+(s.getFullYear()-t.getFullYear())*12,t=>t.getMonth());FA.range;const LA=Rn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCMonth(t.getUTCMonth()+s)},(t,s)=>s.getUTCMonth()-t.getUTCMonth()+(s.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());LA.range;const Vl=Rn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s)},(t,s)=>s.getFullYear()-t.getFullYear(),t=>t.getFullYear());Vl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rn(s=>{s.setFullYear(Math.floor(s.getFullYear()/t)*t),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,n)=>{s.setFullYear(s.getFullYear()+n*t)});Vl.range;const Ul=Rn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s)},(t,s)=>s.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ul.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rn(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/t)*t),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,n)=>{s.setUTCFullYear(s.getUTCFullYear()+n*t)});Ul.range;function Nq(t,s,n,r,a,i){const l=[[Lc,1,yl],[Lc,5,5*yl],[Lc,15,15*yl],[Lc,30,30*yl],[i,1,Ca],[i,5,5*Ca],[i,15,15*Ca],[i,30,30*Ca],[a,1,jl],[a,3,3*jl],[a,6,6*jl],[a,12,12*jl],[r,1,Bl],[r,2,2*Bl],[n,1,MA],[s,1,VM],[s,3,3*VM],[t,1,vw]];function o(d,u,m){const h=u<d;h&&([d,u]=[u,d]);const x=m&&typeof m.range=="function"?m:c(d,u,m),p=x?x.range(d,+u+1):[];return h?p.reverse():p}function c(d,u,m){const h=Math.abs(u-d)/m,x=bA(([,,j])=>j).right(l,h);if(x===l.length)return t.every(xS(d/vw,u/vw,m));if(x===0)return zy.every(Math.max(xS(d,u,m),1));const[p,f]=l[h/l[x-1][2]<l[x][2]/h?x-1:x];return p.every(f)}return[o,c]}const[g2e,v2e]=Nq(Ul,LA,lb,bq,$A,RA),[y2e,j2e]=Nq(Vl,FA,ib,Kf,IA,_A);function yw(t){if(0<=t.y&&t.y<100){var s=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return s.setFullYear(t.y),s}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jw(t){if(0<=t.y&&t.y<100){var s=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return s.setUTCFullYear(t.y),s}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qh(t,s,n){return{y:t,m:s,d:n,H:0,M:0,S:0,L:0}}function b2e(t){var s=t.dateTime,n=t.date,r=t.time,a=t.periods,i=t.days,l=t.shortDays,o=t.months,c=t.shortMonths,d=Xh(a),u=Zh(a),m=Xh(i),h=Zh(i),x=Xh(l),p=Zh(l),f=Xh(o),j=Zh(o),g=Xh(c),y=Zh(c),v={a:Y,A:O,b:R,B:q,c:null,d:WM,e:WM,f:q2e,g:eSe,G:sSe,H:V2e,I:U2e,j:z2e,L:wq,m:H2e,M:G2e,p:re,q:we,Q:QM,s:XM,S:W2e,u:K2e,U:Y2e,V:Q2e,w:X2e,W:Z2e,x:null,X:null,y:J2e,Y:tSe,Z:nSe,"%":YM},w={a:K,A:Ce,b:pe,B:F,c:null,d:KM,e:KM,f:lSe,g:gSe,G:ySe,H:rSe,I:aSe,j:iSe,L:Cq,m:oSe,M:cSe,p:Q,q:Z,Q:QM,s:XM,S:dSe,u:uSe,U:mSe,V:hSe,w:xSe,W:pSe,x:null,X:null,y:fSe,Y:vSe,Z:jSe,"%":YM},N={a:P,A:$,b:V,B:I,c:_,d:HM,e:HM,f:$2e,g:qM,G:zM,H:GM,I:GM,j:M2e,L:I2e,m:O2e,M:_2e,p:C,q:E2e,Q:L2e,s:B2e,S:R2e,u:k2e,U:P2e,V:A2e,w:C2e,W:T2e,x:U,X:H,y:qM,Y:zM,Z:D2e,"%":F2e};v.x=S(n,v),v.X=S(r,v),v.c=S(s,v),w.x=S(n,w),w.X=S(r,w),w.c=S(s,w);function S(le,oe){return function(Ae){var ge=[],xe=-1,$e=0,ke=le.length,Ze,gt,Kt;for(Ae instanceof Date||(Ae=new Date(+Ae));++xe<ke;)le.charCodeAt(xe)===37&&(ge.push(le.slice($e,xe)),(gt=UM[Ze=le.charAt(++xe)])!=null?Ze=le.charAt(++xe):gt=Ze==="e"?" ":"0",(Kt=oe[Ze])&&(Ze=Kt(Ae,gt)),ge.push(Ze),$e=xe+1);return ge.push(le.slice($e,xe)),ge.join("")}}function k(le,oe){return function(Ae){var ge=Qh(1900,void 0,1),xe=T(ge,le,Ae+="",0),$e,ke;if(xe!=Ae.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(oe&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?($e=jw(Qh(ge.y,0,1)),ke=$e.getUTCDay(),$e=ke>4||ke===0?Hy.ceil($e):Hy($e),$e=ab.offset($e,(ge.V-1)*7),ge.y=$e.getUTCFullYear(),ge.m=$e.getUTCMonth(),ge.d=$e.getUTCDate()+(ge.w+6)%7):($e=yw(Qh(ge.y,0,1)),ke=$e.getDay(),$e=ke>4||ke===0?qy.ceil($e):qy($e),$e=Kf.offset($e,(ge.V-1)*7),ge.y=$e.getFullYear(),ge.m=$e.getMonth(),ge.d=$e.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),ke="Z"in ge?jw(Qh(ge.y,0,1)).getUTCDay():yw(Qh(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(ke+5)%7:ge.w+ge.U*7-(ke+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,jw(ge)):yw(ge)}}function T(le,oe,Ae,ge){for(var xe=0,$e=oe.length,ke=Ae.length,Ze,gt;xe<$e;){if(ge>=ke)return-1;if(Ze=oe.charCodeAt(xe++),Ze===37){if(Ze=oe.charAt(xe++),gt=N[Ze in UM?oe.charAt(xe++):Ze],!gt||(ge=gt(le,Ae,ge))<0)return-1}else if(Ze!=Ae.charCodeAt(ge++))return-1}return ge}function C(le,oe,Ae){var ge=d.exec(oe.slice(Ae));return ge?(le.p=u.get(ge[0].toLowerCase()),Ae+ge[0].length):-1}function P(le,oe,Ae){var ge=x.exec(oe.slice(Ae));return ge?(le.w=p.get(ge[0].toLowerCase()),Ae+ge[0].length):-1}function $(le,oe,Ae){var ge=m.exec(oe.slice(Ae));return ge?(le.w=h.get(ge[0].toLowerCase()),Ae+ge[0].length):-1}function V(le,oe,Ae){var ge=g.exec(oe.slice(Ae));return ge?(le.m=y.get(ge[0].toLowerCase()),Ae+ge[0].length):-1}function I(le,oe,Ae){var ge=f.exec(oe.slice(Ae));return ge?(le.m=j.get(ge[0].toLowerCase()),Ae+ge[0].length):-1}function _(le,oe,Ae){return T(le,s,oe,Ae)}function U(le,oe,Ae){return T(le,n,oe,Ae)}function H(le,oe,Ae){return T(le,r,oe,Ae)}function Y(le){return l[le.getDay()]}function O(le){return i[le.getDay()]}function R(le){return c[le.getMonth()]}function q(le){return o[le.getMonth()]}function re(le){return a[+(le.getHours()>=12)]}function we(le){return 1+~~(le.getMonth()/3)}function K(le){return l[le.getUTCDay()]}function Ce(le){return i[le.getUTCDay()]}function pe(le){return c[le.getUTCMonth()]}function F(le){return o[le.getUTCMonth()]}function Q(le){return a[+(le.getUTCHours()>=12)]}function Z(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var oe=S(le+="",v);return oe.toString=function(){return le},oe},parse:function(le){var oe=k(le+="",!1);return oe.toString=function(){return le},oe},utcFormat:function(le){var oe=S(le+="",w);return oe.toString=function(){return le},oe},utcParse:function(le){var oe=k(le+="",!0);return oe.toString=function(){return le},oe}}}var UM={"-":"",_:" ",0:"0"},zn=/^\s*\d+/,N2e=/^%/,w2e=/[\\^$*+?|[\]().{}]/g;function rs(t,s,n){var r=t<0?"-":"",a=(r?-t:t)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(s)+a:a)}function S2e(t){return t.replace(w2e,"\\$&")}function Xh(t){return new RegExp("^(?:"+t.map(S2e).join("|")+")","i")}function Zh(t){return new Map(t.map((s,n)=>[s.toLowerCase(),n]))}function C2e(t,s,n){var r=zn.exec(s.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function k2e(t,s,n){var r=zn.exec(s.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function P2e(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function A2e(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function T2e(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function zM(t,s,n){var r=zn.exec(s.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qM(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function D2e(t,s,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function E2e(t,s,n){var r=zn.exec(s.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function O2e(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function HM(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function M2e(t,s,n){var r=zn.exec(s.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function GM(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function _2e(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function R2e(t,s,n){var r=zn.exec(s.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function I2e(t,s,n){var r=zn.exec(s.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function $2e(t,s,n){var r=zn.exec(s.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function F2e(t,s,n){var r=N2e.exec(s.slice(n,n+1));return r?n+r[0].length:-1}function L2e(t,s,n){var r=zn.exec(s.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function B2e(t,s,n){var r=zn.exec(s.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function WM(t,s){return rs(t.getDate(),s,2)}function V2e(t,s){return rs(t.getHours(),s,2)}function U2e(t,s){return rs(t.getHours()%12||12,s,2)}function z2e(t,s){return rs(1+Kf.count(Vl(t),t),s,3)}function wq(t,s){return rs(t.getMilliseconds(),s,3)}function q2e(t,s){return wq(t,s)+"000"}function H2e(t,s){return rs(t.getMonth()+1,s,2)}function G2e(t,s){return rs(t.getMinutes(),s,2)}function W2e(t,s){return rs(t.getSeconds(),s,2)}function K2e(t){var s=t.getDay();return s===0?7:s}function Y2e(t,s){return rs(ib.count(Vl(t)-1,t),s,2)}function Sq(t){var s=t.getDay();return s>=4||s===0?Mm(t):Mm.ceil(t)}function Q2e(t,s){return t=Sq(t),rs(Mm.count(Vl(t),t)+(Vl(t).getDay()===4),s,2)}function X2e(t){return t.getDay()}function Z2e(t,s){return rs(qy.count(Vl(t)-1,t),s,2)}function J2e(t,s){return rs(t.getFullYear()%100,s,2)}function eSe(t,s){return t=Sq(t),rs(t.getFullYear()%100,s,2)}function tSe(t,s){return rs(t.getFullYear()%1e4,s,4)}function sSe(t,s){var n=t.getDay();return t=n>=4||n===0?Mm(t):Mm.ceil(t),rs(t.getFullYear()%1e4,s,4)}function nSe(t){var s=t.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+rs(s/60|0,"0",2)+rs(s%60,"0",2)}function KM(t,s){return rs(t.getUTCDate(),s,2)}function rSe(t,s){return rs(t.getUTCHours(),s,2)}function aSe(t,s){return rs(t.getUTCHours()%12||12,s,2)}function iSe(t,s){return rs(1+ab.count(Ul(t),t),s,3)}function Cq(t,s){return rs(t.getUTCMilliseconds(),s,3)}function lSe(t,s){return Cq(t,s)+"000"}function oSe(t,s){return rs(t.getUTCMonth()+1,s,2)}function cSe(t,s){return rs(t.getUTCMinutes(),s,2)}function dSe(t,s){return rs(t.getUTCSeconds(),s,2)}function uSe(t){var s=t.getUTCDay();return s===0?7:s}function mSe(t,s){return rs(lb.count(Ul(t)-1,t),s,2)}function kq(t){var s=t.getUTCDay();return s>=4||s===0?_m(t):_m.ceil(t)}function hSe(t,s){return t=kq(t),rs(_m.count(Ul(t),t)+(Ul(t).getUTCDay()===4),s,2)}function xSe(t){return t.getUTCDay()}function pSe(t,s){return rs(Hy.count(Ul(t)-1,t),s,2)}function fSe(t,s){return rs(t.getUTCFullYear()%100,s,2)}function gSe(t,s){return t=kq(t),rs(t.getUTCFullYear()%100,s,2)}function vSe(t,s){return rs(t.getUTCFullYear()%1e4,s,4)}function ySe(t,s){var n=t.getUTCDay();return t=n>=4||n===0?_m(t):_m.ceil(t),rs(t.getUTCFullYear()%1e4,s,4)}function jSe(){return"+0000"}function YM(){return"%"}function QM(t){return+t}function XM(t){return Math.floor(+t/1e3)}var Yd,Pq,Aq;bSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bSe(t){return Yd=b2e(t),Pq=Yd.format,Yd.parse,Aq=Yd.utcFormat,Yd.utcParse,Yd}function NSe(t){return new Date(t)}function wSe(t){return t instanceof Date?+t:+new Date(+t)}function BA(t,s,n,r,a,i,l,o,c,d){var u=kA(),m=u.invert,h=u.domain,x=d(".%L"),p=d(":%S"),f=d("%I:%M"),j=d("%I %p"),g=d("%a %d"),y=d("%b %d"),v=d("%B"),w=d("%Y");function N(S){return(c(S)<S?x:o(S)<S?p:l(S)<S?f:i(S)<S?j:r(S)<S?a(S)<S?g:y:n(S)<S?v:w)(S)}return u.invert=function(S){return new Date(m(S))},u.domain=function(S){return arguments.length?h(Array.from(S,wSe)):h().map(NSe)},u.ticks=function(S){var k=h();return t(k[0],k[k.length-1],S??10)},u.tickFormat=function(S,k){return k==null?N:d(k)},u.nice=function(S){var k=h();return(!S||typeof S.range!="function")&&(S=s(k[0],k[k.length-1],S??10)),S?h(xq(k,S)):u},u.copy=function(){return Wf(u,BA(t,s,n,r,a,i,l,o,c,d))},u}function SSe(){return Fa.apply(BA(y2e,j2e,Vl,FA,ib,Kf,IA,_A,Lc,Pq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function CSe(){return Fa.apply(BA(g2e,v2e,Ul,LA,lb,ab,$A,RA,Lc,Aq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ob(){var t=0,s=1,n,r,a,i,l=gr,o=!1,c;function d(m){return m==null||isNaN(m=+m)?c:l(a===0?.5:(m=(i(m)-n)*a,o?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,s]=m,n=i(t=+t),r=i(s=+s),a=n===r?0:1/(r-n),d):[t,s]},d.clamp=function(m){return arguments.length?(o=!!m,d):o},d.interpolator=function(m){return arguments.length?(l=m,d):l};function u(m){return function(h){var x,p;return arguments.length?([x,p]=h,l=m(x,p),d):[l(0),l(1)]}}return d.range=u(kh),d.rangeRound=u(CA),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return i=m,n=m(t),r=m(s),a=n===r?0:1/(r-n),d}}function mc(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Tq(){var t=uc(ob()(gr));return t.copy=function(){return mc(t,Tq())},Wl.apply(t,arguments)}function Dq(){var t=TA(ob()).domain([1,10]);return t.copy=function(){return mc(t,Dq()).base(t.base())},Wl.apply(t,arguments)}function Eq(){var t=DA(ob());return t.copy=function(){return mc(t,Eq()).constant(t.constant())},Wl.apply(t,arguments)}function VA(){var t=EA(ob());return t.copy=function(){return mc(t,VA()).exponent(t.exponent())},Wl.apply(t,arguments)}function kSe(){return VA.apply(null,arguments).exponent(.5)}function Oq(){var t=[],s=gr;function n(r){if(r!=null&&!isNaN(r=+r))return s((Hf(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let a of r)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(qo),n},n.interpolator=function(r){return arguments.length?(s=r,n):s},n.range=function(){return t.map((r,a)=>s(a/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>m1e(t,i/r))},n.copy=function(){return Oq(s).domain(t)},Wl.apply(n,arguments)}function cb(){var t=0,s=.5,n=1,r=1,a,i,l,o,c,d=gr,u,m=!1,h;function x(f){return isNaN(f=+f)?h:(f=.5+((f=+u(f))-i)*(r*f<r*i?o:c),d(m?Math.max(0,Math.min(1,f)):f))}x.domain=function(f){return arguments.length?([t,s,n]=f,a=u(t=+t),i=u(s=+s),l=u(n=+n),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),r=i<a?-1:1,x):[t,s,n]},x.clamp=function(f){return arguments.length?(m=!!f,x):m},x.interpolator=function(f){return arguments.length?(d=f,x):d};function p(f){return function(j){var g,y,v;return arguments.length?([g,y,v]=j,d=F1e(f,[g,y,v]),x):[d(0),d(.5),d(1)]}}return x.range=p(kh),x.rangeRound=p(CA),x.unknown=function(f){return arguments.length?(h=f,x):h},function(f){return u=f,a=f(t),i=f(s),l=f(n),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),r=i<a?-1:1,x}}function Mq(){var t=uc(cb()(gr));return t.copy=function(){return mc(t,Mq())},Wl.apply(t,arguments)}function _q(){var t=TA(cb()).domain([.1,1,10]);return t.copy=function(){return mc(t,_q()).base(t.base())},Wl.apply(t,arguments)}function Rq(){var t=DA(cb());return t.copy=function(){return mc(t,Rq()).constant(t.constant())},Wl.apply(t,arguments)}function UA(){var t=EA(cb());return t.copy=function(){return mc(t,UA()).exponent(t.exponent())},Wl.apply(t,arguments)}function PSe(){return UA.apply(null,arguments).exponent(.5)}const ZM=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dp,scaleDiverging:Mq,scaleDivergingLog:_q,scaleDivergingPow:UA,scaleDivergingSqrt:PSe,scaleDivergingSymlog:Rq,scaleIdentity:hq,scaleImplicit:pS,scaleLinear:Uy,scaleLog:pq,scaleOrdinal:NA,scalePoint:Ex,scalePow:OA,scaleQuantile:vq,scaleQuantize:yq,scaleRadial:gq,scaleSequential:Tq,scaleSequentialLog:Dq,scaleSequentialPow:VA,scaleSequentialQuantile:Oq,scaleSequentialSqrt:kSe,scaleSequentialSymlog:Eq,scaleSqrt:l2e,scaleSymlog:fq,scaleThreshold:jq,scaleTime:SSe,scaleUtc:CSe,tickFormat:mq},Symbol.toStringTag,{value:"Module"}));var ASe=gh;function TSe(t,s,n){for(var r=-1,a=t.length;++r<a;){var i=t[r],l=s(i);if(l!=null&&(o===void 0?l===l&&!ASe(l):n(l,o)))var o=l,c=i}return c}var db=TSe;function DSe(t,s){return t>s}var Iq=DSe,ESe=db,OSe=Iq,MSe=Ch;function _Se(t){return t&&t.length?ESe(t,MSe,OSe):void 0}var RSe=_Se;const ub=fs(RSe);function ISe(t,s){return t<s}var $q=ISe,$Se=db,FSe=$q,LSe=Ch;function BSe(t){return t&&t.length?$Se(t,LSe,FSe):void 0}var VSe=BSe;const mb=fs(VSe);var USe=sA,zSe=sl,qSe=Hz,HSe=Fr;function GSe(t,s){var n=HSe(t)?USe:qSe;return n(t,zSe(s))}var WSe=GSe,KSe=zz,YSe=WSe;function QSe(t,s){return KSe(YSe(t,s),1)}var XSe=QSe;const ZSe=fs(XSe);var JSe=gA;function eCe(t,s){return JSe(t,s)}var tCe=eCe;const Yf=fs(tCe);var Ph=1e9,sCe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},qA,Ks=!0,Ma="[DecimalError] ",td=Ma+"Invalid argument: ",zA=Ma+"Exponent out of range: ",Ah=Math.floor,kc=Math.pow,nCe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yr,$n=1e7,Ls=7,Fq=9007199254740991,Gy=Ah(Fq/Ls),ot={};ot.absoluteValue=ot.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ot.comparedTo=ot.cmp=function(t){var s,n,r,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,a=t.d.length,s=0,n=r<a?r:a;s<n;++s)if(i.d[s]!==t.d[s])return i.d[s]>t.d[s]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};ot.decimalPlaces=ot.dp=function(){var t=this,s=t.d.length-1,n=(s-t.e)*Ls;if(s=t.d[s],s)for(;s%10==0;s/=10)n--;return n<0?0:n};ot.dividedBy=ot.div=function(t){return kl(this,new this.constructor(t))};ot.dividedToIntegerBy=ot.idiv=function(t){var s=this,n=s.constructor;return Cs(kl(s,new n(t),0,1),n.precision)};ot.equals=ot.eq=function(t){return!this.cmp(t)};ot.exponent=function(){return kn(this)};ot.greaterThan=ot.gt=function(t){return this.cmp(t)>0};ot.greaterThanOrEqualTo=ot.gte=function(t){return this.cmp(t)>=0};ot.isInteger=ot.isint=function(){return this.e>this.d.length-2};ot.isNegative=ot.isneg=function(){return this.s<0};ot.isPositive=ot.ispos=function(){return this.s>0};ot.isZero=function(){return this.s===0};ot.lessThan=ot.lt=function(t){return this.cmp(t)<0};ot.lessThanOrEqualTo=ot.lte=function(t){return this.cmp(t)<1};ot.logarithm=ot.log=function(t){var s,n=this,r=n.constructor,a=r.precision,i=a+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Yr))throw Error(Ma+"NaN");if(n.s<1)throw Error(Ma+(n.s?"NaN":"-Infinity"));return n.eq(Yr)?new r(0):(Ks=!1,s=kl(Rp(n,i),Rp(t,i),i),Ks=!0,Cs(s,a))};ot.minus=ot.sub=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?Vq(s,t):Lq(s,(t.s=-t.s,t))};ot.modulo=ot.mod=function(t){var s,n=this,r=n.constructor,a=r.precision;if(t=new r(t),!t.s)throw Error(Ma+"NaN");return n.s?(Ks=!1,s=kl(n,t,0,1).times(t),Ks=!0,n.minus(s)):Cs(new r(n),a)};ot.naturalExponential=ot.exp=function(){return Bq(this)};ot.naturalLogarithm=ot.ln=function(){return Rp(this)};ot.negated=ot.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ot.plus=ot.add=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?Lq(s,t):Vq(s,(t.s=-t.s,t))};ot.precision=ot.sd=function(t){var s,n,r,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(td+t);if(s=kn(a)+1,r=a.d.length-1,n=r*Ls+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return t&&s>n?s:n};ot.squareRoot=ot.sqrt=function(){var t,s,n,r,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ma+"NaN")}for(t=kn(o),Ks=!1,a=Math.sqrt(+o),a==0||a==1/0?(s=Mi(o.d),(s.length+t)%2==0&&(s+="0"),a=Math.sqrt(s),t=Ah((t+1)/2)-(t<0||t%2),a==1/0?s="5e"+t:(s=a.toExponential(),s=s.slice(0,s.indexOf("e")+1)+t),r=new c(s)):r=new c(a.toString()),n=c.precision,a=l=n+3;;)if(i=r,r=i.plus(kl(o,i,l+2)).times(.5),Mi(i.d).slice(0,l)===(s=Mi(r.d)).slice(0,l)){if(s=s.slice(l-3,l+1),a==l&&s=="4999"){if(Cs(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if(s!="9999")break;l+=4}return Ks=!0,Cs(r,n)};ot.times=ot.mul=function(t){var s,n,r,a,i,l,o,c,d,u=this,m=u.constructor,h=u.d,x=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,n=u.e+t.e,c=h.length,d=x.length,c<d&&(i=h,h=x,x=i,l=c,c=d,d=l),i=[],l=c+d,r=l;r--;)i.push(0);for(r=d;--r>=0;){for(s=0,a=c+r;a>r;)o=i[a]+x[r]*h[a-r-1]+s,i[a--]=o%$n|0,s=o/$n|0;i[a]=(i[a]+s)%$n|0}for(;!i[--l];)i.pop();return s?++n:i.shift(),t.d=i,t.e=n,Ks?Cs(t,m.precision):t};ot.toDecimalPlaces=ot.todp=function(t,s){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Qi(t,0,Ph),s===void 0?s=r.rounding:Qi(s,0,8),Cs(n,t+kn(n)+1,s))};ot.toExponential=function(t,s){var n,r=this,a=r.constructor;return t===void 0?n=wd(r,!0):(Qi(t,0,Ph),s===void 0?s=a.rounding:Qi(s,0,8),r=Cs(new a(r),t+1,s),n=wd(r,!0,t+1)),n};ot.toFixed=function(t,s){var n,r,a=this,i=a.constructor;return t===void 0?wd(a):(Qi(t,0,Ph),s===void 0?s=i.rounding:Qi(s,0,8),r=Cs(new i(a),t+kn(a)+1,s),n=wd(r.abs(),!1,t+kn(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};ot.toInteger=ot.toint=function(){var t=this,s=t.constructor;return Cs(new s(t),kn(t)+1,s.rounding)};ot.toNumber=function(){return+this};ot.toPower=ot.pow=function(t){var s,n,r,a,i,l,o=this,c=o.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(Yr);if(o=new c(o),!o.s){if(t.s<1)throw Error(Ma+"Infinity");return o}if(o.eq(Yr))return o;if(r=c.precision,t.eq(Yr))return Cs(o,r);if(s=t.e,n=t.d.length-1,l=s>=n,i=o.s,l){if((n=u<0?-u:u)<=Fq){for(a=new c(Yr),s=Math.ceil(r/Ls+4),Ks=!1;n%2&&(a=a.times(o),e_(a.d,s)),n=Ah(n/2),n!==0;)o=o.times(o),e_(o.d,s);return Ks=!0,t.s<0?new c(Yr).div(a):Cs(a,r)}}else if(i<0)throw Error(Ma+"NaN");return i=i<0&&t.d[Math.max(s,n)]&1?-1:1,o.s=1,Ks=!1,a=t.times(Rp(o,r+d)),Ks=!0,a=Bq(a),a.s=i,a};ot.toPrecision=function(t,s){var n,r,a=this,i=a.constructor;return t===void 0?(n=kn(a),r=wd(a,n<=i.toExpNeg||n>=i.toExpPos)):(Qi(t,1,Ph),s===void 0?s=i.rounding:Qi(s,0,8),a=Cs(new i(a),t,s),n=kn(a),r=wd(a,t<=n||n<=i.toExpNeg,t)),r};ot.toSignificantDigits=ot.tosd=function(t,s){var n=this,r=n.constructor;return t===void 0?(t=r.precision,s=r.rounding):(Qi(t,1,Ph),s===void 0?s=r.rounding:Qi(s,0,8)),Cs(new r(n),t,s)};ot.toString=ot.valueOf=ot.val=ot.toJSON=ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,s=kn(t),n=t.constructor;return wd(t,s<=n.toExpNeg||s>=n.toExpPos)};function Lq(t,s){var n,r,a,i,l,o,c,d,u=t.constructor,m=u.precision;if(!t.s||!s.s)return s.s||(s=new u(t)),Ks?Cs(s,m):s;if(c=t.d,d=s.d,l=t.e,a=s.e,c=c.slice(),i=l-a,i){for(i<0?(r=c,i=-i,o=d.length):(r=d,a=l,o=c.length),l=Math.ceil(m/Ls),o=l>o?l+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,r=d,d=c,c=r),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/$n|0,c[i]%=$n;for(n&&(c.unshift(n),++a),o=c.length;c[--o]==0;)c.pop();return s.d=c,s.e=a,Ks?Cs(s,m):s}function Qi(t,s,n){if(t!==~~t||t<s||t>n)throw Error(td+t)}function Mi(t){var s,n,r,a=t.length-1,i="",l=t[0];if(a>0){for(i+=l,s=1;s<a;s++)r=t[s]+"",n=Ls-r.length,n&&(i+=oo(n)),i+=r;l=t[s],r=l+"",n=Ls-r.length,n&&(i+=oo(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var kl=function(){function t(r,a){var i,l=0,o=r.length;for(r=r.slice();o--;)i=r[o]*a+l,r[o]=i%$n|0,l=i/$n|0;return l&&r.unshift(l),r}function s(r,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(r[o]!=a[o]){c=r[o]>a[o]?1:-1;break}return c}function n(r,a,i){for(var l=0;i--;)r[i]-=l,l=r[i]<a[i]?1:0,r[i]=l*$n+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,l){var o,c,d,u,m,h,x,p,f,j,g,y,v,w,N,S,k,T,C=r.constructor,P=r.s==a.s?1:-1,$=r.d,V=a.d;if(!r.s)return new C(r);if(!a.s)throw Error(Ma+"Division by zero");for(c=r.e-a.e,k=V.length,N=$.length,x=new C(P),p=x.d=[],d=0;V[d]==($[d]||0);)++d;if(V[d]>($[d]||0)&&--c,i==null?y=i=C.precision:l?y=i+(kn(r)-kn(a))+1:y=i,y<0)return new C(0);if(y=y/Ls+2|0,d=0,k==1)for(u=0,V=V[0],y++;(d<N||u)&&y--;d++)v=u*$n+($[d]||0),p[d]=v/V|0,u=v%V|0;else{for(u=$n/(V[0]+1)|0,u>1&&(V=t(V,u),$=t($,u),k=V.length,N=$.length),w=k,f=$.slice(0,k),j=f.length;j<k;)f[j++]=0;T=V.slice(),T.unshift(0),S=V[0],V[1]>=$n/2&&++S;do u=0,o=s(V,f,k,j),o<0?(g=f[0],k!=j&&(g=g*$n+(f[1]||0)),u=g/S|0,u>1?(u>=$n&&(u=$n-1),m=t(V,u),h=m.length,j=f.length,o=s(m,f,h,j),o==1&&(u--,n(m,k<h?T:V,h))):(u==0&&(o=u=1),m=V.slice()),h=m.length,h<j&&m.unshift(0),n(f,m,j),o==-1&&(j=f.length,o=s(V,f,k,j),o<1&&(u++,n(f,k<j?T:V,j))),j=f.length):o===0&&(u++,f=[0]),p[d++]=u,o&&f[0]?f[j++]=$[w]||0:(f=[$[w]],j=1);while((w++<N||f[0]!==void 0)&&y--)}return p[0]||p.shift(),x.e=c,Cs(x,l?i+kn(x)+1:i)}}();function Bq(t,s){var n,r,a,i,l,o,c=0,d=0,u=t.constructor,m=u.precision;if(kn(t)>16)throw Error(zA+kn(t));if(!t.s)return new u(Yr);for(Ks=!1,o=m,l=new u(.03125);t.abs().gte(.1);)t=t.times(l),d+=5;for(r=Math.log(kc(2,d))/Math.LN10*2+5|0,o+=r,n=a=i=new u(Yr),u.precision=o;;){if(a=Cs(a.times(t),o),n=n.times(++c),l=i.plus(kl(a,n,o)),Mi(l.d).slice(0,o)===Mi(i.d).slice(0,o)){for(;d--;)i=Cs(i.times(i),o);return u.precision=m,s==null?(Ks=!0,Cs(i,m)):i}i=l}}function kn(t){for(var s=t.e*Ls,n=t.d[0];n>=10;n/=10)s++;return s}function bw(t,s,n){if(s>t.LN10.sd())throw Ks=!0,n&&(t.precision=n),Error(Ma+"LN10 precision limit exceeded");return Cs(new t(t.LN10),s)}function oo(t){for(var s="";t--;)s+="0";return s}function Rp(t,s){var n,r,a,i,l,o,c,d,u,m=1,h=10,x=t,p=x.d,f=x.constructor,j=f.precision;if(x.s<1)throw Error(Ma+(x.s?"NaN":"-Infinity"));if(x.eq(Yr))return new f(0);if(s==null?(Ks=!1,d=j):d=s,x.eq(10))return s==null&&(Ks=!0),bw(f,d);if(d+=h,f.precision=d,n=Mi(p),r=n.charAt(0),i=kn(x),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Mi(x.d),r=n.charAt(0),m++;i=kn(x),r>1?(x=new f("0."+n),i++):x=new f(r+"."+n.slice(1))}else return c=bw(f,d+2,j).times(i+""),x=Rp(new f(r+"."+n.slice(1)),d-h).plus(c),f.precision=j,s==null?(Ks=!0,Cs(x,j)):x;for(o=l=x=kl(x.minus(Yr),x.plus(Yr),d),u=Cs(x.times(x),d),a=3;;){if(l=Cs(l.times(u),d),c=o.plus(kl(l,new f(a),d)),Mi(c.d).slice(0,d)===Mi(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(bw(f,d+2,j).times(i+""))),o=kl(o,new f(m),d),f.precision=j,s==null?(Ks=!0,Cs(o,j)):o;o=c,a+=2}}function JM(t,s){var n,r,a;for((n=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charCodeAt(r)===48;)++r;for(a=s.length;s.charCodeAt(a-1)===48;)--a;if(s=s.slice(r,a),s){if(a-=r,n=n-r-1,t.e=Ah(n/Ls),t.d=[],r=(n+1)%Ls,n<0&&(r+=Ls),r<a){for(r&&t.d.push(+s.slice(0,r)),a-=Ls;r<a;)t.d.push(+s.slice(r,r+=Ls));s=s.slice(r),r=Ls-s.length}else r-=a;for(;r--;)s+="0";if(t.d.push(+s),Ks&&(t.e>Gy||t.e<-Gy))throw Error(zA+n)}else t.s=0,t.e=0,t.d=[0];return t}function Cs(t,s,n){var r,a,i,l,o,c,d,u,m=t.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(r=s-l,r<0)r+=Ls,a=s,d=m[u=0];else{if(u=Math.ceil((r+1)/Ls),i=m.length,u>=i)return t;for(d=i=m[u],l=1;i>=10;i/=10)l++;r%=Ls,a=r-Ls+l}if(n!==void 0&&(i=kc(10,l-a-1),o=d/i%10|0,c=s<0||m[u+1]!==void 0||d%i,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?a>0?d/kc(10,l-a):0:m[u-1])%10&1||n==(t.s<0?8:7))),s<1||!m[0])return c?(i=kn(t),m.length=1,s=s-i-1,m[0]=kc(10,(Ls-s%Ls)%Ls),t.e=Ah(-s/Ls)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(r==0?(m.length=u,i=1,u--):(m.length=u+1,i=kc(10,Ls-r),m[u]=a>0?(d/kc(10,l-a)%kc(10,a)|0)*i:0),c)for(;;)if(u==0){(m[0]+=i)==$n&&(m[0]=1,++t.e);break}else{if(m[u]+=i,m[u]!=$n)break;m[u--]=0,i=1}for(r=m.length;m[--r]===0;)m.pop();if(Ks&&(t.e>Gy||t.e<-Gy))throw Error(zA+kn(t));return t}function Vq(t,s){var n,r,a,i,l,o,c,d,u,m,h=t.constructor,x=h.precision;if(!t.s||!s.s)return s.s?s.s=-s.s:s=new h(t),Ks?Cs(s,x):s;if(c=t.d,m=s.d,r=s.e,d=t.e,c=c.slice(),l=d-r,l){for(u=l<0,u?(n=c,l=-l,o=m.length):(n=m,r=d,o=c.length),a=Math.max(Math.ceil(x/Ls),o)+2,l>a&&(l=a,n.length=1),n.reverse(),a=l;a--;)n.push(0);n.reverse()}else{for(a=c.length,o=m.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=m[a]){u=c[a]<m[a];break}l=0}for(u&&(n=c,c=m,m=n,s.s=-s.s),o=c.length,a=m.length-o;a>0;--a)c[o++]=0;for(a=m.length;a>l;){if(c[--a]<m[a]){for(i=a;i&&c[--i]===0;)c[i]=$n-1;--c[i],c[a]+=$n}c[a]-=m[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(s.d=c,s.e=r,Ks?Cs(s,x):s):new h(0)}function wd(t,s,n){var r,a=kn(t),i=Mi(t.d),l=i.length;return s?(n&&(r=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+oo(r):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+oo(-a-1)+i,n&&(r=n-l)>0&&(i+=oo(r))):a>=l?(i+=oo(a+1-l),n&&(r=n-a-1)>0&&(i=i+"."+oo(r))):((r=a+1)<l&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-l)>0&&(a+1===l&&(i+="."),i+=oo(r))),t.s<0?"-"+i:i}function e_(t,s){if(t.length>s)return t.length=s,!0}function Uq(t){var s,n,r;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(td+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return JM(l,i.toString())}else if(typeof i!="string")throw Error(td+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,nCe.test(i))JM(l,i);else throw Error(td+i)}if(a.prototype=ot,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Uq,a.config=a.set=rCe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<r.length;)t.hasOwnProperty(n=r[s++])||(t[n]=this[n]);return a.config(t),a}function rCe(t){if(!t||typeof t!="object")throw Error(Ma+"Object expected");var s,n,r,a=["precision",1,Ph,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(s=0;s<a.length;s+=3)if((r=t[n=a[s]])!==void 0)if(Ah(r)===r&&r>=a[s+1]&&r<=a[s+2])this[n]=r;else throw Error(td+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(td+n+": "+r);return this}var qA=Uq(sCe);Yr=new qA(1);const bs=qA;function aCe(t){return cCe(t)||oCe(t)||lCe(t)||iCe()}function iCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lCe(t,s){if(t){if(typeof t=="string")return yS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yS(t,s)}}function oCe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function cCe(t){if(Array.isArray(t))return yS(t)}function yS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}var dCe=function(s){return s},zq={},qq=function(s){return s===zq},t_=function(s){return function n(){return arguments.length===0||arguments.length===1&&qq(arguments.length<=0?void 0:arguments[0])?n:s.apply(void 0,arguments)}},uCe=function t(s,n){return s===1?n:t_(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==zq}).length;return l>=s?n.apply(void 0,a):t(s-l,t_(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(m){return qq(m)?c.shift():m});return n.apply(void 0,aCe(u).concat(c))}))})},hb=function(s){return uCe(s.length,s)},jS=function(s,n){for(var r=[],a=s;a<n;++a)r[a-s]=a;return r},mCe=hb(function(t,s){return Array.isArray(s)?s.map(t):Object.keys(s).map(function(n){return s[n]}).map(t)}),hCe=function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];if(!n.length)return dCe;var a=n.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},bS=function(s){return Array.isArray(s)?s.reverse():s.split("").reverse.join("")},Hq=function(s){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n&&i.every(function(o,c){return o===n[c]})||(n=i,r=s.apply(void 0,i)),r}};function xCe(t){var s;return t===0?s=1:s=Math.floor(new bs(t).abs().log(10).toNumber())+1,s}function pCe(t,s,n){for(var r=new bs(t),a=0,i=[];r.lt(s)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var fCe=hb(function(t,s,n){var r=+t,a=+s;return r+n*(a-r)}),gCe=hb(function(t,s,n){var r=s-+t;return r=r||1/0,(n-t)/r}),vCe=hb(function(t,s,n){var r=s-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const xb={rangeStep:pCe,getDigitCount:xCe,interpolateNumber:fCe,uninterpolateNumber:gCe,uninterpolateTruncation:vCe};function NS(t){return bCe(t)||jCe(t)||Gq(t)||yCe()}function yCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jCe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function bCe(t){if(Array.isArray(t))return wS(t)}function Ip(t,s){return SCe(t)||wCe(t,s)||Gq(t,s)||NCe()}function NCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gq(t,s){if(t){if(typeof t=="string")return wS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wS(t,s)}}function wS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function wCe(t,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,a=!1,i=void 0;try{for(var l=t[Symbol.iterator](),o;!(r=(o=l.next()).done)&&(n.push(o.value),!(s&&n.length===s));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&l.return!=null&&l.return()}finally{if(a)throw i}}return n}}function SCe(t){if(Array.isArray(t))return t}function Wq(t){var s=Ip(t,2),n=s[0],r=s[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function Kq(t,s,n){if(t.lte(0))return new bs(0);var r=xb.getDigitCount(t.toNumber()),a=new bs(10).pow(r),i=t.div(a),l=r!==1?.05:.1,o=new bs(Math.ceil(i.div(l).toNumber())).add(n).mul(l),c=o.mul(a);return s?c:new bs(Math.ceil(c))}function CCe(t,s,n){var r=1,a=new bs(t);if(!a.isint()&&n){var i=Math.abs(t);i<1?(r=new bs(10).pow(xb.getDigitCount(t)-1),a=new bs(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new bs(Math.floor(t)))}else t===0?a=new bs(Math.floor((s-1)/2)):n||(a=new bs(Math.floor(t)));var l=Math.floor((s-1)/2),o=hCe(mCe(function(c){return a.add(new bs(c-l).mul(r)).toNumber()}),jS);return o(0,s)}function Yq(t,s,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(n-1)))return{step:new bs(0),tickMin:new bs(0),tickMax:new bs(0)};var i=Kq(new bs(s).sub(t).div(n-1),r,a),l;t<=0&&s>=0?l=new bs(0):(l=new bs(t).add(s).div(2),l=l.sub(new bs(l).mod(i)));var o=Math.ceil(l.sub(t).div(i).toNumber()),c=Math.ceil(new bs(s).sub(l).div(i).toNumber()),d=o+c+1;return d>n?Yq(t,s,n,r,a+1):(d<n&&(c=s>0?c+(n-d):c,o=s>0?o:o+(n-d)),{step:i,tickMin:l.sub(new bs(o).mul(i)),tickMax:l.add(new bs(c).mul(i))})}function kCe(t){var s=Ip(t,2),n=s[0],r=s[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=Wq([n,r]),c=Ip(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(NS(jS(0,a-1).map(function(){return 1/0}))):[].concat(NS(jS(0,a-1).map(function(){return-1/0})),[u]);return n>r?bS(m):m}if(d===u)return CCe(d,a,i);var h=Yq(d,u,l,i),x=h.step,p=h.tickMin,f=h.tickMax,j=xb.rangeStep(p,f.add(new bs(.1).mul(x)),x);return n>r?bS(j):j}function PCe(t,s){var n=Ip(t,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Wq([r,a]),o=Ip(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[r,a];if(c===d)return[c];var u=Math.max(s,2),m=Kq(new bs(d).sub(c).div(u-1),i,0),h=[].concat(NS(xb.rangeStep(new bs(c),new bs(d).sub(new bs(.99).mul(m)),m)),[d]);return r>a?bS(h):h}var ACe=Hq(kCe),TCe=Hq(PCe),DCe="Invariant failed";function Sd(t,s){throw new Error(DCe)}var ECe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rm(t){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Rm(t)}function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(this,arguments)}function OCe(t,s){return ICe(t)||RCe(t,s)||_Ce(t,s)||MCe()}function MCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ce(t,s){if(t){if(typeof t=="string")return s_(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s_(t,s)}}function s_(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function RCe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function ICe(t){if(Array.isArray(t))return t}function $Ce(t,s){if(t==null)return{};var n=FCe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FCe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LCe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function BCe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zq(r.key),r)}}function VCe(t,s,n){return s&&BCe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function UCe(t,s,n){return s=Ky(s),zCe(t,Qq()?Reflect.construct(s,n||[],Ky(t).constructor):s.apply(t,n))}function zCe(t,s){if(s&&(Rm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qCe(t)}function qCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qq=function(){return!!t})()}function Ky(t){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ky(t)}function HCe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&SS(t,s)}function SS(t,s){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},SS(t,s)}function Xq(t,s,n){return s=Zq(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Zq(t){var s=GCe(t,"string");return Rm(s)=="symbol"?s:s+""}function GCe(t,s){if(Rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qf=function(t){function s(){return LCe(this,s),UCe(this,s,arguments)}return HCe(s,t),VCe(s,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,l=r.width,o=r.dataKey,c=r.data,d=r.dataPointFormatter,u=r.xAxis,m=r.yAxis,h=$Ce(r,ECe),x=wt(h,!1);this.props.direction==="x"&&u.type!=="number"&&Sd();var p=c.map(function(f){var j=d(f,o),g=j.x,y=j.y,v=j.value,w=j.errorVal;if(!w)return null;var N=[],S,k;if(Array.isArray(w)){var T=OCe(w,2);S=T[0],k=T[1]}else S=k=w;if(i==="vertical"){var C=u.scale,P=y+a,$=P+l,V=P-l,I=C(v-S),_=C(v+k);N.push({x1:_,y1:$,x2:_,y2:V}),N.push({x1:I,y1:P,x2:_,y2:P}),N.push({x1:I,y1:$,x2:I,y2:V})}else if(i==="horizontal"){var U=m.scale,H=g+a,Y=H-l,O=H+l,R=U(v-S),q=U(v+k);N.push({x1:Y,y1:q,x2:O,y2:q}),N.push({x1:H,y1:R,x2:H,y2:q}),N.push({x1:Y,y1:R,x2:O,y2:R})}return X.createElement(ss,Wy({className:"recharts-errorBar",key:"bar-".concat(N.map(function(re){return"".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))},x),N.map(function(re){return X.createElement("line",Wy({},re,{key:"line-".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))}))});return X.createElement(ss,{className:"recharts-errorBars"},p)}}])}(X.Component);Xq(Qf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Xq(Qf,"displayName","ErrorBar");function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$p(t)}function n_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function gc(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?n_(Object(n),!0).forEach(function(r){WCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WCe(t,s,n){return s=KCe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function KCe(t){var s=YCe(t,"string");return $p(s)=="symbol"?s:s+""}function YCe(t,s){if($p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if($p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Jq=function(s){var n=s.children,r=s.formattedGraphicalItems,a=s.legendWidth,i=s.legendContent,l=qr(n,Cl);if(!l)return null;var o=Cl.defaultProps,c=o!==void 0?gc(gc({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(r||[]).reduce(function(u,m){var h=m.item,x=m.props,p=x.sectors||x.data||[];return u.concat(p.map(function(f){return{type:l.props.iconType||h.props.legendType,value:f.name,color:f.fill,payload:f}}))},[]):d=(r||[]).map(function(u){var m=u.item,h=m.type.defaultProps,x=h!==void 0?gc(gc({},h),m.props):{},p=x.dataKey,f=x.name,j=x.legendType,g=x.hide;return{inactive:g,dataKey:p,type:c.iconType||j||"square",color:HA(m),value:f||p,payload:x}}),gc(gc(gc({},c),Cl.getWithHeight(l,a)),{},{payload:d,item:l})};function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Fp(t)}function r_(t){return JCe(t)||ZCe(t)||XCe(t)||QCe()}function QCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XCe(t,s){if(t){if(typeof t=="string")return CS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CS(t,s)}}function ZCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JCe(t){if(Array.isArray(t))return CS(t)}function CS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function a_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?a_(Object(n),!0).forEach(function(r){Uu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uu(t,s,n){return s=eke(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function eke(t){var s=tke(t,"string");return Fp(s)=="symbol"?s:s+""}function tke(t,s){if(Fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function On(t,s,n){return It(t)||It(s)?n:_n(s)?ea(t,s,n):Dt(s)?s(t):n}function Ox(t,s,n,r){var a=ZSe(t,function(o){return On(o,s)});if(n==="number"){var i=a.filter(function(o){return He(o)||parseFloat(o)});return i.length?[mb(i),ub(i)]:[1/0,-1/0]}var l=r?a.filter(function(o){return!It(o)}):a;return l.map(function(o){return _n(o)||o instanceof Date?o:""})}var ske=function(s){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,m=a[d].coordinate,h=d>=o-1?a[0].coordinate:a[d+1].coordinate,x=void 0;if(pr(m-u)!==pr(h-m)){var p=[];if(pr(h-m)===pr(c[1]-c[0])){x=h;var f=m+c[1]-c[0];p[0]=Math.min(f,(f+u)/2),p[1]=Math.max(f,(f+u)/2)}else{x=u;var j=h+c[1]-c[0];p[0]=Math.min(m,(j+m)/2),p[1]=Math.max(m,(j+m)/2)}var g=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(s>g[0]&&s<=g[1]||s>=p[0]&&s<=p[1]){l=a[d].index;break}}else{var y=Math.min(u,h),v=Math.max(u,h);if(s>(y+m)/2&&s<=(v+m)/2){l=a[d].index;break}}}else for(var w=0;w<o;w++)if(w===0&&s<=(r[w].coordinate+r[w+1].coordinate)/2||w>0&&w<o-1&&s>(r[w].coordinate+r[w-1].coordinate)/2&&s<=(r[w].coordinate+r[w+1].coordinate)/2||w===o-1&&s>(r[w].coordinate+r[w-1].coordinate)/2){l=r[w].index;break}return l},HA=function(s){var n,r=s,a=r.type.displayName,i=(n=s.type)!==null&&n!==void 0&&n.defaultProps?rn(rn({},s.type.defaultProps),s.props):s.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},nke=function(s){var n=s.barSize,r=s.totalSize,a=s.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,m=Object.keys(u),h=0,x=m.length;h<x;h++){var p=u[m[h]],f=p.items,j=p.cateAxisId,g=f.filter(function(k){return Sl(k.type).indexOf("Bar")>=0});if(g&&g.length){var y=g[0].type.defaultProps,v=y!==void 0?rn(rn({},y),g[0].props):g[0].props,w=v.barSize,N=v[j];l[N]||(l[N]=[]);var S=It(w)?n:w;l[N].push({item:g[0],stackList:g.slice(1),barSize:It(S)?void 0:fr(S,r,0)})}}return l},rke=function(s){var n=s.barGap,r=s.barCategoryGap,a=s.bandSize,i=s.sizeList,l=i===void 0?[]:i,o=s.maxBarSize,c=l.length;if(c<1)return null;var d=fr(n,a,0,!0),u,m=[];if(l[0].barSize===+l[0].barSize){var h=!1,x=a/c,p=l.reduce(function(w,N){return w+N.barSize||0},0);p+=(c-1)*d,p>=a&&(p-=(c-1)*d,d=0),p>=a&&x>0&&(h=!0,x*=.9,p=c*x);var f=(a-p)/2>>0,j={offset:f-d,size:0};u=l.reduce(function(w,N){var S={item:N.item,position:{offset:j.offset+j.size+d,size:h?x:N.barSize}},k=[].concat(r_(w),[S]);return j=k[k.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(T){k.push({item:T,position:j})}),k},m)}else{var g=fr(r,a,0,!0);a-2*g-(c-1)*d<=0&&(d=0);var y=(a-2*g-(c-1)*d)/c;y>1&&(y>>=0);var v=o===+o?Math.min(y,o):y;u=l.reduce(function(w,N,S){var k=[].concat(r_(w),[{item:N.item,position:{offset:g+(y+d)*S+(y-v)/2,size:v}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(T){k.push({item:T,position:k[k.length-1].position})}),k},m)}return u},ake=function(s,n,r,a){var i=r.children,l=r.width,o=r.margin,c=l-(o.left||0)-(o.right||0),d=Jq({children:i,legendWidth:c});if(d){var u=a||{},m=u.width,h=u.height,x=d.align,p=d.verticalAlign,f=d.layout;if((f==="vertical"||f==="horizontal"&&p==="middle")&&x!=="center"&&He(s[x]))return rn(rn({},s),{},Uu({},x,s[x]+(m||0)));if((f==="horizontal"||f==="vertical"&&x==="center")&&p!=="middle"&&He(s[p]))return rn(rn({},s),{},Uu({},p,s[p]+(h||0)))}return s},ike=function(s,n,r){return It(n)?!0:s==="horizontal"?n==="yAxis":s==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},e9=function(s,n,r,a,i){var l=n.props.children,o=ta(l,Qf).filter(function(d){return ike(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return s.reduce(function(d,u){var m=On(u,r);if(It(m))return d;var h=Array.isArray(m)?[mb(m),ub(m)]:[m,m],x=c.reduce(function(p,f){var j=On(u,f,0),g=h[0]-Math.abs(Array.isArray(j)?j[0]:j),y=h[1]+Math.abs(Array.isArray(j)?j[1]:j);return[Math.min(g,p[0]),Math.max(y,p[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},lke=function(s,n,r,a,i){var l=n.map(function(o){return e9(s,o,r,i,a)}).filter(function(o){return!It(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},t9=function(s,n,r,a,i){var l=n.map(function(c){var d=c.props.dataKey;return r==="number"&&d&&e9(s,c,d,a)||Ox(s,d,r,i)});if(r==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},s9=function(s,n){return s==="horizontal"&&n==="xAxis"||s==="vertical"&&n==="yAxis"||s==="centric"&&n==="angleAxis"||s==="radial"&&n==="radiusAxis"},n9=function(s,n,r,a){if(a)return s.map(function(c){return c.coordinate});var i,l,o=s.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(l=!0),c.coordinate});return i||o.push(n),l||o.push(r),o},bl=function(s,n,r){if(!s)return null;var a=s.scale,i=s.duplicateDomain,l=s.type,o=s.range,c=s.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(n||r)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=s.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?pr(o[0]-o[1])*2*d:d,n&&(s.ticks||s.niceTicks)){var u=(s.ticks||s.niceTicks).map(function(m){var h=i?i.indexOf(m):m;return{coordinate:a(h)+d,value:m,offset:d}});return u.filter(function(m){return!zf(m.coordinate)})}return s.isCategorical&&s.categoricalDomain?s.categoricalDomain.map(function(m,h){return{coordinate:a(m)+d,value:m,index:h,offset:d}}):a.ticks&&!r?a.ticks(s.tickCount).map(function(m){return{coordinate:a(m)+d,value:m,offset:d}}):a.domain().map(function(m,h){return{coordinate:a(m)+d,value:i?i[m]:m,index:h,offset:d}})},Nw=new WeakMap,Bg=function(s,n){if(typeof n!="function")return s;Nw.has(s)||Nw.set(s,new WeakMap);var r=Nw.get(s);if(r.has(n))return r.get(n);var a=function(){s.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},r9=function(s,n,r){var a=s.scale,i=s.type,l=s.layout,o=s.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:Dp(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:Uy(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ex(),realScaleType:"point"}:i==="category"?{scale:Dp(),realScaleType:"band"}:{scale:Uy(),realScaleType:"linear"};if(jd(a)){var c="scale".concat(X0(a));return{scale:(ZM[c]||Ex)(),realScaleType:ZM[c]?c:"point"}}return Dt(a)?{scale:a}:{scale:Ex(),realScaleType:"point"}},i_=1e-4,a9=function(s){var n=s.domain();if(!(!n||n.length<=2)){var r=n.length,a=s.range(),i=Math.min(a[0],a[1])-i_,l=Math.max(a[0],a[1])+i_,o=s(n[0]),c=s(n[r-1]);(o<i||o>l||c<i||c>l)&&s.domain([n[0],n[r-1]])}},oke=function(s,n){if(!s)return null;for(var r=0,a=s.length;r<a;r++)if(s[r].item===n)return s[r].position;return null},cke=function(s,n){if(!n||n.length!==2||!He(n[0])||!He(n[1]))return s;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[s[0],s[1]];return(!He(s[0])||s[0]<r)&&(i[0]=r),(!He(s[1])||s[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},dke=function(s){var n=s.length;if(!(n<=0))for(var r=0,a=s[0].length;r<a;++r)for(var i=0,l=0,o=0;o<n;++o){var c=zf(s[o][r][1])?s[o][r][0]:s[o][r][1];c>=0?(s[o][r][0]=i,s[o][r][1]=i+c,i=s[o][r][1]):(s[o][r][0]=l,s[o][r][1]=l+c,l=s[o][r][1])}},uke=function(s){var n=s.length;if(!(n<=0))for(var r=0,a=s[0].length;r<a;++r)for(var i=0,l=0;l<n;++l){var o=zf(s[l][r][1])?s[l][r][0]:s[l][r][1];o>=0?(s[l][r][0]=i,s[l][r][1]=i+o,i=s[l][r][1]):(s[l][r][0]=0,s[l][r][1]=0)}},mke={sign:dke,expand:Epe,none:km,silhouette:Ope,wiggle:Mpe,positive:uke},hke=function(s,n,r){var a=n.map(function(o){return o.props.dataKey}),i=mke[r],l=Dpe().keys(a).value(function(o,c){return+On(o,c,0)}).order(Q2).offset(i);return l(s)},xke=function(s,n,r,a,i,l){if(!s)return null;var o=l?n.reverse():n,c={},d=o.reduce(function(m,h){var x,p=(x=h.type)!==null&&x!==void 0&&x.defaultProps?rn(rn({},h.type.defaultProps),h.props):h.props,f=p.stackId,j=p.hide;if(j)return m;var g=p[r],y=m[g]||{hasStack:!1,stackGroups:{}};if(_n(f)){var v=y.stackGroups[f]||{numericAxisId:r,cateAxisId:a,items:[]};v.items.push(h),y.hasStack=!0,y.stackGroups[f]=v}else y.stackGroups[Nh("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[h]};return rn(rn({},m),{},Uu({},g,y))},c),u={};return Object.keys(d).reduce(function(m,h){var x=d[h];if(x.hasStack){var p={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(f,j){var g=x.stackGroups[j];return rn(rn({},f),{},Uu({},j,{numericAxisId:r,cateAxisId:a,items:g.items,stackedData:hke(s,g.items,i)}))},p)}return rn(rn({},m),{},Uu({},h,x))},u)},i9=function(s,n){var r=n.realScaleType,a=n.type,i=n.tickCount,l=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=s.domain();if(!d.length)return null;var u=ACe(d,i,o);return s.domain([mb(u),ub(u)]),{niceTicks:u}}if(i&&a==="number"){var m=s.domain(),h=TCe(m,i,o);return{niceTicks:h}}return null};function l_(t){var s=t.axis,n=t.ticks,r=t.bandSize,a=t.entry,i=t.index,l=t.dataKey;if(s.type==="category"){if(!s.allowDuplicatedCategory&&s.dataKey&&!It(a[s.dataKey])){var o=by(n,"value",a[s.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=On(a,It(l)?s.dataKey:l);return It(c)?null:s.scale(c)}var o_=function(s){var n=s.axis,r=s.ticks,a=s.offset,i=s.bandSize,l=s.entry,o=s.index;if(n.type==="category")return r[o]?r[o].coordinate+a:null;var c=On(l,n.dataKey,n.domain[o]);return It(c)?null:n.scale(c)-i/2+a},pke=function(s){var n=s.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},fke=function(s,n){var r,a=(r=s.type)!==null&&r!==void 0&&r.defaultProps?rn(rn({},s.type.defaultProps),s.props):s.props,i=a.stackId;if(_n(i)){var l=n[i];if(l){var o=l.items.indexOf(s);return o>=0?l.stackedData[o]:null}}return null},gke=function(s){return s.reduce(function(n,r){return[mb(r.concat([n[0]]).filter(He)),ub(r.concat([n[1]]).filter(He))]},[1/0,-1/0])},l9=function(s,n,r){return Object.keys(s).reduce(function(a,i){var l=s[i],o=l.stackedData,c=o.reduce(function(d,u){var m=gke(u.slice(n,r+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},c_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kS=function(s,n,r){if(Dt(s))return s(n,r);if(!Array.isArray(s))return n;var a=[];if(He(s[0]))a[0]=r?s[0]:Math.min(s[0],n[0]);else if(c_.test(s[0])){var i=+c_.exec(s[0])[1];a[0]=n[0]-i}else Dt(s[0])?a[0]=s[0](n[0]):a[0]=n[0];if(He(s[1]))a[1]=r?s[1]:Math.max(s[1],n[1]);else if(d_.test(s[1])){var l=+d_.exec(s[1])[1];a[1]=n[1]+l}else Dt(s[1])?a[1]=s[1](n[1]):a[1]=n[1];return a},Yy=function(s,n,r){if(s&&s.scale&&s.scale.bandwidth){var a=s.scale.bandwidth();if(!r||a>0)return a}if(s&&n&&n.length>=2){for(var i=yA(n,function(m){return m.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0},u_=function(s,n,r){return!s||!s.length||Yf(s,ea(r,"type.defaultProps.domain"))?n:s},o9=function(s,n){var r=s.type.defaultProps?rn(rn({},s.type.defaultProps),s.props):s.props,a=r.dataKey,i=r.name,l=r.unit,o=r.formatter,c=r.tooltipType,d=r.chartType,u=r.hide;return rn(rn({},wt(s,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:HA(s),value:On(n,a),type:c,payload:n,chartType:d,hide:u})};function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Lp(t)}function m_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ul(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?m_(Object(n),!0).forEach(function(r){c9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c9(t,s,n){return s=vke(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function vke(t){var s=yke(t,"string");return Lp(s)=="symbol"?s:s+""}function yke(t,s){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function jke(t,s){return Ske(t)||wke(t,s)||Nke(t,s)||bke()}function bke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nke(t,s){if(t){if(typeof t=="string")return h_(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h_(t,s)}}function h_(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function wke(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Ske(t){if(Array.isArray(t))return t}var Qy=Math.PI/180,Cke=function(s){return s*180/Math.PI},Ms=function(s,n,r,a){return{x:s+Math.cos(-Qy*a)*r,y:n+Math.sin(-Qy*a)*r}},d9=function(s,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(s-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},kke=function(s,n,r,a,i){var l=s.width,o=s.height,c=s.startAngle,d=s.endAngle,u=fr(s.cx,l,l/2),m=fr(s.cy,o,o/2),h=d9(l,o,r),x=fr(s.innerRadius,h,0),p=fr(s.outerRadius,h,h*.8),f=Object.keys(n);return f.reduce(function(j,g){var y=n[g],v=y.domain,w=y.reversed,N;if(It(y.range))a==="angleAxis"?N=[c,d]:a==="radiusAxis"&&(N=[x,p]),w&&(N=[N[1],N[0]]);else{N=y.range;var S=N,k=jke(S,2);c=k[0],d=k[1]}var T=r9(y,i),C=T.realScaleType,P=T.scale;P.domain(v).range(N),a9(P);var $=i9(P,ul(ul({},y),{},{realScaleType:C})),V=ul(ul(ul({},y),$),{},{range:N,radius:p,realScaleType:C,scale:P,cx:u,cy:m,innerRadius:x,outerRadius:p,startAngle:c,endAngle:d});return ul(ul({},j),{},c9({},g,V))},{})},Pke=function(s,n){var r=s.x,a=s.y,i=n.x,l=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-l,2))},Ake=function(s,n){var r=s.x,a=s.y,i=n.cx,l=n.cy,o=Pke({x:r,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(r-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:Cke(d),angleInRadian:d}},Tke=function(s){var n=s.startAngle,r=s.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),l=Math.min(a,i);return{startAngle:n-l*360,endAngle:r-l*360}},Dke=function(s,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),l=Math.floor(a/360),o=Math.min(i,l);return s+o*360},x_=function(s,n){var r=s.x,a=s.y,i=Ake({x:r,y:a},n),l=i.radius,o=i.angle,c=n.innerRadius,d=n.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=Tke(n),m=u.startAngle,h=u.endAngle,x=o,p;if(m<=h){for(;x>h;)x-=360;for(;x<m;)x+=360;p=x>=m&&x<=h}else{for(;x>m;)x-=360;for(;x<h;)x+=360;p=x>=h&&x<=m}return p?ul(ul({},n),{},{radius:l,angle:Dke(x,n)}):null},u9=function(s){return!b.isValidElement(s)&&!Dt(s)&&typeof s!="boolean"?s.className:""};function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Bp(t)}var Eke=["offset"];function Oke(t){return Ike(t)||Rke(t)||_ke(t)||Mke()}function Mke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ke(t,s){if(t){if(typeof t=="string")return PS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PS(t,s)}}function Rke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ike(t){if(Array.isArray(t))return PS(t)}function PS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function $ke(t,s){if(t==null)return{};var n=Fke(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fke(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function p_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?p_(Object(n),!0).forEach(function(r){Lke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lke(t,s,n){return s=Bke(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Bke(t){var s=Vke(t,"string");return Bp(s)=="symbol"?s:s+""}function Vke(t,s){if(Bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Vp(){return Vp=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vp.apply(this,arguments)}var Uke=function(s){var n=s.value,r=s.formatter,a=It(s.children)?n:s.children;return Dt(r)?r(a):a},zke=function(s,n){var r=pr(n-s),a=Math.min(Math.abs(n-s),360);return r*a},qke=function(s,n,r){var a=s.position,i=s.viewBox,l=s.offset,o=s.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,h=c.outerRadius,x=c.startAngle,p=c.endAngle,f=c.clockWise,j=(m+h)/2,g=zke(x,p),y=g>=0?1:-1,v,w;a==="insideStart"?(v=x+y*l,w=f):a==="insideEnd"?(v=p-y*l,w=!f):a==="end"&&(v=p+y*l,w=f),w=g<=0?w:!w;var N=Ms(d,u,j,v),S=Ms(d,u,j,v+(w?1:-1)*359),k="M".concat(N.x,",").concat(N.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(w?0:1,`,
    `).concat(S.x,",").concat(S.y),T=It(s.id)?Nh("recharts-radial-line-"):s.id;return X.createElement("text",Vp({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",o)}),X.createElement("defs",null,X.createElement("path",{id:T,d:k})),X.createElement("textPath",{xlinkHref:"#".concat(T)},n))},Hke=function(s){var n=s.viewBox,r=s.offset,a=s.position,i=n,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,m=i.endAngle,h=(u+m)/2;if(a==="outside"){var x=Ms(l,o,d+r,h),p=x.x,f=x.y;return{x:p,y:f,textAnchor:p>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var j=(c+d)/2,g=Ms(l,o,j,h),y=g.x,v=g.y;return{x:y,y:v,textAnchor:"middle",verticalAnchor:"middle"}},Gke=function(s){var n=s.viewBox,r=s.parentViewBox,a=s.offset,i=s.position,l=n,o=l.x,c=l.y,d=l.width,u=l.height,m=u>=0?1:-1,h=m*a,x=m>0?"end":"start",p=m>0?"start":"end",f=d>=0?1:-1,j=f*a,g=f>0?"end":"start",y=f>0?"start":"end";if(i==="top"){var v={x:o+d/2,y:c-m*a,textAnchor:"middle",verticalAnchor:x};return Dn(Dn({},v),r?{height:Math.max(c-r.y,0),width:d}:{})}if(i==="bottom"){var w={x:o+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:p};return Dn(Dn({},w),r?{height:Math.max(r.y+r.height-(c+u),0),width:d}:{})}if(i==="left"){var N={x:o-j,y:c+u/2,textAnchor:g,verticalAnchor:"middle"};return Dn(Dn({},N),r?{width:Math.max(N.x-r.x,0),height:u}:{})}if(i==="right"){var S={x:o+d+j,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return Dn(Dn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:u}:{})}var k=r?{width:d,height:u}:{};return i==="insideLeft"?Dn({x:o+j,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},k):i==="insideRight"?Dn({x:o+d-j,y:c+u/2,textAnchor:g,verticalAnchor:"middle"},k):i==="insideTop"?Dn({x:o+d/2,y:c+h,textAnchor:"middle",verticalAnchor:p},k):i==="insideBottom"?Dn({x:o+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:x},k):i==="insideTopLeft"?Dn({x:o+j,y:c+h,textAnchor:y,verticalAnchor:p},k):i==="insideTopRight"?Dn({x:o+d-j,y:c+h,textAnchor:g,verticalAnchor:p},k):i==="insideBottomLeft"?Dn({x:o+j,y:c+u-h,textAnchor:y,verticalAnchor:x},k):i==="insideBottomRight"?Dn({x:o+d-j,y:c+u-h,textAnchor:g,verticalAnchor:x},k):vh(i)&&(He(i.x)||$c(i.x))&&(He(i.y)||$c(i.y))?Dn({x:o+fr(i.x,d),y:c+fr(i.y,u),textAnchor:"end",verticalAnchor:"end"},k):Dn({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},Wke=function(s){return"cx"in s&&He(s.cx)};function Ln(t){var s=t.offset,n=s===void 0?5:s,r=$ke(t,Eke),a=Dn({offset:n},r),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,m=u===void 0?"":u,h=a.textBreakAll;if(!i||It(o)&&It(c)&&!b.isValidElement(d)&&!Dt(d))return null;if(b.isValidElement(d))return b.cloneElement(d,a);var x;if(Dt(d)){if(x=b.createElement(d,a),b.isValidElement(x))return x}else x=Uke(a);var p=Wke(i),f=wt(a,!0);if(p&&(l==="insideStart"||l==="insideEnd"||l==="end"))return qke(a,x,f);var j=p?Hke(a):Gke(a);return X.createElement(Nd,Vp({className:$t("recharts-label",m)},f,j,{breakAll:h}),x)}Ln.displayName="Label";var m9=function(s){var n=s.cx,r=s.cy,a=s.angle,i=s.startAngle,l=s.endAngle,o=s.r,c=s.radius,d=s.innerRadius,u=s.outerRadius,m=s.x,h=s.y,x=s.top,p=s.left,f=s.width,j=s.height,g=s.clockWise,y=s.labelViewBox;if(y)return y;if(He(f)&&He(j)){if(He(m)&&He(h))return{x:m,y:h,width:f,height:j};if(He(x)&&He(p))return{x,y:p,width:f,height:j}}return He(m)&&He(h)?{x:m,y:h,width:0,height:0}:He(n)&&He(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:g}:s.viewBox?s.viewBox:{}},Kke=function(s,n){return s?s===!0?X.createElement(Ln,{key:"label-implicit",viewBox:n}):_n(s)?X.createElement(Ln,{key:"label-implicit",viewBox:n,value:s}):b.isValidElement(s)?s.type===Ln?b.cloneElement(s,{key:"label-implicit",viewBox:n}):X.createElement(Ln,{key:"label-implicit",content:s,viewBox:n}):Dt(s)?X.createElement(Ln,{key:"label-implicit",content:s,viewBox:n}):vh(s)?X.createElement(Ln,Vp({viewBox:n},s,{key:"label-implicit"})):null:null},Yke=function(s,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!s||!s.children&&r&&!s.label)return null;var a=s.children,i=m9(s),l=ta(a,Ln).map(function(c,d){return b.cloneElement(c,{viewBox:n||i,key:"label-".concat(d)})});if(!r)return l;var o=Kke(s.label,n||i);return[o].concat(Oke(l))};Ln.parseViewBox=m9;Ln.renderCallByParent=Yke;function Qke(t){var s=t==null?0:t.length;return s?t[s-1]:void 0}var Xke=Qke;const Zke=fs(Xke);function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Up(t)}var Jke=["valueAccessor"],ePe=["data","dataKey","clockWise","id","textBreakAll"];function tPe(t){return aPe(t)||rPe(t)||nPe(t)||sPe()}function sPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nPe(t,s){if(t){if(typeof t=="string")return AS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AS(t,s)}}function rPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aPe(t){if(Array.isArray(t))return AS(t)}function AS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function Xy(){return Xy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xy.apply(this,arguments)}function f_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function g_(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?f_(Object(n),!0).forEach(function(r){iPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iPe(t,s,n){return s=lPe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function lPe(t){var s=oPe(t,"string");return Up(s)=="symbol"?s:s+""}function oPe(t,s){if(Up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function v_(t,s){if(t==null)return{};var n=cPe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cPe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}var dPe=function(s){return Array.isArray(s.value)?Zke(s.value):s.value};function Pl(t){var s=t.valueAccessor,n=s===void 0?dPe:s,r=v_(t,Jke),a=r.data,i=r.dataKey,l=r.clockWise,o=r.id,c=r.textBreakAll,d=v_(r,ePe);return!a||!a.length?null:X.createElement(ss,{className:"recharts-label-list"},a.map(function(u,m){var h=It(i)?n(u,m):On(u&&u.payload,i),x=It(o)?{}:{id:"".concat(o,"-").concat(m)};return X.createElement(Ln,Xy({},wt(u,!0),d,x,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:Ln.parseViewBox(It(l)?u:g_(g_({},u),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}Pl.displayName="LabelList";function uPe(t,s){return t?t===!0?X.createElement(Pl,{key:"labelList-implicit",data:s}):X.isValidElement(t)||Dt(t)?X.createElement(Pl,{key:"labelList-implicit",data:s,content:t}):vh(t)?X.createElement(Pl,Xy({data:s},t,{key:"labelList-implicit"})):null:null}function mPe(t,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,a=ta(r,Pl).map(function(l,o){return b.cloneElement(l,{data:s,key:"labelList-".concat(o)})});if(!n)return a;var i=uPe(t.label,s);return[i].concat(tPe(a))}Pl.renderCallByParent=mPe;function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},zp(t)}function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(this,arguments)}function y_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function j_(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?y_(Object(n),!0).forEach(function(r){hPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hPe(t,s,n){return s=xPe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function xPe(t){var s=pPe(t,"string");return zp(s)=="symbol"?s:s+""}function pPe(t,s){if(zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var fPe=function(s,n){var r=pr(n-s),a=Math.min(Math.abs(n-s),359.999);return r*a},Vg=function(s){var n=s.cx,r=s.cy,a=s.radius,i=s.angle,l=s.sign,o=s.isExternal,c=s.cornerRadius,d=s.cornerIsExternal,u=c*(o?1:-1)+a,m=Math.asin(c/u)/Qy,h=d?i:i+l*m,x=Ms(n,r,u,h),p=Ms(n,r,a,h),f=d?i-l*m:i,j=Ms(n,r,u*Math.cos(m*Qy),f);return{center:x,circleTangency:p,lineTangency:j,theta:m}},h9=function(s){var n=s.cx,r=s.cy,a=s.innerRadius,i=s.outerRadius,l=s.startAngle,o=s.endAngle,c=fPe(l,o),d=l+c,u=Ms(n,r,i,l),m=Ms(n,r,i,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var x=Ms(n,r,a,l),p=Ms(n,r,a,d);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},gPe=function(s){var n=s.cx,r=s.cy,a=s.innerRadius,i=s.outerRadius,l=s.cornerRadius,o=s.forceCornerRadius,c=s.cornerIsExternal,d=s.startAngle,u=s.endAngle,m=pr(u-d),h=Vg({cx:n,cy:r,radius:i,angle:d,sign:m,cornerRadius:l,cornerIsExternal:c}),x=h.circleTangency,p=h.lineTangency,f=h.theta,j=Vg({cx:n,cy:r,radius:i,angle:u,sign:-m,cornerRadius:l,cornerIsExternal:c}),g=j.circleTangency,y=j.lineTangency,v=j.theta,w=c?Math.abs(d-u):Math.abs(d-u)-f-v;if(w<0)return o?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):h9({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var N="M ".concat(p.x,",").concat(p.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var S=Vg({cx:n,cy:r,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),k=S.circleTangency,T=S.lineTangency,C=S.theta,P=Vg({cx:n,cy:r,radius:a,angle:u,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),$=P.circleTangency,V=P.lineTangency,I=P.theta,_=c?Math.abs(d-u):Math.abs(d-u)-C-I;if(_<0&&l===0)return"".concat(N,"L").concat(n,",").concat(r,"Z");N+="L".concat(V.x,",").concat(V.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat($.x,",").concat($.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(_>180),",").concat(+(m>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(T.x,",").concat(T.y,"Z")}else N+="L".concat(n,",").concat(r,"Z");return N},vPe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},x9=function(s){var n=j_(j_({},vPe),s),r=n.cx,a=n.cy,i=n.innerRadius,l=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,m=n.endAngle,h=n.className;if(l<i||u===m)return null;var x=$t("recharts-sector",h),p=l-i,f=fr(o,p,0,!0),j;return f>0&&Math.abs(u-m)<360?j=gPe({cx:r,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(f,p/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):j=h9({cx:r,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:m}),X.createElement("path",TS({},wt(n,!0),{className:x,d:j,role:"img"}))};function qp(t){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},qp(t)}function DS(){return DS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DS.apply(this,arguments)}function b_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function N_(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?b_(Object(n),!0).forEach(function(r){yPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yPe(t,s,n){return s=jPe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function jPe(t){var s=bPe(t,"string");return qp(s)=="symbol"?s:s+""}function bPe(t,s){if(qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var w_={curveBasisClosed:ype,curveBasisOpen:jpe,curveBasis:vpe,curveBumpX:rpe,curveBumpY:ape,curveLinearClosed:bpe,curveLinear:J0,curveMonotoneX:Npe,curveMonotoneY:wpe,curveNatural:Spe,curveStep:Cpe,curveStepAfter:Ppe,curveStepBefore:kpe},Ug=function(s){return s.x===+s.x&&s.y===+s.y},Jh=function(s){return s.x},ex=function(s){return s.y},NPe=function(s,n){if(Dt(s))return s;var r="curve".concat(X0(s));return(r==="curveMonotone"||r==="curveBump")&&n?w_["".concat(r).concat(n==="vertical"?"Y":"X")]:w_[r]||J0},wPe=function(s){var n=s.type,r=n===void 0?"linear":n,a=s.points,i=a===void 0?[]:a,l=s.baseLine,o=s.layout,c=s.connectNulls,d=c===void 0?!1:c,u=NPe(r,o),m=d?i.filter(function(f){return Ug(f)}):i,h;if(Array.isArray(l)){var x=d?l.filter(function(f){return Ug(f)}):l,p=m.map(function(f,j){return N_(N_({},f),{},{base:x[j]})});return o==="vertical"?h=Og().y(ex).x1(Jh).x0(function(f){return f.base.x}):h=Og().x(Jh).y1(ex).y0(function(f){return f.base.y}),h.defined(Ug).curve(u),h(p)}return o==="vertical"&&He(l)?h=Og().y(ex).x1(Jh).x0(l):He(l)?h=Og().x(Jh).y1(ex).y0(l):h=oz().x(Jh).y(ex),h.defined(Ug).curve(u),h(m)},Zy=function(s){var n=s.className,r=s.points,a=s.path,i=s.pathRef;if((!r||!r.length)&&!a)return null;var l=r&&r.length?wPe(s):a;return b.createElement("path",DS({},wt(s,!1),Ny(s),{className:$t("recharts-curve",n),d:l,ref:i}))},p9={exports:{}},SPe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CPe=SPe,kPe=CPe;function f9(){}function g9(){}g9.resetWarningCache=f9;var PPe=function(){function t(r,a,i,l,o,c){if(c!==kPe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:g9,resetWarningCache:f9};return n.PropTypes=n,n};p9.exports=PPe();var APe=p9.exports;const us=fs(APe);var TPe=Object.getOwnPropertyNames,DPe=Object.getOwnPropertySymbols,EPe=Object.prototype.hasOwnProperty;function S_(t,s){return function(r,a,i){return t(r,a,i)&&s(r,a,i)}}function zg(t){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,a);var i=a.cache,l=i.get(n),o=i.get(r);if(l&&o)return l===r&&o===n;i.set(n,r),i.set(r,n);var c=t(n,r,a);return i.delete(n),i.delete(r),c}}function C_(t){return TPe(t).concat(DPe(t))}var OPe=Object.hasOwn||function(t,s){return EPe.call(t,s)};function Ld(t,s){return t===s||!t&&!s&&t!==t&&s!==s}var MPe="__v",_Pe="__o",RPe="_owner",k_=Object.getOwnPropertyDescriptor,P_=Object.keys;function IPe(t,s,n){var r=t.length;if(s.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],s[r],r,r,t,s,n))return!1;return!0}function $Pe(t,s){return Ld(t.getTime(),s.getTime())}function FPe(t,s){return t.name===s.name&&t.message===s.message&&t.cause===s.cause&&t.stack===s.stack}function LPe(t,s){return t===s}function A_(t,s,n){var r=t.size;if(r!==s.size)return!1;if(!r)return!0;for(var a=new Array(r),i=t.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=s.entries(),u=!1,m=0;(o=d.next())&&!o.done;){if(a[m]){m++;continue}var h=l.value,x=o.value;if(n.equals(h[0],x[0],c,m,t,s,n)&&n.equals(h[1],x[1],h[0],x[0],t,s,n)){u=a[m]=!0;break}m++}if(!u)return!1;c++}return!0}var BPe=Ld;function VPe(t,s,n){var r=P_(t),a=r.length;if(P_(s).length!==a)return!1;for(;a-- >0;)if(!v9(t,s,n,r[a]))return!1;return!0}function tx(t,s,n){var r=C_(t),a=r.length;if(C_(s).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=r[a],!v9(t,s,n,i)||(l=k_(t,i),o=k_(s,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function UPe(t,s){return Ld(t.valueOf(),s.valueOf())}function zPe(t,s){return t.source===s.source&&t.flags===s.flags}function T_(t,s,n){var r=t.size;if(r!==s.size)return!1;if(!r)return!0;for(var a=new Array(r),i=t.values(),l,o;(l=i.next())&&!l.done;){for(var c=s.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&n.equals(l.value,o.value,l.value,o.value,t,s,n)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function qPe(t,s){var n=t.length;if(s.length!==n)return!1;for(;n-- >0;)if(t[n]!==s[n])return!1;return!0}function HPe(t,s){return t.hostname===s.hostname&&t.pathname===s.pathname&&t.protocol===s.protocol&&t.port===s.port&&t.hash===s.hash&&t.username===s.username&&t.password===s.password}function v9(t,s,n,r){return(r===RPe||r===_Pe||r===MPe)&&(t.$$typeof||s.$$typeof)?!0:OPe(s,r)&&n.equals(t[r],s[r],r,r,t,s,n)}var GPe="[object Arguments]",WPe="[object Boolean]",KPe="[object Date]",YPe="[object Error]",QPe="[object Map]",XPe="[object Number]",ZPe="[object Object]",JPe="[object RegExp]",eAe="[object Set]",tAe="[object String]",sAe="[object URL]",nAe=Array.isArray,D_=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,E_=Object.assign,rAe=Object.prototype.toString.call.bind(Object.prototype.toString);function aAe(t){var s=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,l=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,m=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(p,f,j){if(p===f)return!0;if(p==null||f==null)return!1;var g=typeof p;if(g!==typeof f)return!1;if(g!=="object")return g==="number"?l(p,f,j):g==="function"?a(p,f,j):!1;var y=p.constructor;if(y!==f.constructor)return!1;if(y===Object)return o(p,f,j);if(nAe(p))return s(p,f,j);if(D_!=null&&D_(p))return m(p,f,j);if(y===Date)return n(p,f,j);if(y===RegExp)return d(p,f,j);if(y===Map)return i(p,f,j);if(y===Set)return u(p,f,j);var v=rAe(p);return v===KPe?n(p,f,j):v===JPe?d(p,f,j):v===QPe?i(p,f,j):v===eAe?u(p,f,j):v===ZPe?typeof p.then!="function"&&typeof f.then!="function"&&o(p,f,j):v===sAe?h(p,f,j):v===YPe?r(p,f,j):v===GPe?o(p,f,j):v===WPe||v===XPe||v===tAe?c(p,f,j):!1}}function iAe(t){var s=t.circular,n=t.createCustomConfig,r=t.strict,a={areArraysEqual:r?tx:IPe,areDatesEqual:$Pe,areErrorsEqual:FPe,areFunctionsEqual:LPe,areMapsEqual:r?S_(A_,tx):A_,areNumbersEqual:BPe,areObjectsEqual:r?tx:VPe,arePrimitiveWrappersEqual:UPe,areRegExpsEqual:zPe,areSetsEqual:r?S_(T_,tx):T_,areTypedArraysEqual:r?tx:qPe,areUrlsEqual:HPe};if(n&&(a=E_({},a,n(a))),s){var i=zg(a.areArraysEqual),l=zg(a.areMapsEqual),o=zg(a.areObjectsEqual),c=zg(a.areSetsEqual);a=E_({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function lAe(t){return function(s,n,r,a,i,l,o){return t(s,n,o)}}function oAe(t){var s=t.circular,n=t.comparator,r=t.createState,a=t.equals,i=t.strict;if(r)return function(c,d){var u=r(),m=u.cache,h=m===void 0?s?new WeakMap:void 0:m,x=u.meta;return n(c,d,{cache:h,equals:a,meta:x,strict:i})};if(s)return function(c,d){return n(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return n(c,d,l)}}var cAe=hc();hc({strict:!0});hc({circular:!0});hc({circular:!0,strict:!0});hc({createInternalComparator:function(){return Ld}});hc({strict:!0,createInternalComparator:function(){return Ld}});hc({circular:!0,createInternalComparator:function(){return Ld}});hc({circular:!0,createInternalComparator:function(){return Ld},strict:!0});function hc(t){t===void 0&&(t={});var s=t.circular,n=s===void 0?!1:s,r=t.createInternalComparator,a=t.createState,i=t.strict,l=i===void 0?!1:i,o=iAe(t),c=aAe(o),d=r?r(c):lAe(c);return oAe({circular:n,comparator:c,createState:a,equals:d,strict:l})}function dAe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function O_(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>s?(t(i),n=-1):dAe(a)};requestAnimationFrame(r)}function ES(t){"@babel/helpers - typeof";return ES=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ES(t)}function uAe(t){return pAe(t)||xAe(t)||hAe(t)||mAe()}function mAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hAe(t,s){if(t){if(typeof t=="string")return M_(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M_(t,s)}}function M_(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function xAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pAe(t){if(Array.isArray(t))return t}function fAe(){var t={},s=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,o=uAe(l),c=o[0],d=o.slice(1);if(typeof c=="number"){O_(a.bind(null,d),c);return}a(c),O_(a.bind(null,d));return}ES(i)==="object"&&(t=i,s(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return s=i,function(){s=function(){return null}}}}}function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Hp(t)}function __(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function R_(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?__(Object(n),!0).forEach(function(r){y9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):__(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y9(t,s,n){return s=gAe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function gAe(t){var s=vAe(t,"string");return Hp(s)==="symbol"?s:String(s)}function vAe(t,s){if(Hp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Hp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var yAe=function(s,n){return[Object.keys(s),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},jAe=function(s){return s},bAe=function(s){return s.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Mx=function(s,n){return Object.keys(n).reduce(function(r,a){return R_(R_({},r),{},y9({},a,s(a,n[a])))},{})},I_=function(s,n,r){return s.map(function(a){return"".concat(bAe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function NAe(t,s){return CAe(t)||SAe(t,s)||j9(t,s)||wAe()}function wAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SAe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function CAe(t){if(Array.isArray(t))return t}function kAe(t){return TAe(t)||AAe(t)||j9(t)||PAe()}function PAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j9(t,s){if(t){if(typeof t=="string")return OS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OS(t,s)}}function AAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TAe(t){if(Array.isArray(t))return OS(t)}function OS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}var Jy=1e-4,b9=function(s,n){return[0,3*s,3*n-6*s,3*s-3*n+1]},N9=function(s,n){return s.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},$_=function(s,n){return function(r){var a=b9(s,n);return N9(a,r)}},DAe=function(s,n){return function(r){var a=b9(s,n),i=[].concat(kAe(a.map(function(l,o){return l*o}).slice(1)),[0]);return N9(i,r)}},F_=function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];var a=n[0],i=n[1],l=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(j){return parseFloat(j)}),u=NAe(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var m=$_(a,l),h=$_(i,o),x=DAe(a,l),p=function(g){return g>1?1:g<0?0:g},f=function(g){for(var y=g>1?1:g,v=y,w=0;w<8;++w){var N=m(v)-y,S=x(v);if(Math.abs(N-y)<Jy||S<Jy)return h(v);v=p(v-N/S)}return h(v)};return f.isStepper=!1,f},EAe=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=s.stiff,r=n===void 0?100:n,a=s.damping,i=a===void 0?8:a,l=s.dt,o=l===void 0?17:l,c=function(u,m,h){var x=-(u-m)*r,p=h*i,f=h+(x-p)*o/1e3,j=h*o/1e3+u;return Math.abs(j-m)<Jy&&Math.abs(f)<Jy?[m,0]:[j,f]};return c.isStepper=!0,c.dt=o,c},OAe=function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return F_(a);case"spring":return EAe();default:if(a.split("(")[0]==="cubic-bezier")return F_(a)}return typeof a=="function"?a:null};function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gp(t)}function L_(t){return RAe(t)||_Ae(t)||w9(t)||MAe()}function MAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RAe(t){if(Array.isArray(t))return _S(t)}function B_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?B_(Object(n),!0).forEach(function(r){MS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MS(t,s,n){return s=IAe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function IAe(t){var s=$Ae(t,"string");return Gp(s)==="symbol"?s:String(s)}function $Ae(t,s){if(Gp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Gp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function FAe(t,s){return VAe(t)||BAe(t,s)||w9(t,s)||LAe()}function LAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w9(t,s){if(t){if(typeof t=="string")return _S(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _S(t,s)}}function _S(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function BAe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function VAe(t){if(Array.isArray(t))return t}var ej=function(s,n,r){return s+(n-s)*r},RS=function(s){var n=s.from,r=s.to;return n!==r},UAe=function t(s,n,r){var a=Mx(function(i,l){if(RS(l)){var o=s(l.from,l.to,l.velocity),c=FAe(o,2),d=c[0],u=c[1];return qn(qn({},l),{},{from:d,velocity:u})}return l},n);return r<1?Mx(function(i,l){return RS(l)?qn(qn({},l),{},{velocity:ej(l.velocity,a[i].velocity,r),from:ej(l.from,a[i].from,r)}):l},n):t(s,a,r-1)};const zAe=function(t,s,n,r,a){var i=yAe(t,s),l=i.reduce(function(j,g){return qn(qn({},j),{},MS({},g,[t[g],s[g]]))},{}),o=i.reduce(function(j,g){return qn(qn({},j),{},MS({},g,{from:t[g],velocity:0,to:s[g]}))},{}),c=-1,d,u,m=function(){return null},h=function(){return Mx(function(g,y){return y.from},o)},x=function(){return!Object.values(o).filter(RS).length},p=function(g){d||(d=g);var y=g-d,v=y/n.dt;o=UAe(n,o,v),a(qn(qn(qn({},t),s),h())),d=g,x()||(c=requestAnimationFrame(m))},f=function(g){u||(u=g);var y=(g-u)/r,v=Mx(function(N,S){return ej.apply(void 0,L_(S).concat([n(y)]))},l);if(a(qn(qn(qn({},t),s),v)),y<1)c=requestAnimationFrame(m);else{var w=Mx(function(N,S){return ej.apply(void 0,L_(S).concat([n(1)]))},l);a(qn(qn(qn({},t),s),w))}};return m=n.isStepper?p:f,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function Im(t){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Im(t)}var qAe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function HAe(t,s){if(t==null)return{};var n=GAe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GAe(t,s){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(s.indexOf(a)>=0)&&(n[a]=t[a]);return n}function ww(t){return QAe(t)||YAe(t)||KAe(t)||WAe()}function WAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KAe(t,s){if(t){if(typeof t=="string")return IS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IS(t,s)}}function YAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QAe(t){if(Array.isArray(t))return IS(t)}function IS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function V_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Va(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?V_(Object(n),!0).forEach(function(r){px(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function px(t,s,n){return s=S9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function XAe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ZAe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S9(r.key),r)}}function JAe(t,s,n){return s&&ZAe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function S9(t){var s=eTe(t,"string");return Im(s)==="symbol"?s:String(s)}function eTe(t,s){if(Im(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Im(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function tTe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&$S(t,s)}function $S(t,s){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$S(t,s)}function sTe(t){var s=nTe();return function(){var r=tj(t),a;if(s){var i=tj(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return FS(this,a)}}function FS(t,s){if(s&&(Im(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LS(t)}function LS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tj(t){return tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tj(t)}var Xi=function(t){tTe(n,t);var s=sTe(n);function n(r,a){var i;XAe(this,n),i=s.call(this,r,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,m=l.steps,h=l.children,x=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(LS(i)),i.changeStyle=i.changeStyle.bind(LS(i)),!o||x<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),FS(i);if(m&&m.length)i.state={style:m[0].style};else if(d){if(typeof h=="function")return i.state={style:d},FS(i);i.state={style:c?px({},c,d):d}}else i.state={style:{}};return i}return JAe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,m=i.from,h=this.state.style;if(o){if(!l){var x={style:c?px({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(x);return}if(!(cAe(a.to,u)&&a.canBegin&&a.isActive)){var p=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=p||d?m:a.to;if(this.state&&h){var j={style:c?px({},c,f):f};(c&&h[c]!==f||!c&&h!==f)&&this.setState(j)}this.runAnimation(Va(Va({},this.props),{},{from:f,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,m=a.onAnimationEnd,h=a.onAnimationStart,x=zAe(l,o,OAe(d),c,this.changeStyle),p=function(){i.stopJSAnimation=x()};this.manager.start([h,u,p,c,m])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,m=d.duration,h=m===void 0?0:m,x=function(f,j,g){if(g===0)return f;var y=j.duration,v=j.easing,w=v===void 0?"ease":v,N=j.style,S=j.properties,k=j.onAnimationEnd,T=g>0?l[g-1]:j,C=S||Object.keys(N);if(typeof w=="function"||w==="spring")return[].concat(ww(f),[i.runJSAnimation.bind(i,{from:T.style,to:N,duration:y,easing:w}),y]);var P=I_(C,y,w),$=Va(Va(Va({},T.style),N),{},{transition:P});return[].concat(ww(f),[$,y,k]).filter(jAe)};return this.manager.start([c].concat(ww(l.reduce(x,[u,Math.max(h,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=fAe());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,m=a.onAnimationEnd,h=a.steps,x=a.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var f=o?px({},o,c):c,j=I_(Object.keys(f),l,d);p.start([u,i,Va(Va({},f),{},{transition:j}),l,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=HAe(a,qAe),d=b.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var m=function(x){var p=x.props,f=p.style,j=f===void 0?{}:f,g=p.className,y=b.cloneElement(x,Va(Va({},c),{},{style:Va(Va({},j),u),className:g}));return y};return d===1?m(b.Children.only(i)):X.createElement("div",null,b.Children.map(i,function(h){return m(h)}))}}]),n}(b.PureComponent);Xi.displayName="Animate";Xi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Xi.propTypes={from:us.oneOfType([us.object,us.string]),to:us.oneOfType([us.object,us.string]),attributeName:us.string,duration:us.number,begin:us.number,easing:us.oneOfType([us.string,us.func]),steps:us.arrayOf(us.shape({duration:us.number.isRequired,style:us.object.isRequired,easing:us.oneOfType([us.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),us.func]),properties:us.arrayOf("string"),onAnimationEnd:us.func})),children:us.oneOfType([us.node,us.func]),isActive:us.bool,canBegin:us.bool,onAnimationEnd:us.func,shouldReAnimate:us.bool,onAnimationStart:us.func,onAnimationReStart:us.func};function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wp(t)}function sj(){return sj=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sj.apply(this,arguments)}function rTe(t,s){return oTe(t)||lTe(t,s)||iTe(t,s)||aTe()}function aTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iTe(t,s){if(t){if(typeof t=="string")return U_(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U_(t,s)}}function U_(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function lTe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function oTe(t){if(Array.isArray(t))return t}function z_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function q_(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?z_(Object(n),!0).forEach(function(r){cTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cTe(t,s,n){return s=dTe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function dTe(t){var s=uTe(t,"string");return Wp(s)=="symbol"?s:s+""}function uTe(t,s){if(Wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var H_=function(s,n,r,a,i){var l=Math.min(Math.abs(r)/2,Math.abs(a)/2),o=a>=0?1:-1,c=r>=0?1:-1,d=a>=0&&r>=0||a<0&&r<0?1:0,u;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],h=0,x=4;h<x;h++)m[h]=i[h]>l?l:i[h];u="M".concat(s,",").concat(n+o*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(s+c*m[0],",").concat(n)),u+="L ".concat(s+r-c*m[1],",").concat(n),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(s+r,",").concat(n+o*m[1])),u+="L ".concat(s+r,",").concat(n+a-o*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(s+r-c*m[2],",").concat(n+a)),u+="L ".concat(s+c*m[3],",").concat(n+a),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(s,",").concat(n+a-o*m[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var p=Math.min(l,i);u="M ".concat(s,",").concat(n+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(s+c*p,",").concat(n,`
            L `).concat(s+r-c*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(s+r,",").concat(n+o*p,`
            L `).concat(s+r,",").concat(n+a-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(s+r-c*p,",").concat(n+a,`
            L `).concat(s+c*p,",").concat(n+a,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(s,",").concat(n+a-o*p," Z")}else u="M ".concat(s,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return u},mTe=function(s,n){if(!s||!n)return!1;var r=s.x,a=s.y,i=n.x,l=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),m=Math.min(l,l+c),h=Math.max(l,l+c);return r>=d&&r<=u&&a>=m&&a<=h}return!1},hTe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GA=function(s){var n=q_(q_({},hTe),s),r=b.useRef(),a=b.useState(-1),i=rTe(a,2),l=i[0],o=i[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&o(w)}catch{}},[]);var c=n.x,d=n.y,u=n.width,m=n.height,h=n.radius,x=n.className,p=n.animationEasing,f=n.animationDuration,j=n.animationBegin,g=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var v=$t("recharts-rectangle",x);return y?X.createElement(Xi,{canBegin:l>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:f,animationEasing:p,isActive:y},function(w){var N=w.width,S=w.height,k=w.x,T=w.y;return X.createElement(Xi,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:j,duration:f,isActive:g,easing:p},X.createElement("path",sj({},wt(n,!0),{className:v,d:H_(k,T,N,S,h),ref:r})))}):X.createElement("path",sj({},wt(n,!0),{className:v,d:H_(c,d,u,m,h)}))},xTe=["points","className","baseLinePoints","connectNulls"];function yu(){return yu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yu.apply(this,arguments)}function pTe(t,s){if(t==null)return{};var n=fTe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fTe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function G_(t){return jTe(t)||yTe(t)||vTe(t)||gTe()}function gTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vTe(t,s){if(t){if(typeof t=="string")return BS(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BS(t,s)}}function yTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jTe(t){if(Array.isArray(t))return BS(t)}function BS(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}var W_=function(s){return s&&s.x===+s.x&&s.y===+s.y},bTe=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return s.forEach(function(r){W_(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),W_(s[0])&&n[n.length-1].push(s[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},_x=function(s,n){var r=bTe(s);n&&(r=[r.reduce(function(i,l){return[].concat(G_(i),G_(l))},[])]);var a=r.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},NTe=function(s,n,r){var a=_x(s,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(_x(n.reverse(),r).slice(1))},wTe=function(s){var n=s.points,r=s.className,a=s.baseLinePoints,i=s.connectNulls,l=pTe(s,xTe);if(!n||!n.length)return null;var o=$t("recharts-polygon",r);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=NTe(n,a,i);return X.createElement("g",{className:o},X.createElement("path",yu({},wt(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?X.createElement("path",yu({},wt(l,!0),{fill:"none",d:_x(n,i)})):null,c?X.createElement("path",yu({},wt(l,!0),{fill:"none",d:_x(a,i)})):null)}var u=_x(n,i);return X.createElement("path",yu({},wt(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function VS(){return VS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VS.apply(this,arguments)}var pb=function(s){var n=s.cx,r=s.cy,a=s.r,i=s.className,l=$t("recharts-dot",i);return n===+n&&r===+r&&a===+a?b.createElement("circle",VS({},wt(s,!1),Ny(s),{className:l,cx:n,cy:r,r:a})):null};function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Kp(t)}var STe=["x","y","top","left","width","height","className"];function US(){return US=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},US.apply(this,arguments)}function K_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function CTe(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?K_(Object(n),!0).forEach(function(r){kTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kTe(t,s,n){return s=PTe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function PTe(t){var s=ATe(t,"string");return Kp(s)=="symbol"?s:s+""}function ATe(t,s){if(Kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function TTe(t,s){if(t==null)return{};var n=DTe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DTe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ETe=function(s,n,r,a,i,l){return"M".concat(s,",").concat(i,"v").concat(a,"M").concat(l,",").concat(n,"h").concat(r)},OTe=function(s){var n=s.x,r=n===void 0?0:n,a=s.y,i=a===void 0?0:a,l=s.top,o=l===void 0?0:l,c=s.left,d=c===void 0?0:c,u=s.width,m=u===void 0?0:u,h=s.height,x=h===void 0?0:h,p=s.className,f=TTe(s,STe),j=CTe({x:r,y:i,top:o,left:d,width:m,height:x},f);return!He(r)||!He(i)||!He(m)||!He(x)||!He(o)||!He(d)?null:X.createElement("path",US({},wt(j,!0),{className:$t("recharts-cross",p),d:ETe(r,i,m,x,o,d)}))},MTe=db,_Te=Iq,RTe=sl;function ITe(t,s){return t&&t.length?MTe(t,RTe(s),_Te):void 0}var $Te=ITe;const FTe=fs($Te);var LTe=db,BTe=sl,VTe=$q;function UTe(t,s){return t&&t.length?LTe(t,BTe(s),VTe):void 0}var zTe=UTe;const qTe=fs(zTe);var HTe=["cx","cy","angle","ticks","axisLine"],GTe=["ticks","tick","angle","tickFormatter","stroke"];function $m(t){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$m(t)}function Rx(){return Rx=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rx.apply(this,arguments)}function Y_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function vc(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Y_(Object(n),!0).forEach(function(r){fb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q_(t,s){if(t==null)return{};var n=WTe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WTe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KTe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function X_(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k9(r.key),r)}}function YTe(t,s,n){return s&&X_(t.prototype,s),n&&X_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function QTe(t,s,n){return s=nj(s),XTe(t,C9()?Reflect.construct(s,n||[],nj(t).constructor):s.apply(t,n))}function XTe(t,s){if(s&&($m(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZTe(t)}function ZTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C9=function(){return!!t})()}function nj(t){return nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nj(t)}function JTe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&zS(t,s)}function zS(t,s){return zS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},zS(t,s)}function fb(t,s,n){return s=k9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function k9(t){var s=e4e(t,"string");return $m(s)=="symbol"?s:s+""}function e4e(t,s){if($m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gb=function(t){function s(){return KTe(this,s),QTe(this,s,arguments)}return JTe(s,t),YTe(s,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return Ms(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,i=r.cy,l=r.angle,o=r.ticks,c=FTe(o,function(u){return u.coordinate||0}),d=qTe(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,l=r.angle,o=r.ticks,c=r.axisLine,d=Q_(r,HTe),u=o.reduce(function(p,f){return[Math.min(p[0],f.coordinate),Math.max(p[1],f.coordinate)]},[1/0,-1/0]),m=Ms(a,i,u[0],l),h=Ms(a,i,u[1],l),x=vc(vc(vc({},wt(d,!1)),{},{fill:"none"},wt(c,!1)),{},{x1:m.x,y1:m.y,x2:h.x,y2:h.y});return X.createElement("line",Rx({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=Q_(a,GTe),m=this.getTickTextAnchor(),h=wt(u,!1),x=wt(l,!1),p=i.map(function(f,j){var g=r.getTickValueCoord(f),y=vc(vc(vc(vc({textAnchor:m,transform:"rotate(".concat(90-o,", ").concat(g.x,", ").concat(g.y,")")},h),{},{stroke:"none",fill:d},x),{},{index:j},g),{},{payload:f});return X.createElement(ss,Rx({className:$t("recharts-polar-radius-axis-tick",u9(l)),key:"tick-".concat(f.coordinate)},bd(r.props,f,j)),s.renderTickItem(l,y,c?c(f.value,j):f.value))});return X.createElement(ss,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.axisLine,l=r.tick;return!a||!a.length?null:X.createElement(ss,{className:$t("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),Ln.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,i){var l;return X.isValidElement(r)?l=X.cloneElement(r,a):Dt(r)?l=r(a):l=X.createElement(Nd,Rx({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(b.PureComponent);fb(gb,"displayName","PolarRadiusAxis");fb(gb,"axisType","radiusAxis");fb(gb,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Fm(t){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Fm(t)}function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(this,arguments)}function Z_(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function yc(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Z_(Object(n),!0).forEach(function(r){vb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t4e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function J_(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A9(r.key),r)}}function s4e(t,s,n){return s&&J_(t.prototype,s),n&&J_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n4e(t,s,n){return s=rj(s),r4e(t,P9()?Reflect.construct(s,n||[],rj(t).constructor):s.apply(t,n))}function r4e(t,s){if(s&&(Fm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a4e(t)}function a4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P9=function(){return!!t})()}function rj(t){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rj(t)}function i4e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&qS(t,s)}function qS(t,s){return qS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},qS(t,s)}function vb(t,s,n){return s=A9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function A9(t){var s=l4e(t,"string");return Fm(s)=="symbol"?s:s+""}function l4e(t,s){if(Fm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var o4e=Math.PI/180,eR=1e-5,yb=function(t){function s(){return t4e(this,s),n4e(this,s,arguments)}return i4e(s,t),s4e(s,[{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,m=Ms(i,l,o,r.coordinate),h=Ms(i,l,o+(c==="inner"?-1:1)*u,r.coordinate);return{x1:m.x,y1:m.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,i=Math.cos(-r.coordinate*o4e),l;return i>eR?l=a==="outer"?"start":"end":i<-eR?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,l=r.radius,o=r.axisLine,c=r.axisLineType,d=yc(yc({},wt(this.props,!1)),{},{fill:"none"},wt(o,!1));if(c==="circle")return X.createElement(pb,Tc({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,m=u.map(function(h){return Ms(a,i,l,h.coordinate)});return X.createElement(wTe,Tc({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=wt(this.props,!1),m=wt(l,!1),h=yc(yc({},u),{},{fill:"none"},wt(o,!1)),x=i.map(function(p,f){var j=r.getTickLineCoord(p),g=r.getTickTextAnchor(p),y=yc(yc(yc({textAnchor:g},u),{},{stroke:"none",fill:d},m),{},{index:f,payload:p,x:j.x2,y:j.y2});return X.createElement(ss,Tc({className:$t("recharts-polar-angle-axis-tick",u9(l)),key:"tick-".concat(p.coordinate)},bd(r.props,p,f)),o&&X.createElement("line",Tc({className:"recharts-polar-angle-axis-tick-line"},h,j)),l&&s.renderTickItem(l,y,c?c(p.value,f):p.value))});return X.createElement(ss,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.radius,l=r.axisLine;return i<=0||!a||!a.length?null:X.createElement(ss,{className:$t("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,i){var l;return X.isValidElement(r)?l=X.cloneElement(r,a):Dt(r)?l=r(a):l=X.createElement(Nd,Tc({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(b.PureComponent);vb(yb,"displayName","PolarAngleAxis");vb(yb,"axisType","angleAxis");vb(yb,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var c4e=Oz,d4e=c4e(Object.getPrototypeOf,Object),u4e=d4e,m4e=Hl,h4e=u4e,x4e=Gl,p4e="[object Object]",f4e=Function.prototype,g4e=Object.prototype,T9=f4e.toString,v4e=g4e.hasOwnProperty,y4e=T9.call(Object);function j4e(t){if(!x4e(t)||m4e(t)!=p4e)return!1;var s=h4e(t);if(s===null)return!0;var n=v4e.call(s,"constructor")&&s.constructor;return typeof n=="function"&&n instanceof n&&T9.call(n)==y4e}var b4e=j4e;const N4e=fs(b4e);var w4e=Hl,S4e=Gl,C4e="[object Boolean]";function k4e(t){return t===!0||t===!1||S4e(t)&&w4e(t)==C4e}var P4e=k4e;const A4e=fs(P4e);function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Yp(t)}function aj(){return aj=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aj.apply(this,arguments)}function T4e(t,s){return M4e(t)||O4e(t,s)||E4e(t,s)||D4e()}function D4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E4e(t,s){if(t){if(typeof t=="string")return tR(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tR(t,s)}}function tR(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function O4e(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function M4e(t){if(Array.isArray(t))return t}function sR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function nR(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?sR(Object(n),!0).forEach(function(r){_4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _4e(t,s,n){return s=R4e(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function R4e(t){var s=I4e(t,"string");return Yp(s)=="symbol"?s:s+""}function I4e(t,s){if(Yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var rR=function(s,n,r,a,i){var l=r-a,o;return o="M ".concat(s,",").concat(n),o+="L ".concat(s+r,",").concat(n),o+="L ".concat(s+r-l/2,",").concat(n+i),o+="L ".concat(s+r-l/2-a,",").concat(n+i),o+="L ".concat(s,",").concat(n," Z"),o},$4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},F4e=function(s){var n=nR(nR({},$4e),s),r=b.useRef(),a=b.useState(-1),i=T4e(a,2),l=i[0],o=i[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&o(v)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,m=n.lowerWidth,h=n.height,x=n.className,p=n.animationEasing,f=n.animationDuration,j=n.animationBegin,g=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||h!==+h||u===0&&m===0||h===0)return null;var y=$t("recharts-trapezoid",x);return g?X.createElement(Xi,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:h,x:c,y:d},duration:f,animationEasing:p,isActive:g},function(v){var w=v.upperWidth,N=v.lowerWidth,S=v.height,k=v.x,T=v.y;return X.createElement(Xi,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:j,duration:f,easing:p},X.createElement("path",aj({},wt(n,!0),{className:y,d:rR(k,T,w,N,S),ref:r})))}):X.createElement("g",null,X.createElement("path",aj({},wt(n,!0),{className:y,d:rR(c,d,u,m,h)})))},L4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qp(t)}function B4e(t,s){if(t==null)return{};var n=V4e(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function V4e(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function aR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ij(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?aR(Object(n),!0).forEach(function(r){U4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U4e(t,s,n){return s=z4e(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function z4e(t){var s=q4e(t,"string");return Qp(s)=="symbol"?s:s+""}function q4e(t,s){if(Qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function H4e(t,s){return ij(ij({},s),t)}function G4e(t,s){return t==="symbols"}function iR(t){var s=t.shapeType,n=t.elementProps;switch(s){case"rectangle":return X.createElement(GA,n);case"trapezoid":return X.createElement(F4e,n);case"sector":return X.createElement(x9,n);case"symbols":if(G4e(s))return X.createElement(uA,n);break;default:return null}}function W4e(t){return b.isValidElement(t)?t.props:t}function D9(t){var s=t.option,n=t.shapeType,r=t.propTransformer,a=r===void 0?H4e:r,i=t.activeClassName,l=i===void 0?"recharts-active-shape":i,o=t.isActive,c=B4e(t,L4e),d;if(b.isValidElement(s))d=b.cloneElement(s,ij(ij({},c),W4e(s)));else if(Dt(s))d=s(c);else if(N4e(s)&&!A4e(s)){var u=a(s,c);d=X.createElement(iR,{shapeType:n,elementProps:u})}else{var m=c;d=X.createElement(iR,{shapeType:n,elementProps:m})}return o?X.createElement(ss,{className:l},d):d}function jb(t,s){return s!=null&&"trapezoids"in t.props}function bb(t,s){return s!=null&&"sectors"in t.props}function Xp(t,s){return s!=null&&"points"in t.props}function K4e(t,s){var n,r,a=t.x===(s==null||(n=s.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===s.x,i=t.y===(s==null||(r=s.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===s.y;return a&&i}function Y4e(t,s){var n=t.endAngle===s.endAngle,r=t.startAngle===s.startAngle;return n&&r}function Q4e(t,s){var n=t.x===s.x,r=t.y===s.y,a=t.z===s.z;return n&&r&&a}function X4e(t,s){var n;return jb(t,s)?n=K4e:bb(t,s)?n=Y4e:Xp(t,s)&&(n=Q4e),n}function Z4e(t,s){var n;return jb(t,s)?n="trapezoids":bb(t,s)?n="sectors":Xp(t,s)&&(n="points"),n}function J4e(t,s){if(jb(t,s)){var n;return(n=s.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(bb(t,s)){var r;return(r=s.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Xp(t,s)?s.payload:{}}function eDe(t){var s=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,a=Z4e(n,s),i=J4e(n,s),l=r.filter(function(c,d){var u=Yf(i,c),m=n.props[a].filter(function(p){var f=X4e(n,s);return f(p,s)}),h=n.props[a].indexOf(m[m.length-1]),x=d===h;return u&&x}),o=r.indexOf(l[l.length-1]);return o}var Nv;function Lm(t){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Lm(t)}function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ju.apply(this,arguments)}function lR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function As(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?lR(Object(n),!0).forEach(function(r){ba(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tDe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function oR(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O9(r.key),r)}}function sDe(t,s,n){return s&&oR(t.prototype,s),n&&oR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nDe(t,s,n){return s=lj(s),rDe(t,E9()?Reflect.construct(s,n||[],lj(t).constructor):s.apply(t,n))}function rDe(t,s){if(s&&(Lm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aDe(t)}function aDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E9=function(){return!!t})()}function lj(t){return lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lj(t)}function iDe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&HS(t,s)}function HS(t,s){return HS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},HS(t,s)}function ba(t,s,n){return s=O9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function O9(t){var s=lDe(t,"string");return Lm(s)=="symbol"?s:s+""}function lDe(t,s){if(Lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gi=function(t){function s(n){var r;return tDe(this,s),r=nDe(this,s,[n]),ba(r,"pieRef",null),ba(r,"sectorRefs",[]),ba(r,"id",Nh("recharts-pie-")),ba(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Dt(a)&&a()}),ba(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Dt(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return iDe(s,t),sDe(s,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=wt(this.props,!1),m=wt(l,!1),h=wt(o,!1),x=l&&l.offsetRadius||20,p=r.map(function(f,j){var g=(f.startAngle+f.endAngle)/2,y=Ms(f.cx,f.cy,f.outerRadius+x,g),v=As(As(As(As({},u),f),{},{stroke:"none"},m),{},{index:j,textAnchor:s.getTextAnchor(y.x,f.cx)},y),w=As(As(As(As({},u),f),{},{fill:"none",stroke:f.fill},h),{},{index:j,points:[Ms(f.cx,f.cy,f.outerRadius,g),y]}),N=c;return It(c)&&It(d)?N="value":It(c)&&(N=d),X.createElement(ss,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(j)},o&&s.renderLabelLineItem(o,w,"line"),s.renderLabelItem(l,v,On(f,N)))});return X.createElement(ss,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return r.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&r.length!==1)return null;var m=a.isActiveIndex(u),h=c&&a.hasActiveIndex()?c:null,x=m?l:h,p=As(As({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return X.createElement(ss,ju({ref:function(j){j&&!a.sectorRefs.includes(j)&&a.sectorRefs.push(j)},tabIndex:-1,className:"recharts-pie-sector"},bd(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),X.createElement(D9,ju({option:x,isActive:m,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,m=this.state,h=m.prevSectors,x=m.prevIsAnimationActive;return X.createElement(Xi,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var f=p.t,j=[],g=i&&i[0],y=g.startAngle;return i.forEach(function(v,w){var N=h&&h[w],S=w>0?ea(v,"paddingAngle",0):0;if(N){var k=Kr(N.endAngle-N.startAngle,v.endAngle-v.startAngle),T=As(As({},v),{},{startAngle:y+S,endAngle:y+k(f)+S});j.push(T),y=T.endAngle}else{var C=v.endAngle,P=v.startAngle,$=Kr(0,C-P),V=$(f),I=As(As({},v),{},{startAngle:y+S,endAngle:y+V+S});j.push(I),y=I.endAngle}}),X.createElement(ss,null,r.renderSectorsStatically(j))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,i=r.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!Yf(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,m=a.innerRadius,h=a.outerRadius,x=a.isAnimationActive,p=this.state.isAnimationFinished;if(i||!l||!l.length||!He(d)||!He(u)||!He(m)||!He(h))return null;var f=$t("recharts-pie",o);return X.createElement(ss,{tabIndex:this.props.rootTabIndex,className:f,ref:function(g){r.pieRef=g}},this.renderSectors(),c&&this.renderLabels(l),Ln.renderCallByParent(this.props,null,!1),(!x||p)&&Pl.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,i){if(X.isValidElement(r))return X.cloneElement(r,a);if(Dt(r))return r(a);var l=$t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return X.createElement(Zy,ju({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(r,a,i){if(X.isValidElement(r))return X.cloneElement(r,a);var l=i;if(Dt(r)&&(l=r(a),X.isValidElement(l)))return l;var o=$t("recharts-pie-label-text",typeof r!="boolean"&&!Dt(r)?r.className:"");return X.createElement(Nd,ju({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(b.PureComponent);Nv=gi;ba(gi,"displayName","Pie");ba(gi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Id.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ba(gi,"parseDeltaAngle",function(t,s){var n=pr(s-t),r=Math.min(Math.abs(s-t),360);return n*r});ba(gi,"getRealPieData",function(t){var s=t.data,n=t.children,r=wt(t,!1),a=ta(n,Em);return s&&s.length?s.map(function(i,l){return As(As(As({payload:i},r),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return As(As({},r),i.props)}):[]});ba(gi,"parseCoordinateOfPie",function(t,s){var n=s.top,r=s.left,a=s.width,i=s.height,l=d9(a,i),o=r+fr(t.cx,a,a/2),c=n+fr(t.cy,i,i/2),d=fr(t.innerRadius,l,0),u=fr(t.outerRadius,l,l*.8),m=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});ba(gi,"getComposedData",function(t){var s=t.item,n=t.offset,r=s.type.defaultProps!==void 0?As(As({},s.type.defaultProps),s.props):s.props,a=Nv.getRealPieData(r);if(!a||!a.length)return null;var i=r.cornerRadius,l=r.startAngle,o=r.endAngle,c=r.paddingAngle,d=r.dataKey,u=r.nameKey,m=r.valueKey,h=r.tooltipType,x=Math.abs(r.minAngle),p=Nv.parseCoordinateOfPie(r,n),f=Nv.parseDeltaAngle(l,o),j=Math.abs(f),g=d;It(d)&&It(m)?(ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g="value"):It(d)&&(ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g=m);var y=a.filter(function(T){return On(T,g,0)!==0}).length,v=(j>=360?y:y-1)*c,w=j-y*x-v,N=a.reduce(function(T,C){var P=On(C,g,0);return T+(He(P)?P:0)},0),S;if(N>0){var k;S=a.map(function(T,C){var P=On(T,g,0),$=On(T,u,C),V=(He(P)?P:0)/N,I;C?I=k.endAngle+pr(f)*c*(P!==0?1:0):I=l;var _=I+pr(f)*((P!==0?x:0)+V*w),U=(I+_)/2,H=(p.innerRadius+p.outerRadius)/2,Y=[{name:$,value:P,payload:T,dataKey:g,type:h}],O=Ms(p.cx,p.cy,H,U);return k=As(As(As({percent:V,cornerRadius:i,name:$,tooltipPayload:Y,midAngle:U,middleRadius:H,tooltipPosition:O},T),p),{},{value:On(T,g),startAngle:I,endAngle:_,payload:T,paddingAngle:pr(f)*c}),k})}return As(As({},p),{},{sectors:S,data:a})});var oDe=Math.ceil,cDe=Math.max;function dDe(t,s,n,r){for(var a=-1,i=cDe(oDe((s-t)/(n||1)),0),l=Array(i);i--;)l[r?i:++a]=t,t+=n;return l}var uDe=dDe,mDe=Xz,cR=1/0,hDe=17976931348623157e292;function xDe(t){if(!t)return t===0?t:0;if(t=mDe(t),t===cR||t===-cR){var s=t<0?-1:1;return s*hDe}return t===t?t:0}var M9=xDe,pDe=uDe,fDe=nb,Sw=M9;function gDe(t){return function(s,n,r){return r&&typeof r!="number"&&fDe(s,n,r)&&(n=r=void 0),s=Sw(s),n===void 0?(n=s,s=0):n=Sw(n),r=r===void 0?s<n?1:-1:Sw(r),pDe(s,n,r,t)}}var vDe=gDe,yDe=vDe,jDe=yDe(),bDe=jDe;const oj=fs(bDe);function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Zp(t)}function dR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function uR(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?dR(Object(n),!0).forEach(function(r){_9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _9(t,s,n){return s=NDe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function NDe(t){var s=wDe(t,"string");return Zp(s)=="symbol"?s:s+""}function wDe(t,s){if(Zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var SDe=["Webkit","Moz","O","ms"],CDe=function(s,n){var r=s.replace(/(\w)/,function(i){return i.toUpperCase()}),a=SDe.reduce(function(i,l){return uR(uR({},i),{},_9({},l+r,n))},{});return a[s]=n,a};function Bm(t){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Bm(t)}function cj(){return cj=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cj.apply(this,arguments)}function mR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Cw(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?mR(Object(n),!0).forEach(function(r){Vr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kDe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function hR(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I9(r.key),r)}}function PDe(t,s,n){return s&&hR(t.prototype,s),n&&hR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ADe(t,s,n){return s=dj(s),TDe(t,R9()?Reflect.construct(s,n||[],dj(t).constructor):s.apply(t,n))}function TDe(t,s){if(s&&(Bm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DDe(t)}function DDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R9=function(){return!!t})()}function dj(t){return dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dj(t)}function EDe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&GS(t,s)}function GS(t,s){return GS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},GS(t,s)}function Vr(t,s,n){return s=I9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function I9(t){var s=ODe(t,"string");return Bm(s)=="symbol"?s:s+""}function ODe(t,s){if(Bm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MDe=function(s){var n=s.data,r=s.startIndex,a=s.endIndex,i=s.x,l=s.width,o=s.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=Ex().domain(oj(0,c)).range([i,i+l-o]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(a),scale:d,scaleValues:u}},xR=function(s){return s.changedTouches&&!!s.changedTouches.length},Vm=function(t){function s(n){var r;return kDe(this,s),r=ADe(this,s,[n]),Vr(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Vr(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Vr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l==null||l({endIndex:i,startIndex:o})}),r.detachDragEndListener()}),Vr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Vr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Vr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Vr(r,"handleSlideDragStart",function(a){var i=xR(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return EDe(s,t),PDe(s,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,m=Math.min(a,i),h=Math.max(a,i),x=s.getIndexInRange(l,m),p=s.getIndexInRange(l,h);return{startIndex:x-x%c,endIndex:p===u?u:p-p%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=On(i[r],o,r);return Dt(l)?l(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,h=c.startIndex,x=c.endIndex,p=c.onChange,f=r.pageX-i;f>0?f=Math.min(f,d+u-m-o,d+u-m-l):f<0&&(f=Math.max(f,d-l,d-o));var j=this.getIndex({startX:l+f,endX:o+f});(j.startIndex!==h||j.endIndex!==x)&&p&&p(j),this.setState({startX:l+f,endX:o+f,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=xR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,m=u.x,h=u.width,x=u.travellerWidth,p=u.onChange,f=u.gap,j=u.data,g={startX:this.state.startX,endX:this.state.endX},y=r.pageX-i;y>0?y=Math.min(y,m+h-x-d):y<0&&(y=Math.max(y,m-d)),g[l]=d+y;var v=this.getIndex(g),w=v.startIndex,N=v.endIndex,S=function(){var T=j.length-1;return l==="startX"&&(o>c?w%f===0:N%f===0)||o<c&&N===T||l==="endX"&&(o>c?N%f===0:w%f===0)||o>c&&N===T};this.setState(Vr(Vr({},l,d+y),"brushMoveStartX",r.pageX),function(){p&&S()&&p(v)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],m=o.indexOf(u);if(m!==-1){var h=m+r;if(!(h===-1||h>=o.length)){var x=o[h];a==="startX"&&x>=d||a==="endX"&&x<=c||this.setState(Vr({},a,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,l=r.width,o=r.height,c=r.fill,d=r.stroke;return X.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,l=r.width,o=r.height,c=r.data,d=r.children,u=r.padding,m=b.Children.only(d);return m?X.cloneElement(m,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,h=c.traveller,x=c.ariaLabel,p=c.data,f=c.startIndex,j=c.endIndex,g=Math.max(r,this.props.x),y=Cw(Cw({},wt(this.props,!1)),{},{x:g,y:d,width:u,height:m}),v=x||"Min value: ".concat((i=p[f])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=p[j])===null||l===void 0?void 0:l.name);return X.createElement(ss,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),o.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},s.renderTraveller(h,y))}},{key:"renderSlide",value:function(r,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(r,a)+d,m=Math.max(Math.abs(a-r)-d,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:m,height:o})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,l=r.y,o=r.height,c=r.travellerWidth,d=r.stroke,u=this.state,m=u.startX,h=u.endX,x=5,p={pointerEvents:"none",fill:d};return X.createElement(ss,{className:"recharts-brush-texts"},X.createElement(Nd,cj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,h)-x,y:l+o/2},p),this.getTextOfTick(a)),X.createElement(Nd,cj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,h)+c+x,y:l+o/2},p),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,l=r.children,o=r.x,c=r.y,d=r.width,u=r.height,m=r.alwaysShowText,h=this.state,x=h.startX,p=h.endX,f=h.isTextActive,j=h.isSlideMoving,g=h.isTravellerMoving,y=h.isTravellerFocused;if(!a||!a.length||!He(o)||!He(c)||!He(d)||!He(u)||d<=0||u<=0)return null;var v=$t("recharts-brush",i),w=X.Children.count(l)===1,N=CDe("userSelect","none");return X.createElement(ss,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(x,p),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(p,"endX"),(f||j||g||y||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,l=r.width,o=r.height,c=r.stroke,d=Math.floor(i+o/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),X.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return X.isValidElement(r)?i=X.cloneElement(r,a):Dt(r)?i=r(a):i=s.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,l=r.width,o=r.x,c=r.travellerWidth,d=r.updateId,u=r.startIndex,m=r.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return Cw({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?MDe({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var h=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);r[c]>a?o=c:l=c}return a>=r[o]?o:l}}])}(b.PureComponent);Vr(Vm,"displayName","Brush");Vr(Vm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _De=vA;function RDe(t,s){var n;return _De(t,function(r,a,i){return n=s(r,a,i),!n}),!!n}var IDe=RDe,$De=Sz,FDe=sl,LDe=IDe,BDe=Fr,VDe=nb;function UDe(t,s,n){var r=BDe(t)?$De:LDe;return n&&VDe(t,s,n)&&(s=void 0),r(t,FDe(s))}var zDe=UDe;const qDe=fs(zDe);var Ui=function(s,n){var r=s.alwaysShow,a=s.ifOverflow;return r&&(a="extendDomain"),a===n},pR=Gz;function HDe(t,s,n){s=="__proto__"&&pR?pR(t,s,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[s]=n}var GDe=HDe,WDe=GDe,KDe=qz,YDe=sl;function QDe(t,s){var n={};return s=YDe(s),KDe(t,function(r,a,i){WDe(n,a,s(r,a,i))}),n}var XDe=QDe;const ZDe=fs(XDe);function JDe(t,s){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!s(t[n],n,t))return!1;return!0}var eEe=JDe,tEe=vA;function sEe(t,s){var n=!0;return tEe(t,function(r,a,i){return n=!!s(r,a,i),n}),n}var nEe=sEe,rEe=eEe,aEe=nEe,iEe=sl,lEe=Fr,oEe=nb;function cEe(t,s,n){var r=lEe(t)?rEe:aEe;return n&&oEe(t,s,n)&&(s=void 0),r(t,iEe(s))}var dEe=cEe;const $9=fs(dEe);var uEe=["x","y"];function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Jp(t)}function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WS.apply(this,arguments)}function fR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function sx(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?fR(Object(n),!0).forEach(function(r){mEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mEe(t,s,n){return s=hEe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function hEe(t){var s=xEe(t,"string");return Jp(s)=="symbol"?s:s+""}function xEe(t,s){if(Jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function pEe(t,s){if(t==null)return{};var n=fEe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fEe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gEe(t,s){var n=t.x,r=t.y,a=pEe(t,uEe),i="".concat(n),l=parseInt(i,10),o="".concat(r),c=parseInt(o,10),d="".concat(s.height||a.height),u=parseInt(d,10),m="".concat(s.width||a.width),h=parseInt(m,10);return sx(sx(sx(sx(sx({},s),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:h,name:s.name,radius:s.radius})}function gR(t){return X.createElement(D9,WS({shapeType:"rectangle",propTransformer:gEe,activeClassName:"recharts-active-bar"},t))}var vEe=function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof s=="number")return s;var i=He(r)||zhe(r);return i?s(r,a):(i||Sd(),n)}},yEe=["value","background"],F9;function Um(t){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Um(t)}function jEe(t,s){if(t==null)return{};var n=bEe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bEe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uj(){return uj=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uj.apply(this,arguments)}function vR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bn(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?vR(Object(n),!0).forEach(function(r){To(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NEe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function yR(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B9(r.key),r)}}function wEe(t,s,n){return s&&yR(t.prototype,s),n&&yR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function SEe(t,s,n){return s=mj(s),CEe(t,L9()?Reflect.construct(s,n||[],mj(t).constructor):s.apply(t,n))}function CEe(t,s){if(s&&(Um(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kEe(t)}function kEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L9=function(){return!!t})()}function mj(t){return mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mj(t)}function PEe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&KS(t,s)}function KS(t,s){return KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},KS(t,s)}function To(t,s,n){return s=B9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function B9(t){var s=AEe(t,"string");return Um(s)=="symbol"?s:s+""}function AEe(t,s){if(Um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Al=function(t){function s(){var n;NEe(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=SEe(this,s,[].concat(a)),To(n,"state",{isAnimationFinished:!1}),To(n,"id",Nh("recharts-bar-")),To(n,"handleAnimationEnd",function(){var l=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),l&&l()}),To(n,"handleAnimationStart",function(){var l=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),l&&l()}),n}return PEe(s,t),wEe(s,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=wt(this.props,!1);return r&&r.map(function(m,h){var x=h===c,p=x?d:l,f=bn(bn(bn({},u),m),{},{isActive:x,option:p,index:h,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return X.createElement(ss,uj({className:"recharts-bar-rectangle"},bd(a.props,m,h),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(h)}),X.createElement(gR,f))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,h=this.state.prevData;return X.createElement(Xi,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var p=x.t,f=i.map(function(j,g){var y=h&&h[g];if(y){var v=Kr(y.x,j.x),w=Kr(y.y,j.y),N=Kr(y.width,j.width),S=Kr(y.height,j.height);return bn(bn({},j),{},{x:v(p),y:w(p),width:N(p),height:S(p)})}if(l==="horizontal"){var k=Kr(0,j.height),T=k(p);return bn(bn({},j),{},{y:j.y+j.height-T,height:T})}var C=Kr(0,j.width),P=C(p);return bn(bn({},j),{},{width:P})});return X.createElement(ss,null,r.renderRectanglesStatically(f))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!Yf(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=wt(this.props.background,!1);return i.map(function(d,u){d.value;var m=d.background,h=jEe(d,yEe);if(!m)return null;var x=bn(bn(bn(bn(bn({},h),{},{fill:"#eee"},m),c),bd(r.props,d,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return X.createElement(gR,uj({key:"background-bar-".concat(u),option:r.props.background,isActive:u===o},x))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ta(u,Qf);if(!m)return null;var h=d==="vertical"?l[0].height/2:l[0].width/2,x=function(j,g){var y=Array.isArray(j.value)?j.value[1]:j.value;return{x:j.x,y:j.y,value:y,errorVal:On(j,g)}},p={clipPath:r?"url(#clipPath-".concat(a,")"):null};return X.createElement(ss,p,m.map(function(f){return X.cloneElement(f,{key:"error-bar-".concat(a,"-").concat(f.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:h,dataPointFormatter:x})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,l=r.className,o=r.xAxis,c=r.yAxis,d=r.left,u=r.top,m=r.width,h=r.height,x=r.isAnimationActive,p=r.background,f=r.id;if(a||!i||!i.length)return null;var j=this.state.isAnimationFinished,g=$t("recharts-bar",l),y=o&&o.allowDataOverflow,v=c&&c.allowDataOverflow,w=y||v,N=It(f)?this.id:f;return X.createElement(ss,{className:g},y||v?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(N)},X.createElement("rect",{x:y?d:d-m/2,y:v?u:u-h/2,width:y?m:m*2,height:v?h:h*2}))):null,X.createElement(ss,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(N,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,N),(!x||j)&&Pl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(b.PureComponent);F9=Al;To(Al,"displayName","Bar");To(Al,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Id.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});To(Al,"getComposedData",function(t){var s=t.props,n=t.item,r=t.barPosition,a=t.bandSize,i=t.xAxis,l=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,x=oke(r,n);if(!x)return null;var p=s.layout,f=n.type.defaultProps,j=f!==void 0?bn(bn({},f),n.props):n.props,g=j.dataKey,y=j.children,v=j.minPointSize,w=p==="horizontal"?l:i,N=d?w.scale.domain():null,S=pke({numericAxis:w}),k=ta(y,Em),T=m.map(function(C,P){var $,V,I,_,U,H;d?$=cke(d[u+P],N):($=On(C,g),Array.isArray($)||($=[S,$]));var Y=vEe(v,F9.defaultProps.minPointSize)($[1],P);if(p==="horizontal"){var O,R=[l.scale($[0]),l.scale($[1])],q=R[0],re=R[1];V=o_({axis:i,ticks:o,bandSize:a,offset:x.offset,entry:C,index:P}),I=(O=re??q)!==null&&O!==void 0?O:void 0,_=x.size;var we=q-re;if(U=Number.isNaN(we)?0:we,H={x:V,y:l.y,width:_,height:l.height},Math.abs(Y)>0&&Math.abs(U)<Math.abs(Y)){var K=pr(U||Y)*(Math.abs(Y)-Math.abs(U));I-=K,U+=K}}else{var Ce=[i.scale($[0]),i.scale($[1])],pe=Ce[0],F=Ce[1];if(V=pe,I=o_({axis:l,ticks:c,bandSize:a,offset:x.offset,entry:C,index:P}),_=F-pe,U=x.size,H={x:i.x,y:I,width:i.width,height:U},Math.abs(Y)>0&&Math.abs(_)<Math.abs(Y)){var Q=pr(_||Y)*(Math.abs(Y)-Math.abs(_));_+=Q}}return bn(bn(bn({},C),{},{x:V,y:I,width:_,height:U,value:d?$:$[1],payload:C,background:H},k&&k[P]&&k[P].props),{},{tooltipPayload:[o9(n,C)],tooltipPosition:{x:V+_/2,y:I+U/2}})});return bn({data:T,layout:p},h)});function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ef(t)}function TEe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function jR(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V9(r.key),r)}}function DEe(t,s,n){return s&&jR(t.prototype,s),n&&jR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ka(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?bR(Object(n),!0).forEach(function(r){Nb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nb(t,s,n){return s=V9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function V9(t){var s=EEe(t,"string");return ef(s)=="symbol"?s:s+""}function EEe(t,s){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var U9=function(s,n,r,a,i){var l=s.width,o=s.height,c=s.layout,d=s.children,u=Object.keys(n),m={left:r.left,leftMirror:r.left,right:l-r.right,rightMirror:l-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!qr(d,Al);return u.reduce(function(x,p){var f=n[p],j=f.orientation,g=f.domain,y=f.padding,v=y===void 0?{}:y,w=f.mirror,N=f.reversed,S="".concat(j).concat(w?"Mirror":""),k,T,C,P,$;if(f.type==="number"&&(f.padding==="gap"||f.padding==="no-gap")){var V=g[1]-g[0],I=1/0,_=f.categoricalDomain.sort(Ghe);if(_.forEach(function(Ce,pe){pe>0&&(I=Math.min((Ce||0)-(_[pe-1]||0),I))}),Number.isFinite(I)){var U=I/V,H=f.layout==="vertical"?r.height:r.width;if(f.padding==="gap"&&(k=U*H/2),f.padding==="no-gap"){var Y=fr(s.barCategoryGap,U*H),O=U*H/2;k=O-Y-(O-Y)/H*Y}}}a==="xAxis"?T=[r.left+(v.left||0)+(k||0),r.left+r.width-(v.right||0)-(k||0)]:a==="yAxis"?T=c==="horizontal"?[r.top+r.height-(v.bottom||0),r.top+(v.top||0)]:[r.top+(v.top||0)+(k||0),r.top+r.height-(v.bottom||0)-(k||0)]:T=f.range,N&&(T=[T[1],T[0]]);var R=r9(f,i,h),q=R.scale,re=R.realScaleType;q.domain(g).range(T),a9(q);var we=i9(q,Ka(Ka({},f),{},{realScaleType:re}));a==="xAxis"?($=j==="top"&&!w||j==="bottom"&&w,C=r.left,P=m[S]-$*f.height):a==="yAxis"&&($=j==="left"&&!w||j==="right"&&w,C=m[S]-$*f.width,P=r.top);var K=Ka(Ka(Ka({},f),we),{},{realScaleType:re,x:C,y:P,scale:q,width:a==="xAxis"?r.width:f.width,height:a==="yAxis"?r.height:f.height});return K.bandSize=Yy(K,we),!f.hide&&a==="xAxis"?m[S]+=($?-1:1)*K.height:f.hide||(m[S]+=($?-1:1)*K.width),Ka(Ka({},x),{},Nb({},p,K))},{})},z9=function(s,n){var r=s.x,a=s.y,i=n.x,l=n.y;return{x:Math.min(r,i),y:Math.min(a,l),width:Math.abs(i-r),height:Math.abs(l-a)}},OEe=function(s){var n=s.x1,r=s.y1,a=s.x2,i=s.y2;return z9({x:n,y:r},{x:a,y:i})},q9=function(){function t(s){TEe(this,t),this.scale=s}return DEe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new t(n)}}])}();Nb(q9,"EPS",1e-4);var WA=function(s){var n=Object.keys(s).reduce(function(r,a){return Ka(Ka({},r),{},Nb({},a,q9.create(s[a])))},{});return Ka(Ka({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return ZDe(a,function(c,d){return n[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return $9(a,function(i,l){return n[l].isInRange(i)})}})};function MEe(t){return(t%180+180)%180}var _Ee=function(s){var n=s.width,r=s.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=MEe(a),l=i*Math.PI/180,o=Math.atan(r/n),c=l>o&&l<Math.PI-o?r/Math.sin(l):n/Math.cos(l);return Math.abs(c)},REe=sl,IEe=qf,$Ee=tb;function FEe(t){return function(s,n,r){var a=Object(s);if(!IEe(s)){var i=REe(n);s=$Ee(s),n=function(o){return i(a[o],o,a)}}var l=t(s,n,r);return l>-1?a[i?s[l]:l]:void 0}}var LEe=FEe,BEe=M9;function VEe(t){var s=BEe(t),n=s%1;return s===s?n?s-n:s:0}var UEe=VEe,zEe=Fz,qEe=sl,HEe=UEe,GEe=Math.max;function WEe(t,s,n){var r=t==null?0:t.length;if(!r)return-1;var a=n==null?0:HEe(n);return a<0&&(a=GEe(r+a,0)),zEe(t,qEe(s),a)}var KEe=WEe,YEe=LEe,QEe=KEe,XEe=YEe(QEe),ZEe=XEe;const JEe=fs(ZEe);var eOe=Yme(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),KA=b.createContext(void 0),YA=b.createContext(void 0),H9=b.createContext(void 0),G9=b.createContext({}),W9=b.createContext(void 0),K9=b.createContext(0),Y9=b.createContext(0),NR=function(s){var n=s.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,l=s.clipPathId,o=s.children,c=s.width,d=s.height,u=eOe(i);return X.createElement(KA.Provider,{value:r},X.createElement(YA.Provider,{value:a},X.createElement(G9.Provider,{value:i},X.createElement(H9.Provider,{value:u},X.createElement(W9.Provider,{value:l},X.createElement(K9.Provider,{value:d},X.createElement(Y9.Provider,{value:c},o)))))))},tOe=function(){return b.useContext(W9)},Q9=function(s){var n=b.useContext(KA);n==null&&Sd();var r=n[s];return r==null&&Sd(),r},sOe=function(){var s=b.useContext(KA);return ho(s)},nOe=function(){var s=b.useContext(YA),n=JEe(s,function(r){return $9(r.domain,Number.isFinite)});return n||ho(s)},X9=function(s){var n=b.useContext(YA);n==null&&Sd();var r=n[s];return r==null&&Sd(),r},rOe=function(){var s=b.useContext(H9);return s},aOe=function(){return b.useContext(G9)},QA=function(){return b.useContext(Y9)},XA=function(){return b.useContext(K9)};function zm(t){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},zm(t)}function iOe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function lOe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J9(r.key),r)}}function oOe(t,s,n){return s&&lOe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function cOe(t,s,n){return s=hj(s),dOe(t,Z9()?Reflect.construct(s,n||[],hj(t).constructor):s.apply(t,n))}function dOe(t,s){if(s&&(zm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uOe(t)}function uOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z9=function(){return!!t})()}function hj(t){return hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hj(t)}function mOe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&YS(t,s)}function YS(t,s){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},YS(t,s)}function wR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function SR(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?wR(Object(n),!0).forEach(function(r){ZA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZA(t,s,n){return s=J9(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function J9(t){var s=hOe(t,"string");return zm(s)=="symbol"?s:s+""}function hOe(t,s){if(zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xOe(t,s){return vOe(t)||gOe(t,s)||fOe(t,s)||pOe()}function pOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fOe(t,s){if(t){if(typeof t=="string")return CR(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CR(t,s)}}function CR(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function gOe(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function vOe(t){if(Array.isArray(t))return t}function QS(){return QS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QS.apply(this,arguments)}var yOe=function(s,n){var r;return X.isValidElement(s)?r=X.cloneElement(s,n):Dt(s)?r=s(n):r=X.createElement("line",QS({},n,{className:"recharts-reference-line-line"})),r},jOe=function(s,n,r,a,i,l,o,c,d){var u=i.x,m=i.y,h=i.width,x=i.height;if(r){var p=d.y,f=s.y.apply(p,{position:l});if(Ui(d,"discard")&&!s.y.isInRange(f))return null;var j=[{x:u+h,y:f},{x:u,y:f}];return c==="left"?j.reverse():j}if(n){var g=d.x,y=s.x.apply(g,{position:l});if(Ui(d,"discard")&&!s.x.isInRange(y))return null;var v=[{x:y,y:m+x},{x:y,y:m}];return o==="top"?v.reverse():v}if(a){var w=d.segment,N=w.map(function(S){return s.apply(S,{position:l})});return Ui(d,"discard")&&qDe(N,function(S){return!s.isInRange(S)})?null:N}return null};function bOe(t){var s=t.x,n=t.y,r=t.segment,a=t.xAxisId,i=t.yAxisId,l=t.shape,o=t.className,c=t.alwaysShow,d=tOe(),u=Q9(a),m=X9(i),h=rOe();if(!d||!h)return null;ci(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=WA({x:u.scale,y:m.scale}),p=_n(s),f=_n(n),j=r&&r.length===2,g=jOe(x,p,f,j,h,t.position,u.orientation,m.orientation,t);if(!g)return null;var y=xOe(g,2),v=y[0],w=v.x,N=v.y,S=y[1],k=S.x,T=S.y,C=Ui(t,"hidden")?"url(#".concat(d,")"):void 0,P=SR(SR({clipPath:C},wt(t,!0)),{},{x1:w,y1:N,x2:k,y2:T});return X.createElement(ss,{className:$t("recharts-reference-line",o)},yOe(l,P),Ln.renderCallByParent(t,OEe({x1:w,y1:N,x2:k,y2:T})))}var JA=function(t){function s(){return iOe(this,s),cOe(this,s,arguments)}return mOe(s,t),oOe(s,[{key:"render",value:function(){return X.createElement(bOe,this.props)}}])}(X.Component);ZA(JA,"displayName","ReferenceLine");ZA(JA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function XS(){return XS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XS.apply(this,arguments)}function qm(t){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},qm(t)}function kR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function PR(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?kR(Object(n),!0).forEach(function(r){wb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NOe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function wOe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t7(r.key),r)}}function SOe(t,s,n){return s&&wOe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function COe(t,s,n){return s=xj(s),kOe(t,e7()?Reflect.construct(s,n||[],xj(t).constructor):s.apply(t,n))}function kOe(t,s){if(s&&(qm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return POe(t)}function POe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e7=function(){return!!t})()}function xj(t){return xj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xj(t)}function AOe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&ZS(t,s)}function ZS(t,s){return ZS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ZS(t,s)}function wb(t,s,n){return s=t7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function t7(t){var s=TOe(t,"string");return qm(s)=="symbol"?s:s+""}function TOe(t,s){if(qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DOe=function(s){var n=s.x,r=s.y,a=s.xAxis,i=s.yAxis,l=WA({x:a.scale,y:i.scale}),o=l.apply({x:n,y:r},{bandAware:!0});return Ui(s,"discard")&&!l.isInRange(o)?null:o},Sb=function(t){function s(){return NOe(this,s),COe(this,s,arguments)}return AOe(s,t),SOe(s,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,l=r.r,o=r.alwaysShow,c=r.clipPathId,d=_n(a),u=_n(i);if(ci(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=DOe(this.props);if(!m)return null;var h=m.x,x=m.y,p=this.props,f=p.shape,j=p.className,g=Ui(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=PR(PR({clipPath:g},wt(this.props,!0)),{},{cx:h,cy:x});return X.createElement(ss,{className:$t("recharts-reference-dot",j)},s.renderDot(f,y),Ln.renderCallByParent(this.props,{x:h-l,y:x-l,width:2*l,height:2*l}))}}])}(X.Component);wb(Sb,"displayName","ReferenceDot");wb(Sb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});wb(Sb,"renderDot",function(t,s){var n;return X.isValidElement(t)?n=X.cloneElement(t,s):Dt(t)?n=t(s):n=X.createElement(pb,XS({},s,{cx:s.cx,cy:s.cy,className:"recharts-reference-dot-dot"})),n});function JS(){return JS=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JS.apply(this,arguments)}function Hm(t){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Hm(t)}function AR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function TR(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?AR(Object(n),!0).forEach(function(r){Cb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EOe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function OOe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n7(r.key),r)}}function MOe(t,s,n){return s&&OOe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Oe(t,s,n){return s=pj(s),ROe(t,s7()?Reflect.construct(s,n||[],pj(t).constructor):s.apply(t,n))}function ROe(t,s){if(s&&(Hm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IOe(t)}function IOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s7=function(){return!!t})()}function pj(t){return pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pj(t)}function $Oe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&eC(t,s)}function eC(t,s){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},eC(t,s)}function Cb(t,s,n){return s=n7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function n7(t){var s=FOe(t,"string");return Hm(s)=="symbol"?s:s+""}function FOe(t,s){if(Hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var LOe=function(s,n,r,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var h=WA({x:u.scale,y:m.scale}),x={x:s?h.x.apply(l,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},p={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return Ui(i,"discard")&&(!h.isInRange(x)||!h.isInRange(p))?null:z9(x,p)},kb=function(t){function s(){return EOe(this,s),_Oe(this,s,arguments)}return $Oe(s,t),MOe(s,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,l=r.y1,o=r.y2,c=r.className,d=r.alwaysShow,u=r.clipPathId;ci(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=_n(a),h=_n(i),x=_n(l),p=_n(o),f=this.props.shape;if(!m&&!h&&!x&&!p&&!f)return null;var j=LOe(m,h,x,p,this.props);if(!j&&!f)return null;var g=Ui(this.props,"hidden")?"url(#".concat(u,")"):void 0;return X.createElement(ss,{className:$t("recharts-reference-area",c)},s.renderRect(f,TR(TR({clipPath:g},wt(this.props,!0)),j)),Ln.renderCallByParent(this.props,j))}}])}(X.Component);Cb(kb,"displayName","ReferenceArea");Cb(kb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Cb(kb,"renderRect",function(t,s){var n;return X.isValidElement(t)?n=X.cloneElement(t,s):Dt(t)?n=t(s):n=X.createElement(GA,JS({},s,{className:"recharts-reference-area-rect"})),n});function r7(t,s,n){if(s<1)return[];if(s===1&&n===void 0)return t;for(var r=[],a=0;a<t.length;a+=s)r.push(t[a]);return r}function BOe(t,s,n){var r={width:t.width+s.width,height:t.height+s.height};return _Ee(r,n)}function VOe(t,s,n){var r=n==="width",a=t.x,i=t.y,l=t.width,o=t.height;return s===1?{start:r?a:i,end:r?a+l:i+o}:{start:r?a+l:i+o,end:r?a:i}}function fj(t,s,n,r,a){if(t*s<t*r||t*s>t*a)return!1;var i=n();return t*(s-t*i/2-r)>=0&&t*(s+t*i/2-a)<=0}function UOe(t,s){return r7(t,s+1)}function zOe(t,s,n,r,a){for(var i=(r||[]).slice(),l=s.start,o=s.end,c=0,d=1,u=l,m=function(){var p=r==null?void 0:r[c];if(p===void 0)return{v:r7(r,d)};var f=c,j,g=function(){return j===void 0&&(j=n(p,f)),j},y=p.coordinate,v=c===0||fj(t,y,g,u,o);v||(c=0,u=l,d+=1),v&&(u=y+t*(g()/2+a),c+=d)},h;d<=i.length;)if(h=m(),h)return h.v;return[]}function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tf(t)}function DR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Jn(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?DR(Object(n),!0).forEach(function(r){qOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qOe(t,s,n){return s=HOe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function HOe(t){var s=GOe(t,"string");return tf(s)=="symbol"?s:s+""}function GOe(t,s){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function WOe(t,s,n,r,a){for(var i=(r||[]).slice(),l=i.length,o=s.start,c=s.end,d=function(h){var x=i[h],p,f=function(){return p===void 0&&(p=n(x,h)),p};if(h===l-1){var j=t*(x.coordinate+t*f()/2-c);i[h]=x=Jn(Jn({},x),{},{tickCoord:j>0?x.coordinate-j*t:x.coordinate})}else i[h]=x=Jn(Jn({},x),{},{tickCoord:x.coordinate});var g=fj(t,x.tickCoord,f,o,c);g&&(c=x.tickCoord-t*(f()/2+a),i[h]=Jn(Jn({},x),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function KOe(t,s,n,r,a,i){var l=(r||[]).slice(),o=l.length,c=s.start,d=s.end;if(i){var u=r[o-1],m=n(u,o-1),h=t*(u.coordinate+t*m/2-d);l[o-1]=u=Jn(Jn({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var x=fj(t,u.tickCoord,function(){return m},c,d);x&&(d=u.tickCoord-t*(m/2+a),l[o-1]=Jn(Jn({},u),{},{isShow:!0}))}for(var p=i?o-1:o,f=function(y){var v=l[y],w,N=function(){return w===void 0&&(w=n(v,y)),w};if(y===0){var S=t*(v.coordinate-t*N()/2-c);l[y]=v=Jn(Jn({},v),{},{tickCoord:S<0?v.coordinate-S*t:v.coordinate})}else l[y]=v=Jn(Jn({},v),{},{tickCoord:v.coordinate});var k=fj(t,v.tickCoord,N,c,d);k&&(c=v.tickCoord+t*(N()/2+a),l[y]=Jn(Jn({},v),{},{isShow:!0}))},j=0;j<p;j++)f(j);return l}function eT(t,s,n){var r=t.tick,a=t.ticks,i=t.viewBox,l=t.minTickGap,o=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,m=t.angle;if(!a||!a.length||!r)return[];if(He(c)||Id.isSsr)return UOe(a,typeof c=="number"&&He(c)?c:0);var h=[],x=o==="top"||o==="bottom"?"width":"height",p=u&&x==="width"?Dx(u,{fontSize:s,letterSpacing:n}):{width:0,height:0},f=function(v,w){var N=Dt(d)?d(v.value,w):v.value;return x==="width"?BOe(Dx(N,{fontSize:s,letterSpacing:n}),p,m):Dx(N,{fontSize:s,letterSpacing:n})[x]},j=a.length>=2?pr(a[1].coordinate-a[0].coordinate):1,g=VOe(i,j,x);return c==="equidistantPreserveStart"?zOe(j,g,f,a,l):(c==="preserveStart"||c==="preserveStartEnd"?h=KOe(j,g,f,a,l,c==="preserveStartEnd"):h=WOe(j,g,f,a,l),h.filter(function(y){return y.isShow}))}var YOe=["viewBox"],QOe=["viewBox"],XOe=["ticks"];function Gm(t){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gm(t)}function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bu.apply(this,arguments)}function ER(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?ER(Object(n),!0).forEach(function(r){tT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kw(t,s){if(t==null)return{};var n=ZOe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZOe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function JOe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function OR(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i7(r.key),r)}}function eMe(t,s,n){return s&&OR(t.prototype,s),n&&OR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tMe(t,s,n){return s=gj(s),sMe(t,a7()?Reflect.construct(s,n||[],gj(t).constructor):s.apply(t,n))}function sMe(t,s){if(s&&(Gm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nMe(t)}function nMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a7=function(){return!!t})()}function gj(t){return gj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gj(t)}function rMe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&tC(t,s)}function tC(t,s){return tC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},tC(t,s)}function tT(t,s,n){return s=i7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function i7(t){var s=aMe(t,"string");return Gm(s)=="symbol"?s:s+""}function aMe(t,s){if(Gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Th=function(t){function s(n){var r;return JOe(this,s),r=tMe(this,s,[n]),r.state={fontSize:"",letterSpacing:""},r}return rMe(s,t),eMe(s,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,l=kw(r,YOe),o=this.props,c=o.viewBox,d=kw(o,QOe);return!Bu(i,c)||!Bu(l,d)||!Bu(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,m=a.mirror,h=a.tickMargin,x,p,f,j,g,y,v=m?-1:1,w=r.tickSize||u,N=He(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":x=p=r.coordinate,j=l+ +!m*c,f=j-v*w,y=f-v*h,g=N;break;case"left":f=j=r.coordinate,p=i+ +!m*o,x=p-v*w,g=x-v*h,y=N;break;case"right":f=j=r.coordinate,p=i+ +m*o,x=p+v*w,g=x+v*h,y=N;break;default:x=p=r.coordinate,j=l+ +m*c,f=j+v*w,y=f+v*h,g=N;break}return{line:{x1:x,y1:f,x2:p,y2:j},tick:{x:g,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,l=r.width,o=r.height,c=r.orientation,d=r.mirror,u=r.axisLine,m=Tn(Tn(Tn({},wt(this.props,!1)),wt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);m=Tn(Tn({},m),{},{x1:a,y1:i+h*o,x2:a+l,y2:i+h*o})}else{var x=+(c==="left"&&!d||c==="right"&&d);m=Tn(Tn({},m),{},{x1:a+x*l,y1:i,x2:a+x*l,y2:i+o})}return X.createElement("line",bu({},m,{className:$t("recharts-cartesian-axis-line",ea(u,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,m=o.tickFormatter,h=o.unit,x=eT(Tn(Tn({},this.props),{},{ticks:r}),a,i),p=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),j=wt(this.props,!1),g=wt(u,!1),y=Tn(Tn({},j),{},{fill:"none"},wt(c,!1)),v=x.map(function(w,N){var S=l.getTickLineCoord(w),k=S.line,T=S.tick,C=Tn(Tn(Tn(Tn({textAnchor:p,verticalAnchor:f},j),{},{stroke:"none",fill:d},g),T),{},{index:N,payload:w,visibleTicksCount:x.length,tickFormatter:m});return X.createElement(ss,bu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},bd(l.props,w,N)),c&&X.createElement("line",bu({},y,k,{className:$t("recharts-cartesian-axis-tick-line",ea(c,"className"))})),u&&s.renderTickItem(u,C,"".concat(Dt(m)?m(w.value,N):w.value).concat(h||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var m=this.props,h=m.ticks,x=kw(m,XOe),p=h;return Dt(c)&&(p=h&&h.length>0?c(this.props):c(x)),l<=0||o<=0||!p||!p.length?null:X.createElement(ss,{className:$t("recharts-cartesian-axis",d),ref:function(j){r.layerReference=j}},i&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),Ln.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var l,o=$t(a.className,"recharts-cartesian-axis-tick-value");return X.isValidElement(r)?l=X.cloneElement(r,Tn(Tn({},a),{},{className:o})):Dt(r)?l=r(Tn(Tn({},a),{},{className:o})):l=X.createElement(Nd,bu({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(b.Component);tT(Th,"displayName","CartesianAxis");tT(Th,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var iMe=["x1","y1","x2","y2","key"],lMe=["offset"];function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cd(t)}function MR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?MR(Object(n),!0).forEach(function(r){oMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oMe(t,s,n){return s=cMe(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function cMe(t){var s=dMe(t,"string");return Cd(s)=="symbol"?s:s+""}function dMe(t,s){if(Cd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bc.apply(this,arguments)}function _R(t,s){if(t==null)return{};var n=uMe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uMe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}var mMe=function(s){var n=s.fill;if(!n||n==="none")return null;var r=s.fillOpacity,a=s.x,i=s.y,l=s.width,o=s.height,c=s.ry;return X.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function l7(t,s){var n;if(X.isValidElement(t))n=X.cloneElement(t,s);else if(Dt(t))n=t(s);else{var r=s.x1,a=s.y1,i=s.x2,l=s.y2,o=s.key,c=_R(s,iMe),d=wt(c,!1);d.offset;var u=_R(d,lMe);n=X.createElement("line",Bc({},u,{x1:r,y1:a,x2:i,y2:l,fill:"none",key:o}))}return n}function hMe(t){var s=t.x,n=t.width,r=t.horizontal,a=r===void 0?!0:r,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=sr(sr({},t),{},{x1:s,y1:o,x2:s+n,y2:o,key:"line-".concat(c),index:c});return l7(a,d)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function xMe(t){var s=t.y,n=t.height,r=t.vertical,a=r===void 0?!0:r,i=t.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=sr(sr({},t),{},{x1:o,y1:s,x2:o,y2:s+n,key:"line-".concat(c),index:c});return l7(a,d)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function pMe(t){var s=t.horizontalFill,n=t.fillOpacity,r=t.x,a=t.y,i=t.width,l=t.height,o=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!s||!s.length)return null;var u=o.map(function(h){return Math.round(h+a-a)}).sort(function(h,x){return h-x});a!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var p=!u[x+1],f=p?a+l-h:u[x+1]-h;if(f<=0)return null;var j=x%s.length;return X.createElement("rect",{key:"react-".concat(x),y:h,x:r,height:f,width:i,stroke:"none",fill:s[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function fMe(t){var s=t.vertical,n=s===void 0?!0:s,r=t.verticalFill,a=t.fillOpacity,i=t.x,l=t.y,o=t.width,c=t.height,d=t.verticalPoints;if(!n||!r||!r.length)return null;var u=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,x){return h-x});i!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var p=!u[x+1],f=p?i+o-h:u[x+1]-h;if(f<=0)return null;var j=x%r.length;return X.createElement("rect",{key:"react-".concat(x),x:h,y:l,width:f,height:c,stroke:"none",fill:r[j],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var gMe=function(s,n){var r=s.xAxis,a=s.width,i=s.height,l=s.offset;return n9(eT(sr(sr(sr({},Th.defaultProps),r),{},{ticks:bl(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,n)},vMe=function(s,n){var r=s.yAxis,a=s.width,i=s.height,l=s.offset;return n9(eT(sr(sr(sr({},Th.defaultProps),r),{},{ticks:bl(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,n)},Qd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function sC(t){var s,n,r,a,i,l,o=QA(),c=XA(),d=aOe(),u=sr(sr({},t),{},{stroke:(s=t.stroke)!==null&&s!==void 0?s:Qd.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Qd.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Qd.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Qd.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Qd.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:Qd.verticalFill,x:He(t.x)?t.x:d.left,y:He(t.y)?t.y:d.top,width:He(t.width)?t.width:d.width,height:He(t.height)?t.height:d.height}),m=u.x,h=u.y,x=u.width,p=u.height,f=u.syncWithTicks,j=u.horizontalValues,g=u.verticalValues,y=sOe(),v=nOe();if(!He(x)||x<=0||!He(p)||p<=0||!He(m)||m!==+m||!He(h)||h!==+h)return null;var w=u.verticalCoordinatesGenerator||gMe,N=u.horizontalCoordinatesGenerator||vMe,S=u.horizontalPoints,k=u.verticalPoints;if((!S||!S.length)&&Dt(N)){var T=j&&j.length,C=N({yAxis:v?sr(sr({},v),{},{ticks:T?j:v.ticks}):void 0,width:o,height:c,offset:d},T?!0:f);ci(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Cd(C),"]")),Array.isArray(C)&&(S=C)}if((!k||!k.length)&&Dt(w)){var P=g&&g.length,$=w({xAxis:y?sr(sr({},y),{},{ticks:P?g:y.ticks}):void 0,width:o,height:c,offset:d},P?!0:f);ci(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Cd($),"]")),Array.isArray($)&&(k=$)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(mMe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),X.createElement(hMe,Bc({},u,{offset:d,horizontalPoints:S,xAxis:y,yAxis:v})),X.createElement(xMe,Bc({},u,{offset:d,verticalPoints:k,xAxis:y,yAxis:v})),X.createElement(pMe,Bc({},u,{horizontalPoints:S})),X.createElement(fMe,Bc({},u,{verticalPoints:k})))}sC.displayName="CartesianGrid";var yMe=["type","layout","connectNulls","ref"],jMe=["key"];function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wm(t)}function RR(t,s){if(t==null)return{};var n=bMe(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bMe(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ix(){return Ix=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ix.apply(this,arguments)}function IR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Br(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?IR(Object(n),!0).forEach(function(r){Ya(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xd(t){return CMe(t)||SMe(t)||wMe(t)||NMe()}function NMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wMe(t,s){if(t){if(typeof t=="string")return nC(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nC(t,s)}}function SMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CMe(t){if(Array.isArray(t))return nC(t)}function nC(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function kMe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function $R(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c7(r.key),r)}}function PMe(t,s,n){return s&&$R(t.prototype,s),n&&$R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function AMe(t,s,n){return s=vj(s),TMe(t,o7()?Reflect.construct(s,n||[],vj(t).constructor):s.apply(t,n))}function TMe(t,s){if(s&&(Wm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DMe(t)}function DMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o7=function(){return!!t})()}function vj(t){return vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vj(t)}function EMe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&rC(t,s)}function rC(t,s){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},rC(t,s)}function Ya(t,s,n){return s=c7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function c7(t){var s=OMe(t,"string");return Wm(s)=="symbol"?s:s+""}function OMe(t,s){if(Wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sd=function(t){function s(){var n;kMe(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=AMe(this,s,[].concat(a)),Ya(n,"state",{isAnimationFinished:!0,totalLength:0}),Ya(n,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),Ya(n,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(g,y){return g+y});if(!d)return n.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),m=l%d,h=o-l,x=[],p=0,f=0;p<c.length;f+=c[p],++p)if(f+c[p]>m){x=[].concat(Xd(c.slice(0,p)),[m-f]);break}var j=x.length%2===0?[0,h]:[h];return[].concat(Xd(s.repeat(c,u)),Xd(x),j).map(function(g){return"".concat(g,"px")}).join(", ")}),Ya(n,"id",Nh("recharts-line-")),Ya(n,"pathRef",function(l){n.mainCurve=l}),Ya(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ya(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return EMe(s,t),PMe(s,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ta(u,Qf);if(!m)return null;var h=function(f,j){return{x:f.x,y:f.y,value:f.value,errorVal:On(f.payload,j)}},x={clipPath:r?"url(#clipPath-".concat(a,")"):null};return X.createElement(ss,x,m.map(function(p){return X.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,m=wt(this.props,!1),h=wt(c,!0),x=d.map(function(f,j){var g=Br(Br(Br({key:"dot-".concat(j),r:3},m),h),{},{index:j,cx:f.x,cy:f.y,value:f.value,dataKey:u,payload:f.payload,points:d});return s.renderDotItem(c,g)}),p={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return X.createElement(ss,Ix({className:"recharts-line-dots",key:"dots"},p),x)}},{key:"renderCurveStatically",value:function(r,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var m=RR(o,yMe),h=Br(Br(Br({},wt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:r},l),{},{type:c,layout:d,connectNulls:u});return X.createElement(Zy,Ix({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,h=l.animationEasing,x=l.animationId,p=l.animateNewValues,f=l.width,j=l.height,g=this.state,y=g.prevPoints,v=g.totalLength;return X.createElement(Xi,{begin:u,duration:m,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var N=w.t;if(y){var S=y.length/o.length,k=o.map(function(V,I){var _=Math.floor(I*S);if(y[_]){var U=y[_],H=Kr(U.x,V.x),Y=Kr(U.y,V.y);return Br(Br({},V),{},{x:H(N),y:Y(N)})}if(p){var O=Kr(f*2,V.x),R=Kr(j/2,V.y);return Br(Br({},V),{},{x:O(N),y:R(N)})}return Br(Br({},V),{},{x:V.x,y:V.y})});return i.renderCurveStatically(k,r,a)}var T=Kr(0,v),C=T(N),P;if(c){var $="".concat(c).split(/[,\s]+/gim).map(function(V){return parseFloat(V)});P=i.getStrokeDasharray(C,v,$)}else P=i.generateSimpleStrokeDasharray(v,C);return i.renderCurveStatically(o,r,a,{strokeDasharray:P})})}},{key:"renderCurve",value:function(r,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!Yf(d,l))?this.renderCurveWithAnimation(r,a):this.renderCurveStatically(l,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,m=a.top,h=a.left,x=a.width,p=a.height,f=a.isAnimationActive,j=a.id;if(i||!o||!o.length)return null;var g=this.state.isAnimationFinished,y=o.length===1,v=$t("recharts-line",c),w=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,S=w||N,k=It(j)?this.id:j,T=(r=wt(l,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=T.r,P=C===void 0?3:C,$=T.strokeWidth,V=$===void 0?2:$,I=txe(l)?l:{},_=I.clipDot,U=_===void 0?!0:_,H=P*2+V;return X.createElement(ss,{className:v},w||N?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(k)},X.createElement("rect",{x:w?h:h-x/2,y:N?m:m-p/2,width:w?x:x*2,height:N?p:p*2})),!U&&X.createElement("clipPath",{id:"clipPath-dots-".concat(k)},X.createElement("rect",{x:h-H/2,y:m-H/2,width:x+H,height:p+H}))):null,!y&&this.renderCurve(S,k),this.renderErrorBar(S,k),(y||l)&&this.renderDots(S,U,k),(!f||g)&&Pl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,a){for(var i=r.length%2!==0?[].concat(Xd(r),[0]):r,l=[],o=0;o<a;++o)l=[].concat(Xd(l),Xd(i));return l}},{key:"renderDotItem",value:function(r,a){var i;if(X.isValidElement(r))i=X.cloneElement(r,a);else if(Dt(r))i=r(a);else{var l=a.key,o=RR(a,jMe),c=$t("recharts-line-dot",typeof r!="boolean"?r.className:"");i=X.createElement(pb,Ix({key:l},o,{className:c}))}return i}}])}(b.PureComponent);Ya(sd,"displayName","Line");Ya(sd,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Id.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ya(sd,"getComposedData",function(t){var s=t.props,n=t.xAxis,r=t.yAxis,a=t.xAxisTicks,i=t.yAxisTicks,l=t.dataKey,o=t.bandSize,c=t.displayedData,d=t.offset,u=s.layout,m=c.map(function(h,x){var p=On(h,l);return u==="horizontal"?{x:l_({axis:n,ticks:a,bandSize:o,entry:h,index:x}),y:It(p)?null:r.scale(p),value:p,payload:h}:{x:It(p)?null:n.scale(p),y:l_({axis:r,ticks:i,bandSize:o,entry:h,index:x}),value:p,payload:h}});return Br({points:m,layout:u},d)});function Km(t){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Km(t)}function MMe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _Me(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m7(r.key),r)}}function RMe(t,s,n){return s&&_Me(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function IMe(t,s,n){return s=yj(s),$Me(t,d7()?Reflect.construct(s,n||[],yj(t).constructor):s.apply(t,n))}function $Me(t,s){if(s&&(Km(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FMe(t)}function FMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d7=function(){return!!t})()}function yj(t){return yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yj(t)}function LMe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&aC(t,s)}function aC(t,s){return aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},aC(t,s)}function u7(t,s,n){return s=m7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function m7(t){var s=BMe(t,"string");return Km(s)=="symbol"?s:s+""}function BMe(t,s){if(Km(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function iC(){return iC=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iC.apply(this,arguments)}function VMe(t){var s=t.xAxisId,n=QA(),r=XA(),a=Q9(s);return a==null?null:b.createElement(Th,iC({},a,{className:$t("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(l){return bl(l,!0)}}))}var Ym=function(t){function s(){return MMe(this,s),IMe(this,s,arguments)}return LMe(s,t),RMe(s,[{key:"render",value:function(){return b.createElement(VMe,this.props)}}])}(b.Component);u7(Ym,"displayName","XAxis");u7(Ym,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qm(t)}function UMe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function zMe(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p7(r.key),r)}}function qMe(t,s,n){return s&&zMe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function HMe(t,s,n){return s=jj(s),GMe(t,h7()?Reflect.construct(s,n||[],jj(t).constructor):s.apply(t,n))}function GMe(t,s){if(s&&(Qm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WMe(t)}function WMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!t})()}function jj(t){return jj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jj(t)}function KMe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&lC(t,s)}function lC(t,s){return lC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},lC(t,s)}function x7(t,s,n){return s=p7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function p7(t){var s=YMe(t,"string");return Qm(s)=="symbol"?s:s+""}function YMe(t,s){if(Qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function oC(){return oC=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oC.apply(this,arguments)}var QMe=function(s){var n=s.yAxisId,r=QA(),a=XA(),i=X9(n);return i==null?null:b.createElement(Th,oC({},i,{className:$t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return bl(o,!0)}}))},Xm=function(t){function s(){return UMe(this,s),HMe(this,s,arguments)}return KMe(s,t),qMe(s,[{key:"render",value:function(){return b.createElement(QMe,this.props)}}])}(b.Component);x7(Xm,"displayName","YAxis");x7(Xm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function FR(t){return e_e(t)||JMe(t)||ZMe(t)||XMe()}function XMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZMe(t,s){if(t){if(typeof t=="string")return cC(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cC(t,s)}}function JMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e_e(t){if(Array.isArray(t))return cC(t)}function cC(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}var dC=function(s,n,r,a,i){var l=ta(s,JA),o=ta(s,Sb),c=[].concat(FR(l),FR(o)),d=ta(s,kb),u="".concat(a,"Id"),m=a[0],h=n;if(c.length&&(h=c.reduce(function(f,j){if(j.props[u]===r&&Ui(j.props,"extendDomain")&&He(j.props[m])){var g=j.props[m];return[Math.min(f[0],g),Math.max(f[1],g)]}return f},h)),d.length){var x="".concat(m,"1"),p="".concat(m,"2");h=d.reduce(function(f,j){if(j.props[u]===r&&Ui(j.props,"extendDomain")&&He(j.props[x])&&He(j.props[p])){var g=j.props[x],y=j.props[p];return[Math.min(f[0],g,y),Math.max(f[1],g,y)]}return f},h)}return i&&i.length&&(h=i.reduce(function(f,j){return He(j)?[Math.min(f[0],j),Math.max(f[1],j)]:f},h)),h},f7={exports:{}};(function(t){var s=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,m,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new a(u,m||c,h),p=n?n+d:d;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],x]:c._events[p].push(x):(c._events[p]=x,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)s.call(u,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=n?n+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,x=m.length,p=new Array(x);h<x;h++)p[h]=m[h].fn;return p},o.prototype.listenerCount=function(d){var u=n?n+d:d,m=this._events[u];return m?m.fn?1:m.length:0},o.prototype.emit=function(d,u,m,h,x,p){var f=n?n+d:d;if(!this._events[f])return!1;var j=this._events[f],g=arguments.length,y,v;if(j.fn){switch(j.once&&this.removeListener(d,j.fn,void 0,!0),g){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,u),!0;case 3:return j.fn.call(j.context,u,m),!0;case 4:return j.fn.call(j.context,u,m,h),!0;case 5:return j.fn.call(j.context,u,m,h,x),!0;case 6:return j.fn.call(j.context,u,m,h,x,p),!0}for(v=1,y=new Array(g-1);v<g;v++)y[v-1]=arguments[v];j.fn.apply(j.context,y)}else{var w=j.length,N;for(v=0;v<w;v++)switch(j[v].once&&this.removeListener(d,j[v].fn,void 0,!0),g){case 1:j[v].fn.call(j[v].context);break;case 2:j[v].fn.call(j[v].context,u);break;case 3:j[v].fn.call(j[v].context,u,m);break;case 4:j[v].fn.call(j[v].context,u,m,h);break;default:if(!y)for(N=1,y=new Array(g-1);N<g;N++)y[N-1]=arguments[N];j[v].fn.apply(j[v].context,y)}}return!0},o.prototype.on=function(d,u,m){return i(this,d,u,m,!1)},o.prototype.once=function(d,u,m){return i(this,d,u,m,!0)},o.prototype.removeListener=function(d,u,m,h){var x=n?n+d:d;if(!this._events[x])return this;if(!u)return l(this,x),this;var p=this._events[x];if(p.fn)p.fn===u&&(!h||p.once)&&(!m||p.context===m)&&l(this,x);else{for(var f=0,j=[],g=p.length;f<g;f++)(p[f].fn!==u||h&&!p[f].once||m&&p[f].context!==m)&&j.push(p[f]);j.length?this._events[x]=j.length===1?j[0]:j:l(this,x)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&l(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(f7);var t_e=f7.exports;const s_e=fs(t_e);var Pw=new s_e,Aw="recharts.syncMouseEvents";function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sf(t)}function n_e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function r_e(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g7(r.key),r)}}function a_e(t,s,n){return s&&r_e(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tw(t,s,n){return s=g7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function g7(t){var s=i_e(t,"string");return sf(s)=="symbol"?s:s+""}function i_e(t,s){if(sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var l_e=function(){function t(){n_e(this,t),Tw(this,"activeIndex",0),Tw(this,"coordinateList",[]),Tw(this,"layout","horizontal")}return a_e(t,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,l=n.container,o=l===void 0?null:l,c=n.layout,d=c===void 0?null:c,u=n.offset,m=u===void 0?null:u,h=n.mouseHandlerCallback,x=h===void 0?null:h;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,m=i+c+d,h=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:m,pageY:h})}}}])}();function o_e(t,s,n){if(n==="number"&&s===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],a=t==null?void 0:t[1];if(r&&a&&He(r)&&He(a))return!0}return!1}function c_e(t,s,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?s.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:s.y-a,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function v7(t){var s=t.cx,n=t.cy,r=t.radius,a=t.startAngle,i=t.endAngle,l=Ms(s,n,r,a),o=Ms(s,n,r,i);return{points:[l,o],cx:s,cy:n,radius:r,startAngle:a,endAngle:i}}function d_e(t,s,n){var r,a,i,l;if(t==="horizontal")r=s.x,i=r,a=n.top,l=n.top+n.height;else if(t==="vertical")a=s.y,l=a,r=n.left,i=n.left+n.width;else if(s.cx!=null&&s.cy!=null)if(t==="centric"){var o=s.cx,c=s.cy,d=s.innerRadius,u=s.outerRadius,m=s.angle,h=Ms(o,c,d,m),x=Ms(o,c,u,m);r=h.x,a=h.y,i=x.x,l=x.y}else return v7(s);return[{x:r,y:a},{x:i,y:l}]}function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},nf(t)}function LR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function qg(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?LR(Object(n),!0).forEach(function(r){u_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u_e(t,s,n){return s=m_e(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function m_e(t){var s=h_e(t,"string");return nf(s)=="symbol"?s:s+""}function h_e(t,s){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function x_e(t){var s,n,r=t.element,a=t.tooltipEventType,i=t.isActive,l=t.activeCoordinate,o=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,h=t.chartName,x=(s=r.props.cursor)!==null&&s!==void 0?s:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!x||!i||!l||h!=="ScatterChart"&&a!=="axis")return null;var p,f=Zy;if(h==="ScatterChart")p=l,f=OTe;else if(h==="BarChart")p=c_e(m,l,c,u),f=GA;else if(m==="radial"){var j=v7(l),g=j.cx,y=j.cy,v=j.radius,w=j.startAngle,N=j.endAngle;p={cx:g,cy:y,startAngle:w,endAngle:N,innerRadius:v,outerRadius:v},f=x9}else p={points:d_e(m,l,c)},f=Zy;var S=qg(qg(qg(qg({stroke:"#ccc",pointerEvents:"none"},c),p),wt(x,!1)),{},{payload:o,payloadIndex:d,className:$t("recharts-tooltip-cursor",x.className)});return b.isValidElement(x)?b.cloneElement(x,S):b.createElement(f,S)}var p_e=["item"],f_e=["children","className","width","height","style","compact","title","desc"];function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Zm(t)}function Nu(){return Nu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nu.apply(this,arguments)}function BR(t,s){return y_e(t)||v_e(t,s)||j7(t,s)||g_e()}function g_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v_e(t,s){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,a,i,l,o=[],c=!0,d=!1;try{if(i=(n=n.call(t)).next,s!==0)for(;!(c=(r=i.call(n)).done)&&(o.push(r.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function y_e(t){if(Array.isArray(t))return t}function VR(t,s){if(t==null)return{};var n=j_e(t,s),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function j_e(t,s){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;n[r]=t[r]}return n}function b_e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function N_e(t,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b7(r.key),r)}}function w_e(t,s,n){return s&&N_e(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function S_e(t,s,n){return s=bj(s),C_e(t,y7()?Reflect.construct(s,n||[],bj(t).constructor):s.apply(t,n))}function C_e(t,s){if(s&&(Zm(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k_e(t)}function k_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y7=function(){return!!t})()}function bj(t){return bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bj(t)}function P_e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&uC(t,s)}function uC(t,s){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},uC(t,s)}function Jm(t){return D_e(t)||T_e(t)||j7(t)||A_e()}function A_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j7(t,s){if(t){if(typeof t=="string")return mC(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mC(t,s)}}function T_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function D_e(t){if(Array.isArray(t))return mC(t)}function mC(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,r=new Array(s);n<s;n++)r[n]=t[n];return r}function UR(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _e(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?UR(Object(n),!0).forEach(function(r){St(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function St(t,s,n){return s=b7(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function b7(t){var s=E_e(t,"string");return Zm(s)=="symbol"?s:s+""}function E_e(t,s){if(Zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,s);if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var O_e={xAxis:["bottom","top"],yAxis:["left","right"]},M_e={width:"100%",height:"100%"},N7={x:0,y:0};function Hg(t){return t}var __e=function(s,n){return n==="horizontal"?s.x:n==="vertical"?s.y:n==="centric"?s.angle:s.radius},R_e=function(s,n,r,a){var i=n.find(function(u){return u&&u.index===r});if(i){if(s==="horizontal")return{x:i.coordinate,y:a.y};if(s==="vertical")return{x:a.x,y:i.coordinate};if(s==="centric"){var l=i.coordinate,o=a.radius;return _e(_e(_e({},a),Ms(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return _e(_e(_e({},a),Ms(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return N7},Pb=function(s,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,l=(r??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(Jm(o),Jm(d)):o},[]);return l.length>0?l:s&&s.length&&He(a)&&He(i)?s.slice(a,i+1):[]};function w7(t){return t==="number"?[0,"auto"]:void 0}var hC=function(s,n,r,a){var i=s.graphicalItems,l=s.tooltipAxis,o=Pb(n,s);return r<0||!i||!i.length||r>=o.length?null:i.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:n;m&&s.dataStartIndex+s.dataEndIndex!==0&&s.dataEndIndex-s.dataStartIndex>=r&&(m=m.slice(s.dataStartIndex,s.dataEndIndex+1));var h;if(l.dataKey&&!l.allowDuplicatedCategory){var x=m===void 0?o:m;h=by(x,l.dataKey,a)}else h=m&&m[r]||o[r];return h?[].concat(Jm(c),[o9(d,h)]):c},[])},zR=function(s,n,r,a){var i=a||{x:s.chartX,y:s.chartY},l=__e(i,r),o=s.orderedTooltipTicks,c=s.tooltipAxis,d=s.tooltipTicks,u=ske(l,o,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,h=hC(s,n,u,m),x=R_e(r,o,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:h,activeCoordinate:x}}return null},I_e=function(s,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,l=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=s.layout,m=s.children,h=s.stackOffset,x=s9(u,i);return r.reduce(function(p,f){var j,g=f.type.defaultProps!==void 0?_e(_e({},f.type.defaultProps),f.props):f.props,y=g.type,v=g.dataKey,w=g.allowDataOverflow,N=g.allowDuplicatedCategory,S=g.scale,k=g.ticks,T=g.includeHidden,C=g[l];if(p[C])return p;var P=Pb(s.data,{graphicalItems:a.filter(function(we){var K,Ce=l in we.props?we.props[l]:(K=we.type.defaultProps)===null||K===void 0?void 0:K[l];return Ce===C}),dataStartIndex:c,dataEndIndex:d}),$=P.length,V,I,_;o_e(g.domain,w,y)&&(V=kS(g.domain,null,w),x&&(y==="number"||S!=="auto")&&(_=Ox(P,v,"category")));var U=w7(y);if(!V||V.length===0){var H,Y=(H=g.domain)!==null&&H!==void 0?H:U;if(v){if(V=Ox(P,v,y),y==="category"&&x){var O=Hhe(V);N&&O?(I=V,V=oj(0,$)):N||(V=u_(Y,V,f).reduce(function(we,K){return we.indexOf(K)>=0?we:[].concat(Jm(we),[K])},[]))}else if(y==="category")N?V=V.filter(function(we){return we!==""&&!It(we)}):V=u_(Y,V,f).reduce(function(we,K){return we.indexOf(K)>=0||K===""||It(K)?we:[].concat(Jm(we),[K])},[]);else if(y==="number"){var R=lke(P,a.filter(function(we){var K,Ce,pe=l in we.props?we.props[l]:(K=we.type.defaultProps)===null||K===void 0?void 0:K[l],F="hide"in we.props?we.props.hide:(Ce=we.type.defaultProps)===null||Ce===void 0?void 0:Ce.hide;return pe===C&&(T||!F)}),v,i,u);R&&(V=R)}x&&(y==="number"||S!=="auto")&&(_=Ox(P,v,"category"))}else x?V=oj(0,$):o&&o[C]&&o[C].hasStack&&y==="number"?V=h==="expand"?[0,1]:l9(o[C].stackGroups,c,d):V=t9(P,a.filter(function(we){var K=l in we.props?we.props[l]:we.type.defaultProps[l],Ce="hide"in we.props?we.props.hide:we.type.defaultProps.hide;return K===C&&(T||!Ce)}),y,u,!0);if(y==="number")V=dC(m,V,C,i,k),Y&&(V=kS(Y,V,w));else if(y==="category"&&Y){var q=Y,re=V.every(function(we){return q.indexOf(we)>=0});re&&(V=q)}}return _e(_e({},p),{},St({},C,_e(_e({},g),{},{axisType:i,domain:V,categoricalDomain:_,duplicateDomain:I,originalDomain:(j=g.domain)!==null&&j!==void 0?j:U,isCategorical:x,layout:u})))},{})},$_e=function(s,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,l=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=s.layout,m=s.children,h=Pb(s.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:d}),x=h.length,p=s9(u,i),f=-1;return r.reduce(function(j,g){var y=g.type.defaultProps!==void 0?_e(_e({},g.type.defaultProps),g.props):g.props,v=y[l],w=w7("number");if(!j[v]){f++;var N;return p?N=oj(0,x):o&&o[v]&&o[v].hasStack?(N=l9(o[v].stackGroups,c,d),N=dC(m,N,v,i)):(N=kS(w,t9(h,r.filter(function(S){var k,T,C=l in S.props?S.props[l]:(k=S.type.defaultProps)===null||k===void 0?void 0:k[l],P="hide"in S.props?S.props.hide:(T=S.type.defaultProps)===null||T===void 0?void 0:T.hide;return C===v&&!P}),"number",u),a.defaultProps.allowDataOverflow),N=dC(m,N,v,i)),_e(_e({},j),{},St({},v,_e(_e({axisType:i},a.defaultProps),{},{hide:!0,orientation:ea(O_e,"".concat(i,".").concat(f%2),null),domain:N,originalDomain:w,isCategorical:p,layout:u})))}return j},{})},F_e=function(s,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,l=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=s.children,m="".concat(a,"Id"),h=ta(u,i),x={};return h&&h.length?x=I_e(s,{axes:h,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(x=$_e(s,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),x},L_e=function(s){var n=ho(s),r=bl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:yA(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Yy(n,r)}},qR=function(s){var n=s.children,r=s.defaultShowTooltip,a=qr(n,Vm),i=0,l=0;return s.data&&s.data.length!==0&&(l=s.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!r}},B_e=function(s){return!s||!s.length?!1:s.some(function(n){var r=Sl(n&&n.type);return r&&r.indexOf("Bar")>=0})},HR=function(s){return s==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:s==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:s==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},V_e=function(s,n){var r=s.props,a=s.graphicalItems,i=s.xAxisMap,l=i===void 0?{}:i,o=s.yAxisMap,c=o===void 0?{}:o,d=r.width,u=r.height,m=r.children,h=r.margin||{},x=qr(m,Vm),p=qr(m,Cl),f=Object.keys(c).reduce(function(N,S){var k=c[S],T=k.orientation;return!k.mirror&&!k.hide?_e(_e({},N),{},St({},T,N[T]+k.width)):N},{left:h.left||0,right:h.right||0}),j=Object.keys(l).reduce(function(N,S){var k=l[S],T=k.orientation;return!k.mirror&&!k.hide?_e(_e({},N),{},St({},T,ea(N,"".concat(T))+k.height)):N},{top:h.top||0,bottom:h.bottom||0}),g=_e(_e({},j),f),y=g.bottom;x&&(g.bottom+=x.props.height||Vm.defaultProps.height),p&&n&&(g=ake(g,a,r,n));var v=d-g.left-g.right,w=u-g.top-g.bottom;return _e(_e({brushBottom:y},g),{},{width:Math.max(v,0),height:Math.max(w,0)})},U_e=function(s,n){if(n==="xAxis")return s[n].width;if(n==="yAxis")return s[n].height},sT=function(s){var n=s.chartName,r=s.GraphicalChild,a=s.defaultTooltipEventType,i=a===void 0?"axis":a,l=s.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=s.axisComponents,d=s.legendContent,u=s.formatAxisMap,m=s.defaultProps,h=function(g,y){var v=y.graphicalItems,w=y.stackGroups,N=y.offset,S=y.updateId,k=y.dataStartIndex,T=y.dataEndIndex,C=g.barSize,P=g.layout,$=g.barGap,V=g.barCategoryGap,I=g.maxBarSize,_=HR(P),U=_.numericAxisName,H=_.cateAxisName,Y=B_e(v),O=[];return v.forEach(function(R,q){var re=Pb(g.data,{graphicalItems:[R],dataStartIndex:k,dataEndIndex:T}),we=R.type.defaultProps!==void 0?_e(_e({},R.type.defaultProps),R.props):R.props,K=we.dataKey,Ce=we.maxBarSize,pe=we["".concat(U,"Id")],F=we["".concat(H,"Id")],Q={},Z=c.reduce(function(Ne,De){var We=y["".concat(De.axisType,"Map")],qe=we["".concat(De.axisType,"Id")];We&&We[qe]||De.axisType==="zAxis"||Sd();var Le=We[qe];return _e(_e({},Ne),{},St(St({},De.axisType,Le),"".concat(De.axisType,"Ticks"),bl(Le)))},Q),le=Z[H],oe=Z["".concat(H,"Ticks")],Ae=w&&w[pe]&&w[pe].hasStack&&fke(R,w[pe].stackGroups),ge=Sl(R.type).indexOf("Bar")>=0,xe=Yy(le,oe),$e=[],ke=Y&&nke({barSize:C,stackGroups:w,totalSize:U_e(Z,H)});if(ge){var Ze,gt,Kt=It(Ce)?I:Ce,be=(Ze=(gt=Yy(le,oe,!0))!==null&&gt!==void 0?gt:Kt)!==null&&Ze!==void 0?Ze:0;$e=rke({barGap:$,barCategoryGap:V,bandSize:be!==xe?be:xe,sizeList:ke[F],maxBarSize:Kt}),be!==xe&&($e=$e.map(function(Ne){return _e(_e({},Ne),{},{position:_e(_e({},Ne.position),{},{offset:Ne.position.offset-be/2})})}))}var J=R&&R.type&&R.type.getComposedData;J&&O.push({props:_e(_e({},J(_e(_e({},Z),{},{displayedData:re,props:g,dataKey:K,item:R,bandSize:xe,barPosition:$e,offset:N,stackedData:Ae,layout:P,dataStartIndex:k,dataEndIndex:T}))),{},St(St(St({key:R.key||"item-".concat(q)},U,Z[U]),H,Z[H]),"animationId",S)),childIndex:rxe(R,g.children),item:R})}),O},x=function(g,y){var v=g.props,w=g.dataStartIndex,N=g.dataEndIndex,S=g.updateId;if(!rO({props:v}))return null;var k=v.children,T=v.layout,C=v.stackOffset,P=v.data,$=v.reverseStackOrder,V=HR(T),I=V.numericAxisName,_=V.cateAxisName,U=ta(k,r),H=xke(P,U,"".concat(I,"Id"),"".concat(_,"Id"),C,$),Y=c.reduce(function(we,K){var Ce="".concat(K.axisType,"Map");return _e(_e({},we),{},St({},Ce,F_e(v,_e(_e({},K),{},{graphicalItems:U,stackGroups:K.axisType===I&&H,dataStartIndex:w,dataEndIndex:N}))))},{}),O=V_e(_e(_e({},Y),{},{props:v,graphicalItems:U}),y==null?void 0:y.legendBBox);Object.keys(Y).forEach(function(we){Y[we]=u(v,Y[we],O,we.replace("Map",""),n)});var R=Y["".concat(_,"Map")],q=L_e(R),re=h(v,_e(_e({},Y),{},{dataStartIndex:w,dataEndIndex:N,updateId:S,graphicalItems:U,stackGroups:H,offset:O}));return _e(_e({formattedGraphicalItems:re,graphicalItems:U,offset:O,stackGroups:H},q),Y)},p=function(j){function g(y){var v,w,N;return b_e(this,g),N=S_e(this,g,[y]),St(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),St(N,"accessibilityManager",new l_e),St(N,"handleLegendBBoxUpdate",function(S){if(S){var k=N.state,T=k.dataStartIndex,C=k.dataEndIndex,P=k.updateId;N.setState(_e({legendBBox:S},x({props:N.props,dataStartIndex:T,dataEndIndex:C,updateId:P},_e(_e({},N.state),{},{legendBBox:S}))))}}),St(N,"handleReceiveSyncEvent",function(S,k,T){if(N.props.syncId===S){if(T===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(k)}}),St(N,"handleBrushChange",function(S){var k=S.startIndex,T=S.endIndex;if(k!==N.state.dataStartIndex||T!==N.state.dataEndIndex){var C=N.state.updateId;N.setState(function(){return _e({dataStartIndex:k,dataEndIndex:T},x({props:N.props,dataStartIndex:k,dataEndIndex:T,updateId:C},N.state))}),N.triggerSyncEvent({dataStartIndex:k,dataEndIndex:T})}}),St(N,"handleMouseEnter",function(S){var k=N.getMouseInfo(S);if(k){var T=_e(_e({},k),{},{isTooltipActive:!0});N.setState(T),N.triggerSyncEvent(T);var C=N.props.onMouseEnter;Dt(C)&&C(T,S)}}),St(N,"triggeredAfterMouseMove",function(S){var k=N.getMouseInfo(S),T=k?_e(_e({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(T),N.triggerSyncEvent(T);var C=N.props.onMouseMove;Dt(C)&&C(T,S)}),St(N,"handleItemMouseEnter",function(S){N.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),St(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),St(N,"handleMouseMove",function(S){S.persist(),N.throttleTriggeredAfterMouseMove(S)}),St(N,"handleMouseLeave",function(S){N.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};N.setState(k),N.triggerSyncEvent(k);var T=N.props.onMouseLeave;Dt(T)&&T(k,S)}),St(N,"handleOuterEvent",function(S){var k=nxe(S),T=ea(N.props,"".concat(k));if(k&&Dt(T)){var C,P;/.*touch.*/i.test(k)?P=N.getMouseInfo(S.changedTouches[0]):P=N.getMouseInfo(S),T((C=P)!==null&&C!==void 0?C:{},S)}}),St(N,"handleClick",function(S){var k=N.getMouseInfo(S);if(k){var T=_e(_e({},k),{},{isTooltipActive:!0});N.setState(T),N.triggerSyncEvent(T);var C=N.props.onClick;Dt(C)&&C(T,S)}}),St(N,"handleMouseDown",function(S){var k=N.props.onMouseDown;if(Dt(k)){var T=N.getMouseInfo(S);k(T,S)}}),St(N,"handleMouseUp",function(S){var k=N.props.onMouseUp;if(Dt(k)){var T=N.getMouseInfo(S);k(T,S)}}),St(N,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),St(N,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseDown(S.changedTouches[0])}),St(N,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseUp(S.changedTouches[0])}),St(N,"handleDoubleClick",function(S){var k=N.props.onDoubleClick;if(Dt(k)){var T=N.getMouseInfo(S);k(T,S)}}),St(N,"handleContextMenu",function(S){var k=N.props.onContextMenu;if(Dt(k)){var T=N.getMouseInfo(S);k(T,S)}}),St(N,"triggerSyncEvent",function(S){N.props.syncId!==void 0&&Pw.emit(Aw,N.props.syncId,S,N.eventEmitterSymbol)}),St(N,"applySyncEvent",function(S){var k=N.props,T=k.layout,C=k.syncMethod,P=N.state.updateId,$=S.dataStartIndex,V=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)N.setState(_e({dataStartIndex:$,dataEndIndex:V},x({props:N.props,dataStartIndex:$,dataEndIndex:V,updateId:P},N.state)));else if(S.activeTooltipIndex!==void 0){var I=S.chartX,_=S.chartY,U=S.activeTooltipIndex,H=N.state,Y=H.offset,O=H.tooltipTicks;if(!Y)return;if(typeof C=="function")U=C(O,S);else if(C==="value"){U=-1;for(var R=0;R<O.length;R++)if(O[R].value===S.activeLabel){U=R;break}}var q=_e(_e({},Y),{},{x:Y.left,y:Y.top}),re=Math.min(I,q.x+q.width),we=Math.min(_,q.y+q.height),K=O[U]&&O[U].value,Ce=hC(N.state,N.props.data,U),pe=O[U]?{x:T==="horizontal"?O[U].coordinate:re,y:T==="horizontal"?we:O[U].coordinate}:N7;N.setState(_e(_e({},S),{},{activeLabel:K,activeCoordinate:pe,activePayload:Ce,activeTooltipIndex:U}))}else N.setState(S)}),St(N,"renderCursor",function(S){var k,T=N.state,C=T.isTooltipActive,P=T.activeCoordinate,$=T.activePayload,V=T.offset,I=T.activeTooltipIndex,_=T.tooltipAxisBandSize,U=N.getTooltipEventType(),H=(k=S.props.active)!==null&&k!==void 0?k:C,Y=N.props.layout,O=S.key||"_recharts-cursor";return X.createElement(x_e,{key:O,activeCoordinate:P,activePayload:$,activeTooltipIndex:I,chartName:n,element:S,isActive:H,layout:Y,offset:V,tooltipAxisBandSize:_,tooltipEventType:U})}),St(N,"renderPolarAxis",function(S,k,T){var C=ea(S,"type.axisType"),P=ea(N.state,"".concat(C,"Map")),$=S.type.defaultProps,V=$!==void 0?_e(_e({},$),S.props):S.props,I=P&&P[V["".concat(C,"Id")]];return b.cloneElement(S,_e(_e({},I),{},{className:$t(C,I.className),key:S.key||"".concat(k,"-").concat(T),ticks:bl(I,!0)}))}),St(N,"renderPolarGrid",function(S){var k=S.props,T=k.radialLines,C=k.polarAngles,P=k.polarRadius,$=N.state,V=$.radiusAxisMap,I=$.angleAxisMap,_=ho(V),U=ho(I),H=U.cx,Y=U.cy,O=U.innerRadius,R=U.outerRadius;return b.cloneElement(S,{polarAngles:Array.isArray(C)?C:bl(U,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(P)?P:bl(_,!0).map(function(q){return q.coordinate}),cx:H,cy:Y,innerRadius:O,outerRadius:R,key:S.key||"polar-grid",radialLines:T})}),St(N,"renderLegend",function(){var S=N.state.formattedGraphicalItems,k=N.props,T=k.children,C=k.width,P=k.height,$=N.props.margin||{},V=C-($.left||0)-($.right||0),I=Jq({children:T,formattedGraphicalItems:S,legendWidth:V,legendContent:d});if(!I)return null;var _=I.item,U=VR(I,p_e);return b.cloneElement(_,_e(_e({},U),{},{chartWidth:C,chartHeight:P,margin:$,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),St(N,"renderTooltip",function(){var S,k=N.props,T=k.children,C=k.accessibilityLayer,P=qr(T,Ar);if(!P)return null;var $=N.state,V=$.isTooltipActive,I=$.activeCoordinate,_=$.activePayload,U=$.activeLabel,H=$.offset,Y=(S=P.props.active)!==null&&S!==void 0?S:V;return b.cloneElement(P,{viewBox:_e(_e({},H),{},{x:H.left,y:H.top}),active:Y,label:U,payload:Y?_:[],coordinate:I,accessibilityLayer:C})}),St(N,"renderBrush",function(S){var k=N.props,T=k.margin,C=k.data,P=N.state,$=P.offset,V=P.dataStartIndex,I=P.dataEndIndex,_=P.updateId;return b.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Bg(N.handleBrushChange,S.props.onChange),data:C,x:He(S.props.x)?S.props.x:$.left,y:He(S.props.y)?S.props.y:$.top+$.height+$.brushBottom-(T.bottom||0),width:He(S.props.width)?S.props.width:$.width,startIndex:V,endIndex:I,updateId:"brush-".concat(_)})}),St(N,"renderReferenceElement",function(S,k,T){if(!S)return null;var C=N,P=C.clipPathId,$=N.state,V=$.xAxisMap,I=$.yAxisMap,_=$.offset,U=S.type.defaultProps||{},H=S.props,Y=H.xAxisId,O=Y===void 0?U.xAxisId:Y,R=H.yAxisId,q=R===void 0?U.yAxisId:R;return b.cloneElement(S,{key:S.key||"".concat(k,"-").concat(T),xAxis:V[O],yAxis:I[q],viewBox:{x:_.left,y:_.top,width:_.width,height:_.height},clipPathId:P})}),St(N,"renderActivePoints",function(S){var k=S.item,T=S.activePoint,C=S.basePoint,P=S.childIndex,$=S.isRange,V=[],I=k.props.key,_=k.item.type.defaultProps!==void 0?_e(_e({},k.item.type.defaultProps),k.item.props):k.item.props,U=_.activeDot,H=_.dataKey,Y=_e(_e({index:P,dataKey:H,cx:T.x,cy:T.y,r:4,fill:HA(k.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},wt(U,!1)),Ny(U));return V.push(g.renderActiveDot(U,Y,"".concat(I,"-activePoint-").concat(P))),C?V.push(g.renderActiveDot(U,_e(_e({},Y),{},{cx:C.x,cy:C.y}),"".concat(I,"-basePoint-").concat(P))):$&&V.push(null),V}),St(N,"renderGraphicChild",function(S,k,T){var C=N.filterFormatItem(S,k,T);if(!C)return null;var P=N.getTooltipEventType(),$=N.state,V=$.isTooltipActive,I=$.tooltipAxis,_=$.activeTooltipIndex,U=$.activeLabel,H=N.props.children,Y=qr(H,Ar),O=C.props,R=O.points,q=O.isRange,re=O.baseLine,we=C.item.type.defaultProps!==void 0?_e(_e({},C.item.type.defaultProps),C.item.props):C.item.props,K=we.activeDot,Ce=we.hide,pe=we.activeBar,F=we.activeShape,Q=!!(!Ce&&V&&Y&&(K||pe||F)),Z={};P!=="axis"&&Y&&Y.props.trigger==="click"?Z={onClick:Bg(N.handleItemMouseEnter,S.props.onClick)}:P!=="axis"&&(Z={onMouseLeave:Bg(N.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Bg(N.handleItemMouseEnter,S.props.onMouseEnter)});var le=b.cloneElement(S,_e(_e({},C.props),Z));function oe(De){return typeof I.dataKey=="function"?I.dataKey(De.payload):null}if(Q)if(_>=0){var Ae,ge;if(I.dataKey&&!I.allowDuplicatedCategory){var xe=typeof I.dataKey=="function"?oe:"payload.".concat(I.dataKey.toString());Ae=by(R,xe,U),ge=q&&re&&by(re,xe,U)}else Ae=R==null?void 0:R[_],ge=q&&re&&re[_];if(F||pe){var $e=S.props.activeIndex!==void 0?S.props.activeIndex:_;return[b.cloneElement(S,_e(_e(_e({},C.props),Z),{},{activeIndex:$e})),null,null]}if(!It(Ae))return[le].concat(Jm(N.renderActivePoints({item:C,activePoint:Ae,basePoint:ge,childIndex:_,isRange:q})))}else{var ke,Ze=(ke=N.getItemByXY(N.state.activeCoordinate))!==null&&ke!==void 0?ke:{graphicalItem:le},gt=Ze.graphicalItem,Kt=gt.item,be=Kt===void 0?S:Kt,J=gt.childIndex,Ne=_e(_e(_e({},C.props),Z),{},{activeIndex:J});return[b.cloneElement(be,Ne),null,null]}return q?[le,null,null]:[le,null]}),St(N,"renderCustomized",function(S,k,T){return b.cloneElement(S,_e(_e({key:"recharts-customized-".concat(T)},N.props),N.state))}),St(N,"renderMap",{CartesianGrid:{handler:Hg,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:Hg},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:Hg},YAxis:{handler:Hg},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((v=y.id)!==null&&v!==void 0?v:Nh("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=Zz(N.triggeredAfterMouseMove,(w=y.throttleDelay)!==null&&w!==void 0?w:1e3/60),N.state={},N}return P_e(g,j),w_e(g,[{key:"componentDidMount",value:function(){var v,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,w=v.children,N=v.data,S=v.height,k=v.layout,T=qr(w,Ar);if(T){var C=T.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,$=hC(this.state,N,C,P),V=this.state.tooltipTicks[C].coordinate,I=(this.state.offset.top+S)/2,_=k==="horizontal",U=_?{x:V,y:I}:{y:V,x:I},H=this.state.formattedGraphicalItems.find(function(O){var R=O.item;return R.type.name==="Scatter"});H&&(U=_e(_e({},U),H.props.points[C].tooltipPosition),$=H.props.points[C].tooltipPayload);var Y={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:P,activePayload:$,activeCoordinate:U};this.setState(Y),this.renderCursor(T),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var N,S;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(v){V2([qr(v.children,Ar)],[qr(this.props.children,Ar)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=qr(this.props.children,Ar);if(v&&typeof v.props.shared=="boolean"){var w=v.props.shared?"axis":"item";return o.indexOf(w)>=0?w:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var w=this.container,N=w.getBoundingClientRect(),S=Dwe(N),k={chartX:Math.round(v.pageX-S.left),chartY:Math.round(v.pageY-S.top)},T=N.width/w.offsetWidth||1,C=this.inRange(k.chartX,k.chartY,T);if(!C)return null;var P=this.state,$=P.xAxisMap,V=P.yAxisMap,I=this.getTooltipEventType(),_=zR(this.state,this.props.data,this.props.layout,C);if(I!=="axis"&&$&&V){var U=ho($).scale,H=ho(V).scale,Y=U&&U.invert?U.invert(k.chartX):null,O=H&&H.invert?H.invert(k.chartY):null;return _e(_e({},k),{},{xValue:Y,yValue:O},_)}return _?_e(_e({},k),_):null}},{key:"inRange",value:function(v,w){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,k=v/N,T=w/N;if(S==="horizontal"||S==="vertical"){var C=this.state.offset,P=k>=C.left&&k<=C.left+C.width&&T>=C.top&&T<=C.top+C.height;return P?{x:k,y:T}:null}var $=this.state,V=$.angleAxisMap,I=$.radiusAxisMap;if(V&&I){var _=ho(V);return x_({x:k,y:T},_)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,w=this.getTooltipEventType(),N=qr(v,Ar),S={};N&&w==="axis"&&(N.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=Ny(this.props,this.handleOuterEvent);return _e(_e({},k),S)}},{key:"addListener",value:function(){Pw.on(Aw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Pw.removeListener(Aw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,w,N){for(var S=this.state.formattedGraphicalItems,k=0,T=S.length;k<T;k++){var C=S[k];if(C.item===v||C.props.key===v.key||w===Sl(C.item.type)&&N===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,w=this.state.offset,N=w.left,S=w.top,k=w.height,T=w.width;return X.createElement("defs",null,X.createElement("clipPath",{id:v},X.createElement("rect",{x:N,y:S,height:k,width:T})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(w,N){var S=BR(N,2),k=S[0],T=S[1];return _e(_e({},w),{},St({},k,T.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(w,N){var S=BR(N,2),k=S[0],T=S[1];return _e(_e({},w),{},St({},k,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[v])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(v){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[v])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(v){var w=this.state,N=w.formattedGraphicalItems,S=w.activeItem;if(N&&N.length)for(var k=0,T=N.length;k<T;k++){var C=N[k],P=C.props,$=C.item,V=$.type.defaultProps!==void 0?_e(_e({},$.type.defaultProps),$.props):$.props,I=Sl($.type);if(I==="Bar"){var _=(P.data||[]).find(function(O){return mTe(v,O)});if(_)return{graphicalItem:C,payload:_}}else if(I==="RadialBar"){var U=(P.data||[]).find(function(O){return x_(v,O)});if(U)return{graphicalItem:C,payload:U}}else if(jb(C,S)||bb(C,S)||Xp(C,S)){var H=eDe({graphicalItem:C,activeTooltipItem:S,itemData:V.data}),Y=V.activeIndex===void 0?H:V.activeIndex;return{graphicalItem:_e(_e({},C),{},{childIndex:Y}),payload:Xp(C,S)?V.data[H]:C.props.data[H]}}}return null}},{key:"render",value:function(){var v=this;if(!rO(this))return null;var w=this.props,N=w.children,S=w.className,k=w.width,T=w.height,C=w.style,P=w.compact,$=w.title,V=w.desc,I=VR(w,f_e),_=wt(I,!1);if(P)return X.createElement(NR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(z2,Nu({},_,{width:k,height:T,title:$,desc:V}),this.renderClipPath(),iO(N,this.renderMap)));if(this.props.accessibilityLayer){var U,H;_.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,_.role=(H=this.props.role)!==null&&H!==void 0?H:"application",_.onKeyDown=function(O){v.accessibilityManager.keyboardEvent(O)},_.onFocus=function(){v.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return X.createElement(NR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",Nu({className:$t("recharts-wrapper",S),style:_e({position:"relative",cursor:"default",width:k,height:T},C)},Y,{ref:function(R){v.container=R}}),X.createElement(z2,Nu({},_,{width:k,height:T,title:$,desc:V,style:M_e}),this.renderClipPath(),iO(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);St(p,"displayName",n),St(p,"defaultProps",_e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),St(p,"getDerivedStateFromProps",function(j,g){var y=j.dataKey,v=j.data,w=j.children,N=j.width,S=j.height,k=j.layout,T=j.stackOffset,C=j.margin,P=g.dataStartIndex,$=g.dataEndIndex;if(g.updateId===void 0){var V=qR(j);return _e(_e(_e({},V),{},{updateId:0},x(_e(_e({props:j},V),{},{updateId:0}),g)),{},{prevDataKey:y,prevData:v,prevWidth:N,prevHeight:S,prevLayout:k,prevStackOffset:T,prevMargin:C,prevChildren:w})}if(y!==g.prevDataKey||v!==g.prevData||N!==g.prevWidth||S!==g.prevHeight||k!==g.prevLayout||T!==g.prevStackOffset||!Bu(C,g.prevMargin)){var I=qR(j),_={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},U=_e(_e({},zR(g,v,k)),{},{updateId:g.updateId+1}),H=_e(_e(_e({},I),_),U);return _e(_e(_e({},H),x(_e({props:j},H),g)),{},{prevDataKey:y,prevData:v,prevWidth:N,prevHeight:S,prevLayout:k,prevStackOffset:T,prevMargin:C,prevChildren:w})}if(!V2(w,g.prevChildren)){var Y,O,R,q,re=qr(w,Vm),we=re&&(Y=(O=re.props)===null||O===void 0?void 0:O.startIndex)!==null&&Y!==void 0?Y:P,K=re&&(R=(q=re.props)===null||q===void 0?void 0:q.endIndex)!==null&&R!==void 0?R:$,Ce=we!==P||K!==$,pe=!It(v),F=pe&&!Ce?g.updateId:g.updateId+1;return _e(_e({updateId:F},x(_e(_e({props:j},g),{},{updateId:F,dataStartIndex:we,dataEndIndex:K}),g)),{},{prevChildren:w,dataStartIndex:we,dataEndIndex:K})}return null}),St(p,"renderActiveDot",function(j,g,y){var v;return b.isValidElement(j)?v=b.cloneElement(j,g):Dt(j)?v=j(g):v=X.createElement(pb,g),X.createElement(ss,{className:"recharts-active-dot",key:y},v)});var f=b.forwardRef(function(g,y){return X.createElement(p,Nu({},g,{ref:y}))});return f.displayName=p.displayName,f},z_e=sT({chartName:"LineChart",GraphicalChild:sd,axisComponents:[{axisType:"xAxis",AxisComp:Ym},{axisType:"yAxis",AxisComp:Xm}],formatAxisMap:U9}),q_e=sT({chartName:"BarChart",GraphicalChild:Al,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ym},{axisType:"yAxis",AxisComp:Xm}],formatAxisMap:U9}),xC=sT({chartName:"PieChart",GraphicalChild:gi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:yb},{axisType:"radiusAxis",AxisComp:gb}],formatAxisMap:kke,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const H_e=[{name:"Airbnb",value:45,color:"#FF5A5F"},{name:"Booking.com",value:25,color:"#003580"},{name:"VRBO",value:20,color:"#FFD700"},{name:"Direct",value:10,color:"#4CAF50"}];function G_e(t){const s=t.match(/src="([^"]+)"/);if(s&&s[1]){const n=s[1];if(n.match(/pb=([^&]+)/)){const a=n.match(/!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/);if(a){const i=a[1],l=a[2];return`https://www.google.com/maps/search/?api=1&query=${i},${l}`}}return n.includes("maps.google.com")&&!n.includes("/embed"),n}return t}const Zd={description:"Beautiful luxury villa with stunning ocean views, private pool, and modern amenities. Perfect for families or groups seeking a premium tropical experience.",spaceDescription:"3 spacious bedrooms with en-suite bathrooms, open-plan living area, fully equipped kitchen, private infinity pool, and multiple terraces with panoramic views.",interaction:"Our dedicated property manager is available 24/7 to assist with any requests. We provide personalized concierge services and local recommendations.",neighborhood:"Located in the prestigious Bophut area, close to pristine beaches, luxury resorts, world-class restaurants, and vibrant nightlife.",transit:"15 minutes from Samui Airport, complimentary airport transfers available. Scooter and car rental services can be arranged.",otherNotes:"Strict no-smoking policy. No pets allowed. Minimum 3-night stay required. Check-in: 3 PM, Check-out: 11 AM."};function eo({label:t,href:s,icon:n,variant:r="default",propertyId:a,onClick:i}){const[,l]=Yn(),{toast:o}=at(),c=()=>{try{i?i():(s.includes("/property/")||s.includes("/finances")||s.includes("/finance-hub")||s.includes("/bookings")||s.includes("/tasks")||s.includes("/utility"))&&a?l(`${s}?propertyId=${a}`):l(s)}catch(d){o({title:"Navigation Error",description:`Failed to navigate to ${t}. This feature will be available soon.`,variant:"destructive"}),console.error("Navigation error:",d)}};return e.jsxs(M,{variant:r,onClick:c,className:"w-full h-12 flex items-center justify-center gap-2",children:[e.jsx(n,{className:"w-4 h-4"}),t]})}function W_e({property:t,onUpdate:s}){const[n,r]=b.useState(t.googleMapsLink||""),[a,i]=b.useState(!1),{toast:l}=at(),o=yt(),c=Ee({mutationFn:async u=>ve("PUT",`/api/properties/${t.id}`,u),onSuccess:()=>{o.invalidateQueries({queryKey:[`/api/properties/${t.id}`]}),l({title:"Success",description:"Google Maps link updated successfully"}),i(!1),s()},onError:u=>{l({title:"Error",description:`Failed to update map link: ${u.message}`,variant:"destructive"})}}),d=()=>{c.mutate({googleMapsLink:n})};return e.jsxs(Ke,{open:a,onOpenChange:i,children:[e.jsx(cs,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"ml-2 p-1 h-6 w-6",children:e.jsx(jr,{className:"w-3 h-3"})})}),e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Edit Google Maps Link"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"mapLink",children:"Google Maps Link or Embed HTML"}),e.jsx(mt,{id:"mapLink",value:n,onChange:u=>r(u.target.value),placeholder:"Paste Google Maps share link or embed HTML code here...",className:"mt-2 min-h-[100px]"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"You can paste either a Google Maps share link (https://maps.google.com/...) or full embed HTML code"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{onClick:d,disabled:c.isPending,children:c.isPending?"Saving...":"Save"})]})]})]})]})}function Jd({title:t,text:s}){return e.jsxs(E,{className:"h-full",children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-base",children:t})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s||"Not available."})})]})}function K_e({data:t}){return e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"Booking Source Breakdown"]})}),e.jsx(D,{children:e.jsx("div",{className:"h-80",children:e.jsx(xx,{width:"100%",height:"100%",children:e.jsxs(xC,{children:[e.jsx(gi,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:n})=>`${s} ${(n*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((s,n)=>e.jsx(Em,{fill:s.color},`cell-${n}`))}),e.jsx(Ar,{}),e.jsx(Cl,{})]})})})})]})}const Y_e=ds({docType:Pe().min(1,"Document type is required"),fileUrl:Pe().min(1,"File URL is required"),expiryDate:Pe().optional()});function Q_e({propertyId:t,onSuccess:s}){const[n,r]=b.useState(!1),{toast:a}=at(),{user:i}=Cr(),l=yt(),o=Zt({resolver:xs(Y_e),defaultValues:{docType:"",fileUrl:"",expiryDate:""}}),c=Ee({mutationFn:async d=>{console.log(" Document upload mutation started",d);const u={...d,propertyId:parseInt(t),organizationId:(i==null?void 0:i.organizationId)||"default-org",uploadedBy:(i==null?void 0:i.id)||"unknown"};console.log(" Payload:",u);const m=await ve("POST","/api/property-documents",u);return console.log(" Document upload response:",m),m},onSuccess:()=>{console.log(" Document upload successful"),wa.delete("/api/property-documents/expiring?days=30"),a({title:"Document Uploaded",description:"Property document has been uploaded successfully."}),l.invalidateQueries({queryKey:["/api/property-documents"]}),l.invalidateQueries({queryKey:[`/api/property-documents/property/${t}`]}),l.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),l.refetchQueries({queryKey:["/api/property-documents/expiring?days=30"]}),l.refetchQueries({queryKey:[`/api/property-documents/property/${t}`]}),o.reset(),r(!1),s()},onError:d=>{console.error(" Document upload failed:",d),a({title:"Upload Failed",description:d.message,variant:"destructive"})}});return e.jsxs(Ke,{open:n,onOpenChange:r,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{className:"w-full","data-testid":"upload-document-button",children:[e.jsx(mi,{className:"w-4 h-4 mr-2"}),"Upload Document"]})}),e.jsxs(Ye,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Upload Property Document"})}),e.jsx(os,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d=>{console.log(" Form submitted with data:",d),console.log(" Form errors:",o.formState.errors),c.mutate(d)}),className:"space-y-4",children:[e.jsx(me,{control:o.control,name:"docType",render:({field:d})=>e.jsxs(de,{children:[e.jsx(he,{children:"Document Type"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"e.g., License, Contract, Invoice",...d,"data-testid":"input-doc-type"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"fileUrl",render:({field:d})=>e.jsxs(de,{children:[e.jsx(he,{children:"Document Name / File URL"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"e.g., tourism-license-2025.pdf",...d,"data-testid":"input-file-url"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"expiryDate",render:({field:d})=>e.jsxs(de,{children:[e.jsx(he,{children:"Expiry Date (Optional)"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...d,"data-testid":"input-expiry-date"})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-document",children:c.isPending?"Uploading...":"Upload"})]})]})})]})]})}const X_e=ds({insurerName:Pe().min(1,"Insurance provider is required"),policyNumber:Pe().optional(),coverageDetails:Pe().optional(),expiryDate:Pe().optional()});function Z_e({propertyId:t,onSuccess:s}){const[n,r]=b.useState(!1),{toast:a}=at(),{user:i}=Cr(),l=yt(),o=Zt({resolver:xs(X_e),defaultValues:{insurerName:"",policyNumber:"",coverageDetails:"",expiryDate:""}}),c=Ee({mutationFn:async d=>{console.log(" Insurance mutation started",d);const u={...d,propertyId:parseInt(t),uploadedBy:(i==null?void 0:i.id)||"unknown"};console.log(" Payload:",u);const m=await ve("POST","/api/property-insurance",u);return console.log(" Insurance response:",m),m},onSuccess:()=>{console.log(" Insurance added successful"),wa.delete("/api/property-insurance/expiring/30"),a({title:"Insurance Added",description:"Property insurance has been added successfully."}),l.invalidateQueries({queryKey:["/api/property-insurance"]}),l.invalidateQueries({queryKey:[`/api/property-insurance/property/${t}`]}),l.invalidateQueries({queryKey:["/api/property-insurance/expiring/30"]}),l.refetchQueries({queryKey:["/api/property-insurance/expiring/30"]}),l.refetchQueries({queryKey:[`/api/property-insurance/property/${t}`]}),o.reset(),r(!1),s()},onError:d=>{console.error(" Insurance failed:",d),a({title:"Failed to Add Insurance",description:d.message,variant:"destructive"})}});return e.jsxs(Ke,{open:n,onOpenChange:r,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{className:"w-full","data-testid":"add-insurance-button",children:[e.jsx(qt,{className:"w-4 h-4 mr-2"}),"Add Insurance"]})}),e.jsxs(Ye,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Add Property Insurance"})}),e.jsx(os,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d=>{console.log(" Insurance form submitted with data:",d),console.log(" Form errors:",o.formState.errors),c.mutate(d)}),className:"space-y-4",children:[e.jsx(me,{control:o.control,name:"insurerName",render:({field:d})=>e.jsxs(de,{children:[e.jsx(he,{children:"Insurance Provider"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"e.g., AXA Thailand, Bangkok Insurance",...d,"data-testid":"input-insurer-name"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"policyNumber",render:({field:d})=>e.jsxs(de,{children:[e.jsx(he,{children:"Policy Number (Optional)"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"e.g., POL-2025-12345",...d,"data-testid":"input-policy-number"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"coverageDetails",render:({field:d})=>e.jsxs(de,{children:[e.jsx(he,{children:"Coverage Details (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"e.g., Fire, flood, theft coverage up to 10M THB",...d,"data-testid":"input-coverage-details"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"expiryDate",render:({field:d})=>e.jsxs(de,{children:[e.jsx(he,{children:"Expiry Date (Optional)"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...d,"data-testid":"input-insurance-expiry"})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-insurance",children:c.isPending?"Adding...":"Add Insurance"})]})]})})]})]})}function J_e(){var g,y,v,w;const[,t]=SY("/property/:id"),[,s]=Yn(),n=t==null?void 0:t.id,{user:r}=Cr(),a=(r==null?void 0:r.role)||"guest",{toast:i}=at(),{data:l,isLoading:o}=ye({queryKey:[`/api/properties/${n}`],enabled:!!n}),{data:c=[],refetch:d}=ye({queryKey:[`/api/property-documents/property/${n}`],enabled:!!n,staleTime:0});console.log(" Documents data:",c,"Length:",Array.isArray(c)?c.length:"not array");const{data:u=[],refetch:m}=ye({queryKey:[`/api/property-insurance/property/${n}`],enabled:!!n,staleTime:0});if(console.log(" Insurance data:",u,"Length:",Array.isArray(u)?u.length:"not array"),b.useEffect(()=>{if(c&&Array.isArray(c)&&c.length>0){const N=new Date,S=c.filter(k=>k.expiryDate?new Date(k.expiryDate)<N:!1);S.length>0&&S.forEach(k=>{i({title:" Document Expired",description:`${k.docType} for ${(l==null?void 0:l.name)||"this property"} expired on ${new Date(k.expiryDate).toLocaleDateString()}`,variant:"destructive"})})}},[c,l,i]),b.useEffect(()=>{if(u&&Array.isArray(u)&&u.length>0){const N=new Date,S=u.filter(k=>k.expiryDate?new Date(k.expiryDate)<N:!1);S.length>0&&S.forEach(k=>{i({title:" Insurance Expired",description:`${k.insuranceType} for ${(l==null?void 0:l.name)||"this property"} expired on ${new Date(k.expiryDate).toLocaleDateString()}`,variant:"destructive"})})}},[u,l,i]),o)return e.jsx("div",{className:"fixed inset-0 z-[9999] grid place-items-center bg-white/70 backdrop-blur-sm",children:e.jsx("div",{className:"text-lg font-medium text-slate-600",children:"Loading property details..."})});if(!l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Property Not Found"}),e.jsx(M,{onClick:()=>s("/property-hub"),children:"Back to Properties"})]})});if(a==="guest")return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this property"}),e.jsx(M,{onClick:()=>s("/"),children:"Go to Dashboard"})]})});const h=l.address||[l.addressLine1,l.city,l.country].filter(Boolean).join(", ")||"Location unavailable";l.bedrooms??((g=l.rooms)==null?void 0:g.bedrooms)??l.numBedrooms??l.bedroomCount,l.bathrooms??((y=l.rooms)==null?void 0:y.bathrooms)??l.numBathrooms??l.bathroomCount,l.maxGuests??l.accommodates??l.guests??l.maxOccupancy,l.pricePerNight??null??l.baseNightlyRate??l.defaultDailyPrice??((v=l.pricing)==null||v.defaultDailyPrice),l.currency??((w=l.pricing)==null||w.currency);const x=l.status==="active"?"default":l.status==="maintenance"?"secondary":"destructive";return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>s("/property-hub"),className:"flex items-center gap-2",children:[e.jsx(Il,{className:"w-4 h-4"}),"Back to Properties"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"w-full lg:w-2/3",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ws,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("button",{onClick:()=>{const N=l.googleMapsLink?l.googleMapsLink.includes("<iframe")?G_e(l.googleMapsLink):l.googleMapsLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(l.address)}`;window.open(N,"_blank")},className:"text-lg text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors flex items-center gap-1",title:"View on Google Maps",children:[h,e.jsx(Hi,{className:"w-4 h-4"})]}),a==="admin"&&e.jsx(W_e,{property:l,onUpdate:()=>{}})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ko,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.bathrooms," Bathrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G$,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.bathrooms," Bathrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.maxGuests||"N/A"," Guests"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsxs("span",{children:[Nt(parseFloat(l.pricePerNight||"0")),"/night"]})]})]})]}),e.jsx("div",{className:"w-full lg:w-1/3",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Quick Stats"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(z,{variant:x,children:l.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property ID:"}),e.jsxs("span",{className:"font-medium",children:["#",l.id]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Occupancy:"}),e.jsxs("span",{className:"font-medium",children:[78,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Rating:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:4.8}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",152," reviews)"]})]})]})]})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsx(K_e,{data:H_e})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(Jd,{title:"General Description",text:Zd.description}),e.jsx(Jd,{title:"Space Description",text:Zd.spaceDescription}),e.jsx(Jd,{title:"Guest Interaction",text:Zd.interaction}),e.jsx(Jd,{title:"Neighborhood",text:Zd.neighborhood}),e.jsx(Jd,{title:"Transportation",text:Zd.transit}),e.jsx(Jd,{title:"Other Notes",text:Zd.otherNotes})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"w-5 h-5"}),"Property Management Actions"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(eo,{label:"View Tasks",href:"/tasks",icon:Yo,propertyId:l==null?void 0:l.id}),e.jsx(eo,{label:"View Bookings",href:"/bookings",icon:tt,propertyId:l==null?void 0:l.id}),e.jsx(eo,{label:"Edit Property",href:`/property/${l==null?void 0:l.id}/edit`,icon:Jt,propertyId:l==null?void 0:l.id}),e.jsx(eo,{label:"View Utilities",href:"/utility-tracker",icon:Ru,variant:"outline"}),e.jsx(eo,{label:"View Finances",href:"/finance-hub",icon:Je,variant:"outline",propertyId:l.id.toString()}),e.jsx(eo,{label:"Property Info",href:"/property-info",icon:o2,variant:"outline",onClick:()=>{i({title:"Property Information",description:"Detailed property information panel is displayed above. Additional settings available in admin dashboard."})}}),e.jsx(eo,{label:"Documents",href:"#documents-section",icon:vt,variant:"outline",onClick:()=>{var N;(N=document.getElementById("documents-section"))==null||N.scrollIntoView({behavior:"smooth"})}}),e.jsx(eo,{label:"View Calendar",href:"/multi-property-calendar",icon:ks})]})})]}),e.jsxs("div",{id:"documents-section",className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Property Documents"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload property documents like licenses, contracts, and permits with expiry dates to receive alerts."}),e.jsx(Q_e,{propertyId:l.id,onSuccess:()=>{}}),c.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Uploaded Documents"}),c.map(N=>{const S=N.expiryDate&&new Date(N.expiryDate)<=new Date(Date.now()+2592e6),k=N.expiryDate&&new Date(N.expiryDate)<new Date;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg","data-testid":`document-${N.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:N.docType}),e.jsx("div",{className:"text-xs text-muted-foreground",children:N.fileUrl}),N.expiryDate&&e.jsxs("div",{className:"text-xs mt-1",children:["Expires:"," ",new Date(N.expiryDate).toLocaleDateString()]})]}),k&&e.jsx(z,{variant:"destructive",className:"ml-2",children:" Expired"}),S&&!k&&e.jsx(z,{variant:"secondary",className:"ml-2 bg-orange-500 text-white",children:" Expiring Soon"})]},N.id)})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"Property Insurance"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add property insurance details with expiry dates to track coverage and receive renewal alerts."}),e.jsx(Z_e,{propertyId:l.id,onSuccess:()=>{}}),u.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Insurance Policies"}),u.map(N=>{const S=N.expiryDate&&new Date(N.expiryDate)<=new Date(Date.now()+2592e6),k=N.expiryDate&&new Date(N.expiryDate)<new Date;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg","data-testid":`insurance-${N.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:N.insurerName}),N.policyNumber&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Policy: ",N.policyNumber]}),N.expiryDate&&e.jsxs("div",{className:"text-xs mt-1",children:["Expires:"," ",new Date(N.expiryDate).toLocaleDateString()]})]}),k&&e.jsx(z,{variant:"destructive",className:"ml-2",children:" Expired"}),S&&!k&&e.jsx(z,{variant:"secondary",className:"ml-2 bg-orange-500 text-white",children:" Expiring Soon"})]},N.id)})]})]})]})]})]})})}function eRe(){const{id:t}=t$(),[,s]=Yn(),{toast:n}=at(),r=yt(),{data:a,isLoading:i}=ye({queryKey:[`/api/properties/${t}`]}),[l,o]=b.useState({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active",ownerId:""});b.useEffect(()=>{var u,m,h,x,p;a&&o({name:a.name||"",address:a.address||"",description:a.description||"",bedrooms:((u=a.bedrooms)==null?void 0:u.toString())||"",bathrooms:((m=a.bathrooms)==null?void 0:m.toString())||"",maxGuests:((h=a.maxGuests)==null?void 0:h.toString())||"",pricePerNight:((x=a.pricePerNight)==null?void 0:x.toString())||"",status:a.status||"active",ownerId:((p=a.ownerId)==null?void 0:p.toString())||""})},[a]);const c=Ee({mutationFn:async u=>await ve("PUT",`/api/properties/${t}`,u),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/properties"]}),r.invalidateQueries({queryKey:[`/api/properties/${t}`]}),n({title:"Success",description:"Property updated successfully"}),s(`/property/${t}`)},onError:u=>{n({title:"Error",description:u.message||"Failed to update property",variant:"destructive"})}}),d=u=>{u.preventDefault();const m={name:l.name,address:l.address,description:l.description,bedrooms:parseInt(l.bedrooms)||0,bathrooms:parseInt(l.bathrooms)||0,maxGuests:parseInt(l.maxGuests)||0,pricePerNight:parseFloat(l.pricePerNight)||0,status:l.status,ownerId:l.ownerId?parseInt(l.ownerId):null};c.mutate(m)};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(vs,{className:"h-8 w-8 animate-spin text-primary"})}):a?e.jsx("div",{className:"min-h-screen mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(M,{variant:"ghost",onClick:()=>s(`/property/${t}`),className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:[e.jsx(Il,{className:"h-4 w-4 mr-2"}),"Back to Property Details"]})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{children:["Edit Property: ",a.name]})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"name",children:"Property Name *"}),e.jsx(G,{id:"name",value:l.name,onChange:u=>o({...l,name:u.target.value}),required:!0,"data-testid":"input-property-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"address",children:"Address *"}),e.jsx(G,{id:"address",value:l.address,onChange:u=>o({...l,address:u.target.value}),required:!0,"data-testid":"input-property-address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(G,{id:"bedrooms",type:"number",value:l.bedrooms,onChange:u=>o({...l,bedrooms:u.target.value}),min:"0","data-testid":"input-property-bedrooms"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(G,{id:"bathrooms",type:"number",value:l.bathrooms,onChange:u=>o({...l,bathrooms:u.target.value}),min:"0",step:"0.5","data-testid":"input-property-bathrooms"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"maxGuests",children:"Max Guests"}),e.jsx(G,{id:"maxGuests",type:"number",value:l.maxGuests,onChange:u=>o({...l,maxGuests:u.target.value}),min:"0","data-testid":"input-property-maxGuests"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"pricePerNight",children:"Price Per Night"}),e.jsx(G,{id:"pricePerNight",type:"number",value:l.pricePerNight,onChange:u=>o({...l,pricePerNight:u.target.value}),min:"0",step:"0.01","data-testid":"input-property-price"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"status",children:"Status"}),e.jsxs(se,{value:l.status,onValueChange:u=>o({...l,status:u}),children:[e.jsx(ee,{"data-testid":"select-property-status",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:l.description,onChange:u=>o({...l,description:u.target.value}),rows:4,"data-testid":"textarea-property-description"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(`/property/${t}`),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:c.isPending,"data-testid":"button-save-property",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Sf,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Property Not Found"}),e.jsxs(M,{onClick:()=>s("/properties"),children:[e.jsx(Il,{className:"h-4 w-4 mr-2"}),"Back to Properties"]})]})})}function tRe(){const[t,s]=b.useState(""),[n,r]=b.useState("all"),[a,i]=b.useState(new Date),{data:l=[],isLoading:o}=ye({queryKey:["/api/properties"]}),{data:c=[],isLoading:d}=ye({queryKey:["/api/bookings"]}),u=b.useMemo(()=>Array.from({length:30},(w,N)=>mn(a,N)),[a]),m=l.filter(w=>w.name.toLowerCase().includes(t.toLowerCase())&&(n==="all"||w.id.toString()===n)),h=w=>{const N=c.filter(C=>C.propertyId===w),S=[],k=Dr(u[0]),T=mn(Dr(u[u.length-1]),1);return N.forEach(C=>{const P=Dr(new Date(C.checkIn)),$=Dr(new Date(C.checkOut));if(P<T&&$>k){const I=P<k?k:P,_=$>T?T:$,U=u.findIndex(H=>nr(Dr(H),I));if(U>=0){const H=_2(_,I);H>0&&S.push({booking:C,startIndex:U,span:H})}}}),S},x=(w,N,S)=>S.some(k=>N>=k.startIndex&&N<k.startIndex+k.span),p=(w,N,S)=>S.find(k=>k.startIndex===N)||null,f=w=>{switch(w==null?void 0:w.toLowerCase()){case"confirmed":return"bg-emerald-500 hover:bg-emerald-600";case"pending":return"bg-amber-500 hover:bg-amber-600";case"completed":return"bg-blue-500 hover:bg-blue-600";case"cancelled":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-400 hover:bg-gray-500"}},j=()=>{i(mn(a,-7))},g=()=>{i(mn(a,7))},y=()=>{i(new Date)},v=o||d;return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Multi-Property Calendar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Horizontal timeline with live booking data"})]}),e.jsx(z,{variant:"outline",className:"text-blue-600",children:"Timeline View"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:j,"data-testid":"button-prev-week",children:[e.jsx(Nf,{className:"w-4 h-4"}),"Previous"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:y,"data-testid":"button-today",children:"Today"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:g,"data-testid":"button-next-week",children:["Next",e.jsx(Dd,{className:"w-4 h-4"})]})]})]}),e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Filters"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search Property"}),e.jsx(G,{type:"text",placeholder:"Search property name...",value:t,onChange:w=>s(w.target.value),"data-testid":"input-search-property"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter by Property"}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{"data-testid":"select-filter-property",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),l.map(w=>e.jsx(A,{value:w.id.toString(),children:w.name},w.id))]})]})]})]})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-0",children:v?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar data..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex border-b sticky top-0 bg-white dark:bg-gray-900 z-10",children:[e.jsx("div",{className:"w-64 flex-shrink-0 border-r p-4 font-semibold bg-gray-50 dark:bg-gray-800",children:"Property"}),u.map((w,N)=>{const S=nr(w,new Date);return e.jsxs("div",{className:`w-32 flex-shrink-0 border-r p-2 text-center text-sm ${S?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[e.jsx("div",{className:`font-semibold ${S?"text-blue-600":""}`,children:ut(w,"EEE")}),e.jsx("div",{className:`text-xs ${S?"text-blue-600":"text-muted-foreground"}`,children:ut(w,"MMM d")})]},N)})]}),m.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(fn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No properties found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search criteria"})]}):m.map(w=>{const N=h(w.id);return e.jsxs("div",{className:"flex border-b hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"w-64 flex-shrink-0 border-r p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsx("div",{className:"font-medium text-sm mb-1",children:w.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[w.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ko,{className:"w-3 h-3"}),e.jsxs("span",{children:[w.bedrooms," BR"]})]}),w.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-3 h-3"}),e.jsx("span",{children:w.location})]})]})]}),e.jsx("div",{className:"flex relative",children:u.map((S,k)=>{const T=p(w.id,k,N),C=x(w.id,k,N);return e.jsx("div",{className:"w-32 flex-shrink-0 border-r p-1 relative","data-testid":`cell-${w.id}-${k}`,children:T?e.jsxs("div",{className:`absolute top-1 left-1 h-[calc(100%-8px)] rounded px-2 py-1 text-white text-xs cursor-pointer transition-colors ${f(T.booking.status)}`,style:{width:`calc(${T.span*128}px - 8px)`,zIndex:5},title:`${T.booking.guestName}
${T.booking.checkIn} - ${T.booking.checkOut}
Status: ${T.booking.status}`,children:[e.jsx("div",{className:"font-medium truncate",children:T.booking.guestName}),e.jsx("div",{className:"text-[10px] opacity-90",children:T.booking.status}),e.jsxs("div",{className:"text-[10px] opacity-75",children:[T.span," ",T.span===1?"day":"days"]})]}):!C&&e.jsx("div",{className:"h-full bg-gray-100 dark:bg-gray-700/30 rounded opacity-50 hover:opacity-75 transition-opacity"})},k)})})]},w.id)})]})})})}),e.jsx(E,{className:"mt-4",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-6 text-sm flex-wrap",children:[e.jsx("span",{className:"font-medium",children:"Status Legend:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-emerald-500"}),e.jsx("span",{children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-amber-500"}),e.jsx("span",{children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-blue-500"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),e.jsx("span",{children:"Cancelled"})]})]})})}),e.jsx(E,{className:"mt-4",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground flex-wrap gap-4",children:[e.jsxs("span",{children:["Showing ",m.length," of ",l.length," properties"]}),e.jsxs("span",{children:["Total bookings: ",c.length]}),e.jsxs("span",{children:[ut(u[0],"MMM d, yyyy")," - ",ut(u[u.length-1],"MMM d, yyyy")]})]})})})]})})}const Gg=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];function sRe(){const[t,s]=b.useState("all"),[n,r]=b.useState("all"),[a,i]=b.useState("all"),[l,o]=b.useState(""),[c,d]=b.useState(""),{data:u=[]}=ye({queryKey:["/api/properties"]}),{data:m=[]}=ye({queryKey:["/api/finance"]}),{data:h=[]}=ye({queryKey:["/api/bookings"]}),x=b.useMemo(()=>[...new Set(m.map(_=>_.category))].filter(Boolean),[m]),p=b.useMemo(()=>m.filter(I=>{const _=t==="all"||I.propertyId.toString()===t,U=n==="all"||I.type===n,H=a==="all"||I.category===a;let Y=!0;return l&&I.date&&(Y=Y&&!bp(Ts(I.date),Ts(l))),c&&I.date&&(Y=Y&&!fy(Ts(I.date),Ts(c))),_&&U&&H&&Y}),[m,t,n,a,l,c]),f=b.useMemo(()=>h.filter(I=>{if(I.status==="cancelled")return!1;const _=t==="all"||I.propertyId.toString()===t;let U=!0;if(l||c){const H=Ts(I.checkIn),Y=Ts(I.checkOut);if(l&&c){const O=Ts(l),R=Ts(c);U=H<=R&&Y>=O}else if(l){const O=Ts(l);U=Y>=O}else if(c){const O=Ts(c);U=H<=O}}return _&&U}),[h,t,l,c]),j=f.reduce((I,_)=>{const U=parseFloat(_.platformPayout||_.totalAmount||"0");return I+U},0),g=p.filter(I=>I.type==="income").reduce((I,_)=>I+parseFloat(_.amount||"0"),0),y=j+g,v=p.filter(I=>I.type==="expense").reduce((I,_)=>I+parseFloat(_.amount||"0"),0),w=y-v,N=y>0?w/y*100:0,S=b.useMemo(()=>{const I=new Map;return j>0&&I.set("Booking Revenue",j),p.filter(_=>_.type==="income").forEach(_=>{const U=I.get(_.category)||0;I.set(_.category,U+parseFloat(_.amount||"0"))}),Array.from(I.entries()).map(([_,U])=>({name:_,value:U})).sort((_,U)=>U.value-_.value)},[p,j]),k=b.useMemo(()=>{const I=new Map;return p.filter(_=>_.type==="expense").forEach(_=>{const U=I.get(_.category)||0;I.set(_.category,U+parseFloat(_.amount||"0"))}),Array.from(I.entries()).map(([_,U])=>({name:_,value:U})).sort((_,U)=>U.value-_.value)},[p]),T=b.useMemo(()=>t!=="all"?[]:u.map(I=>{const _=p.filter(q=>q.propertyId===I.id),U=f.filter(q=>q.propertyId===I.id),H=_.filter(q=>q.type==="income").reduce((q,re)=>q+parseFloat(re.amount||"0"),0),Y=U.reduce((q,re)=>{const we=parseFloat(re.platformPayout||re.totalAmount||"0");return q+we},0),O=H+Y,R=_.filter(q=>q.type==="expense").reduce((q,re)=>q+parseFloat(re.amount||"0"),0);return{name:I.name.length>15?I.name.substring(0,15)+"...":I.name,revenue:O,expenses:R,profit:O-R}}).filter(I=>I.revenue>0||I.expenses>0),[u,p,f,t]),C=b.useMemo(()=>{const I=new Map;return p.forEach(_=>{if(!_.date)return;const U=Ts(_.date),H=Cn(U),Y=H.toISOString(),O=I.get(Y)||{revenue:0,expenses:0,sortDate:H};_.type==="income"?O.revenue+=parseFloat(_.amount||"0"):O.expenses+=parseFloat(_.amount||"0"),I.set(Y,O)}),f.forEach(_=>{if(!_.checkIn)return;const U=Ts(_.checkIn),H=Cn(U),Y=H.toISOString(),O=I.get(Y)||{revenue:0,expenses:0,sortDate:H},R=parseFloat(_.platformPayout||_.totalAmount||"0");O.revenue+=R,I.set(Y,O)}),Array.from(I.entries()).map(([_,U])=>({month:ut(U.sortDate,"MMM yyyy"),revenue:U.revenue,expenses:U.expenses,profit:U.revenue-U.expenses,sortDate:U.sortDate})).sort((_,U)=>_.sortDate.getTime()-U.sortDate.getTime())},[p,f]),P=b.useMemo(()=>{const I=new Map;return p.filter(_=>_.type==="income").forEach(_=>{const U=I.get(_.propertyId)||0;I.set(_.propertyId,U+parseFloat(_.amount||"0"))}),Array.from(I.entries()).map(([_,U])=>{var H;return{property:((H=u.find(Y=>Y.id===_))==null?void 0:H.name)||"Unknown",revenue:U}}).sort((_,U)=>U.revenue-_.revenue).slice(0,5)},[p,u]),$=()=>{s("all"),r("all"),i("all"),o(""),d("")},V=(t!=="all"?1:0)+(n!=="all"?1:0)+(a!=="all"?1:0)+(l?1:0)+(c?1:0);return e.jsxs("div",{className:"min-h-screen bg-background p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Advanced Financial Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Multi-dimensional insights with dynamic filtering"})]}),e.jsxs(M,{variant:"outline","data-testid":"button-export",children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Export Report"]})]}),e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Zi,{className:"w-5 h-5"}),"Advanced Filters",V>0&&e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",V," active)"]})]}),V>0&&e.jsx(M,{variant:"ghost",size:"sm",onClick:$,"data-testid":"button-clear-filters",children:"Clear All"})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{"data-testid":"select-property",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),u.map(I=>e.jsx(A,{value:I.id.toString(),children:I.name},I.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{"data-testid":"select-type",children:e.jsx(ne,{placeholder:"All Types"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"income",children:"Income"}),e.jsx(A,{value:"expense",children:"Expense"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{"data-testid":"select-category",children:e.jsx(ne,{placeholder:"All Categories"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Categories"}),x.map(I=>e.jsx(A,{value:I,children:I},I))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"From Date"}),e.jsx(G,{type:"date",value:l,onChange:I=>o(I.target.value),"data-testid":"input-date-from"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"To Date"}),e.jsx(G,{type:"date",value:c,onChange:I=>d(I.target.value),"data-testid":"input-date-to"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Bt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"metric-revenue",children:Nt(y)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.filter(I=>I.type==="income").length," transactions"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(Ed,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"metric-expenses",children:Nt(v)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.filter(I=>I.type==="expense").length," transactions"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(Je,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${w>=0?"text-blue-600":"text-red-600"}`,"data-testid":"metric-profit",children:Nt(w)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N.toFixed(1),"% margin"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Data Points"}),e.jsx(pn,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Filtered transactions"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[C.length>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Monthly Trend Analysis"})}),e.jsx(D,{children:e.jsx(xx,{width:"100%",height:300,children:e.jsxs(z_e,{data:C,children:[e.jsx(sC,{strokeDasharray:"3 3"}),e.jsx(Ym,{dataKey:"month"}),e.jsx(Xm,{}),e.jsx(Ar,{formatter:I=>Nt(Number(I))}),e.jsx(Cl,{}),e.jsx(sd,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Revenue"}),e.jsx(sd,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",strokeWidth:2,name:"Expenses"}),e.jsx(sd,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:2,name:"Profit"})]})})})]}),S.length>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Revenue Distribution by Category"})}),e.jsx(D,{children:e.jsx(xx,{width:"100%",height:300,children:e.jsxs(xC,{children:[e.jsx(gi,{data:S,cx:"50%",cy:"50%",labelLine:!1,label:({name:I,percent:_})=>`${I}: ${(_*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:S.map((I,_)=>e.jsx(Em,{fill:Gg[_%Gg.length]},`cell-${_}`))}),e.jsx(Ar,{formatter:I=>Nt(Number(I))})]})})})]})]}),T.length>0&&t==="all"&&e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsx(B,{children:"Property Performance Comparison"})}),e.jsx(D,{children:e.jsx(xx,{width:"100%",height:350,children:e.jsxs(q_e,{data:T,children:[e.jsx(sC,{strokeDasharray:"3 3"}),e.jsx(Ym,{dataKey:"name"}),e.jsx(Xm,{}),e.jsx(Ar,{formatter:I=>Nt(Number(I))}),e.jsx(Cl,{}),e.jsx(Al,{dataKey:"revenue",fill:"#10b981",name:"Revenue"}),e.jsx(Al,{dataKey:"expenses",fill:"#ef4444",name:"Expenses"}),e.jsx(Al,{dataKey:"profit",fill:"#3b82f6",name:"Profit"})]})})})]}),k.length>0&&e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsx(B,{children:"Expense Breakdown by Category"})}),e.jsx(D,{children:e.jsx(xx,{width:"100%",height:300,children:e.jsxs(xC,{children:[e.jsx(gi,{data:k,cx:"50%",cy:"50%",labelLine:!1,label:({name:I,percent:_})=>`${I}: ${(_*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:k.map((I,_)=>e.jsx(Em,{fill:Gg[_%Gg.length]},`cell-${_}`))}),e.jsx(Ar,{formatter:I=>Nt(Number(I))})]})})})]}),P.length>0&&t==="all"&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Top 5 Revenue Generating Properties"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:P.map((I,_)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold",children:_+1}),e.jsx("span",{className:"font-medium",children:I.property})]}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:Nt(I.revenue)})]},_))})})]}),p.length===0&&e.jsx(E,{children:e.jsxs(D,{className:"p-12 text-center",children:[e.jsx(pn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No data available for the selected filters"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your filter criteria"})]})})]})}async function nRe(t){try{return(await ve("POST","/api/ai/test",{prompt:t})).result||"No response received"}catch(s){throw console.error("AI Assistant Error:",s),new Error(`AI Assistant failed: ${s.message}`)}}async function rRe(t){try{return(await ve("POST","/api/ai/property-description",{propertyDetails:t})).description||"No description generated"}catch(s){throw console.error("Property Description Error:",s),new Error(`Failed to generate property description: ${s.message}`)}}async function aRe(t){try{return(await ve("POST","/api/ai/analyze-review",{reviewText:t})).analysis||{}}catch(s){throw console.error("Review Analysis Error:",s),new Error(`Failed to analyze guest review: ${s.message}`)}}async function iRe(t,s){try{return(await ve("POST","/api/ai/maintenance-suggestions",{propertyType:t,lastMaintenanceDate:s})).suggestions||{}}catch(n){throw console.error("Maintenance Suggestions Error:",n),new Error(`Failed to generate maintenance suggestions: ${n.message}`)}}function lRe(){const[t,s]=b.useState(!1),[n,r]=b.useState(""),{toast:a}=at(),i=async()=>{s(!0);try{const d=await nRe("Hello! Can you confirm that you're working properly?");r(d||"No response received"),a({title:"Success",description:"AI Assistant is working!"})}catch(d){console.error("AI Test Error:",d),r(`Error: ${d.message}`),a({title:"Error",description:"AI Assistant failed to respond",variant:"destructive"})}finally{s(!1)}},l=async()=>{s(!0);try{const d=await rRe({name:"Villa Test",bedrooms:3,bathrooms:2,amenities:["Pool","WiFi","Kitchen"],location:"Koh Samui, Thailand"});r(d||"No description generated"),a({title:"Success",description:"Property description generated!"})}catch(d){console.error("Property Description Error:",d),r(`Error: ${d.message}`),a({title:"Error",description:"Failed to generate property description",variant:"destructive"})}finally{s(!1)}},o=async()=>{s(!0);try{const d=await aRe("The villa was amazing! Great location, clean rooms, and helpful staff. Only issue was the WiFi was slow.");r(JSON.stringify(d,null,2)),a({title:"Success",description:"Review analysis completed!"})}catch(d){console.error("Review Analysis Error:",d),r(`Error: ${d.message}`),a({title:"Error",description:"Failed to analyze review",variant:"destructive"})}finally{s(!1)}},c=async()=>{s(!0);try{const d=await iRe("villa","2025-01-01");r(JSON.stringify(d,null,2)),a({title:"Success",description:"Maintenance suggestions generated!"})}catch(d){console.error("Maintenance Suggestions Error:",d),r(`Error: ${d.message}`),a({title:"Error",description:"Failed to generate maintenance suggestions",variant:"destructive"})}finally{s(!1)}};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"AI Integration Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Test the OpenAI integration in HostPilotPro"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"w-5 h-5"}),"Basic AI Test"]})}),e.jsx(D,{children:e.jsx(M,{onClick:i,disabled:t,className:"w-full",children:"Test AI Assistant"})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(fn,{className:"w-5 h-5"}),"Property Description"]})}),e.jsx(D,{children:e.jsx(M,{onClick:l,disabled:t,className:"w-full",children:"Generate Description"})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"w-5 h-5"}),"Review Analysis"]})}),e.jsx(D,{children:e.jsx(M,{onClick:o,disabled:t,className:"w-full",children:"Analyze Sample Review"})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"Maintenance Suggestions"]})}),e.jsx(D,{children:e.jsx(M,{onClick:c,disabled:t,className:"w-full",children:"Generate Suggestions"})})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"AI Response"})}),e.jsx(D,{children:e.jsx(mt,{value:n,readOnly:!0,placeholder:"AI responses will appear here...",className:"min-h-[200px] font-mono text-sm"})})]})]})}function oRe(){const[t,s]=b.useState(!1),[n,r]=b.useState(""),[a,i]=b.useState(""),[l,o]=b.useState("The villa was amazing! Great location, clean rooms, and helpful staff. Only issue was the WiFi was slow."),{toast:c}=at(),d=async()=>{s(!0);try{const f=await(await ve("POST","/api/ai/test",{prompt:"Hello! Please confirm you're working and tell me about HostPilotPro's AI capabilities."})).json();r(f.result||"No response received"),c({title:"AI Assistant Working!",description:"Basic AI functionality confirmed"})}catch(p){console.error("AI Test Error:",p),r(`Error: ${p.message}`),c({title:"AI Error",description:"Check if OpenAI API key is configured",variant:"destructive"})}finally{s(!1)}},u=async()=>{s(!0);try{const f=await(await ve("POST","/api/ai/property-description",{propertyDetails:{name:"Villa Sunset Paradise",bedrooms:4,bathrooms:3,amenities:["Private Pool","Ocean View","WiFi","Modern Kitchen","Air Conditioning"],location:"Koh Samui, Thailand"}})).json();r(f.description||"No description generated"),c({title:"Success!",description:"AI property description generated"})}catch(p){console.error("Property Description Error:",p),r(`Error: ${p.message}`),c({title:"Error",description:"Failed to generate property description",variant:"destructive"})}finally{s(!1)}},m=async()=>{s(!0);try{const f=await(await ve("POST","/api/ai/analyze-review",{reviewText:l})).json();r(JSON.stringify(f.analysis,null,2)),c({title:"Review Analyzed!",description:"AI sentiment analysis completed"})}catch(p){console.error("Review Analysis Error:",p),r(`Error: ${p.message}`),c({title:"Error",description:"Failed to analyze review",variant:"destructive"})}finally{s(!1)}},h=async()=>{s(!0);try{const f=await(await ve("POST","/api/ai/maintenance-suggestions",{propertyType:"luxury villa",lastMaintenanceDate:"2024-01-15"})).json();r(JSON.stringify(f.suggestions,null,2)),c({title:"Maintenance Suggestions Generated!",description:"AI-powered maintenance recommendations ready"})}catch(p){console.error("Maintenance Suggestions Error:",p),r(`Error: ${p.message}`),c({title:"Error",description:"Failed to generate maintenance suggestions",variant:"destructive"})}finally{s(!1)}},x=async()=>{if(!a.trim()){c({title:"Empty Prompt",description:"Please enter a custom prompt to test",variant:"destructive"});return}s(!0);try{const f=await(await ve("POST","/api/ai/custom",{prompt:a})).json();r(f.result||"No response received"),c({title:"Custom AI Response!",description:"Your custom prompt was processed"})}catch(p){console.error("Custom Prompt Error:",p),r(`Error: ${p.message}`),c({title:"Error",description:"Failed to process custom prompt",variant:"destructive"})}finally{s(!1)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Sa,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"AI Feature Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Test and explore HostPilotPro's AI capabilities"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"AI Status"}),e.jsx(ui,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"OpenAI GPT-4o Integration"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"AI Features"}),e.jsx(cp,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8+"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI-powered tools available"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Integration"}),e.jsx(ns,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Live"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Real-time AI responses"})]})]})]}),e.jsxs(ft,{defaultValue:"testing",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"testing",children:"AI Testing"}),e.jsx(ae,{value:"features",children:"AI Features"}),e.jsx(ae,{value:"examples",children:"Live Examples"}),e.jsx(ae,{value:"integration",children:"Integration"})]}),e.jsx(ie,{value:"testing",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-5 w-5"}),"AI Test Suite"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs(M,{onClick:d,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(ui,{className:"h-4 w-4 mr-2"}),"Test Basic AI Assistant"]}),e.jsxs(M,{onClick:u,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(fn,{className:"h-4 w-4 mr-2"}),"Generate Property Description"]}),e.jsxs(M,{onClick:h,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Generate Maintenance Tasks"]}),e.jsxs(M,{onClick:m,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(lp,{className:"h-4 w-4 mr-2"}),"Analyze Guest Review"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Custom AI Prompt"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(mt,{placeholder:"Enter your custom AI prompt here...",value:a,onChange:p=>i(p.target.value),rows:3}),e.jsxs(M,{onClick:x,disabled:t||!a.trim(),className:"w-full",children:[e.jsx(cp,{className:"h-4 w-4 mr-2"}),"Send Custom Prompt"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Review Analysis Test"})}),e.jsx(D,{className:"space-y-3",children:e.jsx(mt,{placeholder:"Enter a guest review to analyze...",value:l,onChange:p=>o(p.target.value),rows:3})})]})]}),e.jsx("div",{children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-primary border-t-transparent rounded-full"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-5 w-5 text-green-600"}),"AI Response"]})})}),e.jsx(D,{children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 min-h-[300px] max-h-[500px] overflow-y-auto",children:n?e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:n}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Click any test button to see AI results here"})})})]})})]})}),e.jsx(ie,{value:"features",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(fn,{className:"h-5 w-5 text-blue-600"}),"Property AI"]})}),e.jsx(D,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Property Description Generation"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Amenity Recommendations"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Pricing Suggestions"]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-5 w-5 text-purple-600"}),"Guest AI"]})}),e.jsx(D,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Review Sentiment Analysis"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Smart Guest Responses"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Guest Request Processing"]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5 text-orange-600"}),"Maintenance AI"]})}),e.jsx(D,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Task Suggestions"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Priority Assessment"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),"Preventive Scheduling"]})]})})]})]})}),e.jsx(ie,{value:"examples",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"AI in Daily Operations"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{variant:"secondary",children:" AI Features Active"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI is actively working in these areas:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" Guest review analysis and sentiment tracking"}),e.jsx("li",{children:" Automated maintenance task suggestions"}),e.jsx("li",{children:" Smart guest communication responses"}),e.jsx("li",{children:" Property description optimization"}),e.jsx("li",{children:" Task priority assessment"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Available AI Tools"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(z,{variant:"outline",children:"Navigation: Settings  AI Tools"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" AI Feedback Monitor (Guest insights)"}),e.jsx("li",{children:" AI Task Manager (Smart scheduling)"}),e.jsx("li",{children:" AI Notifications & Reminders"}),e.jsx("li",{children:" Guest Portal Smart Requests"}),e.jsx("li",{children:" Property AI Recommendations"})]})]})})]})]})}),e.jsx(ie,{value:"integration",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"AI Integration Status"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"OpenAI GPT-4o Integration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Latest AI model with enhanced capabilities"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Real-time Processing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Instant AI responses for guest and property management"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Multi-language Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI works in multiple languages for global guests"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Context-Aware Responses"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI understands property and guest context"})]})]})]})})]})})]})]})}function cRe(){const[t,s]=b.useState(!1),[n,r]=b.useState(!1),[a,i]=b.useState(!1),{toast:l}=at(),o=yt(),c=Zt({defaultValues:{amount:"",source:"",guestName:"",property:"",notes:"",receiptPhoto:""}}),d=Zt({defaultValues:{amount:"",description:"",category:"",property:"",receipt:"",receiptPhoto:""}}),u=(w,N)=>{var k;const S=(k=w.target.files)==null?void 0:k[0];if(S){const T=new FileReader;T.onload=C=>{var $;const P=($=C.target)==null?void 0:$.result;N==="cash"?c.setValue("receiptPhoto",P):d.setValue("receiptPhoto",P)},T.readAsDataURL(S)}},{data:m,isLoading:h,error:x}=ye({queryKey:["/api/staff-wallet/staff-pool"],enabled:!0,retry:3,staleTime:3e4}),{data:p=[],isLoading:f}=ye({queryKey:["/api/staff-wallet/staff-pool/transactions"],enabled:!0,retry:3,staleTime:3e4}),j=[{value:"transport",label:"Transport & Fuel",icon:Lo},{value:"supplies",label:"Office Supplies",icon:_X},{value:"maintenance",label:"Emergency Repairs",icon:Ws},{value:"meals",label:"Staff Meals",icon:X$},{value:"other",label:"Other Expenses",icon:Wi}],g=Ee({mutationFn:async w=>{const N=await fetch("/api/staff-wallet/staff-pool/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!N.ok)throw new Error("Failed to add expense");return N.json()},onSuccess:()=>{l({title:"Expense added successfully"}),s(!1),d.reset(),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}}),y=Ee({mutationFn:async w=>{const N=await fetch("/api/staff-wallet/staff-pool/cash-income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!N.ok)throw new Error("Failed to record cash collection");return N.json()},onSuccess:()=>{l({title:"Cash collection recorded"}),r(!1),c.reset(),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}}),v=Ee({mutationFn:async()=>{const w=await fetch("/api/staff-wallet/staff-pool/clear-balance",{method:"POST",headers:{"Content-Type":"application/json"}});if(!w.ok)throw new Error("Failed to clear balance");return w.json()},onSuccess:()=>{l({title:"Balance cleared and reset to base petty cash amount"}),i(!1),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}});return h||f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-gray-600",children:"Loading your wallet data..."})]}),e.jsxs(z,{variant:"outline",className:"text-green-600 border-green-200",children:[e.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Staff Wallet"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(w=>e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})})},w))})]}):x?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-red-600",children:"Error loading wallet data. Please try again."})]}),e.jsxs(z,{variant:"outline",className:"text-red-600 border-red-200",children:[e.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Error"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-gray-600",children:"Manage your petty cash, expenses, and cash collections"})]}),e.jsxs(z,{variant:"outline",className:"text-green-600 border-green-200",children:[e.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Staff Wallet"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Nt((m==null?void 0:m.currentBalance)||0)})]}),e.jsx(Fi,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Base Petty Cash"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Nt((m==null?void 0:m.basePettyCash)||5e3)})]}),e.jsx(Je,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cash Collected"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",Nt((m==null?void 0:m.totalCollected)||0)]})]}),e.jsx(Bt,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",Nt((m==null?void 0:m.totalExpenses)||0)]})]}),e.jsx(Wi,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(Ke,{open:n,onOpenChange:r,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Cash Collection"]})}),e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Record Cash Collection"})}),e.jsxs("form",{onSubmit:c.handleSubmit(w=>y.mutate(w)),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Amount Collected (THB)"}),e.jsx(G,{type:"number",placeholder:"Enter amount",...c.register("amount",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Source"}),e.jsxs(se,{onValueChange:w=>c.setValue("source",w),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select source"})}),e.jsxs(te,{children:[e.jsx(A,{value:"checkout_electric",children:"Check-out - Electricity Payment"}),e.jsx(A,{value:"checkout_deposit",children:"Check-out - Deposit Collection"}),e.jsx(A,{value:"checkout_damages",children:"Check-out - Damage Charges"}),e.jsx(A,{value:"service_payment",children:"Service Payment"}),e.jsx(A,{value:"other",children:"Other Cash Collection"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Guest Name"}),e.jsx(G,{placeholder:"Enter guest name",...c.register("guestName")})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Property"}),e.jsxs(se,{onValueChange:w=>c.setValue("property",w),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"Villa Aruna",children:"Villa Aruna"}),e.jsx(A,{value:"Villa Samui Breeze",children:"Villa Samui Breeze"}),e.jsx(A,{value:"Villa Paradise",children:"Villa Paradise"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Notes"}),e.jsx(mt,{placeholder:"Additional details...",...c.register("notes")})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Receipt Photo (Optional)"}),e.jsx(G,{type:"file",accept:"image/*",onChange:w=>u(w,"cash")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload receipt photo or proof of collection"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>r(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:y.isPending,children:y.isPending?"Recording...":"Record Collection"})]})]})]})]}),e.jsxs(Ke,{open:t,onOpenChange:s,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"outline",children:[e.jsx(op,{className:"w-4 h-4 mr-2"}),"Add Expense"]})}),e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Record Expense"})}),e.jsxs("form",{onSubmit:d.handleSubmit(w=>g.mutate(w)),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Amount Spent (THB)"}),e.jsx(G,{type:"number",placeholder:"Enter amount",...d.register("amount",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Category"}),e.jsxs(se,{onValueChange:w=>d.setValue("category",w),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select category"})}),e.jsx(te,{children:j.map(w=>e.jsx(A,{value:w.value,children:w.label},w.value))})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Description"}),e.jsx(mt,{placeholder:"What was purchased/paid for?",...d.register("description",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Property"}),e.jsxs(se,{onValueChange:w=>d.setValue("property",w),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"Villa Aruna",children:"Villa Aruna"}),e.jsx(A,{value:"Villa Samui Breeze",children:"Villa Samui Breeze"}),e.jsx(A,{value:"Villa Paradise",children:"Villa Paradise"}),e.jsx(A,{value:"NA",children:"N/A - General Expense"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Receipt Number/Details (Optional)"}),e.jsx(G,{placeholder:"Receipt number or store details",...d.register("receipt")})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Receipt Photo (Optional)"}),e.jsx(G,{type:"file",accept:"image/*",onChange:w=>u(w,"expense")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload receipt photo for expense verification"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:g.isPending,children:g.isPending?"Recording...":"Record Expense"})]})]})]})]}),e.jsxs(Ke,{open:a,onOpenChange:i,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"border-orange-300 text-orange-600 hover:bg-orange-50",children:[e.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Clear Balance"]})}),e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Clear Wallet Balance"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-orange-800",children:["This will clear your current balance and reset your wallet to the base petty cash amount of ",Nt(m.basePettyCash),"."]}),e.jsxs("p",{className:"text-sm text-orange-600 mt-2 font-medium",children:["Current balance: ",Nt(m.currentBalance),"  ",Nt(m.basePettyCash)]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Reason for clearing"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select reason"})}),e.jsxs(te,{children:[e.jsx(A,{value:"end_of_day",children:"End of day clearing"}),e.jsx(A,{value:"bank_deposit",children:"Depositing excess cash"}),e.jsx(A,{value:"handover",children:"Shift handover"}),e.jsx(A,{value:"audit",children:"Audit requirement"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Notes"}),e.jsx(mt,{placeholder:"Additional notes about the clearing..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>v.mutate(),className:"bg-orange-600 hover:bg-orange-700",children:"Clear Balance"})]})]})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5"}),"Recent Transactions"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(et,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-sm",children:"Add an expense or record cash collection to see transactions here"})]}):p.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${w.type==="income"?"bg-green-100":"bg-red-100"}`,children:w.type==="income"?e.jsx(bt,{className:"w-5 h-5 text-green-600"}):e.jsx(op,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w.description}),e.jsx("p",{className:"text-sm text-gray-600",children:w.date}),w.guestName&&e.jsxs("p",{className:"text-xs text-blue-600",children:[w.guestName,"  ",w.propertyName]}),w.receipt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Receipt: ",w.receipt]}),w.receiptPhoto&&e.jsx("p",{className:"text-xs text-blue-600",children:" Photo attached"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-lg font-semibold ${w.type==="income"?"text-green-600":"text-red-600"}`,children:[w.type==="income"?"+":"-",Nt(w.amount)]}),e.jsx(z,{variant:"outline",className:"text-xs",children:w.category.replace("_"," ")})]})]},w.id))})})]})]})}function dRe(){const[t,s]=b.useState(!1),[n,r]=b.useState(null),{toast:a}=at(),i=yt(),l=[{id:1,guestName:"Michael Johnson",propertyName:"Villa Aruna",checkoutDate:"2025-01-23",checkoutTime:"11:00",electricityReading:{start:1250,end:1387,rate:7},estimatedCash:959,status:"pending_collection"},{id:2,guestName:"Emma Wilson",propertyName:"Villa Breeze",checkoutDate:"2025-01-23",checkoutTime:"14:30",electricityReading:{start:2100,end:2198,rate:7},estimatedCash:686,status:"pending_collection"}],o=[{id:3,guestName:"John Smith",propertyName:"Villa Aruna",checkoutDate:"2025-01-22",electricityUsage:250,cashCollected:1750,collectedBy:"Niran Thepsiri",collectionTime:"16:45",receiptPhoto:"receipt-001.jpg",addedToWallet:!0},{id:4,guestName:"Sarah Davis",propertyName:"Villa Paradise",checkoutDate:"2025-01-21",electricityUsage:180,cashCollected:1260,collectedBy:"Somchai Jaidee",collectionTime:"10:30",receiptPhoto:"receipt-002.jpg",addedToWallet:!0}],c=Ee({mutationFn:async u=>{const m=await fetch("/api/staff-wallet/cash-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!m.ok)throw new Error("Failed to record cash collection");return m.json()},onSuccess:()=>{a({title:"Cash collection recorded and added to your wallet"}),s(!1),i.invalidateQueries({queryKey:["/api/staff-cash-collection"]})}}),d=u=>{r(u),s(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Cash Collection Tracker"}),e.jsx("p",{className:"text-gray-600",children:"Track cash collections from guest check-outs"})]}),e.jsxs(z,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(yr,{className:"w-4 h-4 mr-1"}),"Cash Tracker"]})]}),e.jsxs(ft,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(xt,{children:[e.jsxs(ae,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Pending Collections (",l.length,")"]}),e.jsxs(ae,{value:"completed",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Completed (",o.length,")"]})]}),e.jsx(ie,{value:"pending",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-orange-500"}),"Pending Cash Collections"]})}),e.jsx(D,{children:l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(yr,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No pending cash collections"})]}):e.jsx("div",{className:"space-y-4",children:l.map(u=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Ht,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:u.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),u.propertyName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(et,{className:"w-4 h-4"}),u.checkoutDate," at ",u.checkoutTime]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-blue-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-4 h-4"}),u.electricityReading.start,"  ",u.electricityReading.end," kWh"]}),e.jsxs("span",{children:["Usage: ",u.electricityReading.end-u.electricityReading.start," kWh  ",Nt(u.electricityReading.rate)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Nt(u.estimatedCash)}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Expected cash"}),e.jsxs(M,{onClick:()=>d(u),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Collect Cash"]})]})]})},u.id))})})]})}),e.jsx(ie,{value:"completed",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-green-500"}),"Completed Collections"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(u=>e.jsx("div",{className:"border rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Fe,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:u.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"w-4 h-4"}),u.propertyName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(et,{className:"w-4 h-4"}),u.checkoutDate," at ",u.collectionTime]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{children:["Collected by: ",u.collectedBy]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ns,{className:"w-4 h-4"}),u.electricityUsage," kWh"]}),u.receiptPhoto&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(bf,{className:"w-4 h-4"}),"Receipt photo"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Nt(u.cashCollected)}),e.jsx(z,{variant:"outline",className:"text-green-600 border-green-200",children:"Added to wallet"})]})]})},u.id))})})]})})]}),e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Record Cash Collection"})}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ht,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:n.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:n.propertyName})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Electricity Usage"}),e.jsxs("p",{className:"font-semibold",children:[n.electricityReading.end-n.electricityReading.start," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Expected Amount"}),e.jsx("p",{className:"font-semibold text-green-600",children:Nt(n.estimatedCash)})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Actual Amount Collected (THB)"}),e.jsx(G,{type:"number",defaultValue:n.estimatedCash,placeholder:"Enter actual amount collected"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Collection Method"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"How was payment collected?"})}),e.jsxs(te,{children:[e.jsx(A,{value:"cash",children:"Cash Payment"}),e.jsx(A,{value:"card_cash",children:"Card + Cash"}),e.jsx(A,{value:"transfer_cash",children:"Bank Transfer + Cash"})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Receipt Photo (Optional)"}),e.jsx(G,{type:"file",accept:"image/*"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Take a photo of the receipt or payment proof"})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Collection Notes"}),e.jsx(mt,{placeholder:"Any additional notes about the collection...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsxs(M,{onClick:()=>c.mutate({}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Record & Add to Wallet"]})]})]})]})})]})}function uRe(){var j,g;const[t,s]=b.useState(null),[n,r]=b.useState(!1),[a,i]=b.useState(new Date().toISOString().split("T")[0]),{toast:l}=at(),o=yt(),c=[{id:1,staffName:"Niran Thepsiri",staffId:"staff-pool",amount:450,description:"Gasoline for property visits",category:"transport",date:"2025-01-23",time:"10:15",receipt:"receipt-gas-001.jpg",status:"pending_review",suggestedProperty:"villa-aruna",suggestedCategory:"company_expense"},{id:2,staffName:"Somchai Jaidee",staffId:"staff-maintenance",amount:850,description:"Emergency plumbing supplies for villa repair",category:"maintenance",date:"2025-01-23",time:"14:30",receipt:"receipt-plumbing-002.jpg",status:"pending_review",suggestedProperty:"villa-breeze",suggestedCategory:"billed_to_owner"},{id:3,staffName:"Apinya Khamchong",staffId:"staff-guest-services",amount:300,description:"Guest welcome snacks and beverages",category:"supplies",date:"2025-01-23",time:"16:00",receipt:"receipt-snacks-003.jpg",status:"pending_review",suggestedProperty:"villa-paradise",suggestedCategory:"billed_to_guest"}],d=[{id:4,staffName:"Wichai Suwanapong",amount:200,description:"Security patrol fuel",category:"transport",date:"2025-01-22",finalCategory:"company_expense",property:null,reviewedBy:"Admin",reviewDate:"2025-01-23 09:00",status:"approved"},{id:5,staffName:"Niran Thepsiri",amount:1250,description:"Pool chemical supplies",category:"maintenance",date:"2025-01-22",finalCategory:"billed_to_owner",property:"villa-aruna",reviewedBy:"Property Manager",reviewDate:"2025-01-23 08:30",status:"approved"}],u=[{value:"villa-aruna",label:"Villa Aruna"},{value:"villa-breeze",label:"Villa Samui Breeze"},{value:"villa-paradise",label:"Villa Paradise"},{value:"villa-charm",label:"Villa Balinese Charm"}],m=[{value:"company_expense",label:"Company Expense",color:"blue",description:"General business cost"},{value:"billed_to_guest",label:"Billed to Guest",color:"green",description:"Guest should be charged"},{value:"billed_to_owner",label:"Billed to Owner",color:"orange",description:"Property owner responsibility"}],h=Ee({mutationFn:async y=>{const v=await fetch(`/api/staff-expenses/${t==null?void 0:t.id}/review`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!v.ok)throw new Error("Failed to review expense");return v.json()},onSuccess:()=>{l({title:"Expense reviewed and categorized successfully"}),r(!1),o.invalidateQueries({queryKey:["/api/staff-expenses"]})}}),x=y=>{s(y),r(!0)},p=()=>c.reduce((y,v)=>y+v.amount,0),f=y=>d.filter(v=>v.finalCategory===y).reduce((v,w)=>v+w.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Expense Management"}),e.jsx("p",{className:"text-gray-600",children:"Review and categorize staff petty cash expenses"})]}),e.jsxs(z,{variant:"outline",className:"text-red-600 border-red-200",children:[e.jsx(Ut,{className:"w-4 h-4 mr-1"}),c.length," Pending Review"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Nt(p())})]}),e.jsx(et,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Company Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Nt(f("company_expense"))})]}),e.jsx(Ft,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guest Billable"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Nt(f("billed_to_guest"))})]}),e.jsx(Ht,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Owner Billable"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Nt(f("billed_to_owner"))})]}),e.jsx(Je,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsxs(ft,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(xt,{children:[e.jsxs(ae,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"}),"Pending Review (",c.length,")"]}),e.jsxs(ae,{value:"reviewed",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Reviewed (",d.length,")"]})]}),e.jsx(ie,{value:"pending",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-red-500"}),"Expenses Pending Review"]})}),e.jsx(D,{children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Fe,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No pending expenses to review"})]}):e.jsx("div",{className:"space-y-4",children:c.map(y=>{var v,w;return e.jsx("div",{className:"border rounded-lg p-4 bg-red-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Wi,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:y.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"w-4 h-4"}),y.staffName]}),e.jsxs("span",{children:[y.date," at ",y.time]}),e.jsxs("span",{className:"text-blue-600",children:["Category: ",y.category]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mt-1",children:[e.jsxs(z,{variant:"outline",className:"text-blue-600",children:["AI Suggests: ",((v=u.find(N=>N.value===y.suggestedProperty))==null?void 0:v.label)||"Company-wide"]}),e.jsxs(z,{variant:"outline",className:"text-green-600",children:["Category: ",(w=m.find(N=>N.value===y.suggestedCategory))==null?void 0:w.label]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:Nt(y.amount)}),e.jsxs(M,{onClick:()=>x(y),className:"mt-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Review & Categorize"]})]})]})},y.id)})})})]})}),e.jsx(ie,{value:"reviewed",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 text-green-500"}),"Reviewed & Categorized Expenses"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:d.map(y=>{var v,w;return e.jsx("div",{className:"border rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Fe,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:y.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"w-4 h-4"}),y.staffName]}),e.jsx("span",{children:y.date}),e.jsxs("span",{children:["Reviewed by: ",y.reviewedBy]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mt-1",children:[e.jsx(z,{variant:"outline",className:`${y.finalCategory==="company_expense"?"text-blue-600 border-blue-200":y.finalCategory==="billed_to_guest"?"text-green-600 border-green-200":"text-orange-600 border-orange-200"}`,children:(v=m.find(N=>N.value===y.finalCategory))==null?void 0:v.label}),y.property&&e.jsxs(z,{variant:"outline",className:"text-purple-600",children:[e.jsx(Ft,{className:"w-3 h-3 mr-1"}),(w=u.find(N=>N.value===y.property))==null?void 0:w.label]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Nt(y.amount)}),e.jsx(z,{variant:"outline",className:"text-green-600 border-green-200",children:"Approved"})]})]})},y.id)})})})]})})]}),e.jsx(Ke,{open:n,onOpenChange:r,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Review & Categorize Expense"})}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 border rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-600",children:"Staff Member"}),e.jsx("p",{className:"font-semibold",children:t.staffName})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-600",children:"Amount"}),e.jsx("p",{className:"font-semibold text-green-600",children:Nt(t.amount)})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-600",children:"Date & Time"}),e.jsxs("p",{className:"font-semibold",children:[t.date," at ",t.time]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-600",children:"Category"}),e.jsx("p",{className:"font-semibold",children:t.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(W,{className:"text-sm text-gray-600",children:"Description"}),e.jsx("p",{className:"font-semibold",children:t.description})]}),t.receipt&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(W,{className:"text-sm text-gray-600",children:"Receipt"}),e.jsx("p",{className:"text-blue-600 text-sm",children:t.receipt})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"AI Recommendations"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-blue-600",children:"Suggested Property"}),e.jsx("p",{children:((j=u.find(y=>y.value===t.suggestedProperty))==null?void 0:j.label)||"Company-wide"})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-blue-600",children:"Suggested Category"}),e.jsx("p",{children:(g=m.find(y=>y.value===t.suggestedCategory))==null?void 0:g.label})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Expense Category *"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"How should this expense be categorized?"})}),e.jsx(te,{children:m.map(y=>e.jsx(A,{value:y.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${y.color}-500`}),e.jsx("span",{children:y.label}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",y.description,")"]})]})},y.value))})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Assign to Property (Optional)"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property or leave blank for company-wide"})}),e.jsxs(te,{children:[e.jsx(A,{value:"none",children:"Company-wide (No specific property)"}),u.map(y=>e.jsx(A,{value:y.value,children:y.label},y.value))]})]})]}),e.jsxs("div",{children:[e.jsx(W,{children:"Review Notes"}),e.jsx(mt,{placeholder:"Add any notes about this expense categorization...",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(M,{onClick:()=>h.mutate({}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Approve & Categorize"]})]})]})]})})]})}function GR(){var h,x;const{data:t}=ye({queryKey:["/api/staff-wallet/staff-pool"],enabled:!0}),{data:s}=ye({queryKey:["/api/tasks"],enabled:!0}),n=(t==null?void 0:t.currentBalance)||6750,r=(t==null?void 0:t.basePettyCash)||5e3,a=2,i=((h=s==null?void 0:s.filter(p=>{const f=new Date().toDateString();return new Date(p.dueDate).toDateString()===f}))==null?void 0:h.length)||4,l=((x=s==null?void 0:s.filter(p=>{const f=new Date().toDateString();return p.status==="completed"&&new Date(p.completedAt||p.updatedAt).toDateString()===f}))==null?void 0:x.length)||2,o=[{title:"My Tasks Today",count:i,icon:wl,href:"/tasks",color:"blue",description:`${l} completed`},{title:"My Wallet Balance",count:Nt(n),icon:Fi,href:"/staff-wallet-petty-cash",color:"green",description:`Base: ${Nt(r)}`},{title:"Pending Expenses",count:a,icon:Ut,href:"/staff-expense-management",color:"orange",description:"Awaiting review"},{title:"Cash Collections",count:"2 pending",icon:Je,href:"/staff-cash-collection",color:"purple",description:"Guest check-outs"}],c=[{id:1,title:"Villa Aruna - Pool Cleaning",property:"Villa Aruna",priority:"normal",status:"pending",time:"09:00",category:"pool"},{id:2,title:"Villa Breeze - Guest Check-out",property:"Villa Breeze",priority:"high",status:"in_progress",time:"11:00",category:"checkout"},{id:3,title:"Villa Paradise - Maintenance Check",property:"Villa Paradise",priority:"normal",status:"pending",time:"14:00",category:"maintenance"},{id:4,title:"Villa Samui - Guest Check-in Prep",property:"Villa Samui",priority:"high",status:"completed",time:"15:30",category:"checkin"}],d=p=>{switch(p){case"high":return"destructive";case"normal":return"secondary";case"low":return"outline";default:return"secondary"}},u=p=>{switch(p){case"completed":return"bg-green-100 text-green-700";case"in_progress":return"bg-blue-100 text-blue-700";case"pending":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},m=p=>{switch(p){case"pool":return Fe;case"maintenance":return Ws;case"checkout":case"checkin":return et;default:return wl}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your daily overview"})]}),e.jsxs(z,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(et,{className:"w-4 h-4 mr-1"}),"Staff Portal"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map(p=>{const f=p.icon;return e.jsx(nn,{href:p.href,children:e.jsxs(E,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:p.title}),e.jsx(f,{className:`h-4 w-4 text-${p.color}-600`})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.count}),e.jsx("p",{className:`text-xs text-${p.color}-600`,children:p.description})]})]})},p.title)})}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(wl,{className:"w-5 h-5"}),"Today's Tasks (",c.length,")"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"space-y-3",children:c.map(p=>{const f=m(p.category);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:p.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:[p.property,"  ",p.time]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:d(p.priority),children:p.priority}),e.jsx(z,{variant:"outline",className:u(p.status),children:p.status.replace("_"," ")})]})]},p.id)})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(nn,{href:"/tasks",children:e.jsx(M,{variant:"outline",className:"w-full",children:"View All My Tasks"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:" Wallet & Expenses"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(nn,{href:"/staff-wallet-petty-cash",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Manage Petty Cash"]})}),e.jsx(nn,{href:"/staff-cash-collection",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Cash Collection"]})})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:" Property Tasks"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(nn,{href:"/checkin-checkout-workflow",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Check-in/Out"]})}),e.jsx(nn,{href:"/maintenance-log-warranty-tracker",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Maintenance"]})})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:" Guest Services"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(nn,{href:"/guest-portal-smart-requests",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ea,{className:"w-4 h-4 mr-2"}),"Guest Requests"]})}),e.jsx(nn,{href:"/daily-operations",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Daily Operations"]})})]})]})]})]})}function mRe(){const[t,s]=b.useState(!1),[n,r]=b.useState(!1),[a,i]=b.useState(""),{toast:l}=at(),o=yt(),{data:c=[],isLoading:d}=ye({queryKey:["/api/admin/staff-permissions"]}),u=Ee({mutationFn:async p=>ve(`/api/admin/staff-permissions/${p.staffId}/grant-task-creation`,{method:"POST",body:JSON.stringify(p)}),onSuccess:()=>{l({title:"Permission Granted",description:"Task creation permission has been granted to the staff member."}),o.invalidateQueries({queryKey:["/api/admin/staff-permissions"]}),s(!1)},onError:p=>{l({title:"Error",description:p.message||"Failed to grant permission",variant:"destructive"})}}),m=Ee({mutationFn:async p=>ve(`/api/admin/staff-permissions/${p.staffId}/revoke-task-creation`,{method:"POST",body:JSON.stringify(p)}),onSuccess:()=>{l({title:"Permission Revoked",description:"Task creation permission has been revoked from the staff member."}),o.invalidateQueries({queryKey:["/api/admin/staff-permissions"]}),r(!1)},onError:p=>{l({title:"Error",description:p.message||"Failed to revoke permission",variant:"destructive"})}}),h=p=>{p.preventDefault();const f=new FormData(p.currentTarget),j={staffId:f.get("staffId"),reason:f.get("reason"),departments:f.get("departments").split(",").map(g=>g.trim()),maxTasksPerDay:parseInt(f.get("maxTasksPerDay")),expiresAt:f.get("expiresAt")||void 0};u.mutate(j)},x=p=>{p.preventDefault();const f=new FormData(p.currentTarget),j={staffId:f.get("staffId"),reason:f.get("reason")};m.mutate(j)};return d?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qt,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Permission Management"})]}),e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"Loading staff permissions..."})})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qt,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Permission Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage task creation permissions for staff members"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ke,{open:t,onOpenChange:s,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Cf,{className:"w-4 h-4 mr-2"}),"Grant Permission"]})}),e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Grant Task Creation Permission"})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"staffId",children:"Staff User ID"}),e.jsx(G,{name:"staffId",placeholder:"staff-pool",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"reason",children:"Reason for granting permission"}),e.jsx(mt,{name:"reason",placeholder:"e.g., Experienced staff member needs to create maintenance tasks",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"departments",children:"Allowed Departments (comma-separated)"}),e.jsx(G,{name:"departments",placeholder:"cleaning, maintenance, general",defaultValue:"general",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"maxTasksPerDay",children:"Maximum Tasks Per Day"}),e.jsx(G,{name:"maxTasksPerDay",type:"number",defaultValue:"3",min:"1",max:"10",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"expiresAt",children:"Expiration Date (optional)"}),e.jsx(G,{name:"expiresAt",type:"date"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:u.isPending,children:u.isPending?"Granting...":"Grant Permission"})]})]})]})]}),e.jsxs(Ke,{open:n,onOpenChange:r,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"destructive",children:[e.jsx(nF,{className:"w-4 h-4 mr-2"}),"Revoke Permission"]})}),e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Revoke Task Creation Permission"})}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"staffId",children:"Staff User ID"}),e.jsx(G,{name:"staffId",placeholder:"staff-pool",required:!0})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"reason",children:"Reason for revoking permission"}),e.jsx(mt,{name:"reason",placeholder:"e.g., Staff member no longer needs task creation access",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>r(!1),children:"Cancel"}),e.jsx(M,{type:"submit",variant:"destructive",disabled:m.isPending,children:m.isPending?"Revoking...":"Revoke Permission"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Staff"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Can Create Tasks"}),e.jsx(Fe,{className:"h-4 w-4 text-green-600"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.filter(p=>p.canCreateTasks&&p.isActive).length})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Permission Requests"}),e.jsx(Ut,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No pending requests"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"Staff Permissions"]})}),e.jsx(D,{children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(qt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No staff permissions configured"}),e.jsx("p",{className:"text-sm",children:"Grant permissions to staff members to allow task creation"})]}):e.jsx("div",{className:"space-y-4",children:c.map(p=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p.canCreateTasks&&p.isActive?"bg-green-100":"bg-gray-100"}`,children:p.canCreateTasks&&p.isActive?e.jsx(Fe,{className:"w-5 h-5 text-green-600"}):e.jsx(Ut,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Staff ID: ",p.staffUserId]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Max tasks: ",p.maxTasksPerDay,"/day  Departments: ",p.allowedDepartments.join(", ")]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Granted by: ",p.grantedBy,"  ",p.reason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:p.canCreateTasks&&p.isActive?"default":"secondary",children:p.canCreateTasks&&p.isActive?"Active":"Inactive"}),p.expiresAt&&e.jsxs(z,{variant:"outline",className:"text-xs",children:[e.jsx(et,{className:"w-3 h-3 mr-1"}),"Expires: ",new Date(p.expiresAt).toLocaleDateString()]})]})]})},p.id))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Permission Guidelines"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ut,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Default Behavior:"})," Staff members cannot create tasks unless explicitly granted permission by an administrator."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ut,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Daily Limits:"})," Staff can only create a limited number of tasks per day to prevent system overload."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ut,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Department Restrictions:"})," Staff can only create tasks for departments they are authorized to work with."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ut,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Approval Process:"})," Staff-created tasks may require admin approval before being executed."]})]})]})})]})]})}function hRe(){return b.useEffect(()=>{["/api/properties","/api/tasks","/api/bookings","/api/dashboard/stats","/api/finance","/api/finance/analytics","/api/users"].forEach(n=>{Bs.prefetchQuery({queryKey:[n],staleTime:60*60*1e3})}),["/dashboard-hub","/property-hub","/finance-hub","/system-hub"].forEach(n=>{Bs.prefetchQuery({queryKey:["route",n],queryFn:()=>Promise.resolve(!0),staleTime:60*60*1e3})})},[]),null}const xRe=[{value:"villa",label:"Villa Management"},{value:"hotel",label:"Hotel / Resort"},{value:"apartment",label:"Apartment Complex"},{value:"bnb",label:"B&B / Guesthouse"},{value:"other",label:"Other"}],WR=[{value:"hostaway",label:"Hostaway",description:"Full integration available",supported:!0},{value:"guesty",label:"Guesty",description:"Integration coming soon",supported:!1},{value:"lodgify",label:"Lodgify",description:"Integration coming soon",supported:!1},{value:"airbnb",label:"Airbnb Direct",description:"Manual import only",supported:!1},{value:"none",label:"No PMS / Manual Entry",description:"Start without PMS integration",supported:!0}],KR=[{id:"starter",name:"Starter",icon:e.jsx(ks,{className:"h-5 w-5"}),description:"Perfect for small property managers",propertyRange:"1-10 properties",price:"$15",priceDetail:"per property/month",features:["Property & booking management","Basic task tracking","Financial reporting","Email support","Mobile app access"]},{id:"professional",name:"Professional",icon:e.jsx(Jc,{className:"h-5 w-5"}),description:"For growing management companies",propertyRange:"11-50 properties",price:"$12",priceDetail:"per property/month",popular:!0,features:["Everything in Starter","PMS integrations (Hostaway)","Advanced analytics","Staff management","API access","Priority support"]},{id:"enterprise",name:"Enterprise",icon:e.jsx(ns,{className:"h-5 w-5"}),description:"For large-scale operations",propertyRange:"50+ properties",price:"$8",priceDetail:"per property/month",features:["Everything in Professional","White-label branding","Custom integrations","Advanced reporting","Dedicated account manager","Custom training"]}],pRe=[{id:"hostaway",label:"Hostaway PMS",description:"Property sync & calendar"},{id:"stripe",label:"Stripe Payments",description:"Payment processing"},{id:"quickbooks",label:"QuickBooks",description:"Accounting integration"},{id:"twilio",label:"SMS/WhatsApp",description:"Guest communication"},{id:"mailchimp",label:"Email Marketing",description:"Guest outreach"}],fRe=["Thailand","Singapore","Malaysia","Indonesia","Philippines","Vietnam","Cambodia","Laos","Myanmar","Brunei","Other"],gRe=[{value:"0-10k",label:"$0 - $10k/month"},{value:"10k-50k",label:"$10k - $50k/month"},{value:"50k-100k",label:"$50k - $100k/month"},{value:"100k+",label:"$100k+/month"}];function vRe(){var f,j;const{toast:t}=at(),[s,n]=b.useState("business"),[r,a]=b.useState(!1),[i,l]=b.useState({companyName:"",contactName:"",email:"",phone:"",country:"",website:"",propertyCount:"",businessType:"",subscriptionTier:"professional",subscriptionType:"trial",estimatedMonthlyRevenue:"",pmsSystem:"",currentSoftware:"",integrationPriority:[],staffStructure:{ceoCount:1,managerCount:1,supervisorCount:2,staffCount:5,agentCount:0},message:"",requestedFeatures:[]}),o=(g,y)=>{l(v=>({...v,integrationPriority:y?[...v.integrationPriority,g]:v.integrationPriority.filter(w=>w!==g)}))},c=()=>{const g=parseInt(i.propertyCount)||0,y=KR.find(w=>w.id===i.subscriptionTier);if(!y||g===0)return{monthly:0,tier:null};const v=parseInt(y.price.replace("$",""));return{monthly:g*v,tier:y,count:g}},d=()=>{const g=parseInt(i.propertyCount)||0;return g<=10?"starter":g<=50?"professional":"enterprise"},u=()=>{const g=["business","subscription","pms","staff","review"],y=g.indexOf(s);y<g.length-1&&n(g[y+1])},m=()=>{const g=["business","subscription","pms","staff","review"],y=g.indexOf(s);y>0&&n(g[y-1])},h=g=>{switch(g){case"business":return i.companyName&&i.contactName&&i.email&&i.country&&i.propertyCount;case"subscription":return i.subscriptionTier&&i.subscriptionType;case"pms":return i.pmsSystem!==void 0;case"staff":return!0;default:return!0}},x=async g=>{g.preventDefault(),a(!0);try{await ve("/api/saas/signup-request","POST",{...i,propertyCount:parseInt(i.propertyCount)||0}),t({title:"Request Submitted!",description:`Thank you for your interest in HostPilotPro! We'll provision your ${i.subscriptionType==="trial"?"trial":"paid"} environment and send setup instructions to ${i.email} within 24 hours.`}),n("success")}catch{t({title:"Submission Failed",description:"Unable to submit your request. Please try again.",variant:"destructive"})}finally{a(!1)}},p=c();return d(),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Join HostPilotPro"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Scale your property management business with our comprehensive SaaS platform. Get your dedicated environment with PMS integrations, staff management, and enterprise-grade tools."})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex justify-center space-x-4",children:[{id:"business",label:"Business",icon:ln},{id:"subscription",label:"Plan",icon:Jc},{id:"pms",label:"PMS",icon:Jt},{id:"staff",label:"Team",icon:dt},{id:"review",label:"Review",icon:Fe}].map((g,y)=>{const v=s===g.id,w=["business","subscription","pms","staff"].slice(0,["business","subscription","pms","staff","review"].indexOf(s)).includes(g.id),N=g.icon;return e.jsxs("div",{className:`flex items-center ${y<4?"flex-1":""}`,children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${w?"bg-green-500 text-white":v?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e.jsx(N,{className:"h-5 w-5"})}),e.jsx("span",{className:`ml-2 text-sm font-medium ${v?"text-blue-600":w?"text-green-600":"text-gray-500"}`,children:g.label}),y<4&&e.jsx("div",{className:`flex-1 h-1 mx-4 ${w?"bg-green-500":"bg-gray-300"}`})]},g.id)})})}),e.jsxs(E,{className:"shadow-lg",children:[s==="business"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-6 w-6 text-blue-600"}),"Business Information"]}),e.jsx(Me,{children:"Tell us about your property management company"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"companyName",className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4"}),"Company Name *"]}),e.jsx(G,{id:"companyName",value:i.companyName,onChange:g=>l(y=>({...y,companyName:g.target.value})),placeholder:"Mr Property Siam",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"contactName",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Contact Person *"]}),e.jsx(G,{id:"contactName",value:i.contactName,onChange:g=>l(y=>({...y,contactName:g.target.value})),placeholder:"Your Full Name",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Gi,{className:"h-4 w-4"}),"Email Address *"]}),e.jsx(G,{id:"email",type:"email",value:i.email,onChange:g=>l(y=>({...y,email:g.target.value})),placeholder:"contact@yourcompany.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx($i,{className:"h-4 w-4"}),"Phone Number"]}),e.jsx(G,{id:"phone",value:i.phone,onChange:g=>l(y=>({...y,phone:g.target.value})),placeholder:"+66 123 456 789"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"country",className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Country *"]}),e.jsxs(se,{value:i.country,onValueChange:g=>l(y=>({...y,country:g})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select your country"})}),e.jsx(te,{children:fRe.map(g=>e.jsx(A,{value:g,children:g},g))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"website",className:"flex items-center gap-2",children:[e.jsx(Ii,{className:"h-4 w-4"}),"Website"]}),e.jsx(G,{id:"website",value:i.website,onChange:g=>l(y=>({...y,website:g.target.value})),placeholder:"https://yourcompany.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"propertyCount",className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4"}),"Number of Properties *"]}),e.jsx(G,{id:"propertyCount",type:"number",min:"1",max:"500",value:i.propertyCount,onChange:g=>{const y=parseInt(g.target.value)||0;l(v=>({...v,propertyCount:g.target.value,subscriptionTier:y<=10?"starter":y<=50?"professional":"enterprise"}))},placeholder:"50"}),i.propertyCount&&e.jsxs("p",{className:"text-sm text-blue-600",children:["Recommended plan: ",d()==="starter"?"Starter":d()==="professional"?"Professional":"Enterprise"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"businessType",children:"Business Type"}),e.jsxs(se,{value:i.businessType,onValueChange:g=>l(y=>({...y,businessType:g})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select business type"})}),e.jsx(te,{children:xRe.map(g=>e.jsx(A,{value:g.value,children:g.label},g.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"estimatedRevenue",children:"Estimated Monthly Revenue"}),e.jsxs(se,{value:i.estimatedMonthlyRevenue,onValueChange:g=>l(y=>({...y,estimatedMonthlyRevenue:g})),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select revenue range (optional)"})}),e.jsx(te,{children:gRe.map(g=>e.jsx(A,{value:g.value,children:g.label},g.value))})]})]})]})]}),s==="subscription"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Jc,{className:"h-6 w-6 text-blue-600"}),"Choose Your Plan"]}),e.jsx(Me,{children:"Select the subscription tier that fits your business size"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex",children:[e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i.subscriptionType==="trial"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,onClick:()=>l(g=>({...g,subscriptionType:"trial"})),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),"14-Day Free Trial"]})}),e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i.subscriptionType==="paid"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,onClick:()=>l(g=>({...g,subscriptionType:"paid"})),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Start Paid Plan"]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:KR.map(g=>e.jsxs("div",{className:`relative p-6 rounded-lg border-2 cursor-pointer transition-all ${i.subscriptionTier===g.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-blue-300"} ${g.popular?"ring-2 ring-blue-200":""}`,onClick:()=>l(y=>({...y,subscriptionTier:g.id})),children:[g.popular&&e.jsx(z,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600",children:"Most Popular"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:g.icon}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:g.name}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:g.description}),e.jsx("p",{className:"text-sm text-blue-600 mb-4",children:g.propertyRange}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-3xl font-bold",children:g.price}),e.jsxs("span",{className:"text-gray-600",children:["/",g.priceDetail]})]}),i.propertyCount&&e.jsxs("div",{className:"mb-4 p-2 bg-gray-50 rounded",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[parseInt(i.propertyCount)," properties  ",g.price]}),e.jsxs("p",{className:"font-bold text-lg",children:["$",parseInt(i.propertyCount)*parseInt(g.price.replace("$","")),"/month"]})]}),e.jsx("ul",{className:"text-left space-y-2 text-sm",children:g.features.map((y,v)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),y]},v))})]})]},g.id))}),p.monthly>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Your Plan Summary"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[p.count," properties on ",(f=p.tier)==null?void 0:f.name," plan"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.subscriptionType==="trial"?"14-day free trial, then ":"","$",p.monthly,"/month"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.subscriptionType==="trial"?"FREE":`$${p.monthly}`}),e.jsx("p",{className:"text-sm text-gray-600",children:i.subscriptionType==="trial"?"for 14 days":"per month"})]})]})]})]})})]}),s==="pms"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-6 w-6 text-blue-600"}),"PMS Integration"]}),e.jsx(Me,{children:"Connect your Property Management System for seamless data sync"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:WR.map(g=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${i.pmsSystem===g.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"} ${g.supported?"":"opacity-60"}`,onClick:()=>l(y=>({...y,pmsSystem:g.value})),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[g.label,g.value==="hostaway"&&e.jsx(z,{className:"bg-green-100 text-green-800",children:"Ready for Mr Property Siam"}),!g.supported&&e.jsx(z,{variant:"secondary",children:"Coming Soon"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:g.description})]}),i.pmsSystem===g.value&&e.jsx(Fe,{className:"h-5 w-5 text-blue-500"})]})},g.value))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{htmlFor:"currentSoftware",children:"What software do you currently use?"}),e.jsx(G,{id:"currentSoftware",value:i.currentSoftware,onChange:g=>l(y=>({...y,currentSoftware:g.target.value})),placeholder:"e.g., Excel, QuickBooks, custom system"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(W,{className:"text-base font-semibold",children:"Integration Priorities (optional)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:pRe.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_c,{id:g.id,checked:i.integrationPriority.includes(g.id),onCheckedChange:y=>o(g.id,y)}),e.jsx(W,{htmlFor:g.id,className:"text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:g.label}),e.jsx("p",{className:"text-gray-500 text-xs",children:g.description})]})})]},g.id))})]})]})]}),s==="staff"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-6 w-6 text-blue-600"}),"Team Structure"]}),e.jsx(Me,{children:"Plan your staff hierarchy for role-based access control"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"ceoCount",className:"flex items-center gap-2",children:[e.jsx(Jc,{className:"h-4 w-4"}),"CEO/Owners (Full Access)"]}),e.jsx(G,{id:"ceoCount",type:"number",min:"1",max:"5",value:i.staffStructure.ceoCount,onChange:g=>l(y=>({...y,staffStructure:{...y.staffStructure,ceoCount:parseInt(g.target.value)||1}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"System administration, billing, full property access"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"managerCount",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"Managers (Property Oversight)"]}),e.jsx(G,{id:"managerCount",type:"number",min:"0",max:"10",value:i.staffStructure.managerCount,onChange:g=>l(y=>({...y,staffStructure:{...y.staffStructure,managerCount:parseInt(g.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Property portfolio management, staff oversight"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"supervisorCount",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Supervisors (Operations)"]}),e.jsx(G,{id:"supervisorCount",type:"number",min:"0",max:"20",value:i.staffStructure.supervisorCount,onChange:g=>l(y=>({...y,staffStructure:{...y.staffStructure,supervisorCount:parseInt(g.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Task management, quality control, reporting"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"staffCount",className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4"}),"Staff Members (Execution)"]}),e.jsx(G,{id:"staffCount",type:"number",min:"0",max:"100",value:i.staffStructure.staffCount,onChange:g=>l(y=>({...y,staffStructure:{...y.staffStructure,staffCount:parseInt(g.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Housekeeping, maintenance, guest services"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"agentCount",className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-4 w-4"}),"Agents (Bookings)"]}),e.jsx(G,{id:"agentCount",type:"number",min:"0",max:"50",value:i.staffStructure.agentCount,onChange:g=>l(y=>({...y,staffStructure:{...y.staffStructure,agentCount:parseInt(g.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sales agents, booking management, commissions"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Total Team Size"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Object.values(i.staffStructure).reduce((g,y)=>g+y,0)," team members"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Accounts will be created during setup based on your structure"})]})]})]}),s==="review"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-6 w-6 text-blue-600"}),"Review & Submit"]}),e.jsx(Me,{children:"Review your configuration and submit your request"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-base",children:"Business Information"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",i.companyName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",i.contactName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",i.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Properties:"})," ",i.propertyCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",i.country]})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-base",children:"Subscription Plan"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tier:"})," ",i.subscriptionTier.charAt(0).toUpperCase()+i.subscriptionTier.slice(1)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",i.subscriptionType==="trial"?"14-day Free Trial":"Paid Plan"]}),p.monthly>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Monthly Cost:"})," ",i.subscriptionType==="trial"?"FREE (then $"+p.monthly+")":"$"+p.monthly]})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-base",children:"PMS Integration"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"System:"})," ",((j=WR.find(g=>g.value===i.pmsSystem))==null?void 0:j.label)||"None selected"]}),i.currentSoftware&&e.jsxs("p",{children:[e.jsx("strong",{children:"Current Software:"})," ",i.currentSoftware]}),i.integrationPriority.length>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Priority Integrations:"})," ",i.integrationPriority.length," selected"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-base",children:"Team Structure"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"CEOs/Owners:"})," ",i.staffStructure.ceoCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Managers:"})," ",i.staffStructure.managerCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisors:"})," ",i.staffStructure.supervisorCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Staff:"})," ",i.staffStructure.staffCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Agents:"})," ",i.staffStructure.agentCount]}),e.jsxs("p",{className:"font-semibold border-t pt-1",children:[e.jsx("strong",{children:"Total:"})," ",Object.values(i.staffStructure).reduce((g,y)=>g+y,0)," accounts"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{htmlFor:"finalMessage",className:"flex items-center gap-2",children:[e.jsx(Ea,{className:"h-4 w-4"}),"Additional Requirements (optional)"]}),e.jsx(mt,{id:"finalMessage",value:i.message,onChange:g=>l(y=>({...y,message:g.target.value})),placeholder:"Any special requirements, questions, or timeline preferences...",rows:3})]})]})]}),s!=="success"&&e.jsxs("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:[e.jsxs(M,{type:"button",variant:"outline",onClick:m,disabled:s==="business",className:"flex items-center gap-2",children:[e.jsx(Il,{className:"h-4 w-4"}),"Back"]}),e.jsx("div",{className:"flex gap-2",children:s==="review"?e.jsxs(M,{type:"button",onClick:x,disabled:r,className:"flex items-center gap-2",children:[r?"Submitting...":"Submit Request",e.jsx(Fe,{className:"h-4 w-4"})]}):e.jsxs(M,{type:"button",onClick:u,disabled:!h(s),className:"flex items-center gap-2",children:["Next",e.jsx(q$,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5 text-blue-600"}),"Quick Provisioning"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Your dedicated environment will be provisioned within 24 hours with all selected integrations ready to use."})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-blue-600"}),"PMS Integration"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Seamless integration with Hostaway and other PMS systems. Perfect for companies like Mr Property Siam."})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5 text-blue-600"}),"Team Ready"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Role-based access control with accounts for CEOs, managers, staff, and agents from day one."})})]})]})]})})}function S7(){const{toast:t}=at(),s=yt(),[n,r]=b.useState(null),[a,i]=b.useState(""),[l,o]=b.useState(""),{data:c=[],isLoading:d}=ye({queryKey:["/api/saas/signup-requests"]}),{data:u=[],isLoading:m}=ye({queryKey:["/api/saas/tenant-organizations"]}),h=Ee({mutationFn:async({requestId:g,hostawayApiKey:y})=>ve(`/api/saas/signup-requests/${g}/approve`,"POST",{hostawayApiKey:y}),onSuccess:()=>{t({title:"Request Approved",description:"Environment provisioning has started. The client will receive login details shortly."}),s.invalidateQueries({queryKey:["/api/saas/signup-requests"]}),s.invalidateQueries({queryKey:["/api/saas/tenant-organizations"]}),r(null),i("")},onError:g=>{t({title:"Approval Failed",description:g.message||"Failed to approve request",variant:"destructive"})}}),x=Ee({mutationFn:async({requestId:g,reason:y})=>ve(`/api/saas/signup-requests/${g}/reject`,"POST",{reason:y}),onSuccess:()=>{t({title:"Request Rejected",description:"The client has been notified of the rejection."}),s.invalidateQueries({queryKey:["/api/saas/signup-requests"]}),r(null),o("")}}),p=Ee({mutationFn:async({organizationId:g,status:y})=>ve(`/api/saas/tenant-organizations/${g}/status`,"PATCH",{status:y}),onSuccess:()=>{t({title:"Status Updated",description:"Tenant organization status has been updated successfully."}),s.invalidateQueries({queryKey:["/api/saas/tenant-organizations"]})}}),f=g=>{switch(g){case"pending":return e.jsxs(z,{variant:"outline",className:"text-yellow-600",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return e.jsxs(z,{variant:"outline",className:"text-green-600",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return e.jsxs(z,{variant:"outline",className:"text-red-600",children:[e.jsx(ar,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"active":return e.jsxs(z,{variant:"outline",className:"text-green-600",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Active"]});case"suspended":return e.jsxs(z,{variant:"outline",className:"text-yellow-600",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"Suspended"]});case"terminated":return e.jsxs(z,{variant:"outline",className:"text-red-600",children:[e.jsx(ar,{className:"h-3 w-3 mr-1"}),"Terminated"]});default:return e.jsx(z,{variant:"outline",children:g})}},j=g=>{const y={basic:"bg-blue-100 text-blue-800",pro:"bg-purple-100 text-purple-800",enterprise:"bg-amber-100 text-amber-800"};return e.jsx(z,{className:y[g]||"",children:g.toUpperCase()})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"SaaS Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage signup requests and tenant organizations"})]})}),e.jsxs(ft,{defaultValue:"requests",className:"space-y-4",children:[e.jsxs(xt,{children:[e.jsxs(ae,{value:"requests",className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4"}),"Signup Requests"]}),e.jsxs(ae,{value:"organizations",className:"flex items-center gap-2",children:[e.jsx(Ii,{className:"h-4 w-4"}),"Organizations"]})]}),e.jsx(ie,{value:"requests",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Pending Signup Requests"}),e.jsx(Me,{children:"Review and approve new management company requests"})]}),e.jsx(D,{children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):c.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No signup requests found"}):e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Company"}),e.jsx(Re,{children:"Contact"}),e.jsx(Re,{children:"Country"}),e.jsx(Re,{children:"Properties"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Submitted"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:c.map(g=>e.jsxs(Ot,{children:[e.jsx(Oe,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:g.companyName}),g.website&&e.jsx("div",{className:"text-sm text-gray-500",children:g.website})]})}),e.jsx(Oe,{children:e.jsxs("div",{children:[e.jsx("div",{children:g.contactName}),e.jsx("div",{className:"text-sm text-gray-500",children:g.email})]})}),e.jsx(Oe,{children:g.country}),e.jsx(Oe,{children:g.propertyCount||"N/A"}),e.jsx(Oe,{children:f(g.status)}),e.jsx(Oe,{children:jp(new Date(g.submittedAt),{addSuffix:!0})}),e.jsx(Oe,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>r(g),children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),"Review"]})}),e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Review Signup Request"}),e.jsxs(Rt,{children:[g.companyName," - ",g.contactName]})]}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Company Name"}),e.jsx("p",{children:n.companyName})]}),e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Contact Person"}),e.jsx("p",{children:n.contactName})]}),e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Email"}),e.jsx("p",{children:n.email})]}),e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Phone"}),e.jsx("p",{children:n.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Country"}),e.jsx("p",{children:n.country})]}),e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Properties"}),e.jsx("p",{children:n.propertyCount||"N/A"})]})]}),n.message&&e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Message"}),e.jsx("p",{className:"mt-1 text-sm",children:n.message})]}),n.requestedFeatures&&n.requestedFeatures.length>0&&e.jsxs("div",{children:[e.jsx(W,{className:"font-semibold",children:"Requested Features"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:n.requestedFeatures.map(y=>e.jsx(z,{variant:"outline",children:y},y))})]}),n.status==="pending"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"hostawayApiKey",children:"Hostaway API Key (Optional)"}),e.jsx(G,{id:"hostawayApiKey",value:a,onChange:y=>i(y.target.value),placeholder:"Enter Hostaway API key for integration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{onClick:()=>h.mutate({requestId:n.id,hostawayApiKey:a}),disabled:h.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Approve & Deploy"]}),e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"destructive",children:[e.jsx(ar,{className:"h-4 w-4 mr-1"}),"Reject"]})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Reject Request"}),e.jsx(Rt,{children:"Please provide a reason for rejection"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(mt,{value:l,onChange:y=>o(y.target.value),placeholder:"Reason for rejection...",rows:3}),e.jsx(M,{onClick:()=>x.mutate({requestId:n.id,reason:l}),disabled:!l.trim()||x.isPending,variant:"destructive",className:"w-full",children:"Confirm Rejection"})]})]})]})]})]})]})]})]})})})]},g.id))})]})})]})}),e.jsx(ie,{value:"organizations",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Active Organizations"}),e.jsx(Me,{children:"Manage existing tenant organizations and their environments"})]}),e.jsx(D,{children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):u.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No organizations found"}):e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Company"}),e.jsx(Re,{children:"Subdomain"}),e.jsx(Re,{children:"Plan"}),e.jsx(Re,{children:"Limits"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Created"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:u.map(g=>e.jsxs(Ot,{children:[e.jsx(Oe,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:g.companyName}),e.jsx("div",{className:"text-sm text-gray-500",children:g.contactEmail})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ii,{className:"h-4 w-4 text-gray-400"}),g.subdomain,".hostpilotpro.com"]})}),e.jsx(Oe,{children:j(g.planType)}),e.jsx(Oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[g.maxProperties," properties"]}),e.jsxs("div",{className:"text-gray-500",children:[g.maxUsers," users"]})]})}),e.jsx(Oe,{children:f(g.status)}),e.jsx(Oe,{children:jp(new Date(g.createdAt),{addSuffix:!0})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>window.open(`https://${g.subdomain}.hostpilotpro.com`,"_blank"),children:[e.jsx(Ii,{className:"h-4 w-4 mr-1"}),"Visit"]}),e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1"}),"Manage"]})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Manage Organization"}),e.jsx(Rt,{children:g.companyName})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(M,{onClick:()=>p.mutate({organizationId:g.organizationId,status:g.status==="active"?"suspended":"active"}),variant:g.status==="active"?"destructive":"default",disabled:p.isPending,children:g.status==="active"?"Suspend":"Activate"})})})]})]})]})})]},g.id))})]})})]})})]})]})}const yRe=Object.freeze(Object.defineProperty({__proto__:null,default:S7},Symbol.toStringTag,{value:"Module"})),jRe={task:{name:"Task Master",icon:Fe,color:"text-blue-600"},booking:{name:"Booking Expert",icon:tt,color:"text-green-600"},finance:{name:"Finance Pro",icon:Bt,color:"text-yellow-600"},property:{name:"Property Guru",icon:Vn,color:"text-purple-600"},system:{name:"System Elite",icon:Jc,color:"text-red-600"}},wu=[0,100,250,500,1e3,2e3,4e3,8e3,15e3,3e4,5e4];function bRe(t){for(let s=wu.length-1;s>=0;s--)if(t>=wu[s])return s+1;return 1}function NRe(t){const s=bRe(t),n=wu[s-1]||0,r=wu[s]||wu[wu.length-1],a=(t-n)/(r-n)*100;return{current:n,next:r,progress:Math.min(a,100)}}function wRe({userId:t,organizationId:s}){const[n,r]=b.useState("all"),{data:a,isLoading:i}=ye({queryKey:[`/api/achievements/user/${t}`],enabled:!!t}),{data:l=[],isLoading:o}=ye({queryKey:["/api/achievements/definitions"]}),c=i||o;l.filter(m=>m.isEarned);const d=NRe((a==null?void 0:a.totalPoints)||0),u=n==="all"?l:l.filter(m=>m.category===n);return c?e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{className:"bg-gradient-to-r from-primary/10 to-secondary/10",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:e.jsx(Jc,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Level ",(a==null?void 0:a.level)||1]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(a==null?void 0:a.totalPoints)||0," total points"]})]})]}),e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(J$,{className:"h-3 w-3"}),(a==null?void 0:a.currentStreak)||0," day streak"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress to Level ",((a==null?void 0:a.level)||1)+1]}),e.jsxs("span",{children:[Math.round(d.progress),"%"]})]}),e.jsx(fi,{value:d.progress,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[d.current," pts"]}),e.jsxs("span",{children:[d.next," pts"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(E,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.tasksCompleted)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Tasks Completed"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(tt,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.bookingsProcessed)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Bookings Processed"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(Vn,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:(a==null?void 0:a.propertiesManaged)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Managed"})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ri,{className:"h-5 w-5 text-yellow-600"}),"Achievements"]}),e.jsx(Me,{children:"Track your progress and unlock rewards"})]}),e.jsx(D,{children:e.jsxs(ft,{value:n,onValueChange:r,children:[e.jsxs(xt,{className:"grid w-full grid-cols-6",children:[e.jsx(ae,{value:"all",children:"All"}),Object.entries(jRe).map(([m,h])=>e.jsxs(ae,{value:m,className:"flex items-center gap-1",children:[e.jsx(h.icon,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:h.name.split(" ")[0]})]},m))]}),e.jsx(ie,{value:n,className:"mt-4",children:e.jsx(Cm,{className:"h-96",children:e.jsx("div",{className:"grid gap-3",children:u.map(m=>e.jsxs("div",{className:Ue("flex items-center gap-4 p-4 rounded-lg border transition-all",m.isEarned?"bg-primary/5 border-primary/20":"bg-muted/30 border-muted"),children:[e.jsx("div",{className:Ue("w-12 h-12 rounded-full flex items-center justify-center",m.isEarned?"bg-primary text-primary-foreground":"bg-muted"),children:m.isEarned?e.jsx(jX,{className:"h-6 w-6"}):e.jsx(ks,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:m.name}),e.jsxs(z,{variant:"outline",style:{color:m.badgeColor,borderColor:m.badgeColor+"40",backgroundColor:m.badgeColor+"10"},children:[m.points," pts"]}),m.isEarned&&e.jsx(z,{variant:"secondary",className:"bg-green-100 text-green-800",children:" Earned"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:m.description}),!m.isEarned&&m.progress!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[m.progress,"%"]})]}),e.jsx(fi,{value:m.progress,className:"h-1"})]}),m.isEarned&&m.earnedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earned ",new Date(m.earnedAt).toLocaleDateString()]})]})]},m.id))})})})]})})]})]})}const nT=b.createContext({});function rT(t){const s=b.useRef(null);return s.current===null&&(s.current=t()),s.current}const Ab=b.createContext(null),aT=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class SRe extends b.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function CRe({children:t,isPresent:s}){const n=b.useId(),r=b.useRef(null),a=b.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=b.useContext(aT);return b.useInsertionEffect(()=>{const{width:l,height:o,top:c,left:d}=a.current;if(s||!r.current||!l||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[s]),e.jsx(SRe,{isPresent:s,childRef:r,sizeRef:a,children:b.cloneElement(t,{ref:r})})}const kRe=({children:t,initial:s,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:l})=>{const o=rT(PRe),c=b.useId(),d=b.useCallback(m=>{o.set(m,!0);for(const h of o.values())if(!h)return;r&&r()},[o,r]),u=b.useMemo(()=>({id:c,initial:s,isPresent:n,custom:a,onExitComplete:d,register:m=>(o.set(m,!1),()=>o.delete(m))}),i?[Math.random(),d]:[n,d]);return b.useMemo(()=>{o.forEach((m,h)=>o.set(h,!1))},[n]),b.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),l==="popLayout"&&(t=e.jsx(CRe,{isPresent:n,children:t})),e.jsx(Ab.Provider,{value:u,children:t})};function PRe(){return new Map}function C7(t=!0){const s=b.useContext(Ab);if(s===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=s,i=b.useId();b.useEffect(()=>{t&&a(i)},[t]);const l=b.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,l]:[!0]}const Wg=t=>t.key||"";function YR(t){const s=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&s.push(n)}),s}const iT=typeof window<"u",k7=iT?b.useLayoutEffect:b.useEffect,ARe=({children:t,custom:s,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:l=!1})=>{const[o,c]=C7(l),d=b.useMemo(()=>YR(t),[t]),u=l&&!o?[]:d.map(Wg),m=b.useRef(!0),h=b.useRef(d),x=rT(()=>new Map),[p,f]=b.useState(d),[j,g]=b.useState(d);k7(()=>{m.current=!1,h.current=d;for(let w=0;w<j.length;w++){const N=Wg(j[w]);u.includes(N)?x.delete(N):x.get(N)!==!0&&x.set(N,!1)}},[j,u.length,u.join("-")]);const y=[];if(d!==p){let w=[...d];for(let N=0;N<j.length;N++){const S=j[N],k=Wg(S);u.includes(k)||(w.splice(N,0,S),y.push(S))}i==="wait"&&y.length&&(w=y),g(YR(w)),f(d);return}const{forceRender:v}=b.useContext(nT);return e.jsx(e.Fragment,{children:j.map(w=>{const N=Wg(w),S=l&&!o?!1:d===j||u.includes(N),k=()=>{if(x.has(N))x.set(N,!0);else return;let T=!0;x.forEach(C=>{C||(T=!1)}),T&&(v==null||v(),g(h.current),l&&(c==null||c()),r&&r())};return e.jsx(kRe,{isPresent:S,initial:!m.current||n?void 0:!1,custom:S?void 0:s,presenceAffectsLayout:a,mode:i,onExitComplete:S?void 0:k,children:w},N)})})},sa=t=>t;let P7=sa;function lT(t){let s;return()=>(s===void 0&&(s=t()),s)}const eh=(t,s,n)=>{const r=s-t;return r===0?1:(n-t)/r},Tl=t=>t*1e3,Dl=t=>t/1e3,TRe={useManualTiming:!1};function DRe(t){let s=new Set,n=new Set,r=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function o(d){i.has(d)&&(c.schedule(d),t()),d(l)}const c={schedule:(d,u=!1,m=!1)=>{const x=m&&r?s:n;return u&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(l=d,r){a=!0;return}r=!0,[s,n]=[n,s],s.forEach(o),s.clear(),r=!1,a&&(a=!1,c.process(d))}};return c}const Kg=["read","resolveKeyframes","update","preRender","render","postRender"],ERe=40;function A7(t,s){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,l=Kg.reduce((g,y)=>(g[y]=DRe(i),g),{}),{read:o,resolveKeyframes:c,update:d,preRender:u,render:m,postRender:h}=l,x=()=>{const g=performance.now();n=!1,a.delta=r?1e3/60:Math.max(Math.min(g-a.timestamp,ERe),1),a.timestamp=g,a.isProcessing=!0,o.process(a),c.process(a),d.process(a),u.process(a),m.process(a),h.process(a),a.isProcessing=!1,n&&s&&(r=!1,t(x))},p=()=>{n=!0,r=!0,a.isProcessing||t(x)};return{schedule:Kg.reduce((g,y)=>{const v=l[y];return g[y]=(w,N=!1,S=!1)=>(n||p(),v.schedule(w,N,S)),g},{}),cancel:g=>{for(let y=0;y<Kg.length;y++)l[Kg[y]].cancel(g)},state:a,steps:l}}const{schedule:qs,cancel:tc,state:Gn,steps:Dw}=A7(typeof requestAnimationFrame<"u"?requestAnimationFrame:sa,!0),T7=b.createContext({strict:!1}),QR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},th={};for(const t in QR)th[t]={isEnabled:s=>QR[t].some(n=>!!s[n])};function ORe(t){for(const s in t)th[s]={...th[s],...t[s]}}const MRe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nj(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||MRe.has(t)}let D7=t=>!Nj(t);function _Re(t){t&&(D7=s=>s.startsWith("on")?!Nj(s):t(s))}try{_Re(require("@emotion/is-prop-valid").default)}catch{}function RRe(t,s,n){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(D7(a)||n===!0&&Nj(a)||!s&&!Nj(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}function IRe(t){if(typeof Proxy>"u")return t;const s=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,a)=>a==="create"?t:(s.has(a)||s.set(a,t(a)),s.get(a))})}const Tb=b.createContext({});function rf(t){return typeof t=="string"||Array.isArray(t)}function Db(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const oT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cT=["initial",...oT];function Eb(t){return Db(t.animate)||cT.some(s=>rf(t[s]))}function E7(t){return!!(Eb(t)||t.variants)}function $Re(t,s){if(Eb(t)){const{initial:n,animate:r}=t;return{initial:n===!1||rf(n)?n:void 0,animate:rf(r)?r:void 0}}return t.inherit!==!1?s:{}}function FRe(t){const{initial:s,animate:n}=$Re(t,b.useContext(Tb));return b.useMemo(()=>({initial:s,animate:n}),[XR(s),XR(n)])}function XR(t){return Array.isArray(t)?t.join(" "):t}const LRe=Symbol.for("motionComponentSymbol");function Su(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function BRe(t,s,n){return b.useCallback(r=>{r&&t.onMount&&t.onMount(r),s&&(r?s.mount(r):s.unmount()),n&&(typeof n=="function"?n(r):Su(n)&&(n.current=r))},[s])}const dT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),VRe="framerAppearId",O7="data-"+dT(VRe),{schedule:uT}=A7(queueMicrotask,!1),M7=b.createContext({});function URe(t,s,n,r,a){var i,l;const{visualElement:o}=b.useContext(Tb),c=b.useContext(T7),d=b.useContext(Ab),u=b.useContext(aT).reducedMotion,m=b.useRef(null);r=r||c.renderer,!m.current&&r&&(m.current=r(t,{visualState:s,parent:o,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const h=m.current,x=b.useContext(M7);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&zRe(m.current,n,a,x);const p=b.useRef(!1);b.useInsertionEffect(()=>{h&&p.current&&h.update(n,d)});const f=n[O7],j=b.useRef(!!f&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,f))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,f)));return k7(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),uT.render(h.render),j.current&&h.animationState&&h.animationState.animateChanges())}),b.useEffect(()=>{h&&(!j.current&&h.animationState&&h.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,f)}),j.current=!1))}),h}function zRe(t,s,n,r){const{layoutId:a,layout:i,drag:l,dragConstraints:o,layoutScroll:c,layoutRoot:d}=s;t.projection=new n(t.latestValues,s["data-framer-portal-id"]?void 0:_7(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!l||o&&Su(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:d})}function _7(t){if(t)return t.options.allowProjection!==!1?t.projection:_7(t.parent)}function qRe({preloadedFeatures:t,createVisualElement:s,useRender:n,useVisualState:r,Component:a}){var i,l;t&&ORe(t);function o(d,u){let m;const h={...b.useContext(aT),...d,layoutId:HRe(d)},{isStatic:x}=h,p=FRe(d),f=r(d,x);if(!x&&iT){GRe();const j=WRe(h);m=j.MeasureLayout,p.visualElement=URe(a,f,h,s,j.ProjectionNode)}return e.jsxs(Tb.Provider,{value:p,children:[m&&p.visualElement?e.jsx(m,{visualElement:p.visualElement,...h}):null,n(a,d,BRe(f,p.visualElement,u),f,x,p.visualElement)]})}o.displayName=`motion.${typeof a=="string"?a:`create(${(l=(i=a.displayName)!==null&&i!==void 0?i:a.name)!==null&&l!==void 0?l:""})`}`;const c=b.forwardRef(o);return c[LRe]=a,c}function HRe({layoutId:t}){const s=b.useContext(nT).id;return s&&t!==void 0?s+"-"+t:t}function GRe(t,s){b.useContext(T7).strict}function WRe(t){const{drag:s,layout:n}=th;if(!s&&!n)return{};const r={...s,...n};return{MeasureLayout:s!=null&&s.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const KRe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mT(t){return typeof t!="string"||t.includes("-")?!1:!!(KRe.indexOf(t)>-1||/[A-Z]/u.test(t))}function ZR(t){const s=[{},{}];return t==null||t.values.forEach((n,r)=>{s[0][r]=n.get(),s[1][r]=n.getVelocity()}),s}function hT(t,s,n,r){if(typeof s=="function"){const[a,i]=ZR(r);s=s(n!==void 0?n:t.custom,a,i)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[a,i]=ZR(r);s=s(n!==void 0?n:t.custom,a,i)}return s}const pC=t=>Array.isArray(t),YRe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),QRe=t=>pC(t)?t[t.length-1]||0:t,rr=t=>!!(t&&t.getVelocity);function wv(t){const s=rr(t)?t.get():t;return YRe(s)?s.toValue():s}function XRe({scrapeMotionValuesFromProps:t,createRenderState:s,onUpdate:n},r,a,i){const l={latestValues:ZRe(r,a,i,t),renderState:s()};return n&&(l.onMount=o=>n({props:r,current:o,...l}),l.onUpdate=o=>n(o)),l}const R7=t=>(s,n)=>{const r=b.useContext(Tb),a=b.useContext(Ab),i=()=>XRe(t,s,r,a);return n?i():rT(i)};function ZRe(t,s,n,r){const a={},i=r(t,{});for(const h in i)a[h]=wv(i[h]);let{initial:l,animate:o}=t;const c=Eb(t),d=E7(t);s&&d&&!c&&t.inherit!==!1&&(l===void 0&&(l=s.initial),o===void 0&&(o=s.animate));let u=n?n.initial===!1:!1;u=u||l===!1;const m=u?o:l;if(m&&typeof m!="boolean"&&!Db(m)){const h=Array.isArray(m)?m:[m];for(let x=0;x<h.length;x++){const p=hT(t,h[x]);if(p){const{transitionEnd:f,transition:j,...g}=p;for(const y in g){let v=g[y];if(Array.isArray(v)){const w=u?v.length-1:0;v=v[w]}v!==null&&(a[y]=v)}for(const y in f)a[y]=f[y]}}}return a}const Dh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bd=new Set(Dh),I7=t=>s=>typeof s=="string"&&s.startsWith(t),$7=I7("--"),JRe=I7("var(--"),xT=t=>JRe(t)?e5e.test(t.split("/*")[0].trim()):!1,e5e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,F7=(t,s)=>s&&typeof t=="number"?s.transform(t):t,zl=(t,s,n)=>n>s?s:n<t?t:n,Eh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},af={...Eh,transform:t=>zl(0,1,t)},Yg={...Eh,default:1},Xf=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),no=Xf("deg"),zi=Xf("%"),Ct=Xf("px"),t5e=Xf("vh"),s5e=Xf("vw"),JR={...zi,parse:t=>zi.parse(t)/100,transform:t=>zi.transform(t*100)},n5e={borderWidth:Ct,borderTopWidth:Ct,borderRightWidth:Ct,borderBottomWidth:Ct,borderLeftWidth:Ct,borderRadius:Ct,radius:Ct,borderTopLeftRadius:Ct,borderTopRightRadius:Ct,borderBottomRightRadius:Ct,borderBottomLeftRadius:Ct,width:Ct,maxWidth:Ct,height:Ct,maxHeight:Ct,top:Ct,right:Ct,bottom:Ct,left:Ct,padding:Ct,paddingTop:Ct,paddingRight:Ct,paddingBottom:Ct,paddingLeft:Ct,margin:Ct,marginTop:Ct,marginRight:Ct,marginBottom:Ct,marginLeft:Ct,backgroundPositionX:Ct,backgroundPositionY:Ct},r5e={rotate:no,rotateX:no,rotateY:no,rotateZ:no,scale:Yg,scaleX:Yg,scaleY:Yg,scaleZ:Yg,skew:no,skewX:no,skewY:no,distance:Ct,translateX:Ct,translateY:Ct,translateZ:Ct,x:Ct,y:Ct,z:Ct,perspective:Ct,transformPerspective:Ct,opacity:af,originX:JR,originY:JR,originZ:Ct},e5={...Eh,transform:Math.round},pT={...n5e,...r5e,zIndex:e5,size:Ct,fillOpacity:af,strokeOpacity:af,numOctaves:e5},a5e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},i5e=Dh.length;function l5e(t,s,n){let r="",a=!0;for(let i=0;i<i5e;i++){const l=Dh[i],o=t[l];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(l.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const d=F7(o,pT[l]);if(!c){a=!1;const u=a5e[l]||l;r+=`${u}(${d}) `}n&&(s[l]=d)}}return r=r.trim(),n?r=n(s,a?"":r):a&&(r="none"),r}function fT(t,s,n){const{style:r,vars:a,transformOrigin:i}=t;let l=!1,o=!1;for(const c in s){const d=s[c];if(Bd.has(c)){l=!0;continue}else if($7(c)){a[c]=d;continue}else{const u=F7(d,pT[c]);c.startsWith("origin")?(o=!0,i[c]=u):r[c]=u}}if(s.transform||(l||n?r.transform=l5e(s,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;r.transformOrigin=`${c} ${d} ${u}`}}const o5e={offset:"stroke-dashoffset",array:"stroke-dasharray"},c5e={offset:"strokeDashoffset",array:"strokeDasharray"};function d5e(t,s,n=1,r=0,a=!0){t.pathLength=1;const i=a?o5e:c5e;t[i.offset]=Ct.transform(-r);const l=Ct.transform(s),o=Ct.transform(n);t[i.array]=`${l} ${o}`}function t5(t,s,n){return typeof t=="string"?t:Ct.transform(s+n*t)}function u5e(t,s,n){const r=t5(s,t.x,t.width),a=t5(n,t.y,t.height);return`${r} ${a}`}function gT(t,{attrX:s,attrY:n,attrScale:r,originX:a,originY:i,pathLength:l,pathSpacing:o=1,pathOffset:c=0,...d},u,m){if(fT(t,d,m),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:x,dimensions:p}=t;h.transform&&(p&&(x.transform=h.transform),delete h.transform),p&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=u5e(p,a!==void 0?a:.5,i!==void 0?i:.5)),s!==void 0&&(h.x=s),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),l!==void 0&&d5e(h,l,o,c,!1)}const vT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),L7=()=>({...vT(),attrs:{}}),yT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function B7(t,{style:s,vars:n},r,a){Object.assign(t.style,s,a&&a.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const V7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function U7(t,s,n,r){B7(t,s,void 0,r);for(const a in s.attrs)t.setAttribute(V7.has(a)?a:dT(a),s.attrs[a])}const wj={};function m5e(t){Object.assign(wj,t)}function z7(t,{layout:s,layoutId:n}){return Bd.has(t)||t.startsWith("origin")||(s||n!==void 0)&&(!!wj[t]||t==="opacity")}function jT(t,s,n){var r;const{style:a}=t,i={};for(const l in a)(rr(a[l])||s.style&&rr(s.style[l])||z7(l,t)||((r=n==null?void 0:n.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[l]=a[l]);return i}function q7(t,s,n){const r=jT(t,s,n);for(const a in t)if(rr(t[a])||rr(s[a])){const i=Dh.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=t[a]}return r}function h5e(t,s){try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}const s5=["x","y","width","height","cx","cy","r"],x5e={useVisualState:R7({scrapeMotionValuesFromProps:q7,createRenderState:L7,onUpdate:({props:t,prevProps:s,current:n,renderState:r,latestValues:a})=>{if(!n)return;let i=!!t.drag;if(!i){for(const o in a)if(Bd.has(o)){i=!0;break}}if(!i)return;let l=!s;if(s)for(let o=0;o<s5.length;o++){const c=s5[o];t[c]!==s[c]&&(l=!0)}l&&qs.read(()=>{h5e(n,r),qs.render(()=>{gT(r,a,yT(n.tagName),t.transformTemplate),U7(n,r)})})}})},p5e={useVisualState:R7({scrapeMotionValuesFromProps:jT,createRenderState:vT})};function H7(t,s,n){for(const r in s)!rr(s[r])&&!z7(r,n)&&(t[r]=s[r])}function f5e({transformTemplate:t},s){return b.useMemo(()=>{const n=vT();return fT(n,s,t),Object.assign({},n.vars,n.style)},[s])}function g5e(t,s){const n=t.style||{},r={};return H7(r,n,t),Object.assign(r,f5e(t,s)),r}function v5e(t,s){const n={},r=g5e(t,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function y5e(t,s,n,r){const a=b.useMemo(()=>{const i=L7();return gT(i,s,yT(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[s]);if(t.style){const i={};H7(i,t.style,t),a.style={...i,...a.style}}return a}function j5e(t=!1){return(n,r,a,{latestValues:i},l)=>{const c=(mT(n)?y5e:v5e)(r,i,l,n),d=RRe(r,typeof n=="string",t),u=n!==b.Fragment?{...d,...c,ref:a}:{},{children:m}=r,h=b.useMemo(()=>rr(m)?m.get():m,[m]);return b.createElement(n,{...u,children:h})}}function b5e(t,s){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...mT(r)?x5e:p5e,preloadedFeatures:t,useRender:j5e(a),createVisualElement:s,Component:r};return qRe(l)}}function G7(t,s){if(!Array.isArray(s))return!1;const n=s.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(s[r]!==t[r])return!1;return!0}function Ob(t,s,n){const r=t.getProps();return hT(r,s,n!==void 0?n:r.custom,t)}const N5e=lT(()=>window.ScrollTimeline!==void 0);class w5e{constructor(s){this.stop=()=>this.runAll("stop"),this.animations=s.filter(Boolean)}get finished(){return Promise.all(this.animations.map(s=>"finished"in s?s.finished:s))}getAll(s){return this.animations[0][s]}setAll(s,n){for(let r=0;r<this.animations.length;r++)this.animations[r][s]=n}attachTimeline(s,n){const r=this.animations.map(a=>{if(N5e()&&a.attachTimeline)return a.attachTimeline(s);if(typeof n=="function")return n(a)});return()=>{r.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(s){this.setAll("time",s)}get speed(){return this.getAll("speed")}set speed(s){this.setAll("speed",s)}get startTime(){return this.getAll("startTime")}get duration(){let s=0;for(let n=0;n<this.animations.length;n++)s=Math.max(s,this.animations[n].duration);return s}runAll(s){this.animations.forEach(n=>n[s]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class S5e extends w5e{then(s,n){return Promise.all(this.animations).then(s).catch(n)}}function bT(t,s){return t?t[s]||t.default||t:void 0}const fC=2e4;function W7(t){let s=0;const n=50;let r=t.next(s);for(;!r.done&&s<fC;)s+=n,r=t.next(s);return s>=fC?1/0:s}function NT(t){return typeof t=="function"}function n5(t,s){t.timeline=s,t.onfinish=null}const wT=t=>Array.isArray(t)&&typeof t[0]=="number",C5e={linearEasing:void 0};function k5e(t,s){const n=lT(t);return()=>{var r;return(r=C5e[s])!==null&&r!==void 0?r:n()}}const Sj=k5e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),K7=(t,s,n=10)=>{let r="";const a=Math.max(Math.round(s/n),2);for(let i=0;i<a;i++)r+=t(eh(0,a-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function Y7(t){return!!(typeof t=="function"&&Sj()||!t||typeof t=="string"&&(t in gC||Sj())||wT(t)||Array.isArray(t)&&t.every(Y7))}const fx=([t,s,n,r])=>`cubic-bezier(${t}, ${s}, ${n}, ${r})`,gC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fx([0,.65,.55,1]),circOut:fx([.55,0,1,.45]),backIn:fx([.31,.01,.66,-.59]),backOut:fx([.33,1.53,.69,.99])};function Q7(t,s){if(t)return typeof t=="function"&&Sj()?K7(t,s):wT(t)?fx(t):Array.isArray(t)?t.map(n=>Q7(n,s)||gC.easeOut):gC[t]}const za={x:!1,y:!1};function X7(){return za.x||za.y}function P5e(t,s,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const i=(r=void 0)!==null&&r!==void 0?r:a.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function Z7(t,s){const n=P5e(t),r=new AbortController,a={passive:!0,...s,signal:r.signal};return[n,a,()=>r.abort()]}function r5(t){return s=>{s.pointerType==="touch"||X7()||t(s)}}function A5e(t,s,n={}){const[r,a,i]=Z7(t,n),l=r5(o=>{const{target:c}=o,d=s(o);if(typeof d!="function"||!c)return;const u=r5(m=>{d(m),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,a)});return r.forEach(o=>{o.addEventListener("pointerenter",l,a)}),i}const J7=(t,s)=>s?t===s?!0:J7(t,s.parentElement):!1,ST=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,T5e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D5e(t){return T5e.has(t.tagName)||t.tabIndex!==-1}const gx=new WeakSet;function a5(t){return s=>{s.key==="Enter"&&t(s)}}function Ew(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const E5e=(t,s)=>{const n=t.currentTarget;if(!n)return;const r=a5(()=>{if(gx.has(n))return;Ew(n,"down");const a=a5(()=>{Ew(n,"up")}),i=()=>Ew(n,"cancel");n.addEventListener("keyup",a,s),n.addEventListener("blur",i,s)});n.addEventListener("keydown",r,s),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),s)};function i5(t){return ST(t)&&!X7()}function O5e(t,s,n={}){const[r,a,i]=Z7(t,n),l=o=>{const c=o.currentTarget;if(!i5(o)||gx.has(c))return;gx.add(c);const d=s(o),u=(x,p)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",h),!(!i5(x)||!gx.has(c))&&(gx.delete(c),typeof d=="function"&&d(x,{success:p}))},m=x=>{u(x,n.useGlobalTarget||J7(c,x.target))},h=x=>{u(x,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",h,a)};return r.forEach(o=>{!D5e(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",l,a),o.addEventListener("focus",d=>E5e(d,a),a)}),i}function M5e(t){return t==="x"||t==="y"?za[t]?null:(za[t]=!0,()=>{za[t]=!1}):za.x||za.y?null:(za.x=za.y=!0,()=>{za.x=za.y=!1})}const eH=new Set(["width","height","top","left","right","bottom",...Dh]);let Sv;function _5e(){Sv=void 0}const qi={now:()=>(Sv===void 0&&qi.set(Gn.isProcessing||TRe.useManualTiming?Gn.timestamp:performance.now()),Sv),set:t=>{Sv=t,queueMicrotask(_5e)}};function CT(t,s){t.indexOf(s)===-1&&t.push(s)}function kT(t,s){const n=t.indexOf(s);n>-1&&t.splice(n,1)}class PT{constructor(){this.subscriptions=[]}add(s){return CT(this.subscriptions,s),()=>kT(this.subscriptions,s)}notify(s,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](s,n,r);else for(let i=0;i<a;i++){const l=this.subscriptions[i];l&&l(s,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function tH(t,s){return s?t*(1e3/s):0}const l5=30,R5e=t=>!isNaN(parseFloat(t));class I5e{constructor(s,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{const i=qi.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(s),this.owner=n.owner}setCurrent(s){this.current=s,this.updatedAt=qi.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=R5e(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,n){this.events[s]||(this.events[s]=new PT);const r=this.events[s].add(n);return s==="change"?()=>{r(),qs.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,n){this.passiveEffect=s,this.stopPassiveEffect=n}set(s,n=!0){!n||!this.passiveEffect?this.updateAndNotify(s,n):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-r}jump(s,n=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=qi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>l5)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,l5);return tH(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(s){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=s(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lf(t,s){return new I5e(t,s)}function $5e(t,s,n){t.hasValue(s)?t.getValue(s).set(n):t.addValue(s,lf(n))}function F5e(t,s){const n=Ob(t,s);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const l in i){const o=QRe(i[l]);$5e(t,l,o)}}function L5e(t){return!!(rr(t)&&t.add)}function vC(t,s){const n=t.getValue("willChange");if(L5e(n))return n.add(s)}function sH(t){return t.props[O7]}const nH=(t,s,n)=>(((1-3*n+3*s)*t+(3*n-6*s))*t+3*s)*t,B5e=1e-7,V5e=12;function U5e(t,s,n,r,a){let i,l,o=0;do l=s+(n-s)/2,i=nH(l,r,a)-t,i>0?n=l:s=l;while(Math.abs(i)>B5e&&++o<V5e);return l}function Zf(t,s,n,r){if(t===s&&n===r)return sa;const a=i=>U5e(i,0,1,t,n);return i=>i===0||i===1?i:nH(a(i),s,r)}const rH=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,aH=t=>s=>1-t(1-s),iH=Zf(.33,1.53,.69,.99),AT=aH(iH),lH=rH(AT),oH=t=>(t*=2)<1?.5*AT(t):.5*(2-Math.pow(2,-10*(t-1))),TT=t=>1-Math.sin(Math.acos(t)),cH=aH(TT),dH=rH(TT),uH=t=>/^0[^.\s]+$/u.test(t);function z5e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uH(t):!0}const $x=t=>Math.round(t*1e5)/1e5,DT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function q5e(t){return t==null}const H5e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ET=(t,s)=>n=>!!(typeof n=="string"&&H5e.test(n)&&n.startsWith(t)||s&&!q5e(n)&&Object.prototype.hasOwnProperty.call(n,s)),mH=(t,s,n)=>r=>{if(typeof r!="string")return r;const[a,i,l,o]=r.match(DT);return{[t]:parseFloat(a),[s]:parseFloat(i),[n]:parseFloat(l),alpha:o!==void 0?parseFloat(o):1}},G5e=t=>zl(0,255,t),Ow={...Eh,transform:t=>Math.round(G5e(t))},Vc={test:ET("rgb","red"),parse:mH("red","green","blue"),transform:({red:t,green:s,blue:n,alpha:r=1})=>"rgba("+Ow.transform(t)+", "+Ow.transform(s)+", "+Ow.transform(n)+", "+$x(af.transform(r))+")"};function W5e(t){let s="",n="",r="",a="";return t.length>5?(s=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(s=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),s+=s,n+=n,r+=r,a+=a),{red:parseInt(s,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const yC={test:ET("#"),parse:W5e,transform:Vc.transform},Cu={test:ET("hsl","hue"),parse:mH("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+zi.transform($x(s))+", "+zi.transform($x(n))+", "+$x(af.transform(r))+")"},er={test:t=>Vc.test(t)||yC.test(t)||Cu.test(t),parse:t=>Vc.test(t)?Vc.parse(t):Cu.test(t)?Cu.parse(t):yC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Vc.transform(t):Cu.transform(t)},K5e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Y5e(t){var s,n;return isNaN(t)&&typeof t=="string"&&(((s=t.match(DT))===null||s===void 0?void 0:s.length)||0)+(((n=t.match(K5e))===null||n===void 0?void 0:n.length)||0)>0}const hH="number",xH="color",Q5e="var",X5e="var(",o5="${}",Z5e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function of(t){const s=t.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const o=s.replace(Z5e,c=>(er.test(c)?(r.color.push(i),a.push(xH),n.push(er.parse(c))):c.startsWith(X5e)?(r.var.push(i),a.push(Q5e),n.push(c)):(r.number.push(i),a.push(hH),n.push(parseFloat(c))),++i,o5)).split(o5);return{values:n,split:o,indexes:r,types:a}}function pH(t){return of(t).values}function fH(t){const{split:s,types:n}=of(t),r=s.length;return a=>{let i="";for(let l=0;l<r;l++)if(i+=s[l],a[l]!==void 0){const o=n[l];o===hH?i+=$x(a[l]):o===xH?i+=er.transform(a[l]):i+=a[l]}return i}}const J5e=t=>typeof t=="number"?0:t;function e6e(t){const s=pH(t);return fH(t)(s.map(J5e))}const sc={test:Y5e,parse:pH,createTransformer:fH,getAnimatableNone:e6e},t6e=new Set(["brightness","contrast","saturate","opacity"]);function s6e(t){const[s,n]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[r]=n.match(DT)||[];if(!r)return t;const a=n.replace(r,"");let i=t6e.has(s)?1:0;return r!==n&&(i*=100),s+"("+i+a+")"}const n6e=/\b([a-z-]*)\(.*?\)/gu,jC={...sc,getAnimatableNone:t=>{const s=t.match(n6e);return s?s.map(s6e).join(" "):t}},r6e={...pT,color:er,backgroundColor:er,outlineColor:er,fill:er,stroke:er,borderColor:er,borderTopColor:er,borderRightColor:er,borderBottomColor:er,borderLeftColor:er,filter:jC,WebkitFilter:jC},OT=t=>r6e[t];function gH(t,s){let n=OT(t);return n!==jC&&(n=sc),n.getAnimatableNone?n.getAnimatableNone(s):void 0}const a6e=new Set(["auto","none","0"]);function i6e(t,s,n){let r=0,a;for(;r<t.length&&!a;){const i=t[r];typeof i=="string"&&!a6e.has(i)&&of(i).values.length&&(a=t[r]),r++}if(a&&n)for(const i of s)t[i]=gH(n,a)}const c5=t=>t===Eh||t===Ct,d5=(t,s)=>parseFloat(t.split(", ")[s]),u5=(t,s)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/u);if(a)return d5(a[1],s);{const i=r.match(/^matrix\((.+)\)$/u);return i?d5(i[1],t):0}},l6e=new Set(["x","y","z"]),o6e=Dh.filter(t=>!l6e.has(t));function c6e(t){const s=[];return o6e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(s.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),s}const sh={width:({x:t},{paddingLeft:s="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),height:({y:t},{paddingTop:s="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:u5(4,13),y:u5(5,14)};sh.translateX=sh.x;sh.translateY=sh.y;const nd=new Set;let bC=!1,NC=!1;function vH(){if(NC){const t=Array.from(nd).filter(r=>r.needsMeasurement),s=new Set(t.map(r=>r.element)),n=new Map;s.forEach(r=>{const a=c6e(r);a.length&&(n.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),s.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,l])=>{var o;(o=r.getValue(i))===null||o===void 0||o.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}NC=!1,bC=!1,nd.forEach(t=>t.complete()),nd.clear()}function yH(){nd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(NC=!0)})}function d6e(){yH(),vH()}class MT{constructor(s,n,r,a,i,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...s],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(nd.add(this),bC||(bC=!0,qs.read(yH),qs.resolveKeyframes(vH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:n,element:r,motionValue:a}=this;for(let i=0;i<s.length;i++)if(s[i]===null)if(i===0){const l=a==null?void 0:a.get(),o=s[s.length-1];if(l!==void 0)s[0]=l;else if(r&&n){const c=r.readValue(n,o);c!=null&&(s[0]=c)}s[0]===void 0&&(s[0]=o),a&&l===void 0&&a.set(s[0])}else s[i]=s[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),nd.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,nd.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const jH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),u6e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m6e(t){const s=u6e.exec(t);if(!s)return[,];const[,n,r,a]=s;return[`--${n??r}`,a]}function bH(t,s,n=1){const[r,a]=m6e(t);if(!r)return;const i=window.getComputedStyle(s).getPropertyValue(r);if(i){const l=i.trim();return jH(l)?parseFloat(l):l}return xT(a)?bH(a,s,n+1):a}const NH=t=>s=>s.test(t),h6e={test:t=>t==="auto",parse:t=>t},wH=[Eh,Ct,zi,no,s5e,t5e,h6e],m5=t=>wH.find(NH(t));class SH extends MT{constructor(s,n,r,a,i){super(s,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<s.length;c++){let d=s[c];if(typeof d=="string"&&(d=d.trim(),xT(d))){const u=bH(d,n.current);u!==void 0&&(s[c]=u),c===s.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!eH.has(r)||s.length!==2)return;const[a,i]=s,l=m5(a),o=m5(i);if(l!==o)if(c5(l)&&c5(o))for(let c=0;c<s.length;c++){const d=s[c];typeof d=="string"&&(s[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:n}=this,r=[];for(let a=0;a<s.length;a++)z5e(s[a])&&r.push(a);r.length&&i6e(s,r,n)}measureInitialState(){const{element:s,unresolvedKeyframes:n,name:r}=this;if(!s||!s.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sh[r](s.measureViewportBox(),window.getComputedStyle(s.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&s.getValue(r,a).jump(a,!1)}measureEndState(){var s;const{element:n,name:r,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=sh[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((s=this.removedTransforms)===null||s===void 0)&&s.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const h5=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sc.test(t)||t==="0")&&!t.startsWith("url("));function x6e(t){const s=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}function p6e(t,s,n,r){const a=t[0];if(a===null)return!1;if(s==="display"||s==="visibility")return!0;const i=t[t.length-1],l=h5(a,s),o=h5(i,s);return!l||!o?!1:x6e(t)||(n==="spring"||NT(n))&&r}const f6e=t=>t!==null;function Mb(t,{repeat:s,repeatType:n="loop"},r){const a=t.filter(f6e),i=s&&n!=="loop"&&s%2===1?0:a.length-1;return!i||r===void 0?a[i]:r}const g6e=40;class CH{constructor({autoplay:s=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=qi.now(),this.options={autoplay:s,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:l,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>g6e?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&d6e(),this._resolved}onKeyframesResolved(s,n){this.resolvedAt=qi.now(),this.hasAttemptedResolve=!0;const{name:r,type:a,velocity:i,delay:l,onComplete:o,onUpdate:c,isGenerator:d}=this.options;if(!d&&!p6e(s,r,a,i))if(l)this.options.duration=0;else{c&&c(Mb(s,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(s,n);u!==!1&&(this._resolved={keyframes:s,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(s,n){return this.currentFinishedPromise.then(s,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(s=>{this.resolveFinishedPromise=s})}}const Qs=(t,s,n)=>t+(s-t)*n;function Mw(t,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(s-t)*6*n:n<1/2?s:n<2/3?t+(s-t)*(2/3-n)*6:t}function v6e({hue:t,saturation:s,lightness:n,alpha:r}){t/=360,s/=100,n/=100;let a=0,i=0,l=0;if(!s)a=i=l=n;else{const o=n<.5?n*(1+s):n+s-n*s,c=2*n-o;a=Mw(c,o,t+1/3),i=Mw(c,o,t),l=Mw(c,o,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:r}}function Cj(t,s){return n=>n>0?s:t}const _w=(t,s,n)=>{const r=t*t,a=n*(s*s-r)+r;return a<0?0:Math.sqrt(a)},y6e=[yC,Vc,Cu],j6e=t=>y6e.find(s=>s.test(t));function x5(t){const s=j6e(t);if(!s)return!1;let n=s.parse(t);return s===Cu&&(n=v6e(n)),n}const p5=(t,s)=>{const n=x5(t),r=x5(s);if(!n||!r)return Cj(t,s);const a={...n};return i=>(a.red=_w(n.red,r.red,i),a.green=_w(n.green,r.green,i),a.blue=_w(n.blue,r.blue,i),a.alpha=Qs(n.alpha,r.alpha,i),Vc.transform(a))},b6e=(t,s)=>n=>s(t(n)),Jf=(...t)=>t.reduce(b6e),wC=new Set(["none","hidden"]);function N6e(t,s){return wC.has(t)?n=>n<=0?t:s:n=>n>=1?s:t}function w6e(t,s){return n=>Qs(t,s,n)}function _T(t){return typeof t=="number"?w6e:typeof t=="string"?xT(t)?Cj:er.test(t)?p5:k6e:Array.isArray(t)?kH:typeof t=="object"?er.test(t)?p5:S6e:Cj}function kH(t,s){const n=[...t],r=n.length,a=t.map((i,l)=>_T(i)(i,s[l]));return i=>{for(let l=0;l<r;l++)n[l]=a[l](i);return n}}function S6e(t,s){const n={...t,...s},r={};for(const a in n)t[a]!==void 0&&s[a]!==void 0&&(r[a]=_T(t[a])(t[a],s[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function C6e(t,s){var n;const r=[],a={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const l=s.types[i],o=t.indexes[l][a[l]],c=(n=t.values[o])!==null&&n!==void 0?n:0;r[i]=c,a[l]++}return r}const k6e=(t,s)=>{const n=sc.createTransformer(s),r=of(t),a=of(s);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?wC.has(t)&&!a.values.length||wC.has(s)&&!r.values.length?N6e(t,s):Jf(kH(C6e(r,a),a.values),n):Cj(t,s)};function PH(t,s,n){return typeof t=="number"&&typeof s=="number"&&typeof n=="number"?Qs(t,s,n):_T(t)(t,s)}const P6e=5;function AH(t,s,n){const r=Math.max(s-P6e,0);return tH(n-t(r),s-r)}const tn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Rw=.001;function A6e({duration:t=tn.duration,bounce:s=tn.bounce,velocity:n=tn.velocity,mass:r=tn.mass}){let a,i,l=1-s;l=zl(tn.minDamping,tn.maxDamping,l),t=zl(tn.minDuration,tn.maxDuration,Dl(t)),l<1?(a=d=>{const u=d*l,m=u*t,h=u-n,x=SC(d,l),p=Math.exp(-m);return Rw-h/x*p},i=d=>{const m=d*l*t,h=m*n+n,x=Math.pow(l,2)*Math.pow(d,2)*t,p=Math.exp(-m),f=SC(Math.pow(d,2),l);return(-a(d)+Rw>0?-1:1)*((h-x)*p)/f}):(a=d=>{const u=Math.exp(-d*t),m=(d-n)*t+1;return-Rw+u*m},i=d=>{const u=Math.exp(-d*t),m=(n-d)*(t*t);return u*m});const o=5/t,c=D6e(a,i,o);if(t=Tl(t),isNaN(c))return{stiffness:tn.stiffness,damping:tn.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:l*2*Math.sqrt(r*d),duration:t}}}const T6e=12;function D6e(t,s,n){let r=n;for(let a=1;a<T6e;a++)r=r-t(r)/s(r);return r}function SC(t,s){return t*Math.sqrt(1-s*s)}const E6e=["duration","bounce"],O6e=["stiffness","damping","mass"];function f5(t,s){return s.some(n=>t[n]!==void 0)}function M6e(t){let s={velocity:tn.velocity,stiffness:tn.stiffness,damping:tn.damping,mass:tn.mass,isResolvedFromDuration:!1,...t};if(!f5(t,O6e)&&f5(t,E6e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*zl(.05,1,1-(t.bounce||0))*Math.sqrt(a);s={...s,mass:tn.mass,stiffness:a,damping:i}}else{const n=A6e(t);s={...s,...n,mass:tn.mass},s.isResolvedFromDuration=!0}return s}function TH(t=tn.visualDuration,s=tn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:m,velocity:h,isResolvedFromDuration:x}=M6e({...n,velocity:-Dl(n.velocity||0)}),p=h||0,f=d/(2*Math.sqrt(c*u)),j=l-i,g=Dl(Math.sqrt(c/u)),y=Math.abs(j)<5;r||(r=y?tn.restSpeed.granular:tn.restSpeed.default),a||(a=y?tn.restDelta.granular:tn.restDelta.default);let v;if(f<1){const N=SC(g,f);v=S=>{const k=Math.exp(-f*g*S);return l-k*((p+f*g*j)/N*Math.sin(N*S)+j*Math.cos(N*S))}}else if(f===1)v=N=>l-Math.exp(-g*N)*(j+(p+g*j)*N);else{const N=g*Math.sqrt(f*f-1);v=S=>{const k=Math.exp(-f*g*S),T=Math.min(N*S,300);return l-k*((p+f*g*j)*Math.sinh(T)+N*j*Math.cosh(T))/N}}const w={calculatedDuration:x&&m||null,next:N=>{const S=v(N);if(x)o.done=N>=m;else{let k=0;f<1&&(k=N===0?Tl(p):AH(v,N,S));const T=Math.abs(k)<=r,C=Math.abs(l-S)<=a;o.done=T&&C}return o.value=o.done?l:S,o},toString:()=>{const N=Math.min(W7(w),fC),S=K7(k=>w.next(N*k).value,N,30);return N+"ms "+S}};return w}function g5({keyframes:t,velocity:s=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:o,max:c,restDelta:d=.5,restSpeed:u}){const m=t[0],h={done:!1,value:m},x=T=>o!==void 0&&T<o||c!==void 0&&T>c,p=T=>o===void 0?c:c===void 0||Math.abs(o-T)<Math.abs(c-T)?o:c;let f=n*s;const j=m+f,g=l===void 0?j:l(j);g!==j&&(f=g-m);const y=T=>-f*Math.exp(-T/r),v=T=>g+y(T),w=T=>{const C=y(T),P=v(T);h.done=Math.abs(C)<=d,h.value=h.done?g:P};let N,S;const k=T=>{x(h.value)&&(N=T,S=TH({keyframes:[h.value,p(h.value)],velocity:AH(v,T,h.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return k(0),{calculatedDuration:null,next:T=>{let C=!1;return!S&&N===void 0&&(C=!0,w(T),k(T)),N!==void 0&&T>=N?S.next(T-N):(!C&&w(T),h)}}}const _6e=Zf(.42,0,1,1),R6e=Zf(0,0,.58,1),DH=Zf(.42,0,.58,1),I6e=t=>Array.isArray(t)&&typeof t[0]!="number",$6e={linear:sa,easeIn:_6e,easeInOut:DH,easeOut:R6e,circIn:TT,circInOut:dH,circOut:cH,backIn:AT,backInOut:lH,backOut:iH,anticipate:oH},v5=t=>{if(wT(t)){P7(t.length===4);const[s,n,r,a]=t;return Zf(s,n,r,a)}else if(typeof t=="string")return $6e[t];return t};function F6e(t,s,n){const r=[],a=n||PH,i=t.length-1;for(let l=0;l<i;l++){let o=a(t[l],t[l+1]);if(s){const c=Array.isArray(s)?s[l]||sa:s;o=Jf(c,o)}r.push(o)}return r}function L6e(t,s,{clamp:n=!0,ease:r,mixer:a}={}){const i=t.length;if(P7(i===s.length),i===1)return()=>s[0];if(i===2&&s[0]===s[1])return()=>s[1];const l=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),s=[...s].reverse());const o=F6e(s,r,a),c=o.length,d=u=>{if(l&&u<t[0])return s[0];let m=0;if(c>1)for(;m<t.length-2&&!(u<t[m+1]);m++);const h=eh(t[m],t[m+1],u);return o[m](h)};return n?u=>d(zl(t[0],t[i-1],u)):d}function B6e(t,s){const n=t[t.length-1];for(let r=1;r<=s;r++){const a=eh(0,s,r);t.push(Qs(n,1,a))}}function V6e(t){const s=[0];return B6e(s,t.length-1),s}function U6e(t,s){return t.map(n=>n*s)}function z6e(t,s){return t.map(()=>s||DH).splice(0,t.length-1)}function kj({duration:t=300,keyframes:s,times:n,ease:r="easeInOut"}){const a=I6e(r)?r.map(v5):v5(r),i={done:!1,value:s[0]},l=U6e(n&&n.length===s.length?n:V6e(s),t),o=L6e(l,s,{ease:Array.isArray(a)?a:z6e(s,a)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const q6e=t=>{const s=({timestamp:n})=>t(n);return{start:()=>qs.update(s,!0),stop:()=>tc(s),now:()=>Gn.isProcessing?Gn.timestamp:qi.now()}},H6e={decay:g5,inertia:g5,tween:kj,keyframes:kj,spring:TH},G6e=t=>t/100;class RT extends CH{constructor(s){super(s),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:a,keyframes:i}=this.options,l=(a==null?void 0:a.KeyframeResolver)||MT,o=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new l(i,o,n,r,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(s){const{type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:l=0}=this.options,o=NT(n)?n:H6e[n]||kj;let c,d;o!==kj&&typeof s[0]!="number"&&(c=Jf(G6e,PH(s[0],s[1])),s=[0,100]);const u=o({...this.options,keyframes:s});i==="mirror"&&(d=o({...this.options,keyframes:[...s].reverse(),velocity:-l})),u.calculatedDuration===null&&(u.calculatedDuration=W7(u));const{calculatedDuration:m}=u,h=m+a,x=h*(r+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:h,totalDuration:x}}onPostResolved(){const{autoplay:s=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!s?this.pause():this.state=this.pendingPlayState}tick(s,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:l,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:m}=r;if(this.startTime===null)return i.next(0);const{delay:h,repeat:x,repeatType:p,repeatDelay:f,onUpdate:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-u/this.speed,this.startTime)),n?this.currentTime=s:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(s-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let v=this.currentTime,w=i;if(x){const T=Math.min(this.currentTime,u)/m;let C=Math.floor(T),P=T%1;!P&&T>=1&&(P=1),P===1&&C--,C=Math.min(C,x+1),!!(C%2)&&(p==="reverse"?(P=1-P,f&&(P-=f/m)):p==="mirror"&&(w=l)),v=zl(0,1,P)*m}const N=y?{done:!1,value:c[0]}:w.next(v);o&&(N.value=o(N.value));let{done:S}=N;!y&&d!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return k&&a!==void 0&&(N.value=Mb(c,this.options,a)),j&&j(N.value),k&&this.finish(),N}get duration(){const{resolved:s}=this;return s?Dl(s.calculatedDuration):0}get time(){return Dl(this.currentTime)}set time(s){s=Tl(s),this.currentTime=s,this.holdTime!==null||this.speed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.speed)}get speed(){return this.playbackSpeed}set speed(s){const n=this.playbackSpeed!==s;this.playbackSpeed=s,n&&(this.time=Dl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:s=q6e,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var s;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(s=this.currentTime)!==null&&s!==void 0?s:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:s}=this.options;s&&s()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}}const W6e=new Set(["opacity","clipPath","filter","transform"]);function K6e(t,s,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:l="loop",ease:o="easeInOut",times:c}={}){const d={[s]:n};c&&(d.offset=c);const u=Q7(o,a);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:r,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"})}const Y6e=lT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Pj=10,Q6e=2e4;function X6e(t){return NT(t.type)||t.type==="spring"||!Y7(t.ease)}function Z6e(t,s){const n=new RT({...s,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const a=[];let i=0;for(;!r.done&&i<Q6e;)r=n.sample(i),a.push(r.value),i+=Pj;return{times:void 0,keyframes:a,duration:i-Pj,ease:"linear"}}const EH={anticipate:oH,backInOut:lH,circInOut:dH};function J6e(t){return t in EH}class y5 extends CH{constructor(s){super(s);const{name:n,motionValue:r,element:a,keyframes:i}=this.options;this.resolver=new SH(i,(l,o)=>this.onKeyframesResolved(l,o),n,r,a),this.resolver.scheduleResolve()}initPlayback(s,n){let{duration:r=300,times:a,ease:i,type:l,motionValue:o,name:c,startTime:d}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof i=="string"&&Sj()&&J6e(i)&&(i=EH[i]),X6e(this.options)){const{onComplete:m,onUpdate:h,motionValue:x,element:p,...f}=this.options,j=Z6e(s,f);s=j.keyframes,s.length===1&&(s[1]=s[0]),r=j.duration,a=j.times,i=j.ease,l="keyframes"}const u=K6e(o.owner.current,c,s,{...this.options,duration:r,times:a,ease:i});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(n5(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:m}=this.options;o.set(Mb(s,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:a,type:l,ease:i,keyframes:s}}get duration(){const{resolved:s}=this;if(!s)return 0;const{duration:n}=s;return Dl(n)}get time(){const{resolved:s}=this;if(!s)return 0;const{animation:n}=s;return Dl(n.currentTime||0)}set time(s){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Tl(s)}get speed(){const{resolved:s}=this;if(!s)return 1;const{animation:n}=s;return n.playbackRate}set speed(s){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=s}get state(){const{resolved:s}=this;if(!s)return"idle";const{animation:n}=s;return n.playState}get startTime(){const{resolved:s}=this;if(!s)return null;const{animation:n}=s;return n.startTime}attachTimeline(s){if(!this._resolved)this.pendingTimeline=s;else{const{resolved:n}=this;if(!n)return sa;const{animation:r}=n;n5(r,s)}return sa}play(){if(this.isStopped)return;const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:s}=this;if(!s)return;const{animation:n,keyframes:r,duration:a,type:i,ease:l,times:o}=s;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:m,element:h,...x}=this.options,p=new RT({...x,keyframes:r,duration:a,type:i,ease:l,times:o,isGenerator:!0}),f=Tl(this.time);d.setWithVelocity(p.sample(f-Pj).value,p.sample(f).value,Pj)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:s}=this;s&&s.animation.finish()}cancel(){const{resolved:s}=this;s&&s.animation.cancel()}static supports(s){const{motionValue:n,name:r,repeatDelay:a,repeatType:i,damping:l,type:o}=s;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=n.owner.getProps();return Y6e()&&r&&W6e.has(r)&&!c&&!d&&!a&&i!=="mirror"&&l!==0&&o!=="inertia"}}const eIe={type:"spring",stiffness:500,damping:25,restSpeed:10},tIe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),sIe={type:"keyframes",duration:.8},nIe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rIe=(t,{keyframes:s})=>s.length>2?sIe:Bd.has(t)?t.startsWith("scale")?tIe(s[1]):eIe:nIe;function aIe({when:t,delay:s,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:o,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const IT=(t,s,n,r={},a,i)=>l=>{const o=bT(r,t)||{},c=o.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Tl(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:s.getVelocity(),...o,delay:-d,onUpdate:h=>{s.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{l(),o.onComplete&&o.onComplete()},name:t,motionValue:s,element:i?void 0:a};aIe(o)||(u={...u,...rIe(t,u)}),u.duration&&(u.duration=Tl(u.duration)),u.repeatDelay&&(u.repeatDelay=Tl(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(m=!0)),m&&!i&&s.get()!==void 0){const h=Mb(u.keyframes,o);if(h!==void 0)return qs.update(()=>{u.onUpdate(h),u.onComplete()}),new S5e([])}return!i&&y5.supports(u)?new y5(u):new RT(u)};function iIe({protectedKeys:t,needsAnimating:s},n){const r=t.hasOwnProperty(n)&&s[n]!==!0;return s[n]=!1,r}function OH(t,s,{delay:n=0,transitionOverride:r,type:a}={}){var i;let{transition:l=t.getDefaultTransition(),transitionEnd:o,...c}=s;r&&(l=r);const d=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const m in c){const h=t.getValue(m,(i=t.latestValues[m])!==null&&i!==void 0?i:null),x=c[m];if(x===void 0||u&&iIe(u,m))continue;const p={delay:n,...bT(l||{},m)};let f=!1;if(window.MotionHandoffAnimation){const g=sH(t);if(g){const y=window.MotionHandoffAnimation(g,m,qs);y!==null&&(p.startTime=y,f=!0)}}vC(t,m),h.start(IT(m,h,x,t.shouldReduceMotion&&eH.has(m)?{type:!1}:p,t,f));const j=h.animation;j&&d.push(j)}return o&&Promise.all(d).then(()=>{qs.update(()=>{o&&F5e(t,o)})}),d}function CC(t,s,n={}){var r;const a=Ob(t,s,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(i=n.transitionOverride);const l=a?()=>Promise.all(OH(t,a,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:m,staggerDirection:h}=i;return lIe(t,s,u+d,m,h,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[l,o]:[o,l];return d().then(()=>u())}else return Promise.all([l(),o(n.delay)])}function lIe(t,s,n=0,r=0,a=1,i){const l=[],o=(t.variantChildren.size-1)*r,c=a===1?(d=0)=>d*r:(d=0)=>o-d*r;return Array.from(t.variantChildren).sort(oIe).forEach((d,u)=>{d.notify("AnimationStart",s),l.push(CC(d,s,{...i,delay:n+c(u)}).then(()=>d.notify("AnimationComplete",s)))}),Promise.all(l)}function oIe(t,s){return t.sortNodePosition(s)}function cIe(t,s,n={}){t.notify("AnimationStart",s);let r;if(Array.isArray(s)){const a=s.map(i=>CC(t,i,n));r=Promise.all(a)}else if(typeof s=="string")r=CC(t,s,n);else{const a=typeof s=="function"?Ob(t,s,n.custom):s;r=Promise.all(OH(t,a,n))}return r.then(()=>{t.notify("AnimationComplete",s)})}const dIe=cT.length;function MH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?MH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const s={};for(let n=0;n<dIe;n++){const r=cT[n],a=t.props[r];(rf(a)||a===!1)&&(s[r]=a)}return s}const uIe=[...oT].reverse(),mIe=oT.length;function hIe(t){return s=>Promise.all(s.map(({animation:n,options:r})=>cIe(t,n,r)))}function xIe(t){let s=hIe(t),n=j5(),r=!0;const a=c=>(d,u)=>{var m;const h=Ob(t,u,c==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(h){const{transition:x,transitionEnd:p,...f}=h;d={...d,...f,...p}}return d};function i(c){s=c(t)}function l(c){const{props:d}=t,u=MH(t.parent)||{},m=[],h=new Set;let x={},p=1/0;for(let j=0;j<mIe;j++){const g=uIe[j],y=n[g],v=d[g]!==void 0?d[g]:u[g],w=rf(v),N=g===c?y.isActive:null;N===!1&&(p=j);let S=v===u[g]&&v!==d[g]&&w;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...x},!y.isActive&&N===null||!v&&!y.prevProp||Db(v)||typeof v=="boolean")continue;const k=pIe(y.prevProp,v);let T=k||g===c&&y.isActive&&!S&&w||j>p&&w,C=!1;const P=Array.isArray(v)?v:[v];let $=P.reduce(a(g),{});N===!1&&($={});const{prevResolvedValues:V={}}=y,I={...V,...$},_=Y=>{T=!0,h.has(Y)&&(C=!0,h.delete(Y)),y.needsAnimating[Y]=!0;const O=t.getValue(Y);O&&(O.liveStyle=!1)};for(const Y in I){const O=$[Y],R=V[Y];if(x.hasOwnProperty(Y))continue;let q=!1;pC(O)&&pC(R)?q=!G7(O,R):q=O!==R,q?O!=null?_(Y):h.add(Y):O!==void 0&&h.has(Y)?_(Y):y.protectedKeys[Y]=!0}y.prevProp=v,y.prevResolvedValues=$,y.isActive&&(x={...x,...$}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(S&&k)||C)&&m.push(...P.map(Y=>({animation:Y,options:{type:g}})))}if(h.size){const j={};h.forEach(g=>{const y=t.getBaseTarget(g),v=t.getValue(g);v&&(v.liveStyle=!0),j[g]=y??null}),m.push({animation:j})}let f=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(f=!1),r=!1,f?s(m):Promise.resolve()}function o(c,d){var u;if(n[c].isActive===d)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var x;return(x=h.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),n[c].isActive=d;const m=l(c);for(const h in n)n[h].protectedKeys={};return m}return{animateChanges:l,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=j5(),r=!0}}}function pIe(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!G7(s,t):!1}function jc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function j5(){return{animate:jc(!0),whileInView:jc(),whileHover:jc(),whileTap:jc(),whileDrag:jc(),whileFocus:jc(),exit:jc()}}class xc{constructor(s){this.isMounted=!1,this.node=s}update(){}}class fIe extends xc{constructor(s){super(s),s.animationState||(s.animationState=xIe(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Db(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:n}=this.node.prevProps||{};s!==n&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)===null||s===void 0||s.call(this)}}let gIe=0;class vIe extends xc{constructor(){super(...arguments),this.id=gIe++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===r)return;const a=this.node.animationState.setActive("exit",!s);n&&!s&&a.then(()=>n(this.id))}mount(){const{register:s}=this.node.presenceContext||{};s&&(this.unmount=s(this.id))}unmount(){}}const yIe={animation:{Feature:fIe},exit:{Feature:vIe}};function cf(t,s,n,r={passive:!0}){return t.addEventListener(s,n,r),()=>t.removeEventListener(s,n)}function eg(t){return{point:{x:t.pageX,y:t.pageY}}}const jIe=t=>s=>ST(s)&&t(s,eg(s));function Fx(t,s,n,r){return cf(t,s,jIe(n),r)}const b5=(t,s)=>Math.abs(t-s);function bIe(t,s){const n=b5(t.x,s.x),r=b5(t.y,s.y);return Math.sqrt(n**2+r**2)}class _H{constructor(s,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=$w(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,x=bIe(m.offset,{x:0,y:0})>=3;if(!h&&!x)return;const{point:p}=m,{timestamp:f}=Gn;this.history.push({...p,timestamp:f});const{onStart:j,onMove:g}=this.handlers;h||(j&&j(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,m)},this.handlePointerMove=(m,h)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Iw(h,this.transformPagePoint),qs.update(this.updatePoint,!0)},this.handlePointerUp=(m,h)=>{this.end();const{onEnd:x,onSessionEnd:p,resumeAnimation:f}=this.handlers;if(this.dragSnapToOrigin&&f&&f(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=$w(m.type==="pointercancel"?this.lastMoveEventInfo:Iw(h,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,j),p&&p(m,j)},!ST(s))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const l=eg(s),o=Iw(l,this.transformPagePoint),{point:c}=o,{timestamp:d}=Gn;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=n;u&&u(s,$w(o,this.history)),this.removeListeners=Jf(Fx(this.contextWindow,"pointermove",this.handlePointerMove),Fx(this.contextWindow,"pointerup",this.handlePointerUp),Fx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),tc(this.updatePoint)}}function Iw(t,s){return s?{point:s(t.point)}:t}function N5(t,s){return{x:t.x-s.x,y:t.y-s.y}}function $w({point:t},s){return{point:t,delta:N5(t,RH(s)),offset:N5(t,NIe(s)),velocity:wIe(s,.1)}}function NIe(t){return t[0]}function RH(t){return t[t.length-1]}function wIe(t,s){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const a=RH(t);for(;n>=0&&(r=t[n],!(a.timestamp-r.timestamp>Tl(s)));)n--;if(!r)return{x:0,y:0};const i=Dl(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const l={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const IH=1e-4,SIe=1-IH,CIe=1+IH,$H=.01,kIe=0-$H,PIe=0+$H;function ia(t){return t.max-t.min}function AIe(t,s,n){return Math.abs(t-s)<=n}function w5(t,s,n,r=.5){t.origin=r,t.originPoint=Qs(s.min,s.max,t.origin),t.scale=ia(n)/ia(s),t.translate=Qs(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SIe&&t.scale<=CIe||isNaN(t.scale))&&(t.scale=1),(t.translate>=kIe&&t.translate<=PIe||isNaN(t.translate))&&(t.translate=0)}function Lx(t,s,n,r){w5(t.x,s.x,n.x,r?r.originX:void 0),w5(t.y,s.y,n.y,r?r.originY:void 0)}function S5(t,s,n){t.min=n.min+s.min,t.max=t.min+ia(s)}function TIe(t,s,n){S5(t.x,s.x,n.x),S5(t.y,s.y,n.y)}function C5(t,s,n){t.min=s.min-n.min,t.max=t.min+ia(s)}function Bx(t,s,n){C5(t.x,s.x,n.x),C5(t.y,s.y,n.y)}function DIe(t,{min:s,max:n},r){return s!==void 0&&t<s?t=r?Qs(s,t,r.min):Math.max(t,s):n!==void 0&&t>n&&(t=r?Qs(n,t,r.max):Math.min(t,n)),t}function k5(t,s,n){return{min:s!==void 0?t.min+s:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function EIe(t,{top:s,left:n,bottom:r,right:a}){return{x:k5(t.x,n,a),y:k5(t.y,s,r)}}function P5(t,s){let n=s.min-t.min,r=s.max-t.max;return s.max-s.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function OIe(t,s){return{x:P5(t.x,s.x),y:P5(t.y,s.y)}}function MIe(t,s){let n=.5;const r=ia(t),a=ia(s);return a>r?n=eh(s.min,s.max-r,t.min):r>a&&(n=eh(t.min,t.max-a,s.min)),zl(0,1,n)}function _Ie(t,s){const n={};return s.min!==void 0&&(n.min=s.min-t.min),s.max!==void 0&&(n.max=s.max-t.min),n}const kC=.35;function RIe(t=kC){return t===!1?t=0:t===!0&&(t=kC),{x:A5(t,"left","right"),y:A5(t,"top","bottom")}}function A5(t,s,n){return{min:T5(t,s),max:T5(t,n)}}function T5(t,s){return typeof t=="number"?t:t[s]||0}const D5=()=>({translate:0,scale:1,origin:0,originPoint:0}),ku=()=>({x:D5(),y:D5()}),E5=()=>({min:0,max:0}),un=()=>({x:E5(),y:E5()});function pa(t){return[t("x"),t("y")]}function FH({top:t,left:s,right:n,bottom:r}){return{x:{min:s,max:n},y:{min:t,max:r}}}function IIe({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function $Ie(t,s){if(!s)return t;const n=s({x:t.left,y:t.top}),r=s({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Fw(t){return t===void 0||t===1}function PC({scale:t,scaleX:s,scaleY:n}){return!Fw(t)||!Fw(s)||!Fw(n)}function Pc(t){return PC(t)||LH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function LH(t){return O5(t.x)||O5(t.y)}function O5(t){return t&&t!=="0%"}function Aj(t,s,n){const r=t-n,a=s*r;return n+a}function M5(t,s,n,r,a){return a!==void 0&&(t=Aj(t,a,r)),Aj(t,n,r)+s}function AC(t,s=0,n=1,r,a){t.min=M5(t.min,s,n,r,a),t.max=M5(t.max,s,n,r,a)}function BH(t,{x:s,y:n}){AC(t.x,s.translate,s.scale,s.originPoint),AC(t.y,n.translate,n.scale,n.originPoint)}const _5=.999999999999,R5=1.0000000000001;function FIe(t,s,n,r=!1){const a=n.length;if(!a)return;s.x=s.y=1;let i,l;for(let o=0;o<a;o++){i=n[o],l=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Au(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(s.x*=l.x.scale,s.y*=l.y.scale,BH(t,l)),r&&Pc(i.latestValues)&&Au(t,i.latestValues))}s.x<R5&&s.x>_5&&(s.x=1),s.y<R5&&s.y>_5&&(s.y=1)}function Pu(t,s){t.min=t.min+s,t.max=t.max+s}function I5(t,s,n,r,a=.5){const i=Qs(t.min,t.max,a);AC(t,s,n,i,r)}function Au(t,s){I5(t.x,s.x,s.scaleX,s.scale,s.originX),I5(t.y,s.y,s.scaleY,s.scale,s.originY)}function VH(t,s){return FH($Ie(t.getBoundingClientRect(),s))}function LIe(t,s,n){const r=VH(t,n),{scroll:a}=s;return a&&(Pu(r.x,a.offset.x),Pu(r.y,a.offset.y)),r}const UH=({current:t})=>t?t.ownerDocument.defaultView:null,BIe=new WeakMap;class VIe{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=un(),this.visualElement=s}start(s,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(eg(u).point)},i=(u,m)=>{const{drag:h,dragPropagation:x,onDragStart:p}=this.getProps();if(h&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=M5e(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pa(j=>{let g=this.getAxisMotionValue(j).get()||0;if(zi.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[j];v&&(g=ia(v)*(parseFloat(g)/100))}}this.originPoint[j]=g}),p&&qs.postRender(()=>p(u,m)),vC(this.visualElement,"transform");const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},l=(u,m)=>{const{dragPropagation:h,dragDirectionLock:x,onDirectionLock:p,onDrag:f}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:j}=m;if(x&&this.currentDirection===null){this.currentDirection=UIe(j),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",m.point,j),this.updateAxis("y",m.point,j),this.visualElement.render(),f&&f(u,m)},o=(u,m)=>this.stop(u,m),c=()=>pa(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new _H(s,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:UH(this.visualElement)})}stop(s,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&qs.postRender(()=>i(s,n))}cancel(){this.isDragging=!1;const{projection:s,animationState:n}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(s,n,r){const{drag:a}=this.getProps();if(!r||!Qg(s,a,this.currentDirection))return;const i=this.getAxisMotionValue(s);let l=this.originPoint[s]+r[s];this.constraints&&this.constraints[s]&&(l=DIe(l,this.constraints[s],this.elastic[s])),i.set(l)}resolveConstraints(){var s;const{dragConstraints:n,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)===null||s===void 0?void 0:s.layout,i=this.constraints;n&&Su(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=EIe(a.layoutBox,n):this.constraints=!1,this.elastic=RIe(r),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&pa(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=_Ie(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:n}=this.getProps();if(!s||!Su(s))return!1;const r=s.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=LIe(r,a.root,this.visualElement.getTransformPagePoint());let l=OIe(a.layout.layoutBox,i);if(n){const o=n(IIe(l));this.hasMutatedConstraints=!!o,o&&(l=FH(o))}return l}startAnimation(s){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=pa(u=>{if(!Qg(u,n,this.currentDirection))return;let m=c&&c[u]||{};l&&(m={min:0,max:0});const h=a?200:1e6,x=a?40:1e7,p={type:"inertia",velocity:r?s[u]:0,bounceStiffness:h,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,p)});return Promise.all(d).then(o)}startAxisValueAnimation(s,n){const r=this.getAxisMotionValue(s);return vC(this.visualElement,s),r.start(IT(s,r,0,n,this.visualElement,!1))}stopAnimation(){pa(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){pa(s=>{var n;return(n=this.getAxisMotionValue(s).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(s){var n;return(n=this.getAxisMotionValue(s).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(s){const n=`_drag${s.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(s,(r.initial?r.initial[s]:void 0)||0)}snapToCursor(s){pa(n=>{const{drag:r}=this.getProps();if(!Qg(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:l,max:o}=a.layout.layoutBox[n];i.set(s[n]-Qs(l,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Su(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};pa(l=>{const o=this.getAxisMotionValue(l);if(o&&this.constraints!==!1){const c=o.get();a[l]=MIe({min:c,max:c},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),pa(l=>{if(!Qg(l,s,null))return;const o=this.getAxisMotionValue(l),{min:c,max:d}=this.constraints[l];o.set(Qs(c,d,a[l]))})}addListeners(){if(!this.visualElement.current)return;BIe.set(this.visualElement,this);const s=this.visualElement.current,n=Fx(s,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Su(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),qs.read(r);const l=cf(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(pa(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{l(),n(),i(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:l=kC,dragMomentum:o=!0}=s;return{...s,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:l,dragMomentum:o}}}function Qg(t,s,n){return(s===!0||s===t)&&(n===null||n===t)}function UIe(t,s=10){let n=null;return Math.abs(t.y)>s?n="y":Math.abs(t.x)>s&&(n="x"),n}class zIe extends xc{constructor(s){super(s),this.removeGroupControls=sa,this.removeListeners=sa,this.controls=new VIe(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||sa}unmount(){this.removeGroupControls(),this.removeListeners()}}const $5=t=>(s,n)=>{t&&qs.postRender(()=>t(s,n))};class qIe extends xc{constructor(){super(...arguments),this.removePointerDownListener=sa}onPointerDown(s){this.session=new _H(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UH(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:$5(s),onStart:$5(n),onMove:r,onEnd:(i,l)=>{delete this.session,a&&qs.postRender(()=>a(i,l))}}}mount(){this.removePointerDownListener=Fx(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function F5(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const nx={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(Ct.test(t))t=parseFloat(t);else return t;const n=F5(t,s.target.x),r=F5(t,s.target.y);return`${n}% ${r}%`}},HIe={correct:(t,{treeScale:s,projectionDelta:n})=>{const r=t,a=sc.parse(t);if(a.length>5)return r;const i=sc.createTransformer(t),l=typeof a[0]!="number"?1:0,o=n.x.scale*s.x,c=n.y.scale*s.y;a[0+l]/=o,a[1+l]/=c;const d=Qs(o,c,.5);return typeof a[2+l]=="number"&&(a[2+l]/=d),typeof a[3+l]=="number"&&(a[3+l]/=d),i(a)}};class GIe extends b.Component{componentDidMount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=s;m5e(WIe),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Cv.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,l=r.projection;return l&&(l.isPresent=i,a||s.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),s.isPresent!==i&&(i?l.promote():l.relegate()||qs.postRender(()=>{const o=l.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),uT.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=s;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function zH(t){const[s,n]=C7(),r=b.useContext(nT);return e.jsx(GIe,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(M7),isPresent:s,safeToRemove:n})}const WIe={borderRadius:{...nx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nx,borderTopRightRadius:nx,borderBottomLeftRadius:nx,borderBottomRightRadius:nx,boxShadow:HIe};function KIe(t,s,n){const r=rr(t)?t:lf(t);return r.start(IT("",r,s,n)),r.animation}function YIe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const QIe=(t,s)=>t.depth-s.depth;class XIe{constructor(){this.children=[],this.isDirty=!1}add(s){CT(this.children,s),this.isDirty=!0}remove(s){kT(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(QIe),this.isDirty=!1,this.children.forEach(s)}}function ZIe(t,s){const n=qi.now(),r=({timestamp:a})=>{const i=a-n;i>=s&&(tc(r),t(i-s))};return qs.read(r,!0),()=>tc(r)}const qH=["TopLeft","TopRight","BottomLeft","BottomRight"],JIe=qH.length,L5=t=>typeof t=="string"?parseFloat(t):t,B5=t=>typeof t=="number"||Ct.test(t);function e3e(t,s,n,r,a,i){a?(t.opacity=Qs(0,n.opacity!==void 0?n.opacity:1,t3e(r)),t.opacityExit=Qs(s.opacity!==void 0?s.opacity:1,0,s3e(r))):i&&(t.opacity=Qs(s.opacity!==void 0?s.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let l=0;l<JIe;l++){const o=`border${qH[l]}Radius`;let c=V5(s,o),d=V5(n,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||B5(c)===B5(d)?(t[o]=Math.max(Qs(L5(c),L5(d),r),0),(zi.test(d)||zi.test(c))&&(t[o]+="%")):t[o]=d}(s.rotate||n.rotate)&&(t.rotate=Qs(s.rotate||0,n.rotate||0,r))}function V5(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const t3e=HH(0,.5,cH),s3e=HH(.5,.95,sa);function HH(t,s,n){return r=>r<t?0:r>s?1:n(eh(t,s,r))}function U5(t,s){t.min=s.min,t.max=s.max}function ha(t,s){U5(t.x,s.x),U5(t.y,s.y)}function z5(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function q5(t,s,n,r,a){return t-=s,t=Aj(t,1/n,r),a!==void 0&&(t=Aj(t,1/a,r)),t}function n3e(t,s=0,n=1,r=.5,a,i=t,l=t){if(zi.test(s)&&(s=parseFloat(s),s=Qs(l.min,l.max,s/100)-l.min),typeof s!="number")return;let o=Qs(i.min,i.max,r);t===i&&(o-=s),t.min=q5(t.min,s,n,o,a),t.max=q5(t.max,s,n,o,a)}function H5(t,s,[n,r,a],i,l){n3e(t,s[n],s[r],s[a],s.scale,i,l)}const r3e=["x","scaleX","originX"],a3e=["y","scaleY","originY"];function G5(t,s,n,r){H5(t.x,s,r3e,n?n.x:void 0,r?r.x:void 0),H5(t.y,s,a3e,n?n.y:void 0,r?r.y:void 0)}function W5(t){return t.translate===0&&t.scale===1}function GH(t){return W5(t.x)&&W5(t.y)}function K5(t,s){return t.min===s.min&&t.max===s.max}function i3e(t,s){return K5(t.x,s.x)&&K5(t.y,s.y)}function Y5(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function WH(t,s){return Y5(t.x,s.x)&&Y5(t.y,s.y)}function Q5(t){return ia(t.x)/ia(t.y)}function X5(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class l3e{constructor(){this.members=[]}add(s){CT(this.members,s),s.scheduleRender()}remove(s){if(kT(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(s){const n=this.members.findIndex(a=>s===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(s,n){const r=this.lead;if(s!==r&&(this.prevLead=r,this.lead=s,s.show(),r)){r.instance&&r.scheduleRender(),s.scheduleRender(),s.resumeFrom=r,n&&(s.resumeFrom.preserveOpacity=!0),r.snapshot&&(s.snapshot=r.snapshot,s.snapshot.latestValues=r.animationValues||r.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:a}=s.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:n,resumingFrom:r}=s;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o3e(t,s,n){let r="";const a=t.x.translate/s.x,i=t.y.translate/s.y,l=(n==null?void 0:n.z)||0;if((a||i||l)&&(r=`translate3d(${a}px, ${i}px, ${l}px) `),(s.x!==1||s.y!==1)&&(r+=`scale(${1/s.x}, ${1/s.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:m,rotateY:h,skewX:x,skewY:p}=n;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),m&&(r+=`rotateX(${m}deg) `),h&&(r+=`rotateY(${h}deg) `),x&&(r+=`skewX(${x}deg) `),p&&(r+=`skewY(${p}deg) `)}const o=t.x.scale*s.x,c=t.y.scale*s.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const Ac={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},vx=typeof window<"u"&&window.MotionDebug!==void 0,Lw=["","X","Y","Z"],c3e={visibility:"hidden"},Z5=1e3;let d3e=0;function Bw(t,s,n,r){const{latestValues:a}=s;a[t]&&(n[t]=a[t],s.setStaticValue(t,0),r&&(r[t]=0))}function KH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const n=sH(s);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",qs,!(a||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&KH(r)}function YH({attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(l={},o=s==null?void 0:s()){this.id=d3e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,vx&&(Ac.totalNodes=Ac.resolvedTargetDeltas=Ac.recalculatedProjection=0),this.nodes.forEach(h3e),this.nodes.forEach(v3e),this.nodes.forEach(y3e),this.nodes.forEach(x3e),vx&&window.MotionDebug.record(Ac)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new XIe)}addEventListener(l,o){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new PT),this.eventHandlers.get(l).add(o)}notifyListeners(l,...o){const c=this.eventHandlers.get(l);c&&c.notify(...o)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=YIe(l),this.instance=l;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(d||c)&&(this.isLayoutDirty=!0),t){let m;const h=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=ZIe(h,250),Cv.hasAnimatedSinceResize&&(Cv.hasAnimatedSinceResize=!1,this.nodes.forEach(e6))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeTargetChanged:x,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||u.getDefaultTransition()||S3e,{onLayoutAnimationStart:j,onLayoutAnimationComplete:g}=u.getProps(),y=!this.targetLayout||!WH(this.targetLayout,p)||x,v=!h&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,v);const w={...bT(f,"layout"),onPlay:j,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else h||e6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,tc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(j3e),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(J5);return}this.isUpdating||this.nodes.forEach(f3e),this.isUpdating=!1,this.nodes.forEach(g3e),this.nodes.forEach(u3e),this.nodes.forEach(m3e),this.clearAllSnapshots();const o=qi.now();Gn.delta=zl(0,1e3/60,o-Gn.timestamp),Gn.timestamp=o,Gn.isProcessing=!0,Dw.update.process(Gn),Dw.preRender.process(Gn),Dw.render.process(Gn),Gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(p3e),this.sharedNodes.forEach(b3e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(o=!1),o){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!GH(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;l&&(o||Pc(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return l&&(c=this.removeTransform(c)),C3e(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:o}=this.options;if(!o)return un();const c=o.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(k3e))){const{scroll:u}=this.root;u&&(Pu(c.x,u.offset.x),Pu(c.y,u.offset.y))}return c}removeElementScroll(l){var o;const c=un();if(ha(c,l),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:m,options:h}=u;u!==this.root&&m&&h.layoutScroll&&(m.wasRoot&&ha(c,l),Pu(c.x,m.offset.x),Pu(c.y,m.offset.y))}return c}applyTransform(l,o=!1){const c=un();ha(c,l);for(let d=0;d<this.path.length;d++){const u=this.path[d];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Au(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Pc(u.latestValues)&&Au(c,u.latestValues)}return Pc(this.latestValues)&&Au(c,this.latestValues),c}removeTransform(l){const o=un();ha(o,l);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Pc(d.latestValues))continue;PC(d.latestValues)&&d.updateSnapshot();const u=un(),m=d.measurePageBox();ha(u,m),G5(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Pc(this.latestValues)&&G5(o,this.latestValues),o}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=Gn.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),Bx(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ha(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=un(),this.targetWithTransforms=un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TIe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ha(this.target,this.layout.layoutBox),BH(this.target,this.targetDelta)):ha(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),Bx(this.relativeTargetOrigin,this.target,x.target),ha(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}vx&&Ac.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||PC(this.parent.latestValues)||LH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Gn.timestamp&&(d=!1),d)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;ha(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,x=this.treeScale.y;FIe(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=un());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(z5(this.prevProjectionDelta.x,this.projectionDelta.x),z5(this.prevProjectionDelta.y,this.projectionDelta.y)),Lx(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==x||!X5(this.projectionDelta.x,this.prevProjectionDelta.x)||!X5(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),vx&&Ac.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ku(),this.projectionDelta=ku(),this.projectionDeltaWithTransform=ku()}setAnimationOrigin(l,o=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=ku();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=un(),x=c?c.source:void 0,p=this.layout?this.layout.source:void 0,f=x!==p,j=this.getStack(),g=!j||j.members.length<=1,y=!!(f&&!g&&this.options.crossfade===!0&&!this.path.some(w3e));this.animationProgress=0;let v;this.mixTargetDelta=w=>{const N=w/1e3;t6(m.x,l.x,N),t6(m.y,l.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),N3e(this.relativeTarget,this.relativeTargetOrigin,h,N),v&&i3e(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=un()),ha(v,this.relativeTarget)),f&&(this.animationValues=u,e3e(u,d,this.latestValues,N,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(tc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qs.update(()=>{Cv.hasAnimatedSinceResize=!0,this.currentAnimation=KIe(0,Z5,{...l,onUpdate:o=>{this.mixTargetDelta(o),l.onUpdate&&l.onUpdate(o)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Z5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:u}=l;if(!(!o||!c||!d)){if(this!==l&&this.layout&&d&&QH(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||un();const m=ia(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+m;const h=ia(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+h}ha(o,c),Au(o,u),Lx(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(l,o){this.sharedNodes.has(l)||this.sharedNodes.set(l,new l3e),this.sharedNodes.get(l).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let o=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const d={};c.z&&Bw("z",l,d,this.animationValues);for(let u=0;u<Lw.length;u++)Bw(`rotate${Lw[u]}`,l,d,this.animationValues),Bw(`skew${Lw[u]}`,l,d,this.animationValues);l.render();for(const u in d)l.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);l.scheduleRender()}getProjectionStyles(l){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return c3e;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=wv(l==null?void 0:l.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=wv(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Pc(this.latestValues)&&(f.transform=u?u({},""):"none",this.hasProjected=!1),f}const h=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=o3e(this.projectionDeltaWithTransform,this.treeScale,h),u&&(d.transform=u(h,d.transform));const{x,y:p}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${p.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:d.opacity=m===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const f in wj){if(h[f]===void 0)continue;const{correct:j,applyTo:g}=wj[f],y=d.transform==="none"?h[f]:j(h[f],m);if(g){const v=g.length;for(let w=0;w<v;w++)d[g[w]]=y}else d[f]=y}return this.options.layoutId&&(d.pointerEvents=m===this?wv(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var o;return(o=l.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(J5),this.root.sharedNodes.clear()}}}function u3e(t){t.updateLayout()}function m3e(t){var s;const n=((s=t.resumeFrom)===null||s===void 0?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=t.layout,{animationType:i}=t.options,l=n.source!==t.layout.source;i==="size"?pa(m=>{const h=l?n.measuredBox[m]:n.layoutBox[m],x=ia(h);h.min=r[m].min,h.max=h.min+x}):QH(i,n.layoutBox,r)&&pa(m=>{const h=l?n.measuredBox[m]:n.layoutBox[m],x=ia(r[m]);h.max=h.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+x)});const o=ku();Lx(o,r,n.layoutBox);const c=ku();l?Lx(c,t.applyTransform(a,!0),n.measuredBox):Lx(c,r,n.layoutBox);const d=!GH(o);let u=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:x}=m;if(h&&x){const p=un();Bx(p,n.layoutBox,h.layoutBox);const f=un();Bx(f,r,x.layoutBox),WH(p,f)||(u=!0),m.options.layoutRoot&&(t.relativeTarget=f,t.relativeTargetOrigin=p,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function h3e(t){vx&&Ac.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function x3e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function p3e(t){t.clearSnapshot()}function J5(t){t.clearMeasurements()}function f3e(t){t.isLayoutDirty=!1}function g3e(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function e6(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function v3e(t){t.resolveTargetDelta()}function y3e(t){t.calcProjection()}function j3e(t){t.resetSkewAndRotation()}function b3e(t){t.removeLeadSnapshot()}function t6(t,s,n){t.translate=Qs(s.translate,0,n),t.scale=Qs(s.scale,1,n),t.origin=s.origin,t.originPoint=s.originPoint}function s6(t,s,n,r){t.min=Qs(s.min,n.min,r),t.max=Qs(s.max,n.max,r)}function N3e(t,s,n,r){s6(t.x,s.x,n.x,r),s6(t.y,s.y,n.y,r)}function w3e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const S3e={duration:.45,ease:[.4,0,.1,1]},n6=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),r6=n6("applewebkit/")&&!n6("chrome/")?Math.round:sa;function a6(t){t.min=r6(t.min),t.max=r6(t.max)}function C3e(t){a6(t.x),a6(t.y)}function QH(t,s,n){return t==="position"||t==="preserve-aspect"&&!AIe(Q5(s),Q5(n),.2)}function k3e(t){var s;return t!==t.root&&((s=t.scroll)===null||s===void 0?void 0:s.wasRoot)}const P3e=YH({attachResizeListener:(t,s)=>cf(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vw={current:void 0},XH=YH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Vw.current){const t=new P3e({});t.mount(window),t.setOptions({layoutScroll:!0}),Vw.current=t}return Vw.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),A3e={pan:{Feature:qIe},drag:{Feature:zIe,ProjectionNode:XH,MeasureLayout:zH}};function i6(t,s,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&qs.postRender(()=>i(s,eg(s)))}class T3e extends xc{mount(){const{current:s}=this.node;s&&(this.unmount=A5e(s,n=>(i6(this.node,n,"Start"),r=>i6(this.node,r,"End"))))}unmount(){}}class D3e extends xc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jf(cf(this.node.current,"focus",()=>this.onFocus()),cf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function l6(t,s,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&qs.postRender(()=>i(s,eg(s)))}class E3e extends xc{mount(){const{current:s}=this.node;s&&(this.unmount=O5e(s,n=>(l6(this.node,n,"Start"),(r,{success:a})=>l6(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const TC=new WeakMap,Uw=new WeakMap,O3e=t=>{const s=TC.get(t.target);s&&s(t)},M3e=t=>{t.forEach(O3e)};function _3e({root:t,...s}){const n=t||document;Uw.has(n)||Uw.set(n,{});const r=Uw.get(n),a=JSON.stringify(s);return r[a]||(r[a]=new IntersectionObserver(M3e,{root:t,...s})),r[a]}function R3e(t,s,n){const r=_3e(s);return TC.set(t,n),r.observe(t),()=>{TC.delete(t),r.unobserve(t)}}const I3e={some:0,all:1};class $3e extends xc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=s,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:I3e[a]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),h=d?u:m;h&&h(c)};return R3e(this.node.current,l,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:n}=this.node;["amount","margin","root"].some(F3e(s,n))&&this.startObserver()}unmount(){}}function F3e({viewport:t={}},{viewport:s={}}={}){return n=>t[n]!==s[n]}const L3e={inView:{Feature:$3e},tap:{Feature:E3e},focus:{Feature:D3e},hover:{Feature:T3e}},B3e={layout:{ProjectionNode:XH,MeasureLayout:zH}},DC={current:null},ZH={current:!1};function V3e(){if(ZH.current=!0,!!iT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>DC.current=t.matches;t.addListener(s),s()}else DC.current=!1}const U3e=[...wH,er,sc],z3e=t=>U3e.find(NH(t)),o6=new WeakMap;function q3e(t,s,n){for(const r in s){const a=s[r],i=n[r];if(rr(a))t.addValue(r,a);else if(rr(i))t.addValue(r,lf(a,{owner:t}));else if(i!==a)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(r);t.addValue(r,lf(l!==void 0?l:a,{owner:t}))}}for(const r in n)s[r]===void 0&&t.removeValue(r);return s}const c6=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class H3e{scrapeMotionValuesFromProps(s,n,r){return{}}constructor({parent:s,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:l},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=MT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=qi.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,qs.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:u}=l;this.onUpdate=u,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=s,this.props=n,this.presenceContext=r,this.depth=s?s.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Eb(n),this.isVariantNode=E7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in h){const p=h[x];c[x]!==void 0&&rr(p)&&p.set(c[x],!1)}}mount(s){this.current=s,o6.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ZH.current||V3e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:DC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){o6.delete(this.current),this.projection&&this.projection.unmount(),tc(this.notifyUpdate),tc(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(s,n){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const r=Bd.has(s),a=n.on("change",o=>{this.latestValues[s]=o,this.props.onUpdate&&qs.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,s,n)),this.valueSubscriptions.set(s,()=>{a(),i(),l&&l(),n.owner&&n.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in th){const n=th[s];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[s]&&a&&r(this.props)&&(this.features[s]=new a(this)),this.features[s]){const i=this.features[s];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):un()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,n){this.latestValues[s]=n}update(s,n){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<c6.length;r++){const a=c6[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,l=s[i];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=q3e(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(s),()=>n.variantChildren.delete(s)}addValue(s,n){const r=this.values.get(s);n!==r&&(r&&this.removeValue(s),this.bindToMotionValue(s,n),this.values.set(s,n),this.latestValues[s]=n.get())}removeValue(s){this.values.delete(s);const n=this.valueSubscriptions.get(s);n&&(n(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,n){if(this.props.values&&this.props.values[s])return this.props.values[s];let r=this.values.get(s);return r===void 0&&n!==void 0&&(r=lf(n===null?void 0:n,{owner:this}),this.addValue(s,r)),r}readValue(s,n){var r;let a=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:(r=this.getBaseTargetFromProps(this.props,s))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,s,this.options);return a!=null&&(typeof a=="string"&&(jH(a)||uH(a))?a=parseFloat(a):!z3e(a)&&sc.test(n)&&(a=gH(s,n)),this.setBaseTarget(s,rr(a)?a.get():a)),rr(a)?a.get():a}setBaseTarget(s,n){this.baseTarget[s]=n}getBaseTarget(s){var n;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const l=hT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(a=l[s])}if(r&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!rr(i)?i:this.initialValues[s]!==void 0&&a===void 0?void 0:this.baseTarget[s]}on(s,n){return this.events[s]||(this.events[s]=new PT),this.events[s].add(n)}notify(s,...n){this.events[s]&&this.events[s].notify(...n)}}class JH extends H3e{constructor(){super(...arguments),this.KeyframeResolver=SH}sortInstanceNodePosition(s,n){return s.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(s,n){return s.style?s.style[n]:void 0}removeValueFromRenderState(s,{vars:n,style:r}){delete n[s],delete r[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;rr(s)&&(this.childSubscription=s.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function G3e(t){return window.getComputedStyle(t)}class W3e extends JH{constructor(){super(...arguments),this.type="html",this.renderInstance=B7}readValueFromInstance(s,n){if(Bd.has(n)){const r=OT(n);return r&&r.default||0}else{const r=G3e(s),a=($7(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(s,{transformPagePoint:n}){return VH(s,n)}build(s,n,r){fT(s,n,r.transformTemplate)}scrapeMotionValuesFromProps(s,n,r){return jT(s,n,r)}}class K3e extends JH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=un}getBaseTargetFromProps(s,n){return s[n]}readValueFromInstance(s,n){if(Bd.has(n)){const r=OT(n);return r&&r.default||0}return n=V7.has(n)?n:dT(n),s.getAttribute(n)}scrapeMotionValuesFromProps(s,n,r){return q7(s,n,r)}build(s,n,r){gT(s,n,this.isSVGTag,r.transformTemplate)}renderInstance(s,n,r,a){U7(s,n,r,a)}mount(s){this.isSVGTag=yT(s.tagName),super.mount(s)}}const Y3e=(t,s)=>mT(t)?new K3e(s):new W3e(s,{allowProjection:t!==b.Fragment}),Q3e=b5e({...yIe,...L3e,...A3e,...B3e},Y3e),zw=IRe(Q3e);function X3e({userId:t,organizationId:s}){const[n,r]=b.useState([]),[a,i]=b.useState(!1),[l,o]=b.useState(null);b.useEffect(()=>{(()=>{const p={id:Date.now(),achievementId:1,achievement:{name:"Welcome Aboard!",description:"You've successfully logged into HostPilotPro",points:10,badgeColor:"#3B82F6",category:"system"},isRead:!1,createdAt:new Date().toISOString()};n.length===0&&setTimeout(()=>{c(p)},3e3)})()},[t,s]);const c=x=>{o(x),i(!0),r(p=>[x,...p]),setTimeout(()=>{i(!1)},5e3)},d=x=>{r(p=>p.map(f=>f.id===x?{...f,isRead:!0}:f))},u=()=>{i(!1),l&&d(l.id)},m=()=>!a||!l?null:e.jsx(Ke,{open:a,onOpenChange:u,children:e.jsxs(Ye,{className:"sm:max-w-md",children:[e.jsx(Qe,{children:e.jsx(Xe,{className:"text-center",children:e.jsxs(zw.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(zw.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 border-4 border-dashed border-yellow-400 rounded-full"}),e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl",style:{backgroundColor:l.achievement.badgeColor},children:e.jsx(ri,{})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-600",children:"Achievement Unlocked!"}),e.jsx("h4",{className:"text-lg font-semibold",children:l.achievement.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.achievement.description}),e.jsxs(z,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:["+",l.achievement.points," points"]})]})]})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(M,{onClick:u,className:"w-full",children:[e.jsx(ip,{className:"h-4 w-4 mr-2"}),"Awesome!"]})})]})}),h=()=>{const x=n.filter(p=>!p.isRead);return x.length===0||a?null:e.jsx(ARe,{children:x.slice(0,1).map(p=>e.jsx(zw.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:"fixed bottom-4 right-4 z-50",children:e.jsx(E,{className:"w-80 border-l-4 border-l-yellow-400 shadow-lg",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:p.achievement.badgeColor},children:e.jsx(ks,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(cp,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"Achievement Unlocked!"})]}),e.jsx("h4",{className:"font-semibold text-sm",children:p.achievement.name}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:p.achievement.description}),e.jsxs(z,{variant:"outline",className:"mt-1 text-xs",children:["+",p.achievement.points," pts"]})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0",onClick:()=>d(p.id),children:e.jsx(on,{className:"h-3 w-3"})})]})})})},p.id))})};return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(h,{})]})}function Z3e(){const{user:t}=_a();return t?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(ri,{className:"h-8 w-8 text-yellow-600"}),"Achievements"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your progress and unlock rewards as you use HostPilotPro"})]}),e.jsxs(z,{variant:"outline",className:"bg-gradient-to-r from-yellow-50 to-orange-50 text-yellow-700 border-yellow-200",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"}),"Gamification System"]})]}),e.jsx(wRe,{userId:t.id,organizationId:t.organizationId||"default-org"}),e.jsx(X3e,{userId:t.id,organizationId:t.organizationId||"default-org"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Fk,{className:"h-5 w-5 text-blue-600"}),"How It Works"]})}),e.jsxs(D,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:" Complete tasks, process bookings, and manage properties to earn points"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Level up by accumulating points and maintaining activity streaks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Unlock badges and achievements for reaching milestones"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Track your progress across different categories"})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-green-600"}),"Benefits"]})}),e.jsxs(D,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:" Visual progress tracking keeps you motivated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Recognition for your contributions and improvements"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Competitive elements to drive engagement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:" Personalized goals based on your role and activities"})]})]})]})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(E,{children:e.jsx(D,{className:"p-6 text-center",children:e.jsx("p",{children:"Please log in to view your achievements."})})})})}var eG="AlertDialog",[J3e]=Pn(eG,[VL]),Kl=VL(),tG=t=>{const{__scopeAlertDialog:s,...n}=t,r=Kl(s);return e.jsx(n8,{...r,...n,modal:!0})};tG.displayName=eG;var e$e="AlertDialogTrigger",t$e=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Kl(n);return e.jsx(r8,{...a,...r,ref:s})});t$e.displayName=e$e;var s$e="AlertDialogPortal",sG=t=>{const{__scopeAlertDialog:s,...n}=t,r=Kl(s);return e.jsx(a8,{...r,...n})};sG.displayName=s$e;var n$e="AlertDialogOverlay",nG=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Kl(n);return e.jsx(sP,{...a,...r,ref:s})});nG.displayName=n$e;var zu="AlertDialogContent",[r$e,a$e]=J3e(zu),i$e=g$("AlertDialogContent"),rG=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,children:r,...a}=t,i=Kl(n),l=b.useRef(null),o=kt(s,l),c=b.useRef(null);return e.jsx(sse,{contentName:zu,titleName:aG,docsSlug:"alert-dialog",children:e.jsx(r$e,{scope:n,cancelRef:c,children:e.jsxs(nP,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:Be(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(i$e,{children:r}),e.jsx(o$e,{contentRef:l})]})})})});rG.displayName=zu;var aG="AlertDialogTitle",iG=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Kl(n);return e.jsx(rP,{...a,...r,ref:s})});iG.displayName=aG;var lG="AlertDialogDescription",oG=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Kl(n);return e.jsx(aP,{...a,...r,ref:s})});oG.displayName=lG;var l$e="AlertDialogAction",cG=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,a=Kl(n);return e.jsx(iP,{...a,...r,ref:s})});cG.displayName=l$e;var dG="AlertDialogCancel",uG=b.forwardRef((t,s)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:a}=a$e(dG,n),i=Kl(n),l=kt(s,a);return e.jsx(iP,{...i,...r,ref:l})});uG.displayName=dG;var o$e=({contentRef:t})=>{const s=`\`${zu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${zu}\` by passing a \`${lG}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${zu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},c$e=tG,d$e=sG,mG=nG,hG=rG,xG=cG,pG=uG,fG=iG,gG=oG;const $T=c$e,u$e=d$e,vG=b.forwardRef(({className:t,...s},n)=>e.jsx(mG,{className:Ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:n}));vG.displayName=mG.displayName;const _b=b.forwardRef(({className:t,...s},n)=>e.jsxs(u$e,{children:[e.jsx(vG,{}),e.jsx(hG,{ref:n,className:Ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));_b.displayName=hG.displayName;const Rb=({className:t,...s})=>e.jsx("div",{className:Ue("flex flex-col space-y-2 text-center sm:text-left",t),...s});Rb.displayName="AlertDialogHeader";const Ib=({className:t,...s})=>e.jsx("div",{className:Ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Ib.displayName="AlertDialogFooter";const $b=b.forwardRef(({className:t,...s},n)=>e.jsx(fG,{ref:n,className:Ue("text-lg font-semibold",t),...s}));$b.displayName=fG.displayName;const Fb=b.forwardRef(({className:t,...s},n)=>e.jsx(gG,{ref:n,className:Ue("text-sm text-muted-foreground",t),...s}));Fb.displayName=gG.displayName;const Lb=b.forwardRef(({className:t,...s},n)=>e.jsx(xG,{ref:n,className:Ue(hp(),t),...s}));Lb.displayName=xG.displayName;const Bb=b.forwardRef(({className:t,...s},n)=>e.jsx(pG,{ref:n,className:Ue(hp({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Bb.displayName=pG.displayName;function qw(){const{toast:t}=at(),[s,n]=b.useState("staff"),[r,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(!1),[d,u]=b.useState(!1),[m,h]=b.useState(null),[x,p]=b.useState({firstName:"",lastName:"",position:"",department:"",salary:"",email:"",phone:""}),[f,j]=b.useState({firstName:"",lastName:"",position:"",department:"",salary:""}),{data:g}=ye({queryKey:["/api/auth/user"]}),y=(g==null?void 0:g.organizationId)||"default-org",{data:v=[],isLoading:w}=ye({queryKey:["/api/staff-members",y],queryFn:async()=>{const K=await fetch(`/api/staff-members?organizationId=${y}`);if(!K.ok){const Ce=await K.json();throw new Error(Ce.error||"Failed to fetch staff members")}return K.json()},enabled:!0});console.log("staffList:",v);const{data:N=[],isLoading:S,error:k}=ye({queryKey:["/api/payroll-records",y],queryFn:async()=>{const K=await fetch(`/api/payroll-records?organizationId=${y}`);if(!K.ok){const Ce=await K.json();throw new Error(Ce.error||"Failed to fetch payroll records")}return K.json()},enabled:s==="payroll"&&!0});console.log("payrollRecords:",N);const T=Ee({mutationFn:async K=>ve("POST","/api/staff-members",K),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member added successfully"}),a(!1),p({firstName:"",lastName:"",position:"",department:"",salary:"",email:"",phone:""})},onError:K=>{t({title:"Error",description:K.message||"Failed to add staff member",variant:"destructive"})}}),C=Ee({mutationFn:async({id:K,data:Ce})=>ve("PUT",`/api/staff-members/${K}`,Ce),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member updated successfully"}),c(!1),h(null)},onError:K=>{t({title:"Error",description:K.message||"Failed to update staff member",variant:"destructive"})}}),P=Ee({mutationFn:async K=>ve("DELETE",`/api/staff-members/${K}`),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member deleted successfully"}),u(!1),h(null)},onError:K=>{t({title:"Error",description:K.message||"Failed to delete staff member",variant:"destructive"})}}),$=K=>{if(!K&&K!==0)return"0";const Ce=typeof K=="string"?parseFloat(K):K;return isNaN(Ce)?"0":`${Ce.toLocaleString()}`},V=K=>K==="active"||K==="Active"?"bg-green-100 text-green-800 px-2 py-1 rounded text-xs":"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",I=()=>{if(!x.firstName||!x.lastName||!x.position||!x.department||!x.salary){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const K=v.length>0?Math.max(...v.map(pe=>pe.id))+1:1,Ce=`EMP${String(K).padStart(3,"0")}`;T.mutate({organizationId:y,employeeId:Ce,firstName:x.firstName,lastName:x.lastName,position:x.position,department:x.department,monthlySalary:x.salary,salaryType:"monthly",startDate:new Date().toISOString().split("T")[0],status:"active",email:x.email||void 0,phoneNumber:x.phone||void 0})},_=K=>{h(K),l(!0)},U=K=>{h(K),j({firstName:K.firstName,lastName:K.lastName,position:K.position,department:K.department,salary:K.monthlySalary}),c(!0)},H=()=>{if(!m||!f.firstName||!f.lastName||!f.position||!f.department||!f.salary){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}C.mutate({id:m.id,data:{firstName:f.firstName,lastName:f.lastName,position:f.position,department:f.department,monthlySalary:f.salary}})},Y=K=>{h(K),u(!0)},O=()=>{m&&P.mutate(m.id)},R=v.length,q=v.reduce((K,Ce)=>K+parseFloat(Ce.monthlySalary||"0"),0),re=R>0?Math.round(q/R):0;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Salaries & Wages"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Admin-only staff salary and wage management system"})]}),e.jsxs(M,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2","data-testid":"button-add-staff",children:[e.jsx(bt,{className:"h-4 w-4"}),"Add Staff Member"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-total-staff",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-total-staff",children:R})]}),e.jsx("div",{className:"text-blue-600",children:""})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-monthly-payroll",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Monthly Payroll"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-monthly-payroll",children:$(q)})]}),e.jsx("div",{className:"text-green-600",children:""})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-average-salary",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average Salary"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-average-salary",children:$(re)})]}),e.jsx("div",{className:"text-purple-600",children:""})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-pending-payments",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Payments"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-pending-payments",children:0})]}),e.jsx("div",{className:"text-orange-600",children:""})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"border-b",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="staff"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>n("staff"),"data-testid":"tab-staff-members",children:"Staff Members"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="payroll"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>n("payroll"),"data-testid":"tab-payroll-records",children:"Payroll Records"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="departments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>n("departments"),"data-testid":"tab-departments",children:"Departments"})]})}),e.jsxs("div",{className:"p-6",children:[s==="staff"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Staff Members"}),w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(vs,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:'No staff members found. Click "Add Staff Member" to get started.'})}):v.map(K=>e.jsxs("tr",{"data-testid":`row-staff-${K.id}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K.employeeId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:`${K.firstName} ${K.lastName}`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K.position}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$(K.monthlySalary)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:V(K.status),children:K.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1",onClick:()=>_(K),"data-testid":`button-view-${K.id}`,title:"View Details",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-yellow-600 hover:text-yellow-900 p-1",onClick:()=>U(K),"data-testid":`button-edit-${K.id}`,title:"Edit Staff",children:e.jsx(TX,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 p-1",onClick:()=>Y(K),"data-testid":`button-delete-${K.id}`,title:"Delete Staff",children:e.jsx(br,{className:"h-4 w-4"})})]})})]},K.id))})]})})]}),s==="payroll"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payroll Records"}),S?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(vs,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading payroll records..."})]}):k?e.jsx("div",{className:"text-center py-8 text-red-500",children:"Error loading payroll records. Please try again later."}):N.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No payroll records yet. Payroll records will appear here once staff payments are processed."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(K=>{const Ce=v.find(F=>F.id===K.staffMemberId),pe=Ce?`${Ce.firstName} ${Ce.lastName} (${Ce.employeeId})`:`Staff ID: ${K.staffMemberId}`;return e.jsxs("tr",{"data-testid":`row-payroll-${K.id}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(K.payPeriodStart).toLocaleDateString()," ","-"," ",new Date(K.payPeriodEnd).toLocaleDateString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:pe}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$(K.grossPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$(K.deductions)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:$(K.netPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:K.status==="paid"||K.status==="Paid"?"bg-green-100 text-green-800 px-2 py-1 rounded text-xs":K.status==="pending"||K.status==="Pending"?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs":"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs",children:K.status||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K.paymentDate?new Date(K.paymentDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:K.notes||"-"})]},K.id)})})]})})]}),s==="departments"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Department Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:["Operations","Maintenance","Customer Service","Finance","Management","IT"].map(K=>e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-lg mb-2",children:K}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Staff Count:"}),e.jsx("span",{className:"font-medium",children:v.filter(Ce=>Ce.department===K).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Salary:"}),e.jsx("span",{className:"font-medium",children:$(v.filter(Ce=>Ce.department===K).reduce((Ce,pe)=>Ce+parseFloat(pe.monthlySalary||"0"),0))})]})]})]},K))})]})]})]}),e.jsx(Ke,{open:r,onOpenChange:a,children:e.jsxs(Ye,{className:"sm:max-w-[500px]",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Add New Staff Member"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"add-first-name",children:"First Name *"}),e.jsx(G,{id:"add-first-name",placeholder:"First name",value:x.firstName,onChange:K=>p({...x,firstName:K.target.value}),"data-testid":"input-add-first-name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"add-last-name",children:"Last Name *"}),e.jsx(G,{id:"add-last-name",placeholder:"Last name",value:x.lastName,onChange:K=>p({...x,lastName:K.target.value}),"data-testid":"input-add-last-name"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"add-position",children:"Position *"}),e.jsx(G,{id:"add-position",placeholder:"Enter position",value:x.position,onChange:K=>p({...x,position:K.target.value}),"data-testid":"input-add-position"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"add-department",children:"Department *"}),e.jsxs(se,{value:x.department,onValueChange:K=>p({...x,department:K}),children:[e.jsx(ee,{"data-testid":"select-add-department",children:e.jsx(ne,{placeholder:"Select department"})}),e.jsxs(te,{children:[e.jsx(A,{value:"Operations",children:"Operations"}),e.jsx(A,{value:"Maintenance",children:"Maintenance"}),e.jsx(A,{value:"Customer Service",children:"Customer Service"}),e.jsx(A,{value:"Finance",children:"Finance"}),e.jsx(A,{value:"Management",children:"Management"}),e.jsx(A,{value:"IT",children:"IT"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"add-salary",children:"Monthly Salary () *"}),e.jsx(G,{id:"add-salary",type:"number",placeholder:"Enter salary amount",value:x.salary,onChange:K=>p({...x,salary:K.target.value}),"data-testid":"input-add-salary"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"add-email",children:"Email"}),e.jsx(G,{id:"add-email",type:"email",placeholder:"email@example.com",value:x.email,onChange:K=>p({...x,email:K.target.value}),"data-testid":"input-add-email"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"add-phone",children:"Phone"}),e.jsx(G,{id:"add-phone",type:"tel",placeholder:"+66 XXX XXX XXX",value:x.phone,onChange:K=>p({...x,phone:K.target.value}),"data-testid":"input-add-phone"})]})]}),e.jsxs(ir,{children:[e.jsx(M,{variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-add",disabled:T.isPending,children:"Cancel"}),e.jsxs(M,{onClick:I,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-confirm-add",disabled:T.isPending,children:[T.isPending&&e.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}),"Add Staff Member"]})]})]})}),e.jsx(Ke,{open:i,onOpenChange:l,children:e.jsxs(Ye,{className:"sm:max-w-[500px]",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Staff Member Details"})}),m&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Employee ID"}),e.jsx("p",{className:"font-medium","data-testid":"view-employee-id",children:m.employeeId})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium","data-testid":"view-status",children:m.status})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Full Name"}),e.jsx("p",{className:"font-medium","data-testid":"view-name",children:`${m.firstName} ${m.lastName}`})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Position"}),e.jsx("p",{className:"font-medium","data-testid":"view-position",children:m.position})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Department"}),e.jsx("p",{className:"font-medium","data-testid":"view-department",children:m.department})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Monthly Salary"}),e.jsx("p",{className:"font-medium text-lg","data-testid":"view-salary",children:$(m.monthlySalary)})]}),m.email&&e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:m.email})]}),m.phone&&e.jsxs("div",{children:[e.jsx(W,{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:m.phone})]})]}),e.jsx(ir,{children:e.jsx(M,{onClick:()=>l(!1),"data-testid":"button-close-view",children:"Close"})})]})}),e.jsx(Ke,{open:o,onOpenChange:c,children:e.jsxs(Ye,{className:"sm:max-w-[500px]",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Edit Staff Member"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"edit-first-name",children:"First Name *"}),e.jsx(G,{id:"edit-first-name",placeholder:"First name",value:f.firstName,onChange:K=>j({...f,firstName:K.target.value}),"data-testid":"input-edit-first-name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"edit-last-name",children:"Last Name *"}),e.jsx(G,{id:"edit-last-name",placeholder:"Last name",value:f.lastName,onChange:K=>j({...f,lastName:K.target.value}),"data-testid":"input-edit-last-name"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"edit-position",children:"Position *"}),e.jsx(G,{id:"edit-position",placeholder:"Enter position",value:f.position,onChange:K=>j({...f,position:K.target.value}),"data-testid":"input-edit-position"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"edit-department",children:"Department *"}),e.jsxs(se,{value:f.department,onValueChange:K=>j({...f,department:K}),children:[e.jsx(ee,{"data-testid":"select-edit-department",children:e.jsx(ne,{placeholder:"Select department"})}),e.jsxs(te,{children:[e.jsx(A,{value:"Operations",children:"Operations"}),e.jsx(A,{value:"Maintenance",children:"Maintenance"}),e.jsx(A,{value:"Customer Service",children:"Customer Service"}),e.jsx(A,{value:"Finance",children:"Finance"}),e.jsx(A,{value:"Management",children:"Management"}),e.jsx(A,{value:"IT",children:"IT"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(W,{htmlFor:"edit-salary",children:"Monthly Salary () *"}),e.jsx(G,{id:"edit-salary",type:"number",placeholder:"Enter salary amount",value:f.salary,onChange:K=>j({...f,salary:K.target.value}),"data-testid":"input-edit-salary"})]})]}),e.jsxs(ir,{children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),"data-testid":"button-cancel-edit",disabled:C.isPending,children:"Cancel"}),e.jsxs(M,{onClick:H,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-save-edit",disabled:C.isPending,children:[C.isPending&&e.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})}),e.jsx($T,{open:d,onOpenChange:u,children:e.jsxs(_b,{children:[e.jsxs(Rb,{children:[e.jsx($b,{children:"Are you sure?"}),e.jsxs(Fb,{children:['This will permanently delete the staff member "',m==null?void 0:m.firstName," ",m==null?void 0:m.lastName,'". This action cannot be undone.']})]}),e.jsxs(Ib,{children:[e.jsx(Bb,{"data-testid":"button-cancel-delete",disabled:P.isPending,children:"Cancel"}),e.jsxs(Lb,{onClick:O,className:"bg-red-600 hover:bg-red-700","data-testid":"button-confirm-delete",disabled:P.isPending,children:[P.isPending&&e.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete"]})]})]})})]})}const m$e=ds({propertyId:ms(),applianceType:Pe().min(1,"Appliance type is required"),brand:Pe().optional(),model:Pe().optional(),serialNumber:Pe().optional(),installDate:Pe().optional(),warrantyExpiry:Pe().optional(),notes:Pe().optional()}),h$e=ds({applianceId:ms(),issueReported:Pe().min(1,"Issue description is required"),fixDescription:Pe().optional(),technicianName:Pe().optional(),repairCost:ms().optional(),receiptUrl:Pe().optional(),repairedAt:Pe().optional()});function x$e(){const[t,s]=b.useState(""),[n,r]=b.useState("all"),[a,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,m]=b.useState(null),{toast:h}=at(),x=yt(),{data:p=[],isLoading:f}=ye({queryKey:["/api/properties"]}),{data:j=[],isLoading:g}=ye({queryKey:["/api/property-appliances"]}),{data:y=[],isLoading:v}=ye({queryKey:["/api/appliance-repairs"]}),{data:w}=ye({queryKey:["/api/property-appliances/analytics"]}),N=Zt({resolver:xs(m$e),defaultValues:{propertyId:0,applianceType:"",brand:"",model:"",serialNumber:"",installDate:"",warrantyExpiry:"",notes:""}}),S=Zt({resolver:xs(h$e),defaultValues:{applianceId:0,issueReported:"",fixDescription:"",technicianName:"",repairCost:0,receiptUrl:"",repairedAt:""}}),k=Ee({mutationFn:Z=>ve("POST","/api/property-appliances",Z),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/property-appliances"]}),x.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),i(!1),N.reset(),h({title:"Success",description:"Appliance added successfully"})},onError:()=>{h({title:"Error",description:"Failed to add appliance",variant:"destructive"})}}),T=Ee({mutationFn:({id:Z,data:le})=>ve("PUT",`/api/property-appliances/${Z}`,le),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/property-appliances"]}),x.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),i(!1),d(null),N.reset(),h({title:"Success",description:"Appliance updated successfully"})},onError:()=>{h({title:"Error",description:"Failed to update appliance",variant:"destructive"})}}),C=Ee({mutationFn:Z=>ve("DELETE",`/api/property-appliances/${Z}`),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/property-appliances"]}),x.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),h({title:"Success",description:"Appliance deleted successfully"})},onError:()=>{h({title:"Error",description:"Failed to delete appliance",variant:"destructive"})}}),P=Ee({mutationFn:Z=>ve("POST","/api/appliance-repairs",Z),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/appliance-repairs"]}),o(!1),S.reset(),h({title:"Success",description:"Repair record added successfully"})},onError:()=>{h({title:"Error",description:"Failed to add repair record",variant:"destructive"})}}),$=Ee({mutationFn:({id:Z,data:le})=>ve("PUT",`/api/appliance-repairs/${Z}`,le),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/appliance-repairs"]}),o(!1),m(null),S.reset(),h({title:"Success",description:"Repair record updated successfully"})},onError:()=>{h({title:"Error",description:"Failed to update repair record",variant:"destructive"})}}),V=Ee({mutationFn:Z=>ve("DELETE",`/api/appliance-repairs/${Z}`),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/appliance-repairs"]}),h({title:"Success",description:"Repair record deleted successfully"})},onError:()=>{h({title:"Error",description:"Failed to delete repair record",variant:"destructive"})}}),I=()=>{d(null),N.reset(),i(!0)},_=Z=>{d(Z),N.reset({propertyId:Z.propertyId,applianceType:Z.applianceType,brand:Z.brand||"",model:Z.model||"",serialNumber:Z.serialNumber||"",installDate:Z.installDate||"",warrantyExpiry:Z.warrantyExpiry||"",notes:Z.notes||""}),i(!0)},U=Z=>{confirm("Are you sure you want to delete this appliance?")&&C.mutate(Z)},H=()=>{m(null),S.reset(),o(!0)},Y=Z=>{m(Z),S.reset({applianceId:Z.applianceId,issueReported:Z.issueReported,fixDescription:Z.fixDescription||"",technicianName:Z.technicianName||"",repairCost:parseFloat(Z.repairCost||"0"),receiptUrl:Z.receiptUrl||"",repairedAt:Z.repairedAt||""}),o(!0)},O=Z=>{confirm("Are you sure you want to delete this repair record?")&&V.mutate(Z)},R=Z=>{c?T.mutate({id:c.id,data:Z}):k.mutate(Z)},q=Z=>{u?$.mutate({id:u.id,data:Z}):P.mutate(Z)};if(f||g||v)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})});const re=j.filter(Z=>{var Ae,ge,xe,$e;const le=((Ae=Z.brand)==null?void 0:Ae.toLowerCase().includes(t.toLowerCase()))||((ge=Z.model)==null?void 0:ge.toLowerCase().includes(t.toLowerCase()))||((xe=Z.applianceType)==null?void 0:xe.toLowerCase().includes(t.toLowerCase())),oe=n==="all"||(($e=Z.propertyId)==null?void 0:$e.toString())===n;return le&&oe}),we=Z=>{const le=p.find(oe=>oe.id===Z);return(le==null?void 0:le.name)||"Unknown Property"},K=Z=>{const le=j.find(oe=>oe.id===Z);return le?`${le.applianceType} - ${le.brand} ${le.model}`:"Unknown Appliance"},Ce=Z=>{if(!Z)return null;const le=new Date,Ae=new Date(Z).getTime()-le.getTime(),ge=Math.ceil(Ae/(1e3*60*60*24));return ge<0?{status:"expired",days:Math.abs(ge)}:ge<=30?{status:"expiring",days:ge}:{status:"active",days:ge}},pe=j.length,F=y.reduce((Z,le)=>Z+(le.repairCost||0),0),Q=j.filter(Z=>{const le=Ce(Z.warrantyExpiry);return le&&(le.status==="expiring"||le.status==="expired")}).length;return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Property Appliances Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track appliances, warranties, and repair history"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:I,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Appliance"]}),e.jsxs(M,{onClick:H,variant:"outline",children:[e.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Add Repair"]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"appliances",children:"Appliances"}),e.jsx(ae,{value:"repairs",children:"Repair History"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Appliances"}),e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:pe}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all properties"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Repair Costs"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Nt(F)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time repair expenses"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Warranty Issues"}),e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Q}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expired or expiring soon"})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Recent Activity"}),e.jsx(Me,{children:"Latest appliance installations and repairs"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:y.slice(0,3).map(Z=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(Ws,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:K(Z.applianceId)}),e.jsx("p",{className:"text-sm text-gray-600",children:Z.issueReported})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:Nt(Z.repairCost)}),e.jsx("p",{className:"text-sm text-gray-600",children:Z.repairedAt})]})]},Z.id))})})]})]}),e.jsx(ie,{value:"appliances",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Appliances"}),e.jsx(Me,{children:"Manage property appliances and warranties"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(G,{placeholder:"Search appliances...",value:t,onChange:Z=>s(Z.target.value),className:"pl-10"})]}),e.jsxs("select",{value:n,onChange:Z=>r(Z.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Properties"}),p.map(Z=>e.jsx("option",{value:Z.id.toString(),children:Z.name},Z.id))]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Appliance"}),e.jsx(Re,{children:"Property"}),e.jsx(Re,{children:"Brand & Model"}),e.jsx(Re,{children:"Warranty Status"}),e.jsx(Re,{children:"Install Date"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:re.length===0?e.jsx(Ot,{children:e.jsx(Oe,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Ws,{className:"mx-auto h-12 w-12 mb-4 text-gray-300"}),e.jsx("p",{children:"No appliances found"}),e.jsx("p",{className:"text-sm",children:"Add appliances to start tracking them"})]})})}):re.map(Z=>{const le=Ce(Z.warrantyExpiry);return e.jsxs(Ot,{children:[e.jsx(Oe,{className:"font-medium",children:Z.applianceType}),e.jsx(Oe,{children:we(Z.propertyId)}),e.jsx(Oe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Z.brand}),e.jsx("p",{className:"text-sm text-gray-600",children:Z.model})]})}),e.jsx(Oe,{children:le?e.jsx(z,{variant:le.status==="expired"?"destructive":le.status==="expiring"?"secondary":"default",children:le.status==="expired"?"Expired":le.status==="expiring"?`Expires in ${le.days} days`:"Active"}):e.jsx("span",{className:"text-gray-400",children:"No warranty"})}),e.jsx(Oe,{children:Z.installDate||"N/A"}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>_(Z),children:e.jsx(jr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>U(Z.id),className:"text-red-600 hover:text-red-700",children:e.jsx(br,{className:"w-4 h-4"})})]})})]},Z.id)})})]})})]})]})}),e.jsx(ie,{value:"repairs",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Repair History"}),e.jsx(Me,{children:"Track maintenance and repair records"})]}),e.jsx(D,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Appliance"}),e.jsx(Re,{children:"Issue"}),e.jsx(Re,{children:"Technician"}),e.jsx(Re,{children:"Cost"}),e.jsx(Re,{children:"Date"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:y.length===0?e.jsx(Ot,{children:e.jsx(Oe,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(tt,{className:"mx-auto h-12 w-12 mb-4 text-gray-300"}),e.jsx("p",{children:"No repair records found"}),e.jsx("p",{className:"text-sm",children:"Repair history will appear here"})]})})}):y.map(Z=>e.jsxs(Ot,{children:[e.jsx(Oe,{className:"font-medium",children:K(Z.applianceId)}),e.jsx(Oe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Z.issueReported}),Z.fixDescription&&e.jsx("p",{className:"text-sm text-gray-600",children:Z.fixDescription})]})}),e.jsx(Oe,{children:Z.technicianName||"N/A"}),e.jsx(Oe,{className:"font-medium",children:Z.repairCost?Nt(Z.repairCost):"N/A"}),e.jsx(Oe,{children:Z.repairedAt||"N/A"}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>Y(Z),children:e.jsx(jr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>O(Z.id),className:"text-red-600 hover:text-red-700",children:e.jsx(br,{className:"w-4 h-4"})})]})})]},Z.id))})]})})})]})}),e.jsx(ie,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Appliance Types"}),e.jsx(Me,{children:"Distribution by appliance type"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:Array.from(new Set(j.map(Z=>Z.applianceType))).map(Z=>{const le=j.filter(Ae=>Ae.applianceType===Z).length,oe=le/j.length*100;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:Z}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${oe}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-8",children:le})]})]},Z)})})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Repair Costs by Property"}),e.jsx(Me,{children:"Total repair expenses per property"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:p.map(Z=>{const le=j.filter(ge=>ge.propertyId===Z.id),Ae=y.filter(ge=>le.some(xe=>xe.id===ge.applianceId)).reduce((ge,xe)=>ge+(xe.repairCost||0),0);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:Z.name}),e.jsx("span",{className:"text-sm font-medium",children:Nt(Ae)})]},Z.id)})})})]})]})})]}),e.jsx(Ke,{open:a,onOpenChange:i,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:c?"Edit Appliance":"Add New Appliance"})}),e.jsx(os,{...N,children:e.jsxs("form",{onSubmit:N.handleSubmit(R),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:N.control,name:"propertyId",render:({field:Z})=>{var le;return e.jsxs(de,{children:[e.jsx(he,{children:"Property"}),e.jsxs(se,{onValueChange:oe=>Z.onChange(parseInt(oe)),value:(le=Z.value)==null?void 0:le.toString(),children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})})}),e.jsx(te,{children:p.map(oe=>e.jsx(A,{value:oe.id.toString(),children:oe.name},oe.id))})]}),e.jsx(fe,{})]})}}),e.jsx(me,{control:N.control,name:"applianceType",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Appliance Type"}),e.jsx(ue,{children:e.jsx(G,{...Z,placeholder:"e.g., Air Conditioner"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:N.control,name:"brand",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Brand"}),e.jsx(ue,{children:e.jsx(G,{...Z,placeholder:"e.g., Daikin"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"model",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Model"}),e.jsx(ue,{children:e.jsx(G,{...Z,placeholder:"e.g., FTXS25K"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:N.control,name:"serialNumber",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Serial Number"}),e.jsx(ue,{children:e.jsx(G,{...Z,placeholder:"e.g., DAI-2024-001"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"installDate",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Install Date"}),e.jsx(ue,{children:e.jsx(G,{...Z,type:"date"})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:N.control,name:"warrantyExpiry",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Warranty Expiry"}),e.jsx(ue,{children:e.jsx(G,{...Z,type:"date"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"notes",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Notes"}),e.jsx(ue,{children:e.jsx(mt,{...Z,placeholder:"Additional notes..."})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:k.isPending||T.isPending,children:k.isPending||T.isPending?"Saving...":c?"Update Appliance":"Add Appliance"})]})]})})]})}),e.jsx(Ke,{open:l,onOpenChange:o,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:u?"Edit Repair Record":"Add New Repair Record"})}),e.jsx(os,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit(q),className:"space-y-4",children:[e.jsx(me,{control:S.control,name:"applianceId",render:({field:Z})=>{var le;return e.jsxs(de,{children:[e.jsx(he,{children:"Appliance"}),e.jsxs(se,{onValueChange:oe=>Z.onChange(parseInt(oe)),value:(le=Z.value)==null?void 0:le.toString(),children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select appliance"})})}),e.jsx(te,{children:j.map(oe=>e.jsxs(A,{value:oe.id.toString(),children:[oe.applianceType," - ",oe.brand," ",oe.model," (",we(oe.propertyId),")"]},oe.id))})]}),e.jsx(fe,{})]})}}),e.jsx(me,{control:S.control,name:"issueReported",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Issue Reported"}),e.jsx(ue,{children:e.jsx(mt,{...Z,placeholder:"Describe the issue..."})}),e.jsx(fe,{})]})}),e.jsx(me,{control:S.control,name:"fixDescription",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Fix Description"}),e.jsx(ue,{children:e.jsx(mt,{...Z,placeholder:"Describe what was done to fix the issue..."})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:S.control,name:"technicianName",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Technician Name"}),e.jsx(ue,{children:e.jsx(G,{...Z,placeholder:"e.g., Somchai Repair Service"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:S.control,name:"repairCost",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Repair Cost (THB)"}),e.jsx(ue,{children:e.jsx(G,{...Z,type:"number",placeholder:"0"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:S.control,name:"receiptUrl",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Receipt URL"}),e.jsx(ue,{children:e.jsx(G,{...Z,placeholder:"Link to receipt/invoice"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:S.control,name:"repairedAt",render:({field:Z})=>e.jsxs(de,{children:[e.jsx(he,{children:"Repair Date"}),e.jsx(ue,{children:e.jsx(G,{...Z,type:"date"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:P.isPending||$.isPending,children:P.isPending||$.isPending?"Saving...":u?"Update Repair":"Add Repair"})]})]})})]})})]})}function p$e(){const[t,s]=b.useState(""),[n,r]=b.useState("all"),[a,i]=b.useState("all"),{data:l=[],isLoading:o}=ye({queryKey:["/api/tasks"],select:h=>h.map(x=>({id:x.id,title:x.title||"Untitled Task",description:x.description||"No description",status:x.status||"pending",priority:x.priority||"medium",assignedTo:x.assignedTo||"Unassigned",propertyName:x.propertyName||"Unknown Property",dueDate:x.dueDate||new Date().toISOString(),createdAt:x.createdAt||new Date().toISOString()}))}),c=h=>{switch(h){case"completed":return e.jsx(Fe,{className:"w-4 h-4 text-green-500"});case"in-progress":return e.jsx(et,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(Ut,{className:"w-4 h-4 text-yellow-500"})}},d=h=>{switch(h){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=l.filter(h=>{const x=h.title.toLowerCase().includes(t.toLowerCase())||h.description.toLowerCase().includes(t.toLowerCase())||h.propertyName.toLowerCase().includes(t.toLowerCase()),p=n==="all"||h.status===n,f=a==="all"||h.priority===a;return x&&p&&f}),m={total:l.length,pending:l.filter(h=>h.status==="pending").length,inProgress:l.filter(h=>h.status==="in-progress").length,completed:l.filter(h=>h.status==="completed").length};return o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((h,x)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},x))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Task Overview"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and monitor all property tasks"})]}),e.jsxs(M,{children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Schedule Task"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:m.total})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ut,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(et,{className:"w-6 h-6 text-yellow-600"})})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.inProgress})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(et,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.completed})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Fe,{className:"w-6 h-6 text-green-600"})})]})})})]}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx(G,{placeholder:"Search tasks...",value:t,onChange:h=>s(h.target.value),className:"pl-10"})]})}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{className:"w-40",children:e.jsx(ne,{placeholder:"Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"in-progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"})]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{className:"w-40",children:e.jsx(ne,{placeholder:"Priority"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Priority"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"low",children:"Low"})]})]})]})})}),e.jsx("div",{className:"grid gap-4",children:u.length===0?e.jsx(E,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx(Ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]})}):u.map(h=>e.jsx(E,{className:"hover:shadow-md transition-shadow",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c(h.status),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:h.title}),e.jsx(z,{className:`${d(h.priority)} border`,children:h.priority})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:h.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ws,{className:"w-4 h-4"}),h.propertyName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"w-4 h-4"}),h.assignedTo]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-4 h-4"}),"Due: ",new Date(h.dueDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(M,{variant:"outline",size:"sm",children:"View"})]})]})})},h.id))})]})}function f$e(){const[t,s]=b.useState(new Date().toISOString().split("T")[0]),{data:n=[],isLoading:r}=ye({queryKey:["/api/tasks"],select:x=>x.map(p=>({id:p.id,title:p.title||"Untitled Task",status:p.status||"pending",priority:p.priority||"medium",assignedTo:p.assignedTo||"Unassigned",propertyName:p.propertyName||"Unknown Property",dueDate:p.dueDate||new Date().toISOString(),type:p.type||"maintenance"}))}),{data:a=[],isLoading:i}=ye({queryKey:["/api/bookings"],select:x=>x.map(p=>({id:p.id,guestName:p.guestName||"Unknown Guest",propertyName:p.propertyName||"Unknown Property",checkIn:p.checkIn||new Date().toISOString(),checkOut:p.checkOut||new Date().toISOString(),status:p.status||"confirmed",totalAmount:p.totalAmount||0}))}),{data:l=[],isLoading:o}=ye({queryKey:["/api/properties"],select:x=>x.map(p=>({id:p.id,name:p.name||"Unnamed Property",status:p.status||"active",occupancyRate:Math.floor(Math.random()*100),revenue:Math.floor(Math.random()*5e4)+1e4,maintenanceIssues:Math.floor(Math.random()*5)}))}),c=n.filter(x=>{const p=new Date(x.dueDate).toDateString(),f=new Date().toDateString();return p===f}),d=a.filter(x=>{const p=new Date(x.checkIn).toDateString(),f=new Date().toDateString();return p===f}),u=a.filter(x=>{const p=new Date(x.checkOut).toDateString(),f=new Date().toDateString();return p===f}),m={totalProperties:l.length,activeProperties:l.filter(x=>x.status==="active").length,todayTasks:c.length,completedTasks:c.filter(x=>x.status==="completed").length,checkInsToday:d.length,checkOutsToday:u.length,averageOccupancy:l.length?Math.round(l.reduce((x,p)=>x+p.occupancyRate,0)/l.length):0,dailyRevenue:a.reduce((x,p)=>x+(p.totalAmount||0),0)};return r||i||o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(8)].map((x,p)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},p))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Daily Operations"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Today's overview - ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(xn,{className:"w-4 h-4 mr-2"}),"Alerts"]}),e.jsxs(M,{children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Live Status"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Properties Active"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.activeProperties,"/",m.totalProperties]})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ft,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Tasks"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.completedTasks,"/",m.todayTasks]})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Fe,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check-ins / Outs"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.checkInsToday," /"," ",m.checkOutsToday]})]}),e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(dt,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Occupancy"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.averageOccupancy,"%"]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Bt,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsxs(ft,{defaultValue:"tasks",className:"space-y-4",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"tasks",children:"Today's Tasks"}),e.jsx(ae,{value:"bookings",children:"Guest Activities"}),e.jsx(ae,{value:"properties",children:"Property Status"}),e.jsx(ae,{value:"alerts",children:"Alerts & Issues"})]}),e.jsx(ie,{value:"tasks",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5"}),"Today's Tasks (",c.length,")"]})}),e.jsx(D,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fe,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"All tasks completed!"}),e.jsx("p",{className:"text-gray-600",children:"No pending tasks for today."})]}):e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${x.status==="completed"?"bg-green-500":x.status==="in-progress"?"bg-blue-500":"bg-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.propertyName,"  ",x.assignedTo]})]})]}),e.jsx(z,{variant:x.priority==="high"?"destructive":"secondary",children:x.priority})]},x.id))})})]})}),e.jsx(ie,{value:"bookings",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"text-green-600",children:["Today's Check-ins (",d.length,")"]})}),e.jsx(D,{children:d.length===0?e.jsx("p",{className:"text-gray-600",children:"No check-ins scheduled today"}):e.jsx("div",{className:"space-y-2",children:d.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.propertyName})]}),e.jsx(z,{variant:"outline",className:"text-green-600",children:new Date(x.checkIn).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.id))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"text-blue-600",children:["Today's Check-outs (",u.length,")"]})}),e.jsx(D,{children:u.length===0?e.jsx("p",{className:"text-gray-600",children:"No check-outs scheduled today"}):e.jsx("div",{className:"space-y-2",children:u.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.propertyName})]}),e.jsx(z,{variant:"outline",className:"text-blue-600",children:new Date(x.checkOut).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.id))})})]})]})}),e.jsx(ie,{value:"properties",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:l.map(x=>e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg",children:x.name}),e.jsx("div",{className:"mt-2 space-y-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Occupancy:"}),e.jsx(fi,{value:x.occupancyRate,className:"w-20"}),e.jsxs("span",{className:"text-sm font-medium",children:[x.occupancyRate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm",children:["",x.revenue.toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[x.maintenanceIssues>0&&e.jsxs(z,{variant:"destructive",children:[x.maintenanceIssues," Issues"]}),e.jsx(z,{variant:x.status==="active"?"default":"secondary",children:x.status})]})]})})},x.id))})}),e.jsx(ie,{value:"alerts",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2 text-orange-600",children:[e.jsx(Et,{className:"w-5 h-5"}),"Active Alerts & Issues"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-red-200 bg-red-50 rounded-lg",children:[e.jsx(Et,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-red-800",children:"High Priority Task Overdue"}),e.jsx("p",{className:"text-sm text-red-600",children:"Pool maintenance at Villa Samui Breeze is 2 days overdue"})]}),e.jsx(z,{variant:"destructive",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-yellow-200 bg-yellow-50 rounded-lg",children:[e.jsx(et,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Upcoming Maintenance Due"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"AC service required at Villa Ocean View in 3 days"})]}),e.jsx(z,{variant:"outline",className:"text-yellow-600",children:"Warning"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-blue-200 bg-blue-50 rounded-lg",children:[e.jsx(dt,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Guest Check-in Reminder"}),e.jsx("p",{className:"text-sm text-blue-600",children:"3 guests checking in today - ensure properties are ready"})]}),e.jsx(z,{variant:"outline",className:"text-blue-600",children:"Info"})]})]})})]})})]})]})}function g$e(){const[t,s]=b.useState("overview"),[n,r]=b.useState(""),a=[{id:1,name:"Appliance Repair Overdue",description:"Alert when appliance repairs are overdue by more than 24 hours",triggerType:"appliance_repair",alertLevel:"warning",isActive:!0,createdAt:new Date().toISOString()},{id:2,name:"Critical System Health",description:"Alert for critical system health issues requiring immediate attention",triggerType:"system_health",alertLevel:"critical",isActive:!0,createdAt:new Date().toISOString()},{id:3,name:"Booking Payment Overdue",description:"Alert when guest payment is overdue",triggerType:"booking_overdue",alertLevel:"warning",isActive:!1,createdAt:new Date().toISOString()}],i=[{id:1,message:"AC Unit #AC-001 repair overdue by 2 days",details:"Villa Samui Breeze - Central AC unit requires maintenance attention",triggerType:"appliance_repair",alertLevel:"warning",status:"pending",createdAt:new Date(Date.now()-864e5).toISOString()},{id:2,message:"Database connection issues detected",details:"System experiencing intermittent connectivity problems affecting booking system",triggerType:"system_health",alertLevel:"critical",status:"acknowledged",createdAt:new Date(Date.now()-36e5).toISOString()},{id:3,message:"Pool Pump #PP-003 maintenance scheduled",details:"Villa Tropical Paradise - Weekly pool pump maintenance due",triggerType:"property_maintenance",alertLevel:"warning",status:"resolved",createdAt:new Date(Date.now()-72e5).toISOString()}],l={totalAlerts:47,resolutionRate:87,pendingAlerts:i.filter(m=>m.status==="pending").length,criticalAlerts:i.filter(m=>m.alertLevel==="critical"&&m.status==="pending").length},o=m=>m==="pending"?e.jsx(z,{className:"bg-yellow-500",children:"Pending"}):m==="acknowledged"?e.jsx(z,{className:"bg-blue-500",children:"Acknowledged"}):m==="resolved"?e.jsx(z,{className:"bg-green-500",children:"Resolved"}):e.jsx(z,{className:"bg-gray-500",children:"Dismissed"}),c=m=>m==="critical"?e.jsx(z,{variant:"destructive",children:"Critical"}):e.jsx(z,{variant:"secondary",children:"Warning"}),d=m=>m==="appliance_repair"?e.jsx(Ut,{className:"h-4 w-4"}):m==="booking_overdue"?e.jsx(et,{className:"h-4 w-4"}):m==="property_maintenance"?e.jsx(qt,{className:"h-4 w-4"}):m==="utility_bill"?e.jsx(Bt,{className:"h-4 w-4"}):m==="staff_task"?e.jsx(dt,{className:"h-4 w-4"}):m==="guest_complaint"?e.jsx(Et,{className:"h-4 w-4"}):m==="system_health"?e.jsx(xn,{className:"h-4 w-4"}):e.jsx(Ut,{className:"h-4 w-4"}),u=m=>new Date(m).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Alert Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and manage system alerts and notifications"})]}),e.jsxs(ft,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"rules",children:"Alert Rules"}),e.jsx(ae,{value:"logs",children:"Alert Logs"}),e.jsx(ae,{value:"settings",children:"Settings"})]}),e.jsxs(ie,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm font-medium text-gray-600",children:"Total Alerts"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"All time"})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm font-medium text-gray-600",children:"Pending Alerts"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.pendingAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"Requires attention"})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm font-medium text-gray-600",children:"Critical Alerts"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.criticalAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"Urgent action needed"})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm font-medium text-gray-600",children:"Resolution Rate"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[l.resolutionRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Last 30 days"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Recent Alerts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:i.slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:d(m.triggerType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.message}),e.jsx("p",{className:"text-sm text-gray-500",children:m.details})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[c(m.alertLevel),o(m.status)]}),e.jsx("div",{className:"text-sm text-gray-500",children:u(m.createdAt)})]},m.id))})})]})]}),e.jsxs(ie,{value:"rules",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Rules"}),e.jsxs(M,{children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]}),e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Name"}),e.jsx(Re,{children:"Trigger Type"}),e.jsx(Re,{children:"Alert Level"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Created"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:a.map(m=>e.jsxs(Ot,{children:[e.jsx(Oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.name}),e.jsx("div",{className:"text-sm text-gray-500",children:m.description})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[d(m.triggerType),e.jsx("span",{className:"capitalize",children:m.triggerType.replace("_"," ")})]})}),e.jsx(Oe,{children:c(m.alertLevel)}),e.jsx(Oe,{children:e.jsx(z,{variant:m.isActive?"default":"secondary",children:m.isActive?"Active":"Inactive"})}),e.jsx(Oe,{children:u(m.createdAt)}),e.jsx(Oe,{children:e.jsx(M,{variant:"outline",size:"sm",children:"Edit"})})]},m.id))})]})})})]}),e.jsxs(ie,{value:"logs",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Logs"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(G,{placeholder:"Search alerts...",value:n,onChange:m=>r(m.target.value),className:"pl-10 w-64"})]})})]}),e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Alert"}),e.jsx(Re,{children:"Type"}),e.jsx(Re,{children:"Level"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Created"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:i.map(m=>e.jsxs(Ot,{children:[e.jsx(Oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.message}),e.jsx("div",{className:"text-sm text-gray-500",children:m.details})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[d(m.triggerType),e.jsx("span",{className:"capitalize",children:m.triggerType.replace("_"," ")})]})}),e.jsx(Oe,{children:c(m.alertLevel)}),e.jsx(Oe,{children:o(m.status)}),e.jsx(Oe,{children:u(m.createdAt)}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex space-x-2",children:[m.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",size:"sm",children:"Acknowledge"}),e.jsx(M,{variant:"outline",size:"sm",children:"Resolve"})]}),m.status==="acknowledged"&&e.jsx(M,{variant:"outline",size:"sm",children:"Resolve"})]})})]},m.id))})]})})})]}),e.jsxs(ie,{value:"settings",className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Notification Preferences"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Email Notifications"}),e.jsx(z,{variant:"default",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"SMS Alerts"}),e.jsx(z,{variant:"secondary",children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Push Notifications"}),e.jsx(z,{variant:"default",children:"Enabled"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Alert Thresholds"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Critical Alert Threshold"}),e.jsx("span",{className:"font-medium",children:"Immediate"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warning Alert Threshold"}),e.jsx("span",{className:"font-medium",children:"5 minutes"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-resolve After"}),e.jsx("span",{className:"font-medium",children:"24 hours"})]})]})]})]})]})]})]})})}function yG(){const{user:t}=_a(),[s,n]=b.useState("overview"),{data:r=[],isLoading:a}=ye({queryKey:["/api/properties"],staleTime:10*60*1e3}),{data:i=[],isLoading:l}=ye({queryKey:["/api/tasks"],staleTime:5*60*1e3}),{data:o=[],isLoading:c}=ye({queryKey:["/api/bookings"],staleTime:10*60*1e3}),{data:d=[],isLoading:u}=ye({queryKey:["/api/finance"],staleTime:10*60*1e3}),m=a||l||c||u,h=Array.isArray(i)?i.slice(0,5):[],x=Array.isArray(o)?o.slice(0,5):[],p=Array.isArray(d)?d.slice(0,5):[],f=new Map;Array.isArray(r)&&r.forEach(y=>{f.set(y.id,y.name)});const j=y=>{if(y==null)return"0";const v=typeof y=="string"?parseFloat(y):y;return`${(Number.isFinite(v)&&v>0?v:0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})}`},g=y=>new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return m?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading dashboard..."})]})}):e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(ec,{title:"Enhanced Admin Dashboard"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-slate-200/60",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-5xl font-extrabold text-slate-900 dark:text-slate-100 tracking-tight",children:"Enhanced Admin Dashboard"}),e.jsxs("p",{className:"text-slate-400 dark:text-slate-500 mt-3 text-lg font-medium",children:["Welcome back, ",(t==null?void 0:t.firstName)||(t==null?void 0:t.email)]})]}),e.jsxs(M,{onClick:()=>window.location.reload(),className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 px-6 py-3",children:[e.jsx(bN,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-10",children:[e.jsx(E,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-emerald-100/50 hover:border-emerald-200 bg-gradient-to-br from-emerald-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Properties"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:r.length})]}),e.jsx("div",{className:"p-3 bg-emerald-100/80 rounded-xl",children:e.jsx(Ft,{className:"h-8 w-8 text-emerald-600"})})]})})}),e.jsx(E,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-teal-100/50 hover:border-teal-200 bg-gradient-to-br from-teal-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Active Tasks"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:i.length})]}),e.jsx("div",{className:"p-3 bg-teal-100/80 rounded-xl",children:e.jsx(Tx,{className:"h-8 w-8 text-teal-600"})})]})})}),e.jsx(E,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-cyan-100/50 hover:border-cyan-200 bg-gradient-to-br from-cyan-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Bookings"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:o.length})]}),e.jsx("div",{className:"p-3 bg-cyan-100/80 rounded-xl",children:e.jsx(tt,{className:"h-8 w-8 text-cyan-600"})})]})})}),e.jsx(E,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-green-100/50 hover:border-green-200 bg-gradient-to-br from-green-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Finances"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:d.length})]}),e.jsx("div",{className:"p-3 bg-green-100/80 rounded-xl",children:e.jsx(Je,{className:"h-8 w-8 text-green-600"})})]})})})]}),e.jsxs(ft,{value:s,onValueChange:n,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4 bg-slate-100/60 rounded-xl p-1 shadow-inner",children:[e.jsx(ae,{value:"overview",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Overview"}),e.jsx(ae,{value:"tasks",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Tasks"}),e.jsx(ae,{value:"bookings",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Bookings"}),e.jsx(ae,{value:"finances",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Finances"})]}),e.jsx(ie,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(E,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-emerald-100/50",children:[e.jsx(L,{className:"pb-4 px-6 pt-6",children:e.jsxs(B,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-emerald-100/80 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-emerald-600"})}),"Properties (",r.length,")"]})}),e.jsxs(D,{className:"space-y-4 px-6 pb-6",children:[r.slice(0,4).map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-emerald-50/50 to-slate-50/80 rounded-lg border border-emerald-100/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:y.name}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[y.bedrooms," BR"]})]}),e.jsx(z,{variant:y.status==="active"?"default":"secondary",className:y.status==="active"?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600 border-slate-200",children:y.status})]},y.id)),r.length>4&&e.jsxs("p",{className:"text-sm text-center text-slate-500 pt-2 font-medium",children:["+",r.length-4," more properties"]})]})]}),e.jsxs(E,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-teal-100/50",children:[e.jsx(L,{className:"pb-4 px-6 pt-6",children:e.jsxs(B,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-teal-100/80 rounded-lg",children:e.jsx(Tx,{className:"h-6 w-6 text-teal-600"})}),"Recent Tasks"]})}),e.jsx(D,{className:"space-y-4 px-6 pb-6",children:h.map(y=>e.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-teal-50/50 to-slate-50/80 rounded-lg border border-teal-100/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:y.title}),e.jsx(M,{size:"sm",className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg transition-all duration-300 hover:scale-110 p-2",children:e.jsx(bN,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{variant:"outline",className:"text-xs",children:y.status}),e.jsx(z,{variant:"outline",className:"text-xs",children:y.priority})]}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:["Due: ",g(y.dueDate)]})]},y.id))})]}),e.jsxs(E,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-cyan-100/50",children:[e.jsx(L,{className:"pb-4 px-6 pt-6",children:e.jsxs(B,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-cyan-100/80 rounded-lg",children:e.jsx(tt,{className:"h-6 w-6 text-cyan-600"})}),"Recent Bookings"]})}),e.jsx(D,{className:"space-y-4 px-6 pb-6",children:x.map(y=>{const v=f.get(y.propertyId)||`Property #${y.propertyId}`,w=y.totalAmount||y.guestTotalPrice||y.platformPayout||y.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-cyan-50/50 to-slate-50/80 rounded-lg border border-cyan-100/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:y.guestName}),e.jsx("p",{className:"text-xs text-cyan-600 font-semibold",children:v}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[g(y.checkInDate||y.checkIn)," - ",g(y.checkOutDate||y.checkOut)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-sm text-slate-800",children:j(w)}),e.jsx(z,{variant:y.status==="confirmed"?"default":"secondary",className:y.status==="confirmed"?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600 border-slate-200",children:y.status})]})]},y.id)})})]})]})}),e.jsx(ie,{value:"tasks",className:"space-y-6",children:e.jsxs(E,{className:"rounded-xl shadow-lg border-2 border-teal-100/50",children:[e.jsx(L,{className:"pb-4 px-6 pt-6",children:e.jsxs(B,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-100/80 rounded-lg",children:e.jsx(Tx,{className:"h-6 w-6 text-teal-600"})}),"All Tasks"]})}),e.jsx(D,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:Array.isArray(i)&&i.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-teal-50/50 to-slate-50/80 rounded-xl border-2 border-teal-100/30 hover:border-teal-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:y.title}),e.jsx(z,{variant:"outline",className:"bg-emerald-100/80 text-emerald-700 border-emerald-200 font-semibold",children:y.type})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(z,{variant:"outline",className:"text-xs",children:y.status}),e.jsx(z,{variant:"outline",className:"text-xs",children:y.priority})]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Assigned to: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:y.assignedTo})," | Due: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:g(y.dueDate)})]})]}),e.jsx(M,{size:"sm",className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg transition-all duration-300 hover:scale-110 p-3",children:e.jsx(bN,{className:"h-5 w-5"})})]},y.id))})})]})}),e.jsx(ie,{value:"bookings",className:"space-y-6",children:e.jsxs(E,{className:"rounded-xl shadow-lg border-2 border-cyan-100/50",children:[e.jsx(L,{className:"pb-4 px-6 pt-6",children:e.jsxs(B,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-100/80 rounded-lg",children:e.jsx(tt,{className:"h-6 w-6 text-cyan-600"})}),"All Bookings"]})}),e.jsx(D,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:Array.isArray(o)&&o.map(y=>{const v=f.get(y.propertyId)||`Property #${y.propertyId}`,w=y.totalAmount||y.guestTotalPrice||y.platformPayout||y.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-cyan-50/50 to-slate-50/80 rounded-xl border-2 border-cyan-100/30 hover:border-cyan-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:y.guestName}),e.jsx(z,{variant:y.status==="confirmed"?"default":"secondary",className:y.status==="confirmed"?"bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold":y.status==="pending"?"bg-amber-100 text-amber-700 border-amber-200 font-semibold":"bg-slate-100 text-slate-600 border-slate-200 font-semibold",children:y.status})]}),e.jsxs("p",{className:"text-sm text-cyan-600 font-bold mb-2",children:["Property: ",v]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[g(y.checkInDate||y.checkIn)," - ",g(y.checkOutDate||y.checkOut)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-xl text-slate-800 mb-1",children:j(w)}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:y.source||"Direct"})]})]},y.id)})})})]})}),e.jsx(ie,{value:"finances",className:"space-y-6",children:e.jsxs(E,{className:"rounded-xl shadow-lg border-2 border-green-100/50",children:[e.jsx(L,{className:"pb-4 px-6 pt-6",children:e.jsxs(B,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100/80 rounded-lg",children:e.jsx(Je,{className:"h-6 w-6 text-green-600"})}),"Recent Financial Activity"]})}),e.jsx(D,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:p.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50/50 to-slate-50/80 rounded-xl border-2 border-green-100/30 hover:border-green-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:y.description}),e.jsx(z,{variant:y.type==="income"?"default":y.type==="expense"?"destructive":"secondary",className:y.type==="income"?"bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold":y.type==="expense"?"bg-red-100 text-red-700 border-red-200 font-semibold":"bg-slate-100 text-slate-600 border-slate-200 font-semibold",children:y.type})]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[e.jsx("span",{className:"text-slate-700 font-semibold",children:g(y.date)})," | Property: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:y.propertyName||"General"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-bold text-xl mb-1 ${y.type==="income"?"text-emerald-600":y.type==="expense"?"text-red-600":"text-slate-600"}`,children:[y.type==="expense"?"-":"+",j(y.amount)]})})]},y.id))})})]})})]})]})]})})}const v$e=Object.freeze(Object.defineProperty({__proto__:null,default:yG},Symbol.toStringTag,{value:"Module"}));function jG(){var c;const{toast:t}=at(),[s,n]=b.useState(!1),[r,a]=b.useState({commissionAutomation:!0,utilityAlerts:!0,lastRun:{commissionCheck:"2025-01-26 09:00:00",utilityCheck:"2025-01-26 09:00:00"},alerts:[]}),i=async()=>{n(!0);try{const u=(await ve("POST","/api/automation/test-commission")).data||{};t({title:"Commission Test Complete",description:`Processed ${u.processed||0} bookings`})}catch{t({title:"Test Failed",description:"Could not run commission automation test",variant:"destructive"})}finally{n(!1)}},l=async()=>{n(!0);try{const u=(await ve("POST","/api/automation/test-utility-alerts")).data||{};t({title:"Utility Alert Test Complete",description:`Generated ${u.alerts||0} alerts`})}catch{t({title:"Test Failed",description:"Could not run utility alerts test",variant:"destructive"})}finally{n(!1)}},o=async()=>{n(!0);try{const u=(await ve("GET","/api/automation/status")).data||{};a(u),t({title:"Status Updated",description:"Automation status refreshed"})}catch{t({title:"Status Check Failed",description:"Could not get automation status",variant:"destructive"})}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Jt,{className:"h-8 w-8 text-blue-600"}),"Automation Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and control commission automation and utility alert systems"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Commission Automation"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.commissionAutomation?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-red-600",children:"Inactive"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Real-time processing"})]}),e.jsx(z,{variant:r.commissionAutomation?"default":"destructive",children:r.commissionAutomation?"Live":"Stopped"})]})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(xn,{className:"h-4 w-4"}),"Utility Alerts"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.utilityAlerts?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-red-600",children:"Inactive"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Daily 9:00 AM checks"})]}),e.jsx(z,{variant:r.utilityAlerts?"default":"destructive",children:r.utilityAlerts?"Live":"Stopped"})]})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"System Health"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Healthy"}),e.jsx("p",{className:"text-xs text-gray-500",children:"All systems operational"})]}),e.jsx(Fe,{className:"h-6 w-6 text-green-500"})]})})]})]}),e.jsxs(E,{className:"mb-8",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(mm,{className:"h-5 w-5"}),"Manual Testing & Controls"]})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(M,{onClick:i,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Test Commission Automation"]}),e.jsxs(M,{onClick:l,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-4 w-4"}),"Test Utility Alerts"]}),e.jsxs(M,{onClick:o,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Refresh Status"]})]})})]}),e.jsxs(E,{className:"mb-8",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5"}),"Last Run Information"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Commission Processing"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last Run: ",r.lastRun.commissionCheck]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Runs automatically on booking confirmations"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Utility Alert Check"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last Run: ",r.lastRun.utilityCheck]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Runs daily at 9:00 AM + weekly Monday reviews"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),"Current Alerts (",((c=r.alerts)==null?void 0:c.length)||0,")"]})}),e.jsx(D,{children:!r.alerts||r.alerts.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fe,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Active Alerts"}),e.jsx("p",{className:"text-gray-600",children:"All automation systems are running smoothly."})]}):e.jsx("div",{className:"space-y-4",children:r.alerts.map(d=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Et,{className:"h-5 w-5 text-amber-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:d.type}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:d.createdAt})]})]}),e.jsx(z,{variant:d.severity==="high"?"destructive":"secondary",children:d.severity})]})},d.id))})})]}),e.jsx(Wr,{className:"my-8"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"Automation systems powered by node-cron scheduling"}),e.jsx("p",{className:"mt-1",children:"Commission: 10% rates  Utility alerts: Daily checks  Auto-payouts: 5,000 threshold"})]})]})})}const y$e=Object.freeze(Object.defineProperty({__proto__:null,default:jG},Symbol.toStringTag,{value:"Module"})),j$e=ds({baseCurrency:Pe().length(3,"Currency code must be 3 characters"),targetCurrency:Pe().length(3,"Currency code must be 3 characters"),rate:ms().positive("Rate must be positive")}),b$e=ds({region:Pe().min(1,"Region is required"),vatRate:ms().min(0).max(100).optional(),gstRate:ms().min(0).max(100).optional(),whtRate:ms().min(0).max(100).optional()}),N$e=ds({amount:ms().positive("Amount must be positive"),from:Pe().length(3,"Currency code must be 3 characters"),to:Pe().length(3,"Currency code must be 3 characters")}),w$e=ds({amount:ms().positive("Amount must be positive"),region:Pe().min(1,"Region is required"),taxType:zs(["vat","gst","wht"])});function S$e(){const{toast:t}=at(),[s,n]=b.useState("rates"),[r,a]=b.useState(!1),[i,l]=b.useState([]),[o,c]=b.useState([]),[d,u]=b.useState(null),[m,h]=b.useState(null),x=Zt({resolver:xs(j$e),defaultValues:{baseCurrency:"",targetCurrency:"",rate:0}}),p=Zt({resolver:xs(b$e),defaultValues:{region:"",vatRate:void 0,gstRate:void 0,whtRate:void 0}}),f=Zt({resolver:xs(N$e),defaultValues:{amount:0,from:"",to:""}}),j=Zt({resolver:xs(w$e),defaultValues:{amount:0,region:"",taxType:"vat"}}),g=async()=>{a(!0);try{const[T,C]=await Promise.all([ve("GET","/api/currency/rates"),ve("GET","/api/tax/rules")]);l(T.data||[]),c(C.data||[])}catch{t({title:"Error",description:"Failed to fetch data",variant:"destructive"})}finally{a(!1)}};b.useEffect(()=>{g()},[]);const y=async T=>{try{await ve("PUT",`/api/currency/rates/${T.baseCurrency}/${T.targetCurrency}`,{rate:T.rate}),t({title:"Success",description:"Currency rate updated successfully"}),x.reset(),g()}catch{t({title:"Error",description:"Failed to update currency rate",variant:"destructive"})}},v=async T=>{try{await ve("PUT",`/api/tax/rules/${T.region}`,T),t({title:"Success",description:"Tax rule updated successfully"}),p.reset(),g()}catch{t({title:"Error",description:"Failed to update tax rule",variant:"destructive"})}},w=async T=>{try{const C=await ve("POST","/api/currency/convert",T);u(C.data),t({title:"Conversion Complete",description:`${T.amount} ${T.from} = ${C.data.convertedAmount.toFixed(2)} ${T.to}`})}catch{t({title:"Error",description:"Failed to convert currency",variant:"destructive"})}},N=async T=>{try{const C=await ve("POST","/api/tax/calculate",T);h(C.data),t({title:"Tax Calculated",description:`Tax: ${C.data.taxAmount.toFixed(2)} (${C.data.rate}%)`})}catch{t({title:"Error",description:"Failed to calculate tax",variant:"destructive"})}},S=["THB","USD","EUR","GBP"],k=["thailand","singapore","usa","uk","australia","default"];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Je,{className:"h-8 w-8 text-green-600"}),"Currency & Tax Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Multi-currency support and international tax compliance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Ii,{className:"h-4 w-4"}),"Currency Rates"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Exchange rate pairs"})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),"Tax Regions"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configured regions"})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Base Currency"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"THB"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Thai Baht"})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Ru,{className:"h-4 w-4"}),"Multi-Currency"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"Active"}),e.jsx("p",{className:"text-xs text-gray-500",children:"System enabled"})]})]})]}),e.jsxs(ft,{value:s,onValueChange:n,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"rates",children:"Exchange Rates"}),e.jsx(ae,{value:"taxes",children:"Tax Rules"}),e.jsx(ae,{value:"convert",children:"Currency Converter"}),e.jsx(ae,{value:"calculate",children:"Tax Calculator"})]}),e.jsxs(ie,{value:"rates",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Currency Exchange Rates"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:g,variant:"outline",size:"sm",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{size:"sm",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Add Rate"]})}),e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Add/Update Currency Rate"})}),e.jsx(os,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(y),className:"space-y-4",children:[e.jsx(me,{control:x.control,name:"baseCurrency",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Base Currency"}),e.jsxs(se,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select base currency"})})}),e.jsx(te,{children:S.map(C=>e.jsx(A,{value:C,children:C},C))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:x.control,name:"targetCurrency",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Target Currency"}),e.jsxs(se,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select target currency"})})}),e.jsx(te,{children:S.map(C=>e.jsx(A,{value:C,children:C},C))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:x.control,name:"rate",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Exchange Rate"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.000001",placeholder:"1.234567",...T,onChange:C=>T.onChange(parseFloat(C.target.value))})}),e.jsx(fe,{})]})}),e.jsx(M,{type:"submit",className:"w-full",children:"Update Rate"})]})})]})]})]})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"From"}),e.jsx(Re,{children:"To"}),e.jsx(Re,{children:"Rate"}),e.jsx(Re,{children:"Last Updated"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:i.map(T=>e.jsxs(Ot,{children:[e.jsx(Oe,{children:e.jsx(z,{variant:"outline",children:T.baseCurrency})}),e.jsx(Oe,{children:e.jsx(z,{variant:"outline",children:T.targetCurrency})}),e.jsx(Oe,{className:"font-mono",children:parseFloat(T.rate).toFixed(6)}),e.jsx(Oe,{className:"text-gray-500",children:new Date(T.updatedAt).toLocaleDateString()}),e.jsx(Oe,{children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(jr,{className:"h-4 w-4"})})})]},`${T.baseCurrency}-${T.targetCurrency}`))})]})})})]}),e.jsxs(ie,{value:"taxes",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Tax Rules by Region"}),e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{size:"sm",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Add Tax Rule"]})}),e.jsxs(Ye,{children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Add/Update Tax Rule"})}),e.jsx(os,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(v),className:"space-y-4",children:[e.jsx(me,{control:p.control,name:"region",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Region"}),e.jsxs(se,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select region"})})}),e.jsx(te,{children:k.map(C=>e.jsx(A,{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:p.control,name:"vatRate",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"VAT Rate (%)"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",placeholder:"7.00",...T,onChange:C=>T.onChange(C.target.value?parseFloat(C.target.value):void 0)})}),e.jsx(fe,{})]})}),e.jsx(me,{control:p.control,name:"gstRate",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"GST Rate (%)"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",placeholder:"8.00",...T,onChange:C=>T.onChange(C.target.value?parseFloat(C.target.value):void 0)})}),e.jsx(fe,{})]})}),e.jsx(me,{control:p.control,name:"whtRate",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"WHT Rate (%)"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",placeholder:"3.00",...T,onChange:C=>T.onChange(C.target.value?parseFloat(C.target.value):void 0)})}),e.jsx(fe,{})]})}),e.jsx(M,{type:"submit",className:"w-full",children:"Update Tax Rule"})]})})]})]})]}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Region"}),e.jsx(Re,{children:"VAT Rate"}),e.jsx(Re,{children:"GST Rate"}),e.jsx(Re,{children:"WHT Rate"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(yn,{children:o.map(T=>e.jsxs(Ot,{children:[e.jsx(Oe,{children:e.jsx(z,{variant:"secondary",children:T.region.charAt(0).toUpperCase()+T.region.slice(1)})}),e.jsx(Oe,{children:T.vatRate?`${T.vatRate}%`:""}),e.jsx(Oe,{children:T.gstRate?`${T.gstRate}%`:""}),e.jsx(Oe,{children:T.whtRate?`${T.whtRate}%`:""}),e.jsx(Oe,{children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(jr,{className:"h-4 w-4"})})})]},T.region))})]})})})]}),e.jsx(ie,{value:"convert",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Currency Converter"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(os,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(w),className:"space-y-4",children:[e.jsx(me,{control:f.control,name:"amount",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Amount"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",placeholder:"1000",...T,onChange:C=>T.onChange(parseFloat(C.target.value))})}),e.jsx(fe,{})]})}),e.jsx(me,{control:f.control,name:"from",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"From Currency"}),e.jsxs(se,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select currency"})})}),e.jsx(te,{children:S.map(C=>e.jsx(A,{value:C,children:C},C))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:f.control,name:"to",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"To Currency"}),e.jsxs(se,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select currency"})})}),e.jsx(te,{children:S.map(C=>e.jsx(A,{value:C,children:C},C))})]}),e.jsx(fe,{})]})}),e.jsxs(M,{type:"submit",className:"w-full",children:[e.jsx(Ru,{className:"h-4 w-4 mr-2"}),"Convert"]})]})}),d&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Conversion Result"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[d.convertedAmount.toFixed(2)," ",d.to]}),e.jsxs("div",{className:"text-gray-600",children:[d.amount," ",d.from]})]}),e.jsx(Wr,{}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Exchange Rate"}),e.jsxs("div",{className:"font-mono text-lg",children:["1 ",d.from," = ",d.rate," ",d.to]})]})]})})]})]})})]})}),e.jsx(ie,{value:"calculate",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Tax Calculator"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(os,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(N),className:"space-y-4",children:[e.jsx(me,{control:j.control,name:"amount",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Amount"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",placeholder:"10000",...T,onChange:C=>T.onChange(parseFloat(C.target.value))})}),e.jsx(fe,{})]})}),e.jsx(me,{control:j.control,name:"region",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Region"}),e.jsxs(se,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select region"})})}),e.jsx(te,{children:k.map(C=>e.jsx(A,{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:j.control,name:"taxType",render:({field:T})=>e.jsxs(de,{children:[e.jsx(he,{children:"Tax Type"}),e.jsxs(se,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select tax type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"vat",children:"VAT"}),e.jsx(A,{value:"gst",children:"GST"}),e.jsx(A,{value:"wht",children:"WHT"})]})]}),e.jsx(fe,{})]})}),e.jsxs(M,{type:"submit",className:"w-full",children:[e.jsx(Ru,{className:"h-4 w-4 mr-2"}),"Calculate Tax"]})]})}),m&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{className:"text-lg",children:"Tax Calculation Result"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Original Amount"}),e.jsxs("div",{className:"text-lg font-semibold",children:["",m.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[m.taxType.toUpperCase()," (",m.rate,"%)"]}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["",m.taxAmount.toLocaleString()]})]}),e.jsx(Wr,{}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",m.totalAmount.toLocaleString()]})]})]})})]})]})})]})})]}),e.jsx(Wr,{className:"my-8"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),e.jsx("span",{children:"Multi-currency system for international property management"})]}),e.jsx("p",{children:"Exchange rates updated automatically  Tax compliance for multiple regions"})]})]})})}const C$e=ds({guestId:Pe().min(1,"Guest ID is required"),propertyId:ms().min(1,"Property selection is required"),recommendationType:zs(["extra_cleaning","private_chef","spa_service","tour_guide","grocery_delivery","laundry_service","transportation","other"]),message:Pe().min(10,"Message must be at least 10 characters"),status:zs(["pending","sent","accepted","declined","expired"]).default("pending")}),k$e={pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"},d6={extra_cleaning:"",private_chef:"",spa_service:"",tour_guide:"",grocery_delivery:"",laundry_service:"",transportation:"",other:""};function P$e(){const[t,s]=b.useState(""),[n,r]=b.useState(),[a,i]=b.useState(),[l,o]=b.useState(),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,x]=b.useState(null),p=yt(),{toast:f}=at(),{data:j=[],isLoading:g}=ye({queryKey:["/api/upsell-recommendations",{propertyId:n,recommendationType:a,status:l,search:t}],queryFn:()=>{const _=new URLSearchParams;return n&&_.append("propertyId",n.toString()),a&&_.append("recommendationType",a),l&&_.append("status",l),t&&_.append("q",t),fetch(`/api/upsell-recommendations${t?"/search":""}?${_}`).then(U=>U.json())}}),{data:y=[]}=ye({queryKey:["/api/properties"],queryFn:()=>fetch("/api/properties").then(_=>_.json())}),{data:v}=ye({queryKey:["/api/upsell-recommendations/analytics"],queryFn:()=>fetch("/api/upsell-recommendations/analytics").then(_=>_.json())}),{data:w=[]}=ye({queryKey:["/api/upsell-recommendations/types"],queryFn:()=>fetch("/api/upsell-recommendations/types").then(_=>_.json())}),N=Zt({resolver:xs(C$e),defaultValues:{guestId:"",propertyId:void 0,recommendationType:"extra_cleaning",message:"",status:"pending"}}),S=Ee({mutationFn:_=>ve("POST","/api/upsell-recommendations",_),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),p.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),p.invalidateQueries({queryKey:["/api/upsell-recommendations/types"]}),d(!1),N.reset(),f({title:"Success",description:"Upsell recommendation created successfully"})},onError:_=>{f({title:"Error",description:_.message||"Failed to create recommendation",variant:"destructive"})}}),k=Ee({mutationFn:({id:_,data:U})=>ve("PUT",`/api/upsell-recommendations/${_}`,U),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),p.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),m(!1),x(null),f({title:"Success",description:"Recommendation updated successfully"})},onError:_=>{f({title:"Error",description:_.message||"Failed to update recommendation",variant:"destructive"})}}),T=Ee({mutationFn:_=>ve("DELETE",`/api/upsell-recommendations/${_}`),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),p.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),f({title:"Success",description:"Recommendation deleted successfully"})},onError:_=>{f({title:"Error",description:_.message||"Failed to delete recommendation",variant:"destructive"})}}),C=Ee({mutationFn:({guestId:_,propertyId:U})=>ve("POST","/api/upsell-recommendations/generate",{guestId:_,propertyId:U}),onSuccess:_=>{var U,H;p.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),p.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),f({title:"Success",description:`Generated ${((U=_.recommendations)==null?void 0:U.length)||0} smart recommendations with ${(H=_.totalEstimatedValue)==null?void 0:H.toLocaleString()} potential value`})},onError:_=>{f({title:"Error",description:_.message||"Failed to generate recommendations",variant:"destructive"})}}),P=_=>{S.mutate(_)},$=_=>{x(_),m(!0)},V=(_,U)=>{k.mutate({id:_,data:{status:U}})},I=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Upsell Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage guest service recommendations and track conversion rates"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(Ke,{open:c,onOpenChange:d,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(bt,{className:"mr-2 h-4 w-4"}),"New Recommendation"]})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create Upsell Recommendation"}),e.jsx(Rt,{children:"Create targeted service recommendations for guests"})]}),e.jsx(os,{...N,children:e.jsxs("form",{onSubmit:N.handleSubmit(P),className:"space-y-4",children:[e.jsx(me,{control:N.control,name:"guestId",render:({field:_})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest ID"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Enter guest identifier",..._})}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"propertyId",render:({field:_})=>{var U;return e.jsxs(de,{children:[e.jsx(he,{children:"Property"}),e.jsxs(se,{onValueChange:H=>_.onChange(parseInt(H)),value:(U=_.value)==null?void 0:U.toString(),children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})})}),e.jsx(te,{children:y.map(H=>e.jsx(A,{value:H.id.toString(),children:H.name},H.id))})]}),e.jsx(fe,{})]})}}),e.jsx(me,{control:N.control,name:"recommendationType",render:({field:_})=>e.jsxs(de,{children:[e.jsx(he,{children:"Recommendation Type"}),e.jsxs(se,{onValueChange:_.onChange,value:_.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select service type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"extra_cleaning",children:" Extra Cleaning"}),e.jsx(A,{value:"private_chef",children:" Private Chef"}),e.jsx(A,{value:"spa_service",children:" Spa Service"}),e.jsx(A,{value:"tour_guide",children:" Tour Guide"}),e.jsx(A,{value:"grocery_delivery",children:" Grocery Delivery"}),e.jsx(A,{value:"laundry_service",children:" Laundry Service"}),e.jsx(A,{value:"transportation",children:" Transportation"}),e.jsx(A,{value:"other",children:" Other Service"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"message",render:({field:_})=>e.jsxs(de,{children:[e.jsx(he,{children:"Recommendation Message"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Describe the service offering and benefits...",className:"min-h-[80px]",..._})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(M,{type:"submit",disabled:S.isPending,children:[S.isPending&&e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Recommendation"]})]})]})})]})]})})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(xt,{children:[e.jsx(ae,{value:"overview",children:" Overview"}),e.jsx(ae,{value:"recommendations",children:" Recommendations"}),e.jsx(ae,{value:"analytics",children:" Analytics"}),e.jsx(ae,{value:"types",children:" Service Types"})]}),e.jsxs(ie,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Recommendations"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(v==null?void 0:v.totalRecommendations)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time recommendations"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Conversion Rate"}),e.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(v==null?void 0:v.conversionRate)||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted vs declined"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Unique Guests"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(v==null?void 0:v.uniqueGuests)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests with recommendations"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending"}),e.jsx(pn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(v==null?void 0:v.pendingCount)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting guest response"})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Quick Actions"}),e.jsx(Me,{children:"Generate AI-powered recommendations for your guests"})]}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Generate personalized recommendations based on guest preferences and property amenities"})}),e.jsxs(M,{onClick:()=>{var _;return C.mutate({guestId:"guest-demo-123",propertyId:(_=y[0])==null?void 0:_.id})},disabled:C.isPending||!y.length,children:[C.isPending&&e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(ks,{className:"mr-2 h-4 w-4"}),"Generate Smart Recommendations"]})]})})]})]}),e.jsxs(ie,{value:"recommendations",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(G,{placeholder:"Search recommendations...",value:t,onChange:_=>s(_.target.value),className:"max-w-sm"}),e.jsxs(se,{value:(n==null?void 0:n.toString())||"",onValueChange:_=>r(_?parseInt(_):void 0),children:[e.jsx(ee,{className:"w-[180px]",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Properties"}),y.map(_=>e.jsx(A,{value:_.id.toString(),children:_.name},_.id))]})]}),e.jsxs(se,{value:a||"",onValueChange:i,children:[e.jsx(ee,{className:"w-[180px]",children:e.jsx(ne,{placeholder:"All Types"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Types"}),e.jsx(A,{value:"extra_cleaning",children:"Extra Cleaning"}),e.jsx(A,{value:"private_chef",children:"Private Chef"}),e.jsx(A,{value:"spa_service",children:"Spa Service"}),e.jsx(A,{value:"tour_guide",children:"Tour Guide"}),e.jsx(A,{value:"grocery_delivery",children:"Grocery Delivery"}),e.jsx(A,{value:"laundry_service",children:"Laundry Service"}),e.jsx(A,{value:"transportation",children:"Transportation"}),e.jsx(A,{value:"other",children:"Other"})]})]}),e.jsxs(se,{value:l||"",onValueChange:o,children:[e.jsx(ee,{className:"w-[150px]",children:e.jsx(ne,{placeholder:"All Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"sent",children:"Sent"}),e.jsx(A,{value:"accepted",children:"Accepted"}),e.jsx(A,{value:"declined",children:"Declined"}),e.jsx(A,{value:"expired",children:"Expired"})]})]})]}),e.jsx(E,{children:e.jsx(D,{className:"p-0",children:g?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(vs,{className:"h-8 w-8 animate-spin"})}):e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Guest"}),e.jsx(Re,{children:"Property"}),e.jsx(Re,{children:"Service Type"}),e.jsx(Re,{children:"Message"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Created"}),e.jsx(Re,{children:"Days Since"}),e.jsx(Re,{className:"text-right",children:"Actions"})]})}),e.jsx(yn,{children:j.map(_=>{var U;return e.jsxs(Ot,{children:[e.jsx(Oe,{className:"font-medium",children:_.guestName||_.guestId}),e.jsx(Oe,{children:_.propertyName}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:d6[_.recommendationType]}),e.jsx("span",{className:"capitalize",children:(U=_.recommendationType)==null?void 0:U.replace("_"," ")})]})}),e.jsx(Oe,{className:"max-w-xs truncate",children:_.message}),e.jsxs(Oe,{children:[e.jsx(z,{className:k$e[_.status],children:_.status}),_.isExpired&&e.jsx(z,{variant:"destructive",className:"ml-1",children:"Expired"})]}),e.jsx(Oe,{children:I(_.createdAt)}),e.jsxs(Oe,{children:[_.daysSinceCreated," days"]}),e.jsx(Oe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>$(_),children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>T.mutate(_.id),disabled:T.isPending,children:e.jsx(br,{className:"h-4 w-4"})}),_.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>V(_.id,"sent"),children:"Send"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>V(_.id,"accepted"),children:"Accept"})]})]})})]},_.id)})})]})})})]}),e.jsx(ie,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Status Distribution"}),e.jsx(Me,{children:"Breakdown of recommendation statuses"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pending"}),e.jsx("span",{className:"font-medium",children:(v==null?void 0:v.pendingCount)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sent"}),e.jsx("span",{className:"font-medium",children:(v==null?void 0:v.sentCount)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accepted"}),e.jsx("span",{className:"font-medium text-green-600",children:(v==null?void 0:v.acceptedCount)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Declined"}),e.jsx("span",{className:"font-medium text-red-600",children:(v==null?void 0:v.declinedCount)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Expired"}),e.jsx("span",{className:"font-medium text-gray-600",children:(v==null?void 0:v.expiredCount)||0})]})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Performance Metrics"}),e.jsx(Me,{children:"Key performance indicators"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Conversion Rate"}),e.jsxs("span",{className:"font-medium",children:[(v==null?void 0:v.conversionRate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg. Recommendations/Guest"}),e.jsx("span",{className:"font-medium",children:(v==null?void 0:v.avgRecommendationsPerGuest)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Properties"}),e.jsx("span",{className:"font-medium",children:(v==null?void 0:v.uniqueProperties)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Guests"}),e.jsx("span",{className:"font-medium",children:(v==null?void 0:v.uniqueGuests)||0})]})]})})]})]})}),e.jsx(ie,{value:"types",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Service Type Performance"}),e.jsx(Me,{children:"Analyze conversion rates by recommendation type"})]}),e.jsx(D,{children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Service Type"}),e.jsx(Re,{children:"Total"}),e.jsx(Re,{children:"Pending"}),e.jsx(Re,{children:"Accepted"}),e.jsx(Re,{children:"Declined"}),e.jsx(Re,{children:"Conversion Rate"})]})}),e.jsx(yn,{children:w.map(_=>{var U;return e.jsxs(Ot,{children:[e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:d6[_.recommendationType]}),e.jsx("span",{className:"capitalize",children:(U=_.recommendationType)==null?void 0:U.replace("_"," ")})]})}),e.jsx(Oe,{children:_.recommendationCount}),e.jsx(Oe,{children:_.pendingCount}),e.jsx(Oe,{className:"text-green-600",children:_.acceptedCount}),e.jsx(Oe,{className:"text-red-600",children:_.declinedCount}),e.jsx(Oe,{children:e.jsxs(z,{variant:_.conversionRate>50?"default":"secondary",children:[_.conversionRate,"%"]})})]},_.recommendationType)})})]})})]})})]}),e.jsx(Ke,{open:u,onOpenChange:m,children:e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Update Recommendation"}),e.jsx(Rt,{children:"Modify recommendation details and status"})]}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(se,{value:h.status,onValueChange:_=>V(h.id,_),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"sent",children:"Sent"}),e.jsx(A,{value:"accepted",children:"Accepted"}),e.jsx(A,{value:"declined",children:"Declined"}),e.jsx(A,{value:"expired",children:"Expired"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})})]})]})})]})}function A$e({className:t}){const[s,n]=b.useState([{id:"1",type:"bot",content:" Hello! I'm Captain Cortex  your smart co-pilot for property management, powered by HostPilotPro. Ready to navigate tasks, finances, and data with you!",timestamp:new Date}]),[r,a]=b.useState(""),i=b.useRef(null);yt();const{data:l=[]}=ye({queryKey:["/api/ai-bot/suggestions"],staleTime:1e3*60*10}),o=Ee({mutationFn:async m=>await ve("/api/ai-bot/query",{method:"POST",body:{question:m}}),onSuccess:(m,h)=>{n(x=>[...x.filter(f=>!f.isLoading),{id:Date.now().toString(),type:"bot",content:m.response,timestamp:new Date}])},onError:m=>{n(h=>[...h.filter(p=>!p.isLoading),{id:Date.now().toString(),type:"bot",content:"I apologize, but I encountered an error processing your question. Please try again.",timestamp:new Date}])}}),c=async()=>{if(!r.trim())return;const m={id:Date.now().toString(),type:"user",content:r,timestamp:new Date},h={id:(Date.now()+1).toString(),type:"bot",content:"Analyzing your question and fetching relevant data...",timestamp:new Date,isLoading:!0};n(x=>[...x,m,h]),a(""),o.mutate(r)},d=m=>{a(m)},u=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),c())};return b.useEffect(()=>{if(i.current){const m=i.current.querySelector("[data-radix-scroll-area-viewport]");m&&(m.scrollTop=m.scrollHeight)}},[s]),e.jsxs(E,{className:`h-[600px] flex flex-col ${t}`,children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ui,{className:"h-5 w-5 text-blue-500"}),"MR Pilot AI Assistant",e.jsx(z,{variant:"secondary",className:"ml-auto",children:"Connected to Live Data"})]})}),e.jsxs(D,{className:"flex-1 flex flex-col gap-3 p-4",children:[e.jsx(Cm,{ref:i,className:"flex-1 pr-3",children:e.jsx("div",{className:"space-y-4",children:s.map(m=>e.jsxs("div",{className:`flex items-start gap-3 ${m.type==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${m.type==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"}`,children:m.type==="user"?e.jsx(Ht,{className:"h-4 w-4"}):m.isLoading?e.jsx(vs,{className:"h-4 w-4 animate-spin"}):e.jsx(ui,{className:"h-4 w-4"})}),e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${m.type==="user"?"bg-blue-500 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:m.content}),e.jsx("div",{className:"text-xs mt-1 opacity-70",children:m.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},m.id))})}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(lp,{className:"h-4 w-4"}),"Suggested questions:"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.slice(0,3).map((m,h)=>e.jsx(M,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>d(m),disabled:o.isPending,children:m},h))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:r,onChange:m=>a(m.target.value),onKeyPress:u,placeholder:"Ask about tasks, revenue, expenses, bookings...",disabled:o.isPending,className:"flex-1"}),e.jsx(M,{onClick:c,disabled:!r.trim()||o.isPending,size:"icon",children:o.isPending?e.jsx(vs,{className:"h-4 w-4 animate-spin"}):e.jsx(Bk,{className:"h-4 w-4"})})]})]})]})}function T$e(){return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsx(ui,{className:"h-8 w-8 text-blue-500"}),"Captain Cortex AI Assistant"]}),e.jsx("p",{className:"text-muted-foreground",children:"Ask questions about your properties, tasks, revenue, expenses, and bookings. Captain Cortex is the Smart Co-Pilot for Property Management with real-time access to all your data."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(A$e,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5 text-yellow-500"}),"AI Capabilities"]})}),e.jsx(D,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"What MR Pilot can help with:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Task scheduling and tracking"}),e.jsx("li",{children:" Revenue and expense analysis"}),e.jsx("li",{children:" Property performance insights"}),e.jsx("li",{children:" Booking status and availability"}),e.jsx("li",{children:" Financial reporting"}),e.jsx("li",{children:" Maintenance scheduling"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pa,{className:"h-5 w-5 text-green-500"}),"Live Data Access"]})}),e.jsx(D,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Connected to:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" All property records"}),e.jsx("li",{children:" Task management system"}),e.jsx("li",{children:" Booking calendar"}),e.jsx("li",{children:" Financial transactions"}),e.jsx("li",{children:" Expense tracking"}),e.jsx("li",{children:" Revenue reporting"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5 text-blue-500"}),"Security & Privacy"]})}),e.jsx(D,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Data Protection:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Organization-level data isolation"}),e.jsx("li",{children:" Role-based access control"}),e.jsx("li",{children:" Encrypted API communication"}),e.jsx("li",{children:" No data stored by AI provider"})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-lg",children:"Example Questions"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"What tasks do we have for tomorrow?"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"Show me revenue from Villa Tropical Paradise in March"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"What were the electric charges for Villa Aruna in May?"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"Which properties have bookings this week?"'})]})})]})]})]})]})}const D$e=[{id:1,name:"Villa Samui Breeze",location:"Samui, Thailand",price:8e3,bedrooms:3,bathrooms:2,guests:6,rating:4.8,image:"",commission:800,amenities:["Pool","WiFi","Kitchen","AC"]},{id:2,name:"Villa Ocean View",location:"Phuket, Thailand",price:6500,bedrooms:2,bathrooms:2,guests:4,rating:4.7,image:"",commission:650,amenities:["Ocean View","WiFi","Kitchen","Pool"]},{id:3,name:"Villa Tropical Paradise",location:"Koh Phi Phi, Thailand",price:12e3,bedrooms:4,bathrooms:3,guests:8,rating:4.9,image:"",commission:1200,amenities:["Private Beach","Pool","WiFi","Kitchen"]},{id:4,name:"Villa Aruna Demo",location:"Krabi, Thailand",price:2e4,bedrooms:5,bathrooms:4,guests:10,rating:4.9,image:"",commission:2e3,amenities:["Luxury","Pool","WiFi","Kitchen","Spa"]}];function E$e(){const[t,s]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(""),[l,o]=b.useState(""),[c,d]=b.useState(!1),u=b.useMemo(()=>D$e.filter(h=>{const x=t===""||h.name.toLowerCase().includes(t.toLowerCase())||h.location.toLowerCase().includes(t.toLowerCase()),p=(!n||h.price>=parseInt(n))&&(!a||h.price<=parseInt(a)),f=!l||h.guests>=parseInt(l);return x&&p&&f}),[t,n,a,l]),m=h=>{h.preventDefault(),d(!0)};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"h-5 w-5"}),"Generate Client Quote"]})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Destination"}),e.jsx(G,{placeholder:"Search destination...",value:t,onChange:h=>s(h.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Budget Range (THB)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{placeholder:"Min",type:"number",value:n,onChange:h=>r(h.target.value)}),e.jsx(G,{placeholder:"Max",type:"number",value:a,onChange:h=>i(h.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Guests"}),e.jsx(G,{placeholder:"Number of guests",type:"number",value:l,onChange:h=>o(h.target.value)})]}),e.jsxs(M,{type:"submit",className:"md:col-span-3 bg-blue-600 hover:bg-blue-700",children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Search Properties"]})]})})]}),(c||t||n||a||l)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Found ",u.length," Properties"]}),e.jsxs(z,{variant:"secondary",children:["Total Commission: ",u.reduce((h,x)=>h+x.commission,0).toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(h=>e.jsx(E,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:h.image}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.name}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(ws,{className:"h-3 w-3"}),h.location]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(ks,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:h.rating})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[h.bedrooms," bed"]}),e.jsxs("span",{children:[h.bathrooms," bath"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"h-3 w-3"}),h.guests]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["",h.price.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Commission: ",h.commission.toLocaleString()]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:h.amenities.map(x=>e.jsx(z,{variant:"outline",className:"text-xs",children:x},x))}),e.jsx(M,{className:"w-full bg-green-600 hover:bg-green-700",children:"Generate Quote"})]})},h.id))}),u.length===0&&e.jsx(E,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No properties match your search criteria."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters."})]})})]})]})}function O$e(){return e.jsx(E$e,{})}function M$e(){return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"My Commissions"}),e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Villa"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Guest"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Booking"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Commission"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"20/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Sky"}),e.jsx("td",{className:"px-4 py-2",children:"John D."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"Paid"})}),e.jsx("td",{className:"px-4 py-2",children:"42,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"4,200"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"18/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Samui Breeze"}),e.jsx("td",{className:"px-4 py-2",children:"Sarah M."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm",children:"Pending"})}),e.jsx("td",{className:"px-4 py-2",children:"35,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"3,500"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"15/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Tropical Paradise"}),e.jsx("td",{className:"px-4 py-2",children:"Mike J."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"Paid"})}),e.jsx("td",{className:"px-4 py-2",children:"48,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"4,800"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"12/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Ocean View"}),e.jsx("td",{className:"px-4 py-2",children:"Lisa T."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"Paid"})}),e.jsx("td",{className:"px-4 py-2",children:"28,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"2,800"})]})]})]})]})}function _$e(){return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Client Proposals"}),e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:"Proposal #1  Villa Sky  42,000  Status: Sent"}),e.jsx("li",{children:"Proposal #2  Villa Waterfall  33,000  Status: Confirmed"}),e.jsx("li",{children:"Proposal #3  Villa Samui Breeze  40,000  Status: Draft"}),e.jsx("li",{children:"Proposal #4  Villa Ocean View  26,000  Status: Sent"}),e.jsx("li",{children:"Proposal #5  Villa Tropical Paradise  48,000  Status: Confirmed"})]})]})}const R$e=[{id:1,name:"Villa Samui Breeze - Pool View",property:"Villa Samui Breeze",type:"image",size:"4.2MB",resolution:"4K",format:"JPG",category:"exterior",icon:"",downloadUrl:"#"},{id:2,name:"Villa Ocean View - Sunset",property:"Villa Ocean View",type:"image",size:"3.8MB",resolution:"4K",format:"JPG",category:"exterior",icon:"",downloadUrl:"#"},{id:3,name:"Villa Tropical Paradise - Tour",property:"Villa Tropical Paradise",type:"video",size:"45MB",resolution:"1080p",format:"MP4",category:"tour",icon:"",downloadUrl:"#"},{id:4,name:"Villa Aruna - Luxury Interior",property:"Villa Aruna Demo",type:"image",size:"5.1MB",resolution:"4K",format:"JPG",category:"interior",icon:"",downloadUrl:"#"},{id:5,name:"Villa Samui Breeze - Bedroom",property:"Villa Samui Breeze",type:"image",size:"3.2MB",resolution:"4K",format:"JPG",category:"interior",icon:"",downloadUrl:"#"},{id:6,name:"Villa Ocean View - Kitchen",property:"Villa Ocean View",type:"image",size:"2.9MB",resolution:"4K",format:"JPG",category:"interior",icon:"",downloadUrl:"#"},{id:7,name:"Villa Tropical Paradise - Aerial",property:"Villa Tropical Paradise",type:"video",size:"32MB",resolution:"4K",format:"MP4",category:"aerial",icon:"",downloadUrl:"#"},{id:8,name:"Villa Aruna - Fact Sheet",property:"Villa Aruna Demo",type:"document",size:"1.2MB",resolution:"PDF",format:"PDF",category:"marketing",icon:"",downloadUrl:"#"}],I$e=["All Properties","Villa Samui Breeze","Villa Ocean View","Villa Tropical Paradise","Villa Aruna Demo"],$$e=["All Categories","exterior","interior","tour","aerial","marketing"],F$e=["All Types","image","video","document"];function L$e(){const[t,s]=b.useState(""),[n,r]=b.useState("All Properties"),[a,i]=b.useState("All Categories"),[l,o]=b.useState("All Types"),c=b.useMemo(()=>R$e.filter(x=>{const p=t===""||x.name.toLowerCase().includes(t.toLowerCase())||x.property.toLowerCase().includes(t.toLowerCase()),f=n==="All Properties"||x.property===n,j=a==="All Categories"||x.category===a,g=l==="All Types"||x.type===l;return p&&f&&j&&g}),[t,n,a,l]),d=x=>{switch(x){case"image":return e.jsx(Lk,{className:"h-4 w-4"});case"video":return e.jsx(rF,{className:"h-4 w-4"});case"document":return e.jsx(vt,{className:"h-4 w-4"});default:return e.jsx(vt,{className:"h-4 w-4"})}},u=x=>{switch(x){case"image":return"bg-blue-100 text-blue-800";case"video":return"bg-purple-100 text-purple-800";case"document":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=x=>{console.log(`Downloading ${x.name}`)},h=()=>{s(""),r("All Properties"),i("All Categories"),o("All Types")};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs(E,{className:"mb-6",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5"}),"Media Library"]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(G,{placeholder:"Search media...",value:t,onChange:x=>s(x.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsx(te,{children:I$e.map(x=>e.jsx(A,{value:x,children:x},x))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsx(te,{children:$$e.map(x=>e.jsx(A,{value:x,children:x},x))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(se,{value:l,onValueChange:o,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsx(te,{children:F$e.map(x=>e.jsx(A,{value:x,children:x},x))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{variant:"secondary",children:[c.length," items found"]}),e.jsxs(z,{variant:"outline",children:["Total size: ",c.reduce((x,p)=>x+parseFloat(p.size),0).toFixed(1),"MB"]})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(Zi,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(x=>e.jsx(E,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 rounded-lg mb-3 flex items-center justify-center relative",children:[e.jsx("div",{className:"text-4xl",children:x.icon}),e.jsx(z,{className:`absolute top-2 right-2 ${u(x.type)}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[d(x.type),e.jsx("span",{className:"text-xs",children:x.type})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm leading-tight",children:x.name}),e.jsx("p",{className:"text-xs text-gray-600",children:x.property}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:x.resolution}),e.jsx("span",{children:x.size})]}),e.jsx(z,{variant:"outline",className:"text-xs",children:x.category}),e.jsxs(M,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",onClick:()=>m(x),children:[e.jsx(Ns,{className:"h-3 w-3 mr-1"}),"Download ",x.format]})]})]})},x.id))}),c.length===0&&e.jsx(E,{children:e.jsxs(D,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No media files match your criteria"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your search or filters"})]})})]})}function B$e(){return e.jsx(L$e,{})}const Hw=[{rank:1,name:"Ploy",bookings:12,earnings:89e3,bonus:"Dinner voucher",trend:"+15%"},{rank:2,name:"Sarah",bookings:8,earnings:65e3,bonus:"Spa day",trend:"+8%"},{rank:3,name:"Lisa",bookings:6,earnings:42e3,bonus:"Gift card",trend:"+3%"},{rank:4,name:"Anna",bookings:5,earnings:38e3,bonus:"Movie tickets",trend:"-2%"},{rank:5,name:"Emma",bookings:4,earnings:28e3,bonus:"Coffee voucher",trend:"+5%"}],Gw=[{rank:1,name:"George",referrals:9,earnings:54e3,bonus:"2-night stay",trend:"+12%"},{rank:2,name:"Mike",referrals:7,earnings:42e3,bonus:"Restaurant voucher",trend:"+6%"},{rank:3,name:"David",referrals:5,earnings:31e3,bonus:"Spa treatment",trend:"+4%"},{rank:4,name:"James",referrals:4,earnings:24e3,bonus:"Shopping voucher",trend:"-1%"},{rank:5,name:"Robert",referrals:3,earnings:18e3,bonus:"Activity pass",trend:"+2%"}],Xg={name:"Anna K.",type:"Retail Agent",earnings:125e3,prize:"Weekend getaway prize"};function V$e(){const t=n=>{switch(n){case 1:return e.jsx(ri,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(Fk,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(ks,{className:"h-5 w-5 text-orange-500"});default:return e.jsx("span",{className:"h-5 w-5 flex items-center justify-center text-sm font-bold",children:n})}},s=n=>n.startsWith("+")?"text-green-600":n.startsWith("-")?"text-red-600":"text-gray-600";return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Agent Leaderboard"}),e.jsx("p",{className:"text-gray-600",children:"Top performing agents this month"})]}),e.jsxs(E,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(ri,{className:"h-6 w-6"}),"Last Month's Champion"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:Xg.name}),e.jsx("p",{className:"text-gray-600",children:Xg.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["",Xg.earnings.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:Xg.prize})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-blue-600"}),"Retail Agents - This Month"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:Hw.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(n.rank),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.bookings," bookings"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",n.earnings.toLocaleString()]}),e.jsx(z,{variant:"outline",className:s(n.trend),children:n.trend})]}),e.jsx("p",{className:"text-xs text-gray-500",children:n.bonus})]})]},n.rank))})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-purple-600"}),"Referral Agents - This Month"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:Gw.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(n.rank),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.referrals," referrals"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["",n.earnings.toLocaleString()]}),e.jsx(z,{variant:"outline",className:s(n.trend),children:n.trend})]}),e.jsx("p",{className:"text-xs text-gray-500",children:n.bonus})]})]},n.rank))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(E,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Hw.reduce((n,r)=>n+r.bookings,0)}),e.jsx("p",{className:"text-sm text-gray-500",children:"This month"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Referrals"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Gw.reduce((n,r)=>n+r.referrals,0)}),e.jsx("p",{className:"text-sm text-gray-500",children:"This month"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",(Hw.reduce((n,r)=>n+r.earnings,0)+Gw.reduce((n,r)=>n+r.earnings,0)).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Combined"})]})})]})]})}function U$e(){return e.jsx(V$e,{})}function z$e(){const[t,s]=b.useState(""),r=b.useMemo(()=>[{title:"Admin Dashboard",emoji:"",description:"Comprehensive overview of all properties, bookings, tasks, and financial metrics",href:"/",icon:pn,badge:"Main",color:"bg-emerald-50/50 hover:bg-emerald-100/70 border-emerald-200/60",keywords:["admin","overview","main","dashboard","analytics"]},{title:"Financial Dashboard",emoji:"",description:"Revenue tracking, expense analysis, and financial performance insights",href:"/finance-hub",icon:Je,badge:"Finance",color:"bg-teal-50/50 hover:bg-teal-100/70 border-teal-200/60",keywords:["finance","revenue","money","financial","analytics"]},{title:"Property Dashboard",emoji:"",description:"Property-specific metrics, occupancy rates, and performance analytics",href:"/property-hub",icon:ln,badge:"Properties",color:"bg-cyan-50/50 hover:bg-cyan-100/70 border-cyan-200/60",keywords:["property","building","occupancy","real estate"]},{title:"Task Overview",emoji:"",description:"Global task monitoring across all properties with staff performance tracking",href:"/tasks",icon:wl,badge:"Operations",color:"bg-green-50/50 hover:bg-green-100/70 border-green-200/60",keywords:["tasks","operations","staff","monitoring","workflow"]},{title:"Daily Operations",emoji:"",description:"Today's activities, urgent tasks, and operational status overview",href:"/daily-operations",icon:Gs,badge:"Today",color:"bg-slate-50/50 hover:bg-slate-100/70 border-slate-200/60",keywords:["daily","today","urgent","activities","operations"]},{title:"Portfolio Manager Dashboard",emoji:"",description:"Multi-property portfolio insights and management tools",href:"/portfolio-manager-dashboard",icon:Bt,badge:"Portfolio",color:"bg-emerald-50/50 hover:bg-emerald-100/70 border-emerald-200/60",keywords:["portfolio","manager","insights","analytics","trends"]}],[]).filter(i=>{if(!t.trim())return!0;const l=t.toLowerCase();return i.title.toLowerCase().includes(l)||i.description.toLowerCase().includes(l)||i.badge.toLowerCase().includes(l)||i.keywords.some(o=>o.includes(l))}),a=new Date().toLocaleDateString();return e.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-6 lg:px-8 py-3",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx(ec,{title:"Dashboard Hub",subtitle:"Access all dashboard views and analytics from one central location"}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl mt-2 font-bold text-slate-900 dark:text-slate-100 tracking-tight",children:"Dashboard Hub"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 sm:mt-3 text-base sm:text-lg font-medium tracking-wide",children:"Access all dashboard views and analytics from one central location"})]}),e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"relative max-w-xl sm:max-w-2xl mx-auto",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx(G,{type:"text",placeholder:"Search dashboards...",value:t,onChange:i=>s(i.target.value),className:"pl-10 pr-4 py-3 rounded-xl border-2 border-slate-200/60 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200 shadow-sm hover:shadow-md bg-white/80 backdrop-blur-sm w-full","aria-label":"Search dashboards"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mt-6",children:r.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsxs("div",{className:"text-slate-400 text-lg font-medium",children:['No dashboards found matching "',t,'"']}),e.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Try adjusting your search terms"})]}):r.map(i=>(i.icon,e.jsx(nn,{href:i.href,children:e.jsx("a",{className:`block h-full no-underline rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-200 ${i.color}`,"aria-label":`Open ${i.title}`,children:e.jsxs(E,{className:"h-full cursor-pointer transition-all duration-300 ease-in-out hover:shadow-xl hover:-translate-y-1 hover:scale-[1.02] border-2 shadow-lg bg-gradient-to-br from-emerald-50/30 to-white rounded-2xl",children:[e.jsx(L,{className:"pb-4 pt-6 px-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:i.emoji}),e.jsx(B,{className:"text-base sm:text-lg md:text-lg font-bold text-slate-800 dark:text-slate-100 leading-tight whitespace-normal break-words",children:i.title})]})}),e.jsx(z,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 border-emerald-200 rounded-md px-2 py-0.5 font-semibold text-xs flex-shrink-0",children:i.badge})]})}),e.jsx(D,{className:"px-6 pb-6 flex-1",children:e.jsx("p",{className:"text-sm sm:text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium",children:i.description})})]})})},i.href)))}),e.jsx("div",{className:"mt-10 sm:mt-12 pt-6 border-t border-slate-200/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-6 text-sm text-slate-400 font-medium",children:[e.jsxs("span",{children:["Last updated: ",a]}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"System Online"})]}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-1 rounded-md text-xs font-semibold",children:"v2.0.1"})]})})]})}function q$e({filters:t,onFiltersChange:s,totalProperties:n,filteredCount:r}){const[a,i]=X.useState(!1),l=(d,u)=>s({...t,[d]:u}),o=()=>s({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),c=(t.search?1:0)+(t.location?1:0)+(t.status?1:0)+(t.propertyType?1:0)+(t.occupancyMin>0||t.occupancyMax<100?1:0)+(t.roiMin>0||t.roiMax<50?1:0)+(t.hasMaintenanceTasks?1:0)+(t.lastBookingFrom||t.lastBookingTo?1:0);return e.jsxs(E,{className:"mb-6 bg-gradient-to-br from-white/60 to-slate-50/40 border-slate-200/40 shadow-sm",children:[e.jsx(L,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(Zi,{className:"h-5 w-5 text-emerald-700"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(B,{className:"text-sm font-semibold truncate text-slate-800",children:"Property Filters"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[r," / ",n," shown",c>0&&e.jsxs("span",{className:"ml-2 inline-flex items-center bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full text-[11px]",children:[c," active"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>{const d=`name,location,status
`,u=new Blob([d],{type:"text/csv"}),m=document.createElement("a");m.href=URL.createObjectURL(u),m.download="properties.csv",m.click()},children:" Export"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>window.print(),children:" Print"}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>c?o():i(d=>!d),children:c?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(on,{className:"h-4 w-4"})," Clear"]}):e.jsx("span",{className:"text-sm",children:a?"Close":"Advanced"})})]})]})}),e.jsxs(D,{className:"p-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-center",children:[e.jsx("div",{className:"col-span-1 sm:col-span-2",children:e.jsx(G,{placeholder:"Search properties...",value:t.search,onChange:d=>l("search",d.target.value),className:"w-full bg-white/80"})}),e.jsx("div",{className:"flex gap-2 items-center justify-end",children:e.jsxs(se,{value:t.location||"all",onValueChange:d=>l("location",d==="all"?"":d),children:[e.jsx(ee,{className:"min-w-[120px] text-sm",children:e.jsx(ne,{placeholder:"Location"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All"}),e.jsx(A,{value:"chaweng",children:"Chaweng"}),e.jsx(A,{value:"lamai",children:"Lamai"}),e.jsx(A,{value:"bophut",children:"Bophut"}),e.jsx(A,{value:"maenam",children:"Maenam"}),e.jsx(A,{value:"bangrak",children:"Bang Rak"})]})]})})]}),e.jsxs("div",{className:`mt-3 grid gap-3 ${a?"grid-cols-1 md:grid-cols-3":"hidden"}`,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(ws,{className:"h-4 w-4 text-emerald-600"}),"Status & Type"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(se,{value:t.status||"all",onValueChange:d=>l("status",d==="all"?"":d),children:[e.jsx(ee,{className:"min-w-[140px] text-sm",children:e.jsx(ne,{placeholder:"Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(se,{value:t.propertyType||"all",onValueChange:d=>l("propertyType",d==="all"?"":d),children:[e.jsx(ee,{className:"min-w-[140px] text-sm",children:e.jsx(ne,{placeholder:"Type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"villa",children:"Villa"}),e.jsx(A,{value:"apartment",children:"Apartment"}),e.jsx(A,{value:"condo",children:"Condo"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(Bt,{className:"h-4 w-4 text-teal-600"}),"Occupancy & ROI"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{type:"number",value:t.occupancyMin,onChange:d=>l("occupancyMin",parseInt(d.target.value)||0),className:"w-20 text-sm",placeholder:"Min %"}),e.jsx(G,{type:"number",value:t.occupancyMax,onChange:d=>l("occupancyMax",parseInt(d.target.value)||100),className:"w-20 text-sm",placeholder:"Max %"}),e.jsx(G,{type:"number",value:t.roiMin,onChange:d=>l("roiMin",parseInt(d.target.value)||0),className:"w-20 text-sm",placeholder:"ROI Min"}),e.jsx(G,{type:"number",value:t.roiMax,onChange:d=>l("roiMax",parseInt(d.target.value)||50),className:"w-20 text-sm",placeholder:"ROI Max"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(tt,{className:"h-4 w-4 text-emerald-600"}),"Last Booking"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(G,{type:"date",value:t.lastBookingFrom,onChange:d=>l("lastBookingFrom",d.target.value),className:"text-sm"}),e.jsx(G,{type:"date",value:t.lastBookingTo,onChange:d=>l("lastBookingTo",d.target.value),className:"text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.hasMaintenanceTasks,onChange:d=>l("hasMaintenanceTasks",d.target.checked),className:"h-4 w-4"}),e.jsx("span",{children:"Has maintenance"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>i(!1),children:"Close"}),e.jsx(M,{size:"sm",onClick:()=>{i(!1)},children:"Apply"})]})]})]})]}),c>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t.search&&e.jsxs(z,{className:"flex items-center gap-2",children:["Search: ",t.search,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("search","")})]}),t.location&&e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-3 w-3"}),t.location,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("location","")})]}),t.status&&e.jsxs(z,{className:"flex items-center gap-2",children:["Status: ",t.status,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("status","")})]})]})]})]})}function H$e({selectedProperties:t,onClearSelection:s,onRefresh:n}){var u,m,h;const[r,a]=b.useState({isOpen:!1,action:"",data:null}),{toast:i}=at();if(t.length===0)return null;const l=()=>{a({isOpen:!0,action:"assign-manager",data:{selectedCount:t.length}})},o=()=>{a({isOpen:!0,action:"update-status",data:{selectedCount:t.length}})},c=()=>{a({isOpen:!0,action:"archive",data:{selectedCount:t.length}})},d=async(x,p)=>{try{await new Promise(j=>setTimeout(j,1e3));let f="";switch(x){case"assign-manager":f=`Assigned ${p.manager} to ${t.length} properties`;break;case"update-status":f=`Updated status to "${p.status}" for ${t.length} properties`;break;case"archive":f=`Archived ${t.length} properties`;break}i({title:"Bulk Action Completed",description:f}),a({isOpen:!1,action:"",data:null}),s(),n()}catch{i({title:"Error",description:"Failed to execute bulk action. Please try again.",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mb-6 border-blue-200 bg-blue-50",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wl,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"font-medium text-blue-900",children:[t.length," propert",t.length===1?"y":"ies"," selected"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.slice(0,3).map((x,p)=>e.jsx(z,{variant:"secondary",className:"text-xs",children:x.name},p)),t.length>3&&e.jsxs(z,{variant:"secondary",className:"text-xs",children:["+",t.length-3," more"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:l,className:"flex items-center gap-1",children:[e.jsx(dt,{className:"h-4 w-4"}),"Assign Manager"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:o,className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Update Status"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-1 text-orange-600 hover:text-orange-700",children:[e.jsx(cX,{className:"h-4 w-4"}),"Archive"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-slate-700",children:e.jsx(on,{className:"h-4 w-4"})})]})]})})}),e.jsx(Ke,{open:r.isOpen,onOpenChange:x=>a({isOpen:x,action:"",data:null}),children:e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{children:[r.action==="assign-manager"&&"Assign Property Manager",r.action==="update-status"&&"Update Property Status",r.action==="archive"&&"Archive Properties"]}),e.jsxs(Rt,{children:[r.action==="assign-manager"&&`Select a property manager to assign to ${(u=r.data)==null?void 0:u.selectedCount} selected properties.`,r.action==="update-status"&&`Choose the new status for ${(m=r.data)==null?void 0:m.selectedCount} selected properties.`,r.action==="archive"&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[e.jsx(Et,{className:"h-4 w-4"}),"This will archive ",(h=r.data)==null?void 0:h.selectedCount," properties. They will be hidden from the main view but can be restored later."]})]})]}),e.jsxs("div",{className:"py-4",children:[r.action==="assign-manager"&&e.jsxs(se,{defaultValue:"manager1",children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select Property Manager"})}),e.jsxs(te,{children:[e.jsx(A,{value:"manager1",children:"John Smith"}),e.jsx(A,{value:"manager2",children:"Sarah Johnson"}),e.jsx(A,{value:"manager3",children:"Mike Chen"}),e.jsx(A,{value:"manager4",children:"Lisa Wong"})]})]}),r.action==="update-status"&&e.jsxs(se,{defaultValue:"active",children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select Status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"maintenance",children:"Under Maintenance"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),r.action==="archive"&&e.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:e.jsx("p",{className:"text-sm text-orange-800",children:"Archived properties will be moved to the archive section and will not appear in regular property listings. You can restore them at any time from the archive."})})]}),e.jsxs(ir,{children:[e.jsx(M,{variant:"outline",onClick:()=>a({isOpen:!1,action:"",data:null}),children:"Cancel"}),e.jsx(M,{onClick:()=>{const x=r.action==="assign-manager"?{manager:"John Smith"}:r.action==="update-status"?{status:"active"}:{};d(r.action,x)},children:r.action==="archive"?"Archive Properties":"Apply Changes"})]})]})})]})}function G$e({properties:t,bookings:s,onBookingReschedule:n}){const[,r]=Yn(),[a,i]=b.useState(new Date),[l,o]=b.useState("all"),[c,d]=b.useState("month"),[u,m]=b.useState(null),[h,x]=b.useState(null),[p,f]=b.useState(null);console.log("selectedBooking",p);const[j,g]=b.useState(!1),{toast:y}=at(),v=yt(),[w,N]=b.useState(s);X.useEffect(()=>{N(s)},[s]);const S=Ee({mutationFn:async({bookingId:pe,newCheckIn:F,newCheckOut:Q})=>ve("PATCH",`/api/bookings/${pe}`,{checkIn:F,checkOut:Q}),onMutate:async({bookingId:pe,newCheckIn:F,newCheckOut:Q})=>{const Z=w,le=w.map(oe=>oe.id===pe?{...oe,checkIn:F,checkOut:Q}:oe);return N(le),n==null||n(pe,F,Q),{previousBookings:Z}},onSuccess:(pe,F)=>{Np(v),y({title:" Booking Rescheduled",description:"Successfully moved booking to new dates",variant:"default"})},onError:(pe,F,Q)=>{Q!=null&&Q.previousBookings&&N(Q.previousBookings),console.error("Error rescheduling booking:",pe),y({title:" Rescheduling Failed",description:"Unable to reschedule booking. Please try again.",variant:"destructive"})}}),k=pe=>{const F=new Date(pe.getFullYear(),pe.getMonth(),1),Z=new Date(pe.getFullYear(),pe.getMonth()+1,0).getDate(),le=F.getDay(),oe=[];for(let Ae=0;Ae<le;Ae++)oe.push(null);for(let Ae=1;Ae<=Z;Ae++)oe.push(new Date(pe.getFullYear(),pe.getMonth(),Ae));return oe},T=pe=>{const F=pe.getFullYear(),Q=String(pe.getMonth()+1).padStart(2,"0"),Z=String(pe.getDate()).padStart(2,"0");return`${F}-${Q}-${Z}`},C=pe=>{if(!pe)return[];const F=T(pe);return w.filter(Q=>{const Z=Q.checkIn.split("T")[0],le=Q.checkOut.split("T")[0];return F>=Z&&F<le}).filter(Q=>l==="all"||Q.propertyId.toString()===l)},P=(pe,F)=>{const Q=new Date(F.checkIn),Z=new Date(F.checkOut),le=Math.ceil((Z.getTime()-Q.getTime())/(1e3*60*60*24)),oe=new Date(pe);return oe.setDate(oe.getDate()+le),w.some(Ae=>{if(Ae.id===F.id||Ae.propertyId!==F.propertyId)return!1;const ge=new Date(Ae.checkIn),xe=new Date(Ae.checkOut);return pe>=ge&&pe<xe||oe>ge&&oe<=xe||pe<=ge&&oe>=xe})},$=pe=>{switch(pe){case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"checked-in":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},V=pe=>{switch(pe){case"confirmed":return"bg-blue-500";case"pending":return"bg-yellow-500";case"cancelled":return"bg-red-500";case"checked-in":return"bg-green-500";case"completed":return"bg-purple-500";default:return"bg-gray-500"}},I=(pe,F)=>{m(F),pe.dataTransfer.effectAllowed="move"},_=(pe,F)=>{pe.preventDefault(),pe.dataTransfer.dropEffect="move",x(F)},U=()=>{x(null)},H=(pe,F)=>{if(pe.preventDefault(),u&&F){if(u.status==="checked-in"||u.status==="completed"){y({title:" Cannot Reschedule",description:"Bookings that are checked-in or completed cannot be rescheduled.",variant:"destructive"}),m(null),x(null);return}if(P(F,u)){y({title:" Scheduling Conflict",description:"These dates conflict with an existing booking for this property.",variant:"destructive"}),m(null),x(null);return}const Q=new Date(u.checkIn),Z=new Date(u.checkOut),le=Math.ceil((Z.getTime()-Q.getTime())/(1e3*60*60*24)),oe=new Date(F),Ae=new Date(F);Ae.setDate(Ae.getDate()+le);const ge=new Date;if(ge.setHours(0,0,0,0),oe<ge){y({title:" Invalid Date",description:"Cannot schedule bookings in the past.",variant:"destructive"}),m(null),x(null);return}S.mutate({bookingId:u.id,newCheckIn:oe.toISOString(),newCheckOut:Ae.toISOString()})}m(null),x(null)},Y=pe=>e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:pe.guestName}),e.jsx("div",{className:"text-xs text-slate-600",children:pe.propertyName}),e.jsx("div",{className:"text-xs font-medium text-emerald-600",children:O(pe.totalAmount)}),e.jsx("div",{className:"text-xs text-slate-500",children:"Click to view details"})]}),O=pe=>`${(pe==null?void 0:pe.toLocaleString())||"0"}`,R=(pe,F)=>{if(pe.stopPropagation(),F.guestId)r(`/guests/${F.guestId}`);else{const Q=[];F.guestEmail&&Q.push(`Email: ${F.guestEmail}`),F.guestPhone&&Q.push(`Phone: ${F.guestPhone}`),y({title:`Guest: ${F.guestName}`,description:Q.length>0?Q.join(`
`):"No contact information available"})}},q=(pe,F)=>{pe.stopPropagation(),F.invoiceId?r(`/finance?invoice=${F.invoiceId}`):y({title:"Booking Invoice",description:`Booking #${F.id}
Amount: ${O(F.totalAmount)}
Status: ${F.status}`})},re=(pe,F)=>{pe.stopPropagation(),f(F),g(!0)},we=pe=>{i(F=>{const Q=new Date(F);return pe==="prev"?Q.setMonth(F.getMonth()-1):Q.setMonth(F.getMonth()+1),Q})},K=["January","February","March","April","May","June","July","August","September","October","November","December"],Ce=k(a);return l==="all"||t.filter(pe=>pe.id.toString()===l),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Multi-Property Calendar"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(se,{value:l,onValueChange:o,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"Select Property"})}),e.jsxs(te,{children:[e.jsxs(A,{value:"all",children:["All Properties (",t.length,")"]}),t.map(pe=>e.jsx(A,{value:pe.id.toString(),children:pe.name},pe.id))]})]}),u&&e.jsxs("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full border border-blue-200 animate-pulse",children:[" Rescheduling ",u.guestName,"..."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>we("prev"),children:e.jsx(Nf,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-lg font-semibold min-w-[140px] text-center",children:[K[a.getMonth()]," ",a.getFullYear()]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>we("next"),children:e.jsx(Dd,{className:"h-4 w-4"})})]})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(pe=>e.jsx("div",{className:"p-2 text-center font-medium text-slate-600 bg-slate-50 rounded",children:pe},pe))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:Ce.map((pe,F)=>{const Q=C(pe),Z=pe?pe.toDateString()===new Date().toDateString():!1,le=h&&pe&&h.toDateString()===pe.toDateString();return e.jsx(Df,{children:e.jsx("div",{className:`min-h-[120px] p-2 border rounded-lg transition-all ${pe?"bg-white hover:bg-slate-50":"bg-slate-50"} ${Z?"ring-2 ring-emerald-500":""} ${le?"ring-2 ring-blue-400 bg-blue-50":""}`,onDragOver:pe?oe=>_(oe,pe):void 0,onDragLeave:U,onDrop:pe?oe=>H(oe,pe):void 0,children:pe&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`text-sm font-medium ${Z?"text-emerald-600":"text-slate-700"}`,children:pe.getDate()}),Q.length>0&&e.jsxs("div",{className:"flex gap-1",children:[Array.from(new Set(Q.map(oe=>oe.status))).slice(0,3).map((oe,Ae)=>e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${V(oe)} cursor-help hover:scale-125 transition-transform`})}),e.jsx(gl,{children:e.jsxs("div",{className:"text-xs",children:[oe.charAt(0).toUpperCase()+oe.slice(1)," ","(",Q.filter(ge=>ge.status===oe).length,")"]})})]},Ae)),Q.length>3&&e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400 cursor-help hover:scale-125 transition-transform"})}),e.jsx(gl,{children:e.jsxs("div",{className:"text-xs",children:[Q.length," total bookings"]})})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[Q.slice(0,2).map(oe=>e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:e.jsxs("div",{className:"group cursor-pointer",draggable:!0,onDragStart:Ae=>I(Ae,oe),onClick:Ae=>re(Ae,oe),children:[e.jsxs("div",{className:`text-xs p-1 rounded border transition-all hover:shadow-md group-hover:shadow-emerald-200 ${$(oe.status)} ${(u==null?void 0:u.id)===oe.id?"opacity-50 scale-95":""}`,children:[e.jsxs("div",{className:"font-medium truncate flex items-center gap-1",children:[e.jsx(ND,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity text-slate-600"}),oe.guestName]}),e.jsx("div",{className:"truncate opacity-75",children:oe.propertyName}),e.jsx("div",{className:"text-[10px] font-medium text-emerald-600",children:O(oe.totalAmount)})]}),e.jsxs("div",{className:"invisible group-hover:visible flex gap-1 mt-1",children:[e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Guest Profile",onClick:Ae=>R(Ae,oe),"data-testid":`button-guest-${oe.id}`,children:e.jsx(Ht,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Invoice",onClick:Ae=>q(Ae,oe),"data-testid":`button-invoice-${oe.id}`,children:e.jsx(vt,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Details",onClick:Ae=>re(Ae,oe),"data-testid":`button-details-${oe.id}`,children:e.jsx(Gt,{className:"h-3 w-3"})})]})]})}),e.jsx(gl,{side:"top",className:"p-0",children:Y(oe)})]},oe.id)),Q.length>2&&e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:e.jsxs("div",{className:"text-xs text-slate-500 text-center py-1 hover:text-slate-700 cursor-pointer rounded hover:bg-slate-100",children:["+",Q.length-2," more"]})}),e.jsx(gl,{children:e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:"Additional Bookings"}),Q.slice(2).map(oe=>e.jsxs("div",{className:"text-xs",children:[oe.guestName," -"," ",oe.propertyName]},oe.id))]})})]})]})]})})},F)})})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Booking Status Legend"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),e.jsx("span",{className:"text-xs",children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{className:"text-xs",children:"Checked-in"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-purple-500"}),e.jsx("span",{className:"text-xs",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),e.jsx("span",{className:"text-xs",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("h4",{className:"text-sm font-medium mb-2 text-emerald-800",children:"Enterprise Features"}),e.jsxs("div",{className:"text-xs text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ND,{className:"h-3 w-3"}),e.jsx("span",{children:"Drag bookings to reschedule dates instantly"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"h-3 w-3"}),e.jsx("span",{children:"Hover over bookings for detailed revenue & guest info"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{children:"Status dots show booking states at a glance"})]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-lg font-bold text-blue-800",children:s.filter(pe=>pe.status==="confirmed").length}),e.jsx("div",{className:"text-xs text-blue-600",children:"Confirmed Bookings"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-lg font-bold text-green-800",children:s.filter(pe=>pe.status==="checked-in").length}),e.jsx("div",{className:"text-xs text-green-600",children:"Currently Checked-in"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-800",children:s.filter(pe=>pe.status==="pending").length}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Pending Confirmation"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-lg font-bold text-purple-800",children:O(s.reduce((pe,F)=>pe+(F.totalAmount||0),0))}),e.jsx("div",{className:"text-xs text-purple-600",children:"Total Revenue"})]})]})]}),e.jsx(Ke,{open:j,onOpenChange:g,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:"Booking Details"})}),p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Guest Name"}),e.jsx("div",{className:"text-lg font-semibold",children:p.guestName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Property"}),e.jsx("div",{className:"text-lg font-semibold",children:p.propertyName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Check-in"}),e.jsx("div",{className:"text-lg",children:new Date(p.checkIn).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Check-out"}),e.jsx("div",{className:"text-lg",children:new Date(p.checkOut).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Status"}),e.jsx("div",{children:e.jsx(z,{className:$(p.status),children:p.status.charAt(0).toUpperCase()+p.status.slice(1)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Total Amount"}),e.jsx("div",{className:"text-lg font-bold text-emerald-600",children:O(p.totalAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Booking ID"}),e.jsxs("div",{className:"text-sm font-mono",children:["#",p.id]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Nights"}),e.jsxs("div",{className:"text-lg",children:[Math.ceil((new Date(p.checkOut).getTime()-new Date(p.checkIn).getTime())/(1e3*60*60*24))," ","night(s)"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(M,{variant:"outline",className:"flex-1",onClick:()=>{g(!1),r(`/bookings?id=${p.id}`)},children:"View Full Booking"}),e.jsx(M,{variant:"outline",className:"flex-1",onClick:()=>{g(!1),r(`/property/${p.propertyId}`)},children:"View Property"})]})]})]})})]})}function W$e({onCreateTask:t,selectedProperties:s}){const[n,r]=b.useState(!1),[a,i]=b.useState(null),[l,o]=b.useState(""),[c,d]=b.useState("all"),[u,m]=b.useState("all"),[h,x]=b.useState("all"),[p,f]=b.useState(new Set),{toast:j}=at(),g=Zt({defaultValues:{propertyId:"",dueDate:new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],estimatedCost:void 0,notes:""}}),{register:y}=g,v=g.watch("propertyId")??"",w=yt(),N=Ee({mutationFn:async O=>{const R=await ve("POST","/api/tasks",O);return R.json?R.json():R},onSuccess:()=>{w.invalidateQueries({queryKey:["/api/tasks"],exact:!1}),w.refetchQueries({queryKey:["/api/tasks"],exact:!1})}}),{data:S=[]}=ye({queryKey:["/api/properties"]}),k=s.length>0?s:Array.isArray(S)?S:[],T=[{id:"clean-checkin",title:"Pre-Arrival Deep Clean",description:"Complete cleaning and preparation for guest arrival",type:"cleaning",priority:"high",estimatedDuration:120,category:"Guest Services",instructions:["Deep clean all rooms including bathrooms","Change all bed linens and towels","Stock amenities and toiletries","Check and clean pool area","Inspect all appliances and electronics","Final walkthrough and photo documentation"],isCommon:!0},{id:"maintenance-ac",title:"Air Conditioning Maintenance",description:"Routine AC system inspection and maintenance",type:"maintenance",priority:"medium",estimatedDuration:90,category:"Maintenance",instructions:["Check and replace air filters","Clean condenser coils","Inspect refrigerant levels","Test thermostat functionality","Clean drainage system","Document findings and recommendations"],isCommon:!0},{id:"pool-weekly",title:"Weekly Pool Maintenance",description:"Comprehensive pool cleaning and chemical balance",type:"maintenance",priority:"medium",estimatedDuration:60,category:"Pool & Spa",instructions:["Test and balance water chemistry","Skim surface and empty baskets","Brush walls and vacuum pool","Clean pool deck and furniture","Inspect equipment and filters","Update maintenance log"],isCommon:!0},{id:"security-check",title:"Security & Safety Inspection",description:"Monthly security and safety systems check",type:"inspection",priority:"high",estimatedDuration:45,category:"Security",instructions:["Test all door and window locks","Check security cameras and lighting","Inspect fire safety equipment","Verify alarm system functionality","Test smoke and carbon monoxide detectors","Document any security concerns"],isCommon:!0},{id:"garden-maintenance",title:"Garden & Landscaping",description:"Regular garden maintenance and landscaping",type:"maintenance",priority:"low",estimatedDuration:120,category:"Landscaping",instructions:["Trim and prune plants and trees","Water all plants and gardens","Remove weeds and dead vegetation","Fertilize plants as needed","Clean outdoor furniture and decorations","Inspect irrigation system"],isCommon:!0},{id:"checkout-inspection",title:"Post-Checkout Inspection",description:"Property inspection after guest departure",type:"inspection",priority:"high",estimatedDuration:30,category:"Guest Services",instructions:["Complete room-by-room inspection","Document any damages or issues","Check inventory and missing items","Take photos of property condition","Report maintenance needs","Prepare damage assessment if needed"],isCommon:!0}],C=O=>{switch(O){case"high":return"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border-red-300 shadow-red-100";case"medium":return"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border-yellow-300 shadow-yellow-100";case"low":return"bg-gradient-to-r from-blue-100 to-blue-50 text-blue-800 border-blue-300 shadow-blue-100";default:return"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-800 border-gray-300 shadow-gray-100"}},P=O=>{switch(O){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-blue-500";default:return"bg-gray-500"}},$=O=>{switch(O){case"high":return e.jsx(Et,{className:"h-3 w-3"});case"medium":return e.jsx(et,{className:"h-3 w-3"});case"low":return e.jsx(Fe,{className:"h-3 w-3"});default:return e.jsx(et,{className:"h-3 w-3"})}},V=O=>{i(O),r(!0)},I=O=>{const R=new Set(p);R.has(O)?R.delete(O):R.add(O),f(R)},_=b.useMemo(()=>T.filter(O=>{const R=O.title.toLowerCase().includes(l.toLowerCase())||O.description.toLowerCase().includes(l.toLowerCase())||O.category.toLowerCase().includes(l.toLowerCase()),q=c==="all"||O.priority===c,re=u==="all"||O.category===u;let we=!0;return h==="short"?we=O.estimatedDuration<=60:h==="medium"?we=O.estimatedDuration>60&&O.estimatedDuration<=120:h==="long"&&(we=O.estimatedDuration>120),R&&q&&re&&we}),[l,c,u,h]),U=b.useMemo(()=>Array.from(new Set(T.map(O=>O.category))),[]),H=b.useMemo(()=>{const O={high:0,medium:0,low:0};return _.forEach(R=>O[R.priority]+=1),O},[_]),Y=async O=>{try{if(!a){j({title:"Error",description:"No template selected. Please try again.",variant:"destructive"});return}if(!O.propertyId){j({title:"Error",description:"Please select a property before creating the task.",variant:"destructive"});return}const R=parseInt(O.propertyId);if(isNaN(R)||R<=0){j({title:"Error",description:"Invalid property selected. Please choose a valid property.",variant:"destructive"});return}const q={title:a.title,description:a.description,type:a.type,department:void 0,priority:a.priority,propertyId:R,assignedTo:null,dueDate:O.dueDate?new Date(O.dueDate).toISOString():null,estimatedCost:O.estimatedCost??null,isRecurring:!1,recurringType:null,recurringInterval:null,notes:O.notes||null,status:"pending"};await N.mutateAsync(q),t==null||t(a,R),j({title:" Task Created Successfully",description:`"${a.title}" has been created for the selected property.`}),r(!1),i(null),g.reset()}catch(R){console.error("Error creating task:",R),j({title:" Failed to Create Task",description:"Something went wrong while creating the task. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{className:"bg-gradient-to-br from-white to-slate-50/50 backdrop-blur-sm border border-slate-200/50",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Yo,{className:"h-5 w-5"}),"Task Templates",e.jsxs(z,{variant:"secondary",className:"ml-2 bg-emerald-100 text-emerald-700 border-emerald-300",children:[_.length," of ",T.length," templates"]})]})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(G,{placeholder:"Search templates by name, description, or category...",value:l,onChange:O=>o(O.target.value),className:"pl-10 bg-white/50 backdrop-blur-sm border-slate-200/50 focus:border-emerald-300 focus:ring-emerald-200"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(se,{value:c,onValueChange:d,children:[e.jsx(ee,{className:"w-32 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(ne,{placeholder:"Priority"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Priority"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"low",children:"Low"})]})]}),e.jsxs(se,{value:u,onValueChange:m,children:[e.jsx(ee,{className:"w-40 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(ne,{placeholder:"Category"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Categories"}),U.map(O=>e.jsx(A,{value:O,children:O},O))]})]}),e.jsxs(se,{value:h,onValueChange:x,children:[e.jsx(ee,{className:"w-32 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(ne,{placeholder:"Duration"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"Any Duration"}),e.jsxs(A,{value:"short",children:[""," 1 hour"]}),e.jsx(A,{value:"medium",children:"12 hours"}),e.jsxs(A,{value:"long",children:[">"," 2 hours"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(O=>e.jsxs(E,{className:"group hover:shadow-xl hover:shadow-emerald-500/20 hover:scale-[1.02] transition-all duration-300 bg-gradient-to-br from-white via-white to-slate-50/30 backdrop-blur-sm border border-slate-200/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/60 via-transparent to-white/30 pointer-events-none"}),e.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${P(O.priority)} opacity-80`}),e.jsx(L,{className:"pb-3 relative",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1 text-slate-800",children:O.title}),e.jsx("p",{className:"text-xs text-slate-600 mb-3 leading-relaxed",children:O.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{variant:"outline",className:`${C(O.priority)} shadow-sm transition-all duration-200 hover:scale-105 animate-pulse`,children:[$(O.priority),e.jsx("span",{className:"capitalize font-medium",children:O.priority})]}),e.jsxs(z,{variant:"outline",className:"text-xs bg-slate-50 text-slate-700 border-slate-200",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),O.estimatedDuration,"min"]})]})]})})}),e.jsx(D,{className:"pt-0 relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-emerald-50/50 rounded-lg p-2 border border-emerald-100",children:[e.jsxs("span",{className:"text-xs text-emerald-700 font-medium",children:["Category:"," "]}),e.jsx("span",{className:"text-xs font-semibold text-emerald-800",children:O.category})]}),e.jsx("div",{children:e.jsxs(EU,{open:p.has(O.id),onOpenChange:()=>I(O.id),children:[e.jsx(OU,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",className:"w-full justify-between p-2 h-auto bg-slate-50/50 hover:bg-slate-100/50 border border-slate-200/50",children:[e.jsxs("span",{className:"text-xs font-medium text-slate-700",children:["Instructions (",O.instructions.length," ","steps)"]}),p.has(O.id)?e.jsx(Y$,{className:"h-3 w-3"}):e.jsx(Xj,{className:"h-3 w-3"})]})}),e.jsx(MU,{className:"mt-2",children:e.jsx("ul",{className:"text-xs text-slate-600 space-y-2 max-h-32 overflow-y-auto bg-white/50 rounded-lg p-3 border border-slate-200/50",children:O.instructions.map((R,q)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-100 border border-emerald-300 flex items-center justify-center mt-0.5 flex-shrink-0",children:e.jsx("span",{className:"text-[10px] font-medium text-emerald-700",children:q+1})}),e.jsx("span",{className:"leading-relaxed",children:R})]},q))})}),!p.has(O.id)&&e.jsx("div",{className:"mt-2",children:e.jsx("ul",{className:"text-xs text-slate-600 space-y-1",children:O.instructions.slice(0,2).map((R,q)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-500 font-medium",children:""}),e.jsx("span",{className:"truncate",children:R})]},q))})})]})}),e.jsxs(M,{size:"sm",onClick:()=>V(O),className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 hover:scale-105","data-testid":`button-create-task-${O.id}`,children:[e.jsx(bt,{className:"h-3 w-3 mr-1"}),"Create Task"]})]})})]},O.id))}),_.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Yo,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-slate-500",children:"Try adjusting your search or filter criteria"})]})]})]}),e.jsx(E,{className:"bg-gradient-to-r from-emerald-50 to-emerald-100/50 border border-emerald-200",children:e.jsx(D,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-5 w-5 text-emerald-600"}),e.jsx("h3",{className:"font-semibold text-emerald-800",children:"Task Template Insights"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["High Priority: ",H.high]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Medium Priority: ",H.medium]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Low Priority: ",H.low]})]})]})]})})}),s.length>0&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(M,{size:"lg",onClick:()=>{_.length>0&&V(_[0])},className:"rounded-full shadow-2xl bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white border-4 border-white hover:scale-110 transition-all duration-300 animate-pulse",children:[e.jsx(ns,{className:"h-5 w-5 mr-2"}),"Quick Create"]})}),e.jsx(Ke,{open:n,onOpenChange:r,children:e.jsxs(Ye,{className:"max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create Task from Template"}),e.jsx(Rt,{children:a&&`Create "${a.title}" task. Select a property and assign the task.`})]}),e.jsx(os,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(Y),className:"space-y-4 overflow-y-auto pr-2",style:{maxHeight:"calc(90vh - 120px)"},children:[e.jsx("input",{type:"hidden",...g.register("propertyId",{required:!0})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Property *"}),e.jsxs(se,{value:v,onValueChange:O=>{g.setValue("propertyId",O,{shouldValidate:!0})},children:[e.jsx(ee,{"data-testid":"select-task-property",children:e.jsx(ne,{placeholder:"Choose a property"})}),e.jsx(te,{children:k.map(O=>e.jsx(A,{value:O.id.toString(),children:O.name},O.id))})]}),s.length===0&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Showing all ",k.length," properties"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Assign To"}),e.jsxs(se,{children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select staff member"})}),e.jsxs(te,{children:[e.jsx(A,{value:"staff1",children:"John Smith (Maintenance)"}),e.jsx(A,{value:"staff2",children:"Sarah Johnson (Cleaning)"}),e.jsx(A,{value:"staff3",children:"Mike Chen (General)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Due Date"}),e.jsx(G,{type:"date",...y("dueDate",{required:!0})})]}),e.jsx(me,{control:g.control,name:"estimatedCost",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Estimated Cost (THB)"}),e.jsx(ue,{children:e.jsx(G,{type:"number",placeholder:"0.00",...O,onChange:R=>{const q=R.target.value;O.onChange(q===""?void 0:parseFloat(q))}})}),e.jsx(ls,{children:"Optional estimated cost in Thai Baht"}),e.jsx(fe,{})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Additional Notes"}),e.jsx(mt,{placeholder:"Any specific instructions or requirements...",...y("notes"),rows:3})]}),e.jsxs(ir,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(M,{type:"submit",children:"Create Task"})]})]})})]})})]})}function K$e({open:t,onClose:s}){const{toast:n}=at(),[r,a]=b.useState("bookings"),i=Ee({mutationFn:async()=>ve("POST","/api/reports/generate",{type:r}),onSuccess:o=>{n({title:"Report Generated",description:`${r} report has been created successfully`}),s()},onError:o=>{n({title:"Error",description:o.message||"Failed to generate report",variant:"destructive"})}}),l=()=>{i.mutate()};return e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"sm:max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Generate Report"}),e.jsx(Rt,{children:"Select a report type to generate comprehensive analytics"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"report-type",children:"Report Type"}),e.jsxs(se,{value:r,onValueChange:a,children:[e.jsx(ee,{id:"report-type","data-testid":"select-report-type",children:e.jsx(ne,{placeholder:"Select report type"})}),e.jsxs(te,{children:[e.jsx(A,{value:"bookings",children:"Bookings Report"}),e.jsx(A,{value:"finances",children:"Financial Report"}),e.jsx(A,{value:"tasks",children:"Tasks Report"}),e.jsx(A,{value:"properties",children:"Properties Report"}),e.jsx(A,{value:"occupancy",children:"Occupancy Report"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(M,{onClick:l,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",disabled:i.isPending,"data-testid":"button-generate-report",children:i.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Report"}),e.jsx(M,{variant:"outline",onClick:s,disabled:i.isPending,"data-testid":"button-cancel-report",children:"Cancel"})]})]})]})})}function Y$e({open:t,onClose:s}){const{toast:n}=at(),r=yt(),[a,i]=b.useState({name:"",description:"",trigger:"booking_due",action:"email",schedule:"0 9 * * *"}),l=Ee({mutationFn:async()=>ve("POST","/api/automations",a),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/automations"]}),n({title:"Automation Created",description:"Your automation rule has been created successfully"}),s(),i({name:"",description:"",trigger:"booking_due",action:"email",schedule:"0 9 * * *"})},onError:c=>{n({title:"Error",description:c.message||"Failed to create automation",variant:"destructive"})}}),o=()=>{if(!a.name||!a.trigger||!a.action){n({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l.mutate()};return e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"max-h-[90vh] overflow-y-auto sm:max-w-lg",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create Automation"}),e.jsx(Rt,{children:"Set up automated workflows for property management"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"automation-name",children:"Name *"}),e.jsx(G,{id:"automation-name",placeholder:"e.g., Send booking confirmation",value:a.name,onChange:c=>i({...a,name:c.target.value}),"data-testid":"input-automation-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"automation-description",children:"Description"}),e.jsx(mt,{id:"automation-description",placeholder:"Optional description",value:a.description,onChange:c=>i({...a,description:c.target.value}),"data-testid":"input-automation-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"automation-trigger",children:"Trigger *"}),e.jsxs(se,{value:a.trigger,onValueChange:c=>i({...a,trigger:c}),children:[e.jsx(ee,{id:"automation-trigger","data-testid":"select-automation-trigger",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"booking_due",children:"Booking Check-in Due"}),e.jsx(A,{value:"task_overdue",children:"Task Overdue"}),e.jsx(A,{value:"payment_pending",children:"Payment Pending"}),e.jsx(A,{value:"document_expiring",children:"Document Expiring"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"automation-action",children:"Action *"}),e.jsxs(se,{value:a.action,onValueChange:c=>i({...a,action:c}),children:[e.jsx(ee,{id:"automation-action","data-testid":"select-automation-action",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"email",children:"Send Email"}),e.jsx(A,{value:"sms",children:"Send SMS"}),e.jsx(A,{value:"push_notification",children:"Push Notification"}),e.jsx(A,{value:"whatsapp",children:"WhatsApp Message"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"automation-schedule",children:"Schedule (Cron Expression)"}),e.jsx(G,{id:"automation-schedule",placeholder:"e.g., 0 9 * * * (daily at 9 AM)",value:a.schedule,onChange:c=>i({...a,schedule:c.target.value}),"data-testid":"input-automation-schedule"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(M,{onClick:o,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",disabled:l.isPending,"data-testid":"button-create-automation",children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Automation"}),e.jsx(M,{variant:"outline",onClick:s,disabled:l.isPending,"data-testid":"button-cancel-automation",children:"Cancel"})]})]})]})})}function Q$e(){var T,C,P,$,V,I,_,U,H,Y,O,R,q,re,we,K,Ce,pe,F;const[t,s]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,m]=b.useState(null),[h,x]=b.useState(!1),[p,f]=b.useState(null),[j,g]=b.useState(null),[y,v]=b.useState(!1),{toast:w}=at(),N=async()=>{if(!t||!n){w({title:"Missing Information",description:"Please enter both city and state",variant:"destructive"});return}o(!0);try{const Q=await fetch(`/api/rentcast/market/search?city=${encodeURIComponent(t)}&state=${encodeURIComponent(n)}&limit=10`),Z=await Q.json();if(!Q.ok)throw new Error(Z.message||"Search failed");i(Z),w({title:"Search Complete",description:`Found ${Z.propertiesCount} properties in ${t}, ${n}`})}catch(Q){w({title:"Search Error",description:Q.message||"Failed to search market",variant:"destructive"})}finally{o(!1)}},S=async Q=>{d(Q),x(!0);try{const Z=await fetch(`/api/rentcast/properties/${encodeURIComponent(Q.id)}/enrich`),le=await Z.json();if(Z.ok)m(le);else throw new Error(le.message||"Failed to load details")}catch(Z){w({title:"Error",description:Z.message||"Failed to load property details",variant:"destructive"})}finally{x(!1)}},k=async Q=>{f(Q),v(!0);try{const Z=await fetch(`/api/rentcast/listings/rental/${encodeURIComponent(Q.id)}/enrich`),le=await Z.json();if(Z.ok)g(le);else throw new Error(le.message||"Failed to load details")}catch(Z){w({title:"Error",description:Z.message||"Failed to load listing details",variant:"destructive"})}finally{v(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-5 w-5 text-purple-600"}),"Search RentCast Market by City/State"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"City"}),e.jsx("input",{type:"text",placeholder:"e.g., Los Angeles",value:t,onChange:Q=>s(Q.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"w-32",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"State"}),e.jsx("input",{type:"text",placeholder:"CA",value:n,onChange:Q=>r(Q.target.value.toUpperCase()),maxLength:2,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(M,{onClick:N,disabled:l,className:"bg-purple-600 hover:bg-purple-700",children:l?"Searching...":"Search Market"})})]})})]}),a&&e.jsxs("div",{className:"space-y-6",children:[a.marketData&&e.jsxs(E,{className:"bg-gradient-to-br from-purple-50 to-indigo-50",children:[e.jsx(L,{children:e.jsxs(B,{children:["Market Statistics - ",a.city,", ",a.state]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-semibold",children:"Median Rent"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",((T=a.marketData.medianRent)==null?void 0:T.toLocaleString())||"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-indigo-600 font-semibold",children:"Median Price"}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900",children:["$",a.marketData.medianPrice?Math.round(a.marketData.medianPrice/1e3)+"k":"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-semibold",children:"Avg Rent"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",((C=a.marketData.averageRent)==null?void 0:C.toLocaleString())||"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-indigo-600 font-semibold",children:"Total Listings"}),e.jsx("div",{className:"text-2xl font-bold text-indigo-900",children:((P=a.marketData.totalListings)==null?void 0:P.toLocaleString())||"N/A"})]})]})})]}),a.properties&&a.properties.length>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{children:["Properties Found (",a.propertiesCount,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:a.properties.map((Q,Z)=>{var le;return e.jsx("div",{className:"border rounded-lg p-4 bg-slate-50 hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>S(Q),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:Q.address}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Type:"})," ",e.jsx("span",{className:"font-medium",children:Q.propertyType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Beds:"})," ",e.jsx("span",{className:"font-medium",children:Q.bedrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Baths:"})," ",e.jsx("span",{className:"font-medium",children:Q.bathrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Sq Ft:"})," ",e.jsx("span",{className:"font-medium",children:((le=Q.squareFootage)==null?void 0:le.toLocaleString())||"N/A"})]})]}),Q.lastSalePrice&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Last Sale:"}),e.jsxs("span",{className:"font-medium text-emerald-700 ml-2",children:["$",Q.lastSalePrice.toLocaleString(),Q.lastSaleDate&&` (${new Date(Q.lastSaleDate).getFullYear()})`]})]})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"ml-4",children:"View Details "})]})},Z)})})})]}),a.rentalListings&&a.rentalListings.length>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{children:["Active Rental Listings (",a.rentalListingsCount,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:a.rentalListings.map((Q,Z)=>e.jsx("div",{className:"border rounded-lg p-4 bg-purple-50 hover:bg-purple-100 transition-colors cursor-pointer",onClick:()=>k(Q),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:Q.address}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Price:"})," ",e.jsxs("span",{className:"font-bold text-purple-900",children:["$",Q.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Beds:"})," ",e.jsx("span",{className:"font-medium",children:Q.bedrooms})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Baths:"})," ",e.jsx("span",{className:"font-medium",children:Q.bathrooms})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"DOM:"})," ",e.jsxs("span",{className:"font-medium",children:[Q.daysOnMarket," days"]})]})]})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"ml-4",children:"View Details "})]})},Z))})})]}),(!a.properties||a.properties.length===0)&&(!a.rentalListings||a.rentalListings.length===0)&&e.jsx(E,{children:e.jsx(D,{className:"py-12 text-center text-slate-500",children:"No properties or listings found in this market"})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>d(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:c.address}),e.jsx(M,{variant:"ghost",onClick:()=>d(null),children:""})]}),e.jsx("div",{className:"p-6 space-y-6",children:h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading comprehensive property data..."})]}):u?e.jsxs("div",{className:"space-y-6",children:[(u.rentEstimate||u.valueEstimate)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.rentEstimate&&e.jsxs(E,{className:"bg-gradient-to-br from-purple-50 to-purple-100",children:[e.jsx(L,{children:e.jsx(B,{className:"text-purple-900",children:"Estimated Monthly Rent"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:["$",($=u.rentEstimate.estimatedRent)==null?void 0:$.toLocaleString()]}),u.rentEstimate.rentRangeLow&&u.rentEstimate.rentRangeHigh&&e.jsxs("div",{className:"text-sm text-purple-700",children:["Range: $",u.rentEstimate.rentRangeLow.toLocaleString()," - $",u.rentEstimate.rentRangeHigh.toLocaleString()]}),u.rentEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:["Based on ",u.rentEstimate.comparablesCount," comparable properties"]})]})]}),u.valueEstimate&&e.jsxs(E,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100",children:[e.jsx(L,{children:e.jsx(B,{className:"text-indigo-900",children:"Estimated Property Value"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-indigo-900 mb-2",children:["$",(V=u.valueEstimate.estimatedValue)==null?void 0:V.toLocaleString()]}),u.valueEstimate.valueRangeLow&&u.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-sm text-indigo-700",children:["Range: $",u.valueEstimate.valueRangeLow.toLocaleString()," - $",u.valueEstimate.valueRangeHigh.toLocaleString()]}),u.valueEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-xs text-indigo-600 mt-2",children:["Based on ",u.valueEstimate.comparablesCount," comparable sales"]})]})]})]}),u.propertyDetails&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Property Information"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Property Type"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.propertyType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Square Footage"}),e.jsxs("div",{className:"font-semibold",children:[((I=u.propertyDetails.squareFootage)==null?void 0:I.toLocaleString())||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Lot Size"}),e.jsxs("div",{className:"font-semibold",children:[((_=u.propertyDetails.lotSize)==null?void 0:_.toLocaleString())||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Year Built"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.yearBuilt||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"County"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.county||"N/A"})]}),u.propertyDetails.lastSalePrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Last Sale"}),e.jsxs("div",{className:"font-semibold text-emerald-700",children:["$",u.propertyDetails.lastSalePrice.toLocaleString(),u.propertyDetails.lastSaleDate&&` (${new Date(u.propertyDetails.lastSaleDate).getFullYear()})`]})]})]})})]}),((U=u.rentEstimate)==null?void 0:U.comparables)&&u.rentEstimate.comparables.length>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Rental Comparables"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.rentEstimate.comparables.map((Q,Z)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-purple-50",children:[e.jsx("div",{className:"font-medium",children:Q.formattedAddress}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Rent:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",Q.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Beds/Baths:"})," ",Q.bedrooms,"bd / ",Q.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Distance:"})," ",Q.distance.toFixed(1)," mi"]})]})]},Z))})})]}),((H=u.nearbyRentals)==null?void 0:H.listings)&&u.nearbyRentals.listings.length>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{children:["Nearby Rental Listings (",u.nearbyRentals.count,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.nearbyRentals.listings.map((Q,Z)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-indigo-50",children:[e.jsx("div",{className:"font-medium",children:Q.address}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Price:"})," ",e.jsxs("span",{className:"font-bold",children:["$",Q.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Size:"})," ",Q.bedrooms,"bd / ",Q.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"DOM:"})," ",Q.daysOnMarket," days"]})]})]},Z))})})]}),u.marketData&&e.jsxs(E,{className:"bg-gradient-to-br from-emerald-50 to-teal-50",children:[e.jsx(L,{children:e.jsx(B,{children:"Local Market Statistics"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.marketData.medianRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Median Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",u.marketData.medianRent.toLocaleString()]})]}),u.marketData.averageRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Avg Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",u.marketData.averageRent.toLocaleString()]})]}),u.marketData.medianPrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Median Price"}),e.jsxs("div",{className:"text-xl font-bold text-teal-900",children:["$",Math.round(u.marketData.medianPrice/1e3),"k"]})]}),u.marketData.inventoryCount&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Inventory"}),e.jsx("div",{className:"text-xl font-bold text-teal-900",children:u.marketData.inventoryCount.toLocaleString()})]})]})})]})]}):e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No detailed data available for this property"})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>f(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:p.address}),e.jsx(M,{variant:"ghost",onClick:()=>f(null),children:""})]}),e.jsx("div",{className:"p-6 space-y-6",children:y?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading comprehensive listing data..."})]}):j?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(E,{className:"bg-gradient-to-br from-purple-50 to-purple-100",children:[e.jsx(L,{children:e.jsx(B,{className:"text-purple-900",children:"Monthly Rent"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:["$",(O=(Y=j.listingDetails)==null?void 0:Y.price)==null?void 0:O.toLocaleString(),"/mo"]}),e.jsx("div",{className:"text-sm text-purple-700",children:((R=j.listingDetails)==null?void 0:R.status)||"Active"}),e.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:["Listed ",((q=j.listingDetails)==null?void 0:q.daysOnMarket)||0," days ago"]})]})]}),e.jsxs(E,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100",children:[e.jsx(L,{children:e.jsx(B,{className:"text-indigo-900",children:"Property Details"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Type:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:((re=j.listingDetails)==null?void 0:re.propertyType)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Bedrooms:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:((we=j.listingDetails)==null?void 0:we.bedrooms)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Bathrooms:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:((K=j.listingDetails)==null?void 0:K.bathrooms)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Square Footage:"})," ",e.jsxs("span",{className:"font-semibold ml-2",children:[((pe=(Ce=j.listingDetails)==null?void 0:Ce.squareFootage)==null?void 0:pe.toLocaleString())||"N/A"," sq ft"]})]})]})})]})]}),j.comparableListings&&j.comparableListings.length>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Comparable Rental Listings"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:j.comparableListings.map((Q,Z)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-purple-50",children:[e.jsx("div",{className:"font-medium",children:Q.address}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Rent:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",Q.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Size:"})," ",Q.bedrooms,"bd / ",Q.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"DOM:"})," ",Q.daysOnMarket," days"]})]})]},Z))})})]}),j.marketData&&e.jsxs(E,{className:"bg-gradient-to-br from-emerald-50 to-teal-50",children:[e.jsx(L,{children:e.jsx(B,{children:"Local Market Statistics"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[j.marketData.medianRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Median Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",j.marketData.medianRent.toLocaleString()]})]}),j.marketData.averageRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Avg Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",j.marketData.averageRent.toLocaleString()]})]}),j.marketData.medianPrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Median Price"}),e.jsxs("div",{className:"text-xl font-bold text-teal-900",children:["$",Math.round(j.marketData.medianPrice/1e3),"k"]})]}),j.marketData.inventoryCount&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Inventory"}),e.jsx("div",{className:"text-xl font-bold text-teal-900",children:j.marketData.inventoryCount.toLocaleString()})]})]})})]}),j.valueEstimate&&e.jsxs(E,{className:"bg-gradient-to-br from-amber-50 to-yellow-50",children:[e.jsx(L,{children:e.jsx(B,{className:"text-amber-900",children:"Estimated Property Value"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-amber-900 mb-2",children:["$",(F=j.valueEstimate.estimatedValue)==null?void 0:F.toLocaleString()]}),j.valueEstimate.valueRangeLow&&j.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-sm text-amber-700",children:["Range: $",j.valueEstimate.valueRangeLow.toLocaleString()," - $",j.valueEstimate.valueRangeHigh.toLocaleString()]})]})]})]}):e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No detailed data available for this listing"})})]})})]})}function X$e(){const{user:t}=_a(),[,s]=Yn(),[n,r]=b.useState("properties"),[a,i]=b.useState([]),[l,o]=b.useState({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),[c,d]=b.useState(1),[u]=b.useState(12),[m,h]=b.useState(!1),[x,p]=b.useState(!1),[f,j]=b.useState(!1),[g,y]=b.useState(!1),[v,w]=b.useState(!1),N=yt(),{toast:S}=at(),k=Ee({mutationFn:async ke=>{await ve("DELETE",`/api/properties/${ke}`)},onSuccess:()=>{N.invalidateQueries({queryKey:["/api/properties"]}),S({title:"Success",description:"Property deleted successfully"}),i(ke=>ke.filter(Ze=>Ze.id!==k.variables))},onError:ke=>{S({title:"Error",description:"Failed to delete property",variant:"destructive"})}}),T=ke=>{window.confirm("Are you sure you want to delete this property? This action cannot be undone.")&&k.mutate(ke)},C=()=>{o({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),$(null),window.location.search&&window.history.replaceState({},"",window.location.pathname),_(),S({title:"Refreshed",description:"Property list updated and filters reset"})},[P,$]=b.useState(null);b.useEffect(()=>{const Ze=new URLSearchParams(window.location.search).get("property");Ze&&$(parseInt(Ze,10))},[]);const{data:V=[],isLoading:I,refetch:_}=ye({queryKey:["/api/properties"],staleTime:10*60*1e3});console.log("properties",V);const{data:U=[],isLoading:H}=ye({queryKey:["/api/bookings"],staleTime:10*60*1e3}),{data:Y=[]}=ye({queryKey:["/api/property-documents/expiring?days=30"],staleTime:0}),{data:O=[]}=ye({queryKey:["/api/property-insurance/expiring/30"],staleTime:0}),R=Array.isArray(V)?V:[],q=Array.isArray(U)?U:[],{data:re={}}=ye({queryKey:["/api/rentcast/enrich-properties"],enabled:R.length>0,staleTime:60*60*1e3}),we=re||{},K=ke=>{const Ze=Y.some(Kt=>Kt.propertyId===ke),gt=O.some(Kt=>Kt.propertyId===ke);if(Ze||gt){const Kt=Y.find(J=>J.propertyId===ke&&new Date(J.expiryDate)<new Date),be=O.find(J=>J.propertyId===ke&&new Date(J.expiryDate)<new Date);return Kt||be?"expired":"expiring"}return null},Ce=b.useMemo(()=>R.filter(ke=>{var Kt,be,J,Ne,De;if(P!==null&&ke.id!==P||l.search&&!ke.name.toLowerCase().includes(l.search.toLowerCase())||l.location&&!((Kt=ke.address)!=null&&Kt.toLowerCase().includes(l.location.toLowerCase()))||l.status&&ke.status!==l.status)return!1;const Ze=ke.occupancyRate||Math.floor(Math.random()*30)+60;if(Ze<l.occupancyMin||Ze>l.occupancyMax)return!1;const gt=ke.roi||Math.random()*20+5;if(gt<l.roiMin||gt>l.roiMax||l.propertyType&&(ke.propertyType||((be=ke.name)!=null&&be.toLowerCase().includes("villa")?"villa":(J=ke.name)!=null&&J.toLowerCase().includes("apartment")?"apartment":(Ne=ke.name)!=null&&Ne.toLowerCase().includes("condo")?"condo":(De=ke.name)!=null&&De.toLowerCase().includes("resort")?"resort":"villa"))!==l.propertyType)return!1;if(l.lastBookingFrom||l.lastBookingTo){const We=ke.lastBookingDate||"2024-12-15",qe=new Date(We);if(l.lastBookingFrom){const Le=new Date(l.lastBookingFrom);if(qe<Le)return!1}if(l.lastBookingTo){const Le=new Date(l.lastBookingTo);if(qe>Le)return!1}}return!(l.hasMaintenanceTasks&&(ke.maintenanceTasks||Math.floor(Math.random()*5))===0)}),[R,l,P]),pe=Math.ceil(Ce.length/u),F=b.useMemo(()=>{const ke=(c-1)*u;return Ce.slice(ke,ke+u)},[Ce,c,u]);b.useEffect(()=>{d(1)},[l]);const Q=()=>{c<pe&&d(ke=>ke+1)},Z=(ke,Ze)=>{i(Ze?gt=>[...gt,ke]:gt=>gt.filter(Kt=>Kt.id!==ke.id))},le=()=>{a.length===Ce.length?i([]):i(Ce)},oe=()=>{i([])},Ae=ke=>{s(`/property/${ke.id}`)},ge=(ke,Ze)=>{S({title:"Task Created",description:`Created "${ke.title}" for property ID ${Ze}`})},xe=R.map((ke,Ze)=>({id:ke.id,name:ke.name,color:`hsl(${Ze*137.5%360}, 70%, 50%)`})),$e=q.map(ke=>({id:ke.id,propertyId:ke.propertyId||Math.floor(Math.random()*R.length)+1,propertyName:ke.propertyName||"Unknown Property",guestName:ke.guestName||"Guest",guestEmail:ke.guestEmail,guestPhone:ke.guestPhone,checkIn:ke.checkInDate||ke.checkIn||"2024-08-01",checkOut:ke.checkOutDate||ke.checkOut||"2024-08-02",status:ke.status||"confirmed",totalAmount:ke.totalAmount||0,invoiceId:ke.invoiceId,guestId:ke.guestId}));return I||H?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading Property Hub..."})]})}):e.jsxs("div",{className:"min-h-screen flex bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(ec,{title:"Property Management"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute top-0 left-0 z-50",children:e.jsx(fh,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex items-center justify-between pt-10",children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-3 flex items-center gap-4",children:" Property Management Hub"}),e.jsx("p",{className:"text-lg text-slate-600 mb-2",children:"Enhanced property management with advanced filtering, bulk actions, and calendar views"}),e.jsxs("div",{className:"mt-3 text-sm text-emerald-600 font-medium flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 bg-emerald-500 rounded-full animate-pulse"}),"Connected to Dashboard  Showing Real Data from API"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[(t==null?void 0:t.role)==="admin"&&e.jsxs(M,{onClick:()=>h(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white hover:scale-105 transition-all duration-200","data-testid":"button-add-property",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Add Property"]}),e.jsxs(M,{variant:"outline",onClick:C,className:"hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-700 hover:scale-105 transition-all duration-200","data-testid":"button-refresh",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(z,{variant:"outline",className:"px-4 py-2 text-sm bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold cursor-pointer hover:bg-emerald-200 hover:scale-105 transition-all duration-200 flex items-center gap-2 whitespace-nowrap rounded-lg",onClick:C,"data-testid":"badge-properties-counter",children:[R.length," Properties"]})]})]})]}),e.jsxs(ft,{value:n,onValueChange:r,className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsxs(ae,{value:"properties",className:"flex items-center gap-2",children:[e.jsx(jD,{className:"h-4 w-4"}),"Property Cards"]}),e.jsxs(ae,{value:"rentcast-search",className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-4 w-4"}),"RentCast Search"]}),e.jsxs(ae,{value:"calendar",className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),"Calendar View"]}),e.jsxs(ae,{value:"templates",className:"flex items-center gap-2",children:[e.jsx(Yo,{className:"h-4 w-4"}),"Task Templates"]}),e.jsxs(ae,{value:"grid",className:"flex items-center gap-2",children:[e.jsx(eF,{className:"h-4 w-4"}),"Management Tools"]})]}),e.jsxs(ie,{value:"properties",className:"space-y-8",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2"}),e.jsx(q$e,{filters:l,onFiltersChange:o,totalProperties:R.length,filteredCount:Ce.length}),e.jsx(H$e,{selectedProperties:a,onClearSelection:oe,onRefresh:_}),Ce.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white/50 p-4 rounded-lg border border-slate-200/50 backdrop-blur-sm",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:le,className:"hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-700 hover:scale-105 transition-all duration-200",children:[a.length===Ce.length?"Deselect All":"Select All","(",Ce.length,")"]}),e.jsxs("div",{className:"text-sm text-slate-600 font-medium",children:[a.length," of ",Ce.length," ","selected"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:F.map(ke=>e.jsx(YV,{property:ke,isSelected:a.some(Ze=>Ze.id===ke.id),onSelect:Ze=>Z(ke,Ze),onViewDetails:()=>Ae(ke),onDelete:()=>T(ke.id),expiryStatus:K(ke.id),rentcastData:we[ke.id]},ke.id))}),Ce.length>u&&e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-600 bg-white/50 px-4 py-2 rounded-lg border border-slate-200/50 backdrop-blur-sm",children:["Showing"," ",Math.min(c*u,Ce.length)," ","of ",Ce.length," properties",c<pe&&`  Page ${c} of ${pe}`]}),c<pe&&e.jsxs(M,{onClick:Q,variant:"outline",size:"lg",className:"bg-emerald-50 hover:bg-emerald-100 border-emerald-200 text-emerald-700 hover:text-emerald-800 hover:scale-105 transition-all duration-200 shadow-sm",children:[" Load More Properties (",Ce.length-c*u," ","remaining)"]}),c>=pe&&Ce.length>u&&e.jsx("div",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 px-4 py-2 rounded-lg border border-emerald-200",children:" All properties loaded!"})]}),Ce.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ln,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No properties found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your filters to see more properties."})]})]}),e.jsx(ie,{value:"rentcast-search",className:"space-y-6",children:e.jsx(Q$e,{})}),e.jsx(ie,{value:"calendar",children:xe.length>0?e.jsx(G$e,{properties:xe,bookings:$e}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No Properties Available"}),e.jsx("p",{className:"text-slate-600",children:"Add properties to view the calendar."})]})}),e.jsx(ie,{value:"templates",children:e.jsx(W$e,{selectedProperties:a,onCreateTask:ge})}),e.jsxs(ie,{value:"grid",className:"space-y-6",children:[e.jsx(E,{className:"bg-gradient-to-r from-emerald-50 via-emerald-100/50 to-emerald-50 backdrop-blur-sm border border-emerald-200/50",children:e.jsx(D,{className:"py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-8 text-sm font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsxs("span",{className:"text-emerald-800",children:["Active Bookings:"," ",e.jsx("strong",{children:q.length})]})]}),e.jsx("div",{className:"text-emerald-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsxs("span",{className:"text-emerald-800",children:["Pending Tasks: ",e.jsx("strong",{children:"7"})]})]}),e.jsx("div",{className:"text-emerald-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:""}),e.jsxs("span",{className:"text-emerald-800",children:["Total Properties:"," ",e.jsx("strong",{children:R.length})]})]})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Properties List",description:"View and manage all properties with detailed information and status",href:"/property-hub",icon:ln,badge:"Core",badgeIcon:"",stats:`${R.length} total properties`,actionText:"Add Property",actionIcon:""},{title:"Calendar & Bookings",description:"Booking calendar, reservations management, and availability tracking",href:"/bookings",icon:tt,badge:"Bookings",badgeIcon:"",stats:`${q.length} bookings this week`,actionText:"Create Booking",actionIcon:""},{title:"Property Tasks",description:"Task management for cleaning, maintenance, and property operations",href:"/tasks",icon:Yo,badge:"Tasks",badgeIcon:"",stats:"7 open tasks",actionText:"Add Task",actionIcon:""},{title:"Reports & Analytics",description:"Generate comprehensive reports and analytics with PDF/CSV export capabilities",href:"/reports",icon:jD,badge:"Analytics",badgeIcon:"",stats:"3 reports ready",actionText:"Generate Report",actionIcon:""},{title:"Automation & Alerts",description:"Smart reminders, AI insights, and automated property management workflows",href:"/automation",icon:Ss,badge:"AI & Auto",badgeIcon:"",stats:"5 active rules",actionText:"Setup Alert",actionIcon:""}].map(ke=>{const Ze=ke.icon,gt=e.jsxs(E,{className:`h-full flex flex-col group cursor-pointer transition-all duration-500 ease-in-out bg-gradient-to-br from-white via-slate-50/40 to-emerald-50/20 backdrop-blur-sm border border-slate-200/60 hover:border-emerald-300/50 hover:shadow-2xl hover:shadow-emerald-500/30 hover:scale-[1.05] hover:-translate-y-2 relative overflow-hidden ${ke.isComingSoon?"opacity-85":""}`,onClick:()=>!ke.isComingSoon&&s(ke.href),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/70 via-emerald-50/30 to-white/40 opacity-80 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-500/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),ke.isComingSoon&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx(z,{className:"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border-yellow-400/50 text-xs shadow-lg backdrop-blur-sm",children:"Coming Soon"})}),e.jsxs(L,{className:"pb-3 relative z-10 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-emerald-100/80 via-emerald-50/60 to-white/40 backdrop-blur-sm rounded-xl shadow-xl border border-emerald-200/50 group-hover:shadow-emerald-300/60 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 ease-out flex-shrink-0",children:e.jsx(Ze,{className:"h-5 w-5 text-emerald-700 group-hover:text-emerald-800 transition-colors duration-300"})}),e.jsx(B,{className:"text-base font-semibold text-slate-800 group-hover:text-slate-900 transition-colors duration-300 line-clamp-2",children:ke.title})]}),e.jsxs(z,{className:"bg-gradient-to-r from-emerald-100/90 via-emerald-50/70 to-white/50 text-emerald-800 border-emerald-300/60 shadow-lg backdrop-blur-sm group-hover:shadow-emerald-200/80 transition-all duration-300 text-xs whitespace-nowrap flex-shrink-0",children:[e.jsx("span",{className:"mr-1",children:ke.badgeIcon}),ke.badge]})]}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50/80 via-white/60 to-slate-50/80 backdrop-blur-sm rounded-lg p-2.5 border border-slate-200/60 group-hover:border-emerald-200/60 group-hover:bg-gradient-to-r group-hover:from-emerald-50/40 group-hover:via-white/70 group-hover:to-emerald-50/40 transition-all duration-300",children:e.jsx("p",{className:"text-xs font-medium text-slate-700 group-hover:text-emerald-800 transition-colors duration-300 truncate",children:ke.stats})})]}),e.jsxs(D,{className:"flex flex-col flex-1 relative z-10 pt-0",children:[e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-700 transition-colors duration-300 line-clamp-3 mb-4 flex-1",children:ke.description}),e.jsxs(M,{size:"sm",className:`w-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-emerald-500 hover:from-emerald-600 hover:via-emerald-700 hover:to-emerald-600 text-white shadow-xl hover:shadow-2xl hover:shadow-emerald-500/40 transition-all duration-300 group-hover:scale-105 backdrop-blur-sm border border-emerald-400/30 hover:border-emerald-300/50 mt-auto ${ke.isComingSoon?"opacity-60 cursor-not-allowed":""}`,disabled:ke.isComingSoon,onClick:Kt=>{Kt.stopPropagation(),ke.isComingSoon||(ke.actionText==="Add Property"?h(!0):ke.actionText==="Create Booking"?p(!0):ke.actionText==="Add Task"?j(!0):ke.actionText==="Generate Report"?y(!0):ke.actionText==="Setup Alert"&&w(!0))},children:[e.jsx("span",{className:"mr-2 text-base group-hover:scale-110 transition-transform duration-200",children:ke.actionIcon}),ke.isComingSoon?"Coming Soon":ke.actionText]})]})]},ke.href);return ke.isComingSoon?e.jsx(Df,{children:e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:gt}),e.jsx(gl,{side:"top",className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white border border-slate-600 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-sm",children:ke.title}),e.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Feature launching soon!"}),e.jsx("p",{className:"text-xs text-emerald-300 mt-1",children:"Stay tuned for updates"})]})})]})},ke.href):gt})})]})]})]}),e.jsx("footer",{className:"mt-12 border-t border-slate-200 bg-slate-50/30 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-8 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-medium",children:"System Online"})]}),e.jsx("div",{className:"text-slate-400",children:"|"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:"Last Updated: Today"})}),e.jsx("div",{className:"text-slate-400",children:"|"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold text-emerald-600",children:"v2.0.1"})})]})}),e.jsx("div",{className:"text-center text-sm text-slate-500 mt-2",children:"HostPilotPro Property Management  Enterprise Edition"})]})})]})]}),e.jsx(O0,{open:m,onOpenChange:h}),e.jsx(D0,{open:x,onOpenChange:p}),e.jsx(P0,{isOpen:f,onOpenChange:j}),e.jsx(K$e,{open:g,onClose:()=>y(!1)}),e.jsx(Y$e,{open:v,onClose:()=>w(!1)})]})}function Ww(t){return/^401: .*Unauthorized/.test(t.message)}const Z$e=ds({type:Pe().min(1,"Type is required"),source:Pe().min(1,"Source is required"),sourceType:Pe().optional(),category:Pe().min(1,"Category is required"),subcategory:Pe().optional(),amount:Pe().min(1,"Amount is required"),description:Pe().optional(),date:Pe().min(1,"Date is required"),dueDate:Pe().optional(),status:Pe().default("pending"),propertyId:Pe().optional(),bookingId:Pe().optional(),ownerId:Pe().optional(),agentId:Pe().optional(),referenceNumber:Pe().optional(),isRecurring:Ur().default(!1),recurringType:Pe().optional()}),Kw=[{value:"guest-payment",label:"Guest Payment",icon:yr,description:"Payment received from guests",color:"text-green-600"},{value:"owner-charge",label:"Owner Charge",icon:Ht,description:"Expense charged to property owner",color:"text-blue-600"},{value:"company-expense",label:"Company Expense",icon:ln,description:"Business operational expense",color:"text-purple-600"},{value:"complimentary",label:"Complimentary",icon:ip,description:"Complimentary service or gift",color:"text-orange-600"}],J$e={"booking-payment":"Booking Payment",cleaning:"Cleaning Services",maintenance:"Property Maintenance",utilities:"Utilities",electricity:"Electricity",water:"Water",gas:"Gas",internet:"Internet/WiFi",commission:"Agent Commission","add-on-service":"Add-on Services",massage:"Massage Services","chef-service":"Chef Services",transportation:"Transportation","pool-service":"Pool Maintenance","garden-service":"Garden Maintenance",supplies:"Property Supplies",repairs:"Repairs",insurance:"Insurance","management-fee":"Management Fee",marketing:"Marketing/Advertising",other:"Other"};function eFe({open:t,onOpenChange:s}){const{user:n}=Cr(),{toast:r}=at(),a=yt(),[i,l]=b.useState(!1),o=Zt({resolver:xs(Z$e),defaultValues:{type:"expense",source:"",sourceType:"",category:"",subcategory:"",amount:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",status:"pending",propertyId:"",bookingId:"",ownerId:"",agentId:"",referenceNumber:"",isRecurring:!1,recurringType:""}}),{data:c=[]}=ye({queryKey:["/api/properties"],retry:(f,j)=>Ww(j)?!1:f<3}),{data:d=[]}=ye({queryKey:["/api/bookings"],retry:(f,j)=>Ww(j)?!1:f<3}),u=Ee({mutationFn:async f=>{const{referenceNumber:j,isRecurring:g,recurringType:y,...v}=f,w={type:v.type,source:v.source,category:v.category,amount:v.amount,date:v.date,processedBy:n==null?void 0:n.id,organizationId:(n==null?void 0:n.organizationId)||"default-org",department:"administration",currency:"THB",status:v.status||"pending"};return v.sourceType&&(w.sourceType=v.sourceType),v.subcategory&&(w.subcategory=v.subcategory),v.description&&(w.description=v.description),v.dueDate&&(w.dueDate=v.dueDate),v.propertyId&&(w.propertyId=parseInt(v.propertyId)),v.bookingId&&(w.bookingId=parseInt(v.bookingId)),v.ownerId&&(w.ownerId=v.ownerId),v.agentId&&(w.agentId=v.agentId),console.log("Creating finance record with data:",w),await ve("POST","/api/finances",w)},onSuccess:async()=>{MV(a),r({title:"Finance Record Created",description:"The financial record has been added successfully."}),o.reset(),s(!1)},onError:f=>{if(Ww(f)){r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}r({title:"Failed to Create Record",description:"Please check all fields and try again.",variant:"destructive"})}}),m=f=>{u.mutate(f)},h=o.watch("source");o.watch("type");const x=f=>{o.setValue("source",f),l(f==="complimentary"),f!=="complimentary"&&o.setValue("sourceType","")},p=f=>{const j=Kw.find(g=>g.value===f);return j?j.icon:Je};return e.jsx(Ke,{open:t,onOpenChange:s,children:e.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(Wi,{className:"h-5 w-5"}),"Create Financial Record"]})}),e.jsx(os,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(m),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"font-medium text-sm",children:"Source & Traceability"})]}),e.jsx(me,{control:o.control,name:"source",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Financial Source *"}),e.jsxs(se,{onValueChange:x,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select source of funds"})})}),e.jsx(te,{children:Kw.map(j=>{const g=j.icon;return e.jsx(A,{value:j.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:`h-4 w-4 ${j.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:j.description})]})]})},j.value)})})]}),e.jsx(fe,{})]})}),i&&e.jsx(me,{control:o.control,name:"sourceType",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Complimentary Type"}),e.jsxs(se,{onValueChange:f.onChange,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select complimentary type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"owner-gift",children:"Owner Gift"}),e.jsx(A,{value:"company-gift",children:"Company Gift"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"referenceNumber",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Reference Number"}),e.jsx(ue,{children:e.jsx(G,{...f,placeholder:"Invoice #, Receipt #, or external reference",className:"font-mono text-sm"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:o.control,name:"type",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Record Type *"}),e.jsxs(se,{onValueChange:f.onChange,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"income",children:"Income"}),e.jsx(A,{value:"expense",children:"Expense"}),e.jsx(A,{value:"commission",children:"Commission"}),e.jsx(A,{value:"fee",children:"Fee"}),e.jsx(A,{value:"payout",children:"Payout"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"category",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Category *"}),e.jsxs(se,{onValueChange:f.onChange,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select category"})})}),e.jsx(te,{children:Object.entries(J$e).map(([j,g])=>e.jsx(A,{value:j,children:g},j))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"amount",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Amount *"}),e.jsx(ue,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(G,{...f,type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"pl-10"})]})}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"date",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Date *"}),e.jsx(ue,{children:e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(G,{...f,type:"date",className:"pl-10"})]})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:o.control,name:"propertyId",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Property (Optional)"}),e.jsxs(se,{onValueChange:f.onChange,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})})}),e.jsx(te,{children:c.map(j=>e.jsx(A,{value:j.id.toString(),children:j.name},j.id))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:o.control,name:"status",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Status"}),e.jsxs(se,{onValueChange:f.onChange,value:f.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select status"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"}),e.jsx(A,{value:"scheduled",children:"Scheduled"})]})]}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:o.control,name:"description",render:({field:f})=>e.jsxs(de,{children:[e.jsx(he,{children:"Description"}),e.jsx(ue,{children:e.jsx(mt,{...f,placeholder:"Additional details about this financial record...",className:"min-h-[80px]"})}),e.jsx(fe,{})]})}),h&&e.jsxs("div",{className:"p-3 border rounded-lg bg-blue-50 dark:bg-blue-950",children:[e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const f=p(h),j=Kw.find(g=>g.value===h);return e.jsxs(e.Fragment,{children:[e.jsx(f,{className:`h-4 w-4 ${(j==null?void 0:j.color)||"text-blue-500"}`}),e.jsxs("span",{className:"font-medium text-sm",children:["Record will be tagged as: ",j==null?void 0:j.label]})]})})()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Processed by: ",n==null?void 0:n.firstName," ",n==null?void 0:n.lastName,"  ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:u.isPending,className:"min-w-[100px]",children:u.isPending?"Creating...":"Create Record"})]})]})})]})})}function tFe(){var _;const{toast:t}=at(),[s,n]=b.useState(!1),[r,a]=b.useState(!1),[i,l]=b.useState("all"),[o,c]=b.useState("all"),[d,u]=b.useState(""),[m,h]=b.useState(""),{data:x,isLoading:p}=ye({queryKey:i!=="all"?Es.finance.analytics(i):Es.finance.analytics()}),{data:f=[],isLoading:j}=ye({queryKey:Es.finance.all()}),{data:g=[]}=ye({queryKey:Es.properties.all()}),{data:y=[]}=ye({queryKey:i!=="all"?Es.bookings.withSource(i):Es.bookings.all()}),w=new URLSearchParams(window.location.search).get("propertyId");b.useEffect(()=>{w&&l(w)},[w]);const N=w?g.find(U=>U.id===parseInt(w)):null,S=async()=>{n(!0);try{await Promise.all([Bs.refetchQueries({queryKey:Es.finance.all()}),Bs.refetchQueries({predicate:U=>{const H=U.queryKey[0];return typeof H=="string"&&H.includes("/api/finance/analytics")}})]),t({title:"Refreshed",description:"Finance data has been updated."})}catch{t({title:"Error",description:"Failed to refresh finance data.",variant:"destructive"})}finally{n(!1)}},k=U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(U),T=b.useMemo(()=>{let U=[...f];return i!=="all"&&(U=U.filter(H=>String(H.propertyId)===i)),o!=="all"&&(U=U.filter(H=>H.category===o)),d&&(U=U.filter(H=>new Date(H.date)>=new Date(d))),m&&(U=U.filter(H=>new Date(H.date)<=new Date(m))),U.sort((H,Y)=>new Date(Y.date).getTime()-new Date(H.date).getTime())},[f,i,o,d,m]),C=b.useMemo(()=>{const U=new Set(f.map(H=>H.category));return Array.from(U).sort()},[f]),P=b.useMemo(()=>T.slice(0,10),[T]),$=b.useMemo(()=>y.filter(U=>parseFloat(U.amountDue||"0")>0),[y]),V=b.useMemo(()=>$.reduce((U,H)=>U+parseFloat(H.amountDue||"0"),0),[$]),I=()=>{l("all"),c("all"),u(""),h("")};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:w&&N?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(fh,{fallbackRoute:w?`/bookings?propertyId=${w}`:"/bookings",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Property"})})}),e.jsxs("h1",{className:"text-3xl mt-4 font-bold text-gray-900",children:["Finance Hub - ",N.name]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Financial data for this property"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Finance Hub"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Comprehensive financial management and analytics"})]})}),e.jsxs("div",{className:"flex gap-2",children:[w&&e.jsx(M,{variant:"outline",onClick:()=>window.location.href="/finance-hub","data-testid":"button-view-all-finances",children:"View All Finances"}),e.jsxs(M,{onClick:S,variant:"outline",disabled:s,"data-testid":"button-refresh-finance",children:[e.jsx(Ss,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),e.jsxs(M,{onClick:()=>a(!0),"data-testid":"button-create-finance",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Bt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k((x==null?void 0:x.totalRevenue)||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["From ",(x==null?void 0:x.confirmedBookingsCount)||0," confirmed bookings"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(Ed,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:k((x==null?void 0:x.totalExpenses)||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["From ",f.filter(U=>U.type==="expense").length," ","expense transactions"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(Je,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${((x==null?void 0:x.netProfit)||0)>=0?"text-green-600":"text-red-600"}`,children:k((x==null?void 0:x.netProfit)||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(_=x==null?void 0:x.profitMargin)==null?void 0:_.toFixed(1),"% profit margin"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Payments"}),e.jsx(Fi,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:k((x==null?void 0:x.pendingPayments)||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["From ",(x==null?void 0:x.pendingBookingsCount)||0," pending bookings"]})]})]})]}),!w&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{children:"Filters"}),(i!=="all"||o!=="all"||d||m)&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:I,"data-testid":"button-clear-filters",children:[e.jsx(on,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"property-filter",children:"Property"}),e.jsxs(se,{value:i,onValueChange:l,children:[e.jsx(ee,{id:"property-filter","data-testid":"select-property-filter",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),g.map(U=>e.jsx(A,{value:String(U.id),children:U.name},U.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"category-filter",children:"Category"}),e.jsxs(se,{value:o,onValueChange:c,children:[e.jsx(ee,{id:"category-filter","data-testid":"select-category-filter",children:e.jsx(ne,{placeholder:"All Categories"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Categories"}),C.map(U=>e.jsx(A,{value:U,children:U},U))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"date-from",children:"Date From"}),e.jsx(G,{id:"date-from",type:"date",value:d,onChange:U=>u(U.target.value),"data-testid":"input-date-from"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"date-to",children:"Date To"}),e.jsx(G,{id:"date-to",type:"date",value:m,onChange:U=>h(U.target.value),"data-testid":"input-date-to"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Recent Transactions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",P.length," of"," ",T.length," transactions"]})]}),e.jsx(D,{children:j?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin text-gray-400"})}):P.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters or add a new transaction"})]}):e.jsx("div",{className:"space-y-3",children:P.map(U=>{var R,q;const H=g.find(re=>re.id===U.propertyId),Y=U.attachments&&U.attachments.length>0,O=(R=U.referenceNumber)==null?void 0:R.startsWith("TASK-");return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors","data-testid":`transaction-${U.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full ${U.type==="income"?"bg-green-100":"bg-red-100"}`,children:U.type==="income"?e.jsx(H$,{className:"h-4 w-4 text-green-600"}):e.jsx(z$,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:new Date(U.date).toLocaleDateString()}),H&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:""}),e.jsx("span",{className:"text-sm text-gray-500",children:H.name})]}),e.jsx("span",{className:"text-gray-300",children:""}),e.jsx(z,{variant:"outline",className:"text-xs",children:U.category}),O&&e.jsx(Ws,{className:"h-4 w-4 text-blue-600 ml-1",title:"Task expense","data-testid":`task-indicator-${U.id}`}),Y&&e.jsx(ni,{className:"h-4 w-4 text-green-600 ml-1",title:`${(q=U.attachments)==null?void 0:q.length} evidence photo(s) attached`,"data-testid":`evidence-indicator-${U.id}`})]})]})]}),e.jsxs("div",{className:`text-lg font-semibold ${U.type==="income"?"text-green-600":"text-red-600"}`,children:[U.type==="income"?"+":"-",k(Math.abs(U.amount))]})]},U.id)})})})]}),e.jsxs(E,{className:"border-l-4 border-l-red-500",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(yr,{className:"h-5 w-5 text-red-600"}),"Outstanding Payments"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payments due from bookings"})]}),V>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Outstanding"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",k(V).replace("$","")]})]})]})}),e.jsx(D,{children:$.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ni,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 font-medium",children:"All Payments Up to Date"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No outstanding payments from bookings"})]}):e.jsx("div",{className:"space-y-3",children:$.map(U=>{const H=g.find(re=>re.id===U.propertyId),Y=parseFloat(U.amountDue||"0"),O=parseFloat(U.totalAmount||"0"),R=parseFloat(U.amountPaid||"0"),q=O>0?R/O*100:0;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50/50","data-testid":`outstanding-booking-${U.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.guestName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[H&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-600",children:H.name}),e.jsx("span",{className:"text-gray-300",children:""})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Check-in:"," ",new Date(U.checkIn).toLocaleDateString()]}),e.jsx("span",{className:"text-gray-300",children:""}),e.jsx(z,{className:`${U.paymentStatus==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"} text-xs`,children:U.paymentStatus})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${q}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:["$",k(R).replace("$","")," / $",k(O).replace("$","")]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount Due"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:["$",k(Y).replace("$","")]})]})]},U.id)})})})]})]}),e.jsx(eFe,{open:r,onOpenChange:a})]})}function bG({endpoints:t=["/api/dashboard/stats","/api/properties","/api/tasks","/api/bookings","/api/finance","/api/finance/analytics","/api/users"],variant:s="outline",size:n="sm",showStats:r=!1,showLastUpdate:a=!1,className:i=""}){const[l,o]=b.useState(!1),{refreshData:c,clearCache:d}=GF(),{toast:u}=at(),m=async()=>{o(!0);try{const x=t.map(async g=>{try{return await c(g),{endpoint:g,success:!0}}catch(y){return console.error(`Failed to refresh ${g}:`,y),{endpoint:g,success:!1,error:y}}}),p=await Promise.allSettled(x),f=p.filter(g=>g.status==="fulfilled").length,j=p.length-f;u({title:"Data Refreshed",description:`Updated ${f} endpoints${j>0?`, ${j} failed`:""}`,variant:j>0?"destructive":"default"})}catch(x){console.error("Data refresh failed:",x),u({title:"Refresh Failed",description:"Unable to refresh data",variant:"destructive"})}finally{o(!1)}},h=io.getCacheStats();return e.jsxs("div",{className:`flex items-center gap-2 ${i}`,children:[e.jsxs(M,{variant:s,size:n,onClick:m,disabled:l,className:"flex items-center gap-2",children:[e.jsx(Ss,{className:`h-4 w-4 ${l?"animate-spin":""}`}),n!=="sm"&&(l?"Refreshing...":"Refresh Data")]}),r&&e.jsxs(z,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(Pa,{className:"h-3 w-3"}),e.jsxs("span",{children:[h.active," cached"]})]}),a&&e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(et,{className:"h-3 w-3"}),e.jsx("span",{children:"Updated"})]})]})}function sFe(){return WF("/api/dashboard/stats",void 0,{backgroundRefresh:!0,refetchInterval:5*60*1e3})}function nFe(){return WF("/api/users",void 0,{backgroundRefresh:!0,refetchInterval:10*60*1e3})}const rFe=b.lazy(()=>Un(()=>import("./Settings-CbqaIxoh.js"),[])),aFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>Bce),void 0)),iFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>y$e),void 0)),lFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>ude),void 0)),oFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>Gce),void 0)),cFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>kce),void 0)),dFe=b.lazy(()=>Un(()=>import("./AdminGodModeRoleManager-Bpp5CunV.js"),[])),uFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>yRe),void 0)),mFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>Yce),void 0)),hFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>cde),void 0)),xFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>tde),void 0)),pFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>CFe),void 0)),fFe=b.lazy(()=>Un(()=>Promise.resolve().then(()=>v$e),void 0));function gFe(){const[t,s]=b.useState(null);sFe(),nFe();const n=[{title:" API Connections",description:"Configure Stripe, Hostaway, OpenAI, Twilio and other third-party API integrations",key:"api-connections",icon:tF,badge:"APIs",color:"bg-emerald-50 hover:bg-emerald-100 border-emerald-300 border-2",component:mFe},{title:"Settings",description:"General settings, branding, legal templates, and currency & tax configuration",key:"settings",icon:Jt,badge:"Core",color:"bg-blue-50 hover:bg-blue-100 border-blue-200",component:rFe},{title:"Staff Management",description:"Manage staff members, roles, permissions, and granular access control across all platform modules",key:"user-management",icon:dt,badge:"Staff",color:"bg-green-50 hover:bg-green-100 border-green-200",component:aFe},{title:"Automation Management",description:"Configure automated workflows, scheduling, and system automation rules",key:"automation-management",icon:ns,badge:"Auto",color:"bg-yellow-50 hover:bg-yellow-100 border-yellow-200",component:iFe},{title:"AI Features",description:"AI task management, notifications, feedback monitoring, and smart suggestions",key:"ai-features",icon:Sa,badge:"AI",color:"bg-purple-50 hover:bg-purple-100 border-purple-200",component:lFe},{title:"Activity Logs",description:"System activity monitoring, user actions, and audit trail management",key:"activity-logs",icon:Gs,badge:"Logs",color:"bg-orange-50 hover:bg-orange-100 border-orange-200",component:oFe},{title:"Sandbox Testing",description:"Demo data testing environment and system validation tools",key:"sandbox-testing",icon:Zj,badge:"Test",color:"bg-pink-50 hover:bg-pink-100 border-pink-200",component:cFe},{title:"Admin God Mode",description:"Advanced admin controls, role management, and system override capabilities",key:"admin-god-mode-role-manager",icon:qt,badge:"Admin",color:"bg-red-50 hover:bg-red-100 border-red-200",component:dFe},{title:"SaaS Management",description:"Multi-tenant organization management, signup requests, and tenant provisioning",key:"saas-management",icon:Pa,badge:"SaaS",color:"bg-indigo-50 hover:bg-indigo-100 border-indigo-200",component:uFe},{title:"System Integrity Check",description:"System health monitoring, integrity scanning, and diagnostic tools",key:"system-integrity-check",icon:qt,badge:"Diagnostics",color:"bg-red-50 hover:bg-red-100 border-red-200",component:hFe},{title:"AI Operations & Anomalies",description:"AI operations monitoring, anomaly detection, and performance analytics",key:"ai-ops-anomalies",icon:Sa,badge:"AI Ops",color:"bg-purple-50 hover:bg-purple-100 border-purple-200",component:xFe},{title:"Additional Settings",description:"Extended admin configuration options and advanced system settings",key:"additional-settings",icon:Jt,badge:"Extended",color:"bg-gray-50 hover:bg-gray-100 border-gray-200",component:pFe},{title:"Upgraded Admin Dashboard",description:"Enhanced admin control center with advanced monitoring capabilities",key:"upgraded-admin-dashboard",icon:pn,badge:"Enhanced",color:"bg-blue-50 hover:bg-blue-100 border-blue-200",component:fFe}],r=i=>{s(i)},a=n.find(i=>i.key===t);if(t&&a){const i=a.component;return e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(ec,{title:a.title}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"p-4 border-b bg-white",children:e.jsxs(M,{variant:"outline",onClick:()=>s(null),className:"flex items-center gap-2",children:[e.jsx(Il,{className:"h-4 w-4"}),"Back to System Hub"]})}),e.jsx(b.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsxs("p",{className:"text-muted-foreground",children:["Loading ",a.title,"..."]})]})}),children:e.jsx(i,{})})]})]})})}return e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(ec,{title:"System Hub"}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"System Hub"}),e.jsx("p",{className:"text-gray-600",children:"Complete system administration suite for user management, automation, and platform configuration"})]}),e.jsx(bG,{endpoints:["/api/dashboard/stats","/api/users"],variant:"outline",size:"sm",showStats:!0,showLastUpdate:!0})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(i=>{const l=i.icon;return e.jsxs(E,{className:`h-full ${i.color} border-2 transition-all duration-200 hover:scale-105 hover:shadow-lg hover:border-opacity-60 cursor-pointer group`,onClick:()=>r(i.key),children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/50",children:e.jsx(l,{className:"h-6 w-6 text-gray-700"})}),e.jsx("div",{children:e.jsx(B,{className:"text-lg font-semibold text-gray-900",children:i.title})})]}),e.jsx(z,{variant:"secondary",className:"bg-white/70 text-gray-700 border border-gray-300",children:i.badge})]})}),e.jsx(D,{className:"pt-0",children:e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:i.description})})]},i.key)})})]})})]})})}function vFe({size:t="md",className:s=""}){const n={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return e.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${n[t]} ${s}`})}function yFe({show:t,text:s="Loading"}){return t?e.jsx("div",{className:"fixed inset-0 z-[1000] grid place-items-center bg-white/70 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border bg-white px-4 py-3 shadow-lg",children:[e.jsx(vFe,{size:"lg",className:"border-t-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:s})]})}):null}function jFe(){const{toast:t}=at(),[s,n]=b.useState(!1),{data:r,isLoading:a,error:i}=ye({queryKey:["/api/system"]}),l=async()=>{n(!0),await Bs.invalidateQueries({queryKey:["/api/system"]}),await Bs.refetchQueries({queryKey:["/api/system"]}),t({title:"System data refreshed",description:"Latest system information loaded successfully"}),setTimeout(()=>n(!1),500)};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx(yFe,{show:!0,text:"Loading system information..."})]})}):i||!r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-6",children:e.jsxs(E,{className:"max-w-md w-full",children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ar,{className:"h-6 w-6"}),"System Data Unavailable"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:i instanceof Error?i.message:"No system data available"}),e.jsxs(M,{onClick:l,className:"w-full",children:[e.jsx(Ss,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Jt,{className:"h-8 w-8 text-blue-600"}),"System Hub"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Platform administration and system monitoring"})]}),e.jsxs(M,{onClick:l,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ss,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(E,{className:"border-2 border-blue-200 bg-blue-50",children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium text-blue-900",children:"System Version"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:r.version}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"HostPilotPro"})]})]}),e.jsxs(E,{className:"border-2 border-green-200 bg-green-50",children:[e.jsx(L,{className:"pb-3",children:e.jsxs(B,{className:"text-sm font-medium text-green-900 flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),"System Status"]})}),e.jsxs(D,{children:[e.jsxs(z,{className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(ni,{className:"h-3 w-3 mr-1"}),r.status.toUpperCase()]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"All systems operational"})]})]}),e.jsxs(E,{className:"border-2 border-purple-200 bg-purple-50",children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium text-purple-900",children:"Last Updated"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-sm font-semibold text-purple-700",children:new Date(r.lastUpdated).toLocaleString()}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Real-time monitoring"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5 text-yellow-600"}),"System Health"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pa,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Database"})]}),e.jsx(z,{className:r.health.database==="healthy"?"bg-green-600":"bg-red-600",children:r.health.database})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vD,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"API"})]}),e.jsx(z,{className:r.health.api==="operational"?"bg-green-600":"bg-red-600",children:r.health.api})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ns,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:"Cache"})]}),e.jsx(z,{className:r.health.cache==="active"?"bg-green-600":"bg-red-600",children:r.health.cache})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-blue-600"}),"Active Modules"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(rx,{icon:ln,name:"Properties",count:r.modules.properties.count,active:r.modules.properties.active,color:"blue"}),e.jsx("a",{href:"/admin/user-management",className:"block","data-testid":"module-link-users",children:e.jsx(rx,{icon:dt,name:"Users",count:r.modules.users.count,active:r.modules.users.active,color:"green",clickable:!0})}),e.jsx(rx,{icon:Je,name:"Finance",count:r.modules.finance.count,active:r.modules.finance.active,color:"emerald"}),e.jsx(rx,{icon:Yo,name:"Tasks",count:r.modules.tasks.count,active:r.modules.tasks.active,color:"orange"}),e.jsx(rx,{icon:tt,name:"Bookings",count:r.modules.bookings.count,active:r.modules.bookings.active,color:"purple"})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(vD,{className:"h-5 w-5 text-purple-600"}),"API Configurations"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Zg,{name:"Stripe",active:r.apiConfigs.hasStripe}),e.jsx(Zg,{name:"Hostaway",active:r.apiConfigs.hasHostaway}),e.jsx(Zg,{name:"OpenAI",active:r.apiConfigs.hasOpenAI}),e.jsx(Zg,{name:"Twilio",active:r.apiConfigs.hasTwilio})]})})]}),e.jsxs(E,{className:"border-2 border-indigo-200 bg-indigo-50",children:[e.jsx(L,{children:e.jsx(B,{className:"text-indigo-900",children:"Organization"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Name:"}),e.jsx("span",{className:"text-indigo-900 font-semibold",children:r.organization.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"ID:"}),e.jsx("span",{className:"text-indigo-900 font-mono text-sm",children:r.organization.id})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5 text-indigo-600"}),"System Administration"]})}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsxs("a",{href:"/admin/user-management",className:"block p-4 bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-2 border-blue-200 rounded-lg transition-all cursor-pointer group","data-testid":"link-user-management",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(dt,{className:"h-6 w-6 text-blue-600 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"User Management"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Create and manage user accounts with role-based access control"})]})})})]})]})})}function rx({icon:t,name:s,count:n,active:r,color:a,clickable:i=!1}){const l={blue:"bg-blue-50 border-blue-200 text-blue-700",green:"bg-green-50 border-green-200 text-green-700",emerald:"bg-emerald-50 border-emerald-200 text-emerald-700",orange:"bg-orange-50 border-orange-200 text-orange-700",purple:"bg-purple-50 border-purple-200 text-purple-700"};return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${l[a]} ${i?"hover:shadow-lg hover:scale-105 transition-all cursor-pointer":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(t,{className:"h-5 w-5"}),r?e.jsx(ni,{className:"h-4 w-4 text-green-600"}):e.jsx(ar,{className:"h-4 w-4 text-red-600"})]}),e.jsx("div",{className:"font-semibold text-lg",children:s}),e.jsxs("div",{className:"text-sm opacity-80",children:[n," records"]}),i&&e.jsx("div",{className:"text-xs mt-2 font-medium opacity-70",children:"Click to manage "})]})}function Zg({name:t,active:s}){return e.jsxs("div",{className:`p-3 rounded-lg border-2 flex items-center justify-between ${s?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("span",{className:"font-medium text-sm",children:t}),s?e.jsx(ni,{className:"h-4 w-4 text-green-600"}):e.jsx(ar,{className:"h-4 w-4 text-gray-400"})]})}function NG({userId:t,userRole:s,userEmail:n,userName:r,currentBalance:a,onBalanceReset:i}){const[l,o]=b.useState(!1),[c,d]=b.useState(""),[u,m]=b.useState(null),{user:h}=Cr(),{toast:x}=at(),p=yt();if((h==null?void 0:h.role)!=="admin"||!["owner","portfolio-manager","retail-agent","referral-agent"].includes(s))return null;const j=Ee({mutationFn:async()=>await ve("GET",`/api/admin/balance-reset/user/${t}/balance`),onSuccess:S=>{m(S),o(!0)},onError:S=>{x({title:"Error",description:S.message||"Failed to fetch balance information",variant:"destructive"})}}),g=Ee({mutationFn:async S=>await ve("POST","/api/admin/balance-reset/execute",S),onSuccess:()=>{x({title:"Balance Reset Successful",description:`${r}'s balance has been reset to zero.`}),p.invalidateQueries({queryKey:["/api/admin/balance-reset"]}),p.invalidateQueries({queryKey:["/api/owner"]}),p.invalidateQueries({queryKey:["/api/agent"]}),p.invalidateQueries({queryKey:["/api/referral"]}),o(!1),d(""),m(null),i==null||i()},onError:S=>{x({title:"Reset Failed",description:S.message||"Failed to reset user balance",variant:"destructive"})}}),y=()=>{j.mutate()},v=()=>{g.mutate({userId:t,resetReason:c.trim()||void 0})},w=S=>{switch(S){case"owner":return"Property Owner";case"portfolio-manager":return"Portfolio Manager";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";default:return S}},N=S=>{switch(S){case"owner":return"pending payouts and commission deductions";case"portfolio-manager":return"commission earnings and payout requests";case"retail-agent":return"commission earnings and payout requests";case"referral-agent":return"referral commissions and payout requests";default:return"financial balances"}};return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"border-red-200 bg-red-50/50",children:[e.jsxs(L,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"h-5 w-5 text-red-600"}),e.jsx(B,{className:"text-lg text-red-900",children:"Admin Controls"})]}),e.jsxs(Me,{className:"text-red-700",children:["Administrative balance management for ",w(s)]})]}),e.jsxs(D,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Current Balance:"}),e.jsx("span",{className:"text-sm text-red-700",children:a!==void 0?`$${a.toFixed(2)}`:"Loading..."})]})}),e.jsx(M,{onClick:y,disabled:j.isPending||g.isPending,variant:"destructive",size:"sm",className:"w-full",children:j.isPending?"Loading Balance...":"Reset Balance to $0"}),e.jsxs("p",{className:"text-xs text-red-600",children:[" This action will clear all ",N(s)," and cannot be undone."]})]})]}),e.jsx($T,{open:l,onOpenChange:o,children:e.jsxs(_b,{children:[e.jsxs(Rb,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-6 w-6 text-red-600"}),e.jsx($b,{children:"Confirm Balance Reset"})]}),e.jsxs(Fb,{className:"space-y-3",children:[e.jsxs("div",{children:["Are you sure you want to reset ",e.jsx("strong",{children:r}),"'s balance to zero?"]}),u&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"User:"}),e.jsxs("span",{className:"text-sm",children:[r," (",n,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Role:"}),e.jsx("span",{className:"text-sm",children:w(s)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Balance:"}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:["$",u.currentBalance.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"resetReason",className:"text-sm font-medium",children:"Reason for Reset (optional):"}),e.jsx(mt,{id:"resetReason",placeholder:"Enter reason for balance reset...",value:c,onChange:S=>d(S.target.value),className:"min-h-16"})]}),e.jsxs("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:[e.jsx("strong",{children:"Warning:"})," This action will be logged and cannot be undone."]})]})]}),e.jsxs(Ib,{children:[e.jsx(Bb,{onClick:()=>d(""),children:"Cancel"}),e.jsx(Lb,{onClick:v,disabled:g.isPending,className:"bg-red-600 hover:bg-red-700",children:g.isPending?"Resetting...":"Reset Balance"})]})]})})]})}const bFe=ds({checkIn:Pe().min(1,"Check-in date required"),checkOut:Pe().min(1,"Check-out date required"),guests:ms().min(1,"At least 1 guest required"),bedrooms:ms().optional(),priceMin:ms().optional(),priceMax:ms().optional()}),NFe=ds({propertyId:ms(),guestName:Pe().min(1,"Guest name required"),guestEmail:Pe().email("Valid email required"),guestPhone:Pe().min(1,"Phone number required"),guestCountry:Pe().optional(),checkIn:Pe().min(1,"Check-in date required"),checkOut:Pe().min(1,"Check-out date required"),guests:ms().min(1,"At least 1 guest required"),totalAmount:ms().min(1,"Amount required"),commissionType:zs(["fixed_percentage","custom_topup"]).default("fixed_percentage"),netPrice:ms().optional(),topupAmount:ms().optional(),bookingPolicy:zs(["standard","non_refundable"]).default("standard"),paymentMethod:zs(["stripe_instant","bank_transfer","cash","other"]).default("stripe_instant"),paymentAmount:ms().min(1,"Payment amount required"),dueDate:Pe().optional(),specialRequests:Pe().optional(),notes:Pe().optional()}),wFe=ds({payoutAmount:ms().min(1,"Amount required"),payoutMethod:Pe().min(1,"Payment method required"),requestNotes:Pe().optional(),agentBankDetails:Pe().min(1,"Bank details required")});function SFe(){const[t,s]=b.useState({checkIn:"",checkOut:"",guests:2}),[n,r]=b.useState(null),[a,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState("booking-engine"),[h]=Yn();b.useEffect(()=>{const R=new URLSearchParams(window.location.search).get("tab");R&&m(R)},[h]);const{toast:x}=at(),p=yt(),{user:f}=Cr(),j=Zt({resolver:xs(bFe),defaultValues:t}),g=Zt({resolver:xs(NFe),defaultValues:{guests:2,totalAmount:0,commissionType:"fixed_percentage",netPrice:0,topupAmount:0,bookingPolicy:"standard",paymentMethod:"stripe_instant",paymentAmount:0,dueDate:""}}),y=Zt({resolver:xs(wFe),defaultValues:{payoutMethod:"bank_transfer"}}),{data:v=[],isLoading:w,error:N}=ye({queryKey:["/api/agent/properties",t],queryFn:async()=>{try{const O=new URLSearchParams;t.checkIn&&O.append("checkIn",t.checkIn),t.checkOut&&O.append("checkOut",t.checkOut),t.guests&&O.append("guests",t.guests.toString()),t.bedrooms&&O.append("bedrooms",t.bedrooms.toString()),t.priceMin&&O.append("priceMin",t.priceMin.toString()),t.priceMax&&O.append("priceMax",t.priceMax.toString());const R=await ve("GET",`/api/agent/properties?${O.toString()}`);return Array.isArray(R)?R:[]}catch(O){return console.error("Failed to fetch properties:",O),[]}},enabled:!!(t.checkIn&&t.checkOut),retry:2,staleTime:3e4}),{data:S=[],error:k}=ye({queryKey:["/api/agent/bookings"],queryFn:async()=>{try{const O=await ve("GET","/api/agent/bookings");return Array.isArray(O)?O:[]}catch(O){return console.error("Failed to fetch bookings:",O),[]}},retry:2,staleTime:6e4}),{data:T,error:C}=ye({queryKey:["/api/agent/commission-summary"],queryFn:async()=>{try{return await ve("GET","/api/agent/commission-summary")||{totalCommissionEarned:0,totalCommissionPaid:0,pendingCommission:0,totalBookings:0,thisMonthCommission:0,thisMonthBookings:0,lastMonthCommission:0,lastMonthBookings:0,averageCommissionPerBooking:0,commissionRate:15,currency:"THB"}}catch(O){return console.error("Failed to fetch commission summary:",O),{totalCommissionEarned:0,totalCommissionPaid:0,pendingCommission:0,totalBookings:0,thisMonthCommission:0,thisMonthBookings:0,lastMonthCommission:0,lastMonthBookings:0,averageCommissionPerBooking:0,commissionRate:15,currency:"THB"}}},retry:2,staleTime:6e4}),{data:P=[],error:$}=ye({queryKey:["/api/agent/payouts"],queryFn:async()=>{try{const O=await ve("GET","/api/agent/payouts");return Array.isArray(O)?O:[]}catch(O){return console.error("Failed to fetch payouts:",O),[]}},retry:2,staleTime:6e4}),V=Ee({mutationFn:O=>{let R=0,q=10;O.commissionType==="fixed_percentage"?R=O.totalAmount*.1:O.commissionType==="custom_topup"&&O.netPrice&&O.totalAmount&&(R=O.totalAmount-O.netPrice,q=R/O.totalAmount*100);const re={...O,propertyId:(n==null?void 0:n.id)||0,commissionAmount:R,commissionRate:q};return ve("POST","/api/agent/bookings",re)},onSuccess:()=>{x({title:"Success",description:"Booking created successfully with commission calculated!"}),i(!1),g.reset(),r(null),p.invalidateQueries({queryKey:["/api/agent/bookings"]}),p.invalidateQueries({queryKey:["/api/agent/commission-summary"]})},onError:O=>{x({title:"Error",description:(O==null?void 0:O.message)||"Failed to create booking",variant:"destructive"})}}),I=Ee({mutationFn:O=>ve("POST","/api/agent/payouts",O),onSuccess:()=>{x({title:"Success",description:"Payout request submitted!"}),o(!1),y.reset(),p.invalidateQueries({queryKey:["/api/agent/payouts"]})},onError:()=>{x({title:"Error",description:"Failed to submit payout request",variant:"destructive"})}}),_=O=>{s(O)},U=O=>{r(O),g.setValue("propertyId",O.id),g.setValue("checkIn",t.checkIn),g.setValue("checkOut",t.checkOut),g.setValue("guests",t.guests);const R=new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime(),q=Math.ceil(R/(1e3*60*60*24)),re=parseFloat(O.pricePerNight)*q;g.setValue("totalAmount",re);const K=(g.getValues("bookingPolicy")||"standard")==="non_refundable"?re:re*.3;g.setValue("paymentAmount",K),i(!0)},H=O=>{switch(O){case"confirmed":return e.jsx(z,{className:"bg-green-100 text-green-800",children:"Confirmed"});case"pending":return e.jsx(z,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return e.jsx(z,{className:"bg-red-100 text-red-800",children:"Cancelled"});default:return e.jsx(z,{children:O})}},Y=O=>{switch(O){case"paid":return e.jsx(z,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return e.jsx(z,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"approved":return e.jsx(z,{className:"bg-blue-100 text-blue-800",children:"Approved"});case"rejected":return e.jsx(z,{className:"bg-red-100 text-red-800",children:"Rejected"});default:return e.jsx(z,{children:O})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Retail Agent Booking Engine"}),e.jsx("p",{className:"text-muted-foreground",children:"Live property booking system with commission tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[T&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"}),e.jsxs("p",{className:"text-lg font-semibold",children:[T.currency||"THB"," ",T.totalCommissionEarned||0]})]})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Commission"}),e.jsxs("p",{className:"text-lg font-semibold",children:[T.currency||"THB"," ",T.pendingCommission||0]})]})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"text-lg font-semibold",children:T.totalBookings||0})]})]})})})]}),e.jsxs(M,{variant:"outline",onClick:()=>window.location.href="/api/auth/demo-logout",className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-4 w-4"}),"Logout"]})]})]}),(N||k||C||$)&&e.jsx(E,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"API Connection Notice"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Some data may be temporarily unavailable. The system is using fallback data to ensure continued operation.",N&&" Properties data may be limited.",k&&" Booking history may be incomplete.",C&&" Commission data may be delayed.",$&&" Payout information may be outdated."]})]})]})})}),e.jsxs(ft,{value:u,onValueChange:m,className:"space-y-4",children:[e.jsxs(xt,{children:[e.jsx(ae,{value:"booking-engine",children:"Live Booking Engine"}),e.jsx(ae,{value:"my-bookings",children:"My Reservations"}),e.jsx(ae,{value:"commission-tracker",children:"Commission Tracker"}),e.jsx(ae,{value:"payout-requests",children:"Payout Requests"})]}),e.jsxs(ie,{value:"booking-engine",className:"space-y-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center space-x-2",children:[e.jsx(hs,{className:"h-5 w-5"}),e.jsx("span",{children:"Property Search"})]}),e.jsx(Me,{children:"Search available properties with live availability"})]}),e.jsx(D,{children:e.jsx(os,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(_),className:"grid grid-cols-6 gap-4",children:[e.jsx(me,{control:j.control,name:"checkIn",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Check-in"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:j.control,name:"checkOut",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Check-out"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:j.control,name:"guests",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guests"}),e.jsx(ue,{children:e.jsx(G,{type:"number",min:"1",...O,onChange:R=>O.onChange(parseInt(R.target.value))})}),e.jsx(fe,{})]})}),e.jsx(me,{control:j.control,name:"bedrooms",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Min Bedrooms"}),e.jsx(ue,{children:e.jsx(G,{type:"number",min:"0",placeholder:"Any",...O,onChange:R=>O.onChange(R.target.value?parseInt(R.target.value):void 0)})}),e.jsx(fe,{})]})}),e.jsx(me,{control:j.control,name:"priceMax",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Max Price/Night"}),e.jsx(ue,{children:e.jsx(G,{type:"number",min:"0",placeholder:"Any",...O,onChange:R=>O.onChange(R.target.value?parseFloat(R.target.value):void 0)})}),e.jsx(fe,{})]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs(M,{type:"submit",className:"w-full",children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Search"]})})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Searching properties..."})]}):v.length===0?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Ut,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:t.checkIn&&t.checkOut?"No available properties found for your search criteria":"Enter search criteria to see available properties"})]}):v.map(O=>e.jsxs(E,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:O.images&&O.images.length>0?e.jsx("img",{src:O.images[0],alt:O.name,className:"w-full h-full object-cover"}):e.jsx(ws,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:O.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:O.address})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ko,{className:"h-4 w-4"}),e.jsxs("span",{children:[O.bedrooms," bed"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(dt,{className:"h-4 w-4"}),e.jsxs("span",{children:[O.maxGuests," guests"]})]})]}),O.isAvailable?e.jsx(z,{className:"bg-green-100 text-green-800",children:"Available"}):e.jsx(z,{className:"bg-red-100 text-red-800",children:"Unavailable"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold",children:[O.currency||"THB"," ",parseFloat(O.pricePerNight||0).toLocaleString(),"/night"]}),t.checkIn&&t.checkOut&&e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:["Total: ",O.currency||"THB"," ",(parseFloat(O.pricePerNight||0)*Math.ceil((new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime())/(1e3*60*60*24))).toLocaleString()," for ",Math.ceil((new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime())/(1e3*60*60*24))," nights"]}),O.commission&&e.jsxs("p",{className:"text-sm text-green-600",children:[O.commission,"% commission"]})]}),e.jsx(M,{onClick:()=>U(O),disabled:!O.isAvailable||!t.checkIn||!t.checkOut,size:"sm",children:"Book Now"})]})]})})]},O.id))})]}),e.jsx(ie,{value:"my-bookings",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"My Reservations"}),e.jsx(Me,{children:"Track all your agent reservations and their status"})]}),e.jsx(D,{children:S.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K$,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No bookings found"})]}):e.jsx("div",{className:"space-y-4",children:S.map(O=>e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:O.propertyName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:O.guestName}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(Gi,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:O.guestEmail})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dates"}),e.jsxs("p",{className:"font-medium",children:[new Date(O.checkIn).toLocaleDateString()," - ",new Date(O.checkOut).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm",children:[O.guests," guests"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount & Commission"}),e.jsxs("p",{className:"font-medium",children:["",O.totalAmount]}),e.jsxs("p",{className:"text-sm text-green-600",children:["Commission: ",O.commissionAmount]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[H(O.bookingStatus),e.jsxs("p",{className:"text-xs mt-1",children:["Commission: ",H(O.commissionStatus)]})]}),O.hostawayBookingId&&e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Hi,{className:"h-4 w-4"})})]})]})})},O.id))})})]})}),e.jsxs(ie,{value:"commission-tracker",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",(T==null?void 0:T.totalEarned)||(T==null?void 0:T.totalCommissionEarned)||0]})]})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Paid"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",(T==null?void 0:T.totalPaid)||(T==null?void 0:T.totalCommissionPaid)||0]})]})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Balance"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",(T==null?void 0:T.currentBalance)||((T==null?void 0:T.totalCommissionEarned)||0)-((T==null?void 0:T.totalCommissionPaid)||0)]})]})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",(T==null?void 0:T.pendingCommissions)||(T==null?void 0:T.pendingCommission)||0]})]})]})})})]}),f&&e.jsx(NG,{userId:f.id,userRole:"retail-agent",userEmail:f.email||"",userName:`${f.firstName||""} ${f.lastName||""}`.trim()||f.email||"",currentBalance:T==null?void 0:T.currentBalance,onBalanceReset:()=>{p.invalidateQueries({queryKey:["/api/agent/commission-summary"]}),p.invalidateQueries({queryKey:["/api/agent/payouts"]})}})]}),e.jsxs(ie,{value:"payout-requests",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Payout Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Request payouts for your earned commissions"})]}),e.jsxs(Ke,{open:l,onOpenChange:o,children:[e.jsx(cs,{asChild:!0,children:e.jsx(M,{children:"Request Payout"})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Request Commission Payout"}),e.jsx(Rt,{children:"Request a payout for your earned commissions"})]}),e.jsx(os,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(O=>I.mutate(O)),className:"space-y-4",children:[e.jsx(me,{control:y.control,name:"payoutAmount",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Payout Amount"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",...O,onChange:R=>O.onChange(parseFloat(R.target.value))})}),e.jsx(fe,{})]})}),e.jsx(me,{control:y.control,name:"payoutMethod",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Payment Method"}),e.jsxs(se,{onValueChange:O.onChange,defaultValue:O.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select payment method"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(A,{value:"paypal",children:"PayPal"}),e.jsx(A,{value:"check",children:"Check"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:y.control,name:"agentBankDetails",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Bank Details"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Enter your bank account details...",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:y.control,name:"requestNotes",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Notes (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Any additional notes...",...O})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:I.isPending,children:I.isPending?"Submitting...":"Submit Request"})]})]})})]})]})]}),e.jsx(E,{children:e.jsx(D,{className:"p-4",children:P.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Je,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No payout requests yet"})]}):e.jsx("div",{className:"space-y-4",children:P.map(O=>e.jsx(E,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["$",O.payoutAmount]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested on ",new Date(O.requestedAt).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm",children:["Method: ",O.payoutMethod]})]}),e.jsxs("div",{className:"text-right",children:[Y(O.payoutStatus),O.paidAt&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Paid on ",new Date(O.paidAt).toLocaleDateString()]})]})]})})},O.id))})})})]})]}),e.jsx(Ke,{open:a,onOpenChange:i,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{children:["Create Booking - ",n==null?void 0:n.name]}),e.jsx(Rt,{children:"Complete the booking details for your client"})]}),e.jsx(os,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(O=>V.mutate(O)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:g.control,name:"guestName",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Name"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Full name",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"guestEmail",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Email"}),e.jsx(ue,{children:e.jsx(G,{type:"email",placeholder:"email@example.com",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"guestPhone",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Phone Number"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"+1 (555) 123-4567",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"guestCountry",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Country (Optional)"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Country",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"checkIn",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Check-in Date"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"checkOut",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Check-out Date"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"guests",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Number of Guests"}),e.jsx(ue,{children:e.jsx(G,{type:"number",min:"1",...O,onChange:R=>O.onChange(parseInt(R.target.value))})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"totalAmount",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Total Amount"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",...O,onChange:R=>O.onChange(parseFloat(R.target.value))})}),e.jsx(fe,{})]})})]}),e.jsxs(E,{className:"p-4 bg-blue-50 border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5 text-blue-600"}),"Commission Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(me,{control:g.control,name:"commissionType",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Commission Type"}),e.jsxs(se,{onValueChange:O.onChange,defaultValue:O.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select commission type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"fixed_percentage",children:"Fixed 10% Commission"}),e.jsx(A,{value:"custom_topup",children:"Custom Top-up Amount"})]})]}),e.jsx(fe,{})]})}),g.watch("commissionType")==="custom_topup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o2,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Important: Top-up Commission Guidelines"})]}),e.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>d(!0),className:"flex items-center gap-1 text-amber-700 border-amber-300 hover:bg-amber-100",children:[e.jsx(vt,{className:"h-3 w-3"}),"Read Me"]})]}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Please read our guidelines before setting custom margins to ensure optimal customer experience."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:g.control,name:"netPrice",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Net Price (USD)"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",placeholder:"1050.00",...O,onChange:R=>{O.onChange(parseFloat(R.target.value));const q=parseFloat(R.target.value)||0,re=g.getValues("totalAmount")||0;if(q&&re>q){const we=re-q;g.setValue("topupAmount",we)}}})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"topupAmount",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Your Commission (Auto-calculated)"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",readOnly:!0,className:"bg-gray-100",...O})}),e.jsx(ls,{children:"Total Amount - Net Price = Your Commission"}),e.jsx(fe,{})]})})]})]}),g.watch("commissionType")==="fixed_percentage"&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Fixed 10% Commission:"})," You'll earn 10% of the total booking amount as commission."]}),e.jsxs("p",{className:"text-sm font-medium text-green-600 mt-1",children:["Commission: $",((g.watch("totalAmount")||0)*.1).toFixed(2)]})]}),g.watch("commissionType")==="custom_topup"&&g.watch("netPrice")&&g.watch("totalAmount")&&e.jsx("div",{className:"p-3 bg-white rounded-lg border",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Net Price:"})," $",g.watch("netPrice")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Guest Pays:"})," $",g.watch("totalAmount")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Your Commission:"})," ",e.jsxs("span",{className:"text-green-600 font-medium",children:["$",((g.watch("totalAmount")||0)-(g.watch("netPrice")||0)).toFixed(2)]})]})]})})]})]}),e.jsxs(E,{className:"p-4 bg-green-50 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-600"}),"Booking Policy & Payment"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(me,{control:g.control,name:"bookingPolicy",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Booking Policy"}),e.jsxs(se,{onValueChange:R=>{O.onChange(R);const q=g.getValues("totalAmount")||0;R==="non_refundable"?g.setValue("paymentAmount",q):g.setValue("paymentAmount",q*.3)},defaultValue:O.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select booking policy"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"standard",children:"Standard - 30% Deposit Required"}),e.jsx(A,{value:"non_refundable",children:"Non-Refundable - Full Payment Required"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"paymentAmount",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Payment Amount ()"}),e.jsx(ue,{children:e.jsx(G,{type:"number",step:"0.01",...O,onChange:R=>O.onChange(parseFloat(R.target.value))})}),e.jsx(ls,{children:g.watch("bookingPolicy")==="non_refundable"?"Non-refundable: Full payment required upfront":"Standard: 30% deposit required, remaining balance due at check-in"}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"paymentMethod",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Payment Method"}),e.jsxs(se,{onValueChange:R=>{if(O.onChange(R),R!=="stripe_instant"){const q=new Date;q.setDate(q.getDate()+3),g.setValue("dueDate",q.toISOString().split("T")[0])}else g.setValue("dueDate","")},defaultValue:O.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select payment method"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"stripe_instant",children:" Stripe - Instant Payment"}),e.jsx(A,{value:"bank_transfer",children:" Bank Transfer"}),e.jsx(A,{value:"cash",children:" Cash Payment"}),e.jsx(A,{value:"other",children:" Other (Manual Invoice)"})]})]}),e.jsx(fe,{})]})}),g.watch("paymentMethod")!=="stripe_instant"&&e.jsx(me,{control:g.control,name:"dueDate",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Payment Due Date"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...O})}),e.jsx(ls,{children:"Invoice will be generated with this due date"}),e.jsx(fe,{})]})}),e.jsx("div",{className:"p-3 bg-white rounded-lg border",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Booking Amount:"}),e.jsxs("span",{className:"font-medium",children:["",g.watch("totalAmount")||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Required Now:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["",g.watch("paymentAmount")||0]})]}),g.watch("bookingPolicy")==="standard"&&e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{children:["",((g.watch("totalAmount")||0)-(g.watch("paymentAmount")||0)).toFixed(2)]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Your Commission:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["",g.watch("commissionType")==="fixed_percentage"?((g.watch("totalAmount")||0)*.1).toFixed(2):((g.watch("totalAmount")||0)-(g.watch("netPrice")||0)).toFixed(2)]})]})})]})})]})]}),e.jsx(me,{control:g.control,name:"specialRequests",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Special Requests (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Any special requests from the guest...",...O})}),e.jsx(fe,{})]})}),e.jsx(me,{control:g.control,name:"notes",render:({field:O})=>e.jsxs(de,{children:[e.jsx(he,{children:"Agent Notes (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Internal notes about this booking...",...O})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),g.watch("paymentMethod")==="stripe_instant"?e.jsx(M,{type:"submit",disabled:V.isPending,className:"bg-purple-600 hover:bg-purple-700",children:V.isPending?"Processing...":" Pay Now with Stripe"}):e.jsx(M,{type:"submit",disabled:V.isPending,children:V.isPending?"Creating...":"Create Booking & Generate Invoice"})]})]})})]})}),e.jsx(Ke,{open:c,onOpenChange:d,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{className:"flex items-center gap-2",children:[e.jsx(o2,{className:"h-5 w-5 text-blue-600"}),"Top-up Commission Guidelines"]}),e.jsx(Rt,{children:"Important information about setting custom margins for bookings"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Market-Based Pricing Policy"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Our rates are calculated according to current market conditions and are close to real market values. This ensures fair pricing for both guests and property owners while maintaining competitive positioning."})]}),e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Warning: Excessive Margins"]}),e.jsx("p",{className:"text-amber-700 text-sm mb-2",children:e.jsx("strong",{children:"Setting excessive margins may negatively impact customer experience."})}),e.jsxs("ul",{className:"text-amber-700 text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Higher prices create elevated guest expectations"}),e.jsx("li",{children:"Guests may expect premium services that exceed actual property offerings"}),e.jsx("li",{children:"This disconnect can lead to negative reviews and customer dissatisfaction"}),e.jsx("li",{children:"Poor reviews affect property reputation and future bookings"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Recommended Practice"}),e.jsxs("ul",{className:"text-green-700 text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Keep margins reasonable (typically 10-15% above net price)"}),e.jsx("li",{children:"Consider property amenities and market positioning"}),e.jsx("li",{children:"Ensure guest expectations align with actual offerings"}),e.jsx("li",{children:"Focus on long-term customer satisfaction over short-term profits"}),e.jsx("li",{children:"Use the fixed 10% commission option for standard bookings"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Example Scenarios"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:" Reasonable:"}),e.jsx("span",{children:"Net $1000  Guest Pays $1150 (15% margin)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-600",children:" Excessive:"}),e.jsx("span",{children:"Net $1000  Guest Pays $1400 (40% margin)"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(M,{onClick:()=>d(!1),children:"I Understand"})})]})})]})}const wG=()=>{const t=[{title:"Activity Logs",description:"View system activity logs and user actions",icon:Gs,href:"/admin/activity-log",badge:null},{title:"Finance Reset",description:"Administrative finance system reset controls",icon:qt,href:"/admin/finance-reset",badge:null},{title:"AI Notifications & Reminders",description:"Configure AI-powered notifications and reminder systems",icon:Sa,href:"/ai-notifications-reminders",badge:"New"},{title:"Sandbox Testing",description:"Quality assurance testing environment",icon:Gs,href:"/sandbox-testing",badge:"QA"},{title:"System Integrity Check",description:"Verify system health and data integrity",icon:qt,href:"/admin/system-integrity-check",badge:"QA"},{title:"System-Wide Demo Integration",description:"Demo data management and system integration tools",icon:Pa,href:"/system-wide-demo-integration",badge:"Demo"}];return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Additional Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Administrative tools and advanced configuration options"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2",children:t.map((s,n)=>{const r=s.icon;return e.jsxs(E,{className:"hover:shadow-md transition-shadow",children:[e.jsx(L,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(r,{className:"h-5 w-5 text-primary"})}),e.jsx("div",{className:"space-y-1",children:e.jsxs(B,{className:"text-lg flex items-center gap-2",children:[s.title,s.badge&&e.jsx(z,{variant:"secondary",className:"text-xs",children:s.badge})]})})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsx(Me,{className:"text-sm",children:s.description}),e.jsx(nn,{href:s.href,children:e.jsxs(M,{className:"w-full",variant:"outline",children:[e.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Open ",s.title]})})]})]},n)})}),e.jsx("div",{className:"mt-8 p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx("span",{children:"These settings require administrative privileges"})]})})]})},CFe=Object.freeze(Object.defineProperty({__proto__:null,default:wG},Symbol.toStringTag,{value:"Module"}));function u6(){var K,Ce,pe,F,Q,Z,le,oe,Ae,ge,xe,$e,ke,Ze,gt,Kt,be,J,Ne,De,We,qe,Le,pt,Qt,as,In,je,it,Js;const[t,s]=b.useState("all"),[n,r]=b.useState(null),[a,i]=b.useState(""),{toast:l}=at(),o=yt(),{data:c,isLoading:d}=ye({queryKey:["/api/smart-pricing/dashboard",t],queryFn:()=>ve("GET",`/api/smart-pricing/dashboard${t!=="all"?`?propertyId=${t}`:""}`)}),{data:u,isLoading:m}=ye({queryKey:["/api/smart-pricing/year-on-year",t],queryFn:()=>ve("GET",`/api/smart-pricing/year-on-year${t!=="all"?`?propertyId=${t}`:""}`)}),{data:h,isLoading:x}=ye({queryKey:["/api/smart-pricing/holidays"],queryFn:()=>ve("GET","/api/smart-pricing/holidays"),retry:!1}),p=Array.isArray(h)?h:[],{data:f,isLoading:j}=ye({queryKey:["/api/smart-pricing/price-deviation",t],queryFn:()=>ve("GET",`/api/smart-pricing/price-deviation${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),{data:g,isLoading:y}=ye({queryKey:["/api/smart-pricing/booking-gaps",t],queryFn:()=>ve("GET",`/api/smart-pricing/booking-gaps${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),v=Array.isArray(f)?f:[],w=Array.isArray(g)?g:[],{data:N,isLoading:S}=ye({queryKey:["/api/smart-pricing/alerts",t],queryFn:()=>ve("GET",`/api/smart-pricing/alerts${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),{data:k,isLoading:T}=ye({queryKey:["/api/smart-pricing/ai-summary",t],queryFn:()=>ve("GET",`/api/smart-pricing/ai-summary${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),C=Array.isArray(N)?N:[],P=Array.isArray(k)?k:[],{data:$,isLoading:V}=ye({queryKey:["/api/smart-pricing/direct-booking",t],queryFn:()=>ve("GET",`/api/smart-pricing/direct-booking${t!=="all"?`?propertyId=${t}`:""}`)}),{data:I,isLoading:_}=ye({queryKey:["/api/smart-pricing/heatmap",t],queryFn:()=>ve("GET",`/api/smart-pricing/heatmap${t!=="all"?`?propertyId=${t}`:""}`)}),{data:U,isLoading:H}=ye({queryKey:["/api/smart-pricing/historical-patterns",t],queryFn:()=>ve("GET",`/api/smart-pricing/historical-patterns${t!=="all"?`?propertyId=${t}`:""}`)}),Y=Ee({mutationFn:Se=>ve("PATCH",`/api/smart-pricing/alerts/${Se}/read`),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/alerts"]}),l({title:"Alert marked as read"})}}),O=Ee({mutationFn:({alertId:Se,actionTaken:Ps})=>ve("PATCH",`/api/smart-pricing/alerts/${Se}/resolve`,{actionTaken:Ps}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/alerts"]}),r(null),i(""),l({title:"Alert resolved successfully"})}}),R=Ee({mutationFn:({gapId:Se,actionTaken:Ps})=>ve("PATCH",`/api/smart-pricing/booking-gaps/${Se}/resolve`,{actionTaken:Ps}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/booking-gaps"]}),l({title:"Booking gap resolved"})}}),q=Se=>{switch(Se){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}},re=Se=>{switch(Se){case"high":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"low":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}},we=Se=>Se.startsWith("A")?"text-green-600 dark:text-green-400":Se.startsWith("B")?"text-blue-600 dark:text-blue-400":Se.startsWith("C")?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return d?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Ss,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading Smart Pricing Toolkit..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Smart Pricing & Performance Toolkit"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered pricing optimization and performance insights for your property portfolio"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"Select property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"999",children:"Villa Demo12345"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:(c==null?void 0:c.totalProperties)||0})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Active Alerts"}),e.jsx(Et,{className:"h-4 w-4 text-orange-500"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(c==null?void 0:c.activeAlerts)||0})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Avg Occupancy"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[(c==null?void 0:c.avgOccupancyRate)||0,"%"]})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Price Opportunities"}),e.jsx(Vn,{className:"h-4 w-4 text-green-500"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(c==null?void 0:c.priceOptimizationOpportunities)||0})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Performance Grade"}),e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:`text-2xl font-bold ${we((c==null?void 0:c.recentPerformanceGrade)||"C")}`,children:(c==null?void 0:c.recentPerformanceGrade)||"C"})})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"YoY Growth"}),e.jsx(Bt,{className:"h-4 w-4 text-green-500"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",(c==null?void 0:c.yearOverYearGrowth)||0,"%"]})})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(xt,{className:"grid w-full grid-cols-9",children:[e.jsx(ae,{value:"overview",children:" Overview"}),e.jsx(ae,{value:"performance",children:" Performance"}),e.jsx(ae,{value:"holidays",children:" Holidays"}),e.jsx(ae,{value:"pricing",children:" Pricing"}),e.jsx(ae,{value:"gaps",children:" Gaps"}),e.jsx(ae,{value:"ai-insights",children:" AI Insights"}),e.jsx(ae,{value:"direct-booking",children:" Direct Booking"}),e.jsx(ae,{value:"alerts",children:" Alerts"}),e.jsx(ae,{value:"calendar",children:" Calendar"})]}),e.jsxs(ie,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center",children:[e.jsx(Et,{className:"mr-2 h-5 w-5 text-orange-500"}),"Critical Alerts"]})}),e.jsx(D,{children:S?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ss,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[C.filter(Se=>Se.severity==="critical"||Se.severity==="high").slice(0,3).map(Se=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(Ut,{className:`h-4 w-4 mt-0.5 ${Se.severity==="critical"?"text-red-500":"text-orange-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:Se.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Se.message}),e.jsx(z,{className:`text-xs mt-1 ${q(Se.severity)}`,children:Se.severity.toUpperCase()})]})]},Se.id)),(!C||C.length===0)&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No critical alerts"})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center",children:[e.jsx(pn,{className:"mr-2 h-5 w-5 text-blue-500"}),"Performance Summary"]})}),e.jsx(D,{children:m?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ss,{className:"h-6 w-6 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:u&&u.length>=2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["",Number(((K=u[0])==null?void 0:K.totalRevenue)||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",((Number(((Ce=u[0])==null?void 0:Ce.totalRevenue)||0)-Number(((pe=u[1])==null?void 0:pe.totalRevenue)||0))/Number(((F=u[1])==null?void 0:F.totalRevenue)||1)*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Occupancy Rate"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[((Q=u[0])==null?void 0:Q.occupancyRate)||0,"%"]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",(Number(((Z=u[0])==null?void 0:Z.occupancyRate)||0)-Number(((le=u[1])==null?void 0:le.occupancyRate)||0)).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Daily Rate"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["",Number(((oe=u[0])==null?void 0:oe.averageDailyRate)||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",((Number(((Ae=u[0])==null?void 0:Ae.averageDailyRate)||0)-Number(((ge=u[1])==null?void 0:ge.averageDailyRate)||0))/Number(((xe=u[1])==null?void 0:xe.averageDailyRate)||1)*100).toFixed(1),"%"]})]})]})]})})})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center",children:[e.jsx(Sa,{className:"mr-2 h-5 w-5 text-purple-500"}),"Recent AI Insights"]})}),e.jsx(D,{children:T?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ss,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[P.slice(0,1).map(Se=>{var Ps;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Performance Grade: "}),e.jsx(z,{className:`${we(Se.performanceGrade||"C")}`,children:Se.performanceGrade})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Se.keyInsights}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"AI Suggestions:"}),e.jsx("ul",{className:"space-y-1",children:(Ps=Se.aiSuggestions)==null?void 0:Ps.slice(0,3).map((Lr,ji)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[e.jsx(ns,{className:"h-3 w-3 mt-1 mr-2 text-yellow-500 flex-shrink-0"}),Lr]},ji))})]})]},Se.id)}),(!P||P.length===0)&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No AI insights available"})]})})]})]}),e.jsx(ie,{value:"performance",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(Bt,{className:"mr-2 h-5 w-5"}),"Year-on-Year Performance Tracker"]}),e.jsx(Me,{children:"Compare current performance with the same period last year"})]}),e.jsx(D,{children:m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-6",children:u&&u.length>=2?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm",children:"Total Revenue"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",Number((($e=u[0])==null?void 0:$e.totalRevenue)||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1 text-green-500"}),"+",((Number(((ke=u[0])==null?void 0:ke.totalRevenue)||0)-Number(((Ze=u[1])==null?void 0:Ze.totalRevenue)||0))/Number(((gt=u[1])==null?void 0:gt.totalRevenue)||1)*100).toFixed(1),"% vs last year"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm",children:"Occupancy Rate"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[((Kt=u[0])==null?void 0:Kt.occupancyRate)||0,"%"]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1 text-green-500"}),"+",(Number(((be=u[0])==null?void 0:be.occupancyRate)||0)-Number(((J=u[1])==null?void 0:J.occupancyRate)||0)).toFixed(1),"% vs last year"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm",children:"Average Daily Rate"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",Number(((Ne=u[0])==null?void 0:Ne.averageDailyRate)||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1 text-green-500"}),"+",((Number(((De=u[0])==null?void 0:De.averageDailyRate)||0)-Number(((We=u[1])==null?void 0:We.averageDailyRate)||0))/Number(((qe=u[1])==null?void 0:qe.averageDailyRate)||1)*100).toFixed(1),"% vs last year"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(B,{className:"text-sm",children:"Average Lead Time"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[((Le=u[0])==null?void 0:Le.averageLeadTime)||0," days"]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ed,{className:"h-3 w-3 mr-1 text-red-500"}),Number(((pt=u[0])==null?void 0:pt.averageLeadTime)||0)-Number(((Qt=u[1])==null?void 0:Qt.averageLeadTime)||0)," days vs last year"]})]})]})]}),Number(((as=u[0])==null?void 0:as.totalRevenue)||0)<Number(((In=u[1])==null?void 0:In.totalRevenue)||0)&&e.jsxs(li,{children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsxs(oi,{children:["Revenue is down ",((Number(((je=u[1])==null?void 0:je.totalRevenue)||0)-Number(((it=u[0])==null?void 0:it.totalRevenue)||0))/Number(((Js=u[1])==null?void 0:Js.totalRevenue)||1)*100).toFixed(1),"% compared to the same month last year. Consider reviewing pricing strategy and marketing efforts."]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No performance data available for comparison"})]})})})]})}),e.jsx(ie,{value:"holidays",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(tt,{className:"mr-2 h-5 w-5"}),"Global Holiday & Event Awareness"]}),e.jsx(Me,{children:"Track international holidays and events that impact demand"})]}),e.jsx(D,{children:x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:p&&p.length>0?e.jsx("div",{className:"grid gap-4",children:p.map(Se=>e.jsx(E,{children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-medium",children:Se.eventName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),new Date(Se.eventDate).toLocaleDateString()]}),e.jsx("span",{children:Se.country||Se.region}),e.jsxs(z,{className:re(Se.demandImpact),children:[Se.demandImpact," demand"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[Number(Se.pricingMultiplier).toFixed(2),"x"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pricing multiplier"})]})]})})},Se.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming holidays or events"})]})})})]})}),e.jsx(ie,{value:"pricing",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(Je,{className:"mr-2 h-5 w-5"}),"Internal Price Deviation Checker"]}),e.jsx(Me,{children:"Identify underpriced and overpriced properties in your portfolio"})]}),e.jsx(D,{children:j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:v&&v.length>0?e.jsx("div",{className:"grid gap-4",children:v.map(Se=>e.jsx(E,{className:`border-l-4 ${Se.isUnderpriced?"border-l-orange-500":Se.isOverpriced?"border-l-red-500":"border-l-green-500"}`,children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:Se.propertyName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Current: ",Number(Se.currentPrice).toLocaleString()]}),Se.marketAverage&&e.jsxs("span",{children:["Market Avg: ",Number(Se.marketAverage).toLocaleString()]}),Se.portfolioAverage&&e.jsxs("span",{children:["Portfolio Avg: ",Number(Se.portfolioAverage).toLocaleString()]})]}),Se.deviationPercentage&&e.jsxs(z,{className:Se.isUnderpriced?"bg-orange-100 text-orange-800":Se.isOverpriced?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:[Number(Se.deviationPercentage)>0?"+":"",Number(Se.deviationPercentage).toFixed(1),"% deviation"]})]}),e.jsx("div",{className:"text-right",children:Se.recommendedPrice&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["",Number(Se.recommendedPrice).toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Recommended"}),Se.confidence&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(Number(Se.confidence)*100).toFixed(0),"% confidence"]})]})})]}),Se.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:Se.notes})]})},Se.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Je,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No price deviation analysis available"})]})})})]})}),e.jsx(ie,{value:"gaps",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(Vn,{className:"mr-2 h-5 w-5"}),"Booking Gap & Undervalued Dates Detector"]}),e.jsx(Me,{children:"Identify and resolve booking gaps to maximize revenue"})]}),e.jsx(D,{children:y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:w&&w.length>0?e.jsx("div",{className:"grid gap-4",children:w.map(Se=>e.jsx(E,{className:`border-l-4 ${Se.isResolved?"border-l-green-500":"border-l-orange-500"}`,children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:Se.propertyName}),e.jsx(z,{variant:Se.isResolved?"default":"secondary",children:Se.isResolved?"Resolved":"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),new Date(Se.gapStartDate).toLocaleDateString()," - ",new Date(Se.gapEndDate).toLocaleDateString()]}),e.jsxs("span",{children:[Se.gapDuration," nights"]}),e.jsx(z,{className:"text-xs",children:Se.gapType.replace("_"," ")})]}),Se.recommendedAction&&e.jsxs("p",{className:"text-sm text-blue-600",children:[" ",Se.recommendedAction.replace("_"," ")]})]}),e.jsxs("div",{className:"text-right",children:[Se.estimatedRevenueLoss&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:["-",Number(Se.estimatedRevenueLoss).toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Estimated loss"})]}),!Se.isResolved&&e.jsx(M,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{const Ps=prompt("Enter action taken to resolve this gap:");Ps&&R.mutate({gapId:Se.id,actionTaken:Ps})},children:"Mark Resolved"})]})]})})},Se.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No booking gaps detected"})]})})})]})}),e.jsx(ie,{value:"ai-insights",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(Sa,{className:"mr-2 h-5 w-5"}),"AI-Powered Performance Summary"]}),e.jsx(Me,{children:"Comprehensive AI analysis of your property performance"})]}),e.jsx(D,{children:T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-6",children:P&&P.length>0?P.map(Se=>{var Ps,Lr,ji,bi,ca;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Performance Grade"}),e.jsx("div",{className:`text-3xl font-bold ${we(Se.performanceGrade||"C")}`,children:Se.performanceGrade})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"AI Confidence"}),e.jsxs("div",{className:"text-xl font-bold",children:[(Number(Se.confidenceScore)*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Report Date"}),e.jsx("div",{className:"font-medium",children:new Date(Se.summaryDate).toLocaleDateString()})]})]}),Se.keyInsights&&e.jsxs(li,{children:[e.jsx(Sa,{className:"h-4 w-4"}),e.jsx(oi,{children:Se.keyInsights})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsxs(D,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:((Ps=Se.summaryData)==null?void 0:Ps.totalBookings)||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Bookings"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[((Lr=Se.summaryData)==null?void 0:Lr.averageOccupancy)||0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Occupancy"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",((ji=Se.summaryData)==null?void 0:ji.averageRate)||0]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average Rate"})]})}),e.jsx(E,{children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[((bi=Se.summaryData)==null?void 0:bi.leadTime)||0," days"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Lead Time"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center",children:[e.jsx(ns,{className:"mr-2 h-4 w-4 text-yellow-500"}),"AI Suggestions"]}),e.jsx("div",{className:"grid gap-2",children:(ca=Se.aiSuggestions)==null?void 0:ca.map((nl,Vb)=>e.jsx(E,{children:e.jsx(D,{className:"pt-3",children:e.jsx("p",{className:"text-sm",children:nl})})},Vb))})]}),Se.actionItems&&Se.actionItems.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center",children:[e.jsx(Fe,{className:"mr-2 h-4 w-4 text-green-500"}),"Recommended Actions"]}),e.jsx("div",{className:"grid gap-2",children:Se.actionItems.map((nl,Vb)=>e.jsx(E,{children:e.jsx(D,{className:"pt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:nl.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:nl.estimatedImpact})]}),e.jsx(z,{className:nl.priority==="high"?"bg-red-100 text-red-800":nl.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:nl.priority})]})})},Vb))})]})]},Se.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Sa,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No AI performance summary available"})]})})})]})}),e.jsx(ie,{value:"direct-booking",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(op,{className:"mr-2 h-5 w-5"}),"Direct Booking Price Optimizer"]}),e.jsx(Me,{children:"Optimize direct booking rates to compete with OTA platforms"})]}),e.jsx(D,{children:V?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:$&&$.length>0?e.jsx("div",{className:"grid gap-4",children:$.map(Se=>e.jsx(E,{children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:Se.propertyName}),e.jsxs(z,{className:Se.conversionPotential==="high"?"bg-green-100 text-green-800":Se.conversionPotential==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800",children:[Se.conversionPotential," conversion potential"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Direct Rate"}),e.jsxs("div",{className:"text-xl font-bold",children:["",Number(Se.currentDirectRate).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"OTA Guest Rate"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["",Number(Se.otaGuestRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Net payout: ",Number(Se.otaNetPayout||0).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Recommended Direct Rate"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["",Number(Se.recommendedDirectRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["",Number(Se.competitiveAdvantage||0).toLocaleString()," savings vs OTA"]})]})]}),Se.suggestedPerks&&Se.suggestedPerks.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Suggested Perks to Add Value:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Se.suggestedPerks.map((Ps,Lr)=>e.jsx(z,{variant:"outline",className:"text-xs",children:Ps},Lr))})]}),Se.otaCommissionRate&&e.jsxs(li,{children:[e.jsx(Ut,{className:"h-4 w-4"}),e.jsxs(oi,{children:["By pricing direct bookings at ",Number(Se.recommendedDirectRate||0).toLocaleString(),", guests save ",Number(Se.competitiveAdvantage||0).toLocaleString(),"while you avoid the ",Number(Se.otaCommissionRate).toFixed(1),"% OTA commission."]})]})]})})},Se.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(op,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No direct booking optimization data available"})]})})})]})}),e.jsxs(ie,{value:"alerts",className:"space-y-4",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(Et,{className:"mr-2 h-5 w-5"}),"Smart Alert System"]}),e.jsx(Me,{children:"Real-time alerts for pricing opportunities and performance issues"})]}),e.jsx(D,{children:S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:C&&C.length>0?e.jsx("div",{className:"grid gap-4",children:C.map(Se=>e.jsx(E,{className:`border-l-4 ${Se.severity==="critical"?"border-l-red-500":Se.severity==="high"?"border-l-orange-500":Se.severity==="medium"?"border-l-yellow-500":"border-l-blue-500"}`,children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:Se.title}),e.jsx(z,{className:q(Se.severity),children:Se.severity.toUpperCase()}),!Se.isRead&&e.jsx(z,{variant:"secondary",className:"text-xs",children:"NEW"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Se.message}),Se.propertyName&&e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(ws,{className:"h-3 w-3 mr-1"}),Se.propertyName]}),Se.recommendedAction&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[" ",e.jsx("strong",{children:"Recommended Action:"})," ",Se.recommendedAction]})})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[!Se.isRead&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>Y.mutate(Se.id),disabled:Y.isPending,children:e.jsx(Gt,{className:"h-3 w-3"})}),!Se.isResolved&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(Se),children:"Resolve"}),Se.isResolved&&e.jsx(z,{variant:"default",className:"text-xs",children:"Resolved"})]})]})})},Se.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active alerts"})]})})})]}),n&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{children:["Resolve Alert: ",n.title]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"action",children:"Action Taken"}),e.jsx(mt,{id:"action",placeholder:"Describe the action you took to resolve this alert...",value:a,onChange:Se=>i(Se.target.value)})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>r(null),children:"Cancel"}),e.jsx(M,{onClick:()=>{a.trim()&&O.mutate({alertId:n.id,actionTaken:a})},disabled:!a.trim()||O.isPending,children:O.isPending?"Resolving...":"Resolve Alert"})]})]})]})]}),e.jsx(ie,{value:"calendar",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(tt,{className:"mr-2 h-5 w-5"}),"Holiday Heatmap Calendar View"]}),e.jsx(Me,{children:"Color-coded calendar for strategic pricing decisions"})]}),e.jsx(D,{children:_?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ss,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-6 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm",children:"High Demand - Increase Price"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Normal - Maintain Price"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Low Demand - Promote/Reduce"})]})]}),I&&I.length>0?e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Se=>e.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground p-2",children:Se},Se)),I.slice(0,28).map(Se=>{const Ps=new Date(Se.date);return Ps.getDay(),e.jsx(E,{className:`p-2 cursor-pointer transition-all hover:scale-105 ${Se.colorCode==="green"?"bg-green-100 border-green-300":Se.colorCode==="yellow"?"bg-yellow-100 border-yellow-300":"bg-red-100 border-red-300"}`,children:e.jsxs(D,{className:"p-0 space-y-1",children:[e.jsx("div",{className:"text-sm font-bold text-center",children:Ps.getDate()}),e.jsxs("div",{className:"text-xs text-center",children:["",Number(Se.recommendedRate).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:[Math.round(Se.historicalOccupancy),"%"]}),Se.events&&Se.events.length>0&&e.jsx("div",{className:"text-xs text-center font-medium",children:""})]})},Se.id)})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(tt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No heatmap data available"})]})]})})]})})]})]})}const kFe=ds({requestedAmount:Pe().min(1,"Amount is required"),payoutType:zs(["full","partial"]),propertyId:ms().optional(),bankAccountName:Pe().min(1,"Account name is required"),bankAccountNumber:Pe().min(1,"Account number is required"),bankName:Pe().min(1,"Bank name is required"),bankBranch:Pe().optional(),routingNumber:Pe().optional(),swiftCode:Pe().optional(),ownerNotes:Pe().optional(),urgencyLevel:zs(["normal","urgent"]),preferredPayoutDate:Ao().optional()}),PFe=ds({fromParty:zs(["owner","management","portfolio_manager"]),fromPartyId:Pe().min(1,"From party ID is required"),toParty:zs(["owner","management","portfolio_manager"]),toPartyId:Pe().min(1,"To party ID is required"),propertyId:ms().optional(),invoiceDate:Ao(),dueDate:Ao().optional(),periodStart:Ao(),periodEnd:Ao(),invoiceType:zs(["management_fee","expenses","revenue_share","services"]),category:zs(["rental_income","cleaning","maintenance","utilities","management"]),description:Pe().optional(),headerText:Pe().optional(),footerText:Pe().optional(),ownerNotes:Pe().optional()}),AFe=ds({description:Pe().min(1,"Description is required"),category:Pe().min(1,"Category is required"),quantity:Pe().default("1"),unitPrice:Pe().min(1,"Unit price is required"),chargeType:zs(["guest_billable","owner_billable","company_expense","complimentary"]),sourceType:zs(["booking","service","utility","manual"]).optional(),sourceId:ms().optional(),serviceDate:Ao().optional(),referenceNumber:Pe().optional(),vendorName:Pe().optional(),taxable:Ur().default(!0)});function m6(){var Ce,pe;const[t,s]=b.useState("overview"),[n,r]=b.useState("current"),[a,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,m]=b.useState(null),[h,x]=b.useState(null),[p,f]=b.useState("all"),{toast:j}=at(),g=yt(),y=Zt({resolver:xs(kFe),defaultValues:{payoutType:"full",urgencyLevel:"normal"}}),v=Zt({resolver:xs(PFe),defaultValues:{fromParty:"management",toParty:"owner",invoiceType:"revenue_share",category:"rental_income",invoiceDate:new Date,periodStart:new Date,periodEnd:new Date}}),w=Zt({resolver:xs(AFe),defaultValues:{description:"",category:"",quantity:"1",unitPrice:"",chargeType:"owner_billable",referenceNumber:"",vendorName:"",taxable:!0}}),{data:N}=ye({queryKey:["/api/owner-invoicing/analytics",h,n],queryFn:()=>ve("GET",`/api/owner-invoicing/analytics?${new URLSearchParams({...h&&{propertyId:h.toString()},period:n})}`)}),{data:S}=ye({queryKey:["/api/owner-balance",h],queryFn:()=>ve("GET",`/api/owner-balance?${new URLSearchParams({...h&&{propertyId:h.toString()}})}`)}),{data:k}=ye({queryKey:["/api/owner-payout-requests",p,h],queryFn:()=>ve("GET",`/api/owner-payout-requests?${new URLSearchParams({...p!=="all"&&{status:p},...h&&{propertyId:h.toString()}})}`),retry:!1}),T=Array.isArray(k)?k:[],{data:C}=ye({queryKey:["/api/owner-invoices",p,h],queryFn:()=>ve("GET",`/api/owner-invoices?${new URLSearchParams({...p!=="all"&&{status:p},...h&&{propertyId:h.toString()}})}`),retry:!1}),P=Array.isArray(C)?C:[],{data:$}=ye({queryKey:["/api/properties"]}),{data:V}=ye({queryKey:["/api/users"]}),{data:I}=ye({queryKey:["/api/owner-invoices",u==null?void 0:u.id,"line-items"],queryFn:()=>u?ve("GET",`/api/owner-invoices/${u.id}/line-items`):null,enabled:!!u}),_=Ee({mutationFn:F=>ve("POST","/api/owner-payout-requests",F),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/owner-payout-requests"]}),g.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),i(!1),y.reset(),j({title:"Success",description:"Payout request created successfully"})},onError:F=>{j({title:"Error",description:F.message||"Failed to create payout request",variant:"destructive"})}}),U=Ee({mutationFn:({id:F,...Q})=>ve("PUT",`/api/owner-payout-requests/${F}`,Q),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/owner-payout-requests"]}),g.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),j({title:"Success",description:"Payout request updated successfully"})},onError:F=>{j({title:"Error",description:F.message||"Failed to update payout request",variant:"destructive"})}}),H=Ee({mutationFn:F=>ve("POST","/api/owner-invoices",F),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/owner-invoices"]}),g.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),o(!1),v.reset(),j({title:"Success",description:"Invoice created successfully"})},onError:F=>{j({title:"Error",description:F.message||"Failed to create invoice",variant:"destructive"})}}),Y=Ee({mutationFn:({invoiceId:F,...Q})=>ve("POST",`/api/owner-invoices/${F}/line-items`,Q),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/owner-invoices",u==null?void 0:u.id,"line-items"]}),g.invalidateQueries({queryKey:["/api/owner-invoices"]}),d(!1),w.reset(),j({title:"Success",description:"Line item added successfully"})},onError:F=>{j({title:"Error",description:F.message||"Failed to add line item",variant:"destructive"})}});Ee({mutationFn:F=>ve("POST","/api/owner-invoices/generate-from-bookings",F),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/owner-invoices"]}),g.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),j({title:"Success",description:"Invoice generated from booking data successfully"})},onError:F=>{j({title:"Error",description:F.message||"Failed to generate invoice",variant:"destructive"})}});const O=F=>{const Z={pending:{variant:"secondary",icon:et},approved:{variant:"default",icon:Fe},processing:{variant:"default",icon:jN},completed:{variant:"default",icon:Fe},rejected:{variant:"destructive",icon:ar},draft:{variant:"secondary",icon:jr},sent:{variant:"default",icon:vt},viewed:{variant:"default",icon:Gt},paid:{variant:"default",icon:Fe},overdue:{variant:"destructive",icon:Et},cancelled:{variant:"destructive",icon:ar}}[F]||{variant:"secondary",icon:et},le=Z.icon;return e.jsxs(z,{variant:Z.variant,className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),F.charAt(0).toUpperCase()+F.slice(1)]})},R=F=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(typeof F=="string"?parseFloat(F):F),q=F=>{var Z;const Q={...F,requestedAmount:F.requestedAmount,availableBalance:(S==null?void 0:S.currentBalance)||"0",preferredPayoutDate:(Z=F.preferredPayoutDate)==null?void 0:Z.toISOString().split("T")[0]};_.mutate(Q)},re=F=>{var Z;const Q={...F,invoiceDate:F.invoiceDate.toISOString().split("T")[0],dueDate:(Z=F.dueDate)==null?void 0:Z.toISOString().split("T")[0],periodStart:F.periodStart.toISOString().split("T")[0],periodEnd:F.periodEnd.toISOString().split("T")[0],subtotal:"0",totalAmount:"0"};H.mutate(Q)},we=F=>{var le;const Q=parseFloat(F.quantity)*parseFloat(F.unitPrice),Z={...F,invoiceId:u.id,lineTotal:Q.toString(),serviceDate:(le=F.serviceDate)==null?void 0:le.toISOString().split("T")[0]};Y.mutate(Z)},K=(F,Q)=>{U.mutate({id:F,status:Q})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(zP,{role:"admin",className:"mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Owner Invoicing & Payouts"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive owner financial integration with automated invoicing and payout management"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(se,{value:(h==null?void 0:h.toString())||"all",onValueChange:F=>x(F==="all"?null:parseInt(F)),children:[e.jsx(ee,{className:"w-[200px]",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),$==null?void 0:$.map(F=>e.jsx(A,{value:F.id.toString(),children:F.name},F.id))]})]}),e.jsxs(M,{onClick:()=>i(!0),children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Request Payout"]})]})]}),N&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Current Balance"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.currentBalance?R(N.currentBalance.currentBalance):"$0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for payout"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Payout Requests"}),e.jsx(jN,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalPayoutRequests}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.pendingPayoutRequests," pending"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Invoices"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalInvoices}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.unpaidInvoices," unpaid"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Performance"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.completedPayoutRequests}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed payouts"})]})]})]}),e.jsxs(ft,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"balance",children:"Balance"}),e.jsx(ae,{value:"payouts",children:"Payout Requests"}),e.jsx(ae,{value:"invoices",children:"Invoices"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsx(ie,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Recent Payout Requests"}),e.jsx(Me,{children:"Latest payout requests and their status"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[(Ce=N==null?void 0:N.recentPayoutRequests)==null?void 0:Ce.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:R(F.requestedAmount)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ut(new Date(F.requestedAt),"MMM dd, yyyy")})]}),O(F.status)]},F.id)),(!(N!=null&&N.recentPayoutRequests)||N.recentPayoutRequests.length===0)&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No recent payout requests"})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Recent Invoices"}),e.jsx(Me,{children:"Latest invoices and payment status"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[(pe=N==null?void 0:N.recentInvoices)==null?void 0:pe.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:F.invoiceNumber}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[R(F.totalAmount),"  ",ut(new Date(F.invoiceDate),"MMM dd, yyyy")]})]}),O(F.status)]},F.id)),(!(N!=null&&N.recentInvoices)||N.recentInvoices.length===0)&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No recent invoices"})]})})]})]})}),e.jsx(ie,{value:"balance",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Owner Balance Details"}),e.jsx(Me,{children:"Detailed breakdown of current balance and financial activity"})]}),e.jsx(D,{children:S?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:R(S.currentBalance)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:R(S.pendingRevenue)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold",children:R(S.totalExpenses)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Management Fees"}),e.jsx("p",{className:"text-2xl font-bold",children:R(S.managementFees)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Rental Income"}),e.jsx("p",{className:"text-2xl font-bold",children:R(S.monthlyRentalIncome)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Utilities"}),e.jsx("p",{className:"text-2xl font-bold",children:R(S.monthlyUtilities)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Maintenance"}),e.jsx("p",{className:"text-2xl font-bold",children:R(S.monthlyMaintenance)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Payout"}),e.jsx("p",{className:"text-2xl font-bold",children:S.lastPayoutAmount?R(S.lastPayoutAmount):"None"}),S.lastPayoutDate&&e.jsx("p",{className:"text-xs text-muted-foreground",children:ut(new Date(S.lastPayoutDate),"MMM dd, yyyy")})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No balance data available"})})})]})}),e.jsxs(ie,{value:"payouts",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs(se,{value:p,onValueChange:f,children:[e.jsx(ee,{className:"w-[150px]",children:e.jsx(ne,{placeholder:"Filter by status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"approved",children:"Approved"}),e.jsx(A,{value:"processing",children:"Processing"}),e.jsx(A,{value:"completed",children:"Completed"}),e.jsx(A,{value:"rejected",children:"Rejected"})]})]})}),e.jsxs(M,{onClick:()=>i(!0),children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"New Payout Request"]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Payout Requests"}),e.jsx(Me,{children:"Manage your payout requests and track their status"})]}),e.jsx(D,{children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Request Date"}),e.jsx(Re,{children:"Amount"}),e.jsx(Re,{children:"Type"}),e.jsx(Re,{children:"Property"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Actions"})]})}),e.jsxs(yn,{children:[T==null?void 0:T.map(F=>{var Q;return e.jsxs(Ot,{children:[e.jsx(Oe,{children:ut(new Date(F.requestedAt),"MMM dd, yyyy")}),e.jsx(Oe,{className:"font-medium",children:R(F.requestedAmount)}),e.jsx(Oe,{children:e.jsx(z,{variant:"outline",children:F.payoutType})}),e.jsx(Oe,{children:((Q=$==null?void 0:$.find(Z=>Z.id===F.propertyId))==null?void 0:Q.name)||"All Properties"}),e.jsx(Oe,{children:O(F.status)}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Gt,{className:"w-4 h-4"})}),F.status==="pending"&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>K(F.id,"cancelled"),children:"Cancel"})]})})]},F.id)}),(!T||T.length===0)&&e.jsx(Ot,{children:e.jsx(Oe,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No payout requests found"})})]})]})})]})]}),e.jsxs(ie,{value:"invoices",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs(se,{value:p,onValueChange:f,children:[e.jsx(ee,{className:"w-[150px]",children:e.jsx(ne,{placeholder:"Filter by status"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"draft",children:"Draft"}),e.jsx(A,{value:"sent",children:"Sent"}),e.jsx(A,{value:"viewed",children:"Viewed"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Create Invoice"]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Owner Invoices"}),e.jsx(Me,{children:"View and manage invoices between owners and management"})]}),e.jsx(D,{children:e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Invoice #"}),e.jsx(Re,{children:"Date"}),e.jsx(Re,{children:"From"}),e.jsx(Re,{children:"To"}),e.jsx(Re,{children:"Amount"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{children:"Actions"})]})}),e.jsxs(yn,{children:[P==null?void 0:P.map(F=>e.jsxs(Ot,{children:[e.jsx(Oe,{className:"font-medium",children:F.invoiceNumber}),e.jsx(Oe,{children:ut(new Date(F.invoiceDate),"MMM dd, yyyy")}),e.jsx(Oe,{children:e.jsx(z,{variant:"outline",children:F.fromParty})}),e.jsx(Oe,{children:e.jsx(z,{variant:"outline",children:F.toParty})}),e.jsx(Oe,{className:"font-medium",children:R(F.totalAmount)}),e.jsx(Oe,{children:O(F.status)}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>m(F),children:e.jsx(Gt,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Ns,{className:"w-4 h-4"})})]})})]},F.id)),(!P||P.length===0)&&e.jsx(Ot,{children:e.jsx(Oe,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No invoices found"})})]})]})})]})]}),e.jsx(ie,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Financial Summary"}),e.jsx(Me,{children:"Overview of financial performance"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Balance"}),e.jsx("span",{className:"font-medium",children:N!=null&&N.currentBalance?R(N.currentBalance.currentBalance):"$0.00"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pending Payouts"}),e.jsx("span",{className:"font-medium",children:(N==null?void 0:N.pendingPayoutRequests)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completed Payouts"}),e.jsx("span",{className:"font-medium",children:(N==null?void 0:N.completedPayoutRequests)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Invoices"}),e.jsx("span",{className:"font-medium",children:(N==null?void 0:N.totalInvoices)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Paid Invoices"}),e.jsx("span",{className:"font-medium",children:(N==null?void 0:N.paidInvoices)||0})]})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Quick Actions"}),e.jsx(Me,{children:"Common tasks and utilities"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>i(!0),children:[e.jsx(jN,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Request Payout"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>o(!0),children:[e.jsx(vt,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Create Invoice"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[e.jsx(Ns,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Export Data"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[e.jsx(Wi,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"View Reports"})]})]})})]})]})})]}),e.jsx(Ke,{open:a,onOpenChange:i,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create Payout Request"}),e.jsx(Rt,{children:"Request a payout from your available balance"})]}),e.jsx(os,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(q),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:y.control,name:"requestedAmount",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Requested Amount"}),e.jsx(ue,{children:e.jsx(G,{...F,type:"number",step:"0.01",placeholder:"0.00"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:y.control,name:"payoutType",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Payout Type"}),e.jsxs(se,{onValueChange:F.onChange,defaultValue:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"full",children:"Full Balance"}),e.jsx(A,{value:"partial",children:"Partial Amount"})]})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:y.control,name:"bankAccountName",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Account Name"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Account holder name"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:y.control,name:"bankAccountNumber",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Account Number"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Bank account number"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:y.control,name:"bankName",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Bank Name"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Bank name"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:y.control,name:"bankBranch",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Bank Branch (Optional)"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Branch name"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:y.control,name:"urgencyLevel",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Urgency Level"}),e.jsxs(se,{onValueChange:F.onChange,defaultValue:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select urgency"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"normal",children:"Normal"}),e.jsx(A,{value:"urgent",children:"Urgent"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:y.control,name:"preferredPayoutDate",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Preferred Date (Optional)"}),e.jsxs(fu,{children:[e.jsx(gu,{asChild:!0,children:e.jsx(ue,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[F.value?ut(F.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(tt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ic,{className:"w-auto p-0",align:"start",children:e.jsx(Rc,{mode:"single",selected:F.value,onSelect:F.onChange,disabled:Q=>Q<new Date,initialFocus:!0})})]}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:y.control,name:"ownerNotes",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Notes (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{...F,placeholder:"Additional notes or special instructions",rows:3})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:_.isPending,children:_.isPending?"Creating...":"Create Request"})]})]})})]})}),e.jsx(Ke,{open:l,onOpenChange:o,children:e.jsxs(Ye,{className:"max-w-3xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create Owner Invoice"}),e.jsx(Rt,{children:"Create a new invoice between owners and management"})]}),e.jsx(os,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(re),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"fromParty",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"From"}),e.jsxs(se,{onValueChange:F.onChange,defaultValue:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select sender"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"management",children:"Management"}),e.jsx(A,{value:"portfolio_manager",children:"Portfolio Manager"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"toParty",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"To"}),e.jsxs(se,{onValueChange:F.onChange,defaultValue:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select recipient"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"management",children:"Management"}),e.jsx(A,{value:"portfolio_manager",children:"Portfolio Manager"})]})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"fromPartyId",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"From User"}),e.jsxs(se,{onValueChange:F.onChange,value:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select user"})})}),e.jsx(te,{children:V==null?void 0:V.map(Q=>e.jsxs(A,{value:Q.id,children:[Q.firstName," ",Q.lastName," (",Q.role,")"]},Q.id))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"toPartyId",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"To User"}),e.jsxs(se,{onValueChange:F.onChange,value:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select user"})})}),e.jsx(te,{children:V==null?void 0:V.map(Q=>e.jsxs(A,{value:Q.id,children:[Q.firstName," ",Q.lastName," (",Q.role,")"]},Q.id))})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"invoiceType",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Invoice Type"}),e.jsxs(se,{onValueChange:F.onChange,defaultValue:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"management_fee",children:"Management Fee"}),e.jsx(A,{value:"expenses",children:"Expenses"}),e.jsx(A,{value:"revenue_share",children:"Revenue Share"}),e.jsx(A,{value:"services",children:"Services"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"category",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Category"}),e.jsxs(se,{onValueChange:F.onChange,defaultValue:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select category"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"rental_income",children:"Rental Income"}),e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"utilities",children:"Utilities"}),e.jsx(A,{value:"management",children:"Management"})]})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(me,{control:v.control,name:"invoiceDate",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Invoice Date"}),e.jsxs(fu,{children:[e.jsx(gu,{asChild:!0,children:e.jsx(ue,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[F.value?ut(F.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(tt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ic,{className:"w-auto p-0",align:"start",children:e.jsx(Rc,{mode:"single",selected:F.value,onSelect:F.onChange,initialFocus:!0})})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"periodStart",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Period Start"}),e.jsxs(fu,{children:[e.jsx(gu,{asChild:!0,children:e.jsx(ue,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[F.value?ut(F.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(tt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ic,{className:"w-auto p-0",align:"start",children:e.jsx(Rc,{mode:"single",selected:F.value,onSelect:F.onChange,initialFocus:!0})})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"periodEnd",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Period End"}),e.jsxs(fu,{children:[e.jsx(gu,{asChild:!0,children:e.jsx(ue,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[F.value?ut(F.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(tt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ic,{className:"w-auto p-0",align:"start",children:e.jsx(Rc,{mode:"single",selected:F.value,onSelect:F.onChange,initialFocus:!0})})]}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:v.control,name:"description",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Description"}),e.jsx(ue,{children:e.jsx(mt,{...F,placeholder:"Invoice description",rows:3})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:H.isPending,children:H.isPending?"Creating...":"Create Invoice"})]})]})})]})}),u&&e.jsx(Ke,{open:!!u,onOpenChange:()=>m(null),children:e.jsxs(Ye,{className:"max-w-4xl",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{children:["Invoice Details - ",u.invoiceNumber]}),e.jsx(Rt,{children:"View invoice details and line items"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",ut(new Date(u.invoiceDate),"PPP")]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Due Date:"})," ",u.dueDate?ut(new Date(u.dueDate),"PPP"):"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Period:"})," ",ut(new Date(u.periodStart),"MMM dd")," - ",ut(new Date(u.periodEnd),"MMM dd, yyyy")]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",u.invoiceType]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"})," ",u.category]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"})," ",R(u.subtotal)]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax:"})," ",R(u.taxAmount||0)]}),e.jsxs("p",{className:"font-medium",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total:"})," ",R(u.totalAmount)]}),e.jsx("div",{className:"pt-2",children:O(u.status)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:"Line Items"}),e.jsxs(M,{size:"sm",onClick:()=>d(!0),children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Description"}),e.jsx(Re,{children:"Category"}),e.jsx(Re,{children:"Qty"}),e.jsx(Re,{children:"Unit Price"}),e.jsx(Re,{children:"Total"}),e.jsx(Re,{children:"Type"})]})}),e.jsxs(yn,{children:[I==null?void 0:I.map(F=>e.jsxs(Ot,{children:[e.jsx(Oe,{children:F.description}),e.jsx(Oe,{children:e.jsx(z,{variant:"outline",children:F.category})}),e.jsx(Oe,{children:F.quantity}),e.jsx(Oe,{children:R(F.unitPrice)}),e.jsx(Oe,{className:"font-medium",children:R(F.lineTotal)}),e.jsx(Oe,{children:e.jsx(z,{variant:"secondary",children:F.chargeType})})]},F.id)),(!I||I.length===0)&&e.jsx(Ot,{children:e.jsx(Oe,{colSpan:6,className:"text-center py-4 text-muted-foreground",children:"No line items found"})})]})]})]}),u.description&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>m(null),children:"Close"}),e.jsxs(M,{children:[e.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})]})}),e.jsx(Ke,{open:c,onOpenChange:d,children:e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Add Line Item"}),e.jsx(Rt,{children:"Add a new line item to the invoice"})]}),e.jsx(os,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(we),className:"space-y-4",children:[e.jsx(me,{control:w.control,name:"description",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Description"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Item description"})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:w.control,name:"category",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Category"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Item category"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:w.control,name:"chargeType",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Charge Type"}),e.jsxs(se,{onValueChange:F.onChange,defaultValue:F.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select charge type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"guest_billable",children:"Guest Billable"}),e.jsx(A,{value:"owner_billable",children:"Owner Billable"}),e.jsx(A,{value:"company_expense",children:"Company Expense"}),e.jsx(A,{value:"complimentary",children:"Complimentary"})]})]}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:w.control,name:"quantity",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Quantity"}),e.jsx(ue,{children:e.jsx(G,{...F,type:"number",step:"0.01",placeholder:"1"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:w.control,name:"unitPrice",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Unit Price"}),e.jsx(ue,{children:e.jsx(G,{...F,type:"number",step:"0.01",placeholder:"0.00"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:w.control,name:"referenceNumber",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Reference Number (Optional)"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Reference number"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:w.control,name:"vendorName",render:({field:F})=>e.jsxs(de,{children:[e.jsx(he,{children:"Vendor Name (Optional)"}),e.jsx(ue,{children:e.jsx(G,{...F,placeholder:"Vendor name"})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:Y.isPending,children:Y.isPending?"Adding...":"Add Line Item"})]})]})})]})})]})}const TFe=ds({amount:Pe().min(1,"Amount is required"),requestNotes:Pe().optional()}),DFe=ds({description:Pe().min(1,"Description is required"),quantity:Pe().min(1,"Quantity is required"),unitPrice:Pe().min(1,"Unit price is required"),referenceId:Pe().optional(),referenceType:Pe().optional()}),EFe=ds({receiverType:zs(["user","organization","external"]),receiverId:Pe().optional(),receiverName:Pe().min(1,"Receiver name is required"),receiverAddress:Pe().optional(),invoiceType:Pe().min(1,"Invoice type is required"),description:Pe().min(1,"Description is required"),lineItems:kre(DFe).min(1,"At least one line item is required"),taxRate:Pe().optional(),notes:Pe().optional(),dueDate:Pe().optional(),referenceNumber:Pe().optional()});function OFe(){var Z,le,oe,Ae,ge,xe,$e,ke,Ze,gt,Kt;const{toast:t}=at(),s=yt(),{user:n}=Cr(),[r,a]=b.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[i,l]=b.useState("all"),[o,c]=b.useState(""),[d,u]=b.useState(!1),[m,h]=b.useState(!1),[x,p]=b.useState({department:"all",status:"all",search:""}),f=(n==null?void 0:n.role)==="admin",{data:j=[]}=ye({queryKey:["/api/users","portfolio-manager"],queryFn:()=>ve("GET","/api/users?role=portfolio-manager"),enabled:f});b.useEffect(()=>{var be;f&&j.length>0&&!o?c((be=j[0])==null?void 0:be.id):!f&&(n!=null&&n.id)&&c(n==null?void 0:n.id)},[f,j,n,o]);const{data:g,isLoading:y}=ye({queryKey:["/api/pm/dashboard/financial-overview",r.startDate,r.endDate,i,o],queryFn:async()=>{const be=new URLSearchParams({startDate:r.startDate,endDate:r.endDate,...i!=="all"&&{propertyId:i},...o&&{portfolioManagerId:o}});return ve("GET",`/api/pm/dashboard/financial-overview?${be}`)},enabled:!!o}),{data:v,isLoading:w}=ye({queryKey:["/api/pm/dashboard/balance",o],queryFn:()=>{const be=new URLSearchParams({...o&&{portfolioManagerId:o}});return ve("GET",`/api/pm/dashboard/balance?${be}`)},enabled:!!o}),{data:N,isLoading:S}=ye({queryKey:["/api/pm/dashboard/payouts",o],queryFn:()=>{const be=new URLSearchParams({...o&&{portfolioManagerId:o}});return ve("GET",`/api/pm/dashboard/payouts?${be}`)},enabled:!!o}),{data:k,isLoading:T}=ye({queryKey:["/api/pm/dashboard/task-logs",x.department,x.status,r.startDate,r.endDate,o],queryFn:async()=>{const be=new URLSearchParams({startDate:r.startDate,endDate:r.endDate,limit:"100",...x.department!=="all"&&{department:x.department},...x.status!=="all"&&{status:x.status},...o&&{portfolioManagerId:o}});return ve("GET",`/api/pm/dashboard/task-logs?${be}`)},enabled:!!o}),{data:C=[]}=ye({queryKey:["/api/pm/dashboard/portfolio",o],queryFn:()=>{const be=new URLSearchParams({...o&&{portfolioManagerId:o}});return ve("GET",`/api/pm/dashboard/portfolio?${be}`)},enabled:!!o}),{data:P,isLoading:$}=ye({queryKey:["/api/pm/dashboard/notifications",o],queryFn:()=>{const be=new URLSearchParams({limit:"20",...o&&{portfolioManagerId:o}});return ve("GET",`/api/pm/dashboard/notifications?${be}`)},enabled:!!o}),{data:V,isLoading:I}=ye({queryKey:["/api/pm/dashboard/invoices"],queryFn:()=>ve("GET","/api/pm/dashboard/invoices")}),_=Ee({mutationFn:be=>ve("POST","/api/pm/dashboard/payouts",be),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),t({title:"Payout Request Submitted",description:"Your payout request has been submitted for approval."}),u(!1)},onError:be=>{t({title:"Error",description:be.message,variant:"destructive"})}}),U=Ee({mutationFn:be=>ve("PATCH",`/api/pm/dashboard/payouts/${be}/received`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),t({title:"Payment Confirmed",description:"Payment receipt confirmed successfully."})},onError:be=>{t({title:"Error",description:be.message,variant:"destructive"})}}),H=Ee({mutationFn:be=>ve("POST","/api/pm/dashboard/invoices",be),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/invoices"]}),t({title:"Invoice Created",description:"Invoice has been created successfully."}),h(!1)},onError:be=>{t({title:"Error",description:be.message,variant:"destructive"})}}),Y=Ee({mutationFn:be=>ve("PATCH",`/api/pm/dashboard/notifications/${be}/read`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]})}}),O=Zt({resolver:xs(TFe),defaultValues:{amount:"",requestNotes:""}}),R=Zt({resolver:xs(EFe),defaultValues:{receiverType:"organization",receiverId:"",receiverName:"",receiverAddress:"",invoiceType:"management_commission",description:"",lineItems:[{description:"",quantity:"1",unitPrice:"",referenceId:"",referenceType:""}],taxRate:"10",notes:"",dueDate:"",referenceNumber:""}}),{fields:q,append:re,remove:we}=Qne({control:R.control,name:"lineItems"}),K=be=>{_.mutate(be)},Ce=be=>{H.mutate(be)},pe=({status:be})=>{const J={pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",overdue:"bg-red-100 text-red-800"};return e.jsx(z,{className:J[be]||"bg-gray-100 text-gray-800",children:be})},F=be=>({cleaning:"bg-blue-100 text-blue-800",maintenance:"bg-orange-100 text-orange-800",gardening:"bg-green-100 text-green-800",pool:"bg-cyan-100 text-cyan-800",security:"bg-red-100 text-red-800",inspection:"bg-purple-100 text-purple-800"})[be]||"bg-gray-100 text-gray-800",Q=be=>{switch(be){case"urgent":return e.jsx(Ut,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(Ut,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(xn,{className:"h-4 w-4 text-blue-500"})}};return y||w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"container px-6",children:[e.jsx("div",{className:"mt-3",children:e.jsx(fh,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Portfolio Manager Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-muted-foreground",children:f?"Viewing data for:":"Manage your portfolio, track commissions, and create invoices"}),f&&o&&e.jsxs(z,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[e.jsx(Ht,{className:"h-3 w-3 mr-1"}),((Z=(j&&Array.isArray(j)?j:[]).find(be=>be.id===o))==null?void 0:Z.name)||"Portfolio Manager"]})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[f&&e.jsxs(se,{value:o,onValueChange:c,children:[e.jsx(ee,{className:"w-56",children:e.jsx(ne,{placeholder:"Select Portfolio Manager",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-4 w-4"}),((le=(j&&Array.isArray(j)?j:[]).find(be=>be.id===o))==null?void 0:le.name)||"Select Portfolio Manager"]})})}),e.jsx(te,{children:(j&&Array.isArray(j)?j:[]).map(be=>e.jsx(A,{value:be.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-4 w-4"}),be.name," (",be.email,")"]})},be.id))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{type:"date",value:r.startDate,onChange:be=>a(J=>({...J,startDate:be.target.value})),className:"w-40"}),e.jsx(G,{type:"date",value:r.endDate,onChange:be=>a(J=>({...J,endDate:be.target.value})),className:"w-40"})]}),e.jsxs(se,{value:i,onValueChange:l,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),(oe=C&&Array.isArray(C)?C:[])==null?void 0:oe.map(be=>e.jsx(A,{value:be.id.toString(),children:be.name},be.id))]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Commission Earnings"}),e.jsx(Je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",((Ae=g==null?void 0:g.totalCommissionEarnings)==null?void 0:Ae.toLocaleString())||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"From management fees"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Portfolio Properties"}),e.jsx(Ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(C&&Array.isArray(C)?C.length:0)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Under management"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Balance"}),e.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",((ge=v==null?void 0:v.currentBalance)==null?void 0:ge.toLocaleString())||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for payout"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Unread Notifications"}),e.jsx(xn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(P&&Array.isArray(P)?P.filter(be=>!be.isRead).length:0)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]})]}),e.jsxs(ft,{defaultValue:"overview",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-6",children:[e.jsx(ae,{value:"overview",children:"Overview"}),e.jsx(ae,{value:"balance",children:"Balance"}),e.jsx(ae,{value:"invoices",children:"Invoices"}),e.jsx(ae,{value:"tasks",children:"Task Logs"}),e.jsx(ae,{value:"notifications",children:"Notifications"}),e.jsx(ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(ie,{value:"overview",className:"space-y-4",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Portfolio Management"}),e.jsx(Me,{children:"Quick access to property management tools"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[e.jsxs(M,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/properties",children:[e.jsx(Ft,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Property Access"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/property-documents-management",children:[e.jsx(vt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Document Center"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/tasks",children:[e.jsx(Jt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Maintenance"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/services",children:[e.jsx(tt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Service Tracker"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/invoice-generator",children:[e.jsx(Wi,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Invoices"})]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Property Performance"}),e.jsx(Me,{children:"Commission earnings by property"})]}),e.jsx(D,{className:"space-y-3",children:(g!=null&&g.propertyBreakdown&&Array.isArray(g.propertyBreakdown)?g.propertyBreakdown:[]).map(be=>{var J,Ne;return e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:be.propertyName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[be.bookingCount," bookings"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["$",(J=be.commissionEarned)==null?void 0:J.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Revenue: $",(Ne=be.totalRevenue)==null?void 0:Ne.toLocaleString()]})]})]},be.propertyId)})||e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No properties in portfolio"})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Monthly Earnings Trend"}),e.jsx(Me,{children:"Commission earnings over time"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-2",children:(g!=null&&g.monthlyTrend&&Array.isArray(g.monthlyTrend)?g.monthlyTrend:[]).map(be=>{var J;return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:be.period}),e.jsxs("span",{className:"font-semibold",children:["$",(J=be.earnings)==null?void 0:J.toLocaleString()]})]},be.period)})||e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No earnings data available"})})})]})]})]}),e.jsxs(ie,{value:"balance",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Commission Balance"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your earnings and request payouts"})]}),e.jsxs(Ke,{open:d,onOpenChange:u,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{disabled:!(v!=null&&v.currentBalance)||v.currentBalance<=0,children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Request Payout"]})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Request Commission Payout"}),e.jsx(Rt,{children:"Submit a payout request for your earned commissions"})]}),e.jsx(os,{...O,children:e.jsxs("form",{onSubmit:O.handleSubmit(K),className:"space-y-4",children:[e.jsx(me,{control:O.control,name:"amount",render:({field:be})=>{var J;return e.jsxs(de,{children:[e.jsxs(he,{children:["Amount (Max: $",(J=v==null?void 0:v.currentBalance)==null?void 0:J.toLocaleString(),")"]}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Enter amount",...be})}),e.jsx(fe,{})]})}}),e.jsx(me,{control:O.control,name:"requestNotes",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Notes (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Additional details...",...be})}),e.jsx(fe,{})]})}),e.jsxs(ir,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:_.isPending,children:_.isPending?"Submitting...":"Submit Request"})]})]})})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Balance Summary"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Earned"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["$",((xe=v==null?void 0:v.totalEarned)==null?void 0:xe.toLocaleString())||"0"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Paid"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["$",(($e=v==null?void 0:v.totalPaid)==null?void 0:$e.toLocaleString())||"0"]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Current Balance"}),e.jsxs("span",{className:"text-green-600",children:["$",((ke=v==null?void 0:v.currentBalance)==null?void 0:ke.toLocaleString())||"0"]})]}),(v==null?void 0:v.lastPayoutDate)&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last payout:"," ",ut(Ts(v.lastPayoutDate),"MMM d, yyyy")]})]})]}),n&&e.jsx(NG,{userId:n.id,userRole:"portfolio-manager",userEmail:n.email||"",userName:`${n.firstName||""} ${n.lastName||""}`.trim()||n.email||"",currentBalance:v==null?void 0:v.currentBalance,onBalanceReset:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard"]})}}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Payout Requests"})}),e.jsx(D,{children:S?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsx("div",{className:"space-y-3",children:(N&&Array.isArray(N)?N.slice(0,5):[]).map(be=>{var J;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-medium",children:["$",(J=be.amount)==null?void 0:J.toLocaleString()," ",be.currency]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested:"," ",ut(Ts(be.requestedAt),"MMM d, yyyy")]})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx(pe,{status:be.status}),be.status==="approved"&&be.receiptUrl&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>U.mutate(be.id),disabled:U.isPending,children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Payment Received"]})]})]},be.id)})||e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No payout requests found"})})})]})]})]}),e.jsxs(ie,{value:"invoices",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage invoices for commissions and services"})]}),e.jsxs(Ke,{open:m,onOpenChange:h,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Create Invoice"]})}),e.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create New Invoice"}),e.jsx(Rt,{children:"Generate a professional invoice for commissions or services"})]}),e.jsx(os,{...R,children:e.jsxs("form",{onSubmit:R.handleSubmit(Ce),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:R.control,name:"receiverType",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Receiver Type"}),e.jsx(ue,{children:e.jsxs(se,{value:be.value,onValueChange:be.onChange,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"organization",children:"Organization"}),e.jsx(A,{value:"user",children:"User"}),e.jsx(A,{value:"external",children:"External Party"})]})]})}),e.jsx(fe,{})]})}),e.jsx(me,{control:R.control,name:"receiverName",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Receiver Name"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Company or person name",...be})}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:R.control,name:"invoiceType",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Invoice Type"}),e.jsx(ue,{children:e.jsxs(se,{value:be.value,onValueChange:be.onChange,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"management_commission",children:"Management Commission"}),e.jsx(A,{value:"booking_commission",children:"Booking Commission"}),e.jsx(A,{value:"service_fee",children:"Service Fee"}),e.jsx(A,{value:"consultation",children:"Consultation"}),e.jsx(A,{value:"maintenance",children:"Maintenance Charge"})]})]})}),e.jsx(fe,{})]})}),e.jsx(me,{control:R.control,name:"dueDate",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Due Date (Optional)"}),e.jsx(ue,{children:e.jsx(G,{type:"date",...be})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:R.control,name:"description",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Description"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Invoice description...",...be})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(W,{children:"Line Items"}),e.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>re({description:"",quantity:"1",unitPrice:"",referenceId:"",referenceType:""}),children:[e.jsx(bt,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),q.map((be,J)=>e.jsxs("div",{className:"grid grid-cols-6 gap-2 items-end",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(me,{control:R.control,name:`lineItems.${J}.description`,render:({field:Ne})=>e.jsx(de,{children:e.jsx(ue,{children:e.jsx(G,{placeholder:"Description",...Ne})})})})}),e.jsx(me,{control:R.control,name:`lineItems.${J}.quantity`,render:({field:Ne})=>e.jsx(de,{children:e.jsx(ue,{children:e.jsx(G,{placeholder:"Qty",...Ne})})})}),e.jsx(me,{control:R.control,name:`lineItems.${J}.unitPrice`,render:({field:Ne})=>e.jsx(de,{children:e.jsx(ue,{children:e.jsx(G,{placeholder:"Price",...Ne})})})}),e.jsx(me,{control:R.control,name:`lineItems.${J}.referenceId`,render:({field:Ne})=>e.jsx(de,{children:e.jsx(ue,{children:e.jsx(G,{placeholder:"Reference",...Ne})})})}),e.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>we(J),disabled:q.length===1,children:e.jsx(op,{className:"h-4 w-4"})})]},be.id))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:R.control,name:"taxRate",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Tax Rate (%)"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"10",...be})}),e.jsx(fe,{})]})}),e.jsx(me,{control:R.control,name:"referenceNumber",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Reference Number (Optional)"}),e.jsx(ue,{children:e.jsx(G,{placeholder:"Booking ID, etc.",...be})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:R.control,name:"notes",render:({field:be})=>e.jsxs(de,{children:[e.jsx(he,{children:"Notes (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{placeholder:"Additional notes...",...be})}),e.jsx(fe,{})]})}),e.jsxs(ir,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:H.isPending,children:H.isPending?"Creating...":"Create Invoice"})]})]})})]})]})]}),e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:I?e.jsx("div",{className:"text-center py-8",children:"Loading invoices..."}):e.jsx("div",{className:"space-y-4",children:((Ze=V&&Array.isArray(V)?V:[])==null?void 0:Ze.map(be=>{var J;return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:be.invoiceNumber}),e.jsx("p",{className:"text-sm text-muted-foreground",children:be.receiverName}),e.jsx("p",{className:"text-sm",children:be.description}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created:"," ",ut(Ts(be.createdAt),"MMM d, yyyy")]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsxs("p",{className:"font-semibold",children:["$",(J=be.totalAmount)==null?void 0:J.toLocaleString()]}),e.jsx(pe,{status:be.status}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(Ns,{className:"h-3 w-3 mr-1"}),"PDF"]})]})]})]},be.id)}))||e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"})})})})]}),e.jsxs(ie,{value:"tasks",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Task & Portfolio Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track tasks completed across your portfolio properties"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(se,{value:x.department,onValueChange:be=>p(J=>({...J,department:be})),children:[e.jsx(ee,{className:"w-40",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Departments"}),e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"gardening",children:"Gardening"}),e.jsx(A,{value:"pool",children:"Pool"}),e.jsx(A,{value:"security",children:"Security"}),e.jsx(A,{value:"inspection",children:"Inspection"})]})]}),e.jsxs(se,{value:x.status,onValueChange:be=>p(J=>({...J,status:be})),children:[e.jsx(ee,{className:"w-32",children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"in_progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"}),e.jsx(A,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:T?e.jsx("div",{className:"text-center py-8",children:"Loading task logs..."}):e.jsx("div",{className:"space-y-4",children:((gt=k&&Array.isArray(k)?k:[])==null?void 0:gt.map(be=>e.jsxs("div",{className:"flex items-start justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:be.taskTitle}),e.jsx(z,{className:F(be.department),children:be.department}),e.jsx(pe,{status:be.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Property: ",be.propertyName]}),be.staffAssigned&&e.jsxs("p",{children:["Staff: ",be.staffAssigned]}),e.jsxs("p",{children:["Created:"," ",ut(Ts(be.createdAt),"MMM d, yyyy HH:mm")]}),be.completedAt&&e.jsxs("p",{children:["Completed:"," ",ut(Ts(be.completedAt),"MMM d, yyyy HH:mm")]})]}),be.result&&e.jsx("p",{className:"text-sm",children:be.result}),be.notes&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Notes: ",be.notes]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[be.evidencePhotos&&be.evidencePhotos.length>0&&e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Photos (",be.evidencePhotos.length,")"]}),be.receipts&&be.receipts.length>0&&e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(Wi,{className:"h-3 w-3 mr-1"}),"Receipts (",be.receipts.length,")"]})]})]},be.id)))||e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No task logs found"})})})})]}),e.jsxs(ie,{value:"notifications",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notifications & Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay updated on guest issues, approvals, and system suggestions"})]}),e.jsxs(M,{variant:"outline",onClick:()=>s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]}),children:[e.jsx(xn,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:$?e.jsx("div",{className:"text-center py-8",children:"Loading notifications..."}):e.jsx("div",{className:"space-y-4",children:((Kt=P&&Array.isArray(P)?P:[])==null?void 0:Kt.map(be=>e.jsxs("div",{className:`flex items-start gap-3 p-4 border rounded-lg cursor-pointer transition-colors ${be.isRead?"hover:bg-gray-50":"bg-blue-50 border-blue-200"}`,onClick:()=>!be.isRead&&Y.mutate(be.id),children:[e.jsx("div",{className:"mt-1",children:Q(be.severity)}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium",children:be.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ut(Ts(be.createdAt),"MMM d, HH:mm")})]}),e.jsx("p",{className:"text-sm",children:be.message}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"outline",children:be.type}),e.jsx(z,{className:`text-xs ${be.severity==="urgent"?"bg-red-100 text-red-800":be.severity==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:be.severity}),be.actionRequired&&e.jsx(z,{className:"bg-orange-100 text-orange-800",children:"Action Required"})]})]}),be.relatedType&&be.relatedId&&e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(Hi,{className:"h-3 w-3"})})]},be.id)))||e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No notifications found"})})})})]}),e.jsxs(ie,{value:"analytics",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portfolio Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Performance insights and AI-powered suggestions"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Performance Summary"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(pn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Advanced analytics coming soon"}),e.jsx("p",{className:"text-xs",children:"AI-powered property performance insights"})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"AI Suggestions"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ut,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Smart recommendations coming soon"}),e.jsx("p",{className:"text-xs",children:"Automated guest satisfaction analysis"})]})})]})]})]})]})]})]})}function MFe(){const{toast:t}=at(),s=yt(),[n,r]=b.useState(!1),[a,i]=b.useState({exportType:"pdf",dateRangeType:"month",startDate:ut(Cn(new Date),"yyyy-MM-dd"),endDate:ut(zo(new Date),"yyyy-MM-dd"),selectedProperties:[],includeNotes:!1,includeServiceLogs:!1,includeBranding:!0}),{data:l=[],isLoading:o}=ye({queryKey:["/api/properties"],select:v=>v.filter(w=>w.id)}),{data:c=[],isLoading:d}=ye({queryKey:["/api/owner-statement-exports"],refetchInterval:5e3}),u=Ee({mutationFn:async v=>ve("POST","/api/owner-statement-exports",v),onSuccess:v=>{t({title:"Export Started",description:`Your ${a.exportType.toUpperCase()} statement is being generated. You'll be notified when it's ready.`}),r(!1),s.invalidateQueries({queryKey:["/api/owner-statement-exports"]})},onError:v=>{t({title:"Export Failed",description:v.message||"Failed to start statement export",variant:"destructive"})}}),m=Ee({mutationFn:async v=>{const w=await fetch(`/api/owner-statement-exports/${v}/download`);if(!w.ok)throw new Error("Download failed");const N=c.find(S=>S.id===v);if((N==null?void 0:N.exportType)==="csv"){const S=await w.text(),k=new Blob([S],{type:"text/csv"}),T=window.URL.createObjectURL(k),C=document.createElement("a");C.href=T,C.download=N.fileName,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(T)}else await w.json(),window.open(`/api/owner-statement-exports/${v}/pdf-data`,"_blank")},onSuccess:()=>{t({title:"Download Started",description:"Your statement file is being downloaded."})},onError:v=>{t({title:"Download Failed",description:v.message||"Failed to download statement",variant:"destructive"})}}),h=v=>{i(w=>{if(v==="month"){const N=new Date;return{...w,dateRangeType:v,startDate:ut(Cn(N),"yyyy-MM-dd"),endDate:ut(zo(N),"yyyy-MM-dd")}}return{...w,dateRangeType:v}})},x=v=>{const w=die(new Date,v);i(N=>({...N,startDate:ut(Cn(w),"yyyy-MM-dd"),endDate:ut(zo(w),"yyyy-MM-dd")}))},p=v=>{i(w=>({...w,selectedProperties:w.selectedProperties.includes(v)?w.selectedProperties.filter(N=>N!==v):[...w.selectedProperties,v]}))},f=()=>{i(v=>({...v,selectedProperties:v.selectedProperties.length===l.length?[]:l.map(w=>w.id)}))},j=()=>{if(!a.selectedProperties.length){t({title:"Selection Required",description:"Please select at least one property for the statement.",variant:"destructive"});return}u.mutate({exportType:a.exportType,dateRangeType:a.dateRangeType,startDate:a.startDate,endDate:a.endDate,propertyIds:a.selectedProperties,includeNotes:a.includeNotes,includeServiceLogs:a.includeServiceLogs,includeBranding:a.includeBranding})},g=v=>{switch(v){case"completed":return e.jsx(Fe,{className:"h-4 w-4 text-green-500"});case"generating":return e.jsx(et,{className:"h-4 w-4 text-yellow-500"});case"failed":return e.jsx(Ut,{className:"h-4 w-4 text-red-500"});default:return e.jsx(et,{className:"h-4 w-4 text-gray-500"})}},y=v=>{const w={completed:"default",generating:"secondary",failed:"destructive"};return e.jsx(z,{variant:w[v]||"secondary",children:v.charAt(0).toUpperCase()+v.slice(1)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(vt,{className:"h-6 w-6 text-blue-500"}),"Financial Statements"]}),e.jsx("p",{className:"text-muted-foreground",children:"Export detailed financial reports for your properties"})]}),e.jsxs(Ke,{open:n,onOpenChange:r,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{className:"gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Export Statement"]})}),e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Export Owner Statement"}),e.jsx(Rt,{children:"Generate a comprehensive financial report for your properties"})]}),e.jsxs(ft,{defaultValue:"basic",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-3",children:[e.jsx(ae,{value:"basic",children:"Basic Settings"}),e.jsx(ae,{value:"properties",children:"Properties"}),e.jsx(ae,{value:"options",children:"Options"})]}),e.jsxs(ie,{value:"basic",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"exportType",children:"Export Format"}),e.jsxs(se,{value:a.exportType,onValueChange:v=>i(w=>({...w,exportType:v})),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"h-4 w-4"}),"PDF Document"]})}),e.jsx(A,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yX,{className:"h-4 w-4"}),"CSV Spreadsheet"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"dateRangeType",children:"Date Range"}),e.jsxs(se,{value:a.dateRangeType,onValueChange:h,children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsxs(te,{children:[e.jsx(A,{value:"month",children:"Monthly"}),e.jsx(A,{value:"custom",children:"Custom Range"})]})]})]})]}),a.dateRangeType==="month"&&e.jsxs("div",{children:[e.jsx(W,{children:"Quick Month Selection"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(0),children:"This Month"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(1),children:"Last Month"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(2),children:"2 Months Ago"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(3),children:"3 Months Ago"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(W,{htmlFor:"startDate",children:"Start Date"}),e.jsx(G,{id:"startDate",type:"date",value:a.startDate,onChange:v=>i(w=>({...w,startDate:v.target.value}))})]}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"endDate",children:"End Date"}),e.jsx(G,{id:"endDate",type:"date",value:a.endDate,onChange:v=>i(w=>({...w,endDate:v.target.value}))})]})]})]}),e.jsxs(ie,{value:"properties",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(W,{children:"Select Properties"}),e.jsx(M,{variant:"outline",size:"sm",onClick:f,children:a.selectedProperties.length===l.length?"Deselect All":"Select All"})]}),o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(vs,{className:"h-6 w-6 animate-spin"})}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map(v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_c,{id:`property-${v.id}`,checked:a.selectedProperties.includes(v.id),onCheckedChange:()=>p(v.id)}),e.jsxs(W,{htmlFor:`property-${v.id}`,className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(fn,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:v.address})]})]})]},v.id))})]}),e.jsxs(ie,{value:"options",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_c,{id:"includeNotes",checked:a.includeNotes,onCheckedChange:v=>i(w=>({...w,includeNotes:v}))}),e.jsx(W,{htmlFor:"includeNotes",children:"Include property notes and comments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_c,{id:"includeServiceLogs",checked:a.includeServiceLogs,onCheckedChange:v=>i(w=>({...w,includeServiceLogs:v}))}),e.jsx(W,{htmlFor:"includeServiceLogs",children:"Include service and maintenance logs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_c,{id:"includeBranding",checked:a.includeBranding,onCheckedChange:v=>i(w=>({...w,includeBranding:v}))}),e.jsx(W,{htmlFor:"includeBranding",children:"Include company branding and logo"})]})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Statement Will Include:"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:" All booking earnings by platform"}),e.jsx("li",{children:" Property expenses and maintenance costs"}),e.jsx("li",{children:" Management commission breakdown"}),e.jsx("li",{children:" Add-on service charges"}),e.jsx("li",{children:" Net balance calculation"}),a.includeNotes&&e.jsx("li",{children:" Property notes and comments"}),a.includeServiceLogs&&e.jsx("li",{children:" Service and maintenance logs"})]})]})]})]}),e.jsxs(ir,{children:[e.jsx(M,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(M,{onClick:j,disabled:u.isPending||!a.selectedProperties.length,className:"gap-2",children:[u.isPending?e.jsx(vs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ns,{className:"h-4 w-4"}),"Generate Statement"]})]})]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Recent Statements"]}),e.jsx(Me,{children:"Your exported financial statements and their status"})]}),e.jsx(D,{children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(vs,{className:"h-6 w-6 animate-spin"})}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(vt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No statements yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Export your first financial statement to get started"}),e.jsxs(M,{onClick:()=>r(!0),className:"gap-2",children:[e.jsx(bt,{className:"h-4 w-4"}),"Export Statement"]})]}):e.jsx("div",{className:"space-y-3",children:c.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[g(v.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:v.fileName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[ut(new Date(v.createdAt),"MMM dd, yyyy at HH:mm")," "," ",v.status==="completed"&&v.fileSize&&`${Math.round(v.fileSize/1024)} KB`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Net: $",parseFloat(v.netBalance).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[ut(new Date(v.startDate),"MMM dd")," - ",ut(new Date(v.endDate),"MMM dd, yyyy")]})]}),y(v.status),v.status==="completed"&&e.jsxs(M,{size:"sm",onClick:()=>m.mutate(v.id),disabled:m.isPending,className:"gap-2",children:[m.isPending?e.jsx(vs,{className:"h-4 w-4 animate-spin"}):e.jsx(Ns,{className:"h-4 w-4"}),"Download"]}),v.status==="failed"&&e.jsx("div",{className:"text-xs text-red-500 max-w-xs",children:v.errorMessage})]})]},v.id))})})]})]})}function _Fe({guestTotalPrice:t,platformPayout:s,otaCommissionAmount:n,currency:r="THB",platform:a="OTA"}){const i=(o,c)=>new Intl.NumberFormat("en-US",{style:"currency",currency:c,minimumFractionDigits:0,maximumFractionDigits:0}).format(o),l=n||t-s;return e.jsx(Df,{children:e.jsxs(ko,{children:[e.jsx(Po,{asChild:!0,children:e.jsxs("div",{className:"text-center cursor-help",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Guest: ",i(t,r)]}),e.jsxs("div",{className:"font-semibold text-green-600",children:["Payout: ",i(s,r)]}),l>0&&e.jsxs("div",{className:"text-xs text-red-600",children:["-",i(l,r)]})]})}),e.jsx(gl,{children:e.jsxs("p",{children:[" ",a," commission already deducted from payout"]})})]})})}const RFe=[{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"last-month",label:"Last Month"},{value:"custom",label:"Custom Period"}],IFe={airbnb:"bg-red-100 text-red-800 border-red-200",vrbo:"bg-blue-100 text-blue-800 border-blue-200",bookingCom:"bg-purple-100 text-purple-800 border-purple-200",direct:"bg-green-100 text-green-800 border-green-200",marriott:"bg-yellow-100 text-yellow-800 border-yellow-200"},$Fe={maintenance:Ws,amenity:ks,experience:dm,safety:qt,communication:um},FFe={checkin:Cf,checkout:nF,cleaning:cp,pool:wf,garden:BX,maintenance:Ws,note:Ea,expense:Je,booking:tt,repair:Jt};function LFe(){var Ce,pe;const[t,s]=b.useState("earnings"),[n,r]=b.useState("month"),[a,i]=b.useState("all"),[l,o]=b.useState("all"),[c,d]=b.useState(!1),[u,m]=b.useState(!1),[h,x]=b.useState(null),[p,f]=b.useState({propertyId:"",amount:"",notes:""}),{toast:j}=at(),g=yt(),{user:y,isLoading:v}=Cr(),{data:w,isLoading:N}=ye({queryKey:["/api/owner/earnings",n,a],enabled:!!y&&y.role==="owner"}),{data:S,isLoading:k}=ye({queryKey:["/api/owner/balance"],enabled:!!y&&y.role==="owner"}),{data:T,isLoading:C}=ye({queryKey:["/api/owner/ai-suggestions"],enabled:!!y&&y.role==="owner"}),{data:P,isLoading:$}=ye({queryKey:["/api/owner/timeline",a,l],enabled:!!y&&y.role==="owner"}),{data:V}=ye({queryKey:["/api/properties"],enabled:!!y}),I=Ee({mutationFn:async F=>ve("POST","/api/owner/payout-request",F),onSuccess:()=>{j({title:"Payout request submitted successfully"}),d(!1),g.invalidateQueries({queryKey:["/api/owner/balance"]}),f({propertyId:"",amount:"",notes:""})},onError:F=>{j({title:"Error submitting payout request",description:F.message,variant:"destructive"})}}),_=Ee({mutationFn:async F=>ve("POST",`/api/owner/ai-suggestions/${F}/acknowledge`),onSuccess:()=>{j({title:"Suggestion acknowledged"}),g.invalidateQueries({queryKey:["/api/owner/ai-suggestions"]})}}),U=Ee({mutationFn:async F=>ve("POST",`/api/owner/ai-suggestions/${F}/dismiss`),onSuccess:()=>{j({title:"Suggestion dismissed"}),g.invalidateQueries({queryKey:["/api/owner/ai-suggestions"]})}}),H=F=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(F),Y=F=>`${Math.round(F)}%`,O=F=>{const Q=new Date,Z=new Date(F),le=Math.floor((Q.getTime()-Z.getTime())/(1e3*60));return le<60?`${le}m ago`:le<1440?`${Math.floor(le/60)}h ago`:`${Math.floor(le/1440)}d ago`},R=F=>{switch(F){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};if(v)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(!y||y.role!=="owner")return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ut,{className:"mx-auto h-12 w-12 text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Owner Access Required"}),e.jsx("p",{className:"text-gray-600",children:"This dashboard is only available for property owners."})]})})})});const q=()=>{var F,Q,Z,le,oe;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-5 w-5 text-blue-500"}),"Earnings Overview"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"Select period"})}),e.jsx(te,{children:RFe.map(Ae=>e.jsx(A,{value:Ae.value,children:Ae.label},Ae.value))})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),V==null?void 0:V.map(Ae=>e.jsx(A,{value:Ae.id.toString(),children:Ae.name},Ae.id))]})]})]})]})}),e.jsx(D,{children:N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"Avg Nightly Rate"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:H((w==null?void 0:w.averageNightlyRate)||0)})]}),e.jsx(Ko,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Total Earnings"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:H(((F=w==null?void 0:w.totalEarnings)==null?void 0:F[n])||0)})]}),e.jsx(fX,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-600 text-sm font-medium",children:"Occupancy Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:Y(((Q=w==null?void 0:w.occupancyRate)==null?void 0:Q.thisMonth)||0)}),((Z=w==null?void 0:w.occupancyRate)==null?void 0:Z.trend)==="up"?e.jsx(Bt,{className:"h-4 w-4 text-green-500"}):((le=w==null?void 0:w.occupancyRate)==null?void 0:le.trend)==="down"?e.jsx(Ed,{className:"h-4 w-4 text-red-500"}):e.jsx("div",{className:"h-4 w-4"})]})]}),e.jsx(dt,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"Total Properties"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:(V==null?void 0:V.length)||0})]}),e.jsx(Ft,{className:"h-8 w-8 text-yellow-500"})]})})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ap,{className:"h-5 w-5 text-orange-500"}),"Platform Revenue Split"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-amber-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800",children:"OTA Commission Information"}),e.jsx("p",{className:"text-amber-700",children:"Platform revenue shown reflects actual payout received after OTA commissions. Hover over amounts for guest price details."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:(w==null?void 0:w.platformSplit)&&Object.entries(w.platformSplit).map(([Ae,ge])=>e.jsx("div",{className:`p-4 rounded-lg border ${IFe[Ae]}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold capitalize",children:Ae==="bookingCom"?"Booking.com":Ae}),e.jsx("p",{className:"text-2xl font-bold",children:Y(ge.percentage)}),Ae!=="direct"&&ge.guestTotalPrice&&ge.otaCommissionAmount?e.jsx("div",{className:"space-y-1",children:e.jsx(_Fe,{guestTotalPrice:ge.guestTotalPrice,platformPayout:ge.revenue,otaCommissionAmount:ge.otaCommissionAmount,currency:"THB",platform:Ae})}):e.jsx("p",{className:"text-sm",children:H(ge.revenue)}),e.jsxs("p",{className:"text-xs",children:[ge.bookings," bookings"]}),Ae!=="direct"&&ge.otaCommissionRate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[ge.otaCommissionRate,"% OTA fee"]})]})},Ae))})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(xX,{className:"h-5 w-5 text-indigo-500"}),"Revenue Trend"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:(oe=w==null?void 0:w.monthlyTrend)==null?void 0:oe.map((Ae,ge)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"font-medium",children:Ae.month}),e.jsxs(z,{variant:"outline",children:[Ae.bookings," bookings"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:H(Ae.revenue)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Y(Ae.occupancy)," occupancy"]})]}),e.jsx(fi,{value:Ae.occupancy,className:"w-24"})]})]},ge))})})]})]})},re=()=>{var F,Q,Z,le;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(dX,{className:"h-5 w-5 text-green-500"}),"Balance Summary"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 bg-green-50 rounded-lg border border-green-200 text-center",children:[e.jsx("h3",{className:"text-green-600 font-medium mb-2",children:"Total Available Balance"}),e.jsx("p",{className:"text-3xl font-bold text-green-800",children:H((S==null?void 0:S.totalBalance)||0)})]}),e.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[e.jsx("h3",{className:"text-blue-600 font-medium mb-2",children:"Pending Payouts"}),e.jsx("p",{className:"text-3xl font-bold text-blue-800",children:((F=S==null?void 0:S.pendingPayoutRequests)==null?void 0:F.length)||0})]}),e.jsxs("div",{className:"p-6 bg-purple-50 rounded-lg border border-purple-200 text-center",children:[e.jsx("h3",{className:"text-purple-600 font-medium mb-2",children:"Properties"}),e.jsx("p",{className:"text-3xl font-bold text-purple-800",children:((Q=S==null?void 0:S.propertyBalances)==null?void 0:Q.length)||0})]})]})})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-5 w-5 text-blue-500"}),"Property Balances"]}),e.jsxs(M,{onClick:()=>d(!0),children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Request Payout"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:(Z=S==null?void 0:S.propertyBalances)==null?void 0:Z.map(oe=>e.jsxs(E,{className:"border border-gray-200",children:[e.jsx(L,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:oe.propertyName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Property ID: ",oe.propertyId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:H(oe.currentBalance)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Available Balance"})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("p",{className:"text-blue-600 text-sm",children:"Total Revenue"}),e.jsx("p",{className:"font-semibold",children:H(oe.totalRevenue)})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[e.jsx("p",{className:"text-red-600 text-sm",children:"Management"}),e.jsx("p",{className:"font-semibold",children:H(oe.expenses.management)})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded",children:[e.jsx("p",{className:"text-yellow-600 text-sm",children:"Utilities"}),e.jsx("p",{className:"font-semibold",children:H(oe.expenses.utilities)})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[e.jsx("p",{className:"text-purple-600 text-sm",children:"Maintenance"}),e.jsx("p",{className:"font-semibold",children:H(oe.expenses.maintenance)})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("p",{className:"text-green-600 text-sm",children:"Add-ons"}),e.jsx("p",{className:"font-semibold",children:H(oe.expenses.addons)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{x(oe),m(!0)},children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),"See Finances"]}),e.jsxs(M,{size:"sm",onClick:()=>{f({...p,propertyId:oe.propertyId.toString(),amount:oe.currentBalance.toString()}),d(!0)},children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Request Payout"]})]})]})]},oe.propertyId))})})]}),((le=S==null?void 0:S.pendingPayoutRequests)==null?void 0:le.length)>0&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-orange-500"}),"Pending Payout Requests"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:S.pendingPayoutRequests.map(oe=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Property ID: ",oe.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Requested: ",ut(Ts(oe.requestDate),"MMM d, yyyy")]}),oe.notes&&e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:oe.notes})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-lg",children:H(oe.amount)}),e.jsx(z,{className:oe.status==="pending"?"bg-yellow-100 text-yellow-800":oe.status==="approved"?"bg-blue-100 text-blue-800":oe.status==="processing"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",children:oe.status})]})]},oe.id))})})]})]})},we=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(lp,{className:"h-5 w-5 text-yellow-500"}),"AI-Powered Review Suggestions"]}),e.jsx(Me,{children:"Automatic analysis of guest reviews to extract improvement suggestions and maintenance needs."})]}),e.jsx(D,{children:C?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[T==null?void 0:T.map(F=>{const Q=$Fe[F.category];return e.jsxs(E,{className:"border-l-4 border-l-yellow-500",children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Q,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:F.suggestion}),e.jsx("p",{className:"text-sm text-gray-600",children:F.propertyName})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:R(F.priority),children:F.priority}),e.jsx(z,{variant:"outline",children:F.category})]})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-gray-700",children:F.reason})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Source Review"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium text-sm",children:F.sourceReview.guestName}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((Z,le)=>e.jsx(ks,{className:`h-3 w-3 ${le<F.sourceReview.rating?"text-yellow-400 fill-current":"text-gray-300"}`},le))}),e.jsxs("span",{className:"text-xs text-gray-600",children:[F.sourceReview.platform,"  ",ut(Ts(F.sourceReview.date),"MMM d")]})]}),e.jsxs("p",{className:"text-sm text-blue-700 italic",children:['"',F.sourceReview.excerpt,'"']})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Cost:"}),e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:H(F.estimatedCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expected Impact:"}),e.jsx("br",{}),e.jsxs(z,{variant:"outline",className:F.estimatedImpact==="high"?"bg-green-100 text-green-800":F.estimatedImpact==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:[F.estimatedImpact," impact"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[F.status==="new"&&e.jsxs(e.Fragment,{children:[e.jsxs(M,{size:"sm",onClick:()=>_.mutate(F.id),disabled:_.isPending,children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Acknowledge"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>U.mutate(F.id),disabled:U.isPending,children:"Dismiss"})]}),F.status==="acknowledged"&&e.jsxs(z,{className:"bg-blue-100 text-blue-800",children:[e.jsx(Gt,{className:"h-3 w-3 mr-1"}),"Acknowledged"]}),F.status==="implemented"&&e.jsxs(z,{className:"bg-green-100 text-green-800",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Implemented on ",ut(Ts(F.implementationDate),"MMM d")]})]})]})]},F.id)}),(T==null?void 0:T.length)===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ui,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No AI Suggestions Yet"}),e.jsx("p",{className:"text-gray-600",children:"AI will analyze guest reviews and suggest improvements automatically."})]})]})})]})}),K=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-indigo-500"}),"Property Timeline Activity"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Properties"}),V==null?void 0:V.map(F=>e.jsx(A,{value:F.id.toString(),children:F.name},F.id))]})]}),e.jsxs(se,{value:l,onValueChange:o,children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"All Activities"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Activities"}),e.jsx(A,{value:"guest",children:"Guest Activities"}),e.jsx(A,{value:"staff",children:"Staff Activities"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"expenses",children:"Expenses"})]})]})]})]})}),e.jsx(D,{children:$?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[P==null?void 0:P.map((F,Q)=>{var le,oe,Ae;const Z=FFe[F.category];return e.jsxs("div",{className:"flex gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-2 rounded-full ${F.type==="guest"?"bg-blue-100":F.type==="staff"?"bg-green-100":F.type==="maintenance"?"bg-orange-100":"bg-purple-100"}`,children:e.jsx(Z,{className:`h-4 w-4 ${F.type==="guest"?"text-blue-600":F.type==="staff"?"text-green-600":F.type==="maintenance"?"text-orange-600":"text-purple-600"}`})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:F.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.description}),((le=F.metadata)==null?void 0:le.guestName)&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(User,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Guest: ",F.metadata.guestName]}),F.metadata.rating&&e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((ge,xe)=>e.jsx(ks,{className:`h-3 w-3 ${xe<F.metadata.rating?"text-yellow-400 fill-current":"text-gray-300"}`},xe))})]}),((oe=F.metadata)==null?void 0:oe.amount)&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(Je,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:H(F.metadata.amount)})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:O(F.timestamp)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(ai,{className:"h-6 w-6",children:[e.jsx(_d,{src:F.user.avatar}),e.jsx(ii,{className:"text-xs",children:F.user.name.split(" ").map(ge=>ge[0]).join("")})]}),e.jsx("span",{className:"text-xs text-gray-600",children:F.user.name})]})]})]}),F.status&&e.jsx(z,{className:`mt-2 ${F.status==="completed"?"bg-green-100 text-green-800":F.status==="in-progress"?"bg-blue-100 text-blue-800":F.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:F.status}),F.attachments&&F.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:F.attachments.map((ge,xe)=>e.jsxs(M,{variant:"outline",size:"sm",children:[ge.type==="image"?e.jsx(bf,{className:"h-3 w-3 mr-1"}):e.jsx(vt,{className:"h-3 w-3 mr-1"}),ge.name]},xe))}),((Ae=F.metadata)==null?void 0:Ae.taskId)&&e.jsxs(M,{variant:"link",size:"sm",className:"mt-2 p-0 h-auto",children:[e.jsx(Hi,{className:"h-3 w-3 mr-1"}),"View Task Details"]})]})]},F.id)}),(P==null?void 0:P.length)===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gs,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Activity Yet"}),e.jsx("p",{className:"text-gray-600",children:"Property activity will appear here as staff complete tasks and guests interact with your properties."})]})]})})]})});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(zP,{role:"owner",className:"mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(fn,{className:"h-8 w-8 text-blue-500"}),"Owner Dashboard"]}),e.jsx("p",{className:"text-muted-foreground",children:"Complete property performance overview with earnings, balance management, AI suggestions, and activity timeline"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{variant:"outline",onClick:()=>g.invalidateQueries(),children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})})]}),e.jsxs(ft,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsxs(ae,{value:"earnings",className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-4 w-4"})," Earnings Overview"]}),e.jsxs(ae,{value:"balance",className:"flex items-center gap-2",children:[e.jsx(yr,{className:"h-4 w-4"})," Balance & Withdrawals"]}),e.jsxs(ae,{value:"suggestions",className:"flex items-center gap-2",children:[e.jsx(lp,{className:"h-4 w-4"})," AI Suggestions"]}),e.jsxs(ae,{value:"timeline",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4"})," Timeline Feed"]}),e.jsxs(ae,{value:"finance",className:"flex items-center gap-2",children:[e.jsx(vt,{className:"h-4 w-4"})," Financial Reports"]})]}),e.jsx(ie,{value:"earnings",children:e.jsx(q,{})}),e.jsx(ie,{value:"balance",children:e.jsx(re,{})}),e.jsx(ie,{value:"suggestions",children:e.jsx(we,{})}),e.jsx(ie,{value:"timeline",children:e.jsx(K,{})}),e.jsx(ie,{value:"finance",children:e.jsx(MFe,{})})]}),e.jsx(Ke,{open:c,onOpenChange:d,children:e.jsxs(Ye,{className:"max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Request Balance Payout"}),e.jsx(Rt,{children:"Submit a payout request for your property balance. Your assigned PM will be notified."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"property",children:"Property"}),e.jsxs(se,{value:p.propertyId,onValueChange:F=>f({...p,propertyId:F}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsx(te,{children:(Ce=S==null?void 0:S.propertyBalances)==null?void 0:Ce.map(F=>e.jsxs(A,{value:F.propertyId.toString(),children:[F.propertyName," - ",H(F.currentBalance)]},F.propertyId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"amount",children:"Amount"}),e.jsx(G,{id:"amount",type:"number",step:"0.01",value:p.amount,onChange:F=>f({...p,amount:F.target.value}),placeholder:"Enter amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(mt,{id:"notes",value:p.notes,onChange:F=>f({...p,notes:F.target.value}),placeholder:"Add any notes for the payout request...",rows:3})]})]}),e.jsxs(ir,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>I.mutate(p),disabled:I.isPending||!p.propertyId||!p.amount,children:I.isPending?"Submitting...":"Submit Request"})]})]})}),e.jsx(Ke,{open:u,onOpenChange:m,children:e.jsxs(Ye,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{children:["Financial Details - ",h==null?void 0:h.propertyName]}),e.jsx(Rt,{children:"Detailed breakdown of income, expenses, and transactions for this property."})]}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border",children:[e.jsx("h4",{className:"text-green-600 font-medium",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:H(h.totalRevenue)})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border",children:[e.jsx("h4",{className:"text-red-600 font-medium",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-red-800",children:H(Object.values(h.expenses).reduce((F,Q)=>F+Q,0))})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border",children:[e.jsx("h4",{className:"text-blue-600 font-medium",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:H(h.currentBalance)})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border",children:[e.jsx("h4",{className:"text-purple-600 font-medium",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:H(h.pendingPayouts)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(pe=h.breakdown)==null?void 0:pe.map((F,Q)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:F.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ut(Ts(F.date),"MMM d, yyyy"),"  ",F.category]})]}),e.jsxs("div",{className:`font-semibold ${F.amount>0?"text-green-600":"text-red-600"}`,children:[F.amount>0?"+":"",H(F.amount)]})]},Q))})]})]}),e.jsxs(ir,{children:[e.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Close"}),e.jsxs(M,{children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})})]})}const BFe=ds({guestName:Pe().min(1,"Guest name is required"),guestEmail:Pe().email("Valid email is required"),propertyId:ms().min(1,"Property selection is required"),messageContent:Pe().min(1,"Message content is required"),messageType:zs(["chat","request","feedback","complaint"])}),VFe=ds({guestName:Pe().min(1,"Guest name is required"),propertyId:ms().min(1,"Property selection is required"),serviceType:zs(["massage","taxi","chef","cleaning","amenities"]),serviceName:Pe().min(1,"Service name is required"),requestedDate:Ao(),requestedTime:Pe().min(1,"Time is required"),numberOfGuests:ms().min(1).max(20),specialRequests:Pe().optional()});function h6(){var O;const{toast:t}=at(),s=yt(),[n,r]=b.useState(1),[a,i]=b.useState(null),[l,o]=b.useState(null),{data:c,isLoading:d}=ye({queryKey:["/api/guest-portal/messages",n]}),{data:u,isLoading:m}=ye({queryKey:["/api/guest-portal/ai-tasks",n]}),{data:h,isLoading:x}=ye({queryKey:["/api/guest-portal/service-requests",n]}),{data:p,isLoading:f}=ye({queryKey:["/api/guest-portal/ai-suggestions"]}),{data:j,isLoading:g}=ye({queryKey:["/api/guest-portal/settings",n]}),{data:y,isLoading:v}=ye({queryKey:["/api/guest-portal/analytics",n]}),w=Zt({resolver:xs(BFe),defaultValues:{propertyId:n,messageType:"chat"}}),N=Zt({resolver:xs(VFe),defaultValues:{propertyId:n,numberOfGuests:2,requestedDate:new Date}}),S=Ee({mutationFn:R=>ve("POST","/api/guest-portal/messages",R),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/messages"]}),t({title:"Success",description:"Message sent successfully"}),i(null),w.reset()},onError:R=>{t({title:"Error",description:R.message,variant:"destructive"})}}),k=Ee({mutationFn:R=>ve("POST","/api/guest-portal/service-requests",R),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),t({title:"Success",description:"Service request submitted successfully"}),i(null),N.reset()},onError:R=>{t({title:"Error",description:R.message,variant:"destructive"})}}),T=Ee({mutationFn:({id:R,response:q})=>ve("PATCH",`/api/guest-portal/messages/${R}/respond`,{response:q}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/messages"]}),t({title:"Success",description:"Response sent successfully"})},onError:R=>{t({title:"Error",description:R.message,variant:"destructive"})}}),C=Ee({mutationFn:R=>ve("PATCH",`/api/guest-portal/ai-tasks/${R}/approve`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/ai-tasks"]}),t({title:"Success",description:"AI task approved successfully"})},onError:R=>{t({title:"Error",description:R.message,variant:"destructive"})}}),P=Ee({mutationFn:R=>ve("PATCH",`/api/guest-portal/ai-tasks/${R}/reject`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/ai-tasks"]}),t({title:"Success",description:"AI task rejected successfully"})},onError:R=>{t({title:"Error",description:R.message,variant:"destructive"})}}),$=R=>{const q={new:"outline",acknowledged:"secondary",resolved:"default",pending:"outline",confirmed:"default",completed:"secondary",cancelled:"destructive"};return e.jsx(z,{variant:q[R]||"outline",children:R})},V=R=>{const q={low:"outline",normal:"secondary",high:"destructive",urgent:"destructive",critical:"destructive"};return e.jsx(z,{variant:q[R]||"outline",children:R})},I=R=>{switch(R){case"positive":return e.jsx(Fe,{className:"h-4 w-4 text-green-500"});case"negative":return e.jsx(ar,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ut,{className:"h-4 w-4 text-yellow-500"})}},_=R=>{switch(R){case"massage":return e.jsx(dm,{className:"h-5 w-5"});case"taxi":return e.jsx(Lo,{className:"h-5 w-5"});case"chef":return e.jsx(kf,{className:"h-5 w-5"});case"cleaning":return e.jsx(fn,{className:"h-5 w-5"});default:return e.jsx(X$,{className:"h-5 w-5"})}},U=R=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"THB"}).format(typeof R=="string"?parseFloat(R):R),H=R=>ut(new Date(R),"PPP"),Y=R=>ut(new Date(R),"p");return e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Guest Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Smart communication center with AI-powered task automation and guest services"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(se,{value:n.toString(),onValueChange:R=>r(parseInt(R)),children:[e.jsx(ee,{className:"w-48",children:e.jsx(ne,{placeholder:"Select property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"1",children:"Villa Sunset"}),e.jsx(A,{value:"2",children:"Ocean Breeze"}),e.jsx(A,{value:"3",children:"Mountain View"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Messages"}),e.jsx(Ea,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y&&y[0]?y[0].totalMessages:0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest communications"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Service Requests"}),e.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y&&y[0]?y[0].totalServiceRequests:0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bookings & requests"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Response Time"}),e.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y&&y[0]?`${y[0].averageResponseTime}m`:"0m"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average response"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Satisfaction"}),e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y&&y[0]?`${y[0].guestSatisfactionScore}/5`:"0/5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest rating"})]})]})]}),e.jsxs(ft,{defaultValue:"messages",className:"space-y-6",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"messages",children:" Messages"}),e.jsx(ae,{value:"ai-tasks",children:" AI Tasks"}),e.jsx(ae,{value:"services",children:" Services"}),e.jsx(ae,{value:"suggestions",children:" AI Insights"}),e.jsx(ae,{value:"settings",children:" Settings"})]}),e.jsxs(ie,{value:"messages",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Communication Center"}),e.jsxs(Ke,{open:a==="create-message",onOpenChange:R=>i(R?"create-message":null),children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Simulate Guest Message"]})}),e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Simulate Guest Message"}),e.jsx(Rt,{children:"Create a demo guest message to test AI processing"})]}),e.jsx(os,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(R=>S.mutate(R)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:w.control,name:"guestName",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Name"}),e.jsx(ue,{children:e.jsx(G,{...R,placeholder:"Sarah Johnson"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:w.control,name:"guestEmail",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Email"}),e.jsx(ue,{children:e.jsx(G,{...R,placeholder:"sarah.johnson@example.com"})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:w.control,name:"messageType",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Message Type"}),e.jsxs(se,{onValueChange:R.onChange,value:R.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select message type"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"chat",children:"Chat"}),e.jsx(A,{value:"request",children:"Request"}),e.jsx(A,{value:"feedback",children:"Feedback"}),e.jsx(A,{value:"complaint",children:"Complaint"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:w.control,name:"messageContent",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Message Content"}),e.jsx(ue,{children:e.jsx(mt,{...R,placeholder:"The pool seems dirty and there's no hot water in the bathroom. Could someone please look into this?",rows:4})}),e.jsx(ls,{children:"AI will process this message for keywords and sentiment"}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:S.isPending,children:S.isPending?"Processing...":"Send Message"})]})]})})]})]})]}),e.jsx("div",{className:"space-y-4",children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):c==null?void 0:c.map(R=>{var q,re;return e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(um,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:R.guestName}),e.jsx(z,{variant:"outline",children:R.messageType}),V(R.priority),I(R.aiSentiment)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:R.guestEmail}),e.jsx("p",{className:"mt-2",children:R.messageContent}),R.aiProcessed&&e.jsxs("div",{className:"mt-3 p-3 bg-secondary/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ui,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Analysis"}),e.jsxs(z,{variant:"secondary",children:[Math.round(parseFloat(R.aiConfidence)*100),"% confidence"]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Keywords:"})," ",(q=R.aiKeywords)==null?void 0:q.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Suggestions:"})," ",(re=R.aiSuggestions)==null?void 0:re.join(", ")]})]})]}),R.staffResponse&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Staff Response"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",R.respondedBy," "," ",Y(R.respondedAt)]})]}),e.jsx("p",{className:"text-sm",children:R.staffResponse})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:H(R.createdAt)}),$(R.status),!R.staffResponse&&R.status!=="resolved"&&e.jsxs(M,{size:"sm",className:"mt-2",onClick:()=>{o(R),i("respond-message")},children:[e.jsx(Bk,{className:"h-4 w-4 mr-1"}),"Respond"]})]})]})})},R.id)})}),e.jsx(Ke,{open:a==="respond-message",onOpenChange:R=>i(R?"respond-message":null),children:e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Respond to Guest"}),e.jsxs(Rt,{children:["Send a response to ",l==null?void 0:l.guestName]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-secondary/50 rounded-lg",children:e.jsx("p",{className:"text-sm",children:l==null?void 0:l.messageContent})}),e.jsx(mt,{placeholder:"Type your response here...",rows:4,id:"response-text"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(M,{onClick:()=>{var q;const R=(q=document.getElementById("response-text"))==null?void 0:q.value;R&&l&&(T.mutate({id:l.id,response:R}),i(null))},children:"Send Response"})]})]})]})})]}),e.jsxs(ie,{value:"ai-tasks",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI-Generated Tasks"}),e.jsx("div",{className:"space-y-4",children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):u==null?void 0:u.map(R=>{var q;return e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-secondary/50 rounded-lg",children:e.jsx(ui,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold",children:["AI Task: ",R.department]}),e.jsx(z,{variant:"outline",children:R.taskType.replace("_"," ")}),V(R.urgency),e.jsxs(z,{variant:"secondary",children:[Math.round(parseFloat(R.confidence)*100),"% confidence"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Guest: ",R.guestId,"  Property: ",R.propertyId]}),e.jsx("p",{className:"mb-3",children:R.aiDescription}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Keywords:"})," ",(q=R.aiKeywords)==null?void 0:q.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",H(R.createdAt)]}),R.assignedTo&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Assigned to:"})," ",R.assignedTo]})]})]})]}),e.jsxs("div",{className:"text-right",children:[$(R.status),R.status==="pending"&&e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsxs(M,{size:"sm",onClick:()=>C.mutate(R.id),children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P.mutate(R.id),children:[e.jsx(ar,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]})})},R.id)})})]}),e.jsxs(ie,{value:"services",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Service Requests"}),e.jsxs(Ke,{open:a==="create-service",onOpenChange:R=>i(R?"create-service":null),children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"New Service Request"]})}),e.jsxs(Ye,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create Service Request"}),e.jsx(Rt,{children:"Book a service for guests"})]}),e.jsx(os,{...N,children:e.jsxs("form",{onSubmit:N.handleSubmit(R=>k.mutate(R)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:N.control,name:"guestName",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guest Name"}),e.jsx(ue,{children:e.jsx(G,{...R,placeholder:"Mike Chen"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"serviceType",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Service Type"}),e.jsxs(se,{onValueChange:R.onChange,value:R.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select service"})})}),e.jsxs(te,{children:[e.jsx(A,{value:"massage",children:"Massage"}),e.jsx(A,{value:"taxi",children:"Taxi/Transport"}),e.jsx(A,{value:"chef",children:"Private Chef"}),e.jsx(A,{value:"cleaning",children:"Extra Cleaning"}),e.jsx(A,{value:"amenities",children:"Extra Amenities"})]})]}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:N.control,name:"serviceName",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Service Name"}),e.jsx(ue,{children:e.jsx(G,{...R,placeholder:"Traditional Thai Massage"})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(me,{control:N.control,name:"requestedDate",render:({field:R})=>e.jsxs(de,{className:"flex flex-col",children:[e.jsx(he,{children:"Date"}),e.jsxs(fu,{children:[e.jsx(gu,{asChild:!0,children:e.jsx(ue,{children:e.jsxs(M,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!R.value&&"text-muted-foreground"}`,children:[R.value?ut(R.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(tt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ic,{className:"w-auto p-0",align:"start",children:e.jsx(Rc,{mode:"single",selected:R.value,onSelect:R.onChange,disabled:q=>q<new Date,initialFocus:!0})})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"requestedTime",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Time"}),e.jsx(ue,{children:e.jsx(G,{...R,placeholder:"19:00"})}),e.jsx(fe,{})]})}),e.jsx(me,{control:N.control,name:"numberOfGuests",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Guests"}),e.jsx(ue,{children:e.jsx(G,{...R,type:"number",min:"1",max:"20"})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:N.control,name:"specialRequests",render:({field:R})=>e.jsxs(de,{children:[e.jsx(he,{children:"Special Requests"}),e.jsx(ue,{children:e.jsx(mt,{...R,placeholder:"Couples massage preferred"})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:k.isPending,children:k.isPending?"Creating...":"Create Request"})]})]})})]})]})]}),e.jsx("div",{className:"grid gap-6",children:x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):h==null?void 0:h.map(R=>e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:_(R.serviceType)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:R.serviceName}),e.jsx(z,{variant:"outline",children:R.serviceType})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Guest: ",R.guestName," "," ",R.numberOfGuests," guests"]}),e.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",H(R.requestedDate)," at"," ",R.requestedTime]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cost:"})," ",U(R.estimatedCost)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",R.paymentMethod.replace("_"," ")]})]}),R.specialRequests&&e.jsx("p",{className:"text-sm text-muted-foreground",children:R.specialRequests}),R.guestFeedback&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(ks,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Guest Feedback"}),e.jsx("div",{className:"flex",children:Array.from({length:R.guestRating},(q,re)=>e.jsx(ks,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"},re))})]}),e.jsx("p",{className:"text-sm",children:R.guestFeedback})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:H(R.createdAt)}),$(R.status)]})]})})},R.id))})]}),e.jsxs(ie,{value:"suggestions",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI Smart Suggestions"}),e.jsx("div",{className:"grid gap-6",children:f?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):p==null?void 0:p.map(R=>e.jsx(E,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-secondary/50 rounded-lg",children:e.jsx(lp,{className:"h-5 w-5 text-yellow-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:R.suggestionTitle}),e.jsx(z,{variant:"outline",children:R.suggestionType.replace("_"," ")}),e.jsxs(z,{variant:"secondary",children:[Math.round(parseFloat(R.confidence)*100),"% confidence"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Target: ",R.targetAudience,"  Based on:"," ",R.basedOnData.replace("_"," ")]}),e.jsx("p",{className:"mb-3",children:R.suggestionDescription}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[R.potentialRevenue&&parseFloat(R.potentialRevenue)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Potential Revenue:"})," ",U(R.potentialRevenue)]}),R.implementationCost&&parseFloat(R.implementationCost)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Implementation Cost:"})," ",U(R.implementationCost)]})]}),R.notes&&e.jsx("div",{className:"mt-3 p-3 bg-secondary/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:R.notes})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:H(R.createdAt)}),V(R.priority),$(R.status)]})]})})},R.id))})]}),e.jsxs(ie,{value:"settings",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Portal Settings"}),g?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):j&&e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Portal Configuration"}),e.jsx(Me,{children:"Enable or disable guest portal features"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(W,{htmlFor:"enable-portal",children:"Guest Portal"}),e.jsx(At,{id:"enable-portal",checked:j.enableGuestPortal})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(W,{htmlFor:"enable-ai",children:"AI Assistant"}),e.jsx(At,{id:"enable-ai",checked:j.enableAiAssistant})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(W,{htmlFor:"enable-services",children:"Service Booking"}),e.jsx(At,{id:"enable-services",checked:j.enableServiceBooking})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(W,{htmlFor:"enable-chat",children:"Chat System"}),e.jsx(At,{id:"enable-chat",checked:j.enableChatSystem})]})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Guest Information"}),e.jsx(Me,{children:"Information displayed to guests"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(W,{children:"Welcome Message"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.welcomeMessage})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(Pf,{className:"h-4 w-4"}),e.jsx("span",{children:"WiFi Password"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.wifiPassword})]}),e.jsxs("div",{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx($i,{className:"h-4 w-4"}),e.jsx("span",{children:"Emergency Contact"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.emergencyContact})]})]})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Local Recommendations"}),e.jsx(Me,{children:"Places and activities recommended to guests"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-2",children:(O=j.localRecommendations)==null?void 0:O.map((R,q)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:R})]},q))})})]})]})]})]})]})}const UFe=ds({description:Pe().optional(),marketingDescription:Pe().optional(),electricityRate:xa.number().min(0),waterRate:xa.number().min(0),internetRate:xa.number().min(0),gasRate:xa.number().min(0),securityDeposit:xa.number().min(0),cleaningFee:xa.number().min(0),poolMaintenanceFee:xa.number().min(0),pestControlFee:xa.number().min(0),gpsLatitude:xa.number().optional(),gpsLongitude:xa.number().optional(),accessInstructions:Pe().optional(),maxGuests:xa.number().min(1),allowPets:Ur(),allowSmoking:Ur(),allowParties:Ur(),quietHoursStart:Pe(),quietHoursEnd:Pe(),guestRules:Pe().optional(),massageService:Ur(),chefService:Ur(),housekeepingService:Ur(),laundryService:Ur(),carRentalService:Ur(),airportTransfer:Ur()}),zFe=[{id:"wifi",name:"WiFi",icon:Pf},{id:"pool",name:"Swimming Pool",icon:wf},{id:"aircon",name:"Air Conditioning",icon:ns},{id:"kitchen",name:"Full Kitchen",icon:Ft},{id:"parking",name:"Free Parking",icon:Ft},{id:"tv",name:"Smart TV",icon:Ft},{id:"washer",name:"Washing Machine",icon:Ft},{id:"balcony",name:"Balcony/Terrace",icon:Ft},{id:"garden",name:"Garden",icon:Ft},{id:"gym",name:"Gym/Fitness",icon:Ft}];function x6(){const[t,s]=b.useState(null),[n,r]=b.useState(!1),[a,i]=b.useState("basic"),{toast:l}=at(),o=yt(),{data:c,isLoading:d}=ye({queryKey:["/api/auth/user"],retry:!1}),u=(c==null?void 0:c.role)||(c==null?void 0:c.primaryRole),m=["admin","portfolio-manager"].includes(u),h=["admin","portfolio-manager","owner"].includes(u),x=u==="owner"&&!1,{data:p,isLoading:f}=ye({queryKey:["/api/properties"],enabled:!!c}),{data:j,isLoading:g}=ye({queryKey:["/api/property-settings",t],enabled:!!t}),y=Ee({mutationFn:async N=>await ve("PUT",`/api/property-settings/${t}`,N),onSuccess:()=>{l({title:"Settings Updated",description:"Property settings have been updated successfully."}),o.invalidateQueries({queryKey:["/api/property-settings"]}),r(!1)},onError:N=>{l({title:"Update Failed",description:N.message,variant:"destructive"})}}),v=Zt({resolver:xs(UFe),defaultValues:{description:"",marketingDescription:"",electricityRate:7,waterRate:25,internetRate:800,gasRate:30,securityDeposit:5e3,cleaningFee:2e3,poolMaintenanceFee:1e3,pestControlFee:500,gpsLatitude:0,gpsLongitude:0,accessInstructions:"",maxGuests:4,allowPets:!1,allowSmoking:!1,allowParties:!1,quietHoursStart:"22:00",quietHoursEnd:"08:00",guestRules:"",massageService:!0,chefService:!1,housekeepingService:!0,laundryService:!0,carRentalService:!1,airportTransfer:!0}});X.useEffect(()=>{j&&v.reset(j)},[j,v]);const w=N=>{y.mutate({...N,updatedBy:c==null?void 0:c.id})};return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):h?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:" Property Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure property details, utilities, amenities, and guest rules"})]}),(m||x)&&t&&e.jsx("div",{className:"flex gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"outline",onClick:()=>r(!1),children:[e.jsx(on,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(M,{onClick:v.handleSubmit(w),disabled:y.isPending,children:[e.jsx(Sf,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Changes"]})]}):e.jsxs(M,{onClick:()=>r(!0),children:[e.jsx(jr,{className:"h-4 w-4 mr-2"}),"Edit Settings"]})})]}),u==="owner"&&!x&&e.jsx(E,{className:"border-amber-200 bg-amber-50/50",children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"View-Only Mode"})]}),e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"Settings are in view-only mode. Contact your property manager to request edit permissions."})]})}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Select Property"}),e.jsx(Me,{children:"Choose a property to view and edit its settings"})]}),e.jsx(D,{children:e.jsxs(se,{value:t==null?void 0:t.toString(),onValueChange:N=>s(Number(N)),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select a property..."})}),e.jsx(te,{children:p==null?void 0:p.map(N=>e.jsxs(A,{value:N.id.toString(),children:[N.name," - ",N.address]},N.id))})]})})]}),t&&e.jsx(os,{...v,children:e.jsx("form",{onSubmit:v.handleSubmit(w),children:e.jsxs(ft,{value:a,onValueChange:i,children:[e.jsxs(xt,{className:"grid w-full grid-cols-6",children:[e.jsx(ae,{value:"basic",children:"Basic Info"}),e.jsx(ae,{value:"utilities",children:"Utilities"}),e.jsx(ae,{value:"charges",children:"Fees & Charges"}),e.jsx(ae,{value:"rules",children:"Guest Rules"}),e.jsx(ae,{value:"services",children:"Services"}),e.jsx(ae,{value:"goals",children:"Goals & Plan"})]}),e.jsxs(ie,{value:"basic",className:"space-y-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-5 w-5"}),"Property Description"]}),e.jsx(Me,{children:"Internal description and marketing content for the property"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsx(me,{control:v.control,name:"description",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Internal Description"}),e.jsx(ue,{children:e.jsx(mt,{...N,placeholder:"Internal notes and description for staff...",disabled:!n,rows:3})}),e.jsx(ls,{children:"Internal description for staff and management use"}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"marketingDescription",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Marketing Description"}),e.jsx(ue,{children:e.jsx(mt,{...N,placeholder:"Marketing description for guests and booking platforms...",disabled:!n,rows:4})}),e.jsx(ls,{children:"Public description used for marketing and booking platforms"}),e.jsx(fe,{})]})})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-5 w-5"}),"Location & Access"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"gpsLatitude",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"GPS Latitude"}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",step:"any",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"gpsLongitude",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"GPS Longitude"}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",step:"any",disabled:!n})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:v.control,name:"accessInstructions",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Access Instructions"}),e.jsx(ue,{children:e.jsx(mt,{...N,placeholder:"Detailed access instructions for guests...",disabled:!n,rows:3})}),e.jsx(ls,{children:"Instructions for guests on how to access the property"}),e.jsx(fe,{})]})})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Amenities"}),e.jsx(Me,{children:"Available amenities and features"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:zFe.map(N=>{const S=N.icon;return e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"flex-1",children:N.name}),e.jsx(At,{disabled:!n})]},N.id)})})})]})]}),e.jsx(ie,{value:"utilities",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5"}),"Utility Rates"]}),e.jsx(Me,{children:"Set utility rates charged to guests (THB)"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"electricityRate",render:({field:N})=>e.jsxs(de,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Electricity Rate (THB/kWh)"]}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",step:"0.01",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"waterRate",render:({field:N})=>e.jsxs(de,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(wf,{className:"h-4 w-4"}),"Water Rate (THB/m)"]}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",step:"0.01",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"internetRate",render:({field:N})=>e.jsxs(de,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(Pf,{className:"h-4 w-4"}),"Internet Rate (THB/month)"]}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"gasRate",render:({field:N})=>e.jsxs(de,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Gas Rate (THB/kg)"]}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",step:"0.01",disabled:!n})}),e.jsx(fe,{})]})})]})})]})}),e.jsx(ie,{value:"charges",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5"}),"Fees & Charges"]}),e.jsx(Me,{children:"Standard fees and charges for guests"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"securityDeposit",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Security Deposit (THB)"}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"cleaningFee",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Cleaning Fee (THB)"}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"poolMaintenanceFee",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Pool Maintenance (THB)"}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"pestControlFee",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Pest Control (THB)"}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",disabled:!n})}),e.jsx(fe,{})]})})]})})]})}),e.jsx(ie,{value:"rules",className:"space-y-6",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Guest Policies"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsx(me,{control:v.control,name:"maxGuests",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Maximum Guests"}),e.jsx(ue,{children:e.jsx(G,{...N,type:"number",min:"1",disabled:!n})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{control:v.control,name:"allowPets",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Allow Pets"}),e.jsx(ls,{children:"Whether pets are allowed in the property"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})}),e.jsx(me,{control:v.control,name:"allowSmoking",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Allow Smoking"}),e.jsx(ls,{children:"Whether smoking is allowed in the property"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})}),e.jsx(me,{control:v.control,name:"allowParties",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Allow Parties"}),e.jsx(ls,{children:"Whether parties and events are allowed"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"quietHoursStart",render:({field:N})=>e.jsxs(de,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4"}),"Quiet Hours Start"]}),e.jsx(ue,{children:e.jsx(G,{...N,type:"time",disabled:!n})}),e.jsx(fe,{})]})}),e.jsx(me,{control:v.control,name:"quietHoursEnd",render:({field:N})=>e.jsxs(de,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4"}),"Quiet Hours End"]}),e.jsx(ue,{children:e.jsx(G,{...N,type:"time",disabled:!n})}),e.jsx(fe,{})]})})]}),e.jsx(me,{control:v.control,name:"guestRules",render:({field:N})=>e.jsxs(de,{children:[e.jsx(he,{children:"Additional Guest Rules"}),e.jsx(ue,{children:e.jsx(mt,{...N,placeholder:"Additional rules and guidelines for guests...",disabled:!n,rows:4})}),e.jsx(ls,{children:"Any additional rules or guidelines for guests"}),e.jsx(fe,{})]})})]})]})}),e.jsx(ie,{value:"services",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Service Availability"}),e.jsx(Me,{children:"Configure which services are available for guests"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(me,{control:v.control,name:"massageService",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Massage Service"}),e.jsx(ls,{children:"Professional massage service available"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})}),e.jsx(me,{control:v.control,name:"chefService",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Chef Service"}),e.jsx(ls,{children:"Private chef service available"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})}),e.jsx(me,{control:v.control,name:"housekeepingService",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Housekeeping"}),e.jsx(ls,{children:"Daily housekeeping service"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})}),e.jsx(me,{control:v.control,name:"laundryService",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Laundry Service"}),e.jsx(ls,{children:"Professional laundry service"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})}),e.jsx(me,{control:v.control,name:"carRentalService",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Car Rental"}),e.jsx(ls,{children:"Car rental service available"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})}),e.jsx(me,{control:v.control,name:"airportTransfer",render:({field:N})=>e.jsxs(de,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Airport Transfer"}),e.jsx(ls,{children:"Airport pickup and drop-off service"})]}),e.jsx(ue,{children:e.jsx(At,{checked:N.value,onCheckedChange:N.onChange,disabled:!n})})]})})]})})]})}),e.jsx(ie,{value:"goals",className:"space-y-6",children:e.jsx(qFe,{propertyId:t,canEdit:m||x,editMode:n})})]})})})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(E,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx(Ft,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Property Settings are only accessible to Admin, Portfolio Manager, and Owner roles."})]})})})}function qFe({propertyId:t,canEdit:s,editMode:n}){const[r,a]=b.useState("overview"),i=Zt({resolver:xs(ds({revenueTargetType:Pe().optional(),revenueTargetAmount:Pe().optional(),rewardCondition:Pe().optional()})),defaultValues:{revenueTargetType:"monthly",revenueTargetAmount:"150000",rewardCondition:"If revenue exceeds target, purchase new outdoor furniture set"}});return e.jsx(os,{...i,children:e.jsxs(ft,{value:r,onValueChange:a,children:[e.jsxs(xt,{className:"grid w-full grid-cols-4",children:[e.jsx(ae,{value:"overview",children:" Overview"}),e.jsx(ae,{value:"goals",children:" Revenue Goals"}),e.jsx(ae,{value:"upgrades",children:" Planned Upgrades"}),e.jsx(ae,{value:"notes",children:" Notes & Comments"})]}),e.jsx(ie,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Vn,{className:"h-5 w-5 text-green-600"}),"Active Goals"]}),e.jsx(Me,{children:"Current revenue targets and progress"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Monthly Target:"}),e.jsx("span",{className:"font-semibold",children:"150,000 THB"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Current Progress:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:"125,000 THB (83%)"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"83%"}})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target reward: New outdoor sofa set"})]})})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5 text-blue-600"}),"Planned Upgrades"]}),e.jsx(Me,{children:"Upcoming property improvements"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Pool Renovation"}),e.jsx(z,{variant:"outline",children:"High Priority"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Kitchen Upgrade"}),e.jsx(z,{variant:"secondary",children:"Medium"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Garden Landscaping"}),e.jsx(z,{variant:"secondary",children:"Low"})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Budget: 350,000 THB"})})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-orange-600"}),"Recent Activity"]}),e.jsx(Me,{children:"Latest updates and milestones"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Goal Updated"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"2 days ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"New Upgrade Added"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"1 week ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Note Added"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"2 weeks ago"})]})]})})]})]})}),e.jsx(ie,{value:"goals",className:"space-y-6",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Vn,{className:"h-5 w-5"}),"Revenue Goals & Rewards"]}),e.jsx(Me,{children:"Set revenue targets and reward conditions for achieving goals"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{control:i.control,name:"revenueTargetType",render:({field:l})=>e.jsxs(de,{children:[e.jsx(he,{children:"Target Period"}),e.jsx(ue,{children:e.jsxs(se,{value:l.value||"monthly",onValueChange:l.onChange,disabled:!n,children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select period"})}),e.jsxs(te,{children:[e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"quarterly",children:"Quarterly"}),e.jsx(A,{value:"yearly",children:"Yearly"})]})]})}),e.jsx(fe,{})]})}),e.jsx(me,{control:i.control,name:"revenueTargetAmount",render:({field:l})=>e.jsxs(de,{children:[e.jsx(he,{children:"Target Amount (THB)"}),e.jsx(ue,{children:e.jsx(G,{...l,placeholder:"150,000",disabled:!n,type:"number"})}),e.jsx(ls,{children:"Enter the revenue target for the selected period"}),e.jsx(fe,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{control:i.control,name:"rewardCondition",render:({field:l})=>e.jsxs(de,{children:[e.jsx(he,{children:"Reward Condition"}),e.jsx(ue,{children:e.jsx(mt,{...l,placeholder:"If revenue exceeds target, purchase new outdoor furniture set",disabled:!n,rows:3})}),e.jsx(ls,{children:"Describe what reward/upgrade will be triggered when goal is achieved"}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 font-medium",children:[e.jsx(Bt,{className:"h-4 w-4"}),"Current Progress"]}),e.jsx("div",{className:"mt-2 text-sm text-green-600",children:"125,000 THB of 150,000 THB target (83% complete)"}),e.jsx("div",{className:"mt-2 w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"83%"}})})]})]})]})})]})}),e.jsxs(ie,{value:"upgrades",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Property Upgrades & Improvements"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan and track property enhancement projects"})]}),s&&n&&e.jsxs(M,{children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Add Upgrade"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:"Pool Renovation Project"}),e.jsx(Me,{children:"Complete pool resurfacing and equipment upgrade"})]}),e.jsx(z,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"High Priority"})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Budget"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"200,000 THB"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Target Date"}),e.jsx("div",{className:"text-sm",children:"Q2 2025"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(z,{variant:"secondary",children:"Pending Approval"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Condition Trigger"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-amber-50 p-3 rounded border",children:" Only proceed if monthly revenue exceeds 180,000 THB for 3 consecutive months"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-lg",children:"Kitchen Appliance Upgrade"}),e.jsx(Me,{children:"Replace refrigerator and install new dishwasher"})]}),e.jsx(z,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Medium Priority"})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Budget"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"80,000 THB"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Target Date"}),e.jsx("div",{className:"text-sm",children:"Q3 2025"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(z,{variant:"secondary",children:"Planning"})]})]})})]})]})]}),e.jsxs(ie,{value:"notes",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notes & Communications"}),e.jsx("p",{className:"text-muted-foreground",children:"Internal notes and stakeholder comments"})]}),s&&n&&e.jsxs(M,{children:[e.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ai,{className:"h-8 w-8",children:e.jsx(ii,{children:"PM"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Portfolio Manager"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"2 days ago"})]})]}),e.jsx(z,{variant:"outline",children:"General"})]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm",children:"Revenue target for this month is looking achievable. Guest feedback has been consistently positive about the property condition. The pool renovation should be our next priority once we hit the target threshold."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Gt,{className:"h-3 w-3"}),e.jsx("span",{children:"Visible to: Owner, Staff"})]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ai,{className:"h-8 w-8",children:e.jsx(ii,{children:"OW"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Property Owner"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"1 week ago"})]})]}),e.jsx(z,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Milestone"})]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm",children:"Approved the budget for kitchen upgrades. Let's prioritize the dishwasher installation as guests have mentioned this in several reviews. The refrigerator can wait until next quarter."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Gt,{className:"h-3 w-3"}),e.jsx("span",{children:"Visible to: Owner, Staff"})]})]})]})]})]})]})})}const HFe=["Chaweng","Lamai","Nathon","Bophut","Maenam","Choeng Mon","Taling Ngam","Lipa Noi"],GFe=[{label:"1 Bedroom",value:1},{label:"2 Bedrooms",value:2},{label:"3 Bedrooms",value:3},{label:"4 Bedrooms",value:4},{label:"5 Bedrooms",value:5},{label:"6 Bedrooms",value:6},{label:"7+ Bedrooms",value:7}],p6=[{id:1,name:"Villa Samui Breeze"},{id:2,name:"Villa Tropical Paradise"},{id:3,name:"Villa Balinese Charm"},{id:4,name:"Villa Ocean View"},{id:5,name:"Villa Sunset Dreams"}],f6=[{id:"owner1",name:"John Smith"},{id:"owner2",name:"Sarah Johnson"},{id:"owner3",name:"Michael Brown"},{id:"owner4",name:"Emma Davis"}],g6=[{id:"pm1",name:"Alex Thompson"},{id:"pm2",name:"Jessica Wilson"},{id:"pm3",name:"David Miller"}];function WFe({onFiltersChange:t,className:s}){var u,m,h,x,p;const[n,r]=b.useState({}),[a,i]=b.useState(!1),l=f=>{const j={...n,...f};r(j),t(j)},o=()=>{r({}),t({})},c=f=>{const j={...n};delete j[f],r(j),t(j)},d=Object.keys(n).filter(f=>n[f]!==void 0&&n[f]!=="").length;return e.jsx(E,{className:`border-l-4 border-l-blue-500 ${s}`,children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zi,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Global Filters"}),d>0&&e.jsxs(z,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[d," active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d>0&&e.jsx(M,{variant:"ghost",size:"sm",onClick:o,className:"text-gray-500 hover:text-gray-700",children:"Clear All"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>i(!a),className:"text-blue-600 hover:text-blue-700",children:a?"Collapse":"Expand"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(G,{placeholder:"Search properties, guests, tasks...",value:n.searchText||"",onChange:f=>l({searchText:f.target.value}),className:"pl-10"})]})}),d>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.propertyId&&e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Ft,{className:"h-3 w-3"}),"Property: ",(u=p6.find(f=>f.id===n.propertyId))==null?void 0:u.name,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("propertyId")})]}),n.ownerId&&e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"h-3 w-3"}),"Owner: ",(m=f6.find(f=>f.id===n.ownerId))==null?void 0:m.name,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("ownerId")})]}),n.portfolioManagerId&&e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(dt,{className:"h-3 w-3"}),"PM: ",(h=g6.find(f=>f.id===n.portfolioManagerId))==null?void 0:h.name,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("portfolioManagerId")})]}),n.area&&e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ws,{className:"h-3 w-3"}),"Area: ",n.area,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("area")})]}),n.bedroomCount&&e.jsxs(z,{variant:"outline",className:"flex items-center gap-1",children:["Bedrooms: ",n.bedroomCount===7?"7+":n.bedroomCount,e.jsx(on,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("bedroomCount")})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsxs(se,{value:((x=n.propertyId)==null?void 0:x.toString())||"",onValueChange:f=>l({propertyId:f?parseInt(f):void 0}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Properties"}),p6.map(f=>e.jsx(A,{value:f.id.toString(),children:f.name},f.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),e.jsxs(se,{value:n.ownerId||"",onValueChange:f=>l({ownerId:f||void 0}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Owners"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Owners"}),f6.map(f=>e.jsx(A,{value:f.id,children:f.name},f.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio Manager"}),e.jsxs(se,{value:n.portfolioManagerId||"",onValueChange:f=>l({portfolioManagerId:f||void 0}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All PMs"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Portfolio Managers"}),g6.map(f=>e.jsx(A,{value:f.id,children:f.name},f.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area"}),e.jsxs(se,{value:n.area||"",onValueChange:f=>l({area:f||void 0}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"All Areas"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Areas"}),HFe.map(f=>e.jsx(A,{value:f,children:f},f))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),e.jsxs(se,{value:((p=n.bedroomCount)==null?void 0:p.toString())||"",onValueChange:f=>l({bedroomCount:f?parseInt(f):void 0}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Any"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"Any"}),GFe.map(f=>e.jsx(A,{value:f.value.toString(),children:f.label},f.value))]})]})]})]})]})})}function KFe(){const{user:t}=_a(),[s,n]=b.useState({}),[r,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(!1),{data:d=[]}=ye({queryKey:["/api/properties"]}),{data:u=[]}=ye({queryKey:["/api/tasks"]}),{data:m=[]}=ye({queryKey:["/api/bookings"]}),{data:h=[]}=ye({queryKey:["/api/finance"]}),[x,p]=b.useState({properties:[],tasks:[],bookings:[],finances:[],utilities:[],maintenance:[]}),f={properties:Array.isArray(d)?d:[],tasks:Array.isArray(u)?u:[],bookings:Array.isArray(m)?m:[],finances:Array.isArray(h)?h:[],utilities:[],maintenance:[]};b.useEffect(()=>{const v=(w,N)=>w.filter(S=>{if(s.propertyId&&S.propertyId!==s.propertyId)return!1;if(s.searchText){const k=s.searchText.toLowerCase();if(!Object.values(S).join(" ").toLowerCase().includes(k))return!1}return!0});p({properties:v(f.properties),tasks:v(f.tasks),bookings:v(f.bookings),finances:v(f.finances),utilities:v(f.utilities),maintenance:v(f.maintenance)})},[s,d,u,m,h]);const j=v=>{switch(v){case"active":case"confirmed":case"paid":case"completed":return"default";case"pending":case"scheduled":return"secondary";case"overdue":case"high":return"destructive";case"maintenance":case"in_progress":case"medium":return"outline";default:return"secondary"}},g=v=>{switch(v){case"high":return e.jsx(Et,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(et,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(Fe,{className:"h-4 w-4 text-green-500"});default:return null}},y=v=>{const w=v.dueDate||v.due_date||v.due||v.deadline;if(!w)return"No date";try{const N=w instanceof Date?w:new Date(w);return isNaN(N.getTime())?"No date":N.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return"No date"}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(zP,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive property management overview with global filtering"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"outline",className:"text-sm",children:(t==null?void 0:t.role)==="admin"?"System Administrator":"Portfolio Manager"}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{try{window.location.href="/settings"}catch(v){console.error("Settings navigation error:",v),window.location.href="/simple-settings"}},title:"Settings",children:e.jsx(Jt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(WFe,{onFiltersChange:n,className:"flex-1"}),e.jsx(bG,{variant:"outline",size:"sm",showStats:!0,showLastUpdate:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Properties"}),e.jsx("p",{className:"text-2xl font-bold",children:x.properties.length})]}),e.jsx(Ft,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:x.tasks.filter(v=>v.status!=="completed").length})]}),e.jsx(Tx,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bookings"}),e.jsx("p",{className:"text-2xl font-bold",children:x.bookings.length})]}),e.jsx(tt,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenue (THB)"}),e.jsx("p",{className:"text-2xl font-bold",children:x.finances.filter(v=>v.type==="revenue").reduce((v,w)=>v+w.amount,0).toLocaleString()})]}),e.jsx(Je,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(ft,{defaultValue:"properties",className:"w-full",children:[e.jsxs(xt,{className:"grid w-full grid-cols-6",children:[e.jsx(ae,{value:"properties",children:"Properties"}),e.jsx(ae,{value:"tasks",children:"Tasks"}),e.jsx(ae,{value:"bookings",children:"Bookings"}),e.jsx(ae,{value:"finances",children:"Finances"}),e.jsx(ae,{value:"utilities",children:"Utilities"}),e.jsx(ae,{value:"maintenance",children:"Maintenance"})]}),e.jsx(ie,{value:"properties",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-5 w-5"}),"Properties (",x.properties.length,")"]}),e.jsxs(M,{onClick:()=>c(!0),size:"sm",children:[e.jsx(bt,{className:"h-4 w-4 mr-1"}),"Add Property"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.properties.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:v.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:v.address}),e.jsxs("span",{children:[v.bedrooms," bedrooms"]}),e.jsxs("span",{children:[v.maxGuests," max guests"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-semibold text-green-600",children:v.pricePerNight?`${v.pricePerNight}/night`:"No rate set"})}),e.jsx(z,{variant:j(v.status),children:v.status})]})]},v.id)),x.properties.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No properties match your current filters"})]})})]})}),e.jsx(ie,{value:"tasks",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Tx,{className:"h-5 w-5"}),"Tasks (",x.tasks.length,")"]}),e.jsxs(M,{onClick:()=>a(!0),size:"sm",children:[e.jsx(bt,{className:"h-4 w-4 mr-1"}),"Create Task"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.tasks.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g(v.priority),e.jsx("h3",{className:"font-semibold",children:v.title})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:v.description}),e.jsxs("span",{children:["Assigned: ",v.assignedTo]}),e.jsxs("span",{children:["Due: ",y(v)]})]})]}),e.jsx(z,{variant:j(v.status),children:v.status})]},v.id)),x.tasks.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No tasks match your current filters"})]})})]})}),e.jsx(ie,{value:"bookings",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Bookings (",x.bookings.length,")"]}),e.jsxs(M,{onClick:()=>l(!0),size:"sm",children:[e.jsx(bt,{className:"h-4 w-4 mr-1"}),"Create Booking"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.bookings.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:v.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:v.property}),e.jsxs("span",{children:[v.checkIn," - ",v.checkOut]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-green-600",children:["",v.amount.toLocaleString()]})}),e.jsx(z,{variant:j(v.status),children:v.status})]})]},v.id)),x.bookings.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No bookings match your current filters"})]})})]})}),e.jsx(ie,{value:"finances",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5"}),"Financial Transactions (",x.finances.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.finances.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:v.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:v.property}),e.jsx("span",{children:v.date})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-semibold ${v.type==="revenue"?"text-green-600":v.type==="expense"?"text-red-600":"text-blue-600"}`,children:[v.type==="expense"?"-":"+","",v.amount.toLocaleString()]})}),e.jsx(z,{variant:v.type==="revenue"?"default":v.type==="expense"?"destructive":"secondary",children:v.type})]})]},v.id)),x.finances.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No financial transactions match your current filters"})]})})]})}),e.jsx(ie,{value:"utilities",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"Utility Bills (",x.utilities.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.utilities.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold capitalize",children:v.type}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:v.property}),e.jsxs("span",{children:["Due: ",v.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold",children:["",v.amount.toLocaleString()]})}),e.jsx(z,{variant:j(v.status),children:v.status})]})]},v.id)),x.utilities.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No utility bills match your current filters"})]})})]})}),e.jsx(ie,{value:"maintenance",className:"space-y-4",children:e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5"}),"Maintenance Issues (",x.maintenance.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.maintenance.map(v=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g(v.priority),e.jsx("h3",{className:"font-semibold",children:v.issue})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:v.property}),e.jsxs("span",{children:["Cost: ",v.cost.toLocaleString()]})]})]}),e.jsx(z,{variant:j(v.status),children:v.status})]},v.id)),x.maintenance.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No maintenance issues match your current filters"})]})})]})})]}),e.jsx(P0,{isOpen:r,onOpenChange:a}),e.jsx(D0,{open:i,onOpenChange:l}),e.jsx(O0,{open:o,onOpenChange:c})]})}const Jg=[{value:"contracts",label:" Signed Contracts",icon:""},{value:"licenses",label:" Government Licenses",icon:""},{value:"manuals",label:" House Manuals",icon:""},{value:"floorplans",label:" Floor Plans",icon:""},{value:"inventory",label:" Inventory Lists",icon:""},{value:"logs",label:" Service Logs",icon:""},{value:"identification",label:" Owner ID/Passport",icon:""},{value:"utility_accounts",label:" Utility Screenshots",icon:""},{value:"insurance",label:" Insurance Documents",icon:""},{value:"certificates",label:" Safety Certificates",icon:""}],v6=[{value:"admin_pm_only",label:"Admin/PM Only",icon:qt},{value:"owner_visible",label:"Owner Visible",icon:dt},{value:"staff_visible",label:"Staff Visible",icon:Ft},{value:"all_visible",label:"All Visible",icon:Gt}];function YFe(){var V;const[t,s]=b.useState("overview"),[n,r]=b.useState(""),[a,i]=b.useState(""),[l,o]=b.useState(""),[c,d]=b.useState(!1),[u,m]=b.useState(null),[h,x]=b.useState({title:"",category:"",visibility:"admin_pm_only",description:"",hasExpiration:!1,expirationDate:"",propertyId:"",tags:""}),{toast:p}=at(),f=yt(),{data:j=[]}=ye({queryKey:["/api/properties"]}),{data:g=[],isLoading:y}=ye({queryKey:["/api/documents",n,a,l],queryFn:()=>{const I=new URLSearchParams;return n&&I.append("propertyId",n),a&&I.append("category",a),l&&I.append("search",l),ve("GET",`/api/documents?${I.toString()}`)}}),{data:v}=ye({queryKey:["/api/documents/summary",n],queryFn:()=>{const I=new URLSearchParams;return n&&I.append("propertyId",n),ve("GET",`/api/documents/summary?${I.toString()}`)}}),{data:w=[]}=ye({queryKey:["/api/documents/expiring"],queryFn:()=>ve("GET","/api/documents/expiring")}),N=Ee({mutationFn:async I=>ve("POST","/api/documents",I),onSuccess:()=>{p({title:"Document uploaded successfully",description:"The document has been added to the system."}),d(!1),x({title:"",category:"",visibility:"admin_pm_only",description:"",hasExpiration:!1,expirationDate:"",propertyId:"",tags:""}),f.invalidateQueries({queryKey:["/api/documents"]}),f.invalidateQueries({queryKey:["/api/documents/summary"]})},onError:I=>{p({title:"Upload failed",description:I.message||"Failed to upload document",variant:"destructive"})}}),S=()=>{if(!h.title||!h.category){p({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const I={...h,filename:`${h.title.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.pdf`,originalFilename:`${h.title}.pdf`,propertyId:h.propertyId?parseInt(h.propertyId):null,tags:h.tags?h.tags.split(",").map(_=>_.trim()):[],expirationDate:h.hasExpiration?h.expirationDate:null};N.mutate(I)},k=I=>{switch(I){case"active":return e.jsx(z,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"});case"pending_approval":return e.jsx(z,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"expired":return e.jsx(z,{variant:"destructive",children:"Expired"});default:return e.jsx(z,{variant:"outline",children:I})}},T=I=>{const _=v6.find(H=>H.value===I),U=(_==null?void 0:_.icon)||Gt;return e.jsx(U,{className:"h-4 w-4"})},C=I=>{const _=Jg.find(U=>U.value===I);return(_==null?void 0:_.icon)||""},P=I=>{if(I===0)return"0 Bytes";const _=1024,U=["Bytes","KB","MB","GB"],H=Math.floor(Math.log(I)/Math.log(_));return parseFloat((I/Math.pow(_,H)).toFixed(2))+" "+U[H]},$=I=>{if(!I.hasExpiration||!I.expirationDate)return!1;const _=new Date(I.expirationDate),U=new Date(Date.now()+30*24*60*60*1e3);return _<=U};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:" Document Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure document vault and owner onboarding file management"})]}),e.jsxs(Ke,{open:c,onOpenChange:d,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(mi,{className:"mr-2 h-4 w-4"}),"Upload Document"]})}),e.jsxs(Ye,{className:"sm:max-w-[500px]",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Upload New Document"}),e.jsx(Rt,{children:"Add a new document to the property management system"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"title",children:"Document Title*"}),e.jsx(G,{id:"title",value:h.title,onChange:I=>x({...h,title:I.target.value}),placeholder:"Enter document title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"property",children:"Property"}),e.jsxs(se,{value:h.propertyId,onValueChange:I=>x({...h,propertyId:I}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select property"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Properties"}),j.map(I=>e.jsx(A,{value:I.id.toString(),children:I.name},I.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"category",children:"Category*"}),e.jsxs(se,{value:h.category,onValueChange:I=>x({...h,category:I}),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select category"})}),e.jsx(te,{children:Jg.map(I=>e.jsx(A,{value:I.value,children:I.label},I.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"visibility",children:"Visibility"}),e.jsxs(se,{value:h.visibility,onValueChange:I=>x({...h,visibility:I}),children:[e.jsx(ee,{children:e.jsx(ne,{})}),e.jsx(te,{children:v6.map(I=>e.jsx(A,{value:I.value,children:I.label},I.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",value:h.description,onChange:I=>x({...h,description:I.target.value}),placeholder:"Brief description of the document",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(G,{id:"tags",value:h.tags,onChange:I=>x({...h,tags:I.target.value}),placeholder:"important, signed, current"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"hasExpiration",checked:h.hasExpiration,onChange:I=>x({...h,hasExpiration:I.target.checked})}),e.jsx(W,{htmlFor:"hasExpiration",children:"Document has expiration date"})]}),h.hasExpiration&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"expirationDate",children:"Expiration Date"}),e.jsx(G,{id:"expirationDate",type:"date",value:h.expirationDate,onChange:I=>x({...h,expirationDate:I.target.value})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:S,disabled:N.isPending,children:N.isPending?"Uploading...":"Upload Document"})]})]})]})]})]}),e.jsxs(ft,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(xt,{className:"grid w-full grid-cols-5",children:[e.jsx(ae,{value:"overview",children:" Overview"}),e.jsx(ae,{value:"documents",children:" All Documents"}),e.jsx(ae,{value:"expiring",children:" Expiring Soon"}),e.jsx(ae,{value:"onboarding",children:" Owner Onboarding"}),e.jsx(ae,{value:"access-logs",children:" Access Logs"})]}),e.jsxs(ie,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Total Documents"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(v==null?void 0:v.totalDocuments)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(v==null?void 0:v.recentUploads)||0," this week"]})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Expiring Soon"}),e.jsx(Et,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(v==null?void 0:v.expiringCount)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Pending Approval"}),e.jsx(et,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(v==null?void 0:v.pendingApproval)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires review"})]})]}),e.jsxs(E,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(B,{className:"text-sm font-medium",children:"Categories"}),e.jsx(l2,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((V=v==null?void 0:v.documentsByCategory)==null?void 0:V.length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Document types"})]})]})]}),(v==null?void 0:v.documentsByCategory)&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Documents by Category"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:v.documentsByCategory.map(I=>{const _=Jg.find(H=>H.value===I.category),U=v.totalDocuments>0?I.count/v.totalDocuments*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:C(I.category)}),(_==null?void 0:_.label)||I.category]}),e.jsx("span",{className:"font-medium",children:I.count})]}),e.jsx(fi,{value:U,className:"h-2"})]},I.category)})})})]})]}),e.jsxs(ie,{value:"documents",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(G,{placeholder:"Search documents...",value:l,onChange:I=>o(I.target.value),className:"pl-8"})]})}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{className:"w-[200px]",children:e.jsx(ne,{placeholder:"All Properties"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Properties"}),j.map(I=>e.jsx(A,{value:I.id.toString(),children:I.name},I.id))]})]}),e.jsxs(se,{value:a,onValueChange:i,children:[e.jsx(ee,{className:"w-[200px]",children:e.jsx(ne,{placeholder:"All Categories"})}),e.jsxs(te,{children:[e.jsx(A,{value:"",children:"All Categories"}),Jg.map(I=>e.jsx(A,{value:I.value,children:I.label},I.value))]})]})]}),y?e.jsx("div",{className:"text-center py-8",children:"Loading documents..."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(I=>e.jsxs(E,{className:"hover:shadow-md transition-shadow",children:[e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:C(I.category)}),e.jsxs("div",{children:[e.jsx(B,{className:"text-sm font-medium line-clamp-1",children:I.title}),e.jsx(Me,{className:"text-xs",children:P(I.fileSize)})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[T(I.visibility),$(I)&&e.jsx(Et,{className:"h-4 w-4 text-orange-500"})]})]})}),e.jsx(D,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[k(I.status),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(I.createdAt).toLocaleDateString()})]}),I.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:I.description}),I.tags&&I.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.tags.slice(0,3).map((_,U)=>e.jsx(z,{variant:"outline",className:"text-xs",children:_},U)),I.tags.length>3&&e.jsxs(z,{variant:"outline",className:"text-xs",children:["+",I.tags.length-3]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(Gt,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(Ns,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(jr,{className:"h-3 w-3"})})]}),I.hasExpiration&&I.expirationDate&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(I.expirationDate).toLocaleDateString()]})]})]})})]},I.id))})]}),e.jsx(ie,{value:"expiring",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5 text-orange-500"}),"Documents Expiring Soon"]}),e.jsx(Me,{children:"Documents that will expire within the next 30 days"})]}),e.jsx(D,{children:w.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Fe,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No documents expiring soon"})]}):e.jsx("div",{className:"space-y-3",children:w.map(I=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:C(I.category)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:I.title}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Expires: ",I.expirationDate?new Date(I.expirationDate).toLocaleDateString():"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k(I.status),e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(Gt,{className:"h-3 w-3"})})]})]},I.id))})})]})}),e.jsx(ie,{value:"onboarding",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:" Owner Onboarding Checklist"}),e.jsx(Me,{children:"Track document collection and setup progress for new owners"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(dt,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Owner onboarding checklist interface coming soon"}),e.jsx("p",{className:"text-sm",children:"Will include step-by-step document collection workflow"})]})})]})}),e.jsx(ie,{value:"access-logs",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:" Document Access Logs"}),e.jsx(Me,{children:"Audit trail of all document access and modifications"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qt,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Access logs interface coming soon"}),e.jsx("p",{className:"text-sm",children:"Will display detailed audit trail for compliance"})]})})]})})]})]})}const QFe=ds({fileName:Pe().min(1,"File name is required"),category:Pe().min(1,"Category is required"),fileType:Pe(),tags:Pe().optional(),description:Pe().optional(),propertyId:xa.number()}),eu=[{id:"legal",name:"Legal Documents",icon:vt,color:"bg-blue-100 text-blue-700"},{id:"contracts",name:"Contracts",icon:vt,color:"bg-green-100 text-green-700"},{id:"licenses",name:"Licenses & Permits",icon:vt,color:"bg-purple-100 text-purple-700"},{id:"utility_bills",name:"Utility Bills",icon:vt,color:"bg-orange-100 text-orange-700"},{id:"insurance",name:"Insurance Documents",icon:vt,color:"bg-red-100 text-red-700"},{id:"financial",name:"Financial Records",icon:vt,color:"bg-yellow-100 text-yellow-700"},{id:"maintenance",name:"Maintenance Records",icon:vt,color:"bg-gray-100 text-gray-700"},{id:"photos",name:"Property Photos",icon:Lk,color:"bg-pink-100 text-pink-700"}],XFe=t=>{if(!t)return"document";const s=t.split("/");return s[s.length-1].replace(/^\d+_/,"")||"document"},tu=t=>t.fileName?t.fileName:t.fileUrl?XFe(t.fileUrl):"document";function y6(){var Ae,ge;const[t,s]=b.useState(null),[n,r]=b.useState("all"),[a,i]=b.useState(""),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,m]=b.useState(!1),[h,x]=b.useState(null),[p,f]=b.useState(""),[j,g]=b.useState(""),[y,v]=b.useState("all"),[w,N]=b.useState(10),[S,k]=b.useState(null),{toast:T}=at(),C=yt(),P=async xe=>{if(!xe.id){T({title:"Download Failed",description:"Document ID is missing.",variant:"destructive"});return}try{const $e=await fetch(`/api/property-documents/${xe.id}/download`);if(!$e.ok)throw new Error("Failed to download file");const ke=await $e.blob(),Ze=window.URL.createObjectURL(ke),gt=window.document.createElement("a");gt.href=Ze,gt.download=tu(xe),window.document.body.appendChild(gt),gt.click(),window.document.body.removeChild(gt),window.URL.revokeObjectURL(Ze),T({title:"Download Started",description:"Your file is being downloaded."})}catch{T({title:"Download Failed",description:"Failed to download the file. Please try again.",variant:"destructive"})}},$=Ee({mutationFn:async xe=>await ve("DELETE",`/api/property-documents/${xe}`),onSuccess:()=>{wa.delete("/api/property-documents/expiring?days=30"),T({title:"Document Deleted",description:"Document has been deleted successfully."}),C.invalidateQueries({predicate:xe=>xe.queryKey[0]&&typeof xe.queryKey[0]=="string"&&xe.queryKey[0].startsWith("/api/property-documents/property/")}),C.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),k(null)},onError:xe=>{T({title:"Delete Failed",description:xe.message,variant:"destructive"})}}),V=(xe,$e)=>{var Ze,gt;return xe?xe.startsWith("image/")?"IMAGE":xe==="application/pdf"?"PDF":xe.includes("spreadsheet")||xe.includes("excel")?"EXCEL":((Ze=xe.split("/")[1])==null?void 0:Ze.toUpperCase())||"FILE":((gt=$e==null?void 0:$e.split(".").pop())==null?void 0:gt.toUpperCase())||"FILE"},{data:I,isLoading:_}=ye({queryKey:["/api/auth/user"],retry:!1}),U=I==null?void 0:I.role,H=["admin","portfolio-manager"].includes(U),Y=["admin","portfolio-manager","owner"].includes(U),{data:O,isLoading:R}=ye({queryKey:["/api/properties"],enabled:!!I}),{data:q,isLoading:re}=ye({queryKey:[`/api/property-documents/property/${t}`],enabled:!!t&&!!I}),we=xe=>["application/pdf","image/jpeg","image/png","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(xe.type)?xe.size>10485760?(T({title:"File Too Large",description:"File size must be less than 10 MB.",variant:"destructive"}),!1):!0:(T({title:"Invalid File Type",description:"Please upload a PDF, JPG, PNG, XLSX, or XLS file.",variant:"destructive"}),!1),K=xe=>{var ke;const $e=(ke=xe.target.files)==null?void 0:ke[0];$e&&we($e)&&(x($e),pe.getValues("fileName")||pe.setValue("fileName",$e.name))},Ce=Ee({mutationFn:async xe=>{const $e=await fetch("/api/property-documents/upload",{method:"POST",body:xe,credentials:"include"});if(!$e.ok){const ke=await $e.json();throw new Error(ke.error||"Failed to upload document")}return $e.json()},onSuccess:()=>{wa.delete("/api/property-documents/expiring?days=30"),T({title:"Document Uploaded",description:"Document has been uploaded successfully."}),C.invalidateQueries({predicate:xe=>xe.queryKey[0]&&typeof xe.queryKey[0]=="string"&&xe.queryKey[0].startsWith("/api/property-documents/property/")}),C.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),o(!1),x(null),pe.reset()},onError:xe=>{T({title:"Upload Failed",description:xe.message,variant:"destructive"})}}),pe=Zt({resolver:xs(QFe),defaultValues:{fileName:"",category:"",fileType:"pdf",tags:"",description:"",propertyId:t||0}}),F=xe=>{if(!h){T({title:"No File Selected",description:"Please select a file to upload.",variant:"destructive"});return}const $e=new FormData;$e.append("file",h),$e.append("fileName",xe.fileName),$e.append("category",xe.category),$e.append("fileType",xe.fileType),$e.append("tags",xe.tags||""),$e.append("description",xe.description||""),$e.append("propertyId",(t==null?void 0:t.toString())||""),Ce.mutate($e)};let Q=(q==null?void 0:q.filter(xe=>{var be,J,Ne;const $e=n==="all"||xe.category===n||xe.docType===n,ke=!a||((be=xe.fileName)==null?void 0:be.toLowerCase().includes(a.toLowerCase()))||((J=xe.description)==null?void 0:J.toLowerCase().includes(a.toLowerCase()))||((Ne=xe.tags)==null?void 0:Ne.some(De=>De==null?void 0:De.toLowerCase().includes(a.toLowerCase()))),Ze=xe.createdAt?new Date(xe.createdAt).toISOString().split("T")[0]:null,gt=!p||!Ze||Ze>=p,Kt=!j||!Ze||Ze<=j;return $e&&ke&&gt&&Kt}))||[];if(y!=="all"){const xe=parseInt(y);Q=Q.slice(0,xe)}const Z=Q.slice(0,w),le=Q.length>w,oe=xe=>{switch(xe){case"image":return e.jsx(Lk,{className:"h-4 w-4"});case"pdf":return e.jsx(vt,{className:"h-4 w-4"});default:return e.jsx(i2,{className:"h-4 w-4"})}};return _?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):Y?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:" Property Document Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage legal documents, contracts, licenses, and utility bills"})]}),H&&e.jsxs(M,{onClick:()=>o(!0),children:[e.jsx(mi,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Select Property"}),e.jsx(Me,{children:"Choose a property to view its documents"})]}),e.jsx(D,{children:e.jsxs(se,{value:t==null?void 0:t.toString(),onValueChange:xe=>s(Number(xe)),children:[e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select a property..."})}),e.jsx(te,{children:O==null?void 0:O.map(xe=>e.jsxs(A,{value:xe.id.toString(),children:[xe.name," - ",xe.address]},xe.id))})]})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(G,{placeholder:"Search documents by name, description, or tags...",value:a,onChange:xe=>i(xe.target.value),className:"pl-10"})]})}),e.jsxs(se,{value:n,onValueChange:r,children:[e.jsx(ee,{className:"md:w-48",children:e.jsx(ne,{placeholder:"Filter by category"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All Categories"}),eu.map(xe=>e.jsx(A,{value:xe.id,children:xe.name},xe.id))]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Date From:"}),e.jsx(G,{type:"date",value:p,onChange:xe=>f(xe.target.value),className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Date To:"}),e.jsx(G,{type:"date",value:j,onChange:xe=>g(xe.target.value),className:"flex-1"})]}),e.jsxs(se,{value:y,onValueChange:xe=>{v(xe),N(10)},children:[e.jsx(ee,{className:"md:w-32",children:e.jsx(ne,{placeholder:"Limit"})}),e.jsxs(te,{children:[e.jsx(A,{value:"all",children:"All"}),e.jsx(A,{value:"20",children:"20"}),e.jsx(A,{value:"50",children:"50"}),e.jsx(A,{value:"80",children:"80"}),e.jsx(A,{value:"100",children:"100"})]})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:eu.map(xe=>{var Ze;const $e=((Ze=q==null?void 0:q.filter(gt=>gt.category===xe.id))==null?void 0:Ze.length)||0,ke=xe.icon;return e.jsx(E,{className:`cursor-pointer transition-all hover:shadow-md ${n===xe.id?"ring-2 ring-primary":""}`,onClick:()=>r(xe.id),children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${xe.color} flex items-center justify-center mx-auto mb-2`,children:e.jsx(ke,{className:"h-6 w-6"})}),e.jsx("h3",{className:"text-sm font-medium mb-1",children:xe.name}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:$e})]})},xe.id)})}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(l2,{className:"h-5 w-5"}),"Documents",n!=="all"&&e.jsx(z,{variant:"secondary",children:(Ae=eu.find(xe=>xe.id===n))==null?void 0:Ae.name})]}),e.jsxs(Me,{children:[Q.length," documents found"]})]}),e.jsx(D,{children:re?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"})}):Q.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(l2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||n!=="all"?"Try adjusting your search or filter criteria.":"Upload your first document to get started."}),H&&e.jsxs(M,{onClick:()=>o(!0),children:[e.jsx(mi,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:Z.map(xe=>{const $e=eu.find(ke=>ke.id===xe.category);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${($e==null?void 0:$e.color)||"bg-gray-100 text-gray-700"}`,children:oe(xe.fileType)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:tu(xe)}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(z,{variant:"outline",className:"text-xs",children:($e==null?void 0:$e.name)||xe.category}),e.jsx("span",{children:""}),e.jsx(Ht,{className:"h-3 w-3"}),e.jsx("span",{children:xe.uploadedBy}),e.jsx("span",{children:""}),e.jsx(tt,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(xe.createdAt).toLocaleDateString()})]}),xe.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:xe.description}),xe.tags&&xe.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:xe.tags.map((ke,Ze)=>e.jsxs(z,{variant:"secondary",className:"text-xs",children:[e.jsx($X,{className:"h-2 w-2 mr-1"}),ke]},Ze))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{d(xe),m(!0)},"data-testid":`button-view-${xe.id}`,children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>P(xe),"data-testid":`button-download-${xe.id}`,children:e.jsx(Ns,{className:"h-4 w-4"})}),H&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>k(xe),className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${xe.id}`,children:e.jsx(br,{className:"h-4 w-4"})})]})]},xe.id)})}),le&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(M,{variant:"outline",onClick:()=>N(xe=>xe+10),"data-testid":"button-view-more",children:["View More (",Q.length-w," remaining)"]})})]})})]})]}),e.jsx(Ke,{open:l,onOpenChange:o,children:e.jsxs(Ye,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Upload Document"}),e.jsx(Rt,{children:"Upload a new document to the property document center"})]}),e.jsx(os,{...pe,children:e.jsxs("form",{onSubmit:pe.handleSubmit(F),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"file-upload",className:"text-sm font-medium",children:"Select File *"}),e.jsx(G,{id:"file-upload",type:"file",accept:".pdf,.jpg,.jpeg,.png,.xlsx,.xls",onChange:K,className:"cursor-pointer"}),h&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",h.name," (",(h.size/1024).toFixed(2)," KB)"]})]}),e.jsx(me,{control:pe.control,name:"fileName",render:({field:xe})=>e.jsxs(de,{children:[e.jsx(he,{children:"File Name"}),e.jsx(ue,{children:e.jsx(G,{...xe,placeholder:"Enter file name..."})}),e.jsx(fe,{})]})}),e.jsx(me,{control:pe.control,name:"category",render:({field:xe})=>e.jsxs(de,{children:[e.jsx(he,{children:"Category"}),e.jsxs(se,{onValueChange:xe.onChange,defaultValue:xe.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{placeholder:"Select category..."})})}),e.jsx(te,{children:eu.map($e=>e.jsx(A,{value:$e.id,children:$e.name},$e.id))})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:pe.control,name:"fileType",render:({field:xe})=>e.jsxs(de,{children:[e.jsx(he,{children:"File Type"}),e.jsxs(se,{onValueChange:xe.onChange,defaultValue:xe.value,children:[e.jsx(ue,{children:e.jsx(ee,{children:e.jsx(ne,{})})}),e.jsxs(te,{children:[e.jsx(A,{value:"pdf",children:"PDF Document"}),e.jsx(A,{value:"image",children:"Image"}),e.jsx(A,{value:"doc",children:"Word Document"}),e.jsx(A,{value:"excel",children:"Excel Spreadsheet"})]})]}),e.jsx(fe,{})]})}),e.jsx(me,{control:pe.control,name:"tags",render:({field:xe})=>e.jsxs(de,{children:[e.jsx(he,{children:"Tags (Optional)"}),e.jsx(ue,{children:e.jsx(G,{...xe,placeholder:"Enter tags separated by commas..."})}),e.jsx(fe,{})]})}),e.jsx(me,{control:pe.control,name:"description",render:({field:xe})=>e.jsxs(de,{children:[e.jsx(he,{children:"Description (Optional)"}),e.jsx(ue,{children:e.jsx(mt,{...xe,placeholder:"Brief description of the document..."})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:Ce.isPending,children:Ce.isPending?"Uploading...":"Upload"})]})]})})]})}),e.jsx(Ke,{open:u,onOpenChange:m,children:e.jsxs(Ye,{className:"sm:max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{className:"flex items-center gap-2",children:[c&&oe(c.fileType),c&&tu(c)]}),e.jsx(Rt,{children:"Document preview and details"})]}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"}),e.jsx(z,{variant:"outline",className:"ml-2",children:(ge=eu.find(xe=>xe.id===c.category))==null?void 0:ge.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded by:"}),e.jsx("span",{className:"ml-2",children:c.uploadedBy})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Upload date:"}),e.jsx("span",{className:"ml-2",children:new Date(c.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"File type:"}),e.jsx("span",{className:"ml-2",children:V(c.mimeType,c.fileUrl)})]})]}),c.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Description:"}),e.jsx("p",{className:"mt-1",children:c.description})]}),c.tags&&c.tags.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.tags.map((xe,$e)=>e.jsx(z,{variant:"secondary",children:xe},$e))})]}),e.jsx("div",{className:"border rounded-lg bg-gray-50 overflow-hidden",children:(()=>{const xe=V(c.mimeType,c.fileUrl),$e=c.fileUrl;return xe==="IMAGE"||xe==="JPEG"||xe==="JPG"||xe==="PNG"?e.jsx("div",{className:"w-full max-h-[500px] flex items-center justify-center bg-white",children:e.jsx("img",{src:$e,alt:tu(c),className:"max-w-full max-h-[500px] object-contain","data-testid":"image-preview"})}):xe==="PDF"?e.jsx("div",{className:"w-full h-[500px]",children:e.jsx("iframe",{src:$e,className:"w-full h-full border-0",title:tu(c),"data-testid":"pdf-preview"})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(vt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Preview not available for this file type"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["File type: ",xe]})]})})()})]})]})}),e.jsx($T,{open:!!S,onOpenChange:xe=>!xe&&k(null),children:e.jsxs(_b,{children:[e.jsxs(Rb,{children:[e.jsx($b,{children:"Delete Document"}),e.jsxs(Fb,{children:['Are you sure you want to delete "',S&&tu(S),'"? This action cannot be undone.']})]}),e.jsxs(Ib,{children:[e.jsx(Bb,{children:"Cancel"}),e.jsx(Lb,{onClick:()=>{S&&$.mutate(S.id)},className:"bg-red-600 hover:bg-red-700",children:$.isPending?"Deleting...":"Delete"})]})]})})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(E,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx(Ft,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Document Center is only accessible to Admin, Portfolio Manager, and Owner roles."})]})})})}const Yw=[{value:"ownership",label:"Proof of Ownership",required:!0,icon:vt},{value:"floorplan",label:"Floorplan",required:!1,icon:vX},{value:"license",label:"Rental License",required:!0,icon:vt},{value:"insurance",label:"Property Insurance",required:!0,icon:vt},{value:"welcome",label:"Welcome Book / Guest Manual",required:!1,icon:i2},{value:"safety",label:"Safety Certificates",required:!1,icon:vt},{value:"hoa",label:"HOA / Residence Rules",required:!1,icon:i2}];function ZFe(){const[t,s]=b.useState(""),[n,r]=b.useState(null),{toast:a}=at(),i=yt(),{data:l}=ye({queryKey:["/api/owner/properties"]}),{data:o,isLoading:c}=ye({queryKey:["/api/owner/documents",t],enabled:!!t}),d=Ee({mutationFn:async({propertyId:j,category:g,files:y})=>{const v=new FormData;return v.append("propertyId",j),v.append("category",g),y.forEach((w,N)=>{v.append(`file${N}`,w)}),fetch("/api/owner/documents/upload",{method:"POST",body:v})},onSuccess:()=>{a({title:"Documents uploaded successfully",description:"Your documents have been uploaded and will be reviewed."}),i.invalidateQueries({queryKey:["/api/owner/documents",t]}),r(null)},onError:()=>{a({title:"Upload failed",description:"There was an error uploading your documents. Please try again.",variant:"destructive"}),r(null)}}),u=Ee({mutationFn:async j=>ve("DELETE",`/api/owner/documents/${j}`),onSuccess:()=>{a({title:"Document deleted",description:"The document has been successfully deleted."}),i.invalidateQueries({queryKey:["/api/owner/documents",t]})},onError:()=>{a({title:"Delete failed",description:"There was an error deleting the document. Please try again.",variant:"destructive"})}}),m=(j,g)=>{if(!g||!t)return;const y=Array.from(g).filter(v=>{const w=v.type.includes("pdf")||v.type.includes("image"),N=v.size<=10*1024*1024;return w&&N});if(y.length===0){a({title:"Invalid files",description:"Please select PDF or image files under 10MB each.",variant:"destructive"});return}r(j),d.mutate({propertyId:t,category:j,files:y})},h=j=>{switch(j){case"approved":return e.jsx(Fe,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(Ut,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ut,{className:"h-4 w-4 text-yellow-500"})}},x=j=>{const g=j==="approved"?"default":j==="rejected"?"destructive":"secondary";return e.jsx(z,{variant:g,children:j})},f=o?Yw.reduce((g,y)=>(o.filter(w=>w.category===y.value).length>0&&g.completed++,y.required&&g.required++,g),{completed:0,required:0}):{completed:0,required:0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Documents"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload and manage important documents for your properties"})]}),t&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completion Status"}),e.jsxs("div",{className:"text-lg font-semibold",children:[f.completed,"/",Yw.length," Categories"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.required," required categories"]})]})]}),e.jsxs(E,{children:[e.jsx(L,{children:e.jsx(B,{children:"Select Property"})}),e.jsx(D,{children:e.jsxs(se,{value:t,onValueChange:s,children:[e.jsx(ee,{className:"w-full",children:e.jsx(ne,{placeholder:"Choose a property to manage documents"})}),e.jsx(te,{children:l==null?void 0:l.map(j=>e.jsxs(A,{value:j.id.toString(),children:[j.name," - ",j.address]},j.id))})]})})]}),t&&e.jsx("div",{className:"grid gap-6",children:Yw.map(j=>{const g=j.icon,y=(o==null?void 0:o.filter(w=>w.category===j.value))||[],v=n===j.value;return e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx(B,{className:"text-lg",children:j.label}),j.required&&e.jsx(z,{variant:"outline",className:"text-xs",children:"Required"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:y.length>0&&e.jsxs(z,{variant:"outline",children:[y.length," file(s)"]})})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(mi,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:w=>m(j.value,w.target.files),className:"hidden",id:`upload-${j.value}`,disabled:v}),e.jsx("label",{htmlFor:`upload-${j.value}`,className:`cursor-pointer text-blue-600 hover:text-blue-500 ${v?"opacity-50 cursor-not-allowed":""}`,children:v?"Uploading...":"Click to upload files"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG up to 10MB each"})]})]}),y.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Uploaded Documents"}),y.map(w=>{var N;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vt,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.filename}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Uploaded ",new Date(w.uploadedAt).toLocaleDateString()]})]}),h(w.status),x(w.status)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Ke,{children:[e.jsx(cs,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Gt,{className:"h-4 w-4"})})}),e.jsxs(Ye,{className:"max-w-4xl max-h-[80vh]",children:[e.jsx(Qe,{children:e.jsx(Xe,{children:w.filename})}),e.jsx("div",{className:"flex-1 overflow-auto",children:(N=w.fileType)!=null&&N.includes("pdf")?e.jsx("iframe",{src:w.fileUrl,className:"w-full h-96",title:w.filename}):e.jsx("img",{src:w.fileUrl,alt:w.filename,className:"max-w-full h-auto"})})]})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>window.open(w.fileUrl,"_blank"),children:e.jsx(Ns,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>u.mutate(w.id),disabled:u.isPending,children:e.jsx(br,{className:"h-4 w-4"})})]})]},w.id)})]}),e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 p-3 rounded",children:[e.jsx("strong",{children:"Document Requirements:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[j.value==="ownership"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Title deed or purchase agreement"}),e.jsx("li",{children:" Property registration documents"})]}),j.value==="license"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Short-term rental license"}),e.jsx("li",{children:" Business registration certificate"})]}),j.value==="insurance"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Property insurance policy"}),e.jsx("li",{children:" Liability coverage documentation"})]}),j.value==="floorplan"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Architectural drawings or floor plans"}),e.jsx("li",{children:" Room layout with dimensions"})]}),j.value==="safety"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Fire safety certificates"}),e.jsx("li",{children:" Electrical safety inspections"})]}),j.value==="welcome"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Guest welcome instructions"}),e.jsx("li",{children:" Property usage guidelines"})]}),j.value==="hoa"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:" Homeowners association rules"}),e.jsx("li",{children:" Building or residence regulations"})]})]})]})]})]},j.value)})})]})}function j6(){const{toast:t}=at(),[s,n]=b.useState("bookings"),[r,a]=b.useState(null),[i,l]=b.useState("generate"),{data:o=[],isLoading:c}=ye({queryKey:["/api/reports"]}),d=Ee({mutationFn:async g=>ve("POST","/api/reports/generate",{type:g}),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/reports"]}),t({title:"Report Generated",description:"Your report has been generated successfully"})},onError:g=>{t({title:"Error",description:g.message||"Failed to generate report",variant:"destructive"})}}),u=Ee({mutationFn:async g=>ve("DELETE",`/api/reports/${g}`),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/reports"]}),a(null),t({title:"Report Deleted",description:"Report has been deleted successfully"})},onError:g=>{t({title:"Error",description:g.message||"Failed to delete report",variant:"destructive"})}}),m=()=>{d.mutate(s)},h=async g=>{try{const y=await fetch(`/api/reports/${g}/export`,{credentials:"include"});if(!y.ok)throw new Error("Export failed");const v=await y.blob(),w=window.URL.createObjectURL(v),N=document.createElement("a");N.href=w,N.download=`report_${g}.csv`,document.body.appendChild(N),N.click(),document.body.removeChild(N),window.URL.revokeObjectURL(w),t({title:"Export Successful",description:"Report has been exported to CSV"})}catch{t({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}},x=g=>{confirm("Are you sure you want to delete this report?")&&u.mutate(g)},p=[{value:"bookings",label:"Bookings Report",icon:vt},{value:"finances",label:"Financial Report",icon:Bt},{value:"tasks",label:"Tasks Report",icon:pn},{value:"properties",label:"Properties Report",icon:ap}],f=g=>{const y=p.find(v=>v.value===g);return(y==null?void 0:y.label)||g},j=g=>({bookings:"bg-blue-100 text-blue-800",finances:"bg-green-100 text-green-800",tasks:"bg-orange-100 text-orange-800",properties:"bg-purple-100 text-purple-800"})[g]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight","data-testid":"title-reports",children:"Reports & Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive reports and analytics"})]})}),e.jsxs(ft,{value:i,onValueChange:l,className:"space-y-6",children:[e.jsxs(xt,{children:[e.jsx(ae,{value:"generate","data-testid":"tab-generate",children:"Generate Report"}),e.jsx(ae,{value:"history","data-testid":"tab-history",children:"Report History"}),e.jsx(ae,{value:"view","data-testid":"tab-view",disabled:!r,children:"View Report"})]}),e.jsx(ie,{value:"generate",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Generate New Report"}),e.jsx(Me,{children:"Select a report type to generate comprehensive analytics"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map(g=>e.jsx(E,{className:`cursor-pointer transition-all hover:shadow-md ${s===g.value?"ring-2 ring-primary":""}`,onClick:()=>n(g.value),"data-testid":`card-report-type-${g.value}`,children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(g.icon,{className:"h-12 w-12 mx-auto mb-3 text-primary"}),e.jsx("h3",{className:"font-semibold",children:g.label})]})},g.value))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(se,{value:s,onValueChange:n,children:[e.jsx(ee,{className:"flex-1","data-testid":"select-report-type",children:e.jsx(ne,{placeholder:"Select report type"})}),e.jsx(te,{children:p.map(g=>e.jsx(A,{value:g.value,children:g.label},g.value))})]}),e.jsx(M,{onClick:m,disabled:d.isPending,"data-testid":"button-generate-report",children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vt,{className:"mr-2 h-4 w-4"}),"Generate Report"]})})]})]})]})}),e.jsx(ie,{value:"history",className:"space-y-4",children:e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Report History"}),e.jsx(Me,{children:"View and manage previously generated reports"})]}),e.jsx(D,{children:c?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(vs,{className:"h-8 w-8 animate-spin text-primary"})}):o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(vt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No reports generated yet"}),e.jsx("p",{className:"text-sm",children:"Generate your first report to get started"})]}):e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Report Title"}),e.jsx(Re,{children:"Type"}),e.jsx(Re,{children:"Generated"}),e.jsx(Re,{className:"text-right",children:"Actions"})]})}),e.jsx(yn,{children:o.map(g=>e.jsxs(Ot,{"data-testid":`row-report-${g.id}`,children:[e.jsx(Oe,{className:"font-medium",children:g.title}),e.jsx(Oe,{children:e.jsx(z,{className:j(g.type),children:f(g.type)})}),e.jsx(Oe,{children:ut(new Date(g.createdAt),"MMM dd, yyyy HH:mm")}),e.jsxs(Oe,{className:"text-right space-x-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{a(g),l("view")},"data-testid":`button-view-${g.id}`,children:[e.jsx(vt,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>h(g.id),"data-testid":`button-export-${g.id}`,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>x(g.id),"data-testid":`button-delete-${g.id}`,children:[e.jsx(br,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},g.id))})]})})]})}),e.jsx(ie,{value:"view",className:"space-y-4",children:r&&e.jsxs(E,{children:[e.jsx(L,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(B,{children:r.title}),e.jsxs(Me,{children:["Generated on ",ut(new Date(r.createdAt),"MMMM dd, yyyy at HH:mm")]})]}),e.jsxs(M,{variant:"outline",onClick:()=>h(r.id),"data-testid":"button-export-current",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),e.jsxs(D,{className:"space-y-6",children:[r.data.summary&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(r.data.summary).map(([g,y])=>e.jsx(E,{children:e.jsxs(D,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:g.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-2xl font-bold",children:typeof y=="number"?y.toLocaleString():y})]})},g))}),r.data.details&&r.data.details.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Detailed Data"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsx(Ot,{children:Object.keys(r.data.details[0]).map(g=>e.jsx(Re,{className:"capitalize",children:g.replace(/([A-Z])/g," $1").trim()},g))})}),e.jsx(yn,{children:r.data.details.slice(0,10).map((g,y)=>e.jsx(Ot,{children:Object.values(g).map((v,w)=>e.jsx(Oe,{children:typeof v=="object"?JSON.stringify(v):String(v)},w))},y))})]}),r.data.details.length>10&&e.jsxs("div",{className:"p-3 text-center text-sm text-muted-foreground bg-muted",children:["Showing 10 of ",r.data.details.length," records. Export to CSV to view all."]})]})]})]})]})})]})]})}function b6(){const{toast:t}=at(),[s,n]=b.useState(!1),[r,a]=b.useState(!1),[i,l]=b.useState(null),[o,c]=b.useState({name:"",description:"",trigger:"",action:"",schedule:""}),{data:d=[],isLoading:u}=ye({queryKey:["/api/automations"],refetchOnWindowFocus:!1,staleTime:3e4}),m=Ee({mutationFn:async C=>ve("POST","/api/automations",C),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/automations"]}),n(!1),f(),t({title:"Automation Created",description:"Your automation rule has been created successfully"})},onError:C=>{t({title:"Error",description:C.message||"Failed to create automation",variant:"destructive"})}}),h=Ee({mutationFn:async({id:C,data:P})=>ve("PUT",`/api/automations/${C}`,P),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/automations"]}),a(!1),l(null),f(),t({title:"Automation Updated",description:"Your automation rule has been updated successfully"})},onError:C=>{t({title:"Error",description:C.message||"Failed to update automation",variant:"destructive"})}}),x=Ee({mutationFn:async({id:C,isActive:P})=>ve("PATCH",`/api/automations/${C}/toggle`,{isActive:P}),onMutate:async({id:C,isActive:P})=>{await Bs.cancelQueries({queryKey:["/api/automations"]});const $=Bs.getQueryData(["/api/automations"]);return Bs.setQueryData(["/api/automations"],V=>V&&V.map(I=>I.id===C?{...I,isActive:P}:I)),{previousAutomations:$}},onSuccess:C=>{Bs.setQueryData(["/api/automations"],P=>P&&P.map($=>$.id===C.id?C:$)),t({title:"Automation Updated",description:"Automation status has been updated"})},onError:(C,P,$)=>{Bs.setQueryData(["/api/automations"],$==null?void 0:$.previousAutomations),t({title:"Error",description:C.message||"Failed to toggle automation",variant:"destructive"})}}),p=Ee({mutationFn:async C=>ve("DELETE",`/api/automations/${C}`),onSuccess:()=>{Bs.invalidateQueries({queryKey:["/api/automations"]}),t({title:"Automation Deleted",description:"Automation rule has been deleted successfully"})},onError:C=>{t({title:"Error",description:C.message||"Failed to delete automation",variant:"destructive"})}}),f=()=>{c({name:"",description:"",trigger:"",action:"",schedule:""})},j=()=>{if(!o.name||!o.trigger||!o.action){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}m.mutate(o)},g=C=>{l(C),c({name:C.name,description:C.description||"",trigger:C.trigger,action:C.action,schedule:C.schedule||""}),a(!0)},y=()=>{i&&h.mutate({id:i.id,data:o})},v=C=>{confirm("Are you sure you want to delete this automation?")&&p.mutate(C)},w=(C,P)=>{x.mutate({id:C,isActive:P})},N=[{value:"booking_due",label:"Booking Check-in Due",icon:et},{value:"task_overdue",label:"Task Overdue",icon:xn},{value:"payment_pending",label:"Payment Pending",icon:Gi},{value:"utility_threshold",label:"Utility Threshold Exceeded",icon:ns}],S=[{value:"send_email",label:"Send Email",icon:Gi},{value:"send_sms",label:"Send SMS",icon:Ea},{value:"create_task",label:"Create Task",icon:ni},{value:"send_notification",label:"Send Notification",icon:xn}],k=C=>{const P=N.find(V=>V.value===C),$=(P==null?void 0:P.icon)||et;return e.jsx($,{className:"h-4 w-4"})},T=C=>{const P=S.find(V=>V.value===C),$=(P==null?void 0:P.icon)||xn;return e.jsx($,{className:"h-4 w-4"})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight","data-testid":"title-automation",children:"Automation & Alerts"}),e.jsx("p",{className:"text-muted-foreground",children:"Smart reminders, AI insights, and automated property management workflows"})]}),e.jsxs(Ke,{open:s,onOpenChange:n,children:[e.jsx(cs,{asChild:!0,children:e.jsxs(M,{"data-testid":"button-create-automation",children:[e.jsx(bt,{className:"mr-2 h-4 w-4"}),"Create Automation"]})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Create New Automation"}),e.jsx(Rt,{children:"Set up a new automation rule for your property management"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"name",children:"Name *"}),e.jsx(G,{id:"name",placeholder:"e.g., Send check-in reminder",value:o.name,onChange:C=>c({...o,name:C.target.value}),"data-testid":"input-automation-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"description",children:"Description"}),e.jsx(mt,{id:"description",placeholder:"Describe what this automation does",value:o.description,onChange:C=>c({...o,description:C.target.value}),"data-testid":"input-automation-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"trigger",children:"Trigger *"}),e.jsxs(se,{value:o.trigger,onValueChange:C=>c({...o,trigger:C}),children:[e.jsx(ee,{"data-testid":"select-trigger",children:e.jsx(ne,{placeholder:"Select trigger"})}),e.jsx(te,{children:N.map(C=>e.jsx(A,{value:C.value,children:C.label},C.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"action",children:"Action *"}),e.jsxs(se,{value:o.action,onValueChange:C=>c({...o,action:C}),children:[e.jsx(ee,{"data-testid":"select-action",children:e.jsx(ne,{placeholder:"Select action"})}),e.jsx(te,{children:S.map(C=>e.jsx(A,{value:C.value,children:C.label},C.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"schedule",children:"Schedule (Optional)"}),e.jsx(G,{id:"schedule",placeholder:"e.g., daily, weekly, or cron expression",value:o.schedule,onChange:C=>c({...o,schedule:C.target.value}),"data-testid":"input-schedule"})]}),e.jsx(M,{onClick:j,className:"w-full",disabled:m.isPending,"data-testid":"button-submit-create",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Automation"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium text-muted-foreground",children:"Total Rules"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium text-muted-foreground",children:"Active"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(C=>C.isActive).length})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium text-muted-foreground",children:"Inactive"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:d.filter(C=>!C.isActive).length})})]}),e.jsxs(E,{children:[e.jsx(L,{className:"pb-3",children:e.jsx(B,{className:"text-sm font-medium text-muted-foreground",children:"Total Triggers"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.reduce((C,P)=>C+P.triggerCount,0)})})]})]}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(B,{children:"Automation Rules"}),e.jsx(Me,{children:"Manage your automated workflows and alerts"})]}),e.jsx(D,{children:u?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(vs,{className:"h-8 w-8 animate-spin text-primary"})}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ns,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No automation rules created yet"}),e.jsx("p",{className:"text-sm",children:"Create your first automation to get started"})]}):e.jsxs(gn,{children:[e.jsx(vn,{children:e.jsxs(Ot,{children:[e.jsx(Re,{children:"Name"}),e.jsx(Re,{children:"Trigger"}),e.jsx(Re,{children:"Action"}),e.jsx(Re,{children:"Triggered"}),e.jsx(Re,{children:"Status"}),e.jsx(Re,{className:"text-right",children:"Actions"})]})}),e.jsx(yn,{children:d.map(C=>{var P,$;return e.jsxs(Ot,{"data-testid":`row-automation-${C.id}`,children:[e.jsx(Oe,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:C.name}),C.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:C.description})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[k(C.trigger),e.jsx("span",{className:"text-sm",children:((P=N.find(V=>V.value===C.trigger))==null?void 0:P.label)||C.trigger})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[T(C.action),e.jsx("span",{className:"text-sm",children:(($=S.find(V=>V.value===C.action))==null?void 0:$.label)||C.action})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[C.triggerCount," times"]}),C.lastTriggered&&e.jsxs("div",{className:"text-muted-foreground",children:["Last: ",ut(new Date(C.lastTriggered),"MMM dd, HH:mm")]})]})}),e.jsx(Oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{checked:C.isActive,onCheckedChange:V=>w(C.id,V),"data-testid":`switch-active-${C.id}`}),e.jsx(z,{variant:C.isActive?"default":"secondary",children:C.isActive?"Active":"Inactive"})]})}),e.jsxs(Oe,{className:"text-right space-x-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>g(C),"data-testid":`button-edit-${C.id}`,children:e.jsx(jr,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>v(C.id),"data-testid":`button-delete-${C.id}`,children:e.jsx(br,{className:"h-4 w-4"})})]})]},C.id)})})]})})]}),e.jsx(Ke,{open:r,onOpenChange:a,children:e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(Xe,{children:"Edit Automation"}),e.jsx(Rt,{children:"Update your automation rule settings"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"edit-name",children:"Name *"}),e.jsx(G,{id:"edit-name",value:o.name,onChange:C=>c({...o,name:C.target.value}),"data-testid":"input-edit-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"edit-description",children:"Description"}),e.jsx(mt,{id:"edit-description",value:o.description,onChange:C=>c({...o,description:C.target.value}),"data-testid":"input-edit-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"edit-trigger",children:"Trigger *"}),e.jsxs(se,{value:o.trigger,onValueChange:C=>c({...o,trigger:C}),children:[e.jsx(ee,{"data-testid":"select-edit-trigger",children:e.jsx(ne,{})}),e.jsx(te,{children:N.map(C=>e.jsx(A,{value:C.value,children:C.label},C.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"edit-action",children:"Action *"}),e.jsxs(se,{value:o.action,onValueChange:C=>c({...o,action:C}),children:[e.jsx(ee,{"data-testid":"select-edit-action",children:e.jsx(ne,{})}),e.jsx(te,{children:S.map(C=>e.jsx(A,{value:C.value,children:C.label},C.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"edit-schedule",children:"Schedule (Optional)"}),e.jsx(G,{id:"edit-schedule",value:o.schedule,onChange:C=>c({...o,schedule:C.target.value}),"data-testid":"input-edit-schedule"})]}),e.jsx(M,{onClick:y,className:"w-full",disabled:h.isPending,"data-testid":"button-submit-update",children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Automation"})]})]})})]})}function JFe(){const{user:t,isLoading:s}=_a();return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"text-lg font-medium text-blue-700",children:"Loading HostPilotPro..."})]})}):t?e.jsxs("div",{className:"flex min-h-screen bg-background",children:[e.jsx(xee,{}),e.jsxs(U1,{children:[e.jsx(Ie,{path:"/",component:Foe}),e.jsx(Ie,{path:"/properties",component:Loe}),e.jsx(Ie,{path:"/property/:id/edit",component:eRe}),e.jsx(Ie,{path:"/property/:id",component:J_e}),e.jsx(Ie,{path:"/tasks",component:aoe}),e.jsx(Ie,{path:"/bookings",component:Hoe}),e.jsx(Ie,{path:"/services",component:ace}),e.jsx(Ie,{path:"/finances",component:ice}),e.jsx(Ie,{path:"/advanced-analytics",component:sRe}),e.jsx(Ie,{path:"/settings",component:RE}),e.jsx(Ie,{path:"/profile",component:xce}),e.jsx(Ie,{path:"/help",component:BE}),e.jsx(Ie,{path:"/dashboard-hub",component:z$e}),e.jsx(Ie,{path:"/property-hub",component:X$e}),e.jsx(Ie,{path:"/finance-hub",component:tFe}),e.jsx(Ie,{path:"/enhanced-finances",children:()=>{const n=b.lazy(()=>Un(()=>import("./EnhancedFinances-D1ozXyAx.js"),[]));return e.jsx(b.Suspense,{fallback:e.jsx("div",{children:"Loading Enhanced Finance Analytics..."}),children:e.jsx(n,{})})}}),e.jsx(Ie,{path:"/admin/finance",component:b.lazy(()=>Un(()=>import("./AdminFinance-B8DM10cS.js"),[]))}),e.jsx(Ie,{path:"/system-hub",component:jFe}),e.jsx(Ie,{path:"/system-hub-old",component:gFe}),e.jsx(Ie,{path:"/enhanced-admin-dashboard",component:KFe}),e.jsx(Ie,{path:"/simple-filtered-financial-dashboard",component:bee}),e.jsx(Ie,{path:"/filtered-property-dashboard",component:Wte}),e.jsx(Ie,{path:"/multi-property-calendar",component:tRe}),e.jsx(Ie,{path:"/maintenance-suggestions",component:gce}),e.jsx(Ie,{path:"/checkin-checkout-workflow",component:XN}),e.jsx(Ie,{path:"/daily-operations",component:$E}),e.jsx(Ie,{path:"/task-overview",component:p$e}),e.jsx(Ie,{path:"/daily-operations-overview",component:f$e}),e.jsx(Ie,{path:"/sandbox-testing",component:kU}),e.jsx(Ie,{path:"/guest-portal-smart-requests",component:Ace}),e.jsx(Ie,{path:"/guest-activity-recommendations",component:Ece}),e.jsx(Ie,{path:"/upsell-recommendations-management",component:P$e}),e.jsx(Ie,{path:"/admin/api-connections",component:_U}),e.jsx(Ie,{path:"/admin/organization-branding",component:Zce}),e.jsx(Ie,{path:"/admin/legal-templates",component:Jce}),e.jsx(Ie,{path:"/admin/marketing-pack-management",component:ede}),e.jsx(Ie,{path:"/admin/ai-ops-anomalies",component:RU}),e.jsx(Ie,{path:"/admin/user-management",component:$2}),e.jsx(Ie,{path:"/user-management",component:VE}),e.jsx(Ie,{path:"/user-management/edit",component:VE}),e.jsx(Ie,{path:"/legacy-user-management",component:$2}),e.jsx(Ie,{path:"/admin/activity-log",component:F2}),e.jsx(Ie,{path:"/owner-target-upgrade-tracker",component:Hce}),e.jsx(Ie,{path:"/auto-scheduling-recurring-task-generator",component:sde}),e.jsx(Ie,{path:"/ota-revenue-net-payout-calculation",component:nde}),e.jsx(Ie,{path:"/ota-payout-logic-smart-revenue",component:rde}),e.jsx(Ie,{path:"/loyalty-guest-tracker",component:zE}),e.jsx(Ie,{path:"/loyalty-tracker",component:zE}),e.jsx(Ie,{path:"/invoice-generator",component:qE}),e.jsx(Ie,{path:"/invoices",component:qE}),e.jsx(Ie,{path:"/staff-advance-salary-overtime-tracker",component:ade}),e.jsx(Ie,{path:"/staff-wallet-petty-cash",component:cRe}),e.jsx(Ie,{path:"/staff-cash-collection",component:dRe}),e.jsx(Ie,{path:"/staff-expense-management",component:uRe}),e.jsx(Ie,{path:"/admin/staff-permission-management",component:mRe}),e.jsx(Ie,{path:"/system-wide-demo-integration",component:ide}),e.jsx(Ie,{path:"/maintenance-log-warranty-tracker",component:lde}),e.jsx(Ie,{path:"/staff-profile-payroll",component:ode}),e.jsx(Ie,{path:"/admin/system-integrity-check",component:IU}),e.jsx(Ie,{path:"/utility-tracker",component:dde}),e.jsx(Ie,{path:"/ai-notifications-reminders",component:$U}),e.jsx(Ie,{path:"/finance-engine",component:mde}),e.jsx(Ie,{path:"/property-appliances-management",component:x$e}),e.jsx(Ie,{path:"/alert-management",component:g$e}),e.jsx(Ie,{path:"/automation-management",component:jG}),e.jsx(Ie,{path:"/currency-tax-management",component:S$e}),e.jsx(Ie,{path:"/document-center",component:YFe}),e.jsx(Ie,{path:"/property-document-center",component:y6}),e.jsx(Ie,{path:"/property-documents-management",component:y6}),e.jsx(Ie,{path:"/property-document-upload",component:ZFe}),e.jsx(Ie,{path:"/ai-test",component:lRe}),e.jsx(Ie,{path:"/ai-features",component:oRe}),e.jsx(Ie,{path:"/retail-agent",component:SFe}),e.jsx(Ie,{path:"/referral-agent",component:KV}),e.jsx(Ie,{path:"/agent/hub",component:WV}),e.jsx(Ie,{path:"/agent/quote-generator",component:O$e}),e.jsx(Ie,{path:"/agent/commissions",component:M$e}),e.jsx(Ie,{path:"/agent/proposals",component:_$e}),e.jsx(Ie,{path:"/agent/media-download",component:B$e}),e.jsx(Ie,{path:"/agent/leaderboard",component:U$e}),e.jsx(Ie,{path:"/signup-request",component:vRe}),e.jsx(Ie,{path:"/admin/saas-management",component:S7}),e.jsx(Ie,{path:"/simple-settings",component:RE}),e.jsx(Ie,{path:"/help",component:Mce}),e.jsx(Ie,{path:"/simple-help",component:Oce}),e.jsx(Ie,{path:"/fast-help",component:BE}),e.jsx(Ie,{path:"/admin/additional-settings",component:wG}),e.jsx(Ie,{path:"/admin/upgraded-dashboard",component:yG}),e.jsx(Ie,{path:"/smart-pricing-performance-toolkit",component:u6}),e.jsx(Ie,{path:"/smart-pricing",component:u6}),e.jsx(Ie,{path:"/owner-invoicing-payouts",component:m6}),e.jsx(Ie,{path:"/owner-invoicing",component:m6}),e.jsx(Ie,{path:"/portfolio-manager-dashboard",component:OFe}),e.jsx(Ie,{path:"/owner-dashboard",component:LFe}),e.jsx(Ie,{path:"/guest-services",component:h6}),e.jsx(Ie,{path:"/guest-portal",component:h6}),e.jsx(Ie,{path:"/property-settings",component:x6}),e.jsx(Ie,{path:"/property-settings-module",component:x6}),e.jsx(Ie,{path:"/staff-operations",component:GR}),e.jsx(Ie,{path:"/staff-dashboard",component:GR}),e.jsx(Ie,{path:"/check-in-check-out",component:XN}),e.jsx(Ie,{path:"/checkin-checkout",component:XN}),e.jsx(Ie,{path:"/guest-checkin-checkout-tracker",component:IE}),e.jsx(Ie,{path:"/guest-check-in-check-out",component:IE}),e.jsx(Ie,{path:"/activity-logs",component:F2}),e.jsx(Ie,{path:"/daily-operations",component:$E}),e.jsx(Ie,{path:"/ai-bot",component:T$e}),e.jsx(Ie,{path:"/achievements",component:Z3e}),e.jsx(Ie,{path:"/salaries-wages",component:qw}),e.jsx(Ie,{path:"/staff-salaries",component:qw}),e.jsx(Ie,{path:"/admin/salaries-wages",component:qw}),e.jsx(Ie,{path:"/reports",component:j6}),e.jsx(Ie,{path:"/reports-analytics",component:j6}),e.jsx(Ie,{path:"/automation",component:b6}),e.jsx(Ie,{path:"/automation-alerts",component:b6}),e.jsx(Ie,{component:fce})]})]}):e.jsxs(U1,{children:[e.jsx(Ie,{path:"/login",component:hce}),e.jsx(Ie,{component:pce})]})}function eLe(){return b.useEffect(()=>{fee()},[]),e.jsx(WY,{client:Bs,children:e.jsx(gee,{children:e.jsx(mee,{children:e.jsxs(Df,{children:[e.jsx(hRe,{}),e.jsx(JFe,{}),e.jsx(SZ,{})]})})})})}window.addEventListener("error",t=>{console.error(" JS Error:",t.message,"at",t.filename,":",t.lineno)});window.addEventListener("unhandledrejection",t=>{console.error(" Unhandled Promise Rejection:",t.reason)});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("button").forEach(t=>{!(t.onclick||t.getAttribute("onclick")||t.hasAttribute("data-testid")||t.closest("form")||t.type==="submit"||t.getAttribute("aria-expanded")!==null)&&t.innerText.trim()&&!t.disabled&&console.warn(" Button may have no action:",t.innerText.trim())})},3e3)});q3(document.getElementById("root")).render(e.jsx(eLe,{}));export{yn as $,sC as A,z as B,E as C,Ns as D,Ym as E,Zi as F,Ar as G,Al as H,G as I,xC as J,gi as K,W as L,Em as M,Yn as N,ec as O,fu as P,Il as Q,Ss as R,se as S,Bt as T,Te as U,gn as V,vn as W,on as X,Xm as Y,Ot as Z,Re as _,D as a,Oe as a0,Ke as a1,cs as a2,Gt as a3,Ye as a4,Qe as a5,Xe as a6,et as a7,Fe as a8,Cf as a9,ns as aA,tF as aB,Ii as aC,At as aD,Z$ as aE,Wr as aF,fn as aG,wi as aH,Ws as aI,pn as aJ,wl as aK,Sa as aL,vt as aM,OX as aN,Jc as aO,Me as aP,ai as aQ,_d as aR,ii as aS,ln as aa,SD as ab,_X as ac,Vn as ad,Ht as ae,at as af,yt as ag,Ee as ah,ve as ai,Jt as aj,Sf as ak,jr as al,DX as am,bt as an,dt as ao,Nt as ap,hs as aq,ks as ar,Et as as,ws as at,Ko as au,G$ as av,Cr as aw,Ww as ax,qt as ay,yr as az,L as b,B as c,M as d,ee as e,ne as f,te as g,A as h,gu as i,e as j,ut as k,Ue as l,tt as m,Ic as n,Rc as o,Je as p,Ed as q,b as r,Ft as s,ft as t,ye as u,xt as v,ae as w,ie as x,xx as y,q_e as z};

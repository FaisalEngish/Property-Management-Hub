const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SimpleFilteredFinancialDashboard-AiMFq9LT.js","assets/vendor-DazevGLP.js","assets/utils-Bh8xMpiq.js","assets/FilteredPropertyDashboard-CrYE6uJQ.js","assets/Settings-DhwvhuW1.js","assets/AdminGodModeRoleManager-DbjtUSRd.js","assets/EnhancedFinances-DF88Magp.js","assets/AdminFinance-D5OW2Mkv.js"])))=>i.map(i=>d[i]);
import{r as v,a as _c,R as w0,b as ee,c as J$,d as Fm,g as ys}from"./vendor-DazevGLP.js";import{s as fr,e as Sl,a as ia,b as eF,c as wa,d as Hd,i as S0,f as Oi,g as Dr,h as rr,j as jh,k as La,l as tF,m as Fj,n as sF,o as et,p as Cl,q as rF,r as nF,t as aF,u as iF,v as sg,w as Vw,x as lF,y as dT,z as uT,A as C0,B as k0,C as oF,D as cF,E as mT,F as Kd,G as Lt,H as rg,I as Lj,J as dF}from"./utils-Bh8xMpiq.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var hT={exports:{}},dp={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uF=v,mF=Symbol.for("react.element"),hF=Symbol.for("react.fragment"),xF=Object.prototype.hasOwnProperty,pF=uF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fF={key:!0,ref:!0,__self:!0,__source:!0};function xT(t,s,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(n in s)xF.call(s,n)&&!fF.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:mF,type:t,key:i,ref:l,props:a,_owner:pF.current}}dp.Fragment=hF;dp.jsx=xT;dp.jsxs=xT;hT.exports=dp;var e=hT.exports,pT,qw=_c;pT=qw.createRoot,qw.hydrateRoot;const gF="modulepreload",jF=function(t){return"/"+t},Uw={},br=function(s,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");a=Promise.allSettled(r.map(c=>{if(c=jF(c),c in Uw)return;Uw[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":gF,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,x)=>{m.addEventListener("load",h),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})};function vF(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,a,i,l=[],o="",c=t.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(l.push(r),o+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),i=a.indexOf(".",1),l.push(a.substring(1,~n?n:~i?i:a.length)),o+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~n?"?":"")+"\\"+a.substring(i))):o+="/"+a;return{keys:l,pattern:new RegExp("^"+o+(s?"(?=$|/)":"/?$"),"i")}}var fT={exports:{}},gT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ko=v;function yF(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var bF=typeof Object.is=="function"?Object.is:yF,NF=Ko.useState,wF=Ko.useEffect,SF=Ko.useLayoutEffect,CF=Ko.useDebugValue;function kF(t,s){var r=s(),n=NF({inst:{value:r,getSnapshot:s}}),a=n[0].inst,i=n[1];return SF(function(){a.value=r,a.getSnapshot=s,ng(a)&&i({inst:a})},[t,r,s]),wF(function(){return ng(a)&&i({inst:a}),t(function(){ng(a)&&i({inst:a})})},[t]),CF(r),r}function ng(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!bF(t,r)}catch{return!0}}function PF(t,s){return s()}var AF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?PF:kF;gT.useSyncExternalStore=Ko.useSyncExternalStore!==void 0?Ko.useSyncExternalStore:AF;fT.exports=gT;var jT=fT.exports;const TF=w0.useInsertionEffect,DF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OF=DF?v.useLayoutEffect:v.useEffect,EF=TF||OF,vT=t=>{const s=v.useRef([t,(...r)=>s[0](...r)]).current;return EF(()=>{s[0]=t}),s[1]},MF="popstate",P0="pushState",A0="replaceState",RF="hashchange",zw=[MF,P0,A0,RF],_F=t=>{for(const s of zw)addEventListener(s,t);return()=>{for(const s of zw)removeEventListener(s,t)}},yT=(t,s)=>jT.useSyncExternalStore(_F,t,s),IF=()=>location.search,$F=({ssrSearch:t=""}={})=>yT(IF,()=>t),Hw=()=>location.pathname,FF=({ssrPath:t}={})=>yT(Hw,t?()=>t:Hw),LF=(t,{replace:s=!1,state:r=null}={})=>history[s?A0:P0](r,"",t),BF=(t={})=>[FF(t),LF],Kw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Kw]>"u"){for(const t of[P0,A0]){const s=history[t];history[t]=function(){const r=s.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,Kw,{value:!0})}const VF=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",bT=(t="")=>t==="/"?"":t,qF=(t,s)=>t[0]==="~"?t.slice(1):bT(s)+t,UF=(t="",s)=>VF(Bj(bT(t)),Bj(s)),zF=t=>t[0]==="?"?t.slice(1):t,Bj=t=>{try{return decodeURI(t)}catch{return t}},HF=t=>Bj(zF(t)),NT={hook:BF,searchHook:$F,parser:vF,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},wT=v.createContext(NT),Wl=()=>v.useContext(wT),ST={},CT=v.createContext(ST),kT=()=>v.useContext(CT),up=t=>{const[s,r]=t.hook(t);return[UF(t.base,s),vT((n,a)=>r(qF(n,t.base),a))]},or=()=>up(Wl()),KF=()=>{const t=Wl();return HF(t.searchHook(t))},T0=(t,s,r,n)=>{const{pattern:a,keys:i}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",n),l=a.exec(r)||[],[o,...c]=l;return o!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((m,h)=>[m,c[h]])):l.groups;let u={...c};return d&&Object.assign(u,d),u})(),...n?[o]:[]]:[!1,null]},GF=t=>T0(Wl().parser,t,or()[0]),WF=({children:t,...s})=>{const r=Wl(),n=s.hook?NT:r;let a=n;const[i,l]=s.ssrPath?.split("?")??[];l&&(s.ssrSearch=l,s.ssrPath=i),s.hrefs=s.hrefs??s.hook?.hrefs;let o=v.useRef({}),c=o.current,d=c;for(let u in n){const m=u==="base"?n[u]+(s[u]||""):s[u]||n[u];c===d&&m!==d[u]&&(o.current=d={...d}),d[u]=m,(m!==n[u]||m!==a[u])&&(a=d)}return v.createElement(wT.Provider,{value:a,children:t})},Gw=({children:t,component:s},r)=>s?v.createElement(s,{params:r}):typeof t=="function"?t(r):t,QF=t=>{let s=v.useRef(ST);const r=s.current;return s.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([n,a])=>a!==r[n])?t:r},Re=({path:t,nest:s,match:r,...n})=>{const a=Wl(),[i]=up(a),[l,o,c]=r??T0(a.parser,t,i,s),d=QF({...kT(),...o});if(!l)return null;const u=c?v.createElement(WF,{base:c},Gw(n,d)):Gw(n,d);return v.createElement(CT.Provider,{value:d,children:u})},us=v.forwardRef((t,s)=>{const r=Wl(),[n,a]=up(r),{to:i="",href:l=i,onClick:o,asChild:c,children:d,className:u,replace:m,state:h,...x}=t,f=vT(g=>{g.ctrlKey||g.metaKey||g.altKey||g.shiftKey||g.button!==0||(o?.(g),g.defaultPrevented||(g.preventDefault(),a(l,t)))}),p=r.hrefs(l[0]==="~"?l.slice(1):r.base+l,r);return c&&v.isValidElement(d)?v.cloneElement(d,{onClick:f,href:p}):v.createElement("a",{...x,onClick:f,href:p,className:u?.call?u(n===l):u,children:d,ref:s})}),PT=t=>Array.isArray(t)?t.flatMap(s=>PT(s&&s.type===v.Fragment?s.props.children:s)):[t],Vj=({children:t,location:s})=>{const r=Wl(),[n]=up(r);for(const a of PT(t)){let i=0;if(v.isValidElement(a)&&(i=T0(r.parser,a.props.path,s||n,a.props.nest))[0])return v.cloneElement(a,{match:i})}return null};var Ic=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ol=typeof window>"u"||"Deno"in globalThis;function Ir(){}function YF(t,s){return typeof t=="function"?t(s):t}function qj(t){return typeof t=="number"&&t>=0&&t!==1/0}function AT(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Ei(t,s){return typeof t=="function"?t(s):t}function Vn(t,s){return typeof t=="function"?t(s):t}function Ww(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=t;if(l){if(n){if(s.queryHash!==D0(l,s.options))return!1}else if(!Gd(s.queryKey,l))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||a&&a!==s.state.fetchStatus||i&&!i(s))}function Qw(t,s){const{exact:r,status:n,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(El(s.options.mutationKey)!==El(i))return!1}else if(!Gd(s.options.mutationKey,i))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function D0(t,s){return(s?.queryKeyHashFn||El)(t)}function El(t){return JSON.stringify(t,(s,r)=>Uj(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Gd(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>Gd(t[r],s[r])):!1}function O0(t,s){if(t===s)return t;const r=Yw(t)&&Yw(s);if(r||Uj(t)&&Uj(s)){const n=r?t:Object.keys(t),a=n.length,i=r?s:Object.keys(s),l=i.length,o=r?[]:{},c=new Set(n);let d=0;for(let u=0;u<l;u++){const m=r?u:i[u];(!r&&c.has(m)||r)&&t[m]===void 0&&s[m]===void 0?(o[m]=void 0,d++):(o[m]=O0(t[m],s[m]),o[m]===t[m]&&t[m]!==void 0&&d++)}return a===l&&d===a?t:o}return s}function Dh(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Yw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Uj(t){if(!Xw(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Xw(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Xw(t){return Object.prototype.toString.call(t)==="[object Object]"}function XF(t){return new Promise(s=>{setTimeout(s,t)})}function zj(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?O0(t,s):s}function ZF(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function JF(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var E0=Symbol();function TT(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===E0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function DT(t,s){return typeof t=="function"?t(...s):!!t}var eL=class extends Ic{#t;#e;#s;constructor(){super(),this.#s=t=>{if(!Ol&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},M0=new eL,tL=class extends Ic{#t=!0;#e;#s;constructor(){super(),this.#s=t=>{if(!Ol&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#t}},Oh=new tL;function Hj(){let t,s;const r=new Promise((a,i)=>{t=a,s=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}function sL(t){return Math.min(1e3*2**t,3e4)}function OT(t){return(t??"online")==="online"?Oh.isOnline():!0}var ET=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function ag(t){return t instanceof ET}function MT(t){let s=!1,r=0,n=!1,a;const i=Hj(),l=p=>{n||(h(new ET(p)),t.abort?.())},o=()=>{s=!0},c=()=>{s=!1},d=()=>M0.isFocused()&&(t.networkMode==="always"||Oh.isOnline())&&t.canRun(),u=()=>OT(t.networkMode)&&t.canRun(),m=p=>{n||(n=!0,t.onSuccess?.(p),a?.(),i.resolve(p))},h=p=>{n||(n=!0,t.onError?.(p),a?.(),i.reject(p))},x=()=>new Promise(p=>{a=g=>{(n||d())&&p(g)},t.onPause?.()}).then(()=>{a=void 0,n||t.onContinue?.()}),f=()=>{if(n)return;let p;const g=r===0?t.initialPromise:void 0;try{p=g??t.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(m).catch(y=>{if(n)return;const b=t.retry??(Ol?0:3),j=t.retryDelay??sL,w=typeof j=="function"?j(r,y):j,N=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(s||!N){h(y);return}r++,t.onFail?.(r,y),XF(w).then(()=>d()?void 0:x()).then(()=>{s?h(y):f()})})};return{promise:i,cancel:l,continue:()=>(a?.(),i),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?f():x().then(f),i)}}var rL=t=>setTimeout(t,0);function nL(){let t=[],s=0,r=o=>{o()},n=o=>{o()},a=rL;const i=o=>{s?t.push(o):a(()=>{r(o)})},l=()=>{const o=t;t=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var nr=nL(),RT=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qj(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ol?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},aL=class extends RT{#t;#e;#s;#r;#n;#i;#l;constructor(t){super(),this.#l=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#s=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=iL(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=zj(this.state.data,t,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#a({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#n?.promise;return this.#n?.cancel(t),s?s.then(Ir).catch(Ir):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>Vn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===E0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ei(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!AT(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#n&&(this.#l?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#l=!0,r.signal)})},a=()=>{const c=TT(this.options,s),u=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#l=!1,this.options.persister?this.options.persister(c,u,this):c(u)},l=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:a};return n(c),c})();this.options.behavior?.onFetch(l,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta});const o=c=>{ag(c)&&c.silent||this.#a({type:"error",error:c}),ag(c)||(this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#n=MT({initialPromise:s?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:c=>{if(c===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(d){o(d);return}this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:o,onFail:(c,d)=>{this.#a({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,..._T(r.data,this.options),fetchMeta:t.meta??null};case"success":return this.#e=void 0,{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return ag(n)&&n.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),nr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function _T(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OT(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function iL(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var lL=class extends Ic{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,s,r){const n=s.queryKey,a=s.queryHash??D0(n,s);let i=this.get(a);return i||(i=new aL({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#t.get(t.queryHash);s&&(t.destroy(),s===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){nr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ww(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Ww(t,r)):s}notify(t){nr.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){nr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){nr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},oL=class extends RT{#t;#e;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||IT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})};this.#s=MT({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#r({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#s.canStart();try{if(r)s();else{this.#r({type:"pending",variables:t,isPaused:n}),await this.#e.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const a=await this.#s.start();return await this.#e.config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await this.#e.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),this.#r({type:"success",data:a}),a}catch(a){try{throw await this.#e.config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await this.#e.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{this.#r({type:"error",error:a})}}finally{this.#e.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),nr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function IT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cL=class extends Ic{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(t,s,r){const n=new oL({mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){this.#t.add(t);const s=Lm(t);if(typeof s=="string"){const r=this.#e.get(s);r?r.push(t):this.#e.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const s=Lm(t);if(typeof s=="string"){const r=this.#e.get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#e.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=Lm(t);if(typeof s=="string"){const n=this.#e.get(s)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=Lm(t);return typeof s=="string"?this.#e.get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){nr.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Qw(s,r))}findAll(t={}){return this.getAll().filter(s=>Qw(t,s))}notify(t){nr.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return nr.batch(()=>Promise.all(t.map(s=>s.continue().catch(Ir))))}};function Lm(t){return t.options.scope?.id}function Zw(t){return{onFetch:(s,r)=>{const n=s.options,a=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],l=s.state.data?.pageParams||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const m=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},h=TT(s.options,s.fetchOptions),x=async(f,p,g)=>{if(u)return Promise.reject();if(p==null&&f.pages.length)return Promise.resolve(f);const b=(()=>{const S={client:s.client,queryKey:s.queryKey,pageParam:p,direction:g?"backward":"forward",meta:s.options.meta};return m(S),S})(),j=await h(b),{maxPages:w}=s.options,N=g?JF:ZF;return{pages:N(f.pages,j,w),pageParams:N(f.pageParams,p,w)}};if(a&&i.length){const f=a==="backward",p=f?dL:Jw,g={pages:i,pageParams:l},y=p(n,g);o=await x(g,y,f)}else{const f=t??i.length;do{const p=c===0?l[0]??n.initialPageParam:Jw(n,o);if(c>0&&p==null)break;o=await x(o,p),c++}while(c<f)}return o};s.options.persister?s.fetchFn=()=>s.options.persister?.(d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=d}}}function Jw(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function dL(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var uL=class{#t;#e;#s;#r;#n;#i;#l;#a;constructor(t={}){this.#t=t.queryCache||new lL,this.#e=t.mutationCache||new cL,this.#s=t.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=M0.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=Oh.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#t.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#t.build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Ei(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),i=this.#t.get(n.queryHash)?.state.data,l=YF(s,i);if(l!==void 0)return this.#t.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,s,r){return nr.batch(()=>this.#t.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#t.get(s.queryHash)?.state}removeQueries(t){const s=this.#t;nr.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#t;return nr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=nr.batch(()=>this.#t.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(Ir).catch(Ir)}invalidateQueries(t,s={}){return nr.batch(()=>(this.#t.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=nr.batch(()=>this.#t.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ir)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ir)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#t.build(this,s);return r.isStaleByTime(Ei(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ir).catch(Ir)}fetchInfiniteQuery(t){return t.behavior=Zw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ir).catch(Ir)}ensureInfiniteQueryData(t){return t.behavior=Zw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Oh.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#r.set(El(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(n=>{Gd(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){this.#n.set(El(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#n.values()],r={};return s.forEach(n=>{Gd(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=D0(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===E0&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},mL=class extends Ic{constructor(t,s){super(),this.options=s,this.#t=t,this.#a=null,this.#l=Hj(),this.options.experimental_prefetchInRender||this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}#t;#e=void 0;#s=void 0;#r=void 0;#n;#i;#l;#a;#p;#m;#h;#c;#d;#o;#x=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),e1(this.#e,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kj(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kj(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#b(),this.#e.removeObserver(this)}setOptions(t){const s=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vn(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),s._defaulted&&!Dh(this.options,s)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&t1(this.#e,r,this.options,s)&&this.#u(),this.updateResult(),n&&(this.#e!==r||Vn(this.options.enabled,this.#e)!==Vn(s.enabled,this.#e)||Ei(this.options.staleTime,this.#e)!==Ei(s.staleTime,this.#e))&&this.#f();const a=this.#g();n&&(this.#e!==r||Vn(this.options.enabled,this.#e)!==Vn(s.enabled,this.#e)||a!==this.#o)&&this.#j(a)}getOptimisticResult(t){const s=this.#t.getQueryCache().build(this.#t,t),r=this.createResult(s,t);return xL(this,r)&&(this.#r=r,this.#i=this.options,this.#n=this.#e.state),r}getCurrentResult(){return this.#r}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s?.(n),Reflect.get(r,n))})}trackProp(t){this.#x.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#t.defaultQueryOptions(t),r=this.#t.getQueryCache().build(this.#t,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(t){this.#N();let s=this.#e.fetch(this.options,t);return t?.throwOnError||(s=s.catch(Ir)),s}#f(){this.#y();const t=Ei(this.options.staleTime,this.#e);if(Ol||this.#r.isStale||!qj(t))return;const r=AT(this.#r.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#j(t){this.#b(),this.#o=t,!(Ol||Vn(this.options.enabled,this.#e)===!1||!qj(this.#o)||this.#o===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||M0.isFocused())&&this.#u()},this.#o))}#v(){this.#f(),this.#j(this.#g())}#y(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#e,n=this.options,a=this.#r,i=this.#n,l=this.#i,c=t!==r?t.state:this.#s,{state:d}=t;let u={...d},m=!1,h;if(s._optimisticResults){const P=this.hasListeners(),k=!P&&e1(t,s),R=P&&t1(t,r,s,n);(k||R)&&(u={...u,..._T(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:x,errorUpdatedAt:f,status:p}=u;h=u.data;let g=!1;if(s.placeholderData!==void 0&&h===void 0&&p==="pending"){let P;a?.isPlaceholderData&&s.placeholderData===l?.placeholderData?(P=a.data,g=!0):P=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,P!==void 0&&(p="success",h=zj(a?.data,P,s),m=!0)}if(s.select&&h!==void 0&&!g)if(a&&h===i?.data&&s.select===this.#p)h=this.#m;else try{this.#p=s.select,h=s.select(h),h=zj(a?.data,h,s),this.#m=h,this.#a=null}catch(P){this.#a=P}this.#a&&(x=this.#a,h=this.#m,f=Date.now(),p="error");const y=u.fetchStatus==="fetching",b=p==="pending",j=p==="error",w=b&&y,N=h!==void 0,O={status:p,fetchStatus:u.fetchStatus,isPending:b,isSuccess:p==="success",isError:j,isInitialLoading:w,isLoading:w,data:h,dataUpdatedAt:u.dataUpdatedAt,error:x,errorUpdatedAt:f,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:j&&!N,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&N,isStale:R0(t,s),refetch:this.refetch,promise:this.#l};if(this.options.experimental_prefetchInRender){const P=F=>{O.status==="error"?F.reject(O.error):O.data!==void 0&&F.resolve(O.data)},k=()=>{const F=this.#l=O.promise=Hj();P(F)},R=this.#l;switch(R.status){case"pending":t.queryHash===r.queryHash&&P(R);break;case"fulfilled":(O.status==="error"||O.data!==R.value)&&k();break;case"rejected":(O.status!=="error"||O.error!==R.reason)&&k();break}}return O}updateResult(){const t=this.#r,s=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#e),Dh(s,t))return;this.#r=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#x.size)return!0;const i=new Set(a??this.#x);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(l=>{const o=l;return this.#r[o]!==t[o]&&i.has(o)})};this.#w({listeners:r()})}#N(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;const s=this.#e;this.#e=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(t){nr.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function hL(t,s){return Vn(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function e1(t,s){return hL(t,s)||t.state.data!==void 0&&Kj(t,s,s.refetchOnMount)}function Kj(t,s,r){if(Vn(s.enabled,t)!==!1&&Ei(s.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&R0(t,s)}return!1}function t1(t,s,r,n){return(t!==s||Vn(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&R0(t,r)}function R0(t,s){return Vn(s.enabled,t)!==!1&&t.isStaleByTime(Ei(s.staleTime,t))}function xL(t,s){return!Dh(t.getCurrentResult(),s)}var pL=class extends Ic{#t;#e=void 0;#s;#r;constructor(s,r){super(),this.#t=s,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#t.defaultMutationOptions(s),Dh(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&El(r.mutationKey)!==El(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#n(),this.#i(s)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(s,r){return this.#r=r,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(s)}#n(){const s=this.#s?.state??IT();this.#e={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#i(s){nr.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;s?.type==="success"?(this.#r.onSuccess?.(s.data,r,n),this.#r.onSettled?.(s.data,null,r,n)):s?.type==="error"&&(this.#r.onError?.(s.error,r,n),this.#r.onSettled?.(void 0,s.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},$T=v.createContext(void 0),pt=t=>{const s=v.useContext($T);if(t)return t;if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},fL=({client:t,children:s})=>(v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx($T.Provider,{value:t,children:s})),FT=v.createContext(!1),gL=()=>v.useContext(FT);FT.Provider;function jL(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var vL=v.createContext(jL()),yL=()=>v.useContext(vL),bL=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},NL=t=>{v.useEffect(()=>{t.clearReset()},[t])},wL=({result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||DT(r,[t.error,n])),SL=t=>{if(t.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>s(r(...n)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},CL=(t,s)=>t.isLoading&&t.isFetching&&!s,kL=(t,s)=>t?.suspense&&s.isPending,s1=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function PL(t,s,r){const n=gL(),a=yL(),i=pt(r),l=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=n?"isRestoring":"optimistic",SL(l),bL(l,a),NL(a);const o=!i.getQueryCache().get(l.queryHash),[c]=v.useState(()=>new s(i,l)),d=c.getOptimisticResult(l),u=!n&&t.subscribed!==!1;if(v.useSyncExternalStore(v.useCallback(m=>{const h=u?c.subscribe(nr.batchCalls(m)):Ir;return c.updateResult(),h},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),v.useEffect(()=>{c.setOptions(l)},[l,c]),kL(l,d))throw s1(l,c,a);if(wL({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(l,d),l.experimental_prefetchInRender&&!Ol&&CL(d,n)&&(o?s1(l,c,a):i.getQueryCache().get(l.queryHash)?.promise)?.catch(Ir).finally(()=>{c.updateResult()}),l.notifyOnChangeProps?d:c.trackResult(d)}function xe(t,s){return PL(t,mL,s)}function AL(t,s){const r=pt(s);return TL({filters:{...t,status:"pending"}},r).length}function r1(t,s){return t.findAll(s.filters).map(r=>s.select?s.select(r):r.state)}function TL(t={},s){const r=pt(s).getMutationCache(),n=v.useRef(t),a=v.useRef(null);return a.current||(a.current=r1(r,t)),v.useEffect(()=>{n.current=t}),v.useSyncExternalStore(v.useCallback(i=>r.subscribe(()=>{const l=O0(a.current,r1(r,n.current));a.current!==l&&(a.current=l,nr.schedule(i))}),[r]),()=>a.current,()=>a.current)}function Te(t,s){const r=pt(s),[n]=v.useState(()=>new pL(r,t));v.useEffect(()=>{n.setOptions(t)},[n,t]);const a=v.useSyncExternalStore(v.useCallback(l=>n.subscribe(nr.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=v.useCallback((l,o)=>{n.mutate(l,o).catch(Ir)},[n]);if(a.error&&DT(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}class DL{constructor(){this.cache=new Map}set(s,r,n=30){this.cache.set(s,{data:r,timestamp:Date.now(),ttl:n*60*1e3})}get(s){const r=this.cache.get(s);return r?Date.now()-r.timestamp>r.ttl?(this.cache.delete(s),null):r.data:null}has(s){return this.get(s)!==null}delete(s){this.cache.delete(s)}clear(){this.cache.clear()}keys(){return this.cache.keys()}deleteByPattern(s){for(const r of this.cache.keys())r.includes(s)&&(this.cache.delete(r),console.log(`ðŸ—‘ï¸ Cleared fastCache: ${r}`))}cleanup(){const s=Date.now();for(const[r,n]of this.cache.entries())s-n.timestamp>n.ttl&&this.cache.delete(r)}}const hr=new DL;setInterval(()=>hr.cleanup(),5*60*1e3);const OL={"/api/properties":[],"/api/tasks":[{id:1,title:"Pool Cleaning",status:"pending",priority:"high"},{id:2,title:"AC Maintenance",status:"in-progress",priority:"medium"},{id:3,title:"Garden Care",status:"completed",priority:"low"}],"/api/bookings":[{id:9,guestName:"John Smith",status:"confirmed",totalAmount:8500},{id:10,guestName:"Sarah Wilson",status:"pending",totalAmount:12e3}],"/api/dashboard/stats":{totalProperties:17,activeBookings:8,pendingTasks:23,monthlyRevenue:149400}};function EL(t){return sessionStorage.getItem("app_visited")?null:(sessionStorage.setItem("app_visited","true"),OL[t]||null)}async function ML(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function Ne(t,s,r){const n={method:t,credentials:"include",headers:r?{"Content-Type":"application/json"}:{}};r!==void 0&&(n.body=JSON.stringify(r));const a=await fetch(s,n),i=await a.text();let l=null;try{l=i?JSON.parse(i):{}}catch{console.warn("âš ï¸ Non-JSON response from server:",i),l={message:i||"No response body"}}if(!a.ok){const o=l?.message||l?.error||l?.details||`Request failed: ${a.status}`,c=new Error(o);throw c.status=a.status,c.data=l,c}return l}const RL=({on401:t})=>async({queryKey:s})=>{const r=s[0],n=EL(r);if(n)return console.log(`Instant data served: ${r}`),hr.set(r,n,60),n;if(hr.has(r)){const l=hr.get(r);return console.log(`Fast cache hit: ${r}`),l}const a=await fetch(r,{credentials:"include"});await ML(a);const i=await a.json();return hr.set(r,i,30),i},wt=new uL({defaultOptions:{queries:{queryFn:RL({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!1,staleTime:120*1e3,gcTime:300*1e3,retry:2,networkMode:"online",notifyOnChangeProps:["data","error"]},mutations:{retry:!1,networkMode:"online"}}});typeof window<"u"&&(window.queryClient=wt);const _L=1,IL=1e6;let ig=0;function $L(){return ig=(ig+1)%Number.MAX_SAFE_INTEGER,ig.toString()}const lg=new Map,n1=t=>{if(lg.has(t))return;const s=setTimeout(()=>{lg.delete(t),Ed({type:"REMOVE_TOAST",toastId:t})},IL);lg.set(t,s)},FL=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,_L)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?n1(r):t.toasts.forEach(n=>{n1(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},vh=[];let yh={toasts:[]};function Ed(t){yh=FL(yh,t),vh.forEach(s=>{s(yh)})}function LL({...t}){const s=$L(),r=a=>Ed({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>Ed({type:"DISMISS_TOAST",toastId:s});return Ed({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function st(){const[t,s]=v.useState(yh);return v.useEffect(()=>(vh.push(s),()=>{const r=vh.indexOf(s);r>-1&&vh.splice(r,1)}),[t]),{...t,toast:LL,dismiss:r=>Ed({type:"DISMISS_TOAST",toastId:r})}}function $e(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return s?.(a)}}function a1(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function mp(...t){return s=>{let r=!1;const n=t.map(a=>{const i=a1(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():a1(t[a],null)}}}}function ft(...t){return v.useCallback(mp(...t),t)}function BL(t,s){const r=v.createContext(s),n=i=>{const{children:l,...o}=i,c=v.useMemo(()=>o,Object.values(o));return e.jsx(r.Provider,{value:c,children:l})};n.displayName=t+"Provider";function a(i){const l=v.useContext(r);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function er(t,s=[]){let r=[];function n(i,l){const o=v.createContext(l),c=r.length;r=[...r,l];const d=m=>{const{scope:h,children:x,...f}=m,p=h?.[t]?.[c]||o,g=v.useMemo(()=>f,Object.values(f));return e.jsx(p.Provider,{value:g,children:x})};d.displayName=i+"Provider";function u(m,h){const x=h?.[t]?.[c]||o,f=v.useContext(x);if(f)return f;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(l=>v.createContext(l));return function(o){const c=o?.[t]||i;return v.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[n,VL(a,...s)]}function VL(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return v.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}function $i(t){const s=qL(t),r=v.forwardRef((n,a)=>{const{children:i,...l}=n,o=v.Children.toArray(i),c=o.find(UL);if(c){const d=c.props.children,u=o.map(m=>m===c?v.Children.count(d)>1?v.Children.only(null):v.isValidElement(d)?d.props.children:null:m);return e.jsx(s,{...l,ref:a,children:v.isValidElement(d)?v.cloneElement(d,void 0,u):null})}return e.jsx(s,{...l,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var LT=$i("Slot");function qL(t){const s=v.forwardRef((r,n)=>{const{children:a,...i}=r;if(v.isValidElement(a)){const l=HL(a),o=zL(i,a.props);return a.type!==v.Fragment&&(o.ref=n?mp(n,l):l),v.cloneElement(a,o)}return v.Children.count(a)>1?v.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var BT=Symbol("radix.slottable");function VT(t){const s=({children:r})=>e.jsx(e.Fragment,{children:r});return s.displayName=`${t}.Slottable`,s.__radixId=BT,s}function UL(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===BT}function zL(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function HL(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Yu(t){const s=t+"CollectionProvider",[r,n]=er(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),l=p=>{const{scope:g,children:y}=p,b=ee.useRef(null),j=ee.useRef(new Map).current;return e.jsx(a,{scope:g,itemMap:j,collectionRef:b,children:y})};l.displayName=s;const o=t+"CollectionSlot",c=$i(o),d=ee.forwardRef((p,g)=>{const{scope:y,children:b}=p,j=i(o,y),w=ft(g,j.collectionRef);return e.jsx(c,{ref:w,children:b})});d.displayName=o;const u=t+"CollectionItemSlot",m="data-radix-collection-item",h=$i(u),x=ee.forwardRef((p,g)=>{const{scope:y,children:b,...j}=p,w=ee.useRef(null),N=ft(g,w),S=i(u,y);return ee.useEffect(()=>(S.itemMap.set(w,{ref:w,...j}),()=>void S.itemMap.delete(w))),e.jsx(h,{[m]:"",ref:N,children:b})});x.displayName=u;function f(p){const g=i(t+"CollectionConsumer",p);return ee.useCallback(()=>{const b=g.collectionRef.current;if(!b)return[];const j=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(g.itemMap.values()).sort((S,O)=>j.indexOf(S.ref.current)-j.indexOf(O.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:l,Slot:d,ItemSlot:x},f,n]}var KL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Je=KL.reduce((t,s)=>{const r=$i(`Primitive.${s}`),n=v.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function _0(t,s){t&&_c.flushSync(()=>t.dispatchEvent(s))}function Gs(t){const s=v.useRef(t);return v.useEffect(()=>{s.current=t}),v.useMemo(()=>(...r)=>s.current?.(...r),[])}function GL(t,s=globalThis?.document){const r=Gs(t);v.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var WL="DismissableLayer",Gj="dismissableLayer.update",QL="dismissableLayer.pointerDownOutside",YL="dismissableLayer.focusOutside",i1,qT=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ql=v.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,d=v.useContext(qT),[u,m]=v.useState(null),h=u?.ownerDocument??globalThis?.document,[,x]=v.useState({}),f=ft(s,O=>m(O)),p=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(g),b=u?p.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,w=b>=y,N=ZL(O=>{const P=O.target,k=[...d.branches].some(R=>R.contains(P));!w||k||(a?.(O),l?.(O),O.defaultPrevented||o?.())},h),S=JL(O=>{const P=O.target;[...d.branches].some(R=>R.contains(P))||(i?.(O),l?.(O),O.defaultPrevented||o?.())},h);return GL(O=>{b===d.layers.size-1&&(n?.(O),!O.defaultPrevented&&o&&(O.preventDefault(),o()))},h),v.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(i1=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),l1(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=i1)}},[u,h,r,d]),v.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),l1())},[u,d]),v.useEffect(()=>{const O=()=>x({});return document.addEventListener(Gj,O),()=>document.removeEventListener(Gj,O)},[]),e.jsx(Je.div,{...c,ref:f,style:{pointerEvents:j?w?"auto":"none":void 0,...t.style},onFocusCapture:$e(t.onFocusCapture,S.onFocusCapture),onBlurCapture:$e(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:$e(t.onPointerDownCapture,N.onPointerDownCapture)})});Ql.displayName=WL;var XL="DismissableLayerBranch",UT=v.forwardRef((t,s)=>{const r=v.useContext(qT),n=v.useRef(null),a=ft(s,n);return v.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Je.div,{...t,ref:a})});UT.displayName=XL;function ZL(t,s=globalThis?.document){const r=Gs(t),n=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let c=function(){zT(QL,r,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function JL(t,s=globalThis?.document){const r=Gs(t),n=v.useRef(!1);return v.useEffect(()=>{const a=i=>{i.target&&!n.current&&zT(YL,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function l1(){const t=new CustomEvent(Gj);document.dispatchEvent(t)}function zT(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?_0(a,i):a.dispatchEvent(i)}var e8=Ql,t8=UT,Ws=globalThis?.document?v.useLayoutEffect:()=>{},s8="Portal",$c=v.forwardRef((t,s)=>{const{container:r,...n}=t,[a,i]=v.useState(!1);Ws(()=>i(!0),[]);const l=r||a&&globalThis?.document?.body;return l?J$.createPortal(e.jsx(Je.div,{...n,ref:s}),l):null});$c.displayName=s8;function r8(t,s){return v.useReducer((r,n)=>s[r][n]??r,t)}var cr=t=>{const{present:s,children:r}=t,n=n8(s),a=typeof r=="function"?r({present:n.isPresent}):v.Children.only(r),i=ft(n.ref,a8(a));return typeof r=="function"||n.isPresent?v.cloneElement(a,{ref:i}):null};cr.displayName="Presence";function n8(t){const[s,r]=v.useState(),n=v.useRef(null),a=v.useRef(t),i=v.useRef("none"),l=t?"mounted":"unmounted",[o,c]=r8(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const d=Bm(n.current);i.current=o==="mounted"?d:"none"},[o]),Ws(()=>{const d=n.current,u=a.current;if(u!==t){const h=i.current,x=Bm(d);t?c("MOUNT"):x==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&h!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),Ws(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,m=x=>{const p=Bm(n.current).includes(x.animationName);if(x.target===s&&p&&(c("ANIMATION_END"),!a.current)){const g=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=g)})}},h=x=>{x.target===s&&(i.current=Bm(n.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:v.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Bm(t){return t?.animationName||"none"}function a8(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var i8=w0[" useInsertionEffect ".trim().toString()]||Ws;function Hr({prop:t,defaultProp:s,onChange:r=()=>{},caller:n}){const[a,i,l]=l8({defaultProp:s,onChange:r}),o=t!==void 0,c=o?t:a;{const u=v.useRef(t!==void 0);v.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const d=v.useCallback(u=>{if(o){const m=o8(u)?u(t):u;m!==t&&l.current?.(m)}else i(u)},[o,t,i,l]);return[c,d]}function l8({defaultProp:t,onChange:s}){const[r,n]=v.useState(t),a=v.useRef(r),i=v.useRef(s);return i8(()=>{i.current=s},[s]),v.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function o8(t){return typeof t=="function"}var HT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),c8="VisuallyHidden",hp=v.forwardRef((t,s)=>e.jsx(Je.span,{...t,ref:s,style:{...HT,...t.style}}));hp.displayName=c8;var d8=hp,I0="ToastProvider",[$0,u8,m8]=Yu("Toast"),[KT,DAe]=er("Toast",[m8]),[h8,xp]=KT(I0),GT=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=t,[o,c]=v.useState(null),[d,u]=v.useState(0),m=v.useRef(!1),h=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${I0}\`. Expected non-empty \`string\`.`),e.jsx($0.Provider,{scope:s,children:e.jsx(h8,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:v.useCallback(()=>u(x=>x+1),[]),onToastRemove:v.useCallback(()=>u(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:l})})};GT.displayName=I0;var WT="ToastViewport",x8=["F8"],Wj="toast.viewportPause",Qj="toast.viewportResume",QT=v.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=x8,label:a="Notifications ({hotkey})",...i}=t,l=xp(WT,r),o=u8(r),c=v.useRef(null),d=v.useRef(null),u=v.useRef(null),m=v.useRef(null),h=ft(s,m,l.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),f=l.toastCount>0;v.useEffect(()=>{const g=y=>{n.length!==0&&n.every(j=>y[j]||y.code===j)&&m.current?.focus()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),v.useEffect(()=>{const g=c.current,y=m.current;if(f&&g&&y){const b=()=>{if(!l.isClosePausedRef.current){const S=new CustomEvent(Wj);y.dispatchEvent(S),l.isClosePausedRef.current=!0}},j=()=>{if(l.isClosePausedRef.current){const S=new CustomEvent(Qj);y.dispatchEvent(S),l.isClosePausedRef.current=!1}},w=S=>{!g.contains(S.relatedTarget)&&j()},N=()=>{g.contains(document.activeElement)||j()};return g.addEventListener("focusin",b),g.addEventListener("focusout",w),g.addEventListener("pointermove",b),g.addEventListener("pointerleave",N),window.addEventListener("blur",b),window.addEventListener("focus",j),()=>{g.removeEventListener("focusin",b),g.removeEventListener("focusout",w),g.removeEventListener("pointermove",b),g.removeEventListener("pointerleave",N),window.removeEventListener("blur",b),window.removeEventListener("focus",j)}}},[f,l.isClosePausedRef]);const p=v.useCallback(({tabbingDirection:g})=>{const b=o().map(j=>{const w=j.ref.current,N=[w,...P8(w)];return g==="forwards"?N:N.reverse()});return(g==="forwards"?b.reverse():b).flat()},[o]);return v.useEffect(()=>{const g=m.current;if(g){const y=b=>{const j=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!j){const N=document.activeElement,S=b.shiftKey;if(b.target===g&&S){d.current?.focus();return}const k=p({tabbingDirection:S?"backwards":"forwards"}),R=k.findIndex(F=>F===N);og(k.slice(R+1))?b.preventDefault():S?d.current?.focus():u.current?.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[o,p]),e.jsxs(t8,{ref:c,role:"region","aria-label":a.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:f?void 0:"none"},children:[f&&e.jsx(Yj,{ref:d,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"forwards"});og(g)}}),e.jsx($0.Slot,{scope:r,children:e.jsx(Je.ol,{tabIndex:-1,...i,ref:h})}),f&&e.jsx(Yj,{ref:u,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"backwards"});og(g)}})]})});QT.displayName=WT;var YT="ToastFocusProxy",Yj=v.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,i=xp(YT,r);return e.jsx(hp,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:l=>{const o=l.relatedTarget;!i.viewport?.contains(o)&&n()}})});Yj.displayName=YT;var Xu="Toast",p8="toast.swipeStart",f8="toast.swipeMove",g8="toast.swipeCancel",j8="toast.swipeEnd",XT=v.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...l}=t,[o,c]=Hr({prop:n,defaultProp:a??!0,onChange:i,caller:Xu});return e.jsx(cr,{present:r||o,children:e.jsx(b8,{open:o,...l,ref:s,onClose:()=>c(!1),onPause:Gs(t.onPause),onResume:Gs(t.onResume),onSwipeStart:$e(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(t.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:$e(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(t.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});XT.displayName=Xu;var[v8,y8]=KT(Xu,{onClose(){}}),b8=v.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:x,...f}=t,p=xp(Xu,r),[g,y]=v.useState(null),b=ft(s,E=>y(E)),j=v.useRef(null),w=v.useRef(null),N=a||p.duration,S=v.useRef(0),O=v.useRef(N),P=v.useRef(0),{onToastAdd:k,onToastRemove:R}=p,F=Gs(()=>{g?.contains(document.activeElement)&&p.viewport?.focus(),l()}),I=v.useCallback(E=>{!E||E===1/0||(window.clearTimeout(P.current),S.current=new Date().getTime(),P.current=window.setTimeout(F,E))},[F]);v.useEffect(()=>{const E=p.viewport;if(E){const B=()=>{I(O.current),d?.()},G=()=>{const J=new Date().getTime()-S.current;O.current=O.current-J,window.clearTimeout(P.current),c?.()};return E.addEventListener(Wj,G),E.addEventListener(Qj,B),()=>{E.removeEventListener(Wj,G),E.removeEventListener(Qj,B)}}},[p.viewport,N,c,d,I]),v.useEffect(()=>{i&&!p.isClosePausedRef.current&&I(N)},[i,N,p.isClosePausedRef,I]),v.useEffect(()=>(k(),()=>R()),[k,R]);const W=v.useMemo(()=>g?n4(g):null,[g]);return p.viewport?e.jsxs(e.Fragment,{children:[W&&e.jsx(N8,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:W}),e.jsx(v8,{scope:r,onClose:F,children:_c.createPortal(e.jsx($0.ItemSlot,{scope:r,children:e.jsx(e8,{asChild:!0,onEscapeKeyDown:$e(o,()=>{p.isFocusedToastEscapeKeyDownRef.current||F(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...f,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:$e(t.onKeyDown,E=>{E.key==="Escape"&&(o?.(E.nativeEvent),E.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:$e(t.onPointerDown,E=>{E.button===0&&(j.current={x:E.clientX,y:E.clientY})}),onPointerMove:$e(t.onPointerMove,E=>{if(!j.current)return;const B=E.clientX-j.current.x,G=E.clientY-j.current.y,J=!!w.current,C=["left","right"].includes(p.swipeDirection),V=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,z=C?V(0,B):0,le=C?0:V(0,G),Ce=E.pointerType==="touch"?10:2,H={x:z,y:le},_={originalEvent:E,delta:H};J?(w.current=H,Vm(f8,m,_,{discrete:!1})):o1(H,p.swipeDirection,Ce)?(w.current=H,Vm(p8,u,_,{discrete:!1}),E.target.setPointerCapture(E.pointerId)):(Math.abs(B)>Ce||Math.abs(G)>Ce)&&(j.current=null)}),onPointerUp:$e(t.onPointerUp,E=>{const B=w.current,G=E.target;if(G.hasPointerCapture(E.pointerId)&&G.releasePointerCapture(E.pointerId),w.current=null,j.current=null,B){const J=E.currentTarget,C={originalEvent:E,delta:B};o1(B,p.swipeDirection,p.swipeThreshold)?Vm(j8,x,C,{discrete:!0}):Vm(g8,h,C,{discrete:!0}),J.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),N8=t=>{const{__scopeToast:s,children:r,...n}=t,a=xp(Xu,s),[i,l]=v.useState(!1),[o,c]=v.useState(!1);return C8(()=>l(!0)),v.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:e.jsx($c,{asChild:!0,children:e.jsx(hp,{...n,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},w8="ToastTitle",ZT=v.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Je.div,{...n,ref:s})});ZT.displayName=w8;var S8="ToastDescription",JT=v.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Je.div,{...n,ref:s})});JT.displayName=S8;var e4="ToastAction",t4=v.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(r4,{altText:r,asChild:!0,children:e.jsx(F0,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${e4}\`. Expected non-empty \`string\`.`),null)});t4.displayName=e4;var s4="ToastClose",F0=v.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=y8(s4,r);return e.jsx(r4,{asChild:!0,children:e.jsx(Je.button,{type:"button",...n,ref:s,onClick:$e(t.onClick,a.onClose)})})});F0.displayName=s4;var r4=v.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function n4(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),k8(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...n4(n))}}),s}function Vm(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?_0(a,i):a.dispatchEvent(i)}var o1=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return s==="left"||s==="right"?i&&n>r:!i&&a>r};function C8(t=()=>{}){const s=Gs(t);Ws(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function k8(t){return t.nodeType===t.ELEMENT_NODE}function P8(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function og(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var A8=GT,a4=QT,i4=XT,l4=ZT,o4=JT,c4=t4,d4=F0;function u4(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=u4(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function $t(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=u4(t))&&(n&&(n+=" "),n+=s);return n}const c1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,d1=$t,Zu=(t,s)=>r=>{var n;if(s?.variants==null)return d1(t,r?.class,r?.className);const{variants:a,defaultVariants:i}=s,l=Object.keys(a).map(d=>{const u=r?.[d],m=i?.[d];if(u===null)return null;const h=c1(u)||c1(m);return a[d][h]}),o=r&&Object.entries(r).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:h,...x}=u;return Object.entries(x).every(f=>{let[p,g]=f;return Array.isArray(g)?g.includes({...i,...o}[p]):{...i,...o}[p]===g})?[...d,m,h]:d},[]);return d1(t,l,c,r?.class,r?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m4=(...t)=>t.filter((s,r,n)=>!!s&&n.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=v.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...o},c)=>v.createElement("svg",{ref:c,...D8,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:m4("lucide",a),...o},[...l.map(([d,u])=>v.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(t,s)=>{const r=v.forwardRef(({className:n,...a},i)=>v.createElement(O8,{ref:i,iconNode:s,className:m4(`lucide-${T8(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Ae("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=Ae("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=Ae("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=Ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Ae("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=Ae("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=Ae("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=Ae("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=Ae("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=Ae("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=Ae("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Ae("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Ae("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=Ae("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Ae("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Ae("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Ae("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Ae("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Ae("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Ae("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=Ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=Ae("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Ae("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=Ae("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=Ae("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=Ae("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=Ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Ae("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Ae("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=Ae("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Ae("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Ae("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=Ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Ae("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=Ae("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=Ae("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=Ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Ae("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=Ae("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=Ae("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Ae("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=Ae("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Ae("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=Ae("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=Ae("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=Ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=Ae("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=Ae("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=Ae("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=Ae("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Ae("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Ae("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=Ae("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Ae("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Ae("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Ae("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=Ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Ae("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Ae("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=Ae("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Ae("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Ae("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=Ae("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ae("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Ae("Luggage",[["path",{d:"M6 20a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2",key:"1m57jg"}],["path",{d:"M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14",key:"1l99gc"}],["path",{d:"M10 20h4",key:"ni2waw"}],["circle",{cx:"16",cy:"20",r:"2",key:"1vifvg"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ae("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=Ae("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=Ae("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=Ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Ae("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Ae("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=Ae("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=Ae("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=Ae("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=Ae("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=Ae("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=Ae("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=Ae("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Ae("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=Ae("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=Ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Ae("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Ae("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=Ae("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Ae("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=Ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=Ae("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=Ae("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=Ae("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=Ae("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=Ae("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=Ae("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=Ae("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Ae("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Ae("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=Ae("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=Ae("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=Ae("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=Ae("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Ae("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=Ae("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Ae("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Ae("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=Ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=Ae("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Ae("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=Ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=Ae("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=Ae("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Ae("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=Ae("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=Ae("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=Ae("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Ae("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Ae("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),H0="-",hB=t=>{const s=pB(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const o=l.split(H0);return o[0]===""&&o.length!==1&&o.shift(),k4(o,s)||xB(l)},getConflictingClassGroupIds:(l,o)=>{const c=r[l]||[];return o&&n[l]?[...c,...n[l]]:c}}},k4=(t,s)=>{if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?k4(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(H0);return s.validators.find(({validator:l})=>l(i))?.classGroupId},j1=/^\[(.+)\]$/,xB=t=>{if(j1.test(t)){const s=j1.exec(t)[1],r=s?.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},pB=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return gB(Object.entries(t.classGroups),r).forEach(([i,l])=>{tv(l,n,i,s)}),n},tv=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:v1(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(fB(a)){tv(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,l])=>{tv(l,v1(s,i),r,n)})})},v1=(t,s)=>{let r=t;return s.split(H0).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},fB=t=>t.isThemeGetter,gB=(t,s)=>s?t.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[s+l,o])):i);return[r,a]}):t,jB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(i,l)=>{r.set(i,l),s++,s>t&&(s=0,n=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return a(i,l),l},set(i,l){r.has(i)?r.set(i,l):a(i,l)}}},P4="!",vB=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],i=s.length,l=o=>{const c=[];let d=0,u=0,m;for(let g=0;g<o.length;g++){let y=o[g];if(d===0){if(y===a&&(n||o.slice(g,g+i)===s)){c.push(o.slice(u,g)),u=g+i;continue}if(y==="/"){m=g;continue}}y==="["?d++:y==="]"&&d--}const h=c.length===0?o:o.substring(u),x=h.startsWith(P4),f=x?h.substring(1):h,p=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:f,maybePostfixModifierPosition:p}};return r?o=>r({className:o,parseClassName:l}):l},yB=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},bB=t=>({cache:jB(t.cacheSize),parseClassName:vB(t),...hB(t)}),NB=/\s+/,wB=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,i=[],l=t.trim().split(NB);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:x}=r(d);let f=!!x,p=n(f?h.substring(0,x):h);if(!p){if(!f){o=d+(o.length>0?" "+o:o);continue}if(p=n(h),!p){o=d+(o.length>0?" "+o:o);continue}f=!1}const g=yB(u).join(":"),y=m?g+P4:g,b=y+p;if(i.includes(b))continue;i.push(b);const j=a(p,f);for(let w=0;w<j.length;++w){const N=j[w];i.push(y+N)}o=d+(o.length>0?" "+o:o)}return o};function SB(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=A4(s))&&(n&&(n+=" "),n+=r);return n}const A4=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=A4(t[n]))&&(r&&(r+=" "),r+=s);return r};function CB(t,...s){let r,n,a,i=l;function l(c){const d=s.reduce((u,m)=>m(u),t());return r=bB(d),n=r.cache.get,a=r.cache.set,i=o,o(c)}function o(c){const d=n(c);if(d)return d;const u=wB(c,r);return a(c,u),u}return function(){return i(SB.apply(null,arguments))}}const Ps=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},T4=/^\[(?:([a-z-]+):)?(.+)\]$/i,kB=/^\d+\/\d+$/,PB=new Set(["px","full","screen"]),AB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,OB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,EB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ma=t=>$o(t)||PB.has(t)||kB.test(t),hi=t=>Fc(t,"length",BB),$o=t=>!!t&&!Number.isNaN(Number(t)),ug=t=>Fc(t,"number",$o),ld=t=>!!t&&Number.isInteger(Number(t)),MB=t=>t.endsWith("%")&&$o(t.slice(0,-1)),Ft=t=>T4.test(t),xi=t=>AB.test(t),RB=new Set(["length","size","percentage"]),_B=t=>Fc(t,RB,D4),IB=t=>Fc(t,"position",D4),$B=new Set(["image","url"]),FB=t=>Fc(t,$B,qB),LB=t=>Fc(t,"",VB),od=()=>!0,Fc=(t,s,r)=>{const n=T4.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},BB=t=>TB.test(t)&&!DB.test(t),D4=()=>!1,VB=t=>OB.test(t),qB=t=>EB.test(t),UB=()=>{const t=Ps("colors"),s=Ps("spacing"),r=Ps("blur"),n=Ps("brightness"),a=Ps("borderColor"),i=Ps("borderRadius"),l=Ps("borderSpacing"),o=Ps("borderWidth"),c=Ps("contrast"),d=Ps("grayscale"),u=Ps("hueRotate"),m=Ps("invert"),h=Ps("gap"),x=Ps("gradientColorStops"),f=Ps("gradientColorStopPositions"),p=Ps("inset"),g=Ps("margin"),y=Ps("opacity"),b=Ps("padding"),j=Ps("saturate"),w=Ps("scale"),N=Ps("sepia"),S=Ps("skew"),O=Ps("space"),P=Ps("translate"),k=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Ft,s],I=()=>[Ft,s],W=()=>["",Ma,hi],E=()=>["auto",$o,Ft],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],C=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Ft],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[$o,Ft];return{cacheSize:500,separator:":",theme:{colors:[od],spacing:[Ma,hi],blur:["none","",xi,Ft],brightness:le(),borderColor:[t],borderRadius:["none","","full",xi,Ft],borderSpacing:I(),borderWidth:W(),contrast:le(),grayscale:V(),hueRotate:le(),invert:V(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[MB,hi],inset:F(),margin:F(),opacity:le(),padding:I(),saturate:le(),scale:le(),sepia:V(),skew:le(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ft]}],container:["container"],columns:[{columns:[xi]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Ft]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ld,Ft]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ft]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",ld,Ft]}],"grid-cols":[{"grid-cols":[od]}],"col-start-end":[{col:["auto",{span:["full",ld,Ft]},Ft]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[od]}],"row-start-end":[{row:["auto",{span:[ld,Ft]},Ft]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ft]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...C()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...C(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...C(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ft,s]}],"min-w":[{"min-w":[Ft,s,"min","max","fit"]}],"max-w":[{"max-w":[Ft,s,"none","full","min","max","fit","prose",{screen:[xi]},xi]}],h:[{h:[Ft,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ft,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ft,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ft,s,"auto","min","max","fit"]}],"font-size":[{text:["base",xi,hi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ug]}],"font-family":[{font:[od]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ft]}],"line-clamp":[{"line-clamp":["none",$o,ug]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ma,Ft]}],"list-image":[{"list-image":["none",Ft]}],"list-style-type":[{list:["none","disc","decimal",Ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ma,hi]}],"underline-offset":[{"underline-offset":["auto",Ma,Ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),IB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_B]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},FB]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:G()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[Ma,Ft]}],"outline-w":[{outline:[Ma,hi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ma,hi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xi,LB]}],"shadow-color":[{shadow:[od]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",xi,Ft]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[j]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ft]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",Ft]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[ld,Ft]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ma,hi,ug]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zB=CB(UB);function Be(...t){return zB($t(t))}const HB=A8,O4=v.forwardRef(({className:t,...s},r)=>e.jsx(a4,{ref:r,className:Be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));O4.displayName=a4.displayName;const KB=Zu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),E4=v.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(i4,{ref:n,className:Be(KB({variant:s}),t),...r}));E4.displayName=i4.displayName;const GB=v.forwardRef(({className:t,...s},r)=>e.jsx(c4,{ref:r,className:Be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));GB.displayName=c4.displayName;const M4=v.forwardRef(({className:t,...s},r)=>e.jsx(d4,{ref:r,className:Be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Es,{className:"h-4 w-4"})}));M4.displayName=d4.displayName;const R4=v.forwardRef(({className:t,...s},r)=>e.jsx(l4,{ref:r,className:Be("text-sm font-semibold",t),...s}));R4.displayName=l4.displayName;const _4=v.forwardRef(({className:t,...s},r)=>e.jsx(o4,{ref:r,className:Be("text-sm opacity-90",t),...s}));_4.displayName=o4.displayName;function WB(){const{toasts:t}=st();return e.jsxs(HB,{children:[t.map(function({id:s,title:r,description:n,action:a,...i}){return e.jsxs(E4,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(R4,{children:r}),n&&e.jsx(_4,{children:n})]}),a,e.jsx(M4,{})]},s)}),e.jsx(O4,{})]})}var QB=w0[" useId ".trim().toString()]||(()=>{}),YB=0;function rn(t){const[s,r]=v.useState(QB());return Ws(()=>{r(n=>n??String(YB++))},[t]),t||(s?`radix-${s}`:"")}const XB=["top","right","bottom","left"],Bi=Math.min,Zr=Math.max,Mh=Math.round,qm=Math.floor,xa=t=>({x:t,y:t}),ZB={left:"right",right:"left",bottom:"top",top:"bottom"},JB={start:"end",end:"start"};function sv(t,s,r){return Zr(t,Bi(s,r))}function si(t,s){return typeof t=="function"?t(s):t}function ri(t){return t.split("-")[0]}function Lc(t){return t.split("-")[1]}function K0(t){return t==="x"?"y":"x"}function G0(t){return t==="y"?"height":"width"}const eV=new Set(["top","bottom"]);function oa(t){return eV.has(ri(t))?"y":"x"}function W0(t){return K0(oa(t))}function tV(t,s,r){r===void 0&&(r=!1);const n=Lc(t),a=W0(t),i=G0(a);let l=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=Rh(l)),[l,Rh(l)]}function sV(t){const s=Rh(t);return[rv(t),s,rv(s)]}function rv(t){return t.replace(/start|end/g,s=>JB[s])}const y1=["left","right"],b1=["right","left"],rV=["top","bottom"],nV=["bottom","top"];function aV(t,s,r){switch(t){case"top":case"bottom":return r?s?b1:y1:s?y1:b1;case"left":case"right":return s?rV:nV;default:return[]}}function iV(t,s,r,n){const a=Lc(t);let i=aV(ri(t),r==="start",n);return a&&(i=i.map(l=>l+"-"+a),s&&(i=i.concat(i.map(rv)))),i}function Rh(t){return t.replace(/left|right|bottom|top/g,s=>ZB[s])}function lV(t){return{top:0,right:0,bottom:0,left:0,...t}}function I4(t){return typeof t!="number"?lV(t):{top:t,right:t,bottom:t,left:t}}function _h(t){const{x:s,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function N1(t,s,r){let{reference:n,floating:a}=t;const i=oa(s),l=W0(s),o=G0(l),c=ri(s),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let x;switch(c){case"top":x={x:u,y:n.y-a.height};break;case"bottom":x={x:u,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:m};break;case"left":x={x:n.x-a.width,y:m};break;default:x={x:n.x,y:n.y}}switch(Lc(s)){case"start":x[l]-=h*(r&&d?-1:1);break;case"end":x[l]+=h*(r&&d?-1:1);break}return x}const oV=async(t,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:l}=r,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(s));let d=await l.getElementRects({reference:t,floating:s,strategy:a}),{x:u,y:m}=N1(d,n,c),h=n,x={},f=0;for(let p=0;p<o.length;p++){const{name:g,fn:y}=o[p],{x:b,y:j,data:w,reset:N}=await y({x:u,y:m,initialPlacement:n,placement:h,strategy:a,middlewareData:x,rects:d,platform:l,elements:{reference:t,floating:s}});u=b??u,m=j??m,x={...x,[g]:{...x[g],...w}},N&&f<=50&&(f++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(d=N.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:a}):N.rects),{x:u,y:m}=N1(d,h,c)),p=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:x}};async function Jd(t,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:x=0}=si(s,t),f=I4(x),g=o[h?m==="floating"?"reference":"floating":m],y=_h(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(g)))==null||r?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),b=m==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),w=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},N=_h(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:j,strategy:c}):b);return{top:(y.top-N.top+f.top)/w.y,bottom:(N.bottom-y.bottom+f.bottom)/w.y,left:(y.left-N.left+f.left)/w.x,right:(N.right-y.right+f.right)/w.x}}const cV=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:n,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=s,{element:d,padding:u=0}=si(t,s)||{};if(d==null)return{};const m=I4(u),h={x:r,y:n},x=W0(a),f=G0(x),p=await l.getDimensions(d),g=x==="y",y=g?"top":"left",b=g?"bottom":"right",j=g?"clientHeight":"clientWidth",w=i.reference[f]+i.reference[x]-h[x]-i.floating[f],N=h[x]-i.reference[x],S=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let O=S?S[j]:0;(!O||!await(l.isElement==null?void 0:l.isElement(S)))&&(O=o.floating[j]||i.floating[f]);const P=w/2-N/2,k=O/2-p[f]/2-1,R=Bi(m[y],k),F=Bi(m[b],k),I=R,W=O-p[f]-F,E=O/2-p[f]/2+P,B=sv(I,E,W),G=!c.arrow&&Lc(a)!=null&&E!==B&&i.reference[f]/2-(E<I?R:F)-p[f]/2<0,J=G?E<I?E-I:E-W:0;return{[x]:h[x]+J,data:{[x]:B,centerOffset:E-B-J,...G&&{alignmentOffset:J}},reset:G}}}),dV=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,n;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...g}=si(t,s);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=ri(a),b=oa(o),j=ri(o)===o,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=h||(j||!p?[Rh(o)]:sV(o)),S=f!=="none";!h&&S&&N.push(...iV(o,p,f,w));const O=[o,...N],P=await Jd(s,g),k=[];let R=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&k.push(P[y]),m){const E=tV(a,l,w);k.push(P[E[0]],P[E[1]])}if(R=[...R,{placement:a,overflows:k}],!k.every(E=>E<=0)){var F,I;const E=(((F=i.flip)==null?void 0:F.index)||0)+1,B=O[E];if(B&&(!(m==="alignment"?b!==oa(B):!1)||R.every(C=>C.overflows[0]>0&&oa(C.placement)===b)))return{data:{index:E,overflows:R},reset:{placement:B}};let G=(I=R.filter(J=>J.overflows[0]<=0).sort((J,C)=>J.overflows[1]-C.overflows[1])[0])==null?void 0:I.placement;if(!G)switch(x){case"bestFit":{var W;const J=(W=R.filter(C=>{if(S){const V=oa(C.placement);return V===b||V==="y"}return!0}).map(C=>[C.placement,C.overflows.filter(V=>V>0).reduce((V,z)=>V+z,0)]).sort((C,V)=>C[1]-V[1])[0])==null?void 0:W[0];J&&(G=J);break}case"initialPlacement":G=o;break}if(a!==G)return{reset:{placement:G}}}return{}}}};function w1(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function S1(t){return XB.some(s=>t[s]>=0)}const uV=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=si(t,s);switch(n){case"referenceHidden":{const i=await Jd(s,{...a,elementContext:"reference"}),l=w1(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:S1(l)}}}case"escaped":{const i=await Jd(s,{...a,altBoundary:!0}),l=w1(i,r.floating);return{data:{escapedOffsets:l,escaped:S1(l)}}}default:return{}}}}},$4=new Set(["left","top"]);async function mV(t,s){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=ri(r),o=Lc(r),c=oa(r)==="y",d=$4.has(l)?-1:1,u=i&&c?-1:1,m=si(s,t);let{mainAxis:h,crossAxis:x,alignmentAxis:f}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof f=="number"&&(x=o==="end"?f*-1:f),c?{x:x*u,y:h*d}:{x:h*d,y:x*u}}const hV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,n;const{x:a,y:i,placement:l,middlewareData:o}=s,c=await mV(s,t);return l===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},xV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...c}=si(t,s),d={x:r,y:n},u=await Jd(s,c),m=oa(ri(a)),h=K0(m);let x=d[h],f=d[m];if(i){const g=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=x+u[g],j=x-u[y];x=sv(b,x,j)}if(l){const g=m==="y"?"top":"left",y=m==="y"?"bottom":"right",b=f+u[g],j=f-u[y];f=sv(b,f,j)}const p=o.fn({...s,[h]:x,[m]:f});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[m]:l}}}}}},pV=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:n,placement:a,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=si(t,s),u={x:r,y:n},m=oa(a),h=K0(m);let x=u[h],f=u[m];const p=si(o,s),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const j=h==="y"?"height":"width",w=i.reference[h]-i.floating[j]+g.mainAxis,N=i.reference[h]+i.reference[j]-g.mainAxis;x<w?x=w:x>N&&(x=N)}if(d){var y,b;const j=h==="y"?"width":"height",w=$4.has(ri(a)),N=i.reference[m]-i.floating[j]+(w&&((y=l.offset)==null?void 0:y[m])||0)+(w?0:g.crossAxis),S=i.reference[m]+i.reference[j]+(w?0:((b=l.offset)==null?void 0:b[m])||0)-(w?g.crossAxis:0);f<N?f=N:f>S&&(f=S)}return{[h]:x,[m]:f}}}},fV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,n;const{placement:a,rects:i,platform:l,elements:o}=s,{apply:c=()=>{},...d}=si(t,s),u=await Jd(s,d),m=ri(a),h=Lc(a),x=oa(a)==="y",{width:f,height:p}=i.floating;let g,y;m==="top"||m==="bottom"?(g=m,y=h===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(y=m,g=h==="end"?"top":"bottom");const b=p-u.top-u.bottom,j=f-u.left-u.right,w=Bi(p-u[g],b),N=Bi(f-u[y],j),S=!s.middlewareData.shift;let O=w,P=N;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(P=j),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(O=b),S&&!h){const R=Zr(u.left,0),F=Zr(u.right,0),I=Zr(u.top,0),W=Zr(u.bottom,0);x?P=f-2*(R!==0||F!==0?R+F:Zr(u.left,u.right)):O=p-2*(I!==0||W!==0?I+W:Zr(u.top,u.bottom))}await c({...s,availableWidth:P,availableHeight:O});const k=await l.getDimensions(o.floating);return f!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function pp(){return typeof window<"u"}function Bc(t){return F4(t)?(t.nodeName||"").toLowerCase():"#document"}function nn(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Ta(t){var s;return(s=(F4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function F4(t){return pp()?t instanceof Node||t instanceof nn(t).Node:!1}function Jn(t){return pp()?t instanceof Element||t instanceof nn(t).Element:!1}function ka(t){return pp()?t instanceof HTMLElement||t instanceof nn(t).HTMLElement:!1}function C1(t){return!pp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof nn(t).ShadowRoot}const gV=new Set(["inline","contents"]);function lm(t){const{overflow:s,overflowX:r,overflowY:n,display:a}=ea(t);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!gV.has(a)}const jV=new Set(["table","td","th"]);function vV(t){return jV.has(Bc(t))}const yV=[":popover-open",":modal"];function fp(t){return yV.some(s=>{try{return t.matches(s)}catch{return!1}})}const bV=["transform","translate","scale","rotate","perspective"],NV=["transform","translate","scale","rotate","perspective","filter"],wV=["paint","layout","strict","content"];function Q0(t){const s=Y0(),r=Jn(t)?ea(t):t;return bV.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||NV.some(n=>(r.willChange||"").includes(n))||wV.some(n=>(r.contain||"").includes(n))}function SV(t){let s=Vi(t);for(;ka(s)&&!Yo(s);){if(Q0(s))return s;if(fp(s))return null;s=Vi(s)}return null}function Y0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const CV=new Set(["html","body","#document"]);function Yo(t){return CV.has(Bc(t))}function ea(t){return nn(t).getComputedStyle(t)}function gp(t){return Jn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vi(t){if(Bc(t)==="html")return t;const s=t.assignedSlot||t.parentNode||C1(t)&&t.host||Ta(t);return C1(s)?s.host:s}function L4(t){const s=Vi(t);return Yo(s)?t.ownerDocument?t.ownerDocument.body:t.body:ka(s)&&lm(s)?s:L4(s)}function eu(t,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=L4(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),l=nn(a);if(i){const o=nv(l);return s.concat(l,l.visualViewport||[],lm(a)?a:[],o&&r?eu(o):[])}return s.concat(a,eu(a,[],r))}function nv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function B4(t){const s=ea(t);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=ka(t),i=a?t.offsetWidth:r,l=a?t.offsetHeight:n,o=Mh(r)!==i||Mh(n)!==l;return o&&(r=i,n=l),{width:r,height:n,$:o}}function X0(t){return Jn(t)?t:t.contextElement}function Fo(t){const s=X0(t);if(!ka(s))return xa(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:i}=B4(s);let l=(i?Mh(r.width):r.width)/n,o=(i?Mh(r.height):r.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const kV=xa(0);function V4(t){const s=nn(t);return!Y0()||!s.visualViewport?kV:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function PV(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==nn(t)?!1:s}function Ml(t,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=X0(t);let l=xa(1);s&&(n?Jn(n)&&(l=Fo(n)):l=Fo(t));const o=PV(i,r,n)?V4(i):xa(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,m=a.height/l.y;if(i){const h=nn(i),x=n&&Jn(n)?nn(n):n;let f=h,p=nv(f);for(;p&&n&&x!==f;){const g=Fo(p),y=p.getBoundingClientRect(),b=ea(p),j=y.left+(p.clientLeft+parseFloat(b.paddingLeft))*g.x,w=y.top+(p.clientTop+parseFloat(b.paddingTop))*g.y;c*=g.x,d*=g.y,u*=g.x,m*=g.y,c+=j,d+=w,f=nn(p),p=nv(f)}}return _h({width:u,height:m,x:c,y:d})}function Z0(t,s){const r=gp(t).scrollLeft;return s?s.left+r:Ml(Ta(t)).left+r}function q4(t,s,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+s.scrollLeft-(r?0:Z0(t,n)),i=n.top+s.scrollTop;return{x:a,y:i}}function AV(t){let{elements:s,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",l=Ta(n),o=s?fp(s.floating):!1;if(n===l||o&&i)return r;let c={scrollLeft:0,scrollTop:0},d=xa(1);const u=xa(0),m=ka(n);if((m||!m&&!i)&&((Bc(n)!=="body"||lm(l))&&(c=gp(n)),ka(n))){const x=Ml(n);d=Fo(n),u.x=x.x+n.clientLeft,u.y=x.y+n.clientTop}const h=l&&!m&&!i?q4(l,c,!0):xa(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:r.y*d.y-c.scrollTop*d.y+u.y+h.y}}function TV(t){return Array.from(t.getClientRects())}function DV(t){const s=Ta(t),r=gp(t),n=t.ownerDocument.body,a=Zr(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),i=Zr(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+Z0(t);const o=-r.scrollTop;return ea(n).direction==="rtl"&&(l+=Zr(s.clientWidth,n.clientWidth)-a),{width:a,height:i,x:l,y:o}}function OV(t,s){const r=nn(t),n=Ta(t),a=r.visualViewport;let i=n.clientWidth,l=n.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=Y0();(!d||d&&s==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}const EV=new Set(["absolute","fixed"]);function MV(t,s){const r=Ml(t,!0,s==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=ka(t)?Fo(t):xa(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:l,height:o,x:c,y:d}}function k1(t,s,r){let n;if(s==="viewport")n=OV(t,r);else if(s==="document")n=DV(Ta(t));else if(Jn(s))n=MV(s,r);else{const a=V4(t);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return _h(n)}function U4(t,s){const r=Vi(t);return r===s||!Jn(r)||Yo(r)?!1:ea(r).position==="fixed"||U4(r,s)}function RV(t,s){const r=s.get(t);if(r)return r;let n=eu(t,[],!1).filter(o=>Jn(o)&&Bc(o)!=="body"),a=null;const i=ea(t).position==="fixed";let l=i?Vi(t):t;for(;Jn(l)&&!Yo(l);){const o=ea(l),c=Q0(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&EV.has(a.position)||lm(l)&&!c&&U4(t,l))?n=n.filter(u=>u!==l):a=o,l=Vi(l)}return s.set(t,n),n}function _V(t){let{element:s,boundary:r,rootBoundary:n,strategy:a}=t;const l=[...r==="clippingAncestors"?fp(s)?[]:RV(s,this._c):[].concat(r),n],o=l[0],c=l.reduce((d,u)=>{const m=k1(s,u,a);return d.top=Zr(m.top,d.top),d.right=Bi(m.right,d.right),d.bottom=Bi(m.bottom,d.bottom),d.left=Zr(m.left,d.left),d},k1(s,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function IV(t){const{width:s,height:r}=B4(t);return{width:s,height:r}}function $V(t,s,r){const n=ka(s),a=Ta(s),i=r==="fixed",l=Ml(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const c=xa(0);function d(){c.x=Z0(a)}if(n||!n&&!i)if((Bc(s)!=="body"||lm(a))&&(o=gp(s)),n){const x=Ml(s,!0,i,s);c.x=x.x+s.clientLeft,c.y=x.y+s.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?q4(a,o):xa(0),m=l.left+o.scrollLeft-c.x-u.x,h=l.top+o.scrollTop-c.y-u.y;return{x:m,y:h,width:l.width,height:l.height}}function mg(t){return ea(t).position==="static"}function P1(t,s){if(!ka(t)||ea(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return Ta(t)===r&&(r=r.ownerDocument.body),r}function z4(t,s){const r=nn(t);if(fp(t))return r;if(!ka(t)){let a=Vi(t);for(;a&&!Yo(a);){if(Jn(a)&&!mg(a))return a;a=Vi(a)}return r}let n=P1(t,s);for(;n&&vV(n)&&mg(n);)n=P1(n,s);return n&&Yo(n)&&mg(n)&&!Q0(n)?r:n||SV(t)||r}const FV=async function(t){const s=this.getOffsetParent||z4,r=this.getDimensions,n=await r(t.floating);return{reference:$V(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function LV(t){return ea(t).direction==="rtl"}const BV={convertOffsetParentRelativeRectToViewportRelativeRect:AV,getDocumentElement:Ta,getClippingRect:_V,getOffsetParent:z4,getElementRects:FV,getClientRects:TV,getDimensions:IV,getScale:Fo,isElement:Jn,isRTL:LV};function H4(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function VV(t,s){let r=null,n;const a=Ta(t);function i(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:u,top:m,width:h,height:x}=d;if(o||s(),!h||!x)return;const f=qm(m),p=qm(a.clientWidth-(u+h)),g=qm(a.clientHeight-(m+x)),y=qm(u),j={rootMargin:-f+"px "+-p+"px "+-g+"px "+-y+"px",threshold:Zr(0,Bi(1,c))||1};let w=!0;function N(S){const O=S[0].intersectionRatio;if(O!==c){if(!w)return l();O?l(!1,O):n=setTimeout(()=>{l(!1,1e-7)},1e3)}O===1&&!H4(d,t.getBoundingClientRect())&&l(),w=!1}try{r=new IntersectionObserver(N,{...j,root:a.ownerDocument})}catch{r=new IntersectionObserver(N,j)}r.observe(t)}return l(!0),i}function qV(t,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=X0(t),u=a||i?[...d?eu(d):[],...eu(s)]:[];u.forEach(y=>{a&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const m=d&&o?VV(d,r):null;let h=-1,x=null;l&&(x=new ResizeObserver(y=>{let[b]=y;b&&b.target===d&&x&&(x.unobserve(s),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var j;(j=x)==null||j.observe(s)})),r()}),d&&!c&&x.observe(d),x.observe(s));let f,p=c?Ml(t):null;c&&g();function g(){const y=Ml(t);p&&!H4(p,y)&&r(),p=y,f=requestAnimationFrame(g)}return r(),()=>{var y;u.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),m?.(),(y=x)==null||y.disconnect(),x=null,c&&cancelAnimationFrame(f)}}const UV=hV,zV=xV,HV=dV,KV=fV,GV=uV,A1=cV,WV=pV,QV=(t,s,r)=>{const n=new Map,a={platform:BV,...r},i={...a.platform,_c:n};return oV(t,s,{...a,platform:i})};var YV=typeof document<"u",XV=function(){},bh=YV?v.useLayoutEffect:XV;function Ih(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,n,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!Ih(t[n],s[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!Ih(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function K4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function T1(t,s){const r=K4(t);return Math.round(s*r)/r}function hg(t){const s=v.useRef(t);return bh(()=>{s.current=t}),s}function ZV(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[u,m]=v.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[h,x]=v.useState(n);Ih(h,n)||x(n);const[f,p]=v.useState(null),[g,y]=v.useState(null),b=v.useCallback(C=>{C!==S.current&&(S.current=C,p(C))},[]),j=v.useCallback(C=>{C!==O.current&&(O.current=C,y(C))},[]),w=i||f,N=l||g,S=v.useRef(null),O=v.useRef(null),P=v.useRef(u),k=c!=null,R=hg(c),F=hg(a),I=hg(d),W=v.useCallback(()=>{if(!S.current||!O.current)return;const C={placement:s,strategy:r,middleware:h};F.current&&(C.platform=F.current),QV(S.current,O.current,C).then(V=>{const z={...V,isPositioned:I.current!==!1};E.current&&!Ih(P.current,z)&&(P.current=z,_c.flushSync(()=>{m(z)}))})},[h,s,r,F,I]);bh(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,m(C=>({...C,isPositioned:!1})))},[d]);const E=v.useRef(!1);bh(()=>(E.current=!0,()=>{E.current=!1}),[]),bh(()=>{if(w&&(S.current=w),N&&(O.current=N),w&&N){if(R.current)return R.current(w,N,W);W()}},[w,N,W,R,k]);const B=v.useMemo(()=>({reference:S,floating:O,setReference:b,setFloating:j}),[b,j]),G=v.useMemo(()=>({reference:w,floating:N}),[w,N]),J=v.useMemo(()=>{const C={position:r,left:0,top:0};if(!G.floating)return C;const V=T1(G.floating,u.x),z=T1(G.floating,u.y);return o?{...C,transform:"translate("+V+"px, "+z+"px)",...K4(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:V,top:z}},[r,o,G.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:W,refs:B,elements:G,floatingStyles:J}),[u,W,B,G,J])}const JV=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&s(n)?n.current!=null?A1({element:n.current,padding:a}).fn(r):{}:n?A1({element:n,padding:a}).fn(r):{}}}},eq=(t,s)=>({...UV(t),options:[t,s]}),tq=(t,s)=>({...zV(t),options:[t,s]}),sq=(t,s)=>({...WV(t),options:[t,s]}),rq=(t,s)=>({...HV(t),options:[t,s]}),nq=(t,s)=>({...KV(t),options:[t,s]}),aq=(t,s)=>({...GV(t),options:[t,s]}),iq=(t,s)=>({...JV(t),options:[t,s]});var lq="Arrow",G4=v.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...i}=t;return e.jsx(Je.svg,{...i,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});G4.displayName=lq;var oq=G4;function om(t){const[s,r]=v.useState(void 0);return Ws(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=t.offsetWidth,o=t.offsetHeight;r({width:l,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var J0="Popper",[W4,Gi]=er(J0),[cq,Q4]=W4(J0),Y4=t=>{const{__scopePopper:s,children:r}=t,[n,a]=v.useState(null);return e.jsx(cq,{scope:s,anchor:n,onAnchorChange:a,children:r})};Y4.displayName=J0;var X4="PopperAnchor",Z4=v.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=Q4(X4,r),l=v.useRef(null),o=ft(s,l);return v.useEffect(()=>{i.onAnchorChange(n?.current||l.current)}),n?null:e.jsx(Je.div,{...a,ref:o})});Z4.displayName=X4;var eb="PopperContent",[dq,uq]=W4(eb),J4=v.forwardRef((t,s)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:f,...p}=t,g=Q4(eb,r),[y,b]=v.useState(null),j=ft(s,we=>b(we)),[w,N]=v.useState(null),S=om(w),O=S?.width??0,P=S?.height??0,k=n+(i!=="center"?"-"+i:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(d)?d:[d],I=F.length>0,W={padding:R,boundary:F.filter(hq),altBoundary:I},{refs:E,floatingStyles:B,placement:G,isPositioned:J,middlewareData:C}=ZV({strategy:"fixed",placement:k,whileElementsMounted:(...we)=>qV(...we,{animationFrame:x==="always"}),elements:{reference:g.anchor},middleware:[eq({mainAxis:a+P,alignmentAxis:l}),c&&tq({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?sq():void 0,...W}),c&&rq({...W}),nq({...W,apply:({elements:we,rects:ve,availableWidth:X,availableHeight:ce})=>{const{width:Y,height:he}=ve.reference,Fe=we.floating.style;Fe.setProperty("--radix-popper-available-width",`${X}px`),Fe.setProperty("--radix-popper-available-height",`${ce}px`),Fe.setProperty("--radix-popper-anchor-width",`${Y}px`),Fe.setProperty("--radix-popper-anchor-height",`${he}px`)}}),w&&iq({element:w,padding:o}),xq({arrowWidth:O,arrowHeight:P}),h&&aq({strategy:"referenceHidden",...W})]}),[V,z]=sD(G),le=Gs(f);Ws(()=>{J&&le?.()},[J,le]);const Ce=C.arrow?.x,H=C.arrow?.y,_=C.arrow?.centerOffset!==0,[se,te]=v.useState();return Ws(()=>{y&&te(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:E.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:J?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[C.transformOrigin?.x,C.transformOrigin?.y].join(" "),...C.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(dq,{scope:r,placedSide:V,onArrowChange:N,arrowX:Ce,arrowY:H,shouldHideArrow:_,children:e.jsx(Je.div,{"data-side":V,"data-align":z,...p,ref:j,style:{...p.style,animation:J?void 0:"none"}})})})});J4.displayName=eb;var eD="PopperArrow",mq={top:"bottom",right:"left",bottom:"top",left:"right"},tD=v.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,i=uq(eD,n),l=mq[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(oq,{...a,ref:r,style:{...a.style,display:"block"}})})});tD.displayName=eD;function hq(t){return t!==null}var xq=t=>({name:"transformOrigin",options:t,fn(s){const{placement:r,rects:n,middlewareData:a}=s,l=a.arrow?.centerOffset!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[d,u]=sD(r),m={start:"0%",center:"50%",end:"100%"}[u],h=(a.arrow?.x??0)+o/2,x=(a.arrow?.y??0)+c/2;let f="",p="";return d==="bottom"?(f=l?m:`${h}px`,p=`${-c}px`):d==="top"?(f=l?m:`${h}px`,p=`${n.floating.height+c}px`):d==="right"?(f=`${-c}px`,p=l?m:`${x}px`):d==="left"&&(f=`${n.floating.width+c}px`,p=l?m:`${x}px`),{data:{x:f,y:p}}}});function sD(t){const[s,r="center"]=t.split("-");return[s,r]}var jp=Y4,cm=Z4,vp=J4,yp=tD,[bp,OAe]=er("Tooltip",[Gi]),Np=Gi(),rD="TooltipProvider",pq=700,av="tooltip.open",[fq,tb]=bp(rD),nD=t=>{const{__scopeTooltip:s,delayDuration:r=pq,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=t,l=v.useRef(!0),o=v.useRef(!1),c=v.useRef(0);return v.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),e.jsx(fq,{scope:s,isOpenDelayedRef:l,delayDuration:r,onOpen:v.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:v.useCallback(d=>{o.current=d},[]),disableHoverableContent:a,children:i})};nD.displayName=rD;var tu="Tooltip",[gq,wp]=bp(tu),aD=t=>{const{__scopeTooltip:s,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=t,c=tb(tu,t.__scopeTooltip),d=Np(s),[u,m]=v.useState(null),h=rn(),x=v.useRef(0),f=l??c.disableHoverableContent,p=o??c.delayDuration,g=v.useRef(!1),[y,b]=Hr({prop:n,defaultProp:a??!1,onChange:O=>{O?(c.onOpen(),document.dispatchEvent(new CustomEvent(av))):c.onClose(),i?.(O)},caller:tu}),j=v.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),w=v.useCallback(()=>{window.clearTimeout(x.current),x.current=0,g.current=!1,b(!0)},[b]),N=v.useCallback(()=>{window.clearTimeout(x.current),x.current=0,b(!1)},[b]),S=v.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{g.current=!0,b(!0),x.current=0},p)},[p,b]);return v.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),e.jsx(jp,{...d,children:e.jsx(gq,{scope:s,contentId:h,open:y,stateAttribute:j,trigger:u,onTriggerChange:m,onTriggerEnter:v.useCallback(()=>{c.isOpenDelayedRef.current?S():w()},[c.isOpenDelayedRef,S,w]),onTriggerLeave:v.useCallback(()=>{f?N():(window.clearTimeout(x.current),x.current=0)},[N,f]),onOpen:w,onClose:N,disableHoverableContent:f,children:r})})};aD.displayName=tu;var iv="TooltipTrigger",iD=v.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=wp(iv,r),i=tb(iv,r),l=Np(r),o=v.useRef(null),c=ft(s,o,a.onTriggerChange),d=v.useRef(!1),u=v.useRef(!1),m=v.useCallback(()=>d.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(cm,{asChild:!0,...l,children:e.jsx(Je.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:$e(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:$e(t.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:$e(t.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:$e(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:$e(t.onBlur,a.onClose),onClick:$e(t.onClick,a.onClose)})})});iD.displayName=iv;var jq="TooltipPortal",[EAe,vq]=bp(jq,{forceMount:void 0}),Xo="TooltipContent",lD=v.forwardRef((t,s)=>{const r=vq(Xo,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=t,l=wp(Xo,t.__scopeTooltip);return e.jsx(cr,{present:n||l.open,children:l.disableHoverableContent?e.jsx(oD,{side:a,...i,ref:s}):e.jsx(yq,{side:a,...i,ref:s})})}),yq=v.forwardRef((t,s)=>{const r=wp(Xo,t.__scopeTooltip),n=tb(Xo,t.__scopeTooltip),a=v.useRef(null),i=ft(s,a),[l,o]=v.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=n,h=v.useCallback(()=>{o(null),m(!1)},[m]),x=v.useCallback((f,p)=>{const g=f.currentTarget,y={x:f.clientX,y:f.clientY},b=Cq(y,g.getBoundingClientRect()),j=kq(y,b),w=Pq(p.getBoundingClientRect()),N=Tq([...j,...w]);o(N),m(!0)},[m]);return v.useEffect(()=>()=>h(),[h]),v.useEffect(()=>{if(c&&u){const f=g=>x(g,u),p=g=>x(g,c);return c.addEventListener("pointerleave",f),u.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",f),u.removeEventListener("pointerleave",p)}}},[c,u,x,h]),v.useEffect(()=>{if(l){const f=p=>{const g=p.target,y={x:p.clientX,y:p.clientY},b=c?.contains(g)||u?.contains(g),j=!Aq(y,l);b?h():j&&(h(),d())};return document.addEventListener("pointermove",f),()=>document.removeEventListener("pointermove",f)}},[c,u,l,d,h]),e.jsx(oD,{...t,ref:i})}),[bq,Nq]=bp(tu,{isInside:!1}),wq=VT("TooltipContent"),oD=v.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=t,c=wp(Xo,r),d=Np(r),{onClose:u}=c;return v.useEffect(()=>(document.addEventListener(av,u),()=>document.removeEventListener(av,u)),[u]),v.useEffect(()=>{if(c.trigger){const m=h=>{h.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),e.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:e.jsxs(vp,{"data-state":c.stateAttribute,...d,...o,ref:s,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(wq,{children:n}),e.jsx(bq,{scope:r,isInside:!0,children:e.jsx(d8,{id:c.contentId,role:"tooltip",children:a||n})})]})})});lD.displayName=Xo;var cD="TooltipArrow",Sq=v.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Np(r);return Nq(cD,r).isInside?null:e.jsx(yp,{...a,...n,ref:s})});Sq.displayName=cD;function Cq(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function kq(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function Pq(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function Aq(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],d=o.x,u=o.y,m=c.x,h=c.y;u>n!=h>n&&r<(m-d)*(n-u)/(h-u)+d&&(a=!a)}return a}function Tq(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Dq(s)}function Dq(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Oq=nD,Eq=aD,Mq=iD,dD=lD;const dm=Oq,Si=Eq,Ci=Mq,Va=v.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(dD,{ref:n,sideOffset:s,className:Be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));Va.displayName=dD.displayName;const su=Zu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=v.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},i)=>{const l=n?LT:"button";return e.jsx(l,{className:Be(su({variant:s,size:r,className:t})),ref:i,...a})});M.displayName="Button";class Lo{static{this.SESSION_KEY="hostpilot_fast_auth_session"}static saveSession(s){try{localStorage.setItem(this.SESSION_KEY,JSON.stringify({...s,expiresAt:s.expiresAt.toISOString()}))}catch(r){console.error("Failed to save auth session:",r)}}static getSession(){try{const s=localStorage.getItem(this.SESSION_KEY);if(!s)return null;const r=JSON.parse(s),n=new Date(r.expiresAt);return n<=new Date?(this.clearSession(),null):{...r,expiresAt:n}}catch(s){return console.error("Failed to retrieve auth session:",s),this.clearSession(),null}}static clearSession(){try{localStorage.removeItem(this.SESSION_KEY)}catch(s){console.error("Failed to clear auth session:",s)}}}async function Rq(t,s){const r=fetch("/api/auth/demo-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s}),credentials:"include"});try{const n=await r;if(!n.ok){const c=await n.json();throw new Error(c.message||"Login failed")}const a=await n.json();console.log("Login response data:",a);const i=a.user||a,l={id:i.id,email:i.email,name:`${i.firstName||""} ${i.lastName||""}`.trim()||i.email,role:i.role||i.primaryRole,organizationId:i.organizationId,permissions:i.permissions||[],listingsAccess:i.listingsAccess||[]};console.log("Created auth user:",l);const o={user:l,expiresAt:new Date(Date.now()+24*60*60*1e3)};return Lo.saveSession(o),l}catch(n){throw Lo.clearSession(),n}}async function _q(){Lo.clearSession();try{const t=await fetch("/api/auth/demo-logout",{method:"POST",credentials:"include"});t.ok?console.log("Logout successful"):console.error("Logout API failed with status:",t.status)}catch(t){console.error("Logout API failed:",t)}}function On(){const[t,s]=v.useState(null),[r,n]=v.useState(!0);v.useEffect(()=>{a()},[]);const a=async()=>{try{const o=await fetch("/api/auth/user",{credentials:"include"});if(o.ok){const c=await o.json();console.log("Server auth response:",c);const d={...c,permissions:[],listingsAccess:[]};console.log("Processed auth user:",d);const u={user:d,expiresAt:new Date(Date.now()+24*60*60*1e3)};Lo.saveSession(u),s(d)}else Lo.clearSession(),s(null)}catch(o){console.error("Auth check failed:",o),Lo.clearSession(),s(null)}finally{n(!1)}};return{user:t,isLoading:r,login:async(o,c)=>{const d=await Rq(o,c);return s(d),d},logout:async()=>{try{s(null),await _q(),setTimeout(()=>{window.location.href="/"},100)}catch(o){console.error("Logout failed:",o),s(null),window.location.href="/"}},isAuthenticated:!!t}}const uD=v.createContext(void 0);function Iq({children:t}){const[s,r]=v.useState(()=>localStorage.getItem("sidebarCollapsed")==="true");v.useEffect(()=>{localStorage.setItem("sidebarCollapsed",String(s))},[s]),v.useEffect(()=>{const a=i=>{i.key==="sidebarCollapsed"&&i.newValue!==null&&r(i.newValue==="true")};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const n=()=>{r(a=>!a)};return e.jsx(uD.Provider,{value:{collapsed:s,toggleCollapsed:n,setCollapsed:r},children:t})}function $q(){const t=v.useContext(uD);if(t===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return t}function Fq({className:t}){const[s,r]=or(),{collapsed:n,toggleCollapsed:a}=$q(),[i,l]=v.useState(!1),[o,c]=v.useState(!1),{user:d,isAuthenticated:u,logout:m}=On();v.useEffect(()=>{const y=window.matchMedia("(max-width: 767px)"),b=j=>{l(j.matches),j.matches||c(!1)};return b(y),y.addEventListener("change",b),()=>y.removeEventListener("change",b)},[]);const h=d?.role||"guest",f=(y=>{const b=[{label:"Dashboard",icon:$s,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:bs,href:"/property-hub",tooltip:"Property Management"},{label:"Finance",icon:Ze,href:"/finance-hub",tooltip:"Finance Hub"},{label:"System",icon:ss,href:"/system-hub",tooltip:"System Settings"},{label:"Salaries",icon:_o,href:"/salaries-wages",tooltip:"Staff Salaries"},{label:"Achievements",icon:Hn,href:"/achievements",tooltip:"Achievements"}];return{admin:b,"portfolio-manager":b,staff:[{label:"Dashboard",icon:$s,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:bs,href:"/property-hub",tooltip:"Property Management"},{label:"Achievements",icon:Hn,href:"/achievements",tooltip:"Achievements"}],owner:[{label:"Dashboard",icon:$s,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:bs,href:"/property-hub",tooltip:"Property Management"},{label:"Finance",icon:Ze,href:"/finance-hub",tooltip:"Finance Hub"},{label:"Achievements",icon:Hn,href:"/achievements",tooltip:"Achievements"}],guest:[{label:"My Stay",icon:Jt,href:"/",tooltip:"Guest Dashboard"},{label:"Property Info",icon:At,href:"/property-info",tooltip:"Property Information"},{label:"Calendar",icon:Xe,href:"/services",tooltip:"Services"}]}[y]||b})(h),p=async()=>{try{await m()}catch(y){console.error("Logout error:",y),window.location.href="/"}},g=y=>{r(y),i&&c(!1)};return u?e.jsxs(dm,{delayDuration:200,children:[i&&e.jsx("button",{"aria-expanded":o,"aria-label":o?"Close menu":"Open menu",onClick:()=>c(y=>!y),className:"max-h-screen fixed top-4 left-4 z-60 p-2 rounded-md bg-white/90 dark:bg-black/90 shadow-lg md:hidden",children:o?e.jsx(Es,{className:"h-5 w-5"}):e.jsx(K8,{className:"h-5 w-5"})}),i&&o&&e.jsx("div",{onClick:()=>c(!1),className:"min-h-screen fixed inset-0 bg-black/50 z-40 md:hidden"}),e.jsxs("div",{className:Be("fixed left-0 top-0 h-screen bg-white dark:bg-black text-black dark:text-slate-500 flex flex-col items-start transition-all duration-300 ease-in-out shadow-2xl z-50",!i&&(n?"w-16":"w-64"),i&&(o?"w-64 translate-x-0":"w-64 -translate-x-full pointer-events-none"),t),children:[e.jsx("div",{className:"w-full border-b border-slate-700/50 text-black dark:text-white",children:e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:Be("w-10 h-10 bg-emerald-500 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",n&&"w-8 h-8"),children:e.jsx(At,{className:Be("text-white",n?"h-4 w-4":"h-5 w-5")})}),!n&&!i&&e.jsx("div",{className:"flex flex-col min-w-0",children:e.jsx("span",{className:"font-bold text-sm text-black dark:text-white truncate",children:"HostPilotPro"})})]}),i&&o&&e.jsx("button",{"aria-label":"Close sidebar",onClick:()=>c(!1),className:"p-1 rounded-md",children:e.jsx(Es,{className:"h-4 w-4"})})]})}),e.jsx("nav",{className:"flex-1 w-full overflow-y-auto py-4 px-2 text-black",children:e.jsx("ul",{className:"space-y-1",children:f.map((y,b)=>{const j=y.icon,w=s===y.href||s.startsWith(y.href+"?"),N=e.jsxs("button",{onClick:()=>g(y.href),className:Be("w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200",w?"bg-emerald-500 text-white shadow-lg":"text-slate-900 hover:bg-slate-700/50 hover:text-white",(n||i&&!o)&&"justify-center px-2"),"data-testid":`nav-${y.label.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx(j,{className:Be("flex-shrink-0","h-5 w-5")}),!n&&(!i||o)&&e.jsx("span",{className:"text-sm font-medium truncate",children:y.label})]},b);return n&&!i?e.jsx("li",{children:e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:N}),e.jsx(Va,{side:"right",className:"bg-slate-700 text-white border-slate-600",children:y.tooltip})]})},b):e.jsx("li",{children:N},b)})})}),e.jsxs("div",{className:"w-full border-t border-slate-700/50 flex-none",children:[!n&&(!i||o)&&e.jsx("div",{className:"px-4 py-3",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:p,className:"w-full justify-start text-slate-900 hover:bg-slate-700/50 hover:text-white",children:[e.jsx(vn,{className:"h-4 w-4 mr-2"}),"Logout"]})}),!i&&e.jsx("div",{className:"p-3",children:e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",onClick:a,"aria-expanded":!n,"aria-label":n?"Expand sidebar":"Collapse sidebar",className:Be("w-full h-10 text-slate-300 hover:bg-slate-700/50 hover:text-white transition-all duration-200",n&&"justify-center px-0"),"data-testid":"sidebar-toggle",children:n?e.jsx(zn,{className:"h-5 w-5"}):e.jsxs(e.Fragment,{children:[e.jsx(Ka,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-sm",children:"Collapse"})]})})}),e.jsx(Va,{side:"right",className:"bg-slate-700 text-white border-slate-600",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})]})]})]}):null}class Lq{constructor(){this.cache=new Map,this.listeners=new Map,this.CACHE_DURATION=120*1e3}set(s,r){this.cache.set(s,{data:r,timestamp:Date.now(),key:s,isStale:!1}),this.notifyListeners(s,r)}addListener(s,r){this.listeners.has(s)||this.listeners.set(s,new Set),this.listeners.get(s).add(r)}removeListener(s,r){const n=this.listeners.get(s);n&&(n.delete(r),n.size===0&&this.listeners.delete(s))}notifyListeners(s,r){const n=this.listeners.get(s);n&&n.forEach(a=>a(s,r))}get(s){const r=this.cache.get(s);return r?Date.now()-r.timestamp>this.CACHE_DURATION?(this.cache.delete(s),null):r.data:null}isStale(s){const r=this.cache.get(s);return r?Date.now()-r.timestamp>this.CACHE_DURATION:!0}clear(s){if(!s){this.cache.clear();return}for(const[r]of this.cache)r.includes(s)&&this.cache.delete(r)}getAllCachedKeys(){return Array.from(this.cache.keys())}getCacheStats(){const s=Date.now();let r=0,n=0;for(const a of this.cache.values())s-a.timestamp>this.CACHE_DURATION?r++:n++;return{total:this.cache.size,expired:r,active:n}}async preloadDashboardData(){const r=["/api/dashboard/stats","/api/properties","/api/tasks","/api/bookings","/api/finance/analytics"].map(async n=>{try{const a=await fetch(n,{credentials:"include"});if(a.ok){const i=await a.json();this.set(n,i)}}catch(a){console.warn(`Failed to preload ${n}:`,a)}});await Promise.allSettled(r)}}const vi=new Lq;function Bq(){typeof window<"u"&&setTimeout(()=>{vi.preloadDashboardData()},1e3)}const mD=v.createContext(void 0);function Vq({children:t}){const[,s]=v.useState({}),r=d=>vi.get(d),n=(d,u)=>{vi.set(d,u),s({})},c={getCachedData:r,setCachedData:n,refreshData:async d=>{try{const u=await fetch(d,{credentials:"include"});if(u.ok){const m=await u.json();return n(d,m),m}}catch(u){console.error(`Failed to refresh data for ${d}:`,u)}},isStale:d=>vi.isStale(d),clearCache:d=>{vi.clear(d),s({})},subscribeToCacheUpdates:(d,u)=>{const m=(h,x)=>{h===d&&u(x)};return vi.addListener(d,m),()=>{vi.removeListener(d,m)}}};return e.jsx(mD.Provider,{value:c,children:t})}function hD(){const t=v.useContext(mD);if(t===void 0)throw new Error("useCache must be used within a CacheProvider");return t}function xD(t,s,r={}){const{getCachedData:n,setCachedData:a,subscribeToCacheUpdates:i,isStale:l}=hD(),[o,c]=v.useState(()=>n(t)),[d,u]=v.useState(!o),[m,h]=v.useState(null);v.useEffect(()=>i(t,p=>{c(p),u(!1),h(null)}),[t,i]);const x=async(f=!0)=>{try{if(h(null),f){const g=n(t);if(g)return c(g),u(!1),l(t)&&r.backgroundRefresh!==!1&&x(!1),g}u(!0);let p;if(!s){const g=await fetch(t,{credentials:"include"});if(!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);p=await g.json()}return a(t,p),c(p),p}catch(p){const g=p instanceof Error?p:new Error("Unknown error");h(g);const y=n(t);y&&c(y)}finally{u(!1)}};return v.useEffect(()=>{x()},[t]),v.useEffect(()=>{if(r.refetchInterval){const f=setInterval(()=>{x(!1)},r.refetchInterval);return()=>clearInterval(f)}},[r.refetchInterval]),{data:o,isLoading:d,error:m,refetch:()=>x(!1),isStale:l(t)}}const qq={USD:"$",EUR:"â‚¬",GBP:"Â£",THB:"à¸¿",JPY:"Â¥",AUD:"A$",SGD:"S$",MYR:"RM",INR:"â‚¹",CNY:"Â¥"},Uq={USD:"en-US",EUR:"de-DE",GBP:"en-GB",THB:"th-TH",JPY:"ja-JP",AUD:"en-AU",SGD:"en-SG",MYR:"ms-MY",INR:"en-IN",CNY:"zh-CN"},pD=v.createContext(null),zq={USD:1,EUR:.92,GBP:.79,THB:35.5,JPY:149.5,AUD:1.53,SGD:1.34,MYR:4.47,INR:83.5,CNY:7.24};function Hq({children:t}){const s=pt(),[r,n]=v.useState(null),{data:a,isLoading:i}=xe({queryKey:["/api/system-settings"],staleTime:0,refetchOnWindowFocus:!0}),l=a?.baseCurrency||"USD",o=a?.displayCurrency||l,{data:c,isLoading:d,refetch:u}=xe({queryKey:["/api/currency/rates",l],staleTime:30*60*1e3,gcTime:60*60*1e3,enabled:!0}),m=c?.rates||zq,h=c?.symbols||qq,x=v.useCallback(async j=>{try{if(!(await fetch("/api/system-settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({displayCurrency:j})})).ok)throw new Error("Failed to update currency");hr.deleteByPattern("/api/system-settings"),hr.deleteByPattern("/api/currency"),hr.deleteByPattern("/api/finance"),hr.deleteByPattern("/api/dashboard"),hr.deleteByPattern("/api/properties"),hr.deleteByPattern("/api/bookings"),await s.refetchQueries({queryKey:["/api/system-settings"],type:"active"}),await s.refetchQueries({queryKey:["/api/currency/rates"],type:"active"}),s.invalidateQueries({queryKey:["/api/finance"]}),s.invalidateQueries({queryKey:["/api/dashboard"]}),s.invalidateQueries({queryKey:["/api/properties"]}),s.invalidateQueries({queryKey:["/api/bookings"]}),n(null)}catch(w){console.error("Error setting display currency:",w),n("Failed to update currency")}},[s]),f=v.useCallback((j,w=l)=>{if(j==null)return 0;const N=typeof j=="string"?parseFloat(j):j;if(isNaN(N))return 0;if(w===o)return N;const S=p(w,o);return N*S},[l,o,m]),p=v.useCallback((j,w)=>j===w?1:j===l&&m[w]?m[w]:m[j]&&m[w]?m[w]/m[j]:(console.warn(`No rate found for ${j} -> ${w}`),1),[l,m]),g=v.useCallback((j,w={})=>{if(j==null)return`${w.showSymbol!==!1?h[o]||o:""}0`;const N=typeof j=="string"?parseFloat(j):j;if(isNaN(N))return`${w.showSymbol!==!1?h[o]||o:""}0`;const S=w.showSymbol!==!1?h[o]||o:"",O=Uq[o]||"en-US",P=!["JPY","THB"].includes(o),k=w.decimals??(P?2:0);try{const R=new Intl.NumberFormat(O,{minimumFractionDigits:k,maximumFractionDigits:k}).format(N);return`${S}${R}`}catch{return`${S}${N.toLocaleString()}`}},[o,h]),y=v.useCallback((j,w=l,N={})=>{const S=f(j,w);return g(S,N)},[f,g,l]),b={baseCurrency:l,displayCurrency:o,rates:m,symbols:h,isLoading:i||d,error:r,setDisplayCurrency:x,convertAmount:f,formatCurrency:g,formatCurrencyWithConversion:y,getRate:p,refetchRates:()=>u()};return e.jsx(pD.Provider,{value:b,children:t})}function Kq(){const t=v.useContext(pD);if(!t)throw new Error("useCurrencyContext must be used within a CurrencyProvider");return t}const Tt={auth:{user:()=>["/api/auth/user"]},properties:{all:()=>["/api/properties"],detail:t=>["/api/properties",t]},finance:{all:()=>["/api/finance"],analytics:t=>t?[`/api/finance/analytics?propertyId=${t}`]:["/api/finance/analytics"]},bookings:{all:()=>["/api/bookings"],withSource:t=>t?[`/api/bookings/with-source?propertyId=${t}`]:["/api/bookings/with-source"]},tasks:{all:()=>["/api/tasks"],byProperty:t=>["/api/tasks",{propertyId:t}]},utilities:{all:()=>["/api/utilities"],byProperty:t=>["/api/utilities",{propertyId:t}]},dashboard:{summary:()=>["/api/dashboard"]},documents:{all:()=>["/api/property-documents"],expiring:()=>["/api/property-documents/expiring"],byProperty:t=>["/api/property-documents",{propertyId:t}]},users:{all:()=>["/api/users"]},services:{all:()=>["/api/addon-services"]},serviceBookings:{all:()=>["/api/service-bookings"]},staff:{all:()=>["/api/staff"]},owners:{all:()=>["/api/owners"]},settings:{system:()=>["/api/system-settings"],currency:()=>["/api/currency/rates"]},inventory:{all:()=>["/api/inventory"]},vendors:{all:()=>["/api/vendors"]}},Gq={property:["/api/properties","/api/dashboard","/api/fast/properties","/api/finance"],task:["/api/tasks","/api/dashboard","/api/fast/tasks","/api/ultra-fast-tasks"],booking:["/api/bookings","/api/dashboard","/api/finance","/api/booking-revenue"],finance:["/api/finance","/api/dashboard","/api/booking-revenue"],service:["/api/addon-services","/api/services"],serviceBooking:["/api/service-bookings","/api/finance","/api/dashboard"],staff:["/api/staff","/api/dashboard"],utility:["/api/utilities","/api/utility-bills","/api/dashboard"],document:["/api/property-documents","/api/documents"],owner:["/api/owners","/api/owner"],settings:["/api/system-settings","/api/currency","/api/dashboard","/api/finance","/api/properties","/api/bookings"],automation:["/api/automation","/api/tasks"],inventory:["/api/inventory"],vendor:["/api/vendors"],investment:["/api/investments","/api/property-investments"],review:["/api/reviews","/api/property-reviews"],certification:["/api/certifications","/api/staff-certifications"],securityDeposit:["/api/security-deposits","/api/finance"],sustainability:["/api/sustainability","/api/sustainability-metrics"],sharedCost:["/api/shared-costs","/api/finance"],chat:["/api/chat","/api/property-chat"]},cs=t=>{hr.deleteByPattern(t)},sb=async t=>{cs("/api/finance"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.finance.all(),type:"active"}),t.invalidateQueries({predicate:s=>{const r=s.queryKey[0];return typeof r=="string"&&r.includes("/api/finance/analytics")}}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},$h=async t=>{cs("/api/properties"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.properties.all(),type:"active"}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},Rl=async t=>{cs("/api/bookings"),cs("/api/finance"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.bookings.all(),type:"active"}),t.invalidateQueries({predicate:s=>{const r=s.queryKey[0];return typeof r=="string"&&r.includes("/api/bookings/with-source")}}),t.invalidateQueries({queryKey:Tt.finance.all()}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},Wq=async t=>{cs("/api/tasks"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.tasks.all(),type:"active"}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},Qq=async t=>{cs("/api/utilities"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.utilities.all(),type:"active"}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},Yq=async t=>{cs("/api/property-documents"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.documents.all(),type:"active"}),t.invalidateQueries({queryKey:Tt.documents.expiring()}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},fD=async t=>{cs("/api/system-settings"),cs("/api/currency"),cs("/api/dashboard"),cs("/api/finance"),cs("/api/properties"),cs("/api/bookings"),await t.refetchQueries({queryKey:["/api/system-settings"],type:"active"}),await t.refetchQueries({queryKey:["/api/currency/rates"],type:"active"}),t.invalidateQueries({queryKey:Tt.finance.all()}),t.invalidateQueries({queryKey:Tt.dashboard.summary()}),t.invalidateQueries({queryKey:Tt.properties.all()}),t.invalidateQueries({queryKey:Tt.bookings.all()})},Xq=async t=>{cs("/api/addon-services"),cs("/api/services"),await t.refetchQueries({queryKey:Tt.services.all(),type:"active"})},Zq=async t=>{cs("/api/service-bookings"),cs("/api/finance"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.serviceBookings.all(),type:"active"}),t.invalidateQueries({queryKey:Tt.finance.all()}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},Jq=async t=>{cs("/api/staff"),cs("/api/dashboard"),await t.refetchQueries({queryKey:Tt.staff.all(),type:"active"}),t.invalidateQueries({queryKey:Tt.dashboard.summary()})},eU=async t=>{cs("/api/owners"),cs("/api/owner"),await t.refetchQueries({queryKey:Tt.owners.all(),type:"active"})},tU=async t=>{cs("/api/inventory"),await t.refetchQueries({queryKey:Tt.inventory.all(),type:"active"})},sU=async t=>{cs("/api/vendors"),await t.refetchQueries({queryKey:Tt.vendors.all(),type:"active"})},rU=async(t,s)=>{const r=Gq[s]||[];for(const n of r)cs(n);switch(s){case"property":await $h(t);break;case"task":await Wq(t);break;case"booking":await Rl(t);break;case"finance":await sb(t);break;case"service":await Xq(t);break;case"serviceBooking":await Zq(t);break;case"staff":await Jq(t);break;case"utility":await Qq(t);break;case"document":await Yq(t);break;case"owner":await eU(t);break;case"settings":await fD(t);break;case"inventory":await tU(t);break;case"vendor":await sU(t);break;default:for(const n of r)t.invalidateQueries({predicate:a=>{const i=a.queryKey[0];return typeof i=="string"&&i.includes(n)}});t.invalidateQueries({queryKey:Tt.dashboard.summary()})}console.log(`[RT] Invalidated queries for resource: ${s}`)};function nU(t={}){const{enabled:s=!0,organizationId:r,onEvent:n,debounceMs:a=100}=t,i=pt(),l=v.useRef(null),o=v.useRef(null),c=v.useRef(new Set),d=v.useRef(null),u=v.useRef(0),m=10,h=1e3,x=v.useCallback(async()=>{const b=Array.from(c.current);c.current.clear();for(const j of b)try{await rU(i,j)}catch(w){console.error(`[RT] Error invalidating ${j}:`,w)}},[i]),f=v.useCallback(b=>{c.current.add(b),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{x()},a)},[a,x]),p=v.useCallback(b=>{console.log(`[RT] Received event: ${b.type}:${b.action}`,b),n&&n(b),f(b.type)},[n,f]),g=v.useCallback(()=>{if(!s)return;l.current&&l.current.close();const b=new URL("/api/realtime/events",window.location.origin);r&&b.searchParams.set("organizationId",r.toString()),console.log("[RT] Connecting to SSE endpoint...");const j=new EventSource(b.toString());l.current=j,j.onopen=()=>{console.log("[RT] SSE connection established"),u.current=0},j.onmessage=w=>{try{const N=JSON.parse(w.data);if(N.type==="connected"){console.log("[RT] SSE connected with clientId:",N.clientId);return}p(N)}catch(N){console.error("[RT] Error parsing SSE message:",N)}},j.onerror=w=>{if(console.error("[RT] SSE connection error:",w),j.close(),l.current=null,u.current<m){const N=h*Math.pow(2,u.current);console.log(`[RT] Reconnecting in ${N}ms (attempt ${u.current+1})`),o.current=setTimeout(()=>{u.current++,g()},N)}else console.error("[RT] Max reconnection attempts reached")}},[s,r,p]),y=v.useCallback(()=>{l.current&&(l.current.close(),l.current=null),o.current&&(clearTimeout(o.current),o.current=null),d.current&&(clearTimeout(d.current),d.current=null),u.current=0,console.log("[RT] SSE disconnected")},[]);return v.useEffect(()=>(s?g():y(),()=>{y()}),[s,g,y]),v.useEffect(()=>{s&&r!==void 0&&(y(),g())},[r]),{isConnected:l.current?.readyState===EventSource.OPEN,disconnect:y,reconnect:g}}const D=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Be("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));D.displayName="Card";const $=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Be("flex flex-col space-y-1.5 p-6",t),...s}));$.displayName="CardHeader";const L=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Be("text-2xl font-semibold leading-none tracking-tight",t),...s}));L.displayName="CardTitle";const Ee=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Be("text-sm text-muted-foreground",t),...s}));Ee.displayName="CardDescription";const T=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Be("p-6 pt-0",t),...s}));T.displayName="CardContent";const aU=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Be("flex items-center p-6 pt-0",t),...s}));aU.displayName="CardFooter";v.lazy(()=>br(()=>Promise.resolve().then(()=>BG),void 0));const iU=v.lazy(()=>br(()=>import("./SimpleFilteredFinancialDashboard-AiMFq9LT.js"),__vite__mapDeps([0,1,2])));v.lazy(()=>br(()=>import("./FilteredPropertyDashboard-CrYE6uJQ.js"),__vite__mapDeps([3,1,2])));function lU(){return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),e.jsx(T,{children:e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},t))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2].map(t=>e.jsxs(D,{children:[e.jsx($,{children:e.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"},s))})})]},t))})]})}function oU(){return e.jsx(v.Suspense,{fallback:e.jsx(lU,{}),children:e.jsx(iU,{})})}const Q=v.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:Be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Q.displayName="Input";const cU=Zu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function U({className:t,variant:s,...r}){return e.jsx("div",{className:Be(cU({variant:s}),t),...r})}function ru(t,[s,r]){return Math.min(r,Math.max(s,t))}var dU=v.createContext(void 0);function Xl(t){const s=v.useContext(dU);return t||s||"ltr"}var xg=0;function Sp(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??D1()),document.body.insertAdjacentElement("beforeend",t[1]??D1()),xg++,()=>{xg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),xg--}},[])}function D1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pg="focusScope.autoFocusOnMount",fg="focusScope.autoFocusOnUnmount",O1={bubbles:!1,cancelable:!0},uU="FocusScope",um=v.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=v.useState(null),d=Gs(a),u=Gs(i),m=v.useRef(null),h=ft(s,p=>c(p)),x=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let p=function(j){if(x.paused||!o)return;const w=j.target;o.contains(w)?m.current=w:gi(m.current,{select:!0})},g=function(j){if(x.paused||!o)return;const w=j.relatedTarget;w!==null&&(o.contains(w)||gi(m.current,{select:!0}))},y=function(j){if(document.activeElement===document.body)for(const N of j)N.removedNodes.length>0&&gi(o)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const b=new MutationObserver(y);return o&&b.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),b.disconnect()}}},[n,o,x.paused]),v.useEffect(()=>{if(o){M1.add(x);const p=document.activeElement;if(!o.contains(p)){const y=new CustomEvent(pg,O1);o.addEventListener(pg,d),o.dispatchEvent(y),y.defaultPrevented||(mU(gU(gD(o)),{select:!0}),document.activeElement===p&&gi(o))}return()=>{o.removeEventListener(pg,d),setTimeout(()=>{const y=new CustomEvent(fg,O1);o.addEventListener(fg,u),o.dispatchEvent(y),y.defaultPrevented||gi(p??document.body,{select:!0}),o.removeEventListener(fg,u),M1.remove(x)},0)}}},[o,d,u,x]);const f=v.useCallback(p=>{if(!r&&!n||x.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(g&&y){const b=p.currentTarget,[j,w]=hU(b);j&&w?!p.shiftKey&&y===w?(p.preventDefault(),r&&gi(j,{select:!0})):p.shiftKey&&y===j&&(p.preventDefault(),r&&gi(w,{select:!0})):y===b&&p.preventDefault()}},[r,n,x.paused]);return e.jsx(Je.div,{tabIndex:-1,...l,ref:h,onKeyDown:f})});um.displayName=uU;function mU(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(gi(n,{select:s}),document.activeElement!==r)return}function hU(t){const s=gD(t),r=E1(s,t),n=E1(s.reverse(),t);return[r,n]}function gD(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function E1(t,s){for(const r of t)if(!xU(r,{upTo:s}))return r}function xU(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function pU(t){return t instanceof HTMLInputElement&&"select"in t}function gi(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&pU(t)&&s&&t.select()}}var M1=fU();function fU(){let t=[];return{add(s){const r=t[0];s!==r&&r?.pause(),t=R1(t,s),t.unshift(s)},remove(s){t=R1(t,s),t[0]?.resume()}}}function R1(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function gU(t){return t.filter(s=>s.tagName!=="A")}function mm(t){const s=v.useRef({value:t,previous:t});return v.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var jU=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},oo=new WeakMap,Um=new WeakMap,zm={},gg=0,jD=function(t){return t&&(t.host||jD(t.parentNode))},vU=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=jD(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},yU=function(t,s,r,n){var a=vU(s,Array.isArray(t)?t:[t]);zm[r]||(zm[r]=new WeakMap);var i=zm[r],l=[],o=new Set,c=new Set(a),d=function(m){!m||o.has(m)||(o.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(o.has(h))u(h);else try{var x=h.getAttribute(n),f=x!==null&&x!=="false",p=(oo.get(h)||0)+1,g=(i.get(h)||0)+1;oo.set(h,p),i.set(h,g),l.push(h),p===1&&f&&Um.set(h,!0),g===1&&h.setAttribute(r,"true"),f||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(s),o.clear(),gg++,function(){l.forEach(function(m){var h=oo.get(m)-1,x=i.get(m)-1;oo.set(m,h),i.set(m,x),h||(Um.has(m)||m.removeAttribute(n),Um.delete(m)),x||m.removeAttribute(r)}),gg--,gg||(oo=new WeakMap,oo=new WeakMap,Um=new WeakMap,zm={})}},Cp=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=jU(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),yU(n,a,r,"aria-hidden")):function(){return null}},la=function(){return la=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},la.apply(this,arguments)};function vD(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function bU(t,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}var Nh="right-scroll-bar-position",wh="width-before-scroll-bar",NU="with-scroll-bars-hidden",wU="--removed-body-scroll-bar-size";function jg(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function SU(t,s){var r=v.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var CU=typeof window<"u"?v.useLayoutEffect:v.useEffect,_1=new WeakMap;function kU(t,s){var r=SU(null,function(n){return t.forEach(function(a){return jg(a,n)})});return CU(function(){var n=_1.get(r);if(n){var a=new Set(n),i=new Set(t),l=r.current;a.forEach(function(o){i.has(o)||jg(o,null)}),i.forEach(function(o){a.has(o)||jg(o,l)})}_1.set(r,t)},[t]),r}function PU(t){return t}function AU(t,s){s===void 0&&(s=PU);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var l=s(i,n);return r.push(l),function(){r=r.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(n=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(o){return i(o)},filter:function(){return r}}},assignMedium:function(i){n=!0;var l=[];if(r.length){var o=r;r=[],o.forEach(i),l=r}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),r}}}};return a}function TU(t){t===void 0&&(t={});var s=AU(null);return s.options=la({async:!0,ssr:!1},t),s}var yD=function(t){var s=t.sideCar,r=vD(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return v.createElement(n,la({},r))};yD.isSideCarExport=!0;function DU(t,s){return t.useMedium(s),yD}var bD=TU(),vg=function(){},kp=v.forwardRef(function(t,s){var r=v.useRef(null),n=v.useState({onScrollCapture:vg,onWheelCapture:vg,onTouchMoveCapture:vg}),a=n[0],i=n[1],l=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,m=t.shards,h=t.sideCar,x=t.noRelative,f=t.noIsolation,p=t.inert,g=t.allowPinchZoom,y=t.as,b=y===void 0?"div":y,j=t.gapMode,w=vD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,S=kU([r,s]),O=la(la({},w),a);return v.createElement(v.Fragment,null,u&&v.createElement(N,{sideCar:bD,removeScrollBar:d,shards:m,noRelative:x,noIsolation:f,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:j}),l?v.cloneElement(v.Children.only(o),la(la({},O),{ref:S})):v.createElement(b,la({},O,{className:c,ref:S}),o))});kp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kp.classNames={fullWidth:wh,zeroRight:Nh};var OU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function EU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=OU();return s&&t.setAttribute("nonce",s),t}function MU(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function RU(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var _U=function(){var t=0,s=null;return{add:function(r){t==0&&(s=EU())&&(MU(s,r),RU(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},IU=function(){var t=_U();return function(s,r){v.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},ND=function(){var t=IU(),s=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return s},$U={left:0,top:0,right:0,gap:0},yg=function(t){return parseInt(t||"",10)||0},FU=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[yg(r),yg(n),yg(a)]},LU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return $U;var s=FU(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},BU=ND(),Bo="data-scroll-locked",VU=function(t,s,r,n){var a=t.left,i=t.top,l=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(NU,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(Bo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Nh,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(wh,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(Nh," .").concat(Nh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(wh," .").concat(wh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Bo,`] {
    `).concat(wU,": ").concat(o,`px;
  }
`)},I1=function(){var t=parseInt(document.body.getAttribute(Bo)||"0",10);return isFinite(t)?t:0},qU=function(){v.useEffect(function(){return document.body.setAttribute(Bo,(I1()+1).toString()),function(){var t=I1()-1;t<=0?document.body.removeAttribute(Bo):document.body.setAttribute(Bo,t.toString())}},[])},UU=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;qU();var i=v.useMemo(function(){return LU(a)},[a]);return v.createElement(BU,{styles:VU(i,!s,a,r?"":"!important")})},lv=!1;if(typeof window<"u")try{var Hm=Object.defineProperty({},"passive",{get:function(){return lv=!0,!0}});window.addEventListener("test",Hm,Hm),window.removeEventListener("test",Hm,Hm)}catch{lv=!1}var co=lv?{passive:!1}:!1,zU=function(t){return t.tagName==="TEXTAREA"},wD=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!zU(t)&&r[s]==="visible")},HU=function(t){return wD(t,"overflowY")},KU=function(t){return wD(t,"overflowX")},$1=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=SD(t,n);if(a){var i=CD(t,n),l=i[1],o=i[2];if(l>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},GU=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},WU=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},SD=function(t,s){return t==="v"?HU(s):KU(s)},CD=function(t,s){return t==="v"?GU(s):WU(s)},QU=function(t,s){return t==="h"&&s==="rtl"?-1:1},YU=function(t,s,r,n,a){var i=QU(t,window.getComputedStyle(s).direction),l=i*n,o=r.target,c=s.contains(o),d=!1,u=l>0,m=0,h=0;do{if(!o)break;var x=CD(t,o),f=x[0],p=x[1],g=x[2],y=p-g-i*f;(f||y)&&SD(t,o)&&(m+=y,h+=f);var b=o.parentNode;o=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(u&&Math.abs(m)<1||!u&&Math.abs(h)<1)&&(d=!0),d},Km=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},F1=function(t){return[t.deltaX,t.deltaY]},L1=function(t){return t&&"current"in t?t.current:t},XU=function(t,s){return t[0]===s[0]&&t[1]===s[1]},ZU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},JU=0,uo=[];function ez(t){var s=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),a=v.useState(JU++)[0],i=v.useState(ND)[0],l=v.useRef(t);v.useEffect(function(){l.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=bU([t.lockRef.current],(t.shards||[]).map(L1),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=v.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!l.current.allowPinchZoom;var y=Km(p),b=r.current,j="deltaX"in p?p.deltaX:b[0]-y[0],w="deltaY"in p?p.deltaY:b[1]-y[1],N,S=p.target,O=Math.abs(j)>Math.abs(w)?"h":"v";if("touches"in p&&O==="h"&&S.type==="range")return!1;var P=$1(O,S);if(!P)return!0;if(P?N=O:(N=O==="v"?"h":"v",P=$1(O,S)),!P)return!1;if(!n.current&&"changedTouches"in p&&(j||w)&&(n.current=N),!N)return!0;var k=n.current||N;return YU(k,g,p,k==="h"?j:w)},[]),c=v.useCallback(function(p){var g=p;if(!(!uo.length||uo[uo.length-1]!==i)){var y="deltaY"in g?F1(g):Km(g),b=s.current.filter(function(N){return N.name===g.type&&(N.target===g.target||g.target===N.shadowParent)&&XU(N.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var j=(l.current.shards||[]).map(L1).filter(Boolean).filter(function(N){return N.contains(g.target)}),w=j.length>0?o(g,j[0]):!l.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),d=v.useCallback(function(p,g,y,b){var j={name:p,delta:g,target:y,should:b,shadowParent:tz(y)};s.current.push(j),setTimeout(function(){s.current=s.current.filter(function(w){return w!==j})},1)},[]),u=v.useCallback(function(p){r.current=Km(p),n.current=void 0},[]),m=v.useCallback(function(p){d(p.type,F1(p),p.target,o(p,t.lockRef.current))},[]),h=v.useCallback(function(p){d(p.type,Km(p),p.target,o(p,t.lockRef.current))},[]);v.useEffect(function(){return uo.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,co),document.addEventListener("touchmove",c,co),document.addEventListener("touchstart",u,co),function(){uo=uo.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,co),document.removeEventListener("touchmove",c,co),document.removeEventListener("touchstart",u,co)}},[]);var x=t.removeScrollBar,f=t.inert;return v.createElement(v.Fragment,null,f?v.createElement(i,{styles:ZU(a)}):null,x?v.createElement(UU,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function tz(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const sz=DU(bD,ez);var hm=v.forwardRef(function(t,s){return v.createElement(kp,la({},t,{ref:s,sideCar:sz}))});hm.classNames=kp.classNames;var rz=[" ","Enter","ArrowUp","ArrowDown"],nz=[" ","Enter"],_l="Select",[Pp,Ap,az]=Yu(_l),[Vc,MAe]=er(_l,[az,Gi]),Tp=Gi(),[iz,Wi]=Vc(_l),[lz,oz]=Vc(_l),kD=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:x,form:f}=t,p=Tp(s),[g,y]=v.useState(null),[b,j]=v.useState(null),[w,N]=v.useState(!1),S=Xl(d),[O,P]=Hr({prop:n,defaultProp:a??!1,onChange:i,caller:_l}),[k,R]=Hr({prop:l,defaultProp:o,onChange:c,caller:_l}),F=v.useRef(null),I=g?f||!!g.closest("form"):!0,[W,E]=v.useState(new Set),B=Array.from(W).map(G=>G.props.value).join(";");return e.jsx(jp,{...p,children:e.jsxs(iz,{required:x,scope:s,trigger:g,onTriggerChange:y,valueNode:b,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:rn(),value:k,onValueChange:R,open:O,onOpenChange:P,dir:S,triggerPointerDownPosRef:F,disabled:h,children:[e.jsx(Pp.Provider,{scope:s,children:e.jsx(lz,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(G=>{E(J=>new Set(J).add(G))},[]),onNativeOptionRemove:v.useCallback(G=>{E(J=>{const C=new Set(J);return C.delete(G),C})},[]),children:r})}),I?e.jsxs(YD,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:m,value:k,onChange:G=>R(G.target.value),disabled:h,form:f,children:[k===void 0?e.jsx("option",{value:""}):null,Array.from(W)]},B):null]})})};kD.displayName=_l;var PD="SelectTrigger",AD=v.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,i=Tp(r),l=Wi(PD,r),o=l.disabled||n,c=ft(s,l.onTriggerChange),d=Ap(r),u=v.useRef("touch"),[m,h,x]=ZD(p=>{const g=d().filter(j=>!j.disabled),y=g.find(j=>j.value===l.value),b=JD(g,p,y);b!==void 0&&l.onValueChange(b.value)}),f=p=>{o||(l.onOpenChange(!0),x()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(cm,{asChild:!0,...i,children:e.jsx(Je.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":XD(l.value)?"":void 0,...a,ref:c,onClick:$e(a.onClick,p=>{p.currentTarget.focus(),u.current!=="mouse"&&f(p)}),onPointerDown:$e(a.onPointerDown,p=>{u.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(f(p),p.preventDefault())}),onKeyDown:$e(a.onKeyDown,p=>{const g=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(g&&p.key===" ")&&rz.includes(p.key)&&(f(),p.preventDefault())})})})});AD.displayName=PD;var TD="SelectValue",DD=v.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:l="",...o}=t,c=Wi(TD,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=ft(s,c.onValueNodeChange);return Ws(()=>{d(u)},[d,u]),e.jsx(Je.span,{...o,ref:m,style:{pointerEvents:"none"},children:XD(c.value)?e.jsx(e.Fragment,{children:l}):i})});DD.displayName=TD;var cz="SelectIcon",OD=v.forwardRef((t,s)=>{const{__scopeSelect:r,children:n,...a}=t;return e.jsx(Je.span,{"aria-hidden":!0,...a,ref:s,children:n||"â–¼"})});OD.displayName=cz;var dz="SelectPortal",ED=t=>e.jsx($c,{asChild:!0,...t});ED.displayName=dz;var Il="SelectContent",MD=v.forwardRef((t,s)=>{const r=Wi(Il,t.__scopeSelect),[n,a]=v.useState();if(Ws(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?_c.createPortal(e.jsx(RD,{scope:t.__scopeSelect,children:e.jsx(Pp.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(_D,{...t,ref:s})});MD.displayName=Il;var $n=10,[RD,Qi]=Vc(Il),uz="SelectContentImpl",mz=$i("SelectContent.RemoveScroll"),_D=v.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:f,hideWhenDetached:p,avoidCollisions:g,...y}=t,b=Wi(Il,r),[j,w]=v.useState(null),[N,S]=v.useState(null),O=ft(s,we=>w(we)),[P,k]=v.useState(null),[R,F]=v.useState(null),I=Ap(r),[W,E]=v.useState(!1),B=v.useRef(!1);v.useEffect(()=>{if(j)return Cp(j)},[j]),Sp();const G=v.useCallback(we=>{const[ve,...X]=I().map(he=>he.ref.current),[ce]=X.slice(-1),Y=document.activeElement;for(const he of we)if(he===Y||(he?.scrollIntoView({block:"nearest"}),he===ve&&N&&(N.scrollTop=0),he===ce&&N&&(N.scrollTop=N.scrollHeight),he?.focus(),document.activeElement!==Y))return},[I,N]),J=v.useCallback(()=>G([P,j]),[G,P,j]);v.useEffect(()=>{W&&J()},[W,J]);const{onOpenChange:C,triggerPointerDownPosRef:V}=b;v.useEffect(()=>{if(j){let we={x:0,y:0};const ve=ce=>{we={x:Math.abs(Math.round(ce.pageX)-(V.current?.x??0)),y:Math.abs(Math.round(ce.pageY)-(V.current?.y??0))}},X=ce=>{we.x<=10&&we.y<=10?ce.preventDefault():j.contains(ce.target)||C(!1),document.removeEventListener("pointermove",ve),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",ve),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ve),document.removeEventListener("pointerup",X,{capture:!0})}}},[j,C,V]),v.useEffect(()=>{const we=()=>C(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[C]);const[z,le]=ZD(we=>{const ve=I().filter(Y=>!Y.disabled),X=ve.find(Y=>Y.ref.current===document.activeElement),ce=JD(ve,we,X);ce&&setTimeout(()=>ce.ref.current.focus())}),Ce=v.useCallback((we,ve,X)=>{const ce=!B.current&&!X;(b.value!==void 0&&b.value===ve||ce)&&(k(we),ce&&(B.current=!0))},[b.value]),H=v.useCallback(()=>j?.focus(),[j]),_=v.useCallback((we,ve,X)=>{const ce=!B.current&&!X;(b.value!==void 0&&b.value===ve||ce)&&F(we)},[b.value]),se=n==="popper"?ov:ID,te=se===ov?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:f,hideWhenDetached:p,avoidCollisions:g}:{};return e.jsx(RD,{scope:r,content:j,viewport:N,onViewportChange:S,itemRefCallback:Ce,selectedItem:P,onItemLeave:H,itemTextRefCallback:_,focusSelectedItem:J,selectedItemText:R,position:n,isPositioned:W,searchRef:z,children:e.jsx(hm,{as:mz,allowPinchZoom:!0,children:e.jsx(um,{asChild:!0,trapped:b.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:$e(a,we=>{b.trigger?.focus({preventScroll:!0}),we.preventDefault()}),children:e.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:e.jsx(se,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:we=>we.preventDefault(),...y,...te,onPlaced:()=>E(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:$e(y.onKeyDown,we=>{const ve=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!ve&&we.key.length===1&&le(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let ce=I().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(we.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const Y=we.target,he=ce.indexOf(Y);ce=ce.slice(he+1)}setTimeout(()=>G(ce)),we.preventDefault()}})})})})})})});_D.displayName=uz;var hz="SelectItemAlignedPosition",ID=v.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,i=Wi(Il,r),l=Qi(Il,r),[o,c]=v.useState(null),[d,u]=v.useState(null),m=ft(s,O=>u(O)),h=Ap(r),x=v.useRef(!1),f=v.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:y,focusSelectedItem:b}=l,j=v.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&p&&g&&y){const O=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),R=y.getBoundingClientRect();if(i.dir!=="rtl"){const Y=R.left-P.left,he=k.left-Y,Fe=O.left-he,Ve=O.width+Fe,rt=Math.max(Ve,P.width),gt=window.innerWidth-$n,Vt=ru(he,[$n,Math.max($n,gt-rt)]);o.style.minWidth=Ve+"px",o.style.left=Vt+"px"}else{const Y=P.right-R.right,he=window.innerWidth-k.right-Y,Fe=window.innerWidth-O.right-he,Ve=O.width+Fe,rt=Math.max(Ve,P.width),gt=window.innerWidth-$n,Vt=ru(he,[$n,Math.max($n,gt-rt)]);o.style.minWidth=Ve+"px",o.style.right=Vt+"px"}const F=h(),I=window.innerHeight-$n*2,W=p.scrollHeight,E=window.getComputedStyle(d),B=parseInt(E.borderTopWidth,10),G=parseInt(E.paddingTop,10),J=parseInt(E.borderBottomWidth,10),C=parseInt(E.paddingBottom,10),V=B+G+W+C+J,z=Math.min(g.offsetHeight*5,V),le=window.getComputedStyle(p),Ce=parseInt(le.paddingTop,10),H=parseInt(le.paddingBottom,10),_=O.top+O.height/2-$n,se=I-_,te=g.offsetHeight/2,we=g.offsetTop+te,ve=B+G+we,X=V-ve;if(ve<=_){const Y=F.length>0&&g===F[F.length-1].ref.current;o.style.bottom="0px";const he=d.clientHeight-p.offsetTop-p.offsetHeight,Fe=Math.max(se,te+(Y?H:0)+he+J),Ve=ve+Fe;o.style.height=Ve+"px"}else{const Y=F.length>0&&g===F[0].ref.current;o.style.top="0px";const Fe=Math.max(_,B+p.offsetTop+(Y?Ce:0)+te)+X;o.style.height=Fe+"px",p.scrollTop=ve-_+p.offsetTop}o.style.margin=`${$n}px 0`,o.style.minHeight=z+"px",o.style.maxHeight=I+"px",n?.(),requestAnimationFrame(()=>x.current=!0)}},[h,i.trigger,i.valueNode,o,d,p,g,y,i.dir,n]);Ws(()=>j(),[j]);const[w,N]=v.useState();Ws(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const S=v.useCallback(O=>{O&&f.current===!0&&(j(),b?.(),f.current=!1)},[j,b]);return e.jsx(pz,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:x,onScrollButtonChange:S,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:e.jsx(Je.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});ID.displayName=hz;var xz="SelectPopperPosition",ov=v.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=$n,...i}=t,l=Tp(r);return e.jsx(vp,{...l,...i,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ov.displayName=xz;var[pz,rb]=Vc(Il,{}),cv="SelectViewport",$D=v.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:n,...a}=t,i=Qi(cv,r),l=rb(cv,r),o=ft(s,i.onViewportChange),c=v.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Pp.Slot,{scope:r,children:e.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:$e(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=l;if(h?.current&&m){const x=Math.abs(c.current-u.scrollTop);if(x>0){const f=window.innerHeight-$n*2,p=parseFloat(m.style.minHeight),g=parseFloat(m.style.height),y=Math.max(p,g);if(y<f){const b=y+x,j=Math.min(f,b),w=b-j;m.style.height=j+"px",m.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});$D.displayName=cv;var FD="SelectGroup",[fz,gz]=Vc(FD),jz=v.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=rn();return e.jsx(fz,{scope:r,id:a,children:e.jsx(Je.div,{role:"group","aria-labelledby":a,...n,ref:s})})});jz.displayName=FD;var LD="SelectLabel",BD=v.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=gz(LD,r);return e.jsx(Je.div,{id:a.id,...n,ref:s})});BD.displayName=LD;var Fh="SelectItem",[vz,VD]=Vc(Fh),qD=v.forwardRef((t,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...l}=t,o=Wi(Fh,r),c=Qi(Fh,r),d=o.value===n,[u,m]=v.useState(i??""),[h,x]=v.useState(!1),f=ft(s,b=>c.itemRefCallback?.(b,n,a)),p=rn(),g=v.useRef("touch"),y=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(vz,{scope:r,value:n,disabled:a,textId:p,isSelected:d,onItemTextChange:v.useCallback(b=>{m(j=>j||(b?.textContent??"").trim())},[]),children:e.jsx(Pp.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:e.jsx(Je.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:f,onFocus:$e(l.onFocus,()=>x(!0)),onBlur:$e(l.onBlur,()=>x(!1)),onClick:$e(l.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:$e(l.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:$e(l.onPointerDown,b=>{g.current=b.pointerType}),onPointerMove:$e(l.onPointerMove,b=>{g.current=b.pointerType,a?c.onItemLeave?.():g.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(l.onPointerLeave,b=>{b.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:$e(l.onKeyDown,b=>{c.searchRef?.current!==""&&b.key===" "||(nz.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});qD.displayName=Fh;var Sd="SelectItemText",UD=v.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,...i}=t,l=Wi(Sd,r),o=Qi(Sd,r),c=VD(Sd,r),d=oz(Sd,r),[u,m]=v.useState(null),h=ft(s,y=>m(y),c.onItemTextChange,y=>o.itemTextRefCallback?.(y,c.value,c.disabled)),x=u?.textContent,f=v.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=d;return Ws(()=>(p(f),()=>g(f)),[p,g,f]),e.jsxs(e.Fragment,{children:[e.jsx(Je.span,{id:c.textId,...i,ref:h}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?_c.createPortal(i.children,l.valueNode):null]})});UD.displayName=Sd;var zD="SelectItemIndicator",HD=v.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return VD(zD,r).isSelected?e.jsx(Je.span,{"aria-hidden":!0,...n,ref:s}):null});HD.displayName=zD;var dv="SelectScrollUpButton",KD=v.forwardRef((t,s)=>{const r=Qi(dv,t.__scopeSelect),n=rb(dv,t.__scopeSelect),[a,i]=v.useState(!1),l=ft(s,n.onScrollButtonChange);return Ws(()=>{if(r.viewport&&r.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?e.jsx(WD,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});KD.displayName=dv;var uv="SelectScrollDownButton",GD=v.forwardRef((t,s)=>{const r=Qi(uv,t.__scopeSelect),n=rb(uv,t.__scopeSelect),[a,i]=v.useState(!1),l=ft(s,n.onScrollButtonChange);return Ws(()=>{if(r.viewport&&r.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?e.jsx(WD,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});GD.displayName=uv;var WD=v.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,i=Qi("SelectScrollButton",r),l=v.useRef(null),o=Ap(r),c=v.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),Ws(()=>{o().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),e.jsx(Je.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:$e(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:$e(a.onPointerMove,()=>{i.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:$e(a.onPointerLeave,()=>{c()})})}),yz="SelectSeparator",QD=v.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return e.jsx(Je.div,{"aria-hidden":!0,...n,ref:s})});QD.displayName=yz;var mv="SelectArrow",bz=v.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Tp(r),i=Wi(mv,r),l=Qi(mv,r);return i.open&&l.position==="popper"?e.jsx(yp,{...a,...n,ref:s}):null});bz.displayName=mv;var Nz="SelectBubbleInput",YD=v.forwardRef(({__scopeSelect:t,value:s,...r},n)=>{const a=v.useRef(null),i=ft(n,a),l=mm(s);return v.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==s&&u){const m=new Event("change",{bubbles:!0});u.call(o,s),o.dispatchEvent(m)}},[l,s]),e.jsx(Je.select,{...r,style:{...HT,...r.style},ref:i,defaultValue:s})});YD.displayName=Nz;function XD(t){return t===""||t===void 0}function ZD(t){const s=Gs(t),r=v.useRef(""),n=v.useRef(0),a=v.useCallback(l=>{const o=r.current+l;s(o),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(o)},[s]),i=v.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function JD(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let l=wz(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==r));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function wz(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var Sz=kD,eO=AD,Cz=DD,kz=OD,Pz=ED,tO=MD,Az=$D,sO=BD,rO=qD,Tz=UD,Dz=HD,nO=KD,aO=GD,iO=QD;const ae=Sz,ie=Cz,re=v.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(eO,{ref:n,className:Be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(kz,{asChild:!0,children:e.jsx(Go,{className:"h-4 w-4 opacity-50"})})]}));re.displayName=eO.displayName;const lO=v.forwardRef(({className:t,...s},r)=>e.jsx(nO,{ref:r,className:Be("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(f4,{className:"h-4 w-4"})}));lO.displayName=nO.displayName;const oO=v.forwardRef(({className:t,...s},r)=>e.jsx(aO,{ref:r,className:Be("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Go,{className:"h-4 w-4"})}));oO.displayName=aO.displayName;const ne=v.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(Pz,{children:e.jsxs(tO,{ref:a,className:Be("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(lO,{}),e.jsx(Az,{className:Be("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(oO,{})]})}));ne.displayName=tO.displayName;const Oz=v.forwardRef(({className:t,...s},r)=>e.jsx(sO,{ref:r,className:Be("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Oz.displayName=sO.displayName;const A=v.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(rO,{ref:n,className:Be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Dz,{children:e.jsx(tm,{className:"h-4 w-4"})})}),e.jsx(Tz,{children:s})]}));A.displayName=rO.displayName;const Ez=v.forwardRef(({className:t,...s},r)=>e.jsx(iO,{ref:r,className:Be("-mx-1 my-1 h-px bg-muted",t),...s}));Ez.displayName=iO.displayName;const Mz=[],rl={totalProperties:4,activeProperties:3,totalRevenue:394e3,avgOccupancy:62.3,totalBookings:26,pendingTasks:8};function Rz(){const[t,s]=v.useState(""),[r,n]=v.useState("all"),[a,i]=v.useState("overview"),l=v.useMemo(()=>Mz.filter(d=>{const u=t===""||d.name.toLowerCase().includes(t.toLowerCase())||d.location.toLowerCase().includes(t.toLowerCase()),m=r==="all"||d.status===r;return u&&m}),[t,r]),o=d=>{switch(d){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},c=d=>`à¸¿${d.toLocaleString()}`;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Property Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive overview of your property portfolio performance"})]}),e.jsxs(M,{className:"gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Add Property"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:rl.totalProperties}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[rl.activeProperties," active"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(rl.totalRevenue)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Avg Occupancy"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[rl.avgOccupancy,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Portfolio average"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Bookings"}),e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:rl.totalBookings}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending Tasks"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:rl.pendingTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Active Properties"}),e.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:rl.activeProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently operating"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(as,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search properties by name or location...",className:"pl-10",value:t,onChange:d=>s(d.target.value)})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsxs(re,{className:"w-48",children:[e.jsx(Dn,{className:"h-4 w-4 mr-2"}),e.jsx(ie,{placeholder:"Filter by status"})]}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(d=>e.jsxs(D,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:d.image}),e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:d.name}),e.jsxs(Ee,{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"}),d.location]})]})]}),e.jsx(U,{className:o(d.status),children:d.status})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:[d.bedrooms,"BR/",d.bathrooms,"BA"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["Up to ",d.capacity]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Occupancy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d.occupancy}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[d.occupancy,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:c(d.monthlyRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ROI"}),e.jsxs("span",{className:"text-sm font-semibold",children:[d.roi,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Booking"}),e.jsx("span",{className:"text-sm",children:d.lastBooking})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Check-in"}),e.jsx("span",{className:"text-sm font-medium",children:d.nextCheckIn})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),"Analytics"]})]}),d.maintenanceTasks>0&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 rounded-md",children:[e.jsx(St,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("span",{className:"text-sm text-yellow-800",children:[d.maintenanceTasks," pending task",d.maintenanceTasks>1?"s":""]})]})]})]},d.id))}),l.length===0&&e.jsx(D,{className:"py-12",children:e.jsxs(T,{className:"text-center",children:[e.jsx(bs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or add a new property to get started."}),e.jsxs(M,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Add Your First Property"]})]})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Quick Insights"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(d=>d.status==="active").length}),e.jsx("div",{className:"text-green-800",children:"Active Properties"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(l.reduce((d,u)=>d+u.occupancy,0)/l.length||0),"%"]}),e.jsx("div",{className:"text-blue-800",children:"Average Occupancy"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c(l.reduce((d,u)=>d+u.monthlyRevenue,0))}),e.jsx("div",{className:"text-purple-800",children:"Total Revenue"})]})]})})]})]})}const qs=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:Be("w-full caption-bottom text-sm",t),...s})}));qs.displayName="Table";const Us=v.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:Be("[&_tr]:border-b",t),...s}));Us.displayName="TableHeader";const zs=v.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:Be("[&_tr:last-child]:border-0",t),...s}));zs.displayName="TableBody";const _z=v.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:Be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));_z.displayName="TableFooter";const Nt=v.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:Be("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));Nt.displayName="TableRow";const Oe=v.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:Be("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));Oe.displayName="TableHead";const De=v.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:Be("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));De.displayName="TableCell";const Iz=v.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:Be("mt-4 text-sm text-muted-foreground",t),...s}));Iz.displayName="TableCaption";var Dp="Dialog",[cO,dO]=er(Dp),[$z,sa]=cO(Dp),uO=t=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,o=v.useRef(null),c=v.useRef(null),[d,u]=Hr({prop:n,defaultProp:a??!1,onChange:i,caller:Dp});return e.jsx($z,{scope:s,triggerRef:o,contentRef:c,contentId:rn(),titleId:rn(),descriptionId:rn(),open:d,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(m=>!m),[u]),modal:l,children:r})};uO.displayName=Dp;var mO="DialogTrigger",hO=v.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=sa(mO,r),i=ft(s,a.triggerRef);return e.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":ib(a.open),...n,ref:i,onClick:$e(t.onClick,a.onOpenToggle)})});hO.displayName=mO;var nb="DialogPortal",[Fz,xO]=cO(nb,{forceMount:void 0}),pO=t=>{const{__scopeDialog:s,forceMount:r,children:n,container:a}=t,i=sa(nb,s);return e.jsx(Fz,{scope:s,forceMount:r,children:v.Children.map(n,l=>e.jsx(cr,{present:r||i.open,children:e.jsx($c,{asChild:!0,container:a,children:l})}))})};pO.displayName=nb;var Lh="DialogOverlay",fO=v.forwardRef((t,s)=>{const r=xO(Lh,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=sa(Lh,t.__scopeDialog);return i.modal?e.jsx(cr,{present:n||i.open,children:e.jsx(Bz,{...a,ref:s})}):null});fO.displayName=Lh;var Lz=$i("DialogOverlay.RemoveScroll"),Bz=v.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=sa(Lh,r);return e.jsx(hm,{as:Lz,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(Je.div,{"data-state":ib(a.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),$l="DialogContent",gO=v.forwardRef((t,s)=>{const r=xO($l,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=sa($l,t.__scopeDialog);return e.jsx(cr,{present:n||i.open,children:i.modal?e.jsx(Vz,{...a,ref:s}):e.jsx(qz,{...a,ref:s})})});gO.displayName=$l;var Vz=v.forwardRef((t,s)=>{const r=sa($l,t.__scopeDialog),n=v.useRef(null),a=ft(s,r.contentRef,n);return v.useEffect(()=>{const i=n.current;if(i)return Cp(i)},[]),e.jsx(jO,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(t.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:$e(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:$e(t.onFocusOutside,i=>i.preventDefault())})}),qz=v.forwardRef((t,s)=>{const r=sa($l,t.__scopeDialog),n=v.useRef(!1),a=v.useRef(!1);return e.jsx(jO,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;r.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),jO=v.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,o=sa($l,r),c=v.useRef(null),d=ft(s,c);return Sp(),e.jsxs(e.Fragment,{children:[e.jsx(um,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Ql,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":ib(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(zz,{titleId:o.titleId}),e.jsx(Kz,{contentRef:c,descriptionId:o.descriptionId})]})]})}),ab="DialogTitle",vO=v.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=sa(ab,r);return e.jsx(Je.h2,{id:a.titleId,...n,ref:s})});vO.displayName=ab;var yO="DialogDescription",bO=v.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=sa(yO,r);return e.jsx(Je.p,{id:a.descriptionId,...n,ref:s})});bO.displayName=yO;var NO="DialogClose",wO=v.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=sa(NO,r);return e.jsx(Je.button,{type:"button",...n,ref:s,onClick:$e(t.onClick,()=>a.onOpenChange(!1))})});wO.displayName=NO;function ib(t){return t?"open":"closed"}var SO="DialogTitleWarning",[Uz,CO]=BL(SO,{contentName:$l,titleName:ab,docsSlug:"dialog"}),zz=({titleId:t})=>{const s=CO(SO),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Hz="DialogDescriptionWarning",Kz=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${CO(Hz).contentName}}.`;return v.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},kO=uO,PO=hO,AO=pO,lb=fO,ob=gO,cb=vO,db=bO,ub=wO;const Ge=kO,hs=PO,Gz=AO,TO=v.forwardRef(({className:t,...s},r)=>e.jsx(lb,{ref:r,className:Be("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));TO.displayName=lb.displayName;const We=v.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Gz,{children:[e.jsx(TO,{}),e.jsxs(ob,{ref:n,className:Be("fixed left-[50%] top-[50%] z-50 grid w-[calc(100%-2rem)] max-w-lg translate-x-[-50%] translate-y-[-50%] gap-3 sm:gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg sm:rounded-lg max-h-[90vh] sm:max-h-[85vh] overflow-y-auto",t),...r,children:[s,e.jsxs(ub,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));We.displayName=ob.displayName;const Qe=({className:t,...s})=>e.jsx("div",{className:Be("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Qe.displayName="DialogHeader";const Zs=({className:t,...s})=>e.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Zs.displayName="DialogFooter";const Ye=v.forwardRef(({className:t,...s},r)=>e.jsx(cb,{ref:r,className:Be("text-lg font-semibold leading-none tracking-tight",t),...s}));Ye.displayName=cb.displayName;const Ct=v.forwardRef(({className:t,...s},r)=>e.jsx(db,{ref:r,className:Be("text-sm text-muted-foreground",t),...s}));Ct.displayName=db.displayName;var bg="rovingFocusGroup.onEntryFocus",Wz={bubbles:!1,cancelable:!0},xm="RovingFocusGroup",[hv,DO,Qz]=Yu(xm),[Yz,qc]=er(xm,[Qz]),[Xz,Zz]=Yz(xm),OO=v.forwardRef((t,s)=>e.jsx(hv.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(hv.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Jz,{...t,ref:s})})}));OO.displayName=xm;var Jz=v.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=t,h=v.useRef(null),x=ft(s,h),f=Xl(i),[p,g]=Hr({prop:l,defaultProp:o??null,onChange:c,caller:xm}),[y,b]=v.useState(!1),j=Gs(d),w=DO(r),N=v.useRef(!1),[S,O]=v.useState(0);return v.useEffect(()=>{const P=h.current;if(P)return P.addEventListener(bg,j),()=>P.removeEventListener(bg,j)},[j]),e.jsx(Xz,{scope:r,orientation:n,dir:f,loop:a,currentTabStopId:p,onItemFocus:v.useCallback(P=>g(P),[g]),onItemShiftTab:v.useCallback(()=>b(!0),[]),onFocusableItemAdd:v.useCallback(()=>O(P=>P+1),[]),onFocusableItemRemove:v.useCallback(()=>O(P=>P-1),[]),children:e.jsx(Je.div,{tabIndex:y||S===0?-1:0,"data-orientation":n,...m,ref:x,style:{outline:"none",...t.style},onMouseDown:$e(t.onMouseDown,()=>{N.current=!0}),onFocus:$e(t.onFocus,P=>{const k=!N.current;if(P.target===P.currentTarget&&k&&!y){const R=new CustomEvent(bg,Wz);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const F=w().filter(G=>G.focusable),I=F.find(G=>G.active),W=F.find(G=>G.id===p),B=[I,W,...F].filter(Boolean).map(G=>G.ref.current);RO(B,u)}}N.current=!1}),onBlur:$e(t.onBlur,()=>b(!1))})})}),EO="RovingFocusGroupItem",MO=v.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:l,...o}=t,c=rn(),d=i||c,u=Zz(EO,r),m=u.currentTabStopId===d,h=DO(r),{onFocusableItemAdd:x,onFocusableItemRemove:f,currentTabStopId:p}=u;return v.useEffect(()=>{if(n)return x(),()=>f()},[n,x,f]),e.jsx(hv.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:e.jsx(Je.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:s,onMouseDown:$e(t.onMouseDown,g=>{n?u.onItemFocus(d):g.preventDefault()}),onFocus:$e(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:$e(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=s9(g,u.orientation,u.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let j=h().filter(w=>w.focusable).map(w=>w.ref.current);if(y==="last")j.reverse();else if(y==="prev"||y==="next"){y==="prev"&&j.reverse();const w=j.indexOf(g.currentTarget);j=u.loop?r9(j,w+1):j.slice(w+1)}setTimeout(()=>RO(j))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:p!=null}):l})})});MO.displayName=EO;var e9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function t9(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function s9(t,s,r){const n=t9(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return e9[n]}function RO(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function r9(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var mb=OO,hb=MO,xv=["Enter"," "],n9=["ArrowDown","PageUp","Home"],_O=["ArrowUp","PageDown","End"],a9=[...n9,..._O],i9={ltr:[...xv,"ArrowRight"],rtl:[...xv,"ArrowLeft"]},l9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pm="Menu",[nu,o9,c9]=Yu(pm),[Zl,IO]=er(pm,[c9,Gi,qc]),Op=Gi(),$O=qc(),[d9,Jl]=Zl(pm),[u9,fm]=Zl(pm),FO=t=>{const{__scopeMenu:s,open:r=!1,children:n,dir:a,onOpenChange:i,modal:l=!0}=t,o=Op(s),[c,d]=v.useState(null),u=v.useRef(!1),m=Gs(i),h=Xl(a);return v.useEffect(()=>{const x=()=>{u.current=!0,document.addEventListener("pointerdown",f,{capture:!0,once:!0}),document.addEventListener("pointermove",f,{capture:!0,once:!0})},f=()=>u.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",f,{capture:!0}),document.removeEventListener("pointermove",f,{capture:!0})}},[]),e.jsx(jp,{...o,children:e.jsx(d9,{scope:s,open:r,onOpenChange:m,content:c,onContentChange:d,children:e.jsx(u9,{scope:s,onClose:v.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:h,modal:l,children:n})})})};FO.displayName=pm;var m9="MenuAnchor",xb=v.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=Op(r);return e.jsx(cm,{...a,...n,ref:s})});xb.displayName=m9;var pb="MenuPortal",[h9,LO]=Zl(pb,{forceMount:void 0}),BO=t=>{const{__scopeMenu:s,forceMount:r,children:n,container:a}=t,i=Jl(pb,s);return e.jsx(h9,{scope:s,forceMount:r,children:e.jsx(cr,{present:r||i.open,children:e.jsx($c,{asChild:!0,container:a,children:n})})})};BO.displayName=pb;var kn="MenuContent",[x9,fb]=Zl(kn),VO=v.forwardRef((t,s)=>{const r=LO(kn,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=Jl(kn,t.__scopeMenu),l=fm(kn,t.__scopeMenu);return e.jsx(nu.Provider,{scope:t.__scopeMenu,children:e.jsx(cr,{present:n||i.open,children:e.jsx(nu.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(p9,{...a,ref:s}):e.jsx(f9,{...a,ref:s})})})})}),p9=v.forwardRef((t,s)=>{const r=Jl(kn,t.__scopeMenu),n=v.useRef(null),a=ft(s,n);return v.useEffect(()=>{const i=n.current;if(i)return Cp(i)},[]),e.jsx(gb,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:$e(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),f9=v.forwardRef((t,s)=>{const r=Jl(kn,t.__scopeMenu);return e.jsx(gb,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),g9=$i("MenuContent.ScrollLock"),gb=v.forwardRef((t,s)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:x,disableOutsideScroll:f,...p}=t,g=Jl(kn,r),y=fm(kn,r),b=Op(r),j=$O(r),w=o9(r),[N,S]=v.useState(null),O=v.useRef(null),P=ft(s,O,g.onContentChange),k=v.useRef(0),R=v.useRef(""),F=v.useRef(0),I=v.useRef(null),W=v.useRef("right"),E=v.useRef(0),B=f?hm:v.Fragment,G=f?{as:g9,allowPinchZoom:!0}:void 0,J=V=>{const z=R.current+V,le=w().filter(we=>!we.disabled),Ce=document.activeElement,H=le.find(we=>we.ref.current===Ce)?.textValue,_=le.map(we=>we.textValue),se=T9(_,z,H),te=le.find(we=>we.textValue===se)?.ref.current;(function we(ve){R.current=ve,window.clearTimeout(k.current),ve!==""&&(k.current=window.setTimeout(()=>we(""),1e3))})(z),te&&setTimeout(()=>te.focus())};v.useEffect(()=>()=>window.clearTimeout(k.current),[]),Sp();const C=v.useCallback(V=>W.current===I.current?.side&&O9(V,I.current?.area),[]);return e.jsx(x9,{scope:r,searchRef:R,onItemEnter:v.useCallback(V=>{C(V)&&V.preventDefault()},[C]),onItemLeave:v.useCallback(V=>{C(V)||(O.current?.focus(),S(null))},[C]),onTriggerLeave:v.useCallback(V=>{C(V)&&V.preventDefault()},[C]),pointerGraceTimerRef:F,onPointerGraceIntentChange:v.useCallback(V=>{I.current=V},[]),children:e.jsx(B,{...G,children:e.jsx(um,{asChild:!0,trapped:a,onMountAutoFocus:$e(i,V=>{V.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:x,children:e.jsx(mb,{asChild:!0,...j,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:N,onCurrentTabStopIdChange:S,onEntryFocus:$e(c,V=>{y.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(vp,{role:"menu","aria-orientation":"vertical","data-state":rE(g.open),"data-radix-menu-content":"",dir:y.dir,...b,...p,ref:P,style:{outline:"none",...p.style},onKeyDown:$e(p.onKeyDown,V=>{const le=V.target.closest("[data-radix-menu-content]")===V.currentTarget,Ce=V.ctrlKey||V.altKey||V.metaKey,H=V.key.length===1;le&&(V.key==="Tab"&&V.preventDefault(),!Ce&&H&&J(V.key));const _=O.current;if(V.target!==_||!a9.includes(V.key))return;V.preventDefault();const te=w().filter(we=>!we.disabled).map(we=>we.ref.current);_O.includes(V.key)&&te.reverse(),P9(te)}),onBlur:$e(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(k.current),R.current="")}),onPointerMove:$e(t.onPointerMove,au(V=>{const z=V.target,le=E.current!==V.clientX;if(V.currentTarget.contains(z)&&le){const Ce=V.clientX>E.current?"right":"left";W.current=Ce,E.current=V.clientX}}))})})})})})})});VO.displayName=kn;var j9="MenuGroup",jb=v.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Je.div,{role:"group",...n,ref:s})});jb.displayName=j9;var v9="MenuLabel",qO=v.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Je.div,{...n,ref:s})});qO.displayName=v9;var Bh="MenuItem",B1="menu.itemSelect",Ep=v.forwardRef((t,s)=>{const{disabled:r=!1,onSelect:n,...a}=t,i=v.useRef(null),l=fm(Bh,t.__scopeMenu),o=fb(Bh,t.__scopeMenu),c=ft(s,i),d=v.useRef(!1),u=()=>{const m=i.current;if(!r&&m){const h=new CustomEvent(B1,{bubbles:!0,cancelable:!0});m.addEventListener(B1,x=>n?.(x),{once:!0}),_0(m,h),h.defaultPrevented?d.current=!1:l.onClose()}};return e.jsx(UO,{...a,ref:c,disabled:r,onClick:$e(t.onClick,u),onPointerDown:m=>{t.onPointerDown?.(m),d.current=!0},onPointerUp:$e(t.onPointerUp,m=>{d.current||m.currentTarget?.click()}),onKeyDown:$e(t.onKeyDown,m=>{const h=o.searchRef.current!=="";r||h&&m.key===" "||xv.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Ep.displayName=Bh;var UO=v.forwardRef((t,s)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=t,l=fb(Bh,r),o=$O(r),c=v.useRef(null),d=ft(s,c),[u,m]=v.useState(!1),[h,x]=v.useState("");return v.useEffect(()=>{const f=c.current;f&&x((f.textContent??"").trim())},[i.children]),e.jsx(nu.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:e.jsx(hb,{asChild:!0,...o,focusable:!n,children:e.jsx(Je.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:$e(t.onPointerMove,au(f=>{n?l.onItemLeave(f):(l.onItemEnter(f),f.defaultPrevented||f.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(t.onPointerLeave,au(f=>l.onItemLeave(f))),onFocus:$e(t.onFocus,()=>m(!0)),onBlur:$e(t.onBlur,()=>m(!1))})})})}),y9="MenuCheckboxItem",zO=v.forwardRef((t,s)=>{const{checked:r=!1,onCheckedChange:n,...a}=t;return e.jsx(QO,{scope:t.__scopeMenu,checked:r,children:e.jsx(Ep,{role:"menuitemcheckbox","aria-checked":Vh(r)?"mixed":r,...a,ref:s,"data-state":yb(r),onSelect:$e(a.onSelect,()=>n?.(Vh(r)?!0:!r),{checkForDefaultPrevented:!1})})})});zO.displayName=y9;var HO="MenuRadioGroup",[b9,N9]=Zl(HO,{value:void 0,onValueChange:()=>{}}),KO=v.forwardRef((t,s)=>{const{value:r,onValueChange:n,...a}=t,i=Gs(n);return e.jsx(b9,{scope:t.__scopeMenu,value:r,onValueChange:i,children:e.jsx(jb,{...a,ref:s})})});KO.displayName=HO;var GO="MenuRadioItem",WO=v.forwardRef((t,s)=>{const{value:r,...n}=t,a=N9(GO,t.__scopeMenu),i=r===a.value;return e.jsx(QO,{scope:t.__scopeMenu,checked:i,children:e.jsx(Ep,{role:"menuitemradio","aria-checked":i,...n,ref:s,"data-state":yb(i),onSelect:$e(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});WO.displayName=GO;var vb="MenuItemIndicator",[QO,w9]=Zl(vb,{checked:!1}),YO=v.forwardRef((t,s)=>{const{__scopeMenu:r,forceMount:n,...a}=t,i=w9(vb,r);return e.jsx(cr,{present:n||Vh(i.checked)||i.checked===!0,children:e.jsx(Je.span,{...a,ref:s,"data-state":yb(i.checked)})})});YO.displayName=vb;var S9="MenuSeparator",XO=v.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...n,ref:s})});XO.displayName=S9;var C9="MenuArrow",ZO=v.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=Op(r);return e.jsx(yp,{...a,...n,ref:s})});ZO.displayName=C9;var k9="MenuSub",[RAe,JO]=Zl(k9),Cd="MenuSubTrigger",eE=v.forwardRef((t,s)=>{const r=Jl(Cd,t.__scopeMenu),n=fm(Cd,t.__scopeMenu),a=JO(Cd,t.__scopeMenu),i=fb(Cd,t.__scopeMenu),l=v.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},u=v.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return v.useEffect(()=>u,[u]),v.useEffect(()=>{const m=o.current;return()=>{window.clearTimeout(m),c(null)}},[o,c]),e.jsx(xb,{asChild:!0,...d,children:e.jsx(UO,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":rE(r.open),...t,ref:mp(s,a.onTriggerChange),onClick:m=>{t.onClick?.(m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:$e(t.onPointerMove,au(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!r.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:$e(t.onPointerLeave,au(m=>{u();const h=r.content?.getBoundingClientRect();if(h){const x=r.content?.dataset.side,f=x==="right",p=f?-5:5,g=h[f?"left":"right"],y=h[f?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+p,y:m.clientY},{x:g,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x:g,y:h.bottom}],side:x}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:$e(t.onKeyDown,m=>{const h=i.searchRef.current!=="";t.disabled||h&&m.key===" "||i9[n.dir].includes(m.key)&&(r.onOpenChange(!0),r.content?.focus(),m.preventDefault())})})})});eE.displayName=Cd;var tE="MenuSubContent",sE=v.forwardRef((t,s)=>{const r=LO(kn,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=Jl(kn,t.__scopeMenu),l=fm(kn,t.__scopeMenu),o=JO(tE,t.__scopeMenu),c=v.useRef(null),d=ft(s,c);return e.jsx(nu.Provider,{scope:t.__scopeMenu,children:e.jsx(cr,{present:n||i.open,children:e.jsx(nu.Slot,{scope:t.__scopeMenu,children:e.jsx(gb,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{l.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:$e(t.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:$e(t.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:$e(t.onKeyDown,u=>{const m=u.currentTarget.contains(u.target),h=l9[l.dir].includes(u.key);m&&h&&(i.onOpenChange(!1),o.trigger?.focus(),u.preventDefault())})})})})})});sE.displayName=tE;function rE(t){return t?"open":"closed"}function Vh(t){return t==="indeterminate"}function yb(t){return Vh(t)?"indeterminate":t?"checked":"unchecked"}function P9(t){const s=document.activeElement;for(const r of t)if(r===s||(r.focus(),document.activeElement!==s))return}function A9(t,s){return t.map((r,n)=>t[(s+n)%t.length])}function T9(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let l=A9(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==r));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function D9(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],d=o.x,u=o.y,m=c.x,h=c.y;u>n!=h>n&&r<(m-d)*(n-u)/(h-u)+d&&(a=!a)}return a}function O9(t,s){if(!s)return!1;const r={x:t.clientX,y:t.clientY};return D9(r,s)}function au(t){return s=>s.pointerType==="mouse"?t(s):void 0}var E9=FO,M9=xb,R9=BO,_9=VO,I9=jb,$9=qO,F9=Ep,L9=zO,B9=KO,V9=WO,q9=YO,U9=XO,z9=ZO,H9=eE,K9=sE,Mp="DropdownMenu",[G9,_Ae]=er(Mp,[IO]),qr=IO(),[W9,nE]=G9(Mp),aE=t=>{const{__scopeDropdownMenu:s,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=t,c=qr(s),d=v.useRef(null),[u,m]=Hr({prop:a,defaultProp:i??!1,onChange:l,caller:Mp});return e.jsx(W9,{scope:s,triggerId:rn(),triggerRef:d,contentId:rn(),open:u,onOpenChange:m,onOpenToggle:v.useCallback(()=>m(h=>!h),[m]),modal:o,children:e.jsx(E9,{...c,open:u,onOpenChange:m,dir:n,modal:o,children:r})})};aE.displayName=Mp;var iE="DropdownMenuTrigger",lE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=t,i=nE(iE,r),l=qr(r);return e.jsx(M9,{asChild:!0,...l,children:e.jsx(Je.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:mp(s,i.triggerRef),onPointerDown:$e(t.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:$e(t.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});lE.displayName=iE;var Q9="DropdownMenuPortal",oE=t=>{const{__scopeDropdownMenu:s,...r}=t,n=qr(s);return e.jsx(R9,{...n,...r})};oE.displayName=Q9;var cE="DropdownMenuContent",dE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=nE(cE,r),i=qr(r),l=v.useRef(!1);return e.jsx(_9,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:s,onCloseAutoFocus:$e(t.onCloseAutoFocus,o=>{l.current||a.triggerRef.current?.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:$e(t.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dE.displayName=cE;var Y9="DropdownMenuGroup",X9=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(I9,{...a,...n,ref:s})});X9.displayName=Y9;var Z9="DropdownMenuLabel",uE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx($9,{...a,...n,ref:s})});uE.displayName=Z9;var J9="DropdownMenuItem",mE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(F9,{...a,...n,ref:s})});mE.displayName=J9;var e7="DropdownMenuCheckboxItem",hE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(L9,{...a,...n,ref:s})});hE.displayName=e7;var t7="DropdownMenuRadioGroup",s7=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(B9,{...a,...n,ref:s})});s7.displayName=t7;var r7="DropdownMenuRadioItem",xE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(V9,{...a,...n,ref:s})});xE.displayName=r7;var n7="DropdownMenuItemIndicator",pE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(q9,{...a,...n,ref:s})});pE.displayName=n7;var a7="DropdownMenuSeparator",fE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(U9,{...a,...n,ref:s})});fE.displayName=a7;var i7="DropdownMenuArrow",l7=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(z9,{...a,...n,ref:s})});l7.displayName=i7;var o7="DropdownMenuSubTrigger",gE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(H9,{...a,...n,ref:s})});gE.displayName=o7;var c7="DropdownMenuSubContent",jE=v.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=qr(r);return e.jsx(K9,{...a,...n,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jE.displayName=c7;var d7=aE,u7=lE,m7=oE,vE=dE,yE=uE,bE=mE,NE=hE,wE=xE,SE=pE,CE=fE,kE=gE,PE=jE;const iu=d7,lu=u7,h7=v.forwardRef(({className:t,inset:s,children:r,...n},a)=>e.jsxs(kE,{ref:a,className:Be("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n,children:[r,e.jsx(zn,{className:"ml-auto"})]}));h7.displayName=kE.displayName;const x7=v.forwardRef(({className:t,...s},r)=>e.jsx(PE,{ref:r,className:Be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));x7.displayName=PE.displayName;const Zo=v.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(m7,{children:e.jsx(vE,{ref:n,sideOffset:s,className:Be("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));Zo.displayName=vE.displayName;const Fr=v.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(bE,{ref:n,className:Be("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r}));Fr.displayName=bE.displayName;const p7=v.forwardRef(({className:t,children:s,checked:r,...n},a)=>e.jsxs(NE,{ref:a,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(SE,{children:e.jsx(tm,{className:"h-4 w-4"})})}),s]}));p7.displayName=NE.displayName;const f7=v.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(wE,{ref:n,className:Be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(SE,{children:e.jsx(g4,{className:"h-2 w-2 fill-current"})})}),s]}));f7.displayName=wE.displayName;const ou=v.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(yE,{ref:n,className:Be("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));ou.displayName=yE.displayName;const Mi=v.forwardRef(({className:t,...s},r)=>e.jsx(CE,{ref:r,className:Be("-mx-1 my-1 h-px bg-muted",t),...s}));Mi.displayName=CE.displayName;var gm=t=>t.type==="checkbox",fl=t=>t instanceof Date,$r=t=>t==null;const AE=t=>typeof t=="object";var Js=t=>!$r(t)&&!Array.isArray(t)&&AE(t)&&!fl(t),TE=t=>Js(t)&&t.target?gm(t.target)?t.target.checked:t.target.value:t,g7=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,DE=(t,s)=>t.has(g7(s)),j7=t=>{const s=t.constructor&&t.constructor.prototype;return Js(s)&&s.hasOwnProperty("isPrototypeOf")},bb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function As(t){let s;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(bb&&(t instanceof Blob||n))&&(r||Js(t)))if(s=r?[]:{},!r&&!j7(t))s=t;else for(const a in t)t.hasOwnProperty(a)&&(s[a]=As(t[a]));else return t;return s}var Rp=t=>/^\w*$/.test(t),Os=t=>t===void 0,_p=t=>Array.isArray(t)?t.filter(Boolean):[],Nb=t=>_p(t.replace(/["|']|\]/g,"").split(/\.|\[/)),He=(t,s,r)=>{if(!s||!Js(t))return r;const n=(Rp(s)?[s]:Nb(s)).reduce((a,i)=>$r(a)?a:a[i],t);return Os(n)||n===t?Os(t[s])?r:t[s]:n},Xr=t=>typeof t=="boolean",os=(t,s,r)=>{let n=-1;const a=Rp(s)?[s]:Nb(s),i=a.length,l=i-1;for(;++n<i;){const o=a[n];let c=r;if(n!==l){const d=t[o];c=Js(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const qh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},yn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ra={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wb=ee.createContext(null);wb.displayName="HookFormContext";const jm=()=>ee.useContext(wb),v7=t=>{const{children:s,...r}=t;return ee.createElement(wb.Provider,{value:r},s)};var OE=(t,s,r,n=!0)=>{const a={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const l=i;return s._proxyFormState[l]!==yn.all&&(s._proxyFormState[l]=!n||yn.all),r&&(r[l]=!0),t[l]}});return a};const Ip=typeof window<"u"?v.useLayoutEffect:v.useEffect;function y7(t){const s=jm(),{control:r=s.control,disabled:n,name:a,exact:i}=t||{},[l,o]=ee.useState(r._formState),c=ee.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ip(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!n&&o({...r._formState,...d})}}),[a,n,i]),ee.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),ee.useMemo(()=>OE(l,r,c.current,!1),[l,r])}var ca=t=>typeof t=="string",EE=(t,s,r,n,a)=>ca(t)?(n&&s.watch.add(t),He(r,t,a)):Array.isArray(t)?t.map(i=>(n&&s.watch.add(i),He(r,i))):(n&&(s.watchAll=!0),r);function b7(t){const s=jm(),{control:r=s.control,name:n,defaultValue:a,disabled:i,exact:l}=t||{},o=ee.useRef(a),[c,d]=ee.useState(r._getWatch(n,o.current));return Ip(()=>r._subscribe({name:n,formState:{values:!0},exact:l,callback:u=>!i&&d(EE(n,r._names,u.values||r._formValues,!1,o.current))}),[n,r,i,l]),ee.useEffect(()=>r._removeUnmounted()),c}function N7(t){const s=jm(),{name:r,disabled:n,control:a=s.control,shouldUnregister:i}=t,l=DE(a._names.array,r),o=b7({control:a,name:r,defaultValue:He(a._formValues,r,He(a._defaultValues,r,t.defaultValue)),exact:!0}),c=y7({control:a,name:r,exact:!0}),d=ee.useRef(t),u=ee.useRef(a.register(r,{...t.rules,value:o,...Xr(t.disabled)?{disabled:t.disabled}:{}})),m=ee.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!He(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!He(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!He(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!He(c.validatingFields,r)},error:{enumerable:!0,get:()=>He(c.errors,r)}}),[c,r]),h=ee.useCallback(g=>u.current.onChange({target:{value:TE(g),name:r},type:qh.CHANGE}),[r]),x=ee.useCallback(()=>u.current.onBlur({target:{value:He(a._formValues,r),name:r},type:qh.BLUR}),[r,a._formValues]),f=ee.useCallback(g=>{const y=He(a._fields,r);y&&g&&(y._f.ref={focus:()=>g.focus&&g.focus(),select:()=>g.select&&g.select(),setCustomValidity:b=>g.setCustomValidity(b),reportValidity:()=>g.reportValidity()})},[a._fields,r]),p=ee.useMemo(()=>({name:r,value:o,...Xr(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:h,onBlur:x,ref:f}),[r,n,c.disabled,h,x,f,o]);return ee.useEffect(()=>{const g=a._options.shouldUnregister||i;a.register(r,{...d.current.rules,...Xr(d.current.disabled)?{disabled:d.current.disabled}:{}});const y=(b,j)=>{const w=He(a._fields,b);w&&w._f&&(w._f.mount=j)};if(y(r,!0),g){const b=As(He(a._options.defaultValues,r));os(a._defaultValues,r,b),Os(He(a._formValues,r))&&os(a._formValues,r,b)}return!l&&a.register(r),()=>{(l?g&&!a._state.action:g)?a.unregister(r):y(r,!1)}},[r,a,l,i]),ee.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),ee.useMemo(()=>({field:p,formState:c,fieldState:m}),[p,c,m])}const w7=t=>t.render(N7(t));var ME=(t,s,r,n,a)=>s?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:a||!0}}:{},Ur=t=>Array.isArray(t)?t:[t],V1=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}},pv=t=>$r(t)||!AE(t);function Ni(t,s,r=new WeakSet){if(pv(t)||pv(s))return t===s;if(fl(t)&&fl(s))return t.getTime()===s.getTime();const n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;if(r.has(t)||r.has(s))return!0;r.add(t),r.add(s);for(const i of n){const l=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const o=s[i];if(fl(l)&&fl(o)||Js(l)&&Js(o)||Array.isArray(l)&&Array.isArray(o)?!Ni(l,o,r):l!==o)return!1}}return!0}var _r=t=>Js(t)&&!Object.keys(t).length,Sb=t=>t.type==="file",qn=t=>typeof t=="function",Uh=t=>{if(!bb)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},RE=t=>t.type==="select-multiple",Cb=t=>t.type==="radio",S7=t=>Cb(t)||gm(t),Ng=t=>Uh(t)&&t.isConnected;function C7(t,s){const r=s.slice(0,-1).length;let n=0;for(;n<r;)t=Os(t)?n++:t[s[n++]];return t}function k7(t){for(const s in t)if(t.hasOwnProperty(s)&&!Os(t[s]))return!1;return!0}function Ys(t,s){const r=Array.isArray(s)?s:Rp(s)?[s]:Nb(s),n=r.length===1?t:C7(t,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Js(n)&&_r(n)||Array.isArray(n)&&k7(n))&&Ys(t,r.slice(0,-1)),t}var _E=t=>{for(const s in t)if(qn(t[s]))return!0;return!1};function zh(t,s={}){const r=Array.isArray(t);if(Js(t)||r)for(const n in t)Array.isArray(t[n])||Js(t[n])&&!_E(t[n])?(s[n]=Array.isArray(t[n])?[]:{},zh(t[n],s[n])):$r(t[n])||(s[n]=!0);return s}function IE(t,s,r){const n=Array.isArray(t);if(Js(t)||n)for(const a in t)Array.isArray(t[a])||Js(t[a])&&!_E(t[a])?Os(s)||pv(r[a])?r[a]=Array.isArray(t[a])?zh(t[a],[]):{...zh(t[a])}:IE(t[a],$r(s)?{}:s[a],r[a]):r[a]=!Ni(t[a],s[a]);return r}var cd=(t,s)=>IE(t,s,zh(s));const q1={value:!1,isValid:!1},U1={value:!0,isValid:!0};var $E=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Os(t[0].attributes.value)?Os(t[0].value)||t[0].value===""?U1:{value:t[0].value,isValid:!0}:U1:q1}return q1},FE=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:n})=>Os(t)?t:s?t===""?NaN:t&&+t:r&&ca(t)?new Date(t):n?n(t):t;const z1={isValid:!1,value:null};var LE=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,z1):z1;function H1(t){const s=t.ref;return Sb(s)?s.files:Cb(s)?LE(t.refs).value:RE(s)?[...s.selectedOptions].map(({value:r})=>r):gm(s)?$E(t.refs).value:FE(Os(s.value)?t.ref.value:s.value,t)}var P7=(t,s,r,n)=>{const a={};for(const i of t){const l=He(s,i);l&&os(a,i,l._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:n}},Hh=t=>t instanceof RegExp,dd=t=>Os(t)?t:Hh(t)?t.source:Js(t)?Hh(t.value)?t.value.source:t.value:t,wo=t=>({isOnSubmit:!t||t===yn.onSubmit,isOnBlur:t===yn.onBlur,isOnChange:t===yn.onChange,isOnAll:t===yn.all,isOnTouch:t===yn.onTouched});const K1="AsyncFunction";var A7=t=>!!t&&!!t.validate&&!!(qn(t.validate)&&t.validate.constructor.name===K1||Js(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===K1)),T7=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),fv=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Vo=(t,s,r,n)=>{for(const a of r||Object.keys(t)){const i=He(t,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],a)&&!n)return!0;if(l.ref&&s(l.ref,l.name)&&!n)return!0;if(Vo(o,s))break}else if(Js(o)&&Vo(o,s))break}}};function G1(t,s,r){const n=He(t,r);if(n||Rp(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=He(s,i),o=He(t,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};a.pop()}return{name:r}}var D7=(t,s,r,n)=>{r(t);const{name:a,...i}=t;return _r(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!n||yn.all))},O7=(t,s,r)=>!t||!s||t===s||Ur(t).some(n=>n&&(r?n===s:n.startsWith(s)||s.startsWith(n))),E7=(t,s,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(s||t):(r?n.isOnBlur:a.isOnBlur)?!t:(r?n.isOnChange:a.isOnChange)?t:!0,M7=(t,s)=>!_p(He(t,s)).length&&Ys(t,s),BE=(t,s,r)=>{const n=Ur(He(t,r));return os(n,"root",s[r]),os(t,r,n),t},Sh=t=>ca(t);function W1(t,s,r="validate"){if(Sh(t)||Array.isArray(t)&&t.every(Sh)||Xr(t)&&!t)return{type:r,message:Sh(t)?t:"",ref:s}}var mo=t=>Js(t)&&!Hh(t)?t:{value:t,message:""},gv=async(t,s,r,n,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:m,max:h,pattern:x,validate:f,name:p,valueAsNumber:g,mount:y}=t._f,b=He(r,p);if(!y||s.has(p))return{};const j=o?o[0]:l,w=I=>{a&&j.reportValidity&&(j.setCustomValidity(Xr(I)?"":I||""),j.reportValidity())},N={},S=Cb(l),O=gm(l),P=S||O,k=(g||Sb(l))&&Os(l.value)&&Os(b)||Uh(l)&&l.value===""||b===""||Array.isArray(b)&&!b.length,R=ME.bind(null,p,n,N),F=(I,W,E,B=Ra.maxLength,G=Ra.minLength)=>{const J=I?W:E;N[p]={type:I?B:G,message:J,ref:l,...R(I?B:G,J)}};if(i?!Array.isArray(b)||!b.length:c&&(!P&&(k||$r(b))||Xr(b)&&!b||O&&!$E(o).isValid||S&&!LE(o).isValid)){const{value:I,message:W}=Sh(c)?{value:!!c,message:c}:mo(c);if(I&&(N[p]={type:Ra.required,message:W,ref:j,...R(Ra.required,W)},!n))return w(W),N}if(!k&&(!$r(m)||!$r(h))){let I,W;const E=mo(h),B=mo(m);if(!$r(b)&&!isNaN(b)){const G=l.valueAsNumber||b&&+b;$r(E.value)||(I=G>E.value),$r(B.value)||(W=G<B.value)}else{const G=l.valueAsDate||new Date(b),J=z=>new Date(new Date().toDateString()+" "+z),C=l.type=="time",V=l.type=="week";ca(E.value)&&b&&(I=C?J(b)>J(E.value):V?b>E.value:G>new Date(E.value)),ca(B.value)&&b&&(W=C?J(b)<J(B.value):V?b<B.value:G<new Date(B.value))}if((I||W)&&(F(!!I,E.message,B.message,Ra.max,Ra.min),!n))return w(N[p].message),N}if((d||u)&&!k&&(ca(b)||i&&Array.isArray(b))){const I=mo(d),W=mo(u),E=!$r(I.value)&&b.length>+I.value,B=!$r(W.value)&&b.length<+W.value;if((E||B)&&(F(E,I.message,W.message),!n))return w(N[p].message),N}if(x&&!k&&ca(b)){const{value:I,message:W}=mo(x);if(Hh(I)&&!b.match(I)&&(N[p]={type:Ra.pattern,message:W,ref:l,...R(Ra.pattern,W)},!n))return w(W),N}if(f){if(qn(f)){const I=await f(b,r),W=W1(I,j);if(W&&(N[p]={...W,...R(Ra.validate,W.message)},!n))return w(W.message),N}else if(Js(f)){let I={};for(const W in f){if(!_r(I)&&!n)break;const E=W1(await f[W](b,r),j,W);E&&(I={...E,...R(W,E.message)},w(E.message),n&&(N[p]=I))}if(!_r(I)&&(N[p]={ref:j,...I},!n))return N}}return w(!0),N};const R7={mode:yn.onSubmit,reValidateMode:yn.onChange,shouldFocusError:!0};function _7(t={}){let s={...R7,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:qn(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},a=Js(s.defaultValues)||Js(s.values)?As(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:As(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const h={array:V1(),state:V1()},x=s.criteriaMode===yn.all,f=ue=>q=>{clearTimeout(d),d=setTimeout(ue,q)},p=async ue=>{if(!s.disabled&&(u.isValid||m.isValid||ue)){const q=s.resolver?_r((await O()).errors):await k(n,!0);q!==r.isValid&&h.state.next({isValid:q})}},g=(ue,q)=>{!s.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((ue||Array.from(o.mount)).forEach(Se=>{Se&&(q?os(r.validatingFields,Se,q):Ys(r.validatingFields,Se))}),h.state.next({validatingFields:r.validatingFields,isValidating:!_r(r.validatingFields)}))},y=(ue,q=[],Se,_e,K=!0,ke=!0)=>{if(_e&&Se&&!s.disabled){if(l.action=!0,ke&&Array.isArray(He(n,ue))){const Le=Se(He(n,ue),_e.argA,_e.argB);K&&os(n,ue,Le)}if(ke&&Array.isArray(He(r.errors,ue))){const Le=Se(He(r.errors,ue),_e.argA,_e.argB);K&&os(r.errors,ue,Le),M7(r.errors,ue)}if((u.touchedFields||m.touchedFields)&&ke&&Array.isArray(He(r.touchedFields,ue))){const Le=Se(He(r.touchedFields,ue),_e.argA,_e.argB);K&&os(r.touchedFields,ue,Le)}(u.dirtyFields||m.dirtyFields)&&(r.dirtyFields=cd(a,i)),h.state.next({name:ue,isDirty:F(ue,q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else os(i,ue,q)},b=(ue,q)=>{os(r.errors,ue,q),h.state.next({errors:r.errors})},j=ue=>{r.errors=ue,h.state.next({errors:r.errors,isValid:!1})},w=(ue,q,Se,_e)=>{const K=He(n,ue);if(K){const ke=He(i,ue,Os(Se)?He(a,ue):Se);Os(ke)||_e&&_e.defaultChecked||q?os(i,ue,q?ke:H1(K._f)):E(ue,ke),l.mount&&p()}},N=(ue,q,Se,_e,K)=>{let ke=!1,Le=!1;const qt={name:ue};if(!s.disabled){if(!Se||_e){(u.isDirty||m.isDirty)&&(Le=r.isDirty,r.isDirty=qt.isDirty=F(),ke=Le!==qt.isDirty);const vt=Ni(He(a,ue),q);Le=!!He(r.dirtyFields,ue),vt?Ys(r.dirtyFields,ue):os(r.dirtyFields,ue,!0),qt.dirtyFields=r.dirtyFields,ke=ke||(u.dirtyFields||m.dirtyFields)&&Le!==!vt}if(Se){const vt=He(r.touchedFields,ue);vt||(os(r.touchedFields,ue,Se),qt.touchedFields=r.touchedFields,ke=ke||(u.touchedFields||m.touchedFields)&&vt!==Se)}ke&&K&&h.state.next(qt)}return ke?qt:{}},S=(ue,q,Se,_e)=>{const K=He(r.errors,ue),ke=(u.isValid||m.isValid)&&Xr(q)&&r.isValid!==q;if(s.delayError&&Se?(c=f(()=>b(ue,Se)),c(s.delayError)):(clearTimeout(d),c=null,Se?os(r.errors,ue,Se):Ys(r.errors,ue)),(Se?!Ni(K,Se):K)||!_r(_e)||ke){const Le={..._e,...ke&&Xr(q)?{isValid:q}:{},errors:r.errors,name:ue};r={...r,...Le},h.state.next(Le)}},O=async ue=>{g(ue,!0);const q=await s.resolver(i,s.context,P7(ue||o.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return g(ue),q},P=async ue=>{const{errors:q}=await O(ue);if(ue)for(const Se of ue){const _e=He(q,Se);_e?os(r.errors,Se,_e):Ys(r.errors,Se)}else r.errors=q;return q},k=async(ue,q,Se={valid:!0})=>{for(const _e in ue){const K=ue[_e];if(K){const{_f:ke,...Le}=K;if(ke){const qt=o.array.has(ke.name),vt=K._f&&A7(K._f);vt&&u.validatingFields&&g([_e],!0);const Xt=await gv(K,o.disabled,i,x,s.shouldUseNativeValidation&&!q,qt);if(vt&&u.validatingFields&&g([_e]),Xt[ke.name]&&(Se.valid=!1,q))break;!q&&(He(Xt,ke.name)?qt?BE(r.errors,Xt,ke.name):os(r.errors,ke.name,Xt[ke.name]):Ys(r.errors,ke.name))}!_r(Le)&&await k(Le,q,Se)}}return Se.valid},R=()=>{for(const ue of o.unMount){const q=He(n,ue);q&&(q._f.refs?q._f.refs.every(Se=>!Ng(Se)):!Ng(q._f.ref))&&we(ue)}o.unMount=new Set},F=(ue,q)=>!s.disabled&&(ue&&q&&os(i,ue,q),!Ni(z(),a)),I=(ue,q,Se)=>EE(ue,o,{...l.mount?i:Os(q)?a:ca(ue)?{[ue]:q}:q},Se,q),W=ue=>_p(He(l.mount?i:a,ue,s.shouldUnregister?He(a,ue,[]):[])),E=(ue,q,Se={})=>{const _e=He(n,ue);let K=q;if(_e){const ke=_e._f;ke&&(!ke.disabled&&os(i,ue,FE(q,ke)),K=Uh(ke.ref)&&$r(q)?"":q,RE(ke.ref)?[...ke.ref.options].forEach(Le=>Le.selected=K.includes(Le.value)):ke.refs?gm(ke.ref)?ke.refs.forEach(Le=>{(!Le.defaultChecked||!Le.disabled)&&(Array.isArray(K)?Le.checked=!!K.find(qt=>qt===Le.value):Le.checked=K===Le.value||!!K)}):ke.refs.forEach(Le=>Le.checked=Le.value===K):Sb(ke.ref)?ke.ref.value="":(ke.ref.value=K,ke.ref.type||h.state.next({name:ue,values:As(i)})))}(Se.shouldDirty||Se.shouldTouch)&&N(ue,K,Se.shouldTouch,Se.shouldDirty,!0),Se.shouldValidate&&V(ue)},B=(ue,q,Se)=>{for(const _e in q){if(!q.hasOwnProperty(_e))return;const K=q[_e],ke=ue+"."+_e,Le=He(n,ke);(o.array.has(ue)||Js(K)||Le&&!Le._f)&&!fl(K)?B(ke,K,Se):E(ke,K,Se)}},G=(ue,q,Se={})=>{const _e=He(n,ue),K=o.array.has(ue),ke=As(q);os(i,ue,ke),K?(h.array.next({name:ue,values:As(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&Se.shouldDirty&&h.state.next({name:ue,dirtyFields:cd(a,i),isDirty:F(ue,ke)})):_e&&!_e._f&&!$r(ke)?B(ue,ke,Se):E(ue,ke,Se),fv(ue,o)&&h.state.next({...r}),h.state.next({name:l.mount?ue:void 0,values:As(i)})},J=async ue=>{l.mount=!0;const q=ue.target;let Se=q.name,_e=!0;const K=He(n,Se),ke=vt=>{_e=Number.isNaN(vt)||fl(vt)&&isNaN(vt.getTime())||Ni(vt,He(i,Se,vt))},Le=wo(s.mode),qt=wo(s.reValidateMode);if(K){let vt,Xt;const mn=q.type?H1(K._f):TE(ue),oe=ue.type===qh.BLUR||ue.type===qh.FOCUS_OUT,Ue=!T7(K._f)&&!s.resolver&&!He(r.errors,Se)&&!K._f.deps||E7(oe,He(r.touchedFields,Se),r.isSubmitted,qt,Le),Ke=fv(Se,o,oe);os(i,Se,mn),oe?(K._f.onBlur&&K._f.onBlur(ue),c&&c(0)):K._f.onChange&&K._f.onChange(ue);const ye=N(Se,mn,oe),nt=!_r(ye)||Ke;if(!oe&&h.state.next({name:Se,type:ue.type,values:As(i)}),Ue)return(u.isValid||m.isValid)&&(s.mode==="onBlur"?oe&&p():oe||p()),nt&&h.state.next({name:Se,...Ke?{}:ye});if(!oe&&Ke&&h.state.next({...r}),s.resolver){const{errors:_t}=await O([Se]);if(ke(mn),_e){const Ls=G1(r.errors,n,Se),sl=G1(_t,n,Ls.name||Se);vt=sl.error,Se=sl.name,Xt=_r(_t)}}else g([Se],!0),vt=(await gv(K,o.disabled,i,x,s.shouldUseNativeValidation))[Se],g([Se]),ke(mn),_e&&(vt?Xt=!1:(u.isValid||m.isValid)&&(Xt=await k(n,!0)));_e&&(K._f.deps&&V(K._f.deps),S(Se,Xt,vt,ye))}},C=(ue,q)=>{if(He(r.errors,q)&&ue.focus)return ue.focus(),1},V=async(ue,q={})=>{let Se,_e;const K=Ur(ue);if(s.resolver){const ke=await P(Os(ue)?ue:K);Se=_r(ke),_e=ue?!K.some(Le=>He(ke,Le)):Se}else ue?(_e=(await Promise.all(K.map(async ke=>{const Le=He(n,ke);return await k(Le&&Le._f?{[ke]:Le}:Le)}))).every(Boolean),!(!_e&&!r.isValid)&&p()):_e=Se=await k(n);return h.state.next({...!ca(ue)||(u.isValid||m.isValid)&&Se!==r.isValid?{}:{name:ue},...s.resolver||!ue?{isValid:Se}:{},errors:r.errors}),q.shouldFocus&&!_e&&Vo(n,C,ue?K:o.mount),_e},z=ue=>{const q={...l.mount?i:a};return Os(ue)?q:ca(ue)?He(q,ue):ue.map(Se=>He(q,Se))},le=(ue,q)=>({invalid:!!He((q||r).errors,ue),isDirty:!!He((q||r).dirtyFields,ue),error:He((q||r).errors,ue),isValidating:!!He(r.validatingFields,ue),isTouched:!!He((q||r).touchedFields,ue)}),Ce=ue=>{ue&&Ur(ue).forEach(q=>Ys(r.errors,q)),h.state.next({errors:ue?r.errors:{}})},H=(ue,q,Se)=>{const _e=(He(n,ue,{_f:{}})._f||{}).ref,K=He(r.errors,ue)||{},{ref:ke,message:Le,type:qt,...vt}=K;os(r.errors,ue,{...vt,...q,ref:_e}),h.state.next({name:ue,errors:r.errors,isValid:!1}),Se&&Se.shouldFocus&&_e&&_e.focus&&_e.focus()},_=(ue,q)=>qn(ue)?h.state.subscribe({next:Se=>ue(I(void 0,q),Se)}):I(ue,q,!0),se=ue=>h.state.subscribe({next:q=>{O7(ue.name,q.name,ue.exact)&&D7(q,ue.formState||u,Vt,ue.reRenderRoot)&&ue.callback({values:{...i},...r,...q})}}).unsubscribe,te=ue=>(l.mount=!0,m={...m,...ue.formState},se({...ue,formState:m})),we=(ue,q={})=>{for(const Se of ue?Ur(ue):o.mount)o.mount.delete(Se),o.array.delete(Se),q.keepValue||(Ys(n,Se),Ys(i,Se)),!q.keepError&&Ys(r.errors,Se),!q.keepDirty&&Ys(r.dirtyFields,Se),!q.keepTouched&&Ys(r.touchedFields,Se),!q.keepIsValidating&&Ys(r.validatingFields,Se),!s.shouldUnregister&&!q.keepDefaultValue&&Ys(a,Se);h.state.next({values:As(i)}),h.state.next({...r,...q.keepDirty?{isDirty:F()}:{}}),!q.keepIsValid&&p()},ve=({disabled:ue,name:q})=>{(Xr(ue)&&l.mount||ue||o.disabled.has(q))&&(ue?o.disabled.add(q):o.disabled.delete(q))},X=(ue,q={})=>{let Se=He(n,ue);const _e=Xr(q.disabled)||Xr(s.disabled);return os(n,ue,{...Se||{},_f:{...Se&&Se._f?Se._f:{ref:{name:ue}},name:ue,mount:!0,...q}}),o.mount.add(ue),Se?ve({disabled:Xr(q.disabled)?q.disabled:s.disabled,name:ue}):w(ue,!0,q.value),{..._e?{disabled:q.disabled||s.disabled}:{},...s.progressive?{required:!!q.required,min:dd(q.min),max:dd(q.max),minLength:dd(q.minLength),maxLength:dd(q.maxLength),pattern:dd(q.pattern)}:{},name:ue,onChange:J,onBlur:J,ref:K=>{if(K){X(ue,q),Se=He(n,ue);const ke=Os(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,Le=S7(ke),qt=Se._f.refs||[];if(Le?qt.find(vt=>vt===ke):ke===Se._f.ref)return;os(n,ue,{_f:{...Se._f,...Le?{refs:[...qt.filter(Ng),ke,...Array.isArray(He(a,ue))?[{}]:[]],ref:{type:ke.type,name:ue}}:{ref:ke}}}),w(ue,!1,void 0,ke)}else Se=He(n,ue,{}),Se._f&&(Se._f.mount=!1),(s.shouldUnregister||q.shouldUnregister)&&!(DE(o.array,ue)&&l.action)&&o.unMount.add(ue)}}},ce=()=>s.shouldFocusError&&Vo(n,C,o.mount),Y=ue=>{Xr(ue)&&(h.state.next({disabled:ue}),Vo(n,(q,Se)=>{const _e=He(n,Se);_e&&(q.disabled=_e._f.disabled||ue,Array.isArray(_e._f.refs)&&_e._f.refs.forEach(K=>{K.disabled=_e._f.disabled||ue}))},0,!1))},he=(ue,q)=>async Se=>{let _e;Se&&(Se.preventDefault&&Se.preventDefault(),Se.persist&&Se.persist());let K=As(i);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:ke,values:Le}=await O();r.errors=ke,K=As(Le)}else await k(n);if(o.disabled.size)for(const ke of o.disabled)Ys(K,ke);if(Ys(r.errors,"root"),_r(r.errors)){h.state.next({errors:{}});try{await ue(K,Se)}catch(ke){_e=ke}}else q&&await q({...r.errors},Se),ce(),setTimeout(ce);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_r(r.errors)&&!_e,submitCount:r.submitCount+1,errors:r.errors}),_e)throw _e},Fe=(ue,q={})=>{He(n,ue)&&(Os(q.defaultValue)?G(ue,As(He(a,ue))):(G(ue,q.defaultValue),os(a,ue,As(q.defaultValue))),q.keepTouched||Ys(r.touchedFields,ue),q.keepDirty||(Ys(r.dirtyFields,ue),r.isDirty=q.defaultValue?F(ue,As(He(a,ue))):F()),q.keepError||(Ys(r.errors,ue),u.isValid&&p()),h.state.next({...r}))},Ve=(ue,q={})=>{const Se=ue?As(ue):a,_e=As(Se),K=_r(ue),ke=K?a:_e;if(q.keepDefaultValues||(a=Se),!q.keepValues){if(q.keepDirtyValues){const Le=new Set([...o.mount,...Object.keys(cd(a,i))]);for(const qt of Array.from(Le))He(r.dirtyFields,qt)?os(ke,qt,He(i,qt)):G(qt,He(ke,qt))}else{if(bb&&Os(ue))for(const Le of o.mount){const qt=He(n,Le);if(qt&&qt._f){const vt=Array.isArray(qt._f.refs)?qt._f.refs[0]:qt._f.ref;if(Uh(vt)){const Xt=vt.closest("form");if(Xt){Xt.reset();break}}}}if(q.keepFieldsRef)for(const Le of o.mount)G(Le,He(ke,Le));else n={}}i=s.shouldUnregister?q.keepDefaultValues?As(a):{}:As(ke),h.array.next({values:{...ke}}),h.state.next({values:{...ke}})}o={mount:q.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!q.keepIsValid||!!q.keepDirtyValues,l.watch=!!s.shouldUnregister,h.state.next({submitCount:q.keepSubmitCount?r.submitCount:0,isDirty:K?!1:q.keepDirty?r.isDirty:!!(q.keepDefaultValues&&!Ni(ue,a)),isSubmitted:q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:K?{}:q.keepDirtyValues?q.keepDefaultValues&&i?cd(a,i):r.dirtyFields:q.keepDefaultValues&&ue?cd(a,ue):q.keepDirty?r.dirtyFields:{},touchedFields:q.keepTouched?r.touchedFields:{},errors:q.keepErrors?r.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},rt=(ue,q)=>Ve(qn(ue)?ue(i):ue,q),gt=(ue,q={})=>{const Se=He(n,ue),_e=Se&&Se._f;if(_e){const K=_e.refs?_e.refs[0]:_e.ref;K.focus&&(K.focus(),q.shouldSelect&&qn(K.select)&&K.select())}},Vt=ue=>{r={...r,...ue}},Qs={control:{register:X,unregister:we,getFieldState:le,handleSubmit:he,setError:H,_subscribe:se,_runSchema:O,_focusError:ce,_getWatch:I,_getDirty:F,_setValid:p,_setFieldArray:y,_setDisabledField:ve,_setErrors:j,_getFieldArray:W,_reset:Ve,_resetDefaultValues:()=>qn(s.defaultValues)&&s.defaultValues().then(ue=>{rt(ue,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Y,_subjects:h,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(ue){l=ue},get _defaultValues(){return a},get _names(){return o},set _names(ue){o=ue},get _formState(){return r},get _options(){return s},set _options(ue){s={...s,...ue}}},subscribe:te,trigger:V,register:X,handleSubmit:he,watch:_,setValue:G,getValues:z,reset:rt,resetField:Fe,clearErrors:Ce,unregister:we,setError:H,setFocus:gt,getFieldState:le};return{...Qs,formControl:Qs}}var pi=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(Math.random()*16+t)%16|0;return(s=="x"?r:r&3|8).toString(16)})},wg=(t,s,r={})=>r.shouldFocus||Os(r.shouldFocus)?r.focusName||`${t}.${Os(r.focusIndex)?s:r.focusIndex}.`:"",Sg=(t,s)=>[...t,...Ur(s)],Cg=t=>Array.isArray(t)?t.map(()=>{}):void 0;function kg(t,s,r){return[...t.slice(0,s),...Ur(r),...t.slice(s)]}var Pg=(t,s,r)=>Array.isArray(t)?(Os(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(s,1)[0]),t):[],Ag=(t,s)=>[...Ur(s),...Ur(t)];function I7(t,s){let r=0;const n=[...t];for(const a of s)n.splice(a-r,1),r++;return _p(n).length?n:[]}var Tg=(t,s)=>Os(s)?[]:I7(t,Ur(s).sort((r,n)=>r-n)),Dg=(t,s,r)=>{[t[s],t[r]]=[t[r],t[s]]},Q1=(t,s,r)=>(t[s]=r,t);function $7(t){const s=jm(),{control:r=s.control,name:n,keyName:a="id",shouldUnregister:i,rules:l}=t,[o,c]=ee.useState(r._getFieldArray(n)),d=ee.useRef(r._getFieldArray(n).map(pi)),u=ee.useRef(o),m=ee.useRef(n),h=ee.useRef(!1);m.current=n,u.current=o,r._names.array.add(n),l&&r.register(n,l),Ip(()=>r._subjects.array.subscribe({next:({values:S,name:O})=>{if(O===m.current||!O){const P=He(S,m.current);Array.isArray(P)&&(c(P),d.current=P.map(pi))}}}).unsubscribe,[r]);const x=ee.useCallback(S=>{h.current=!0,r._setFieldArray(n,S)},[r,n]),f=(S,O)=>{const P=Ur(As(S)),k=Sg(r._getFieldArray(n),P);r._names.focus=wg(n,k.length-1,O),d.current=Sg(d.current,P.map(pi)),x(k),c(k),r._setFieldArray(n,k,Sg,{argA:Cg(S)})},p=(S,O)=>{const P=Ur(As(S)),k=Ag(r._getFieldArray(n),P);r._names.focus=wg(n,0,O),d.current=Ag(d.current,P.map(pi)),x(k),c(k),r._setFieldArray(n,k,Ag,{argA:Cg(S)})},g=S=>{const O=Tg(r._getFieldArray(n),S);d.current=Tg(d.current,S),x(O),c(O),!Array.isArray(He(r._fields,n))&&os(r._fields,n,void 0),r._setFieldArray(n,O,Tg,{argA:S})},y=(S,O,P)=>{const k=Ur(As(O)),R=kg(r._getFieldArray(n),S,k);r._names.focus=wg(n,S,P),d.current=kg(d.current,S,k.map(pi)),x(R),c(R),r._setFieldArray(n,R,kg,{argA:S,argB:Cg(O)})},b=(S,O)=>{const P=r._getFieldArray(n);Dg(P,S,O),Dg(d.current,S,O),x(P),c(P),r._setFieldArray(n,P,Dg,{argA:S,argB:O},!1)},j=(S,O)=>{const P=r._getFieldArray(n);Pg(P,S,O),Pg(d.current,S,O),x(P),c(P),r._setFieldArray(n,P,Pg,{argA:S,argB:O},!1)},w=(S,O)=>{const P=As(O),k=Q1(r._getFieldArray(n),S,P);d.current=[...k].map((R,F)=>!R||F===S?pi():d.current[F]),x(k),c([...k]),r._setFieldArray(n,k,Q1,{argA:S,argB:P},!0,!1)},N=S=>{const O=Ur(As(S));d.current=O.map(pi),x([...O]),c([...O]),r._setFieldArray(n,[...O],P=>P,{},!0,!1)};return ee.useEffect(()=>{if(r._state.action=!1,fv(n,r._names)&&r._subjects.state.next({...r._formState}),h.current&&(!wo(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!wo(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(S=>{const O=He(S.errors,n),P=He(r._formState.errors,n);(P?!O&&P.type||O&&(P.type!==O.type||P.message!==O.message):O&&O.type)&&(O?os(r._formState.errors,n,O):Ys(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const S=He(r._fields,n);S&&S._f&&!(wo(r._options.reValidateMode).isOnSubmit&&wo(r._options.mode).isOnSubmit)&&gv(S,r._names.disabled,r._formValues,r._options.criteriaMode===yn.all,r._options.shouldUseNativeValidation,!0).then(O=>!_r(O)&&r._subjects.state.next({errors:BE(r._formState.errors,O,n)}))}r._subjects.state.next({name:n,values:As(r._formValues)}),r._names.focus&&Vo(r._fields,(S,O)=>{if(r._names.focus&&O.startsWith(r._names.focus)&&S.focus)return S.focus(),1}),r._names.focus="",r._setValid(),h.current=!1},[o,n,r]),ee.useEffect(()=>(!He(r._formValues,n)&&r._setFieldArray(n),()=>{const S=(O,P)=>{const k=He(r._fields,O);k&&k._f&&(k._f.mount=P)};r._options.shouldUnregister||i?r.unregister(n):S(n,!1)}),[n,r,a,i]),{swap:ee.useCallback(b,[x,n,r]),move:ee.useCallback(j,[x,n,r]),prepend:ee.useCallback(p,[x,n,r]),append:ee.useCallback(f,[x,n,r]),remove:ee.useCallback(g,[x,n,r]),insert:ee.useCallback(y,[x,n,r]),update:ee.useCallback(w,[x,n,r]),replace:ee.useCallback(N,[x,n,r]),fields:ee.useMemo(()=>o.map((S,O)=>({...S,[a]:d.current[O]||pi()})),[o,a])}}function Wt(t={}){const s=ee.useRef(void 0),r=ee.useRef(void 0),[n,a]=ee.useState({isDirty:!1,isValidating:!1,isLoading:qn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:qn(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:n},t.defaultValues&&!qn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=_7(t);s.current={...o,formState:n}}const i=s.current.control;return i._options=t,Ip(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),ee.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ee.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),ee.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),ee.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),ee.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),ee.useEffect(()=>{t.values&&!Ni(t.values,r.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=t.values,a(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),ee.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=OE(n,i),s.current}const Y1=(t,s,r)=>{if(t&&"reportValidity"in t){const n=He(r,s);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},VE=(t,s)=>{for(const r in s.fields){const n=s.fields[r];n&&n.ref&&"reportValidity"in n.ref?Y1(n.ref,r,t):n.refs&&n.refs.forEach(a=>Y1(a,r,t))}},F7=(t,s)=>{s.shouldUseNativeValidation&&VE(t,s);const r={};for(const n in t){const a=He(s.fields,n),i=Object.assign(t[n]||{},{ref:a&&a.ref});if(L7(s.names||Object.keys(t),n)){const l=Object.assign({},He(r,n));os(l,"root",i),os(r,n,l)}else os(r,n,i)}return r},L7=(t,s)=>t.some(r=>r.startsWith(s+"."));var B7=function(t,s){for(var r={};t.length;){var n=t[0],a=n.code,i=n.message,l=n.path.join(".");if(!r[l])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(m){return t.push(m)})}),s){var c=r[l].types,d=c&&c[n.code];r[l]=ME(l,s,r,a,d?[].concat(d,n.message):n.message)}t.shift()}return r},ts=function(t,s,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,s)).then(function(d){return i.shouldUseNativeValidation&&VE({},i),{errors:{},values:r.raw?n:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o?.errors)}(l))return{values:{},errors:F7(B7(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},ns;(function(t){t.assertEqual=a=>{};function s(a){}t.assertIs=s;function r(a){throw new Error}t.assertNever=r,t.arrayToEnum=a=>{const i={};for(const l of a)i[l]=l;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),l={};for(const o of i)l[o]=a[o];return t.objectValues(l)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&i.push(l);return i},t.find=(a,i)=>{for(const l of a)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ns||(ns={}));var X1;(function(t){t.mergeShapes=(s,r)=>({...s,...r})})(X1||(X1={}));const lt=ns.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),yi=t=>{switch(typeof t){case"undefined":return lt.undefined;case"string":return lt.string;case"number":return Number.isNaN(t)?lt.nan:lt.number;case"boolean":return lt.boolean;case"function":return lt.function;case"bigint":return lt.bigint;case"symbol":return lt.symbol;case"object":return Array.isArray(t)?lt.array:t===null?lt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?lt.promise:typeof Map<"u"&&t instanceof Map?lt.map:typeof Set<"u"&&t instanceof Set?lt.set:typeof Date<"u"&&t instanceof Date?lt.date:lt.object;default:return lt.unknown}},qe=ns.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ni extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=s}format(s){const r=s||function(i){return i.message},n={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let o=n,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(r(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return a(this),n}static assert(s){if(!(s instanceof ni))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ns.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(s(a))}else n.push(s(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ni.create=t=>new ni(t);const jv=(t,s)=>{let r;switch(t.code){case qe.invalid_type:t.received===lt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case qe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ns.jsonStringifyReplacer)}`;break;case qe.unrecognized_keys:r=`Unrecognized key(s) in object: ${ns.joinValues(t.keys,", ")}`;break;case qe.invalid_union:r="Invalid input";break;case qe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ns.joinValues(t.options)}`;break;case qe.invalid_enum_value:r=`Invalid enum value. Expected ${ns.joinValues(t.options)}, received '${t.received}'`;break;case qe.invalid_arguments:r="Invalid function arguments";break;case qe.invalid_return_type:r="Invalid function return type";break;case qe.invalid_date:r="Invalid date";break;case qe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ns.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case qe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case qe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case qe.custom:r="Invalid input";break;case qe.invalid_intersection_types:r="Intersection results could not be merged";break;case qe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case qe.not_finite:r="Number must be finite";break;default:r=s.defaultError,ns.assertNever(t)}return{message:r}};let V7=jv;function q7(){return V7}const U7=t=>{const{data:s,path:r,errorMaps:n,issueData:a}=t,i=[...r,...a.path||[]],l={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:s,defaultError:o}).message;return{...a,path:i,message:o}};function at(t,s){const r=q7(),n=U7({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===jv?void 0:jv].filter(a=>!!a)});t.common.issues.push(n)}class cn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,r){const n=[];for(const a of r){if(a.status==="aborted")return Et;a.status==="dirty"&&s.dirty(),n.push(a.value)}return{status:s.value,value:n}}static async mergeObjectAsync(s,r){const n=[];for(const a of r){const i=await a.key,l=await a.value;n.push({key:i,value:l})}return cn.mergeObjectSync(s,n)}static mergeObjectSync(s,r){const n={};for(const a of r){const{key:i,value:l}=a;if(i.status==="aborted"||l.status==="aborted")return Et;i.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(n[i.value]=l.value)}return{status:s.value,value:n}}}const Et=Object.freeze({status:"aborted"}),kd=t=>({status:"dirty",value:t}),En=t=>({status:"valid",value:t}),Z1=t=>t.status==="aborted",J1=t=>t.status==="dirty",Jo=t=>t.status==="valid",Kh=t=>typeof Promise<"u"&&t instanceof Promise;var mt;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s?.message})(mt||(mt={}));class qi{constructor(s,r,n,a){this._cachedPath=[],this.parent=s,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const eS=(t,s)=>{if(Jo(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ni(t.common.issues);return this._error=r,this._error}}};function Ht(t){if(!t)return{};const{errorMap:s,invalid_type_error:r,required_error:n,description:a}=t;if(s&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:a}:{errorMap:(l,o)=>{const{message:c}=t;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??n??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??r??o.defaultError}},description:a}}class rs{get description(){return this._def.description}_getType(s){return yi(s.data)}_getOrReturnCtx(s,r){return r||{common:s.parent.common,data:s.data,parsedType:yi(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new cn,ctx:{common:s.parent.common,data:s.data,parsedType:yi(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const r=this._parse(s);if(Kh(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(s){const r=this._parse(s);return Promise.resolve(r)}parse(s,r){const n=this.safeParse(s,r);if(n.success)return n.data;throw n.error}safeParse(s,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:yi(s)},a=this._parseSync({data:s,path:n.path,parent:n});return eS(n,a)}"~validate"(s){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:yi(s)};if(!this["~standard"].async)try{const n=this._parseSync({data:s,path:[],parent:r});return Jo(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:r}).then(n=>Jo(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(s,r){const n=await this.safeParseAsync(s,r);if(n.success)return n.data;throw n.error}async safeParseAsync(s,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:yi(s)},a=this._parse({data:s,path:n.path,parent:n}),i=await(Kh(a)?a:Promise.resolve(a));return eS(n,i)}refine(s,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const l=s(a),o=()=>i.addIssue({code:qe.custom,...n(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(s,r){return this._refinement((n,a)=>s(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(s){return new sc({schema:this,typeName:Mt.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Ri.create(this,this._def)}nullable(){return rc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return pa.create(this)}promise(){return Yh.create(this,this._def)}or(s){return Wh.create([this,s],this._def)}and(s){return Qh.create(this,s,this._def)}transform(s){return new sc({...Ht(this._def),schema:this,typeName:Mt.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const r=typeof s=="function"?s:()=>s;return new bv({...Ht(this._def),innerType:this,defaultValue:r,typeName:Mt.ZodDefault})}brand(){return new mH({typeName:Mt.ZodBranded,type:this,...Ht(this._def)})}catch(s){const r=typeof s=="function"?s:()=>s;return new Nv({...Ht(this._def),innerType:this,catchValue:r,typeName:Mt.ZodCatch})}describe(s){const r=this.constructor;return new r({...this._def,description:s})}pipe(s){return kb.create(this,s)}readonly(){return wv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const z7=/^c[^\s-]{8,}$/i,H7=/^[0-9a-z]+$/,K7=/^[0-9A-HJKMNP-TV-Z]{26}$/i,G7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,W7=/^[a-z0-9_-]{21}$/i,Q7=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Y7=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,X7=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Z7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Og;const J7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,sH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,qE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",aH=new RegExp(`^${qE}$`);function UE(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${r}`}function iH(t){return new RegExp(`^${UE(t)}$`)}function lH(t){let s=`${qE}T${UE(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${r.join("|")})`,new RegExp(`^${s}$`)}function oH(t,s){return!!((s==="v4"||!s)&&J7.test(t)||(s==="v6"||!s)&&tH.test(t))}function cH(t,s){if(!Q7.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||s&&a.alg!==s)}catch{return!1}}function dH(t,s){return!!((s==="v4"||!s)&&eH.test(t)||(s==="v6"||!s)&&sH.test(t))}class qa extends rs{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==lt.string){const i=this._getOrReturnCtx(s);return at(i,{code:qe.invalid_type,expected:lt.string,received:i.parsedType}),Et}const n=new cn;let a;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(a=this._getOrReturnCtx(s,a),at(a,{code:qe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")s.data.length>i.value&&(a=this._getOrReturnCtx(s,a),at(a,{code:qe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const l=s.data.length>i.value,o=s.data.length<i.value;(l||o)&&(a=this._getOrReturnCtx(s,a),l?at(a,{code:qe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&at(a,{code:qe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")X7.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"email",code:qe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Og||(Og=new RegExp(Z7,"u")),Og.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"emoji",code:qe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")G7.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"uuid",code:qe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")W7.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"nanoid",code:qe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")z7.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"cuid",code:qe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")H7.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"cuid2",code:qe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")K7.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"ulid",code:qe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{a=this._getOrReturnCtx(s,a),at(a,{validation:"url",code:qe.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"regex",code:qe.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(s,a),at(a,{code:qe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(a=this._getOrReturnCtx(s,a),at(a,{code:qe.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(a=this._getOrReturnCtx(s,a),at(a,{code:qe.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?lH(i).test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{code:qe.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?aH.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{code:qe.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?iH(i).test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{code:qe.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Y7.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"duration",code:qe.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?oH(s.data,i.version)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"ip",code:qe.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?cH(s.data,i.alg)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"jwt",code:qe.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?dH(s.data,i.version)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"cidr",code:qe.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?rH.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"base64",code:qe.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?nH.test(s.data)||(a=this._getOrReturnCtx(s,a),at(a,{validation:"base64url",code:qe.invalid_string,message:i.message}),n.dirty()):ns.assertNever(i);return{status:n.value,value:s.data}}_regex(s,r,n){return this.refinement(a=>s.test(a),{validation:r,code:qe.invalid_string,...mt.errToObj(n)})}_addCheck(s){return new qa({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...mt.errToObj(s)})}url(s){return this._addCheck({kind:"url",...mt.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...mt.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...mt.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...mt.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...mt.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...mt.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...mt.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...mt.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...mt.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...mt.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...mt.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...mt.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof s?.precision>"u"?null:s?.precision,offset:s?.offset??!1,local:s?.local??!1,...mt.errToObj(s?.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof s?.precision>"u"?null:s?.precision,...mt.errToObj(s?.message)})}duration(s){return this._addCheck({kind:"duration",...mt.errToObj(s)})}regex(s,r){return this._addCheck({kind:"regex",regex:s,...mt.errToObj(r)})}includes(s,r){return this._addCheck({kind:"includes",value:s,position:r?.position,...mt.errToObj(r?.message)})}startsWith(s,r){return this._addCheck({kind:"startsWith",value:s,...mt.errToObj(r)})}endsWith(s,r){return this._addCheck({kind:"endsWith",value:s,...mt.errToObj(r)})}min(s,r){return this._addCheck({kind:"min",value:s,...mt.errToObj(r)})}max(s,r){return this._addCheck({kind:"max",value:s,...mt.errToObj(r)})}length(s,r){return this._addCheck({kind:"length",value:s,...mt.errToObj(r)})}nonempty(s){return this.min(1,mt.errToObj(s))}trim(){return new qa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxLength(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}qa.create=t=>new qa({checks:[],typeName:Mt.ZodString,coerce:t?.coerce??!1,...Ht(t)});function uH(t,s){const r=(t.toString().split(".")[1]||"").length,n=(s.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(t.toFixed(a).replace(".","")),l=Number.parseInt(s.toFixed(a).replace(".",""));return i%l/10**a}class Fl extends rs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==lt.number){const i=this._getOrReturnCtx(s);return at(i,{code:qe.invalid_type,expected:lt.number,received:i.parsedType}),Et}let n;const a=new cn;for(const i of this._def.checks)i.kind==="int"?ns.isInteger(s.data)||(n=this._getOrReturnCtx(s,n),at(n,{code:qe.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),at(n,{code:qe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),at(n,{code:qe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?uH(s.data,i.value)!==0&&(n=this._getOrReturnCtx(s,n),at(n,{code:qe.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(n=this._getOrReturnCtx(s,n),at(n,{code:qe.not_finite,message:i.message}),a.dirty()):ns.assertNever(i);return{status:a.value,value:s.data}}gte(s,r){return this.setLimit("min",s,!0,mt.toString(r))}gt(s,r){return this.setLimit("min",s,!1,mt.toString(r))}lte(s,r){return this.setLimit("max",s,!0,mt.toString(r))}lt(s,r){return this.setLimit("max",s,!1,mt.toString(r))}setLimit(s,r,n,a){return new Fl({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:mt.toString(a)}]})}_addCheck(s){return new Fl({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:mt.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:mt.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:mt.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:mt.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:mt.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:mt.toString(r)})}finite(s){return this._addCheck({kind:"finite",message:mt.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:mt.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:mt.toString(s)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&ns.isInteger(s.value))}get isFinite(){let s=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(s===null||n.value<s)&&(s=n.value)}return Number.isFinite(r)&&Number.isFinite(s)}}Fl.create=t=>new Fl({checks:[],typeName:Mt.ZodNumber,coerce:t?.coerce||!1,...Ht(t)});class Ll extends rs{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==lt.bigint)return this._getInvalidInput(s);let n;const a=new cn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),at(n,{code:qe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),at(n,{code:qe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(s,n),at(n,{code:qe.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ns.assertNever(i);return{status:a.value,value:s.data}}_getInvalidInput(s){const r=this._getOrReturnCtx(s);return at(r,{code:qe.invalid_type,expected:lt.bigint,received:r.parsedType}),Et}gte(s,r){return this.setLimit("min",s,!0,mt.toString(r))}gt(s,r){return this.setLimit("min",s,!1,mt.toString(r))}lte(s,r){return this.setLimit("max",s,!0,mt.toString(r))}lt(s,r){return this.setLimit("max",s,!1,mt.toString(r))}setLimit(s,r,n,a){return new Ll({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:mt.toString(a)}]})}_addCheck(s){return new Ll({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:mt.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:mt.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:mt.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:mt.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:mt.toString(r)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}Ll.create=t=>new Ll({checks:[],typeName:Mt.ZodBigInt,coerce:t?.coerce??!1,...Ht(t)});class Gh extends rs{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==lt.boolean){const n=this._getOrReturnCtx(s);return at(n,{code:qe.invalid_type,expected:lt.boolean,received:n.parsedType}),Et}return En(s.data)}}Gh.create=t=>new Gh({typeName:Mt.ZodBoolean,coerce:t?.coerce||!1,...Ht(t)});class ec extends rs{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==lt.date){const i=this._getOrReturnCtx(s);return at(i,{code:qe.invalid_type,expected:lt.date,received:i.parsedType}),Et}if(Number.isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return at(i,{code:qe.invalid_date}),Et}const n=new cn;let a;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(a=this._getOrReturnCtx(s,a),at(a,{code:qe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(a=this._getOrReturnCtx(s,a),at(a,{code:qe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):ns.assertNever(i);return{status:n.value,value:new Date(s.data.getTime())}}_addCheck(s){return new ec({...this._def,checks:[...this._def.checks,s]})}min(s,r){return this._addCheck({kind:"min",value:s.getTime(),message:mt.toString(r)})}max(s,r){return this._addCheck({kind:"max",value:s.getTime(),message:mt.toString(r)})}get minDate(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s!=null?new Date(s):null}}ec.create=t=>new ec({checks:[],coerce:t?.coerce||!1,typeName:Mt.ZodDate,...Ht(t)});class tS extends rs{_parse(s){if(this._getType(s)!==lt.symbol){const n=this._getOrReturnCtx(s);return at(n,{code:qe.invalid_type,expected:lt.symbol,received:n.parsedType}),Et}return En(s.data)}}tS.create=t=>new tS({typeName:Mt.ZodSymbol,...Ht(t)});class sS extends rs{_parse(s){if(this._getType(s)!==lt.undefined){const n=this._getOrReturnCtx(s);return at(n,{code:qe.invalid_type,expected:lt.undefined,received:n.parsedType}),Et}return En(s.data)}}sS.create=t=>new sS({typeName:Mt.ZodUndefined,...Ht(t)});class rS extends rs{_parse(s){if(this._getType(s)!==lt.null){const n=this._getOrReturnCtx(s);return at(n,{code:qe.invalid_type,expected:lt.null,received:n.parsedType}),Et}return En(s.data)}}rS.create=t=>new rS({typeName:Mt.ZodNull,...Ht(t)});class nS extends rs{constructor(){super(...arguments),this._any=!0}_parse(s){return En(s.data)}}nS.create=t=>new nS({typeName:Mt.ZodAny,...Ht(t)});class aS extends rs{constructor(){super(...arguments),this._unknown=!0}_parse(s){return En(s.data)}}aS.create=t=>new aS({typeName:Mt.ZodUnknown,...Ht(t)});class Ui extends rs{_parse(s){const r=this._getOrReturnCtx(s);return at(r,{code:qe.invalid_type,expected:lt.never,received:r.parsedType}),Et}}Ui.create=t=>new Ui({typeName:Mt.ZodNever,...Ht(t)});class iS extends rs{_parse(s){if(this._getType(s)!==lt.undefined){const n=this._getOrReturnCtx(s);return at(n,{code:qe.invalid_type,expected:lt.void,received:n.parsedType}),Et}return En(s.data)}}iS.create=t=>new iS({typeName:Mt.ZodVoid,...Ht(t)});class pa extends rs{_parse(s){const{ctx:r,status:n}=this._processInputParams(s),a=this._def;if(r.parsedType!==lt.array)return at(r,{code:qe.invalid_type,expected:lt.array,received:r.parsedType}),Et;if(a.exactLength!==null){const l=r.data.length>a.exactLength.value,o=r.data.length<a.exactLength.value;(l||o)&&(at(r,{code:l?qe.too_big:qe.too_small,minimum:o?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(at(r,{code:qe.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(at(r,{code:qe.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,o)=>a.type._parseAsync(new qi(r,l,r.path,o)))).then(l=>cn.mergeArray(n,l));const i=[...r.data].map((l,o)=>a.type._parseSync(new qi(r,l,r.path,o)));return cn.mergeArray(n,i)}get element(){return this._def.type}min(s,r){return new pa({...this._def,minLength:{value:s,message:mt.toString(r)}})}max(s,r){return new pa({...this._def,maxLength:{value:s,message:mt.toString(r)}})}length(s,r){return new pa({...this._def,exactLength:{value:s,message:mt.toString(r)}})}nonempty(s){return this.min(1,s)}}pa.create=(t,s)=>new pa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Mt.ZodArray,...Ht(s)});function No(t){if(t instanceof sr){const s={};for(const r in t.shape){const n=t.shape[r];s[r]=Ri.create(No(n))}return new sr({...t._def,shape:()=>s})}else return t instanceof pa?new pa({...t._def,type:No(t.element)}):t instanceof Ri?Ri.create(No(t.unwrap())):t instanceof rc?rc.create(No(t.unwrap())):t instanceof Bl?Bl.create(t.items.map(s=>No(s))):t}class sr extends rs{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),r=ns.objectKeys(s);return this._cached={shape:s,keys:r},this._cached}_parse(s){if(this._getType(s)!==lt.object){const d=this._getOrReturnCtx(s);return at(d,{code:qe.invalid_type,expected:lt.object,received:d.parsedType}),Et}const{status:n,ctx:a}=this._processInputParams(s),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ui&&this._def.unknownKeys==="strip"))for(const d in a.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new qi(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Ui){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")o.length>0&&(at(a,{code:qe.unrecognized_keys,keys:o}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new qi(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,h=await u.value;d.push({key:m,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>cn.mergeObjectSync(n,d)):cn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(s){return mt.errToObj,new sr({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(r,n)=>{const a=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:mt.errToObj(s).message??a}:{message:a}}}:{}})}strip(){return new sr({...this._def,unknownKeys:"strip"})}passthrough(){return new sr({...this._def,unknownKeys:"passthrough"})}extend(s){return new sr({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new sr({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:Mt.ZodObject})}setKey(s,r){return this.augment({[s]:r})}catchall(s){return new sr({...this._def,catchall:s})}pick(s){const r={};for(const n of ns.objectKeys(s))s[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new sr({...this._def,shape:()=>r})}omit(s){const r={};for(const n of ns.objectKeys(this.shape))s[n]||(r[n]=this.shape[n]);return new sr({...this._def,shape:()=>r})}deepPartial(){return No(this)}partial(s){const r={};for(const n of ns.objectKeys(this.shape)){const a=this.shape[n];s&&!s[n]?r[n]=a:r[n]=a.optional()}return new sr({...this._def,shape:()=>r})}required(s){const r={};for(const n of ns.objectKeys(this.shape))if(s&&!s[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Ri;)i=i._def.innerType;r[n]=i}return new sr({...this._def,shape:()=>r})}keyof(){return zE(ns.objectKeys(this.shape))}}sr.create=(t,s)=>new sr({shape:()=>t,unknownKeys:"strip",catchall:Ui.create(),typeName:Mt.ZodObject,...Ht(s)});sr.strictCreate=(t,s)=>new sr({shape:()=>t,unknownKeys:"strict",catchall:Ui.create(),typeName:Mt.ZodObject,...Ht(s)});sr.lazycreate=(t,s)=>new sr({shape:t,unknownKeys:"strip",catchall:Ui.create(),typeName:Mt.ZodObject,...Ht(s)});class Wh extends rs{_parse(s){const{ctx:r}=this._processInputParams(s),n=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new ni(o.ctx.common.issues));return at(r,{code:qe.invalid_union,unionErrors:l}),Et}if(r.common.async)return Promise.all(n.map(async i=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(a);{let i;const l=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new ni(c));return at(r,{code:qe.invalid_union,unionErrors:o}),Et}}get options(){return this._def.options}}Wh.create=(t,s)=>new Wh({options:t,typeName:Mt.ZodUnion,...Ht(s)});function vv(t,s){const r=yi(t),n=yi(s);if(t===s)return{valid:!0,data:t};if(r===lt.object&&n===lt.object){const a=ns.objectKeys(s),i=ns.objectKeys(t).filter(o=>a.indexOf(o)!==-1),l={...t,...s};for(const o of i){const c=vv(t[o],s[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(r===lt.array&&n===lt.array){if(t.length!==s.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const l=t[i],o=s[i],c=vv(l,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===lt.date&&n===lt.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class Qh extends rs{_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=(i,l)=>{if(Z1(i)||Z1(l))return Et;const o=vv(i.value,l.value);return o.valid?((J1(i)||J1(l))&&r.dirty(),{status:r.value,value:o.data}):(at(n,{code:qe.invalid_intersection_types}),Et)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,l])=>a(i,l)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Qh.create=(t,s,r)=>new Qh({left:t,right:s,typeName:Mt.ZodIntersection,...Ht(r)});class Bl extends rs{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==lt.array)return at(n,{code:qe.invalid_type,expected:lt.array,received:n.parsedType}),Et;if(n.data.length<this._def.items.length)return at(n,{code:qe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Et;!this._def.rest&&n.data.length>this._def.items.length&&(at(n,{code:qe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new qi(n,l,n.path,o)):null}).filter(l=>!!l);return n.common.async?Promise.all(i).then(l=>cn.mergeArray(r,l)):cn.mergeArray(r,i)}get items(){return this._def.items}rest(s){return new Bl({...this._def,rest:s})}}Bl.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bl({items:t,typeName:Mt.ZodTuple,rest:null,...Ht(s)})};class lS extends rs{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==lt.map)return at(n,{code:qe.invalid_type,expected:lt.map,received:n.parsedType}),Et;const a=this._def.keyType,i=this._def.valueType,l=[...n.data.entries()].map(([o,c],d)=>({key:a._parse(new qi(n,o,n.path,[d,"key"])),value:i._parse(new qi(n,c,n.path,[d,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Et;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Et;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}}}}lS.create=(t,s,r)=>new lS({valueType:s,keyType:t,typeName:Mt.ZodMap,...Ht(r)});class cu extends rs{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==lt.set)return at(n,{code:qe.invalid_type,expected:lt.set,received:n.parsedType}),Et;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(at(n,{code:qe.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(at(n,{code:qe.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return Et;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const o=[...n.data.values()].map((c,d)=>i._parse(new qi(n,c,n.path,d)));return n.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(s,r){return new cu({...this._def,minSize:{value:s,message:mt.toString(r)}})}max(s,r){return new cu({...this._def,maxSize:{value:s,message:mt.toString(r)}})}size(s,r){return this.min(s,r).max(s,r)}nonempty(s){return this.min(1,s)}}cu.create=(t,s)=>new cu({valueType:t,minSize:null,maxSize:null,typeName:Mt.ZodSet,...Ht(s)});class oS extends rs{get schema(){return this._def.getter()}_parse(s){const{ctx:r}=this._processInputParams(s);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}oS.create=(t,s)=>new oS({getter:t,typeName:Mt.ZodLazy,...Ht(s)});class yv extends rs{_parse(s){if(s.data!==this._def.value){const r=this._getOrReturnCtx(s);return at(r,{received:r.data,code:qe.invalid_literal,expected:this._def.value}),Et}return{status:"valid",value:s.data}}get value(){return this._def.value}}yv.create=(t,s)=>new yv({value:t,typeName:Mt.ZodLiteral,...Ht(s)});function zE(t,s){return new tc({values:t,typeName:Mt.ZodEnum,...Ht(s)})}class tc extends rs{_parse(s){if(typeof s.data!="string"){const r=this._getOrReturnCtx(s),n=this._def.values;return at(r,{expected:ns.joinValues(n),received:r.parsedType,code:qe.invalid_type}),Et}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const r=this._getOrReturnCtx(s),n=this._def.values;return at(r,{received:r.data,code:qe.invalid_enum_value,options:n}),Et}return En(s.data)}get options(){return this._def.values}get enum(){const s={};for(const r of this._def.values)s[r]=r;return s}get Values(){const s={};for(const r of this._def.values)s[r]=r;return s}get Enum(){const s={};for(const r of this._def.values)s[r]=r;return s}extract(s,r=this._def){return tc.create(s,{...this._def,...r})}exclude(s,r=this._def){return tc.create(this.options.filter(n=>!s.includes(n)),{...this._def,...r})}}tc.create=zE;class cS extends rs{_parse(s){const r=ns.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(s);if(n.parsedType!==lt.string&&n.parsedType!==lt.number){const a=ns.objectValues(r);return at(n,{expected:ns.joinValues(a),received:n.parsedType,code:qe.invalid_type}),Et}if(this._cache||(this._cache=new Set(ns.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const a=ns.objectValues(r);return at(n,{received:n.data,code:qe.invalid_enum_value,options:a}),Et}return En(s.data)}get enum(){return this._def.values}}cS.create=(t,s)=>new cS({values:t,typeName:Mt.ZodNativeEnum,...Ht(s)});class Yh extends rs{unwrap(){return this._def.type}_parse(s){const{ctx:r}=this._processInputParams(s);if(r.parsedType!==lt.promise&&r.common.async===!1)return at(r,{code:qe.invalid_type,expected:lt.promise,received:r.parsedType}),Et;const n=r.parsedType===lt.promise?r.data:Promise.resolve(r.data);return En(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Yh.create=(t,s)=>new Yh({type:t,typeName:Mt.ZodPromise,...Ht(s)});class sc extends rs{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=this._def.effect||null,i={addIssue:l=>{at(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const l=a.transform(n.data,i);if(n.common.async)return Promise.resolve(l).then(async o=>{if(r.value==="aborted")return Et;const c=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return c.status==="aborted"?Et:c.status==="dirty"||r.value==="dirty"?kd(c.value):c});{if(r.value==="aborted")return Et;const o=this._def.schema._parseSync({data:l,path:n.path,parent:n});return o.status==="aborted"?Et:o.status==="dirty"||r.value==="dirty"?kd(o.value):o}}if(a.type==="refinement"){const l=o=>{const c=a.refinement(o,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Et:(o.status==="dirty"&&r.dirty(),l(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?Et:(o.status==="dirty"&&r.dirty(),l(o.value).then(()=>({status:r.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Jo(l))return Et;const o=a.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>Jo(l)?Promise.resolve(a.transform(l.value,i)).then(o=>({status:r.value,value:o})):Et);ns.assertNever(a)}}sc.create=(t,s,r)=>new sc({schema:t,typeName:Mt.ZodEffects,effect:s,...Ht(r)});sc.createWithPreprocess=(t,s,r)=>new sc({schema:s,effect:{type:"preprocess",transform:t},typeName:Mt.ZodEffects,...Ht(r)});class Ri extends rs{_parse(s){return this._getType(s)===lt.undefined?En(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Ri.create=(t,s)=>new Ri({innerType:t,typeName:Mt.ZodOptional,...Ht(s)});class rc extends rs{_parse(s){return this._getType(s)===lt.null?En(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}rc.create=(t,s)=>new rc({innerType:t,typeName:Mt.ZodNullable,...Ht(s)});class bv extends rs{_parse(s){const{ctx:r}=this._processInputParams(s);let n=r.data;return r.parsedType===lt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}bv.create=(t,s)=>new bv({innerType:t,typeName:Mt.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...Ht(s)});class Nv extends rs{_parse(s){const{ctx:r}=this._processInputParams(s),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Kh(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ni(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ni(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Nv.create=(t,s)=>new Nv({innerType:t,typeName:Mt.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...Ht(s)});class dS extends rs{_parse(s){if(this._getType(s)!==lt.nan){const n=this._getOrReturnCtx(s);return at(n,{code:qe.invalid_type,expected:lt.nan,received:n.parsedType}),Et}return{status:"valid",value:s.data}}}dS.create=t=>new dS({typeName:Mt.ZodNaN,...Ht(t)});class mH extends rs{_parse(s){const{ctx:r}=this._processInputParams(s),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class kb extends rs{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Et:i.status==="dirty"?(r.dirty(),kd(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Et:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(s,r){return new kb({in:s,out:r,typeName:Mt.ZodPipeline})}}class wv extends rs{_parse(s){const r=this._def.innerType._parse(s),n=a=>(Jo(a)&&(a.value=Object.freeze(a.value)),a);return Kh(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}wv.create=(t,s)=>new wv({innerType:t,typeName:Mt.ZodReadonly,...Ht(s)});var Mt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Mt||(Mt={}));const Pe=qa.create,ms=Fl.create;Ll.create;const Qr=Gh.create,ki=ec.create;Ui.create;const Sv=pa.create,Yt=sr.create;Wh.create;Qh.create;Bl.create;const Pd=yv.create,Rs=tc.create;Yh.create;Ri.create;rc.create;const gn={string:t=>qa.create({...t,coerce:!0}),number:t=>Fl.create({...t,coerce:!0}),boolean:t=>Gh.create({...t,coerce:!0}),bigint:t=>Ll.create({...t,coerce:!0}),date:t=>ec.create({...t,coerce:!0})};var hH="Label",HE=v.forwardRef((t,s)=>e.jsx(Je.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));HE.displayName=hH;var KE=HE;const xH=Zu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=v.forwardRef(({className:t,...s},r)=>e.jsx(KE,{ref:r,className:Be(xH(),t),...s}));Z.displayName=KE.displayName;const Qt=v7,GE=v.createContext({}),ge=({...t})=>e.jsx(GE.Provider,{value:{name:t.name},children:e.jsx(w7,{...t})}),$p=()=>{const t=v.useContext(GE),s=v.useContext(WE),{getFieldState:r,formState:n}=jm(),a=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},WE=v.createContext({}),pe=v.forwardRef(({className:t,...s},r)=>{const n=v.useId();return e.jsx(WE.Provider,{value:{id:n},children:e.jsx("div",{ref:r,className:Be("space-y-2",t),...s})})});pe.displayName="FormItem";const je=v.forwardRef(({className:t,...s},r)=>{const{error:n,formItemId:a}=$p();return e.jsx(Z,{ref:r,className:Be(n&&"text-destructive",t),htmlFor:a,...s})});je.displayName="FormLabel";const fe=v.forwardRef(({...t},s)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=$p();return e.jsx(LT,{ref:s,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...t})});fe.displayName="FormControl";const Zt=v.forwardRef(({className:t,...s},r)=>{const{formDescriptionId:n}=$p();return e.jsx("p",{ref:r,id:n,className:Be("text-sm text-muted-foreground",t),...s})});Zt.displayName="FormDescription";const be=v.forwardRef(({className:t,children:s,...r},n)=>{const{error:a,formMessageId:i}=$p(),l=a?String(a?.message??""):s;return l?e.jsx("p",{ref:n,id:i,className:Be("text-sm font-medium text-destructive",t),...r,children:l}):null});be.displayName="FormMessage";const ct=v.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:Be("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));ct.displayName="Textarea";var Fp="Checkbox",[pH,IAe]=er(Fp),[fH,Pb]=pH(Fp);function gH(t){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:i,form:l,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=t,[h,x]=Hr({prop:r,defaultProp:a??!1,onChange:c,caller:Fp}),[f,p]=v.useState(null),[g,y]=v.useState(null),b=v.useRef(!1),j=f?!!l||!!f.closest("form"):!0,w={checked:h,disabled:i,setChecked:x,control:f,setControl:p,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:_i(a)?!1:a,isFormControl:j,bubbleInput:g,setBubbleInput:y};return e.jsx(fH,{scope:s,...w,children:jH(m)?m(w):n})}var QE="CheckboxTrigger",YE=v.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...n},a)=>{const{control:i,value:l,disabled:o,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:f}=Pb(QE,t),p=ft(a,u),g=v.useRef(c);return v.useEffect(()=>{const y=i?.form;if(y){const b=()=>m(g.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[i,m]),e.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":_i(c)?"mixed":c,"aria-required":d,"data-state":tM(c),"data-disabled":o?"":void 0,disabled:o,value:l,...n,ref:p,onKeyDown:$e(s,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:$e(r,y=>{m(b=>_i(b)?!0:!b),f&&x&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});YE.displayName=QE;var Ab=v.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=t;return e.jsx(gH,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:o,required:l,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(YE,{...m,ref:s,__scopeCheckbox:r}),h&&e.jsx(eM,{__scopeCheckbox:r})]})})});Ab.displayName=Fp;var XE="CheckboxIndicator",ZE=v.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,i=Pb(XE,r);return e.jsx(cr,{present:n||_i(i.checked)||i.checked===!0,children:e.jsx(Je.span,{"data-state":tM(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});ZE.displayName=XE;var JE="CheckboxBubbleInput",eM=v.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:o,disabled:c,name:d,value:u,form:m,bubbleInput:h,setBubbleInput:x}=Pb(JE,t),f=ft(r,x),p=mm(i),g=om(n);v.useEffect(()=>{const b=h;if(!b)return;const j=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(j,"checked").set,S=!a.current;if(p!==i&&N){const O=new Event("click",{bubbles:S});b.indeterminate=_i(i),N.call(b,_i(i)?!1:i),b.dispatchEvent(O)}},[h,p,i,a]);const y=v.useRef(_i(i)?!1:i);return e.jsx(Je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??y.current,required:o,disabled:c,name:d,value:u,form:m,...s,tabIndex:-1,ref:f,style:{...s.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});eM.displayName=JE;function jH(t){return typeof t=="function"}function _i(t){return t==="indeterminate"}function tM(t){return _i(t)?"indeterminate":t?"checked":"unchecked"}const Pi=v.forwardRef(({className:t,...s},r)=>e.jsx(Ab,{ref:r,className:Be("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(ZE,{className:Be("flex items-center justify-center text-current"),children:e.jsx(tm,{className:"h-4 w-4"})})}));Pi.displayName=Ab.displayName;var kt=function(){return kt=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},kt.apply(this,arguments)};function vH(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function sM(t,s,r){for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}function vm(t){return t.mode==="multiple"}function ym(t){return t.mode==="range"}function Lp(t){return t.mode==="single"}var yH={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function bH(t,s){return et(t,"LLLL y",s)}function NH(t,s){return et(t,"d",s)}function wH(t,s){return et(t,"LLLL",s)}function SH(t){return"".concat(t)}function CH(t,s){return et(t,"cccccc",s)}function kH(t,s){return et(t,"yyyy",s)}var PH=Object.freeze({__proto__:null,formatCaption:bH,formatDay:NH,formatMonthCaption:wH,formatWeekNumber:SH,formatWeekdayName:CH,formatYearCaption:kH}),AH=function(t,s,r){return et(t,"do MMMM (EEEE)",r)},TH=function(){return"Month: "},DH=function(){return"Go to next month"},OH=function(){return"Go to previous month"},EH=function(t,s){return et(t,"cccc",s)},MH=function(t){return"Week n. ".concat(t)},RH=function(){return"Year: "},_H=Object.freeze({__proto__:null,labelDay:AH,labelMonthDropdown:TH,labelNext:DH,labelPrevious:OH,labelWeekNumber:MH,labelWeekday:EH,labelYearDropdown:RH});function IH(){var t="buttons",s=yH,r=eF,n={},a={},i=1,l={},o=new Date;return{captionLayout:t,classNames:s,formatters:PH,labels:_H,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:l,today:o,mode:"default"}}function $H(t){var s=t.fromYear,r=t.toYear,n=t.fromMonth,a=t.toMonth,i=t.fromDate,l=t.toDate;return n?i=fr(n):s&&(i=new Date(s,0,1)),a?l=Sl(a):r&&(l=new Date(r,11,31)),{fromDate:i?ia(i):void 0,toDate:l?ia(l):void 0}}var rM=v.createContext(void 0);function FH(t){var s,r=t.initialProps,n=IH(),a=$H(r),i=a.fromDate,l=a.toDate,o=(s=r.captionLayout)!==null&&s!==void 0?s:n.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(Lp(r)||vm(r)||ym(r))&&(c=r.onSelect);var d=kt(kt(kt({},n),r),{captionLayout:o,classNames:kt(kt({},n.classNames),r.classNames),components:kt({},r.components),formatters:kt(kt({},n.formatters),r.formatters),fromDate:i,labels:kt(kt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:kt(kt({},n.modifiers),r.modifiers),modifiersClassNames:kt(kt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:kt(kt({},n.styles),r.styles),toDate:l});return e.jsx(rM.Provider,{value:d,children:t.children})}function ks(){var t=v.useContext(rM);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function nM(t){var s=ks(),r=s.locale,n=s.classNames,a=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:r})})}function LH(t){return e.jsx("svg",kt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function aM(t){var s,r,n=t.onChange,a=t.value,i=t.children,l=t.caption,o=t.className,c=t.style,d=ks(),u=(r=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&r!==void 0?r:LH;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:i}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function BH(t){var s,r=ks(),n=r.fromDate,a=r.toDate,i=r.styles,l=r.locale,o=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});var m=[];if(iF(n,a))for(var h=fr(n),x=n.getMonth();x<=a.getMonth();x++)m.push(sg(h,x));else for(var h=fr(new Date),x=0;x<=11;x++)m.push(sg(h,x));var f=function(g){var y=Number(g.target.value),b=sg(fr(t.displayMonth),y);t.onChange(b)},p=(s=d?.Dropdown)!==null&&s!==void 0?s:aM;return e.jsx(p,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:f,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:l}),children:m.map(function(g){return e.jsx("option",{value:g.getMonth(),children:o(g,{locale:l})},g.getMonth())})})}function VH(t){var s,r=t.displayMonth,n=ks(),a=n.fromDate,i=n.toDate,l=n.locale,o=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,m=n.labels.labelYearDropdown,h=[];if(!a)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var x=a.getFullYear(),f=i.getFullYear(),p=x;p<=f;p++)h.push(Vw(lF(new Date),p));var g=function(b){var j=Vw(fr(r),Number(b.target.value));t.onChange(j)},y=(s=d?.Dropdown)!==null&&s!==void 0?s:aM;return e.jsx(y,{name:"years","aria-label":m(),className:c.dropdown_year,style:o.dropdown_year,onChange:g,value:r.getFullYear(),caption:u(r,{locale:l}),children:h.map(function(b){return e.jsx("option",{value:b.getFullYear(),children:u(b,{locale:l})},b.getFullYear())})})}function qH(t,s){var r=v.useState(t),n=r[0],a=r[1],i=s===void 0?n:s;return[i,a]}function UH(t){var s=t.month,r=t.defaultMonth,n=t.today,a=s||r||n||new Date,i=t.toDate,l=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(i&&Hd(i,a)<0){var d=-1*(c-1);a=wa(i,d)}return l&&Hd(a,l)<0&&(a=l),fr(a)}function zH(){var t=ks(),s=UH(t),r=qH(s,t.month),n=r[0],a=r[1],i=function(l){var o;if(!t.disableNavigation){var c=fr(l);a(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[n,i]}function HH(t,s){for(var r=s.reverseMonths,n=s.numberOfMonths,a=fr(t),i=fr(wa(a,n)),l=Hd(i,a),o=[],c=0;c<l;c++){var d=wa(a,c);o.push(d)}return r&&(o=o.reverse()),o}function KH(t,s){if(!s.disableNavigation){var r=s.toDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=n?i:1,o=fr(t);if(!r)return wa(o,l);var c=Hd(r,t);if(!(c<i))return wa(o,l)}}function GH(t,s){if(!s.disableNavigation){var r=s.fromDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=n?i:1,o=fr(t);if(!r)return wa(o,-l);var c=Hd(o,r);if(!(c<=0))return wa(o,-l)}}var iM=v.createContext(void 0);function WH(t){var s=ks(),r=zH(),n=r[0],a=r[1],i=HH(n,s),l=KH(n,s),o=GH(n,s),c=function(m){return i.some(function(h){return S0(m,h)})},d=function(m,h){c(m)||(h&&Oi(m,h)?a(wa(m,1+s.numberOfMonths*-1)):a(m))},u={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx(iM.Provider,{value:u,children:t.children})}function bm(){var t=v.useContext(iM);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function uS(t){var s,r=ks(),n=r.classNames,a=r.styles,i=r.components,l=bm().goToMonth,o=function(u){l(wa(u,t.displayIndex?-t.displayIndex:0))},c=(s=i?.CaptionLabel)!==null&&s!==void 0?s:nM,d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:d}),e.jsx(BH,{onChange:o,displayMonth:t.displayMonth}),e.jsx(VH,{onChange:o,displayMonth:t.displayMonth})]})}function QH(t){return e.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function YH(t){return e.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Xh=v.forwardRef(function(t,s){var r=ks(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var l=i.join(" "),o=kt(kt({},a.button_reset),a.button);return t.style&&Object.assign(o,t.style),e.jsx("button",kt({},t,{ref:s,type:"button",className:l,style:o}))});function XH(t){var s,r,n=ks(),a=n.dir,i=n.locale,l=n.classNames,o=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,m=n.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var h=d(t.previousMonth,{locale:i}),x=[l.nav_button,l.nav_button_previous].join(" "),f=u(t.nextMonth,{locale:i}),p=[l.nav_button,l.nav_button_next].join(" "),g=(s=m?.IconRight)!==null&&s!==void 0?s:YH,y=(r=m?.IconLeft)!==null&&r!==void 0?r:QH;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(Xh,{name:"previous-month","aria-label":h,className:x,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?e.jsx(g,{className:l.nav_icon,style:o.nav_icon}):e.jsx(y,{className:l.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(Xh,{name:"next-month","aria-label":f,className:p,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?e.jsx(y,{className:l.nav_icon,style:o.nav_icon}):e.jsx(g,{className:l.nav_icon,style:o.nav_icon})})]})}function mS(t){var s=ks().numberOfMonths,r=bm(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,l=r.displayMonths,o=l.findIndex(function(f){return S0(t.displayMonth,f)}),c=o===0,d=o===l.length-1,u=s>1&&(c||!d),m=s>1&&(d||!c),h=function(){n&&i(n)},x=function(){a&&i(a)};return e.jsx(XH,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:x})}function ZH(t){var s,r=ks(),n=r.classNames,a=r.disableNavigation,i=r.styles,l=r.captionLayout,o=r.components,c=(s=o?.CaptionLabel)!==null&&s!==void 0?s:nM,d;return a?d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?d=e.jsx(uS,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx(uS,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(mS,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(mS,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:n.caption,style:i.caption,children:d})}function JH(t){var s=ks(),r=s.footer,n=s.styles,a=s.classNames.tfoot;return r?e.jsx("tfoot",{className:a,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:r})})}):e.jsx(e.Fragment,{})}function eK(t,s,r){for(var n=r?C0(new Date):k0(new Date,{locale:t,weekStartsOn:s}),a=[],i=0;i<7;i++){var l=rr(n,i);a.push(l)}return a}function tK(){var t=ks(),s=t.classNames,r=t.styles,n=t.showWeekNumber,a=t.locale,i=t.weekStartsOn,l=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=eK(a,i,l);return e.jsxs("tr",{style:r.head_row,className:s.head_row,children:[n&&e.jsx("td",{style:r.head_cell,className:s.head_cell}),d.map(function(u,m){return e.jsx("th",{scope:"col",className:s.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:o(u,{locale:a})},m)})]})}function sK(){var t,s=ks(),r=s.classNames,n=s.styles,a=s.components,i=(t=a?.HeadRow)!==null&&t!==void 0?t:tK;return e.jsx("thead",{style:n.head,className:r.head,children:e.jsx(i,{})})}function rK(t){var s=ks(),r=s.locale,n=s.formatters.formatDay;return e.jsx(e.Fragment,{children:n(t.date,{locale:r})})}var Tb=v.createContext(void 0);function nK(t){if(!vm(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Tb.Provider,{value:s,children:t.children})}return e.jsx(aK,{initialProps:t.initialProps,children:t.children})}function aK(t){var s=t.initialProps,r=t.children,n=s.selected,a=s.min,i=s.max,l=function(d,u,m){var h,x;(h=s.onDayClick)===null||h===void 0||h.call(s,d,u,m);var f=!!(u.selected&&a&&n?.length===a);if(!f){var p=!!(!u.selected&&i&&n?.length===i);if(!p){var g=n?sM([],n):[];if(u.selected){var y=g.findIndex(function(b){return Dr(d,b)});g.splice(y,1)}else g.push(d);(x=s.onSelect)===null||x===void 0||x.call(s,g,d,u,m)}}},o={disabled:[]};n&&o.disabled.push(function(d){var u=i&&n.length>i-1,m=n.some(function(h){return Dr(h,d)});return!!(u&&!m)});var c={selected:n,onDayClick:l,modifiers:o};return e.jsx(Tb.Provider,{value:c,children:r})}function Db(){var t=v.useContext(Tb);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function iK(t,s){var r=s||{},n=r.from,a=r.to;return n&&a?Dr(a,t)&&Dr(n,t)?void 0:Dr(a,t)?{from:a,to:void 0}:Dr(n,t)?void 0:Cl(n,t)?{from:t,to:a}:{from:n,to:t}:a?Cl(t,a)?{from:a,to:t}:{from:t,to:a}:n?Oi(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Ob=v.createContext(void 0);function lK(t){if(!ym(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Ob.Provider,{value:s,children:t.children})}return e.jsx(oK,{initialProps:t.initialProps,children:t.children})}function oK(t){var s=t.initialProps,r=t.children,n=s.selected,a=n||{},i=a.from,l=a.to,o=s.min,c=s.max,d=function(x,f,p){var g,y;(g=s.onDayClick)===null||g===void 0||g.call(s,x,f,p);var b=iK(x,n);(y=s.onSelect)===null||y===void 0||y.call(s,b,x,f,p)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],l?(u.range_end=[l],Dr(i,l)||(u.range_middle=[{after:i,before:l}])):u.range_end=[i]):l&&(u.range_start=[l],u.range_end=[l]),o&&(i&&!l&&u.disabled.push({after:jh(i,o-1),before:rr(i,o-1)}),i&&l&&u.disabled.push({after:i,before:rr(i,o-1)}),!i&&l&&u.disabled.push({after:jh(l,o-1),before:rr(l,o-1)})),c){if(i&&!l&&(u.disabled.push({before:rr(i,-c+1)}),u.disabled.push({after:rr(i,c-1)})),i&&l){var m=La(l,i)+1,h=c-m;u.disabled.push({before:jh(i,h)}),u.disabled.push({after:rr(l,h)})}!i&&l&&(u.disabled.push({before:rr(l,-c+1)}),u.disabled.push({after:rr(l,c-1)}))}return e.jsx(Ob.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function Eb(){var t=v.useContext(Ob);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Ch(t){return Array.isArray(t)?sM([],t):t!==void 0?[t]:[]}function cK(t){var s={};return Object.entries(t).forEach(function(r){var n=r[0],a=r[1];s[n]=Ch(a)}),s}var ta;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ta||(ta={}));var dK=ta.Selected,_a=ta.Disabled,uK=ta.Hidden,mK=ta.Today,Eg=ta.RangeEnd,Mg=ta.RangeMiddle,Rg=ta.RangeStart,hK=ta.Outside;function xK(t,s,r){var n,a=(n={},n[dK]=Ch(t.selected),n[_a]=Ch(t.disabled),n[uK]=Ch(t.hidden),n[mK]=[t.today],n[Eg]=[],n[Mg]=[],n[Rg]=[],n[hK]=[],n);return t.fromDate&&a[_a].push({before:t.fromDate}),t.toDate&&a[_a].push({after:t.toDate}),vm(t)?a[_a]=a[_a].concat(s.modifiers[_a]):ym(t)&&(a[_a]=a[_a].concat(r.modifiers[_a]),a[Rg]=r.modifiers[Rg],a[Mg]=r.modifiers[Mg],a[Eg]=r.modifiers[Eg]),a}var lM=v.createContext(void 0);function pK(t){var s=ks(),r=Db(),n=Eb(),a=xK(s,r,n),i=cK(s.modifiers),l=kt(kt({},a),i);return e.jsx(lM.Provider,{value:l,children:t.children})}function oM(){var t=v.useContext(lM);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function fK(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function gK(t){return!!(t&&typeof t=="object"&&"from"in t)}function jK(t){return!!(t&&typeof t=="object"&&"after"in t)}function vK(t){return!!(t&&typeof t=="object"&&"before"in t)}function yK(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function bK(t,s){var r,n=s.from,a=s.to;if(n&&a){var i=La(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var l=La(t,n)>=0&&La(a,t)>=0;return l}return a?Dr(a,t):n?Dr(n,t):!1}function NK(t){return mT(t)}function wK(t){return Array.isArray(t)&&t.every(mT)}function SK(t,s){return s.some(function(r){if(typeof r=="boolean")return r;if(NK(r))return Dr(t,r);if(wK(r))return r.includes(t);if(gK(r))return bK(t,r);if(yK(r))return r.dayOfWeek.includes(t.getDay());if(fK(r)){var n=La(r.before,t),a=La(r.after,t),i=n>0,l=a<0,o=Cl(r.before,r.after);return o?l&&i:i||l}return jK(r)?La(t,r.after)>0:vK(r)?La(r.before,t)>0:typeof r=="function"?r(t):!1})}function Mb(t,s,r){var n=Object.keys(s).reduce(function(i,l){var o=s[l];return SK(t,o)&&i.push(l),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!S0(t,r)&&(a.outside=!0),a}function CK(t,s){for(var r=fr(t[0]),n=Sl(t[t.length-1]),a,i,l=r;l<=n;){var o=Mb(l,s),c=!o.disabled&&!o.hidden;if(!c){l=rr(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),a||(a=l),l=rr(l,1)}return i||a}var kK=365;function cM(t,s){var r=s.moveBy,n=s.direction,a=s.context,i=s.modifiers,l=s.retry,o=l===void 0?{count:0,lastFocused:t}:l,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,h={day:rr,week:Fj,month:wa,year:rF,startOfWeek:function(g){return a.ISOWeek?C0(g):k0(g,{locale:m,weekStartsOn:c})},endOfWeek:function(g){return a.ISOWeek?dT(g):uT(g,{locale:m,weekStartsOn:c})}},x=h[r](t,n==="after"?1:-1);n==="before"&&d?x=nF([d,x]):n==="after"&&u&&(x=aF([u,x]));var f=!0;if(i){var p=Mb(x,i);f=!p.disabled&&!p.hidden}return f?x:o.count>kK?o.lastFocused:cM(x,{moveBy:r,direction:n,context:a,modifiers:i,retry:kt(kt({},o),{count:o.count+1})})}var dM=v.createContext(void 0);function PK(t){var s=bm(),r=oM(),n=v.useState(),a=n[0],i=n[1],l=v.useState(),o=l[0],c=l[1],d=CK(s.displayMonths,r),u=a??(o&&s.isDateDisplayed(o))?o:d,m=function(){c(a),i(void 0)},h=function(g){i(g)},x=ks(),f=function(g,y){if(a){var b=cM(a,{moveBy:g,direction:y,context:x,modifiers:r});Dr(a,b)||(s.goToDate(b,a),h(b))}},p={focusedDay:a,focusTarget:u,blur:m,focus:h,focusDayAfter:function(){return f("day","after")},focusDayBefore:function(){return f("day","before")},focusWeekAfter:function(){return f("week","after")},focusWeekBefore:function(){return f("week","before")},focusMonthBefore:function(){return f("month","before")},focusMonthAfter:function(){return f("month","after")},focusYearBefore:function(){return f("year","before")},focusYearAfter:function(){return f("year","after")},focusStartOfWeek:function(){return f("startOfWeek","before")},focusEndOfWeek:function(){return f("endOfWeek","after")}};return e.jsx(dM.Provider,{value:p,children:t.children})}function Rb(){var t=v.useContext(dM);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function AK(t,s){var r=oM(),n=Mb(t,r,s);return n}var _b=v.createContext(void 0);function TK(t){if(!Lp(t.initialProps)){var s={selected:void 0};return e.jsx(_b.Provider,{value:s,children:t.children})}return e.jsx(DK,{initialProps:t.initialProps,children:t.children})}function DK(t){var s=t.initialProps,r=t.children,n=function(i,l,o){var c,d,u;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,l,o),l.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,i,l,o);return}(u=s.onSelect)===null||u===void 0||u.call(s,i,i,l,o)},a={selected:s.selected,onDayClick:n};return e.jsx(_b.Provider,{value:a,children:r})}function uM(){var t=v.useContext(_b);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function OK(t,s){var r=ks(),n=uM(),a=Db(),i=Eb(),l=Rb(),o=l.focusDayAfter,c=l.focusDayBefore,d=l.focusWeekAfter,u=l.focusWeekBefore,m=l.blur,h=l.focus,x=l.focusMonthBefore,f=l.focusMonthAfter,p=l.focusYearBefore,g=l.focusYearAfter,y=l.focusStartOfWeek,b=l.focusEndOfWeek,j=function(J){var C,V,z,le;Lp(r)?(C=n.onDayClick)===null||C===void 0||C.call(n,t,s,J):vm(r)?(V=a.onDayClick)===null||V===void 0||V.call(a,t,s,J):ym(r)?(z=i.onDayClick)===null||z===void 0||z.call(i,t,s,J):(le=r.onDayClick)===null||le===void 0||le.call(r,t,s,J)},w=function(J){var C;h(t),(C=r.onDayFocus)===null||C===void 0||C.call(r,t,s,J)},N=function(J){var C;m(),(C=r.onDayBlur)===null||C===void 0||C.call(r,t,s,J)},S=function(J){var C;(C=r.onDayMouseEnter)===null||C===void 0||C.call(r,t,s,J)},O=function(J){var C;(C=r.onDayMouseLeave)===null||C===void 0||C.call(r,t,s,J)},P=function(J){var C;(C=r.onDayPointerEnter)===null||C===void 0||C.call(r,t,s,J)},k=function(J){var C;(C=r.onDayPointerLeave)===null||C===void 0||C.call(r,t,s,J)},R=function(J){var C;(C=r.onDayTouchCancel)===null||C===void 0||C.call(r,t,s,J)},F=function(J){var C;(C=r.onDayTouchEnd)===null||C===void 0||C.call(r,t,s,J)},I=function(J){var C;(C=r.onDayTouchMove)===null||C===void 0||C.call(r,t,s,J)},W=function(J){var C;(C=r.onDayTouchStart)===null||C===void 0||C.call(r,t,s,J)},E=function(J){var C;(C=r.onDayKeyUp)===null||C===void 0||C.call(r,t,s,J)},B=function(J){var C;switch(J.key){case"ArrowLeft":J.preventDefault(),J.stopPropagation(),r.dir==="rtl"?o():c();break;case"ArrowRight":J.preventDefault(),J.stopPropagation(),r.dir==="rtl"?c():o();break;case"ArrowDown":J.preventDefault(),J.stopPropagation(),d();break;case"ArrowUp":J.preventDefault(),J.stopPropagation(),u();break;case"PageUp":J.preventDefault(),J.stopPropagation(),J.shiftKey?p():x();break;case"PageDown":J.preventDefault(),J.stopPropagation(),J.shiftKey?g():f();break;case"Home":J.preventDefault(),J.stopPropagation(),y();break;case"End":J.preventDefault(),J.stopPropagation(),b();break}(C=r.onDayKeyDown)===null||C===void 0||C.call(r,t,s,J)},G={onClick:j,onFocus:w,onBlur:N,onKeyDown:B,onKeyUp:E,onMouseEnter:S,onMouseLeave:O,onPointerEnter:P,onPointerLeave:k,onTouchCancel:R,onTouchEnd:F,onTouchMove:I,onTouchStart:W};return G}function EK(){var t=ks(),s=uM(),r=Db(),n=Eb(),a=Lp(t)?s.selected:vm(t)?r.selected:ym(t)?n.selected:void 0;return a}function MK(t){return Object.values(ta).includes(t)}function RK(t,s){var r=[t.classNames.day];return Object.keys(s).forEach(function(n){var a=t.modifiersClassNames[n];if(a)r.push(a);else if(MK(n)){var i=t.classNames["day_".concat(n)];i&&r.push(i)}}),r}function _K(t,s){var r=kt({},t.styles.day);return Object.keys(s).forEach(function(n){var a;r=kt(kt({},r),(a=t.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function IK(t,s,r){var n,a,i,l=ks(),o=Rb(),c=AK(t,s),d=OK(t,c),u=EK(),m=!!(l.onDayClick||l.mode!=="default");v.useEffect(function(){var S;c.outside||o.focusedDay&&m&&Dr(o.focusedDay,t)&&((S=r.current)===null||S===void 0||S.focus())},[o.focusedDay,t,r,m,c.outside]);var h=RK(l,c).join(" "),x=_K(l,c),f=!!(c.outside&&!l.showOutsideDays||c.hidden),p=(i=(a=l.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:rK,g=e.jsx(p,{date:t,displayMonth:s,activeModifiers:c}),y={style:x,className:h,children:g,role:"gridcell"},b=o.focusTarget&&Dr(o.focusTarget,t)&&!c.outside,j=o.focusedDay&&Dr(o.focusedDay,t),w=kt(kt(kt({},y),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=j||b?0:-1,n)),d),N={isButton:m,isHidden:f,activeModifiers:c,selectedDays:u,buttonProps:w,divProps:y};return N}function $K(t){var s=v.useRef(null),r=IK(t.date,t.displayMonth,s);return r.isHidden?e.jsx("div",{role:"gridcell"}):r.isButton?e.jsx(Xh,kt({name:"day",ref:s},r.buttonProps)):e.jsx("div",kt({},r.divProps))}function FK(t){var s=t.number,r=t.dates,n=ks(),a=n.onWeekNumberClick,i=n.styles,l=n.classNames,o=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(s),{locale:o});if(!a)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:u});var m=c(Number(s),{locale:o}),h=function(x){a(s,r,x)};return e.jsx(Xh,{name:"week-number","aria-label":m,className:l.weeknumber,style:i.weeknumber,onClick:h,children:u})}function LK(t){var s,r,n=ks(),a=n.styles,i=n.classNames,l=n.showWeekNumber,o=n.components,c=(s=o?.Day)!==null&&s!==void 0?s:$K,d=(r=o?.WeekNumber)!==null&&r!==void 0?r:FK,u;return l&&(u=e.jsx("td",{className:i.cell,style:a.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:a.row,children:[u,t.dates.map(function(m){return e.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:m})},sF(m))})]})}function hS(t,s,r){for(var n=r?.ISOWeek?dT(s):uT(s,r),a=r?.ISOWeek?C0(t):k0(t,r),i=La(n,a),l=[],o=0;o<=i;o++)l.push(rr(a,o));var c=l.reduce(function(d,u){var m=r?.ISOWeek?oF(u):cF(u,r),h=d.find(function(x){return x.weekNumber===m});return h?(h.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function BK(t,s){var r=hS(fr(t),Sl(t),s);if(s?.useFixedWeeks){var n=tF(t,s);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],l=Fj(i,6-n),o=hS(Fj(i,1),l,s);r.push.apply(r,o)}}return r}function VK(t){var s,r,n,a=ks(),i=a.locale,l=a.classNames,o=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,x=a.ISOWeek,f=BK(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:x,locale:i,weekStartsOn:m,firstWeekContainsDate:h}),p=(s=u?.Head)!==null&&s!==void 0?s:sK,g=(r=u?.Row)!==null&&r!==void 0?r:LK,y=(n=u?.Footer)!==null&&n!==void 0?n:JH;return e.jsxs("table",{id:t.id,className:l.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(p,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:f.map(function(b){return e.jsx(g,{displayMonth:t.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),e.jsx(y,{displayMonth:t.displayMonth})]})}function qK(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var UK=qK()?v.useLayoutEffect:v.useEffect,_g=!1,zK=0;function xS(){return"react-day-picker-".concat(++zK)}function HK(t){var s,r=t??(_g?xS():null),n=v.useState(r),a=n[0],i=n[1];return UK(function(){a===null&&i(xS())},[]),v.useEffect(function(){_g===!1&&(_g=!0)},[]),(s=t??a)!==null&&s!==void 0?s:void 0}function KK(t){var s,r,n=ks(),a=n.dir,i=n.classNames,l=n.styles,o=n.components,c=bm().displayMonths,d=HK(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,m=[i.month],h=l.month,x=t.displayIndex===0,f=t.displayIndex===c.length-1,p=!x&&!f;a==="rtl"&&(s=[x,f],f=s[0],x=s[1]),x&&(m.push(i.caption_start),h=kt(kt({},h),l.caption_start)),f&&(m.push(i.caption_end),h=kt(kt({},h),l.caption_end)),p&&(m.push(i.caption_between),h=kt(kt({},h),l.caption_between));var g=(r=o?.Caption)!==null&&r!==void 0?r:ZH;return e.jsxs("div",{className:m.join(" "),style:h,children:[e.jsx(g,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(VK,{id:u,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function GK(t){var s=ks(),r=s.classNames,n=s.styles;return e.jsx("div",{className:r.months,style:n.months,children:t.children})}function WK(t){var s,r,n=t.initialProps,a=ks(),i=Rb(),l=bm(),o=v.useState(!1),c=o[0],d=o[1];v.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=kt(kt({},a.styles.root),a.style),h=Object.keys(n).filter(function(f){return f.startsWith("data-")}).reduce(function(f,p){var g;return kt(kt({},f),(g={},g[p]=n[p],g))},{}),x=(r=(s=n.components)===null||s===void 0?void 0:s.Months)!==null&&r!==void 0?r:GK;return e.jsx("div",kt({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:e.jsx(x,{children:l.displayMonths.map(function(f,p){return e.jsx(KK,{displayIndex:p,displayMonth:f},p)})})}))}function QK(t){var s=t.children,r=vH(t,["children"]);return e.jsx(FH,{initialProps:r,children:e.jsx(WH,{children:e.jsx(TK,{initialProps:r,children:e.jsx(nK,{initialProps:r,children:e.jsx(lK,{initialProps:r,children:e.jsx(pK,{children:e.jsx(PK,{children:s})})})})})})})}function YK(t){return e.jsx(QK,kt({},t,{children:e.jsx(WK,{initialProps:t})}))}function Ai({className:t,classNames:s,showOutsideDays:r=!0,...n}){return e.jsx(YK,{showOutsideDays:r,className:Be("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Be(su({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Be(su({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...a})=>e.jsx(Ka,{className:"h-4 w-4"}),IconRight:({...a})=>e.jsx(zn,{className:"h-4 w-4"})},...n})}Ai.displayName="Calendar";var Bp="Popover",[mM,$Ae]=er(Bp,[Gi]),Nm=Gi(),[XK,Yi]=mM(Bp),hM=t=>{const{__scopePopover:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:l=!1}=t,o=Nm(s),c=v.useRef(null),[d,u]=v.useState(!1),[m,h]=Hr({prop:n,defaultProp:a??!1,onChange:i,caller:Bp});return e.jsx(jp,{...o,children:e.jsx(XK,{scope:s,contentId:rn(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:v.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:d,onCustomAnchorAdd:v.useCallback(()=>u(!0),[]),onCustomAnchorRemove:v.useCallback(()=>u(!1),[]),modal:l,children:r})})};hM.displayName=Bp;var xM="PopoverAnchor",ZK=v.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Yi(xM,r),i=Nm(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return v.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(cm,{...i,...n,ref:s})});ZK.displayName=xM;var pM="PopoverTrigger",fM=v.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Yi(pM,r),i=Nm(r),l=ft(s,a.triggerRef),o=e.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":bM(a.open),...n,ref:l,onClick:$e(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:e.jsx(cm,{asChild:!0,...i,children:o})});fM.displayName=pM;var Ib="PopoverPortal",[JK,eG]=mM(Ib,{forceMount:void 0}),gM=t=>{const{__scopePopover:s,forceMount:r,children:n,container:a}=t,i=Yi(Ib,s);return e.jsx(JK,{scope:s,forceMount:r,children:e.jsx(cr,{present:r||i.open,children:e.jsx($c,{asChild:!0,container:a,children:n})})})};gM.displayName=Ib;var nc="PopoverContent",jM=v.forwardRef((t,s)=>{const r=eG(nc,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,i=Yi(nc,t.__scopePopover);return e.jsx(cr,{present:n||i.open,children:i.modal?e.jsx(sG,{...a,ref:s}):e.jsx(rG,{...a,ref:s})})});jM.displayName=nc;var tG=$i("PopoverContent.RemoveScroll"),sG=v.forwardRef((t,s)=>{const r=Yi(nc,t.__scopePopover),n=v.useRef(null),a=ft(s,n),i=v.useRef(!1);return v.useEffect(()=>{const l=n.current;if(l)return Cp(l)},[]),e.jsx(hm,{as:tG,allowPinchZoom:!0,children:e.jsx(vM,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(t.onCloseAutoFocus,l=>{l.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:$e(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:$e(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),rG=v.forwardRef((t,s)=>{const r=Yi(nc,t.__scopePopover),n=v.useRef(!1),a=v.useRef(!1);return e.jsx(vM,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;r.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),vM=v.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=t,h=Yi(nc,r),x=Nm(r);return Sp(),e.jsx(um,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(vp,{"data-state":bM(h.open),role:"dialog",id:h.contentId,...x,...m,ref:s,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),yM="PopoverClose",nG=v.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Yi(yM,r);return e.jsx(Je.button,{type:"button",...n,ref:s,onClick:$e(t.onClick,()=>a.onOpenChange(!1))})});nG.displayName=yM;var aG="PopoverArrow",iG=v.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Nm(r);return e.jsx(yp,{...a,...n,ref:s})});iG.displayName=aG;function bM(t){return t?"open":"closed"}var lG=hM,oG=fM,cG=gM,NM=jM;const gl=lG,jl=oG,Ti=v.forwardRef(({className:t,align:s="center",sideOffset:r=4,...n},a)=>e.jsx(cG,{children:e.jsx(NM,{ref:a,align:s,sideOffset:r,className:Be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Ti.displayName=NM.displayName;const dG=Yt({title:Pe().min(1,"Title is required").max(100,"Title too long"),description:Pe().optional(),type:Pe().min(1,"Task type is required"),department:Pe().optional(),priority:Rs(["low","medium","high","urgent"]).default("medium"),propertyId:ms().min(1,"Property is required"),assignedTo:Pe().optional(),dueDate:ki().optional(),estimatedCost:ms().optional(),isRecurring:Qr().default(!1),recurringType:Rs(["daily","weekly","monthly","yearly"]).optional(),recurringInterval:ms().min(1).default(1).optional()}),uG=[{value:"cleaning",label:"Cleaning"},{value:"maintenance",label:"Maintenance"},{value:"pool-service",label:"Pool Service"},{value:"garden",label:"Garden Care"},{value:"inspection",label:"Inspection"},{value:"repair",label:"Repair"},{value:"landscaping",label:"Landscaping"},{value:"technology",label:"Technology"},{value:"security",label:"Security"},{value:"guest-service",label:"Guest Service"}],mG=[{value:"housekeeping",label:"Housekeeping"},{value:"maintenance",label:"Maintenance"},{value:"landscaping",label:"Landscaping"},{value:"pool",label:"Pool Service"},{value:"guest-services",label:"Guest Services"},{value:"security",label:"Security"},{value:"technology",label:"Technology"}],pS=[{name:"Deep Clean",title:"Deep Cleaning Service",description:"Complete deep cleaning including floors, windows, bathrooms, kitchen, furniture, and all surfaces. Remove all stains and sanitize all areas.",type:"cleaning",department:"housekeeping",priority:"medium",estimatedCost:150},{name:"Steam Clean",title:"Steam Cleaning Service",description:"Professional steam cleaning of carpets, upholstery, mattresses, and curtains. Deep sanitization using high-temperature steam.",type:"cleaning",department:"housekeeping",priority:"medium",estimatedCost:120},{name:"General Maintenance",title:"General Property Maintenance",description:"Routine maintenance check including plumbing, electrical, HVAC, locks, doors, windows, and general property condition assessment.",type:"maintenance",department:"maintenance",priority:"low",estimatedCost:80},{name:"Pool Service",title:"Pool Cleaning & Maintenance",description:"Complete pool service including water testing, chemical balancing, skimming, vacuuming, filter cleaning, and equipment check.",type:"pool-service",department:"pool",priority:"medium",estimatedCost:100},{name:"Garden Care",title:"Garden Maintenance",description:"Lawn mowing, hedge trimming, weeding, plant care, and general garden tidying to keep property landscape pristine.",type:"garden",department:"landscaping",priority:"low",estimatedCost:90}];function Vp({isOpen:t,onOpenChange:s,trigger:r,onCreated:n,defaultPropertyId:a}){const[i,l]=v.useState(),{toast:o}=st(),c=pt(),{data:d=[]}=xe({queryKey:["/api/properties"]}),{data:u}=xe({queryKey:["/api/auth/user"]}),m=u?.organizationId||"default-org",{data:h=[]}=xe({queryKey:["/api/staff-members",m],queryFn:async()=>{const w=await fetch(`/api/staff-members?organizationId=${m}&status=active`);if(!w.ok)throw new Error("Failed to fetch staff members");return w.json()},enabled:!0}),x=Array.isArray(d)?d:[],f=Array.isArray(h)?h:[];console.log("staffArray from salaries module:",f);const p=Wt({resolver:ts(dG),defaultValues:{title:"",description:"",type:"",department:"",priority:"medium",propertyId:0,assignedTo:"unassigned",estimatedCost:void 0,isRecurring:!1,recurringInterval:1}});ee.useEffect(()=>{console.log("CreateTaskDialog - isOpen changed to:",t)},[t]),ee.useEffect(()=>{a&&t&&(p.setValue("propertyId",a),console.log("Auto-selected property:",a))},[a,t,p]);const g=Te({mutationFn:async w=>{const N={...w,dueDate:i?i.toISOString():null,estimatedCost:w.estimatedCost||null,assignedTo:w.assignedTo==="unassigned"?null:w.assignedTo,description:w.description||null,department:w.department||null,recurringType:w.isRecurring?w.recurringType:null,recurringInterval:w.isRecurring?w.recurringInterval:null};return console.log("Creating task with data:",N),await Ne("POST","/api/tasks",N)},onSuccess:w=>{console.log("Task created successfully:",w),c.invalidateQueries({queryKey:["/api/tasks"]}),c.invalidateQueries({queryKey:["/api/dashboard"]}),c.invalidateQueries({queryKey:["/api/dashboard/recent-tasks"]}),c.invalidateQueries({queryKey:["/api/dashboard/task-stats"]}),c.invalidateQueries({queryKey:["/api/dashboard/stats"]}),c.refetchQueries({queryKey:["/api/tasks"]}),c.refetchQueries({queryKey:["/api/dashboard/recent-tasks"]}),c.refetchQueries({queryKey:["/api/dashboard/task-stats"]}),o({title:"Success",description:`Task "${w.title||"New task"}" created successfully`}),n?.(w),p.reset(),l(void 0),s(!1)},onError:w=>{console.error("Task creation error:",w),o({title:"Error",description:w.message||"Failed to create task. Please try again.",variant:"destructive"})}}),y=w=>{const N=pS.find(S=>S.name===w);N&&(p.setValue("title",N.title),p.setValue("description",N.description),p.setValue("type",N.type),p.setValue("department",N.department),p.setValue("priority",N.priority),p.setValue("estimatedCost",N.estimatedCost),o({title:"Template Applied",description:`"${N.name}" template has been applied. You can still modify the fields.`}))},b=w=>{console.log("Form submitted with data:",w),g.mutate(w)},j=e.jsxs(We,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create New Task"}),e.jsx(Ct,{children:"Add a new task to be assigned and tracked in the system."})]}),e.jsxs("div",{className:"border-b pb-4 mb-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quick Templates"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:pS.map(w=>e.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>y(w.name),className:"text-xs h-auto py-2","data-testid":`button-template-${w.name.toLowerCase().replace(" ","-")}`,children:w.name},w.name))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click a template to auto-fill the form"})]}),e.jsx(Qt,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(b),className:"space-y-4",children:[e.jsx(ge,{control:p.control,name:"title",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Task Title *"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"e.g. Pool cleaning and chemical balancing",...w})}),e.jsx(be,{})]})}),e.jsx(ge,{control:p.control,name:"description",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Description"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Detailed description of the task...",rows:3,...w})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:p.control,name:"propertyId",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property *"}),e.jsxs(ae,{onValueChange:N=>w.onChange(parseInt(N)),value:w.value>0?w.value.toString():void 0,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})})}),e.jsx(ne,{children:x.map(N=>e.jsx(A,{value:N.id.toString(),children:N.name},N.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:p.control,name:"type",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Task Type *"}),e.jsxs(ae,{onValueChange:w.onChange,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select type"})})}),e.jsx(ne,{children:uG.map(N=>e.jsx(A,{value:N.value,children:N.label},N.value))})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:p.control,name:"department",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Department"}),e.jsxs(ae,{onValueChange:w.onChange,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select department"})})}),e.jsx(ne,{children:mG.map(N=>e.jsx(A,{value:N.value,children:N.label},N.value))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:p.control,name:"priority",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Priority"}),e.jsxs(ae,{onValueChange:w.onChange,defaultValue:w.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select priority"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"low",children:"Low"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"urgent",children:"Urgent"})]})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:p.control,name:"assignedTo",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Assign To"}),e.jsxs(ae,{onValueChange:w.onChange,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select staff member"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"unassigned",children:"Unassigned"}),f.length>0?f.map(N=>e.jsxs(A,{value:`staff-${N.id}`,children:[N.employeeId," - ",N.firstName," ",N.lastName," (",N.position,")"]},N.id)):e.jsx("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"No staff members found. Add staff in the Salaries module first."})]})]}),e.jsx(Zt,{className:"text-xs",children:"All active staff from the Salaries module"}),e.jsx(be,{})]})}),e.jsxs(pe,{children:[e.jsx(je,{children:"Due Date"}),e.jsxs(gl,{children:[e.jsx(jl,{asChild:!0,children:e.jsx(fe,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[i?et(i,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Xe,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ti,{className:"w-auto p-0",align:"start",children:e.jsx(Ai,{mode:"single",selected:i,onSelect:l,disabled:w=>w<new Date,initialFocus:!0})})]}),e.jsx(Zt,{children:"Optional deadline for this task"})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/10",children:[e.jsx(ge,{control:p.control,name:"isRecurring",render:({field:w})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{children:"Recurring Task"}),e.jsx(Zt,{children:"Create a task that repeats on a schedule"})]}),e.jsx(fe,{children:e.jsx(Pi,{checked:w.value,onCheckedChange:w.onChange})})]})}),p.watch("isRecurring")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:p.control,name:"recurringType",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Frequency"}),e.jsxs(ae,{onValueChange:w.onChange,value:w.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select frequency"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"yearly",children:"Yearly"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:p.control,name:"recurringInterval",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Every"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",min:"1",placeholder:"1",...w,onChange:N=>w.onChange(parseInt(N.target.value)||1)})}),e.jsxs(Zt,{children:[p.watch("recurringType")==="daily"&&"day(s)",p.watch("recurringType")==="weekly"&&"week(s)",p.watch("recurringType")==="monthly"&&"month(s)",p.watch("recurringType")==="yearly"&&"year(s)"]}),e.jsx(be,{})]})})]})]}),e.jsx(ge,{control:p.control,name:"estimatedCost",render:({field:w})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Estimated Cost (THB)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",placeholder:"0.00",...w,onChange:N=>w.onChange(parseFloat(N.target.value))})}),e.jsx(Zt,{children:"Optional estimated cost in Thai Baht"}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:g.isPending,children:"Cancel"}),e.jsx(M,{type:"submit",disabled:g.isPending,children:g.isPending?"Creating...":"Create Task"})]})]})})]});return r?e.jsxs(Ge,{open:t,onOpenChange:s,children:[e.jsx(hs,{asChild:!0,children:r}),j]}):e.jsx(Ge,{open:t,onOpenChange:s,children:j})}function fS(){const{user:t}=On(),[s,r]=v.useState(""),[n,a]=v.useState("all"),[i,l]=v.useState("all"),[o,c]=v.useState("all"),[d,u]=v.useState("all"),[m,h]=v.useState(null),[x,f]=v.useState(!1),[p,g]=v.useState(!1),[y,b]=v.useState(!1),[j,w]=v.useState(null),[N,S]=v.useState({}),[O,P]=v.useState([]),{toast:k}=st(),R=pt(),F=ye=>{const nt=ye.getFullYear(),_t=String(ye.getMonth()+1).padStart(2,"0"),Ls=String(ye.getDate()).padStart(2,"0");return`${nt}-${_t}-${Ls}`},I=ye=>{const nt=new Date,_t=new Date,Ls=new Date;switch(ye){case"today":_t.setHours(0,0,0,0),Ls.setHours(23,59,59,999);break;case"this-week":_t.setDate(nt.getDate()-nt.getDay()),_t.setHours(0,0,0,0),Ls.setDate(_t.getDate()+6),Ls.setHours(23,59,59,999);break;case"next-7-days":_t.setHours(0,0,0,0),Ls.setDate(nt.getDate()+7),Ls.setHours(23,59,59,999);break;case"next-30-days":_t.setHours(0,0,0,0),Ls.setDate(nt.getDate()+30),Ls.setHours(23,59,59,999);break;case"next-90-days":_t.setHours(0,0,0,0),Ls.setDate(nt.getDate()+90),Ls.setHours(23,59,59,999);break;default:return null}return{from:F(_t),to:F(Ls)}},W=ye=>{if(u(ye),ye==="all")h(null);else{if(ye==="custom")return;{const nt=I(ye);h(nt)}}},[E]=or(),B=ee.useMemo(()=>{try{const ye=E.includes("?")?E.split("?")[1]:window.location.search.slice(1),nt=new URLSearchParams(ye).get("propertyId");return nt&&!Number.isNaN(Number(nt))?String(Number(nt)):""}catch{return""}},[E]),G=v.useMemo(()=>{const ye=new URLSearchParams;return m&&(ye.append("due_from",m.from),ye.append("due_to",m.to)),B&&ye.append("propertyId",B),ye.toString()},[m,B]),{data:J=[],isLoading:C,error:V}=xe({queryKey:["/api/tasks",G],queryFn:async()=>{const ye=`/api/tasks${G?`?${G}`:""}`;return(await fetch(ye)).json()},staleTime:0,gcTime:0}),z=Array.isArray(J)?J:[];console.log("UltraFastTasks - Tasks loaded:",z.length,"tasks");const{data:le=[]}=xe({queryKey:["/api/properties"]}),{data:Ce=[]}=xe({queryKey:["/api/users"]}),H=t?.organizationId||"default-org",{data:_=[],isLoading:se}=xe({queryKey:["/api/staff-members",H],queryFn:async()=>{const ye=await fetch(`/api/staff-members?organizationId=${H}`,{credentials:"include"});return ye.ok?ye.json():(console.error("Failed to fetch staff members:",ye.status),[])},enabled:!0});console.log("Staff members loaded:",_?.length||0,"members");const te=Array.isArray(le)?le:[],we=Array.isArray(Ce)?Ce:[],ve=Array.isArray(_)?_:[],X=v.useMemo(()=>{const ye=new Map;return te.forEach(nt=>{ye.set(nt.id,nt.name)}),ye},[te]),ce=v.useMemo(()=>{const ye=new Map;return we.forEach(nt=>{ye.set(nt.id,nt.name)}),ye},[we]),Y=v.useMemo(()=>{const ye=new Map;return ve.forEach(nt=>{const _t=`${nt.firstName||""} ${nt.lastName||""}`.trim()||"Unknown Staff";ye.set(nt.id,_t)}),ye},[ve]),he=v.useMemo(()=>z.map(ye=>{let nt="Unassigned";return ye.assignedToStaffId?nt=Y.get(ye.assignedToStaffId)||"Unknown Staff":ye.assignedTo&&(nt=ce.get(ye.assignedTo)||"Unknown User"),{...ye,propertyName:X.get(ye.propertyId)||`Property ${ye.propertyId}`,assigneeName:nt}}),[z,X,ce,Y]),Fe=v.useMemo(()=>he.filter(ye=>{const nt=!B||ye.propertyId===Number(B),_t=s===""||ye.title&&ye.title.toLowerCase().includes(s.toLowerCase())||ye.description&&ye.description.toLowerCase().includes(s.toLowerCase())||ye.propertyName&&ye.propertyName.toLowerCase().includes(s.toLowerCase()),Ls=n==="all"||ye.status===n,sl=i==="all"||ye.priority===i,$m=o==="all"||ye.type===o;return nt&&_t&&Ls&&sl&&$m}),[he,s,n,i,o,B]),Ve=v.useMemo(()=>({totalTasks:he.length,pendingTasks:he.filter(ye=>ye.status==="pending").length,inProgressTasks:he.filter(ye=>ye.status==="in-progress").length,completedTasks:he.filter(ye=>ye.status==="completed").length,overdueTasks:he.filter(ye=>ye.dueDate?new Date(ye.dueDate)<new Date&&ye.status!=="completed":!1).length,highPriorityTasks:he.filter(ye=>ye.priority==="high"||ye.priority==="urgent").length}),[he]),rt=ye=>{switch(ye){case"pending":return"bg-yellow-100 text-yellow-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},gt=ye=>{switch(ye){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-orange-100 text-orange-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Vt=ye=>{switch(ye){case"pending":return e.jsx(tt,{className:"h-4 w-4"});case"in-progress":return e.jsx(Ms,{className:"h-4 w-4"});case"completed":return e.jsx(Sn,{className:"h-4 w-4"});default:return e.jsx(St,{className:"h-4 w-4"})}},xs=ye=>{try{return new Date(ye).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return ye}},Qs=Te({mutationFn:async ye=>await Ne("PUT",`/api/tasks/${ye}`,{status:"completed"}),onSuccess:async()=>{await R.invalidateQueries({queryKey:["/api/tasks"]}),await R.refetchQueries({queryKey:["/api/tasks"]}),t?.id&&(console.log("ðŸŽ® Task completed! Invalidating achievement cache for user:",t.id),await R.invalidateQueries({queryKey:[`/api/achievements/user/${t.id}`]}),await R.invalidateQueries({queryKey:["/api/achievements/definitions"]}),await R.refetchQueries({queryKey:[`/api/achievements/user/${t.id}`]})),k({title:"Success",description:"Task completed successfully"})},onError:ye=>{k({title:"Error",description:ye.message||"Failed to complete task",variant:"destructive"})}}),ue=Te({mutationFn:async({id:ye,data:nt})=>await Ne("PUT",`/api/tasks/${ye}`,nt),onSuccess:async(ye,nt)=>{await R.invalidateQueries({queryKey:["/api/tasks"]}),await R.refetchQueries({queryKey:["/api/tasks"]}),(nt.data.status==="completed"||nt.data.status==="approved")&&t?.id&&(console.log("ðŸŽ® Task status updated! Invalidating achievement cache for user:",t.id,"status:",nt.data.status),await R.invalidateQueries({queryKey:[`/api/achievements/user/${t.id}`]}),await R.invalidateQueries({queryKey:["/api/achievements/definitions"]}),await R.refetchQueries({queryKey:[`/api/achievements/user/${t.id}`]})),b(!1),w(null),S({}),P([]),k({title:"Success",description:"Task updated successfully"})},onError:ye=>{k({title:"Error",description:ye.message||"Failed to update task",variant:"destructive"})}}),q=Te({mutationFn:async()=>(R.invalidateQueries({queryKey:["/api/tasks"]}),"refreshed"),onSuccess:()=>{k({title:"Tasks Refreshed",description:"Task list updated with latest data"})}}),Se=Te({mutationFn:async()=>await Ne("DELETE","/api/tasks/bulk-delete/expired"),onSuccess:ye=>{R.invalidateQueries({queryKey:["/api/tasks"]}),k({title:"Expired tasks deleted",description:`Successfully deleted ${ye?.deletedCount||0} expired tasks`}),g(!1)},onError:ye=>{k({title:"Error deleting expired tasks",description:ye.message||"Failed to delete expired tasks",variant:"destructive"})}}),_e=Te({mutationFn:async()=>await Ne("DELETE","/api/tasks/bulk-delete/completed"),onSuccess:ye=>{R.invalidateQueries({queryKey:["/api/tasks"]}),k({title:"Completed tasks deleted",description:`Successfully deleted ${ye?.deletedCount||0} completed tasks`}),g(!1)},onError:ye=>{k({title:"Error deleting completed tasks",description:ye.message||"Failed to delete completed tasks",variant:"destructive"})}}),K=Te({mutationFn:async()=>await Ne("DELETE","/api/tasks/bulk-delete/old"),onSuccess:ye=>{R.invalidateQueries({queryKey:["/api/tasks"]}),k({title:"Old tasks deleted",description:`Successfully deleted ${ye?.deletedCount||0} old tasks`}),g(!1)},onError:ye=>{k({title:"Error deleting old tasks",description:ye.message||"Failed to delete old tasks",variant:"destructive"})}}),ke=ye=>{console.log("âœ… Complete task button clicked! Task ID:",ye),Qs.mutate(ye)},Le=ye=>{console.log("ðŸ”§ Edit task button clicked! Task ID:",ye);const nt=he.find(_t=>_t.id===ye);nt&&(w(nt),S({title:nt.title||"",description:nt.description||"",type:nt.type||"maintenance",priority:nt.priority||"medium",status:nt.status||"pending",assignedToStaffId:nt.assignedToStaffId||null,dueDate:nt.dueDate?nt.dueDate.split("T")[0]:"",propertyId:nt.propertyId||""}),P(nt.evidencePhotos||[]),b(!0))},qt=ye=>{const nt=ye.target.files;if(!nt)return;const _t=["image/jpeg","image/jpg","image/png"],Ls=6,sl=1920,$m=1080;if(O.length+nt.length>Ls){k({title:"Too many photos",description:`You can upload a maximum of ${Ls} photos per task. Currently have ${O.length} photo(s).`,variant:"destructive"}),ye.target.value="";return}Array.from(nt).forEach(Bw=>{if(!_t.includes(Bw.type)){k({title:"Invalid file type",description:"Only .jpg and .png files are allowed",variant:"destructive"});return}const id=new FileReader;id.onloadend=()=>{if(id.result){const lo=new Image;lo.onload=()=>{if(lo.width>sl||lo.height>$m){k({title:"Photo too large",description:`Photo dimensions must not exceed ${sl}Ã—${$m} pixels (Full HD). This photo is ${lo.width}Ã—${lo.height} pixels.`,variant:"destructive"});return}P(Z$=>[...Z$,id.result])},lo.src=id.result}},id.readAsDataURL(Bw)}),ye.target.value=""},vt=ye=>{P(nt=>nt.filter((_t,Ls)=>Ls!==ye))},Xt=()=>{if(j){const ye={};N.title&&(ye.title=N.title),N.description&&(ye.description=N.description),N.type&&(ye.type=N.type),N.priority&&(ye.priority=N.priority),N.status&&(ye.status=N.status),ye.assignedToStaffId=N.assignedToStaffId||null,N.propertyId&&(ye.propertyId=N.propertyId),N.dueDate&&(ye.dueDate=new Date(N.dueDate)),ye.evidencePhotos=O,console.log("Sending update data:",ye),ue.mutate({id:j.id,data:ye})}},mn=()=>{q.mutate()},oe=()=>{Se.mutate()},Ue=()=>{_e.mutate()},Ke=()=>{K.mutate()};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Task Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage all property maintenance and operational tasks"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",onClick:mn,disabled:q.isPending,className:"gap-2",children:[e.jsx(Ut,{className:`h-4 w-4 ${q.isPending?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>{console.log("Create Task button clicked"),f(!0),console.log("Dialog state should be:",!0)},className:"gap-2","data-testid":"button-create-task",children:[e.jsx(ut,{className:"h-4 w-4"}),"Create Task"]}),e.jsxs(M,{onClick:()=>g(!0),variant:"outline",className:"gap-2 border-red-200 text-red-600 hover:bg-red-50",children:[e.jsx(ir,{className:"h-4 w-4"}),"Bulk Actions"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ve.totalTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All tasks"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending"}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ve.pendingTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting start"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Ve.inProgressTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Sn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ve.completedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recently finished"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"High Priority"}),e.jsx(St,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:Ve.highPriorityTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Urgent attention"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:Ve.overdueTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Past due date"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(as,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search tasks by title, description, or property...",className:"pl-10",value:s,onChange:ye=>r(ye.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(iu,{children:[e.jsx(lu,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-44",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),d==="all"&&"All Dates",d==="today"&&"Today",d==="this-week"&&"This Week",d==="next-7-days"&&"Next 7 Days",d==="next-30-days"&&"Next 30 Days",d==="next-90-days"&&"Next 90 Days",d==="custom"&&"Custom Range"]})}),e.jsxs(Zo,{align:"end",children:[e.jsx(Fr,{onClick:()=>W("all"),children:"All Dates"}),e.jsx(Fr,{onClick:()=>W("today"),children:"Today"}),e.jsx(Fr,{onClick:()=>W("this-week"),children:"This Week"}),e.jsx(Fr,{onClick:()=>W("next-7-days"),children:"Next 7 Days"}),e.jsx(Fr,{onClick:()=>W("next-30-days"),children:"Next 30 Days"}),e.jsx(Fr,{onClick:()=>W("next-90-days"),children:"Next 90 Days"})]})]}),e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsxs(re,{className:"w-40",children:[e.jsx(Dn,{className:"h-4 w-4 mr-2"}),e.jsx(ie,{placeholder:"Status"})]}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"in-progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"})]})]}),e.jsxs(ae,{value:i,onValueChange:l,children:[e.jsx(re,{className:"w-40",children:e.jsx(ie,{placeholder:"Priority"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Priority"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"low",children:"Low"})]})]}),e.jsxs(ae,{value:o,onValueChange:c,children:[e.jsx(re,{className:"w-40",children:e.jsx(ie,{placeholder:"Type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"landscaping",children:"Landscaping"}),e.jsx(A,{value:"technology",children:"Technology"}),e.jsx(A,{value:"security",children:"Security"})]})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{children:["Tasks (",Fe.length,")"]}),e.jsx(Ee,{children:"Manage all property tasks and assignments"})]}),e.jsx(T,{children:Fe.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ms,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or create a new task."}),e.jsxs(M,{onClick:()=>f(!0),children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Create New Task"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Task"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Assignee"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Priority"}),e.jsx(Oe,{children:"Due Date"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:[...Fe].sort((ye,nt)=>new Date(nt.dueDate).getTime()-new Date(ye.dueDate).getTime()).map(ye=>e.jsxs(Nt,{children:[e.jsx(De,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:ye.title||"Untitled Task"}),e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:ye.description||"No description"}),ye.estimatedCost&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:e.jsxs("span",{children:["à¸¿",parseFloat(ye.estimatedCost||0).toLocaleString()]})})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:ye.propertyName})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:ye.assigneeName})]})}),e.jsx(De,{children:e.jsx(U,{variant:"outline",className:"capitalize",children:(ye.type||"").replace("-"," ")})}),e.jsx(De,{children:e.jsx(U,{className:gt(ye.priority||"medium"),children:ye.priority||"medium"})}),e.jsx(De,{children:e.jsx("div",{className:"text-sm",children:ye.dueDate?xs(ye.dueDate):"No due date"})}),e.jsx(De,{children:e.jsx(U,{className:rt(ye.status||"pending"),children:e.jsxs("span",{className:"flex items-center gap-1",children:[Vt(ye.status||"pending"),(ye.status||"pending").replace("-"," ")]})})}),e.jsx(De,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>Le(ye.id),children:"Edit"}),ye.status!=="completed"&&e.jsx(M,{variant:"default",size:"sm",onClick:()=>ke(ye.id),disabled:Qs.isPending,children:Qs.isPending?"Completing...":"Complete"})]})})]},ye.id))})]})})})]}),e.jsx(Vp,{isOpen:x,onOpenChange:f,defaultPropertyId:B?Number(B):void 0,onCreated:()=>{R.invalidateQueries({queryKey:["/api/tasks"],exact:!1}),R.refetchQueries({queryKey:["/api/tasks"],exact:!1})}}),e.jsx(Ge,{open:p,onOpenChange:g,children:e.jsxs(We,{className:"sm:max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Bulk Task Management"}),e.jsxs(Ct,{children:["Clean up old tasks to improve performance. We currently have"," ",z.length," tasks."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs(M,{onClick:oe,variant:"destructive",className:"w-full",disabled:Se.isPending,children:[e.jsx(ir,{className:"mr-2 h-4 w-4"}),Se.isPending?"Deleting...":"Delete Expired Tasks (30+ days old)"]}),e.jsxs(M,{onClick:Ue,variant:"outline",className:"w-full border-orange-200 text-orange-600 hover:bg-orange-50",disabled:_e.isPending,children:[e.jsx(Sn,{className:"mr-2 h-4 w-4"}),_e.isPending?"Deleting...":"Delete All Completed Tasks"]}),e.jsxs(M,{onClick:Ke,variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50",disabled:K.isPending,children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),K.isPending?"Deleting...":"Delete Tasks Older Than 90 Days"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{children:"â€¢ Expired tasks: Tasks older than 30 days"}),e.jsx("p",{children:"â€¢ Completed tasks: All tasks marked as completed"}),e.jsx("p",{children:"â€¢ Old tasks: All tasks older than 90 days regardless of status"})]})]}),e.jsx(Zs,{children:e.jsx(M,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})})]})}),e.jsx(Ge,{open:y,onOpenChange:b,children:e.jsxs(We,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Edit Task"}),e.jsx(Ct,{children:"Update task details and save changes"})]}),e.jsxs("div",{className:"grid gap-4 py-4 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"title",className:"text-right font-medium",children:"Title"}),e.jsx(Q,{id:"title",value:N.title||"",onChange:ye=>S({...N,title:ye.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"description",className:"text-right font-medium",children:"Description"}),e.jsx(Q,{id:"description",value:N.description||"",onChange:ye=>S({...N,description:ye.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"type",className:"text-right font-medium",children:"Type"}),e.jsxs(ae,{value:N.type||"maintenance",onValueChange:ye=>S({...N,type:ye}),children:[e.jsx(re,{className:"col-span-3",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"inspection",children:"Inspection"}),e.jsx(A,{value:"repair",children:"Repair"}),e.jsx(A,{value:"setup",children:"Setup"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"priority",className:"text-right font-medium",children:"Priority"}),e.jsxs(ae,{value:N.priority||"medium",onValueChange:ye=>S({...N,priority:ye}),children:[e.jsx(re,{className:"col-span-3",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"low",children:"Low"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"status",className:"text-right font-medium",children:"Status"}),e.jsxs(ae,{value:N.status||"pending",onValueChange:ye=>S({...N,status:ye}),children:[e.jsx(re,{className:"col-span-3",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"approved",children:"Approved"}),e.jsx(A,{value:"in-progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"assignedTo",className:"text-right font-medium",children:"Assignee"}),e.jsxs(ae,{value:N.assignedToStaffId?.toString()||"",onValueChange:ye=>S({...N,assignedToStaffId:ye?parseInt(ye):null}),children:[e.jsx(re,{className:"col-span-3",children:e.jsx(ie,{placeholder:"Select assignee"})}),e.jsx(ne,{children:ve.map(ye=>e.jsx(A,{value:ye.id.toString(),children:`${ye.firstName||""} ${ye.lastName||""}`.trim()||"Unknown Staff"},ye.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"dueDate",className:"text-right font-medium",children:"Due Date"}),e.jsx(Q,{id:"dueDate",type:"date",value:N.dueDate||"",onChange:ye=>S({...N,dueDate:ye.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"propertyId",className:"text-right font-medium",children:"Property"}),e.jsxs(ae,{value:N.propertyId?.toString()||"",onValueChange:ye=>S({...N,propertyId:parseInt(ye)}),children:[e.jsx(re,{className:"col-span-3",children:e.jsx(ie,{placeholder:"Select property"})}),e.jsx(ne,{children:te.map(ye=>e.jsx(A,{value:ye.id.toString(),children:ye.name},ye.id))})]})]}),O.length>0&&e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx("label",{className:"text-right font-medium pt-2",children:"Evidence Photos"}),e.jsx("div",{className:"col-span-3",children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:O.map((ye,nt)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:ye,alt:`Evidence ${nt+1}`,className:"w-full h-20 object-cover rounded border"}),e.jsx("button",{onClick:()=>vt(nt),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`button-remove-photo-${nt}`,children:e.jsx(Es,{className:"h-3 w-3"})})]},nt))})})]})]}),e.jsxs(Zs,{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",id:"evidence-upload",accept:".jpg, .jpeg,.png, .pdf",multiple:!0,onChange:qt,className:"hidden","data-testid":"input-evidence-upload"}),e.jsxs(M,{variant:"outline",onClick:()=>document.getElementById("evidence-upload")?.click(),className:"bg-blue-600 text-white hover:bg-blue-700",disabled:O.length>=10,"data-testid":"button-upload-evidence",children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Upload Evidence"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[O.length,"/10 photos"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>{b(!1),P([])},children:"Cancel"}),e.jsx(M,{onClick:Xt,disabled:ue.isPending,children:ue.isPending?"Saving...":"Save Changes"})]})]})]})})]})}function Mr(){const{data:t,isLoading:s}=xe({queryKey:["/api/auth/user"],retry:!1});return{user:t,isLoading:s,isAuthenticated:!!t}}function hG(){return jT.useSyncExternalStore(xG,()=>!0,()=>!1)}function xG(){return()=>{}}var $b="Avatar",[pG,FAe]=er($b),[fG,wM]=pG($b),SM=v.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,i]=v.useState("idle");return e.jsx(fG,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(Je.span,{...n,ref:s})})});SM.displayName=$b;var CM="AvatarImage",kM=v.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=t,l=wM(CM,r),o=gG(n,i),c=Gs(d=>{a(d),l.onImageLoadingStatusChange(d)});return Ws(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?e.jsx(Je.img,{...i,ref:s,src:n}):null});kM.displayName=CM;var PM="AvatarFallback",AM=v.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,i=wM(PM,r),[l,o]=v.useState(n===void 0);return v.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(c)}},[n]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(Je.span,{...a,ref:s}):null});AM.displayName=PM;function gS(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function gG(t,{referrerPolicy:s,crossOrigin:r}){const n=hG(),a=v.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[l,o]=v.useState(()=>gS(i,t));return Ws(()=>{o(gS(i,t))},[i,t]),Ws(()=>{const c=m=>()=>{o(m)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),s&&(i.referrerPolicy=s),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,r,s]),l}var TM=SM,DM=kM,OM=AM;const Kn=v.forwardRef(({className:t,...s},r)=>e.jsx(TM,{ref:r,className:Be("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Kn.displayName=TM.displayName;const eo=v.forwardRef(({className:t,...s},r)=>e.jsx(DM,{ref:r,className:Be("aspect-square h-full w-full",t),...s}));eo.displayName=DM.displayName;const Gn=v.forwardRef(({className:t,...s},r)=>e.jsx(OM,{ref:r,className:Be("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Gn.displayName=OM.displayName;function jG(t,s){return v.useReducer((r,n)=>s[r][n]??r,t)}var Fb="ScrollArea",[EM,LAe]=er(Fb),[vG,Mn]=EM(Fb),MM=v.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...l}=t,[o,c]=v.useState(null),[d,u]=v.useState(null),[m,h]=v.useState(null),[x,f]=v.useState(null),[p,g]=v.useState(null),[y,b]=v.useState(0),[j,w]=v.useState(0),[N,S]=v.useState(!1),[O,P]=v.useState(!1),k=ft(s,F=>c(F)),R=Xl(a);return e.jsx(vG,{scope:r,type:n,dir:R,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:u,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:f,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:O,onScrollbarYEnabledChange:P,onCornerWidthChange:b,onCornerHeightChange:w,children:e.jsx(Je.div,{dir:R,...l,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});MM.displayName=Fb;var RM="ScrollAreaViewport",_M=v.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=t,l=Mn(RM,r),o=v.useRef(null),c=ft(s,o,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});_M.displayName=RM;var Da="ScrollAreaScrollbar",Lb=v.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Mn(Da,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=t.orientation==="horizontal";return v.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?e.jsx(yG,{...n,ref:s,forceMount:r}):a.type==="scroll"?e.jsx(bG,{...n,ref:s,forceMount:r}):a.type==="auto"?e.jsx(IM,{...n,ref:s,forceMount:r}):a.type==="always"?e.jsx(Bb,{...n,ref:s}):null});Lb.displayName=Da;var yG=v.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Mn(Da,t.__scopeScrollArea),[i,l]=v.useState(!1);return v.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(cr,{present:r||i,children:e.jsx(IM,{"data-state":i?"visible":"hidden",...n,ref:s})})}),bG=v.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Mn(Da,t.__scopeScrollArea),i=t.orientation==="horizontal",l=Up(()=>c("SCROLL_END"),100),[o,c]=jG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return v.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),v.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const h=()=>{const x=d[u];m!==x&&(c("SCROLL"),l()),m=x};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,l]),e.jsx(cr,{present:r||o!=="hidden",children:e.jsx(Bb,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:$e(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:$e(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),IM=v.forwardRef((t,s)=>{const r=Mn(Da,t.__scopeScrollArea),{forceMount:n,...a}=t,[i,l]=v.useState(!1),o=t.orientation==="horizontal",c=Up(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(o?d:u)}},10);return ac(r.viewport,c),ac(r.content,c),e.jsx(cr,{present:n||i,children:e.jsx(Bb,{"data-state":i?"visible":"hidden",...a,ref:s})})}),Bb=v.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,a=Mn(Da,t.__scopeScrollArea),i=v.useRef(null),l=v.useRef(0),[o,c]=v.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=VM(o.viewport,o.content),u={...n,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function m(h,x){return PG(h,l.current,o,x)}return r==="horizontal"?e.jsx(NG,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,x=jS(h,o,a.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):r==="vertical"?e.jsx(wG,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,x=jS(h,o);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),NG=v.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=Mn(Da,t.__scopeScrollArea),[l,o]=v.useState(),c=v.useRef(null),d=ft(s,c,i.onScrollbarXChange);return v.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(FM,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":qp(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),UM(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Jh(l.paddingLeft),paddingEnd:Jh(l.paddingRight)}})}})}),wG=v.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=Mn(Da,t.__scopeScrollArea),[l,o]=v.useState(),c=v.useRef(null),d=ft(s,c,i.onScrollbarYChange);return v.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(FM,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":qp(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),UM(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Jh(l.paddingTop),paddingEnd:Jh(l.paddingBottom)}})}})}),[SG,$M]=EM(Da),FM=v.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...h}=t,x=Mn(Da,r),[f,p]=v.useState(null),g=ft(s,k=>p(k)),y=v.useRef(null),b=v.useRef(""),j=x.viewport,w=n.content-n.viewport,N=Gs(u),S=Gs(c),O=Up(m,10);function P(k){if(y.current){const R=k.clientX-y.current.left,F=k.clientY-y.current.top;d({x:R,y:F})}}return v.useEffect(()=>{const k=R=>{const F=R.target;f?.contains(F)&&N(R,w)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[j,f,w,N]),v.useEffect(S,[n,S]),ac(f,O),ac(x.content,O),e.jsx(SG,{scope:r,scrollbar:f,hasThumb:a,onThumbChange:Gs(i),onThumbPointerUp:Gs(l),onThumbPositionChange:S,onThumbPointerDown:Gs(o),children:e.jsx(Je.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:$e(t.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),y.current=f.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),P(k))}),onPointerMove:$e(t.onPointerMove,P),onPointerUp:$e(t.onPointerUp,k=>{const R=k.target;R.hasPointerCapture(k.pointerId)&&R.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,x.viewport&&(x.viewport.style.scrollBehavior=""),y.current=null})})})}),Zh="ScrollAreaThumb",LM=v.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=$M(Zh,t.__scopeScrollArea);return e.jsx(cr,{present:r||a.hasThumb,children:e.jsx(CG,{ref:s,...n})})}),CG=v.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:n,...a}=t,i=Mn(Zh,r),l=$M(Zh,r),{onThumbPositionChange:o}=l,c=ft(s,m=>l.onThumbChange(m)),d=v.useRef(void 0),u=Up(()=>{d.current&&(d.current(),d.current=void 0)},100);return v.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(u(),!d.current){const x=AG(m,o);d.current=x,o()}};return o(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,u,o]),e.jsx(Je.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:$e(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),f=m.clientX-x.left,p=m.clientY-x.top;l.onThumbPointerDown({x:f,y:p})}),onPointerUp:$e(t.onPointerUp,l.onThumbPointerUp)})});LM.displayName=Zh;var Vb="ScrollAreaCorner",BM=v.forwardRef((t,s)=>{const r=Mn(Vb,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(kG,{...t,ref:s}):null});BM.displayName=Vb;var kG=v.forwardRef((t,s)=>{const{__scopeScrollArea:r,...n}=t,a=Mn(Vb,r),[i,l]=v.useState(0),[o,c]=v.useState(0),d=!!(i&&o);return ac(a.scrollbarX,()=>{const u=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(u),c(u)}),ac(a.scrollbarY,()=>{const u=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(u),l(u)}),d?e.jsx(Je.div,{...n,ref:s,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Jh(t){return t?parseInt(t,10):0}function VM(t,s){const r=t/s;return isNaN(r)?0:r}function qp(t){const s=VM(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*s;return Math.max(n,18)}function PG(t,s,r,n="ltr"){const a=qp(r),i=a/2,l=s||i,o=a-l,c=r.scrollbar.paddingStart+l,d=r.scrollbar.size-r.scrollbar.paddingEnd-o,u=r.content-r.viewport,m=n==="ltr"?[0,u]:[u*-1,0];return qM([c,d],m)(t)}function jS(t,s,r="ltr"){const n=qp(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,l=s.content-s.viewport,o=i-n,c=r==="ltr"?[0,l]:[l*-1,0],d=ru(t,c);return qM([0,l],[0,o])(d)}function qM(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function UM(t,s){return t>0&&t<s}var AG=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},l=r.left!==i.left,o=r.top!==i.top;(l||o)&&s(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Up(t,s){const r=Gs(t),n=v.useRef(0);return v.useEffect(()=>()=>window.clearTimeout(n.current),[]),v.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function ac(t,s){const r=Gs(s);Ws(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,r])}var zM=MM,TG=_M,DG=BM;const ic=v.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(zM,{ref:n,className:Be("relative overflow-hidden",t),...r,children:[e.jsx(TG,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(HM,{}),e.jsx(DG,{})]}));ic.displayName=zM.displayName;const HM=v.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(Lb,{ref:n,orientation:s,className:Be("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(LM,{className:"relative flex-1 rounded-full bg-border"})}));HM.displayName=Lb.displayName;function OG(){const[t,s]=v.useState({isOpen:!1,type:null,lastOpenTime:null}),[r,n]=v.useState(!1);v.useEffect(()=>{if(t.isOpen&&t.lastOpenTime){const o=setTimeout(()=>{Date.now()-t.lastOpenTime>1500&&n(!0)},1600);return()=>clearTimeout(o)}else n(!1)},[t.isOpen,t.lastOpenTime]),v.useEffect(()=>{const o=c=>{c.key==="Escape"&&t.isOpen&&l()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t.isOpen]);const a=v.useCallback(o=>{s({isOpen:!0,type:o,lastOpenTime:Date.now()}),n(!1)},[]),i=v.useCallback(()=>{s({isOpen:!1,type:null,lastOpenTime:null}),n(!1)},[]),l=v.useCallback(()=>{document.querySelectorAll("[data-radix-popper-content-wrapper]").forEach(u=>u.remove()),document.querySelectorAll("[data-radix-portal]").forEach(u=>u.remove()),s({isOpen:!1,type:null,lastOpenTime:null}),n(!1),document.body.style.overflow="",document.body.style.pointerEvents="";const d=document.body;d.style.position="",d.style.zIndex=""},[]);return{modalState:t,isStuck:r,openModal:a,closeModal:i,forceCloseAll:l}}function EG(){const t=pt(),{openModal:s,closeModal:r}=OG(),{isAuthenticated:n}=Mr(),[a,i]=v.useState(!1),{data:l=[]}=xe({queryKey:["/api/notifications"],staleTime:10*60*1e3,refetchOnMount:!1,enabled:n&&a}),{data:o=[]}=xe({queryKey:["/api/notifications/unread"],refetchInterval:n&&a?6e4:!1,staleTime:5*60*1e3,refetchOnMount:!1,enabled:n&&a}),c=Te({mutationFn:async g=>Ne("POST",`/api/notifications/${g}/read`),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),d=Te({mutationFn:async()=>Ne("POST","/api/notifications/read-all"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),u=Te({mutationFn:async g=>Ne("DELETE",`/api/notifications/${g}`),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),m=g=>{switch(g){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"normal":return"bg-blue-500";case"low":return"bg-gray-500";default:return"bg-blue-500"}},h=g=>{switch(g){case"task_assignment":return"ðŸ“‹";case"booking_update":return"ðŸ ";case"payout_action":return"ðŸ’°";case"maintenance_approval":return"ðŸ”§";default:return"ðŸ””"}},x=g=>{g.isRead||c.mutate(g.id),g.actionUrl&&(window.location.href=g.actionUrl)},f=o.length,p=g=>{i(g),g?s("notifications"):r()};return e.jsxs(iu,{open:a,onOpenChange:p,children:[e.jsx(lu,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"icon",className:"relative",children:[e.jsx(Is,{className:"h-4 w-4"}),f>0&&e.jsx(U,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:f>99?"99+":f})]})}),e.jsxs(Zo,{align:"end",className:"w-80",children:[e.jsxs(ou,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Notifications"}),f>0&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:g=>{g.preventDefault(),g.stopPropagation(),d.mutate()},disabled:d.isPending,children:[e.jsx(tm,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),e.jsx(Mi,{}),!Array.isArray(l)||l.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):e.jsx(ic,{className:"h-96",children:l.slice(0,10).map(g=>e.jsx(Fr,{className:"flex flex-col items-start p-3 cursor-pointer relative",onSelect:y=>y.preventDefault(),onClick:y=>{y.stopPropagation(),x(g)},children:e.jsxs("div",{className:"flex items-start justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("span",{className:"text-lg",children:h(g.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:g.title}),!g.isRead&&e.jsx("div",{className:`w-2 h-2 rounded-full ${m(g.priority)}`})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:g.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Kd(new Date(g.createdAt),{addSuffix:!0})})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!g.isRead&&e.jsx(M,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),c.mutate(g.id)},disabled:c.isPending,className:"h-6 w-6 p-0",children:e.jsx(Bt,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),u.mutate(g.id)},disabled:u.isPending,className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:e.jsx(Es,{className:"h-3 w-3"})})]})]})},g.id))}),Array.isArray(l)&&l.length>10&&e.jsxs(e.Fragment,{children:[e.jsx(Mi,{}),e.jsx(Fr,{className:"text-center text-muted-foreground",children:"Showing latest 10 notifications"})]})]})]})}function MG({isOpen:t,onClose:s}){const[r,n]=v.useState(""),[,a]=or(),{data:i=[],isLoading:l}=xe({queryKey:[`/api/global-search?q=${encodeURIComponent(r)}`],enabled:r.length>2&&r.trim().length>0}),o=m=>{a(m.path),s()},c=m=>{m.key==="Escape"?s():m.key==="Enter"&&i.length>0&&o(i[0])};v.useEffect(()=>{t&&n("")},[t]);const d=m=>{switch(m){case"property":return Jt;case"booking":return Xe;case"task":return Wa;case"user":return ot;case"finance":return Ze;default:return as}},u=m=>{switch(m){case"property":return"Property";case"booking":return"Booking";case"task":return"Task";case"user":return"User";case"finance":return"Finance";default:return"Result"}};return e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"max-w-2xl p-0 flex flex-col",style:{maxHeight:"80vh"},children:[e.jsx(Qe,{className:"px-6 py-4 border-b shrink-0",children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5"}),"Global Search"]})}),e.jsx("div",{className:"px-6 py-4 border-b shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search properties, bookings, tasks, users, finance records...",value:r,onChange:m=>n(m.target.value),onKeyDown:c,className:"pl-9 pr-4",autoFocus:!0}),r&&e.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>n(""),children:e.jsx(Es,{className:"h-3 w-3"})})]})}),e.jsx("div",{className:"px-6 py-4 overflow-y-auto flex-1 min-h-0",children:l?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching..."})]}):r.length<=2?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(as,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type at least 3 characters to search"}),e.jsxs("div",{className:"mt-4 text-xs text-muted-foreground",children:[e.jsx("p",{children:"Search across:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-2",children:[e.jsx(U,{variant:"outline",className:"text-xs",children:"Properties"}),e.jsx(U,{variant:"outline",className:"text-xs",children:"Bookings"}),e.jsx(U,{variant:"outline",className:"text-xs",children:"Tasks"}),e.jsx(U,{variant:"outline",className:"text-xs",children:"Users"}),e.jsx(U,{variant:"outline",className:"text-xs",children:"Finance"})]})]})]}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(as,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:['No results found for "',r,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Try different keywords or check spelling"})]}):e.jsx("div",{className:"space-y-2",children:i.map(m=>{const h=d(m.type);return e.jsx("div",{className:"p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>o(m),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-primary/10",children:e.jsx(h,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:m.title}),e.jsx(U,{variant:"secondary",className:"text-xs",children:u(m.type)}),m.badge&&e.jsx(U,{variant:m.badge.variant,className:"text-xs",children:m.badge.text})]}),m.subtitle&&e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:m.subtitle}),m.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m.description})]})]})})},`${m.type}-${m.id}`)})})}),i.length>0&&e.jsx("div",{className:"px-6 py-3 border-t bg-muted/30 shrink-0",children:e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border rounded",children:"Enter"})," to open first result,",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border rounded ml-1",children:"Esc"})," to close"]})})]})})}function RG(){const[t,s]=v.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"ghost",size:"sm",className:"hidden md:flex h-8 w-8 p-0",onClick:()=>s(!0),title:"Global Search (Ctrl+K)",children:e.jsx(as,{className:"h-4 w-4"})}),e.jsx(MG,{isOpen:t,onClose:()=>s(!1)})]})}const _G={admin:Kt,"portfolio-manager":I8,owner:Jt,staff:nm,"retail-agent":Er,"referral-agent":ot,guest:tt},IG={admin:"bg-red-500","portfolio-manager":"bg-blue-500",owner:"bg-green-500",staff:"bg-yellow-500","retail-agent":"bg-purple-500","referral-agent":"bg-orange-500",guest:"bg-gray-500"};function zi({title:t,subtitle:s,action:r}){const{user:n}=Mr(),[,a]=or(),i=n?.role||"guest",l=_G[i]||tt,o=IG[i]||"bg-gray-500",c=Te({mutationFn:async()=>await Ne("POST","/api/auth/demo-logout",{}),onSuccess:()=>{window.location.href="/"}});return e.jsx("header",{className:"sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800 bg-white/95 dark:bg-gray-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-gray-900/60 shadow-sm",children:e.jsxs("div",{className:"flex h-12 sm:h-14 items-center gap-2 sm:gap-4 px-3 sm:px-4 lg:px-6",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-sm sm:text-lg font-semibold text-gray-900 dark:text-white truncate lg:text-xl",children:t}),s&&e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 truncate hidden sm:block",children:s})]})})}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:r}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[e.jsx(RG,{}),e.jsx(EG,{}),e.jsx(M,{variant:"ghost",size:"sm",className:"hidden sm:flex h-8 w-8 p-0",onClick:()=>a("/help"),title:"Help Center",children:e.jsx(Eh,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"hidden sm:flex h-8 w-8 p-0",onClick:()=>a("/simple-settings"),title:"Settings",children:e.jsx(ss,{className:"h-4 w-4"})}),e.jsxs(iu,{children:[e.jsx(lu,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:"flex items-center gap-1 sm:gap-3 px-1 sm:pl-2 hover:bg-gray-100 dark:hover:bg-gray-800 min-w-0",children:[e.jsxs("div",{className:"hidden md:block text-right min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate max-w-[120px]",children:[n?.firstName," ",n?.lastName]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(U,{variant:"secondary",className:"text-xs",children:i==="portfolio-manager"?"PM":i==="retail-agent"?"Retail":i==="referral-agent"?"Referral":i.charAt(0).toUpperCase()+i.slice(1)})})]}),e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Kn,{className:"h-7 w-7 sm:h-8 sm:w-8 lg:h-9 lg:w-9",children:[e.jsx(eo,{src:n?.profileImageUrl}),e.jsx(Gn,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-xs sm:text-sm",children:(n?.firstName||"U").charAt(0)})]}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 sm:-bottom-1 sm:-right-1 w-2.5 h-2.5 sm:w-3 sm:h-3 ${o} rounded-full flex items-center justify-center border-2 border-white dark:border-gray-900`,children:e.jsx(l,{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 text-white"})})]})]})}),e.jsxs(Zo,{align:"end",className:"w-56",children:[e.jsx(ou,{children:"My Account"}),e.jsx(Mi,{}),e.jsxs(Fr,{className:"flex items-center gap-2",onClick:()=>a("/profile"),children:[e.jsx(zt,{className:"h-4 w-4"}),"Profile"]}),e.jsxs(Fr,{className:"flex items-center gap-2",onClick:()=>{try{window.location.href="/settings"}catch(d){console.error("Settings navigation error:",d),window.location.href="/simple-settings"}},children:[e.jsx(ss,{className:"h-4 w-4"}),"Settings"]}),e.jsx(Mi,{}),e.jsxs(Fr,{className:"flex items-center gap-2 text-red-600 focus:text-red-600",onClick:()=>c.mutate(),disabled:c.isPending,children:[e.jsx(vn,{className:"h-4 w-4"}),c.isPending?"Logging out...":"Logout"]})]})]})]})]})})}function Gm({title:t,value:s,icon:r,color:n}){const a={primary:"bg-primary/10 text-primary",success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-600",accent:"bg-orange-100 text-orange-600"};return e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s})]}),e.jsx("div",{className:`p-3 rounded-lg ${a[n]}`,children:e.jsx(r,{className:"w-6 h-6"})})]})})})}function wm({open:t,onOpenChange:s,propertyId:r}){const[n,a]=v.useState({propertyId:r||"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:"",totalAmount:"",paymentStatus:"pending",amountPaid:"",specialRequests:"",skipHostawaySync:!1});ee.useEffect(()=>{r&&t&&a(h=>({...h,propertyId:r}))},[r,t]);const i=pt(),{toast:l}=st(),{user:o}=On(),{data:c=[]}=xe({queryKey:["/api/properties"]}),d=Te({mutationFn:async h=>await Ne("POST","/api/booking-revenue",h),onMutate:async h=>{try{await i.cancelQueries(Tt.bookings.all())}catch{}await i.cancelQueries({queryKey:["/api/bookings"]});const x=i.getQueryData(Tt.bookings.all()),f=i.getQueryData(["/api/bookings"]),p=h?.propertyId?i.getQueryData(Tt.bookings.withSource(String(h.propertyId))):null,g={id:-Date.now(),...h,totalAmount:String(h.guestBookingPrice??"0"),createdAt:new Date().toISOString()};try{i.setQueryData(Tt.bookings.all(),y=>y?[g,...y]:[g])}catch{i.setQueryData(["/api/bookings"],y=>y?[g,...y]:[g])}if(h?.propertyId)try{i.setQueryData(Tt.bookings.withSource(String(h.propertyId)),y=>y?[g,...y]:[g])}catch{}return{previousAll:x,previousApi:f,previousByProp:p}},onError:(h,x,f)=>{if(console.error("Booking creation error:",h),f?.previousAll!==void 0)try{i.setQueryData(Tt.bookings.all(),f.previousAll)}catch{i.setQueryData(["/api/bookings"],f.previousApi)}else f?.previousApi!==void 0&&i.setQueryData(["/api/bookings"],f.previousApi);if(f?.previousByProp!==void 0&&x?.propertyId)try{i.setQueryData(Tt.bookings.withSource(String(x.propertyId)),f.previousByProp)}catch{}l({title:"Error",description:h?.message||"Failed to create booking",variant:"destructive"})},onSuccess:async h=>{const x=h?.booking||h;try{i.setQueryData(Tt.bookings.all(),f=>{if(!f)return[x];const p=f.filter(g=>!(typeof g.id=="number"&&g.id<0));return[x,...p]})}catch{i.setQueryData(["/api/bookings"],f=>{if(!f)return[x];const p=f.filter(g=>!(typeof g.id=="number"&&g.id<0));return[x,...p]})}Rl(i),o?.id&&(i.invalidateQueries({queryKey:[`/api/achievements/user/${o.id}`]}),i.invalidateQueries({queryKey:["/api/achievements/definitions"]})),l({title:"Success",description:`Booking created successfully for ${x.guestName}`}),s(!1),a({propertyId:"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:"",totalAmount:"",paymentStatus:"pending",amountPaid:"",specialRequests:"",skipHostawaySync:!1})},onSettled:()=>{try{Rl(i)}catch{i.invalidateQueries({queryKey:["/api/bookings"]})}i.invalidateQueries({queryKey:["/api/properties"]})}}),u=h=>{if(h.preventDefault(),d.isPending)return;if(!o||!o.id){l({title:"Authentication Required",description:"Please log in to create a booking. Redirecting to login...",variant:"destructive"}),setTimeout(()=>{window.location.href="/"},1500);return}if(!n.propertyId){l({title:"Validation Error",description:"Please select a property",variant:"destructive"});return}if(!n.guestName){l({title:"Validation Error",description:"Guest name is required",variant:"destructive"});return}const x=parseFloat(n.totalAmount||"0"),f=parseFloat(n.amountPaid||"0");if(isNaN(x)||!isFinite(x)){l({title:"Validation Error",description:"Total amount must be a valid number",variant:"destructive"});return}if(isNaN(f)||!isFinite(f)){l({title:"Validation Error",description:"Amount paid must be a valid number",variant:"destructive"});return}if(x<0){l({title:"Validation Error",description:"Total amount cannot be negative",variant:"destructive"});return}if(f<0){l({title:"Validation Error",description:"Amount paid cannot be negative",variant:"destructive"});return}if(f>x){l({title:"Validation Error",description:"Amount paid cannot exceed total amount",variant:"destructive"});return}const p=Math.max(0,x-f),g={propertyId:parseInt(n.propertyId,10),guestName:n.guestName,guestEmail:n.guestEmail||null,guestPhone:n.guestPhone||null,checkInDate:n.checkIn,checkOutDate:n.checkOut,numberOfGuests:parseInt(n.guests||"1",10),guestBookingPrice:n.totalAmount||"0",otaPlatformFee:"0",finalPayoutAmount:n.totalAmount||"0",currency:"THB",paymentStatus:n.paymentStatus,payoutDate:n.paymentStatus==="paid"?new Date().toISOString():null,notes:n.specialRequests||`Amount paid: ${f.toFixed(2)}, Amount due: ${p.toFixed(2)}`,skipHostawaySync:n.skipHostawaySync};d.mutate(g)},m=(h,x)=>a(f=>({...f,[h]:x}));return e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"w-[95vw] max-w-2xl p-0 overflow-y-auto max-h-[90vh]",children:[e.jsx(Qe,{className:"sticky top-0 z-10 border-b bg-white/90 backdrop-blur px-6 py-4",children:e.jsx(Ye,{children:"Create New Booking"})}),e.jsxs("form",{onSubmit:u,className:"flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"propertyId",children:"Property"}),e.jsxs(ae,{value:n.propertyId,onValueChange:h=>m("propertyId",h),required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})}),e.jsx(ne,{children:Array.isArray(c)?c.map(h=>e.jsx(A,{value:h.id.toString(),children:h.name},h.id)):[]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guests",children:"Number of Guests"}),e.jsx(Q,{id:"guests",type:"number",value:n.guests,onChange:h=>m("guests",h.target.value),placeholder:"1",min:"1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guestName",children:"Guest Name"}),e.jsx(Q,{id:"guestName",value:n.guestName,onChange:h=>m("guestName",h.target.value),placeholder:"Full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guestEmail",children:"Guest Email"}),e.jsx(Q,{id:"guestEmail",type:"email",value:n.guestEmail,onChange:h=>m("guestEmail",h.target.value),placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guestPhone",children:"Guest Phone"}),e.jsx(Q,{id:"guestPhone",value:n.guestPhone,onChange:h=>m("guestPhone",h.target.value),placeholder:"+1234567890"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"checkIn",children:"Check-in Date"}),e.jsx(Q,{id:"checkIn",type:"date",value:n.checkIn,onChange:h=>m("checkIn",h.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"checkOut",children:"Check-out Date"}),e.jsx(Q,{id:"checkOut",type:"date",value:n.checkOut,onChange:h=>m("checkOut",h.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"totalAmount",children:"Total Amount"}),e.jsx(Q,{id:"totalAmount",type:"number",step:"0.01",value:n.totalAmount,onChange:h=>m("totalAmount",h.target.value),placeholder:"0.00",min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"paymentStatus",children:"Payment Status"}),e.jsxs(ae,{value:n.paymentStatus,onValueChange:h=>m("paymentStatus",h),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select payment status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"pending",children:"Payment Pending"}),e.jsx(A,{value:"partial",children:"Partial Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"amountPaid",children:"Amount Paid"}),e.jsx(Q,{id:"amountPaid",type:"number",step:"0.01",value:n.amountPaid,onChange:h=>m("amountPaid",h.target.value),placeholder:"0.00",min:"0",max:n.totalAmount||void 0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"amountDue",children:"Amount Due"}),e.jsx(Q,{id:"amountDue",type:"number",step:"0.01",value:(parseFloat(n.totalAmount)||0)-(parseFloat(n.amountPaid)||0),readOnly:!0,className:"bg-muted",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Auto-calculated: Total - Paid"})]})]}),(Array.isArray(c)?c.find(f=>f.id?.toString()===n.propertyId):null)?.source==="HOSTAWAY"?e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Pi,{id:"skipHostawaySync",checked:n.skipHostawaySync,onCheckedChange:f=>a(p=>({...p,skipHostawaySync:f===!0}))}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{htmlFor:"skipHostawaySync",className:"text-sm font-medium cursor-pointer",children:"Local Only (Skip Hostaway Sync)"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Create booking in local database only, without syncing to Hostaway. Useful for manual bookings or when dates are blocked."})]})]})}):null,e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"specialRequests",children:"Special Requests"}),e.jsx(ct,{id:"specialRequests",value:n.specialRequests,onChange:h=>m("specialRequests",h.target.value),placeholder:"Any special requests or notes...",rows:3})]})]}),e.jsxs("div",{className:"sticky bottom-0 z-10 flex items-center justify-end gap-2 border-t bg-white/90 backdrop-blur px-6 py-3",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:d.isPending,children:d.isPending?"Creating...":"Create Booking"})]})]})]})})}var zp="Tabs",[$G,BAe]=er(zp,[qc]),KM=qc(),[FG,qb]=$G(zp),GM=v.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=t,u=Xl(o),[m,h]=Hr({prop:n,onChange:a,defaultProp:i??"",caller:zp});return e.jsx(FG,{scope:r,baseId:rn(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:c,children:e.jsx(Je.div,{dir:u,"data-orientation":l,...d,ref:s})})});GM.displayName=zp;var WM="TabsList",QM=v.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,i=qb(WM,r),l=KM(r);return e.jsx(mb,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(Je.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});QM.displayName=WM;var YM="TabsTrigger",XM=v.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=t,l=qb(YM,r),o=KM(r),c=eR(l.baseId,n),d=tR(l.baseId,n),u=n===l.value;return e.jsx(hb,{asChild:!0,...o,focusable:!a,active:u,children:e.jsx(Je.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:$e(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(n):m.preventDefault()}),onKeyDown:$e(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(n)}),onFocus:$e(t.onFocus,()=>{const m=l.activationMode!=="manual";!u&&!a&&m&&l.onValueChange(n)})})})});XM.displayName=YM;var ZM="TabsContent",JM=v.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...l}=t,o=qb(ZM,r),c=eR(o.baseId,n),d=tR(o.baseId,n),u=n===o.value,m=v.useRef(u);return v.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(cr,{present:a||u,children:({present:h})=>e.jsx(Je.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});JM.displayName=ZM;function eR(t,s){return`${t}-trigger-${s}`}function tR(t,s){return`${t}-content-${s}`}var LG=GM,sR=QM,rR=XM,nR=JM;const xt=LG,ht=v.forwardRef(({className:t,...s},r)=>e.jsx(sR,{ref:r,className:Be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));ht.displayName=sR.displayName;const de=v.forwardRef(({className:t,...s},r)=>e.jsx(rR,{ref:r,className:Be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));de.displayName=rR.displayName;const me=v.forwardRef(({className:t,...s},r)=>e.jsx(nR,{ref:r,className:Be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));me.displayName=nR.displayName;console.log("ðŸ  Property Dialog component loaded");function Hp({open:t,onOpenChange:s}){const[r,n]=v.useState({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active"}),[a,i]=v.useState(""),[l,o]=v.useState(!1),c=pt(),{toast:d}=st(),{user:u}=On(),m=Te({mutationFn:async p=>{console.log("ðŸš€ Frontend: Submitting property data:",p);const g=await Ne("POST","/api/properties",p);return console.log("âœ… Frontend: Property created successfully:",g),g},onSuccess:async p=>{console.log("ðŸŽ‰ Frontend: Property creation successful, invalidating cache"),hr.delete("/api/properties"),hr.delete("/api/dashboard/stats"),hr.delete("/api/dashboard"),console.log("âœ… FastCache cleared for properties and dashboard"),$h(c),u?.id&&(c.invalidateQueries({queryKey:[`/api/achievements/user/${u.id}`]}),c.invalidateQueries({queryKey:["/api/achievements/definitions"]})),d({title:"Success",description:`Property "${p.name}" created successfully!`}),s(!1),n({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active"})},onError:p=>{console.error("âŒ Frontend: Property creation error:",p);let g="Failed to create property";p.message?g=p.message:p.errors&&Array.isArray(p.errors)&&(g=p.errors.map(y=>y.message||y.path?.join(".")+": "+y.message).join(", ")),d({title:"Error",description:g,variant:"destructive"})}}),h=p=>{if(p.preventDefault(),console.log("ðŸ”„ Frontend: Form submitted with data:",r),!r.name.trim()){d({title:"Validation Error",description:"Property name is required",variant:"destructive"});return}if(!r.address.trim()){d({title:"Validation Error",description:"Property address is required",variant:"destructive"});return}const g={organizationId:"default-org",name:r.name.trim(),address:r.address.trim(),description:r.description?.trim()||"",bedrooms:r.bedrooms?parseInt(r.bedrooms):null,bathrooms:r.bathrooms?parseInt(r.bathrooms):null,maxGuests:r.maxGuests?parseInt(r.maxGuests):null,pricePerNight:r.pricePerNight?parseFloat(r.pricePerNight):null,currency:"THB",status:r.status};console.log("ðŸš€ Frontend: Final property data being submitted:",g),m.mutate(g)},x=(p,g)=>{n(y=>({...y,[p]:g}))},f=async()=>{if(!a.trim()){d({title:"Validation Error",description:"Please enter an Airbnb URL",variant:"destructive"});return}if(!(a.includes("airbnb.com")||a.includes("abnb.me")||a.includes("airbnb.")||a.includes("www.airbnb")||/airbnb/i.test(a))){d({title:"Invalid URL",description:"Please enter a valid Airbnb listing URL",variant:"destructive"});return}o(!0);try{const y=await(await Ne("POST","/api/properties/import/airbnb",{url:a.trim()})).json();if(y.success)n({name:y.property.name||"",address:y.property.address||"",description:y.property.description||"",bedrooms:y.property.bedrooms?.toString()||"",bathrooms:y.property.bathrooms?.toString()||"",maxGuests:y.property.maxGuests?.toString()||"",pricePerNight:y.property.pricePerNight?.toString()||"",status:"active"}),d({title:"Import Successful",description:"Property data imported from Airbnb. Please review and save."}),i("");else throw new Error(y.message||"Failed to import property data")}catch(g){console.error("Airbnb import error:",g),d({title:"Import Failed",description:g.message||"Could not import from Airbnb. Please enter property details manually.",variant:"destructive"})}finally{o(!1)}};return e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Add New Property"})}),e.jsxs(xt,{defaultValue:"manual",className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-2",children:[e.jsxs(de,{value:"manual",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Create from Scratch"]}),e.jsxs(de,{value:"airbnb",children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Import from Airbnb"]})]}),e.jsx(me,{value:"airbnb",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Import from Airbnb"}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Enter an Airbnb listing URL to automatically import property details, photos, and amenities."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"airbnb-url",children:"Airbnb Listing URL"}),e.jsx(Q,{id:"airbnb-url",value:a,onChange:p=>i(p.target.value),placeholder:"https://www.airbnb.com/rooms/12345678",className:"mt-1"})]}),e.jsx(M,{type:"button",onClick:f,disabled:l||!a.trim(),className:"w-full",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing from Airbnb..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Import Property Data"]})})]})]})}),e.jsx(me,{value:"manual",className:"mt-4",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"name",children:"Property Name"}),e.jsx(Q,{id:"name",value:r.name,onChange:p=>x("name",p.target.value),placeholder:"Enter property name",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(ae,{value:r.status,onValueChange:p=>x("status",p),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"address",children:"Address"}),e.jsx(Q,{id:"address",value:r.address,onChange:p=>x("address",p.target.value),placeholder:"Enter full address",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(ct,{id:"description",value:r.description,onChange:p=>x("description",p.target.value),placeholder:"Describe the property...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(Q,{id:"bedrooms",type:"number",value:r.bedrooms,onChange:p=>x("bedrooms",p.target.value),placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(Q,{id:"bathrooms",type:"number",value:r.bathrooms,onChange:p=>x("bathrooms",p.target.value),placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"maxGuests",children:"Max Guests"}),e.jsx(Q,{id:"maxGuests",type:"number",value:r.maxGuests,onChange:p=>x("maxGuests",p.target.value),placeholder:"0",min:"1"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"pricePerNight",children:"Price/Night"}),e.jsx(Q,{id:"pricePerNight",type:"number",step:"0.01",value:r.pricePerNight,onChange:p=>x("pricePerNight",p.target.value),placeholder:"0.00",min:"0"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:m.isPending,children:m.isPending?"Creating...":"Create Property"})]})]})})]})]})})}const vS={THB:{code:"THB",symbol:"à¸¿",locale:"th-TH",name:"Thai Baht"},USD:{code:"USD",symbol:"$",locale:"en-US",name:"US Dollar"},EUR:{code:"EUR",symbol:"â‚¬",locale:"de-DE",name:"Euro"},GBP:{code:"GBP",symbol:"Â£",locale:"en-GB",name:"British Pound"},JPY:{code:"JPY",symbol:"Â¥",locale:"ja-JP",name:"Japanese Yen"},AUD:{code:"AUD",symbol:"A$",locale:"en-AU",name:"Australian Dollar"},SGD:{code:"SGD",symbol:"S$",locale:"en-SG",name:"Singapore Dollar"},MYR:{code:"MYR",symbol:"RM",locale:"ms-MY",name:"Malaysian Ringgit"},INR:{code:"INR",symbol:"â‚¹",locale:"en-IN",name:"Indian Rupee"},CNY:{code:"CNY",symbol:"Â¥",locale:"zh-CN",name:"Chinese Yuan"}},Ig="USD";function Rr(){let t=!1,s=null;try{s=Kq(),t=!0}catch{t=!1}const{data:r,isLoading:n}=xe({queryKey:["/api/system-settings"],staleTime:0,gcTime:30*1e3,refetchOnWindowFocus:!0,enabled:!t}),a=t?s.baseCurrency:r?.baseCurrency||Ig,i=t?s.displayCurrency:r?.displayCurrency||r?.defaultCurrency||Ig,l=i,o=vS[l]||vS[Ig],c=f=>{if(f==null)return`${o.symbol}0`;const p=typeof f=="string"?parseFloat(f):f;if(typeof p!="number"||isNaN(p))return`${o.symbol}0`;try{return new Intl.NumberFormat(o.locale,{style:"currency",currency:o.code,minimumFractionDigits:0,maximumFractionDigits:0}).format(p)}catch{return`${o.symbol}${p.toLocaleString()}`}},d=f=>{if(f==null)return`${o.symbol}0.00`;const p=typeof f=="string"?parseFloat(f):f;if(typeof p!="number"||isNaN(p))return`${o.symbol}0.00`;try{return new Intl.NumberFormat(o.locale,{style:"currency",currency:o.code,minimumFractionDigits:2,maximumFractionDigits:2}).format(p)}catch{return`${o.symbol}${p.toFixed(2)}`}},u=(f,p)=>{if(f==null)return 0;const g=typeof f=="string"?parseFloat(f):f;return isNaN(g)?0:t&&s?s.convertAmount(g,p||a):g},m=(f,p)=>t&&s?s.formatCurrencyWithConversion(f,p||a):c(f),h=f=>{if(f==null)return"0";const p=typeof f=="string"?parseFloat(f):f;return typeof p!="number"||isNaN(p)?"0":new Intl.NumberFormat(o.locale).format(p)},x=(f,p)=>t&&s?s.getRate(f,p):1;return{currencyCode:l,currencySymbol:o.symbol,currencyName:o.name,currencyLocale:o.locale,baseCurrency:a,displayCurrency:i,formatCurrency:c,formatCurrencyWithDecimals:d,formatNumber:h,convertAmount:u,formatWithConversion:m,getRate:x,isLoading:t?s.isLoading:n,systemSettings:t?null:r,hasConversionSupport:t}}function Cv(){Mr();const{toast:t}=st(),{formatWithConversion:s}=Rr(),[r,n]=v.useState(!1),[a,i]=v.useState(!1),[l,o]=v.useState(!1),[c,d]=v.useState({}),[u,m]=v.useState("overview"),{data:h}=xe({queryKey:["/api/dashboard/stats"],staleTime:30*1e3,refetchOnMount:!0}),{data:x=[]}=xe({queryKey:["/api/properties"],staleTime:30*1e3,refetchOnMount:!0}),{data:f=[]}=xe({queryKey:["/api/dashboard/recent-tasks"],staleTime:5*60*1e3,refetchOnMount:!1}),{data:p={}}=xe({queryKey:["/api/dashboard/task-stats"],staleTime:5*60*1e3,refetchOnMount:!1}),{data:g=[]}=xe({queryKey:["/api/bookings"],staleTime:0,refetchOnMount:!0});console.log("ðŸ“… Dashboard - Bookings data:",g,"Count:",g.length);const{data:y=[]}=xe({queryKey:["/api/property-documents/expiring?days=30"],staleTime:0,refetchOnMount:!0});console.log("ðŸ“‹ Dashboard - Expiring Documents:",y,"Count:",y.length);const{data:b=[]}=xe({queryKey:["/api/property-insurance/expiring/30"],staleTime:0,refetchOnMount:!0}),j=g.filter(R=>parseFloat(R.amountDue||"0")>0);v.useEffect(()=>{if(y&&Array.isArray(y)&&y.length>0){const R=new Date,F=y.filter(I=>I.expiryDate?new Date(I.expiryDate)<R:!1);F.length>0&&t({title:"âš ï¸ Documents Expired",description:`${F.length} property document${F.length>1?"s have":" has"} expired. Check the dashboard for details.`,variant:"destructive"})}},[y,t]),v.useEffect(()=>{if(j.length>0){const R=j.reduce((F,I)=>F+parseFloat(I.amountDue||"0"),0);t({title:"ðŸ’° Outstanding Payments",description:`${j.length} customer${j.length>1?"s have":" has"} outstanding balances totaling ${s(R)}`,variant:"default"})}},[j.length,t]);const w=g.sort((R,F)=>new Date(F.createdAt||0).getTime()-new Date(R.createdAt||0).getTime()).slice(0,3),N=f.slice(0,5),S=new Map;x.forEach(R=>{S.set(R.id,R.name)});const O=x.filter(R=>!(c.searchText&&!R.name.toLowerCase().includes(c.searchText.toLowerCase())||c.area&&R.area!==c.area||c.bedroomCount&&R.bedrooms!==c.bedroomCount)),P=R=>{switch(R){case"active":case"confirmed":case"paid":case"completed":return"default";case"pending":case"scheduled":return"secondary";case"overdue":case"high":return"destructive";case"maintenance":case"in-progress":case"medium":return"outline";default:return"secondary"}},k=R=>{switch(R){case"high":return e.jsx(St,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(tt,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(Ie,{className:"h-4 w-4 text-green-500"});default:return null}};return e.jsxs("div",{className:"container mx-auto bg-background w-full overflow-x-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(zi,{title:"Enhanced Admin Dashboard",subtitle:"Comprehensive property management overview with advanced filtering"}),e.jsxs("main",{className:"flex-1 overflow-auto p-3 sm:p-6 overflow-x-hidden",children:[e.jsx(D,{className:"mb-4 sm:mb-6",children:e.jsx(T,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx(Q,{placeholder:"Search properties...",value:c.searchText||"",onChange:R=>d(F=>({...F,searchText:R.target.value}))}),e.jsxs(ae,{value:c.area||"all",onValueChange:R=>d(F=>({...F,area:R==="all"?void 0:R})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Areas"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Areas"}),e.jsx(A,{value:"Chaweng",children:"Chaweng"}),e.jsx(A,{value:"Lamai",children:"Lamai"}),e.jsx(A,{value:"Bophut",children:"Bophut"}),e.jsx(A,{value:"Nathon",children:"Nathon"})]})]}),e.jsxs(ae,{value:c.bedroomCount?.toString()||"all",onValueChange:R=>d(F=>({...F,bedroomCount:R==="all"?void 0:parseInt(R)})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Bedrooms"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Bedrooms"}),e.jsx(A,{value:"2",children:"2 Bedrooms"}),e.jsx(A,{value:"3",children:"3 Bedrooms"}),e.jsx(A,{value:"4",children:"4 Bedrooms"}),e.jsx(A,{value:"5",children:"5+ Bedrooms"})]})]}),e.jsx(M,{variant:"outline",onClick:()=>d({}),className:"w-full",children:"Clear Filters"})]})})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 lg:gap-6 mb-4 sm:mb-8",children:[e.jsx(Gm,{title:"Total Properties",value:O.length,icon:At,color:"primary"}),e.jsx(Gm,{title:"Active Properties",value:O.filter(R=>R.status==="active").length,icon:Jt,color:"success"}),e.jsx(Gm,{title:"Expired Documents",value:y.filter(R=>R.expiryDate?new Date(R.expiryDate)<new Date:!1).length,icon:St,color:"warning"}),e.jsx(Gm,{title:"High Priority Tasks",value:p.highPriority||0,icon:St,color:"accent"})]}),e.jsxs(xt,{value:u,onValueChange:m,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4 h-auto",children:[e.jsxs(de,{value:"overview",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[e.jsx("span",{className:"hidden sm:inline",children:"Overview"}),e.jsx("span",{className:"sm:hidden",children:"Home"})]}),e.jsxs(de,{value:"properties",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[e.jsx("span",{className:"hidden sm:inline",children:"Properties"}),e.jsx("span",{className:"sm:hidden",children:"Props"})]}),e.jsx(de,{value:"tasks",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:"Tasks"}),e.jsxs(de,{value:"bookings",className:"text-xs sm:text-sm px-1 sm:px-3 py-2",children:[e.jsx("span",{className:"hidden sm:inline",children:"Bookings"}),e.jsx("span",{className:"sm:hidden",children:"Book"})]})]}),e.jsxs(me,{value:"overview",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-8",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recent Bookings"})}),e.jsx(T,{children:w.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No bookings found"}):e.jsx("div",{className:"space-y-4",children:w.map(R=>{const F=S.get(R.propertyId)||R.property||`Property #${R.propertyId}`,I=R.totalAmount||R.guestTotalPrice||R.platformPayout||R.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"w-6 h-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.guestName}),e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:F})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[new Date(R.checkIn).toLocaleDateString()," ","-"," ",new Date(R.checkOut).toLocaleDateString()]}),e.jsx("p",{className:"text-sm text-gray-500",children:s(I)})]})]},R.id)})})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Task Overview"})}),e.jsx(T,{children:N.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No tasks found"}):e.jsx("div",{className:"space-y-4",children:N.map(R=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${R.status==="pending"?"bg-yellow-500":R.status==="in-progress"?"bg-blue-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.title}),e.jsx("p",{className:"text-sm text-gray-500",children:R.type})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.status==="pending"?"bg-yellow-100 text-yellow-800":R.status==="in-progress"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:R.status.replace("-"," ")})})]},R.id))})})]})]}),j.length>0&&e.jsxs(D,{className:"border-red-200 bg-red-50",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2 text-red-800",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Outstanding Payments (",j.length,")"]})}),e.jsxs(T,{children:[e.jsx("div",{className:"space-y-3",children:j.slice(0,5).map(R=>{const F=S.get(R.propertyId)||`Property #${R.propertyId}`,I=parseFloat(R.amountDue||"0");return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-red-100",children:e.jsx(Ze,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:F})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(U,{variant:"destructive",children:[s(I)," due"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Check-in:"," ",new Date(R.checkIn).toLocaleDateString()]})]})]},R.id)})}),j.length>5&&e.jsxs("p",{className:"text-sm text-gray-600 mt-3 text-center",children:["+",j.length-5," more customers with outstanding balances"]})]})]}),(y.length>0||b.length>0)&&e.jsxs(D,{className:"border-orange-200 bg-orange-50",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(St,{className:"h-5 w-5"}),"Expiry Alerts (",y.length+b.length,")"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[y.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-900 mb-3",children:"Property Documents Expiring"}),e.jsx("div",{className:"space-y-3",children:y.map(R=>{const F=S.get(R.propertyId)||`Property #${R.propertyId}`,I=Math.ceil((new Date(R.expiryDate).getTime()-Date.now())/(1e3*60*60*24)),W=I<0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${W?"bg-red-100":"bg-orange-100"}`,children:e.jsx(At,{className:`w-5 h-5 ${W?"text-red-600":"text-orange-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.docType||"Document"}),e.jsx("p",{className:"text-sm text-gray-600",children:F})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(U,{variant:W?"destructive":"outline",className:W?"":"border-orange-300 text-orange-700",children:W?"Expired":`${I} days left`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(R.expiryDate).toLocaleDateString()})]})]},R.id)})})]}),b.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-900 mb-3",children:"Property Insurance Expiring"}),e.jsx("div",{className:"space-y-3",children:b.map(R=>{const F=S.get(R.propertyId)||`Property #${R.propertyId}`,I=Math.ceil((new Date(R.expiryDate).getTime()-Date.now())/(1e3*60*60*24)),W=I<0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${W?"bg-red-100":"bg-blue-100"}`,children:e.jsx(At,{className:`w-5 h-5 ${W?"text-red-600":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.insuranceType||"Insurance"}),e.jsx("p",{className:"text-sm text-gray-600",children:F})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(U,{variant:W?"destructive":"outline",className:W?"":"border-blue-300 text-blue-700",children:W?"Expired":`${I} days left`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(R.expiryDate).toLocaleDateString()})]})]},R.id)})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>n(!0),children:[e.jsx(ut,{className:"w-6 h-6 text-primary"}),e.jsx("span",{children:"New Booking"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>i(!0),children:[e.jsx(Jt,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{children:"Add Property"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>o(!0),children:[e.jsx(Li,{className:"w-6 h-6 text-yellow-600"}),e.jsx("span",{children:"Create Task"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>window.location.href="/finances",children:[e.jsx(Ot,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{children:"View Reports"})]})]})]}),e.jsxs(me,{value:"properties",className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4",children:O.map(R=>e.jsx(D,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>window.location.href=`/property-hub?property=${R.id}`,children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:R.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[R.address||"No address"," â€¢"," ",R.bedrooms||0," bedrooms"]}),e.jsx("p",{className:"text-sm font-medium text-green-600",children:R.pricePerNight?`à¸¿${R.pricePerNight}/night`:"No price set"})]}),e.jsx(U,{variant:P(R.status),children:R.status})]})})},R.id))}),e.jsx("div",{className:"text-center pt-4",children:e.jsx(M,{variant:"outline",onClick:()=>window.location.href="/property-hub",className:"w-full",children:"View All Properties in Property Management Hub"})})]}),e.jsx(me,{value:"tasks",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:N.length===0?e.jsx(D,{children:e.jsx(T,{className:"p-8 text-center text-muted-foreground",children:"No tasks found"})}):N.map(R=>{const F=S.get(R.propertyId)||R.property||`Property #${R.propertyId}`;return e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[k(R.priority),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:R.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[F," â€¢ ",R.type]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Due Date:"," ",R.dueDate?new Date(R.dueDate).toLocaleDateString():R.scheduledDate?new Date(R.scheduledDate).toLocaleDateString():"No date"]})]})]}),e.jsx(U,{variant:P(R.status),children:R.status})]})})},R.id)})})}),e.jsx(me,{value:"bookings",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:g.length===0?e.jsx(D,{children:e.jsx(T,{className:"p-8 text-center text-muted-foreground",children:"No bookings found"})}):g.map(R=>{const F=S.get(R.propertyId)||R.property||`Property #${R.propertyId}`,I=R.totalAmount||R.guestTotalPrice||R.platformPayout||R.netHostPayout||0;return e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:R.guestName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(R.checkIn).toLocaleDateString()," ","â†’"," ",new Date(R.checkOut).toLocaleDateString()]}),e.jsx("p",{className:"text-sm font-medium text-green-600",children:s(I)})]}),e.jsx(U,{variant:P(R.status),children:R.status})]})})},R.id)})})})]})]})]}),e.jsx(wm,{open:r,onOpenChange:n}),e.jsx(Hp,{open:a,onOpenChange:i}),e.jsx(Vp,{isOpen:l,onOpenChange:o})]})}const BG=Object.freeze(Object.defineProperty({__proto__:null,default:Cv},Symbol.toStringTag,{value:"Module"})),aa={monthlyEarnings:89e3,thisMonthBookings:12,pendingCommissions:15600,currentRank:1,totalAgents:25,conversionRate:32.5},VG=[],qG=[{id:"quote-generator",title:"Quote Generator",description:"Generate instant quotes for clients",icon:as,color:"bg-blue-600 hover:bg-blue-700",route:"/agent/quote-generator",stats:"4 properties available"},{id:"commissions",title:"Commissions",description:"Track earnings and payouts",icon:Ze,color:"bg-green-600 hover:bg-green-700",route:"/agent/commissions",stats:`à¸¿${aa.monthlyEarnings.toLocaleString()} this month`},{id:"proposals",title:"Proposals",description:"Manage client proposals",icon:dt,color:"bg-purple-600 hover:bg-purple-700",route:"/agent/proposals",stats:"3 pending reviews"},{id:"media-download",title:"Media Library",description:"Download property media",icon:js,color:"bg-orange-600 hover:bg-orange-700",route:"/agent/media-download",stats:"48 files available"},{id:"leaderboard",title:"Leaderboard",description:"View agent rankings",icon:Hn,color:"bg-yellow-600 hover:bg-yellow-700",route:"/agent/leaderboard",stats:`Rank #${aa.currentRank} of ${aa.totalAgents}`}];function aR(){const t=r=>{window.location.href=r},s=r=>{switch(r){case"booking":return e.jsx(Xe,{className:"h-4 w-4 text-blue-600"});case"commission":return e.jsx(Ze,{className:"h-4 w-4 text-green-600"});case"quote":return e.jsx(as,{className:"h-4 w-4 text-purple-600"});case"ranking":return e.jsx(Hn,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(ot,{className:"h-4 w-4 text-gray-600"})}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Retail Agent Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's your performance overview"})]}),e.jsxs(U,{variant:"default",className:"bg-green-100 text-green-800 px-3 py-1",children:["Rank #",aa.currentRank," Agent"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["à¸¿",aa.monthlyEarnings.toLocaleString()]})]}),e.jsx(Ze,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bookings This Month"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:aa.thisMonthBookings})]}),e.jsx(Xe,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Commissions"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["à¸¿",aa.pendingCommissions.toLocaleString()]})]}),e.jsx(ar,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[aa.conversionRate,"%"]})]}),e.jsx(Ot,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Access your most used tools"})]}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:qG.map(r=>e.jsx(D,{className:"hover:shadow-lg transition-all cursor-pointer border-2 hover:border-blue-200",onClick:()=>t(r.route),children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${r.color}`,children:e.jsx(r.icon,{className:"h-6 w-6 text-white"})}),e.jsx(zn,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r.description}),e.jsx(U,{variant:"outline",className:"text-xs",children:r.stats})]})},r.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:VG.map((r,n)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s(r.type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:r.message}),e.jsx("p",{className:"text-xs text-gray-500",children:r.time})]})]}),r.amount&&e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-green-600",children:["à¸¿",r.amount.toLocaleString()]})})]},n))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5"}),"Performance Summary"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"This Month Goal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"à¸¿100,000 target"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"89%"}),e.jsx("p",{className:"text-xs text-gray-500",children:"à¸¿11K to go"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Ranking Position"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Out of ",aa.totalAgents," agents"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["#",aa.currentRank]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Top performer"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Avg. Deal Size"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"à¸¿7,400"}),e.jsx("p",{className:"text-xs text-gray-500",children:"+12% vs last month"})]})]})]})})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Need Help?"})}),e.jsx(T,{children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(M,{variant:"outline",size:"sm",children:"ðŸ“š Agent Training"}),e.jsx(M,{variant:"outline",size:"sm",children:"ðŸ’¬ Support Chat"}),e.jsx(M,{variant:"outline",size:"sm",children:"ðŸ“Š Monthly Report"}),e.jsx(M,{variant:"outline",size:"sm",children:"ðŸŽ¯ Set Goals"})]})})]})]})}const UG=()=>{const[t,s]=v.useState("services");v.useEffect(()=>{const d=new URLSearchParams(window.location.search).get("tab")||"services";s(d);const u=m=>{console.log("Received tab change event:",m.detail.tab),s(m.detail.tab)};return window.addEventListener("changeReferralTab",u),()=>window.removeEventListener("changeReferralTab",u)},[]);const r=c=>{console.log("Changing to tab:",c),s(c)},n=[],a=[],i=[{title:"Guest Management",description:"Complete guest experience from check-in to check-out",features:["24/7 guest support","Check-in/out coordination","Concierge services","Issue resolution"]},{title:"Property Maintenance",description:"Regular upkeep and maintenance of properties",features:["Scheduled cleaning","Pool maintenance","Garden care","Repairs & fixes"]},{title:"Revenue Optimization",description:"Maximize booking income through smart pricing",features:["Dynamic pricing","Multi-platform listing","Revenue analytics","Booking optimization"]},{title:"Financial Management",description:"Complete financial oversight and reporting",features:["Monthly statements","Expense tracking","Tax preparation","Owner payouts"]}],l=()=>{console.log("Downloading management services PDF..."),alert("Management Services PDF would be downloaded here")},o=c=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(c);return e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6 pt-20 lg:pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Referral Agent Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Property Management Services & Referral Tracking"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(U,{variant:"secondary",className:"bg-green-50 text-green-700",children:[e.jsx(ot,{className:"w-3 h-3 mr-1"}),"Real Estate Agent"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs(M,{variant:t==="services"?"default":"outline",onClick:()=>r("services"),className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Service Overview"]}),e.jsxs(M,{variant:t==="properties"?"default":"outline",onClick:()=>r("properties"),className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-4 w-4"}),"Property Browse"]}),e.jsxs(M,{variant:t==="referred"?"default":"outline",onClick:()=>r("referred"),className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-4 w-4"}),"My Referrals"]}),e.jsxs(M,{variant:t==="finances"?"default":"outline",onClick:()=>r("finances"),className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Commission Tracking"]})]}),e.jsxs(xt,{value:t,onValueChange:r,className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(de,{value:"services",children:"Service Overview"}),e.jsx(de,{value:"properties",children:"Property Browse"}),e.jsx(de,{value:"referred",children:"My Referrals"}),e.jsx(de,{value:"finances",children:"Commission Tracking"})]}),e.jsx(me,{value:"services",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Property Management Services"]}),e.jsx(Ee,{children:"Comprehensive villa management services for property owners"})]}),e.jsxs(M,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(js,{className:"w-4 h-4"}),"Download PDF Brochure"]})]})}),e.jsxs(T,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map((c,d)=>e.jsxs(D,{className:"border border-gray-200",children:[e.jsxs($,{className:"pb-3",children:[e.jsx(L,{className:"text-lg",children:c.title}),e.jsx(Ee,{children:c.description})]}),e.jsx(T,{children:e.jsx("ul",{className:"space-y-1 text-sm",children:c.features.map((u,m)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),u]},m))})})]},d))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Referral Commission Structure"}),e.jsxs("p",{className:"text-blue-800 text-sm",children:["As a referral partner, you receive ",e.jsx("strong",{children:"10% of our monthly management commission"})," for every property you refer to our management services. This provides you with ongoing passive income for successful referrals."]})]})]})]})}),e.jsx(me,{value:"properties",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Available Properties Portfolio"]}),e.jsx(Ee,{children:"Browse our managed properties (limited information for referral purposes)"})]}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(c=>e.jsxs(D,{className:"border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs($,{className:"pb-3",children:[e.jsx(L,{className:"text-lg",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(At,{className:"w-4 h-4"}),c.location]})]}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.bedrooms}),e.jsx("div",{className:"text-muted-foreground",children:"Bedrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.bathrooms}),e.jsx("div",{className:"text-muted-foreground",children:"Bathrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.maxGuests}),e.jsx("div",{className:"text-muted-foreground",children:"Guests"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-600",children:c.priceRange}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Nightly rate range"})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.amenities.slice(0,3).map((d,u)=>e.jsx(U,{variant:"outline",className:"text-xs",children:d},u)),c.amenities.length>3&&e.jsxs(U,{variant:"outline",className:"text-xs",children:["+",c.amenities.length-3," more"]})]})})]})]},c.id))})})]})}),e.jsx(me,{value:"referred",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5"}),"My Referred Properties"]}),e.jsx(Ee,{children:"Properties you've referred and their performance metrics"})]}),e.jsx(T,{children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ot,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No referrals yet. Start referring clients to earn 10% monthly commissions!"})]}):e.jsx("div",{className:"space-y-4",children:n.map(c=>e.jsxs(D,{className:"border border-gray-200",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:c.name}),e.jsxs(Ee,{children:["Referred: ",new Date(c.referralDate).toLocaleDateString()," | Client: ",c.client]})]}),e.jsx(U,{variant:c.status==="Active"?"default":"secondary",children:c.status})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-green-600",children:o(c.monthlyRevenue)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-blue-600",children:[c.occupancyRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Occupancy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-purple-600",children:c.totalBookings}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bookings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-yellow-600 flex items-center justify-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3 fill-current"}),c.averageRating]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rating"})]})]})})]},c.id))})})]})}),e.jsxs(me,{value:"finances",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium",children:"Total Monthly Commission"})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o(n.reduce((c,d)=>c+d.commission,0))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["From ",n.length," active referrals"]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium",children:"Average Occupancy"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[n.length>0?Math.round(n.reduce((c,d)=>c+d.occupancyRate,0)/n.length):0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all referrals"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium",children:"Total Properties"})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active referrals"})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Commission Details"]}),e.jsx(Ee,{children:"Detailed breakdown of your 10% referral commissions"})]}),e.jsx(T,{children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ot,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No commission data available yet."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Property"}),e.jsx("th",{className:"text-left py-2",children:"Monthly Revenue"}),e.jsx("th",{className:"text-left py-2",children:"Management Fee (Base)"}),e.jsx("th",{className:"text-left py-2",children:"Your Commission (10%)"}),e.jsx("th",{className:"text-left py-2",children:"Status"})]})}),e.jsx("tbody",{children:n.map(c=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:c.client})]})}),e.jsx("td",{className:"py-3",children:o(c.monthlyRevenue)}),e.jsx("td",{className:"py-3",children:o(c.commission*10)}),e.jsx("td",{className:"py-3 font-semibold text-green-600",children:o(c.commission)}),e.jsx("td",{className:"py-3",children:e.jsx(U,{variant:c.status==="Active"?"default":"secondary",children:c.status})})]},c.id))})]})})})]})]})]})]})},iR=()=>e.jsx(UG,{});function zG({children:t}){const[s,r]=v.useState(!1);return v.useEffect(()=>{r(!0)},[]),s?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})})}function HG(){const{user:t}=On();v.useEffect(()=>{t?.role==="retail-agent"&&(window.location.href="/agent/hub")},[t?.role]);const s=()=>{switch(t?.role){case"staff":return e.jsx(Cv,{});case"retail-agent":return e.jsx(aR,{});case"referral-agent":return e.jsx(iR,{});case"admin":case"portfolio-manager":case"owner":default:return e.jsx(Cv,{})}};return e.jsx(zG,{children:s()})}function lR({property:t,isSelected:s=!1,onSelect:r,onViewDetails:n,onDelete:a,expiryStatus:i,rentcastData:l}){const[o,c]=ee.useState(0),[d,u]=ee.useState(!1),m=z=>{switch(z?.toLowerCase()){case"active":return"bg-emerald-500/90 text-white";case"maintenance":return"bg-amber-500/90 text-white";case"inactive":return"bg-slate-500/90 text-white";default:return"bg-slate-500/90 text-white"}},h=z=>z>=4.8?"text-amber-400":z>=4.5?"text-amber-300":"text-amber-200",x=z=>z>=85?"from-emerald-500 to-teal-500":z>=70?"from-blue-500 to-cyan-500":z>=50?"from-amber-500 to-orange-500":"from-red-500 to-rose-500",f=t.name||"Property",p=t.address||"Unknown Address",g=t.bedrooms??0,y=t.bathrooms??0,b=t.maxGuests??0,j=parseFloat(t.pricePerNight||"0"),w=t.monthlyRevenue??0,N=t.occupancyRate??0,S=t.rating??4.7,O=Array.isArray(t.images)?t.images.filter(z=>!z||typeof z!="string"||z.trim()===""||z.startsWith("file:///")||z.startsWith("file://")||z.match(/^[A-Z]:\\/i)?!1:z.startsWith("http://")||z.startsWith("https://")||z.startsWith("/")).map(z=>z.trim()).filter(z=>z.length>10):[],P=z=>{if(!z)return null;try{const le=new URL(z);return["w","width","h","height","q","quality","resize","fit","thumb"].forEach(H=>le.searchParams.delete(H)),le.toString()}catch{return z}},k=!t.source||t.source==="LOCAL",F=O.length>0?P(O[o]):null,I=z=>{z.stopPropagation(),u(!1),c(le=>le===0?O.length-1:le-1)},W=z=>{z.stopPropagation(),u(!1),c(le=>le===O.length-1?0:le+1)};ee.useEffect(()=>{if(O.length>1){const z=(o+1)%O.length,le=(o-1+O.length)%O.length;[z,le].forEach(Ce=>{const H=new Image;H.src=P(O[Ce])})}},[o,O]);const E=x(N),B=t.googleMapsLink||"";let G="";const J=B.match(/src=(?:\"|')([^\"']+)(?:\"|')/i);J&&J[1]?G=J[1]:B&&(B.startsWith("http")||B.includes("google.com/maps")||B.includes("maps.google"))?G=B:G=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(p)}`;const C=(z,le)=>{try{const Ce=le||t.currency||"THB";return new Intl.NumberFormat("en-US",{style:"currency",currency:Ce}).format(z)}catch{return`${z}`}},V=z=>z?z>=1e3?`${Math.round(z/100)/10}k`:`${z}`:"à¸¿0";return e.jsx("div",{className:"group relative h-full",children:e.jsxs("div",{className:`h-full rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 cursor-pointer transform hover:scale-105 border-2 ${s?"border-emerald-500 ring-2 ing-emerald-300":"border-slate-200 hover:border-emerald-300"}`,children:[e.jsxs("div",{className:"relative h-48 sm:h-56 overflow-hidden bg-slate-100",children:[F?e.jsxs(e.Fragment,{children:[!d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-200 animate-pulse",children:e.jsx("div",{className:"text-slate-400 text-sm",children:"Loading..."})}),e.jsx("img",{src:F,alt:f,className:`w-full h-full object-contain bg-slate-50 transition-transform duration-300 ${d?"opacity-100":"opacity-0"}`,loading:"eager",fetchPriority:"high",decoding:"sync",onLoad:()=>u(!0),onError:z=>{console.warn(`Failed to load image for ${f}:`,F),u(!0),z.currentTarget.style.display="none"}},`${t.id}-${o}`)]}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-50",children:[e.jsx(Jt,{className:"h-16 w-16 text-slate-300 mb-2"}),e.jsx("span",{className:"text-slate-400 text-sm font-medium",children:"No Image"}),k&&e.jsx("span",{className:"text-slate-300 text-xs mt-1",children:"Upload images in property details"})]}),O.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-30 bg-black/70 backdrop-blur-sm px-3 py-1.5 rounded-lg",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",O.length-1," photos"]})}),e.jsx("button",{onClick:I,className:"absolute left-2 top-1/2 -translate-y-1/2 z-30 bg-white/90 hover:bg-white text-slate-800 rounded-full p-2 shadow-lg transition-all duration-200","data-testid":"button-prev-image","aria-label":"Previous image",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:W,className:"absolute right-2 top-1/2 -translate-y-1/2 z-30 bg-white/90 hover:bg-white text-slate-800 rounded-full p-2 shadow-lg transition-all duration-200","data-testid":"button-next-image","aria-label":"Next image",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-30 bg-black/70 backdrop-blur-sm px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-white text-sm font-semibold",children:[o+1,"/",O.length]})})]}),e.jsx("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4 z-20",children:e.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-bold backdrop-blur-md ${m(t.status)}`,children:t.status==="active"?"âœ“ Active":t.status||"Status"})}),e.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 z-20",children:e.jsxs("div",{className:"flex items-center gap-1 bg-black/60 backdrop-blur-md px-3 py-1.5 rounded-full",children:[e.jsx(ps,{className:`h-4 w-4 ${h(S)}`,fill:"currentColor"}),e.jsx("span",{className:"text-white font-semibold text-sm",children:S?S.toFixed(1):"â€”"})]})}),i&&e.jsx("div",{className:"absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-20",children:e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full backdrop-blur-md text-xs font-semibold ${i==="expired"?"bg-red-500/90 text-white":"bg-amber-500/90 text-white"}`,children:[e.jsx(It,{className:"h-3.5 w-3.5"}),i==="expired"?"Expired":"Expiring Soon"]})}),r&&e.jsx("div",{className:"absolute top-3 left-3 z-30 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("input",{type:"checkbox",checked:s,onChange:z=>r(z.target.checked),className:"w-5 h-5 cursor-pointer rounded border-2 border-white bg-emerald-500 checked:bg-emerald-600 shadow-lg",onClick:z=>z.stopPropagation()})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 p-4 sm:p-5 lg:p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-slate-900 truncate mb-1",children:f}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-slate-600",children:[e.jsx(vs,{className:"h-4 w-4 flex-shrink-0 text-emerald-600"}),e.jsx("a",{href:G,target:"_blank",rel:"noopener noreferrer",className:"truncate underline-offset-2 hover:underline text-slate-700",onClick:z=>z.stopPropagation(),title:"Open location in Google Maps",children:p})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-xl p-2.5 text-center border border-blue-200/50",children:[e.jsx(Jt,{className:"h-4 w-4 mx-auto mb-1 text-blue-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-blue-900",children:g}),e.jsx("div",{className:"text-xs text-blue-700",children:"Beds"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100/50 rounded-xl p-2.5 text-center border border-teal-200/50",children:[e.jsx(x4,{className:"h-4 w-4 mx-auto mb-1 text-teal-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-teal-900",children:y}),e.jsx("div",{className:"text-xs text-teal-700",children:"Baths"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-xl p-2.5 text-center border border-emerald-200/50",children:[e.jsx(ot,{className:"h-4 w-4 mx-auto mb-1 text-emerald-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-emerald-900",children:b}),e.jsx("div",{className:"text-xs text-emerald-700",children:"Guests"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-slate-700",children:"Occupancy"}),e.jsxs("span",{className:"text-xs sm:text-sm font-bold text-emerald-700",children:[N,"%"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${E} rounded-full transition-all duration-700 shadow-md`,style:{width:`${Math.min(N,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-100/50 rounded-xl p-3 border border-amber-200/50",children:[e.jsx("div",{className:"text-xs text-amber-700 font-semibold mb-1",children:"Price / Night"}),e.jsx("div",{className:"text-sm sm:text-sm font-bold text-amber-900",children:C(j,t.currency)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-100/50 rounded-xl p-3 border border-emerald-200/50",children:[e.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Monthly"}),e.jsx("div",{className:"text-sm sm:text-xl font-bold text-emerald-900",children:V(w)})]})]}),l&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-purple-600"}),e.jsx("div",{className:"text-xs font-bold text-purple-900",children:"RentCast Market Intelligence"})]}),(l.rentEstimate||l.valueEstimate)&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.rentEstimate&&e.jsxs("div",{className:"bg-white/80 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] text-purple-600 font-semibold mb-0.5",children:"MONTHLY RENT"}),e.jsxs("div",{className:"text-base font-bold text-purple-900",children:["$",l.rentEstimate.estimatedRent?.toLocaleString()||"N/A"]}),l.rentEstimate.rentRangeLow&&l.rentEstimate.rentRangeHigh&&e.jsxs("div",{className:"text-[9px] text-purple-700",children:["$",l.rentEstimate.rentRangeLow.toLocaleString()," ","- $",l.rentEstimate.rentRangeHigh.toLocaleString()]}),l.rentEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-[9px] text-purple-600 mt-0.5",children:[l.rentEstimate.comparablesCount," comps"]})]}),l.valueEstimate&&e.jsxs("div",{className:"bg-white/80 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] text-indigo-600 font-semibold mb-0.5",children:"PROPERTY VALUE"}),e.jsxs("div",{className:"text-base font-bold text-indigo-900",children:["$",Math.round((l.valueEstimate.estimatedValue||0)/1e3),"k"]}),l.valueEstimate.valueRangeLow&&l.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-[9px] text-indigo-700",children:["$",Math.round(l.valueEstimate.valueRangeLow/1e3),"k - $",Math.round(l.valueEstimate.valueRangeHigh/1e3),"k"]}),l.valueEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-[9px] text-indigo-600 mt-0.5",children:[l.valueEstimate.comparablesCount," comps"]})]})]}),l.propertyDetails&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] font-semibold text-purple-700 mb-1.5",children:"PROPERTY DATA"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[10px]",children:[l.propertyDetails.squareFootage&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Sq Ft:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.squareFootage.toLocaleString()})]}),l.propertyDetails.yearBuilt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Built:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.yearBuilt})]}),l.propertyDetails.lotSize&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Lot:"}),e.jsxs("span",{className:"font-medium text-purple-900",children:[l.propertyDetails.lotSize.toLocaleString()," ","sf"]})]}),l.propertyDetails.propertyType&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.propertyType})]}),l.propertyDetails.lastSalePrice&&e.jsxs("div",{className:"flex justify-between col-span-2",children:[e.jsx("span",{className:"text-purple-600",children:"Last Sale:"}),e.jsxs("span",{className:"font-medium text-purple-900",children:["$",l.propertyDetails.lastSalePrice.toLocaleString(),l.propertyDetails.lastSaleDate&&` (${new Date(l.propertyDetails.lastSaleDate).getFullYear()})`]})]})]})]}),l.marketData&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-700 mb-1.5",children:"MARKET STATS"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[10px]",children:[l.marketData.medianRent&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Median Rent:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",l.marketData.medianRent.toLocaleString()]})]}),l.marketData.averageRent&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Avg Rent:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",l.marketData.averageRent.toLocaleString()]})]}),l.marketData.medianPrice&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Median Price:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",Math.round(l.marketData.medianPrice/1e3),"k"]})]}),l.marketData.averagePrice&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Avg Price:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",Math.round(l.marketData.averagePrice/1e3),"k"]})]}),l.marketData.inventoryCount&&e.jsxs("div",{className:"flex justify-between col-span-2",children:[e.jsx("span",{className:"text-indigo-600",children:"Market Inventory:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:[l.marketData.inventoryCount.toLocaleString()," ","listings"]})]})]})]}),l.nearbyRentals?.count>0&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsxs("div",{className:"text-[10px] font-semibold text-purple-700 mb-1.5",children:["NEARBY RENTALS (",l.nearbyRentals.count,")"]}),e.jsx("div",{className:"space-y-1.5",children:l.nearbyRentals.listings.slice(0,2).map((z,le)=>e.jsxs("div",{className:"text-[9px] bg-purple-50 rounded p-1.5",children:[e.jsx("div",{className:"font-medium text-purple-900 truncate",children:z.address}),e.jsxs("div",{className:"flex justify-between text-purple-700",children:[e.jsxs("span",{children:["$",z.price.toLocaleString(),"/mo"]}),e.jsxs("span",{children:[z.bedrooms,"bd ",z.bathrooms,"ba"]})]})]},le))})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-slate-200",children:[e.jsx("button",{onClick:n,className:"flex-1 px-3 py-2.5 sm:py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-semibold text-xs sm:text-sm rounded-lg shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:"View Details"}),a&&e.jsx("button",{onClick:a,className:"px-3 py-2.5 sm:py-3 bg-red-50 hover:bg-red-100 text-red-600 font-semibold text-xs sm:text-sm rounded-lg border border-red-200 shadow-sm hover:shadow-md transition-all duration-200",children:"Delete"})]})]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors duration-300 rounded-2xl pointer-events-none"})]})})}function KG(){const[t,s]=v.useState(!1),[r,n]=v.useState(new Set),[a,i]=v.useState(""),[,l]=or(),o=pt(),{toast:c}=st(),{data:d=[],isLoading:u}=xe({queryKey:Tt.properties.all()}),m=Array.isArray(d)?d:[],h=Te({mutationFn:async j=>{await Ne("DELETE",`/api/properties/${j}`)},onSuccess:()=>{$h(o),c({title:"Success",description:"Property deleted successfully"}),n(new Set)},onError:()=>{c({title:"Error",description:"Failed to delete property",variant:"destructive"})}}),x=Te({mutationFn:async j=>{await Promise.all(j.map(w=>Ne("DELETE",`/api/properties/${w}`)))},onSuccess:()=>{$h(o),c({title:"Success",description:"Selected properties deleted"}),n(new Set)},onError:()=>{c({title:"Error",description:"Bulk delete failed",variant:"destructive"})}}),f=j=>{window.confirm("Are you sure you want to delete this property?")&&h.mutate(j)},p=()=>{r.size!==0&&window.confirm(`Delete ${r.size} selected properties?`)&&x.mutate(Array.from(r))},g=(j,w)=>{n(N=>{const S=new Set(N);return w?S.add(j):S.delete(j),S})},y=j=>{l(`/property/${j}`)},b=v.useMemo(()=>{const j=a.trim().toLowerCase();return j?m.filter(w=>w?[w.name,w.title,w.location,w.address,String(w.id)].join(" ").toLowerCase().includes(j):!1):m},[m,a]);return e.jsxs(e.Fragment,{children:[e.jsx(zi,{title:"Properties",action:e.jsxs(M,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Property"]})}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("label",{htmlFor:"property-search",className:"sr-only",children:"Search properties"}),e.jsxs("div",{className:"relative w-full sm:w-[420px]",children:[e.jsx("input",{id:"property-search",value:a,onChange:j=>i(j.target.value),placeholder:"Search by name, location or id...",className:"w-full rounded-lg border border-slate-200 px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-400"}),a&&e.jsx("button",{onClick:()=>i(""),"aria-label":"Clear search",className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700",children:"âœ•"})]}),r.size>0&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-600",children:[r.size," selected"]}),e.jsxs(M,{variant:"destructive",size:"sm",onClick:p,className:"flex items-center gap-2",children:[e.jsx(ir,{className:"w-4 h-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm text-slate-600 hidden sm:block",children:u?"Loadingâ€¦":`${b.length} of ${m.length} properties`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{size:"sm",variant:"ghost",onClick:()=>{const j=b.map(w=>w?.id).filter(Boolean);n(new Set(j))},children:[e.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Select All"]}),e.jsxs(M,{size:"sm",onClick:()=>s(!0),className:"hidden sm:inline-flex bg-primary hover:bg-primary/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add"]})]})]})]}),u?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((j,w)=>e.jsx("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-white to-slate-50 p-4 h-56 animate-pulse"},w))}):b.length===0?e.jsxs("div",{className:"border border-dashed border-slate-200 rounded-lg py-16 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-3xl",children:"ðŸ "}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"No properties found"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xl text-center",children:"Try adding your first property or clear the search/filter to show results."}),e.jsx("div",{className:"mt-4",children:e.jsxs(M,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Your First Property"]})})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:b.filter((j,w,N)=>j&&j.id&&N.findIndex(S=>S.id===j.id)===w).map(j=>e.jsx(lR,{property:j,isSelected:r.has(j.id),onSelect:w=>g(j.id,w),onViewDetails:()=>y(j.id),onDelete:()=>f(j.id)},`property-${j.id}`))})]})}),e.jsx(Hp,{open:t,onOpenChange:s})]})}function GG({bookings:t}){const[s,r]=v.useState(new Date),n=new Date(s.getFullYear(),s.getMonth(),1);new Date(s.getFullYear(),s.getMonth()+1,0);const a=new Date(n);a.setDate(a.getDate()-a.getDay());const i=[],l=new Date(a);for(let x=0;x<42;x++)i.push(new Date(l)),l.setDate(l.getDate()+1);const o=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=()=>{r(new Date(s.getFullYear(),s.getMonth()-1,1))},u=()=>{r(new Date(s.getFullYear(),s.getMonth()+1,1))},m=x=>t.some(f=>{const p=new Date(f.checkIn),g=new Date(f.checkOut);return x>=p&&x<=g}),h=x=>x.getMonth()===s.getMonth();return e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{children:[o[s.getMonth()]," ",s.getFullYear()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:d,children:e.jsx(Ka,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:u,children:e.jsx(zn,{className:"w-4 h-4"})})]})]})}),e.jsxs(T,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:c.map(x=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:x},x))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:i.map((x,f)=>{const p=h(x),g=m(x);return e.jsxs("div",{className:`aspect-square p-1 text-center text-sm border border-gray-100 relative ${p?"text-gray-900":"text-gray-400"} ${g?"bg-primary text-white":"hover:bg-gray-50"}`,children:[e.jsx("span",{children:x.getDate()}),g&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})})]},f)})}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-primary rounded"}),e.jsx("span",{children:"Booked"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-200 rounded"}),e.jsx("span",{children:"Available"})]})]})]})]})}var WG="Separator",yS="horizontal",QG=["horizontal","vertical"],oR=v.forwardRef((t,s)=>{const{decorative:r,orientation:n=yS,...a}=t,i=YG(n)?n:yS,o=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Je.div,{"data-orientation":i,...o,...a,ref:s})});oR.displayName=WG;function YG(t){return QG.includes(t)}var cR=oR;const Jr=v.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...n},a)=>e.jsx(cR,{ref:a,decorative:r,orientation:s,className:Be("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Jr.displayName=cR.displayName;function dR({open:t,onOpenChange:s,bookingId:r}){const[n,a]=v.useState(""),[i,l]=v.useState(""),o=pt(),{toast:c}=st(),{formatWithConversion:d}=Rr(),{data:u,isLoading:m}=xe({queryKey:["/api/bookings",r],queryFn:async()=>{const P=await fetch(`/api/bookings/${r}`);if(!P.ok)throw new Error("Failed to fetch booking");return P.json()},enabled:!!r&&t}),{data:h}=xe({queryKey:["/api/properties",u?.propertyId],queryFn:async()=>{const P=await fetch(`/api/properties/${u?.propertyId}`);if(!P.ok)throw new Error("Failed to fetch property");return P.json()},enabled:!!u?.propertyId&&t}),x=Te({mutationFn:async P=>await Ne("PATCH",`/api/bookings/${r}`,{status:P}),onSuccess:()=>{Rl(o),a(""),c({title:"Success",description:"Booking status updated successfully"})},onError:P=>{c({title:"Error",description:P.message||"Failed to update booking status",variant:"destructive"})}}),f=Te({mutationFn:async P=>await Ne("PATCH",`/api/bookings/${r}`,{amountPaid:P.toString(),paymentStatus:P>=parseFloat(u?.totalAmount||"0")?"paid":"partial"}),onSuccess:()=>{Rl(o),sb(o),l(""),c({title:"Success",description:"Payment updated successfully"})},onError:P=>{c({title:"Error",description:P.message||"Failed to update payment",variant:"destructive"})}}),p=()=>{if(!(!n||n===u?.status)){if(n.toLowerCase()==="checked-out"){const P=parseFloat(u?.amountDue||"0");if(P>0){c({title:"Payment Required",description:`Please clear all outstanding payments (${j(P)}) before checking out the guest.`,variant:"destructive"});return}}x.mutate(n)}},g=(P=!1)=>{if(!u)return;let k;if(P)k=parseFloat(u.totalAmount||"0");else{if(k=parseFloat(i),isNaN(k)||k<=0){c({title:"Validation Error",description:"Please enter a valid payment amount",variant:"destructive"});return}const R=parseFloat(u.amountPaid||"0"),F=parseFloat(u.totalAmount||"0"),I=R+k;if(I>F){c({title:"Validation Error",description:"Payment amount cannot exceed the total due",variant:"destructive"});return}k=I}f.mutate(k)},y=()=>{window.open(`/api/bookings/${r}/invoice`,"_blank")},b=P=>{switch(P?.toLowerCase()){case"paid":return"bg-green-100 text-green-800 border-green-200";case"partial":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"pending":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=P=>d(P),w=P=>{switch(P?.toLowerCase()){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"checked-in":return"bg-blue-100 text-blue-800 border-blue-200";case"checked-out":return"bg-purple-100 text-purple-800 border-purple-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=P=>{switch(P?.toLowerCase()){case"confirmed":return e.jsx(Ie,{className:"w-4 h-4"});case"pending":return e.jsx(tt,{className:"w-4 h-4"});case"cancelled":return e.jsx(yr,{className:"w-4 h-4"});default:return e.jsx(tt,{className:"w-4 h-4"})}},S=P=>P?new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",O=()=>{if(!u?.checkIn||!u?.checkOut)return 0;const P=new Date(u.checkIn),k=new Date(u.checkOut);return Math.ceil((k.getTime()-P.getTime())/(1e3*60*60*24))};return r?e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsx(Ye,{className:"text-2xl",children:"Booking Details"})}),m?e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading booking details..."}):u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{className:`${w(u.status)} flex items-center gap-1 text-sm px-3 py-1`,children:[N(u.status),u.status]}),(u.status?.toLowerCase()==="pending"||u.status?.toLowerCase()==="confirmed")&&(u.paymentStatus==="paid"||u.paymentStatus==="partial")&&e.jsxs(U,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1 text-sm px-3 py-1",children:[e.jsx(Er,{className:"w-3 h-3"}),u.paymentStatus==="paid"?"Pre-Paid":"Partial Pre-Paid"]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Booking ID: #",u.id]})]}),(u.status?.toLowerCase()==="pending"||u.status?.toLowerCase()==="confirmed")&&(u.paymentStatus==="paid"||u.paymentStatus==="partial")&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(It,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Payment Received - Awaiting Check-in"}),e.jsxs("p",{className:"text-sm text-blue-700",children:[u.paymentStatus==="paid"?`Full payment of ${j(u.amountPaid||0)} has been received.`:`Partial payment of ${j(u.amountPaid||0)} received. ${j(u.amountDue||0)} still due.`," Guest has not checked in yet."]})]})]}),e.jsx(Jr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(zt,{className:"w-5 h-5"}),"Guest Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium",children:u.guestName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Guests"}),e.jsxs("p",{className:"font-medium",children:[u.guests||1," guest",u.guests>1?"s":""]})]}),u.guestEmail&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:u.guestEmail})]}),u.guestPhone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:u.guestPhone})]})]})]}),e.jsx(Jr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),"Property Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:h?.name||"Unknown Property"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h?.address||"N/A"}),h?.bedrooms&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Fi,{className:"w-4 h-4"}),e.jsxs("span",{children:[h.bedrooms," Bedroom",h.bedrooms>1?"s":""]})]})]})]}),e.jsx(Jr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Booking Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check-in"}),e.jsx("p",{className:"font-medium",children:S(u.checkIn)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check-out"}),e.jsx("p",{className:"font-medium",children:S(u.checkOut)})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[O()," night",O()>1?"s":""]})]}),e.jsx(Jr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Financial Information"]}),u.paymentStatus&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(U,{className:`${b(u.paymentStatus)} flex items-center gap-1 px-3 py-1`,children:[e.jsx(Er,{className:"w-3 h-3"}),u.paymentStatus.charAt(0).toUpperCase()+u.paymentStatus.slice(1)]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),e.jsx("p",{className:"text-xl font-bold",children:j(u.totalAmount||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Paid"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:j(u.amountPaid||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Due"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:j(u.amountDue||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform"}),e.jsx("p",{className:"font-medium",children:u.bookingPlatform||"Direct"})]})]}),u.status?.toLowerCase()==="checked-in"&&parseFloat(u.amountDue||"0")>0&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(It,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Outstanding Payment"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["Guest has checked in with ",j(u.amountDue||0)," still due"]})]})]}),parseFloat(u.amountDue||"0")>0&&e.jsxs("div",{className:"space-y-3 p-4 bg-slate-50 rounded-lg border",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Record Payment"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{type:"number",placeholder:"Enter amount",value:i,onChange:P=>l(P.target.value),step:"0.01",min:"0",max:u.amountDue,className:"flex-1","data-testid":"input-payment-amount"}),e.jsxs(M,{onClick:()=>g(!1),disabled:!i||f.isPending,size:"sm","data-testid":"button-add-payment",children:[e.jsx(Er,{className:"w-4 h-4 mr-1"}),f.isPending?"Processing...":"Add Payment"]})]}),e.jsxs(M,{onClick:()=>g(!0),disabled:f.isPending,className:"w-full",variant:"default","data-testid":"button-mark-fully-paid",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),f.isPending?"Processing...":"Mark as Fully Paid"]})]}),parseFloat(u.amountDue||"0")===0&&u.paymentStatus==="paid"&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Ie,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Payment Completed"})]})]}),u.specialRequests&&e.jsxs(e.Fragment,{children:[e.jsx(Jr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Special Requests"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.specialRequests})]})]}),e.jsx(Jr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:"Update Status"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ae,{value:n||u.status,onValueChange:a,children:[e.jsx(re,{className:"flex-1",children:e.jsx(ie,{placeholder:"Select status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"confirmed",children:"Confirmed"}),e.jsx(A,{value:"checked-in",children:"Checked-in"}),e.jsx(A,{value:"checked-out",children:"Checked-out"}),e.jsx(A,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(M,{onClick:p,disabled:!n||n===u.status||x.isPending,children:x.isPending?"Updating...":"Update"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(M,{variant:"outline",className:"flex-1",onClick:()=>s(!1),children:"Close"}),e.jsxs(M,{className:"flex-1",onClick:y,children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Generate Invoice"]})]})]}):e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Booking not found"})]})}):null}function Uc({fallbackRoute:t="/",forceRoute:s=!1,variant:r="ghost",position:n="top-left",className:a="",children:i}){const[,l]=or(),o=()=>{if(s){l(t);return}window.history.length>1?window.history.back():l(t)},c=n==="floating"?"fixed bottom-4 left-4 z-50 shadow-lg":"";return e.jsxs(M,{onClick:o,variant:r,size:"sm",className:`${c} ${a}`,children:[e.jsx(ti,{className:"h-4 w-4 mr-2"}),i||"Back"]})}function Ub({role:t,...s}){const r=n=>{switch(n){case"admin":return"/dashboard";case"portfolio-manager":return"/dashboard";case"staff":return"/staff-dashboard";case"owner":return"/owner-dashboard";case"retail-agent":return"/retail-agent";case"referral-agent":return"/referral-agent";case"guest":return"/guest-portal";default:return"/"}};return e.jsx(Uc,{fallbackRoute:r(t),...s})}function XG(){const[t,s]=v.useState("bookings"),[r,n]=v.useState("list"),[a,i]=v.useState(""),[l,o]=v.useState("all"),[c,d]=v.useState("all"),[u,m]=v.useState("all"),[h,x]=v.useState("all"),[f,p]=v.useState(!1),[g,y]=v.useState(null),[b,j]=v.useState(!1),w=pt(),N=KF(),O=AL()>0,P=v.useMemo(()=>new URLSearchParams(N).get("propertyId"),[N]),{data:k=[],isLoading:R}=xe({queryKey:P?Tt.bookings.withSource(P):Tt.bookings.all(),staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:F=[],isLoading:I}=xe({queryKey:["/api/properties"],staleTime:0});v.useEffect(()=>{const z=setInterval(()=>{try{w.invalidateQueries(Tt.bookings.all())}catch{w.invalidateQueries({queryKey:["/api/bookings"]})}w.invalidateQueries({queryKey:["/api/properties"]})},3e4);return()=>clearInterval(z)},[w]);const W=Array.isArray(k)?k:[],E=Array.isArray(F)?F:[],B=P?E.find(z=>z.id===parseInt(P)):null,G=z=>{y(z),j(!0)},J=z=>{switch(z){case"Confirmed":return"bg-green-100 text-green-800 border-green-200";case"Pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},C=(P?W:W.filter(z=>{const le=E.find(X=>X.id===z.propertyId),Ce=le?.name||"",H=le?.address||"",_=l==="all"||z.propertyId===parseInt(l),se=a===""||Ce.toLowerCase().includes(a.toLowerCase())||z.guestName&&z.guestName.toLowerCase().includes(a.toLowerCase()),te=c==="all"||H.toLowerCase().includes(c.toLowerCase()),we=u==="all",ve=h==="all"||z.status?.toLowerCase()===h.toLowerCase();return _&&se&&te&&we&&ve})).sort((z,le)=>{const Ce=z.createdAt?new Date(z.createdAt).getTime():0;return(le.createdAt?new Date(le.createdAt).getTime():0)-Ce}),V=E.map(z=>({...z,bookings:C.filter(le=>le.propertyId===z.id)})).filter(z=>z.bookings.length>0||(a===""||z.name.toLowerCase().includes(a.toLowerCase()))&&(c==="all"||z.address&&z.address.toLowerCase().includes(c.toLowerCase())));return e.jsxs("div",{className:"relative container mx-auto min-h-screen bg-background",children:[O&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 bg-white/90 dark:bg-slate-800/90 p-5 rounded-lg shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-t-transparent animate-spin border-primary"}),e.jsx("div",{className:"text-base font-medium",children:"Saving changesâ€¦"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Please wait â€” updating data."})]})}),e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Xe,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary flex-shrink-0"}),e.jsx("div",{className:"min-w-0",children:P&&B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2 sm:mb-4",children:e.jsx(Uc,{fallbackRoute:P?`/bookings?propertyId=${P}`:"/bookings",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Property"})})}),e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold truncate",children:["Bookings - ",B.name]}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Viewing all bookings for this property"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Unified Calendar & Bookings"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage all bookings, calendars, and property schedules"})]})})]}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 flex-wrap sm:flex-nowrap",children:[P&&e.jsxs(M,{variant:"outline",onClick:()=>window.location.href="/bookings","data-testid":"button-view-all-bookings",className:"text-xs sm:text-sm px-2 sm:px-4",children:[e.jsx("span",{className:"hidden sm:inline",children:"View All Bookings"}),e.jsx("span",{className:"sm:hidden",children:"All"})]}),e.jsxs(M,{className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-4",onClick:()=>p(!0),"data-testid":"button-new-booking",children:[e.jsx(ut,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"New Booking"}),e.jsx("span",{className:"sm:hidden",children:"New"})]}),e.jsxs(M,{variant:"outline",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-2 sm:px-4",onClick:()=>s("live"),"data-testid":"button-live-calendar",children:[e.jsx(Bt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Live Calendar"}),e.jsx("span",{className:"sm:hidden",children:"Live"})]})]})]}),!P&&e.jsxs(D,{className:"mb-4 sm:mb-6",children:[e.jsx($,{className:"p-4 sm:p-6 pb-2 sm:pb-4",children:e.jsxs(L,{className:"text-base sm:text-lg flex items-center gap-2",children:[e.jsx(Dn,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Filters & Search"]})}),e.jsx(T,{className:"p-4 sm:p-6 pt-2 sm:pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(Q,{type:"text",placeholder:"Search property or guest...",value:a,onChange:z=>i(z.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(ae,{value:l,onValueChange:o,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),E.map(z=>e.jsx(A,{value:String(z.id),children:z.name},z.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Area"}),e.jsxs(ae,{value:c,onValueChange:d,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Areas"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Areas"}),e.jsx(A,{value:"Bophut",children:"Bophut"}),e.jsx(A,{value:"Lamai",children:"Lamai"}),e.jsx(A,{value:"Chaweng",children:"Chaweng"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Manager"}),e.jsxs(ae,{value:u,onValueChange:m,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Managers"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Managers"}),e.jsx(A,{value:"Dean",children:"Dean"}),e.jsx(A,{value:"Jane",children:"Jane"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(ae,{value:h,onValueChange:x,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"Confirmed",children:"Confirmed"}),e.jsx(A,{value:"Pending",children:"Pending"}),e.jsx(A,{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"View Mode"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:r==="list"?"default":"outline",size:"sm",onClick:()=>n("list"),className:"flex-1",children:e.jsx(x1,{className:"w-4 h-4"})}),e.jsx(M,{variant:r==="grid"?"default":"outline",size:"sm",onClick:()=>n("grid"),className:"flex-1",children:e.jsx(b4,{className:"w-4 h-4"})})]})]})]})})]}),e.jsxs(xt,{value:t,onValueChange:s,children:[e.jsxs(ht,{className:"grid w-full grid-cols-3 h-auto",children:[e.jsxs(de,{value:"bookings",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-1 sm:px-3 py-2",children:[e.jsx(x1,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Booking List"}),e.jsx("span",{className:"sm:hidden",children:"List"})]}),e.jsxs(de,{value:"calendar",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-1 sm:px-3 py-2",children:[e.jsx(Xe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Multi-Property Calendar"}),e.jsx("span",{className:"sm:hidden",children:"Calendar"})]}),e.jsxs(de,{value:"live",className:"gap-1 sm:gap-2 text-xs sm:text-sm px-1 sm:px-3 py-2",children:[e.jsx(tt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Live Calendar"}),e.jsx("span",{className:"sm:hidden",children:"Live"})]})]}),e.jsxs(me,{value:"bookings",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Individual Bookings (",C.length,")"]}),e.jsxs(U,{variant:"outline",children:["Total Revenue: à¸¿",C.reduce((z,le)=>z+(parseFloat(le.totalAmount)||0),0).toLocaleString()]})]}),R?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading bookings..."})}):C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ot,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Bookings Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||l!=="all"||c!=="all"||h!=="all"?"Try adjusting your filters":"Create your first booking to get started"}),e.jsxs(M,{onClick:()=>p(!0),children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"New Booking"]})]}):r==="list"?e.jsx("div",{className:"space-y-3",children:C.map(z=>{const le=E.find(se=>se.id===z.propertyId),Ce=z.checkIn?new Date(z.checkIn).toLocaleDateString():"N/A",H=z.checkOut?new Date(z.checkOut).toLocaleDateString():"N/A",_=z.checkIn&&z.checkOut?Math.ceil((new Date(z.checkOut).getTime()-new Date(z.checkIn).getTime())/(1e3*60*60*24)):0;return e.jsx(D,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>G(z.id),"data-testid":`booking-card-${z.id}`,children:e.jsx(T,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ot,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-medium text-sm sm:text-base truncate",children:z.guestName||"Guest"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:le?.name||"Property"})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate max-w-[150px]",children:le?.address||"N/A"})]}),le?.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fi,{className:"w-4 h-4"}),e.jsxs("span",{children:[le.bedrooms," BR"]})]})]}),e.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center justify-between sm:justify-end gap-2 sm:gap-4",children:[e.jsxs("div",{className:"text-right order-2 sm:order-1",children:[e.jsxs("p",{className:"font-medium text-sm sm:text-base",children:["à¸¿",parseFloat(z.totalAmount||0).toLocaleString()]}),_>0&&e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[_," nights"]})]}),e.jsxs("div",{className:"text-left sm:text-right order-1 sm:order-2",children:[e.jsxs("p",{className:"text-xs sm:text-sm",children:[Ce," â†’ ",H]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 sm:justify-end mt-1",children:[e.jsx(U,{className:`text-xs ${J(z.status)}`,children:z.status}),(z.status?.toLowerCase()==="pending"||z.status?.toLowerCase()==="confirmed")&&(z.paymentStatus==="paid"||z.paymentStatus==="partial")&&e.jsxs(U,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1 text-xs",children:[e.jsx(Er,{className:"w-3 h-3"}),z.paymentStatus==="paid"?"Pre-Paid":"Partial"]})]})]})]})]})})},z.id)})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(z=>{const le=E.find(_=>_.id===z.propertyId),Ce=z.checkIn?new Date(z.checkIn).toLocaleDateString():"N/A",H=z.checkOut?new Date(z.checkOut).toLocaleDateString():"N/A";return e.jsxs(D,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>G(z.id),"data-testid":`booking-card-grid-${z.id}`,children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsx(L,{className:"text-lg",children:z.guestName||"Guest"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:J(z.status),children:z.status}),(z.status?.toLowerCase()==="pending"||z.status?.toLowerCase()==="confirmed")&&(z.paymentStatus==="paid"||z.paymentStatus==="partial")&&e.jsxs(U,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1",children:[e.jsx(Er,{className:"w-3 h-3"}),z.paymentStatus==="paid"?"Pre-Paid":"Partial"]})]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:le?.name||"Property"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[le?.address||"N/A",le?.bedrooms&&` â€¢ ${le.bedrooms} BR`]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Check-in:"}),e.jsx("span",{className:"text-sm font-medium",children:Ce})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Check-out:"}),e.jsx("span",{className:"text-sm font-medium",children:H})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Amount:"}),e.jsxs("span",{className:"text-sm font-medium",children:["à¸¿",parseFloat(z.totalAmount||0).toLocaleString()]})]})]})})]},z.id)})})]}),e.jsxs(me,{value:"calendar",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Multi-Property Calendar (",V.length," ","properties)"]}),e.jsxs(U,{variant:"outline",children:["Total Bookings:"," ",V.reduce((z,le)=>z+le.bookings.length,0)]})]}),I?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading properties..."})}):V.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-muted-foreground",children:a||c!=="all"?"Try adjusting your filters":"No properties available"})]}):e.jsx("div",{className:"space-y-4",children:V.map(z=>e.jsxs(D,{className:"hover:shadow-md transition-shadow",children:[e.jsxs($,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{className:"text-xl",children:z.name}),e.jsxs(U,{variant:"secondary",children:[z.bookings.length," Booking",z.bookings.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsxs("span",{children:["Address: ",z.address||"N/A"]})]}),z.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fi,{className:"w-4 h-4"}),e.jsxs("span",{children:[z.bedrooms," Bedrooms"]})]}),z.bathrooms&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:[z.bathrooms," Bathrooms"]})})]})]}),e.jsx(T,{children:z.bookings.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No bookings for this property"}):e.jsx("div",{className:"space-y-3",children:z.bookings.map(le=>{const Ce=le.checkIn?new Date(le.checkIn).toLocaleDateString():"N/A",H=le.checkOut?new Date(le.checkOut).toLocaleDateString():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ot,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:le.guestName||"Guest"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Ce," â†’ ",H]})]})]}),e.jsx(U,{className:J(le.status),children:le.status})]},le.id)})})})]},z.id))})]}),e.jsxs(me,{value:"live",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Live Booking Calendar"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{onClick:()=>p(!0),className:"gap-2",children:[e.jsx(ut,{className:"w-4 h-4"}),"New Booking"]})})]}),R?e.jsx(D,{children:e.jsx(T,{className:"p-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar..."})})}):e.jsx(GG,{bookings:W.map(z=>({...z,checkIn:z.checkIn||z.checkInDate,checkOut:z.checkOut||z.checkOutDate}))}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{children:["Upcoming Bookings (",C.length,")"]})}),e.jsx(T,{children:C.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No bookings to display"}):e.jsx("div",{className:"space-y-3",children:C.slice(0,10).map(z=>{const le=E.find(_=>_.id===z.propertyId),Ce=z.checkIn?new Date(z.checkIn).toLocaleDateString():"N/A",H=z.checkOut?new Date(z.checkOut).toLocaleDateString():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ot,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:z.guestName||"Guest"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:le?.name||"Property"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[Ce," â†’ ",H]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["à¸¿",parseFloat(z.totalAmount||0).toLocaleString()]})]}),e.jsx(U,{className:J(z.status),children:z.status})]},z.id)})})})]})]})]}),e.jsx(D,{className:"mt-6",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Showing"," ",t==="bookings"?C.length:V.length,t==="bookings"?" bookings":" properties"]}),e.jsx("span",{children:t==="bookings"?`Total Revenue: à¸¿${C.reduce((z,le)=>z+(parseFloat(le.totalAmount)||0),0).toLocaleString()}`:`Total Properties: ${V.length}`})]})})})]}),e.jsx(wm,{open:f,onOpenChange:p,propertyId:P}),e.jsx(dR,{open:b,onOpenChange:j,bookingId:g})]})}function ZG(){const[t,s]=v.useState(""),[r,n]=v.useState("all"),[a,i]=v.useState("all"),[l,o]=v.useState("all"),[c,d]=v.useState("all"),[u,m]=v.useState("all"),[h,x]=v.useState("all"),[f,p]=v.useState("checkIn"),[g,y]=v.useState("desc"),[b,j]=v.useState(!1),[w,N]=v.useState(null),[S,O]=v.useState(!1),{toast:P}=st(),{formatWithConversion:k,displayCurrency:R}=Rr(),{data:F=[],isLoading:I,refetch:W}=xe({queryKey:Tt.bookings.all(),staleTime:0,refetchOnMount:!0}),{data:E=[]}=xe({queryKey:Tt.properties.all(),staleTime:3e4}),B=Array.isArray(F)?F:[],G=Array.isArray(E)?E:[],J=ve=>ve?G.find(ce=>ce.id===ve)?.name||`Property #${ve}`:"Unassigned",C=ve=>{const X={confirmed:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:Ie},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",icon:tt},"checked-in":{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:Jt},"checked-out":{color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",icon:Ie},cancelled:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:yr}},ce=X[ve?.toLowerCase()]||X.pending,Y=ce.icon;return e.jsxs(U,{className:`${ce.color} gap-1`,children:[e.jsx(Y,{className:"h-3 w-3"}),ve?.charAt(0).toUpperCase()+ve?.slice(1)]})},V=ve=>{const X={paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",pending:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",partial:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",overdue:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},ce=X[ve?.toLowerCase()||"pending"]||X.pending;return e.jsx(U,{className:ce,children:ve?.charAt(0).toUpperCase()+(ve?.slice(1)||"Pending")})},z=ve=>ve==="HOSTAWAY"?e.jsx(U,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900 dark:text-purple-200",children:"Hostaway"}):e.jsx(U,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900 dark:text-blue-200",children:"Local"}),le=v.useMemo(()=>{let ve=[...B];if(t){const X=t.toLowerCase();ve=ve.filter(ce=>ce.guestName?.toLowerCase().includes(X)||ce.guestEmail?.toLowerCase().includes(X)||ce.bookingReference?.toLowerCase().includes(X)||J(ce.propertyId).toLowerCase().includes(X))}if(r!=="all"&&(ve=ve.filter(X=>X.status?.toLowerCase()===r.toLowerCase())),a!=="all"&&(ve=ve.filter(X=>X.paymentStatus?.toLowerCase()===a.toLowerCase())),l!=="all"&&(ve=ve.filter(X=>X.propertyId?.toString()===l)),c!=="all"&&(ve=ve.filter(X=>X.source===c)),u!=="all"){const X=new Date;X.setHours(0,0,0,0),ve=ve.filter(ce=>{const Y=Lt(ce.checkIn),he=Lt(ce.checkOut);switch(u){case"today":return rg(Y)||rg(he)||Oi(Y,X)&&Cl(he,X);case"upcoming":return Cl(Y,X);case"past":return Oi(he,X);case"this-week":const Fe=rr(X,7);return(Cl(Y,X)||rg(Y))&&Oi(Y,Fe);default:return!0}})}return h!=="all"&&(ve=ve.filter(X=>X.status?.toLowerCase()===h.toLowerCase())),ve.sort((X,ce)=>{let Y,he;switch(f){case"checkIn":Y=new Date(X.checkIn).getTime(),he=new Date(ce.checkIn).getTime();break;case"checkOut":Y=new Date(X.checkOut).getTime(),he=new Date(ce.checkOut).getTime();break;case"guestName":Y=X.guestName?.toLowerCase()||"",he=ce.guestName?.toLowerCase()||"";break;case"totalAmount":Y=parseFloat(X.totalAmount||"0"),he=parseFloat(ce.totalAmount||"0");break;case"createdAt":Y=new Date(X.createdAt||0).getTime(),he=new Date(ce.createdAt||0).getTime();break;default:Y=X.id,he=ce.id}return g==="asc"?Y>he?1:-1:Y<he?1:-1}),ve},[B,t,r,a,l,c,u,h,f,g]),Ce=v.useMemo(()=>{const ve=B.length,X=B.filter(rt=>rt.status?.toLowerCase()==="confirmed").length,ce=B.filter(rt=>rt.status?.toLowerCase()==="pending").length,Y=B.filter(rt=>rt.status?.toLowerCase()==="checked-in").length,he=B.reduce((rt,gt)=>rt+parseFloat(gt.totalAmount||"0"),0),Fe=B.filter(rt=>rt.paymentStatus?.toLowerCase()==="paid").reduce((rt,gt)=>rt+parseFloat(gt.totalAmount||"0"),0),Ve=B.filter(rt=>rt.paymentStatus?.toLowerCase()!=="paid").reduce((rt,gt)=>rt+parseFloat(gt.amountDue||gt.totalAmount||"0"),0);return{totalBookings:ve,confirmedBookings:X,pendingBookings:ce,checkedInBookings:Y,totalRevenue:he,paidRevenue:Fe,pendingPayments:Ve}},[B]),H=async()=>{await W(),Rl(wt),P({title:"Refreshed",description:"Booking data has been synchronized"})},_=ve=>{f===ve?y(X=>X==="asc"?"desc":"asc"):(p(ve),y("desc"))},se=ve=>{N(ve),O(!0)},te=ve=>{try{return et(Lt(ve),"MMM dd, yyyy")}catch{return ve}},we=(ve,X)=>{try{const ce=Lt(ve),Y=Lt(X);return Math.ceil((Y.getTime()-ce.getTime())/(1e3*60*60*24))}catch{return 0}};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Uc,{}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(V0,{className:"h-8 w-8 text-primary"}),"Bookings Central"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage and track all property bookings across the system"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",onClick:H,disabled:I,"data-testid":"btn-refresh-bookings",children:[e.jsx(Ut,{className:`h-4 w-4 mr-2 ${I?"animate-spin":""}`}),"Sync"]}),e.jsxs(M,{onClick:()=>j(!0),"data-testid":"btn-create-booking",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"New Booking"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(D,{className:"bg-white dark:bg-gray-800",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bookings"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:Ce.totalBookings})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"h-6 w-6 text-blue-600 dark:text-blue-300"})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsxs(U,{variant:"outline",className:"text-green-600",children:[Ce.confirmedBookings," confirmed"]}),e.jsxs(U,{variant:"outline",className:"text-yellow-600",children:[Ce.pendingBookings," pending"]})]})]})}),e.jsx(D,{className:"bg-white dark:bg-gray-800",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Currently Checked-In"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:Ce.checkedInBookings})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:e.jsx(Jt,{className:"h-6 w-6 text-green-600 dark:text-green-300"})})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Active guests on property"})]})}),e.jsx(D,{className:"bg-white dark:bg-gray-800",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Revenue"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:k(Ce.totalRevenue)})]}),e.jsx("div",{className:"h-12 w-12 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:e.jsx(Ot,{className:"h-6 w-6 text-purple-600 dark:text-purple-300"})})]}),e.jsxs("p",{className:"mt-2 text-sm text-green-600",children:[k(Ce.paidRevenue)," collected"]})]})}),e.jsx(D,{className:"bg-white dark:bg-gray-800",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Payments"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:k(Ce.pendingPayments)})]}),e.jsx("div",{className:"h-12 w-12 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center",children:e.jsx(Er,{className:"h-6 w-6 text-orange-600 dark:text-orange-300"})})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Outstanding balance"})]})})]}),e.jsxs(D,{className:"bg-white dark:bg-gray-800",children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 min-w-[300px]",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search by guest, email, property...",value:t,onChange:ve=>s(ve.target.value),className:"pl-10","data-testid":"input-search-bookings"})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ae,{value:l,onValueChange:o,children:[e.jsxs(re,{className:"w-[180px]","data-testid":"select-property-filter",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),e.jsx(ie,{placeholder:"All Properties"})]}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),G.map(ve=>e.jsx(A,{value:ve.id.toString(),children:ve.name},ve.id))]})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"w-[150px]","data-testid":"select-status-filter",children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"confirmed",children:"Confirmed"}),e.jsx(A,{value:"checked-in",children:"Checked In"}),e.jsx(A,{value:"checked-out",children:"Checked Out"}),e.jsx(A,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{className:"w-[150px]","data-testid":"select-payment-filter",children:e.jsx(ie,{placeholder:"All Payments"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Payments"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"partial",children:"Partial"})]})]}),e.jsxs(ae,{value:c,onValueChange:d,children:[e.jsx(re,{className:"w-[140px]","data-testid":"select-source-filter",children:e.jsx(ie,{placeholder:"All Sources"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Sources"}),e.jsx(A,{value:"LOCAL",children:"Local"}),e.jsx(A,{value:"HOSTAWAY",children:"Hostaway"})]})]}),e.jsxs(ae,{value:u,onValueChange:m,children:[e.jsxs(re,{className:"w-[150px]","data-testid":"select-date-filter",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),e.jsx(ie,{placeholder:"All Dates"})]}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Dates"}),e.jsx(A,{value:"today",children:"Today"}),e.jsx(A,{value:"this-week",children:"This Week"}),e.jsx(A,{value:"upcoming",children:"Upcoming"}),e.jsx(A,{value:"past",children:"Past"})]})]})]})]})}),e.jsx(T,{children:e.jsxs(xt,{value:h,onValueChange:x,className:"w-full",children:[e.jsxs(ht,{className:"mb-4",children:[e.jsxs(de,{value:"all","data-testid":"tab-all",children:["All (",B.length,")"]}),e.jsxs(de,{value:"confirmed","data-testid":"tab-confirmed",children:["Confirmed (",Ce.confirmedBookings,")"]}),e.jsxs(de,{value:"pending","data-testid":"tab-pending",children:["Pending (",Ce.pendingBookings,")"]}),e.jsxs(de,{value:"checked-in","data-testid":"tab-checked-in",children:["Checked In (",Ce.checkedInBookings,")"]})]}),e.jsxs(me,{value:h,children:[I?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Ut,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-gray-500",children:"Loading bookings..."})]}):le.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Xe,{className:"h-16 w-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No bookings found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:t||r!=="all"||a!=="all"||l!=="all"?"Try adjusting your filters":"Create your first booking to get started"}),e.jsxs(M,{onClick:()=>j(!0),className:"mt-4","data-testid":"btn-create-first-booking",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Create Booking"]})]}):e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{className:"bg-gray-50 dark:bg-gray-800",children:[e.jsx(Oe,{className:"font-semibold",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>_("guestName"),className:"gap-1 -ml-3",children:["Guest",e.jsx(pl,{className:"h-3 w-3"})]})}),e.jsx(Oe,{className:"font-semibold",children:"Property"}),e.jsx(Oe,{className:"font-semibold",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>_("checkIn"),className:"gap-1 -ml-3",children:["Check-In",e.jsx(pl,{className:"h-3 w-3"})]})}),e.jsx(Oe,{className:"font-semibold",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>_("checkOut"),className:"gap-1 -ml-3",children:["Check-Out",e.jsx(pl,{className:"h-3 w-3"})]})}),e.jsx(Oe,{className:"font-semibold text-center",children:"Nights"}),e.jsx(Oe,{className:"font-semibold text-center",children:"Guests"}),e.jsx(Oe,{className:"font-semibold",children:"Status"}),e.jsx(Oe,{className:"font-semibold",children:"Payment"}),e.jsx(Oe,{className:"font-semibold text-right",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>_("totalAmount"),className:"gap-1",children:["Amount",e.jsx(pl,{className:"h-3 w-3"})]})}),e.jsx(Oe,{className:"font-semibold",children:"Source"}),e.jsx(Oe,{className:"font-semibold text-center",children:"Actions"})]})}),e.jsx(zs,{children:le.map(ve=>e.jsxs(Nt,{className:"hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",onClick:()=>se(ve.id),"data-testid":`booking-row-${ve.id}`,children:[e.jsxs(De,{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:ve.guestName}),ve.guestEmail&&e.jsx("div",{className:"text-sm text-gray-500",children:ve.guestEmail})]}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:J(ve.propertyId)})]})}),e.jsx(De,{children:e.jsx("div",{className:"text-sm",children:te(ve.checkIn)})}),e.jsx(De,{children:e.jsx("div",{className:"text-sm",children:te(ve.checkOut)})}),e.jsx(De,{className:"text-center",children:e.jsx(U,{variant:"outline",children:we(ve.checkIn,ve.checkOut)})}),e.jsx(De,{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ot,{className:"h-4 w-4 text-gray-400"}),ve.guests]})}),e.jsx(De,{children:C(ve.status)}),e.jsx(De,{children:V(ve.paymentStatus)}),e.jsx(De,{className:"text-right font-medium",children:k(parseFloat(ve.totalAmount||"0"))}),e.jsx(De,{children:z(ve.source)}),e.jsx(De,{className:"text-center",children:e.jsx(M,{variant:"ghost",size:"sm",onClick:X=>{X.stopPropagation(),se(ve.id)},"data-testid":`btn-view-booking-${ve.id}`,children:e.jsx(Bt,{className:"h-4 w-4"})})})]},ve.id))})]})}),!I&&le.length>0&&e.jsxs("div",{className:"flex items-center justify-between mt-4 px-2",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",le.length," of ",B.length," bookings"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Currency: ",R]})]})]})]})})]}),e.jsx(wm,{open:b,onOpenChange:j}),e.jsx(dR,{open:S,onOpenChange:O,bookingId:w})]})})}var zb="Radio",[JG,uR]=er(zb),[eW,tW]=JG(zb),mR=v.forwardRef((t,s)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:l,value:o="on",onCheck:c,form:d,...u}=t,[m,h]=v.useState(null),x=ft(s,g=>h(g)),f=v.useRef(!1),p=m?d||!!m.closest("form"):!0;return e.jsxs(eW,{scope:r,checked:a,disabled:l,children:[e.jsx(Je.button,{type:"button",role:"radio","aria-checked":a,"data-state":fR(a),"data-disabled":l?"":void 0,disabled:l,value:o,...u,ref:x,onClick:$e(t.onClick,g=>{a||c?.(),p&&(f.current=g.isPropagationStopped(),f.current||g.stopPropagation())})}),p&&e.jsx(pR,{control:m,bubbles:!f.current,name:n,value:o,checked:a,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});mR.displayName=zb;var hR="RadioIndicator",xR=v.forwardRef((t,s)=>{const{__scopeRadio:r,forceMount:n,...a}=t,i=tW(hR,r);return e.jsx(cr,{present:n||i.checked,children:e.jsx(Je.span,{"data-state":fR(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});xR.displayName=hR;var sW="RadioBubbleInput",pR=v.forwardRef(({__scopeRadio:t,control:s,checked:r,bubbles:n=!0,...a},i)=>{const l=v.useRef(null),o=ft(l,i),c=mm(r),d=om(s);return v.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&x){const f=new Event("click",{bubbles:n});x.call(u,r),u.dispatchEvent(f)}},[c,r,n]),e.jsx(Je.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pR.displayName=sW;function fR(t){return t?"checked":"unchecked"}var rW=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Kp="RadioGroup",[nW,VAe]=er(Kp,[qc,uR]),gR=qc(),jR=uR(),[aW,iW]=nW(Kp),vR=v.forwardRef((t,s)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:l=!1,disabled:o=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...h}=t,x=gR(r),f=Xl(d),[p,g]=Hr({prop:i,defaultProp:a??null,onChange:m,caller:Kp});return e.jsx(aW,{scope:r,name:n,required:l,disabled:o,value:p,onValueChange:g,children:e.jsx(mb,{asChild:!0,...x,orientation:c,dir:f,loop:u,children:e.jsx(Je.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":o?"":void 0,dir:f,...h,ref:s})})})});vR.displayName=Kp;var yR="RadioGroupItem",bR=v.forwardRef((t,s)=>{const{__scopeRadioGroup:r,disabled:n,...a}=t,i=iW(yR,r),l=i.disabled||n,o=gR(r),c=jR(r),d=v.useRef(null),u=ft(s,d),m=i.value===a.value,h=v.useRef(!1);return v.useEffect(()=>{const x=p=>{rW.includes(p.key)&&(h.current=!0)},f=()=>h.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",f)}},[]),e.jsx(hb,{asChild:!0,...o,focusable:!l,active:m,children:e.jsx(mR,{disabled:l,required:i.required,checked:m,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:$e(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:$e(a.onFocus,()=>{h.current&&d.current?.click()})})})});bR.displayName=yR;var lW="RadioGroupIndicator",NR=v.forwardRef((t,s)=>{const{__scopeRadioGroup:r,...n}=t,a=jR(r);return e.jsx(xR,{...a,...n,ref:s})});NR.displayName=lW;var wR=vR,SR=bR,oW=NR;const CR=v.forwardRef(({className:t,...s},r)=>e.jsx(wR,{className:Be("grid gap-2",t),...s,ref:r}));CR.displayName=wR.displayName;const kR=v.forwardRef(({className:t,...s},r)=>e.jsx(SR,{ref:r,className:Be("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(oW,{className:"flex items-center justify-center",children:e.jsx(g4,{className:"h-2.5 w-2.5 fill-current text-current"})})}));kR.displayName=SR.displayName;const bS=[{value:"auto-bill-guest",label:"Auto-Bill Guest",icon:Er,description:"Charge automatically to guest bill",color:"text-blue-600"},{value:"auto-bill-owner",label:"Auto-Bill Owner",icon:zt,description:"Charge to property owner account",color:"text-green-600"},{value:"owner-gift",label:"Owner Gift",icon:Qd,description:"Complimentary from property owner",color:"text-purple-600"},{value:"company-gift",label:"Company Gift",icon:bs,description:"Complimentary from management company",color:"text-orange-600"}],NS={transportation:em,massage:nm,chef:am,cleaning:Jt,activities:Xe,concierge:zt},cW=Yt({serviceId:Pe().min(1,"Please select a service"),propertyId:Pe().min(1,"Please select a property"),guestName:Pe().min(1,"Guest name is required"),guestEmail:Pe().email("Valid email required").optional().or(Pd("")),guestPhone:Pe().optional(),scheduledDate:Pe().min(1,"Date and time required"),duration:Pe().optional(),quantity:Pe().default("1"),billingType:Rs(["auto-bill-guest","auto-bill-owner","owner-gift","company-gift"]),price:Pe().optional(),dateDue:Pe().optional(),giftReason:Pe().optional(),notes:Pe().optional(),internalNotes:Pe().optional()}).refine(t=>t.billingType==="owner-gift"||t.billingType==="company-gift"?!0:t.price&&t.price.trim().length>0,{message:"Price is required",path:["price"]});function dW({open:t,onOpenChange:s,selectedPropertyId:r,selectedServiceId:n,bookerRole:a="manager"}){const{toast:i}=st(),l=pt(),[o,c]=v.useState(null),[d,u]=v.useState(0),m=Wt({resolver:ts(cW),defaultValues:{serviceId:n?.toString()||"",propertyId:r?.toString()||"",guestName:"",guestEmail:"",guestPhone:"",scheduledDate:"",duration:"",quantity:"1",billingType:"auto-bill-guest",price:"",dateDue:"",giftReason:"",notes:"",internalNotes:""}}),{data:h}=xe({queryKey:["/api/addon-services"]}),{data:x}=xe({queryKey:["/api/properties"]}),f=m.watch("serviceId"),p=m.watch("duration"),g=m.watch("quantity"),y=m.watch("billingType"),b=m.watch("price");v.useEffect(()=>{t&&n&&m.setValue("serviceId",n.toString()),t&&r&&m.setValue("propertyId",r.toString())},[t,n,r,m]),v.useEffect(()=>{if(h&&f){const R=h.find(F=>F.id.toString()===f);if(R){c(R);let F=0;const I=parseInt(g)||1;if(R.pricingModel==="fixed")F=parseFloat(R.basePrice||"0")*I;else if(R.pricingModel==="variable"&&p){const W=parseInt(p)||0,E=parseFloat(R.hourlyRate||"0"),B=parseFloat(R.minimumCharge||"0");F=Math.max(W/60*E*I,B)}else R.pricingModel==="complimentary"&&(F=0);u(F)}}},[h,f,p,g]);const j=Te({mutationFn:async R=>{const F={"auto-bill-guest":"auto_guest","auto-bill-owner":"auto_owner","owner-gift":"owner_gift","company-gift":"company_gift"},I={service_id:parseInt(R.serviceId),property_id:parseInt(R.propertyId),guest_name:R.guestName,guest_email:R.guestEmail||null,guest_phone:R.guestPhone||null,billing_type:F[R.billingType],price:R.price||(d>0?d.toString():null),date_due:R.dateDue||null,scheduled_date:new Date(R.scheduledDate).toISOString()};return await Ne("POST","/api/service-bookings",I)},onSuccess:()=>{i({title:"Service Booked Successfully",description:`${o?.name} has been scheduled for ${m.getValues("guestName")}`}),l.invalidateQueries({queryKey:["/api/service-bookings"]}),l.invalidateQueries({queryKey:["/api/addon-bookings"]}),l.invalidateQueries({queryKey:["/api/finances"]}),m.reset(),s(!1)},onError:R=>{i({title:"Booking Failed",description:R.message,variant:"destructive"})}}),w=R=>{if(console.log("âœ… Form submitted with data:",R),(R.billingType==="owner-gift"||R.billingType==="company-gift")&&!R.giftReason){m.setError("giftReason",{message:"Gift reason is required for complimentary services"}),i({title:"Missing Information",description:"Please provide a reason for the complimentary service",variant:"destructive"});return}j.mutate(R)},{data:N}=xe({queryKey:["/api/system-settings"]}),S=R=>{const F=N?.defaultCurrency||"AUD";return new Intl.NumberFormat("en-AU",{style:"currency",currency:F}).format(R)},O=b&&parseFloat(b)>0?parseFloat(b):d,P=y==="owner-gift"||y==="company-gift",k=bS.find(R=>R.value===y);return e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Book Add-on Service"]}),e.jsx(Ct,{children:"Schedule an add-on service with flexible pricing and billing options"})]}),e.jsx(Qt,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(w),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(ge,{control:m.control,name:"serviceId",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Service"}),e.jsxs(ae,{onValueChange:R.onChange,value:R.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select a service"})})}),e.jsx(ne,{children:h?.map(F=>{const I=NS[F.category]||zt;return e.jsx(A,{value:F.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:F.name}),e.jsx(U,{variant:"outline",className:"ml-auto",children:F.pricingModel})]})},F.id)})})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:m.control,name:"propertyId",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property"}),e.jsxs(ae,{onValueChange:R.onChange,value:R.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})})}),e.jsx(ne,{children:x?.map(F=>e.jsx(A,{value:F.id.toString(),children:F.name},F.id))})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ge,{control:m.control,name:"guestName",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Name"}),e.jsx(fe,{children:e.jsx(Q,{...R,placeholder:"Guest full name"})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ge,{control:m.control,name:"guestEmail",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Email (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{...R,type:"email",placeholder:"guest@example.com"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:m.control,name:"guestPhone",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Phone (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{...R,placeholder:"+61 400 000 000"})}),e.jsx(be,{})]})})]})]})]}),o&&e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[(()=>{const R=NS[o.category]||zt;return e.jsx(R,{className:"w-5 h-5"})})(),o.name,e.jsx(U,{variant:"outline",children:o.pricingModel})]}),e.jsx(Ee,{children:o.description})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ge,{control:m.control,name:"scheduledDate",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{className:"text-red-600",children:"Date & Time *"}),e.jsx(fe,{children:e.jsx(Q,{type:"datetime-local",value:R.value,onChange:R.onChange,onBlur:R.onBlur,name:R.name,ref:R.ref,required:!0})}),e.jsx(be,{})]})}),o.pricingModel==="variable"&&e.jsx(ge,{control:m.control,name:"duration",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Duration (minutes)"}),e.jsx(fe,{children:e.jsx(Q,{...R,type:"number",placeholder:"60"})}),e.jsxs(Zt,{children:["Rate: ",S(o.hourlyRate||0),"/hour"]}),e.jsx(be,{})]})}),e.jsx(ge,{control:m.control,name:"quantity",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Quantity"}),e.jsx(fe,{children:e.jsx(Q,{...R,type:"number",min:"1"})}),e.jsx(be,{})]})})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-5 h-5"}),"Billing & Payment"]})}),e.jsxs(T,{children:[e.jsx(ge,{control:m.control,name:"billingType",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"How should this be billed?"}),e.jsx(fe,{children:e.jsx(CR,{onValueChange:R.onChange,value:R.value,className:"grid grid-cols-2 gap-4",children:bS.map(F=>{const I=F.icon;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kR,{value:F.value,id:F.value}),e.jsxs(Z,{htmlFor:F.value,className:"flex items-center gap-2 cursor-pointer flex-1 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(I,{className:`w-4 h-4 ${F.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:F.label}),e.jsx("div",{className:"text-xs text-gray-500",children:F.description})]})]})]},F.value)})})}),e.jsx(be,{})]})}),P&&e.jsx(ge,{control:m.control,name:"giftReason",render:({field:R})=>e.jsxs(pe,{className:"mt-4",children:[e.jsx(je,{children:"Gift Reason"}),e.jsx(fe,{children:e.jsx(Q,{...R,placeholder:"e.g., Welcome gift, Apology for inconvenience"})}),e.jsx(Zt,{children:"Explain why this service is being provided complimentary"}),e.jsx(be,{})]})}),!P&&e.jsx(ge,{control:m.control,name:"price",render:({field:R})=>e.jsxs(pe,{className:"mt-4",children:[e.jsx(je,{children:"Price"}),e.jsx(fe,{children:e.jsx(Q,{...R,type:"number",step:"0.01",placeholder:d>0?S(d):"0.00"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:m.control,name:"dateDue",render:({field:R})=>e.jsxs(pe,{className:"mt-4",children:[e.jsx(je,{children:"Payment Due Date (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{...R,type:"date",min:new Date().toISOString().split("T")[0]})}),e.jsx(Zt,{children:"When should this payment be due?"}),e.jsx(be,{})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Price:"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:P?"Complimentary":S(O)})]}),k&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600",children:[e.jsx(k.icon,{className:`w-4 h-4 ${k.color}`}),e.jsx("span",{children:k.description})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:m.control,name:"notes",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Notes"}),e.jsx(fe,{children:e.jsx(ct,{...R,placeholder:"Special requests or instructions"})}),e.jsx(Zt,{children:"Visible to guest and staff"}),e.jsx(be,{})]})}),(a==="manager"||a==="staff")&&e.jsx(ge,{control:m.control,name:"internalNotes",render:({field:R})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Internal Notes"}),e.jsx(fe,{children:e.jsx(ct,{...R,placeholder:"Staff-only notes"})}),e.jsx(Zt,{children:"Only visible to staff and management"}),e.jsx(be,{})]})})]}),e.jsxs(Zs,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:j.isPending,onClick:R=>{console.log("ðŸ”˜ Book Service button clicked"),console.log("Form values:",m.getValues()),console.log("Form errors:",m.formState.errors),console.log("Form is valid:",m.formState.isValid)},children:j.isPending?"Booking...":"Book Service"})]})]})})]})})}function uW({open:t,onClose:s}){const{toast:r}=st(),[n,a]=v.useState(null),[i,l]=v.useState(""),[o,c]=v.useState(""),[d,u]=v.useState(""),[m,h]=v.useState(""),[x,f]=v.useState(""),[p,g]=v.useState(""),[y,b]=v.useState(""),[j,w]=v.useState("owner"),[N,S]=v.useState(!1),{data:O=[]}=xe({queryKey:["/api/properties"]}),P=["application/pdf","image/jpeg","image/jpg","image/png"],k=I=>{const W=I.target.files?.[0];if(W){if(!P.includes(W.type)){r({title:"Invalid file type",description:"Only PDF, JPG, and PNG files are allowed.",variant:"destructive"}),I.target.value="";return}if(W.size>10*1024*1024){r({title:"File too large",description:"File size must be less than 10MB.",variant:"destructive"}),I.target.value="";return}a(W)}},R=async I=>{if(I.preventDefault(),!n){r({title:"Missing file",description:"Please attach a receipt (PDF, JPG, or PNG).",variant:"destructive"});return}if(!i){r({title:"Missing property",description:"Please select a property.",variant:"destructive"});return}if(!o){r({title:"Missing bill type",description:"Please select a bill type.",variant:"destructive"});return}if(!m){r({title:"Missing due date",description:"Please select a due date.",variant:"destructive"});return}if(!y){r({title:"Missing billing month",description:"Please select a billing month.",variant:"destructive"});return}S(!0);try{const W=new FormData;W.append("receipt",n),W.append("property_id",i),W.append("bill_type",o),W.append("amount",d||"0"),W.append("due_date",m),W.append("provider",x||""),W.append("account_number",p||""),W.append("billing_month",y),W.append("responsible_party",j);const E=await fetch("/api/utility-bills",{method:"POST",body:W,credentials:"include"}),B=await E.json();if(!E.ok)throw new Error(B.error||"Upload failed");r({title:"Upload successful",description:"Utility bill has been uploaded successfully."}),wt.invalidateQueries({queryKey:["/api/utility-bills"]}),F()}catch(W){console.error("Upload error:",W),r({title:"Upload failed",description:W.message||"An error occurred while uploading the bill.",variant:"destructive"})}finally{S(!1)}},F=()=>{a(null),l(""),c(""),u(""),h(""),f(""),g(""),b(""),w("owner"),s()};return e.jsx(Ge,{open:t,onOpenChange:F,children:e.jsxs(We,{className:"sm:max-w-[500px] max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Upload Utility Bill"})}),e.jsxs("form",{onSubmit:R,className:"space-y-4 overflow-y-auto px-1",style:{maxHeight:"calc(90vh - 120px)"},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"property",children:"Property *"}),e.jsxs(ae,{value:i,onValueChange:l,required:!0,children:[e.jsx(re,{id:"property","data-testid":"select-property",children:e.jsx(ie,{placeholder:"Select property"})}),e.jsx(ne,{children:O.map(I=>e.jsx(A,{value:I.id.toString(),children:I.name},I.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"billType",children:"Bill Type *"}),e.jsxs(ae,{value:o,onValueChange:c,required:!0,children:[e.jsx(re,{id:"billType","data-testid":"select-bill-type",children:e.jsx(ie,{placeholder:"Select type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"electricity",children:"Electricity"}),e.jsx(A,{value:"water",children:"Water"}),e.jsx(A,{value:"gas",children:"Gas"}),e.jsx(A,{value:"internet",children:"Internet"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"amount",children:"Amount"}),e.jsx(Q,{id:"amount",type:"number",step:"0.01",min:"0",value:d,onChange:I=>u(I.target.value),placeholder:"0.00","data-testid":"input-amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"dueDate",children:"Due Date *"}),e.jsx(Q,{id:"dueDate",type:"date",value:m,onChange:I=>h(I.target.value),required:!0,"data-testid":"input-due-date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"billingMonth",children:"Billing Month * (YYYY-MM)"}),e.jsx(Q,{id:"billingMonth",type:"month",value:y,onChange:I=>b(I.target.value),required:!0,"data-testid":"input-billing-month"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"provider",children:"Provider"}),e.jsx(Q,{id:"provider",type:"text",value:x,onChange:I=>f(I.target.value),placeholder:"e.g. Energy Australia","data-testid":"input-provider"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"accountNumber",children:"Account Number"}),e.jsx(Q,{id:"accountNumber",type:"text",value:p,onChange:I=>g(I.target.value),placeholder:"Optional","data-testid":"input-account-number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"responsibleParty",children:"Responsible Party"}),e.jsxs(ae,{value:j,onValueChange:w,children:[e.jsx(re,{id:"responsibleParty","data-testid":"select-responsible-party",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"company",children:"Company"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"receipt",children:"Receipt * (PDF, JPG, PNG - max 10MB)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{id:"receipt",type:"file",accept:".pdf,image/jpeg,image/jpg,image/png",onChange:k,required:!0,"data-testid":"input-receipt-file",className:"flex-1"}),n&&e.jsx(M,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(null),"data-testid":"button-remove-file",children:e.jsx(Es,{className:"w-4 h-4"})})]}),n&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",n.name," (",(n.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:F,disabled:N,"data-testid":"button-cancel-upload",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:N,"data-testid":"button-submit-upload",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ca,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})]})})}function mW(){const[t,s]=v.useState("addon-services"),[r,n]=v.useState(!1),[a,i]=v.useState(),[l,o]=v.useState(),[c,d]=v.useState(!1),[u,m]=v.useState("all"),[h,x]=v.useState("all"),[f,p]=v.useState("all"),[g,y]=v.useState(""),[b,j]=v.useState(""),{toast:w}=st(),{data:N=[]}=xe({queryKey:["/api/addon-services"]}),{data:S=[]}=xe({queryKey:["/api/addon-bookings"]}),{data:O}=xe({queryKey:["/api/service-bookings"]}),P=Array.isArray(O?.bookings)?O.bookings:[],{data:k=[]}=xe({queryKey:["/api/utility-bills"]}),{data:R=[]}=xe({queryKey:["/api/properties"]}),{data:F}=xe({queryKey:["/api/system-settings"]}),I=Te({mutationFn:async({billId:C,status:V})=>await Ne("PATCH",`/api/utility-bills/${C}`,{status:V}),onSuccess:async()=>{await wt.refetchQueries({queryKey:["/api/utility-bills"]}),w({title:"Status Updated",description:"Bill status has been updated successfully."})},onError:C=>{w({title:"Update Failed",description:C.message||"Failed to update bill status.",variant:"destructive"})}}),W=Te({mutationFn:async C=>await Ne("DELETE",`/api/utility-bills/${C}`),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility-bills"]}),w({title:"Bill Deleted",description:"Utility bill has been deleted successfully."})},onError:C=>{w({title:"Delete Failed",description:C.message||"Failed to delete bill.",variant:"destructive"})}}),E=v.useMemo(()=>k.filter(C=>{if(u!=="all"&&C.propertyId!==parseInt(u)||h!=="all"&&C.type!==h||f!=="all"&&C.status!==f)return!1;const V=new Date(C.dueDate);return!(g&&new Date(g)>V||b&&new Date(b)<V)}),[k,u,h,f,g,b]),B=C=>{if(C==null)return"$0.00";const V=C/100,z=F?.defaultCurrency||"AUD";return new Intl.NumberFormat("en-AU",{style:"currency",currency:z}).format(V)},G=C=>{switch(C){case"chef":return e.jsx(am,{className:"w-5 h-5"});case"massage":return e.jsx(Wo,{className:"w-5 h-5"});case"transportation":return e.jsx(em,{className:"w-5 h-5"});case"activities":return e.jsx(vs,{className:"w-5 h-5"});default:return e.jsx(ot,{className:"w-5 h-5"})}},J=C=>{switch(C){case"active":return"default";case"pending":return"secondary";case"confirmed":return"default";case"completed":return"outline";case"paid":return"outline";case"overdue":return"destructive";default:return"secondary"}};return e.jsxs("div",{className:"min-h-screen flex bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(zi,{title:"Services & Utilities",action:e.jsxs(M,{className:"bg-primary hover:bg-primary/90",onClick:()=>{i(void 0),n(!0)},"data-testid":"button-add-service",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Service"]})}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsx(M,{variant:t==="addon-services"?"default":"ghost",size:"sm",onClick:()=>s("addon-services"),children:"Add-on Services"}),e.jsx(M,{variant:t==="service-bookings"?"default":"ghost",size:"sm",onClick:()=>s("service-bookings"),children:"Service Bookings"}),e.jsx(M,{variant:t==="utility-bills"?"default":"ghost",size:"sm",onClick:()=>s("utility-bills"),children:"Utility Bills"})]}),t==="addon-services"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(C=>e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:G(C.category)}),e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:C.name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:C.category})]})]}),e.jsx(U,{variant:C.isActive?"default":"secondary",children:C.isActive?"Active":"Inactive"})]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:C.description}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{}),e.jsx(U,{variant:"outline",className:"capitalize",children:C.pricingModel})]}),e.jsxs(M,{onClick:()=>{i(C.id),n(!0)},className:"w-full",size:"sm",disabled:!C.isActive,children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Book Service"]})]})]},C.id))}),N.length===0&&e.jsx(D,{children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx(ot,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Add-on Services"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start by adding services like cleaning, massage, or chef services."}),e.jsxs(M,{className:"bg-primary hover:bg-primary/90",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add First Service"]})]})})]}),t==="service-bookings"&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Service Bookings"})}),e.jsx(T,{children:P.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No service bookings found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Booking ID"}),e.jsx(Oe,{children:"Service"}),e.jsx(Oe,{children:"Guest"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Scheduled Date"}),e.jsx(Oe,{children:"Price"}),e.jsx(Oe,{children:"Billing Type"}),e.jsx(Oe,{children:"Due Date"})]})}),e.jsx(zs,{children:P.map(C=>e.jsxs(Nt,{children:[e.jsx(De,{className:"font-mono text-xs",children:C.bookingIdRef||"N/A"}),e.jsx(De,{children:C.serviceName||"Unknown"}),e.jsx(De,{children:C.guestName}),e.jsx(De,{children:C.propertyName||`Property ${C.propertyId}`}),e.jsx(De,{children:new Date(C.scheduledDate).toLocaleDateString()}),e.jsx(De,{children:C.priceCents?B(C.priceCents):e.jsx(U,{variant:"secondary",children:"Complimentary"})}),e.jsx(De,{className:"capitalize",children:C.billingType?.replace("_"," ")||"N/A"}),e.jsx(De,{children:C.dateDue?new Date(C.dateDue).toLocaleDateString():"-"})]},C.id))})]})})})]}),t==="utility-bills"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(D,{children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Property"}),e.jsxs(ae,{value:u,onValueChange:m,children:[e.jsx(re,{"data-testid":"select-filter-property",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),R.map(C=>e.jsx(A,{value:C.id.toString(),children:C.name},C.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Type"}),e.jsxs(ae,{value:h,onValueChange:x,children:[e.jsx(re,{"data-testid":"select-filter-type",children:e.jsx(ie,{placeholder:"All Types"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"electricity",children:"Electricity"}),e.jsx(A,{value:"water",children:"Water"}),e.jsx(A,{value:"gas",children:"Gas"}),e.jsx(A,{value:"internet",children:"Internet"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Status"}),e.jsxs(ae,{value:f,onValueChange:p,children:[e.jsx(re,{"data-testid":"select-filter-status",children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"uploaded",children:"Uploaded"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date From"}),e.jsx(Q,{type:"date",value:g,onChange:C=>y(C.target.value),"data-testid":"input-filter-date-from"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date To"}),e.jsx(Q,{type:"date",value:b,onChange:C=>j(C.target.value),"data-testid":"input-filter-date-to"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",E.length," of"," ",k.length," bills"]}),e.jsxs(M,{variant:"default",onClick:()=>d(!0),"data-testid":"button-upload-receipt",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Upload Receipt"]})]})]})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Utility Bills & Recurring Expenses"})}),e.jsx(T,{children:E.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:k.length===0?"No utility bills found":"No bills match the current filters"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Provider"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Amount"}),e.jsx(Oe,{children:"Due Date"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:E.map(C=>e.jsxs(Nt,{children:[e.jsx(De,{className:"capitalize",children:C.type}),e.jsx(De,{children:C.provider||"-"}),e.jsx(De,{children:C.propertyName||`Property ${C.propertyId}`}),e.jsx(De,{children:C.amount?`$${Number(C.amount).toFixed(2)}`:"-"}),e.jsx(De,{children:e.jsx("span",{className:`${new Date(C.dueDate)<new Date&&C.status!=="paid"?"text-red-600 font-medium":"text-gray-900"}`,children:new Date(C.dueDate).toLocaleDateString()})}),e.jsx(De,{children:e.jsxs(ae,{value:C.status,onValueChange:V=>{I.mutate({billId:C.id,status:V})},disabled:I.isPending,children:[e.jsx(re,{className:"w-[120px]","data-testid":`select-status-${C.id}`,children:e.jsx(ie,{children:e.jsx(U,{variant:J(C.status),className:"cursor-pointer",children:C.status})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"uploaded",children:"Uploaded"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex space-x-2",children:[C.receiptUrl&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>window.open(C.receiptUrl,"_blank"),"data-testid":`button-view-receipt-${C.id}`,children:[e.jsx(Tr,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this utility bill?")&&W.mutate(C.id)},disabled:W.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${C.id}`,children:e.jsx(ir,{className:"w-3 h-3"})})]})})]},C.id))})]})})})]})]})]})]}),e.jsx(dW,{open:r,onOpenChange:n,selectedServiceId:a,selectedPropertyId:l,bookerRole:"manager"}),e.jsx(uW,{open:c,onClose:()=>d(!1)})]})}function hW(){const{formatWithConversion:t}=Rr(),[s,r]=v.useState("all"),{data:n=[]}=xe({queryKey:["/api/properties"]}),{data:a=[]}=xe({queryKey:["/api/finance"]}),{data:i=[]}=xe({queryKey:["/api/bookings"]}),l=s==="all"?a:a.filter(R=>R.propertyId.toString()===s),o=s==="all"?i:i.filter(R=>R.propertyId.toString()===s),c=o.filter(R=>R.status!=="cancelled").reduce((R,F)=>{const I=parseFloat(F.platformPayout||F.totalAmount||"0");return R+I},0),d=l.filter(R=>R.type==="income").reduce((R,F)=>R+parseFloat(F.amount||"0"),0),u=c+d,m=l.filter(R=>R.type==="expense").reduce((R,F)=>R+parseFloat(F.amount||"0"),0),h=u-m,x=ia(new Date),f=fr(x),p=Sl(x),g=Lj(p,f)+1,y=o.filter(R=>R.status!=="cancelled").reduce((R,F)=>{const I=ia(Lt(F.checkIn)),W=ia(Lt(F.checkOut)),E=rr(p,1),B=I>f?I:f,G=W<E?W:E;return B<G?R+Lj(G,B):R},0),j=(s==="all"?n.length:1)*g,w=j>0?(y/j*100).toFixed(1):"0",N=o.filter(R=>R.status==="confirmed"&&Oi(x,Lt(R.checkIn))).reduce((R,F)=>{const I=parseFloat(F.platformPayout||F.totalAmount||"0");return R+I},0),S=o.filter(R=>R.status==="confirmed"&&Oi(x,Lt(R.checkIn))).length,O=[...l].sort((R,F)=>new Date(F.date).getTime()-new Date(R.date).getTime()).slice(0,10),P=s==="all"?n.map(R=>{const F=a.filter(W=>W.propertyId===R.id&&W.type==="income").reduce((W,E)=>W+parseFloat(E.amount||"0"),0),I=u>0?(F/u*100).toFixed(0):0;return{name:R.name,revenue:F,percentage:I}}).filter(R=>R.revenue>0):[],k=s==="all"?"All Properties":n.find(R=>R.id.toString()===s)?.name||"Unknown";return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Financial Dashboard"}),e.jsx("div",{className:"w-64",children:e.jsxs(ae,{value:s,onValueChange:r,children:[e.jsx(re,{"data-testid":"select-property-filter",children:e.jsx(ie,{placeholder:"Filter by Property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),n.map(R=>e.jsx(A,{value:R.id.toString(),children:R.name},R.id))]})]})})]}),s!=="all"&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing finances for: ",e.jsx("strong",{children:k})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Ot,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-total-revenue",children:t(u)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bookings: ",t(c)," + Other: ",t(d)]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Booking Revenue"}),e.jsx(Xe,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"text-booking-revenue",children:t(c)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.filter(R=>R.status!=="cancelled").length," bookings"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Occupancy Rate"}),e.jsx(Xe,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600","data-testid":"text-occupancy-rate",children:[w,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y," of ",j," days booked"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending Payments"}),e.jsx(tt,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"text-pending-payments",children:t(N)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[S," upcoming booking",S!==1?"s":""]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(Yl,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"text-total-expenses",children:t(m)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l.filter(R=>R.type==="expense").length," transactions"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(Cn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:`text-2xl font-bold ${h>=0?"text-blue-600":"text-red-600"}`,"data-testid":"text-net-profit",children:t(h)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Profit margin: ",u>0?(h/u*100).toFixed(1):0,"%"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Properties"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s==="all"?n.length:1}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s==="all"?"All properties":k})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recent Transactions"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:O.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No transactions found"}):O.map(R=>{const F=n.find(I=>I.id===R.propertyId);return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:R.category}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[F?.name||"Unknown Property"," â€¢ ",new Date(R.date).toLocaleDateString()]})]}),e.jsxs("span",{className:`font-medium ${R.type==="income"?"text-green-600":"text-red-600"}`,children:[R.type==="income"?"+":"-",t(parseFloat(R.amount))]})]},R.id)})})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:s==="all"?"Revenue by Property":"Revenue Breakdown"})}),e.jsx(T,{children:s==="all"?e.jsx("div",{className:"space-y-3",children:P.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No revenue data available"}):P.map((R,F)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:R.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:t(R.revenue)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",R.percentage,"%)"]})]})]},F))}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Income"}),e.jsx("span",{className:"font-medium text-green-600",children:t(u)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Expenses"}),e.jsx("span",{className:"font-medium text-red-600",children:t(m)})]}),e.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Net Profit"}),e.jsx("span",{className:`font-bold ${h>=0?"text-blue-600":"text-red-600"}`,children:t(h)})]})]})})]})]}),e.jsxs(D,{className:"mt-6",children:[e.jsx($,{children:e.jsx(L,{children:"Summary"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transactions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[u>0&&m>0?(h/u*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit Margin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:l.length>0?t(u/l.filter(R=>R.type==="income").length||0):t(0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg. Transaction Value"})]})]})})]})]})}var Gp="Switch",[xW,qAe]=er(Gp),[pW,fW]=xW(Gp),PR=v.forwardRef((t,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...m}=t,[h,x]=v.useState(null),f=ft(s,j=>x(j)),p=v.useRef(!1),g=h?u||!!h.closest("form"):!0,[y,b]=Hr({prop:a,defaultProp:i??!1,onChange:d,caller:Gp});return e.jsxs(pW,{scope:r,checked:y,disabled:o,children:[e.jsx(Je.button,{type:"button",role:"switch","aria-checked":y,"aria-required":l,"data-state":OR(y),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:f,onClick:$e(t.onClick,j=>{b(w=>!w),g&&(p.current=j.isPropagationStopped(),p.current||j.stopPropagation())})}),g&&e.jsx(DR,{control:h,bubbles:!p.current,name:n,value:c,checked:y,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});PR.displayName=Gp;var AR="SwitchThumb",TR=v.forwardRef((t,s)=>{const{__scopeSwitch:r,...n}=t,a=fW(AR,r);return e.jsx(Je.span,{"data-state":OR(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});TR.displayName=AR;var gW="SwitchBubbleInput",DR=v.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:n=!0,...a},i)=>{const l=v.useRef(null),o=ft(l,i),c=mm(r),d=om(s);return v.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&x){const f=new Event("click",{bubbles:n});x.call(u,r),u.dispatchEvent(f)}},[c,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});DR.displayName=gW;function OR(t){return t?"checked":"unchecked"}var ER=PR,jW=TR;const Pt=v.forwardRef(({className:t,...s},r)=>e.jsx(ER,{className:Be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(jW,{className:Be("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Pt.displayName=ER.displayName;function wS(){const{user:t}=Mr(),{toast:s}=st(),r=pt(),[n,a]=v.useState("profile"),[i,l]=v.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:"",timezone:"UTC",language:"en"}),[o,c]=v.useState({emailNotifications:!0,pushNotifications:!0,taskReminders:!0}),[d,u]=v.useState("system"),[m,h]=v.useState({organizationName:"HostPilotPro",currency:"THB",dateFormat:"DD/MM/YYYY"}),{data:x}=xe({queryKey:["/api/system-settings"],staleTime:0});v.useEffect(()=>{x&&h({organizationName:x.companyName||"HostPilotPro",currency:x.displayCurrency||x.defaultCurrency||"THB",dateFormat:x.dateFormat||"DD/MM/YYYY"})},[x]);const f=Te({mutationFn:async k=>await Ne("PUT","/api/system-settings",k),onSuccess:()=>{fD(r),s({title:"Settings Updated",description:"Your settings have been updated. All amounts will now be converted to the new currency."})},onError:k=>{s({title:"Update Failed",description:k?.message||"Failed to update system settings.",variant:"destructive"})}});v.useEffect(()=>{t&&l(k=>({...k,firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||""}))},[t]);const p=Te({mutationFn:async k=>(await Ne("PATCH",`/api/users/${t?.id}`,k)).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/auth/user"]}),r.invalidateQueries({queryKey:["/api/users"]}),s({title:"Profile Updated",description:"Your profile settings have been saved successfully."})},onError:k=>{s({title:"Update Failed",description:k?.message||"Failed to update profile settings.",variant:"destructive"})}}),g=(k,R)=>{l(F=>({...F,[k]:R}))},y=()=>{const k=`${i.firstName} ${i.lastName}`.trim();p.mutate({name:k,email:i.email})},b=(k,R)=>{c(F=>({...F,[k]:R})),s({title:"Setting Updated",description:"Notification preference has been saved."})},j=k=>{u(k);const R=document.documentElement;k==="dark"?R.classList.add("dark"):k==="light"?R.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?R.classList.add("dark"):R.classList.remove("dark"),localStorage.setItem("theme",k),s({title:"Theme Updated",description:`Theme changed to ${k} mode.`})},w=(k,R)=>{h(W=>({...W,[k]:R}));const I={currency:"displayCurrency",organizationName:"companyName",dateFormat:"dateFormat"}[k]||k;f.mutate({[I]:R})},N=[{value:"USD",label:"US Dollar ($)"},{value:"EUR",label:"Euro (â‚¬)"},{value:"GBP",label:"British Pound (Â£)"},{value:"THB",label:"Thai Baht (à¸¿)"},{value:"JPY",label:"Japanese Yen (Â¥)"},{value:"AUD",label:"Australian Dollar (A$)"}],S=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"},{value:"Asia/Bangkok",label:"Bangkok"},{value:"Australia/Sydney",label:"Sydney"}],O=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"th",label:"Thai"},{value:"ja",label:"Japanese"}],P=t?.role==="admin";return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(ss,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Settings"})]}),e.jsxs(xt,{value:n,onValueChange:a,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"profile","data-testid":"tab-profile",children:"Profile"}),e.jsx(de,{value:"notifications","data-testid":"tab-notifications",children:"Notifications"}),e.jsx(de,{value:"appearance","data-testid":"tab-appearance",children:"Appearance"}),P&&e.jsx(de,{value:"system","data-testid":"tab-system",children:"System"})]}),e.jsx(me,{value:"profile",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-5 w-5"}),"Personal Information"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",children:"First Name"}),e.jsx(Q,{id:"firstName","data-testid":"input-firstName",value:i.firstName,onChange:k=>g("firstName",k.target.value),placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",children:"Last Name"}),e.jsx(Q,{id:"lastName","data-testid":"input-lastName",value:i.lastName,onChange:k=>g("lastName",k.target.value),placeholder:"Enter last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email Address"}),e.jsx(Q,{id:"email","data-testid":"input-email",type:"email",value:i.email,onChange:k=>g("email",k.target.value),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"phone",children:"Phone Number"}),e.jsx(Q,{id:"phone","data-testid":"input-phone",value:i.phone,onChange:k=>g("phone",k.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(ae,{value:i.timezone,onValueChange:k=>g("timezone",k),children:[e.jsx(re,{"data-testid":"select-timezone",children:e.jsx(ie,{placeholder:"Select timezone"})}),e.jsx(ne,{children:S.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"language",children:"Language"}),e.jsxs(ae,{value:i.language,onValueChange:k=>g("language",k),children:[e.jsx(re,{"data-testid":"select-language",children:e.jsx(ie,{placeholder:"Select language"})}),e.jsx(ne,{children:O.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(U,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(Kt,{className:"h-3 w-3"}),t?.role," Access Level"]}),e.jsxs(M,{onClick:y,disabled:p.isPending,"data-testid":"button-save-profile",children:[e.jsx(rm,{className:"h-4 w-4 mr-2"}),p.isPending?"Saving...":"Save Profile"]})]})]})]})}),e.jsx(me,{value:"notifications",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"Notification Preferences"]})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{className:"text-base",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(Pt,{"data-testid":"toggle-emailNotifications",checked:o.emailNotifications,onCheckedChange:k=>b("emailNotifications",k)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{className:"text-base",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive browser push notifications"})]}),e.jsx(Pt,{"data-testid":"toggle-pushNotifications",checked:o.pushNotifications,onCheckedChange:k=>b("pushNotifications",k)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Z,{className:"text-base",children:"Task Reminders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get reminded about upcoming and overdue tasks"})]}),e.jsx(Pt,{"data-testid":"toggle-taskReminders",checked:o.taskReminders,onCheckedChange:k=>b("taskReminders",k)})]})]})]})}),e.jsx(me,{value:"appearance",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(w4,{className:"h-5 w-5"}),"Theme & Display"]})}),e.jsx(T,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{className:"text-base",children:"Theme Preference"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"light",label:"Light",icon:lB},{value:"dark",label:"Dark",icon:W8},{value:"system",label:"System",icon:G8}].map(({value:k,label:R,icon:F})=>e.jsxs(M,{variant:d===k?"default":"outline",className:"flex flex-col items-center gap-2 h-auto py-4",onClick:()=>j(k),"data-testid":`button-theme-${k}`,children:[e.jsx(F,{className:"h-5 w-5"}),R]},k))})]})})]})}),P&&e.jsx(me,{value:"system",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-5 w-5"}),"System Configuration"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"orgName",children:"Organization Name"}),e.jsx(Q,{id:"orgName","data-testid":"input-orgName",value:m.organizationName,onChange:k=>w("organizationName",k.target.value),placeholder:"Enter organization name"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"currency",children:"Default Currency"}),e.jsxs(ae,{value:m.currency,onValueChange:k=>w("currency",k),children:[e.jsx(re,{"data-testid":"select-currency",children:e.jsx(ie,{placeholder:"Select currency"})}),e.jsx(ne,{children:N.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"dateFormat",children:"Date Format"}),e.jsxs(ae,{value:m.dateFormat,onValueChange:k=>w("dateFormat",k),children:[e.jsx(re,{"data-testid":"select-dateFormat",children:e.jsx(ie,{placeholder:"Select date format"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(A,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(A,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),e.jsxs("div",{className:"pt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Settings are saved automatically"]})]})]})})]})]})}const vW=Zu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Wn=v.forwardRef(({className:t,variant:s,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:Be(vW({variant:s}),t),...r}));Wn.displayName="Alert";const MR=v.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:Be("mb-1 font-medium leading-none tracking-tight",t),...s}));MR.displayName="AlertTitle";const Qn=v.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:Be("text-sm [&_p]:leading-relaxed",t),...s}));Qn.displayName="AlertDescription";const $g=[{email:"admin@test.com",role:"Admin",password:"admin123",permissions:"Full system access, User management, God Mode"},{email:"manager@test.com",role:"JOHN DO (Portfolio Manager)",password:"manager123",permissions:"Property management, Financial oversight"},{email:"owner@test.com",role:"Property Owner",password:"owner123",permissions:"Own properties, Financial reports"},{email:"staff@test.com",role:"Staff Member",password:"staff123",permissions:"Task management, Property operations"},{email:"retail@test.com",role:"Retail Agent",password:"retail123",permissions:"Booking management, Commission tracking"},{email:"referral@test.com",role:"Referral Agent",password:"referral123",permissions:"Property referrals, Commission tracking"}];function yW(){const[,t]=or(),{login:s,user:r,isLoading:n}=On(),[a,i]=v.useState(""),[l,o]=v.useState(""),[c,d]=v.useState(!1),[u,m]=v.useState("");if(r&&!n)return ee.useEffect(()=>{t("/")},[t]),null;const h=async f=>{f.preventDefault(),d(!0),m("");try{await s(a,l),t("/")}catch(p){m(p.message||"Login failed. Please check your credentials."),d(!1)}},x=async f=>{const g=$g.find(y=>y.email===f)?.password||"123456";i(f),o(g),d(!0),m("");try{await s(f,g),t("/")}catch(y){m(y.message||"Demo login failed."),d(!1)}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-6 w-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs("div",{className:"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"hidden lg:block space-y-8",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"HostPilotPro"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Complete Hospitality Management Platform"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(bs,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Property Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Comprehensive property oversight with intelligent automation"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ot,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Multi-Role Access"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Role-based permissions for admins, managers, owners, staff, and agents"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Kt,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Secure Platform"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Enterprise-grade security with encrypted sessions and audit trails"})]})]})]})]}),e.jsx("div",{className:"w-full max-w-md mx-auto lg:mx-0",children:e.jsxs(D,{className:"shadow-xl border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:[e.jsxs($,{className:"text-center",children:[e.jsx(L,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Welcome Back"}),e.jsx(Ee,{className:"text-gray-600 dark:text-gray-300",children:"Sign in to your HostPilotPro account"})]}),e.jsxs(T,{className:"space-y-6",children:[u&&e.jsx(Wn,{className:"border-red-200 bg-red-50 dark:bg-red-900/20",children:e.jsx(Qn,{className:"text-red-700 dark:text-red-300",children:u})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(Q,{id:"email",type:"email",value:a,onChange:f=>i(f.target.value),placeholder:"Enter your email",required:!0,disabled:c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsx(Q,{id:"password",type:"password",value:l,onChange:f=>o(f.target.value),placeholder:"Enter your password",required:!0,disabled:c})]}),e.jsx(M,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-500",children:"Demo Accounts"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2",children:$g.slice(0,4).map(f=>e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>x(f.email),disabled:c,className:"justify-start text-left",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4 text-green-600"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:f.role}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:f.email})]})]},f.email))}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:$g.slice(4).map(f=>e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>x(f.email),disabled:c,className:"justify-start text-left",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4 text-blue-600"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:f.role}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:f.email})]})]},f.email))})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Demo passwords: admin123, manager123, owner123, staff123, 123456, guest123"})})]})]})})]})})}const Wm={saveProfile:(t,s)=>{try{return localStorage.setItem(`profile_${t}`,JSON.stringify(s)),!0}catch(r){return console.error("Error saving profile:",r),!1}},getProfile:t=>{try{const s=localStorage.getItem(`profile_${t}`);return s?JSON.parse(s):null}catch(s){return console.error("Error loading profile:",s),null}},saveNotifications:(t,s)=>{try{return localStorage.setItem(`notifications_${t}`,JSON.stringify(s)),!0}catch(r){return console.error("Error saving notifications:",r),!1}},getNotifications:t=>{try{const s=localStorage.getItem(`notifications_${t}`);return s?JSON.parse(s):null}catch(s){return console.error("Error loading notifications:",s),null}}};function bW(){const{user:t}=On(),{toast:s}=st(),[r,n]=v.useState(!1),[a,i]=v.useState(!1),[l,o]=v.useState({firstName:t?.firstName||"Demo",lastName:t?.lastName||"Admin",email:t?.email||"admin@test.com",phone:t?.phone||"+66 2 123 4567",company:t?.company||"HostPilotPro",department:t?.department||"Administration",timezone:t?.timezone||"Asia/Bangkok",language:t?.language||"English"});v.useEffect(()=>{if(t){const g=Wm.getProfile(t.id);g&&o(b=>({...b,...g}));const y=Wm.getNotifications(t.id);y&&d(y)}},[t]);const[c,d]=v.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,taskReminders:!0,bookingAlerts:!0,maintenanceAlerts:!0,paymentNotifications:!0,weeklyReports:!0,monthlyReports:!0,systemUpdates:!1}),[u,m]=v.useState({twoFactorEnabled:!1,sessionTimeout:"4 hours",passwordLastChanged:"2024-12-15"}),h=()=>{if(t){const g={firstName:l.firstName,lastName:l.lastName,email:l.email,phone:l.phone,company:l.company,department:l.department},y=Wm.saveProfile(t.id,g);s(y?{title:"Profile Updated",description:"Your profile information has been saved successfully."}:{title:"Save Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}n(!1)},x=(g,y)=>{const b={...c,[g]:y};d(b),t&&Wm.saveNotifications(t.id,b),s({title:"Notification Settings Updated",description:`${g.replace(/([A-Z])/g," $1").toLowerCase()} ${y?"enabled":"disabled"}.`})},f=g=>{switch(g){case"admin":return"System Administrator";case"portfolio-manager":return"Portfolio Manager";case"owner":return"Property Owner";case"staff":return"Staff Member";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";case"guest":return"Guest";default:return g}},p=g=>{switch(g){case"admin":return"bg-red-500";case"portfolio-manager":return"bg-blue-500";case"owner":return"bg-green-500";case"staff":return"bg-purple-500";case"retail-agent":return"bg-orange-500";case"referral-agent":return"bg-yellow-500";case"guest":return"bg-gray-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(us,{href:"/",children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(ti,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account information and preferences"})]})]}),e.jsx(U,{className:`${p(t?.role)} text-white`,children:f(t?.role)})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(D,{className:"lg:col-span-1",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-5 w-5"}),"Profile Overview"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Kn,{className:"h-24 w-24",children:[e.jsx(eo,{src:t?.profileImageUrl}),e.jsxs(Gn,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-2xl",children:[l.firstName.charAt(0),l.lastName.charAt(0)]})]}),e.jsx(M,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 rounded-full h-8 w-8 p-0",onClick:()=>s({title:"Photo Upload",description:"Photo upload feature coming soon!"}),children:e.jsx(Ju,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[l.firstName," ",l.lastName]}),e.jsx("p",{className:"text-gray-600",children:l.email}),e.jsx(U,{variant:"secondary",className:"mt-2",children:f(t?.role)})]})]}),e.jsx(Jr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Company"}),e.jsx("span",{className:"text-sm font-medium",children:l.company})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Department"}),e.jsx("span",{className:"text-sm font-medium",children:l.department})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Timezone"}),e.jsx("span",{className:"text-sm font-medium",children:l.timezone})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Language"}),e.jsx("span",{className:"text-sm font-medium",children:l.language})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-5 w-5"}),"Personal Information"]}),e.jsx(M,{variant:r?"default":"outline",size:"sm",onClick:()=>r?h():n(!0),children:r?e.jsxs(e.Fragment,{children:[e.jsx(rm,{className:"h-4 w-4 mr-2"}),"Save Changes"]}):"Edit Profile"})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"firstName",children:"First Name"}),e.jsx(Q,{id:"firstName",value:l.firstName,onChange:g=>o(y=>({...y,firstName:g.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"lastName",children:"Last Name"}),e.jsx(Q,{id:"lastName",value:l.lastName,onChange:g=>o(y=>({...y,lastName:g.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"email",children:"Email Address"}),e.jsx(Q,{id:"email",type:"email",value:l.email,onChange:g=>o(y=>({...y,email:g.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"phone",children:"Phone Number"}),e.jsx(Q,{id:"phone",value:l.phone,onChange:g=>o(y=>({...y,phone:g.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"company",children:"Company"}),e.jsx(Q,{id:"company",value:l.company,onChange:g=>o(y=>({...y,company:g.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"department",children:"Department"}),e.jsx(Q,{id:"department",value:l.department,onChange:g=>o(y=>({...y,department:g.target.value})),disabled:!r})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"Notification Preferences"]})}),e.jsx(T,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(c).map(([g,y])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[y?e.jsx(Is,{className:"h-4 w-4 text-green-600"}):e.jsx(p4,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:g.replace(/([A-Z])/g," $1").replace(/^./,b=>b.toUpperCase())})]}),e.jsx(Pt,{checked:y,onCheckedChange:b=>x(g,b)})]},g))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"h-5 w-5"}),"Security Settings"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsx(Pt,{checked:u.twoFactorEnabled,onCheckedChange:g=>{m(y=>({...y,twoFactorEnabled:g})),s({title:"Security Setting Updated",description:`Two-factor authentication ${g?"enabled":"disabled"}.`})}})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Password Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Last Changed"}),e.jsx("span",{className:"text-xs font-medium",children:u.passwordLastChanged})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Session Timeout"}),e.jsx("span",{className:"text-xs font-medium",children:u.sessionTimeout})]}),e.jsx(M,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>s({title:"Change Password",description:"Password change feature coming soon!"}),children:"Change Password"})]})]})]})]})]})]})]})}function NW(){const[t,s]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState(!1),{toast:l}=st(),{data:o=[]}=xe({queryKey:["/api/auth/demo-users"]}),c=Te({mutationFn:async x=>await Ne("POST","/api/auth/demo-login",x),onSuccess:x=>{l({title:"Login successful",description:`Welcome! Redirecting to your ${x.user?.role} dashboard...`}),setTimeout(()=>{window.location.href=x.redirectUrl||"/dashboard"},1e3)},onError:x=>{l({title:"Login failed",description:x.message||"Invalid credentials",variant:"destructive"})}}),d=x=>{if(x.preventDefault(),!t||!r){l({title:"Missing credentials",description:"Please enter both email and password",variant:"destructive"});return}c.mutate({email:t,password:r})},u=x=>{s(x.email),n(x.password),c.mutate({email:x.email,password:x.password})},m=x=>{navigator.clipboard.writeText(`${x.email} / ${x.password}`),l({title:"Copied to clipboard",description:`${x.email} / ${x.password}`})},h=x=>({admin:"bg-red-100 text-red-800","portfolio-manager":"bg-blue-100 text-blue-800",owner:"bg-green-100 text-green-800",staff:"bg-yellow-100 text-yellow-800","retail-agent":"bg-purple-100 text-purple-800","referral-agent":"bg-indigo-100 text-indigo-800",guest:"bg-gray-100 text-gray-800"})[x]||"bg-gray-100 text-gray-800";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 pt-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(At,{className:"h-10 w-10 text-blue-600"}),e.jsx("h1",{className:"text-5xl font-bold text-gray-900",children:"HostPilotPro"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Complete property management platform for hospitality professionals. Manage properties, track tasks, handle bookings, and monitor finances."})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs(D,{className:"w-full",children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($a,{className:"h-5 w-5"}),"Login to HostPilotPro"]}),e.jsx(Ee,{children:"Enter your credentials or use a demo account below"})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(Q,{id:"email",type:"email",value:t,onChange:x=>s(x.target.value),placeholder:"admin@hostpilotpro.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{id:"password",type:a?"text":"password",value:r,onChange:x=>n(x.target.value),placeholder:"Enter password",required:!0}),e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?e.jsx(v4,{className:"h-4 w-4"}):e.jsx(Bt,{className:"h-4 w-4"})})]})]}),e.jsx(M,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:c.isPending,children:c.isPending?"Signing in...":"Sign In"})]})})]}),e.jsxs(D,{className:"w-full",children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-5 w-5"}),"Demo Accounts"]}),e.jsx(Ee,{children:"Click any account to login instantly, or copy credentials"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:o.map((x,f)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-medium text-sm",children:[x.firstName," ",x.lastName]}),e.jsx(U,{variant:"secondary",className:`text-xs ${h(x.role)}`,children:x.role})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[x.email," / ",x.password]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>m(x),className:"h-8 w-8 p-0",children:e.jsx(B8,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",onClick:()=>u(x),disabled:c.isPending,className:"text-xs bg-blue-600 hover:bg-blue-700",children:"Login"})]})]},f))})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Property Management"})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Track properties, owners, and status updates with real-time management tools."})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Agent Dashboards"})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Referral and retail agent portals with commission tracking and booking management."})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Financial Toolkit"})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue tracking, expense monitoring, and automated invoice generation."})})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(U,{variant:"secondary",className:"text-sm px-4 py-2",children:"Multi-tenant ready â€¢ Role-based access â€¢ Real-time updates"})})]})})}function wW(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(D,{className:"w-full max-w-md mx-4",children:e.jsxs(T,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(It,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function SW(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Maintenance Suggestions & Approval"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pending Suggestions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"Pool Filter Replacement"}),e.jsx("p",{className:"text-gray-600",children:"Villa Samui - Recommended based on usage patterns"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Cost: $150"})]}),e.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"AC Maintenance"}),e.jsx("p",{className:"text-gray-600",children:"Villa Aruna - Due for quarterly service"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Cost: $250"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recently Approved"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"Garden Maintenance"}),e.jsx("p",{className:"text-gray-600",children:"Villa Paradise - Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cost: $120"})]})})]})]})]})}function Fg(){const{user:t}=Mr(),{toast:s}=st(),r=pt(),[n,a]=v.useState("overview"),[i,l]=v.useState(""),{data:o=[],isLoading:c}=xe({queryKey:["/api/checkins"],retry:!1}),{data:d=[],isLoading:u}=xe({queryKey:["/api/checkouts"],retry:!1}),{data:m=[],isLoading:h}=xe({queryKey:["/api/checkins"],retry:!1}),{data:x=[]}=xe({queryKey:["/api/properties"],retry:!1}),f=S=>{switch(S){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=S=>{switch(S){case"management":return e.jsx(zt,{className:"h-4 w-4"});case"housekeeping":return e.jsx(Ie,{className:"h-4 w-4"});case"pool":return e.jsx(es,{className:"h-4 w-4"});case"maintenance":return e.jsx(ss,{className:"h-4 w-4"});default:return e.jsx(dt,{className:"h-4 w-4"})}},g=(S,O="THB")=>{const P=typeof S=="string"?parseFloat(S):S;return new Intl.NumberFormat("th-TH",{style:"currency",currency:O,minimumFractionDigits:2}).format(P)},y=({checkIn:S,onComplete:O})=>{const[P,k]=v.useState({electricMeterReading:"",meterReadingMethod:"manual",guestNames:[""],passportNumbers:[""],depositType:"none",depositAmount:"",depositCurrency:"THB",completionNotes:""}),R=()=>{O(S.id,P)};return e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Complete Check-in"]})}),e.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx($a,{className:"h-5 w-5"}),"Complete Guest Check-in"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Electric Meter Reading (kWh)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reading",children:"Current Reading"}),e.jsx(Q,{id:"reading",type:"number",step:"0.001",placeholder:"0.000",value:P.electricMeterReading,onChange:F=>k({...P,electricMeterReading:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"method",children:"Reading Method"}),e.jsxs(ae,{value:P.meterReadingMethod,onValueChange:F=>k({...P,meterReadingMethod:F}),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(zt,{className:"h-4 w-4"}),"Guest Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guestName",children:"Guest Name"}),e.jsx(Q,{id:"guestName",placeholder:"Full name from passport",value:P.guestNames[0],onChange:F=>k({...P,guestNames:[F.target.value,...P.guestNames.slice(1)]})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"passportNumber",children:"Passport Number"}),e.jsx(Q,{id:"passportNumber",placeholder:"Passport number",value:P.passportNumbers[0],onChange:F=>k({...P,passportNumbers:[F.target.value,...P.passportNumbers.slice(1)]})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Security Deposit"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"depositType",children:"Deposit Type"}),e.jsxs(ae,{value:P.depositType,onValueChange:F=>k({...P,depositType:F}),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"none",children:"No Deposit"}),e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"digital",children:"Digital Payment"})]})]})]}),P.depositType!=="none"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"depositAmount",children:"Amount"}),e.jsx(Q,{id:"depositAmount",type:"number",placeholder:"0.00",value:P.depositAmount,onChange:F=>k({...P,depositAmount:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"depositCurrency",children:"Currency"}),e.jsxs(ae,{value:P.depositCurrency,onValueChange:F=>k({...P,depositCurrency:F}),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"THB",children:"THB (Thai Baht)"}),e.jsx(A,{value:"USD",children:"USD (US Dollar)"}),e.jsx(A,{value:"EUR",children:"EUR (Euro)"}),e.jsx(A,{value:"GBP",children:"GBP (British Pound)"})]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"notes",children:"Completion Notes"}),e.jsx(ct,{id:"notes",placeholder:"Any additional notes or observations...",value:P.completionNotes,onChange:F=>k({...P,completionNotes:F.target.value}),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"outline",children:"Cancel"}),e.jsx(M,{onClick:R,className:"bg-green-600 hover:bg-green-700",children:"Complete Check-in"})]})]})]})]})},b=({checkOut:S,onComplete:O})=>{const[P,k]=v.useState({electricMeterReading:"",meterReadingMethod:"manual",paymentStatus:"included",paymentMethod:"",discountAmount:"",discountReason:"",completionNotes:"",handlerComments:""}),R=()=>{O(S.id,P)};return e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"bg-red-600 hover:bg-red-700",children:[e.jsx(vn,{className:"h-4 w-4 mr-1"}),"Complete Check-out"]})}),e.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-5 w-5"}),"Complete Guest Check-out"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Final Electric Meter Reading (kWh)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reading",children:"Final Reading"}),e.jsx(Q,{id:"reading",type:"number",step:"0.001",placeholder:"0.000",value:P.electricMeterReading,onChange:F=>k({...P,electricMeterReading:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"method",children:"Reading Method"}),e.jsxs(ae,{value:P.meterReadingMethod,onValueChange:F=>k({...P,meterReadingMethod:F}),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Electricity Payment"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"paymentStatus",children:"Payment Status"}),e.jsxs(ae,{value:P.paymentStatus,onValueChange:F=>k({...P,paymentStatus:F}),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"included",children:"Included in Stay"}),e.jsx(A,{value:"paid_by_guest",children:"Paid by Guest"}),e.jsx(A,{value:"not_charged",children:"Not Charged"})]})]})]}),P.paymentStatus==="paid_by_guest"&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(ae,{value:P.paymentMethod,onValueChange:F=>k({...P,paymentMethod:F}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select method"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"digital",children:"Digital Payment"}),e.jsx(A,{value:"deducted_from_deposit",children:"Deducted from Deposit"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Discount (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"discountAmount",children:"Discount Amount (THB)"}),e.jsx(Q,{id:"discountAmount",type:"number",step:"0.01",placeholder:"0.00",value:P.discountAmount,onChange:F=>k({...P,discountAmount:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"discountReason",children:"Discount Reason"}),e.jsxs(ae,{value:P.discountReason,onValueChange:F=>k({...P,discountReason:F}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select reason"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"power_outage",children:"Power Outage"}),e.jsx(A,{value:"goodwill_gesture",children:"Goodwill Gesture"}),e.jsx(A,{value:"maintenance_issue",children:"Maintenance Issue"}),e.jsx(A,{value:"guest_complaint",children:"Guest Complaint"}),e.jsx(A,{value:"other",children:"Other"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"completionNotes",children:"Completion Notes"}),e.jsx(ct,{id:"completionNotes",placeholder:"Any observations about the check-out process...",value:P.completionNotes,onChange:F=>k({...P,completionNotes:F.target.value}),rows:2})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"handlerComments",children:"Handler Comments"}),e.jsx(ct,{id:"handlerComments",placeholder:"Private comments for internal reference...",value:P.handlerComments,onChange:F=>k({...P,handlerComments:F.target.value}),rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"outline",children:"Cancel"}),e.jsx(M,{onClick:R,className:"bg-green-600 hover:bg-green-700",children:"Complete Check-out"})]})]})]})]})},j=Te({mutationFn:({id:S,data:O})=>Ne("PUT",`/api/guest-checkins/${S}/complete`,O),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/guest-checkins"]}),s({title:"Check-in Completed",description:"Guest check-in has been successfully completed."})},onError:S=>{s({title:"Error",description:S.message||"Failed to complete check-in",variant:"destructive"})}}),w=Te({mutationFn:({id:S,data:O})=>Ne("PUT",`/api/guest-checkouts/${S}/complete`,O),onSuccess:S=>{r.invalidateQueries({queryKey:["/api/guest-checkouts"]}),S.depositRefundAlert?s({title:"Check-out Completed with Alert",description:"Manual deposit refund required for non-THB currency.",variant:"default"}):s({title:"Check-out Completed",description:"Guest check-out has been successfully completed."})},onError:S=>{s({title:"Error",description:S.message||"Failed to complete check-out",variant:"destructive"})}}),N=Te({mutationFn:({id:S,data:O})=>Ne("PUT",`/api/checkin-checkout-demo-tasks/${S}/complete`,O),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/checkin-checkout-demo-tasks"]}),s({title:"Task Completed",description:"Demo task has been marked as completed."})},onError:S=>{s({title:"Error",description:S.message||"Failed to complete task",variant:"destructive"})}});return t?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx($a,{className:"h-8 w-8 text-blue-600"})}),"Check-in/Check-out Workflow"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage guest arrivals, departures, and electric meter readings with OCR automation"})]})}),e.jsxs(xt,{value:n,onValueChange:a,className:"space-y-6",children:[e.jsxs(ht,{className:"grid grid-cols-5 w-full max-w-2xl",children:[e.jsxs(de,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(F8,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(de,{value:"checkins",className:"flex items-center gap-2",children:[e.jsx($a,{className:"h-4 w-4"}),"Check-ins"]}),e.jsxs(de,{value:"checkouts",className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-4 w-4"}),"Check-outs"]}),e.jsxs(de,{value:"tasks",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Demo Tasks"]}),e.jsxs(de,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),"Settings"]})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending Check-ins"}),e.jsx($a,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.filter(S=>S.status==="pending").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Awaiting staff assignment"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending Check-outs"}),e.jsx(vn,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.filter(S=>S.status==="pending").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Awaiting completion"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(L,{className:"text-sm font-medium",children:"Active Tasks"}),e.jsx(Ie,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.filter(S=>S.status!=="completed").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Across all departments"})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(Ee,{children:"Latest check-in/check-out workflow activities"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:[...o.slice(0,3),...d.slice(0,3)].sort((S,O)=>new Date(O.createdAt||O.scheduledDate).getTime()-new Date(S.createdAt||S.scheduledDate).getTime()).slice(0,5).map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[S.checkInId?e.jsx(vn,{className:"h-5 w-5 text-red-500"}):e.jsx($a,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.checkInId?"Check-out":"Check-in"," - Property #",S.propertyId]}),e.jsx("p",{className:"text-sm text-gray-600",children:et(new Date(S.scheduledDate),"MMM dd, yyyy at HH:mm")})]})]}),e.jsx(U,{className:f(S.status),children:S.status.replace("_"," ")})]},`${S.id}-${S.checkInId?"out":"in"}`))})})]})]}),e.jsx(me,{value:"checkins",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($a,{className:"h-5 w-5"}),"Guest Check-ins"]}),e.jsx(Ee,{children:"Manage guest arrivals with passport documentation and electric meter readings"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($a,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No check-ins found"})]}):o.map(S=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($a,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Property #",S.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",et(new Date(S.scheduledDate),"MMM dd, yyyy at HH:mm")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:f(S.status),children:S.status.replace("_"," ")}),S.status==="pending"&&t?.role==="staff"&&e.jsx(y,{checkIn:S,onComplete:(O,P)=>j.mutate({id:O,data:P})})]})]}),S.status==="completed"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Electric Reading"}),e.jsxs("p",{className:"font-medium",children:[S.electricMeterReading," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guest Names"}),e.jsx("p",{className:"font-medium",children:S.guestNames?.join(", ")||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Deposit"}),e.jsx("p",{className:"font-medium",children:S.depositType==="none"?"No Deposit":`${g(S.depositAmount,S.depositCurrency)}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Method"}),e.jsx("p",{className:"font-medium",children:S.meterReadingMethod?.replace("_"," ")})]})]}),S.completionNotes&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Notes"}),e.jsx("p",{className:"text-sm",children:S.completionNotes})]})]},S.id))})})]})}),e.jsx(me,{value:"checkouts",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-5 w-5"}),"Guest Check-outs"]}),e.jsx(Ee,{children:"Process guest departures with electricity billing and payment collection"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(vn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No check-outs found"})]}):d.map(S=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(vn,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Property #",S.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",et(new Date(S.scheduledDate),"MMM dd, yyyy at HH:mm")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:f(S.status),children:S.status.replace("_"," ")}),S.status==="pending"&&t?.role==="staff"&&e.jsx(b,{checkOut:S,onComplete:(O,P)=>w.mutate({id:O,data:P})})]})]}),S.status==="completed"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Electric Usage"}),e.jsxs("p",{className:"font-medium",children:[S.electricityUsed," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Charge"}),e.jsxs("p",{className:"font-medium",children:[g(S.totalElectricityCharge),S.discountAmount>0&&e.jsxs("span",{className:"text-sm text-green-600 ml-1",children:["(-",g(S.discountAmount),")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payment Status"}),e.jsx("p",{className:"font-medium",children:S.paymentStatus?.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rate"}),e.jsxs("p",{className:"font-medium",children:[S.electricityRatePerKwh," THB/kWh"]})]})]}),(S.discountReason||S.handlerComments)&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[S.discountReason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Discount Reason"}),e.jsx("p",{className:"text-sm",children:S.discountReason})]}),S.handlerComments&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Handler Comments"}),e.jsx("p",{className:"text-sm",children:S.handlerComments})]})]})]},S.id))})})]})}),e.jsx(me,{value:"tasks",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Check-in/Check-out Demo Tasks"]}),e.jsx(Ee,{children:"Role-specific tasks for pool staff, housekeepers, hosting staff, and managers"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ie,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No demo tasks found"})]}):m.map(S=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p(S.department),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:S.title}),e.jsx("p",{className:"text-sm text-gray-600",children:S.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{variant:"outline",className:"text-xs",children:S.department}),e.jsx(U,{className:f(S.status),children:S.status.replace("_"," ")}),S.status==="pending"&&t?.role==="staff"&&e.jsxs(M,{size:"sm",onClick:()=>N.mutate({id:S.id,data:{completionNotes:"Task completed via workflow interface"}}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Task Type"}),e.jsx("p",{className:"font-medium",children:S.taskType?.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Assigned Role"}),e.jsx("p",{className:"font-medium",children:S.assignedRole})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:et(new Date(S.dueDate),"MMM dd, HH:mm")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[S.estimatedDuration||30," min"]})]})]})]},S.id))})})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-5 w-5"}),"Workflow Settings"]}),e.jsx(Ee,{children:"Configure electricity rates, OCR settings, and notification preferences"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Electricity Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"defaultRate",children:"Default Rate (THB per kWh)"}),e.jsx(Q,{id:"defaultRate",type:"number",step:"0.01",defaultValue:"7.00",placeholder:"7.00"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"currency",children:"Currency"}),e.jsxs(ae,{defaultValue:"THB",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"THB",children:"THB (Thai Baht)"}),e.jsx(A,{value:"USD",children:"USD (US Dollar)"}),e.jsx(A,{value:"EUR",children:"EUR (Euro)"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ju,{className:"h-4 w-4"}),"OCR Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{htmlFor:"autoOcr",children:"Auto OCR Processing"}),e.jsx("input",{type:"checkbox",id:"autoOcr",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{htmlFor:"manualOverride",children:"Manual Override Allowed"}),e.jsx("input",{type:"checkbox",id:"manualOverride",defaultChecked:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"confidence",children:"Minimum Confidence (%)"}),e.jsx(Q,{id:"confidence",type:"number",min:"50",max:"100",defaultValue:"85"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(St,{className:"h-4 w-4"}),"Notification Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Deposit Refund Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"High Usage Warnings"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Task Assignment Notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Completion Confirmations"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Settings"})})]})})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(St,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to access the check-in/check-out workflow."})]})})}function SS(){const[t,s]=v.useState("overview"),[r,n]=v.useState(1),[a,i]=v.useState(null),[l,o]=v.useState(null),[c,d]=v.useState(!1),[u,m]=v.useState(!1),[h,x]=v.useState(!1),{toast:f}=st(),p=pt(),{data:g=[],isLoading:y}=xe({queryKey:["/api/checkins",r],queryFn:()=>Ne("GET","/api/checkins"),retry:!1}),{data:b=[],isLoading:j}=xe({queryKey:["/api/checkouts",r],queryFn:()=>Ne("GET","/api/checkouts"),retry:!1}),{data:w=[],isLoading:N}=xe({queryKey:["/api/checkins-tasks",r],queryFn:()=>Ne("GET","/api/checkins"),retry:!1}),{data:S=[],isLoading:O}=xe({queryKey:["/api/checkins-history",r],queryFn:()=>Ne("GET","/api/checkins"),retry:!1}),P=Array.isArray(g)?g:[],k=Array.isArray(b)?b:[],R=Array.isArray(w)?w:[],F=Array.isArray(S)?S:[],{data:I=[]}=xe({queryKey:["/api/properties"],queryFn:()=>Ne("GET","/api/properties")}),W=Te({mutationFn:te=>Ne("POST","/api/guest-checkin/check-ins",te),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-ins"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),d(!1),f({title:"Check-in Created",description:"Guest check-in has been successfully created."})},onError:te=>{f({title:"Error",description:te.message||"Failed to create check-in",variant:"destructive"})}}),E=Te({mutationFn:te=>Ne("POST","/api/guest-checkin/check-outs",te),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),m(!1),f({title:"Check-out Created",description:"Guest check-out has been successfully created."})},onError:te=>{f({title:"Error",description:te.message||"Failed to create check-out",variant:"destructive"})}}),B=Te({mutationFn:te=>Ne("POST",`/api/guest-checkin/check-ins/${te}/complete`),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-ins"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),f({title:"Check-in Completed",description:"Guest check-in has been marked as completed."})},onError:te=>{f({title:"Error",description:te.message||"Failed to complete check-in",variant:"destructive"})}}),G=Te({mutationFn:te=>Ne("POST",`/api/guest-checkin/check-outs/${te}/complete`),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),f({title:"Check-out Completed",description:"Guest check-out has been marked as completed."})},onError:te=>{f({title:"Error",description:te.message||"Failed to complete check-out",variant:"destructive"})}}),J=Te({mutationFn:te=>Ne("POST",`/api/guest-checkin/check-outs/${te.id}/process-refund`,te),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),x(!1),f({title:"Refund Processed",description:"Deposit refund has been successfully processed."})},onError:te=>{f({title:"Error",description:te.message||"Failed to process refund",variant:"destructive"})}});Te({mutationFn:te=>Ne("POST","/api/guest-checkin/calculate-electricity",te)}),Te({mutationFn:te=>Ne("POST","/api/guest-checkin/calculate-refund",te)});const C=te=>{const we={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",approved:"bg-green-100 text-green-800",refused:"bg-red-100 text-red-800",processed:"bg-purple-100 text-purple-800"};return e.jsx(U,{className:we[te]||"bg-gray-100 text-gray-800",children:te.replace("_"," ").toUpperCase()})},V=te=>te==="check_in"?e.jsx(na,{className:"h-4 w-4"}):e.jsx(na,{className:"h-4 w-4 rotate-180"}),z=te=>({luggage:e.jsx(na,{className:"h-4 w-4"}),"dollar-sign":e.jsx(Ze,{className:"h-4 w-4"}),calendar:e.jsx(Xe,{className:"h-4 w-4"}),check:e.jsx(Ie,{className:"h-4 w-4"}),alert:e.jsx(It,{className:"h-4 w-4"})})[te]||e.jsx(dt,{className:"h-4 w-4"}),le=()=>{const te=P.filter(ce=>new Date(ce.checkInDate).toDateString()===new Date().toDateString()),we=k.filter(ce=>new Date(ce.checkOutDate).toDateString()===new Date().toDateString()),ve=R.filter(ce=>ce.status==="pending"),X=[...P,...k].filter(ce=>ce.completedAt&&new Date(ce.completedAt).toDateString()===new Date().toDateString());return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Today's Check-ins"}),e.jsx(na,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[te.filter(ce=>ce.taskStatus==="completed").length," completed"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Today's Check-outs"}),e.jsx(na,{className:"h-4 w-4 text-orange-600 rotate-180"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:we.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[we.filter(ce=>ce.taskStatus==="completed").length," completed"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending Tasks"}),e.jsx(cB,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ve.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ve.filter(ce=>ce.priority==="high").length," high priority"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Completed Today"}),e.jsx(Ie,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:X.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All processes"})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Recent Activity"}),e.jsx(Ee,{children:"Latest check-in and check-out activities"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:F.slice(0,5).map(ce=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:z(ce.entryIcon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:ce.entryTitle}),e.jsx("p",{className:"text-sm text-gray-500",children:ce.entryDescription})]}),e.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:new Date(ce.createdAt).toLocaleTimeString()})]},ce.id))})})]})]})},Ce=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Guest Check-ins"}),e.jsxs(M,{onClick:()=>d(!0),children:[e.jsx(na,{className:"h-4 w-4 mr-2"}),"New Check-in"]})]}),e.jsx("div",{className:"grid gap-6",children:y?e.jsx("div",{className:"text-center py-8",children:"Loading check-ins..."}):P.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No check-ins found"}):P.map(te=>e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:te.guestName}),e.jsxs(Ee,{children:["Check-in: ",new Date(te.checkInDate).toLocaleDateString()," â€¢",te.numberOfGuests," guest",te.numberOfGuests>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C(te.taskStatus),te.taskStatus!=="completed"&&e.jsxs(M,{size:"sm",onClick:()=>B.mutate(te.id),disabled:B.isPending,children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm font-medium",children:"Contact Info"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[te.guestEmail&&e.jsxs("div",{children:["ðŸ“§ ",te.guestEmail]}),te.guestPhone&&e.jsxs("div",{children:["ðŸ“ž ",te.guestPhone]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm font-medium",children:"Deposit"}),e.jsx("div",{className:"text-sm text-gray-600",children:te.depositType==="none"?"No deposit":e.jsxs("div",{children:[te.depositType.toUpperCase(),": ",te.depositAmount," ",te.depositCurrency]})})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm font-medium",children:"Meter Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:te.meterReading?e.jsxs("div",{children:[te.meterReading," kWh",te.meterReadingMethod==="ocr_auto"&&te.ocrConfidence&&e.jsxs("div",{className:"text-xs text-green-600",children:["OCR: ",parseFloat(te.ocrConfidence).toFixed(1),"% confidence"]})]}):"Not recorded"})]})]}),te.passportPhotos&&te.passportPhotos.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Passport Documentation"}),e.jsx("div",{className:"flex space-x-2 mt-2",children:te.passportPhotos.map((we,ve)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:we,alt:`Passport ${ve+1}`,className:"w-16 h-16 object-cover rounded border cursor-pointer",onClick:()=>window.open(we,"_blank")}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:ve+1})]},ve))}),te.passportNumbers&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Passport Numbers: ",te.passportNumbers.join(", ")]})]}),te.checkInNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:te.checkInNotes})]}),te.completedAt&&e.jsxs("div",{className:"mt-4 text-sm text-green-600",children:["âœ… Completed on ",new Date(te.completedAt).toLocaleString()," by ",te.staffName||te.completedBy]})]})]},te.id))})]}),H=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Guest Check-outs"}),e.jsxs(M,{onClick:()=>m(!0),children:[e.jsx(na,{className:"h-4 w-4 mr-2 rotate-180"}),"New Check-out"]})]}),e.jsx("div",{className:"grid gap-6",children:j?e.jsx("div",{className:"text-center py-8",children:"Loading check-outs..."}):k.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No check-outs found"}):k.map(te=>e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"text-lg",children:["Check-out #",te.id]}),e.jsxs(Ee,{children:["Check-out: ",new Date(te.checkOutDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C(te.taskStatus),te.taskStatus!=="completed"&&e.jsxs(M,{size:"sm",onClick:()=>G.mutate(te.id),disabled:G.isPending,children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Complete"]}),te.taskStatus==="completed"&&te.refundStatus==="pending"&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{o(te),x(!0)},children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Process Refund"]})]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm font-medium",children:"Electricity Usage"}),e.jsx("div",{className:"text-sm text-gray-600",children:te.unitsUsed?e.jsxs("div",{children:[te.unitsUsed," kWh used",e.jsxs("div",{className:"text-xs",children:["@ ",te.ratePerKwh," THB/kWh"]})]}):"Not calculated"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm font-medium",children:"Electricity Cost"}),e.jsx("div",{className:"text-sm text-gray-600",children:te.totalElectricityCost?e.jsxs("div",{className:"font-medium text-orange-600",children:[te.totalElectricityCost," THB"]}):"Not calculated"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm font-medium",children:"Billing Method"}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx(U,{variant:"outline",className:te.electricityBilling==="included"?"bg-green-50 text-green-700":te.electricityBilling==="guest_pays"?"bg-orange-50 text-orange-700":"bg-blue-50 text-blue-700",children:te.electricityBilling.replace("_"," ").toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm font-medium",children:"Final Refund"}),e.jsx("div",{className:"text-sm text-gray-600",children:te.finalRefundAmount?e.jsxs("div",{className:"font-medium text-green-600",children:[te.finalRefundAmount," THB"]}):"Pending calculation"})]})]}),te.finalMeterReading&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Final Meter Reading"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[te.finalMeterReading," kWh",te.finalMeterReadingMethod==="ocr_auto"&&te.finalOcrConfidence&&e.jsxs("span",{className:"text-xs text-green-600 ml-2",children:["(OCR: ",parseFloat(te.finalOcrConfidence).toFixed(1),"% confidence)"]})]})]}),te.discounts&&parseFloat(te.discounts)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Discounts Applied"}),e.jsxs("div",{className:"text-sm text-green-600",children:["-",te.discounts," THB",te.discountReason&&e.jsx("div",{className:"text-xs text-gray-500",children:te.discountReason})]})]}),te.damageCosts&&parseFloat(te.damageCosts)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Damage Costs"}),e.jsxs("div",{className:"text-sm text-red-600",children:["+",te.damageCosts," THB",te.damageCostReason&&e.jsx("div",{className:"text-xs text-gray-500",children:te.damageCostReason})]})]}),te.refundStatus==="processed"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Refund Status"}),e.jsxs("div",{className:"text-sm text-green-600",children:["âœ… Processed via ",te.refundMethod?.toUpperCase()," on ",te.refundProcessedAt?new Date(te.refundProcessedAt).toLocaleString():"N/A",te.refundReceiptUrl&&e.jsxs(M,{size:"sm",variant:"link",className:"h-auto p-0 ml-2",onClick:()=>window.open(te.refundReceiptUrl,"_blank"),children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),"View Receipt"]})]})]}),te.checkOutNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:te.checkOutNotes})]})]})]},te.id))})]}),_=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Check-in/Check-out Tasks"}),e.jsx(U,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"Demo Mode"})]}),e.jsx("div",{className:"grid gap-4",children:N?e.jsx("div",{className:"text-center py-8",children:"Loading tasks..."}):R.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No tasks found"}):R.map(te=>e.jsx(D,{children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[V(te.taskType),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:te.taskTitle}),e.jsx("p",{className:"text-sm text-gray-500",children:te.taskDescription})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{variant:"outline",className:te.priority==="high"?"bg-red-50 text-red-700":te.priority==="normal"?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-700",children:te.priority.toUpperCase()}),C(te.status)]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["Assigned to: ",e.jsx("span",{className:"font-medium",children:te.assignedTo}),te.dueDate&&e.jsxs("span",{className:"ml-4",children:["Due: ",new Date(te.dueDate).toLocaleDateString()]})]}),te.requiresApproval&&e.jsx("div",{className:"mt-2",children:e.jsx(U,{variant:"outline",className:"bg-yellow-50 text-yellow-700",children:"Requires Approval"})})]})},te.id))})]}),se=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Electricity & OCR Settings"}),e.jsx(Ee,{children:"Configure default rates and OCR preferences for this property"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"rate-per-kwh",children:"Default Rate per kWh (THB)"}),e.jsx(Q,{id:"rate-per-kwh",type:"number",step:"0.01",defaultValue:"7.00"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"currency",children:"Currency"}),e.jsxs(ae,{defaultValue:"THB",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"THB",children:"THB - Thai Baht"}),e.jsx(A,{value:"USD",children:"USD - US Dollar"}),e.jsx(A,{value:"EUR",children:"EUR - Euro"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"ocr-provider",children:"OCR Provider"}),e.jsxs(ae,{defaultValue:"openai_vision",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"manual",children:"Manual Entry Only"}),e.jsx(A,{value:"openai_vision",children:"OpenAI Vision API"}),e.jsx(A,{value:"google_vision",children:"Google Vision API"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"billing-default",children:"Default Billing Method"}),e.jsxs(ae,{defaultValue:"included",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"included",children:"Electricity Included"}),e.jsx(A,{value:"guest_pays",children:"Guest Pays"}),e.jsx(A,{value:"company_compensates",children:"Company Compensates"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",children:"Reset to Defaults"}),e.jsxs(M,{children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Notification Preferences"}),e.jsx(Ee,{children:"Configure when to receive notifications about check-in/out activities"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-base",children:"New Check-in Created"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when staff creates a new check-in"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-base",children:"Check-out Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when a check-out process is completed"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-base",children:"Refund Requires Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when a refund needs management approval"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-base",children:"High Priority Tasks"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified about urgent check-in/out tasks"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{children:"Save Preferences"})})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(na,{className:"h-8 w-8 mr-3 text-blue-600"}),"Guest Check-In / Check-Out Tracker"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Automated guest arrival and departure management with OCR meter reading and refund calculations"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"h-4 w-4 text-gray-500"}),e.jsxs(ae,{value:r.toString(),onValueChange:te=>n(parseInt(te)),children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{})}),e.jsx(ne,{children:I.map(te=>e.jsx(A,{value:te.id.toString(),children:te.name},te.id))})]})]})})]})}),e.jsxs(xt,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsxs(de,{value:"overview",className:"flex items-center",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(de,{value:"check-ins",className:"flex items-center",children:[e.jsx(na,{className:"h-4 w-4 mr-2"}),"Check-ins"]}),e.jsxs(de,{value:"check-outs",className:"flex items-center",children:[e.jsx(na,{className:"h-4 w-4 mr-2 rotate-180"}),"Check-outs"]}),e.jsxs(de,{value:"tasks",className:"flex items-center",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Demo Tasks"]}),e.jsxs(de,{value:"settings",className:"flex items-center",children:[e.jsx(es,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(me,{value:"overview",children:e.jsx(le,{})}),e.jsx(me,{value:"check-ins",children:e.jsx(Ce,{})}),e.jsx(me,{value:"check-outs",children:e.jsx(H,{})}),e.jsx(me,{value:"tasks",children:e.jsx(_,{})}),e.jsx(me,{value:"settings",children:e.jsx(se,{})})]})]}),e.jsx(Ge,{open:c,onOpenChange:d,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create New Check-in"}),e.jsx(Ct,{children:"Register a new guest arrival with passport documentation and meter reading"})]}),e.jsxs("form",{onSubmit:te=>{te.preventDefault();const we=new FormData(te.target);W.mutate({propertyId:r,guestName:we.get("guestName"),guestEmail:we.get("guestEmail"),guestPhone:we.get("guestPhone"),numberOfGuests:parseInt(we.get("numberOfGuests")||"1"),checkInDate:we.get("checkInDate"),depositType:we.get("depositType"),depositAmount:we.get("depositAmount"),depositCurrency:we.get("depositCurrency")||"THB",meterReading:we.get("meterReading"),meterReadingMethod:we.get("meterReadingMethod"),checkInNotes:we.get("checkInNotes"),taskStatus:"pending"})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guestName",children:"Guest Name *"}),e.jsx(Q,{id:"guestName",name:"guestName",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"numberOfGuests",children:"Number of Guests"}),e.jsx(Q,{id:"numberOfGuests",name:"numberOfGuests",type:"number",defaultValue:"1",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guestEmail",children:"Email"}),e.jsx(Q,{id:"guestEmail",name:"guestEmail",type:"email"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"guestPhone",children:"Phone"}),e.jsx(Q,{id:"guestPhone",name:"guestPhone"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"checkInDate",children:"Check-in Date *"}),e.jsx(Q,{id:"checkInDate",name:"checkInDate",type:"datetime-local",defaultValue:new Date().toISOString().slice(0,16),required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"depositType",children:"Deposit Type"}),e.jsxs(ae,{name:"depositType",defaultValue:"none",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"none",children:"No Deposit"}),e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"digital",children:"Digital/Card"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"depositAmount",children:"Deposit Amount"}),e.jsx(Q,{id:"depositAmount",name:"depositAmount",type:"number",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"depositCurrency",children:"Currency"}),e.jsxs(ae,{name:"depositCurrency",defaultValue:"THB",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"THB",children:"THB"}),e.jsx(A,{value:"USD",children:"USD"}),e.jsx(A,{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"meterReading",children:"Meter Reading (kWh)"}),e.jsx(Q,{id:"meterReading",name:"meterReading",type:"number",step:"0.1"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"meterReadingMethod",children:"Reading Method"}),e.jsxs(ae,{name:"meterReadingMethod",defaultValue:"manual",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"checkInNotes",children:"Check-in Notes"}),e.jsx(ct,{id:"checkInNotes",name:"checkInNotes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:W.isPending,children:W.isPending?"Creating...":"Create Check-in"})]})]})]})}),e.jsx(Ge,{open:u,onOpenChange:m,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create New Check-out"}),e.jsx(Ct,{children:"Process guest departure with final meter reading and refund calculation"})]}),e.jsxs("form",{onSubmit:te=>{te.preventDefault();const we=new FormData(te.target);E.mutate({propertyId:r,checkInId:parseInt(we.get("checkInId")),checkOutDate:we.get("checkOutDate"),finalMeterReading:we.get("finalMeterReading"),finalMeterReadingMethod:we.get("finalMeterReadingMethod"),electricityBilling:we.get("electricityBilling"),discounts:we.get("discounts")||"0",discountReason:we.get("discountReason"),damageCosts:we.get("damageCosts")||"0",damageCostReason:we.get("damageCostReason"),checkOutNotes:we.get("checkOutNotes"),taskStatus:"pending"})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"checkInId",children:"Associated Check-in *"}),e.jsxs(ae,{name:"checkInId",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select check-in..."})}),e.jsx(ne,{children:P.filter(te=>te.taskStatus==="completed").map(te=>e.jsxs(A,{value:te.id.toString(),children:["#",te.id," - ",te.guestName]},te.id))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"checkOutDate",children:"Check-out Date *"}),e.jsx(Q,{id:"checkOutDate",name:"checkOutDate",type:"datetime-local",defaultValue:new Date().toISOString().slice(0,16),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"finalMeterReading",children:"Final Meter Reading (kWh) *"}),e.jsx(Q,{id:"finalMeterReading",name:"finalMeterReading",type:"number",step:"0.1",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"finalMeterReadingMethod",children:"Reading Method"}),e.jsxs(ae,{name:"finalMeterReadingMethod",defaultValue:"manual",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"manual",children:"Manual Entry"}),e.jsx(A,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(A,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"electricityBilling",children:"Electricity Billing Method *"}),e.jsxs(ae,{name:"electricityBilling",defaultValue:"included",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"included",children:"Electricity Included in Stay"}),e.jsx(A,{value:"guest_pays",children:"Guest Pays for Usage"}),e.jsx(A,{value:"company_compensates",children:"Company Compensates"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"discounts",children:"Discounts (THB)"}),e.jsx(Q,{id:"discounts",name:"discounts",type:"number",step:"0.01",defaultValue:"0"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"damageCosts",children:"Damage Costs (THB)"}),e.jsx(Q,{id:"damageCosts",name:"damageCosts",type:"number",step:"0.01",defaultValue:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"discountReason",children:"Discount Reason"}),e.jsx(Q,{id:"discountReason",name:"discountReason",placeholder:"e.g., Long stay discount"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"damageCostReason",children:"Damage Cost Reason"}),e.jsx(Q,{id:"damageCostReason",name:"damageCostReason",placeholder:"e.g., Broken towel rack"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"checkOutNotes",children:"Check-out Notes"}),e.jsx(ct,{id:"checkOutNotes",name:"checkOutNotes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:E.isPending,children:E.isPending?"Creating...":"Create Check-out"})]})]})]})}),e.jsx(Ge,{open:h,onOpenChange:x,children:e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Process Deposit Refund"}),e.jsxs(Ct,{children:["Complete the refund process for check-out #",l?.id]})]}),l&&e.jsxs("form",{onSubmit:te=>{te.preventDefault();const we=new FormData(te.target);J.mutate({id:l.id,refundMethod:we.get("refundMethod"),refundReceiptUrl:we.get("refundReceiptUrl")})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Refund Summary"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Deposit Paid: ",e.jsxs("span",{className:"font-medium",children:[l.depositPaid," THB"]})]}),e.jsxs("div",{children:["Electricity Cost: ",e.jsxs("span",{className:"font-medium text-orange-600",children:["-",l.electricityCost," THB"]})]}),l.discounts&&parseFloat(l.discounts)>0&&e.jsxs("div",{children:["Discounts: ",e.jsxs("span",{className:"font-medium text-green-600",children:["+",l.discounts," THB"]})]}),l.damageCosts&&parseFloat(l.damageCosts)>0&&e.jsxs("div",{children:["Damage Costs: ",e.jsxs("span",{className:"font-medium text-red-600",children:["-",l.damageCosts," THB"]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"font-medium text-lg",children:["Final Refund: ",e.jsxs("span",{className:"text-green-600",children:[l.finalRefundAmount," THB"]})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"refundMethod",children:"Refund Method *"}),e.jsxs(ae,{name:"refundMethod",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select refund method..."})}),e.jsxs(ne,{children:[e.jsx(A,{value:"cash",children:"Cash"}),e.jsx(A,{value:"bank",children:"Bank Transfer"}),e.jsx(A,{value:"digital",children:"Digital Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"refundReceiptUrl",children:"Receipt Photo URL (Optional)"}),e.jsx(Q,{id:"refundReceiptUrl",name:"refundReceiptUrl",placeholder:"Upload receipt photo..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J.isPending,children:J.isPending?"Processing...":"Process Refund"})]})]})]})})]})}function CS(){const[,t]=or(),[s,r]=v.useState(et(new Date,"yyyy-MM-dd")),[n,a]=v.useState("all"),[i,l]=v.useState(!1),[o,c]=v.useState(!1),{data:d}=xe({queryKey:["/api/properties"]}),{data:u,isLoading:m,refetch:h}=xe({queryKey:["/api/daily-operations/summary",s],queryFn:async()=>{const E=await fetch(`/api/daily-operations/summary/${s}`);if(!E.ok)throw new Error("Failed to fetch summary");return E.json()},enabled:!!s,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:x,isLoading:f}=xe({queryKey:["/api/daily-operations/staff",s],queryFn:async()=>{const E=await fetch(`/api/daily-operations/staff/${s}`);if(!E.ok)throw new Error("Failed to fetch staff");return E.json()},enabled:!!s&&!!u,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:p,isLoading:g}=xe({queryKey:["/api/daily-operations/properties",s],queryFn:async()=>{const E=await fetch(`/api/daily-operations/properties/${s}`);if(!E.ok)throw new Error("Failed to fetch properties");return E.json()},enabled:!!s&&!!u,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:y,isLoading:b}=xe({queryKey:["/api/daily-operations/tasks",s],queryFn:async()=>{const E=await fetch(`/api/daily-operations/tasks/${s}`);if(!E.ok)throw new Error("Failed to fetch tasks");return E.json()},enabled:!!s&&!!u,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),j=Te({mutationFn:async E=>await Ne("POST",`/api/daily-operations/refresh/${E}`),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/daily-operations"]})}}),w=async()=>{c(!0);try{await j.mutateAsync(s)}finally{c(!1)}},N=()=>{const E=et(jh(new Date(s),1),"yyyy-MM-dd"),B=et(rr(new Date(s),1),"yyyy-MM-dd");return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(E),children:"Previous Day"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(et(new Date,"yyyy-MM-dd")),children:"Today"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(B),children:"Next Day"})]})},S=E=>{switch(E?.toLowerCase()){case"cleaning":return"ðŸ§¹";case"pool":return"ðŸŠ";case"garden":return"ðŸŒ¿";case"maintenance":return"ðŸ”§";default:return"ðŸ“‹"}},O=E=>{const B={completed:"bg-green-100 text-green-800","in-progress":"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800"};return e.jsx(U,{className:B[E]||"bg-gray-100 text-gray-800",children:E.replace("-"," ").toUpperCase()})},P=E=>{const B={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return e.jsx(U,{className:B[E]||"bg-gray-100 text-gray-800",children:E.toUpperCase()})},k=E=>E?n==="all"?E:E.filter(B=>String(B.propertyId)===n):[],R=k(p),F=k(y),I=n==="all"?x:x?.filter(E=>E.tasks?.some(B=>String(B.propertyId)===n));return m?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((E,B)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},B))}),e.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx("div",{className:"absolute top-3 left-0 z-50",children:e.jsx(Uc,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-10 space-y-8 pt-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 pt-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold flex items-center gap-2 whitespace-nowrap",children:[e.jsx(V0,{className:"h-6 w-6 lg:h-8 lg:w-8"}),"Daily Operations"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:et(new Date(s),"EEEE, MMMM do, yyyy")})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 lg:justify-end",children:[e.jsxs(gl,{open:i,onOpenChange:l,children:[e.jsx(jl,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:Be("justify-start text-left font-normal",!s&&"text-muted-foreground"),"data-testid":"button-date-picker",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),s?et(new Date(s),"PPP"):"Pick a date"]})}),e.jsx(Ti,{className:"w-auto p-0",align:"end",children:e.jsx(Ai,{mode:"single",selected:new Date(s),onSelect:E=>{E&&(r(et(E,"yyyy-MM-dd")),l(!1))},initialFocus:!0})})]}),e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsxs(re,{className:"w-[200px]","data-testid":"select-property-filter",children:[e.jsx(Dn,{className:"mr-2 h-4 w-4"}),e.jsx(ie,{placeholder:"All Properties"})]}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),d?.map(E=>e.jsx(A,{value:String(E.id),children:E.name||`Property ${E.id}`},E.id))]})]}),N(),e.jsxs(M,{onClick:w,disabled:o,variant:"outline",size:"sm","data-testid":"button-refresh",children:[e.jsx(Ut,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Refresh Data"]})]})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(Li,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.totalTasksAssigned}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned across all departments"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Staff Scheduled"}),e.jsx(ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.totalStaffScheduled}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for operations"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Urgency Alerts"}),e.jsx(St,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:u.overdueTasks+u.uncleanedCheckinProperties+u.unassignedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires immediate attention"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Properties Active"}),e.jsx(At,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n==="all"?p?.length||0:R?.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n==="all"?"With scheduled operations":"Filtered property"})]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"w-full mt-8",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5 mb-6",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"departments",children:"Departments"}),e.jsx(de,{value:"staff",children:"Staff"}),e.jsx(de,{value:"properties",children:"Properties"}),e.jsx(de,{value:"tasks",children:"Task Details"})]}),e.jsx(me,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Department Breakdown"}),e.jsx(Ee,{children:"Task completion by department"})]}),e.jsx(T,{className:"space-y-4",children:u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"ðŸ§¹ Cleaning"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[u.cleaningCompleted,"/",u.cleaningTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${u.cleaningTasks>0?u.cleaningCompleted/u.cleaningTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"ðŸŠ Pool"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[u.poolCompleted,"/",u.poolTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-cyan-600 h-2 rounded-full",style:{width:`${u.poolTasks>0?u.poolCompleted/u.poolTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"ðŸŒ¿ Garden"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[u.gardenCompleted,"/",u.gardenTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${u.gardenTasks>0?u.gardenCompleted/u.gardenTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"ðŸ”§ Maintenance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[u.maintenanceCompleted,"/",u.maintenanceTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${u.maintenanceTasks>0?u.maintenanceCompleted/u.maintenanceTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"ðŸ“‹ General"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[u.generalCompleted,"/",u.generalTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${u.generalTasks>0?u.generalCompleted/u.generalTasks*100:0}%`}})})]})]})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-5 w-5 text-red-500"}),"Urgency Alerts"]}),e.jsx(Ee,{children:"Items requiring immediate attention"})]}),e.jsx(T,{className:"space-y-3",children:u&&e.jsxs(e.Fragment,{children:[u.overdueTasks>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"text-red-800",children:"Overdue Tasks"}),e.jsx(U,{className:"bg-red-100 text-red-800",children:u.overdueTasks})]}),u.uncleanedCheckinProperties>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("span",{className:"text-yellow-800",children:"Uncleaned Check-ins"}),e.jsx(U,{className:"bg-yellow-100 text-yellow-800",children:u.uncleanedCheckinProperties})]}),u.unassignedTasks>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("span",{className:"text-orange-800",children:"Unassigned Tasks"}),e.jsx(U,{className:"bg-orange-100 text-orange-800",children:u.unassignedTasks})]}),u.tasksWithoutProof>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-blue-800",children:"Tasks Missing Proof"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:u.tasksWithoutProof})]}),u.overdueTasks===0&&u.uncleanedCheckinProperties===0&&u.unassignedTasks===0&&u.tasksWithoutProof===0&&e.jsxs("div",{className:"flex items-center justify-center p-4 text-green-600",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),"All operations on track"]})]})})]})]})}),e.jsx(me,{value:"departments",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u&&e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"flex items-center gap-2",children:"ðŸ§¹ Cleaning Department"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:u.cleaningTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:u.cleaningCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[u.cleaningTasks>0?Math.round(u.cleaningCompleted/u.cleaningTasks*100):0,"%"]})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"flex items-center gap-2",children:"ðŸ”§ Maintenance Department"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:u.maintenanceTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:u.maintenanceCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[u.maintenanceTasks>0?Math.round(u.maintenanceCompleted/u.maintenanceTasks*100):0,"%"]})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"flex items-center gap-2",children:"ðŸŠ Pool Department"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:u.poolTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:u.poolCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[u.poolTasks>0?Math.round(u.poolCompleted/u.poolTasks*100):0,"%"]})]})]})})]})]})})}),e.jsx(me,{value:"staff",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Staff Assignments"}),e.jsx(Ee,{children:"Daily staff scheduling and workload"})]}),e.jsx(T,{children:f?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):I&&I.length>0?e.jsx("div",{className:"space-y-4",children:I.map(E=>e.jsxs("div",{className:"border rounded-lg p-4","data-testid":`card-staff-${E.staffId}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold",children:E.staffName||`Staff #${E.staffId}`}),e.jsx(U,{className:E.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:E.isAvailable?"Available":"Unavailable"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Shift:"}),e.jsx("p",{children:E.shiftStart&&E.shiftEnd?`${E.shiftStart} - ${E.shiftEnd}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks Assigned:"}),e.jsx("p",{className:"font-semibold",children:E.totalTasksAssigned})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks Completed:"}),e.jsx("p",{className:"font-semibold text-green-600",children:E.totalTasksCompleted})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Department Focus:"}),e.jsx("p",{children:E.departmentFocus||"General"})]})]}),E.notes&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"})," ",E.notes]})]},E.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No staff assignments found for this date"})})]})}),e.jsx(me,{value:"properties",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Property Operations"}),e.jsx(Ee,{children:"Daily property status and activities"})]}),e.jsx(T,{children:g?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):R&&R.length>0?e.jsx("div",{className:"space-y-4",children:R.map(E=>e.jsxs("div",{className:"border rounded-lg p-4","data-testid":`card-property-${E.propertyId}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:E.propertyName||`Property #${E.propertyId}`}),E.propertyAddress&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"}),E.propertyAddress]})]}),e.jsxs("div",{className:"flex gap-2",children:[O(E.operationStatus),E.isUrgent&&e.jsxs(U,{className:"bg-red-100 text-red-800",children:[e.jsx(St,{className:"h-3 w-3 mr-1"}),"Urgent"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Check-in/out:"}),e.jsxs("div",{className:"flex gap-2",children:[E.hasCheckin&&e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"Check-in"}),E.hasCheckout&&e.jsx(U,{className:"bg-purple-100 text-purple-800",children:"Check-out"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cleaning:"}),e.jsx("p",{className:E.cleaningCompleted?"text-green-600 font-semibold":E.needsCleaning?"text-red-600 font-semibold":"",children:E.cleaningCompleted?"Completed":E.needsCleaning?"Required":"Not needed"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Maintenance:"}),e.jsxs("p",{children:[E.maintenanceCompleted,"/",E.maintenanceTasks]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Services:"}),e.jsxs("p",{children:[E.recurringCompleted,"/",E.recurringServices]})]})]}),E.urgencyReason&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm",children:[e.jsx("span",{className:"text-red-800 font-semibold",children:"Urgency:"})," ",E.urgencyReason.replace("_"," ")]}),E.statusNotes&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"})," ",E.statusNotes]})]},E.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No property operations found for this date"})})]})}),e.jsx(me,{value:"tasks",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Task Details"}),e.jsx(Ee,{children:"All tasks scheduled for this date"})]}),e.jsx(T,{children:b?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):F&&F.length>0?e.jsx("div",{className:"space-y-4",children:F.map(E=>e.jsxs("div",{className:"border rounded-lg p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(`/tasks?taskId=${E.id}`),"data-testid":`card-task-${E.id}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[S(E.department||"general")," ",E.title,e.jsx(Tr,{className:"h-4 w-4 text-muted-foreground"})]}),E.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:E.description})]}),e.jsxs("div",{className:"flex gap-2",children:[O(E.status),P(E.priority),E.isOverdue&&e.jsxs(U,{className:"bg-red-100 text-red-800",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"Overdue"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Property:"}),e.jsx("p",{children:E.propertyName||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Assigned to:"}),e.jsx("p",{children:E.assignedUserName||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),e.jsx("p",{children:E.dueDate?et(new Date(E.dueDate),"MMM dd, HH:mm"):"No deadline"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Proof Photos:"}),e.jsx("p",{className:E.hasProof?"text-green-600":"text-red-600",children:E.hasProof?"Available":"Missing"})]})]})]},E.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tasks found for this date"})})]})})]})]})]})}var Hb="Progress",Kb=100,[CW,UAe]=er(Hb),[kW,PW]=CW(Hb),RR=v.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=AW,...l}=t;(a||a===0)&&!kS(a)&&console.error(TW(`${a}`,"Progress"));const o=kS(a)?a:Kb;n!==null&&!PS(n,o)&&console.error(DW(`${n}`,"Progress"));const c=PS(n,o)?n:null,d=ex(c)?i(c,o):void 0;return e.jsx(kW,{scope:r,value:c,max:o,children:e.jsx(Je.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":ex(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":$R(c,o),"data-value":c??void 0,"data-max":o,...l,ref:s})})});RR.displayName=Hb;var _R="ProgressIndicator",IR=v.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=PW(_R,r);return e.jsx(Je.div,{"data-state":$R(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});IR.displayName=_R;function AW(t,s){return`${Math.round(t/s*100)}%`}function $R(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function ex(t){return typeof t=="number"}function kS(t){return ex(t)&&!isNaN(t)&&t>0}function PS(t,s){return ex(t)&&!isNaN(t)&&t<=s&&t>=0}function TW(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Kb}\`.`}function DW(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Kb} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var FR=RR,OW=IR;const dn=v.forwardRef(({className:t,value:s,...r},n)=>e.jsx(FR,{ref:n,className:Be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(OW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));dn.displayName=FR.displayName;function EW({title:t,showBackButton:s=!0,backPath:r,roleBasedActions:n}){const{user:a}=Mr();or();const[i,l]=v.useState(!0),[o,c]=v.useState("THB"),d=()=>{window.location.href="/api/logout"},u=f=>{switch(f){case"admin":return"Administrator";case"portfolio-manager":return"Portfolio Manager";case"owner":return"Property Owner";case"staff":return"Staff Member";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";case"guest":return"Guest";default:return f}},m=f=>{switch(f){case"admin":return"bg-red-500";case"portfolio-manager":return"bg-blue-500";case"owner":return"bg-green-500";case"staff":return"bg-purple-500";case"retail-agent":return"bg-orange-500";case"referral-agent":return"bg-yellow-500";case"guest":return"bg-gray-500";default:return"bg-gray-500"}},h=()=>{if(r)return r;switch(a?.role){case"admin":return"/";case"portfolio-manager":return"/portfolio-manager-dashboard";case"owner":return"/owner-dashboard";case"staff":return"/staff-dashboard";case"retail-agent":return"/retail-agent-dashboard";case"referral-agent":return"/referral-agent-dashboard";case"guest":return"/enhanced-guest-dashboard";default:return"/"}},x={THB:"à¸¿",USD:"$",EUR:"â‚¬",GBP:"Â£"};return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{href:h(),children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(ti,{className:"h-4 w-4"}),"Back"]})}),e.jsx(us,{href:"/",children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Home"]})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:t}),a&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u(a?.role)," Dashboard"]})]})]}),e.jsx("div",{className:"flex-1 flex justify-center",children:n}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(iu,{children:[e.jsx(lu,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),x[o]," ",o]})}),e.jsxs(Zo,{align:"end",children:[e.jsx(ou,{children:"Select Currency"}),e.jsx(Mi,{}),Object.entries(x).map(([f,p])=>e.jsxs(Fr,{onClick:()=>c(f),className:o===f?"bg-gray-100 dark:bg-gray-700":"",children:[e.jsx("span",{className:"mr-2",children:p}),f," - ",f==="THB"?"Thai Baht":f==="USD"?"US Dollar":f==="EUR"?"Euro":"British Pound",f==="THB"&&e.jsx(U,{variant:"secondary",className:"ml-2",children:"Default"})]},f))]})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>l(!i),className:i?"text-blue-600":"text-gray-400",children:i?e.jsx(Is,{className:"h-4 w-4"}):e.jsx(p4,{className:"h-4 w-4"})}),e.jsxs(iu,{children:[e.jsx(lu,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"gap-2",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx(U,{className:`${m(a?.role)} text-white`,children:u(a?.role)})]})}),e.jsxs(Zo,{align:"end",className:"w-56",children:[e.jsx(ou,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[a?.firstName," ",a?.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a?.email})]})}),e.jsx(Mi,{}),e.jsxs(Fr,{onClick:()=>{try{window.location.href="/settings"}catch(f){console.error("Settings navigation error:",f),window.location.href="/simple-settings"}},className:"w-full flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),"Settings"]}),e.jsx(Mi,{}),e.jsxs(Fr,{onClick:d,className:"text-red-600",children:[e.jsx(vn,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})}function LR(){const[t,s]=v.useState("navigation"),[r,n]=v.useState(!1),a={reservationId:"Demo1234",guestName:"Liam Andersen",property:"Villa Aruna",checkIn:"July 5, 2025",checkOut:"July 10, 2025",electricityUsage:{start:1e3,end:1100,rate:7,total:700},deposit:{amount:8e3,refund:7300}},i=[{id:"navigation",name:"Navigation & UI",description:"Back buttons, logout menus, consistent navigation",completionRate:85,tests:[{id:"nav-1",name:"Unified Top Bar",status:"passed",description:"Consistent navigation bar across all dashboards",details:"âœ“ Back buttons present, âœ“ Logout functionality, âœ“ Role badges"},{id:"nav-2",name:"Currency Selector",status:"passed",description:"THB default with USD/EUR conversion",details:"âœ“ Currency dropdown, âœ“ Default THB, âœ“ Live conversion support"},{id:"nav-3",name:"Notification Toggle",status:"passed",description:"Settings notification toggle in user menu",details:"âœ“ Bell icon toggle, âœ“ Settings integration"},{id:"nav-4",name:"Sidebar Scrolling",status:"warning",description:"Collapsible categories and scrolling",details:"âš  Needs category collapse implementation"},{id:"nav-5",name:"Role-based Access",status:"passed",description:"Proper role routing and permissions",details:"âœ“ Admin, PM, Owner, Staff, Agent, Guest routes"}]},{id:"booking-simulation",name:"Booking Simulation",description:"Demo1234 - Liam Andersen at Villa Aruna testing",completionRate:92,tests:[{id:"book-1",name:"Reservation Data",status:"passed",description:"Demo1234 booking consistency",details:`âœ“ ${a.guestName} at ${a.property}`,route:"/enhanced-guest-dashboard"},{id:"book-2",name:"Electricity Billing",status:"passed",description:"1000â†’1100 kWh @7 THB = 700 THB",details:`âœ“ ${a.electricityUsage.start}â†’${a.electricityUsage.end} kWh = ${a.electricityUsage.total} THB`},{id:"book-3",name:"Deposit Calculation",status:"passed",description:"8000 THB - 700 THB = 7300 THB refund",details:`âœ“ ${a.deposit.amount} THB deposit â†’ ${a.deposit.refund} THB refund`},{id:"book-4",name:"Check-in/out Photos",status:"passed",description:"Passport and property photo uploads",details:"âœ“ Passport documentation, âœ“ Check-in/out photos"},{id:"book-5",name:"Scheduled Services",status:"passed",description:"Pool, garden, chef, cleaning tasks visible",details:"âœ“ Service timeline, âœ“ Guest visibility, âœ“ Status tracking"},{id:"book-6",name:"AI Property Info",status:"passed",description:"Restaurants, beaches, rules recommendations",details:"âœ“ Local recommendations, âœ“ Property rules, âœ“ Area info"},{id:"book-7",name:"Checkout Survey",status:"passed",description:"Guest satisfaction survey enabled",details:"âœ“ Survey form, âœ“ Rating system, âœ“ Feedback collection",route:"/guest-checkout-survey"}]},{id:"task-modules",name:"Task Management",description:"Portfolio Manager, Housekeeping, Pool, Garden dashboards",completionRate:78,tests:[{id:"task-1",name:"Portfolio Manager Scope",status:"passed",description:"PM sees only assigned properties",details:"âœ“ Property filtering, âœ“ Role-based access"},{id:"task-2",name:"Department Dashboards",status:"passed",description:"Housekeeping, Pool, Garden separate tabs",details:"âœ“ Department separation, âœ“ Task categorization"},{id:"task-3",name:"Task Filtering",status:"passed",description:"Date range, type, property filters",details:"âœ“ Multiple filter options, âœ“ Advanced search"},{id:"task-4",name:"Completion Logs",status:"passed",description:"Task history visible per property",details:"âœ“ Historical tracking, âœ“ Property-specific logs"},{id:"task-5",name:"Auto-scheduling",status:"warning",description:"Recurring task generation needs validation",details:"âš  Rules engine needs testing",route:"/auto-scheduling-recurring-task-generator"}]},{id:"utility-system",name:"Utility Management",description:"Bills tracking, provider management, AI alerts",completionRate:88,tests:[{id:"util-1",name:"Service Tracking",status:"passed",description:"Electricity, Internet, Water, Pest control",details:"âœ“ Multiple utility types, âœ“ Provider management"},{id:"util-2",name:"Manual Entry",status:"passed",description:"Provider and account number per villa",details:"âœ“ Property-specific accounts, âœ“ Manual configuration"},{id:"util-3",name:"AI Pattern Alerts",status:"passed",description:"Missed upload notifications (e.g., electric bill by 20th)",details:"âœ“ Smart alerts, âœ“ Pattern recognition, âœ“ Automated notifications"},{id:"util-4",name:"Receipt Upload",status:"passed",description:"Track status: Pending, Paid, Overdue",details:"âœ“ File uploads, âœ“ Status tracking, âœ“ Payment monitoring"},{id:"util-5",name:"Custom Utilities",status:"passed",description:"Gas, Residence Fees custom additions",details:"âœ“ Custom utility types, âœ“ Flexible configuration"}]},{id:"owner-dashboard",name:"Owner Dashboard",description:"Income, expenses, occupancy, service history",completionRate:95,tests:[{id:"owner-1",name:"Monthly Overview",status:"passed",description:"Income, expenses, occupancy metrics",details:"âœ“ Financial summary, âœ“ Occupancy rates, âœ“ Performance metrics"},{id:"owner-2",name:"Utility Log",status:"passed",description:"Complete utility payment history",details:"âœ“ Payment tracking, âœ“ Historical data, âœ“ Cost analysis"},{id:"owner-3",name:"Service History",status:"passed",description:"AC, pool, garden, pest service dates",details:"âœ“ Maintenance timeline, âœ“ Service tracking, âœ“ Next service dates"},{id:"owner-4",name:"Document Center",status:"passed",description:"License, plans, passport uploads",details:"âœ“ Document management, âœ“ Upload system, âœ“ Approval workflow"},{id:"owner-5",name:"Hostaway Sync",status:"passed",description:"API placeholder integration",details:"âœ“ API framework, âœ“ Booking sync ready, âœ“ Platform integration"},{id:"owner-6",name:"Chat Integration",status:"passed",description:"Chat tab when enabled",details:"âœ“ Conditional visibility, âœ“ Communication system"},{id:"owner-7",name:"Payout System",status:"passed",description:"Request payout and balance management",details:"âœ“ Payout requests, âœ“ Balance tracking, âœ“ Payment workflow"}]},{id:"misc-fixes",name:"System Fixes",description:"Duplicate removal, staff modules, consistency",completionRate:70,tests:[{id:"misc-1",name:"Duplicate Modules",status:"warning",description:"Remove duplicate navigation items",details:"âš  Some duplicates detected in sidebar"},{id:"misc-2",name:"Reservation IDs",status:"passed",description:"Consistent Demo1234, Demo1235 usage",details:"âœ“ Standardized demo IDs across all modules"},{id:"misc-3",name:"Staff Salary Module",status:"passed",description:"Emergency task log + advance salary request",details:"âœ“ Task logging, âœ“ Salary advances, âœ“ Emergency workflows"},{id:"misc-4",name:"Back/Home Buttons",status:"passed",description:"All views have navigation buttons",details:"âœ“ Universal back buttons, âœ“ Home navigation"},{id:"misc-5",name:"Data Consistency",status:"warning",description:"Cross-module data alignment",details:"âš  Some modules need data sync validation"}]}],l=async()=>{n(!0),await new Promise(h=>setTimeout(h,3e3)),n(!1)},o=h=>{switch(h){case"passed":return"text-green-600 bg-green-50";case"failed":return"text-red-600 bg-red-50";case"warning":return"text-yellow-600 bg-yellow-50";case"pending":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},c=h=>{switch(h){case"passed":return e.jsx(Ie,{className:"h-4 w-4"});case"failed":return e.jsx(yr,{className:"h-4 w-4"});case"warning":return e.jsx(St,{className:"h-4 w-4"});case"pending":return e.jsx(tt,{className:"h-4 w-4"});default:return e.jsx(tt,{className:"h-4 w-4"})}},d=Math.round(i.reduce((h,x)=>h+x.completionRate,0)/i.length),u=i.reduce((h,x)=>h+x.tests.length,0),m=i.reduce((h,x)=>h+x.tests.filter(f=>f.status==="passed").length,0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[e.jsx(EW,{title:"Sandbox Testing Dashboard",showBackButton:!1,roleBasedActions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{variant:"outline",className:"text-blue-600",children:"Mr. Property Siam Magic Tools"}),e.jsx(U,{variant:"secondary",children:"Testing Mode"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Overall Progress"}),e.jsxs("p",{className:"text-2xl font-bold",children:[d,"%"]})]}),e.jsx(Ot,{className:"h-8 w-8 text-green-600"})]}),e.jsx(dn,{value:d,className:"mt-3"})]})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tests Passed"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m,"/",u]})]}),e.jsx(Ie,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Demo Scenario"}),e.jsx("p",{className:"text-sm font-bold",children:a.reservationId}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.guestName})]}),e.jsx(ot,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Test Categories"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(z0,{className:"h-8 w-8 text-purple-600"})]}),e.jsx(M,{onClick:l,disabled:r,size:"sm",className:"mt-2 w-full",children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"h-3 w-3 mr-1 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xd,{className:"h-3 w-3 mr-1"}),"Run All Tests"]})})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-yellow-600"}),"Active Demo Scenario"]}),e.jsx(Ee,{children:"Testing with consistent demo data across all modules"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reservation"}),e.jsx("p",{className:"font-bold",children:a.reservationId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Guest"}),e.jsx("p",{className:"font-bold",children:a.guestName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Property"}),e.jsx("p",{className:"font-bold",children:a.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stay Period"}),e.jsxs("p",{className:"font-bold",children:[a.checkIn," - ",a.checkOut]})]})]}),e.jsx(Jr,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4 text-blue-600"}),"Electricity Billing Test"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.electricityUsage.start," kWh â†’ ",a.electricityUsage.end," kWh = ",a.electricityUsage.end-a.electricityUsage.start," kWh Ã— ",a.electricityUsage.rate," THB = ",a.electricityUsage.total," THB"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-green-600"}),"Deposit Refund Test"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.deposit.amount," THB deposit - ",a.electricityUsage.total," THB electricity = ",a.deposit.refund," THB refund"]})]})]})]})]}),e.jsxs(xt,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsx(ht,{className:"grid w-full grid-cols-6",children:i.map(h=>e.jsx(de,{value:h.id,className:"text-xs",children:h.name},h.id))}),i.map(h=>e.jsx(me,{value:h.id,className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(L,{children:h.name}),e.jsx(Ee,{children:h.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[h.completionRate,"%"]}),e.jsx(dn,{value:h.completionRate,className:"w-24"})]})]})}),e.jsx(T,{children:e.jsx("div",{className:"grid gap-4",children:h.tests.map(x=>e.jsx("div",{className:`p-4 rounded-lg border ${o(x.status)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c(x.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:x.name}),x.role&&e.jsx(U,{variant:"outline",className:"text-xs",children:x.role})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:x.description}),x.details&&e.jsx("p",{className:"text-xs font-mono bg-white/50 dark:bg-black/20 p-2 rounded",children:x.details})]})]}),x.route&&e.jsx(us,{href:x.route,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1",children:[e.jsx(Tr,{className:"h-3 w-3"}),"Test"]})})]})},x.id))})})]})},h.id))]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Quick Test Access"}),e.jsx(Ee,{children:"Direct links to key testing scenarios"})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(us,{href:"/enhanced-guest-dashboard",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(ot,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Guest Dashboard"})]})}),e.jsx(us,{href:"/enhanced-agent-booking-demo",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(_8,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Agent Demo"})]})}),e.jsx(us,{href:"/guest-checkin-checkout-tracker",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Xe,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Check-in/out"})]})}),e.jsx(us,{href:"/property-utilities-maintenance",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(sm,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Utilities"})]})}),e.jsx(us,{href:"/owner-dashboard",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Jt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Owner Dashboard"})]})}),e.jsx(us,{href:"/staff-dashboard",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(nm,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Staff Dashboard"})]})}),e.jsx(us,{href:"/guest-checkout-survey",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Pn,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Survey System"})]})}),e.jsx(us,{href:"/settings",children:e.jsxs(M,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(ss,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Settings"})]})})]})})]})]})]})}const MW=Object.freeze(Object.defineProperty({__proto__:null,default:LR},Symbol.toStringTag,{value:"Module"})),ho={id:"Demo1234",guestName:"Liam Andersen",propertyName:"Villa Aruna",checkIn:"2025-07-05"},RW=[{id:"spa",name:"Spa & Wellness",icon:ps,keywords:["massage","spa","wellness","treatment"]},{id:"dining",name:"Dining",icon:am,keywords:["dinner","chef","meal","restaurant","food"]},{id:"housekeeping",name:"Housekeeping",icon:Fi,keywords:["cleaning","towels","bed","room","housekeeping"]},{id:"transport",name:"Transportation",icon:em,keywords:["taxi","transfer","airport","car","driver"]},{id:"concierge",name:"Concierge",icon:vs,keywords:["recommendation","booking","tour","tickets"]},{id:"general",name:"General",icon:ha,keywords:["other","help","question","request"]}];function _W(){const{user:t}=Mr(),{toast:s}=st(),r=pt(),[n,a]=v.useState(""),[i,l]=v.useState(null),o=v.useRef(null),c=t?.role==="guest",d=["admin","portfolio-manager","staff"].includes(t?.role||""),{data:u=[],isLoading:m}=xe({queryKey:["/api/guest-portal/chat-messages",ho.id],enabled:!!t}),{data:h=[],isLoading:x}=xe({queryKey:["/api/guest-portal/service-requests",ho.id],enabled:!!t}),{data:f=[],isLoading:p}=xe({queryKey:["/api/guest-portal/notifications"],enabled:d}),g=Te({mutationFn:async O=>Ne("POST","/api/guest-portal/send-message",O),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/guest-portal/chat-messages"]}),r.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),r.invalidateQueries({queryKey:["/api/guest-portal/notifications"]}),a(""),s({title:"Message sent",description:"Your message has been sent successfully."})},onError:O=>{s({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),y=Te({mutationFn:async({requestId:O,action:P,notes:k})=>Ne("POST",`/api/guest-portal/service-requests/${O}/action`,{action:P,notes:k}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),r.invalidateQueries({queryKey:["/api/guest-portal/notifications"]}),l(null),s({title:"Request updated",description:"Service request has been updated successfully."})},onError:O=>{s({title:"Error",description:"Failed to update request. Please try again.",variant:"destructive"})}});v.useEffect(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[u]);const b=()=>{if(!n.trim())return;const O={reservationId:ho.id,messageText:n,senderType:c?"guest":"staff",senderId:t?.id||"demo-user"};g.mutate(O)},j=(O,P)=>{i&&y.mutate({requestId:i.id,action:O,notes:P})},w=new Date(ho.checkIn),N=new Date(w);N.setDate(w.getDate()-7);const S=new Date>=N;return m||x?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})}):c?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Guest Portal"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome back, ",ho.guestName,"! Your stay at ",ho.propertyName]})]}),!S&&e.jsxs(Wn,{className:"mb-6",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsxs(Qn,{children:["Full access unlocks 7 days before check-in (",N.toLocaleDateString(),"). Chat and basic information are available now."]})]}),e.jsxs(xt,{defaultValue:"chat",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-3",children:[e.jsx(de,{value:"chat",children:"ðŸ’¬ Chat & Requests"}),e.jsx(de,{value:"services",children:"âœ¨ Confirmed Services"}),e.jsx(de,{value:"info",disabled:!S,children:"ðŸ“‹ Arrival & Info"})]}),e.jsx(me,{value:"chat",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Qo,{className:"h-5 w-5"}),"Chat with our team"]}),e.jsx(Ee,{children:"Ask questions, request services, or get recommendations. Our AI will help route your requests."})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ic,{className:"h-96 border rounded-lg p-4",children:e.jsxs("div",{className:"space-y-4",children:[u.map(O=>e.jsx("div",{className:`flex gap-3 ${O.senderType==="guest"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex items-start gap-2 max-w-xs lg:max-w-md ${O.senderType==="guest"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:O.senderType==="guest"?e.jsx(zt,{className:"h-4 w-4"}):O.isSystemGenerated?e.jsx(Zn,{className:"h-4 w-4"}):e.jsx(zt,{className:"h-4 w-4"})}),e.jsxs("div",{className:`p-3 rounded-lg ${O.senderType==="guest"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:O.messageText}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(O.createdAt).toLocaleTimeString()})]})]})},O.id)),e.jsx("div",{ref:o})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{placeholder:"Type your message or request...",value:n,onChange:O=>a(O.target.value),onKeyPress:O=>O.key==="Enter"&&b(),className:"flex-1"}),e.jsx(M,{onClick:b,disabled:!n.trim()||g.isPending,children:e.jsx(U0,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:RW.map(O=>{const P=O.icon;return e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>a(`I would like to request ${O.name.toLowerCase()}`),children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),O.name]},O.id)})})]})})]})}),e.jsx(me,{value:"services",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Confirmed Services & Requests"}),e.jsx(Ee,{children:"View all confirmed services and add-ons for your stay"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[h.filter(O=>O.status==="accepted").map(O=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:O.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:O.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(U,{variant:"secondary",children:O.category}),e.jsx(U,{variant:O.billingType==="guest_billable"?"destructive":"default",children:O.billingType})]})]}),e.jsxs(U,{variant:"default",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Confirmed"]})]}),O.scheduledDate&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Scheduled: ",new Date(O.scheduledDate).toLocaleDateString()]})]},O.id)),h.filter(O=>O.status==="accepted").length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ie,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No confirmed services yet"}),e.jsx("p",{className:"text-sm",children:"Request services through the chat to get started"})]})]})})]})}),e.jsx(me,{value:"info",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(sB,{className:"h-5 w-5"}),"Arrival Details"]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Please provide your arrival details for a smooth check-in"}),e.jsx(M,{children:"Update Arrival Info"})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(R8,{className:"h-5 w-5"}),"House Manual"]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Important information about your stay"}),e.jsx(M,{variant:"outline",children:"View Manual"})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"Area Guide"]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Local recommendations and attractions"}),e.jsx(M,{variant:"outline",children:"Explore Area"})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5"}),"Service Schedule"]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Cleaning and maintenance schedule"}),e.jsx(M,{variant:"outline",children:"View Schedule"})]})]})]})})]})]})}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Guest Portal Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage guest communications and service requests"})]}),e.jsxs(xt,{defaultValue:"notifications",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-3",children:[e.jsxs(de,{value:"notifications",children:["ðŸ”” Notifications",f.length>0&&e.jsx(U,{variant:"destructive",className:"ml-2",children:f.length})]}),e.jsx(de,{value:"requests",children:"ðŸ“‹ All Requests"}),e.jsx(de,{value:"chat",children:"ðŸ’¬ Chat Monitor"})]}),e.jsx(me,{value:"notifications",children:e.jsxs("div",{className:"space-y-4",children:[f.map(O=>e.jsxs(D,{className:"border-l-4 border-l-orange-500",children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5"}),"New Service Request"]}),e.jsx(U,{variant:"outline",children:"Pending"})]}),e.jsxs(Ee,{children:["From ",O.guestName," - ",O.propertyName]})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:O.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:O.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>j("accept"),disabled:y.isPending,children:[e.jsx(Sn,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsx(M,{variant:"outline",onClick:()=>l(O),children:"Edit"}),e.jsxs(M,{variant:"destructive",onClick:()=>j("decline"),disabled:y.isPending,children:[e.jsx(yr,{className:"h-4 w-4 mr-2"}),"Decline"]})]})]})})]},O.id)),f.length===0&&e.jsx(D,{children:e.jsxs(T,{className:"text-center py-8",children:[e.jsx(Is,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-gray-500",children:"No pending notifications"})]})})]})}),e.jsx(me,{value:"requests",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"All Service Requests"}),e.jsx(Ee,{children:"Complete history of service requests across all reservations"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[h.map(O=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:O.serviceType}),e.jsx(U,{variant:O.status==="accepted"?"default":O.status==="pending"?"secondary":"destructive",children:O.status})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:O.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:O.guestName}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:O.propertyName}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(O.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 text-right",children:[e.jsx(U,{variant:O.billingType==="guest_billable"?"destructive":"outline",children:O.billingType}),O.estimatedCost&&e.jsxs("span",{className:"text-sm font-semibold",children:["à¸¿",O.estimatedCost]})]})]})},O.id)),h.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(St,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No service requests found"})]})]})})]})}),e.jsx(me,{value:"chat",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Chat Monitor"}),e.jsx(Ee,{children:"Monitor guest conversations and AI-generated requests"})]}),e.jsx(T,{children:e.jsx(ic,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:u.map(O=>e.jsx("div",{className:`p-3 rounded-lg border ${O.senderType==="guest"?"bg-blue-50 dark:bg-blue-950":"bg-gray-50 dark:bg-gray-950"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[O.senderType==="guest"?e.jsx(zt,{className:"h-4 w-4"}):O.isSystemGenerated?e.jsx(Zn,{className:"h-4 w-4"}):e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-sm",children:O.senderType==="guest"?"Guest":O.isSystemGenerated?"AI Assistant":"Staff"})]}),e.jsx("p",{className:"text-sm",children:O.messageText})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(O.createdAt).toLocaleTimeString()})]})},O.id))})})})]})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(D,{className:"w-full max-w-md",children:[e.jsx($,{children:e.jsx(L,{children:"Edit Service Request"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:i.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:i.description})]}),e.jsx(ct,{placeholder:"Add notes or modifications...",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{onClick:()=>j("accept"),disabled:y.isPending,className:"flex-1",children:"Accept"}),e.jsx(M,{variant:"destructive",onClick:()=>j("decline"),disabled:y.isPending,className:"flex-1",children:"Decline"})]}),e.jsx(M,{variant:"outline",onClick:()=>l(null),className:"w-full",children:"Cancel"})]})})]})})]})})}const IW={restaurant:am,beach:mB,viewpoint:Q8,spa:Zd,market:nB,tour:Ju},$W={restaurant:"bg-orange-100 text-orange-800",beach:"bg-blue-100 text-blue-800",viewpoint:"bg-green-100 text-green-800",spa:"bg-purple-100 text-purple-800",market:"bg-yellow-100 text-yellow-800",tour:"bg-red-100 text-red-800"};function FW(){const{toast:t}=st(),s=pt(),[r,n]=v.useState("all"),[a,i]=v.useState(!1),[l,o]=v.useState({preferredCategories:[],travelStyle:"romantic",budgetPreference:"luxury",activityLevel:"relaxing",groupSize:2,hasChildren:!1,specialInterests:[]}),c={reservationId:"Demo1234",guestId:"guest-liam-andersen",propertyId:1,guestName:"Liam Andersen",checkInDate:"2025-07-05",checkOutDate:"2025-07-10",property:{name:"Villa Aruna",location:"Koh Samui, Thailand"}},{data:d=[],isLoading:u}=xe({queryKey:["/api/guest-activity-recommendations",c.propertyId,r],queryFn:()=>{const j=new URLSearchParams;return r!=="all"&&j.append("category",r),j.append("isFeatured","true"),Ne("GET",`/api/guest-activity-recommendations/${c.propertyId}?${j}`)}}),{data:m}=xe({queryKey:["/api/guest-activity-preferences",c.reservationId],queryFn:()=>Ne("GET",`/api/guest-activity-preferences/${c.reservationId}`)}),h=Te({mutationFn:j=>Ne("POST","/api/guest-recommendation-interactions",j),onSuccess:()=>{}}),x=Te({mutationFn:j=>m?Ne("PUT",`/api/guest-activity-preferences/${c.reservationId}`,j):Ne("POST","/api/guest-activity-preferences",{...j,organizationId:"default-org",reservationId:c.reservationId,guestId:c.guestId,propertyId:c.propertyId}),onSuccess:()=>{t({title:"Preferences Updated",description:"Your activity preferences have been saved. We'll show you more personalized recommendations!"}),s.invalidateQueries({queryKey:["/api/guest-activity-preferences"]}),i(!1)}}),f=(j,w,N)=>{h.mutate({organizationId:"default-org",reservationId:c.reservationId,guestId:c.guestId,recommendationId:j.id,interactionType:w,sessionId:`session-${Date.now()}`,deviceType:"desktop",clickedElement:N,viewDuration:w==="view"?30:void 0})},p=()=>{x.mutate({preferredCategories:l.preferredCategories,travelStyle:l.travelStyle,budgetPreference:l.budgetPreference,activityLevel:l.activityLevel,groupSize:l.groupSize,hasChildren:l.hasChildren,specialInterests:l.specialInterests,preferencesSetBy:"guest"})},g=[{value:"all",label:"All Recommendations"},{value:"restaurant",label:"Restaurants"},{value:"beach",label:"Beaches"},{value:"tour",label:"Tours & Activities"},{value:"spa",label:"Spa & Wellness"},{value:"viewpoint",label:"Viewpoints"},{value:"market",label:"Markets & Shopping"}],y=r==="all"?d:d.filter(j=>j.category===r);return(()=>{const j=new Date,w=new Date(c.checkInDate),N=new Date(c.checkOutDate),S=new Date(w);return S.setDate(S.getDate()-3),j>=S&&j<=N})()?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["Discover ",c.property.location]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome ",c.guestName,"! Here are personalized recommendations for your stay at ",c.property.name]})]}),e.jsxs(M,{onClick:()=>i(!0),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Wo,{className:"h-4 w-4"}),"Customize Preferences"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Browse by Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(j=>e.jsx(M,{onClick:()=>n(j.value),variant:r===j.value?"default":"outline",size:"sm",children:j.label},j.value))})]})]}),u?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(j=>e.jsxs(D,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},j))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(j=>{const w=IW[j.category]||vs;return e.jsxs(D,{className:"hover:shadow-xl transition-all duration-300 bg-white",onMouseEnter:()=>f(j,"view"),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-lg flex items-center justify-center",children:e.jsx(w,{className:"h-12 w-12 text-white"})}),j.isFeatured&&e.jsx(U,{className:"absolute top-3 right-3 bg-yellow-500 text-white",children:"Featured"}),e.jsx(U,{className:`absolute top-3 left-3 ${$W[j.category]}`,children:j.category})]}),e.jsxs(T,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:j.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:j.shortDescription}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(vs,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:j.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(tt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:j.operatingHours})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ps,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-gray-600",children:j.estimatedPrice})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:j.tags.slice(0,3).map((N,S)=>e.jsx(U,{variant:"secondary",className:"text-xs",children:N},S))}),e.jsxs("div",{className:"flex gap-2",children:[j.googleMapsLink&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{f(j,"click","maps"),window.open(j.googleMapsLink,"_blank")},children:[e.jsx(Y8,{className:"h-4 w-4 mr-1"}),"Maps"]}),j.websiteUrl&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{f(j,"click","website"),window.open(j.websiteUrl,"_blank")},children:[e.jsx(ma,{className:"h-4 w-4 mr-1"}),"Website"]}),j.phoneNumber&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{f(j,"click","phone"),window.open(`tel:${j.phoneNumber}`,"_blank")},children:[e.jsx(ha,{className:"h-4 w-4 mr-1"}),"Call"]})]}),j.bookingUrl&&e.jsxs(M,{className:"w-full mt-3",onClick:()=>{f(j,"click","booking"),window.open(j.bookingUrl,"_blank")},children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Book Now"]})]})]},j.id)})}),y.length===0&&!u&&e.jsx(D,{children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx(vs,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No recommendations found"}),e.jsx("p",{className:"text-gray-600",children:"Try selecting a different category or customize your preferences."})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(D,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsx(L,{children:"Customize Your Preferences"}),e.jsx(Ee,{children:"Tell us about your interests to get more personalized recommendations"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Preferred Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.slice(1).map(j=>e.jsx(M,{size:"sm",variant:l.preferredCategories?.includes(j.value)?"default":"outline",onClick:()=>{const w=l.preferredCategories||[];w.includes(j.value)?o({...l,preferredCategories:w.filter(N=>N!==j.value)}):o({...l,preferredCategories:[...w,j.value]})},children:j.label},j.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Travel Style"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["romantic","family","adventure","relaxation","cultural"].map(j=>e.jsx(M,{size:"sm",variant:l.travelStyle===j?"default":"outline",onClick:()=>o({...l,travelStyle:j}),children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Budget Preference"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["budget","moderate","luxury"].map(j=>e.jsx(M,{size:"sm",variant:l.budgetPreference===j?"default":"outline",onClick:()=>o({...l,budgetPreference:j}),children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Activity Level"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["relaxing","moderate","active"].map(j=>e.jsx(M,{size:"sm",variant:l.activityLevel===j?"default":"outline",onClick:()=>o({...l,activityLevel:j}),children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{onClick:p,disabled:x.isPending,className:"flex-1",children:x.isPending?"Saving...":"Save Preferences"}),e.jsx(M,{variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(D,{children:[e.jsxs($,{className:"text-center",children:[e.jsx(L,{className:"text-2xl",children:"Activity Recommendations"}),e.jsx(Ee,{children:"Activity recommendations will be available 3 days before your check-in date."})]}),e.jsxs(T,{className:"text-center",children:[e.jsx(Xe,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsxs("p",{className:"text-lg mb-2",children:["Check-in: ",new Date(c.checkInDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recommendations available from: ",new Date(new Date(c.checkInDate).getTime()-3*24*60*60*1e3).toLocaleDateString()]})]})]})})})}function LW(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Help & Support"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," support@hostpilotpro.com"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +1 (555) 123-4567"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Support Hours:"})," 9 AM - 6 PM (Monday - Friday)"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Links"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"â€¢ Property Management Guide"}),e.jsx("p",{children:"â€¢ Booking System Tutorial"}),e.jsx("p",{children:"â€¢ Financial Reports Help"}),e.jsx("p",{children:"â€¢ Task Management Overview"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-green-600",children:"âœ“ All systems operational"}),e.jsx("p",{className:"text-green-600",children:"âœ“ Database connectivity: Good"}),e.jsx("p",{className:"text-green-600",children:"âœ“ API services: Running"})]})]})]})]})}function AS(){const[,t]=or();return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>t("/"),className:"mb-4","data-testid":"button-back-dashboard",children:[e.jsx(ti,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get quick assistance with HostPilotPro - Your property management platform"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5"}),"Contact Support"]}),e.jsx(Ee,{children:"Immediate assistance available"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ha,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"+66 (0) 76-123-456"}),e.jsx(U,{className:"text-xs",children:"24/7 Available"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Sa,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"support@hostpilotpro.com"}),e.jsx(U,{variant:"secondary",className:"text-xs",children:"Response within 2 hours"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qo,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Live Chat"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Available in-app"}),e.jsx(U,{variant:"outline",className:"text-xs",children:"Online now"})]})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"Quick Actions"]}),e.jsx(Ee,{children:"Fast solutions for common tasks"})]}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Start Live Chat Support"]}),e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"View User Guide"]}),e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Knowledge Base"]}),e.jsxs(M,{className:"w-full justify-start",variant:"outline",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Training Videos"]})]})]}),e.jsxs(D,{className:"md:col-span-2",children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Eh,{className:"h-5 w-5"}),"Common Solutions"]}),e.jsx(Ee,{children:"Quick fixes for frequent questions"})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Property Management"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Adding Properties:"})," Go to Property Hub â†’ Add New Property"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Task Assignment:"})," Use Daily Operations â†’ Create Task"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Booking Management:"})," Access via Bookings tab"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Financial Tools"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Invoice Generation:"})," Finance Hub â†’ Invoice Generator"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Revenue Reports:"})," Admin Dashboard â†’ Financial Reports"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Commission Tracking:"})," Finance Engine â†’ Commission System"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"User Management"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Add Users:"})," Admin â†’ User Management â†’ Add User"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Permissions:"})," Click Permissions button next to any user"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Role Changes:"})," Edit user profile and update role"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"AI Assistant"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Captain Cortex:"})," Click the AI button in bottom-right corner"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Smart Queries:"})," Ask about properties, revenue, or tasks"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Report Generation:"})," Request automated insights"]})]})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Platform Status"]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"System Status"}),e.jsx(U,{className:"bg-green-100 text-green-800",children:"All Systems Operational"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"API Response"}),e.jsx(U,{variant:"outline",children:"< 50ms average"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Last Update"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Today, 2:30 PM"})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ha,{className:"h-5 w-5"}),"Emergency Support"]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-red-800",children:"24/7 Emergency Hotline"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:"+66 (0) 76-999-888"}),e.jsx("p",{className:"text-xs text-red-700",children:"For critical system issues or property emergencies"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Technical Support"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:"+66 (0) 76-888-777"}),e.jsx("p",{className:"text-xs text-blue-700",children:"For urgent technical assistance"})]})]})]})]})]})}function BW(){const[t,s]=v.useState(""),r=[{id:"1",title:"Getting Started with HostPilotPro",description:"Learn the basics of property management and initial setup",category:"Getting Started",tags:["setup","basics","onboarding"],readTime:"5 min",difficulty:"beginner"},{id:"2",title:"Managing Properties and Bookings",description:"Complete guide to property setup and booking management",category:"Properties",tags:["properties","bookings","calendar"],readTime:"8 min",difficulty:"beginner"},{id:"3",title:"Finance Intelligence Module",description:"AI-powered financial analysis and business insights",category:"Finance",tags:["finance","ai","analytics","reports"],readTime:"12 min",difficulty:"intermediate"},{id:"4",title:"Staff Management & Payroll",description:"Manage staff salaries, wages, and payroll information",category:"Staff",tags:["staff","payroll","salaries","admin"],readTime:"10 min",difficulty:"intermediate"},{id:"5",title:"Task Automation and Scheduling",description:"Set up automatic task creation and scheduling rules",category:"Tasks",tags:["tasks","automation","scheduling"],readTime:"15 min",difficulty:"advanced"},{id:"6",title:"User Roles and Permissions",description:"Configure user access levels and module permissions",category:"Administration",tags:["users","permissions","roles","security"],readTime:"7 min",difficulty:"intermediate"}],n=[{question:"How do I reset a user's password?",answer:"Navigate to User Management, select the user, and click 'Reset Password'. An email will be sent to the user with reset instructions.",category:"User Management"},{question:"Can I export financial reports?",answer:"Yes! Go to Finance Hub â†’ Finance Intelligence and click 'Export Report' to download PDF or CSV reports with AI insights.",category:"Finance"},{question:"How do I set up automated tasks?",answer:"Go to Task Management â†’ Automation Rules to create recurring tasks based on property events, dates, or booking triggers.",category:"Tasks"},{question:"What's the difference between Admin and Portfolio Manager roles?",answer:"Admins have full system access including user management and system settings. Portfolio Managers can manage properties and view reports but cannot access admin-only features.",category:"Roles"},{question:"How do I add a new property?",answer:"Navigate to Property Management and click 'Add Property'. Fill in the required details including address, amenities, and owner information.",category:"Properties"},{question:"Can I integrate with external booking platforms?",answer:"Yes, HostPilotPro supports integrations with Airbnb, Booking.com, and VRBO through our API connections panel in Settings.",category:"Integrations"}],a=[{title:"Video Tutorials",description:"Watch step-by-step guides",icon:C4,action:()=>window.open("https://youtube.com/@hostpilotpro","_blank")},{title:"Contact Support",description:"Get help from our team",icon:Qo,action:()=>window.open("mailto:support@hostpilotpro.com","_blank")},{title:"Community Forum",description:"Connect with other users",icon:ot,action:()=>window.open("https://community.hostpilotpro.com","_blank")},{title:"System Status",description:"Check service availability",icon:Wa,action:()=>window.open("https://status.hostpilotpro.com","_blank")}],i=r.filter(d=>t===""||d.title.toLowerCase().includes(t.toLowerCase())||d.description.toLowerCase().includes(t.toLowerCase())||d.tags.some(u=>u.toLowerCase().includes(t.toLowerCase()))),l=n.filter(d=>t===""||d.question.toLowerCase().includes(t.toLowerCase())||d.answer.toLowerCase().includes(t.toLowerCase())),o=d=>{switch(d){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},c=d=>{switch(d){case"Properties":return Jt;case"Finance":return Ze;case"Tasks":return Wa;case"Staff":return ot;case"Administration":return ss;default:return dt}};return e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(Eh,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Help Center"})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Find answers, guides, and resources to help you get the most out of HostPilotPro"})]}),e.jsxs("div",{className:"relative mb-8 max-w-md mx-auto",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search help articles and FAQs...",value:t,onChange:d=>s(d.target.value),className:"pl-9"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:a.map((d,u)=>e.jsx(D,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:d.action,children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx(d.icon,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-medium mb-1",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600",children:d.description}),e.jsx(Tr,{className:"h-3 w-3 mx-auto mt-2 text-gray-400"})]})},u))}),e.jsxs(xt,{defaultValue:"articles",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-2",children:[e.jsx(de,{value:"articles",children:"Help Articles"}),e.jsx(de,{value:"faq",children:"FAQ"})]}),e.jsx(me,{value:"articles",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:i.map(d=>{const u=c(d.category);return e.jsx(D,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:e.jsx(u,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:d.title}),e.jsx(U,{variant:"secondary",className:"text-xs",children:d.category}),e.jsx(U,{className:`text-xs ${o(d.difficulty)}`,children:d.difficulty})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:d.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"h-3 w-3"}),d.readTime]}),e.jsx("div",{className:"flex gap-1",children:d.tags.map(m=>e.jsx(U,{variant:"outline",className:"text-xs",children:m},m))})]})]})]}),e.jsx(h4,{className:"h-5 w-5 text-gray-400"})]})})},d.id)})})}),e.jsx(me,{value:"faq",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:l.map((d,u)=>e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[e.jsx(Eh,{className:"h-5 w-5 text-blue-600"}),d.question]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:d.answer}),e.jsx(U,{variant:"outline",className:"mt-3 text-xs",children:d.category})]})]},u))})})]}),e.jsx(D,{className:"mt-8 bg-blue-50",children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Still need help?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Our support team is here to help you succeed"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(M,{onClick:()=>window.open("mailto:support@hostpilotpro.com","_blank"),children:[e.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Email Support"]}),e.jsxs(M,{variant:"outline",onClick:()=>window.open("tel:+1-555-HOSTPRO","_blank"),children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Call Support"]})]})]})})]})}var Wp="Collapsible",[VW,zAe]=er(Wp),[qW,Gb]=VW(Wp),BR=v.forwardRef((t,s)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:l,...o}=t,[c,d]=Hr({prop:n,defaultProp:a??!1,onChange:l,caller:Wp});return e.jsx(qW,{scope:r,disabled:i,contentId:rn(),open:c,onOpenToggle:v.useCallback(()=>d(u=>!u),[d]),children:e.jsx(Je.div,{"data-state":Qb(c),"data-disabled":i?"":void 0,...o,ref:s})})});BR.displayName=Wp;var VR="CollapsibleTrigger",qR=v.forwardRef((t,s)=>{const{__scopeCollapsible:r,...n}=t,a=Gb(VR,r);return e.jsx(Je.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Qb(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:s,onClick:$e(t.onClick,a.onOpenToggle)})});qR.displayName=VR;var Wb="CollapsibleContent",UR=v.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Gb(Wb,t.__scopeCollapsible);return e.jsx(cr,{present:r||a.open,children:({present:i})=>e.jsx(UW,{...n,ref:s,present:i})})});UR.displayName=Wb;var UW=v.forwardRef((t,s)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=t,l=Gb(Wb,r),[o,c]=v.useState(n),d=v.useRef(null),u=ft(s,d),m=v.useRef(0),h=m.current,x=v.useRef(0),f=x.current,p=l.open||o,g=v.useRef(p),y=v.useRef(void 0);return v.useEffect(()=>{const b=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(b)},[]),Ws(()=>{const b=d.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const j=b.getBoundingClientRect();m.current=j.height,x.current=j.width,g.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),c(n)}},[l.open,n]),e.jsx(Je.div,{"data-state":Qb(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!p,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":f?`${f}px`:void 0,...t.style},children:p&&a})});function Qb(t){return t?"open":"closed"}var zW=BR;const zR=zW,HR=qR,KR=UR,HW=Yt({name:Pe().min(1,"Name is required"),email:Pe().email("Invalid email address"),role:Rs(["admin","portfolio-manager","staff","owner","guest"]),status:Rs(["active","inactive"])}),KW=Yt({name:Pe().min(1,"Name is required"),email:Pe().email("Invalid email address"),role:Rs(["admin","portfolio-manager","staff","owner","guest"]),password:Pe().min(6,"Password must be at least 6 characters")}),nl={"Core Dashboard":{"Admin Dashboard":{view:!0,edit:!0,create:!1,delete:!1},"Portfolio Manager Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Owner Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Staff Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Retail Agent Hub":{view:!0,edit:!1,create:!1,delete:!1}},"Property Management":{"Property CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Property Settings":{view:!0,edit:!0,create:!1,delete:!1},"Property Goals":{view:!0,edit:!0,create:!0,delete:!1},"Property Hub":{view:!0,edit:!1,create:!1,delete:!1},"Property Overview":{view:!0,edit:!1,create:!1,delete:!1}},"Task Management":{"Task CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Task Templates":{view:!0,edit:!0,create:!0,delete:!1},"Task Automation":{view:!0,edit:!0,create:!1,delete:!1},"Daily Operations":{view:!0,edit:!1,create:!1,delete:!1},"Maintenance Tracking":{view:!0,edit:!0,create:!0,delete:!1}},"Booking & Guest Services":{"Booking CRUD":{view:!0,edit:!0,create:!0,delete:!1},"Guest Portal":{view:!0,edit:!1,create:!1,delete:!1},"Check-in/Check-out":{view:!0,edit:!0,create:!1,delete:!1},"Guest Communication":{view:!0,edit:!0,create:!0,delete:!1},"Guest Services":{view:!0,edit:!1,create:!1,delete:!1}},"Financial Management":{"Finance CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Invoice Generator":{view:!0,edit:!0,create:!0,delete:!1},"Finance Engine":{view:!0,edit:!0,create:!1,delete:!1},"Smart Pricing":{view:!0,edit:!0,create:!1,delete:!1},"OTA Payout Logic":{view:!0,edit:!1,create:!1,delete:!1},"Owner Invoicing":{view:!0,edit:!0,create:!0,delete:!1},"Commission System":{view:!0,edit:!0,create:!1,delete:!1}},"Utilities & Maintenance":{"Utility Tracker":{view:!0,edit:!0,create:!0,delete:!1},"Water Management":{view:!0,edit:!0,create:!0,delete:!1},"Maintenance System":{view:!0,edit:!0,create:!0,delete:!1},"Vendor Management":{view:!0,edit:!0,create:!0,delete:!0},"Supply Orders":{view:!0,edit:!0,create:!0,delete:!1}},"Staff & Operations":{"Staff Management":{view:!0,edit:!0,create:!0,delete:!1},"Staff Permissions":{view:!0,edit:!0,create:!1,delete:!1},"Staff Workload":{view:!0,edit:!1,create:!1,delete:!1},"Staff Skills":{view:!0,edit:!0,create:!0,delete:!1},"Operational Efficiency":{view:!0,edit:!1,create:!1,delete:!1}},"Reports & Analytics":{"Financial Reports":{view:!0,edit:!1,create:!1,delete:!1},"Performance Analytics":{view:!0,edit:!1,create:!1,delete:!1},"Portfolio Health":{view:!0,edit:!1,create:!1,delete:!1},"Sustainability Metrics":{view:!0,edit:!1,create:!1,delete:!1},"Revenue Forecasting":{view:!0,edit:!1,create:!1,delete:!1}},"AI & Automation":{"Captain Cortex AI":{view:!0,edit:!1,create:!1,delete:!1},"AI Notifications":{view:!0,edit:!0,create:!1,delete:!1},"AI Task Automation":{view:!0,edit:!0,create:!1,delete:!1},"Smart Suggestions":{view:!0,edit:!1,create:!1,delete:!1}},"System Administration":{"User Management":{view:!0,edit:!0,create:!0,delete:!0},"System Settings":{view:!0,edit:!0,create:!1,delete:!1},"API Connections":{view:!0,edit:!0,create:!1,delete:!1},"Sandbox Testing":{view:!0,edit:!0,create:!1,delete:!1},"System Integrity":{view:!0,edit:!1,create:!1,delete:!1}}};function kv(){const[t,s]=v.useState(""),[r,n]=v.useState("all"),[a,i]=v.useState(null),[l,o]=v.useState(!1),[c,d]=v.useState(!1),[u,m]=v.useState(!1),[h,x]=v.useState(null),[f,p]=v.useState({}),[g,y]=v.useState([]),{toast:b}=st(),j=pt(),{data:w=[],isLoading:N}=xe({queryKey:["/api/users"]}),S=Wt({resolver:ts(HW),defaultValues:{name:"",email:"",role:"staff",status:"active"}}),O=Wt({resolver:ts(KW),defaultValues:{name:"",email:"",role:"staff",password:""}}),P=Te({mutationFn:async V=>{const{id:z,...le}=V;return Ne("PATCH",`/api/users/${z}`,le)},onSuccess:()=>{j.invalidateQueries({queryKey:["/api/users"]}),o(!1),i(null),S.reset(),b({title:"Success",description:"User updated successfully"})},onError:V=>{b({title:"Error",description:V.message||"Failed to update user",variant:"destructive"})}}),k=Te({mutationFn:async V=>Ne("POST","/api/users",V),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/users"]}),d(!1),O.reset(),b({title:"Success",description:"User created successfully"})},onError:V=>{b({title:"Error",description:V.message||"Failed to create user",variant:"destructive"})}}),R=V=>{i(V),S.reset({name:V.name||`${V.firstName||""} ${V.lastName||""}`.trim(),email:V.email,role:V.role,status:V.status||"active"}),o(!0)},F=V=>{a&&P.mutate({...V,id:a.id})},I=V=>{k.mutate(V)},W=V=>{x(V);const z={};Object.keys(nl).forEach(le=>{z[le]={},Object.keys(nl[le]).forEach(Ce=>{const H=V.role==="admin",_=V.role==="portfolio-manager",se=V.role==="staff";V.role,z[le][Ce]={view:!0,edit:H||_&&!le.includes("System"),create:H||_&&!le.includes("System"),delete:H},le==="System Administration"&&!H&&(z[le][Ce]={view:!1,edit:!1,create:!1,delete:!1}),le==="Financial Management"&&se&&(z[le][Ce].edit=!1,z[le][Ce].create=!1)})}),p(z),m(!0)},E=(V,z,le,Ce)=>{p(H=>({...H,[V]:{...H[V],[z]:{...H[V][z],[le]:Ce}}}))},B=V=>{y(z=>z.includes(V)?z.filter(le=>le!==V):[...z,V])},G=()=>{b({title:"Success",description:`Permissions updated for ${h?.name||h?.email}`}),m(!1)},J=w.filter(V=>{const z=!t||V.name?.toLowerCase().includes(t.toLowerCase())||V.email?.toLowerCase().includes(t.toLowerCase())||`${V.firstName||""} ${V.lastName||""}`.toLowerCase().includes(t.toLowerCase()),le=r==="all"||V.role===r;return z&&le}),C={admin:"bg-red-100 text-red-800","portfolio-manager":"bg-blue-100 text-blue-800",staff:"bg-green-100 text-green-800",owner:"bg-purple-100 text-purple-800",guest:"bg-gray-100 text-gray-800"};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage users, permissions, and access controls"})]}),e.jsxs(Ge,{open:c,onOpenChange:d,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(g1,{className:"w-4 h-4 mr-2"}),"Add User"]})}),e.jsxs(We,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Add New User"})}),e.jsx(Qt,{...O,children:e.jsxs("form",{onSubmit:O.handleSubmit(I),className:"space-y-4",children:[e.jsx(ge,{control:O.control,name:"name",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Full Name"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Enter full name",...V})}),e.jsx(be,{})]})}),e.jsx(ge,{control:O.control,name:"email",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Email"}),e.jsx(fe,{children:e.jsx(Q,{type:"email",placeholder:"Enter email address",...V})}),e.jsx(be,{})]})}),e.jsx(ge,{control:O.control,name:"password",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Password"}),e.jsx(fe,{children:e.jsx(Q,{type:"password",placeholder:"Enter password",...V})}),e.jsx(be,{})]})}),e.jsx(ge,{control:O.control,name:"role",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Role"}),e.jsxs(ae,{onValueChange:V.onChange,defaultValue:V.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select role"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"guest",children:"Guest"})]})]}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:k.isPending,children:k.isPending?"Creating...":"Create User"})]})]})})]})]}),e.jsx(Ge,{open:u,onOpenChange:m,children:e.jsxs(We,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"h-5 w-5"}),"Manage Permissions: ",h?.name||h?.email]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:C[h?.role],children:h?.role}),e.jsx("span",{className:"text-sm text-gray-600",children:h?.email})]}),e.jsx("div",{className:"ml-auto text-xs text-gray-500",children:"Configure granular permissions for each module and operation"})]}),e.jsx("div",{className:"space-y-3",children:Object.keys(nl).map(V=>e.jsx("div",{className:"border rounded-lg",children:e.jsxs(zR,{children:[e.jsx(HR,{className:"w-full p-3 flex items-center justify-between hover:bg-gray-50",onClick:()=>B(V),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Go,{className:`h-4 w-4 transition-transform ${g.includes(V)?"rotate-180":""}`}),e.jsx("h3",{className:"font-semibold",children:V}),e.jsxs(U,{variant:"outline",children:[Object.keys(nl[V]).length," modules"]})]})}),e.jsx(KR,{children:e.jsx("div",{className:"p-3 border-t space-y-3",children:Object.keys(nl[V]).map(z=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("div",{className:"font-medium text-sm",children:z}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-3 w-3 text-blue-500"}),e.jsx("span",{className:"text-xs",children:"View"}),e.jsx(Pt,{checked:f[V]?.[z]?.view||!1,onCheckedChange:le=>E(V,z,"view",le)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-3 w-3 text-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Edit"}),e.jsx(Pt,{checked:f[V]?.[z]?.edit||!1,onCheckedChange:le=>E(V,z,"edit",le)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g1,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(Pt,{checked:f[V]?.[z]?.create||!1,onCheckedChange:le=>E(V,z,"create",le)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-xs",children:"Delete"}),e.jsx(Pt,{checked:f[V]?.[z]?.delete||!1,onCheckedChange:le=>E(V,z,"delete",le)})]})]})]},z))})})]})},V))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(M,{onClick:G,children:"Save Permissions"})]})]})]})})]}),e.jsxs(xt,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsxs(de,{value:"users",className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-4 h-4"}),"Users"]}),e.jsxs(de,{value:"permissions",className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),"Permissions"]}),e.jsxs(de,{value:"access",className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Access Control"]}),e.jsxs(de,{value:"visibility",className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Property Visibility"]})]}),e.jsx(me,{value:"users",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5"}),"User Management"]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(as,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search users...",className:"pl-10",value:t,onChange:V=>s(V.target.value)})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"Filter by role"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Roles"}),e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owner"})]})]})]}),N?e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((V,z)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-48 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-8 w-16 bg-gray-300 rounded"})]})]},z))}):e.jsxs("div",{className:"space-y-4",children:[J.map(V=>{const z=V.name||`${V.firstName||""} ${V.lastName||""}`.trim()||V.email,le=z.split(" ").map(Ce=>Ce[0]).join("").toUpperCase();return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:le}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:z}),e.jsx("p",{className:"text-sm text-gray-600",children:V.email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",V.role]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:C[V.role],children:V.role}),e.jsx(U,{variant:(V.status||"active")==="active"?"default":"secondary",children:V.status||"active"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>R(V),children:"Edit"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>W(V),children:[e.jsx(Kt,{className:"w-4 h-4 mr-1"}),"Permissions"]})]})]},V.id)}),J.length===0&&!N&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your filters."})]})]})]})}),e.jsx(me,{value:"permissions",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Global Permission Templates"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Manage Permissions"}),e.jsx("p",{className:"text-blue-800 text-sm",children:'Click the "Permissions" button next to any user in the Users tab to configure their detailed module access. Each user can have granular permissions for View, Edit, Create, and Delete operations across all platform modules.'})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:"Admin Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Full system access"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"User management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"System settings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"All CRUD operations"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Portfolio Manager"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Property management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Financial oversight"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"Limited staff management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No system admin"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:"Staff Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Task management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Guest services"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"Basic financial view"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No financial edit"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-700 mb-2",children:"Owner Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Own properties view"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Financial reports"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Payout requests"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No management access"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Total Platform Modules Coverage"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:Object.keys(nl).map(V=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium",children:V}),e.jsxs("div",{className:"text-xs text-gray-600",children:[Object.keys(nl[V]).length," modules"]})]},V))})]})]})})]})}),e.jsx(me,{value:"access",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"User Access & Visibility Manager"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Dashboard Access"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Admin Dashboard"}),e.jsx(U,{className:"bg-red-100 text-red-800",children:"Admin Only"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Financial Dashboard"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"Admin/PM"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Staff Dashboard"}),e.jsx(U,{className:"bg-green-100 text-green-800",children:"Staff"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Feature Access"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"User Management"}),e.jsx(U,{className:"bg-red-100 text-red-800",children:"Admin Only"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Property CRUD"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"Admin/PM"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Task Creation"}),e.jsx(U,{className:"bg-green-100 text-green-800",children:"All Staff"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Data Visibility"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"All Properties"}),e.jsx(U,{className:"bg-red-100 text-red-800",children:"Admin"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Assigned Properties"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"PM/Staff"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Own Properties"}),e.jsx(U,{className:"bg-purple-100 text-purple-800",children:"Owner"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Access Control Matrix"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Feature"}),e.jsx("th",{className:"text-center p-2",children:"Admin"}),e.jsx("th",{className:"text-center p-2",children:"PM"}),e.jsx("th",{className:"text-center p-2",children:"Staff"}),e.jsx("th",{className:"text-center p-2",children:"Owner"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"User Management"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"âœ—"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"âœ—"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"âœ—"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Financial Reports"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"âœ—"}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"Limited"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Property Management"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"Limited"}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"View Only"})]})]})]})})]})]})})]})}),e.jsx(me,{value:"visibility",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Property Visibility Control"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Property Assignment"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Villa Samui Breeze"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"PM: Jane"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Owner: Alice Owner"}),e.jsx("p",{children:"Staff Access: Bob Staff, Carol Manager"})]})]}),e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Villa Aruna"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"PM: Jane"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Owner: Alice Owner"}),e.jsx("p",{children:"Staff Access: Bob Staff"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Visibility Rules"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Admin Global Access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Can view all properties"})]}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"PM Property Assignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only assigned properties"})]}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Owner Property Restriction"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only owned properties"})]}),e.jsx(Pt,{defaultChecked:!0})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Current Property Access Matrix"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Property"}),e.jsx("th",{className:"text-center p-2",children:"Admin"}),e.jsx("th",{className:"text-center p-2",children:"PM Jane"}),e.jsx("th",{className:"text-center p-2",children:"Staff Bob"}),e.jsx("th",{className:"text-center p-2",children:"Owner Alice"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Samui Breeze"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Aruna"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Paradise"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"âœ“"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"âœ—"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"âœ—"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"âœ—"})]})]})]})})]})]})})]})})]}),e.jsx(Ge,{open:l,onOpenChange:o,children:e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Edit User"})}),e.jsx(Qt,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit(F),className:"space-y-4",children:[e.jsx(ge,{control:S.control,name:"name",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Name"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Enter user name",...V})}),e.jsx(be,{})]})}),e.jsx(ge,{control:S.control,name:"email",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Email"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Enter email address",...V})}),e.jsx(be,{})]})}),e.jsx(ge,{control:S.control,name:"role",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Role"}),e.jsxs(ae,{onValueChange:V.onChange,defaultValue:V.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select a role"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"admin",children:"Admin"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"guest",children:"Guest"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:S.control,name:"status",render:({field:V})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Status"}),e.jsxs(ae,{onValueChange:V.onChange,defaultValue:V.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select status"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:P.isPending,children:P.isPending?"Saving...":"Save Changes"})]})]})})]})})]})}const GW=Object.freeze(Object.defineProperty({__proto__:null,default:kv},Symbol.toStringTag,{value:"Module"})),WW=[{id:1,avatar:"/api/placeholder/40/40",firstName:"John",lastName:"Smith",email:"john.smith@example.com",title:"Property Manager",userGroups:["Property Managers","Administrators"],lastLogin:"2 hours ago",phone:"+66 123 456 789",preferredContact:"Email",address:"123 Sukhumvit Road, Bangkok",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!1,canAccessFinance:!0},notifications:{dashboard:!0,mobile:!1,email:!0,sms:!1},listingsAccess:[1,2,3]},{id:2,avatar:"/api/placeholder/40/40",firstName:"Sarah",lastName:"Wilson",email:"sarah.wilson@example.com",title:"Villa Coordinator",userGroups:["Staff"],lastLogin:"1 day ago",phone:"+66 987 654 321",preferredContact:"Phone",address:"456 Patong Beach, Phuket",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!1,canAccessFinance:!1},notifications:{dashboard:!0,mobile:!0,email:!0,sms:!0},listingsAccess:[1,4]},{id:3,avatar:"/api/placeholder/40/40",firstName:"Michael",lastName:"Chen",email:"michael.chen@example.com",title:"Operations Manager",userGroups:["Property Managers"],lastLogin:"3 hours ago",phone:"+66 555 123 456",preferredContact:"Email",address:"789 Chaweng Beach, Koh Samui",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!0,canAccessFinance:!0},notifications:{dashboard:!0,mobile:!1,email:!0,sms:!1},listingsAccess:[2,3,4]}],QW=[];function YW({users:t,onEditUser:s}){const[r,n]=v.useState(""),a=t.filter(i=>i.firstName.toLowerCase().includes(r.toLowerCase())||i.lastName.toLowerCase().includes(r.toLowerCase())||i.email.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"text-gray-600",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(M,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add new"]})]})]}),e.jsxs(xt,{defaultValue:"users",className:"w-full",children:[e.jsxs(ht,{className:"grid w-32 grid-cols-2",children:[e.jsx(de,{value:"users",children:"Users"}),e.jsx(de,{value:"groups",children:"Groups"})]}),e.jsx(me,{value:"users",className:"mt-4",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Q,{placeholder:"Search users...",value:r,onChange:i=>n(i.target.value),className:"pl-10"})]})})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Groups"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Kn,{className:"h-8 w-8 mr-3",children:[e.jsx(eo,{src:i.avatar}),e.jsxs(Gn,{children:[i.firstName[0],i.lastName[0]]})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[i.firstName," ",i.lastName]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:i.userGroups.map((l,o)=>e.jsx(U,{variant:"secondary",className:"text-xs",children:l},o))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.lastLogin}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>s(i),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Nr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-900",children:e.jsx(ir,{className:"w-4 h-4"})})]})})]},i.id))})]})})]})}function XW({user:t,onSave:s,onCancel:r}){const[n,a]=v.useState({...t}),i=()=>{s(n)},l=(c,d)=>{a(u=>({...u,[c]:d}))},o=(c,d,u)=>{a(m=>({...m,[c]:{...m[c],[d]:u}}))};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit User: ",n.firstName," ",n.lastName]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(M,{variant:"outline",onClick:r,children:[e.jsx(Es,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(M,{onClick:i,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(rm,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs(xt,{defaultValue:"basic",className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"basic",children:"Basic Info"}),e.jsx(de,{value:"address",children:"Address"}),e.jsx(de,{value:"permissions",children:"Access Permissions"}),e.jsx(de,{value:"notifications",children:"Notifications"}),e.jsx(de,{value:"listings",children:"Listings Access"})]}),e.jsx(me,{value:"basic",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs(Kn,{className:"h-20 w-20",children:[e.jsx(eo,{src:n.avatar}),e.jsxs(Gn,{className:"text-lg",children:[n.firstName[0],n.lastName[0]]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx(Q,{value:n.firstName,onChange:c=>l("firstName",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx(Q,{value:n.lastName,onChange:c=>l("lastName",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(Q,{value:n.title,onChange:c=>l("title",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(Q,{type:"email",value:n.email,onChange:c=>l("email",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx(Q,{value:n.phone,onChange:c=>l("phone",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Contact Method"}),e.jsxs("select",{value:n.preferredContact,onChange:c=>l("preferredContact",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"SMS",children:"SMS"})]})]})]})]})}),e.jsx(me,{value:"address",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{value:n.address,onChange:c=>l("address",c.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})})}),e.jsx(me,{value:"permissions",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Access Permissions"}),e.jsx("div",{className:"space-y-3",children:Object.entries(n.permissions).map(([c,d])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:c,checked:d,onChange:u=>o("permissions",c,u.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:c,className:"ml-3 text-sm text-gray-700",children:c.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase())})]},c))})]})}),e.jsx(me,{value:"notifications",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notification Settings"}),e.jsx("div",{className:"space-y-3",children:Object.entries(n.notifications).map(([c,d])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"text-sm text-gray-700",children:[c.charAt(0).toUpperCase()+c.slice(1)," Notifications"]}),e.jsx("button",{type:"button",onClick:()=>o("notifications",c,!d),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${d?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${d?"translate-x-5":"translate-x-0"}`})})]},c))})]})}),e.jsx(me,{value:"listings",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Listings Access"}),e.jsx(M,{variant:"outline",size:"sm",children:"Select All"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:QW.map(c=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${n.listingsAccess.includes(c.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{const d=n.listingsAccess.includes(c.id)?n.listingsAccess.filter(u=>u!==c.id):[...n.listingsAccess,c.id];l("listingsAccess",d)},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-12 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Villa Property"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("input",{type:"checkbox",checked:n.listingsAccess.includes(c.id),onChange:()=>{},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})})]})},c.id))})]})})]})})]})}function TS(){const[t,s]=or(),[r,n]=v.useState(WW),[a,i]=v.useState(null),l=d=>{i(d),s("/user-management/edit")},o=d=>{n(u=>u.map(m=>m.id===d.id?d:m)),s("/user-management"),i(null)},c=()=>{s("/user-management"),i(null)};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs(Vj,{children:[e.jsx(Re,{path:"/user-management/edit",children:a&&e.jsx(XW,{user:a,onSave:o,onCancel:c})}),e.jsx(Re,{children:e.jsx(YW,{users:r,onEditUser:l})})]})})}function ZW(){const[t,s]=v.useState("2025"),r=[{id:1,owner:"Alice Owner",property:"Villa Samui Breeze",currentRevenue:85e3,targetRevenue:12e4,progress:71,upgradePlan:"Premium Package",status:"in-progress",deadline:"2025-06-30"},{id:2,owner:"Bob Johnson",property:"Villa Aruna",currentRevenue:45e3,targetRevenue:6e4,progress:75,upgradePlan:"Standard Plus",status:"on-track",deadline:"2025-08-15"},{id:3,owner:"Carol Smith",property:"Villa Paradise",currentRevenue:25e3,targetRevenue:8e4,progress:31,upgradePlan:"Full Renovation",status:"at-risk",deadline:"2025-12-31"}],n=[{name:"Premium Package",features:["Professional Photography","Enhanced Listings","Concierge Service"],estimatedIncrease:"40-60%",cost:"$5,000"},{name:"Standard Plus",features:["Updated Amenities","Marketing Boost","Guest Experience"],estimatedIncrease:"25-35%",cost:"$3,000"},{name:"Full Renovation",features:["Complete Makeover","Premium Furnishing","Smart Home"],estimatedIncrease:"80-120%",cost:"$15,000"}],a=i=>{switch(i){case"on-track":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"at-risk":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(ar,{className:"w-8 h-8"}),"Owner Targets & Upgrades"]}),e.jsx("p",{className:"text-gray-600",children:"Track revenue targets and upgrade progress for property owners"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{className:"w-32",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"2024",children:"2024"}),e.jsx(A,{value:"2025",children:"2025"}),e.jsx(A,{value:"2026",children:"2026"})]})]}),e.jsxs(M,{children:[e.jsx(ar,{className:"w-4 h-4 mr-2"}),"Set New Target"]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"targets",children:"Revenue Targets"}),e.jsx(de,{value:"upgrades",children:"Upgrade Plans"}),e.jsx(de,{value:"analytics",children:"Analytics"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Owners"}),e.jsx("p",{className:"text-2xl font-bold",children:"12"})]}),e.jsx(ot,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On Track"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"8"})]}),e.jsx(Ot,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"3"})]}),e.jsx(ar,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:"67%"})]}),e.jsx(Ze,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Owner Progress Overview"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(At,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.owner}),e.jsx("p",{className:"text-sm text-gray-600",children:i.property})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(U,{className:a(i.status),children:i.status.replace("-"," ")}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Due: ",i.deadline]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Revenue"}),e.jsxs("p",{className:"font-semibold",children:["$",i.currentRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Target Revenue"}),e.jsxs("p",{className:"font-semibold",children:["$",i.targetRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Upgrade Plan"}),e.jsx("p",{className:"font-semibold",children:i.upgradePlan})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[i.progress,"%"]})]}),e.jsx(dn,{value:i.progress,className:"h-2"})]})]},i.id))})})]})]}),e.jsx(me,{value:"targets",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Revenue Targets Management"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Q,{placeholder:"Owner name"}),e.jsx(Q,{placeholder:"Target amount",type:"number"}),e.jsx(Q,{placeholder:"Deadline",type:"date"}),e.jsx(M,{children:"Set Target"})]}),e.jsx("div",{className:"space-y-3",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.owner}),e.jsx("p",{className:"text-sm text-gray-600",children:i.property})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",i.targetRevenue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:i.deadline})]}),e.jsx(dn,{value:i.progress,className:"w-24 h-2"}),e.jsx(M,{variant:"outline",size:"sm",children:"Edit"})]})]},i.id))})]})})]})}),e.jsx(me,{value:"upgrades",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Upgrade Plans & Packages"})}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((i,l)=>e.jsxs(D,{className:"border-2",children:[e.jsxs($,{children:[e.jsx(L,{className:"text-lg",children:i.name}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.cost})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expected Increase"}),e.jsx("p",{className:"font-semibold text-green-600",children:i.estimatedIncrease})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Features Included:"}),e.jsx("ul",{className:"space-y-1",children:i.features.map((o,c)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),o]},c))})]}),e.jsx(M,{className:"w-full mt-4",children:"Select Plan"})]})})]},l))})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Target Achievement Rate"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"67%"}),e.jsx("p",{className:"text-gray-600",children:"Average Progress"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q1 2025"}),e.jsx("span",{className:"font-semibold",children:"72%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q2 2025"}),e.jsx("span",{className:"font-semibold",children:"68%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q3 2025"}),e.jsx("span",{className:"font-semibold",children:"61%"})]})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Upgrade ROI Analysis"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"156%"}),e.jsx("p",{className:"text-gray-600",children:"Average ROI"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Premium Package"}),e.jsx("span",{className:"font-semibold text-green-600",children:"180%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Standard Plus"}),e.jsx("span",{className:"font-semibold text-green-600",children:"145%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Full Renovation"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"142%"})]})]})]})})]})]})})]})]})}function Pv(){const[t,s]=v.useState(""),[r,n]=v.useState("all"),[a,i]=v.useState("all"),[l,o]=v.useState("today"),c=[{id:1,timestamp:"2025-01-21 15:42:33",user:"John Admin",userRole:"admin",action:"USER_LOGIN",entity:"System",details:"Admin user logged in successfully",ipAddress:"192.168.1.100",severity:"info"},{id:2,timestamp:"2025-01-21 15:40:15",user:"Jane Manager",userRole:"portfolio-manager",action:"PROPERTY_UPDATE",entity:"Villa Samui Breeze",details:"Updated property pricing from $150/night to $175/night",ipAddress:"192.168.1.101",severity:"medium"},{id:3,timestamp:"2025-01-21 15:35:22",user:"Bob Staff",userRole:"staff",action:"TASK_COMPLETED",entity:"Pool Cleaning Task #45",details:"Pool cleaning task marked as completed with photos uploaded",ipAddress:"192.168.1.102",severity:"low"},{id:4,timestamp:"2025-01-21 15:30:08",user:"John Admin",userRole:"admin",action:"USER_PERMISSIONS_MODIFIED",entity:"Staff User: Carol Wilson",details:"Granted property management permissions to staff user",ipAddress:"192.168.1.100",severity:"high"},{id:5,timestamp:"2025-01-21 15:25:41",user:"System",userRole:"system",action:"BOOKING_CREATED",entity:"Booking #BK-2025-0156",details:"New booking created via Hostaway API integration",ipAddress:"API",severity:"medium"},{id:6,timestamp:"2025-01-21 15:20:17",user:"Alice Owner",userRole:"owner",action:"PAYOUT_REQUESTED",entity:"Owner Payout #PO-2025-0089",details:"Requested payout of $2,450.00 for December earnings",ipAddress:"192.168.1.103",severity:"medium"},{id:7,timestamp:"2025-01-21 15:15:52",user:"John Admin",userRole:"admin",action:"FINANCE_RESET",entity:"User Balance: Bob Johnson",details:"Admin reset user balance from $1,200 to $0 - Reason: Account reconciliation",ipAddress:"192.168.1.100",severity:"critical"}],d=x=>{switch(x){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";case"info":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=x=>{switch(x){case"admin":return"bg-red-100 text-red-800";case"portfolio-manager":return"bg-blue-100 text-blue-800";case"staff":return"bg-green-100 text-green-800";case"owner":return"bg-purple-100 text-purple-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=x=>{switch(x){case"USER_LOGIN":return e.jsx(zt,{className:"w-4 h-4"});case"PROPERTY_UPDATE":return e.jsx(Bt,{className:"w-4 h-4"});case"TASK_COMPLETED":return e.jsx(Bs,{className:"w-4 h-4"});case"USER_PERMISSIONS_MODIFIED":return e.jsx(Kt,{className:"w-4 h-4"});case"FINANCE_RESET":return e.jsx(Kt,{className:"w-4 h-4"});default:return e.jsx(Bs,{className:"w-4 h-4"})}},h={totalLogs:c.length,criticalActions:c.filter(x=>x.severity==="critical").length,adminActions:c.filter(x=>x.userRole==="admin").length,systemActions:c.filter(x=>x.userRole==="system").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Bs,{className:"w-8 h-8"}),"Activity Logs"]}),e.jsx("p",{className:"text-gray-600",children:"Monitor system activities and user actions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Export Logs"]}),e.jsxs(M,{children:[e.jsx(Dn,{className:"w-4 h-4 mr-2"}),"Advanced Filter"]})]})]}),e.jsxs(xt,{defaultValue:"logs",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"logs",children:"Activity Logs"}),e.jsx(de,{value:"critical",children:"Critical Actions"}),e.jsx(de,{value:"analytics",children:"Analytics"}),e.jsx(de,{value:"settings",children:"Log Settings"})]}),e.jsxs(me,{value:"logs",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Logs"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalLogs})]}),e.jsx(Bs,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Actions"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:h.criticalActions})]}),e.jsx(Kt,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admin Actions"}),e.jsx("p",{className:"text-2xl font-bold",children:h.adminActions})]}),e.jsx(zt,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"System Actions"}),e.jsx("p",{className:"text-2xl font-bold",children:h.systemActions})]}),e.jsx(Bs,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search logs...",className:"pl-10",value:t,onChange:x=>s(x.target.value)})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Filter by user"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Users"}),e.jsx(A,{value:"admin",children:"Admin Users"}),e.jsx(A,{value:"portfolio-manager",children:"Portfolio Managers"}),e.jsx(A,{value:"staff",children:"Staff"}),e.jsx(A,{value:"owner",children:"Owners"}),e.jsx(A,{value:"system",children:"System"})]})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Filter by action"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Actions"}),e.jsx(A,{value:"USER_LOGIN",children:"User Login"}),e.jsx(A,{value:"PROPERTY_UPDATE",children:"Property Update"}),e.jsx(A,{value:"TASK_COMPLETED",children:"Task Completed"}),e.jsx(A,{value:"USER_PERMISSIONS_MODIFIED",children:"Permissions Modified"}),e.jsx(A,{value:"FINANCE_RESET",children:"Finance Reset"})]})]}),e.jsxs(ae,{value:l,onValueChange:o,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Date range"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"today",children:"Today"}),e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recent Activity"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:m(x.action)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium",children:x.action.replace(/_/g," ")}),e.jsx(U,{className:d(x.severity),children:x.severity})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.details}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"w-3 h-3"}),x.user]}),e.jsx(U,{className:u(x.userRole),variant:"outline",children:x.userRole}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),x.timestamp]}),e.jsxs("span",{children:["IP: ",x.ipAddress]})]})]})]}),e.jsx(U,{variant:"outline",className:"text-xs",children:x.entity})]})},x.id))})})]})]}),e.jsx(me,{value:"critical",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5 text-red-500"}),"Critical Actions Requiring Attention"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:c.filter(x=>x.severity==="critical"||x.severity==="high").map(x=>e.jsx("div",{className:"border-l-4 border-red-500 bg-red-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-red-800",children:x.action.replace(/_/g," ")}),e.jsx(U,{className:"bg-red-200 text-red-800",children:x.severity})]}),e.jsx("p",{className:"text-sm text-red-700 mb-2",children:x.details}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-red-600",children:[e.jsxs("span",{children:["User: ",x.user]}),e.jsxs("span",{children:["Entity: ",x.entity]}),e.jsxs("span",{children:["Time: ",x.timestamp]})]})]}),e.jsx(M,{variant:"outline",size:"sm",children:"Review"})]})},x.id))})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Activity by User Role"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Admin"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"60%"}})}),e.jsx("span",{className:"text-sm",children:"3"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Portfolio Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Staff"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Owner"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"System"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Activity by Severity"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Critical"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:h.criticalActions})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"High"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Medium"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"43%"}})}),e.jsx("span",{className:"text-sm",children:"3"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Low"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Info"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]})]})})]})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Logging Configuration"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Log Retention"}),e.jsxs(ae,{defaultValue:"90",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"30",children:"30 days"}),e.jsx(A,{value:"90",children:"90 days"}),e.jsx(A,{value:"180",children:"180 days"}),e.jsx(A,{value:"365",children:"1 year"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Auto Export"}),e.jsxs(ae,{defaultValue:"monthly",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"disabled",children:"Disabled"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"quarterly",children:"Quarterly"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Alert Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Critical Action Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed Login Attempts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Permission Changes"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Financial Actions"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}const JW=Object.freeze(Object.defineProperty({__proto__:null,default:Pv},Symbol.toStringTag,{value:"Module"})),eQ=Yt({name:Pe().min(1,"Service name is required"),apiKey:Pe().min(1,"API key is required"),apiSecret:Pe().optional(),baseUrl:Pe().url().optional(),isActive:Qr().default(!0),description:Pe().optional()}),tQ=[{service:"lodgify",name:"Lodgify Property Management",icon:Jt,color:"bg-amber-100 text-amber-700",description:"Sync properties, bookings, and financial data from Lodgify",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Lodgify API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.lodgify.com",type:"text"}]},{service:"makcorps",name:"Makcorps Hotel Pricing",icon:es,color:"bg-indigo-100 text-indigo-700",description:"Real-time hotel pricing from 200+ OTAs (Booking.com, Expedia, Agoda, etc.)",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Makcorps API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.makcorps.com",type:"text"}]},{service:"rentcast",name:"RentCast Property Data",icon:Jt,color:"bg-teal-100 text-teal-700",description:"140M+ property records, rental estimates (AVM), valuations, market data & trends",fields:[{name:"apiKey",label:"API Key",placeholder:"Your RentCast API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.rentcast.io/v1",type:"text"}]},{service:"stripe",name:"Stripe Payment Processing",icon:Er,color:"bg-purple-100 text-purple-700",description:"Process payments and manage subscriptions",fields:[{name:"apiKey",label:"Publishable Key",placeholder:"pk_live_...",type:"text"},{name:"apiSecret",label:"Secret Key",placeholder:"sk_live_...",type:"password"}]},{service:"hostaway",name:"Hostaway Property Management",icon:Jt,color:"bg-blue-100 text-blue-700",description:"Sync properties, bookings, and guest data",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Hostaway API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.hostaway.com",type:"text"}]},{service:"openai",name:"OpenAI AI Assistant",icon:Nn,color:"bg-green-100 text-green-700",description:"AI-powered recommendations and automation",fields:[{name:"apiKey",label:"API Key",placeholder:"sk-...",type:"password"}]},{service:"twilio",name:"Twilio SMS Notifications",icon:im,color:"bg-red-100 text-red-700",description:"Send SMS notifications to guests and staff",fields:[{name:"apiKey",label:"Account SID",placeholder:"AC...",type:"text"},{name:"apiSecret",label:"Auth Token",placeholder:"Your auth token",type:"password"}]}];function GR(){const[t,s]=v.useState(null),[r,n]=v.useState({}),[a,i]=v.useState(null),{toast:l}=st(),o=pt(),c=Wt({resolver:ts(eQ),defaultValues:{isActive:!0}}),{data:d=[],isLoading:u}=xe({queryKey:["/api/admin/api-connections"],queryFn:()=>Ne("GET","/api/admin/api-connections")}),m=Array.isArray(d)?d:[],h=Te({mutationFn:w=>Ne("PUT",`/api/admin/api-connections/${w.service}`,w.config),onSuccess:(w,N)=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]}),s(null),c.reset(),l({title:"Connection Updated",description:`${N.service} configuration has been saved successfully.`})},onError:w=>{l({title:"Update Failed",description:w.message||"Failed to update API connection",variant:"destructive"})}}),x=Te({mutationFn:w=>Ne("POST",`/api/admin/api-connections/${w}/test`),onSuccess:(w,N)=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]}),i(null),l({title:"Connection Test Successful",description:`${N} API is working correctly.`})},onError:(w,N)=>{i(null),l({title:"Connection Test Failed",description:`${N}: ${w.message||"Connection test failed"}`,variant:"destructive"})}}),f=Te({mutationFn:w=>Ne("PATCH",`/api/admin/api-connections/${w.service}/toggle`,{isActive:w.isActive}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]})}}),p=w=>{const N=m.find(S=>S.service===w.service);s(w.service),c.reset({name:w.name,isActive:N?.isActive??!0,description:w.description})},g=w=>{i(w),x.mutate(w)},y=w=>{n(N=>({...N,[w]:!N[w]}))},b=w=>{if(!w)return e.jsx(yr,{className:"h-4 w-4 text-gray-400"});switch(w.status){case"connected":return e.jsx(Ie,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(yr,{className:"h-4 w-4 text-red-500"});default:return e.jsx(It,{className:"h-4 w-4 text-yellow-500"})}},j=w=>{if(!w)return e.jsx(U,{variant:"secondary",children:"Not Configured"});switch(w.status){case"connected":return e.jsx(U,{variant:"default",className:"bg-green-100 text-green-700",children:"Connected"});case"error":return e.jsx(U,{variant:"destructive",children:"Error"});default:return e.jsx(U,{variant:"secondary",children:"Disconnected"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(ss,{className:"h-8 w-8 text-blue-600"}),"API Connections"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure third-party integrations for your property management system"})]})}),e.jsxs(Wn,{children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsxs(Qn,{children:[e.jsx("strong",{children:"Security Notice:"})," All API keys are encrypted and stored securely. Only administrators can view and modify these settings."]})]}),e.jsxs(xt,{defaultValue:"services",className:"space-y-6",children:[e.jsxs(ht,{children:[e.jsx(de,{value:"services",children:"Service Connections"}),e.jsx(de,{value:"logs",children:"Connection Logs"}),e.jsx(de,{value:"settings",children:"Global Settings"})]}),e.jsx(me,{value:"services",children:e.jsx("div",{className:"grid gap-6",children:tQ.map(w=>{const N=m.find(O=>O.service===w.service),S=w.icon;return e.jsxs(D,{className:"relative",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${w.color}`,children:e.jsx(S,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[w.name,b(N)]}),e.jsx(Ee,{children:w.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[j(N),e.jsx(Pt,{checked:N?.isActive??!1,onCheckedChange:O=>f.mutate({service:w.service,isActive:O}),disabled:!N?.hasCredentials})]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:N?.hasCredentials?`Last tested: ${N.lastTested||"Never"}`:"No credentials configured"}),e.jsxs("div",{className:"flex gap-2",children:[N?.hasCredentials&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>g(w.service),disabled:a===w.service,children:[e.jsx(z0,{className:"h-4 w-4 mr-1"}),a===w.service?"Testing...":"Test"]}),e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>p(w),children:[e.jsx(N4,{className:"h-4 w-4 mr-1"}),"Configure"]})}),e.jsxs(We,{className:"sm:max-w-md",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Configure ",w.name]}),e.jsxs(Ct,{children:["Enter your API credentials for ",w.name]})]}),e.jsx(Qt,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(O=>h.mutate({service:w.service,config:O})),className:"space-y-4",children:[w.fields.map(O=>e.jsx(ge,{control:c.control,name:O.name,render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:O.label}),e.jsx(fe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{type:O.type==="password"&&!r[O.name]?"password":"text",placeholder:O.placeholder,...P}),O.type==="password"&&e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>y(O.name),children:r[O.name]?e.jsx(v4,{className:"h-4 w-4"}):e.jsx(Bt,{className:"h-4 w-4"})})]})}),e.jsx(be,{})]})},O.name)),e.jsx(ge,{control:c.control,name:"isActive",render:({field:O})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{children:"Enable Service"}),e.jsx(Zt,{children:"Activate this integration for your organization"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:O.value,onCheckedChange:O.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(hs,{asChild:!0,children:e.jsx(M,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(M,{type:"submit",disabled:h.isPending,children:h.isPending?"Saving...":"Save Configuration"})]})]})})]})]})]})]})})]},w.service)})})}),e.jsx(me,{value:"logs",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Connection Activity Logs"}),e.jsx(Ee,{children:"Monitor API connection status and error logs"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(es,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Connection logs will appear here when services are tested or used"})]})})]})}),e.jsx(me,{value:"settings",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Global API Settings"}),e.jsx(Ee,{children:"Configure global settings for all API integrations"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Automatic Testing"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Automatically test connections every 24 hours"})]}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Error Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Send email notifications when connections fail"})]}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Debug Logging"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable detailed logging for troubleshooting"})]}),e.jsx(Pt,{})]})]})]})})]})]})}const sQ=Object.freeze(Object.defineProperty({__proto__:null,default:GR},Symbol.toStringTag,{value:"Module"})),rQ=Yt({logoUrl:Pe().url().optional().or(Pd("")),primaryColor:Pe().min(7,"Must be a valid hex color").optional().or(Pd("")),secondaryColor:Pe().min(7,"Must be a valid hex color").optional().or(Pd("")),reportTheme:Rs(["modern","classic","minimal","corporate"]).optional(),customDomain:Pe().url().optional().or(Pd(""))}),nQ=Yt({mode:Rs(["full","summary","financial-only","limited"])});function aQ(){const{toast:t}=st(),s=pt(),[r,n]=v.useState(""),{data:a=[],isLoading:i}=xe({queryKey:["/api/admin/users"],staleTime:2*60*1e3}),l=a.filter(p=>p.role==="owner"),{data:o,isLoading:c}=xe({queryKey:["/api/owner-settings",r],enabled:!!r,staleTime:1*60*1e3}),d=Wt({resolver:ts(rQ),defaultValues:{logoUrl:"",primaryColor:"#3b82f6",secondaryColor:"#06b6d4",reportTheme:"modern",customDomain:""}}),u=Wt({resolver:ts(nQ),defaultValues:{mode:"summary"}});v.useState(()=>{o?.customBranding&&d.reset({logoUrl:o.customBranding.logoUrl||"",primaryColor:o.customBranding.primaryColor||"#3b82f6",secondaryColor:o.customBranding.secondaryColor||"#06b6d4",reportTheme:o.customBranding.reportTheme||"modern",customDomain:o.customBranding.customDomain||""}),o?.transparencyMode&&u.reset({mode:o.transparencyMode})});const m=Te({mutationFn:async p=>Ne("PATCH",`/api/owner-settings/${r}/branding`,p),onSuccess:()=>{t({title:"Branding Updated",description:"Custom branding settings have been saved successfully."}),s.invalidateQueries({queryKey:["/api/owner-settings"]})},onError:p=>{t({title:"Update Failed",description:p.message||"Failed to update branding settings",variant:"destructive"})}}),h=Te({mutationFn:async p=>Ne("PATCH",`/api/owner-settings/${r}/transparency`,p),onSuccess:()=>{t({title:"Transparency Updated",description:"Owner transparency mode has been updated successfully."}),s.invalidateQueries({queryKey:["/api/owner-settings"]})},onError:p=>{t({title:"Update Failed",description:p.message||"Failed to update transparency settings",variant:"destructive"})}}),x=p=>{m.mutate(p)},f=p=>{h.mutate(p)};return i?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bs,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Organization Branding"}),e.jsx("p",{className:"text-gray-600",children:"Manage custom branding and transparency settings for property owners"})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5"}),"Select Owner"]}),e.jsx(Ee,{children:"Choose a property owner to configure their branding and transparency settings"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"owner-select",children:"Property Owner"}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select an owner to configure..."})}),e.jsx(ne,{children:l.map(p=>e.jsx(A,{value:p.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:p.username}),e.jsx(U,{variant:"secondary",className:"ml-2",children:p.email})]})},p.id))})]})]}),l.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ot,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No property owners found in the system."}),e.jsx("p",{className:"text-sm",children:"Owners will appear here once they are created."})]})]})})]}),r&&e.jsxs(xt,{defaultValue:"branding",className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-3",children:[e.jsxs(de,{value:"branding",className:"flex items-center gap-2",children:[e.jsx(w4,{className:"w-4 h-4"}),"Custom Branding"]}),e.jsxs(de,{value:"transparency",className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4"}),"Transparency"]}),e.jsxs(de,{value:"preview",className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-4 h-4"}),"Preview"]})]}),e.jsx(me,{value:"branding",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Custom Branding Configuration"}),e.jsx(Ee,{children:"Customize the visual appearance for this owner's reports and documents"})]}),e.jsx(T,{children:c?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):e.jsx(Qt,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(x),className:"space-y-6",children:[e.jsx(ge,{control:d.control,name:"logoUrl",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Company Logo URL"}),e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{placeholder:"https://example.com/logo.png",...p}),e.jsx(M,{type:"button",variant:"outline",size:"sm",children:e.jsx(Ca,{className:"w-4 h-4"})})]})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:d.control,name:"primaryColor",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Primary Brand Color"}),e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{type:"color",className:"w-16 h-10",...p}),e.jsx(Q,{placeholder:"#3b82f6",...p})]})}),e.jsx(be,{})]})}),e.jsx(ge,{control:d.control,name:"secondaryColor",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Secondary Brand Color"}),e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{type:"color",className:"w-16 h-10",...p}),e.jsx(Q,{placeholder:"#06b6d4",...p})]})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:d.control,name:"reportTheme",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Report Theme"}),e.jsxs(ae,{onValueChange:p.onChange,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Choose a report theme"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"modern",children:"Modern"}),e.jsx(A,{value:"classic",children:"Classic"}),e.jsx(A,{value:"minimal",children:"Minimal"}),e.jsx(A,{value:"corporate",children:"Corporate"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:d.control,name:"customDomain",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Custom Domain (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"https://reports.yourcompany.com",...p})}),e.jsx(be,{})]})}),e.jsx(M,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?"Saving...":"Save Branding Settings"})]})})})]})}),e.jsx(me,{value:"transparency",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Owner Transparency Settings"}),e.jsx(Ee,{children:"Control what financial and operational information this owner can access"})]}),e.jsx(T,{children:e.jsx(Qt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(f),className:"space-y-6",children:[e.jsx(ge,{control:u.control,name:"mode",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Transparency Level"}),e.jsxs(ae,{onValueChange:p.onChange,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select transparency level"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"full",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Full Transparency"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete access to all financial and operational data"})]})}),e.jsx(A,{value:"summary",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Summary Reports"}),e.jsx("div",{className:"text-sm text-gray-500",children:"High-level summaries and key metrics only"})]})}),e.jsx(A,{value:"financial-only",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Financial Only"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Access to financial data, limited operational details"})]})}),e.jsx(A,{value:"limited",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Limited Access"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Basic property status and essential information only"})]})})]})]}),e.jsx(be,{})]})}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Transparency Level Details"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Full:"})," Complete financial reports, task details, guest information"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Summary:"})," Monthly summaries, key performance indicators, basic metrics"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Financial Only:"})," Revenue, expenses, payouts - no operational details"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Limited:"})," Property status, basic booking information, essential notifications"]})]})]}),e.jsx(M,{type:"submit",className:"w-full",disabled:h.isPending,children:h.isPending?"Updating...":"Update Transparency Settings"})]})})})]})}),e.jsx(me,{value:"preview",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Branding Preview"}),e.jsx(Ee,{children:"Preview how the custom branding will appear in owner reports and documents"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:d.watch("primaryColor")||"#3b82f6"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d.watch("logoUrl")?e.jsx("img",{src:d.watch("logoUrl"),alt:"Company Logo",className:"h-12 w-auto",onError:p=>{p.target.style.display="none"}}):e.jsx("div",{className:"h-12 w-24 rounded flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:d.watch("primaryColor")||"#3b82f6"},children:"LOGO"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Monthly Property Report"}),e.jsx("p",{className:"text-gray-600",children:"December 2024"})]})]}),e.jsxs(U,{style:{backgroundColor:d.watch("secondaryColor")||"#06b6d4",color:"white"},children:[d.watch("reportTheme")||"Modern"," Theme"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Revenue"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:d.watch("primaryColor")||"#3b82f6"},children:"à¸¿128,500"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Occupancy"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:d.watch("secondaryColor")||"#06b6d4"},children:"85%"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Net Profit"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"à¸¿89,200"})]})]}),d.watch("customDomain")&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Custom Domain:"})," ",d.watch("customDomain")]})})]}),e.jsx("div",{className:"text-center text-gray-500 text-sm",children:"This is a preview of how your branding will appear in owner reports and documents. Save your settings to apply these changes."})]})})]})})]})]})}const DS=[{code:"THA",name:"Thailand"},{code:"USA",name:"United States"},{code:"GBR",name:"United Kingdom"},{code:"SGP",name:"Singapore"},{code:"MYS",name:"Malaysia"},{code:"IDN",name:"Indonesia"},{code:"VNM",name:"Vietnam"},{code:"PHL",name:"Philippines"}],Lg=[{value:"contract",label:"Rental Contract"},{value:"deposit_rules",label:"Deposit Rules"},{value:"terms_conditions",label:"Terms & Conditions"},{value:"privacy_policy",label:"Privacy Policy"},{value:"cancellation_policy",label:"Cancellation Policy"},{value:"house_rules",label:"House Rules"}];function iQ(){const[t,s]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState(!1),[l,o]=v.useState(null),[c,d]=v.useState({countryCode:"",docType:"",templateText:""}),{toast:u}=st(),m=pt(),{data:h=[],isLoading:x}=xe({queryKey:["/api/legal-templates",t,r],queryFn:()=>{const k=new URLSearchParams;return t&&k.append("countryCode",t),r&&k.append("docType",r),Ne("GET",`/api/legal-templates?${k.toString()}`).then(R=>R.json())}}),{data:f=[]}=xe({queryKey:["/api/legal-templates/countries"],queryFn:()=>Ne("GET","/api/legal-templates/countries").then(k=>k.json())}),{data:p=[]}=xe({queryKey:["/api/legal-templates/doc-types"],queryFn:()=>Ne("GET","/api/legal-templates/doc-types").then(k=>k.json())}),g=Te({mutationFn:k=>Ne("POST","/api/legal-templates",{body:k}).then(R=>R.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),m.invalidateQueries({queryKey:["/api/legal-templates/countries"]}),m.invalidateQueries({queryKey:["/api/legal-templates/doc-types"]}),u({title:"Success",description:"Legal template created successfully"}),i(!1),j()},onError:()=>{u({title:"Error",description:"Failed to create legal template",variant:"destructive"})}}),y=Te({mutationFn:({id:k,...R})=>Ne("PUT",`/api/legal-templates/${k}`,{body:R}).then(F=>F.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),u({title:"Success",description:"Legal template updated successfully"}),i(!1),o(null),j()},onError:()=>{u({title:"Error",description:"Failed to update legal template",variant:"destructive"})}}),b=Te({mutationFn:k=>Ne("DELETE",`/api/legal-templates/${k}`).then(R=>R.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),m.invalidateQueries({queryKey:["/api/legal-templates/countries"]}),m.invalidateQueries({queryKey:["/api/legal-templates/doc-types"]}),u({title:"Success",description:"Legal template deleted successfully"})},onError:()=>{u({title:"Error",description:"Failed to delete legal template",variant:"destructive"})}}),j=()=>{d({countryCode:"",docType:"",templateText:""}),o(null)},w=k=>{if(k.preventDefault(),!c.countryCode||!c.docType||!c.templateText){u({title:"Error",description:"All fields are required",variant:"destructive"});return}l?y.mutate({id:l.id,...c}):g.mutate(c)},N=k=>{o(k),d({countryCode:k.countryCode,docType:k.docType,templateText:k.templateText}),i(!0)},S=k=>{confirm("Are you sure you want to delete this legal template?")&&b.mutate(k)},O=k=>DS.find(R=>R.code===k)?.name||k,P=k=>Lg.find(R=>R.value===k)?.label||k;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Legal Templates Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage country-specific legal documents and contract templates"})]}),e.jsxs(Ge,{open:a,onOpenChange:i,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{onClick:j,children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Template"]})}),e.jsxs(We,{className:"max-w-4xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:l?"Edit Legal Template":"Create Legal Template"}),e.jsx(Ct,{children:l?"Update the legal template details":"Create a new country-specific legal template"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"countryCode",children:"Country"}),e.jsxs(ae,{value:c.countryCode,onValueChange:k=>d(R=>({...R,countryCode:k})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select country"})}),e.jsx(ne,{children:DS.map(k=>e.jsxs(A,{value:k.code,children:[k.name," (",k.code,")"]},k.code))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"docType",children:"Document Type"}),e.jsxs(ae,{value:c.docType,onValueChange:k=>d(R=>({...R,docType:k})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select document type"})}),e.jsx(ne,{children:Lg.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"templateText",children:"Template Content"}),e.jsx(ct,{id:"templateText",value:c.templateText,onChange:k=>d(R=>({...R,templateText:k.target.value})),placeholder:"Enter the legal template text...",className:"min-h-[300px]"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:g.isPending||y.isPending,children:l?"Update Template":"Create Template"})]})]})]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(ht,{children:[e.jsx(de,{value:"overview",children:"ðŸ“Š Overview"}),e.jsx(de,{value:"templates",children:"ðŸ“„ Templates"}),e.jsx(de,{value:"countries",children:"ðŸŒ Countries"})]}),e.jsx(me,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Templates"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.length})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Countries"}),e.jsx(ma,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:f.length})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Document Types"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:p.length})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Recent Updates"}),e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(k=>new Date(k.createdAt)>new Date(Date.now()-7*24*60*60*1e3)).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]})]})}),e.jsxs(me,{value:"templates",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"Filter by country"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All countries"}),f.map(k=>e.jsx(A,{value:k,children:O(k)},k))]})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"Filter by document type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All document types"}),p.map(k=>e.jsx(A,{value:k,children:P(k)},k))]})]})]}),x?e.jsx("div",{className:"text-center py-8",children:"Loading templates..."}):e.jsxs("div",{className:"grid gap-4",children:[h.map(k=>e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"text-lg",children:P(k.docType)}),e.jsx(U,{variant:"secondary",children:O(k.countryCode)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>N(k),children:e.jsx(Nr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>S(k.id),disabled:b.isPending,children:e.jsx(ir,{className:"w-4 h-4"})})]})]}),e.jsxs(Ee,{children:["Created: ",new Date(k.createdAt).toLocaleDateString()]})]}),e.jsx(T,{children:e.jsxs("div",{className:"bg-muted p-4 rounded-md",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Template Preview:"}),e.jsx("div",{className:"text-sm max-h-32 overflow-y-auto",children:k.templateText.length>200?`${k.templateText.substring(0,200)}...`:k.templateText})]})})]},k.id)),h.length===0&&e.jsx(D,{children:e.jsxs(T,{className:"text-center py-8",children:[e.jsx(dt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No legal templates found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first template to get started"})]})})]})]}),e.jsx(me,{value:"countries",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[f.map(k=>{const R=h.filter(F=>F.countryCode===k);return e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ma,{className:"w-5 h-5"}),O(k)]}),e.jsxs(Ee,{children:[R.length," template(s) available"]})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-2",children:Lg.map(F=>{const I=R.some(W=>W.docType===F.value);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:F.label}),e.jsx(U,{variant:I?"default":"secondary",children:I?"Available":"Missing"})]},F.value)})})})]},k)}),f.length===0&&e.jsx(D,{className:"col-span-full",children:e.jsxs(T,{className:"text-center py-8",children:[e.jsx(ma,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No countries configured"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add legal templates to see countries here"})]})})]})})]})]})}function lQ(){const[t,s]=v.useState(!1),[r,n]=v.useState(!1),[a,i]=v.useState(null),[l,o]=v.useState(!1),[c,d]=v.useState("all"),[u,m]=v.useState("all"),[h,x]=v.useState(""),[f,p]=v.useState([]),{toast:g}=st(),y=pt(),{data:b=[],isLoading:j}=xe({queryKey:["/api/marketing-packs"]}),{data:w=[]}=xe({queryKey:["/api/properties"]}),{data:N={}}=xe({queryKey:["/api/marketing-packs/analytics"]}),S=Te({mutationFn:E=>Ne("POST","/api/marketing-packs",E),onSuccess:()=>{g({title:"Success",description:"Marketing pack created successfully"}),y.invalidateQueries({queryKey:["/api/marketing-packs"]}),s(!1)},onError:()=>{g({title:"Error",description:"Failed to create marketing pack",variant:"destructive"})}}),O=Te({mutationFn:E=>Ne("DELETE",`/api/marketing-packs/${E}`),onSuccess:()=>{g({title:"Success",description:"Marketing pack deleted successfully"}),y.invalidateQueries({queryKey:["/api/marketing-packs"]})},onError:()=>{g({title:"Error",description:"Failed to delete marketing pack",variant:"destructive"})}}),P=Te({mutationFn:E=>Ne("POST","/api/marketing-packs/bulk-generate",E),onSuccess:E=>{g({title:"Success",description:E.message}),y.invalidateQueries({queryKey:["/api/marketing-packs"]}),o(!1),p([])},onError:()=>{g({title:"Error",description:"Failed to bulk generate marketing packs",variant:"destructive"})}}),k=E=>{E.preventDefault();const B=new FormData(E.target),G={propertyId:parseInt(B.get("propertyId")),packType:B.get("packType"),targetAudience:B.get("targetAudience"),language:B.get("language"),status:"draft"};S.mutate(G)},R=E=>{E.preventDefault();const B=new FormData(E.target),G={propertyIds:f,packType:B.get("packType"),targetAudience:B.get("targetAudience"),language:B.get("language")};P.mutate(G)},F=E=>{switch(E){case"published":return"default";case"generated":return"secondary";case"draft":return"outline";case"archived":return"destructive";default:return"outline"}},I=E=>{switch(E){case"luxury":return"ðŸ’Ž";case"premium":return"â­";case"standard":return"ðŸ“„";case"agent-focused":return"ðŸ¢";default:return"ðŸ“¦"}},W=b.filter(E=>{const B=c==="all"||E.status===c,G=u==="all"||E.packType===u,J=!h||E.propertyName?.toLowerCase().includes(h.toLowerCase())||E.packType.toLowerCase().includes(h.toLowerCase())||E.targetAudience.toLowerCase().includes(h.toLowerCase());return B&&G&&J});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Marketing Pack Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate and manage AI-powered marketing materials for your properties"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>o(!0),variant:"outline",children:[e.jsx(X8,{className:"h-4 w-4 mr-2"}),"Bulk Generate"]}),e.jsxs(M,{onClick:()=>s(!0),children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Create Pack"]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(ht,{children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"packs",children:"Marketing Packs"}),e.jsx(de,{value:"analytics",children:"Analytics"})]}),e.jsxs(me,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Packs"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N?.totalPacks||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all properties"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Published"}),e.jsx(U,{variant:"default",className:"h-4 w-4 rounded-full"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N?.statusDistribution?.published||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready for use"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Generated"}),e.jsx(uB,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N?.statusDistribution?.generated||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI generated content"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Draft"}),e.jsx(Nr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N?.statusDistribution?.draft||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Work in progress"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Pack Type Distribution"}),e.jsx(Ee,{children:"Distribution of marketing pack types"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:N?.packTypeDistribution?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:I(E.packType)}),e.jsx("span",{className:"capitalize",children:E.packType})]}),e.jsx(U,{variant:"outline",children:E.count})]},E.packType))})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Target Audience Distribution"}),e.jsx(Ee,{children:"Marketing focus by audience type"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:N?.audienceDistribution?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"capitalize",children:E.audience})]}),e.jsx(U,{variant:"outline",children:E.count})]},E.audience))})})]})]})]}),e.jsxs(me,{value:"packs",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(Q,{placeholder:"Search packs...",value:h,onChange:E=>x(E.target.value),className:"max-w-sm"}),e.jsxs(ae,{value:c,onValueChange:d,children:[e.jsx(re,{className:"w-[180px]",children:e.jsx(ie,{placeholder:"Filter by status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"draft",children:"Draft"}),e.jsx(A,{value:"generated",children:"Generated"}),e.jsx(A,{value:"published",children:"Published"}),e.jsx(A,{value:"archived",children:"Archived"})]})]}),e.jsxs(ae,{value:u,onValueChange:m,children:[e.jsx(re,{className:"w-[180px]",children:e.jsx(ie,{placeholder:"Filter by type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"standard",children:"Standard"}),e.jsx(A,{value:"premium",children:"Premium"}),e.jsx(A,{value:"luxury",children:"Luxury"}),e.jsx(A,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(E=>e.jsxs(D,{className:"hover:shadow-md transition-shadow",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(L,{className:"text-lg",children:[e.jsx("span",{className:"mr-2",children:I(E.packType)}),E.propertyName]}),e.jsxs(Ee,{className:"capitalize",children:[E.packType," â€¢ ",E.targetAudience]})]}),e.jsx(U,{variant:F(E.status),children:E.status})]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(m1,{className:"h-4 w-4"}),e.jsx("span",{className:"uppercase",children:E.language})]}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-3",children:[E.aiSummary?.substring(0,100),"..."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{i(E),n(!0)},children:[e.jsx(Bt,{className:"h-4 w-4 mr-1"}),"View"]}),E.pdfUrl&&e.jsx(M,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:E.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(js,{className:"h-4 w-4 mr-1"}),"PDF"]})}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>O.mutate(E.id),children:e.jsx(ir,{className:"h-4 w-4"})})]})]})})]},E.id))}),W.length===0&&!j&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No marketing packs found"}),e.jsx("p",{className:"text-muted-foreground",children:"Create your first marketing pack to get started."})]})]}),e.jsx(me,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),"Language Distribution"]}),e.jsx(Ee,{children:"Marketing packs by language"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:N?.languageDistribution?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m1,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"uppercase",children:E.language})]}),e.jsx(U,{variant:"outline",children:E.count})]},E.language))})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Monthly Trends"}),e.jsx(Ee,{children:"Pack creation over time"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:N?.monthlyTrends?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:new Date(E.month).toLocaleDateString("en-US",{year:"numeric",month:"short"})}),e.jsxs(U,{variant:"outline",children:[E.count," packs"]})]},E.month))})})]})]})})]}),e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"sm:max-w-[425px]",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Marketing Pack"}),e.jsx(Ct,{children:"Generate AI-powered marketing materials for your property."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"propertyId",children:"Property"}),e.jsxs(ae,{name:"propertyId",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})}),e.jsx(ne,{children:w.map(E=>e.jsxs(A,{value:E.id.toString(),children:[E.name," - ",E.bedrooms,"BR"]},E.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"packType",children:"Pack Type"}),e.jsxs(ae,{name:"packType",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select pack type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"standard",children:"Standard"}),e.jsx(A,{value:"premium",children:"Premium"}),e.jsx(A,{value:"luxury",children:"Luxury"}),e.jsx(A,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsxs(ae,{name:"targetAudience",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select target audience"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"general",children:"General"}),e.jsx(A,{value:"families",children:"Families"}),e.jsx(A,{value:"couples",children:"Couples"}),e.jsx(A,{value:"business",children:"Business"}),e.jsx(A,{value:"luxury",children:"Luxury"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"language",children:"Language"}),e.jsxs(ae,{name:"language",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select language"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"th",children:"Thai"}),e.jsx(A,{value:"zh",children:"Chinese"}),e.jsx(A,{value:"ja",children:"Japanese"}),e.jsx(A,{value:"ko",children:"Korean"})]})]})]}),e.jsx(Zs,{children:e.jsx(M,{type:"submit",disabled:S.isPending,children:S.isPending?"Creating...":"Create Pack"})})]})]})}),e.jsx(Ge,{open:r,onOpenChange:n,children:e.jsxs(We,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx("span",{children:I(a?.packType||"")}),a?.propertyName," - ",a?.packType]}),e.jsxs(Ct,{children:["Generated for ",a?.targetAudience," audience in ",a?.language?.toUpperCase()]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{variant:F(a.status),children:a.status}),e.jsx(U,{variant:"outline",children:a.language?.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"AI Generated Content"}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:a.aiSummary})})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(a.createdAt).toLocaleDateString(),a.updatedAt!==a.createdAt&&e.jsxs(e.Fragment,{children:[" â€¢ ","Updated: ",new Date(a.updatedAt).toLocaleDateString()]})]})]})]})}),e.jsx(Ge,{open:l,onOpenChange:o,children:e.jsxs(We,{className:"sm:max-w-[500px]",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Bulk Generate Marketing Packs"}),e.jsx(Ct,{children:"Generate marketing packs for multiple properties at once."})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Select Properties"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2 space-y-2",children:w.map(E=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:f.includes(E.id),onChange:B=>{B.target.checked?p([...f,E.id]):p(f.filter(G=>G!==E.id))}}),e.jsxs("span",{className:"text-sm",children:[E.name," - ",E.bedrooms,"BR"]})]},E.id))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," properties selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"packType",children:"Pack Type"}),e.jsxs(ae,{name:"packType",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select pack type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"standard",children:"Standard"}),e.jsx(A,{value:"premium",children:"Premium"}),e.jsx(A,{value:"luxury",children:"Luxury"}),e.jsx(A,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsxs(ae,{name:"targetAudience",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select target audience"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"general",children:"General"}),e.jsx(A,{value:"families",children:"Families"}),e.jsx(A,{value:"couples",children:"Couples"}),e.jsx(A,{value:"business",children:"Business"}),e.jsx(A,{value:"luxury",children:"Luxury"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"language",children:"Language"}),e.jsxs(ae,{name:"language",required:!0,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select language"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"en",children:"English"}),e.jsx(A,{value:"th",children:"Thai"}),e.jsx(A,{value:"zh",children:"Chinese"}),e.jsx(A,{value:"ja",children:"Japanese"}),e.jsx(A,{value:"ko",children:"Korean"})]})]})]}),e.jsx(Zs,{children:e.jsx(M,{type:"submit",disabled:P.isPending||f.length===0,children:P.isPending?"Generating...":`Generate ${f.length} Packs`})})]})]})})]})}const Bg=t=>{switch(t){case"critical":return"destructive";case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},Vg=t=>{switch(t){case"open":return"destructive";case"in-progress":return"default";case"resolved":return"secondary";default:return"outline"}},qg=t=>{switch(t){case"missing-task":return e.jsx(tt,{className:"h-4 w-4"});case"overdue-maintenance":return e.jsx(St,{className:"h-4 w-4"});case"booking-conflict":return e.jsx(It,{className:"h-4 w-4"});case"payout-mismatch":return e.jsx(Ot,{className:"h-4 w-4"});default:return e.jsx(Bs,{className:"h-4 w-4"})}};function WR(){const[t,s]=v.useState("overview"),{toast:r}=st(),n=pt(),{data:a,isLoading:i}=xe({queryKey:["/api/ai-ops-anomalies"],staleTime:1e3*60*2}),{data:l,isLoading:o}=xe({queryKey:["/api/ai-ops-anomalies/analytics"],staleTime:1e3*60*2}),c=Te({mutationFn:()=>Ne("POST","/api/ai-ops-anomalies/detect"),onSuccess:m=>{r({title:"Anomaly Detection Complete",description:m.message}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{r({title:"Detection Failed",description:"Failed to detect anomalies",variant:"destructive"})}}),d=Te({mutationFn:()=>Ne("POST","/api/ai-ops-anomalies/auto-fix"),onSuccess:m=>{r({title:"Auto-Fix Complete",description:m.message}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{r({title:"Auto-Fix Failed",description:"Failed to auto-fix anomalies",variant:"destructive"})}}),u=Te({mutationFn:({id:m,fixAction:h})=>Ne("POST",`/api/ai-ops-anomalies/${m}/resolve`,{fixAction:h}),onSuccess:()=>{r({title:"Anomaly Resolved",description:"Anomaly has been marked as resolved"}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{r({title:"Resolution Failed",description:"Failed to resolve anomaly",variant:"destructive"})}});return i||o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Gt,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"AI Operations Anomalies"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage system anomalies with AI-powered detection and auto-fix capabilities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:()=>c.mutate(),disabled:c.isPending,variant:"outline",children:[c.isPending?e.jsx(Gt,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Xd,{className:"h-4 w-4 mr-2"}),"Detect Anomalies"]}),e.jsxs(M,{onClick:()=>d.mutate(),disabled:d.isPending,variant:"default",children:[d.isPending?e.jsx(Gt,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Auto-Fix"]})]})]}),e.jsxs(xt,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(ht,{children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"anomalies",children:"Anomalies"}),e.jsx(de,{value:"analytics",children:"Analytics"})]}),e.jsxs(me,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Anomalies"}),e.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.totalAnomalies||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Detected across all properties"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Open Issues"}),e.jsx(St,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.statusDistribution?.find(m=>m.status==="open")?.count||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requiring attention"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Auto-Fix Rate"}),e.jsx(es,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[l?.autoFixSuccessRate||"0.0","%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully auto-resolved"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Resolved"}),e.jsx(Ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.statusDistribution?.find(m=>m.status==="resolved")?.count||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Issues fixed"})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Recent Anomalies"}),e.jsx(Ee,{children:"Latest detected system anomalies"})]}),e.jsx(T,{children:a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[qg(m.anomalyType),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.details?.description||"Unknown anomaly"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(U,{variant:Bg(m.severity),children:m.severity}),e.jsx(U,{variant:Vg(m.status),children:m.status}),e.jsx("span",{className:"text-sm text-muted-foreground",children:Kd(new Date(m.detectedAt),{addSuffix:!0})})]})]})]}),m.status==="open"&&e.jsx(M,{size:"sm",variant:"outline",onClick:()=>u.mutate({id:m.id,fixAction:"Manually resolved from overview"}),disabled:u.isPending,children:"Resolve"})]},m.id))}):e.jsxs(Wn,{children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsx(Qn,{children:"No anomalies detected. Your system is running smoothly!"})]})})]})]}),e.jsx(me,{value:"anomalies",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"All Anomalies"}),e.jsx(Ee,{children:"Complete list of system anomalies"})]}),e.jsx(T,{children:a&&a.length>0?e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Description"}),e.jsx(Oe,{children:"Severity"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Auto-Fixed"}),e.jsx(Oe,{children:"Detected"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:a.map(m=>e.jsxs(Nt,{children:[e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[qg(m.anomalyType),e.jsx("span",{className:"capitalize",children:m.anomalyType.replace("-"," ")})]})}),e.jsx(De,{className:"max-w-md",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.details?.description}),m.details?.recommendation&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m.details.recommendation})]})}),e.jsx(De,{children:e.jsx(U,{variant:Bg(m.severity),children:m.severity})}),e.jsx(De,{children:e.jsx(U,{variant:Vg(m.status),children:m.status})}),e.jsx(De,{children:m.autoFixed?e.jsx(Ie,{className:"h-4 w-4 text-green-500"}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})}),e.jsx(De,{children:Kd(new Date(m.detectedAt),{addSuffix:!0})}),e.jsx(De,{children:m.status==="open"&&e.jsx(M,{size:"sm",variant:"outline",onClick:()=>u.mutate({id:m.id,fixAction:"Manually resolved"}),disabled:u.isPending,children:"Resolve"})})]},m.id))})]}):e.jsxs(Wn,{children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsx(Qn,{children:"No anomalies found. Run detection to scan for issues."})]})})]})}),e.jsx(me,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Status Distribution"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:l?.statusDistribution?.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(U,{variant:Vg(m.status),children:m.status})}),e.jsx("span",{className:"font-medium",children:m.count})]},m.status))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Severity Distribution"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:l?.severityDistribution?.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(U,{variant:Bg(m.severity),children:m.severity})}),e.jsx("span",{className:"font-medium",children:m.count})]},m.severity))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Anomaly Types"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:l?.typeDistribution?.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[qg(m.type),e.jsx("span",{className:"capitalize",children:m.type.replace("-"," ")})]}),e.jsx("span",{className:"font-medium",children:m.count})]},m.type))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"AI Performance"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-Fix Success Rate"}),e.jsxs("span",{className:"text-2xl font-bold",children:[l?.autoFixSuccessRate,"%"]})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${l?.autoFixSuccessRate}%`}})})]})})]})]})})]})]})}const oQ=Object.freeze(Object.defineProperty({__proto__:null,default:WR},Symbol.toStringTag,{value:"Module"}));function cQ(){const[t,s]=v.useState(""),[r,n]=v.useState("weekly"),a=[{id:1,name:"Pool Cleaning Schedule",frequency:"Weekly",nextRun:"2025-01-22 10:00",department:"pool",taskTemplate:"Pool cleaning and chemical balance check",assignedTo:"Pool Team",property:"All Properties",status:"active",lastGenerated:"2025-01-15 10:00",tasksCreated:12},{id:2,name:"Deep Cleaning Rotation",frequency:"Monthly",nextRun:"2025-01-25 09:00",department:"cleaning",taskTemplate:"Deep cleaning of property including all rooms",assignedTo:"Housekeeping Team",property:"Villa Samui Breeze",status:"active",lastGenerated:"2024-12-25 09:00",tasksCreated:8},{id:3,name:"Garden Maintenance",frequency:"Bi-weekly",nextRun:"2025-01-23 08:00",department:"garden",taskTemplate:"Garden pruning, watering, and landscaping maintenance",assignedTo:"Garden Team",property:"Villa Aruna",status:"paused",lastGenerated:"2025-01-09 08:00",tasksCreated:15},{id:4,name:"AC System Inspection",frequency:"Monthly",nextRun:"2025-01-28 14:00",department:"maintenance",taskTemplate:"Air conditioning system inspection and filter replacement",assignedTo:"Maintenance Team",property:"All Properties",status:"active",lastGenerated:"2024-12-28 14:00",tasksCreated:6},{id:5,name:"Wi-Fi & Tech Check",frequency:"Weekly",nextRun:"2025-01-24 16:00",department:"general",taskTemplate:"Internet connectivity and smart device functionality check",assignedTo:"Tech Support",property:"All Properties",status:"active",lastGenerated:"2025-01-17 16:00",tasksCreated:20}],i=[{id:1,title:"Pool Cleaning - Villa Samui Breeze",generatedBy:"Pool Cleaning Schedule",createdAt:"2025-01-21 10:00",assignedTo:"Pool Team",dueDate:"2025-01-21 15:00",status:"pending",department:"pool"},{id:2,title:"Wi-Fi Check - Villa Aruna",generatedBy:"Wi-Fi & Tech Check",createdAt:"2025-01-21 16:00",assignedTo:"Tech Support",dueDate:"2025-01-21 17:00",status:"in-progress",department:"general"},{id:3,title:"Deep Cleaning - Villa Paradise",generatedBy:"Deep Cleaning Rotation",createdAt:"2025-01-20 09:00",assignedTo:"Housekeeping Team",dueDate:"2025-01-20 17:00",status:"completed",department:"cleaning"}],l=d=>{switch(d){case"pool":return"bg-blue-100 text-blue-800";case"cleaning":return"bg-green-100 text-green-800";case"garden":return"bg-emerald-100 text-emerald-800";case"maintenance":return"bg-orange-100 text-orange-800";case"general":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},o=d=>{switch(d){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},c={activeRules:a.filter(d=>d.status==="active").length,totalTasksGenerated:a.reduce((d,u)=>d+u.tasksCreated,0),pendingTasks:i.filter(d=>d.status==="pending").length,completedTasks:i.filter(d=>d.status==="completed").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(f1,{className:"w-8 h-8"}),"Auto-Schedule Task Generator"]}),e.jsx("p",{className:"text-gray-600",children:"Automate recurring task creation with smart scheduling rules"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(ss,{className:"w-4 h-4 mr-2"}),"Global Settings"]}),e.jsxs(M,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Create Rule"]})]})]}),e.jsxs(xt,{defaultValue:"rules",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"rules",children:"Scheduling Rules"}),e.jsx(de,{value:"tasks",children:"Generated Tasks"}),e.jsx(de,{value:"analytics",children:"Analytics"}),e.jsx(de,{value:"settings",children:"System Settings"})]}),e.jsxs(me,{value:"rules",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Rules"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.activeRules})]}),e.jsx(Xd,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tasks Generated"}),e.jsx("p",{className:"text-2xl font-bold",children:c.totalTasksGenerated})]}),e.jsx(f1,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.pendingTasks})]}),e.jsx(tt,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.completedTasks})]}),e.jsx(Xe,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Create New Scheduling Rule"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsx(Q,{placeholder:"Rule name",value:t,onChange:d=>s(d.target.value)}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"bi-weekly",children:"Bi-weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs(ae,{defaultValue:"all",children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(A,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(A,{value:"villa-paradise",children:"Villa Paradise"})]})]}),e.jsxs(ae,{defaultValue:"cleaning",children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Department"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"pool",children:"Pool"}),e.jsx(A,{value:"garden",children:"Garden"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"general",children:"General"})]})]}),e.jsx(Q,{placeholder:"Assigned to"}),e.jsx(M,{children:"Create Rule"})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Active Scheduling Rules"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:a.map(d=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600",children:d.taskTemplate})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:o(d.status),children:d.status}),e.jsx(U,{className:l(d.department),children:d.department})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Frequency"}),e.jsx("p",{className:"text-sm font-medium",children:d.frequency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Run"}),e.jsx("p",{className:"text-sm font-medium",children:d.nextRun})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Assigned To"}),e.jsx("p",{className:"text-sm font-medium",children:d.assignedTo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Property"}),e.jsx("p",{className:"text-sm font-medium",children:d.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tasks Created"}),e.jsx("p",{className:"text-sm font-medium",children:d.tasksCreated})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:e.jsxs("span",{children:["Last generated: ",d.lastGenerated]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Nr,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(M,{variant:"outline",size:"sm",children:d.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(Z8,{className:"w-3 h-3 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(Xd,{className:"w-3 h-3 mr-1"}),"Resume"]})}),e.jsxs(M,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-800",children:[e.jsx(ev,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]},d.id))})})]})]}),e.jsx(me,{value:"tasks",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recently Generated Tasks"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:i.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Generated by: ",d.generatedBy]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",d.createdAt," â€¢ Due: ",d.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:l(d.department),children:d.department}),e.jsx(U,{className:o(d.status),children:d.status}),e.jsx("span",{className:"text-sm text-gray-600",children:d.assignedTo})]})]},d.id))})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Task Generation by Department"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pool"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"12"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"General"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"33%"}})}),e.jsx("span",{className:"text-sm",children:"20"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Garden"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"15"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Cleaning"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"13%"}})}),e.jsx("span",{className:"text-sm",children:"8"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maintenance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"10%"}})}),e.jsx("span",{className:"text-sm",children:"6"})]})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Completion Rate by Rule"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"94%"}),e.jsx("p",{className:"text-gray-600",children:"Average Completion Rate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Pool Cleaning Schedule"}),e.jsx("span",{className:"font-semibold text-green-600",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Wi-Fi & Tech Check"}),e.jsx("span",{className:"font-semibold text-green-600",children:"95%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Deep Cleaning Rotation"}),e.jsx("span",{className:"font-semibold text-green-600",children:"88%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"AC System Inspection"}),e.jsx("span",{className:"font-semibold text-orange-600",children:"83%"})]})]})]})})]})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Global System Settings"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Task Generation"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-generate tasks"}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Skip holidays"}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Weekend generation"}),e.jsx(Pt,{})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Notifications"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Rule creation alerts"}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Task generation alerts"}),e.jsx(Pt,{})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed generation alerts"}),e.jsx(Pt,{defaultChecked:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Default Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default Assignment"}),e.jsx(Q,{placeholder:"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Task Due Hours"}),e.jsx(Q,{type:"number",placeholder:"24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Priority Level"}),e.jsxs(ae,{defaultValue:"medium",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"low",children:"Low"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"urgent",children:"Urgent"})]})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function dQ(){const{formatWithConversion:t}=Rr(),[s,r]=v.useState("all"),[n,a]=v.useState("all"),[i,l]=v.useState("month"),[o,c]=v.useState({minRevenue:"",maxRevenue:"",minBookings:"",dateFrom:"",dateTo:""}),{data:d}=xe({queryKey:["/api/properties"]}),{data:u}=xe({queryKey:["/api/bookings"]}),m=j=>{const w=(u||[]).filter(R=>R.source?.toLowerCase().includes(j.toLowerCase())||R.bookingPlatform?.toLowerCase().includes(j.toLowerCase())),N=w.length,S=w.reduce((R,F)=>R+parseFloat(F.totalAmount||F.guestTotalPrice||0),0),O=w.reduce((R,F)=>R+parseFloat(F.otaCommissionAmount||0),0),P=S>0?O/S*100:0,k=w.reduce((R,F)=>R+parseFloat(F.platformPayout||F.netHostPayout||F.totalAmount-(F.otaCommissionAmount||0)||0),0);return{totalBookings:N,grossRevenue:S,hostFee:O,netPayout:k,commissionRate:Math.round(P*10)/10}},h=[{name:"Airbnb",color:"bg-red-100 text-red-800",...m("airbnb")},{name:"Booking.com",color:"bg-blue-100 text-blue-800",...m("booking")},{name:"VRBO",color:"bg-yellow-100 text-yellow-800",...m("vrbo")},{name:"Hostaway",color:"bg-green-100 text-green-800",...m("hostaway")},{name:"Expedia",color:"bg-purple-100 text-purple-800",...m("expedia")}].filter(j=>j.totalBookings>0),x=(d||[]).filter(j=>(u||[]).filter(N=>N.propertyId===j.id).length>0).map(j=>{const w=(u||[]).filter(P=>P.propertyId===j.id),N=w.reduce((P,k)=>P+parseFloat(k.totalAmount||k.guestTotalPrice||0),0),S=w.reduce((P,k)=>P+parseFloat(k.otaCommissionAmount||0),0),O=N-S;return{property:j.name,total:{bookings:w.length,gross:N,net:O}}}),f=[],p=h.reduce((j,w)=>j+w.grossRevenue,0),g=h.reduce((j,w)=>j+w.netPayout,0),y=p-g,b=y/p*100;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(_o,{className:"w-8 h-8"}),"OTA Revenue & Net Payout Calculation"]}),e.jsx("p",{className:"text-gray-600",children:"Analyze commission structures and actual payouts across booking platforms"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{children:[e.jsx(Bt,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]}),e.jsxs(D,{className:"mb-6",children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Filters & Property Selection"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Property"}),e.jsxs(ae,{value:s,onValueChange:r,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),(d||[]).map(j=>e.jsx(A,{value:j.id.toString(),children:j.name},j.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"OTA Platform"}),e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select platform"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Platforms"}),e.jsx(A,{value:"airbnb",children:"Airbnb"}),e.jsx(A,{value:"booking",children:"Booking.com"}),e.jsx(A,{value:"vrbo",children:"VRBO"}),e.jsx(A,{value:"expedia",children:"Expedia"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time Period"}),e.jsxs(ae,{value:i,onValueChange:l,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select period"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"}),e.jsx(A,{value:"custom",children:"Custom Range"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Bookings"}),e.jsx(Q,{type:"number",placeholder:"e.g. 10",value:o.minBookings,onChange:j=>c({...o,minBookings:j.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Revenue ($)"}),e.jsx(Q,{type:"number",placeholder:"e.g. 5000",value:o.minRevenue,onChange:j=>c({...o,minRevenue:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Revenue ($)"}),e.jsx(Q,{type:"number",placeholder:"e.g. 50000",value:o.maxRevenue,onChange:j=>c({...o,maxRevenue:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date From"}),e.jsx(Q,{type:"date",value:o.dateFrom,onChange:j=>c({...o,dateFrom:j.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date To"}),e.jsx(Q,{type:"date",value:o.dateTo,onChange:j=>c({...o,dateTo:j.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(M,{onClick:()=>{console.log("Filters applied:",o,s,n,i)},children:"Apply Filters"}),e.jsx(M,{variant:"outline",onClick:()=>{c({minRevenue:"",maxRevenue:"",minBookings:"",dateFrom:"",dateTo:""}),r("all"),a("all"),l("month")},children:"Clear Filters"}),e.jsxs(U,{variant:"outline",className:"ml-2 px-3 py-1",children:[s==="all"?"All Properties":s," â€¢",n==="all"?"All Platforms":n," â€¢",i]})]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"overview",children:"Revenue Overview"}),e.jsx(de,{value:"platforms",children:"Platform Analysis"}),e.jsx(de,{value:"properties",children:"Property Breakdown"}),e.jsx(de,{value:"trends",children:"Monthly Trends"}),e.jsx(de,{value:"calculator",children:"Payout Calculator"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Gross Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:t(p)})]}),e.jsx(Ze,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Payout Received"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t(g)})]}),e.jsx(Ot,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Commission Loss"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t(y)})]}),e.jsx(tB,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Commission Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[b.toFixed(1),"%"]})]}),e.jsx($s,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ae,{value:s,onValueChange:r,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),(d||[]).map(j=>e.jsx(A,{value:j.id.toString(),children:j.name},j.id))]})]}),e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Platforms"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Platforms"}),e.jsx(A,{value:"airbnb",children:"Airbnb"}),e.jsx(A,{value:"booking",children:"Booking.com"}),e.jsx(A,{value:"vrbo",children:"VRBO"}),e.jsx(A,{value:"expedia",children:"Expedia"})]})]}),e.jsxs(ae,{value:i,onValueChange:l,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"This Month"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Revenue vs Payout Comparison"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:h.map(j=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:j.color,children:j.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[j.commissionRate,"% commission"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:t(j.netPayout)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["from ",t(j.grossRevenue)]})]})]}),e.jsxs("div",{className:"flex gap-1 h-3",children:[e.jsx("div",{className:"bg-green-400 rounded-l",style:{width:`${j.netPayout/j.grossRevenue*100}%`}}),e.jsx("div",{className:"bg-red-400 rounded-r",style:{width:`${j.hostFee/j.grossRevenue*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Net Payout: ",(j.netPayout/j.grossRevenue*100).toFixed(1),"%"]}),e.jsxs("span",{children:["Commission: ",(j.hostFee/j.grossRevenue*100).toFixed(1),"%"]})]})]},j.name))})})]})]}),e.jsx(me,{value:"platforms",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(j=>e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsx(U,{className:j.color,children:j.name}),e.jsxs("span",{className:"text-lg font-bold",children:[j.commissionRate,"%"]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-xl font-bold",children:j.totalBookings})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Nightly Rate"}),e.jsx("p",{className:"text-xl font-bold",children:t(j.averageNightly)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Gross Revenue"}),e.jsx("span",{className:"font-medium",children:t(j.grossRevenue)})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsxs("span",{className:"text-sm",children:["Host Fee (",j.commissionRate,"%)"]}),e.jsxs("span",{className:"font-medium",children:["-",t(j.hostFee)]})]}),j.guestServiceFee>0&&e.jsxs("div",{className:"flex justify-between text-orange-600",children:[e.jsx("span",{className:"text-sm",children:"Guest Service Fee"}),e.jsxs("span",{className:"font-medium",children:["-",t(j.guestServiceFee)]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-green-600 font-bold",children:[e.jsx("span",{children:"Net Payout"}),e.jsx("span",{children:t(j.netPayout)})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payout Efficiency"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[(j.netPayout/j.grossRevenue*100).toFixed(1),"%"]})]})})]})]},j.name))})}),e.jsx(me,{value:"properties",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Revenue Breakdown by Property"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-6",children:x.map(j=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-4",children:j.property}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Airbnb"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.airbnb.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:t(j.airbnb.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",t(j.airbnb.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Booking.com"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.booking.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:t(j.booking.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",t(j.booking.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"VRBO"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.vrbo.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:t(j.vrbo.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",t(j.vrbo.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Expedia"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.expedia.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:t(j.expedia.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",t(j.expedia.gross)]})]}),e.jsxs("div",{className:"space-y-2 border-l pl-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[j.total.bookings," bookings"]}),e.jsx("p",{className:"font-bold text-green-600",children:t(j.total.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",t(j.total.gross)]})]})]})]},j.property))})})]})}),e.jsx(me,{value:"trends",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Monthly Revenue Trends"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:f.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:j.month})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 font-medium",children:t(j.airbnb)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Airbnb"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-600 font-medium",children:t(j.booking)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Booking.com"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-yellow-600 font-medium",children:t(j.vrbo)}),e.jsx("p",{className:"text-xs text-gray-500",children:"VRBO"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-purple-600 font-medium",children:t(j.expedia)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expedia"})]}),e.jsxs("div",{className:"text-center border-l pl-4",children:[e.jsx("p",{className:"text-green-600 font-bold",children:t(j.airbnb+j.booking+j.vrbo+j.expedia)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total"})]})]})]},j.month))})})]})}),e.jsx(me,{value:"calculator",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Payout Calculator"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Booking Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Guest Total Payment"}),e.jsx(Q,{type:"number",placeholder:"1500.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"OTA Platform"}),e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select platform"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"airbnb",children:"Airbnb (5%)"}),e.jsx(A,{value:"booking",children:"Booking.com (15%)"}),e.jsx(A,{value:"vrbo",children:"VRBO (8%)"}),e.jsx(A,{value:"expedia",children:"Expedia (18%)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Custom Commission Rate (%)"}),e.jsx(Q,{type:"number",placeholder:"5.0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Calculated Payout"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Guest Payment:"}),e.jsx("span",{className:"font-medium",children:"$1,500.00"})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Platform Commission (5%):"}),e.jsx("span",{className:"font-medium",children:"-$75.00"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-green-600 font-bold",children:[e.jsx("span",{children:"Your Net Payout:"}),e.jsx("span",{children:"$1,425.00"})]}),e.jsx("div",{className:"text-center pt-2",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Payout Efficiency: 95.0%"})})]})]})]}),e.jsx(M,{className:"w-full",children:"Calculate Payout"})]})]})})]})]})}const uQ=()=>{const{formatWithConversion:t}=Rr(),[s,r]=v.useState("overview"),[n,a]=v.useState(null),[i,l]=v.useState(!1),[o,c]=v.useState(!1),[d,u]=v.useState(null),[m,h]=v.useState({otaPlatform:"",payoutStatus:"",dateRange:""}),x=pt(),{data:f,isLoading:p}=xe({queryKey:["/api/ota-payout/bookings",m],queryFn:()=>Ne("GET","/api/ota-payout/bookings"),retry:!1}),g=Array.isArray(f)?f:[],{data:y,isLoading:b}=xe({queryKey:["/api/ota-payout/alerts"],queryFn:()=>Ne("GET","/api/ota-payout/alerts"),retry:!1}),j=Array.isArray(y)?y:[],{data:w,isLoading:N}=xe({queryKey:["/api/ota-payout/analytics"],queryFn:()=>Ne("GET","/api/ota-payout/analytics"),retry:!1}),S=Te({mutationFn:B=>Ne(`/api/ota-payout/bookings/${B}/confirm`,{method:"PUT"}).then(G=>G.json()),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/ota-payout/bookings"]}),x.invalidateQueries({queryKey:["/api/ota-payout/analytics"]})}});Te({mutationFn:({payoutId:B,data:G})=>Ne(`/api/ota-payout/bookings/${B}/override`,{method:"PUT",body:JSON.stringify(G),headers:{"Content-Type":"application/json"}}).then(J=>J.json()),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/ota-payout/bookings"]}),x.invalidateQueries({queryKey:["/api/ota-payout/analytics"]}),l(!1),a(null)}});const O=Te({mutationFn:({alertId:B,resolutionNotes:G})=>Ne(`/api/ota-payout/alerts/${B}/resolve`,{method:"PUT",body:JSON.stringify({resolutionNotes:G}),headers:{"Content-Type":"application/json"}}).then(J=>J.json()),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/ota-payout/alerts"]}),c(!1),u(null)}}),P=B=>{switch(B.toLowerCase()){case"airbnb":return"ðŸ ";case"booking_com":return"ðŸ¨";case"vrbo":return"ðŸ–ï¸";case"direct":return"ðŸŽ¯";default:return"ðŸŒ"}},k=B=>{switch(B){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"received":return"bg-blue-100 text-blue-800";case"discrepancy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},R=B=>{switch(B){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},F=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"col-span-full",children:e.jsxs(Wn,{className:"border-orange-200 bg-orange-50",children:[e.jsx(St,{className:"h-4 w-4 text-orange-600"}),e.jsx(MR,{className:"text-orange-800",children:"Revenue Calculation Notice"}),e.jsx(Qn,{className:"text-orange-700",children:"All internal calculations (fees, commissions, splits) are based on net received payout. OTA commissions are not part of your earnings."})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Net Payout"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:w&&w.totalNetPayout!=null?t(w.totalNetPayout,"THB"):"à¸¿0"})]}),e.jsx(Ot,{className:"h-8 w-8 text-green-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Actual revenue after OTA commissions"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"OTA Commissions"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:w&&w.totalOtaCommissions!=null?t(w.totalOtaCommissions,"THB"):"à¸¿0"})]}),e.jsx(Yl,{className:"h-8 w-8 text-red-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Total platform fees deducted"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Commission Rate"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w&&w.averageOtaCommissionRate!=null?`${w.averageOtaCommissionRate.toFixed(1)}%`:"0.0%"})]}),e.jsx(Wd,{className:"h-8 w-8 text-blue-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Across all platforms"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:w&&w.totalBookings!=null?w.totalBookings:"0"})]}),e.jsx(Xe,{className:"h-8 w-8 text-purple-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"All tracked reservations"})]})}),e.jsx("div",{className:"col-span-full",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),"Platform Revenue Breakdown"]}),e.jsx(Ee,{children:"Revenue distribution by OTA platform showing guest payments vs net payouts"})]}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:w?.platformBreakdown&&Array.isArray(w.platformBreakdown)?w.platformBreakdown.map(B=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx("span",{children:P(B.platform)}),B.platform.replace("_",".")]}),e.jsxs(U,{variant:"outline",children:[B.bookingCount," bookings"]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Paid:"}),e.jsx("span",{className:"font-medium",children:B.totalGuestPayments!=null?t(B.totalGuestPayments,"THB"):"à¸¿0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payout:"}),e.jsx("span",{className:"font-medium text-green-600",children:B.totalNetPayouts!=null?t(B.totalNetPayouts,"THB"):"à¸¿0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Commission:"}),e.jsxs("span",{className:"font-medium text-red-600",children:[B.averageCommissionRate!=null?B.averageCommissionRate.toFixed(1):"0.0","%"]})]})]})]},B.platform)):e.jsx("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"No platform data available"})})})]})})]}),I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-5 w-5"}),"Filter Booking Payouts"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"platform-filter",children:"OTA Platform"}),e.jsxs(ae,{value:m.otaPlatform,onValueChange:B=>h(G=>({...G,otaPlatform:B})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All platforms"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All platforms"}),e.jsx(A,{value:"airbnb",children:"Airbnb"}),e.jsx(A,{value:"booking_com",children:"Booking.com"}),e.jsx(A,{value:"vrbo",children:"VRBO"}),e.jsx(A,{value:"direct",children:"Direct"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"status-filter",children:"Payout Status"}),e.jsxs(ae,{value:m.payoutStatus,onValueChange:B=>h(G=>({...G,payoutStatus:B})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All statuses"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All statuses"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"confirmed",children:"Confirmed"}),e.jsx(A,{value:"received",children:"Received"}),e.jsx(A,{value:"discrepancy",children:"Discrepancy"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(M,{variant:"outline",onClick:()=>h({otaPlatform:"",payoutStatus:"",dateRange:""}),className:"w-full",children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Reset Filters"]})})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Booking Payouts"]}),e.jsxs(U,{variant:"outline",children:[g.length," records"]})]}),e.jsx(Ee,{children:"Track all booking payouts with transparent OTA commission deductions"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:p?e.jsx("div",{className:"text-center py-8",children:"Loading payouts..."}):g.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No payouts found"}):g.map(B=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:P(B.otaPlatform)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:B.guestName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[B.reservationCode," â€¢ ",B.propertyName]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Paid:"}),e.jsx("p",{className:"font-medium",children:B.guestPaidAmount?t(parseFloat(B.guestPaidAmount),B.currency):"à¸¿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"OTA Commission:"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",B.otaCommissionAmount?t(parseFloat(B.otaCommissionAmount),B.currency):"à¸¿0","(",B.otaCommissionRate,"%)"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payout:"}),e.jsx("p",{className:"font-semibold text-green-600",children:B.netPayoutAmount?t(parseFloat(B.netPayoutAmount),B.currency):"à¸¿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(U,{className:k(B.payoutStatus),children:B.payoutStatus})]})]}),B.manualOverride&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-600",children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Manual override applied: ",B.overrideReason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[B.payoutStatus==="pending"&&e.jsxs(M,{size:"sm",onClick:()=>S.mutate(B.id),disabled:S.isPending,children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Confirm"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{a(B),l(!0)},children:[e.jsx(J8,{className:"h-4 w-4 mr-1"}),"Override"]})]})]})},B.id))})})]})]}),W=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-5 w-5"}),"Payout Alerts & Issues"]}),e.jsx(Ee,{children:"Monitor payout discrepancies and manual review requirements"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:b?e.jsx("div",{className:"text-center py-8",children:"Loading alerts..."}):j.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No alerts found"}):j.map(B=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:R(B.severity),children:B.severity}),e.jsx(U,{variant:"outline",children:B.alertType}),B.isResolved&&e.jsx(U,{className:"bg-green-100 text-green-800",children:"Resolved"})]}),e.jsx("p",{className:"font-medium",children:B.alertMessage}),B.booking&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Related to: ",B.booking.guestName," (",B.booking.reservationCode,")"]}),B.isResolved&&B.resolutionNotes&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 text-sm",children:[e.jsx("p",{className:"font-medium text-green-800",children:"Resolution:"}),e.jsx("p",{className:"text-green-700",children:B.resolutionNotes})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!B.isResolved&&e.jsxs(M,{size:"sm",onClick:()=>{u(B),c(!0)},children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Resolve"]}),e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(Bt,{className:"h-4 w-4 mr-1"}),"View"]})]})]})},B.id))})})]})}),E=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Monthly Revenue Trends"]}),e.jsx(Ee,{children:"Track guest payments vs net payouts over time"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:w?.monthlyTrends&&Array.isArray(w.monthlyTrends)?w.monthlyTrends.map(B=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:B.month}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Commission Impact: ",B.otaCommissions!=null?t(B.otaCommissions,"THB"):"à¸¿0"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Payments:"}),e.jsx("p",{className:"font-medium",children:B.guestPayments!=null?t(B.guestPayments,"THB"):"à¸¿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payouts:"}),e.jsx("p",{className:"font-medium text-green-600",children:B.netPayouts!=null?t(B.netPayouts,"THB"):"à¸¿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Loss Ratio:"}),e.jsxs("p",{className:"font-medium text-red-600",children:[B.otaCommissions!=null&&B.guestPayments!=null&&B.guestPayments>0?(B.otaCommissions/B.guestPayments*100).toFixed(1):"0.0","%"]})]})]})]},B.month)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No trend data available"})})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Wd,{className:"h-5 w-5"}),"Payout Status Distribution"]})}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:w?.payoutStatusBreakdown&&Array.isArray(w.payoutStatusBreakdown)?w.payoutStatusBreakdown.map(B=>e.jsxs("div",{className:"border rounded-lg p-4 text-center",children:[e.jsx(U,{className:k(B.status),variant:"outline",children:B.status}),e.jsx("p",{className:"font-semibold text-lg mt-2",children:B.count}),e.jsx("p",{className:"text-sm text-muted-foreground",children:B.totalAmount!=null?t(B.totalAmount,"THB"):"à¸¿0"})]},B.status)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No status breakdown data available"})})})]})]});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(es,{className:"h-8 w-8 text-yellow-600"}),"OTA Payout Logic â€” Smart Revenue Tracking"]}),e.jsx("p",{className:"text-lg text-gray-600 mt-2",children:"Comprehensive revenue transparency with dual pricing logic for accurate financial reporting"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Export Report"]}),e.jsxs(M,{children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Configure Rules"]})]})]})}),e.jsxs(xt,{value:s,onValueChange:r,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsxs(de,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(de,{value:"payouts",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Payouts"]}),e.jsxs(de,{value:"alerts",className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-4 w-4"}),"Alerts"]}),e.jsxs(de,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"Analytics"]})]}),e.jsx(me,{value:"overview",children:e.jsx(F,{})}),e.jsx(me,{value:"payouts",children:e.jsx(I,{})}),e.jsx(me,{value:"alerts",children:e.jsx(W,{})}),e.jsx(me,{value:"analytics",children:e.jsx(E,{})})]}),e.jsx(Ge,{open:i,onOpenChange:l,children:e.jsxs(We,{className:"max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Override Payout Calculation"}),e.jsxs(Ct,{children:["Manually adjust payout amounts for booking ",n?.reservationCode]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"net-payout",children:"Net Payout Amount (THB)"}),e.jsx(Q,{id:"net-payout",type:"number",defaultValue:n?.netPayoutAmount,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"commission-amount",children:"OTA Commission Amount (THB)"}),e.jsx(Q,{id:"commission-amount",type:"number",defaultValue:n?.otaCommissionAmount,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"commission-rate",children:"OTA Commission Rate (%)"}),e.jsx(Q,{id:"commission-rate",type:"number",defaultValue:n?.otaCommissionRate,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"override-reason",children:"Override Reason"}),e.jsx(ct,{id:"override-reason",placeholder:"Explain why this override is necessary...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(M,{children:"Apply Override"})]})]})]})}),e.jsx(Ge,{open:o,onOpenChange:c,children:e.jsxs(We,{className:"max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Resolve Alert"}),e.jsx(Ct,{children:"Mark this alert as resolved and add resolution notes"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border rounded p-3",children:[e.jsx("p",{className:"font-medium",children:d?.alertMessage}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Type: ",d?.alertType," â€¢ Severity: ",d?.severity]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"resolution-notes",children:"Resolution Notes"}),e.jsx(ct,{id:"resolution-notes",placeholder:"Describe how this issue was resolved...",rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>{if(d){const B=document.getElementById("resolution-notes")?.value;O.mutate({alertId:d.id,resolutionNotes:B})}},disabled:O.isPending,children:O.isPending?"Resolving...":"Mark Resolved"})]})]})]})})]})})};function OS(){const[t,s]=v.useState(""),[r,n]=v.useState("all"),[a,i]=v.useState("all"),l=[{name:"Bronze",color:"bg-orange-100 text-orange-800",minStays:1,benefits:["Welcome drink","Late checkout"]},{name:"Silver",color:"bg-gray-100 text-gray-800",minStays:3,benefits:["Room upgrade","Spa discount 10%","Priority booking"]},{name:"Gold",color:"bg-yellow-100 text-yellow-800",minStays:5,benefits:["Free breakfast","Airport transfer","Spa discount 20%"]},{name:"Platinum",color:"bg-purple-100 text-purple-800",minStays:10,benefits:["Free night after 5 stays","Concierge service","Spa discount 30%"]}],o=[{id:1,name:"Sarah Johnson",email:"sarah.johnson@email.com",tier:"Platinum",totalStays:12,totalSpent:18500,lastStay:"2024-12-15",nextBooking:"2025-02-10",favoriteProperty:"Villa Samui Breeze",preferences:["Ocean view","Late checkout","Spa services"],pointsBalance:2400,rewardsEarned:8,status:"active",joinDate:"2023-01-15"},{id:2,name:"Michael Chen",email:"m.chen@business.com",tier:"Gold",totalStays:8,totalSpent:12800,lastStay:"2025-01-05",nextBooking:"2025-03-20",favoriteProperty:"Villa Aruna",preferences:["Pool access","Business center","Early checkin"],pointsBalance:1850,rewardsEarned:5,status:"active",joinDate:"2023-06-20"},{id:3,name:"Emma Williams",email:"emma.w@travel.com",tier:"Silver",totalStays:4,totalSpent:6200,lastStay:"2024-11-28",nextBooking:null,favoriteProperty:"Villa Paradise",preferences:["Garden view","Yoga space","Healthy meals"],pointsBalance:920,rewardsEarned:2,status:"active",joinDate:"2024-03-10"},{id:4,name:"David Kim",email:"david.kim@startup.io",tier:"Bronze",totalStays:2,totalSpent:3100,lastStay:"2024-08-15",nextBooking:null,favoriteProperty:"Villa Samui Breeze",preferences:["WiFi","Workspace","Coffee machine"],pointsBalance:465,rewardsEarned:1,status:"inactive",joinDate:"2024-07-05"},{id:5,name:"Lisa Anderson",email:"lisa.anderson@family.com",tier:"Gold",totalStays:6,totalSpent:9800,lastStay:"2024-12-30",nextBooking:"2025-04-15",favoriteProperty:"Villa Paradise",preferences:["Family rooms","Pool safety","Kids activities"],pointsBalance:1470,rewardsEarned:4,status:"active",joinDate:"2023-11-08"}],c=[{id:1,guestName:"Sarah Johnson",activity:"Earned 150 points from Villa Samui Breeze stay",date:"2024-12-15",type:"points_earned"},{id:2,guestName:"Michael Chen",activity:"Redeemed free spa treatment (500 points)",date:"2025-01-05",type:"reward_redeemed"},{id:3,guestName:"Emma Williams",activity:"Upgraded to Silver tier (4 stays completed)",date:"2024-11-28",type:"tier_upgrade"},{id:4,guestName:"Lisa Anderson",activity:"Booked next stay with Gold tier benefits",date:"2024-12-30",type:"booking_made"}],d=x=>{switch(x){case"Bronze":return e.jsx(B0,{className:"w-4 h-4"});case"Silver":return e.jsx(ps,{className:"w-4 h-4"});case"Gold":return e.jsx(Hn,{className:"w-4 h-4"});case"Platinum":return e.jsx(kl,{className:"w-4 h-4"});default:return e.jsx(ot,{className:"w-4 h-4"})}},u=x=>{switch(x){case"Bronze":return"bg-orange-100 text-orange-800";case"Silver":return"bg-gray-100 text-gray-800";case"Gold":return"bg-yellow-100 text-yellow-800";case"Platinum":return"bg-purple-100 text-purple-800";default:return"bg-blue-100 text-blue-800"}},m=x=>x==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",h={totalGuests:o.length,activeGuests:o.filter(x=>x.status==="active").length,totalPointsIssued:o.reduce((x,f)=>x+f.pointsBalance,0),averageStays:(o.reduce((x,f)=>x+f.totalStays,0)/o.length).toFixed(1)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Wo,{className:"w-8 h-8"}),"Loyalty Guest Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track guest loyalty, rewards, and retention programs"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Qd,{className:"w-4 h-4 mr-2"}),"Send Rewards"]}),e.jsxs(M,{children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Add Guest"]})]})]}),e.jsxs(xt,{defaultValue:"guests",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"guests",children:"Loyalty Guests"}),e.jsx(de,{value:"tiers",children:"Tier Management"}),e.jsx(de,{value:"rewards",children:"Rewards Program"}),e.jsx(de,{value:"analytics",children:"Analytics"}),e.jsx(de,{value:"settings",children:"Program Settings"})]}),e.jsxs(me,{value:"guests",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Loyalty Guests"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalGuests})]}),e.jsx(ot,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.activeGuests})]}),e.jsx(Wo,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Points Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.totalPointsIssued.toLocaleString()})]}),e.jsx(ps,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Stays per Guest"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:h.averageStays})]}),e.jsx(Ot,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Q,{placeholder:"Search guests...",value:t,onChange:x=>s(x.target.value)}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Tiers"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Tiers"}),e.jsx(A,{value:"Bronze",children:"Bronze"}),e.jsx(A,{value:"Silver",children:"Silver"}),e.jsx(A,{value:"Gold",children:"Gold"}),e.jsx(A,{value:"Platinum",children:"Platinum"})]})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Loyalty Members"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:o.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[d(x.tier),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.email})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:u(x.tier),children:x.tier}),e.jsx(U,{className:m(x.status),children:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Stays"}),e.jsx("p",{className:"font-medium",children:x.totalStays})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Spent"}),e.jsxs("p",{className:"font-medium",children:["$",x.totalSpent.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Points Balance"}),e.jsx("p",{className:"font-medium text-purple-600",children:x.pointsBalance})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Stay"}),e.jsx("p",{className:"font-medium",children:x.lastStay})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Booking"}),e.jsx("p",{className:"font-medium",children:x.nextBooking||"None scheduled"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Rewards Earned"}),e.jsx("p",{className:"font-medium text-green-600",children:x.rewardsEarned})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preferences"}),e.jsx("div",{className:"flex gap-1",children:x.preferences.slice(0,3).map((f,p)=>e.jsx(U,{variant:"outline",className:"text-xs",children:f},p))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Profile"}),e.jsx(M,{variant:"outline",size:"sm",children:"Send Offer"})]})]})]},x.id))})})]})]}),e.jsx(me,{value:"tiers",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(x=>e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d(x.name),e.jsxs("span",{children:[x.name," Tier"]})]}),e.jsxs(U,{className:x.color,children:[x.minStays,"+ stays"]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Member Benefits:"}),e.jsx("ul",{className:"space-y-1",children:x.benefits.map((f,p)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx(ps,{className:"w-3 h-3 text-yellow-500"}),f]},p))})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Current Members: ",o.filter(f=>f.tier===x.name).length]})})]})]},x.name))})}),e.jsx(me,{value:"rewards",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recent Reward Activities"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qd,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.activity})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:x.date}),e.jsx(U,{variant:"outline",className:"text-xs",children:x.type.replace("_"," ")})]})]},x.id))})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Tier Distribution"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:l.map(x=>{const f=o.filter(g=>g.tier===x.name).length,p=(f/o.length*100).toFixed(1);return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[d(x.name),x.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${p}%`}})}),e.jsxs("span",{className:"text-sm w-12",children:[f," (",p,"%)"]})]})]},x.name)})})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Guest Retention Metrics"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"80%"}),e.jsx("p",{className:"text-gray-600",children:"Retention Rate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Repeat Bookings"}),e.jsx("span",{className:"font-semibold",children:"75%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Tier Progression"}),e.jsx("span",{className:"font-semibold",children:"65%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Referral Rate"}),e.jsx("span",{className:"font-semibold",children:"25%"})]})]})]})]})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Loyalty Program Configuration"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Points System"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Points per $1 spent"}),e.jsx(Q,{type:"number",defaultValue:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Points expiry (months)"}),e.jsx(Q,{type:"number",defaultValue:"24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Bonus points for reviews"}),e.jsx(Q,{type:"number",defaultValue:"100"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Communication"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Welcome email"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Birthday offers"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Points expiry alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tier upgrade notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function ES(){const{user:t}=Mr(),{toast:s}=st(),r=t?.organizationId||"default-org",[n,a]=v.useState("all"),[i,l]=v.useState("all"),[o,c]=v.useState("month"),[d,u]=v.useState("invoices"),[m,h]=v.useState(!1),[x,f]=v.useState(null),[p,g]=v.useState({invoiceNumber:"",clientType:"",clientName:"",clientId:"",propertyId:"",template:"",issueDate:"",dueDate:"",description:"",items:[]}),[y,b]=v.useState({description:"",quantity:"1",unitPrice:"",taxRate:"0",discount:"0"}),[j,w]=v.useState({name:"",description:"",lineItems:[]}),[N,S]=v.useState(null),[O,P]=v.useState(!1),{data:k,isLoading:R,refetch:F}=xe({queryKey:["/api/billing-invoices",n!=="all"?n:void 0],enabled:d==="invoices"}),{data:I,refetch:W}=xe({queryKey:["/api/billing-invoices/next-number"],enabled:d==="create"}),{data:E,isLoading:B}=xe({queryKey:["/api/billing-invoices/stats"],enabled:d==="analytics"||d==="invoices"}),{data:G,isLoading:J,refetch:C}=xe({queryKey:["/api/billing-invoice-templates"],enabled:d==="templates"||d==="create"}),{data:V}=xe({queryKey:["/api/users",{role:"owner"}],enabled:d==="create"}),{data:z}=xe({queryKey:["/api/properties"],enabled:d==="create"}),le=Te({mutationFn:async q=>await Ne("POST","/api/billing-invoices",{...q.invoice,status:q.status,organizationId:r,createdBy:t?.id,lineItems:q.lineItems}),onSuccess:()=>{s({title:"Success",description:"Invoice created successfully"}),wt.invalidateQueries({queryKey:["/api/billing-invoices"]}),wt.invalidateQueries({queryKey:["/api/billing-invoices/stats"]}),rt(),u("invoices")},onError:q=>{s({title:"Error",description:q.message||"Failed to create invoice",variant:"destructive"})}}),Ce=Te({mutationFn:async q=>await Ne("DELETE",`/api/billing-invoices/${q}`),onSuccess:()=>{s({title:"Success",description:"Invoice deleted successfully"}),wt.invalidateQueries({queryKey:["/api/billing-invoices"]}),wt.invalidateQueries({queryKey:["/api/billing-invoices/stats"]})},onError:q=>{s({title:"Error",description:q.message||"Failed to delete invoice",variant:"destructive"})}}),H=Te({mutationFn:async q=>await Ne("POST","/api/billing-invoice-templates",{...q.template,organizationId:r,createdBy:t?.id,lineItems:q.lineItems}),onSuccess:()=>{s({title:"Success",description:"Template created successfully"}),wt.invalidateQueries({queryKey:["/api/billing-invoice-templates"]}),P(!1),gt()},onError:q=>{s({title:"Error",description:q.message||"Failed to create template",variant:"destructive"})}}),_=Te({mutationFn:async q=>await Ne("PUT",`/api/billing-invoice-templates/${q.id}`,{...q.template,lineItems:q.lineItems}),onSuccess:()=>{s({title:"Success",description:"Template updated successfully"}),wt.invalidateQueries({queryKey:["/api/billing-invoice-templates"]}),P(!1),S(null),gt()},onError:q=>{s({title:"Error",description:q.message||"Failed to update template",variant:"destructive"})}}),se=Te({mutationFn:async q=>await Ne("DELETE",`/api/billing-invoice-templates/${q}`),onSuccess:()=>{s({title:"Success",description:"Template deleted successfully"}),wt.invalidateQueries({queryKey:["/api/billing-invoice-templates"]})},onError:q=>{s({title:"Error",description:q.message||"Failed to delete template",variant:"destructive"})}});v.useEffect(()=>{if(d==="create"&&I?.invoiceNumber){const q=new Date,Se=new Date(q.getTime()+30*24*60*60*1e3);g(_e=>m?(h(!1),{..._e,invoiceNumber:I.invoiceNumber,issueDate:q.toISOString().split("T")[0],dueDate:Se.toISOString().split("T")[0]}):_e.invoiceNumber!==I.invoiceNumber?{..._e,invoiceNumber:I.invoiceNumber,issueDate:_e.issueDate||q.toISOString().split("T")[0],dueDate:_e.dueDate||Se.toISOString().split("T")[0]}:_e)}},[d,I,m]);const te=(k?.invoices||[]).filter(q=>{const Se=i==="all"||q.clientType===i,_e=new Date(q.issueDate),K=new Date;let ke=!0;if(o==="week"){const Le=new Date(K.getTime()-6048e5);ke=_e>=Le}else if(o==="month"){const Le=new Date(K.getFullYear(),K.getMonth()-1,K.getDate());ke=_e>=Le}else if(o==="quarter"){const Le=new Date(K.getFullYear(),K.getMonth()-3,K.getDate());ke=_e>=Le}else if(o==="year"){const Le=new Date(K.getFullYear()-1,K.getMonth(),K.getDate());ke=_e>=Le}return Se&&ke}),we=q=>{switch(q){case"paid":return"bg-green-100 text-green-800";case"sent":case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},ve=q=>{switch(q){case"owner":return e.jsx(zt,{className:"w-4 h-4"});case"pm":return e.jsx(At,{className:"w-4 h-4"});case"agent":return e.jsx(zt,{className:"w-4 h-4"});case"vendor":return e.jsx(At,{className:"w-4 h-4"});default:return e.jsx(zt,{className:"w-4 h-4"})}},X=q=>{const Se=typeof q=="string"?parseFloat(q):q;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Se)},ce=()=>{if(y.description&&y.unitPrice){const q=parseFloat(y.quantity)||1,Se=parseFloat(y.unitPrice),_e=parseFloat(y.taxRate)||0,K=parseFloat(y.discount)||0;g(ke=>({...ke,items:[...ke.items,{description:y.description,quantity:q,unitPrice:Se,taxRate:_e,discount:K}]})),b({description:"",quantity:"1",unitPrice:"",taxRate:"0",discount:"0"})}},Y=q=>{if(!p.clientName||!p.clientType||p.items.length===0){s({title:"Validation Error",description:"Please fill in all required fields and add at least one line item.",variant:"destructive"});return}if(q==="sent"&&(!p.invoiceNumber||!p.issueDate||!p.dueDate)){s({title:"Validation Error",description:"Invoice number, issue date, and due date are required to send an invoice.",variant:"destructive"});return}const Se=p.items.map(vt=>{const Xt=vt.quantity*vt.unitPrice,mn=vt.discount||0,oe=Xt-mn,Ue=oe*(vt.taxRate||0)/100,Ke=oe+Ue;return{description:vt.description,quantity:vt.quantity.toString(),unitPrice:vt.unitPrice.toString(),taxRate:(vt.taxRate||0).toString(),discount:(vt.discount||0).toString(),amount:Ke.toString()}}),_e=p.items.reduce((vt,Xt)=>vt+Xt.quantity*Xt.unitPrice,0),K=p.items.reduce((vt,Xt)=>vt+(Xt.discount||0),0),ke=p.items.reduce((vt,Xt)=>{const oe=Xt.quantity*Xt.unitPrice-(Xt.discount||0);return vt+oe*(Xt.taxRate||0)/100},0),Le=_e-K+ke,qt={invoiceNumber:p.invoiceNumber,clientType:p.clientType,clientName:p.clientName,clientId:p.clientId||null,propertyId:p.propertyId?parseInt(p.propertyId):null,issueDate:p.issueDate,dueDate:p.dueDate,description:p.description,subtotal:_e.toString(),taxTotal:ke.toString(),discountTotal:K.toString(),total:Le.toString()};le.mutate({invoice:qt,lineItems:Se,status:q})},he=q=>{g(Se=>({...Se,items:Se.items.filter((_e,K)=>K!==q)}))},Fe=()=>p.items.reduce((q,Se)=>{const _e=Se.quantity*Se.unitPrice,K=Se.discount||0,ke=_e-K,Le=ke*(Se.taxRate||0)/100;return q+ke+Le},0),Ve=async q=>{const Se=G?.find(_e=>_e.id.toString()===q);if(Se&&Se.lineItems){const _e=Se.lineItems.map(K=>({description:K.description,quantity:parseFloat(K.quantity),unitPrice:parseFloat(K.unitPrice),taxRate:parseFloat(K.taxRate),discount:parseFloat(K.discount)}));g(K=>({...K,template:q,items:_e}))}},rt=async()=>{h(!0),g({invoiceNumber:"",clientType:"",clientName:"",clientId:"",propertyId:"",template:"",issueDate:"",dueDate:"",description:"",items:[]}),b({description:"",quantity:"1",unitPrice:"",taxRate:"0",discount:"0"}),await W()},gt=()=>{w({name:"",description:"",lineItems:[]})},Vt=async()=>{try{const q={status:n!=="all"?n:void 0,fromDate:void 0,toDate:void 0},Se=new URLSearchParams(Object.entries(q).filter(([_e,K])=>K!==void 0)).toString();window.open(`/api/billing-invoices/export/${r}?${Se}`,"_blank"),s({title:"Success",description:"Export started. Download will begin shortly."})}catch(q){s({title:"Error",description:q.message||"Failed to export report",variant:"destructive"})}},xs=async q=>{S(q.id),w({name:q.name,description:q.description||"",lineItems:q.lineItems||[]}),P(!0)},Qs=()=>{if(!j.name){s({title:"Validation Error",description:"Template name is required",variant:"destructive"});return}const q={name:j.name,description:j.description,isActive:!0};N?_.mutate({id:N,template:q,lineItems:j.lineItems}):H.mutate({template:q,lineItems:j.lineItems})},ue={totalInvoices:E?.totalInvoices||0,totalAmount:E?.totalAmount||0,paidInvoices:E?.paidInvoices||0,overdueInvoices:E?.overdueInvoices||0};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(dt,{className:"w-8 h-8"}),"Invoice Generator"]}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and track invoices for owners, agents, and service providers"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",onClick:Vt,"data-testid":"button-export-report",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{onClick:()=>{u("create"),rt()},"data-testid":"button-new-invoice",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"New Invoice"]})]})]}),e.jsxs(xt,{value:d,onValueChange:u,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"invoices","data-testid":"tab-all-invoices",children:"All Invoices"}),e.jsx(de,{value:"create","data-testid":"tab-create-invoice",children:"Create Invoice"}),e.jsx(de,{value:"templates","data-testid":"tab-templates",children:"Templates"}),e.jsx(de,{value:"analytics","data-testid":"tab-analytics",children:"Analytics"})]}),e.jsxs(me,{value:"invoices",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-total-invoices",children:ue.totalInvoices})]}),e.jsx(dt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"stat-total-amount",children:X(ue.totalAmount)})]}),e.jsx(Ze,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-green-600","data-testid":"stat-paid-invoices",children:ue.paidInvoices})]}),e.jsx(U,{className:"bg-green-100 text-green-800",children:"Paid"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-red-600","data-testid":"stat-overdue-invoices",children:ue.overdueInvoices})]}),e.jsx(U,{className:"bg-red-100 text-red-800",children:"Overdue"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsx(re,{"data-testid":"select-status-filter",children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"draft",children:"Draft"}),e.jsx(A,{value:"sent",children:"Sent"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]}),e.jsxs(ae,{value:i,onValueChange:l,children:[e.jsx(re,{"data-testid":"select-client-filter",children:e.jsx(ie,{placeholder:"All Clients"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Clients"}),e.jsx(A,{value:"owner",children:"Owners"}),e.jsx(A,{value:"pm",children:"Portfolio Managers"}),e.jsx(A,{value:"agent",children:"Agents"}),e.jsx(A,{value:"vendor",children:"Service Providers"})]})]}),e.jsxs(ae,{value:o,onValueChange:c,children:[e.jsx(re,{"data-testid":"select-period-filter",children:e.jsx(ie,{placeholder:"This Month"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{onClick:()=>F(),"data-testid":"button-apply-filters",children:"Apply Filters"})]})})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{children:"Recent Invoices"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",te.length," of ",k?.invoices?.length||0," invoices"]}),(n!=="all"||i!=="all"||o!=="month")&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{a("all"),l("all"),c("month")},"data-testid":"button-clear-filters",children:"Clear Filters"})]})]})}),e.jsx(T,{children:R?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Gt,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsx("div",{className:"space-y-4",children:te.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No invoices found"}):te.map(q=>e.jsxs("div",{className:"border rounded-lg p-4","data-testid":`invoice-${q.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[ve(q.clientType),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:q.invoiceNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:q.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:we(q.status),children:q.status}),e.jsx("span",{className:"font-bold text-green-600",children:X(q.total)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Client"}),e.jsx("p",{className:"font-medium",children:q.clientName}),e.jsx("p",{className:"text-xs text-gray-500",children:q.clientType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Property"}),e.jsx("p",{className:"font-medium",children:q.propertyId||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Issue Date"}),e.jsx("p",{className:"font-medium",children:q.issueDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:q.dueDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Line Items"}),e.jsxs("p",{className:"font-medium",children:[q.items?.length||0," items"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),"Created: ",new Date(q.createdAt||"").toLocaleDateString()]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>f(q),"data-testid":`button-view-${q.id}`,children:[e.jsx(Bt,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this invoice?")&&Ce.mutate(q.id)},"data-testid":`button-delete-${q.id}`,children:[e.jsx(ir,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]},q.id))})})]})]}),e.jsx(me,{value:"create",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Create New Invoice"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600",children:["Invoice Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{value:p.invoiceNumber,onChange:q=>g({...p,invoiceNumber:q.target.value}),placeholder:"INV-2025-005","data-testid":"input-invoice-number",className:p.invoiceNumber?"":"border-red-300"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>W(),"data-testid":"button-auto-number",children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600",children:["Client Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ae,{value:p.clientType,onValueChange:q=>g({...p,clientType:q}),children:[e.jsx(re,{"data-testid":"select-client-type",className:p.clientType?"":"border-red-300",children:e.jsx(ie,{placeholder:"Select client type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"owner",children:"Property Owner"}),e.jsx(A,{value:"pm",children:"Portfolio Manager"}),e.jsx(A,{value:"agent",children:"Agent"}),e.jsx(A,{value:"vendor",children:"Service Provider"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600",children:["Client Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Q,{value:p.clientName,onChange:q=>g({...p,clientName:q.target.value}),placeholder:"Enter client name","data-testid":"input-client-name",className:p.clientName?"":"border-red-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Property (Optional)"}),e.jsxs(ae,{value:p.propertyId,onValueChange:q=>g({...p,propertyId:q}),children:[e.jsx(re,{"data-testid":"select-property",children:e.jsx(ie,{placeholder:"Select property"})}),e.jsx(ne,{children:z?.map(q=>e.jsx(A,{value:q.id.toString(),children:q.name},q.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Dates & Template"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600",children:["Issue Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Q,{type:"date",value:p.issueDate,onChange:q=>g({...p,issueDate:q.target.value}),"data-testid":"input-issue-date",className:p.issueDate?"":"border-red-300"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600",children:["Due Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Q,{type:"date",value:p.dueDate,onChange:q=>g({...p,dueDate:q.target.value}),"data-testid":"input-due-date",className:p.dueDate?"":"border-red-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Use Template (Optional)"}),e.jsxs(ae,{value:p.template,onValueChange:Ve,children:[e.jsx(re,{"data-testid":"select-template",children:e.jsx(ie,{placeholder:"Select template"})}),e.jsx(ne,{children:G?.map(q=>e.jsx(A,{value:q.id.toString(),children:q.name},q.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Description"}),e.jsx(Q,{value:p.description,onChange:q=>g({...p,description:q.target.value}),placeholder:"Invoice description","data-testid":"input-description"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"Line Items"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Total: ",X(Fe())]})]}),p.items.length>0&&e.jsx("div",{className:"border rounded-lg p-4 space-y-2",children:p.items.map((q,Se)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:q.description}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",q.quantity," Ã— ",X(q.unitPrice),q.discount>0&&` - Discount: ${X(q.discount)}`,q.taxRate>0&&` + Tax: ${q.taxRate}%`]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:X((q.quantity*q.unitPrice-q.discount)*(1+q.taxRate/100))}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>he(Se),"data-testid":`button-remove-item-${Se}`,children:e.jsx(ir,{className:"w-4 h-4 text-red-500"})})]})]},Se))}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsx("h5",{className:"font-medium text-sm",children:"Add Line Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(Q,{placeholder:"Description",value:y.description,onChange:q=>b({...y,description:q.target.value}),"data-testid":"input-line-item-description"})}),e.jsx("div",{children:e.jsx(Q,{type:"number",placeholder:"Qty",value:y.quantity,onChange:q=>b({...y,quantity:q.target.value}),"data-testid":"input-line-item-quantity"})}),e.jsx("div",{children:e.jsx(Q,{type:"number",placeholder:"Unit Price",value:y.unitPrice,onChange:q=>b({...y,unitPrice:q.target.value}),"data-testid":"input-line-item-price"})}),e.jsx("div",{children:e.jsx(Q,{type:"number",placeholder:"Tax %",value:y.taxRate,onChange:q=>b({...y,taxRate:q.target.value}),"data-testid":"input-line-item-tax"})}),e.jsx("div",{children:e.jsxs(M,{onClick:ce,className:"w-full","data-testid":"button-add-line-item",children:[e.jsx(ut,{className:"w-4 h-4 mr-1"}),"Add"]})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[e.jsx(M,{variant:"outline",onClick:rt,"data-testid":"button-cancel",children:"Cancel"}),e.jsxs(M,{variant:"outline",onClick:()=>Y("draft"),disabled:le.isPending,"data-testid":"button-save-draft",children:[le.isPending?e.jsx(Gt,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Save as Draft"]}),e.jsxs(M,{onClick:()=>Y("sent"),disabled:le.isPending,"data-testid":"button-generate-invoice",children:[le.isPending?e.jsx(Gt,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Generate Invoice"]})]})]})]})}),e.jsxs(me,{value:"templates",className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{children:"Invoice Templates"}),e.jsxs(M,{onClick:()=>{S(null),gt(),P(!0)},"data-testid":"button-new-template",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"New Template"]})]})}),e.jsx(T,{children:J?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Gt,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G?.map(q=>e.jsxs("div",{className:"border rounded-lg p-4","data-testid":`template-${q.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:q.name}),e.jsx("p",{className:"text-sm text-gray-600",children:q.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>xs(q),"data-testid":`button-edit-template-${q.id}`,children:e.jsx(Nr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this template?")&&se.mutate(q.id)},"data-testid":`button-delete-template-${q.id}`,children:e.jsx(ir,{className:"w-4 h-4 text-red-500"})})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[q.lineItems?.length||0," default line items"]})]},q.id))})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(D,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx($,{children:e.jsx(L,{children:N?"Edit Template":"New Template"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Template Name"}),e.jsx(Q,{value:j.name,onChange:q=>w({...j,name:q.target.value}),placeholder:"Template name","data-testid":"input-template-name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Description"}),e.jsx(Q,{value:j.description,onChange:q=>w({...j,description:q.target.value}),placeholder:"Template description","data-testid":"input-template-description"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[e.jsx(M,{variant:"outline",onClick:()=>{P(!1),S(null),gt()},"data-testid":"button-cancel-template",children:"Cancel"}),e.jsxs(M,{onClick:Qs,disabled:H.isPending||_.isPending,"data-testid":"button-save-template",children:[H.isPending||_.isPending?e.jsx(Gt,{className:"w-4 h-4 mr-2 animate-spin"}):null,"Save Template"]})]})]})]})})]}),e.jsx(me,{value:"analytics",className:"space-y-6",children:B?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Gt,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"analytics-total-revenue",children:X(E?.totalRevenue||0)})]}),e.jsx(Ze,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Amount"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"analytics-pending-amount",children:X(E?.pendingAmount||0)})]}),e.jsx(dt,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid This Month"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"analytics-paid-month",children:X(E?.paidThisMonth||0)})]}),e.jsx(Ze,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue Amount"}),e.jsx("p",{className:"text-2xl font-bold text-red-600","data-testid":"analytics-overdue-amount",children:X(E?.overdueAmount||0)})]}),e.jsx(dt,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Invoice Analytics"})}),e.jsx(T,{children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(dt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Monthly chart data will be displayed here"})]})})]})]})})]}),e.jsx(Ge,{open:!!x,onOpenChange:()=>f(null),children:e.jsxs(We,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Invoice Details"})}),x&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Number"}),e.jsx("p",{className:"font-bold text-lg",children:x.invoiceNumber})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx(U,{className:we(x.status),children:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Client Information"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",x.clientName]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Type:"})," ",x.clientType]}),x.clientEmail&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",x.clientEmail]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Issue Date:"})," ",x.issueDate]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Due Date:"})," ",x.dueDate]}),x.propertyId&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Property ID:"})," ",x.propertyId]})]})]})]}),x.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700",children:x.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Line Items"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2",children:"Description"}),e.jsx("th",{className:"text-right p-2",children:"Qty"}),e.jsx("th",{className:"text-right p-2",children:"Price"}),e.jsx("th",{className:"text-right p-2",children:"Tax %"}),e.jsx("th",{className:"text-right p-2",children:"Discount"}),e.jsx("th",{className:"text-right p-2",children:"Amount"})]})}),e.jsx("tbody",{children:x.items?.map((q,Se)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:q.description}),e.jsx("td",{className:"text-right p-2",children:q.quantity}),e.jsx("td",{className:"text-right p-2",children:X(q.unitPrice)}),e.jsxs("td",{className:"text-right p-2",children:[q.taxRate,"%"]}),e.jsx("td",{className:"text-right p-2",children:X(q.discount||0)}),e.jsx("td",{className:"text-right p-2",children:X(q.amount)})]},Se))})]})})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{children:X(x.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Tax Total:"}),e.jsx("span",{children:X(x.taxTotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Discount Total:"}),e.jsxs("span",{children:["-",X(x.discountTotal)]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-green-600",children:X(x.total)})]}),x.paidAmount&&Number(x.paidAmount)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Paid:"}),e.jsxs("span",{children:["-",X(x.paidAmount)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-orange-600",children:[e.jsx("span",{children:"Balance Due:"}),e.jsx("span",{children:X(Number(x.total)-Number(x.paidAmount))})]})]})]})})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 border-t pt-4",children:[e.jsxs("span",{children:["Created: ",new Date(x.createdAt||"").toLocaleString()]}),e.jsxs("span",{children:["Created by: ",x.createdBy]})]})]})]})})]})}function mQ(){const[t,s]=v.useState("all"),[r,n]=v.useState("all"),[a,i]=v.useState("month"),l=[{id:1,name:"Niran Thaksin",position:"Head Housekeeper",baseSalary:25e3,overtimeRate:150,currentAdvance:5e3,totalOvertime:32.5,overtimeEarnings:4875,status:"active",department:"housekeeping"},{id:2,name:"Somchai Patel",position:"Pool Maintenance",baseSalary:22e3,overtimeRate:135,currentAdvance:0,totalOvertime:15,overtimeEarnings:2025,status:"active",department:"maintenance"},{id:3,name:"Malee Kasem",position:"Guest Relations",baseSalary:28e3,overtimeRate:170,currentAdvance:8e3,totalOvertime:28,overtimeEarnings:4760,status:"active",department:"guest_services"},{id:4,name:"Kamon Saetang",position:"Security Guard",baseSalary:2e4,overtimeRate:120,currentAdvance:3e3,totalOvertime:45,overtimeEarnings:5400,status:"active",department:"security"},{id:5,name:"Ploy Chamnong",position:"Chef Assistant",baseSalary:18e3,overtimeRate:110,currentAdvance:2e3,totalOvertime:12,overtimeEarnings:1320,status:"active",department:"kitchen"}],o=[{id:1,staffName:"Niran Thaksin",date:"2025-01-20",regularHours:8,overtimeHours:4,reason:"Guest checkout deep cleaning",approvedBy:"Jane Manager",amount:600,status:"approved"},{id:2,staffName:"Malee Kasem",date:"2025-01-19",regularHours:8,overtimeHours:3,reason:"Late guest check-in assistance",approvedBy:"Pending",amount:510,status:"pending"},{id:3,staffName:"Kamon Saetang",date:"2025-01-18",regularHours:8,overtimeHours:6,reason:"Night security coverage",approvedBy:"John Admin",amount:720,status:"approved"},{id:4,staffName:"Somchai Patel",date:"2025-01-17",regularHours:8,overtimeHours:2,reason:"Emergency pool repair",approvedBy:"Jane Manager",amount:270,status:"approved"}],c=[{id:1,staffName:"Malee Kasem",requestDate:"2025-01-10",amount:8e3,reason:"Medical emergency for family member",approvedBy:"John Admin",repaymentPlan:"4 months",remainingBalance:6e3,status:"active"},{id:2,staffName:"Niran Thaksin",requestDate:"2025-01-05",amount:5e3,reason:"Children school fees",approvedBy:"Jane Manager",repaymentPlan:"3 months",remainingBalance:3333,status:"active"},{id:3,staffName:"Kamon Saetang",requestDate:"2024-12-20",amount:3e3,reason:"Home renovation",approvedBy:"John Admin",repaymentPlan:"2 months",remainingBalance:1500,status:"active"},{id:4,staffName:"Ploy Chamnong",requestDate:"2024-12-15",amount:2e3,reason:"Motorbike repair",approvedBy:"Jane Manager",repaymentPlan:"2 months",remainingBalance:1e3,status:"active"}],d=x=>{switch(x){case"housekeeping":return"bg-blue-100 text-blue-800";case"maintenance":return"bg-orange-100 text-orange-800";case"guest_services":return"bg-green-100 text-green-800";case"security":return"bg-red-100 text-red-800";case"kitchen":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},u=x=>{switch(x){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=x=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(x),h={totalStaff:l.length,totalOvertimeHours:o.reduce((x,f)=>x+f.overtimeHours,0),totalOvertimePay:o.reduce((x,f)=>x+f.amount,0),totalAdvances:c.reduce((x,f)=>x+f.remainingBalance,0)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(tt,{className:"w-8 h-8"}),"Staff Advance & Overtime Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track salary advances, overtime hours, and additional compensation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Generate Report"]}),e.jsxs(M,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"New Request"]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"overview",children:"Staff Overview"}),e.jsx(de,{value:"overtime",children:"Overtime Records"}),e.jsx(de,{value:"advances",children:"Salary Advances"}),e.jsx(de,{value:"payroll",children:"Payroll Summary"}),e.jsx(de,{value:"settings",children:"Settings"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalStaff})]}),e.jsx(ot,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overtime Hours"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:h.totalOvertimeHours})]}),e.jsx(tt,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overtime Pay"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m(h.totalOvertimePay)})]}),e.jsx(Ze,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Advances"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m(h.totalAdvances)})]}),e.jsx(It,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Staff"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Staff"}),l.map(x=>e.jsx(A,{value:x.name,children:x.name},x.id))]})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"approved",children:"Approved"}),e.jsx(A,{value:"pending",children:"Pending"})]})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"This Month"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Staff Members"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ot,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.position})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:d(x.department),children:x.department.replace("_"," ")}),e.jsx(U,{className:u(x.status),children:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:m(x.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Rate"}),e.jsxs("p",{className:"font-medium",children:[m(x.overtimeRate),"/hr"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Overtime"}),e.jsxs("p",{className:"font-medium text-orange-600",children:[x.totalOvertime," hrs"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Earnings"}),e.jsx("p",{className:"font-medium text-green-600",children:m(x.overtimeEarnings)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Advance"}),e.jsx("p",{className:"font-medium text-red-600",children:m(x.currentAdvance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Net Earnings"}),e.jsx("p",{className:"font-medium text-blue-600",children:m(x.baseSalary+x.overtimeEarnings-x.currentAdvance)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Department: ",x.department.replace("_"," ")," â€¢ Position: ",x.position]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(M,{variant:"outline",size:"sm",children:"Edit"})]})]})]},x.id))})})]})]}),e.jsx(me,{value:"overtime",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Overtime Records"}),e.jsxs(M,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Log Overtime"]})]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:o.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tt,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.staffName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.date," â€¢ ",x.regularHours,"h regular + ",x.overtimeHours,"h overtime"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-green-600",children:m(x.amount)}),e.jsx(U,{className:u(x.status),children:x.status}),e.jsx("p",{className:"text-xs text-gray-500",children:x.status==="approved"?`by ${x.approvedBy}`:"Pending approval"})]})]},x.id))})})]})}),e.jsx(me,{value:"advances",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Salary Advances"}),e.jsxs(M,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"New Advance"]})]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:c.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ze,{className:"w-5 h-5 text-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.staffName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",x.requestDate," â€¢ Approved by: ",x.approvedBy]})]})]}),e.jsx(U,{className:u(x.status),children:x.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Original Amount"}),e.jsx("p",{className:"font-medium",children:m(x.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Remaining Balance"}),e.jsx("p",{className:"font-medium text-red-600",children:m(x.remainingBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Repayment Plan"}),e.jsx("p",{className:"font-medium",children:x.repaymentPlan})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Progress"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${(x.amount-x.remainingBalance)/x.amount*100}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((x.amount-x.remainingBalance)/x.amount*100).toFixed(1),"% repaid"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Monthly deduction: ",m(x.remainingBalance/parseInt(x.repaymentPlan))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(M,{variant:"outline",size:"sm",children:"Adjust Plan"})]})]})]},x.id))})})]})}),e.jsx(me,{value:"payroll",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Monthly Payroll Summary"})}),e.jsxs(T,{children:[e.jsx("div",{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.position})]}),e.jsx(U,{className:d(x.department),children:x.department.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:m(x.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Pay"}),e.jsxs("p",{className:"font-medium text-green-600",children:["+",m(x.overtimeEarnings)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Advance Deduction"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",m(x.currentAdvance/3)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Net Pay"}),e.jsx("p",{className:"font-bold text-blue-600",children:m(x.baseSalary+x.overtimeEarnings-x.currentAdvance/3)})]}),e.jsx("div",{children:e.jsxs(M,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Process Pay"]})})]})]},x.id))}),e.jsx("div",{className:"border-t pt-4 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Base Salaries"}),e.jsx("p",{className:"text-lg font-bold",children:m(l.reduce((x,f)=>x+f.baseSalary,0))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Overtime Pay"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:m(l.reduce((x,f)=>x+f.overtimeEarnings,0))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Advance Deductions"}),e.jsxs("p",{className:"text-lg font-bold text-red-600",children:["-",m(l.reduce((x,f)=>x+f.currentAdvance/3,0))]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Net Payroll"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:m(l.reduce((x,f)=>x+f.baseSalary+f.overtimeEarnings-f.currentAdvance/3,0))})]})]})})]})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Payroll Settings"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Overtime Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Standard Overtime Multiplier"}),e.jsx(Q,{type:"number",defaultValue:"1.5",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Overtime Multiplier"}),e.jsx(Q,{type:"number",defaultValue:"2.0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Daily Overtime Threshold (hours)"}),e.jsx(Q,{type:"number",defaultValue:"8"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Advance Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Maximum Advance (% of salary)"}),e.jsx(Q,{type:"number",defaultValue:"50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default Repayment Period (months)"}),e.jsx(Q,{type:"number",defaultValue:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Minimum Service Period (months)"}),e.jsx(Q,{type:"number",defaultValue:"6"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Approval Workflow"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Require manager approval for overtime"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Require admin approval for advances"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-approve overtime under 2 hours"}),e.jsx("input",{type:"checkbox"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Send notifications for pending approvals"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function hQ(){const[t,s]=v.useState("all"),[r,n]=v.useState("all"),[a,i]=v.useState("all"),{data:l}=xe({queryKey:["/api/tasks"]}),{data:o}=xe({queryKey:["/api/properties"]}),{data:c}=xe({queryKey:["/api/property-appliances"]}),d=(l||[]).filter(y=>y.category==="maintenance").slice(0,10).map(y=>{const b=(o||[]).find(j=>j.id===y.propertyId);return{id:y.id,property:b?.name||`Property ${y.propertyId}`,category:y.subcategory||"General",description:y.description||y.title,date:y.completedAt||y.createdAt,technician:y.assignedStaff||"Unassigned",cost:y.actualCost||0,status:y.status,warrantyExpiry:null,nextService:y.scheduledDate,priority:y.priority||"medium",photos:[]}}),u=(c||[]).filter(y=>y.warrantyExpiry).slice(0,10).map(y=>{const b=(o||[]).find(N=>N.id===y.propertyId),j=new Date(y.warrantyExpiry),w=Math.floor((j.getTime()-Date.now())/(1e3*60*60*24));return{id:y.id,property:b?.name||`Property ${y.propertyId}`,item:y.name,category:y.category||"Appliances",purchaseDate:y.purchaseDate,warrantyExpiry:y.warrantyExpiry,daysUntilExpiry:w,status:w<0?"expired":w<30?"warning":"active",vendor:y.manufacturer||"Unknown",cost:y.purchasePrice||0}}),m=[],h=y=>{switch(y){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},x=y=>{switch(y){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},f=y=>{switch(y){case"active":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},p=y=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(y),g={totalRecords:d.length,completedTasks:d.filter(y=>y.status==="completed").length,totalCost:d.reduce((y,b)=>y+b.cost,0),warrantyAlerts:u.filter(y=>y.status==="warning"||y.status==="expired").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ms,{className:"w-8 h-8"}),"Maintenance Log & Warranty Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track maintenance records, warranty status, and AI-powered service predictions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Log Maintenance"]})]})]}),e.jsxs(xt,{defaultValue:"maintenance",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"maintenance",children:"Maintenance Log"}),e.jsx(de,{value:"warranty",children:"Warranty Tracker"}),e.jsx(de,{value:"predictions",children:"AI Predictions"}),e.jsx(de,{value:"analytics",children:"Analytics"}),e.jsx(de,{value:"settings",children:"Settings"})]}),e.jsxs(me,{value:"maintenance",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold",children:g.totalRecords})]}),e.jsx(Ms,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.completedTasks})]}),e.jsx(Ie,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:p(g.totalCost)})]}),e.jsx(Ze,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Warranty Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.warrantyAlerts})]}),e.jsx(St,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),(o||[]).map(y=>e.jsx(A,{value:y.id.toString(),children:y.name},y.id))]})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Categories"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Categories"}),e.jsx(A,{value:"hvac",children:"HVAC"}),e.jsx(A,{value:"pool",children:"Pool"}),e.jsx(A,{value:"plumbing",children:"Plumbing"}),e.jsx(A,{value:"electrical",children:"Electrical"}),e.jsx(A,{value:"garden",children:"Garden"})]})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"completed",children:"Completed"}),e.jsx(A,{value:"in_progress",children:"In Progress"}),e.jsx(A,{value:"scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search maintenance...",className:"pl-10"})]}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Maintenance Records"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:d.map(y=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ms,{className:"w-5 h-5 text-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:y.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.property," â€¢ ",y.category]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Technician: ",y.technician]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:x(y.priority),children:y.priority}),e.jsx(U,{className:h(y.status),children:y.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium",children:y.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost"}),e.jsx("p",{className:"font-medium text-green-600",children:p(y.cost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Warranty Until"}),e.jsx("p",{className:"font-medium",children:y.warrantyExpiry})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Service"}),e.jsx("p",{className:"font-medium",children:y.nextService})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Photos"}),e.jsxs("p",{className:"font-medium",children:[y.photos.length," attachments"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Category: ",y.category," â€¢ Priority: ",y.priority]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"View Photos"}),e.jsx(M,{variant:"outline",size:"sm",children:"Edit Record"})]})]})]},y.id))})})]})]}),e.jsx(me,{value:"warranty",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warranty Alerts"}),e.jsxs(M,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Warranty"]})]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:u.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:y.item}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.property," â€¢ ",y.category]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Vendor: ",y.vendor," â€¢ Cost: ",p(y.cost)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(U,{className:f(y.status),children:y.status}),e.jsx("p",{className:"text-sm font-medium mt-1",children:y.daysUntilExpiry<0?`Expired ${Math.abs(y.daysUntilExpiry)} days ago`:`${y.daysUntilExpiry} days remaining`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Expires: ",y.warrantyExpiry]})]})]},y.id))})})]})}),e.jsx(me,{value:"predictions",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"AI Maintenance Predictions"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:m.map(y=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:y.prediction}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.property," â€¢ ",y.category]}),e.jsx("p",{className:"text-xs text-gray-500",children:y.reasoning})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:x(y.priority),children:y.priority}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[y.confidence,"% confidence"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Estimated Cost"}),e.jsx("p",{className:"font-medium text-orange-600",children:p(y.estimatedCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Timeframe"}),e.jsx("p",{className:"font-medium",children:y.timeframe})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Confidence"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${y.confidence}%`}})}),e.jsxs("span",{className:"text-sm",children:[y.confidence,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["AI Recommendation â€¢ ",y.category," â€¢ ",y.priority," priority"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"Schedule Maintenance"}),e.jsx(M,{variant:"outline",size:"sm",children:"Dismiss"})]})]})]},y.id))})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Maintenance Cost by Category"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"HVAC Systems"}),e.jsx("span",{className:"font-bold",children:p(2500)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pool Maintenance"}),e.jsx("span",{className:"font-bold",children:p(4200)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Electrical Work"}),e.jsx("span",{className:"font-bold",children:p(6500)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Garden & Landscaping"}),e.jsx("span",{className:"font-bold",children:p(3200)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Plumbing"}),e.jsx("span",{className:"font-bold",children:p(800)})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Upcoming Maintenance"})}),e.jsxs(T,{className:"space-y-3",children:[d.filter(y=>y.status==="scheduled").slice(0,4).map(y=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-sm",children:[y.property," - ",y.category]}),e.jsx("span",{className:"text-sm font-medium",children:y.nextService||"TBD"})]},y.id)),d.filter(y=>y.status==="scheduled").length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No upcoming maintenance scheduled"})]})]})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Maintenance Settings"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warranty expiry alerts (days before)"}),e.jsx(Q,{type:"number",defaultValue:"30",className:"w-20"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Maintenance due reminders"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"AI prediction notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"AI Prediction Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Minimum confidence threshold"}),e.jsx(Q,{type:"number",defaultValue:"75",className:"w-20"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Enable predictive maintenance"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-schedule high confidence predictions"}),e.jsx("input",{type:"checkbox"})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function xQ(){const[t,s]=v.useState("all"),[r,n]=v.useState("current"),[a,i]=v.useState("all"),l=[{id:1,name:"Somchai Jaidee",role:"Maintenance Supervisor",department:"Maintenance",email:"somchai@hostpilotpro.com",phone:"+66 81 234 5678",address:"123 Soi Sukhumvit 42, Bangkok 10110",startDate:"2023-03-15",baseSalary:35e3,status:"active",avatar:"/avatars/somchai.jpg",skills:["HVAC","Plumbing","Electrical","Pool Maintenance"],certifications:["Thai Electrical License","Pool Chemical Handler"],emergencyContact:{name:"Malee Jaidee",relationship:"Spouse",phone:"+66 89 765 4321"}},{id:2,name:"Niran Thepsiri",role:"Housekeeping Manager",department:"Housekeeping",email:"niran@hostpilotpro.com",phone:"+66 82 345 6789",address:"456 Thanon Phra Ram 4, Bangkok 10110",startDate:"2022-11-20",baseSalary:32e3,status:"active",avatar:"/avatars/niran.jpg",skills:["Team Leadership","Quality Control","Inventory Management"],certifications:["Hospitality Management Certificate"],emergencyContact:{name:"Preecha Thepsiri",relationship:"Father",phone:"+66 81 876 5432"}},{id:3,name:"Apinya Khamchong",role:"Guest Services Coordinator",department:"Guest Services",email:"apinya@hostpilotpro.com",phone:"+66 83 456 7890",address:"789 Soi Thonglor 15, Bangkok 10110",startDate:"2023-08-10",baseSalary:28e3,status:"active",avatar:"/avatars/apinya.jpg",skills:["Customer Service","English/Thai Translation","Concierge Services"],certifications:["Tourism Authority License","First Aid Certificate"],emergencyContact:{name:"Siriporn Khamchong",relationship:"Mother",phone:"+66 84 567 8901"}},{id:4,name:"Wichai Suwanapong",role:"Security Officer",department:"Security",email:"wichai@hostpilotpro.com",phone:"+66 85 567 8901",address:"321 Soi Asoke 12, Bangkok 10110",startDate:"2024-01-05",baseSalary:26e3,status:"active",avatar:"/avatars/wichai.jpg",skills:["Security Protocols","Emergency Response","CCTV Operations"],certifications:["Security Guard License","CPR Certification"],emergencyContact:{name:"Chanida Suwanapong",relationship:"Sister",phone:"+66 86 678 9012"}}],o=[{id:1,staffId:1,payPeriod:"January 2025",baseSalary:35e3,overtime:2800,bonus:5e3,deductions:1200,netPay:41600,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:14},{id:2,staffId:2,payPeriod:"January 2025",baseSalary:32e3,overtime:1600,bonus:3e3,deductions:1e3,netPay:35600,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:8},{id:3,staffId:3,payPeriod:"January 2025",baseSalary:28e3,overtime:1200,bonus:2e3,deductions:800,netPay:30400,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:6},{id:4,staffId:4,payPeriod:"January 2025",baseSalary:26e3,overtime:2400,bonus:1500,deductions:700,netPay:29200,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:12}],c=[{staffId:1,date:"2025-01-22",checkIn:"08:00",checkOut:"17:00",status:"present",hoursWorked:8,overtime:1},{staffId:1,date:"2025-01-21",checkIn:"08:00",checkOut:"18:30",status:"present",hoursWorked:8,overtime:2.5},{staffId:2,date:"2025-01-22",checkIn:"07:30",checkOut:"16:30",status:"present",hoursWorked:8,overtime:0},{staffId:3,date:"2025-01-22",checkIn:"09:00",checkOut:"18:00",status:"present",hoursWorked:8,overtime:0}],d=f=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(f),u=f=>{switch(f){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},m=f=>{switch(f){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=f=>{switch(f){case"Maintenance":return"bg-orange-100 text-orange-800";case"Housekeeping":return"bg-purple-100 text-purple-800";case"Guest Services":return"bg-blue-100 text-blue-800";case"Security":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x={totalStaff:l.length,activeStaff:l.filter(f=>f.status==="active").length,monthlyPayroll:o.reduce((f,p)=>f+p.netPay,0),totalOvertime:o.reduce((f,p)=>f+p.overtime,0)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(ot,{className:"w-8 h-8"}),"Staff Profile & Payroll"]}),e.jsx("p",{className:"text-gray-600",children:"Manage staff profiles, payroll processing, and attendance tracking"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Export Payroll"]}),e.jsxs(M,{children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Staff"]})]})]}),e.jsxs(xt,{defaultValue:"profiles",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"profiles",children:"Staff Profiles"}),e.jsx(de,{value:"payroll",children:"Payroll Management"}),e.jsx(de,{value:"attendance",children:"Attendance"}),e.jsx(de,{value:"analytics",children:"Analytics"}),e.jsx(de,{value:"settings",children:"Settings"})]}),e.jsxs(me,{value:"profiles",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalStaff})]}),e.jsx(ot,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Staff"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.activeStaff})]}),e.jsx(ot,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Payroll"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d(x.monthlyPayroll)})]}),e.jsx(Ze,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Overtime"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:d(x.totalOvertime)})]}),e.jsx(tt,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Departments"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Departments"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"housekeeping",children:"Housekeeping"}),e.jsx(A,{value:"guest-services",children:"Guest Services"}),e.jsx(A,{value:"security",children:"Security"})]})]}),e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Staff"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Staff"}),e.jsx(A,{value:"active",children:"Active Only"}),e.jsx(A,{value:"inactive",children:"Inactive Only"})]})]}),e.jsx(Q,{placeholder:"Search staff..."}),e.jsx(M,{children:"Apply Filters"})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(f=>e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Kn,{className:"w-12 h-12",children:[e.jsx(eo,{src:f.avatar,alt:f.name}),e.jsx(Gn,{children:f.name.split(" ").map(p=>p[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:f.name}),e.jsx("p",{className:"text-sm text-gray-600",children:f.role}),e.jsx(U,{className:h(f.department),children:f.department})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:u(f.status),children:f.status}),e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Nr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:f.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:f.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:f.address})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Started: ",f.startDate]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[d(f.baseSalary),"/month"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Skills"}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[f.skills.slice(0,3).map((p,g)=>e.jsx(U,{variant:"outline",className:"text-xs",children:p},g)),f.skills.length>3&&e.jsxs(U,{variant:"outline",className:"text-xs",children:["+",f.skills.length-3," more"]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emergency Contact"}),e.jsxs("p",{className:"text-sm",children:[f.emergencyContact.name," (",f.emergencyContact.relationship,")"]}),e.jsx("p",{className:"text-xs text-gray-600",children:f.emergencyContact.phone})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(M,{variant:"outline",size:"sm",className:"flex-1",children:"View Profile"}),e.jsx(M,{variant:"outline",size:"sm",className:"flex-1",children:"Payroll History"})]})]})},f.id))})]}),e.jsxs(me,{value:"payroll",className:"space-y-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Pay Period"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"current",children:"January 2025"}),e.jsx(A,{value:"previous",children:"December 2024"}),e.jsx(A,{value:"november",children:"November 2024"})]})]}),e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Staff"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Staff"}),l.map(f=>e.jsx(A,{value:f.id.toString(),children:f.name},f.id))]})]}),e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"processing",children:"Processing"})]})]}),e.jsx(M,{children:"Generate Payroll"})]})})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Payroll Records - January 2025"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:o.map(f=>{const p=l.find(g=>g.id===f.staffId);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kn,{className:"w-10 h-10",children:e.jsx(Gn,{children:p?.name.split(" ").map(g=>g[0]).join("")})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:p?.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p?.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:m(f.status),children:f.status}),e.jsx("span",{className:"font-bold text-green-600",children:d(f.netPay)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:d(f.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Overtime"}),e.jsx("p",{className:"font-medium text-blue-600",children:d(f.overtime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Bonus"}),e.jsx("p",{className:"font-medium text-green-600",children:d(f.bonus)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Deductions"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",d(f.deductions)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Working Days"}),e.jsxs("p",{className:"font-medium",children:[f.workingDays," days"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"OT Hours"}),e.jsxs("p",{className:"font-medium",children:[f.overtimeHours,"h"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Pay Date: ",f.payDate]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),"Payslip"]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Er,{className:"w-4 h-4 mr-1"}),"Payment"]})]})]})]},f.id)})})})]})]}),e.jsx(me,{value:"attendance",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Daily Attendance - January 22, 2025"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:c.map((f,p)=>{const g=l.find(y=>y.id===f.staffId);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kn,{className:"w-8 h-8",children:e.jsx(Gn,{children:g?.name.split(" ").map(y=>y[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g?.name}),e.jsx("p",{className:"text-sm text-gray-600",children:g?.department})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Check In"}),e.jsx("p",{className:"font-medium",children:f.checkIn})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Check Out"}),e.jsx("p",{className:"font-medium",children:f.checkOut})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Hours"}),e.jsxs("p",{className:"font-medium",children:[f.hoursWorked,"h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Overtime"}),e.jsxs("p",{className:"font-medium text-blue-600",children:[f.overtime,"h"]})]})]}),e.jsx(U,{className:"bg-green-100 text-green-800",children:f.status})]},p)})})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Payroll Cost by Department"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maintenance"}),e.jsx("span",{className:"font-bold",children:d(41600)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Housekeeping"}),e.jsx("span",{className:"font-bold",children:d(35600)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Guest Services"}),e.jsx("span",{className:"font-bold",children:d(30400)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Security"}),e.jsx("span",{className:"font-bold",children:d(29200)})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Overtime by Staff"})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Somchai (14h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(2800)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Wichai (12h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(2400)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Niran (8h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(1600)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Apinya (6h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(1200)})]})]})]})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Payroll Settings"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Pay Period Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Pay frequency"}),e.jsxs(ae,{defaultValue:"monthly",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"weekly",children:"Weekly"}),e.jsx(A,{value:"bi-weekly",children:"Bi-weekly"}),e.jsx(A,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Pay day"}),e.jsx(Q,{type:"number",defaultValue:"31"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Overtime Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Overtime rate multiplier"}),e.jsx(Q,{type:"number",step:"0.1",defaultValue:"1.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Standard hours per day"}),e.jsx(Q,{type:"number",defaultValue:"8"})]})]})]})]}),e.jsx(M,{children:"Save Settings"})]})]})})]})]})}function QR(){const[t,s]=v.useState(!1),[r,n]=v.useState(0),a=[{category:"Database Integrity",icon:Ga,status:"healthy",issues:0,checks:[{name:"Property Records",status:"pass",description:"All property records are valid"},{name:"Booking Consistency",status:"pass",description:"No orphaned booking records"},{name:"User Account Integrity",status:"warning",description:"2 inactive accounts need review"},{name:"Financial Records",status:"pass",description:"All transactions balanced"}]},{category:"API Endpoints",icon:rB,status:"healthy",issues:1,checks:[{name:"Authentication Service",status:"pass",description:"All auth endpoints responding"},{name:"Property Management API",status:"pass",description:"CRUD operations working"},{name:"Booking Engine API",status:"warning",description:"Slow response times detected"},{name:"Financial API",status:"pass",description:"All payment endpoints active"}]},{category:"User Access Control",icon:ot,status:"warning",issues:3,checks:[{name:"Role Permissions",status:"pass",description:"All roles configured correctly"},{name:"Admin Access",status:"pass",description:"Admin permissions verified"},{name:"Guest Access",status:"warning",description:"3 expired guest sessions found"},{name:"Staff Permissions",status:"pass",description:"Staff access levels correct"}]},{category:"Property Data",icon:At,status:"healthy",issues:0,checks:[{name:"Property Listings",status:"pass",description:"All properties have complete data"},{name:"Amenity Information",status:"pass",description:"Amenities properly configured"},{name:"Pricing Data",status:"pass",description:"All pricing rules valid"},{name:"Availability Calendar",status:"pass",description:"Calendar sync operational"}]}],i=[{id:1,type:"warning",message:"3 guest sessions expired and need cleanup",timestamp:"2025-01-22 09:30:00",category:"User Access"},{id:2,type:"info",message:"Database backup completed successfully",timestamp:"2025-01-22 08:00:00",category:"System"},{id:3,type:"warning",message:"Booking API response time increased to 2.3s",timestamp:"2025-01-22 07:45:00",category:"Performance"},{id:4,type:"success",message:"Security scan completed - no vulnerabilities found",timestamp:"2025-01-22 06:00:00",category:"Security"}],l=[{name:"Database Query Speed",value:95,unit:"ms avg",status:"good"},{name:"API Response Time",value:230,unit:"ms avg",status:"warning"},{name:"Memory Usage",value:68,unit:"% used",status:"good"},{name:"CPU Utilization",value:42,unit:"% avg",status:"good"},{name:"Storage Usage",value:73,unit:"% used",status:"good"},{name:"Active Connections",value:156,unit:"concurrent",status:"good"}],o=u=>{switch(u){case"pass":case"healthy":case"good":case"success":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"error":case"critical":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},c=u=>{switch(u){case"pass":case"healthy":case"good":case"success":return Ie;case"warning":return St;case"error":case"critical":return yr;default:return Ie}},d=()=>{s(!0),n(0);const u=setInterval(()=>{n(m=>m>=100?(clearInterval(u),s(!1),100):m+10)},300)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Kt,{className:"w-8 h-8"}),"System Integrity Check"]}),e.jsx("p",{className:"text-gray-600",children:"Monitor system health, database integrity, and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(M,{onClick:d,disabled:t,children:[e.jsx(Ut,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),t?"Scanning...":"Run Full Scan"]})]})]}),t&&e.jsx(D,{className:"mb-6",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Bs,{className:"w-5 h-5 animate-pulse"}),e.jsx("span",{className:"font-medium",children:"System Scan in Progress..."})]}),e.jsx(dn,{value:r,className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[r,"% Complete"]})]})}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"database",children:"Database"}),e.jsx(de,{value:"performance",children:"Performance"}),e.jsx(de,{value:"security",children:"Security"}),e.jsx(de,{value:"alerts",children:"Alerts"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"System Status"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Healthy"})]}),e.jsx(Ie,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Issues"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"4"})]}),e.jsx(St,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Scan"}),e.jsx("p",{className:"text-2xl font-bold",children:"2h ago"})]}),e.jsx(tt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"99.8%"})]}),e.jsx(Bs,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((u,m)=>{const h=u.icon,x=c(u.status);return e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),u.category]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx(U,{className:o(u.status),children:u.status})]})]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:u.checks.map((f,p)=>{const g=c(f.status);return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:f.name}),e.jsx("p",{className:"text-xs text-gray-600",children:f.description})]})]}),e.jsx(U,{className:o(f.status),variant:"outline",children:f.status})]},p)})})})]},m)})})]}),e.jsxs(me,{value:"database",className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Database Health Check"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(Ga,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"font-medium",children:"Total Tables"}),e.jsx("p",{className:"text-2xl font-bold",children:"24"})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(Ie,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"font-medium",children:"Healthy Tables"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"22"})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(St,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"font-medium",children:"Need Attention"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"2"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Table Status Details"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:[{name:"properties",records:1245,status:"healthy",lastCheck:"5 min ago"},{name:"bookings",records:3567,status:"healthy",lastCheck:"5 min ago"},{name:"users",records:892,status:"warning",lastCheck:"5 min ago"},{name:"tasks",records:2134,status:"healthy",lastCheck:"5 min ago"},{name:"financial_transactions",records:8901,status:"healthy",lastCheck:"5 min ago"}].map((u,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.records.toLocaleString()," records"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:u.lastCheck}),e.jsx(U,{className:o(u.status),children:u.status})]})]},m))})})]})]}),e.jsx(me,{value:"performance",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((u,m)=>e.jsx(D,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsx(U,{className:o(u.status),children:u.status})]}),e.jsx("p",{className:"text-2xl font-bold",children:u.value}),e.jsx("p",{className:"text-sm text-gray-600",children:u.unit})]})},m))})}),e.jsx(me,{value:"security",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Security Status"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"SSL Certificate"}),e.jsx(U,{className:"bg-green-100 text-green-800",children:"Valid"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Firewall Status"}),e.jsx(U,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Last Security Scan"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"6h ago"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed Login Attempts"}),e.jsx(U,{className:"bg-yellow-100 text-yellow-800",children:"3 today"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Access Control"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Active Sessions"}),e.jsx("span",{className:"font-bold",children:"156"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Admin Sessions"}),e.jsx("span",{className:"font-bold",children:"3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Guest Sessions"}),e.jsx("span",{className:"font-bold",children:"89"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Expired Sessions"}),e.jsx("span",{className:"font-bold text-yellow-600",children:"3"})]})]})})]})]})}),e.jsx(me,{value:"alerts",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recent System Alerts"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:i.map(u=>e.jsx(Wn,{children:e.jsxs(Qn,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u.type==="warning"&&e.jsx(St,{className:"w-4 h-4 text-yellow-500"}),u.type==="success"&&e.jsx(Ie,{className:"w-4 h-4 text-green-500"}),u.type==="info"&&e.jsx(Bs,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{children:u.message}),e.jsxs("p",{className:"text-sm text-gray-500",children:[u.category," â€¢ ",u.timestamp]})]})]}),e.jsx(U,{variant:"outline",children:u.type})]})},u.id))})})]})})]})]})}const pQ=Object.freeze(Object.defineProperty({__proto__:null,default:QR},Symbol.toStringTag,{value:"Module"}));var fQ=Array.isArray,Kr=fQ,gQ=typeof Fm=="object"&&Fm&&Fm.Object===Object&&Fm,YR=gQ,jQ=YR,vQ=typeof self=="object"&&self&&self.Object===Object&&self,yQ=jQ||vQ||Function("return this")(),Oa=yQ,bQ=Oa,NQ=bQ.Symbol,Sm=NQ,MS=Sm,XR=Object.prototype,wQ=XR.hasOwnProperty,SQ=XR.toString,ud=MS?MS.toStringTag:void 0;function CQ(t){var s=wQ.call(t,ud),r=t[ud];try{t[ud]=void 0;var n=!0}catch{}var a=SQ.call(t);return n&&(s?t[ud]=r:delete t[ud]),a}var kQ=CQ,PQ=Object.prototype,AQ=PQ.toString;function TQ(t){return AQ.call(t)}var DQ=TQ,RS=Sm,OQ=kQ,EQ=DQ,MQ="[object Null]",RQ="[object Undefined]",_S=RS?RS.toStringTag:void 0;function _Q(t){return t==null?t===void 0?RQ:MQ:_S&&_S in Object(t)?OQ(t):EQ(t)}var ci=_Q;function IQ(t){return t!=null&&typeof t=="object"}var di=IQ,$Q=ci,FQ=di,LQ="[object Symbol]";function BQ(t){return typeof t=="symbol"||FQ(t)&&$Q(t)==LQ}var zc=BQ,VQ=Kr,qQ=zc,UQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zQ=/^\w*$/;function HQ(t,s){if(VQ(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||qQ(t)?!0:zQ.test(t)||!UQ.test(t)||s!=null&&t in Object(s)}var Yb=HQ;function KQ(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var Xi=KQ;const Hc=ys(Xi);var GQ=ci,WQ=Xi,QQ="[object AsyncFunction]",YQ="[object Function]",XQ="[object GeneratorFunction]",ZQ="[object Proxy]";function JQ(t){if(!WQ(t))return!1;var s=GQ(t);return s==YQ||s==XQ||s==QQ||s==ZQ}var Xb=JQ;const Dt=ys(Xb);var eY=Oa,tY=eY["__core-js_shared__"],sY=tY,Ug=sY,IS=function(){var t=/[^.]+$/.exec(Ug&&Ug.keys&&Ug.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function rY(t){return!!IS&&IS in t}var nY=rY,aY=Function.prototype,iY=aY.toString;function lY(t){if(t!=null){try{return iY.call(t)}catch{}try{return t+""}catch{}}return""}var ZR=lY,oY=Xb,cY=nY,dY=Xi,uY=ZR,mY=/[\\^$.*+?()[\]{}|]/g,hY=/^\[object .+?Constructor\]$/,xY=Function.prototype,pY=Object.prototype,fY=xY.toString,gY=pY.hasOwnProperty,jY=RegExp("^"+fY.call(gY).replace(mY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vY(t){if(!dY(t)||cY(t))return!1;var s=oY(t)?jY:hY;return s.test(uY(t))}var yY=vY;function bY(t,s){return t?.[s]}var NY=bY,wY=yY,SY=NY;function CY(t,s){var r=SY(t,s);return wY(r)?r:void 0}var to=CY,kY=to,PY=kY(Object,"create"),Qp=PY,$S=Qp;function AY(){this.__data__=$S?$S(null):{},this.size=0}var TY=AY;function DY(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var OY=DY,EY=Qp,MY="__lodash_hash_undefined__",RY=Object.prototype,_Y=RY.hasOwnProperty;function IY(t){var s=this.__data__;if(EY){var r=s[t];return r===MY?void 0:r}return _Y.call(s,t)?s[t]:void 0}var $Y=IY,FY=Qp,LY=Object.prototype,BY=LY.hasOwnProperty;function VY(t){var s=this.__data__;return FY?s[t]!==void 0:BY.call(s,t)}var qY=VY,UY=Qp,zY="__lodash_hash_undefined__";function HY(t,s){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=UY&&s===void 0?zY:s,this}var KY=HY,GY=TY,WY=OY,QY=$Y,YY=qY,XY=KY;function Kc(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Kc.prototype.clear=GY;Kc.prototype.delete=WY;Kc.prototype.get=QY;Kc.prototype.has=YY;Kc.prototype.set=XY;var ZY=Kc;function JY(){this.__data__=[],this.size=0}var eX=JY;function tX(t,s){return t===s||t!==t&&s!==s}var Zb=tX,sX=Zb;function rX(t,s){for(var r=t.length;r--;)if(sX(t[r][0],s))return r;return-1}var Yp=rX,nX=Yp,aX=Array.prototype,iX=aX.splice;function lX(t){var s=this.__data__,r=nX(s,t);if(r<0)return!1;var n=s.length-1;return r==n?s.pop():iX.call(s,r,1),--this.size,!0}var oX=lX,cX=Yp;function dX(t){var s=this.__data__,r=cX(s,t);return r<0?void 0:s[r][1]}var uX=dX,mX=Yp;function hX(t){return mX(this.__data__,t)>-1}var xX=hX,pX=Yp;function fX(t,s){var r=this.__data__,n=pX(r,t);return n<0?(++this.size,r.push([t,s])):r[n][1]=s,this}var gX=fX,jX=eX,vX=oX,yX=uX,bX=xX,NX=gX;function Gc(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Gc.prototype.clear=jX;Gc.prototype.delete=vX;Gc.prototype.get=yX;Gc.prototype.has=bX;Gc.prototype.set=NX;var Xp=Gc,wX=to,SX=Oa,CX=wX(SX,"Map"),Jb=CX,FS=ZY,kX=Xp,PX=Jb;function AX(){this.size=0,this.__data__={hash:new FS,map:new(PX||kX),string:new FS}}var TX=AX;function DX(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var OX=DX,EX=OX;function MX(t,s){var r=t.__data__;return EX(s)?r[typeof s=="string"?"string":"hash"]:r.map}var Zp=MX,RX=Zp;function _X(t){var s=RX(this,t).delete(t);return this.size-=s?1:0,s}var IX=_X,$X=Zp;function FX(t){return $X(this,t).get(t)}var LX=FX,BX=Zp;function VX(t){return BX(this,t).has(t)}var qX=VX,UX=Zp;function zX(t,s){var r=UX(this,t),n=r.size;return r.set(t,s),this.size+=r.size==n?0:1,this}var HX=zX,KX=TX,GX=IX,WX=LX,QX=qX,YX=HX;function Wc(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Wc.prototype.clear=KX;Wc.prototype.delete=GX;Wc.prototype.get=WX;Wc.prototype.has=QX;Wc.prototype.set=YX;var eN=Wc,JR=eN,XX="Expected a function";function tN(t,s){if(typeof t!="function"||s!=null&&typeof s!="function")throw new TypeError(XX);var r=function(){var n=arguments,a=s?s.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var l=t.apply(this,n);return r.cache=i.set(a,l)||i,l};return r.cache=new(tN.Cache||JR),r}tN.Cache=JR;var e_=tN;const ZX=ys(e_);var JX=e_,eZ=500;function tZ(t){var s=JX(t,function(n){return r.size===eZ&&r.clear(),n}),r=s.cache;return s}var sZ=tZ,rZ=sZ,nZ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aZ=/\\(\\)?/g,iZ=rZ(function(t){var s=[];return t.charCodeAt(0)===46&&s.push(""),t.replace(nZ,function(r,n,a,i){s.push(a?i.replace(aZ,"$1"):n||r)}),s}),lZ=iZ;function oZ(t,s){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=s(t[r],r,t);return a}var sN=oZ,LS=Sm,cZ=sN,dZ=Kr,uZ=zc,BS=LS?LS.prototype:void 0,VS=BS?BS.toString:void 0;function t_(t){if(typeof t=="string")return t;if(dZ(t))return cZ(t,t_)+"";if(uZ(t))return VS?VS.call(t):"";var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var mZ=t_,hZ=mZ;function xZ(t){return t==null?"":hZ(t)}var s_=xZ,pZ=Kr,fZ=Yb,gZ=lZ,jZ=s_;function vZ(t,s){return pZ(t)?t:fZ(t,s)?[t]:gZ(jZ(t))}var r_=vZ,yZ=zc;function bZ(t){if(typeof t=="string"||yZ(t))return t;var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var Jp=bZ,NZ=r_,wZ=Jp;function SZ(t,s){s=NZ(s,t);for(var r=0,n=s.length;t!=null&&r<n;)t=t[wZ(s[r++])];return r&&r==n?t:void 0}var rN=SZ,CZ=rN;function kZ(t,s,r){var n=t==null?void 0:CZ(t,s);return n===void 0?r:n}var n_=kZ;const an=ys(n_);function PZ(t){return t==null}var AZ=PZ;const Rt=ys(AZ);var TZ=ci,DZ=Kr,OZ=di,EZ="[object String]";function MZ(t){return typeof t=="string"||!DZ(t)&&OZ(t)&&TZ(t)==EZ}var RZ=MZ;const Vl=ys(RZ);var a_={exports:{}},fs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN=Symbol.for("react.element"),aN=Symbol.for("react.portal"),ef=Symbol.for("react.fragment"),tf=Symbol.for("react.strict_mode"),sf=Symbol.for("react.profiler"),rf=Symbol.for("react.provider"),nf=Symbol.for("react.context"),_Z=Symbol.for("react.server_context"),af=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),of=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),df=Symbol.for("react.lazy"),IZ=Symbol.for("react.offscreen"),i_;i_=Symbol.for("react.module.reference");function Rn(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case nN:switch(t=t.type,t){case ef:case sf:case tf:case lf:case of:return t;default:switch(t=t&&t.$$typeof,t){case _Z:case nf:case af:case df:case cf:case rf:return t;default:return s}}case aN:return s}}}fs.ContextConsumer=nf;fs.ContextProvider=rf;fs.Element=nN;fs.ForwardRef=af;fs.Fragment=ef;fs.Lazy=df;fs.Memo=cf;fs.Portal=aN;fs.Profiler=sf;fs.StrictMode=tf;fs.Suspense=lf;fs.SuspenseList=of;fs.isAsyncMode=function(){return!1};fs.isConcurrentMode=function(){return!1};fs.isContextConsumer=function(t){return Rn(t)===nf};fs.isContextProvider=function(t){return Rn(t)===rf};fs.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===nN};fs.isForwardRef=function(t){return Rn(t)===af};fs.isFragment=function(t){return Rn(t)===ef};fs.isLazy=function(t){return Rn(t)===df};fs.isMemo=function(t){return Rn(t)===cf};fs.isPortal=function(t){return Rn(t)===aN};fs.isProfiler=function(t){return Rn(t)===sf};fs.isStrictMode=function(t){return Rn(t)===tf};fs.isSuspense=function(t){return Rn(t)===lf};fs.isSuspenseList=function(t){return Rn(t)===of};fs.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ef||t===sf||t===tf||t===lf||t===of||t===IZ||typeof t=="object"&&t!==null&&(t.$$typeof===df||t.$$typeof===cf||t.$$typeof===rf||t.$$typeof===nf||t.$$typeof===af||t.$$typeof===i_||t.getModuleId!==void 0)};fs.typeOf=Rn;a_.exports=fs;var $Z=a_.exports,FZ=ci,LZ=di,BZ="[object Number]";function VZ(t){return typeof t=="number"||LZ(t)&&FZ(t)==BZ}var l_=VZ;const qZ=ys(l_);var UZ=l_;function zZ(t){return UZ(t)&&t!=+t}var HZ=zZ;const Cm=ys(HZ);var Lr=function(s){return s===0?0:s>0?1:-1},vl=function(s){return Vl(s)&&s.indexOf("%")===s.length-1},ze=function(s){return qZ(s)&&!Cm(s)},KZ=function(s){return Rt(s)},pr=function(s){return ze(s)||Vl(s)},GZ=0,Qc=function(s){var r=++GZ;return"".concat(s||"").concat(r)},Br=function(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ze(s)&&!Vl(s))return n;var i;if(vl(s)){var l=s.indexOf("%");i=r*parseFloat(s.slice(0,l))/100}else i=+s;return Cm(i)&&(i=n),a&&i>r&&(i=r),i},wi=function(s){if(!s)return null;var r=Object.keys(s);return r&&r.length?s[r[0]]:null},WZ=function(s){if(!Array.isArray(s))return!1;for(var r=s.length,n={},a=0;a<r;a++)if(!n[s[a]])n[s[a]]=!0;else return!0;return!1},en=function(s,r){return ze(s)&&ze(r)?function(n){return s+n*(r-s)}:function(){return r}};function tx(t,s,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof s=="function"?s(n):an(n,s))===r})}var QZ=function(s,r){return ze(s)&&ze(r)?s-r:Vl(s)&&Vl(r)?s.localeCompare(r):s instanceof Date&&r instanceof Date?s.getTime()-r.getTime():String(s).localeCompare(String(r))};function qo(t,s){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(s,r)||t[r]!==s[r]))return!1;for(var n in s)if({}.hasOwnProperty.call(s,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Av(t)}var YZ=["viewBox","children"],XZ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qS=["points","pathLength"],zg={svg:YZ,polygon:qS,polyline:qS},iN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sx=function(s,r){if(!s||typeof s=="function"||typeof s=="boolean")return null;var n=s;if(v.isValidElement(s)&&(n=s.props),!Hc(n))return null;var a={};return Object.keys(n).forEach(function(i){iN.includes(i)&&(a[i]=r||function(l){return n[i](n,l)})}),a},ZZ=function(s,r,n){return function(a){return s(r,n,a),null}},ql=function(s,r,n){if(!Hc(s)||Av(s)!=="object")return null;var a=null;return Object.keys(s).forEach(function(i){var l=s[i];iN.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=ZZ(l,r,n))}),a},JZ=["children"],eJ=["children"];function US(t,s){if(t==null)return{};var r=tJ(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function tJ(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tv(t)}var zS={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Qa=function(s){return typeof s=="string"?s:s?s.displayName||s.name||"Component":""},HS=null,Hg=null,lN=function t(s){if(s===HS&&Array.isArray(Hg))return Hg;var r=[];return v.Children.forEach(s,function(n){Rt(n)||($Z.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Hg=r,HS=s,r};function ln(t,s){var r=[],n=[];return Array.isArray(s)?n=s.map(function(a){return Qa(a)}):n=[Qa(s)],lN(t).forEach(function(a){var i=an(a,"type.displayName")||an(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Yr(t,s){var r=ln(t,s);return r&&r[0]}var KS=function(s){if(!s||!s.props)return!1;var r=s.props,n=r.width,a=r.height;return!(!ze(n)||n<=0||!ze(a)||a<=0)},sJ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],rJ=function(s){return s&&s.type&&Vl(s.type)&&sJ.indexOf(s.type)>=0},nJ=function(s){return s&&Tv(s)==="object"&&"clipDot"in s},aJ=function(s,r,n,a){var i,l=(i=zg?.[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Dt(s)&&(a&&l.includes(r)||XZ.includes(r))||n&&iN.includes(r)},jt=function(s,r,n){if(!s||typeof s=="function"||typeof s=="boolean")return null;var a=s;if(v.isValidElement(s)&&(a=s.props),!Hc(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;aJ((o=a)===null||o===void 0?void 0:o[l],l,r,n)&&(i[l]=a[l])}),i},Dv=function t(s,r){if(s===r)return!0;var n=v.Children.count(s);if(n!==v.Children.count(r))return!1;if(n===0)return!0;if(n===1)return GS(Array.isArray(s)?s[0]:s,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=s[a],l=r[a];if(Array.isArray(i)||Array.isArray(l)){if(!t(i,l))return!1}else if(!GS(i,l))return!1}return!0},GS=function(s,r){if(Rt(s)&&Rt(r))return!0;if(!Rt(s)&&!Rt(r)){var n=s.props||{},a=n.children,i=US(n,JZ),l=r.props||{},o=l.children,c=US(l,eJ);return a&&o?qo(i,c)&&Dv(a,o):!a&&!o?qo(i,c):!1}return!1},WS=function(s,r){var n=[],a={};return lN(s).forEach(function(i,l){if(rJ(i))n.push(i);else if(i){var o=Qa(i.type),c=r[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var m=d(i,o,l);n.push(m),a[o]=!0}}}),n},iJ=function(s){var r=s&&s.type;return r&&zS[r]?zS[r]:null},lJ=function(s,r){return lN(r).indexOf(s)},oJ=["children","width","height","viewBox","className","style","title","desc"];function Ov(){return Ov=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ov.apply(this,arguments)}function cJ(t,s){if(t==null)return{};var r=dJ(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dJ(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ev(t){var s=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,l=t.style,o=t.title,c=t.desc,d=cJ(t,oJ),u=a||{width:r,height:n,x:0,y:0},m=$t("recharts-surface",i);return ee.createElement("svg",Ov({},jt(d,!0,"svg"),{className:m,width:r,height:n,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ee.createElement("title",null,o),ee.createElement("desc",null,c),s)}var uJ=["children","className"];function Mv(){return Mv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mv.apply(this,arguments)}function mJ(t,s){if(t==null)return{};var r=hJ(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hJ(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var is=ee.forwardRef(function(t,s){var r=t.children,n=t.className,a=mJ(t,uJ),i=$t("recharts-layer",n);return ee.createElement("g",Mv({className:i},jt(a,!0),{ref:s}),r)}),Yn=function(s,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function xJ(t,s,r){var n=-1,a=t.length;s<0&&(s=-s>a?0:a+s),r=r>a?a:r,r<0&&(r+=a),a=s>r?0:r-s>>>0,s>>>=0;for(var i=Array(a);++n<a;)i[n]=t[n+s];return i}var pJ=xJ,fJ=pJ;function gJ(t,s,r){var n=t.length;return r=r===void 0?n:r,!s&&r>=n?t:fJ(t,s,r)}var jJ=gJ,vJ="\\ud800-\\udfff",yJ="\\u0300-\\u036f",bJ="\\ufe20-\\ufe2f",NJ="\\u20d0-\\u20ff",wJ=yJ+bJ+NJ,SJ="\\ufe0e\\ufe0f",CJ="\\u200d",kJ=RegExp("["+CJ+vJ+wJ+SJ+"]");function PJ(t){return kJ.test(t)}var o_=PJ;function AJ(t){return t.split("")}var TJ=AJ,c_="\\ud800-\\udfff",DJ="\\u0300-\\u036f",OJ="\\ufe20-\\ufe2f",EJ="\\u20d0-\\u20ff",MJ=DJ+OJ+EJ,RJ="\\ufe0e\\ufe0f",_J="["+c_+"]",Rv="["+MJ+"]",_v="\\ud83c[\\udffb-\\udfff]",IJ="(?:"+Rv+"|"+_v+")",d_="[^"+c_+"]",u_="(?:\\ud83c[\\udde6-\\uddff]){2}",m_="[\\ud800-\\udbff][\\udc00-\\udfff]",$J="\\u200d",h_=IJ+"?",x_="["+RJ+"]?",FJ="(?:"+$J+"(?:"+[d_,u_,m_].join("|")+")"+x_+h_+")*",LJ=x_+h_+FJ,BJ="(?:"+[d_+Rv+"?",Rv,u_,m_,_J].join("|")+")",VJ=RegExp(_v+"(?="+_v+")|"+BJ+LJ,"g");function qJ(t){return t.match(VJ)||[]}var UJ=qJ,zJ=TJ,HJ=o_,KJ=UJ;function GJ(t){return HJ(t)?KJ(t):zJ(t)}var WJ=GJ,QJ=jJ,YJ=o_,XJ=WJ,ZJ=s_;function JJ(t){return function(s){s=ZJ(s);var r=YJ(s)?XJ(s):void 0,n=r?r[0]:s.charAt(0),a=r?QJ(r,1).join(""):s.slice(1);return n[t]()+a}}var eee=JJ,tee=eee,see=tee("toUpperCase"),ree=see;const uf=ys(ree);function Ss(t){return function(){return t}}const p_=Math.cos,rx=Math.sin,ra=Math.sqrt,nx=Math.PI,mf=2*nx,Iv=Math.PI,$v=2*Iv,cl=1e-6,nee=$v-cl;function f_(t){this._+=t[0];for(let s=1,r=t.length;s<r;++s)this._+=arguments[s]+t[s]}function aee(t){let s=Math.floor(t);if(!(s>=0))throw new Error(`invalid digits: ${t}`);if(s>15)return f_;const r=10**s;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class iee{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?f_:aee(s)}moveTo(s,r){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,r){this._append`L${this._x1=+s},${this._y1=+r}`}quadraticCurveTo(s,r,n,a){this._append`Q${+s},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(s,r,n,a,i,l){this._append`C${+s},${+r},${+n},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(s,r,n,a,i){if(s=+s,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=n-s,d=a-r,u=l-s,m=o-r,h=u*u+m*m;if(this._x1===null)this._append`M${this._x1=s},${this._y1=r}`;else if(h>cl)if(!(Math.abs(m*c-d*u)>cl)||!i)this._append`L${this._x1=s},${this._y1=r}`;else{let x=n-l,f=a-o,p=c*c+d*d,g=x*x+f*f,y=Math.sqrt(p),b=Math.sqrt(h),j=i*Math.tan((Iv-Math.acos((p+h-g)/(2*y*b)))/2),w=j/b,N=j/y;Math.abs(w-1)>cl&&this._append`L${s+w*u},${r+w*m}`,this._append`A${i},${i},0,0,${+(m*x>u*f)},${this._x1=s+N*c},${this._y1=r+N*d}`}}arc(s,r,n,a,i,l){if(s=+s,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),d=s+o,u=r+c,m=1^l,h=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>cl||Math.abs(this._y1-u)>cl)&&this._append`L${d},${u}`,n&&(h<0&&(h=h%$v+$v),h>nee?this._append`A${n},${n},0,1,${m},${s-o},${r-c}A${n},${n},0,1,${m},${this._x1=d},${this._y1=u}`:h>cl&&this._append`A${n},${n},0,${+(h>=Iv)},${m},${this._x1=s+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(s,r,n,a){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function oN(t){let s=3;return t.digits=function(r){if(!arguments.length)return s;if(r==null)s=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);s=n}return t},()=>new iee(s)}function cN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function g_(t){this._context=t}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._context.lineTo(t,s);break}}};function hf(t){return new g_(t)}function j_(t){return t[0]}function v_(t){return t[1]}function y_(t,s){var r=Ss(!0),n=null,a=hf,i=null,l=oN(o);t=typeof t=="function"?t:t===void 0?j_:Ss(t),s=typeof s=="function"?s:s===void 0?v_:Ss(s);function o(c){var d,u=(c=cN(c)).length,m,h=!1,x;for(n==null&&(i=a(x=l())),d=0;d<=u;++d)!(d<u&&r(m=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(m,d,c),+s(m,d,c));if(x)return i=null,x+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ss(+c),o):t},o.y=function(c){return arguments.length?(s=typeof c=="function"?c:Ss(+c),o):s},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ss(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Qm(t,s,r){var n=null,a=Ss(!0),i=null,l=hf,o=null,c=oN(d);t=typeof t=="function"?t:t===void 0?j_:Ss(+t),s=typeof s=="function"?s:Ss(s===void 0?0:+s),r=typeof r=="function"?r:r===void 0?v_:Ss(+r);function d(m){var h,x,f,p=(m=cN(m)).length,g,y=!1,b,j=new Array(p),w=new Array(p);for(i==null&&(o=l(b=c())),h=0;h<=p;++h){if(!(h<p&&a(g=m[h],h,m))===y)if(y=!y)x=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),f=h-1;f>=x;--f)o.point(j[f],w[f]);o.lineEnd(),o.areaEnd()}y&&(j[h]=+t(g,h,m),w[h]=+s(g,h,m),o.point(n?+n(g,h,m):j[h],r?+r(g,h,m):w[h]))}if(b)return o=null,b+""||null}function u(){return y_().defined(a).curve(l).context(i)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:Ss(+m),n=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Ss(+m),d):t},d.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Ss(+m),d):n},d.y=function(m){return arguments.length?(s=typeof m=="function"?m:Ss(+m),r=null,d):s},d.y0=function(m){return arguments.length?(s=typeof m=="function"?m:Ss(+m),d):s},d.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Ss(+m),d):r},d.lineX0=d.lineY0=function(){return u().x(t).y(s)},d.lineY1=function(){return u().x(t).y(r)},d.lineX1=function(){return u().x(n).y(s)},d.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Ss(!!m),d):a},d.curve=function(m){return arguments.length?(l=m,i!=null&&(o=l(i)),d):l},d.context=function(m){return arguments.length?(m==null?i=o=null:o=l(i=m),d):i},d}class b_{constructor(s,r){this._context=s,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,r){switch(s=+s,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,r):this._context.moveTo(s,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,r,s,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,s,this._y0,s,r);break}}this._x0=s,this._y0=r}}function lee(t){return new b_(t,!0)}function oee(t){return new b_(t,!1)}const dN={draw(t,s){const r=ra(s/nx);t.moveTo(r,0),t.arc(0,0,r,0,mf)}},cee={draw(t,s){const r=ra(s/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},N_=ra(1/3),dee=N_*2,uee={draw(t,s){const r=ra(s/dee),n=r*N_;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},mee={draw(t,s){const r=ra(s),n=-r/2;t.rect(n,n,r,r)}},hee=.8908130915292852,w_=rx(nx/10)/rx(7*nx/10),xee=rx(mf/10)*w_,pee=-p_(mf/10)*w_,fee={draw(t,s){const r=ra(s*hee),n=xee*r,a=pee*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const l=mf*i/5,o=p_(l),c=rx(l);t.lineTo(c*r,-o*r),t.lineTo(o*n-c*a,c*n+o*a)}t.closePath()}},Kg=ra(3),gee={draw(t,s){const r=-ra(s/(Kg*3));t.moveTo(0,r*2),t.lineTo(-Kg*r,-r),t.lineTo(Kg*r,-r),t.closePath()}},hn=-.5,xn=ra(3)/2,Fv=1/ra(12),jee=(Fv/2+1)*3,vee={draw(t,s){const r=ra(s/jee),n=r/2,a=r*Fv,i=n,l=r*Fv+r,o=-i,c=l;t.moveTo(n,a),t.lineTo(i,l),t.lineTo(o,c),t.lineTo(hn*n-xn*a,xn*n+hn*a),t.lineTo(hn*i-xn*l,xn*i+hn*l),t.lineTo(hn*o-xn*c,xn*o+hn*c),t.lineTo(hn*n+xn*a,hn*a-xn*n),t.lineTo(hn*i+xn*l,hn*l-xn*i),t.lineTo(hn*o+xn*c,hn*c-xn*o),t.closePath()}};function yee(t,s){let r=null,n=oN(a);t=typeof t=="function"?t:Ss(t||dN),s=typeof s=="function"?s:Ss(s===void 0?64:+s);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+s.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Ss(i),a):t},a.size=function(i){return arguments.length?(s=typeof i=="function"?i:Ss(+i),a):s},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function ax(){}function ix(t,s,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+s)/6,(t._y0+4*t._y1+r)/6)}function S_(t){this._context=t}S_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ix(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ix(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function bee(t){return new S_(t)}function C_(t){this._context=t}C_.prototype={areaStart:ax,areaEnd:ax,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:ix(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function Nee(t){return new C_(t)}function k_(t){this._context=t}k_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ix(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function wee(t){return new k_(t)}function P_(t){this._context=t}P_.prototype={areaStart:ax,areaEnd:ax,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,s){t=+t,s=+s,this._point?this._context.lineTo(t,s):(this._point=1,this._context.moveTo(t,s))}};function See(t){return new P_(t)}function QS(t){return t<0?-1:1}function YS(t,s,r){var n=t._x1-t._x0,a=s-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),l=(r-t._y1)/(a||n<0&&-0),o=(i*a+l*n)/(n+a);return(QS(i)+QS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function XS(t,s){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-s)/2:s}function Gg(t,s,r){var n=t._x0,a=t._y0,i=t._x1,l=t._y1,o=(i-n)/3;t._context.bezierCurveTo(n+o,a+o*s,i-o,l-o*r,i,l)}function lx(t){this._context=t}lx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Gg(this,this._t0,XS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){var r=NaN;if(t=+t,s=+s,!(t===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,Gg(this,XS(this,r=YS(this,t,s)),r);break;default:Gg(this,this._t0,r=YS(this,t,s));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s,this._t0=r}}};function A_(t){this._context=new T_(t)}(A_.prototype=Object.create(lx.prototype)).point=function(t,s){lx.prototype.point.call(this,s,t)};function T_(t){this._context=t}T_.prototype={moveTo:function(t,s){this._context.moveTo(s,t)},closePath:function(){this._context.closePath()},lineTo:function(t,s){this._context.lineTo(s,t)},bezierCurveTo:function(t,s,r,n,a,i){this._context.bezierCurveTo(s,t,n,r,i,a)}};function Cee(t){return new lx(t)}function kee(t){return new A_(t)}function D_(t){this._context=t}D_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,s=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],s[0]):this._context.moveTo(t[0],s[0]),r===2)this._context.lineTo(t[1],s[1]);else for(var n=ZS(t),a=ZS(s),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[l],s[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,s){this._x.push(+t),this._y.push(+s)}};function ZS(t){var s,r=t.length-1,n,a=new Array(r),i=new Array(r),l=new Array(r);for(a[0]=0,i[0]=2,l[0]=t[0]+2*t[1],s=1;s<r-1;++s)a[s]=1,i[s]=4,l[s]=4*t[s]+2*t[s+1];for(a[r-1]=2,i[r-1]=7,l[r-1]=8*t[r-1]+t[r],s=1;s<r;++s)n=a[s]/i[s-1],i[s]-=n,l[s]-=n*l[s-1];for(a[r-1]=l[r-1]/i[r-1],s=r-2;s>=0;--s)a[s]=(l[s]-a[s+1])/i[s];for(i[r-1]=(t[r]+a[r-1])/2,s=0;s<r-1;++s)i[s]=2*t[s+1]-a[s+1];return[a,i]}function Pee(t){return new D_(t)}function xf(t,s){this._context=t,this._t=s}xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(t,s);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,s)}break}}this._x=t,this._y=s}};function Aee(t){return new xf(t,.5)}function Tee(t){return new xf(t,0)}function Dee(t){return new xf(t,1)}function lc(t,s){if((l=t.length)>1)for(var r=1,n,a,i=t[s[0]],l,o=i.length;r<l;++r)for(a=i,i=t[s[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Lv(t){for(var s=t.length,r=new Array(s);--s>=0;)r[s]=s;return r}function Oee(t,s){return t[s]}function Eee(t){const s=[];return s.key=t,s}function Mee(){var t=Ss([]),s=Lv,r=lc,n=Oee;function a(i){var l=Array.from(t.apply(this,arguments),Eee),o,c=l.length,d=-1,u;for(const m of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+n(m,l[o].key,d,i)]).data=m;for(o=0,u=cN(s(l));o<c;++o)l[u[o]].index=o;return r(l,u),l}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Ss(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ss(+i),a):n},a.order=function(i){return arguments.length?(s=i==null?Lv:typeof i=="function"?i:Ss(Array.from(i)),a):s},a.offset=function(i){return arguments.length?(r=i??lc,a):r},a}function Ree(t,s){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,l;a<i;++a){for(l=r=0;r<n;++r)l+=t[r][a][1]||0;if(l)for(r=0;r<n;++r)t[r][a][1]/=l}lc(t,s)}}function _ee(t,s){if((a=t.length)>0){for(var r=0,n=t[s[0]],a,i=n.length;r<i;++r){for(var l=0,o=0;l<a;++l)o+=t[l][r][1]||0;n[r][1]+=n[r][0]=-o/2}lc(t,s)}}function Iee(t,s){if(!(!((l=t.length)>0)||!((i=(a=t[s[0]]).length)>0))){for(var r=0,n=1,a,i,l;n<i;++n){for(var o=0,c=0,d=0;o<l;++o){for(var u=t[s[o]],m=u[n][1]||0,h=u[n-1][1]||0,x=(m-h)/2,f=0;f<o;++f){var p=t[s[f]],g=p[n][1]||0,y=p[n-1][1]||0;x+=g-y}c+=m,d+=x*m}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,lc(t,s)}}function du(t){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},du(t)}var $ee=["type","size","sizeType"];function Bv(){return Bv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bv.apply(this,arguments)}function JS(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function e2(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?JS(Object(r),!0).forEach(function(n){Fee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fee(t,s,r){return s=Lee(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Lee(t){var s=Bee(t,"string");return du(s)=="symbol"?s:s+""}function Bee(t,s){if(du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Vee(t,s){if(t==null)return{};var r=qee(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qee(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var O_={symbolCircle:dN,symbolCross:cee,symbolDiamond:uee,symbolSquare:mee,symbolStar:fee,symbolTriangle:gee,symbolWye:vee},Uee=Math.PI/180,zee=function(s){var r="symbol".concat(uf(s));return O_[r]||dN},Hee=function(s,r,n){if(r==="area")return s;switch(n){case"cross":return 5*s*s/9;case"diamond":return .5*s*s/Math.sqrt(3);case"square":return s*s;case"star":{var a=18*Uee;return 1.25*s*s*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*s*s/4;case"wye":return(21-10*Math.sqrt(3))*s*s/8;default:return Math.PI*s*s/4}},Kee=function(s,r){O_["symbol".concat(uf(s))]=r},uN=function(s){var r=s.type,n=r===void 0?"circle":r,a=s.size,i=a===void 0?64:a,l=s.sizeType,o=l===void 0?"area":l,c=Vee(s,$ee),d=e2(e2({},c),{},{type:n,size:i,sizeType:o}),u=function(){var g=zee(n),y=yee().type(g).size(Hee(i,o,n));return y()},m=d.className,h=d.cx,x=d.cy,f=jt(d,!0);return h===+h&&x===+x&&i===+i?ee.createElement("path",Bv({},f,{className:$t("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(x,")"),d:u()})):null};uN.registerSymbol=Kee;function oc(t){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},oc(t)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vv.apply(this,arguments)}function t2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gee(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?t2(Object(r),!0).forEach(function(n){uu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wee(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Qee(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M_(n.key),n)}}function Yee(t,s,r){return s&&Qee(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xee(t,s,r){return s=ox(s),Zee(t,E_()?Reflect.construct(s,r||[],ox(t).constructor):s.apply(t,r))}function Zee(t,s){if(s&&(oc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jee(t)}function Jee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E_=function(){return!!t})()}function ox(t){return ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ox(t)}function ete(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&qv(t,s)}function qv(t,s){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qv(t,s)}function uu(t,s,r){return s=M_(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function M_(t){var s=tte(t,"string");return oc(s)=="symbol"?s:s+""}function tte(t,s){if(oc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pn=32,mN=function(t){function s(){return Wee(this,s),Xee(this,s,arguments)}return ete(s,t),Yee(s,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=pn/2,l=pn/6,o=pn/3,c=n.inactive?a:n.color;if(n.type==="plainline")return ee.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:pn,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ee.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(pn,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ee.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(pn/8,"h").concat(pn,"v").concat(pn*3/4,"h").concat(-pn,"z"),className:"recharts-legend-icon"});if(ee.isValidElement(n.legendIcon)){var d=Gee({},n);return delete d.legendIcon,ee.cloneElement(n.legendIcon,d)}return ee.createElement(uN,{fill:c,cx:i,cy:i,size:pn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:pn,height:pn},m={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,f){var p=x.formatter||c,g=$t(uu(uu({"recharts-legend-item":!0},"legend-item-".concat(f),!0),"inactive",x.inactive));if(x.type==="none")return null;var y=Dt(x.value)?null:x.value;Yn(!Dt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=x.inactive?d:x.color;return ee.createElement("li",Vv({className:g,style:m,key:"legend-item-".concat(f)},ql(n.props,x,f)),ee.createElement(Ev,{width:l,height:l,viewBox:u,style:h},n.renderIcon(x)),ee.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(y,x,f):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,l=n.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return ee.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(v.PureComponent);uu(mN,"displayName","Legend");uu(mN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ste=Xp;function rte(){this.__data__=new ste,this.size=0}var nte=rte;function ate(t){var s=this.__data__,r=s.delete(t);return this.size=s.size,r}var ite=ate;function lte(t){return this.__data__.get(t)}var ote=lte;function cte(t){return this.__data__.has(t)}var dte=cte,ute=Xp,mte=Jb,hte=eN,xte=200;function pte(t,s){var r=this.__data__;if(r instanceof ute){var n=r.__data__;if(!mte||n.length<xte-1)return n.push([t,s]),this.size=++r.size,this;r=this.__data__=new hte(n)}return r.set(t,s),this.size=r.size,this}var fte=pte,gte=Xp,jte=nte,vte=ite,yte=ote,bte=dte,Nte=fte;function Yc(t){var s=this.__data__=new gte(t);this.size=s.size}Yc.prototype.clear=jte;Yc.prototype.delete=vte;Yc.prototype.get=yte;Yc.prototype.has=bte;Yc.prototype.set=Nte;var R_=Yc,wte="__lodash_hash_undefined__";function Ste(t){return this.__data__.set(t,wte),this}var Cte=Ste;function kte(t){return this.__data__.has(t)}var Pte=kte,Ate=eN,Tte=Cte,Dte=Pte;function cx(t){var s=-1,r=t==null?0:t.length;for(this.__data__=new Ate;++s<r;)this.add(t[s])}cx.prototype.add=cx.prototype.push=Tte;cx.prototype.has=Dte;var __=cx;function Ote(t,s){for(var r=-1,n=t==null?0:t.length;++r<n;)if(s(t[r],r,t))return!0;return!1}var I_=Ote;function Ete(t,s){return t.has(s)}var $_=Ete,Mte=__,Rte=I_,_te=$_,Ite=1,$te=2;function Fte(t,s,r,n,a,i){var l=r&Ite,o=t.length,c=s.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(t),u=i.get(s);if(d&&u)return d==s&&u==t;var m=-1,h=!0,x=r&$te?new Mte:void 0;for(i.set(t,s),i.set(s,t);++m<o;){var f=t[m],p=s[m];if(n)var g=l?n(p,f,m,s,t,i):n(f,p,m,t,s,i);if(g!==void 0){if(g)continue;h=!1;break}if(x){if(!Rte(s,function(y,b){if(!_te(x,b)&&(f===y||a(f,y,r,n,i)))return x.push(b)})){h=!1;break}}else if(!(f===p||a(f,p,r,n,i))){h=!1;break}}return i.delete(t),i.delete(s),h}var F_=Fte,Lte=Oa,Bte=Lte.Uint8Array,Vte=Bte;function qte(t){var s=-1,r=Array(t.size);return t.forEach(function(n,a){r[++s]=[a,n]}),r}var Ute=qte;function zte(t){var s=-1,r=Array(t.size);return t.forEach(function(n){r[++s]=n}),r}var hN=zte,s2=Sm,r2=Vte,Hte=Zb,Kte=F_,Gte=Ute,Wte=hN,Qte=1,Yte=2,Xte="[object Boolean]",Zte="[object Date]",Jte="[object Error]",ese="[object Map]",tse="[object Number]",sse="[object RegExp]",rse="[object Set]",nse="[object String]",ase="[object Symbol]",ise="[object ArrayBuffer]",lse="[object DataView]",n2=s2?s2.prototype:void 0,Wg=n2?n2.valueOf:void 0;function ose(t,s,r,n,a,i,l){switch(r){case lse:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case ise:return!(t.byteLength!=s.byteLength||!i(new r2(t),new r2(s)));case Xte:case Zte:case tse:return Hte(+t,+s);case Jte:return t.name==s.name&&t.message==s.message;case sse:case nse:return t==s+"";case ese:var o=Gte;case rse:var c=n&Qte;if(o||(o=Wte),t.size!=s.size&&!c)return!1;var d=l.get(t);if(d)return d==s;n|=Yte,l.set(t,s);var u=Kte(o(t),o(s),n,a,i,l);return l.delete(t),u;case ase:if(Wg)return Wg.call(t)==Wg.call(s)}return!1}var cse=ose;function dse(t,s){for(var r=-1,n=s.length,a=t.length;++r<n;)t[a+r]=s[r];return t}var L_=dse,use=L_,mse=Kr;function hse(t,s,r){var n=s(t);return mse(t)?n:use(n,r(t))}var xse=hse;function pse(t,s){for(var r=-1,n=t==null?0:t.length,a=0,i=[];++r<n;){var l=t[r];s(l,r,t)&&(i[a++]=l)}return i}var fse=pse;function gse(){return[]}var jse=gse,vse=fse,yse=jse,bse=Object.prototype,Nse=bse.propertyIsEnumerable,a2=Object.getOwnPropertySymbols,wse=a2?function(t){return t==null?[]:(t=Object(t),vse(a2(t),function(s){return Nse.call(t,s)}))}:yse,Sse=wse;function Cse(t,s){for(var r=-1,n=Array(t);++r<t;)n[r]=s(r);return n}var kse=Cse,Pse=ci,Ase=di,Tse="[object Arguments]";function Dse(t){return Ase(t)&&Pse(t)==Tse}var Ose=Dse,i2=Ose,Ese=di,B_=Object.prototype,Mse=B_.hasOwnProperty,Rse=B_.propertyIsEnumerable,_se=i2(function(){return arguments}())?i2:function(t){return Ese(t)&&Mse.call(t,"callee")&&!Rse.call(t,"callee")},xN=_se,dx={exports:{}};function Ise(){return!1}var $se=Ise;dx.exports;(function(t,s){var r=Oa,n=$se,a=s&&!s.nodeType&&s,i=a&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===a,o=l?r.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||n;t.exports=d})(dx,dx.exports);var V_=dx.exports,Fse=9007199254740991,Lse=/^(?:0|[1-9]\d*)$/;function Bse(t,s){var r=typeof t;return s=s??Fse,!!s&&(r=="number"||r!="symbol"&&Lse.test(t))&&t>-1&&t%1==0&&t<s}var pN=Bse,Vse=9007199254740991;function qse(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Vse}var fN=qse,Use=ci,zse=fN,Hse=di,Kse="[object Arguments]",Gse="[object Array]",Wse="[object Boolean]",Qse="[object Date]",Yse="[object Error]",Xse="[object Function]",Zse="[object Map]",Jse="[object Number]",ere="[object Object]",tre="[object RegExp]",sre="[object Set]",rre="[object String]",nre="[object WeakMap]",are="[object ArrayBuffer]",ire="[object DataView]",lre="[object Float32Array]",ore="[object Float64Array]",cre="[object Int8Array]",dre="[object Int16Array]",ure="[object Int32Array]",mre="[object Uint8Array]",hre="[object Uint8ClampedArray]",xre="[object Uint16Array]",pre="[object Uint32Array]",Ts={};Ts[lre]=Ts[ore]=Ts[cre]=Ts[dre]=Ts[ure]=Ts[mre]=Ts[hre]=Ts[xre]=Ts[pre]=!0;Ts[Kse]=Ts[Gse]=Ts[are]=Ts[Wse]=Ts[ire]=Ts[Qse]=Ts[Yse]=Ts[Xse]=Ts[Zse]=Ts[Jse]=Ts[ere]=Ts[tre]=Ts[sre]=Ts[rre]=Ts[nre]=!1;function fre(t){return Hse(t)&&zse(t.length)&&!!Ts[Use(t)]}var gre=fre;function jre(t){return function(s){return t(s)}}var q_=jre,ux={exports:{}};ux.exports;(function(t,s){var r=YR,n=s&&!s.nodeType&&s,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,l=i&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();t.exports=o})(ux,ux.exports);var vre=ux.exports,yre=gre,bre=q_,l2=vre,o2=l2&&l2.isTypedArray,Nre=o2?bre(o2):yre,U_=Nre,wre=kse,Sre=xN,Cre=Kr,kre=V_,Pre=pN,Are=U_,Tre=Object.prototype,Dre=Tre.hasOwnProperty;function Ore(t,s){var r=Cre(t),n=!r&&Sre(t),a=!r&&!n&&kre(t),i=!r&&!n&&!a&&Are(t),l=r||n||a||i,o=l?wre(t.length,String):[],c=o.length;for(var d in t)(s||Dre.call(t,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Pre(d,c)))&&o.push(d);return o}var Ere=Ore,Mre=Object.prototype;function Rre(t){var s=t&&t.constructor,r=typeof s=="function"&&s.prototype||Mre;return t===r}var _re=Rre;function Ire(t,s){return function(r){return t(s(r))}}var z_=Ire,$re=z_,Fre=$re(Object.keys,Object),Lre=Fre,Bre=_re,Vre=Lre,qre=Object.prototype,Ure=qre.hasOwnProperty;function zre(t){if(!Bre(t))return Vre(t);var s=[];for(var r in Object(t))Ure.call(t,r)&&r!="constructor"&&s.push(r);return s}var Hre=zre,Kre=Xb,Gre=fN;function Wre(t){return t!=null&&Gre(t.length)&&!Kre(t)}var km=Wre,Qre=Ere,Yre=Hre,Xre=km;function Zre(t){return Xre(t)?Qre(t):Yre(t)}var pf=Zre,Jre=xse,ene=Sse,tne=pf;function sne(t){return Jre(t,tne,ene)}var rne=sne,c2=rne,nne=1,ane=Object.prototype,ine=ane.hasOwnProperty;function lne(t,s,r,n,a,i){var l=r&nne,o=c2(t),c=o.length,d=c2(s),u=d.length;if(c!=u&&!l)return!1;for(var m=c;m--;){var h=o[m];if(!(l?h in s:ine.call(s,h)))return!1}var x=i.get(t),f=i.get(s);if(x&&f)return x==s&&f==t;var p=!0;i.set(t,s),i.set(s,t);for(var g=l;++m<c;){h=o[m];var y=t[h],b=s[h];if(n)var j=l?n(b,y,h,s,t,i):n(y,b,h,t,s,i);if(!(j===void 0?y===b||a(y,b,r,n,i):j)){p=!1;break}g||(g=h=="constructor")}if(p&&!g){var w=t.constructor,N=s.constructor;w!=N&&"constructor"in t&&"constructor"in s&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(p=!1)}return i.delete(t),i.delete(s),p}var one=lne,cne=to,dne=Oa,une=cne(dne,"DataView"),mne=une,hne=to,xne=Oa,pne=hne(xne,"Promise"),fne=pne,gne=to,jne=Oa,vne=gne(jne,"Set"),H_=vne,yne=to,bne=Oa,Nne=yne(bne,"WeakMap"),wne=Nne,Uv=mne,zv=Jb,Hv=fne,Kv=H_,Gv=wne,K_=ci,Xc=ZR,d2="[object Map]",Sne="[object Object]",u2="[object Promise]",m2="[object Set]",h2="[object WeakMap]",x2="[object DataView]",Cne=Xc(Uv),kne=Xc(zv),Pne=Xc(Hv),Ane=Xc(Kv),Tne=Xc(Gv),dl=K_;(Uv&&dl(new Uv(new ArrayBuffer(1)))!=x2||zv&&dl(new zv)!=d2||Hv&&dl(Hv.resolve())!=u2||Kv&&dl(new Kv)!=m2||Gv&&dl(new Gv)!=h2)&&(dl=function(t){var s=K_(t),r=s==Sne?t.constructor:void 0,n=r?Xc(r):"";if(n)switch(n){case Cne:return x2;case kne:return d2;case Pne:return u2;case Ane:return m2;case Tne:return h2}return s});var Dne=dl,Qg=R_,One=F_,Ene=cse,Mne=one,p2=Dne,f2=Kr,g2=V_,Rne=U_,_ne=1,j2="[object Arguments]",v2="[object Array]",Ym="[object Object]",Ine=Object.prototype,y2=Ine.hasOwnProperty;function $ne(t,s,r,n,a,i){var l=f2(t),o=f2(s),c=l?v2:p2(t),d=o?v2:p2(s);c=c==j2?Ym:c,d=d==j2?Ym:d;var u=c==Ym,m=d==Ym,h=c==d;if(h&&g2(t)){if(!g2(s))return!1;l=!0,u=!1}if(h&&!u)return i||(i=new Qg),l||Rne(t)?One(t,s,r,n,a,i):Ene(t,s,c,r,n,a,i);if(!(r&_ne)){var x=u&&y2.call(t,"__wrapped__"),f=m&&y2.call(s,"__wrapped__");if(x||f){var p=x?t.value():t,g=f?s.value():s;return i||(i=new Qg),a(p,g,r,n,i)}}return h?(i||(i=new Qg),Mne(t,s,r,n,a,i)):!1}var Fne=$ne,Lne=Fne,b2=di;function G_(t,s,r,n,a){return t===s?!0:t==null||s==null||!b2(t)&&!b2(s)?t!==t&&s!==s:Lne(t,s,r,n,G_,a)}var gN=G_,Bne=R_,Vne=gN,qne=1,Une=2;function zne(t,s,r,n){var a=r.length,i=a,l=!n;if(t==null)return!i;for(t=Object(t);a--;){var o=r[a];if(l&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++a<i;){o=r[a];var c=o[0],d=t[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in t))return!1}else{var m=new Bne;if(n)var h=n(d,u,c,t,s,m);if(!(h===void 0?Vne(u,d,qne|Une,n,m):h))return!1}}return!0}var Hne=zne,Kne=Xi;function Gne(t){return t===t&&!Kne(t)}var W_=Gne,Wne=W_,Qne=pf;function Yne(t){for(var s=Qne(t),r=s.length;r--;){var n=s[r],a=t[n];s[r]=[n,a,Wne(a)]}return s}var Xne=Yne;function Zne(t,s){return function(r){return r==null?!1:r[t]===s&&(s!==void 0||t in Object(r))}}var Q_=Zne,Jne=Hne,eae=Xne,tae=Q_;function sae(t){var s=eae(t);return s.length==1&&s[0][2]?tae(s[0][0],s[0][1]):function(r){return r===t||Jne(r,t,s)}}var rae=sae;function nae(t,s){return t!=null&&s in Object(t)}var aae=nae,iae=r_,lae=xN,oae=Kr,cae=pN,dae=fN,uae=Jp;function mae(t,s,r){s=iae(s,t);for(var n=-1,a=s.length,i=!1;++n<a;){var l=uae(s[n]);if(!(i=t!=null&&r(t,l)))break;t=t[l]}return i||++n!=a?i:(a=t==null?0:t.length,!!a&&dae(a)&&cae(l,a)&&(oae(t)||lae(t)))}var hae=mae,xae=aae,pae=hae;function fae(t,s){return t!=null&&pae(t,s,xae)}var gae=fae,jae=gN,vae=n_,yae=gae,bae=Yb,Nae=W_,wae=Q_,Sae=Jp,Cae=1,kae=2;function Pae(t,s){return bae(t)&&Nae(s)?wae(Sae(t),s):function(r){var n=vae(r,t);return n===void 0&&n===s?yae(r,t):jae(s,n,Cae|kae)}}var Aae=Pae;function Tae(t){return t}var Zc=Tae;function Dae(t){return function(s){return s?.[t]}}var Oae=Dae,Eae=rN;function Mae(t){return function(s){return Eae(s,t)}}var Rae=Mae,_ae=Oae,Iae=Rae,$ae=Yb,Fae=Jp;function Lae(t){return $ae(t)?_ae(Fae(t)):Iae(t)}var Bae=Lae,Vae=rae,qae=Aae,Uae=Zc,zae=Kr,Hae=Bae;function Kae(t){return typeof t=="function"?t:t==null?Uae:typeof t=="object"?zae(t)?qae(t[0],t[1]):Vae(t):Hae(t)}var Ea=Kae;function Gae(t,s,r,n){for(var a=t.length,i=r+(n?1:-1);n?i--:++i<a;)if(s(t[i],i,t))return i;return-1}var Y_=Gae;function Wae(t){return t!==t}var Qae=Wae;function Yae(t,s,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===s)return n;return-1}var Xae=Yae,Zae=Y_,Jae=Qae,eie=Xae;function tie(t,s,r){return s===s?eie(t,s,r):Zae(t,Jae,r)}var sie=tie,rie=sie;function nie(t,s){var r=t==null?0:t.length;return!!r&&rie(t,s,0)>-1}var aie=nie;function iie(t,s,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(s,t[n]))return!0;return!1}var lie=iie;function oie(){}var cie=oie,Yg=H_,die=cie,uie=hN,mie=1/0,hie=Yg&&1/uie(new Yg([,-0]))[1]==mie?function(t){return new Yg(t)}:die,xie=hie,pie=__,fie=aie,gie=lie,jie=$_,vie=xie,yie=hN,bie=200;function Nie(t,s,r){var n=-1,a=fie,i=t.length,l=!0,o=[],c=o;if(r)l=!1,a=gie;else if(i>=bie){var d=s?null:vie(t);if(d)return yie(d);l=!1,a=jie,c=new pie}else c=s?[]:o;e:for(;++n<i;){var u=t[n],m=s?s(u):u;if(u=r||u!==0?u:0,l&&m===m){for(var h=c.length;h--;)if(c[h]===m)continue e;s&&c.push(m),o.push(u)}else a(c,m,r)||(c!==o&&c.push(m),o.push(u))}return o}var wie=Nie,Sie=Ea,Cie=wie;function kie(t,s){return t&&t.length?Cie(t,Sie(s)):[]}var Pie=kie;const N2=ys(Pie);function X_(t,s,r){return s===!0?N2(t,r):Dt(s)?N2(t,s):t}function cc(t){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},cc(t)}var Aie=["ref"];function w2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ia(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?w2(Object(r),!0).forEach(function(n){ff(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tie(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function S2(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J_(n.key),n)}}function Die(t,s,r){return s&&S2(t.prototype,s),r&&S2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oie(t,s,r){return s=mx(s),Eie(t,Z_()?Reflect.construct(s,r||[],mx(t).constructor):s.apply(t,r))}function Eie(t,s){if(s&&(cc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mie(t)}function Mie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z_=function(){return!!t})()}function mx(t){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mx(t)}function Rie(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Wv(t,s)}function Wv(t,s){return Wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wv(t,s)}function ff(t,s,r){return s=J_(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function J_(t){var s=_ie(t,"string");return cc(s)=="symbol"?s:s+""}function _ie(t,s){if(cc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Iie(t,s){if(t==null)return{};var r=$ie(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $ie(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Fie(t){return t.value}function Lie(t,s){if(ee.isValidElement(t))return ee.cloneElement(t,s);if(typeof t=="function")return ee.createElement(t,s);s.ref;var r=Iie(s,Aie);return ee.createElement(mN,r)}var C2=1,fa=function(t){function s(){var r;Tie(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Oie(this,s,[].concat(a)),ff(r,"lastBoundingBox",{width:-1,height:-1}),r}return Rie(s,t),Die(s,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>C2||Math.abs(a.height-this.lastBoundingBox.height)>C2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ia({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,m,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(l==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((d||0)-x.width)/2}}else m=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var f=this.getBBoxSnapshot();h={top:((u||0)-f.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ia(Ia({},m),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,m=Ia(Ia({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return ee.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){n.wrapperNode=x}},Lie(i,Ia(Ia({},this.props),{},{payload:X_(u,d,Fie)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Ia(Ia({},this.defaultProps),n.props),l=i.layout;return l==="vertical"&&ze(n.props.height)?{height:n.props.height}:l==="horizontal"?{width:n.props.width||a}:null}}])}(v.PureComponent);ff(fa,"displayName","Legend");ff(fa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var k2=Sm,Bie=xN,Vie=Kr,P2=k2?k2.isConcatSpreadable:void 0;function qie(t){return Vie(t)||Bie(t)||!!(P2&&t&&t[P2])}var Uie=qie,zie=L_,Hie=Uie;function eI(t,s,r,n,a){var i=-1,l=t.length;for(r||(r=Hie),a||(a=[]);++i<l;){var o=t[i];s>0&&r(o)?s>1?eI(o,s-1,r,n,a):zie(a,o):n||(a[a.length]=o)}return a}var tI=eI;function Kie(t){return function(s,r,n){for(var a=-1,i=Object(s),l=n(s),o=l.length;o--;){var c=l[t?o:++a];if(r(i[c],c,i)===!1)break}return s}}var Gie=Kie,Wie=Gie,Qie=Wie(),Yie=Qie,Xie=Yie,Zie=pf;function Jie(t,s){return t&&Xie(t,s,Zie)}var sI=Jie,ele=km;function tle(t,s){return function(r,n){if(r==null)return r;if(!ele(r))return t(r,n);for(var a=r.length,i=s?a:-1,l=Object(r);(s?i--:++i<a)&&n(l[i],i,l)!==!1;);return r}}var sle=tle,rle=sI,nle=sle,ale=nle(rle),jN=ale,ile=jN,lle=km;function ole(t,s){var r=-1,n=lle(t)?Array(t.length):[];return ile(t,function(a,i,l){n[++r]=s(a,i,l)}),n}var rI=ole;function cle(t,s){var r=t.length;for(t.sort(s);r--;)t[r]=t[r].value;return t}var dle=cle,A2=zc;function ule(t,s){if(t!==s){var r=t!==void 0,n=t===null,a=t===t,i=A2(t),l=s!==void 0,o=s===null,c=s===s,d=A2(s);if(!o&&!d&&!i&&t>s||i&&l&&c&&!o&&!d||n&&l&&c||!r&&c||!a)return 1;if(!n&&!i&&!d&&t<s||d&&r&&a&&!n&&!i||o&&r&&a||!l&&a||!c)return-1}return 0}var mle=ule,hle=mle;function xle(t,s,r){for(var n=-1,a=t.criteria,i=s.criteria,l=a.length,o=r.length;++n<l;){var c=hle(a[n],i[n]);if(c){if(n>=o)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return t.index-s.index}var ple=xle,Xg=sN,fle=rN,gle=Ea,jle=rI,vle=dle,yle=q_,ble=ple,Nle=Zc,wle=Kr;function Sle(t,s,r){s.length?s=Xg(s,function(i){return wle(i)?function(l){return fle(l,i.length===1?i[0]:i)}:i}):s=[Nle];var n=-1;s=Xg(s,yle(gle));var a=jle(t,function(i,l,o){var c=Xg(s,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return vle(a,function(i,l){return ble(i,l,r)})}var Cle=Sle;function kle(t,s,r){switch(r.length){case 0:return t.call(s);case 1:return t.call(s,r[0]);case 2:return t.call(s,r[0],r[1]);case 3:return t.call(s,r[0],r[1],r[2])}return t.apply(s,r)}var Ple=kle,Ale=Ple,T2=Math.max;function Tle(t,s,r){return s=T2(s===void 0?t.length-1:s,0),function(){for(var n=arguments,a=-1,i=T2(n.length-s,0),l=Array(i);++a<i;)l[a]=n[s+a];a=-1;for(var o=Array(s+1);++a<s;)o[a]=n[a];return o[s]=r(l),Ale(t,this,o)}}var Dle=Tle;function Ole(t){return function(){return t}}var Ele=Ole,Mle=to,Rle=function(){try{var t=Mle(Object,"defineProperty");return t({},"",{}),t}catch{}}(),nI=Rle,_le=Ele,D2=nI,Ile=Zc,$le=D2?function(t,s){return D2(t,"toString",{configurable:!0,enumerable:!1,value:_le(s),writable:!0})}:Ile,Fle=$le,Lle=800,Ble=16,Vle=Date.now;function qle(t){var s=0,r=0;return function(){var n=Vle(),a=Ble-(n-r);if(r=n,a>0){if(++s>=Lle)return arguments[0]}else s=0;return t.apply(void 0,arguments)}}var Ule=qle,zle=Fle,Hle=Ule,Kle=Hle(zle),Gle=Kle,Wle=Zc,Qle=Dle,Yle=Gle;function Xle(t,s){return Yle(Qle(t,s,Wle),t+"")}var Zle=Xle,Jle=Zb,eoe=km,toe=pN,soe=Xi;function roe(t,s,r){if(!soe(r))return!1;var n=typeof s;return(n=="number"?eoe(r)&&toe(s,r.length):n=="string"&&s in r)?Jle(r[s],t):!1}var gf=roe,noe=tI,aoe=Cle,ioe=Zle,O2=gf,loe=ioe(function(t,s){if(t==null)return[];var r=s.length;return r>1&&O2(t,s[0],s[1])?s=[]:r>2&&O2(s[0],s[1],s[2])&&(s=[s[0]]),aoe(t,noe(s,1),[])}),ooe=loe;const vN=ys(ooe);function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},mu(t)}function Qv(){return Qv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qv.apply(this,arguments)}function coe(t,s){return hoe(t)||moe(t,s)||uoe(t,s)||doe()}function doe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uoe(t,s){if(t){if(typeof t=="string")return E2(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E2(t,s)}}function E2(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function moe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function hoe(t){if(Array.isArray(t))return t}function M2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?M2(Object(r),!0).forEach(function(n){xoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xoe(t,s,r){return s=poe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function poe(t){var s=foe(t,"string");return mu(s)=="symbol"?s:s+""}function foe(t,s){if(mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function goe(t){return Array.isArray(t)&&pr(t[0])&&pr(t[1])?t.join(" ~ "):t}var joe=function(s){var r=s.separator,n=r===void 0?" : ":r,a=s.contentStyle,i=a===void 0?{}:a,l=s.itemStyle,o=l===void 0?{}:l,c=s.labelStyle,d=c===void 0?{}:c,u=s.payload,m=s.formatter,h=s.itemSorter,x=s.wrapperClassName,f=s.labelClassName,p=s.label,g=s.labelFormatter,y=s.accessibilityLayer,b=y===void 0?!1:y,j=function(){if(u&&u.length){var I={padding:0,margin:0},W=(h?vN(u,h):u).map(function(E,B){if(E.type==="none")return null;var G=Zg({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},o),J=E.formatter||m||goe,C=E.value,V=E.name,z=C,le=V;if(J&&z!=null&&le!=null){var Ce=J(C,V,E,B,u);if(Array.isArray(Ce)){var H=coe(Ce,2);z=H[0],le=H[1]}else z=Ce}return ee.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:G},pr(le)?ee.createElement("span",{className:"recharts-tooltip-item-name"},le):null,pr(le)?ee.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ee.createElement("span",{className:"recharts-tooltip-item-value"},z),ee.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return ee.createElement("ul",{className:"recharts-tooltip-item-list",style:I},W)}return null},w=Zg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=Zg({margin:0},d),S=!Rt(p),O=S?p:"",P=$t("recharts-default-tooltip",x),k=$t("recharts-tooltip-label",f);S&&g&&u!==void 0&&u!==null&&(O=g(p,u));var R=b?{role:"status","aria-live":"assertive"}:{};return ee.createElement("div",Qv({className:P,style:w},R),ee.createElement("p",{className:k,style:N},ee.isValidElement(O)?O:"".concat(O)),j())};function hu(t){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hu(t)}function Xm(t,s,r){return s=voe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function voe(t){var s=yoe(t,"string");return hu(s)=="symbol"?s:s+""}function yoe(t,s){if(hu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var md="recharts-tooltip-wrapper",boe={visibility:"hidden"};function Noe(t){var s=t.coordinate,r=t.translateX,n=t.translateY;return $t(md,Xm(Xm(Xm(Xm({},"".concat(md,"-right"),ze(r)&&s&&ze(s.x)&&r>=s.x),"".concat(md,"-left"),ze(r)&&s&&ze(s.x)&&r<s.x),"".concat(md,"-bottom"),ze(n)&&s&&ze(s.y)&&n>=s.y),"".concat(md,"-top"),ze(n)&&s&&ze(s.y)&&n<s.y))}function R2(t){var s=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,l=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&ze(i[n]))return i[n];var u=r[n]-o-a,m=r[n]+a;if(s[n])return l[n]?u:m;if(l[n]){var h=u,x=c[n];return h<x?Math.max(m,c[n]):Math.max(u,c[n])}var f=m+o,p=c[n]+d;return f>p?Math.max(u,c[n]):Math.max(m,c[n])}function woe(t){var s=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(s,"px, ").concat(r,"px, 0)"):"translate(".concat(s,"px, ").concat(r,"px)")}}function Soe(t){var s=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,l=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,d,u,m;return l.height>0&&l.width>0&&r?(u=R2({allowEscapeViewBox:s,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),m=R2({allowEscapeViewBox:s,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=woe({translateX:u,translateY:m,useTranslate3d:o})):d=boe,{cssProperties:d,cssClasses:Noe({translateX:u,translateY:m,coordinate:r})}}function dc(t){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},dc(t)}function _2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function I2(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?_2(Object(r),!0).forEach(function(n){Xv(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Coe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function koe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iI(n.key),n)}}function Poe(t,s,r){return s&&koe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aoe(t,s,r){return s=hx(s),Toe(t,aI()?Reflect.construct(s,r||[],hx(t).constructor):s.apply(t,r))}function Toe(t,s){if(s&&(dc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Doe(t)}function Doe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aI=function(){return!!t})()}function hx(t){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hx(t)}function Ooe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Yv(t,s)}function Yv(t,s){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yv(t,s)}function Xv(t,s,r){return s=iI(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function iI(t){var s=Eoe(t,"string");return dc(s)=="symbol"?s:s+""}function Eoe(t,s){if(dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $2=1,Moe=function(t){function s(){var r;Coe(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Aoe(this,s,[].concat(a)),Xv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Xv(r,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return Ooe(s,t),Poe(s,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>$2||Math.abs(n.height-this.state.lastBoundingBox.height)>$2)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,m=a.hasPayload,h=a.isAnimationActive,x=a.offset,f=a.position,p=a.reverseDirection,g=a.useTranslate3d,y=a.viewBox,b=a.wrapperStyle,j=Soe({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:x,position:f,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),w=j.cssClasses,N=j.cssProperties,S=I2(I2({transition:h&&i?"transform ".concat(o,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},b);return ee.createElement("div",{tabIndex:-1,className:w,style:S,ref:function(P){n.wrapperNode=P}},d)}}])}(v.PureComponent),Roe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},so={isSsr:Roe()};function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},uc(t)}function F2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function L2(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?F2(Object(r),!0).forEach(function(n){yN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _oe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Ioe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oI(n.key),n)}}function $oe(t,s,r){return s&&Ioe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Foe(t,s,r){return s=xx(s),Loe(t,lI()?Reflect.construct(s,r||[],xx(t).constructor):s.apply(t,r))}function Loe(t,s){if(s&&(uc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Boe(t)}function Boe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lI=function(){return!!t})()}function xx(t){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xx(t)}function Voe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Zv(t,s)}function Zv(t,s){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zv(t,s)}function yN(t,s,r){return s=oI(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function oI(t){var s=qoe(t,"string");return uc(s)=="symbol"?s:s+""}function qoe(t,s){if(uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Uoe(t){return t.dataKey}function zoe(t,s){return ee.isValidElement(t)?ee.cloneElement(t,s):typeof t=="function"?ee.createElement(t,s):ee.createElement(joe,s)}var mr=function(t){function s(){return _oe(this,s),Foe(this,s,arguments)}return Voe(s,t),$oe(s,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,m=a.filterNull,h=a.isAnimationActive,x=a.offset,f=a.payload,p=a.payloadUniqBy,g=a.position,y=a.reverseDirection,b=a.useTranslate3d,j=a.viewBox,w=a.wrapperStyle,N=f??[];m&&N.length&&(N=X_(f.filter(function(O){return O.value!=null&&(O.hide!==!0||n.props.includeHidden)}),p,Uoe));var S=N.length>0;return ee.createElement(Moe,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:h,active:i,coordinate:u,hasPayload:S,offset:x,position:g,reverseDirection:y,useTranslate3d:b,viewBox:j,wrapperStyle:w},zoe(d,L2(L2({},this.props),{},{payload:N})))}}])}(v.PureComponent);yN(mr,"displayName","Tooltip");yN(mr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!so.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Hoe=Oa,Koe=function(){return Hoe.Date.now()},Goe=Koe,Woe=/\s/;function Qoe(t){for(var s=t.length;s--&&Woe.test(t.charAt(s)););return s}var Yoe=Qoe,Xoe=Yoe,Zoe=/^\s+/;function Joe(t){return t&&t.slice(0,Xoe(t)+1).replace(Zoe,"")}var ece=Joe,tce=ece,B2=Xi,sce=zc,V2=NaN,rce=/^[-+]0x[0-9a-f]+$/i,nce=/^0b[01]+$/i,ace=/^0o[0-7]+$/i,ice=parseInt;function lce(t){if(typeof t=="number")return t;if(sce(t))return V2;if(B2(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=B2(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=tce(t);var r=nce.test(t);return r||ace.test(t)?ice(t.slice(2),r?2:8):rce.test(t)?V2:+t}var cI=lce,oce=Xi,Jg=Goe,q2=cI,cce="Expected a function",dce=Math.max,uce=Math.min;function mce(t,s,r){var n,a,i,l,o,c,d=0,u=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError(cce);s=q2(s)||0,oce(r)&&(u=!!r.leading,m="maxWait"in r,i=m?dce(q2(r.maxWait)||0,s):i,h="trailing"in r?!!r.trailing:h);function x(S){var O=n,P=a;return n=a=void 0,d=S,l=t.apply(P,O),l}function f(S){return d=S,o=setTimeout(y,s),u?x(S):l}function p(S){var O=S-c,P=S-d,k=s-O;return m?uce(k,i-P):k}function g(S){var O=S-c,P=S-d;return c===void 0||O>=s||O<0||m&&P>=i}function y(){var S=Jg();if(g(S))return b(S);o=setTimeout(y,p(S))}function b(S){return o=void 0,h&&n?x(S):(n=a=void 0,l)}function j(){o!==void 0&&clearTimeout(o),d=0,n=c=a=o=void 0}function w(){return o===void 0?l:b(Jg())}function N(){var S=Jg(),O=g(S);if(n=arguments,a=this,c=S,O){if(o===void 0)return f(c);if(m)return clearTimeout(o),o=setTimeout(y,s),x(c)}return o===void 0&&(o=setTimeout(y,s)),l}return N.cancel=j,N.flush=w,N}var hce=mce,xce=hce,pce=Xi,fce="Expected a function";function gce(t,s,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(fce);return pce(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),xce(t,s,{leading:n,maxWait:s,trailing:a})}var jce=gce;const dI=ys(jce);function xu(t){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xu(t)}function U2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zm(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?U2(Object(r),!0).forEach(function(n){vce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vce(t,s,r){return s=yce(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function yce(t){var s=bce(t,"string");return xu(s)=="symbol"?s:s+""}function bce(t,s){if(xu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Nce(t,s){return kce(t)||Cce(t,s)||Sce(t,s)||wce()}function wce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sce(t,s){if(t){if(typeof t=="string")return z2(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z2(t,s)}}function z2(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Cce(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function kce(t){if(Array.isArray(t))return t}var da=v.forwardRef(function(t,s){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,l=i===void 0?"100%":i,o=t.height,c=o===void 0?"100%":o,d=t.minWidth,u=d===void 0?0:d,m=t.minHeight,h=t.maxHeight,x=t.children,f=t.debounce,p=f===void 0?0:f,g=t.id,y=t.className,b=t.onResize,j=t.style,w=j===void 0?{}:j,N=v.useRef(null),S=v.useRef();S.current=b,v.useImperativeHandle(s,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var O=v.useState({containerWidth:a.width,containerHeight:a.height}),P=Nce(O,2),k=P[0],R=P[1],F=v.useCallback(function(W,E){R(function(B){var G=Math.round(W),J=Math.round(E);return B.containerWidth===G&&B.containerHeight===J?B:{containerWidth:G,containerHeight:J}})},[]);v.useEffect(function(){var W=function(V){var z,le=V[0].contentRect,Ce=le.width,H=le.height;F(Ce,H),(z=S.current)===null||z===void 0||z.call(S,Ce,H)};p>0&&(W=dI(W,p,{trailing:!0,leading:!1}));var E=new ResizeObserver(W),B=N.current.getBoundingClientRect(),G=B.width,J=B.height;return F(G,J),E.observe(N.current),function(){E.disconnect()}},[F,p]);var I=v.useMemo(function(){var W=k.containerWidth,E=k.containerHeight;if(W<0||E<0)return null;Yn(vl(l)||vl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),Yn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=vl(l)?W:l,G=vl(c)?E:c;r&&r>0&&(B?G=B/r:G&&(B=G*r),h&&G>h&&(G=h)),Yn(B>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,G,l,c,u,m,r);var J=!Array.isArray(x)&&Qa(x.type).endsWith("Chart");return ee.Children.map(x,function(C){return ee.isValidElement(C)?v.cloneElement(C,Zm({width:B,height:G},J?{style:Zm({height:"100%",width:"100%",maxHeight:G,maxWidth:B},C.props.style)}:{})):C})},[r,x,c,h,m,u,k,l]);return ee.createElement("div",{id:g?"".concat(g):void 0,className:$t("recharts-responsive-container",y),style:Zm(Zm({},w),{},{width:l,height:c,minWidth:u,minHeight:m,maxHeight:h}),ref:N},I)}),Ul=function(s){return null};Ul.displayName="Cell";function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},pu(t)}function H2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jv(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?H2(Object(r),!0).forEach(function(n){Pce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pce(t,s,r){return s=Ace(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Ace(t){var s=Tce(t,"string");return pu(s)=="symbol"?s:s+""}function Tce(t,s){if(pu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var xo={widthCache:{},cacheCount:0},Dce=2e3,Oce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},K2="recharts_measurement_span";function Ece(t){var s=Jv({},t);return Object.keys(s).forEach(function(r){s[r]||delete s[r]}),s}var Rd=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s==null||so.isSsr)return{width:0,height:0};var n=Ece(r),a=JSON.stringify({text:s,copyStyle:n});if(xo.widthCache[a])return xo.widthCache[a];try{var i=document.getElementById(K2);i||(i=document.createElement("span"),i.setAttribute("id",K2),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=Jv(Jv({},Oce),n);Object.assign(i.style,l),i.textContent="".concat(s);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return xo.widthCache[a]=c,++xo.cacheCount>Dce&&(xo.cacheCount=0,xo.widthCache={}),c}catch{return{width:0,height:0}}},Mce=function(s){return{top:s.top+window.scrollY-document.documentElement.clientTop,left:s.left+window.scrollX-document.documentElement.clientLeft}};function fu(t){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},fu(t)}function px(t,s){return $ce(t)||Ice(t,s)||_ce(t,s)||Rce()}function Rce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ce(t,s){if(t){if(typeof t=="string")return G2(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G2(t,s)}}function G2(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Ice(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function $ce(t){if(Array.isArray(t))return t}function Fce(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function W2(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bce(n.key),n)}}function Lce(t,s,r){return s&&W2(t.prototype,s),r&&W2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bce(t){var s=Vce(t,"string");return fu(s)=="symbol"?s:s+""}function Vce(t,s){if(fu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Q2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Y2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qce=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Uce=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zce=Object.keys(uI),So="NaN";function Hce(t,s){return t*uI[s]}var Jm=function(){function t(s,r){Fce(this,t),this.num=s,this.unit=r,this.num=s,this.unit=r,Number.isNaN(s)&&(this.unit=""),r!==""&&!qce.test(r)&&(this.num=NaN,this.unit=""),zce.includes(r)&&(this.num=Hce(s,r),this.unit="px")}return Lce(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Uce.exec(r))!==null&&n!==void 0?n:[],i=px(a,3),l=i[1],o=i[2];return new t(parseFloat(l),o??"")}}])}();function mI(t){if(t.includes(So))return So;for(var s=t;s.includes("*")||s.includes("/");){var r,n=(r=Q2.exec(s))!==null&&r!==void 0?r:[],a=px(n,4),i=a[1],l=a[2],o=a[3],c=Jm.parse(i??""),d=Jm.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return So;s=s.replace(Q2,u.toString())}for(;s.includes("+")||/.-\d+(?:\.\d+)?/.test(s);){var m,h=(m=Y2.exec(s))!==null&&m!==void 0?m:[],x=px(h,4),f=x[1],p=x[2],g=x[3],y=Jm.parse(f??""),b=Jm.parse(g??""),j=p==="+"?y.add(b):y.subtract(b);if(j.isNaN())return So;s=s.replace(Y2,j.toString())}return s}var X2=/\(([^()]*)\)/;function Kce(t){for(var s=t;s.includes("(");){var r=X2.exec(s),n=px(r,2),a=n[1];s=s.replace(X2,mI(a))}return s}function Gce(t){var s=t.replace(/\s+/g,"");return s=Kce(s),s=mI(s),s}function Wce(t){try{return Gce(t)}catch{return So}}function ej(t){var s=Wce(t.slice(5,-1));return s===So?"":s}var Qce=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Yce=["dx","dy","angle","className","breakAll"];function ey(){return ey=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ey.apply(this,arguments)}function Z2(t,s){if(t==null)return{};var r=Xce(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xce(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function J2(t,s){return tde(t)||ede(t,s)||Jce(t,s)||Zce()}function Zce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jce(t,s){if(t){if(typeof t=="string")return eC(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eC(t,s)}}function eC(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function ede(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function tde(t){if(Array.isArray(t))return t}var hI=/[ \f\n\r\t\v\u2028\u2029]+/,xI=function(s){var r=s.children,n=s.breakAll,a=s.style;try{var i=[];Rt(r)||(n?i=r.toString().split(""):i=r.toString().split(hI));var l=i.map(function(c){return{word:c,width:Rd(c,a).width}}),o=n?0:Rd("Â ",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},sde=function(s,r,n,a,i){var l=s.maxLines,o=s.children,c=s.style,d=s.breakAll,u=ze(l),m=o,h=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(G,J){var C=J.word,V=J.width,z=G[G.length-1];if(z&&(a==null||i||z.width+V+n<Number(a)))z.words.push(C),z.width+=V+n;else{var le={words:[C],width:V};G.push(le)}return G},[])},x=h(r),f=function(B){return B.reduce(function(G,J){return G.width>J.width?G:J})};if(!u)return x;for(var p="â€¦",g=function(B){var G=m.slice(0,B),J=xI({breakAll:d,style:c,children:G+p}).wordsWithComputedWidth,C=h(J),V=C.length>l||f(C).width>Number(a);return[V,C]},y=0,b=m.length-1,j=0,w;y<=b&&j<=m.length-1;){var N=Math.floor((y+b)/2),S=N-1,O=g(S),P=J2(O,2),k=P[0],R=P[1],F=g(N),I=J2(F,1),W=I[0];if(!k&&!W&&(y=N+1),k&&W&&(b=N-1),!k&&W){w=R;break}j++}return w||x},tC=function(s){var r=Rt(s)?[]:s.toString().split(hI);return[{words:r}]},rde=function(s){var r=s.width,n=s.scaleToFit,a=s.children,i=s.style,l=s.breakAll,o=s.maxLines;if((r||n)&&!so.isSsr){var c,d,u=xI({breakAll:l,children:a,style:i});if(u){var m=u.wordsWithComputedWidth,h=u.spaceWidth;c=m,d=h}else return tC(a);return sde({breakAll:l,children:a,maxLines:o,style:i},c,d,r,n)}return tC(a)},sC="#808080",zl=function(s){var r=s.x,n=r===void 0?0:r,a=s.y,i=a===void 0?0:a,l=s.lineHeight,o=l===void 0?"1em":l,c=s.capHeight,d=c===void 0?"0.71em":c,u=s.scaleToFit,m=u===void 0?!1:u,h=s.textAnchor,x=h===void 0?"start":h,f=s.verticalAnchor,p=f===void 0?"end":f,g=s.fill,y=g===void 0?sC:g,b=Z2(s,Qce),j=v.useMemo(function(){return rde({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:m,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,m,b.style,b.width]),w=b.dx,N=b.dy,S=b.angle,O=b.className,P=b.breakAll,k=Z2(b,Yce);if(!pr(n)||!pr(i))return null;var R=n+(ze(w)?w:0),F=i+(ze(N)?N:0),I;switch(p){case"start":I=ej("calc(".concat(d,")"));break;case"middle":I=ej("calc(".concat((j.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:I=ej("calc(".concat(j.length-1," * -").concat(o,")"));break}var W=[];if(m){var E=j[0].width,B=b.width;W.push("scale(".concat((ze(B)?B/E:1)/E,")"))}return S&&W.push("rotate(".concat(S,", ").concat(R,", ").concat(F,")")),W.length&&(k.transform=W.join(" ")),ee.createElement("text",ey({},jt(k,!0),{x:R,y:F,className:$t("recharts-text",O),textAnchor:x,fill:y.includes("url")?sC:y}),j.map(function(G,J){var C=G.words.join(P?"":" ");return ee.createElement("tspan",{x:R,dy:J===0?I:o,key:"".concat(C,"-").concat(J)},C)}))};function Ii(t,s){return t==null||s==null?NaN:t<s?-1:t>s?1:t>=s?0:NaN}function nde(t,s){return t==null||s==null?NaN:s<t?-1:s>t?1:s>=t?0:NaN}function bN(t){let s,r,n;t.length!==2?(s=Ii,r=(o,c)=>Ii(t(o),c),n=(o,c)=>t(o)-c):(s=t===Ii||t===nde?t:ade,r=t,n=t);function a(o,c,d=0,u=o.length){if(d<u){if(s(c,c)!==0)return u;do{const m=d+u>>>1;r(o[m],c)<0?d=m+1:u=m}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(s(c,c)!==0)return u;do{const m=d+u>>>1;r(o[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function l(o,c,d=0,u=o.length){const m=a(o,c,d,u-1);return m>d&&n(o[m-1],c)>-n(o[m],c)?m-1:m}return{left:a,center:l,right:i}}function ade(){return 0}function pI(t){return t===null?NaN:+t}function*ide(t,s){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const lde=bN(Ii),Pm=lde.right;bN(pI).center;class rC extends Map{constructor(s,r=dde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),s!=null)for(const[n,a]of s)this.set(n,a)}get(s){return super.get(nC(this,s))}has(s){return super.has(nC(this,s))}set(s,r){return super.set(ode(this,s),r)}delete(s){return super.delete(cde(this,s))}}function nC({_intern:t,_key:s},r){const n=s(r);return t.has(n)?t.get(n):r}function ode({_intern:t,_key:s},r){const n=s(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function cde({_intern:t,_key:s},r){const n=s(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function dde(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ude(t=Ii){if(t===Ii)return fI;if(typeof t!="function")throw new TypeError("compare is not a function");return(s,r)=>{const n=t(s,r);return n||n===0?n:(t(r,r)===0)-(t(s,s)===0)}}function fI(t,s){return(t==null||!(t>=t))-(s==null||!(s>=s))||(t<s?-1:t>s?1:0)}const mde=Math.sqrt(50),hde=Math.sqrt(10),xde=Math.sqrt(2);function fx(t,s,r){const n=(s-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),l=i>=mde?10:i>=hde?5:i>=xde?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(t*d),c=Math.round(s*d),o/d<t&&++o,c/d>s&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(t/d),c=Math.round(s/d),o*d<t&&++o,c*d>s&&--c),c<o&&.5<=r&&r<2?fx(t,s,r*2):[o,c,d]}function ty(t,s,r){if(s=+s,t=+t,r=+r,!(r>0))return[];if(t===s)return[t];const n=s<t,[a,i,l]=n?fx(s,t,r):fx(t,s,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function sy(t,s,r){return s=+s,t=+t,r=+r,fx(t,s,r)[2]}function ry(t,s,r){s=+s,t=+t,r=+r;const n=s<t,a=n?sy(s,t,r):sy(t,s,r);return(n?-1:1)*(a<0?1/-a:a)}function aC(t,s){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function iC(t,s){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function gI(t,s,r=0,n=1/0,a){if(s=Math.floor(s),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=s&&s<=n))return t;for(a=a===void 0?fI:ude(a);n>r;){if(n-r>600){const c=n-r+1,d=s-r+1,u=Math.log(c),m=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),x=Math.max(r,Math.floor(s-d*m/c+h)),f=Math.min(n,Math.floor(s+(c-d)*m/c+h));gI(t,s,x,f,a)}const i=t[s];let l=r,o=n;for(hd(t,r,s),a(t[n],i)>0&&hd(t,r,n);l<o;){for(hd(t,l,o),++l,--o;a(t[l],i)<0;)++l;for(;a(t[o],i)>0;)--o}a(t[r],i)===0?hd(t,r,o):(++o,hd(t,o,n)),o<=s&&(r=o+1),s<=o&&(n=o-1)}return t}function hd(t,s,r){const n=t[s];t[s]=t[r],t[r]=n}function pde(t,s,r){if(t=Float64Array.from(ide(t)),!(!(n=t.length)||isNaN(s=+s))){if(s<=0||n<2)return iC(t);if(s>=1)return aC(t);var n,a=(n-1)*s,i=Math.floor(a),l=aC(gI(t,i).subarray(0,i+1)),o=iC(t.subarray(i+1));return l+(o-l)*(a-i)}}function fde(t,s,r=pI){if(!(!(n=t.length)||isNaN(s=+s))){if(s<=0||n<2)return+r(t[0],0,t);if(s>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*s,i=Math.floor(a),l=+r(t[i],i,t),o=+r(t[i+1],i+1,t);return l+(o-l)*(a-i)}}function gde(t,s,r){t=+t,s=+s,r=(a=arguments.length)<2?(s=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((s-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function _n(t,s){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(s).domain(t);break}return this}function ui(t,s){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const ny=Symbol("implicit");function NN(){var t=new rC,s=[],r=[],n=ny;function a(i){let l=t.get(i);if(l===void 0){if(n!==ny)return n;t.set(i,l=s.push(i)-1)}return r[l%r.length]}return a.domain=function(i){if(!arguments.length)return s.slice();s=[],t=new rC;for(const l of i)t.has(l)||t.set(l,s.push(l)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return NN(s,r).unknown(n)},_n.apply(a,arguments),a}function gu(){var t=NN().unknown(void 0),s=t.domain,r=t.range,n=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete t.unknown;function m(){var h=s().length,x=a<n,f=x?a:n,p=x?n:a;i=(p-f)/Math.max(1,h-c+d*2),o&&(i=Math.floor(i)),f+=(p-f-i*(h-c))*u,l=i*(1-c),o&&(f=Math.round(f),l=Math.round(l));var g=gde(h).map(function(y){return f+i*y});return r(x?g.reverse():g)}return t.domain=function(h){return arguments.length?(s(h),m()):s()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,m()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(h){return arguments.length?(o=!!h,m()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),m()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),m()):c},t.paddingOuter=function(h){return arguments.length?(d=+h,m()):d},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),m()):u},t.copy=function(){return gu(s(),[n,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},_n.apply(m(),arguments)}function jI(t){var s=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jI(s())},t}function _d(){return jI(gu.apply(null,arguments).paddingInner(1))}function wN(t,s,r){t.prototype=s.prototype=r,r.constructor=t}function vI(t,s){var r=Object.create(t.prototype);for(var n in s)r[n]=s[n];return r}function Am(){}var ju=.7,gx=1/ju,Uo="\\s*([+-]?\\d+)\\s*",vu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jde=/^#([0-9a-f]{3,8})$/,vde=new RegExp(`^rgb\\(${Uo},${Uo},${Uo}\\)$`),yde=new RegExp(`^rgb\\(${ga},${ga},${ga}\\)$`),bde=new RegExp(`^rgba\\(${Uo},${Uo},${Uo},${vu}\\)$`),Nde=new RegExp(`^rgba\\(${ga},${ga},${ga},${vu}\\)$`),wde=new RegExp(`^hsl\\(${vu},${ga},${ga}\\)$`),Sde=new RegExp(`^hsla\\(${vu},${ga},${ga},${vu}\\)$`),lC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wN(Am,yu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oC,formatHex:oC,formatHex8:Cde,formatHsl:kde,formatRgb:cC,toString:cC});function oC(){return this.rgb().formatHex()}function Cde(){return this.rgb().formatHex8()}function kde(){return yI(this).formatHsl()}function cC(){return this.rgb().formatRgb()}function yu(t){var s,r;return t=(t+"").trim().toLowerCase(),(s=jde.exec(t))?(r=s[1].length,s=parseInt(s[1],16),r===6?dC(s):r===3?new zr(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):r===8?eh(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):r===4?eh(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=vde.exec(t))?new zr(s[1],s[2],s[3],1):(s=yde.exec(t))?new zr(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=bde.exec(t))?eh(s[1],s[2],s[3],s[4]):(s=Nde.exec(t))?eh(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=wde.exec(t))?hC(s[1],s[2]/100,s[3]/100,1):(s=Sde.exec(t))?hC(s[1],s[2]/100,s[3]/100,s[4]):lC.hasOwnProperty(t)?dC(lC[t]):t==="transparent"?new zr(NaN,NaN,NaN,0):null}function dC(t){return new zr(t>>16&255,t>>8&255,t&255,1)}function eh(t,s,r,n){return n<=0&&(t=s=r=NaN),new zr(t,s,r,n)}function Pde(t){return t instanceof Am||(t=yu(t)),t?(t=t.rgb(),new zr(t.r,t.g,t.b,t.opacity)):new zr}function ay(t,s,r,n){return arguments.length===1?Pde(t):new zr(t,s,r,n??1)}function zr(t,s,r,n){this.r=+t,this.g=+s,this.b=+r,this.opacity=+n}wN(zr,ay,vI(Am,{brighter(t){return t=t==null?gx:Math.pow(gx,t),new zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ju:Math.pow(ju,t),new zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zr(Pl(this.r),Pl(this.g),Pl(this.b),jx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uC,formatHex:uC,formatHex8:Ade,formatRgb:mC,toString:mC}));function uC(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}`}function Ade(){return`#${yl(this.r)}${yl(this.g)}${yl(this.b)}${yl((isNaN(this.opacity)?1:this.opacity)*255)}`}function mC(){const t=jx(this.opacity);return`${t===1?"rgb(":"rgba("}${Pl(this.r)}, ${Pl(this.g)}, ${Pl(this.b)}${t===1?")":`, ${t})`}`}function jx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Pl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yl(t){return t=Pl(t),(t<16?"0":"")+t.toString(16)}function hC(t,s,r,n){return n<=0?t=s=r=NaN:r<=0||r>=1?t=s=NaN:s<=0&&(t=NaN),new Un(t,s,r,n)}function yI(t){if(t instanceof Un)return new Un(t.h,t.s,t.l,t.opacity);if(t instanceof Am||(t=yu(t)),!t)return new Un;if(t instanceof Un)return t;t=t.rgb();var s=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(s,r,n),i=Math.max(s,r,n),l=NaN,o=i-a,c=(i+a)/2;return o?(s===i?l=(r-n)/o+(r<n)*6:r===i?l=(n-s)/o+2:l=(s-r)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new Un(l,o,c,t.opacity)}function Tde(t,s,r,n){return arguments.length===1?yI(t):new Un(t,s,r,n??1)}function Un(t,s,r,n){this.h=+t,this.s=+s,this.l=+r,this.opacity=+n}wN(Un,Tde,vI(Am,{brighter(t){return t=t==null?gx:Math.pow(gx,t),new Un(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ju:Math.pow(ju,t),new Un(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,s=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*s,a=2*r-n;return new zr(tj(t>=240?t-240:t+120,a,n),tj(t,a,n),tj(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Un(xC(this.h),th(this.s),th(this.l),jx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jx(this.opacity);return`${t===1?"hsl(":"hsla("}${xC(this.h)}, ${th(this.s)*100}%, ${th(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xC(t){return t=(t||0)%360,t<0?t+360:t}function th(t){return Math.max(0,Math.min(1,t||0))}function tj(t,s,r){return(t<60?s+(r-s)*t/60:t<180?r:t<240?s+(r-s)*(240-t)/60:s)*255}const SN=t=>()=>t;function Dde(t,s){return function(r){return t+r*s}}function Ode(t,s,r){return t=Math.pow(t,r),s=Math.pow(s,r)-t,r=1/r,function(n){return Math.pow(t+n*s,r)}}function Ede(t){return(t=+t)==1?bI:function(s,r){return r-s?Ode(s,r,t):SN(isNaN(s)?r:s)}}function bI(t,s){var r=s-t;return r?Dde(t,r):SN(isNaN(t)?s:t)}const pC=function t(s){var r=Ede(s);function n(a,i){var l=r((a=ay(a)).r,(i=ay(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),d=bI(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=t,n}(1);function Mde(t,s){s||(s=[]);var r=t?Math.min(s.length,t.length):0,n=s.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+s[a]*i;return n}}function Rde(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _de(t,s){var r=s?s.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)a[l]=Jc(t[l],s[l]);for(;l<r;++l)i[l]=s[l];return function(o){for(l=0;l<n;++l)i[l]=a[l](o);return i}}function Ide(t,s){var r=new Date;return t=+t,s=+s,function(n){return r.setTime(t*(1-n)+s*n),r}}function vx(t,s){return t=+t,s=+s,function(r){return t*(1-r)+s*r}}function $de(t,s){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(s===null||typeof s!="object")&&(s={});for(a in s)a in t?r[a]=Jc(t[a],s[a]):n[a]=s[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var iy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sj=new RegExp(iy.source,"g");function Fde(t){return function(){return t}}function Lde(t){return function(s){return t(s)+""}}function Bde(t,s){var r=iy.lastIndex=sj.lastIndex=0,n,a,i,l=-1,o=[],c=[];for(t=t+"",s=s+"";(n=iy.exec(t))&&(a=sj.exec(s));)(i=a.index)>r&&(i=s.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(n=n[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:vx(n,a)})),r=sj.lastIndex;return r<s.length&&(i=s.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?Lde(c[0].x):Fde(s):(s=c.length,function(d){for(var u=0,m;u<s;++u)o[(m=c[u]).i]=m.x(d);return o.join("")})}function Jc(t,s){var r=typeof s,n;return s==null||r==="boolean"?SN(s):(r==="number"?vx:r==="string"?(n=yu(s))?(s=n,pC):Bde:s instanceof yu?pC:s instanceof Date?Ide:Rde(s)?Mde:Array.isArray(s)?_de:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?$de:vx)(t,s)}function CN(t,s){return t=+t,s=+s,function(r){return Math.round(t*(1-r)+s*r)}}function Vde(t,s){s===void 0&&(s=t,t=Jc);for(var r=0,n=s.length-1,a=s[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=s[++r]);return function(l){var o=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[o](l-o)}}function qde(t){return function(){return t}}function yx(t){return+t}var fC=[0,1];function Vr(t){return t}function ly(t,s){return(s-=t=+t)?function(r){return(r-t)/s}:qde(isNaN(s)?NaN:.5)}function Ude(t,s){var r;return t>s&&(r=t,t=s,s=r),function(n){return Math.max(t,Math.min(s,n))}}function zde(t,s,r){var n=t[0],a=t[1],i=s[0],l=s[1];return a<n?(n=ly(a,n),i=r(l,i)):(n=ly(n,a),i=r(i,l)),function(o){return i(n(o))}}function Hde(t,s,r){var n=Math.min(t.length,s.length)-1,a=new Array(n),i=new Array(n),l=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),s=s.slice().reverse());++l<n;)a[l]=ly(t[l],t[l+1]),i[l]=r(s[l],s[l+1]);return function(o){var c=Pm(t,o,1,n)-1;return i[c](a[c](o))}}function Tm(t,s){return s.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jf(){var t=fC,s=fC,r=Jc,n,a,i,l=Vr,o,c,d;function u(){var h=Math.min(t.length,s.length);return l!==Vr&&(l=Ude(t[0],t[h-1])),o=h>2?Hde:zde,c=d=null,m}function m(h){return h==null||isNaN(h=+h)?i:(c||(c=o(t.map(n),s,r)))(n(l(h)))}return m.invert=function(h){return l(a((d||(d=o(s,t.map(n),vx)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,yx),u()):t.slice()},m.range=function(h){return arguments.length?(s=Array.from(h),u()):s.slice()},m.rangeRound=function(h){return s=Array.from(h),r=CN,u()},m.clamp=function(h){return arguments.length?(l=h?!0:Vr,u()):l!==Vr},m.interpolate=function(h){return arguments.length?(r=h,u()):r},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,x){return n=h,a=x,u()}}function kN(){return jf()(Vr,Vr)}function Kde(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bx(t,s){if((r=(t=s?t.toExponential(s-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function mc(t){return t=bx(Math.abs(t)),t?t[1]:NaN}function Gde(t,s){return function(r,n){for(var a=r.length,i=[],l=0,o=t[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=t[l=(l+1)%t.length];return i.reverse().join(s)}}function Wde(t){return function(s){return s.replace(/[0-9]/g,function(r){return t[+r]})}}var Qde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bu(t){if(!(s=Qde.exec(t)))throw new Error("invalid format: "+t);var s;return new PN({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}bu.prototype=PN.prototype;function PN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}PN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yde(t){e:for(var s=t.length,r=1,n=-1,a;r<s;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var NI;function Xde(t,s){var r=bx(t,s);if(!r)return t+"";var n=r[0],a=r[1],i=a-(NI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+bx(t,Math.max(0,s+i-1))[0]}function gC(t,s){var r=bx(t,s);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const jC={"%":(t,s)=>(t*100).toFixed(s),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kde,e:(t,s)=>t.toExponential(s),f:(t,s)=>t.toFixed(s),g:(t,s)=>t.toPrecision(s),o:t=>Math.round(t).toString(8),p:(t,s)=>gC(t*100,s),r:gC,s:Xde,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vC(t){return t}var yC=Array.prototype.map,bC=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Zde(t){var s=t.grouping===void 0||t.thousands===void 0?vC:Gde(yC.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?vC:Wde(yC.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"âˆ’":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(m){m=bu(m);var h=m.fill,x=m.align,f=m.sign,p=m.symbol,g=m.zero,y=m.width,b=m.comma,j=m.precision,w=m.trim,N=m.type;N==="n"?(b=!0,N="g"):jC[N]||(j===void 0&&(j=12),w=!0,N="g"),(g||h==="0"&&x==="=")&&(g=!0,h="0",x="=");var S=p==="$"?r:p==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",O=p==="$"?n:/[%p]/.test(N)?l:"",P=jC[N],k=/[defgprs%]/.test(N);j=j===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function R(F){var I=S,W=O,E,B,G;if(N==="c")W=P(F)+W,F="";else{F=+F;var J=F<0||1/F<0;if(F=isNaN(F)?c:P(Math.abs(F),j),w&&(F=Yde(F)),J&&+F==0&&f!=="+"&&(J=!1),I=(J?f==="("?f:o:f==="-"||f==="("?"":f)+I,W=(N==="s"?bC[8+NI/3]:"")+W+(J&&f==="("?")":""),k){for(E=-1,B=F.length;++E<B;)if(G=F.charCodeAt(E),48>G||G>57){W=(G===46?a+F.slice(E+1):F.slice(E))+W,F=F.slice(0,E);break}}}b&&!g&&(F=s(F,1/0));var C=I.length+F.length+W.length,V=C<y?new Array(y-C+1).join(h):"";switch(b&&g&&(F=s(V+F,V.length?y-W.length:1/0),V=""),x){case"<":F=I+F+W+V;break;case"=":F=I+V+F+W;break;case"^":F=V.slice(0,C=V.length>>1)+I+F+W+V.slice(C);break;default:F=V+I+F+W;break}return i(F)}return R.toString=function(){return m+""},R}function u(m,h){var x=d((m=bu(m),m.type="f",m)),f=Math.max(-8,Math.min(8,Math.floor(mc(h)/3)))*3,p=Math.pow(10,-f),g=bC[8+f/3];return function(y){return x(p*y)+g}}return{format:d,formatPrefix:u}}var sh,AN,wI;Jde({thousands:",",grouping:[3],currency:["$",""]});function Jde(t){return sh=Zde(t),AN=sh.format,wI=sh.formatPrefix,sh}function eue(t){return Math.max(0,-mc(Math.abs(t)))}function tue(t,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mc(s)/3)))*3-mc(Math.abs(t)))}function sue(t,s){return t=Math.abs(t),s=Math.abs(s)-t,Math.max(0,mc(s)-mc(t))+1}function SI(t,s,r,n){var a=ry(t,s,r),i;switch(n=bu(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(s));return n.precision==null&&!isNaN(i=tue(a,l))&&(n.precision=i),wI(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=sue(a,Math.max(Math.abs(t),Math.abs(s))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=eue(a))&&(n.precision=i-(n.type==="%")*2);break}}return AN(n)}function Zi(t){var s=t.domain;return t.ticks=function(r){var n=s();return ty(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=s();return SI(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=s(),a=0,i=n.length-1,l=n[a],o=n[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=sy(l,o,r),d===c)return n[a]=l,n[i]=o,s(n);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function Nx(){var t=kN();return t.copy=function(){return Tm(t,Nx())},_n.apply(t,arguments),Zi(t)}function CI(t){var s;function r(n){return n==null||isNaN(n=+n)?s:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,yx),r):t.slice()},r.unknown=function(n){return arguments.length?(s=n,r):s},r.copy=function(){return CI(t).unknown(s)},t=arguments.length?Array.from(t,yx):[0,1],Zi(r)}function kI(t,s){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],l;return i<a&&(l=r,r=n,n=l,l=a,a=i,i=l),t[r]=s.floor(a),t[n]=s.ceil(i),t}function NC(t){return Math.log(t)}function wC(t){return Math.exp(t)}function rue(t){return-Math.log(-t)}function nue(t){return-Math.exp(-t)}function aue(t){return isFinite(t)?+("1e"+t):t<0?0:t}function iue(t){return t===10?aue:t===Math.E?Math.exp:s=>Math.pow(t,s)}function lue(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),s=>Math.log(s)/t)}function SC(t){return(s,r)=>-t(-s,r)}function TN(t){const s=t(NC,wC),r=s.domain;let n=10,a,i;function l(){return a=lue(n),i=iue(n),r()[0]<0?(a=SC(a),i=SC(i),t(rue,nue)):t(NC,wC),s}return s.base=function(o){return arguments.length?(n=+o,l()):n},s.domain=function(o){return arguments.length?(r(o),l()):r()},s.ticks=o=>{const c=r();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let h=a(d),x=a(u),f,p;const g=o==null?10:+o;let y=[];if(!(n%1)&&x-h<g){if(h=Math.floor(h),x=Math.ceil(x),d>0){for(;h<=x;++h)for(f=1;f<n;++f)if(p=h<0?f/i(-h):f*i(h),!(p<d)){if(p>u)break;y.push(p)}}else for(;h<=x;++h)for(f=n-1;f>=1;--f)if(p=h>0?f/i(-h):f*i(h),!(p<d)){if(p>u)break;y.push(p)}y.length*2<g&&(y=ty(d,u,g))}else y=ty(h,x,Math.min(x-h,g)).map(i);return m?y.reverse():y},s.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=bu(c)).precision==null&&(c.trim=!0),c=AN(c)),o===1/0)return c;const d=Math.max(1,n*o/s.ticks().length);return u=>{let m=u/i(Math.round(a(u)));return m*n<n-.5&&(m*=n),m<=d?c(u):""}},s.nice=()=>r(kI(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),s}function PI(){const t=TN(jf()).domain([1,10]);return t.copy=()=>Tm(t,PI()).base(t.base()),_n.apply(t,arguments),t}function CC(t){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/t))}}function kC(t){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*t}}function DN(t){var s=1,r=t(CC(s),kC(s));return r.constant=function(n){return arguments.length?t(CC(s=+n),kC(s)):s},Zi(r)}function AI(){var t=DN(jf());return t.copy=function(){return Tm(t,AI()).constant(t.constant())},_n.apply(t,arguments)}function PC(t){return function(s){return s<0?-Math.pow(-s,t):Math.pow(s,t)}}function oue(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function cue(t){return t<0?-t*t:t*t}function ON(t){var s=t(Vr,Vr),r=1;function n(){return r===1?t(Vr,Vr):r===.5?t(oue,cue):t(PC(r),PC(1/r))}return s.exponent=function(a){return arguments.length?(r=+a,n()):r},Zi(s)}function EN(){var t=ON(jf());return t.copy=function(){return Tm(t,EN()).exponent(t.exponent())},_n.apply(t,arguments),t}function due(){return EN.apply(null,arguments).exponent(.5)}function AC(t){return Math.sign(t)*t*t}function uue(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function TI(){var t=kN(),s=[0,1],r=!1,n;function a(i){var l=uue(t(i));return isNaN(l)?n:r?Math.round(l):l}return a.invert=function(i){return t.invert(AC(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((s=Array.from(i,yx)).map(AC)),a):s.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return TI(t.domain(),s).round(r).clamp(t.clamp()).unknown(n)},_n.apply(a,arguments),Zi(a)}function DI(){var t=[],s=[],r=[],n;function a(){var l=0,o=Math.max(1,s.length);for(r=new Array(o-1);++l<o;)r[l-1]=fde(t,l/o);return i}function i(l){return l==null||isNaN(l=+l)?n:s[Pm(r,l)]}return i.invertExtent=function(l){var o=s.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let o of l)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ii),a()},i.range=function(l){return arguments.length?(s=Array.from(l),a()):s.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return DI().domain(t).range(s).unknown(n)},_n.apply(i,arguments)}function OI(){var t=0,s=1,r=1,n=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[Pm(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*s-(c-r)*t)/(r+1);return l}return l.domain=function(c){return arguments.length?([t,s]=c,t=+t,s=+s,o()):[t,s]},l.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],s]:[n[d-1],n[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return n.slice()},l.copy=function(){return OI().domain([t,s]).range(a).unknown(i)},_n.apply(Zi(l),arguments)}function EI(){var t=[.5],s=[0,1],r,n=1;function a(i){return i!=null&&i<=i?s[Pm(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,s.length-1),a):t.slice()},a.range=function(i){return arguments.length?(s=Array.from(i),n=Math.min(t.length,s.length-1),a):s.slice()},a.invertExtent=function(i){var l=s.indexOf(i);return[t[l-1],t[l]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return EI().domain(t).range(s).unknown(r)},_n.apply(a,arguments)}const rj=new Date,nj=new Date;function gr(t,s,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),s(i,1),t(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),s(i,o),t(i);while(d<i&&i<l);return c},a.filter=i=>gr(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;s(l,-1),!i(l););else for(;--o>=0;)for(;s(l,1),!i(l););}),r&&(a.count=(i,l)=>(rj.setTime(+i),nj.setTime(+l),t(rj),t(nj),Math.floor(r(rj,nj))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?l=>n(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const wx=gr(()=>{},(t,s)=>{t.setTime(+t+s)},(t,s)=>s-t);wx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gr(s=>{s.setTime(Math.floor(s/t)*t)},(s,r)=>{s.setTime(+s+r*t)},(s,r)=>(r-s)/t):wx);wx.range;const Ua=1e3,wn=Ua*60,za=wn*60,ai=za*24,MN=ai*7,TC=ai*30,aj=ai*365,bl=gr(t=>{t.setTime(t-t.getMilliseconds())},(t,s)=>{t.setTime(+t+s*Ua)},(t,s)=>(s-t)/Ua,t=>t.getUTCSeconds());bl.range;const RN=gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ua)},(t,s)=>{t.setTime(+t+s*wn)},(t,s)=>(s-t)/wn,t=>t.getMinutes());RN.range;const _N=gr(t=>{t.setUTCSeconds(0,0)},(t,s)=>{t.setTime(+t+s*wn)},(t,s)=>(s-t)/wn,t=>t.getUTCMinutes());_N.range;const IN=gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ua-t.getMinutes()*wn)},(t,s)=>{t.setTime(+t+s*za)},(t,s)=>(s-t)/za,t=>t.getHours());IN.range;const $N=gr(t=>{t.setUTCMinutes(0,0,0)},(t,s)=>{t.setTime(+t+s*za)},(t,s)=>(s-t)/za,t=>t.getUTCHours());$N.range;const Dm=gr(t=>t.setHours(0,0,0,0),(t,s)=>t.setDate(t.getDate()+s),(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*wn)/ai,t=>t.getDate()-1);Dm.range;const vf=gr(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/ai,t=>t.getUTCDate()-1);vf.range;const MI=gr(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/ai,t=>Math.floor(t/ai));MI.range;function ro(t){return gr(s=>{s.setDate(s.getDate()-(s.getDay()+7-t)%7),s.setHours(0,0,0,0)},(s,r)=>{s.setDate(s.getDate()+r*7)},(s,r)=>(r-s-(r.getTimezoneOffset()-s.getTimezoneOffset())*wn)/MN)}const yf=ro(0),Sx=ro(1),mue=ro(2),hue=ro(3),hc=ro(4),xue=ro(5),pue=ro(6);yf.range;Sx.range;mue.range;hue.range;hc.range;xue.range;pue.range;function no(t){return gr(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-t)%7),s.setUTCHours(0,0,0,0)},(s,r)=>{s.setUTCDate(s.getUTCDate()+r*7)},(s,r)=>(r-s)/MN)}const bf=no(0),Cx=no(1),fue=no(2),gue=no(3),xc=no(4),jue=no(5),vue=no(6);bf.range;Cx.range;fue.range;gue.range;xc.range;jue.range;vue.range;const FN=gr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,s)=>{t.setMonth(t.getMonth()+s)},(t,s)=>s.getMonth()-t.getMonth()+(s.getFullYear()-t.getFullYear())*12,t=>t.getMonth());FN.range;const LN=gr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCMonth(t.getUTCMonth()+s)},(t,s)=>s.getUTCMonth()-t.getUTCMonth()+(s.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());LN.range;const ii=gr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s)},(t,s)=>s.getFullYear()-t.getFullYear(),t=>t.getFullYear());ii.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gr(s=>{s.setFullYear(Math.floor(s.getFullYear()/t)*t),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,r)=>{s.setFullYear(s.getFullYear()+r*t)});ii.range;const li=gr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s)},(t,s)=>s.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());li.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gr(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/t)*t),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,r)=>{s.setUTCFullYear(s.getUTCFullYear()+r*t)});li.range;function RI(t,s,r,n,a,i){const l=[[bl,1,Ua],[bl,5,5*Ua],[bl,15,15*Ua],[bl,30,30*Ua],[i,1,wn],[i,5,5*wn],[i,15,15*wn],[i,30,30*wn],[a,1,za],[a,3,3*za],[a,6,6*za],[a,12,12*za],[n,1,ai],[n,2,2*ai],[r,1,MN],[s,1,TC],[s,3,3*TC],[t,1,aj]];function o(d,u,m){const h=u<d;h&&([d,u]=[u,d]);const x=m&&typeof m.range=="function"?m:c(d,u,m),f=x?x.range(d,+u+1):[];return h?f.reverse():f}function c(d,u,m){const h=Math.abs(u-d)/m,x=bN(([,,g])=>g).right(l,h);if(x===l.length)return t.every(ry(d/aj,u/aj,m));if(x===0)return wx.every(Math.max(ry(d,u,m),1));const[f,p]=l[h/l[x-1][2]<l[x][2]/h?x-1:x];return f.every(p)}return[o,c]}const[yue,bue]=RI(li,LN,bf,MI,$N,_N),[Nue,wue]=RI(ii,FN,yf,Dm,IN,RN);function ij(t){if(0<=t.y&&t.y<100){var s=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return s.setFullYear(t.y),s}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lj(t){if(0<=t.y&&t.y<100){var s=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return s.setUTCFullYear(t.y),s}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function xd(t,s,r){return{y:t,m:s,d:r,H:0,M:0,S:0,L:0}}function Sue(t){var s=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,l=t.shortDays,o=t.months,c=t.shortMonths,d=pd(a),u=fd(a),m=pd(i),h=fd(i),x=pd(l),f=fd(l),p=pd(o),g=fd(o),y=pd(c),b=fd(c),j={a:J,A:C,b:V,B:z,c:null,d:_C,e:_C,f:Gue,g:rme,G:ame,H:zue,I:Hue,j:Kue,L:_I,m:Wue,M:Que,p:le,q:Ce,Q:FC,s:LC,S:Yue,u:Xue,U:Zue,V:Jue,w:eme,W:tme,x:null,X:null,y:sme,Y:nme,Z:ime,"%":$C},w={a:H,A:_,b:se,B:te,c:null,d:IC,e:IC,f:dme,g:yme,G:Nme,H:lme,I:ome,j:cme,L:$I,m:ume,M:mme,p:we,q:ve,Q:FC,s:LC,S:hme,u:xme,U:pme,V:fme,w:gme,W:jme,x:null,X:null,y:vme,Y:bme,Z:wme,"%":$C},N={a:R,A:F,b:I,B:W,c:E,d:MC,e:MC,f:Bue,g:EC,G:OC,H:RC,I:RC,j:Iue,L:Lue,m:_ue,M:$ue,p:k,q:Rue,Q:que,s:Uue,S:Fue,u:Tue,U:Due,V:Oue,w:Aue,W:Eue,x:B,X:G,y:EC,Y:OC,Z:Mue,"%":Vue};j.x=S(r,j),j.X=S(n,j),j.c=S(s,j),w.x=S(r,w),w.X=S(n,w),w.c=S(s,w);function S(X,ce){return function(Y){var he=[],Fe=-1,Ve=0,rt=X.length,gt,Vt,xs;for(Y instanceof Date||(Y=new Date(+Y));++Fe<rt;)X.charCodeAt(Fe)===37&&(he.push(X.slice(Ve,Fe)),(Vt=DC[gt=X.charAt(++Fe)])!=null?gt=X.charAt(++Fe):Vt=gt==="e"?" ":"0",(xs=ce[gt])&&(gt=xs(Y,Vt)),he.push(gt),Ve=Fe+1);return he.push(X.slice(Ve,Fe)),he.join("")}}function O(X,ce){return function(Y){var he=xd(1900,void 0,1),Fe=P(he,X,Y+="",0),Ve,rt;if(Fe!=Y.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(ce&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Ve=lj(xd(he.y,0,1)),rt=Ve.getUTCDay(),Ve=rt>4||rt===0?Cx.ceil(Ve):Cx(Ve),Ve=vf.offset(Ve,(he.V-1)*7),he.y=Ve.getUTCFullYear(),he.m=Ve.getUTCMonth(),he.d=Ve.getUTCDate()+(he.w+6)%7):(Ve=ij(xd(he.y,0,1)),rt=Ve.getDay(),Ve=rt>4||rt===0?Sx.ceil(Ve):Sx(Ve),Ve=Dm.offset(Ve,(he.V-1)*7),he.y=Ve.getFullYear(),he.m=Ve.getMonth(),he.d=Ve.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),rt="Z"in he?lj(xd(he.y,0,1)).getUTCDay():ij(xd(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(rt+5)%7:he.w+he.U*7-(rt+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,lj(he)):ij(he)}}function P(X,ce,Y,he){for(var Fe=0,Ve=ce.length,rt=Y.length,gt,Vt;Fe<Ve;){if(he>=rt)return-1;if(gt=ce.charCodeAt(Fe++),gt===37){if(gt=ce.charAt(Fe++),Vt=N[gt in DC?ce.charAt(Fe++):gt],!Vt||(he=Vt(X,Y,he))<0)return-1}else if(gt!=Y.charCodeAt(he++))return-1}return he}function k(X,ce,Y){var he=d.exec(ce.slice(Y));return he?(X.p=u.get(he[0].toLowerCase()),Y+he[0].length):-1}function R(X,ce,Y){var he=x.exec(ce.slice(Y));return he?(X.w=f.get(he[0].toLowerCase()),Y+he[0].length):-1}function F(X,ce,Y){var he=m.exec(ce.slice(Y));return he?(X.w=h.get(he[0].toLowerCase()),Y+he[0].length):-1}function I(X,ce,Y){var he=y.exec(ce.slice(Y));return he?(X.m=b.get(he[0].toLowerCase()),Y+he[0].length):-1}function W(X,ce,Y){var he=p.exec(ce.slice(Y));return he?(X.m=g.get(he[0].toLowerCase()),Y+he[0].length):-1}function E(X,ce,Y){return P(X,s,ce,Y)}function B(X,ce,Y){return P(X,r,ce,Y)}function G(X,ce,Y){return P(X,n,ce,Y)}function J(X){return l[X.getDay()]}function C(X){return i[X.getDay()]}function V(X){return c[X.getMonth()]}function z(X){return o[X.getMonth()]}function le(X){return a[+(X.getHours()>=12)]}function Ce(X){return 1+~~(X.getMonth()/3)}function H(X){return l[X.getUTCDay()]}function _(X){return i[X.getUTCDay()]}function se(X){return c[X.getUTCMonth()]}function te(X){return o[X.getUTCMonth()]}function we(X){return a[+(X.getUTCHours()>=12)]}function ve(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ce=S(X+="",j);return ce.toString=function(){return X},ce},parse:function(X){var ce=O(X+="",!1);return ce.toString=function(){return X},ce},utcFormat:function(X){var ce=S(X+="",w);return ce.toString=function(){return X},ce},utcParse:function(X){var ce=O(X+="",!0);return ce.toString=function(){return X},ce}}}var DC={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,Cue=/^%/,kue=/[\\^$*+?|[\]().{}]/g;function ls(t,s,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(s)+a:a)}function Pue(t){return t.replace(kue,"\\$&")}function pd(t){return new RegExp("^(?:"+t.map(Pue).join("|")+")","i")}function fd(t){return new Map(t.map((s,r)=>[s.toLowerCase(),r]))}function Aue(t,s,r){var n=wr.exec(s.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Tue(t,s,r){var n=wr.exec(s.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Due(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Oue(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Eue(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function OC(t,s,r){var n=wr.exec(s.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function EC(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Mue(t,s,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Rue(t,s,r){var n=wr.exec(s.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function _ue(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function MC(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Iue(t,s,r){var n=wr.exec(s.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function RC(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function $ue(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Fue(t,s,r){var n=wr.exec(s.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Lue(t,s,r){var n=wr.exec(s.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Bue(t,s,r){var n=wr.exec(s.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Vue(t,s,r){var n=Cue.exec(s.slice(r,r+1));return n?r+n[0].length:-1}function que(t,s,r){var n=wr.exec(s.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Uue(t,s,r){var n=wr.exec(s.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function _C(t,s){return ls(t.getDate(),s,2)}function zue(t,s){return ls(t.getHours(),s,2)}function Hue(t,s){return ls(t.getHours()%12||12,s,2)}function Kue(t,s){return ls(1+Dm.count(ii(t),t),s,3)}function _I(t,s){return ls(t.getMilliseconds(),s,3)}function Gue(t,s){return _I(t,s)+"000"}function Wue(t,s){return ls(t.getMonth()+1,s,2)}function Que(t,s){return ls(t.getMinutes(),s,2)}function Yue(t,s){return ls(t.getSeconds(),s,2)}function Xue(t){var s=t.getDay();return s===0?7:s}function Zue(t,s){return ls(yf.count(ii(t)-1,t),s,2)}function II(t){var s=t.getDay();return s>=4||s===0?hc(t):hc.ceil(t)}function Jue(t,s){return t=II(t),ls(hc.count(ii(t),t)+(ii(t).getDay()===4),s,2)}function eme(t){return t.getDay()}function tme(t,s){return ls(Sx.count(ii(t)-1,t),s,2)}function sme(t,s){return ls(t.getFullYear()%100,s,2)}function rme(t,s){return t=II(t),ls(t.getFullYear()%100,s,2)}function nme(t,s){return ls(t.getFullYear()%1e4,s,4)}function ame(t,s){var r=t.getDay();return t=r>=4||r===0?hc(t):hc.ceil(t),ls(t.getFullYear()%1e4,s,4)}function ime(t){var s=t.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+ls(s/60|0,"0",2)+ls(s%60,"0",2)}function IC(t,s){return ls(t.getUTCDate(),s,2)}function lme(t,s){return ls(t.getUTCHours(),s,2)}function ome(t,s){return ls(t.getUTCHours()%12||12,s,2)}function cme(t,s){return ls(1+vf.count(li(t),t),s,3)}function $I(t,s){return ls(t.getUTCMilliseconds(),s,3)}function dme(t,s){return $I(t,s)+"000"}function ume(t,s){return ls(t.getUTCMonth()+1,s,2)}function mme(t,s){return ls(t.getUTCMinutes(),s,2)}function hme(t,s){return ls(t.getUTCSeconds(),s,2)}function xme(t){var s=t.getUTCDay();return s===0?7:s}function pme(t,s){return ls(bf.count(li(t)-1,t),s,2)}function FI(t){var s=t.getUTCDay();return s>=4||s===0?xc(t):xc.ceil(t)}function fme(t,s){return t=FI(t),ls(xc.count(li(t),t)+(li(t).getUTCDay()===4),s,2)}function gme(t){return t.getUTCDay()}function jme(t,s){return ls(Cx.count(li(t)-1,t),s,2)}function vme(t,s){return ls(t.getUTCFullYear()%100,s,2)}function yme(t,s){return t=FI(t),ls(t.getUTCFullYear()%100,s,2)}function bme(t,s){return ls(t.getUTCFullYear()%1e4,s,4)}function Nme(t,s){var r=t.getUTCDay();return t=r>=4||r===0?xc(t):xc.ceil(t),ls(t.getUTCFullYear()%1e4,s,4)}function wme(){return"+0000"}function $C(){return"%"}function FC(t){return+t}function LC(t){return Math.floor(+t/1e3)}var po,LI,BI;Sme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sme(t){return po=Sue(t),LI=po.format,po.parse,BI=po.utcFormat,po.utcParse,po}function Cme(t){return new Date(t)}function kme(t){return t instanceof Date?+t:+new Date(+t)}function BN(t,s,r,n,a,i,l,o,c,d){var u=kN(),m=u.invert,h=u.domain,x=d(".%L"),f=d(":%S"),p=d("%I:%M"),g=d("%I %p"),y=d("%a %d"),b=d("%b %d"),j=d("%B"),w=d("%Y");function N(S){return(c(S)<S?x:o(S)<S?f:l(S)<S?p:i(S)<S?g:n(S)<S?a(S)<S?y:b:r(S)<S?j:w)(S)}return u.invert=function(S){return new Date(m(S))},u.domain=function(S){return arguments.length?h(Array.from(S,kme)):h().map(Cme)},u.ticks=function(S){var O=h();return t(O[0],O[O.length-1],S??10)},u.tickFormat=function(S,O){return O==null?N:d(O)},u.nice=function(S){var O=h();return(!S||typeof S.range!="function")&&(S=s(O[0],O[O.length-1],S??10)),S?h(kI(O,S)):u},u.copy=function(){return Tm(u,BN(t,s,r,n,a,i,l,o,c,d))},u}function Pme(){return _n.apply(BN(Nue,wue,ii,FN,yf,Dm,IN,RN,bl,LI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ame(){return _n.apply(BN(yue,bue,li,LN,bf,vf,$N,_N,bl,BI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Nf(){var t=0,s=1,r,n,a,i,l=Vr,o=!1,c;function d(m){return m==null||isNaN(m=+m)?c:l(a===0?.5:(m=(i(m)-r)*a,o?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,s]=m,r=i(t=+t),n=i(s=+s),a=r===n?0:1/(n-r),d):[t,s]},d.clamp=function(m){return arguments.length?(o=!!m,d):o},d.interpolator=function(m){return arguments.length?(l=m,d):l};function u(m){return function(h){var x,f;return arguments.length?([x,f]=h,l=m(x,f),d):[l(0),l(1)]}}return d.range=u(Jc),d.rangeRound=u(CN),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return i=m,r=m(t),n=m(s),a=r===n?0:1/(n-r),d}}function Ji(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function VI(){var t=Zi(Nf()(Vr));return t.copy=function(){return Ji(t,VI())},ui.apply(t,arguments)}function qI(){var t=TN(Nf()).domain([1,10]);return t.copy=function(){return Ji(t,qI()).base(t.base())},ui.apply(t,arguments)}function UI(){var t=DN(Nf());return t.copy=function(){return Ji(t,UI()).constant(t.constant())},ui.apply(t,arguments)}function VN(){var t=ON(Nf());return t.copy=function(){return Ji(t,VN()).exponent(t.exponent())},ui.apply(t,arguments)}function Tme(){return VN.apply(null,arguments).exponent(.5)}function zI(){var t=[],s=Vr;function r(n){if(n!=null&&!isNaN(n=+n))return s((Pm(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ii),r},r.interpolator=function(n){return arguments.length?(s=n,r):s},r.range=function(){return t.map((n,a)=>s(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>pde(t,i/n))},r.copy=function(){return zI(s).domain(t)},ui.apply(r,arguments)}function wf(){var t=0,s=.5,r=1,n=1,a,i,l,o,c,d=Vr,u,m=!1,h;function x(p){return isNaN(p=+p)?h:(p=.5+((p=+u(p))-i)*(n*p<n*i?o:c),d(m?Math.max(0,Math.min(1,p)):p))}x.domain=function(p){return arguments.length?([t,s,r]=p,a=u(t=+t),i=u(s=+s),l=u(r=+r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,x):[t,s,r]},x.clamp=function(p){return arguments.length?(m=!!p,x):m},x.interpolator=function(p){return arguments.length?(d=p,x):d};function f(p){return function(g){var y,b,j;return arguments.length?([y,b,j]=g,d=Vde(p,[y,b,j]),x):[d(0),d(.5),d(1)]}}return x.range=f(Jc),x.rangeRound=f(CN),x.unknown=function(p){return arguments.length?(h=p,x):h},function(p){return u=p,a=p(t),i=p(s),l=p(r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,x}}function HI(){var t=Zi(wf()(Vr));return t.copy=function(){return Ji(t,HI())},ui.apply(t,arguments)}function KI(){var t=TN(wf()).domain([.1,1,10]);return t.copy=function(){return Ji(t,KI()).base(t.base())},ui.apply(t,arguments)}function GI(){var t=DN(wf());return t.copy=function(){return Ji(t,GI()).constant(t.constant())},ui.apply(t,arguments)}function qN(){var t=ON(wf());return t.copy=function(){return Ji(t,qN()).exponent(t.exponent())},ui.apply(t,arguments)}function Dme(){return qN.apply(null,arguments).exponent(.5)}const BC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gu,scaleDiverging:HI,scaleDivergingLog:KI,scaleDivergingPow:qN,scaleDivergingSqrt:Dme,scaleDivergingSymlog:GI,scaleIdentity:CI,scaleImplicit:ny,scaleLinear:Nx,scaleLog:PI,scaleOrdinal:NN,scalePoint:_d,scalePow:EN,scaleQuantile:DI,scaleQuantize:OI,scaleRadial:TI,scaleSequential:VI,scaleSequentialLog:qI,scaleSequentialPow:VN,scaleSequentialQuantile:zI,scaleSequentialSqrt:Tme,scaleSequentialSymlog:UI,scaleSqrt:due,scaleSymlog:AI,scaleThreshold:EI,scaleTime:Pme,scaleUtc:Ame,tickFormat:SI},Symbol.toStringTag,{value:"Module"}));var Ome=zc;function Eme(t,s,r){for(var n=-1,a=t.length;++n<a;){var i=t[n],l=s(i);if(l!=null&&(o===void 0?l===l&&!Ome(l):r(l,o)))var o=l,c=i}return c}var Sf=Eme;function Mme(t,s){return t>s}var WI=Mme,Rme=Sf,_me=WI,Ime=Zc;function $me(t){return t&&t.length?Rme(t,Ime,_me):void 0}var Fme=$me;const Cf=ys(Fme);function Lme(t,s){return t<s}var QI=Lme,Bme=Sf,Vme=QI,qme=Zc;function Ume(t){return t&&t.length?Bme(t,qme,Vme):void 0}var zme=Ume;const kf=ys(zme);var Hme=sN,Kme=Ea,Gme=rI,Wme=Kr;function Qme(t,s){var r=Wme(t)?Hme:Gme;return r(t,Kme(s))}var Yme=Qme,Xme=tI,Zme=Yme;function Jme(t,s){return Xme(Zme(t,s),1)}var ehe=Jme;const the=ys(ehe);var she=gN;function rhe(t,s){return she(t,s)}var nhe=rhe;const Om=ys(nhe);var ed=1e9,ahe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zN,Fs=!0,An="[DecimalError] ",Al=An+"Invalid argument: ",UN=An+"Exponent out of range: ",td=Math.floor,ul=Math.pow,ihe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,sn,jr=1e7,Ds=7,YI=9007199254740991,kx=td(YI/Ds),it={};it.absoluteValue=it.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};it.comparedTo=it.cmp=function(t){var s,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,s=0,r=n<a?n:a;s<r;++s)if(i.d[s]!==t.d[s])return i.d[s]>t.d[s]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};it.decimalPlaces=it.dp=function(){var t=this,s=t.d.length-1,r=(s-t.e)*Ds;if(s=t.d[s],s)for(;s%10==0;s/=10)r--;return r<0?0:r};it.dividedBy=it.div=function(t){return Ya(this,new this.constructor(t))};it.dividedToIntegerBy=it.idiv=function(t){var s=this,r=s.constructor;return Ns(Ya(s,new r(t),0,1),r.precision)};it.equals=it.eq=function(t){return!this.cmp(t)};it.exponent=function(){return lr(this)};it.greaterThan=it.gt=function(t){return this.cmp(t)>0};it.greaterThanOrEqualTo=it.gte=function(t){return this.cmp(t)>=0};it.isInteger=it.isint=function(){return this.e>this.d.length-2};it.isNegative=it.isneg=function(){return this.s<0};it.isPositive=it.ispos=function(){return this.s>0};it.isZero=function(){return this.s===0};it.lessThan=it.lt=function(t){return this.cmp(t)<0};it.lessThanOrEqualTo=it.lte=function(t){return this.cmp(t)<1};it.logarithm=it.log=function(t){var s,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(sn))throw Error(An+"NaN");if(r.s<1)throw Error(An+(r.s?"NaN":"-Infinity"));return r.eq(sn)?new n(0):(Fs=!1,s=Ya(Nu(r,i),Nu(t,i),i),Fs=!0,Ns(s,a))};it.minus=it.sub=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?JI(s,t):XI(s,(t.s=-t.s,t))};it.modulo=it.mod=function(t){var s,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(An+"NaN");return r.s?(Fs=!1,s=Ya(r,t,0,1).times(t),Fs=!0,r.minus(s)):Ns(new n(r),a)};it.naturalExponential=it.exp=function(){return ZI(this)};it.naturalLogarithm=it.ln=function(){return Nu(this)};it.negated=it.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};it.plus=it.add=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?XI(s,t):JI(s,(t.s=-t.s,t))};it.precision=it.sd=function(t){var s,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Al+t);if(s=lr(a)+1,n=a.d.length-1,r=n*Ds+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&s>r?s:r};it.squareRoot=it.sqrt=function(){var t,s,r,n,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(An+"NaN")}for(t=lr(o),Fs=!1,a=Math.sqrt(+o),a==0||a==1/0?(s=ua(o.d),(s.length+t)%2==0&&(s+="0"),a=Math.sqrt(s),t=td((t+1)/2)-(t<0||t%2),a==1/0?s="5e"+t:(s=a.toExponential(),s=s.slice(0,s.indexOf("e")+1)+t),n=new c(s)):n=new c(a.toString()),r=c.precision,a=l=r+3;;)if(i=n,n=i.plus(Ya(o,i,l+2)).times(.5),ua(i.d).slice(0,l)===(s=ua(n.d)).slice(0,l)){if(s=s.slice(l-3,l+1),a==l&&s=="4999"){if(Ns(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(s!="9999")break;l+=4}return Fs=!0,Ns(n,r)};it.times=it.mul=function(t){var s,r,n,a,i,l,o,c,d,u=this,m=u.constructor,h=u.d,x=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,r=u.e+t.e,c=h.length,d=x.length,c<d&&(i=h,h=x,x=i,l=c,c=d,d=l),i=[],l=c+d,n=l;n--;)i.push(0);for(n=d;--n>=0;){for(s=0,a=c+n;a>n;)o=i[a]+x[n]*h[a-n-1]+s,i[a--]=o%jr|0,s=o/jr|0;i[a]=(i[a]+s)%jr|0}for(;!i[--l];)i.pop();return s?++r:i.shift(),t.d=i,t.e=r,Fs?Ns(t,m.precision):t};it.toDecimalPlaces=it.todp=function(t,s){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Pa(t,0,ed),s===void 0?s=n.rounding:Pa(s,0,8),Ns(r,t+lr(r)+1,s))};it.toExponential=function(t,s){var r,n=this,a=n.constructor;return t===void 0?r=Hl(n,!0):(Pa(t,0,ed),s===void 0?s=a.rounding:Pa(s,0,8),n=Ns(new a(n),t+1,s),r=Hl(n,!0,t+1)),r};it.toFixed=function(t,s){var r,n,a=this,i=a.constructor;return t===void 0?Hl(a):(Pa(t,0,ed),s===void 0?s=i.rounding:Pa(s,0,8),n=Ns(new i(a),t+lr(a)+1,s),r=Hl(n.abs(),!1,t+lr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};it.toInteger=it.toint=function(){var t=this,s=t.constructor;return Ns(new s(t),lr(t)+1,s.rounding)};it.toNumber=function(){return+this};it.toPower=it.pow=function(t){var s,r,n,a,i,l,o=this,c=o.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(sn);if(o=new c(o),!o.s){if(t.s<1)throw Error(An+"Infinity");return o}if(o.eq(sn))return o;if(n=c.precision,t.eq(sn))return Ns(o,n);if(s=t.e,r=t.d.length-1,l=s>=r,i=o.s,l){if((r=u<0?-u:u)<=YI){for(a=new c(sn),s=Math.ceil(n/Ds+4),Fs=!1;r%2&&(a=a.times(o),qC(a.d,s)),r=td(r/2),r!==0;)o=o.times(o),qC(o.d,s);return Fs=!0,t.s<0?new c(sn).div(a):Ns(a,n)}}else if(i<0)throw Error(An+"NaN");return i=i<0&&t.d[Math.max(s,r)]&1?-1:1,o.s=1,Fs=!1,a=t.times(Nu(o,n+d)),Fs=!0,a=ZI(a),a.s=i,a};it.toPrecision=function(t,s){var r,n,a=this,i=a.constructor;return t===void 0?(r=lr(a),n=Hl(a,r<=i.toExpNeg||r>=i.toExpPos)):(Pa(t,1,ed),s===void 0?s=i.rounding:Pa(s,0,8),a=Ns(new i(a),t,s),r=lr(a),n=Hl(a,t<=r||r<=i.toExpNeg,t)),n};it.toSignificantDigits=it.tosd=function(t,s){var r=this,n=r.constructor;return t===void 0?(t=n.precision,s=n.rounding):(Pa(t,1,ed),s===void 0?s=n.rounding:Pa(s,0,8)),Ns(new n(r),t,s)};it.toString=it.valueOf=it.val=it.toJSON=it[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,s=lr(t),r=t.constructor;return Hl(t,s<=r.toExpNeg||s>=r.toExpPos)};function XI(t,s){var r,n,a,i,l,o,c,d,u=t.constructor,m=u.precision;if(!t.s||!s.s)return s.s||(s=new u(t)),Fs?Ns(s,m):s;if(c=t.d,d=s.d,l=t.e,a=s.e,c=c.slice(),i=l-a,i){for(i<0?(n=c,i=-i,o=d.length):(n=d,a=l,o=c.length),l=Math.ceil(m/Ds),o=l>o?l+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/jr|0,c[i]%=jr;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return s.d=c,s.e=a,Fs?Ns(s,m):s}function Pa(t,s,r){if(t!==~~t||t<s||t>r)throw Error(Al+t)}function ua(t){var s,r,n,a=t.length-1,i="",l=t[0];if(a>0){for(i+=l,s=1;s<a;s++)n=t[s]+"",r=Ds-n.length,r&&(i+=bi(r)),i+=n;l=t[s],n=l+"",r=Ds-n.length,r&&(i+=bi(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Ya=function(){function t(n,a){var i,l=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+l,n[o]=i%jr|0,l=i/jr|0;return l&&n.unshift(l),n}function s(n,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var l=0;i--;)n[i]-=l,l=n[i]<a[i]?1:0,n[i]=l*jr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,l){var o,c,d,u,m,h,x,f,p,g,y,b,j,w,N,S,O,P,k=n.constructor,R=n.s==a.s?1:-1,F=n.d,I=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(An+"Division by zero");for(c=n.e-a.e,O=I.length,N=F.length,x=new k(R),f=x.d=[],d=0;I[d]==(F[d]||0);)++d;if(I[d]>(F[d]||0)&&--c,i==null?b=i=k.precision:l?b=i+(lr(n)-lr(a))+1:b=i,b<0)return new k(0);if(b=b/Ds+2|0,d=0,O==1)for(u=0,I=I[0],b++;(d<N||u)&&b--;d++)j=u*jr+(F[d]||0),f[d]=j/I|0,u=j%I|0;else{for(u=jr/(I[0]+1)|0,u>1&&(I=t(I,u),F=t(F,u),O=I.length,N=F.length),w=O,p=F.slice(0,O),g=p.length;g<O;)p[g++]=0;P=I.slice(),P.unshift(0),S=I[0],I[1]>=jr/2&&++S;do u=0,o=s(I,p,O,g),o<0?(y=p[0],O!=g&&(y=y*jr+(p[1]||0)),u=y/S|0,u>1?(u>=jr&&(u=jr-1),m=t(I,u),h=m.length,g=p.length,o=s(m,p,h,g),o==1&&(u--,r(m,O<h?P:I,h))):(u==0&&(o=u=1),m=I.slice()),h=m.length,h<g&&m.unshift(0),r(p,m,g),o==-1&&(g=p.length,o=s(I,p,O,g),o<1&&(u++,r(p,O<g?P:I,g))),g=p.length):o===0&&(u++,p=[0]),f[d++]=u,o&&p[0]?p[g++]=F[w]||0:(p=[F[w]],g=1);while((w++<N||p[0]!==void 0)&&b--)}return f[0]||f.shift(),x.e=c,Ns(x,l?i+lr(x)+1:i)}}();function ZI(t,s){var r,n,a,i,l,o,c=0,d=0,u=t.constructor,m=u.precision;if(lr(t)>16)throw Error(UN+lr(t));if(!t.s)return new u(sn);for(Fs=!1,o=m,l=new u(.03125);t.abs().gte(.1);)t=t.times(l),d+=5;for(n=Math.log(ul(2,d))/Math.LN10*2+5|0,o+=n,r=a=i=new u(sn),u.precision=o;;){if(a=Ns(a.times(t),o),r=r.times(++c),l=i.plus(Ya(a,r,o)),ua(l.d).slice(0,o)===ua(i.d).slice(0,o)){for(;d--;)i=Ns(i.times(i),o);return u.precision=m,s==null?(Fs=!0,Ns(i,m)):i}i=l}}function lr(t){for(var s=t.e*Ds,r=t.d[0];r>=10;r/=10)s++;return s}function oj(t,s,r){if(s>t.LN10.sd())throw Fs=!0,r&&(t.precision=r),Error(An+"LN10 precision limit exceeded");return Ns(new t(t.LN10),s)}function bi(t){for(var s="";t--;)s+="0";return s}function Nu(t,s){var r,n,a,i,l,o,c,d,u,m=1,h=10,x=t,f=x.d,p=x.constructor,g=p.precision;if(x.s<1)throw Error(An+(x.s?"NaN":"-Infinity"));if(x.eq(sn))return new p(0);if(s==null?(Fs=!1,d=g):d=s,x.eq(10))return s==null&&(Fs=!0),oj(p,d);if(d+=h,p.precision=d,r=ua(f),n=r.charAt(0),i=lr(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(t),r=ua(x.d),n=r.charAt(0),m++;i=lr(x),n>1?(x=new p("0."+r),i++):x=new p(n+"."+r.slice(1))}else return c=oj(p,d+2,g).times(i+""),x=Nu(new p(n+"."+r.slice(1)),d-h).plus(c),p.precision=g,s==null?(Fs=!0,Ns(x,g)):x;for(o=l=x=Ya(x.minus(sn),x.plus(sn),d),u=Ns(x.times(x),d),a=3;;){if(l=Ns(l.times(u),d),c=o.plus(Ya(l,new p(a),d)),ua(c.d).slice(0,d)===ua(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(oj(p,d+2,g).times(i+""))),o=Ya(o,new p(m),d),p.precision=g,s==null?(Fs=!0,Ns(o,g)):o;o=c,a+=2}}function VC(t,s){var r,n,a;for((r=s.indexOf("."))>-1&&(s=s.replace(".","")),(n=s.search(/e/i))>0?(r<0&&(r=n),r+=+s.slice(n+1),s=s.substring(0,n)):r<0&&(r=s.length),n=0;s.charCodeAt(n)===48;)++n;for(a=s.length;s.charCodeAt(a-1)===48;)--a;if(s=s.slice(n,a),s){if(a-=n,r=r-n-1,t.e=td(r/Ds),t.d=[],n=(r+1)%Ds,r<0&&(n+=Ds),n<a){for(n&&t.d.push(+s.slice(0,n)),a-=Ds;n<a;)t.d.push(+s.slice(n,n+=Ds));s=s.slice(n),n=Ds-s.length}else n-=a;for(;n--;)s+="0";if(t.d.push(+s),Fs&&(t.e>kx||t.e<-kx))throw Error(UN+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ns(t,s,r){var n,a,i,l,o,c,d,u,m=t.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(n=s-l,n<0)n+=Ds,a=s,d=m[u=0];else{if(u=Math.ceil((n+1)/Ds),i=m.length,u>=i)return t;for(d=i=m[u],l=1;i>=10;i/=10)l++;n%=Ds,a=n-Ds+l}if(r!==void 0&&(i=ul(10,l-a-1),o=d/i%10|0,c=s<0||m[u+1]!==void 0||d%i,c=r<4?(o||c)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?d/ul(10,l-a):0:m[u-1])%10&1||r==(t.s<0?8:7))),s<1||!m[0])return c?(i=lr(t),m.length=1,s=s-i-1,m[0]=ul(10,(Ds-s%Ds)%Ds),t.e=td(-s/Ds)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=u,i=1,u--):(m.length=u+1,i=ul(10,Ds-n),m[u]=a>0?(d/ul(10,l-a)%ul(10,a)|0)*i:0),c)for(;;)if(u==0){(m[0]+=i)==jr&&(m[0]=1,++t.e);break}else{if(m[u]+=i,m[u]!=jr)break;m[u--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Fs&&(t.e>kx||t.e<-kx))throw Error(UN+lr(t));return t}function JI(t,s){var r,n,a,i,l,o,c,d,u,m,h=t.constructor,x=h.precision;if(!t.s||!s.s)return s.s?s.s=-s.s:s=new h(t),Fs?Ns(s,x):s;if(c=t.d,m=s.d,n=s.e,d=t.e,c=c.slice(),l=d-n,l){for(u=l<0,u?(r=c,l=-l,o=m.length):(r=m,n=d,o=c.length),a=Math.max(Math.ceil(x/Ds),o)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=m.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=m[a]){u=c[a]<m[a];break}l=0}for(u&&(r=c,c=m,m=r,s.s=-s.s),o=c.length,a=m.length-o;a>0;--a)c[o++]=0;for(a=m.length;a>l;){if(c[--a]<m[a]){for(i=a;i&&c[--i]===0;)c[i]=jr-1;--c[i],c[a]+=jr}c[a]-=m[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(s.d=c,s.e=n,Fs?Ns(s,x):s):new h(0)}function Hl(t,s,r){var n,a=lr(t),i=ua(t.d),l=i.length;return s?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+bi(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+bi(-a-1)+i,r&&(n=r-l)>0&&(i+=bi(n))):a>=l?(i+=bi(a+1-l),r&&(n=r-a-1)>0&&(i=i+"."+bi(n))):((n=a+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(i+="."),i+=bi(n))),t.s<0?"-"+i:i}function qC(t,s){if(t.length>s)return t.length=s,!0}function e6(t){var s,r,n;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Al+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return VC(l,i.toString())}else if(typeof i!="string")throw Error(Al+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,ihe.test(i))VC(l,i);else throw Error(Al+i)}if(a.prototype=it,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e6,a.config=a.set=lhe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<n.length;)t.hasOwnProperty(r=n[s++])||(t[r]=this[r]);return a.config(t),a}function lhe(t){if(!t||typeof t!="object")throw Error(An+"Object expected");var s,r,n,a=["precision",1,ed,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(s=0;s<a.length;s+=3)if((n=t[r=a[s]])!==void 0)if(td(n)===n&&n>=a[s+1]&&n<=a[s+2])this[r]=n;else throw Error(Al+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Al+r+": "+n);return this}var zN=e6(ahe);sn=new zN(1);const gs=zN;function ohe(t){return mhe(t)||uhe(t)||dhe(t)||che()}function che(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dhe(t,s){if(t){if(typeof t=="string")return oy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oy(t,s)}}function uhe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function mhe(t){if(Array.isArray(t))return oy(t)}function oy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var hhe=function(s){return s},t6={},s6=function(s){return s===t6},UC=function(s){return function r(){return arguments.length===0||arguments.length===1&&s6(arguments.length<=0?void 0:arguments[0])?r:s.apply(void 0,arguments)}},xhe=function t(s,r){return s===1?r:UC(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==t6}).length;return l>=s?r.apply(void 0,a):t(s-l,UC(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(m){return s6(m)?c.shift():m});return r.apply(void 0,ohe(u).concat(c))}))})},Pf=function(s){return xhe(s.length,s)},cy=function(s,r){for(var n=[],a=s;a<r;++a)n[a-s]=a;return n},phe=Pf(function(t,s){return Array.isArray(s)?s.map(t):Object.keys(s).map(function(r){return s[r]}).map(t)}),fhe=function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];if(!r.length)return hhe;var a=r.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},dy=function(s){return Array.isArray(s)?s.reverse():s.split("").reverse.join("")},r6=function(s){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r&&i.every(function(o,c){return o===r[c]})||(r=i,n=s.apply(void 0,i)),n}};function ghe(t){var s;return t===0?s=1:s=Math.floor(new gs(t).abs().log(10).toNumber())+1,s}function jhe(t,s,r){for(var n=new gs(t),a=0,i=[];n.lt(s)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var vhe=Pf(function(t,s,r){var n=+t,a=+s;return n+r*(a-n)}),yhe=Pf(function(t,s,r){var n=s-+t;return n=n||1/0,(r-t)/n}),bhe=Pf(function(t,s,r){var n=s-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Af={rangeStep:jhe,getDigitCount:ghe,interpolateNumber:vhe,uninterpolateNumber:yhe,uninterpolateTruncation:bhe};function uy(t){return She(t)||whe(t)||n6(t)||Nhe()}function Nhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function whe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function She(t){if(Array.isArray(t))return my(t)}function wu(t,s){return Phe(t)||khe(t,s)||n6(t,s)||Che()}function Che(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n6(t,s){if(t){if(typeof t=="string")return my(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return my(t,s)}}function my(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function khe(t,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var l=t[Symbol.iterator](),o;!(n=(o=l.next()).done)&&(r.push(o.value),!(s&&r.length===s));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&l.return!=null&&l.return()}finally{if(a)throw i}}return r}}function Phe(t){if(Array.isArray(t))return t}function a6(t){var s=wu(t,2),r=s[0],n=s[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function i6(t,s,r){if(t.lte(0))return new gs(0);var n=Af.getDigitCount(t.toNumber()),a=new gs(10).pow(n),i=t.div(a),l=n!==1?.05:.1,o=new gs(Math.ceil(i.div(l).toNumber())).add(r).mul(l),c=o.mul(a);return s?c:new gs(Math.ceil(c))}function Ahe(t,s,r){var n=1,a=new gs(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new gs(10).pow(Af.getDigitCount(t)-1),a=new gs(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new gs(Math.floor(t)))}else t===0?a=new gs(Math.floor((s-1)/2)):r||(a=new gs(Math.floor(t)));var l=Math.floor((s-1)/2),o=fhe(phe(function(c){return a.add(new gs(c-l).mul(n)).toNumber()}),cy);return o(0,s)}function l6(t,s,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(r-1)))return{step:new gs(0),tickMin:new gs(0),tickMax:new gs(0)};var i=i6(new gs(s).sub(t).div(r-1),n,a),l;t<=0&&s>=0?l=new gs(0):(l=new gs(t).add(s).div(2),l=l.sub(new gs(l).mod(i)));var o=Math.ceil(l.sub(t).div(i).toNumber()),c=Math.ceil(new gs(s).sub(l).div(i).toNumber()),d=o+c+1;return d>r?l6(t,s,r,n,a+1):(d<r&&(c=s>0?c+(r-d):c,o=s>0?o:o+(r-d)),{step:i,tickMin:l.sub(new gs(o).mul(i)),tickMax:l.add(new gs(c).mul(i))})}function The(t){var s=wu(t,2),r=s[0],n=s[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=a6([r,n]),c=wu(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(uy(cy(0,a-1).map(function(){return 1/0}))):[].concat(uy(cy(0,a-1).map(function(){return-1/0})),[u]);return r>n?dy(m):m}if(d===u)return Ahe(d,a,i);var h=l6(d,u,l,i),x=h.step,f=h.tickMin,p=h.tickMax,g=Af.rangeStep(f,p.add(new gs(.1).mul(x)),x);return r>n?dy(g):g}function Dhe(t,s){var r=wu(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=a6([n,a]),o=wu(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var u=Math.max(s,2),m=i6(new gs(d).sub(c).div(u-1),i,0),h=[].concat(uy(Af.rangeStep(new gs(c),new gs(d).sub(new gs(.99).mul(m)),m)),[d]);return n>a?dy(h):h}var Ohe=r6(The),Ehe=r6(Dhe),Mhe="Invariant failed";function Kl(t,s){throw new Error(Mhe)}var Rhe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function pc(t){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},pc(t)}function Px(){return Px=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Px.apply(this,arguments)}function _he(t,s){return Lhe(t)||Fhe(t,s)||$he(t,s)||Ihe()}function Ihe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $he(t,s){if(t){if(typeof t=="string")return zC(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zC(t,s)}}function zC(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Fhe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Lhe(t){if(Array.isArray(t))return t}function Bhe(t,s){if(t==null)return{};var r=Vhe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vhe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function qhe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Uhe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d6(n.key),n)}}function zhe(t,s,r){return s&&Uhe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hhe(t,s,r){return s=Ax(s),Khe(t,o6()?Reflect.construct(s,r||[],Ax(t).constructor):s.apply(t,r))}function Khe(t,s){if(s&&(pc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ghe(t)}function Ghe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o6=function(){return!!t})()}function Ax(t){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ax(t)}function Whe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&hy(t,s)}function hy(t,s){return hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hy(t,s)}function c6(t,s,r){return s=d6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function d6(t){var s=Qhe(t,"string");return pc(s)=="symbol"?s:s+""}function Qhe(t,s){if(pc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Em=function(t){function s(){return qhe(this,s),Hhe(this,s,arguments)}return Whe(s,t),zhe(s,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,l=n.width,o=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,m=n.yAxis,h=Bhe(n,Rhe),x=jt(h,!1);this.props.direction==="x"&&u.type!=="number"&&Kl();var f=c.map(function(p){var g=d(p,o),y=g.x,b=g.y,j=g.value,w=g.errorVal;if(!w)return null;var N=[],S,O;if(Array.isArray(w)){var P=_he(w,2);S=P[0],O=P[1]}else S=O=w;if(i==="vertical"){var k=u.scale,R=b+a,F=R+l,I=R-l,W=k(j-S),E=k(j+O);N.push({x1:E,y1:F,x2:E,y2:I}),N.push({x1:W,y1:R,x2:E,y2:R}),N.push({x1:W,y1:F,x2:W,y2:I})}else if(i==="horizontal"){var B=m.scale,G=y+a,J=G-l,C=G+l,V=B(j-S),z=B(j+O);N.push({x1:J,y1:z,x2:C,y2:z}),N.push({x1:G,y1:V,x2:G,y2:z}),N.push({x1:J,y1:V,x2:C,y2:V})}return ee.createElement(is,Px({className:"recharts-errorBar",key:"bar-".concat(N.map(function(le){return"".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))},x),N.map(function(le){return ee.createElement("line",Px({},le,{key:"line-".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))}))});return ee.createElement(is,{className:"recharts-errorBars"},f)}}])}(ee.Component);c6(Em,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});c6(Em,"displayName","ErrorBar");function Su(t){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Su(t)}function HC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function al(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?HC(Object(r),!0).forEach(function(n){Yhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yhe(t,s,r){return s=Xhe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Xhe(t){var s=Zhe(t,"string");return Su(s)=="symbol"?s:s+""}function Zhe(t,s){if(Su(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var u6=function(s){var r=s.children,n=s.formattedGraphicalItems,a=s.legendWidth,i=s.legendContent,l=Yr(r,fa);if(!l)return null;var o=fa.defaultProps,c=o!==void 0?al(al({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(n||[]).reduce(function(u,m){var h=m.item,x=m.props,f=x.sectors||x.data||[];return u.concat(f.map(function(p){return{type:l.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(n||[]).map(function(u){var m=u.item,h=m.type.defaultProps,x=h!==void 0?al(al({},h),m.props):{},f=x.dataKey,p=x.name,g=x.legendType,y=x.hide;return{inactive:y,dataKey:f,type:c.iconType||g||"square",color:HN(m),value:p||f,payload:x}}),al(al(al({},c),fa.getWithHeight(l,a)),{},{payload:d,item:l})};function Cu(t){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cu(t)}function KC(t){return sxe(t)||txe(t)||exe(t)||Jhe()}function Jhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function exe(t,s){if(t){if(typeof t=="string")return xy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xy(t,s)}}function txe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sxe(t){if(Array.isArray(t))return xy(t)}function xy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function GC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ks(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?GC(Object(r),!0).forEach(function(n){zo(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zo(t,s,r){return s=rxe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function rxe(t){var s=nxe(t,"string");return Cu(s)=="symbol"?s:s+""}function nxe(t,s){if(Cu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function xr(t,s,r){return Rt(t)||Rt(s)?r:pr(s)?an(t,s,r):Dt(s)?s(t):r}function Id(t,s,r,n){var a=the(t,function(o){return xr(o,s)});if(r==="number"){var i=a.filter(function(o){return ze(o)||parseFloat(o)});return i.length?[kf(i),Cf(i)]:[1/0,-1/0]}var l=n?a.filter(function(o){return!Rt(o)}):a;return l.map(function(o){return pr(o)||o instanceof Date?o:""})}var axe=function(s){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(r=n?.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,m=a[d].coordinate,h=d>=o-1?a[0].coordinate:a[d+1].coordinate,x=void 0;if(Lr(m-u)!==Lr(h-m)){var f=[];if(Lr(h-m)===Lr(c[1]-c[0])){x=h;var p=m+c[1]-c[0];f[0]=Math.min(p,(p+u)/2),f[1]=Math.max(p,(p+u)/2)}else{x=u;var g=h+c[1]-c[0];f[0]=Math.min(m,(g+m)/2),f[1]=Math.max(m,(g+m)/2)}var y=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(s>y[0]&&s<=y[1]||s>=f[0]&&s<=f[1]){l=a[d].index;break}}else{var b=Math.min(u,h),j=Math.max(u,h);if(s>(b+m)/2&&s<=(j+m)/2){l=a[d].index;break}}}else for(var w=0;w<o;w++)if(w===0&&s<=(n[w].coordinate+n[w+1].coordinate)/2||w>0&&w<o-1&&s>(n[w].coordinate+n[w-1].coordinate)/2&&s<=(n[w].coordinate+n[w+1].coordinate)/2||w===o-1&&s>(n[w].coordinate+n[w-1].coordinate)/2){l=n[w].index;break}return l},HN=function(s){var r,n=s,a=n.type.displayName,i=(r=s.type)!==null&&r!==void 0&&r.defaultProps?Ks(Ks({},s.type.defaultProps),s.props):s.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},ixe=function(s){var r=s.barSize,n=s.totalSize,a=s.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,m=Object.keys(u),h=0,x=m.length;h<x;h++){var f=u[m[h]],p=f.items,g=f.cateAxisId,y=p.filter(function(O){return Qa(O.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,j=b!==void 0?Ks(Ks({},b),y[0].props):y[0].props,w=j.barSize,N=j[g];l[N]||(l[N]=[]);var S=Rt(w)?r:w;l[N].push({item:y[0],stackList:y.slice(1),barSize:Rt(S)?void 0:Br(S,n,0)})}}return l},lxe=function(s){var r=s.barGap,n=s.barCategoryGap,a=s.bandSize,i=s.sizeList,l=i===void 0?[]:i,o=s.maxBarSize,c=l.length;if(c<1)return null;var d=Br(r,a,0,!0),u,m=[];if(l[0].barSize===+l[0].barSize){var h=!1,x=a/c,f=l.reduce(function(w,N){return w+N.barSize||0},0);f+=(c-1)*d,f>=a&&(f-=(c-1)*d,d=0),f>=a&&x>0&&(h=!0,x*=.9,f=c*x);var p=(a-f)/2>>0,g={offset:p-d,size:0};u=l.reduce(function(w,N){var S={item:N.item,position:{offset:g.offset+g.size+d,size:h?x:N.barSize}},O=[].concat(KC(w),[S]);return g=O[O.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(P){O.push({item:P,position:g})}),O},m)}else{var y=Br(n,a,0,!0);a-2*y-(c-1)*d<=0&&(d=0);var b=(a-2*y-(c-1)*d)/c;b>1&&(b>>=0);var j=o===+o?Math.min(b,o):b;u=l.reduce(function(w,N,S){var O=[].concat(KC(w),[{item:N.item,position:{offset:y+(b+d)*S+(b-j)/2,size:j}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(P){O.push({item:P,position:O[O.length-1].position})}),O},m)}return u},oxe=function(s,r,n,a){var i=n.children,l=n.width,o=n.margin,c=l-(o.left||0)-(o.right||0),d=u6({children:i,legendWidth:c});if(d){var u=a||{},m=u.width,h=u.height,x=d.align,f=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&f==="middle")&&x!=="center"&&ze(s[x]))return Ks(Ks({},s),{},zo({},x,s[x]+(m||0)));if((p==="horizontal"||p==="vertical"&&x==="center")&&f!=="middle"&&ze(s[f]))return Ks(Ks({},s),{},zo({},f,s[f]+(h||0)))}return s},cxe=function(s,r,n){return Rt(r)?!0:s==="horizontal"?r==="yAxis":s==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},m6=function(s,r,n,a,i){var l=r.props.children,o=ln(l,Em).filter(function(d){return cxe(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return s.reduce(function(d,u){var m=xr(u,n);if(Rt(m))return d;var h=Array.isArray(m)?[kf(m),Cf(m)]:[m,m],x=c.reduce(function(f,p){var g=xr(u,p,0),y=h[0]-Math.abs(Array.isArray(g)?g[0]:g),b=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,f[0]),Math.max(b,f[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},dxe=function(s,r,n,a,i){var l=r.map(function(o){return m6(s,o,n,i,a)}).filter(function(o){return!Rt(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},h6=function(s,r,n,a,i){var l=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&m6(s,c,d,a)||Id(s,d,n,i)});if(n==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},x6=function(s,r){return s==="horizontal"&&r==="xAxis"||s==="vertical"&&r==="yAxis"||s==="centric"&&r==="angleAxis"||s==="radial"&&r==="radiusAxis"},p6=function(s,r,n,a){if(a)return s.map(function(c){return c.coordinate});var i,l,o=s.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(l=!0),c.coordinate});return i||o.push(r),l||o.push(n),o},Ha=function(s,r,n){if(!s)return null;var a=s.scale,i=s.duplicateDomain,l=s.type,o=s.range,c=s.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||n)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=s.axisType==="angleAxis"&&o?.length>=2?Lr(o[0]-o[1])*2*d:d,r&&(s.ticks||s.niceTicks)){var u=(s.ticks||s.niceTicks).map(function(m){var h=i?i.indexOf(m):m;return{coordinate:a(h)+d,value:m,offset:d}});return u.filter(function(m){return!Cm(m.coordinate)})}return s.isCategorical&&s.categoricalDomain?s.categoricalDomain.map(function(m,h){return{coordinate:a(m)+d,value:m,index:h,offset:d}}):a.ticks&&!n?a.ticks(s.tickCount).map(function(m){return{coordinate:a(m)+d,value:m,offset:d}}):a.domain().map(function(m,h){return{coordinate:a(m)+d,value:i?i[m]:m,index:h,offset:d}})},cj=new WeakMap,rh=function(s,r){if(typeof r!="function")return s;cj.has(s)||cj.set(s,new WeakMap);var n=cj.get(s);if(n.has(r))return n.get(r);var a=function(){s.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},f6=function(s,r,n){var a=s.scale,i=s.type,l=s.layout,o=s.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:gu(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:Nx(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:_d(),realScaleType:"point"}:i==="category"?{scale:gu(),realScaleType:"band"}:{scale:Nx(),realScaleType:"linear"};if(Vl(a)){var c="scale".concat(uf(a));return{scale:(BC[c]||_d)(),realScaleType:BC[c]?c:"point"}}return Dt(a)?{scale:a}:{scale:_d(),realScaleType:"point"}},WC=1e-4,g6=function(s){var r=s.domain();if(!(!r||r.length<=2)){var n=r.length,a=s.range(),i=Math.min(a[0],a[1])-WC,l=Math.max(a[0],a[1])+WC,o=s(r[0]),c=s(r[n-1]);(o<i||o>l||c<i||c>l)&&s.domain([r[0],r[n-1]])}},uxe=function(s,r){if(!s)return null;for(var n=0,a=s.length;n<a;n++)if(s[n].item===r)return s[n].position;return null},mxe=function(s,r){if(!r||r.length!==2||!ze(r[0])||!ze(r[1]))return s;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[s[0],s[1]];return(!ze(s[0])||s[0]<n)&&(i[0]=n),(!ze(s[1])||s[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},hxe=function(s){var r=s.length;if(!(r<=0))for(var n=0,a=s[0].length;n<a;++n)for(var i=0,l=0,o=0;o<r;++o){var c=Cm(s[o][n][1])?s[o][n][0]:s[o][n][1];c>=0?(s[o][n][0]=i,s[o][n][1]=i+c,i=s[o][n][1]):(s[o][n][0]=l,s[o][n][1]=l+c,l=s[o][n][1])}},xxe=function(s){var r=s.length;if(!(r<=0))for(var n=0,a=s[0].length;n<a;++n)for(var i=0,l=0;l<r;++l){var o=Cm(s[l][n][1])?s[l][n][0]:s[l][n][1];o>=0?(s[l][n][0]=i,s[l][n][1]=i+o,i=s[l][n][1]):(s[l][n][0]=0,s[l][n][1]=0)}},pxe={sign:hxe,expand:Ree,none:lc,silhouette:_ee,wiggle:Iee,positive:xxe},fxe=function(s,r,n){var a=r.map(function(o){return o.props.dataKey}),i=pxe[n],l=Mee().keys(a).value(function(o,c){return+xr(o,c,0)}).order(Lv).offset(i);return l(s)},gxe=function(s,r,n,a,i,l){if(!s)return null;var o=l?r.reverse():r,c={},d=o.reduce(function(m,h){var x,f=(x=h.type)!==null&&x!==void 0&&x.defaultProps?Ks(Ks({},h.type.defaultProps),h.props):h.props,p=f.stackId,g=f.hide;if(g)return m;var y=f[n],b=m[y]||{hasStack:!1,stackGroups:{}};if(pr(p)){var j=b.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};j.items.push(h),b.hasStack=!0,b.stackGroups[p]=j}else b.stackGroups[Qc("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Ks(Ks({},m),{},zo({},y,b))},c),u={};return Object.keys(d).reduce(function(m,h){var x=d[h];if(x.hasStack){var f={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(p,g){var y=x.stackGroups[g];return Ks(Ks({},p),{},zo({},g,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:fxe(s,y.items,i)}))},f)}return Ks(Ks({},m),{},zo({},h,x))},u)},j6=function(s,r){var n=r.realScaleType,a=r.type,i=r.tickCount,l=r.originalDomain,o=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=s.domain();if(!d.length)return null;var u=Ohe(d,i,o);return s.domain([kf(u),Cf(u)]),{niceTicks:u}}if(i&&a==="number"){var m=s.domain(),h=Ehe(m,i,o);return{niceTicks:h}}return null};function QC(t){var s=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,l=t.dataKey;if(s.type==="category"){if(!s.allowDuplicatedCategory&&s.dataKey&&!Rt(a[s.dataKey])){var o=tx(r,"value",a[s.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=xr(a,Rt(l)?s.dataKey:l);return Rt(c)?null:s.scale(c)}var YC=function(s){var r=s.axis,n=s.ticks,a=s.offset,i=s.bandSize,l=s.entry,o=s.index;if(r.type==="category")return n[o]?n[o].coordinate+a:null;var c=xr(l,r.dataKey,r.domain[o]);return Rt(c)?null:r.scale(c)-i/2+a},jxe=function(s){var r=s.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},vxe=function(s,r){var n,a=(n=s.type)!==null&&n!==void 0&&n.defaultProps?Ks(Ks({},s.type.defaultProps),s.props):s.props,i=a.stackId;if(pr(i)){var l=r[i];if(l){var o=l.items.indexOf(s);return o>=0?l.stackedData[o]:null}}return null},yxe=function(s){return s.reduce(function(r,n){return[kf(n.concat([r[0]]).filter(ze)),Cf(n.concat([r[1]]).filter(ze))]},[1/0,-1/0])},v6=function(s,r,n){return Object.keys(s).reduce(function(a,i){var l=s[i],o=l.stackedData,c=o.reduce(function(d,u){var m=yxe(u.slice(r,n+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},XC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,py=function(s,r,n){if(Dt(s))return s(r,n);if(!Array.isArray(s))return r;var a=[];if(ze(s[0]))a[0]=n?s[0]:Math.min(s[0],r[0]);else if(XC.test(s[0])){var i=+XC.exec(s[0])[1];a[0]=r[0]-i}else Dt(s[0])?a[0]=s[0](r[0]):a[0]=r[0];if(ze(s[1]))a[1]=n?s[1]:Math.max(s[1],r[1]);else if(ZC.test(s[1])){var l=+ZC.exec(s[1])[1];a[1]=r[1]+l}else Dt(s[1])?a[1]=s[1](r[1]):a[1]=r[1];return a},Tx=function(s,r,n){if(s&&s.scale&&s.scale.bandwidth){var a=s.scale.bandwidth();if(!n||a>0)return a}if(s&&r&&r.length>=2){for(var i=vN(r,function(m){return m.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return n?void 0:0},JC=function(s,r,n){return!s||!s.length||Om(s,an(n,"type.defaultProps.domain"))?r:s},y6=function(s,r){var n=s.type.defaultProps?Ks(Ks({},s.type.defaultProps),s.props):s.props,a=n.dataKey,i=n.name,l=n.unit,o=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return Ks(Ks({},jt(s,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:HN(s),value:xr(r,a),type:c,payload:r,chartType:d,hide:u})};function ku(t){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ku(t)}function ek(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fa(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?ek(Object(r),!0).forEach(function(n){b6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b6(t,s,r){return s=bxe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function bxe(t){var s=Nxe(t,"string");return ku(s)=="symbol"?s:s+""}function Nxe(t,s){if(ku(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function wxe(t,s){return Pxe(t)||kxe(t,s)||Cxe(t,s)||Sxe()}function Sxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cxe(t,s){if(t){if(typeof t=="string")return tk(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tk(t,s)}}function tk(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function kxe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Pxe(t){if(Array.isArray(t))return t}var Dx=Math.PI/180,Axe=function(s){return s*180/Math.PI},Cs=function(s,r,n,a){return{x:s+Math.cos(-Dx*a)*n,y:r+Math.sin(-Dx*a)*n}},N6=function(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(s-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Txe=function(s,r,n,a,i){var l=s.width,o=s.height,c=s.startAngle,d=s.endAngle,u=Br(s.cx,l,l/2),m=Br(s.cy,o,o/2),h=N6(l,o,n),x=Br(s.innerRadius,h,0),f=Br(s.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(g,y){var b=r[y],j=b.domain,w=b.reversed,N;if(Rt(b.range))a==="angleAxis"?N=[c,d]:a==="radiusAxis"&&(N=[x,f]),w&&(N=[N[1],N[0]]);else{N=b.range;var S=N,O=wxe(S,2);c=O[0],d=O[1]}var P=f6(b,i),k=P.realScaleType,R=P.scale;R.domain(j).range(N),g6(R);var F=j6(R,Fa(Fa({},b),{},{realScaleType:k})),I=Fa(Fa(Fa({},b),F),{},{range:N,radius:f,realScaleType:k,scale:R,cx:u,cy:m,innerRadius:x,outerRadius:f,startAngle:c,endAngle:d});return Fa(Fa({},g),{},b6({},y,I))},{})},Dxe=function(s,r){var n=s.x,a=s.y,i=r.x,l=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-l,2))},Oxe=function(s,r){var n=s.x,a=s.y,i=r.cx,l=r.cy,o=Dxe({x:n,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(n-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:Axe(d),angleInRadian:d}},Exe=function(s){var r=s.startAngle,n=s.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(a,i);return{startAngle:r-l*360,endAngle:n-l*360}},Mxe=function(s,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),l=Math.floor(a/360),o=Math.min(i,l);return s+o*360},sk=function(s,r){var n=s.x,a=s.y,i=Oxe({x:n,y:a},r),l=i.radius,o=i.angle,c=r.innerRadius,d=r.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=Exe(r),m=u.startAngle,h=u.endAngle,x=o,f;if(m<=h){for(;x>h;)x-=360;for(;x<m;)x+=360;f=x>=m&&x<=h}else{for(;x>m;)x-=360;for(;x<h;)x+=360;f=x>=h&&x<=m}return f?Fa(Fa({},r),{},{radius:l,angle:Mxe(x,r)}):null},w6=function(s){return!v.isValidElement(s)&&!Dt(s)&&typeof s!="boolean"?s.className:""};function Pu(t){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Pu(t)}var Rxe=["offset"];function _xe(t){return Lxe(t)||Fxe(t)||$xe(t)||Ixe()}function Ixe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $xe(t,s){if(t){if(typeof t=="string")return fy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fy(t,s)}}function Fxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lxe(t){if(Array.isArray(t))return fy(t)}function fy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Bxe(t,s){if(t==null)return{};var r=Vxe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vxe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function rk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ur(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?rk(Object(r),!0).forEach(function(n){qxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qxe(t,s,r){return s=Uxe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Uxe(t){var s=zxe(t,"string");return Pu(s)=="symbol"?s:s+""}function zxe(t,s){if(Pu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Au.apply(this,arguments)}var Hxe=function(s){var r=s.value,n=s.formatter,a=Rt(s.children)?r:s.children;return Dt(n)?n(a):a},Kxe=function(s,r){var n=Lr(r-s),a=Math.min(Math.abs(r-s),360);return n*a},Gxe=function(s,r,n){var a=s.position,i=s.viewBox,l=s.offset,o=s.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,h=c.outerRadius,x=c.startAngle,f=c.endAngle,p=c.clockWise,g=(m+h)/2,y=Kxe(x,f),b=y>=0?1:-1,j,w;a==="insideStart"?(j=x+b*l,w=p):a==="insideEnd"?(j=f-b*l,w=!p):a==="end"&&(j=f+b*l,w=p),w=y<=0?w:!w;var N=Cs(d,u,g,j),S=Cs(d,u,g,j+(w?1:-1)*359),O="M".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(S.x,",").concat(S.y),P=Rt(s.id)?Qc("recharts-radial-line-"):s.id;return ee.createElement("text",Au({},n,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",o)}),ee.createElement("defs",null,ee.createElement("path",{id:P,d:O})),ee.createElement("textPath",{xlinkHref:"#".concat(P)},r))},Wxe=function(s){var r=s.viewBox,n=s.offset,a=s.position,i=r,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,m=i.endAngle,h=(u+m)/2;if(a==="outside"){var x=Cs(l,o,d+n,h),f=x.x,p=x.y;return{x:f,y:p,textAnchor:f>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,y=Cs(l,o,g,h),b=y.x,j=y.y;return{x:b,y:j,textAnchor:"middle",verticalAnchor:"middle"}},Qxe=function(s){var r=s.viewBox,n=s.parentViewBox,a=s.offset,i=s.position,l=r,o=l.x,c=l.y,d=l.width,u=l.height,m=u>=0?1:-1,h=m*a,x=m>0?"end":"start",f=m>0?"start":"end",p=d>=0?1:-1,g=p*a,y=p>0?"end":"start",b=p>0?"start":"end";if(i==="top"){var j={x:o+d/2,y:c-m*a,textAnchor:"middle",verticalAnchor:x};return ur(ur({},j),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var w={x:o+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:f};return ur(ur({},w),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(i==="left"){var N={x:o-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return ur(ur({},N),n?{width:Math.max(N.x-n.x,0),height:u}:{})}if(i==="right"){var S={x:o+d+g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return ur(ur({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:u}:{})}var O=n?{width:d,height:u}:{};return i==="insideLeft"?ur({x:o+g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},O):i==="insideRight"?ur({x:o+d-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},O):i==="insideTop"?ur({x:o+d/2,y:c+h,textAnchor:"middle",verticalAnchor:f},O):i==="insideBottom"?ur({x:o+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:x},O):i==="insideTopLeft"?ur({x:o+g,y:c+h,textAnchor:b,verticalAnchor:f},O):i==="insideTopRight"?ur({x:o+d-g,y:c+h,textAnchor:y,verticalAnchor:f},O):i==="insideBottomLeft"?ur({x:o+g,y:c+u-h,textAnchor:b,verticalAnchor:x},O):i==="insideBottomRight"?ur({x:o+d-g,y:c+u-h,textAnchor:y,verticalAnchor:x},O):Hc(i)&&(ze(i.x)||vl(i.x))&&(ze(i.y)||vl(i.y))?ur({x:o+Br(i.x,d),y:c+Br(i.y,u),textAnchor:"end",verticalAnchor:"end"},O):ur({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},O)},Yxe=function(s){return"cx"in s&&ze(s.cx)};function vr(t){var s=t.offset,r=s===void 0?5:s,n=Bxe(t,Rxe),a=ur({offset:r},n),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,m=u===void 0?"":u,h=a.textBreakAll;if(!i||Rt(o)&&Rt(c)&&!v.isValidElement(d)&&!Dt(d))return null;if(v.isValidElement(d))return v.cloneElement(d,a);var x;if(Dt(d)){if(x=v.createElement(d,a),v.isValidElement(x))return x}else x=Hxe(a);var f=Yxe(i),p=jt(a,!0);if(f&&(l==="insideStart"||l==="insideEnd"||l==="end"))return Gxe(a,x,p);var g=f?Wxe(a):Qxe(a);return ee.createElement(zl,Au({className:$t("recharts-label",m)},p,g,{breakAll:h}),x)}vr.displayName="Label";var S6=function(s){var r=s.cx,n=s.cy,a=s.angle,i=s.startAngle,l=s.endAngle,o=s.r,c=s.radius,d=s.innerRadius,u=s.outerRadius,m=s.x,h=s.y,x=s.top,f=s.left,p=s.width,g=s.height,y=s.clockWise,b=s.labelViewBox;if(b)return b;if(ze(p)&&ze(g)){if(ze(m)&&ze(h))return{x:m,y:h,width:p,height:g};if(ze(x)&&ze(f))return{x,y:f,width:p,height:g}}return ze(m)&&ze(h)?{x:m,y:h,width:0,height:0}:ze(r)&&ze(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:y}:s.viewBox?s.viewBox:{}},Xxe=function(s,r){return s?s===!0?ee.createElement(vr,{key:"label-implicit",viewBox:r}):pr(s)?ee.createElement(vr,{key:"label-implicit",viewBox:r,value:s}):v.isValidElement(s)?s.type===vr?v.cloneElement(s,{key:"label-implicit",viewBox:r}):ee.createElement(vr,{key:"label-implicit",content:s,viewBox:r}):Dt(s)?ee.createElement(vr,{key:"label-implicit",content:s,viewBox:r}):Hc(s)?ee.createElement(vr,Au({viewBox:r},s,{key:"label-implicit"})):null:null},Zxe=function(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!s||!s.children&&n&&!s.label)return null;var a=s.children,i=S6(s),l=ln(a,vr).map(function(c,d){return v.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return l;var o=Xxe(s.label,r||i);return[o].concat(_xe(l))};vr.parseViewBox=S6;vr.renderCallByParent=Zxe;function Jxe(t){var s=t==null?0:t.length;return s?t[s-1]:void 0}var epe=Jxe;const tpe=ys(epe);function Tu(t){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tu(t)}var spe=["valueAccessor"],rpe=["data","dataKey","clockWise","id","textBreakAll"];function npe(t){return ope(t)||lpe(t)||ipe(t)||ape()}function ape(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ipe(t,s){if(t){if(typeof t=="string")return gy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gy(t,s)}}function lpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ope(t){if(Array.isArray(t))return gy(t)}function gy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Ox(){return Ox=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ox.apply(this,arguments)}function nk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ak(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?nk(Object(r),!0).forEach(function(n){cpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cpe(t,s,r){return s=dpe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function dpe(t){var s=upe(t,"string");return Tu(s)=="symbol"?s:s+""}function upe(t,s){if(Tu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function ik(t,s){if(t==null)return{};var r=mpe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mpe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var hpe=function(s){return Array.isArray(s.value)?tpe(s.value):s.value};function Xa(t){var s=t.valueAccessor,r=s===void 0?hpe:s,n=ik(t,spe),a=n.data,i=n.dataKey,l=n.clockWise,o=n.id,c=n.textBreakAll,d=ik(n,rpe);return!a||!a.length?null:ee.createElement(is,{className:"recharts-label-list"},a.map(function(u,m){var h=Rt(i)?r(u,m):xr(u&&u.payload,i),x=Rt(o)?{}:{id:"".concat(o,"-").concat(m)};return ee.createElement(vr,Ox({},jt(u,!0),d,x,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:vr.parseViewBox(Rt(l)?u:ak(ak({},u),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}Xa.displayName="LabelList";function xpe(t,s){return t?t===!0?ee.createElement(Xa,{key:"labelList-implicit",data:s}):ee.isValidElement(t)||Dt(t)?ee.createElement(Xa,{key:"labelList-implicit",data:s,content:t}):Hc(t)?ee.createElement(Xa,Ox({data:s},t,{key:"labelList-implicit"})):null:null}function ppe(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=ln(n,Xa).map(function(l,o){return v.cloneElement(l,{data:s,key:"labelList-".concat(o)})});if(!r)return a;var i=xpe(t.label,s);return[i].concat(npe(a))}Xa.renderCallByParent=ppe;function Du(t){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Du(t)}function jy(){return jy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jy.apply(this,arguments)}function lk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ok(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?lk(Object(r),!0).forEach(function(n){fpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fpe(t,s,r){return s=gpe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function gpe(t){var s=jpe(t,"string");return Du(s)=="symbol"?s:s+""}function jpe(t,s){if(Du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var vpe=function(s,r){var n=Lr(r-s),a=Math.min(Math.abs(r-s),359.999);return n*a},nh=function(s){var r=s.cx,n=s.cy,a=s.radius,i=s.angle,l=s.sign,o=s.isExternal,c=s.cornerRadius,d=s.cornerIsExternal,u=c*(o?1:-1)+a,m=Math.asin(c/u)/Dx,h=d?i:i+l*m,x=Cs(r,n,u,h),f=Cs(r,n,a,h),p=d?i-l*m:i,g=Cs(r,n,u*Math.cos(m*Dx),p);return{center:x,circleTangency:f,lineTangency:g,theta:m}},C6=function(s){var r=s.cx,n=s.cy,a=s.innerRadius,i=s.outerRadius,l=s.startAngle,o=s.endAngle,c=vpe(l,o),d=l+c,u=Cs(r,n,i,l),m=Cs(r,n,i,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var x=Cs(r,n,a,l),f=Cs(r,n,a,d);h+="L ".concat(f.x,",").concat(f.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},ype=function(s){var r=s.cx,n=s.cy,a=s.innerRadius,i=s.outerRadius,l=s.cornerRadius,o=s.forceCornerRadius,c=s.cornerIsExternal,d=s.startAngle,u=s.endAngle,m=Lr(u-d),h=nh({cx:r,cy:n,radius:i,angle:d,sign:m,cornerRadius:l,cornerIsExternal:c}),x=h.circleTangency,f=h.lineTangency,p=h.theta,g=nh({cx:r,cy:n,radius:i,angle:u,sign:-m,cornerRadius:l,cornerIsExternal:c}),y=g.circleTangency,b=g.lineTangency,j=g.theta,w=c?Math.abs(d-u):Math.abs(d-u)-p-j;if(w<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):C6({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var N="M ".concat(f.x,",").concat(f.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var S=nh({cx:r,cy:n,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),O=S.circleTangency,P=S.lineTangency,k=S.theta,R=nh({cx:r,cy:n,radius:a,angle:u,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),F=R.circleTangency,I=R.lineTangency,W=R.theta,E=c?Math.abs(d-u):Math.abs(d-u)-k-W;if(E<0&&l===0)return"".concat(N,"L").concat(r,",").concat(n,"Z");N+="L".concat(I.x,",").concat(I.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(E>180),",").concat(+(m>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,"Z")}else N+="L".concat(r,",").concat(n,"Z");return N},bpe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},k6=function(s){var r=ok(ok({},bpe),s),n=r.cx,a=r.cy,i=r.innerRadius,l=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,m=r.endAngle,h=r.className;if(l<i||u===m)return null;var x=$t("recharts-sector",h),f=l-i,p=Br(o,f,0,!0),g;return p>0&&Math.abs(u-m)<360?g=ype({cx:n,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(p,f/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):g=C6({cx:n,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:m}),ee.createElement("path",jy({},jt(r,!0),{className:x,d:g,role:"img"}))};function Ou(t){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ou(t)}function vy(){return vy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vy.apply(this,arguments)}function ck(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dk(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?ck(Object(r),!0).forEach(function(n){Npe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Npe(t,s,r){return s=wpe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function wpe(t){var s=Spe(t,"string");return Ou(s)=="symbol"?s:s+""}function Spe(t,s){if(Ou(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var uk={curveBasisClosed:Nee,curveBasisOpen:wee,curveBasis:bee,curveBumpX:lee,curveBumpY:oee,curveLinearClosed:See,curveLinear:hf,curveMonotoneX:Cee,curveMonotoneY:kee,curveNatural:Pee,curveStep:Aee,curveStepAfter:Dee,curveStepBefore:Tee},ah=function(s){return s.x===+s.x&&s.y===+s.y},gd=function(s){return s.x},jd=function(s){return s.y},Cpe=function(s,r){if(Dt(s))return s;var n="curve".concat(uf(s));return(n==="curveMonotone"||n==="curveBump")&&r?uk["".concat(n).concat(r==="vertical"?"Y":"X")]:uk[n]||hf},kpe=function(s){var r=s.type,n=r===void 0?"linear":r,a=s.points,i=a===void 0?[]:a,l=s.baseLine,o=s.layout,c=s.connectNulls,d=c===void 0?!1:c,u=Cpe(n,o),m=d?i.filter(function(p){return ah(p)}):i,h;if(Array.isArray(l)){var x=d?l.filter(function(p){return ah(p)}):l,f=m.map(function(p,g){return dk(dk({},p),{},{base:x[g]})});return o==="vertical"?h=Qm().y(jd).x1(gd).x0(function(p){return p.base.x}):h=Qm().x(gd).y1(jd).y0(function(p){return p.base.y}),h.defined(ah).curve(u),h(f)}return o==="vertical"&&ze(l)?h=Qm().y(jd).x1(gd).x0(l):ze(l)?h=Qm().x(gd).y1(jd).y0(l):h=y_().x(gd).y(jd),h.defined(ah).curve(u),h(m)},Ex=function(s){var r=s.className,n=s.points,a=s.path,i=s.pathRef;if((!n||!n.length)&&!a)return null;var l=n&&n.length?kpe(s):a;return v.createElement("path",vy({},jt(s,!1),sx(s),{className:$t("recharts-curve",r),d:l,ref:i}))},P6={exports:{}},Ppe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ape=Ppe,Tpe=Ape;function A6(){}function T6(){}T6.resetWarningCache=A6;var Dpe=function(){function t(n,a,i,l,o,c){if(c!==Tpe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:T6,resetWarningCache:A6};return r.PropTypes=r,r};P6.exports=Dpe();var Ope=P6.exports;const ds=ys(Ope);var Epe=Object.getOwnPropertyNames,Mpe=Object.getOwnPropertySymbols,Rpe=Object.prototype.hasOwnProperty;function mk(t,s){return function(n,a,i){return t(n,a,i)&&s(n,a,i)}}function ih(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var i=a.cache,l=i.get(r),o=i.get(n);if(l&&o)return l===n&&o===r;i.set(r,n),i.set(n,r);var c=t(r,n,a);return i.delete(r),i.delete(n),c}}function hk(t){return Epe(t).concat(Mpe(t))}var _pe=Object.hasOwn||function(t,s){return Rpe.call(t,s)};function ao(t,s){return t===s||!t&&!s&&t!==t&&s!==s}var Ipe="__v",$pe="__o",Fpe="_owner",xk=Object.getOwnPropertyDescriptor,pk=Object.keys;function Lpe(t,s,r){var n=t.length;if(s.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],s[n],n,n,t,s,r))return!1;return!0}function Bpe(t,s){return ao(t.getTime(),s.getTime())}function Vpe(t,s){return t.name===s.name&&t.message===s.message&&t.cause===s.cause&&t.stack===s.stack}function qpe(t,s){return t===s}function fk(t,s,r){var n=t.size;if(n!==s.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=s.entries(),u=!1,m=0;(o=d.next())&&!o.done;){if(a[m]){m++;continue}var h=l.value,x=o.value;if(r.equals(h[0],x[0],c,m,t,s,r)&&r.equals(h[1],x[1],h[0],x[0],t,s,r)){u=a[m]=!0;break}m++}if(!u)return!1;c++}return!0}var Upe=ao;function zpe(t,s,r){var n=pk(t),a=n.length;if(pk(s).length!==a)return!1;for(;a-- >0;)if(!D6(t,s,r,n[a]))return!1;return!0}function vd(t,s,r){var n=hk(t),a=n.length;if(hk(s).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=n[a],!D6(t,s,r,i)||(l=xk(t,i),o=xk(s,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function Hpe(t,s){return ao(t.valueOf(),s.valueOf())}function Kpe(t,s){return t.source===s.source&&t.flags===s.flags}function gk(t,s,r){var n=t.size;if(n!==s.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.values(),l,o;(l=i.next())&&!l.done;){for(var c=s.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&r.equals(l.value,o.value,l.value,o.value,t,s,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function Gpe(t,s){var r=t.length;if(s.length!==r)return!1;for(;r-- >0;)if(t[r]!==s[r])return!1;return!0}function Wpe(t,s){return t.hostname===s.hostname&&t.pathname===s.pathname&&t.protocol===s.protocol&&t.port===s.port&&t.hash===s.hash&&t.username===s.username&&t.password===s.password}function D6(t,s,r,n){return(n===Fpe||n===$pe||n===Ipe)&&(t.$$typeof||s.$$typeof)?!0:_pe(s,n)&&r.equals(t[n],s[n],n,n,t,s,r)}var Qpe="[object Arguments]",Ype="[object Boolean]",Xpe="[object Date]",Zpe="[object Error]",Jpe="[object Map]",efe="[object Number]",tfe="[object Object]",sfe="[object RegExp]",rfe="[object Set]",nfe="[object String]",afe="[object URL]",ife=Array.isArray,jk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,vk=Object.assign,lfe=Object.prototype.toString.call.bind(Object.prototype.toString);function ofe(t){var s=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,l=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,m=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(f,p,g){if(f===p)return!0;if(f==null||p==null)return!1;var y=typeof f;if(y!==typeof p)return!1;if(y!=="object")return y==="number"?l(f,p,g):y==="function"?a(f,p,g):!1;var b=f.constructor;if(b!==p.constructor)return!1;if(b===Object)return o(f,p,g);if(ife(f))return s(f,p,g);if(jk!=null&&jk(f))return m(f,p,g);if(b===Date)return r(f,p,g);if(b===RegExp)return d(f,p,g);if(b===Map)return i(f,p,g);if(b===Set)return u(f,p,g);var j=lfe(f);return j===Xpe?r(f,p,g):j===sfe?d(f,p,g):j===Jpe?i(f,p,g):j===rfe?u(f,p,g):j===tfe?typeof f.then!="function"&&typeof p.then!="function"&&o(f,p,g):j===afe?h(f,p,g):j===Zpe?n(f,p,g):j===Qpe?o(f,p,g):j===Ype||j===efe||j===nfe?c(f,p,g):!1}}function cfe(t){var s=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?vd:Lpe,areDatesEqual:Bpe,areErrorsEqual:Vpe,areFunctionsEqual:qpe,areMapsEqual:n?mk(fk,vd):fk,areNumbersEqual:Upe,areObjectsEqual:n?vd:zpe,arePrimitiveWrappersEqual:Hpe,areRegExpsEqual:Kpe,areSetsEqual:n?mk(gk,vd):gk,areTypedArraysEqual:n?vd:Gpe,areUrlsEqual:Wpe};if(r&&(a=vk({},a,r(a))),s){var i=ih(a.areArraysEqual),l=ih(a.areMapsEqual),o=ih(a.areObjectsEqual),c=ih(a.areSetsEqual);a=vk({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function dfe(t){return function(s,r,n,a,i,l,o){return t(s,r,o)}}function ufe(t){var s=t.circular,r=t.comparator,n=t.createState,a=t.equals,i=t.strict;if(n)return function(c,d){var u=n(),m=u.cache,h=m===void 0?s?new WeakMap:void 0:m,x=u.meta;return r(c,d,{cache:h,equals:a,meta:x,strict:i})};if(s)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,l)}}var mfe=el();el({strict:!0});el({circular:!0});el({circular:!0,strict:!0});el({createInternalComparator:function(){return ao}});el({strict:!0,createInternalComparator:function(){return ao}});el({circular:!0,createInternalComparator:function(){return ao}});el({circular:!0,createInternalComparator:function(){return ao},strict:!0});function el(t){t===void 0&&(t={});var s=t.circular,r=s===void 0?!1:s,n=t.createInternalComparator,a=t.createState,i=t.strict,l=i===void 0?!1:i,o=cfe(t),c=ofe(o),d=n?n(c):dfe(c);return ufe({circular:r,comparator:c,createState:a,equals:d,strict:l})}function hfe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function yk(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>s?(t(i),r=-1):hfe(a)};requestAnimationFrame(n)}function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},yy(t)}function xfe(t){return jfe(t)||gfe(t)||ffe(t)||pfe()}function pfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ffe(t,s){if(t){if(typeof t=="string")return bk(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bk(t,s)}}function bk(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function gfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jfe(t){if(Array.isArray(t))return t}function vfe(){var t={},s=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var l=i,o=xfe(l),c=o[0],d=o.slice(1);if(typeof c=="number"){yk(a.bind(null,d),c);return}a(c),yk(a.bind(null,d));return}yy(i)==="object"&&(t=i,s(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return s=i,function(){s=function(){return null}}}}}function Eu(t){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Eu(t)}function Nk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wk(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Nk(Object(r),!0).forEach(function(n){O6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O6(t,s,r){return s=yfe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function yfe(t){var s=bfe(t,"string");return Eu(s)==="symbol"?s:String(s)}function bfe(t,s){if(Eu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Eu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Nfe=function(s,r){return[Object.keys(s),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},wfe=function(s){return s},Sfe=function(s){return s.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},$d=function(s,r){return Object.keys(r).reduce(function(n,a){return wk(wk({},n),{},O6({},a,s(a,r[a])))},{})},Sk=function(s,r,n){return s.map(function(a){return"".concat(Sfe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Cfe(t,s){return Afe(t)||Pfe(t,s)||E6(t,s)||kfe()}function kfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pfe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Afe(t){if(Array.isArray(t))return t}function Tfe(t){return Efe(t)||Ofe(t)||E6(t)||Dfe()}function Dfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E6(t,s){if(t){if(typeof t=="string")return by(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return by(t,s)}}function Ofe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Efe(t){if(Array.isArray(t))return by(t)}function by(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var Mx=1e-4,M6=function(s,r){return[0,3*s,3*r-6*s,3*s-3*r+1]},R6=function(s,r){return s.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},Ck=function(s,r){return function(n){var a=M6(s,r);return R6(a,n)}},Mfe=function(s,r){return function(n){var a=M6(s,r),i=[].concat(Tfe(a.map(function(l,o){return l*o}).slice(1)),[0]);return R6(i,n)}},kk=function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];var a=r[0],i=r[1],l=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=Cfe(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var m=Ck(a,l),h=Ck(i,o),x=Mfe(a,l),f=function(y){return y>1?1:y<0?0:y},p=function(y){for(var b=y>1?1:y,j=b,w=0;w<8;++w){var N=m(j)-b,S=x(j);if(Math.abs(N-b)<Mx||S<Mx)return h(j);j=f(j-N/S)}return h(j)};return p.isStepper=!1,p},Rfe=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=s.stiff,n=r===void 0?100:r,a=s.damping,i=a===void 0?8:a,l=s.dt,o=l===void 0?17:l,c=function(u,m,h){var x=-(u-m)*n,f=h*i,p=h+(x-f)*o/1e3,g=h*o/1e3+u;return Math.abs(g-m)<Mx&&Math.abs(p)<Mx?[m,0]:[g,p]};return c.isStepper=!0,c.dt=o,c},_fe=function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kk(a);case"spring":return Rfe();default:if(a.split("(")[0]==="cubic-bezier")return kk(a)}return typeof a=="function"?a:null};function Mu(t){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Mu(t)}function Pk(t){return Ffe(t)||$fe(t)||_6(t)||Ife()}function Ife(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $fe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ffe(t){if(Array.isArray(t))return wy(t)}function Ak(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Ak(Object(r),!0).forEach(function(n){Ny(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ny(t,s,r){return s=Lfe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Lfe(t){var s=Bfe(t,"string");return Mu(s)==="symbol"?s:String(s)}function Bfe(t,s){if(Mu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Mu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Vfe(t,s){return zfe(t)||Ufe(t,s)||_6(t,s)||qfe()}function qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _6(t,s){if(t){if(typeof t=="string")return wy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wy(t,s)}}function wy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Ufe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function zfe(t){if(Array.isArray(t))return t}var Rx=function(s,r,n){return s+(r-s)*n},Sy=function(s){var r=s.from,n=s.to;return r!==n},Hfe=function t(s,r,n){var a=$d(function(i,l){if(Sy(l)){var o=s(l.from,l.to,l.velocity),c=Vfe(o,2),d=c[0],u=c[1];return Sr(Sr({},l),{},{from:d,velocity:u})}return l},r);return n<1?$d(function(i,l){return Sy(l)?Sr(Sr({},l),{},{velocity:Rx(l.velocity,a[i].velocity,n),from:Rx(l.from,a[i].from,n)}):l},r):t(s,a,n-1)};const Kfe=function(t,s,r,n,a){var i=Nfe(t,s),l=i.reduce(function(g,y){return Sr(Sr({},g),{},Ny({},y,[t[y],s[y]]))},{}),o=i.reduce(function(g,y){return Sr(Sr({},g),{},Ny({},y,{from:t[y],velocity:0,to:s[y]}))},{}),c=-1,d,u,m=function(){return null},h=function(){return $d(function(y,b){return b.from},o)},x=function(){return!Object.values(o).filter(Sy).length},f=function(y){d||(d=y);var b=y-d,j=b/r.dt;o=Hfe(r,o,j),a(Sr(Sr(Sr({},t),s),h())),d=y,x()||(c=requestAnimationFrame(m))},p=function(y){u||(u=y);var b=(y-u)/n,j=$d(function(N,S){return Rx.apply(void 0,Pk(S).concat([r(b)]))},l);if(a(Sr(Sr(Sr({},t),s),j)),b<1)c=requestAnimationFrame(m);else{var w=$d(function(N,S){return Rx.apply(void 0,Pk(S).concat([r(1)]))},l);a(Sr(Sr(Sr({},t),s),w))}};return m=r.isStepper?f:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function fc(t){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},fc(t)}var Gfe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Wfe(t,s){if(t==null)return{};var r=Qfe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qfe(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}function dj(t){return Jfe(t)||Zfe(t)||Xfe(t)||Yfe()}function Yfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xfe(t,s){if(t){if(typeof t=="string")return Cy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(t,s)}}function Zfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jfe(t){if(Array.isArray(t))return Cy(t)}function Cy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Tk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function In(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Tk(Object(r),!0).forEach(function(n){Ad(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ad(t,s,r){return s=I6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function ege(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function tge(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I6(n.key),n)}}function sge(t,s,r){return s&&tge(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function I6(t){var s=rge(t,"string");return fc(s)==="symbol"?s:String(s)}function rge(t,s){if(fc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(fc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function nge(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&ky(t,s)}function ky(t,s){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ky(t,s)}function age(t){var s=ige();return function(){var n=_x(t),a;if(s){var i=_x(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Py(this,a)}}function Py(t,s){if(s&&(fc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ay(t)}function Ay(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ige(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_x(t)}var Aa=function(t){nge(r,t);var s=age(r);function r(n,a){var i;ege(this,r),i=s.call(this,n,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,m=l.steps,h=l.children,x=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Ay(i)),i.changeStyle=i.changeStyle.bind(Ay(i)),!o||x<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),Py(i);if(m&&m.length)i.state={style:m[0].style};else if(d){if(typeof h=="function")return i.state={style:d},Py(i);i.state={style:c?Ad({},c,d):d}}else i.state={style:{}};return i}return sge(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,m=i.from,h=this.state.style;if(o){if(!l){var x={style:c?Ad({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(x);return}if(!(mfe(a.to,u)&&a.canBegin&&a.isActive)){var f=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=f||d?m:a.to;if(this.state&&h){var g={style:c?Ad({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(g)}this.runAnimation(In(In({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,m=a.onAnimationEnd,h=a.onAnimationStart,x=Kfe(l,o,_fe(d),c,this.changeStyle),f=function(){i.stopJSAnimation=x()};this.manager.start([h,u,f,c,m])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,m=d.duration,h=m===void 0?0:m,x=function(p,g,y){if(y===0)return p;var b=g.duration,j=g.easing,w=j===void 0?"ease":j,N=g.style,S=g.properties,O=g.onAnimationEnd,P=y>0?l[y-1]:g,k=S||Object.keys(N);if(typeof w=="function"||w==="spring")return[].concat(dj(p),[i.runJSAnimation.bind(i,{from:P.style,to:N,duration:b,easing:w}),b]);var R=Sk(k,b,w),F=In(In(In({},P.style),N),{},{transition:R});return[].concat(dj(p),[F,b,O]).filter(wfe)};return this.manager.start([c].concat(dj(l.reduce(x,[u,Math.max(h,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=vfe());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,m=a.onAnimationEnd,h=a.steps,x=a.children,f=this.manager;if(this.unSubscribe=f.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=o?Ad({},o,c):c,g=Sk(Object.keys(p),l,d);f.start([u,i,In(In({},p),{},{transition:g}),l,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Wfe(a,Gfe),d=v.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var m=function(x){var f=x.props,p=f.style,g=p===void 0?{}:p,y=f.className,b=v.cloneElement(x,In(In({},c),{},{style:In(In({},g),u),className:y}));return b};return d===1?m(v.Children.only(i)):ee.createElement("div",null,v.Children.map(i,function(h){return m(h)}))}}]),r}(v.PureComponent);Aa.displayName="Animate";Aa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Aa.propTypes={from:ds.oneOfType([ds.object,ds.string]),to:ds.oneOfType([ds.object,ds.string]),attributeName:ds.string,duration:ds.number,begin:ds.number,easing:ds.oneOfType([ds.string,ds.func]),steps:ds.arrayOf(ds.shape({duration:ds.number.isRequired,style:ds.object.isRequired,easing:ds.oneOfType([ds.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ds.func]),properties:ds.arrayOf("string"),onAnimationEnd:ds.func})),children:ds.oneOfType([ds.node,ds.func]),isActive:ds.bool,canBegin:ds.bool,onAnimationEnd:ds.func,shouldReAnimate:ds.bool,onAnimationStart:ds.func,onAnimationReStart:ds.func};function Ru(t){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ru(t)}function Ix(){return Ix=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ix.apply(this,arguments)}function lge(t,s){return uge(t)||dge(t,s)||cge(t,s)||oge()}function oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cge(t,s){if(t){if(typeof t=="string")return Dk(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dk(t,s)}}function Dk(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function dge(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function uge(t){if(Array.isArray(t))return t}function Ok(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ek(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Ok(Object(r),!0).forEach(function(n){mge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mge(t,s,r){return s=hge(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function hge(t){var s=xge(t,"string");return Ru(s)=="symbol"?s:s+""}function xge(t,s){if(Ru(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Mk=function(s,r,n,a,i){var l=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,c=n>=0?1:-1,d=a>=0&&n>=0||a<0&&n<0?1:0,u;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],h=0,x=4;h<x;h++)m[h]=i[h]>l?l:i[h];u="M".concat(s,",").concat(r+o*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(s+c*m[0],",").concat(r)),u+="L ".concat(s+n-c*m[1],",").concat(r),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(s+n,",").concat(r+o*m[1])),u+="L ".concat(s+n,",").concat(r+a-o*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(s+n-c*m[2],",").concat(r+a)),u+="L ".concat(s+c*m[3],",").concat(r+a),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(s,",").concat(r+a-o*m[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var f=Math.min(l,i);u="M ".concat(s,",").concat(r+o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s+c*f,",").concat(r,`
            L `).concat(s+n-c*f,",").concat(r,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s+n,",").concat(r+o*f,`
            L `).concat(s+n,",").concat(r+a-o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s+n-c*f,",").concat(r+a,`
            L `).concat(s+c*f,",").concat(r+a,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s,",").concat(r+a-o*f," Z")}else u="M ".concat(s,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},pge=function(s,r){if(!s||!r)return!1;var n=s.x,a=s.y,i=r.x,l=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),m=Math.min(l,l+c),h=Math.max(l,l+c);return n>=d&&n<=u&&a>=m&&a<=h}return!1},fge={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KN=function(s){var r=Ek(Ek({},fge),s),n=v.useRef(),a=v.useState(-1),i=lge(a,2),l=i[0],o=i[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&o(w)}catch{}},[]);var c=r.x,d=r.y,u=r.width,m=r.height,h=r.radius,x=r.className,f=r.animationEasing,p=r.animationDuration,g=r.animationBegin,y=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var j=$t("recharts-rectangle",x);return b?ee.createElement(Aa,{canBegin:l>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:p,animationEasing:f,isActive:b},function(w){var N=w.width,S=w.height,O=w.x,P=w.y;return ee.createElement(Aa,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:y,easing:f},ee.createElement("path",Ix({},jt(r,!0),{className:j,d:Mk(O,P,N,S,h),ref:n})))}):ee.createElement("path",Ix({},jt(r,!0),{className:j,d:Mk(c,d,u,m,h)}))},gge=["points","className","baseLinePoints","connectNulls"];function Co(){return Co=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Co.apply(this,arguments)}function jge(t,s){if(t==null)return{};var r=vge(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vge(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Rk(t){return wge(t)||Nge(t)||bge(t)||yge()}function yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(t,s){if(t){if(typeof t=="string")return Ty(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ty(t,s)}}function Nge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wge(t){if(Array.isArray(t))return Ty(t)}function Ty(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var _k=function(s){return s&&s.x===+s.x&&s.y===+s.y},Sge=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return s.forEach(function(n){_k(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),_k(s[0])&&r[r.length-1].push(s[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Fd=function(s,r){var n=Sge(s);r&&(n=[n.reduce(function(i,l){return[].concat(Rk(i),Rk(l))},[])]);var a=n.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Cge=function(s,r,n){var a=Fd(s,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Fd(r.reverse(),n).slice(1))},kge=function(s){var r=s.points,n=s.className,a=s.baseLinePoints,i=s.connectNulls,l=jge(s,gge);if(!r||!r.length)return null;var o=$t("recharts-polygon",n);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=Cge(r,a,i);return ee.createElement("g",{className:o},ee.createElement("path",Co({},jt(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?ee.createElement("path",Co({},jt(l,!0),{fill:"none",d:Fd(r,i)})):null,c?ee.createElement("path",Co({},jt(l,!0),{fill:"none",d:Fd(a,i)})):null)}var u=Fd(r,i);return ee.createElement("path",Co({},jt(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dy.apply(this,arguments)}var Tf=function(s){var r=s.cx,n=s.cy,a=s.r,i=s.className,l=$t("recharts-dot",i);return r===+r&&n===+n&&a===+a?v.createElement("circle",Dy({},jt(s,!1),sx(s),{className:l,cx:r,cy:n,r:a})):null};function _u(t){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_u(t)}var Pge=["x","y","top","left","width","height","className"];function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Oy.apply(this,arguments)}function Ik(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Age(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Ik(Object(r),!0).forEach(function(n){Tge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ik(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tge(t,s,r){return s=Dge(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Dge(t){var s=Oge(t,"string");return _u(s)=="symbol"?s:s+""}function Oge(t,s){if(_u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Ege(t,s){if(t==null)return{};var r=Mge(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mge(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Rge=function(s,r,n,a,i,l){return"M".concat(s,",").concat(i,"v").concat(a,"M").concat(l,",").concat(r,"h").concat(n)},_ge=function(s){var r=s.x,n=r===void 0?0:r,a=s.y,i=a===void 0?0:a,l=s.top,o=l===void 0?0:l,c=s.left,d=c===void 0?0:c,u=s.width,m=u===void 0?0:u,h=s.height,x=h===void 0?0:h,f=s.className,p=Ege(s,Pge),g=Age({x:n,y:i,top:o,left:d,width:m,height:x},p);return!ze(n)||!ze(i)||!ze(m)||!ze(x)||!ze(o)||!ze(d)?null:ee.createElement("path",Oy({},jt(g,!0),{className:$t("recharts-cross",f),d:Rge(n,i,m,x,o,d)}))},Ige=Sf,$ge=WI,Fge=Ea;function Lge(t,s){return t&&t.length?Ige(t,Fge(s),$ge):void 0}var Bge=Lge;const Vge=ys(Bge);var qge=Sf,Uge=Ea,zge=QI;function Hge(t,s){return t&&t.length?qge(t,Uge(s),zge):void 0}var Kge=Hge;const Gge=ys(Kge);var Wge=["cx","cy","angle","ticks","axisLine"],Qge=["ticks","tick","angle","tickFormatter","stroke"];function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},gc(t)}function Ld(){return Ld=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ld.apply(this,arguments)}function $k(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function il(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?$k(Object(r),!0).forEach(function(n){Df(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fk(t,s){if(t==null)return{};var r=Yge(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yge(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Xge(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Lk(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F6(n.key),n)}}function Zge(t,s,r){return s&&Lk(t.prototype,s),r&&Lk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jge(t,s,r){return s=$x(s),eje(t,$6()?Reflect.construct(s,r||[],$x(t).constructor):s.apply(t,r))}function eje(t,s){if(s&&(gc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tje(t)}function tje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($6=function(){return!!t})()}function $x(t){return $x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$x(t)}function sje(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ey(t,s)}function Ey(t,s){return Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ey(t,s)}function Df(t,s,r){return s=F6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function F6(t){var s=rje(t,"string");return gc(s)=="symbol"?s:s+""}function rje(t,s){if(gc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Of=function(t){function s(){return Xge(this,s),Jge(this,s,arguments)}return sje(s,t),Zge(s,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return Cs(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.angle,o=n.ticks,c=Vge(o,function(u){return u.coordinate||0}),d=Gge(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.angle,o=n.ticks,c=n.axisLine,d=Fk(n,Wge),u=o.reduce(function(f,p){return[Math.min(f[0],p.coordinate),Math.max(f[1],p.coordinate)]},[1/0,-1/0]),m=Cs(a,i,u[0],l),h=Cs(a,i,u[1],l),x=il(il(il({},jt(d,!1)),{},{fill:"none"},jt(c,!1)),{},{x1:m.x,y1:m.y,x2:h.x,y2:h.y});return ee.createElement("line",Ld({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=Fk(a,Qge),m=this.getTickTextAnchor(),h=jt(u,!1),x=jt(l,!1),f=i.map(function(p,g){var y=n.getTickValueCoord(p),b=il(il(il(il({textAnchor:m,transform:"rotate(".concat(90-o,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:d},x),{},{index:g},y),{},{payload:p});return ee.createElement(is,Ld({className:$t("recharts-polar-radius-axis-tick",w6(l)),key:"tick-".concat(p.coordinate)},ql(n.props,p,g)),s.renderTickItem(l,b,c?c(p.value,g):p.value))});return ee.createElement(is,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,l=n.tick;return!a||!a.length?null:ee.createElement(is,{className:$t("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),vr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var l;return ee.isValidElement(n)?l=ee.cloneElement(n,a):Dt(n)?l=n(a):l=ee.createElement(zl,Ld({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(v.PureComponent);Df(Of,"displayName","PolarRadiusAxis");Df(Of,"axisType","radiusAxis");Df(Of,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function jc(t){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},jc(t)}function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xl.apply(this,arguments)}function Bk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ll(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Bk(Object(r),!0).forEach(function(n){Ef(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nje(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Vk(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B6(n.key),n)}}function aje(t,s,r){return s&&Vk(t.prototype,s),r&&Vk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ije(t,s,r){return s=Fx(s),lje(t,L6()?Reflect.construct(s,r||[],Fx(t).constructor):s.apply(t,r))}function lje(t,s){if(s&&(jc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oje(t)}function oje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L6=function(){return!!t})()}function Fx(t){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fx(t)}function cje(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&My(t,s)}function My(t,s){return My=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},My(t,s)}function Ef(t,s,r){return s=B6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function B6(t){var s=dje(t,"string");return jc(s)=="symbol"?s:s+""}function dje(t,s){if(jc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uje=Math.PI/180,qk=1e-5,Mf=function(t){function s(){return nje(this,s),ije(this,s,arguments)}return cje(s,t),aje(s,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,m=Cs(i,l,o,n.coordinate),h=Cs(i,l,o+(c==="inner"?-1:1)*u,n.coordinate);return{x1:m.x,y1:m.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*uje),l;return i>qk?l=a==="outer"?"start":"end":i<-qk?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.radius,o=n.axisLine,c=n.axisLineType,d=ll(ll({},jt(this.props,!1)),{},{fill:"none"},jt(o,!1));if(c==="circle")return ee.createElement(Tf,xl({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,m=u.map(function(h){return Cs(a,i,l,h.coordinate)});return ee.createElement(kge,xl({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=jt(this.props,!1),m=jt(l,!1),h=ll(ll({},u),{},{fill:"none"},jt(o,!1)),x=i.map(function(f,p){var g=n.getTickLineCoord(f),y=n.getTickTextAnchor(f),b=ll(ll(ll({textAnchor:y},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:f,x:g.x2,y:g.y2});return ee.createElement(is,xl({className:$t("recharts-polar-angle-axis-tick",w6(l)),key:"tick-".concat(f.coordinate)},ql(n.props,f,p)),o&&ee.createElement("line",xl({className:"recharts-polar-angle-axis-tick-line"},h,g)),l&&s.renderTickItem(l,b,c?c(f.value,p):f.value))});return ee.createElement(is,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,l=n.axisLine;return i<=0||!a||!a.length?null:ee.createElement(is,{className:$t("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var l;return ee.isValidElement(n)?l=ee.cloneElement(n,a):Dt(n)?l=n(a):l=ee.createElement(zl,xl({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(v.PureComponent);Ef(Mf,"displayName","PolarAngleAxis");Ef(Mf,"axisType","angleAxis");Ef(Mf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var mje=z_,hje=mje(Object.getPrototypeOf,Object),xje=hje,pje=ci,fje=xje,gje=di,jje="[object Object]",vje=Function.prototype,yje=Object.prototype,V6=vje.toString,bje=yje.hasOwnProperty,Nje=V6.call(Object);function wje(t){if(!gje(t)||pje(t)!=jje)return!1;var s=fje(t);if(s===null)return!0;var r=bje.call(s,"constructor")&&s.constructor;return typeof r=="function"&&r instanceof r&&V6.call(r)==Nje}var Sje=wje;const Cje=ys(Sje);var kje=ci,Pje=di,Aje="[object Boolean]";function Tje(t){return t===!0||t===!1||Pje(t)&&kje(t)==Aje}var Dje=Tje;const Oje=ys(Dje);function Iu(t){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Iu(t)}function Lx(){return Lx=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lx.apply(this,arguments)}function Eje(t,s){return Ije(t)||_je(t,s)||Rje(t,s)||Mje()}function Mje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rje(t,s){if(t){if(typeof t=="string")return Uk(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uk(t,s)}}function Uk(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function _je(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Ije(t){if(Array.isArray(t))return t}function zk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hk(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?zk(Object(r),!0).forEach(function(n){$je(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $je(t,s,r){return s=Fje(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Fje(t){var s=Lje(t,"string");return Iu(s)=="symbol"?s:s+""}function Lje(t,s){if(Iu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Kk=function(s,r,n,a,i){var l=n-a,o;return o="M ".concat(s,",").concat(r),o+="L ".concat(s+n,",").concat(r),o+="L ".concat(s+n-l/2,",").concat(r+i),o+="L ".concat(s+n-l/2-a,",").concat(r+i),o+="L ".concat(s,",").concat(r," Z"),o},Bje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vje=function(s){var r=Hk(Hk({},Bje),s),n=v.useRef(),a=v.useState(-1),i=Eje(a,2),l=i[0],o=i[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&o(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,m=r.lowerWidth,h=r.height,x=r.className,f=r.animationEasing,p=r.animationDuration,g=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||h!==+h||u===0&&m===0||h===0)return null;var b=$t("recharts-trapezoid",x);return y?ee.createElement(Aa,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:h,x:c,y:d},duration:p,animationEasing:f,isActive:y},function(j){var w=j.upperWidth,N=j.lowerWidth,S=j.height,O=j.x,P=j.y;return ee.createElement(Aa,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:f},ee.createElement("path",Lx({},jt(r,!0),{className:b,d:Kk(O,P,w,N,S),ref:n})))}):ee.createElement("g",null,ee.createElement("path",Lx({},jt(r,!0),{className:b,d:Kk(c,d,u,m,h)})))},qje=["option","shapeType","propTransformer","activeClassName","isActive"];function $u(t){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$u(t)}function Uje(t,s){if(t==null)return{};var r=zje(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zje(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Gk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bx(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Gk(Object(r),!0).forEach(function(n){Hje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hje(t,s,r){return s=Kje(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Kje(t){var s=Gje(t,"string");return $u(s)=="symbol"?s:s+""}function Gje(t,s){if($u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if($u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Wje(t,s){return Bx(Bx({},s),t)}function Qje(t,s){return t==="symbols"}function Wk(t){var s=t.shapeType,r=t.elementProps;switch(s){case"rectangle":return ee.createElement(KN,r);case"trapezoid":return ee.createElement(Vje,r);case"sector":return ee.createElement(k6,r);case"symbols":if(Qje(s))return ee.createElement(uN,r);break;default:return null}}function Yje(t){return v.isValidElement(t)?t.props:t}function q6(t){var s=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?Wje:n,i=t.activeClassName,l=i===void 0?"recharts-active-shape":i,o=t.isActive,c=Uje(t,qje),d;if(v.isValidElement(s))d=v.cloneElement(s,Bx(Bx({},c),Yje(s)));else if(Dt(s))d=s(c);else if(Cje(s)&&!Oje(s)){var u=a(s,c);d=ee.createElement(Wk,{shapeType:r,elementProps:u})}else{var m=c;d=ee.createElement(Wk,{shapeType:r,elementProps:m})}return o?ee.createElement(is,{className:l},d):d}function Rf(t,s){return s!=null&&"trapezoids"in t.props}function _f(t,s){return s!=null&&"sectors"in t.props}function Fu(t,s){return s!=null&&"points"in t.props}function Xje(t,s){var r,n,a=t.x===(s==null||(r=s.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===s.x,i=t.y===(s==null||(n=s.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===s.y;return a&&i}function Zje(t,s){var r=t.endAngle===s.endAngle,n=t.startAngle===s.startAngle;return r&&n}function Jje(t,s){var r=t.x===s.x,n=t.y===s.y,a=t.z===s.z;return r&&n&&a}function eve(t,s){var r;return Rf(t,s)?r=Xje:_f(t,s)?r=Zje:Fu(t,s)&&(r=Jje),r}function tve(t,s){var r;return Rf(t,s)?r="trapezoids":_f(t,s)?r="sectors":Fu(t,s)&&(r="points"),r}function sve(t,s){if(Rf(t,s)){var r;return(r=s.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(_f(t,s)){var n;return(n=s.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Fu(t,s)?s.payload:{}}function rve(t){var s=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=tve(r,s),i=sve(r,s),l=n.filter(function(c,d){var u=Om(i,c),m=r.props[a].filter(function(f){var p=eve(r,s);return p(f,s)}),h=r.props[a].indexOf(m[m.length-1]),x=d===h;return u&&x}),o=n.indexOf(l[l.length-1]);return o}var kh;function vc(t){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},vc(t)}function ko(){return ko=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ko.apply(this,arguments)}function Qk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ws(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Qk(Object(r),!0).forEach(function(n){bn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nve(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Yk(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z6(n.key),n)}}function ave(t,s,r){return s&&Yk(t.prototype,s),r&&Yk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ive(t,s,r){return s=Vx(s),lve(t,U6()?Reflect.construct(s,r||[],Vx(t).constructor):s.apply(t,r))}function lve(t,s){if(s&&(vc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ove(t)}function ove(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U6=function(){return!!t})()}function Vx(t){return Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vx(t)}function cve(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ry(t,s)}function Ry(t,s){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ry(t,s)}function bn(t,s,r){return s=z6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function z6(t){var s=dve(t,"string");return vc(s)=="symbol"?s:s+""}function dve(t,s){if(vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tn=function(t){function s(r){var n;return nve(this,s),n=ive(this,s,[r]),bn(n,"pieRef",null),bn(n,"sectorRefs",[]),bn(n,"id",Qc("recharts-pie-")),bn(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Dt(a)&&a()}),bn(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Dt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return cve(s,t),ave(s,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=jt(this.props,!1),m=jt(l,!1),h=jt(o,!1),x=l&&l.offsetRadius||20,f=n.map(function(p,g){var y=(p.startAngle+p.endAngle)/2,b=Cs(p.cx,p.cy,p.outerRadius+x,y),j=ws(ws(ws(ws({},u),p),{},{stroke:"none"},m),{},{index:g,textAnchor:s.getTextAnchor(b.x,p.cx)},b),w=ws(ws(ws(ws({},u),p),{},{fill:"none",stroke:p.fill},h),{},{index:g,points:[Cs(p.cx,p.cy,p.outerRadius,y),b]}),N=c;return Rt(c)&&Rt(d)?N="value":Rt(c)&&(N=d),ee.createElement(is,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},o&&s.renderLabelLineItem(o,w,"line"),s.renderLabelItem(l,j,xr(p,N)))});return ee.createElement(is,{className:"recharts-pie-labels"},f)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return n.map(function(d,u){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var m=a.isActiveIndex(u),h=c&&a.hasActiveIndex()?c:null,x=m?l:h,f=ws(ws({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return ee.createElement(is,ko({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},ql(a.props,d,u),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(u)}),ee.createElement(q6,ko({option:x,isActive:m,shapeType:"sector"},f)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,m=this.state,h=m.prevSectors,x=m.prevIsAnimationActive;return ee.createElement(Aa,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(f){var p=f.t,g=[],y=i&&i[0],b=y.startAngle;return i.forEach(function(j,w){var N=h&&h[w],S=w>0?an(j,"paddingAngle",0):0;if(N){var O=en(N.endAngle-N.startAngle,j.endAngle-j.startAngle),P=ws(ws({},j),{},{startAngle:b+S,endAngle:b+O(p)+S});g.push(P),b=P.endAngle}else{var k=j.endAngle,R=j.startAngle,F=en(0,k-R),I=F(p),W=ws(ws({},j),{},{startAngle:b+S,endAngle:b+I+S});g.push(W),b=W.endAngle}}),ee.createElement(is,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!Om(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,m=a.innerRadius,h=a.outerRadius,x=a.isAnimationActive,f=this.state.isAnimationFinished;if(i||!l||!l.length||!ze(d)||!ze(u)||!ze(m)||!ze(h))return null;var p=$t("recharts-pie",o);return ee.createElement(is,{tabIndex:this.props.rootTabIndex,className:p,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(l),vr.renderCallByParent(this.props,null,!1),(!x||f)&&Xa.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(ee.isValidElement(n))return ee.cloneElement(n,a);if(Dt(n))return n(a);var l=$t("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return ee.createElement(Ex,ko({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(n,a,i){if(ee.isValidElement(n))return ee.cloneElement(n,a);var l=i;if(Dt(n)&&(l=n(a),ee.isValidElement(l)))return l;var o=$t("recharts-pie-label-text",typeof n!="boolean"&&!Dt(n)?n.className:"");return ee.createElement(zl,ko({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(v.PureComponent);kh=Tn;bn(Tn,"displayName","Pie");bn(Tn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!so.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});bn(Tn,"parseDeltaAngle",function(t,s){var r=Lr(s-t),n=Math.min(Math.abs(s-t),360);return r*n});bn(Tn,"getRealPieData",function(t){var s=t.data,r=t.children,n=jt(t,!1),a=ln(r,Ul);return s&&s.length?s.map(function(i,l){return ws(ws(ws({payload:i},n),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return ws(ws({},n),i.props)}):[]});bn(Tn,"parseCoordinateOfPie",function(t,s){var r=s.top,n=s.left,a=s.width,i=s.height,l=N6(a,i),o=n+Br(t.cx,a,a/2),c=r+Br(t.cy,i,i/2),d=Br(t.innerRadius,l,0),u=Br(t.outerRadius,l,l*.8),m=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});bn(Tn,"getComposedData",function(t){var s=t.item,r=t.offset,n=s.type.defaultProps!==void 0?ws(ws({},s.type.defaultProps),s.props):s.props,a=kh.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,l=n.startAngle,o=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,m=n.valueKey,h=n.tooltipType,x=Math.abs(n.minAngle),f=kh.parseCoordinateOfPie(n,r),p=kh.parseDeltaAngle(l,o),g=Math.abs(p),y=d;Rt(d)&&Rt(m)?(Yn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Rt(d)&&(Yn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=m);var b=a.filter(function(P){return xr(P,y,0)!==0}).length,j=(g>=360?b:b-1)*c,w=g-b*x-j,N=a.reduce(function(P,k){var R=xr(k,y,0);return P+(ze(R)?R:0)},0),S;if(N>0){var O;S=a.map(function(P,k){var R=xr(P,y,0),F=xr(P,u,k),I=(ze(R)?R:0)/N,W;k?W=O.endAngle+Lr(p)*c*(R!==0?1:0):W=l;var E=W+Lr(p)*((R!==0?x:0)+I*w),B=(W+E)/2,G=(f.innerRadius+f.outerRadius)/2,J=[{name:F,value:R,payload:P,dataKey:y,type:h}],C=Cs(f.cx,f.cy,G,B);return O=ws(ws(ws({percent:I,cornerRadius:i,name:F,tooltipPayload:J,midAngle:B,middleRadius:G,tooltipPosition:C},P),f),{},{value:xr(P,y),startAngle:W,endAngle:E,payload:P,paddingAngle:Lr(p)*c}),O})}return ws(ws({},f),{},{sectors:S,data:a})});var uve=Math.ceil,mve=Math.max;function hve(t,s,r,n){for(var a=-1,i=mve(uve((s-t)/(r||1)),0),l=Array(i);i--;)l[n?i:++a]=t,t+=r;return l}var xve=hve,pve=cI,Xk=1/0,fve=17976931348623157e292;function gve(t){if(!t)return t===0?t:0;if(t=pve(t),t===Xk||t===-Xk){var s=t<0?-1:1;return s*fve}return t===t?t:0}var H6=gve,jve=xve,vve=gf,uj=H6;function yve(t){return function(s,r,n){return n&&typeof n!="number"&&vve(s,r,n)&&(r=n=void 0),s=uj(s),r===void 0?(r=s,s=0):r=uj(r),n=n===void 0?s<r?1:-1:uj(n),jve(s,r,n,t)}}var bve=yve,Nve=bve,wve=Nve(),Sve=wve;const qx=ys(Sve);function Lu(t){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Lu(t)}function Zk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jk(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Zk(Object(r),!0).forEach(function(n){K6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K6(t,s,r){return s=Cve(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Cve(t){var s=kve(t,"string");return Lu(s)=="symbol"?s:s+""}function kve(t,s){if(Lu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Pve=["Webkit","Moz","O","ms"],Ave=function(s,r){var n=s.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Pve.reduce(function(i,l){return Jk(Jk({},i),{},K6({},l+n,r))},{});return a[s]=r,a};function yc(t){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},yc(t)}function Ux(){return Ux=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ux.apply(this,arguments)}function eP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mj(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?eP(Object(r),!0).forEach(function(n){Wr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tve(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function tP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W6(n.key),n)}}function Dve(t,s,r){return s&&tP(t.prototype,s),r&&tP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ove(t,s,r){return s=zx(s),Eve(t,G6()?Reflect.construct(s,r||[],zx(t).constructor):s.apply(t,r))}function Eve(t,s){if(s&&(yc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mve(t)}function Mve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G6=function(){return!!t})()}function zx(t){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zx(t)}function Rve(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&_y(t,s)}function _y(t,s){return _y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_y(t,s)}function Wr(t,s,r){return s=W6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function W6(t){var s=_ve(t,"string");return yc(s)=="symbol"?s:s+""}function _ve(t,s){if(yc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ive=function(s){var r=s.data,n=s.startIndex,a=s.endIndex,i=s.x,l=s.width,o=s.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=_d().domain(qx(0,c)).range([i,i+l-o]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(a),scale:d,scaleValues:u}},sP=function(s){return s.changedTouches&&!!s.changedTouches.length},bc=function(t){function s(r){var n;return Tve(this,s),n=Ove(this,s,[r]),Wr(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Wr(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Wr(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l?.({endIndex:i,startIndex:o})}),n.detachDragEndListener()}),Wr(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Wr(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Wr(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Wr(n,"handleSlideDragStart",function(a){var i=sP(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Rve(s,t),Dve(s,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,m=Math.min(a,i),h=Math.max(a,i),x=s.getIndexInRange(l,m),f=s.getIndexInRange(l,h);return{startIndex:x-x%c,endIndex:f===u?u:f-f%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=xr(i[n],o,n);return Dt(l)?l(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,h=c.startIndex,x=c.endIndex,f=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,d+u-m-o,d+u-m-l):p<0&&(p=Math.max(p,d-l,d-o));var g=this.getIndex({startX:l+p,endX:o+p});(g.startIndex!==h||g.endIndex!==x)&&f&&f(g),this.setState({startX:l+p,endX:o+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=sP(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,m=u.x,h=u.width,x=u.travellerWidth,f=u.onChange,p=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,m+h-x-d):b<0&&(b=Math.max(b,m-d)),y[l]=d+b;var j=this.getIndex(y),w=j.startIndex,N=j.endIndex,S=function(){var P=g.length-1;return l==="startX"&&(o>c?w%p===0:N%p===0)||o<c&&N===P||l==="endX"&&(o>c?N%p===0:w%p===0)||o>c&&N===P};this.setState(Wr(Wr({},l,d+b),"brushMoveStartX",n.pageX),function(){f&&S()&&f(j)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],m=o.indexOf(u);if(m!==-1){var h=m+n;if(!(h===-1||h>=o.length)){var x=o[h];a==="startX"&&x>=d||a==="endX"&&x<=c||this.setState(Wr({},a,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.fill,d=n.stroke;return ee.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.data,d=n.children,u=n.padding,m=v.Children.only(d);return m?ee.cloneElement(m,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,h=c.traveller,x=c.ariaLabel,f=c.data,p=c.startIndex,g=c.endIndex,y=Math.max(n,this.props.x),b=mj(mj({},jt(this.props,!1)),{},{x:y,y:d,width:u,height:m}),j=x||"Min value: ".concat((i=f[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=f[g])===null||l===void 0?void 0:l.name);return ee.createElement(is,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),o.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},s.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(n,a)+d,m=Math.max(Math.abs(a-n)-d,0);return ee.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:m,height:o})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,l=n.y,o=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,m=u.startX,h=u.endX,x=5,f={pointerEvents:"none",fill:d};return ee.createElement(is,{className:"recharts-brush-texts"},ee.createElement(zl,Ux({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,h)-x,y:l+o/2},f),this.getTextOfTick(a)),ee.createElement(zl,Ux({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,h)+c+x,y:l+o/2},f),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,l=n.children,o=n.x,c=n.y,d=n.width,u=n.height,m=n.alwaysShowText,h=this.state,x=h.startX,f=h.endX,p=h.isTextActive,g=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!ze(o)||!ze(c)||!ze(d)||!ze(u)||d<=0||u<=0)return null;var j=$t("recharts-brush",i),w=ee.Children.count(l)===1,N=Ave("userSelect","none");return ee.createElement(is,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(x,f),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(f,"endX"),(p||g||y||b||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,l=n.width,o=n.height,c=n.stroke,d=Math.floor(i+o/2)-1;return ee.createElement(ee.Fragment,null,ee.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),ee.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),ee.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return ee.isValidElement(n)?i=ee.cloneElement(n,a):Dt(n)?i=n(a):i=s.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,l=n.width,o=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,m=n.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return mj({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?Ive({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var h=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);n[c]>a?o=c:l=c}return a>=n[o]?o:l}}])}(v.PureComponent);Wr(bc,"displayName","Brush");Wr(bc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $ve=jN;function Fve(t,s){var r;return $ve(t,function(n,a,i){return r=s(n,a,i),!r}),!!r}var Lve=Fve,Bve=I_,Vve=Ea,qve=Lve,Uve=Kr,zve=gf;function Hve(t,s,r){var n=Uve(t)?Bve:qve;return r&&zve(t,s,r)&&(s=void 0),n(t,Vve(s))}var Kve=Hve;const Gve=ys(Kve);var ja=function(s,r){var n=s.alwaysShow,a=s.ifOverflow;return n&&(a="extendDomain"),a===r},rP=nI;function Wve(t,s,r){s=="__proto__"&&rP?rP(t,s,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[s]=r}var Qve=Wve,Yve=Qve,Xve=sI,Zve=Ea;function Jve(t,s){var r={};return s=Zve(s),Xve(t,function(n,a,i){Yve(r,a,s(n,a,i))}),r}var eye=Jve;const tye=ys(eye);function sye(t,s){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!s(t[r],r,t))return!1;return!0}var rye=sye,nye=jN;function aye(t,s){var r=!0;return nye(t,function(n,a,i){return r=!!s(n,a,i),r}),r}var iye=aye,lye=rye,oye=iye,cye=Ea,dye=Kr,uye=gf;function mye(t,s,r){var n=dye(t)?lye:oye;return r&&uye(t,s,r)&&(s=void 0),n(t,cye(s))}var hye=mye;const Q6=ys(hye);var xye=["x","y"];function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Bu(t)}function Iy(){return Iy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iy.apply(this,arguments)}function nP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yd(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?nP(Object(r),!0).forEach(function(n){pye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pye(t,s,r){return s=fye(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function fye(t){var s=gye(t,"string");return Bu(s)=="symbol"?s:s+""}function gye(t,s){if(Bu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function jye(t,s){if(t==null)return{};var r=vye(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vye(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yye(t,s){var r=t.x,n=t.y,a=jye(t,xye),i="".concat(r),l=parseInt(i,10),o="".concat(n),c=parseInt(o,10),d="".concat(s.height||a.height),u=parseInt(d,10),m="".concat(s.width||a.width),h=parseInt(m,10);return yd(yd(yd(yd(yd({},s),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:h,name:s.name,radius:s.radius})}function aP(t){return ee.createElement(q6,Iy({shapeType:"rectangle",propTransformer:yye,activeClassName:"recharts-active-bar"},t))}var bye=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof s=="number")return s;var i=ze(n)||KZ(n);return i?s(n,a):(i||Kl(),r)}},Nye=["value","background"],Y6;function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Nc(t)}function wye(t,s){if(t==null)return{};var r=Sye(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Sye(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Hx(){return Hx=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hx.apply(this,arguments)}function iP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?iP(Object(r),!0).forEach(function(n){Di(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cye(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function lP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z6(n.key),n)}}function kye(t,s,r){return s&&lP(t.prototype,s),r&&lP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pye(t,s,r){return s=Kx(s),Aye(t,X6()?Reflect.construct(s,r||[],Kx(t).constructor):s.apply(t,r))}function Aye(t,s){if(s&&(Nc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tye(t)}function Tye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X6=function(){return!!t})()}function Kx(t){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kx(t)}function Dye(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&$y(t,s)}function $y(t,s){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$y(t,s)}function Di(t,s,r){return s=Z6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Z6(t){var s=Oye(t,"string");return Nc(s)=="symbol"?s:s+""}function Oye(t,s){if(Nc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xn=function(t){function s(){var r;Cye(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Pye(this,s,[].concat(a)),Di(r,"state",{isAnimationFinished:!1}),Di(r,"id",Qc("recharts-bar-")),Di(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),Di(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return Dye(s,t),kye(s,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=jt(this.props,!1);return n&&n.map(function(m,h){var x=h===c,f=x?d:l,p=tr(tr(tr({},u),m),{},{isActive:x,option:f,index:h,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ee.createElement(is,Hx({className:"recharts-bar-rectangle"},ql(a.props,m,h),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(h)}),ee.createElement(aP,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,h=this.state.prevData;return ee.createElement(Aa,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var f=x.t,p=i.map(function(g,y){var b=h&&h[y];if(b){var j=en(b.x,g.x),w=en(b.y,g.y),N=en(b.width,g.width),S=en(b.height,g.height);return tr(tr({},g),{},{x:j(f),y:w(f),width:N(f),height:S(f)})}if(l==="horizontal"){var O=en(0,g.height),P=O(f);return tr(tr({},g),{},{y:g.y+g.height-P,height:P})}var k=en(0,g.width),R=k(f);return tr(tr({},g),{},{width:R})});return ee.createElement(is,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!Om(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=jt(this.props.background,!1);return i.map(function(d,u){d.value;var m=d.background,h=wye(d,Nye);if(!m)return null;var x=tr(tr(tr(tr(tr({},h),{},{fill:"#eee"},m),c),ql(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return ee.createElement(aP,Hx({key:"background-bar-".concat(u),option:n.props.background,isActive:u===o},x))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ln(u,Em);if(!m)return null;var h=d==="vertical"?l[0].height/2:l[0].width/2,x=function(g,y){var b=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:b,errorVal:xr(g,y)}},f={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ee.createElement(is,f,m.map(function(p){return ee.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:h,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,l=n.className,o=n.xAxis,c=n.yAxis,d=n.left,u=n.top,m=n.width,h=n.height,x=n.isAnimationActive,f=n.background,p=n.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,y=$t("recharts-bar",l),b=o&&o.allowDataOverflow,j=c&&c.allowDataOverflow,w=b||j,N=Rt(p)?this.id:p;return ee.createElement(is,{className:y},b||j?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(N)},ee.createElement("rect",{x:b?d:d-m/2,y:j?u:u-h/2,width:b?m:m*2,height:j?h:h*2}))):null,ee.createElement(is,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(N,")"):null},f?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,N),(!x||g)&&Xa.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(v.PureComponent);Y6=Xn;Di(Xn,"displayName","Bar");Di(Xn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!so.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Di(Xn,"getComposedData",function(t){var s=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,l=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,x=uxe(n,r);if(!x)return null;var f=s.layout,p=r.type.defaultProps,g=p!==void 0?tr(tr({},p),r.props):r.props,y=g.dataKey,b=g.children,j=g.minPointSize,w=f==="horizontal"?l:i,N=d?w.scale.domain():null,S=jxe({numericAxis:w}),O=ln(b,Ul),P=m.map(function(k,R){var F,I,W,E,B,G;d?F=mxe(d[u+R],N):(F=xr(k,y),Array.isArray(F)||(F=[S,F]));var J=bye(j,Y6.defaultProps.minPointSize)(F[1],R);if(f==="horizontal"){var C,V=[l.scale(F[0]),l.scale(F[1])],z=V[0],le=V[1];I=YC({axis:i,ticks:o,bandSize:a,offset:x.offset,entry:k,index:R}),W=(C=le??z)!==null&&C!==void 0?C:void 0,E=x.size;var Ce=z-le;if(B=Number.isNaN(Ce)?0:Ce,G={x:I,y:l.y,width:E,height:l.height},Math.abs(J)>0&&Math.abs(B)<Math.abs(J)){var H=Lr(B||J)*(Math.abs(J)-Math.abs(B));W-=H,B+=H}}else{var _=[i.scale(F[0]),i.scale(F[1])],se=_[0],te=_[1];if(I=se,W=YC({axis:l,ticks:c,bandSize:a,offset:x.offset,entry:k,index:R}),E=te-se,B=x.size,G={x:i.x,y:W,width:i.width,height:B},Math.abs(J)>0&&Math.abs(E)<Math.abs(J)){var we=Lr(E||J)*(Math.abs(J)-Math.abs(E));E+=we}}return tr(tr(tr({},k),{},{x:I,y:W,width:E,height:B,value:d?F:F[1],payload:k,background:G},O&&O[R]&&O[R].props),{},{tooltipPayload:[y6(r,k)],tooltipPosition:{x:I+E/2,y:W+B/2}})});return tr({data:P,layout:f},h)});function Vu(t){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Vu(t)}function Eye(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function oP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J6(n.key),n)}}function Mye(t,s,r){return s&&oP(t.prototype,s),r&&oP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ln(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?cP(Object(r),!0).forEach(function(n){If(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function If(t,s,r){return s=J6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function J6(t){var s=Rye(t,"string");return Vu(s)=="symbol"?s:s+""}function Rye(t,s){if(Vu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var e5=function(s,r,n,a,i){var l=s.width,o=s.height,c=s.layout,d=s.children,u=Object.keys(r),m={left:n.left,leftMirror:n.left,right:l-n.right,rightMirror:l-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!Yr(d,Xn);return u.reduce(function(x,f){var p=r[f],g=p.orientation,y=p.domain,b=p.padding,j=b===void 0?{}:b,w=p.mirror,N=p.reversed,S="".concat(g).concat(w?"Mirror":""),O,P,k,R,F;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var I=y[1]-y[0],W=1/0,E=p.categoricalDomain.sort(QZ);if(E.forEach(function(_,se){se>0&&(W=Math.min((_||0)-(E[se-1]||0),W))}),Number.isFinite(W)){var B=W/I,G=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(O=B*G/2),p.padding==="no-gap"){var J=Br(s.barCategoryGap,B*G),C=B*G/2;O=C-J-(C-J)/G*J}}}a==="xAxis"?P=[n.left+(j.left||0)+(O||0),n.left+n.width-(j.right||0)-(O||0)]:a==="yAxis"?P=c==="horizontal"?[n.top+n.height-(j.bottom||0),n.top+(j.top||0)]:[n.top+(j.top||0)+(O||0),n.top+n.height-(j.bottom||0)-(O||0)]:P=p.range,N&&(P=[P[1],P[0]]);var V=f6(p,i,h),z=V.scale,le=V.realScaleType;z.domain(y).range(P),g6(z);var Ce=j6(z,Ln(Ln({},p),{},{realScaleType:le}));a==="xAxis"?(F=g==="top"&&!w||g==="bottom"&&w,k=n.left,R=m[S]-F*p.height):a==="yAxis"&&(F=g==="left"&&!w||g==="right"&&w,k=m[S]-F*p.width,R=n.top);var H=Ln(Ln(Ln({},p),Ce),{},{realScaleType:le,x:k,y:R,scale:z,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return H.bandSize=Tx(H,Ce),!p.hide&&a==="xAxis"?m[S]+=(F?-1:1)*H.height:p.hide||(m[S]+=(F?-1:1)*H.width),Ln(Ln({},x),{},If({},f,H))},{})},t5=function(s,r){var n=s.x,a=s.y,i=r.x,l=r.y;return{x:Math.min(n,i),y:Math.min(a,l),width:Math.abs(i-n),height:Math.abs(l-a)}},_ye=function(s){var r=s.x1,n=s.y1,a=s.x2,i=s.y2;return t5({x:r,y:n},{x:a,y:i})},s5=function(){function t(s){Eye(this,t),this.scale=s}return Mye(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])}();If(s5,"EPS",1e-4);var GN=function(s){var r=Object.keys(s).reduce(function(n,a){return Ln(Ln({},n),{},If({},a,s5.create(s[a])))},{});return Ln(Ln({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return tye(a,function(c,d){return r[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return Q6(a,function(i,l){return r[l].isInRange(i)})}})};function Iye(t){return(t%180+180)%180}var $ye=function(s){var r=s.width,n=s.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Iye(a),l=i*Math.PI/180,o=Math.atan(n/r),c=l>o&&l<Math.PI-o?n/Math.sin(l):r/Math.cos(l);return Math.abs(c)},Fye=Ea,Lye=km,Bye=pf;function Vye(t){return function(s,r,n){var a=Object(s);if(!Lye(s)){var i=Fye(r);s=Bye(s),r=function(o){return i(a[o],o,a)}}var l=t(s,r,n);return l>-1?a[i?s[l]:l]:void 0}}var qye=Vye,Uye=H6;function zye(t){var s=Uye(t),r=s%1;return s===s?r?s-r:s:0}var Hye=zye,Kye=Y_,Gye=Ea,Wye=Hye,Qye=Math.max;function Yye(t,s,r){var n=t==null?0:t.length;if(!n)return-1;var a=r==null?0:Wye(r);return a<0&&(a=Qye(n+a,0)),Kye(t,Gye(s),a)}var Xye=Yye,Zye=qye,Jye=Xye,e0e=Zye(Jye),t0e=e0e;const s0e=ys(t0e);var r0e=ZX(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),WN=v.createContext(void 0),QN=v.createContext(void 0),r5=v.createContext(void 0),n5=v.createContext({}),a5=v.createContext(void 0),i5=v.createContext(0),l5=v.createContext(0),dP=function(s){var r=s.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,l=s.clipPathId,o=s.children,c=s.width,d=s.height,u=r0e(i);return ee.createElement(WN.Provider,{value:n},ee.createElement(QN.Provider,{value:a},ee.createElement(n5.Provider,{value:i},ee.createElement(r5.Provider,{value:u},ee.createElement(a5.Provider,{value:l},ee.createElement(i5.Provider,{value:d},ee.createElement(l5.Provider,{value:c},o)))))))},n0e=function(){return v.useContext(a5)},o5=function(s){var r=v.useContext(WN);r==null&&Kl();var n=r[s];return n==null&&Kl(),n},a0e=function(){var s=v.useContext(WN);return wi(s)},i0e=function(){var s=v.useContext(QN),r=s0e(s,function(n){return Q6(n.domain,Number.isFinite)});return r||wi(s)},c5=function(s){var r=v.useContext(QN);r==null&&Kl();var n=r[s];return n==null&&Kl(),n},l0e=function(){var s=v.useContext(r5);return s},o0e=function(){return v.useContext(n5)},YN=function(){return v.useContext(l5)},XN=function(){return v.useContext(i5)};function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},wc(t)}function c0e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function d0e(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u5(n.key),n)}}function u0e(t,s,r){return s&&d0e(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function m0e(t,s,r){return s=Gx(s),h0e(t,d5()?Reflect.construct(s,r||[],Gx(t).constructor):s.apply(t,r))}function h0e(t,s){if(s&&(wc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x0e(t)}function x0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d5=function(){return!!t})()}function Gx(t){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gx(t)}function p0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Fy(t,s)}function Fy(t,s){return Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fy(t,s)}function uP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?uP(Object(r),!0).forEach(function(n){ZN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZN(t,s,r){return s=u5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function u5(t){var s=f0e(t,"string");return wc(s)=="symbol"?s:s+""}function f0e(t,s){if(wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function g0e(t,s){return b0e(t)||y0e(t,s)||v0e(t,s)||j0e()}function j0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v0e(t,s){if(t){if(typeof t=="string")return hP(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hP(t,s)}}function hP(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function y0e(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function b0e(t){if(Array.isArray(t))return t}function Ly(){return Ly=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ly.apply(this,arguments)}var N0e=function(s,r){var n;return ee.isValidElement(s)?n=ee.cloneElement(s,r):Dt(s)?n=s(r):n=ee.createElement("line",Ly({},r,{className:"recharts-reference-line-line"})),n},w0e=function(s,r,n,a,i,l,o,c,d){var u=i.x,m=i.y,h=i.width,x=i.height;if(n){var f=d.y,p=s.y.apply(f,{position:l});if(ja(d,"discard")&&!s.y.isInRange(p))return null;var g=[{x:u+h,y:p},{x:u,y:p}];return c==="left"?g.reverse():g}if(r){var y=d.x,b=s.x.apply(y,{position:l});if(ja(d,"discard")&&!s.x.isInRange(b))return null;var j=[{x:b,y:m+x},{x:b,y:m}];return o==="top"?j.reverse():j}if(a){var w=d.segment,N=w.map(function(S){return s.apply(S,{position:l})});return ja(d,"discard")&&Gve(N,function(S){return!s.isInRange(S)})?null:N}return null};function S0e(t){var s=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,l=t.shape,o=t.className,c=t.alwaysShow,d=n0e(),u=o5(a),m=c5(i),h=l0e();if(!d||!h)return null;Yn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=GN({x:u.scale,y:m.scale}),f=pr(s),p=pr(r),g=n&&n.length===2,y=w0e(x,f,p,g,h,t.position,u.orientation,m.orientation,t);if(!y)return null;var b=g0e(y,2),j=b[0],w=j.x,N=j.y,S=b[1],O=S.x,P=S.y,k=ja(t,"hidden")?"url(#".concat(d,")"):void 0,R=mP(mP({clipPath:k},jt(t,!0)),{},{x1:w,y1:N,x2:O,y2:P});return ee.createElement(is,{className:$t("recharts-reference-line",o)},N0e(l,R),vr.renderCallByParent(t,_ye({x1:w,y1:N,x2:O,y2:P})))}var JN=function(t){function s(){return c0e(this,s),m0e(this,s,arguments)}return p0e(s,t),u0e(s,[{key:"render",value:function(){return ee.createElement(S0e,this.props)}}])}(ee.Component);ZN(JN,"displayName","ReferenceLine");ZN(JN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function By(){return By=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},By.apply(this,arguments)}function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Sc(t)}function xP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?xP(Object(r),!0).forEach(function(n){$f(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C0e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function k0e(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h5(n.key),n)}}function P0e(t,s,r){return s&&k0e(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0e(t,s,r){return s=Wx(s),T0e(t,m5()?Reflect.construct(s,r||[],Wx(t).constructor):s.apply(t,r))}function T0e(t,s){if(s&&(Sc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(t)}function D0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m5=function(){return!!t})()}function Wx(t){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wx(t)}function O0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Vy(t,s)}function Vy(t,s){return Vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vy(t,s)}function $f(t,s,r){return s=h5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function h5(t){var s=E0e(t,"string");return Sc(s)=="symbol"?s:s+""}function E0e(t,s){if(Sc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var M0e=function(s){var r=s.x,n=s.y,a=s.xAxis,i=s.yAxis,l=GN({x:a.scale,y:i.scale}),o=l.apply({x:r,y:n},{bandAware:!0});return ja(s,"discard")&&!l.isInRange(o)?null:o},Ff=function(t){function s(){return C0e(this,s),A0e(this,s,arguments)}return O0e(s,t),P0e(s,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,l=n.r,o=n.alwaysShow,c=n.clipPathId,d=pr(a),u=pr(i);if(Yn(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=M0e(this.props);if(!m)return null;var h=m.x,x=m.y,f=this.props,p=f.shape,g=f.className,y=ja(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=pP(pP({clipPath:y},jt(this.props,!0)),{},{cx:h,cy:x});return ee.createElement(is,{className:$t("recharts-reference-dot",g)},s.renderDot(p,b),vr.renderCallByParent(this.props,{x:h-l,y:x-l,width:2*l,height:2*l}))}}])}(ee.Component);$f(Ff,"displayName","ReferenceDot");$f(Ff,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});$f(Ff,"renderDot",function(t,s){var r;return ee.isValidElement(t)?r=ee.cloneElement(t,s):Dt(t)?r=t(s):r=ee.createElement(Tf,By({},s,{cx:s.cx,cy:s.cy,className:"recharts-reference-dot-dot"})),r});function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qy.apply(this,arguments)}function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cc(t)}function fP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?fP(Object(r),!0).forEach(function(n){Lf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R0e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _0e(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p5(n.key),n)}}function I0e(t,s,r){return s&&_0e(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function $0e(t,s,r){return s=Qx(s),F0e(t,x5()?Reflect.construct(s,r||[],Qx(t).constructor):s.apply(t,r))}function F0e(t,s){if(s&&(Cc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L0e(t)}function L0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x5=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qx(t)}function B0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Uy(t,s)}function Uy(t,s){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uy(t,s)}function Lf(t,s,r){return s=p5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function p5(t){var s=V0e(t,"string");return Cc(s)=="symbol"?s:s+""}function V0e(t,s){if(Cc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var q0e=function(s,r,n,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var h=GN({x:u.scale,y:m.scale}),x={x:s?h.x.apply(l,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},f={x:r?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return ja(i,"discard")&&(!h.isInRange(x)||!h.isInRange(f))?null:t5(x,f)},Bf=function(t){function s(){return R0e(this,s),$0e(this,s,arguments)}return B0e(s,t),I0e(s,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,l=n.y1,o=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;Yn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=pr(a),h=pr(i),x=pr(l),f=pr(o),p=this.props.shape;if(!m&&!h&&!x&&!f&&!p)return null;var g=q0e(m,h,x,f,this.props);if(!g&&!p)return null;var y=ja(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ee.createElement(is,{className:$t("recharts-reference-area",c)},s.renderRect(p,gP(gP({clipPath:y},jt(this.props,!0)),g)),vr.renderCallByParent(this.props,g))}}])}(ee.Component);Lf(Bf,"displayName","ReferenceArea");Lf(Bf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Lf(Bf,"renderRect",function(t,s){var r;return ee.isValidElement(t)?r=ee.cloneElement(t,s):Dt(t)?r=t(s):r=ee.createElement(KN,qy({},s,{className:"recharts-reference-area-rect"})),r});function f5(t,s,r){if(s<1)return[];if(s===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=s)n.push(t[a]);return n}function U0e(t,s,r){var n={width:t.width+s.width,height:t.height+s.height};return $ye(n,r)}function z0e(t,s,r){var n=r==="width",a=t.x,i=t.y,l=t.width,o=t.height;return s===1?{start:n?a:i,end:n?a+l:i+o}:{start:n?a+l:i+o,end:n?a:i}}function Yx(t,s,r,n,a){if(t*s<t*n||t*s>t*a)return!1;var i=r();return t*(s-t*i/2-n)>=0&&t*(s+t*i/2-a)<=0}function H0e(t,s){return f5(t,s+1)}function K0e(t,s,r,n,a){for(var i=(n||[]).slice(),l=s.start,o=s.end,c=0,d=1,u=l,m=function(){var f=n?.[c];if(f===void 0)return{v:f5(n,d)};var p=c,g,y=function(){return g===void 0&&(g=r(f,p)),g},b=f.coordinate,j=c===0||Yx(t,b,y,u,o);j||(c=0,u=l,d+=1),j&&(u=b+t*(y()/2+a),c+=d)},h;d<=i.length;)if(h=m(),h)return h.v;return[]}function qu(t){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},qu(t)}function jP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?jP(Object(r),!0).forEach(function(n){G0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G0e(t,s,r){return s=W0e(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function W0e(t){var s=Q0e(t,"string");return qu(s)=="symbol"?s:s+""}function Q0e(t,s){if(qu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Y0e(t,s,r,n,a){for(var i=(n||[]).slice(),l=i.length,o=s.start,c=s.end,d=function(h){var x=i[h],f,p=function(){return f===void 0&&(f=r(x,h)),f};if(h===l-1){var g=t*(x.coordinate+t*p()/2-c);i[h]=x=kr(kr({},x),{},{tickCoord:g>0?x.coordinate-g*t:x.coordinate})}else i[h]=x=kr(kr({},x),{},{tickCoord:x.coordinate});var y=Yx(t,x.tickCoord,p,o,c);y&&(c=x.tickCoord-t*(p()/2+a),i[h]=kr(kr({},x),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function X0e(t,s,r,n,a,i){var l=(n||[]).slice(),o=l.length,c=s.start,d=s.end;if(i){var u=n[o-1],m=r(u,o-1),h=t*(u.coordinate+t*m/2-d);l[o-1]=u=kr(kr({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var x=Yx(t,u.tickCoord,function(){return m},c,d);x&&(d=u.tickCoord-t*(m/2+a),l[o-1]=kr(kr({},u),{},{isShow:!0}))}for(var f=i?o-1:o,p=function(b){var j=l[b],w,N=function(){return w===void 0&&(w=r(j,b)),w};if(b===0){var S=t*(j.coordinate-t*N()/2-c);l[b]=j=kr(kr({},j),{},{tickCoord:S<0?j.coordinate-S*t:j.coordinate})}else l[b]=j=kr(kr({},j),{},{tickCoord:j.coordinate});var O=Yx(t,j.tickCoord,N,c,d);O&&(c=j.tickCoord+t*(N()/2+a),l[b]=kr(kr({},j),{},{isShow:!0}))},g=0;g<f;g++)p(g);return l}function ew(t,s,r){var n=t.tick,a=t.ticks,i=t.viewBox,l=t.minTickGap,o=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(ze(c)||so.isSsr)return H0e(a,typeof c=="number"&&ze(c)?c:0);var h=[],x=o==="top"||o==="bottom"?"width":"height",f=u&&x==="width"?Rd(u,{fontSize:s,letterSpacing:r}):{width:0,height:0},p=function(j,w){var N=Dt(d)?d(j.value,w):j.value;return x==="width"?U0e(Rd(N,{fontSize:s,letterSpacing:r}),f,m):Rd(N,{fontSize:s,letterSpacing:r})[x]},g=a.length>=2?Lr(a[1].coordinate-a[0].coordinate):1,y=z0e(i,g,x);return c==="equidistantPreserveStart"?K0e(g,y,p,a,l):(c==="preserveStart"||c==="preserveStartEnd"?h=X0e(g,y,p,a,l,c==="preserveStartEnd"):h=Y0e(g,y,p,a,l),h.filter(function(b){return b.isShow}))}var Z0e=["viewBox"],J0e=["viewBox"],ebe=["ticks"];function kc(t){"@babel/helpers - typeof";return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},kc(t)}function Po(){return Po=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Po.apply(this,arguments)}function vP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?vP(Object(r),!0).forEach(function(n){tw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hj(t,s){if(t==null)return{};var r=tbe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function tbe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sbe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function yP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j5(n.key),n)}}function rbe(t,s,r){return s&&yP(t.prototype,s),r&&yP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nbe(t,s,r){return s=Xx(s),abe(t,g5()?Reflect.construct(s,r||[],Xx(t).constructor):s.apply(t,r))}function abe(t,s){if(s&&(kc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ibe(t)}function ibe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g5=function(){return!!t})()}function Xx(t){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xx(t)}function lbe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&zy(t,s)}function zy(t,s){return zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zy(t,s)}function tw(t,s,r){return s=j5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function j5(t){var s=obe(t,"string");return kc(s)=="symbol"?s:s+""}function obe(t,s){if(kc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sd=function(t){function s(r){var n;return sbe(this,s),n=nbe(this,s,[r]),n.state={fontSize:"",letterSpacing:""},n}return lbe(s,t),rbe(s,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,l=hj(n,Z0e),o=this.props,c=o.viewBox,d=hj(o,J0e);return!qo(i,c)||!qo(l,d)||!qo(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,m=a.mirror,h=a.tickMargin,x,f,p,g,y,b,j=m?-1:1,w=n.tickSize||u,N=ze(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":x=f=n.coordinate,g=l+ +!m*c,p=g-j*w,b=p-j*h,y=N;break;case"left":p=g=n.coordinate,f=i+ +!m*o,x=f-j*w,y=x-j*h,b=N;break;case"right":p=g=n.coordinate,f=i+ +m*o,x=f+j*w,y=x+j*h,b=N;break;default:x=f=n.coordinate,g=l+ +m*c,p=g+j*w,b=p+j*h,y=N;break}return{line:{x1:x,y1:p,x2:f,y2:g},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,m=dr(dr(dr({},jt(this.props,!1)),jt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);m=dr(dr({},m),{},{x1:a,y1:i+h*o,x2:a+l,y2:i+h*o})}else{var x=+(c==="left"&&!d||c==="right"&&d);m=dr(dr({},m),{},{x1:a+x*l,y1:i,x2:a+x*l,y2:i+o})}return ee.createElement("line",Po({},m,{className:$t("recharts-cartesian-axis-line",an(u,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,m=o.tickFormatter,h=o.unit,x=ew(dr(dr({},this.props),{},{ticks:n}),a,i),f=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=jt(this.props,!1),y=jt(u,!1),b=dr(dr({},g),{},{fill:"none"},jt(c,!1)),j=x.map(function(w,N){var S=l.getTickLineCoord(w),O=S.line,P=S.tick,k=dr(dr(dr(dr({textAnchor:f,verticalAnchor:p},g),{},{stroke:"none",fill:d},y),P),{},{index:N,payload:w,visibleTicksCount:x.length,tickFormatter:m});return ee.createElement(is,Po({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},ql(l.props,w,N)),c&&ee.createElement("line",Po({},b,O,{className:$t("recharts-cartesian-axis-tick-line",an(c,"className"))})),u&&s.renderTickItem(u,k,"".concat(Dt(m)?m(w.value,N):w.value).concat(h||"")))});return ee.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var m=this.props,h=m.ticks,x=hj(m,ebe),f=h;return Dt(c)&&(f=h&&h.length>0?c(this.props):c(x)),l<=0||o<=0||!f||!f.length?null:ee.createElement(is,{className:$t("recharts-cartesian-axis",d),ref:function(g){n.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(f,this.state.fontSize,this.state.letterSpacing),vr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var l,o=$t(a.className,"recharts-cartesian-axis-tick-value");return ee.isValidElement(n)?l=ee.cloneElement(n,dr(dr({},a),{},{className:o})):Dt(n)?l=n(dr(dr({},a),{},{className:o})):l=ee.createElement(zl,Po({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(v.Component);tw(sd,"displayName","CartesianAxis");tw(sd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var cbe=["x1","y1","x2","y2","key"],dbe=["offset"];function Gl(t){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gl(t)}function bP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ar(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?bP(Object(r),!0).forEach(function(n){ube(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ube(t,s,r){return s=mbe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function mbe(t){var s=hbe(t,"string");return Gl(s)=="symbol"?s:s+""}function hbe(t,s){if(Gl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nl.apply(this,arguments)}function NP(t,s){if(t==null)return{};var r=xbe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xbe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var pbe=function(s){var r=s.fill;if(!r||r==="none")return null;var n=s.fillOpacity,a=s.x,i=s.y,l=s.width,o=s.height,c=s.ry;return ee.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function v5(t,s){var r;if(ee.isValidElement(t))r=ee.cloneElement(t,s);else if(Dt(t))r=t(s);else{var n=s.x1,a=s.y1,i=s.x2,l=s.y2,o=s.key,c=NP(s,cbe),d=jt(c,!1);d.offset;var u=NP(d,dbe);r=ee.createElement("line",Nl({},u,{x1:n,y1:a,x2:i,y2:l,fill:"none",key:o}))}return r}function fbe(t){var s=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=Ar(Ar({},t),{},{x1:s,y1:o,x2:s+r,y2:o,key:"line-".concat(c),index:c});return v5(a,d)});return ee.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function gbe(t){var s=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=Ar(Ar({},t),{},{x1:o,y1:s,x2:o,y2:s+r,key:"line-".concat(c),index:c});return v5(a,d)});return ee.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function jbe(t){var s=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,l=t.height,o=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!s||!s.length)return null;var u=o.map(function(h){return Math.round(h+a-a)}).sort(function(h,x){return h-x});a!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var f=!u[x+1],p=f?a+l-h:u[x+1]-h;if(p<=0)return null;var g=x%s.length;return ee.createElement("rect",{key:"react-".concat(x),y:h,x:n,height:p,width:i,stroke:"none",fill:s[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ee.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function vbe(t){var s=t.vertical,r=s===void 0?!0:s,n=t.verticalFill,a=t.fillOpacity,i=t.x,l=t.y,o=t.width,c=t.height,d=t.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,x){return h-x});i!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var f=!u[x+1],p=f?i+o-h:u[x+1]-h;if(p<=0)return null;var g=x%n.length;return ee.createElement("rect",{key:"react-".concat(x),x:h,y:l,width:p,height:c,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ee.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var ybe=function(s,r){var n=s.xAxis,a=s.width,i=s.height,l=s.offset;return p6(ew(Ar(Ar(Ar({},sd.defaultProps),n),{},{ticks:Ha(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,r)},bbe=function(s,r){var n=s.yAxis,a=s.width,i=s.height,l=s.offset;return p6(ew(Ar(Ar(Ar({},sd.defaultProps),n),{},{ticks:Ha(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,r)},fo={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Tl(t){var s,r,n,a,i,l,o=YN(),c=XN(),d=o0e(),u=Ar(Ar({},t),{},{stroke:(s=t.stroke)!==null&&s!==void 0?s:fo.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:fo.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:fo.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:fo.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:fo.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:fo.verticalFill,x:ze(t.x)?t.x:d.left,y:ze(t.y)?t.y:d.top,width:ze(t.width)?t.width:d.width,height:ze(t.height)?t.height:d.height}),m=u.x,h=u.y,x=u.width,f=u.height,p=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,b=a0e(),j=i0e();if(!ze(x)||x<=0||!ze(f)||f<=0||!ze(m)||m!==+m||!ze(h)||h!==+h)return null;var w=u.verticalCoordinatesGenerator||ybe,N=u.horizontalCoordinatesGenerator||bbe,S=u.horizontalPoints,O=u.verticalPoints;if((!S||!S.length)&&Dt(N)){var P=g&&g.length,k=N({yAxis:j?Ar(Ar({},j),{},{ticks:P?g:j.ticks}):void 0,width:o,height:c,offset:d},P?!0:p);Yn(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Gl(k),"]")),Array.isArray(k)&&(S=k)}if((!O||!O.length)&&Dt(w)){var R=y&&y.length,F=w({xAxis:b?Ar(Ar({},b),{},{ticks:R?y:b.ticks}):void 0,width:o,height:c,offset:d},R?!0:p);Yn(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Gl(F),"]")),Array.isArray(F)&&(O=F)}return ee.createElement("g",{className:"recharts-cartesian-grid"},ee.createElement(pbe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ee.createElement(fbe,Nl({},u,{offset:d,horizontalPoints:S,xAxis:b,yAxis:j})),ee.createElement(gbe,Nl({},u,{offset:d,verticalPoints:O,xAxis:b,yAxis:j})),ee.createElement(jbe,Nl({},u,{horizontalPoints:S})),ee.createElement(vbe,Nl({},u,{verticalPoints:O})))}Tl.displayName="CartesianGrid";var Nbe=["type","layout","connectNulls","ref"],wbe=["key"];function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Pc(t)}function wP(t,s){if(t==null)return{};var r=Sbe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Sbe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Bd(){return Bd=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bd.apply(this,arguments)}function SP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?SP(Object(r),!0).forEach(function(n){Bn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function go(t){return Abe(t)||Pbe(t)||kbe(t)||Cbe()}function Cbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kbe(t,s){if(t){if(typeof t=="string")return Hy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hy(t,s)}}function Pbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Abe(t){if(Array.isArray(t))return Hy(t)}function Hy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Tbe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function CP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b5(n.key),n)}}function Dbe(t,s,r){return s&&CP(t.prototype,s),r&&CP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Obe(t,s,r){return s=Zx(s),Ebe(t,y5()?Reflect.construct(s,r||[],Zx(t).constructor):s.apply(t,r))}function Ebe(t,s){if(s&&(Pc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mbe(t)}function Mbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y5=function(){return!!t})()}function Zx(t){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zx(t)}function Rbe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ky(t,s)}function Ky(t,s){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ky(t,s)}function Bn(t,s,r){return s=b5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function b5(t){var s=_be(t,"string");return Pc(s)=="symbol"?s:s+""}function _be(t,s){if(Pc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Za=function(t){function s(){var r;Tbe(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Obe(this,s,[].concat(a)),Bn(r,"state",{isAnimationFinished:!0,totalLength:0}),Bn(r,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),Bn(r,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(y,b){return y+b});if(!d)return r.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),m=l%d,h=o-l,x=[],f=0,p=0;f<c.length;p+=c[f],++f)if(p+c[f]>m){x=[].concat(go(c.slice(0,f)),[m-p]);break}var g=x.length%2===0?[0,h]:[h];return[].concat(go(s.repeat(c,u)),go(x),g).map(function(y){return"".concat(y,"px")}).join(", ")}),Bn(r,"id",Qc("recharts-line-")),Bn(r,"pathRef",function(l){r.mainCurve=l}),Bn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Bn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Rbe(s,t),Dbe(s,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ln(u,Em);if(!m)return null;var h=function(p,g){return{x:p.x,y:p.y,value:p.value,errorVal:xr(p.payload,g)}},x={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ee.createElement(is,x,m.map(function(f){return ee.cloneElement(f,{key:"bar-".concat(f.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,m=jt(this.props,!1),h=jt(c,!0),x=d.map(function(p,g){var y=Gr(Gr(Gr({key:"dot-".concat(g),r:3},m),h),{},{index:g,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return s.renderDotItem(c,y)}),f={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return ee.createElement(is,Bd({className:"recharts-line-dots",key:"dots"},f),x)}},{key:"renderCurveStatically",value:function(n,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var m=wP(o,Nbe),h=Gr(Gr(Gr({},jt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},l),{},{type:c,layout:d,connectNulls:u});return ee.createElement(Ex,Bd({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,h=l.animationEasing,x=l.animationId,f=l.animateNewValues,p=l.width,g=l.height,y=this.state,b=y.prevPoints,j=y.totalLength;return ee.createElement(Aa,{begin:u,duration:m,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var N=w.t;if(b){var S=b.length/o.length,O=o.map(function(I,W){var E=Math.floor(W*S);if(b[E]){var B=b[E],G=en(B.x,I.x),J=en(B.y,I.y);return Gr(Gr({},I),{},{x:G(N),y:J(N)})}if(f){var C=en(p*2,I.x),V=en(g/2,I.y);return Gr(Gr({},I),{},{x:C(N),y:V(N)})}return Gr(Gr({},I),{},{x:I.x,y:I.y})});return i.renderCurveStatically(O,n,a)}var P=en(0,j),k=P(N),R;if(c){var F="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});R=i.getStrokeDasharray(k,j,F)}else R=i.generateSimpleStrokeDasharray(j,k);return i.renderCurveStatically(o,n,a,{strokeDasharray:R})})}},{key:"renderCurve",value:function(n,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!Om(d,l))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,m=a.top,h=a.left,x=a.width,f=a.height,p=a.isAnimationActive,g=a.id;if(i||!o||!o.length)return null;var y=this.state.isAnimationFinished,b=o.length===1,j=$t("recharts-line",c),w=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,S=w||N,O=Rt(g)?this.id:g,P=(n=jt(l,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=P.r,R=k===void 0?3:k,F=P.strokeWidth,I=F===void 0?2:F,W=nJ(l)?l:{},E=W.clipDot,B=E===void 0?!0:E,G=R*2+I;return ee.createElement(is,{className:j},w||N?ee.createElement("defs",null,ee.createElement("clipPath",{id:"clipPath-".concat(O)},ee.createElement("rect",{x:w?h:h-x/2,y:N?m:m-f/2,width:w?x:x*2,height:N?f:f*2})),!B&&ee.createElement("clipPath",{id:"clipPath-dots-".concat(O)},ee.createElement("rect",{x:h-G/2,y:m-G/2,width:x+G,height:f+G}))):null,!b&&this.renderCurve(S,O),this.renderErrorBar(S,O),(b||l)&&this.renderDots(S,B,O),(!p||y)&&Xa.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(go(n),[0]):n,l=[],o=0;o<a;++o)l=[].concat(go(l),go(i));return l}},{key:"renderDotItem",value:function(n,a){var i;if(ee.isValidElement(n))i=ee.cloneElement(n,a);else if(Dt(n))i=n(a);else{var l=a.key,o=wP(a,wbe),c=$t("recharts-line-dot",typeof n!="boolean"?n.className:"");i=ee.createElement(Tf,Bd({key:l},o,{className:c}))}return i}}])}(v.PureComponent);Bn(Za,"displayName","Line");Bn(Za,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!so.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Bn(Za,"getComposedData",function(t){var s=t.props,r=t.xAxis,n=t.yAxis,a=t.xAxisTicks,i=t.yAxisTicks,l=t.dataKey,o=t.bandSize,c=t.displayedData,d=t.offset,u=s.layout,m=c.map(function(h,x){var f=xr(h,l);return u==="horizontal"?{x:QC({axis:r,ticks:a,bandSize:o,entry:h,index:x}),y:Rt(f)?null:n.scale(f),value:f,payload:h}:{x:Rt(f)?null:r.scale(f),y:QC({axis:n,ticks:i,bandSize:o,entry:h,index:x}),value:f,payload:h}});return Gr({points:m,layout:u},d)});function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ac(t)}function Ibe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function $be(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S5(n.key),n)}}function Fbe(t,s,r){return s&&$be(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lbe(t,s,r){return s=Jx(s),Bbe(t,N5()?Reflect.construct(s,r||[],Jx(t).constructor):s.apply(t,r))}function Bbe(t,s){if(s&&(Ac(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vbe(t)}function Vbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N5=function(){return!!t})()}function Jx(t){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jx(t)}function qbe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Gy(t,s)}function Gy(t,s){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gy(t,s)}function w5(t,s,r){return s=S5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function S5(t){var s=Ube(t,"string");return Ac(s)=="symbol"?s:s+""}function Ube(t,s){if(Ac(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wy.apply(this,arguments)}function zbe(t){var s=t.xAxisId,r=YN(),n=XN(),a=o5(s);return a==null?null:v.createElement(sd,Wy({},a,{className:$t("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(l){return Ha(l,!0)}}))}var va=function(t){function s(){return Ibe(this,s),Lbe(this,s,arguments)}return qbe(s,t),Fbe(s,[{key:"render",value:function(){return v.createElement(zbe,this.props)}}])}(v.Component);w5(va,"displayName","XAxis");w5(va,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tc(t)}function Hbe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Kbe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P5(n.key),n)}}function Gbe(t,s,r){return s&&Kbe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wbe(t,s,r){return s=ep(s),Qbe(t,C5()?Reflect.construct(s,r||[],ep(t).constructor):s.apply(t,r))}function Qbe(t,s){if(s&&(Tc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ybe(t)}function Ybe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C5=function(){return!!t})()}function ep(t){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ep(t)}function Xbe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Qy(t,s)}function Qy(t,s){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Qy(t,s)}function k5(t,s,r){return s=P5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function P5(t){var s=Zbe(t,"string");return Tc(s)=="symbol"?s:s+""}function Zbe(t,s){if(Tc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yy.apply(this,arguments)}var Jbe=function(s){var r=s.yAxisId,n=YN(),a=XN(),i=c5(r);return i==null?null:v.createElement(sd,Yy({},i,{className:$t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return Ha(o,!0)}}))},ya=function(t){function s(){return Hbe(this,s),Wbe(this,s,arguments)}return Xbe(s,t),Gbe(s,[{key:"render",value:function(){return v.createElement(Jbe,this.props)}}])}(v.Component);k5(ya,"displayName","YAxis");k5(ya,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function kP(t){return rNe(t)||sNe(t)||tNe(t)||eNe()}function eNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tNe(t,s){if(t){if(typeof t=="string")return Xy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xy(t,s)}}function sNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rNe(t){if(Array.isArray(t))return Xy(t)}function Xy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var Zy=function(s,r,n,a,i){var l=ln(s,JN),o=ln(s,Ff),c=[].concat(kP(l),kP(o)),d=ln(s,Bf),u="".concat(a,"Id"),m=a[0],h=r;if(c.length&&(h=c.reduce(function(p,g){if(g.props[u]===n&&ja(g.props,"extendDomain")&&ze(g.props[m])){var y=g.props[m];return[Math.min(p[0],y),Math.max(p[1],y)]}return p},h)),d.length){var x="".concat(m,"1"),f="".concat(m,"2");h=d.reduce(function(p,g){if(g.props[u]===n&&ja(g.props,"extendDomain")&&ze(g.props[x])&&ze(g.props[f])){var y=g.props[x],b=g.props[f];return[Math.min(p[0],y,b),Math.max(p[1],y,b)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,g){return ze(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},h)),h},A5={exports:{}};(function(t){var s=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,m,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new a(u,m||c,h),f=r?r+d:d;return c._events[f]?c._events[f].fn?c._events[f]=[c._events[f],x]:c._events[f].push(x):(c._events[f]=x,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)s.call(u,m)&&d.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=r?r+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,x=m.length,f=new Array(x);h<x;h++)f[h]=m[h].fn;return f},o.prototype.listenerCount=function(d){var u=r?r+d:d,m=this._events[u];return m?m.fn?1:m.length:0},o.prototype.emit=function(d,u,m,h,x,f){var p=r?r+d:d;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,j;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,m),!0;case 4:return g.fn.call(g.context,u,m,h),!0;case 5:return g.fn.call(g.context,u,m,h,x),!0;case 6:return g.fn.call(g.context,u,m,h,x,f),!0}for(j=1,b=new Array(y-1);j<y;j++)b[j-1]=arguments[j];g.fn.apply(g.context,b)}else{var w=g.length,N;for(j=0;j<w;j++)switch(g[j].once&&this.removeListener(d,g[j].fn,void 0,!0),y){case 1:g[j].fn.call(g[j].context);break;case 2:g[j].fn.call(g[j].context,u);break;case 3:g[j].fn.call(g[j].context,u,m);break;case 4:g[j].fn.call(g[j].context,u,m,h);break;default:if(!b)for(N=1,b=new Array(y-1);N<y;N++)b[N-1]=arguments[N];g[j].fn.apply(g[j].context,b)}}return!0},o.prototype.on=function(d,u,m){return i(this,d,u,m,!1)},o.prototype.once=function(d,u,m){return i(this,d,u,m,!0)},o.prototype.removeListener=function(d,u,m,h){var x=r?r+d:d;if(!this._events[x])return this;if(!u)return l(this,x),this;var f=this._events[x];if(f.fn)f.fn===u&&(!h||f.once)&&(!m||f.context===m)&&l(this,x);else{for(var p=0,g=[],y=f.length;p<y;p++)(f[p].fn!==u||h&&!f[p].once||m&&f[p].context!==m)&&g.push(f[p]);g.length?this._events[x]=g.length===1?g[0]:g:l(this,x)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&l(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(A5);var nNe=A5.exports;const aNe=ys(nNe);var xj=new aNe,pj="recharts.syncMouseEvents";function Uu(t){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Uu(t)}function iNe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function lNe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T5(n.key),n)}}function oNe(t,s,r){return s&&lNe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function fj(t,s,r){return s=T5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function T5(t){var s=cNe(t,"string");return Uu(s)=="symbol"?s:s+""}function cNe(t,s){if(Uu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dNe=function(){function t(){iNe(this,t),fj(this,"activeIndex",0),fj(this,"coordinateList",[]),fj(this,"layout","horizontal")}return oNe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,l=r.container,o=l===void 0?null:l,c=r.layout,d=c===void 0?null:c,u=r.offset,m=u===void 0?null:u,h=r.mouseHandlerCallback,x=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+c+d,h=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:m,pageY:h})}}}])}();function uNe(t,s,r){if(r==="number"&&s===!0&&Array.isArray(t)){var n=t?.[0],a=t?.[1];if(n&&a&&ze(n)&&ze(a))return!0}return!1}function mNe(t,s,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?s.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:s.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function D5(t){var s=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,l=Cs(s,r,n,a),o=Cs(s,r,n,i);return{points:[l,o],cx:s,cy:r,radius:n,startAngle:a,endAngle:i}}function hNe(t,s,r){var n,a,i,l;if(t==="horizontal")n=s.x,i=n,a=r.top,l=r.top+r.height;else if(t==="vertical")a=s.y,l=a,n=r.left,i=r.left+r.width;else if(s.cx!=null&&s.cy!=null)if(t==="centric"){var o=s.cx,c=s.cy,d=s.innerRadius,u=s.outerRadius,m=s.angle,h=Cs(o,c,d,m),x=Cs(o,c,u,m);n=h.x,a=h.y,i=x.x,l=x.y}else return D5(s);return[{x:n,y:a},{x:i,y:l}]}function zu(t){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},zu(t)}function PP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lh(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?PP(Object(r),!0).forEach(function(n){xNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xNe(t,s,r){return s=pNe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function pNe(t){var s=fNe(t,"string");return zu(s)=="symbol"?s:s+""}function fNe(t,s){if(zu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function gNe(t){var s,r,n=t.element,a=t.tooltipEventType,i=t.isActive,l=t.activeCoordinate,o=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,h=t.chartName,x=(s=n.props.cursor)!==null&&s!==void 0?s:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!l||h!=="ScatterChart"&&a!=="axis")return null;var f,p=Ex;if(h==="ScatterChart")f=l,p=_ge;else if(h==="BarChart")f=mNe(m,l,c,u),p=KN;else if(m==="radial"){var g=D5(l),y=g.cx,b=g.cy,j=g.radius,w=g.startAngle,N=g.endAngle;f={cx:y,cy:b,startAngle:w,endAngle:N,innerRadius:j,outerRadius:j},p=k6}else f={points:hNe(m,l,c)},p=Ex;var S=lh(lh(lh(lh({stroke:"#ccc",pointerEvents:"none"},c),f),jt(x,!1)),{},{payload:o,payloadIndex:d,className:$t("recharts-tooltip-cursor",x.className)});return v.isValidElement(x)?v.cloneElement(x,S):v.createElement(p,S)}var jNe=["item"],vNe=["children","className","width","height","style","compact","title","desc"];function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Dc(t)}function Ao(){return Ao=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ao.apply(this,arguments)}function AP(t,s){return NNe(t)||bNe(t,s)||E5(t,s)||yNe()}function yNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bNe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function NNe(t){if(Array.isArray(t))return t}function TP(t,s){if(t==null)return{};var r=wNe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wNe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function SNe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function CNe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M5(n.key),n)}}function kNe(t,s,r){return s&&CNe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function PNe(t,s,r){return s=tp(s),ANe(t,O5()?Reflect.construct(s,r||[],tp(t).constructor):s.apply(t,r))}function ANe(t,s){if(s&&(Dc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TNe(t)}function TNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O5=function(){return!!t})()}function tp(t){return tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tp(t)}function DNe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Jy(t,s)}function Jy(t,s){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jy(t,s)}function Oc(t){return MNe(t)||ENe(t)||E5(t)||ONe()}function ONe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5(t,s){if(t){if(typeof t=="string")return e0(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e0(t,s)}}function ENe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MNe(t){if(Array.isArray(t))return e0(t)}function e0(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function DP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Me(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?DP(Object(r),!0).forEach(function(n){yt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yt(t,s,r){return s=M5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function M5(t){var s=RNe(t,"string");return Dc(s)=="symbol"?s:s+""}function RNe(t,s){if(Dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var _Ne={xAxis:["bottom","top"],yAxis:["left","right"]},INe={width:"100%",height:"100%"},R5={x:0,y:0};function oh(t){return t}var $Ne=function(s,r){return r==="horizontal"?s.x:r==="vertical"?s.y:r==="centric"?s.angle:s.radius},FNe=function(s,r,n,a){var i=r.find(function(u){return u&&u.index===n});if(i){if(s==="horizontal")return{x:i.coordinate,y:a.y};if(s==="vertical")return{x:a.x,y:i.coordinate};if(s==="centric"){var l=i.coordinate,o=a.radius;return Me(Me(Me({},a),Cs(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return Me(Me(Me({},a),Cs(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return R5},Vf=function(s,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,l=(n??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(Oc(o),Oc(d)):o},[]);return l.length>0?l:s&&s.length&&ze(a)&&ze(i)?s.slice(a,i+1):[]};function _5(t){return t==="number"?[0,"auto"]:void 0}var t0=function(s,r,n,a){var i=s.graphicalItems,l=s.tooltipAxis,o=Vf(r,s);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:r;m&&s.dataStartIndex+s.dataEndIndex!==0&&s.dataEndIndex-s.dataStartIndex>=n&&(m=m.slice(s.dataStartIndex,s.dataEndIndex+1));var h;if(l.dataKey&&!l.allowDuplicatedCategory){var x=m===void 0?o:m;h=tx(x,l.dataKey,a)}else h=m&&m[n]||o[n];return h?[].concat(Oc(c),[y6(d,h)]):c},[])},OP=function(s,r,n,a){var i=a||{x:s.chartX,y:s.chartY},l=$Ne(i,n),o=s.orderedTooltipTicks,c=s.tooltipAxis,d=s.tooltipTicks,u=axe(l,o,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,h=t0(s,r,u,m),x=FNe(n,o,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:h,activeCoordinate:x}}return null},LNe=function(s,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=s.layout,m=s.children,h=s.stackOffset,x=x6(u,i);return n.reduce(function(f,p){var g,y=p.type.defaultProps!==void 0?Me(Me({},p.type.defaultProps),p.props):p.props,b=y.type,j=y.dataKey,w=y.allowDataOverflow,N=y.allowDuplicatedCategory,S=y.scale,O=y.ticks,P=y.includeHidden,k=y[l];if(f[k])return f;var R=Vf(s.data,{graphicalItems:a.filter(function(Ce){var H,_=l in Ce.props?Ce.props[l]:(H=Ce.type.defaultProps)===null||H===void 0?void 0:H[l];return _===k}),dataStartIndex:c,dataEndIndex:d}),F=R.length,I,W,E;uNe(y.domain,w,b)&&(I=py(y.domain,null,w),x&&(b==="number"||S!=="auto")&&(E=Id(R,j,"category")));var B=_5(b);if(!I||I.length===0){var G,J=(G=y.domain)!==null&&G!==void 0?G:B;if(j){if(I=Id(R,j,b),b==="category"&&x){var C=WZ(I);N&&C?(W=I,I=qx(0,F)):N||(I=JC(J,I,p).reduce(function(Ce,H){return Ce.indexOf(H)>=0?Ce:[].concat(Oc(Ce),[H])},[]))}else if(b==="category")N?I=I.filter(function(Ce){return Ce!==""&&!Rt(Ce)}):I=JC(J,I,p).reduce(function(Ce,H){return Ce.indexOf(H)>=0||H===""||Rt(H)?Ce:[].concat(Oc(Ce),[H])},[]);else if(b==="number"){var V=dxe(R,a.filter(function(Ce){var H,_,se=l in Ce.props?Ce.props[l]:(H=Ce.type.defaultProps)===null||H===void 0?void 0:H[l],te="hide"in Ce.props?Ce.props.hide:(_=Ce.type.defaultProps)===null||_===void 0?void 0:_.hide;return se===k&&(P||!te)}),j,i,u);V&&(I=V)}x&&(b==="number"||S!=="auto")&&(E=Id(R,j,"category"))}else x?I=qx(0,F):o&&o[k]&&o[k].hasStack&&b==="number"?I=h==="expand"?[0,1]:v6(o[k].stackGroups,c,d):I=h6(R,a.filter(function(Ce){var H=l in Ce.props?Ce.props[l]:Ce.type.defaultProps[l],_="hide"in Ce.props?Ce.props.hide:Ce.type.defaultProps.hide;return H===k&&(P||!_)}),b,u,!0);if(b==="number")I=Zy(m,I,k,i,O),J&&(I=py(J,I,w));else if(b==="category"&&J){var z=J,le=I.every(function(Ce){return z.indexOf(Ce)>=0});le&&(I=z)}}return Me(Me({},f),{},yt({},k,Me(Me({},y),{},{axisType:i,domain:I,categoricalDomain:E,duplicateDomain:W,originalDomain:(g=y.domain)!==null&&g!==void 0?g:B,isCategorical:x,layout:u})))},{})},BNe=function(s,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=s.layout,m=s.children,h=Vf(s.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),x=h.length,f=x6(u,i),p=-1;return n.reduce(function(g,y){var b=y.type.defaultProps!==void 0?Me(Me({},y.type.defaultProps),y.props):y.props,j=b[l],w=_5("number");if(!g[j]){p++;var N;return f?N=qx(0,x):o&&o[j]&&o[j].hasStack?(N=v6(o[j].stackGroups,c,d),N=Zy(m,N,j,i)):(N=py(w,h6(h,n.filter(function(S){var O,P,k=l in S.props?S.props[l]:(O=S.type.defaultProps)===null||O===void 0?void 0:O[l],R="hide"in S.props?S.props.hide:(P=S.type.defaultProps)===null||P===void 0?void 0:P.hide;return k===j&&!R}),"number",u),a.defaultProps.allowDataOverflow),N=Zy(m,N,j,i)),Me(Me({},g),{},yt({},j,Me(Me({axisType:i},a.defaultProps),{},{hide:!0,orientation:an(_Ne,"".concat(i,".").concat(p%2),null),domain:N,originalDomain:w,isCategorical:f,layout:u})))}return g},{})},VNe=function(s,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,l=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=s.children,m="".concat(a,"Id"),h=ln(u,i),x={};return h&&h.length?x=LNe(s,{axes:h,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(x=BNe(s,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),x},qNe=function(s){var r=wi(s),n=Ha(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:vN(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Tx(r,n)}},EP=function(s){var r=s.children,n=s.defaultShowTooltip,a=Yr(r,bc),i=0,l=0;return s.data&&s.data.length!==0&&(l=s.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!n}},UNe=function(s){return!s||!s.length?!1:s.some(function(r){var n=Qa(r&&r.type);return n&&n.indexOf("Bar")>=0})},MP=function(s){return s==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:s==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:s==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},zNe=function(s,r){var n=s.props,a=s.graphicalItems,i=s.xAxisMap,l=i===void 0?{}:i,o=s.yAxisMap,c=o===void 0?{}:o,d=n.width,u=n.height,m=n.children,h=n.margin||{},x=Yr(m,bc),f=Yr(m,fa),p=Object.keys(c).reduce(function(N,S){var O=c[S],P=O.orientation;return!O.mirror&&!O.hide?Me(Me({},N),{},yt({},P,N[P]+O.width)):N},{left:h.left||0,right:h.right||0}),g=Object.keys(l).reduce(function(N,S){var O=l[S],P=O.orientation;return!O.mirror&&!O.hide?Me(Me({},N),{},yt({},P,an(N,"".concat(P))+O.height)):N},{top:h.top||0,bottom:h.bottom||0}),y=Me(Me({},g),p),b=y.bottom;x&&(y.bottom+=x.props.height||bc.defaultProps.height),f&&r&&(y=oxe(y,a,n,r));var j=d-y.left-y.right,w=u-y.top-y.bottom;return Me(Me({brushBottom:b},y),{},{width:Math.max(j,0),height:Math.max(w,0)})},HNe=function(s,r){if(r==="xAxis")return s[r].width;if(r==="yAxis")return s[r].height},sw=function(s){var r=s.chartName,n=s.GraphicalChild,a=s.defaultTooltipEventType,i=a===void 0?"axis":a,l=s.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=s.axisComponents,d=s.legendContent,u=s.formatAxisMap,m=s.defaultProps,h=function(y,b){var j=b.graphicalItems,w=b.stackGroups,N=b.offset,S=b.updateId,O=b.dataStartIndex,P=b.dataEndIndex,k=y.barSize,R=y.layout,F=y.barGap,I=y.barCategoryGap,W=y.maxBarSize,E=MP(R),B=E.numericAxisName,G=E.cateAxisName,J=UNe(j),C=[];return j.forEach(function(V,z){var le=Vf(y.data,{graphicalItems:[V],dataStartIndex:O,dataEndIndex:P}),Ce=V.type.defaultProps!==void 0?Me(Me({},V.type.defaultProps),V.props):V.props,H=Ce.dataKey,_=Ce.maxBarSize,se=Ce["".concat(B,"Id")],te=Ce["".concat(G,"Id")],we={},ve=c.reduce(function(q,Se){var _e=b["".concat(Se.axisType,"Map")],K=Ce["".concat(Se.axisType,"Id")];_e&&_e[K]||Se.axisType==="zAxis"||Kl();var ke=_e[K];return Me(Me({},q),{},yt(yt({},Se.axisType,ke),"".concat(Se.axisType,"Ticks"),Ha(ke)))},we),X=ve[G],ce=ve["".concat(G,"Ticks")],Y=w&&w[se]&&w[se].hasStack&&vxe(V,w[se].stackGroups),he=Qa(V.type).indexOf("Bar")>=0,Fe=Tx(X,ce),Ve=[],rt=J&&ixe({barSize:k,stackGroups:w,totalSize:HNe(ve,G)});if(he){var gt,Vt,xs=Rt(_)?W:_,Qs=(gt=(Vt=Tx(X,ce,!0))!==null&&Vt!==void 0?Vt:xs)!==null&&gt!==void 0?gt:0;Ve=lxe({barGap:F,barCategoryGap:I,bandSize:Qs!==Fe?Qs:Fe,sizeList:rt[te],maxBarSize:xs}),Qs!==Fe&&(Ve=Ve.map(function(q){return Me(Me({},q),{},{position:Me(Me({},q.position),{},{offset:q.position.offset-Qs/2})})}))}var ue=V&&V.type&&V.type.getComposedData;ue&&C.push({props:Me(Me({},ue(Me(Me({},ve),{},{displayedData:le,props:y,dataKey:H,item:V,bandSize:Fe,barPosition:Ve,offset:N,stackedData:Y,layout:R,dataStartIndex:O,dataEndIndex:P}))),{},yt(yt(yt({key:V.key||"item-".concat(z)},B,ve[B]),G,ve[G]),"animationId",S)),childIndex:lJ(V,y.children),item:V})}),C},x=function(y,b){var j=y.props,w=y.dataStartIndex,N=y.dataEndIndex,S=y.updateId;if(!KS({props:j}))return null;var O=j.children,P=j.layout,k=j.stackOffset,R=j.data,F=j.reverseStackOrder,I=MP(P),W=I.numericAxisName,E=I.cateAxisName,B=ln(O,n),G=gxe(R,B,"".concat(W,"Id"),"".concat(E,"Id"),k,F),J=c.reduce(function(Ce,H){var _="".concat(H.axisType,"Map");return Me(Me({},Ce),{},yt({},_,VNe(j,Me(Me({},H),{},{graphicalItems:B,stackGroups:H.axisType===W&&G,dataStartIndex:w,dataEndIndex:N}))))},{}),C=zNe(Me(Me({},J),{},{props:j,graphicalItems:B}),b?.legendBBox);Object.keys(J).forEach(function(Ce){J[Ce]=u(j,J[Ce],C,Ce.replace("Map",""),r)});var V=J["".concat(E,"Map")],z=qNe(V),le=h(j,Me(Me({},J),{},{dataStartIndex:w,dataEndIndex:N,updateId:S,graphicalItems:B,stackGroups:G,offset:C}));return Me(Me({formattedGraphicalItems:le,graphicalItems:B,offset:C,stackGroups:G},z),J)},f=function(g){function y(b){var j,w,N;return SNe(this,y),N=PNe(this,y,[b]),yt(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),yt(N,"accessibilityManager",new dNe),yt(N,"handleLegendBBoxUpdate",function(S){if(S){var O=N.state,P=O.dataStartIndex,k=O.dataEndIndex,R=O.updateId;N.setState(Me({legendBBox:S},x({props:N.props,dataStartIndex:P,dataEndIndex:k,updateId:R},Me(Me({},N.state),{},{legendBBox:S}))))}}),yt(N,"handleReceiveSyncEvent",function(S,O,P){if(N.props.syncId===S){if(P===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(O)}}),yt(N,"handleBrushChange",function(S){var O=S.startIndex,P=S.endIndex;if(O!==N.state.dataStartIndex||P!==N.state.dataEndIndex){var k=N.state.updateId;N.setState(function(){return Me({dataStartIndex:O,dataEndIndex:P},x({props:N.props,dataStartIndex:O,dataEndIndex:P,updateId:k},N.state))}),N.triggerSyncEvent({dataStartIndex:O,dataEndIndex:P})}}),yt(N,"handleMouseEnter",function(S){var O=N.getMouseInfo(S);if(O){var P=Me(Me({},O),{},{isTooltipActive:!0});N.setState(P),N.triggerSyncEvent(P);var k=N.props.onMouseEnter;Dt(k)&&k(P,S)}}),yt(N,"triggeredAfterMouseMove",function(S){var O=N.getMouseInfo(S),P=O?Me(Me({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(P),N.triggerSyncEvent(P);var k=N.props.onMouseMove;Dt(k)&&k(P,S)}),yt(N,"handleItemMouseEnter",function(S){N.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),yt(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),yt(N,"handleMouseMove",function(S){S.persist(),N.throttleTriggeredAfterMouseMove(S)}),yt(N,"handleMouseLeave",function(S){N.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};N.setState(O),N.triggerSyncEvent(O);var P=N.props.onMouseLeave;Dt(P)&&P(O,S)}),yt(N,"handleOuterEvent",function(S){var O=iJ(S),P=an(N.props,"".concat(O));if(O&&Dt(P)){var k,R;/.*touch.*/i.test(O)?R=N.getMouseInfo(S.changedTouches[0]):R=N.getMouseInfo(S),P((k=R)!==null&&k!==void 0?k:{},S)}}),yt(N,"handleClick",function(S){var O=N.getMouseInfo(S);if(O){var P=Me(Me({},O),{},{isTooltipActive:!0});N.setState(P),N.triggerSyncEvent(P);var k=N.props.onClick;Dt(k)&&k(P,S)}}),yt(N,"handleMouseDown",function(S){var O=N.props.onMouseDown;if(Dt(O)){var P=N.getMouseInfo(S);O(P,S)}}),yt(N,"handleMouseUp",function(S){var O=N.props.onMouseUp;if(Dt(O)){var P=N.getMouseInfo(S);O(P,S)}}),yt(N,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),yt(N,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseDown(S.changedTouches[0])}),yt(N,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseUp(S.changedTouches[0])}),yt(N,"handleDoubleClick",function(S){var O=N.props.onDoubleClick;if(Dt(O)){var P=N.getMouseInfo(S);O(P,S)}}),yt(N,"handleContextMenu",function(S){var O=N.props.onContextMenu;if(Dt(O)){var P=N.getMouseInfo(S);O(P,S)}}),yt(N,"triggerSyncEvent",function(S){N.props.syncId!==void 0&&xj.emit(pj,N.props.syncId,S,N.eventEmitterSymbol)}),yt(N,"applySyncEvent",function(S){var O=N.props,P=O.layout,k=O.syncMethod,R=N.state.updateId,F=S.dataStartIndex,I=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)N.setState(Me({dataStartIndex:F,dataEndIndex:I},x({props:N.props,dataStartIndex:F,dataEndIndex:I,updateId:R},N.state)));else if(S.activeTooltipIndex!==void 0){var W=S.chartX,E=S.chartY,B=S.activeTooltipIndex,G=N.state,J=G.offset,C=G.tooltipTicks;if(!J)return;if(typeof k=="function")B=k(C,S);else if(k==="value"){B=-1;for(var V=0;V<C.length;V++)if(C[V].value===S.activeLabel){B=V;break}}var z=Me(Me({},J),{},{x:J.left,y:J.top}),le=Math.min(W,z.x+z.width),Ce=Math.min(E,z.y+z.height),H=C[B]&&C[B].value,_=t0(N.state,N.props.data,B),se=C[B]?{x:P==="horizontal"?C[B].coordinate:le,y:P==="horizontal"?Ce:C[B].coordinate}:R5;N.setState(Me(Me({},S),{},{activeLabel:H,activeCoordinate:se,activePayload:_,activeTooltipIndex:B}))}else N.setState(S)}),yt(N,"renderCursor",function(S){var O,P=N.state,k=P.isTooltipActive,R=P.activeCoordinate,F=P.activePayload,I=P.offset,W=P.activeTooltipIndex,E=P.tooltipAxisBandSize,B=N.getTooltipEventType(),G=(O=S.props.active)!==null&&O!==void 0?O:k,J=N.props.layout,C=S.key||"_recharts-cursor";return ee.createElement(gNe,{key:C,activeCoordinate:R,activePayload:F,activeTooltipIndex:W,chartName:r,element:S,isActive:G,layout:J,offset:I,tooltipAxisBandSize:E,tooltipEventType:B})}),yt(N,"renderPolarAxis",function(S,O,P){var k=an(S,"type.axisType"),R=an(N.state,"".concat(k,"Map")),F=S.type.defaultProps,I=F!==void 0?Me(Me({},F),S.props):S.props,W=R&&R[I["".concat(k,"Id")]];return v.cloneElement(S,Me(Me({},W),{},{className:$t(k,W.className),key:S.key||"".concat(O,"-").concat(P),ticks:Ha(W,!0)}))}),yt(N,"renderPolarGrid",function(S){var O=S.props,P=O.radialLines,k=O.polarAngles,R=O.polarRadius,F=N.state,I=F.radiusAxisMap,W=F.angleAxisMap,E=wi(I),B=wi(W),G=B.cx,J=B.cy,C=B.innerRadius,V=B.outerRadius;return v.cloneElement(S,{polarAngles:Array.isArray(k)?k:Ha(B,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(R)?R:Ha(E,!0).map(function(z){return z.coordinate}),cx:G,cy:J,innerRadius:C,outerRadius:V,key:S.key||"polar-grid",radialLines:P})}),yt(N,"renderLegend",function(){var S=N.state.formattedGraphicalItems,O=N.props,P=O.children,k=O.width,R=O.height,F=N.props.margin||{},I=k-(F.left||0)-(F.right||0),W=u6({children:P,formattedGraphicalItems:S,legendWidth:I,legendContent:d});if(!W)return null;var E=W.item,B=TP(W,jNe);return v.cloneElement(E,Me(Me({},B),{},{chartWidth:k,chartHeight:R,margin:F,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),yt(N,"renderTooltip",function(){var S,O=N.props,P=O.children,k=O.accessibilityLayer,R=Yr(P,mr);if(!R)return null;var F=N.state,I=F.isTooltipActive,W=F.activeCoordinate,E=F.activePayload,B=F.activeLabel,G=F.offset,J=(S=R.props.active)!==null&&S!==void 0?S:I;return v.cloneElement(R,{viewBox:Me(Me({},G),{},{x:G.left,y:G.top}),active:J,label:B,payload:J?E:[],coordinate:W,accessibilityLayer:k})}),yt(N,"renderBrush",function(S){var O=N.props,P=O.margin,k=O.data,R=N.state,F=R.offset,I=R.dataStartIndex,W=R.dataEndIndex,E=R.updateId;return v.cloneElement(S,{key:S.key||"_recharts-brush",onChange:rh(N.handleBrushChange,S.props.onChange),data:k,x:ze(S.props.x)?S.props.x:F.left,y:ze(S.props.y)?S.props.y:F.top+F.height+F.brushBottom-(P.bottom||0),width:ze(S.props.width)?S.props.width:F.width,startIndex:I,endIndex:W,updateId:"brush-".concat(E)})}),yt(N,"renderReferenceElement",function(S,O,P){if(!S)return null;var k=N,R=k.clipPathId,F=N.state,I=F.xAxisMap,W=F.yAxisMap,E=F.offset,B=S.type.defaultProps||{},G=S.props,J=G.xAxisId,C=J===void 0?B.xAxisId:J,V=G.yAxisId,z=V===void 0?B.yAxisId:V;return v.cloneElement(S,{key:S.key||"".concat(O,"-").concat(P),xAxis:I[C],yAxis:W[z],viewBox:{x:E.left,y:E.top,width:E.width,height:E.height},clipPathId:R})}),yt(N,"renderActivePoints",function(S){var O=S.item,P=S.activePoint,k=S.basePoint,R=S.childIndex,F=S.isRange,I=[],W=O.props.key,E=O.item.type.defaultProps!==void 0?Me(Me({},O.item.type.defaultProps),O.item.props):O.item.props,B=E.activeDot,G=E.dataKey,J=Me(Me({index:R,dataKey:G,cx:P.x,cy:P.y,r:4,fill:HN(O.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},jt(B,!1)),sx(B));return I.push(y.renderActiveDot(B,J,"".concat(W,"-activePoint-").concat(R))),k?I.push(y.renderActiveDot(B,Me(Me({},J),{},{cx:k.x,cy:k.y}),"".concat(W,"-basePoint-").concat(R))):F&&I.push(null),I}),yt(N,"renderGraphicChild",function(S,O,P){var k=N.filterFormatItem(S,O,P);if(!k)return null;var R=N.getTooltipEventType(),F=N.state,I=F.isTooltipActive,W=F.tooltipAxis,E=F.activeTooltipIndex,B=F.activeLabel,G=N.props.children,J=Yr(G,mr),C=k.props,V=C.points,z=C.isRange,le=C.baseLine,Ce=k.item.type.defaultProps!==void 0?Me(Me({},k.item.type.defaultProps),k.item.props):k.item.props,H=Ce.activeDot,_=Ce.hide,se=Ce.activeBar,te=Ce.activeShape,we=!!(!_&&I&&J&&(H||se||te)),ve={};R!=="axis"&&J&&J.props.trigger==="click"?ve={onClick:rh(N.handleItemMouseEnter,S.props.onClick)}:R!=="axis"&&(ve={onMouseLeave:rh(N.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:rh(N.handleItemMouseEnter,S.props.onMouseEnter)});var X=v.cloneElement(S,Me(Me({},k.props),ve));function ce(Se){return typeof W.dataKey=="function"?W.dataKey(Se.payload):null}if(we)if(E>=0){var Y,he;if(W.dataKey&&!W.allowDuplicatedCategory){var Fe=typeof W.dataKey=="function"?ce:"payload.".concat(W.dataKey.toString());Y=tx(V,Fe,B),he=z&&le&&tx(le,Fe,B)}else Y=V?.[E],he=z&&le&&le[E];if(te||se){var Ve=S.props.activeIndex!==void 0?S.props.activeIndex:E;return[v.cloneElement(S,Me(Me(Me({},k.props),ve),{},{activeIndex:Ve})),null,null]}if(!Rt(Y))return[X].concat(Oc(N.renderActivePoints({item:k,activePoint:Y,basePoint:he,childIndex:E,isRange:z})))}else{var rt,gt=(rt=N.getItemByXY(N.state.activeCoordinate))!==null&&rt!==void 0?rt:{graphicalItem:X},Vt=gt.graphicalItem,xs=Vt.item,Qs=xs===void 0?S:xs,ue=Vt.childIndex,q=Me(Me(Me({},k.props),ve),{},{activeIndex:ue});return[v.cloneElement(Qs,q),null,null]}return z?[X,null,null]:[X,null]}),yt(N,"renderCustomized",function(S,O,P){return v.cloneElement(S,Me(Me({key:"recharts-customized-".concat(P)},N.props),N.state))}),yt(N,"renderMap",{CartesianGrid:{handler:oh,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:oh},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:oh},YAxis:{handler:oh},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((j=b.id)!==null&&j!==void 0?j:Qc("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=dI(N.triggeredAfterMouseMove,(w=b.throttleDelay)!==null&&w!==void 0?w:1e3/60),N.state={},N}return DNe(y,g),kNe(y,[{key:"componentDidMount",value:function(){var j,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,w=j.children,N=j.data,S=j.height,O=j.layout,P=Yr(w,mr);if(P){var k=P.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,F=t0(this.state,N,k,R),I=this.state.tooltipTicks[k].coordinate,W=(this.state.offset.top+S)/2,E=O==="horizontal",B=E?{x:I,y:W}:{y:I,x:W},G=this.state.formattedGraphicalItems.find(function(C){var V=C.item;return V.type.name==="Scatter"});G&&(B=Me(Me({},B),G.props.points[k].tooltipPosition),F=G.props.points[k].tooltipPayload);var J={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:R,activePayload:F,activeCoordinate:B};this.setState(J),this.renderCursor(P),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var N,S;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(j){Dv([Yr(j.children,mr)],[Yr(this.props.children,mr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=Yr(this.props.children,mr);if(j&&typeof j.props.shared=="boolean"){var w=j.props.shared?"axis":"item";return o.indexOf(w)>=0?w:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var w=this.container,N=w.getBoundingClientRect(),S=Mce(N),O={chartX:Math.round(j.pageX-S.left),chartY:Math.round(j.pageY-S.top)},P=N.width/w.offsetWidth||1,k=this.inRange(O.chartX,O.chartY,P);if(!k)return null;var R=this.state,F=R.xAxisMap,I=R.yAxisMap,W=this.getTooltipEventType(),E=OP(this.state,this.props.data,this.props.layout,k);if(W!=="axis"&&F&&I){var B=wi(F).scale,G=wi(I).scale,J=B&&B.invert?B.invert(O.chartX):null,C=G&&G.invert?G.invert(O.chartY):null;return Me(Me({},O),{},{xValue:J,yValue:C},E)}return E?Me(Me({},O),E):null}},{key:"inRange",value:function(j,w){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,O=j/N,P=w/N;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,R=O>=k.left&&O<=k.left+k.width&&P>=k.top&&P<=k.top+k.height;return R?{x:O,y:P}:null}var F=this.state,I=F.angleAxisMap,W=F.radiusAxisMap;if(I&&W){var E=wi(I);return sk({x:O,y:P},E)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,w=this.getTooltipEventType(),N=Yr(j,mr),S={};N&&w==="axis"&&(N.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=sx(this.props,this.handleOuterEvent);return Me(Me({},O),S)}},{key:"addListener",value:function(){xj.on(pj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){xj.removeListener(pj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,w,N){for(var S=this.state.formattedGraphicalItems,O=0,P=S.length;O<P;O++){var k=S[O];if(k.item===j||k.props.key===j.key||w===Qa(k.item.type)&&N===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,w=this.state.offset,N=w.left,S=w.top,O=w.height,P=w.width;return ee.createElement("defs",null,ee.createElement("clipPath",{id:j},ee.createElement("rect",{x:N,y:S,height:O,width:P})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(w,N){var S=AP(N,2),O=S[0],P=S[1];return Me(Me({},w),{},yt({},O,P.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(w,N){var S=AP(N,2),O=S[0],P=S[1];return Me(Me({},w),{},yt({},O,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[j])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(j){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[j])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(j){var w=this.state,N=w.formattedGraphicalItems,S=w.activeItem;if(N&&N.length)for(var O=0,P=N.length;O<P;O++){var k=N[O],R=k.props,F=k.item,I=F.type.defaultProps!==void 0?Me(Me({},F.type.defaultProps),F.props):F.props,W=Qa(F.type);if(W==="Bar"){var E=(R.data||[]).find(function(C){return pge(j,C)});if(E)return{graphicalItem:k,payload:E}}else if(W==="RadialBar"){var B=(R.data||[]).find(function(C){return sk(j,C)});if(B)return{graphicalItem:k,payload:B}}else if(Rf(k,S)||_f(k,S)||Fu(k,S)){var G=rve({graphicalItem:k,activeTooltipItem:S,itemData:I.data}),J=I.activeIndex===void 0?G:I.activeIndex;return{graphicalItem:Me(Me({},k),{},{childIndex:J}),payload:Fu(k,S)?I.data[G]:k.props.data[G]}}}return null}},{key:"render",value:function(){var j=this;if(!KS(this))return null;var w=this.props,N=w.children,S=w.className,O=w.width,P=w.height,k=w.style,R=w.compact,F=w.title,I=w.desc,W=TP(w,vNe),E=jt(W,!1);if(R)return ee.createElement(dP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ee.createElement(Ev,Ao({},E,{width:O,height:P,title:F,desc:I}),this.renderClipPath(),WS(N,this.renderMap)));if(this.props.accessibilityLayer){var B,G;E.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,E.role=(G=this.props.role)!==null&&G!==void 0?G:"application",E.onKeyDown=function(C){j.accessibilityManager.keyboardEvent(C)},E.onFocus=function(){j.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return ee.createElement(dP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ee.createElement("div",Ao({className:$t("recharts-wrapper",S),style:Me({position:"relative",cursor:"default",width:O,height:P},k)},J,{ref:function(V){j.container=V}}),ee.createElement(Ev,Ao({},E,{width:O,height:P,title:F,desc:I,style:INe}),this.renderClipPath(),WS(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);yt(f,"displayName",r),yt(f,"defaultProps",Me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),yt(f,"getDerivedStateFromProps",function(g,y){var b=g.dataKey,j=g.data,w=g.children,N=g.width,S=g.height,O=g.layout,P=g.stackOffset,k=g.margin,R=y.dataStartIndex,F=y.dataEndIndex;if(y.updateId===void 0){var I=EP(g);return Me(Me(Me({},I),{},{updateId:0},x(Me(Me({props:g},I),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:j,prevWidth:N,prevHeight:S,prevLayout:O,prevStackOffset:P,prevMargin:k,prevChildren:w})}if(b!==y.prevDataKey||j!==y.prevData||N!==y.prevWidth||S!==y.prevHeight||O!==y.prevLayout||P!==y.prevStackOffset||!qo(k,y.prevMargin)){var W=EP(g),E={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},B=Me(Me({},OP(y,j,O)),{},{updateId:y.updateId+1}),G=Me(Me(Me({},W),E),B);return Me(Me(Me({},G),x(Me({props:g},G),y)),{},{prevDataKey:b,prevData:j,prevWidth:N,prevHeight:S,prevLayout:O,prevStackOffset:P,prevMargin:k,prevChildren:w})}if(!Dv(w,y.prevChildren)){var J,C,V,z,le=Yr(w,bc),Ce=le&&(J=(C=le.props)===null||C===void 0?void 0:C.startIndex)!==null&&J!==void 0?J:R,H=le&&(V=(z=le.props)===null||z===void 0?void 0:z.endIndex)!==null&&V!==void 0?V:F,_=Ce!==R||H!==F,se=!Rt(j),te=se&&!_?y.updateId:y.updateId+1;return Me(Me({updateId:te},x(Me(Me({props:g},y),{},{updateId:te,dataStartIndex:Ce,dataEndIndex:H}),y)),{},{prevChildren:w,dataStartIndex:Ce,dataEndIndex:H})}return null}),yt(f,"renderActiveDot",function(g,y,b){var j;return v.isValidElement(g)?j=v.cloneElement(g,y):Dt(g)?j=g(y):j=ee.createElement(Tf,y),ee.createElement(is,{className:"recharts-active-dot",key:b},j)});var p=v.forwardRef(function(y,b){return ee.createElement(f,Ao({},y,{ref:b}))});return p.displayName=f.displayName,p},rw=sw({chartName:"LineChart",GraphicalChild:Za,axisComponents:[{axisType:"xAxis",AxisComp:va},{axisType:"yAxis",AxisComp:ya}],formatAxisMap:e5}),s0=sw({chartName:"BarChart",GraphicalChild:Xn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:va},{axisType:"yAxis",AxisComp:ya}],formatAxisMap:e5}),sp=sw({chartName:"PieChart",GraphicalChild:Tn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Mf},{axisType:"radiusAxis",AxisComp:Of}],formatAxisMap:Txe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const gj={electricity:es,water:sm,internet:im,gas:y4,security:Kt,maintenance:Ms},ch={electricity:"#fbbf24",water:"#3b82f6",internet:"#8b5cf6",gas:"#f97316",security:"#10b981",maintenance:"#ef4444"},KNe=Yt({propertyId:Pe().min(1,"Property is required"),utilityType:Pe().min(1,"Utility type is required"),provider:Pe().optional(),accountNumber:Pe().optional(),amount:Pe().optional(),currency:Pe().default("AUD"),dueDate:Pe().min(1,"Due date is required"),billingMonth:Pe().min(1,"Billing month is required"),status:Pe().default("pending"),notes:Pe().optional()}),GNe=Yt({propertyId:Pe().min(1,"Property is required"),utilityType:Pe().min(1,"Utility type is required"),provider:Pe().min(1,"Provider is required"),accountNumber:Pe().min(1,"Account number is required"),packageInfo:Pe().optional(),expectedBillDay:Pe().min(1,"Expected bill day is required")}),WNe=Yt({propertyId:Pe().optional(),utilityType:Pe().optional(),alertType:Pe().min(1,"Alert type is required"),threshold:Pe().optional(),daysBeforeDue:Pe().optional(),notifyUsers:Sv(Pe()).optional(),notifyRoles:Sv(Pe()).optional()});function QNe(){const[t,s]=or(),r=new URLSearchParams(window.location.search),[n,a]=v.useState(r.get("propertyId")||"all"),[i,l]=v.useState("overview"),[o,c]=v.useState(!1),[d,u]=v.useState(!1),[m,h]=v.useState(!1),[x,f]=v.useState(null),[p,g]=v.useState(null),[y,b]=v.useState(null),[j,w]=v.useState("AUD"),{toast:N}=st(),{data:S=[]}=xe({queryKey:["/api/properties"]}),{data:O=[],isLoading:P}=xe({queryKey:["/api/utility/accounts",n],queryFn:async()=>{const K=n!=="all"?`?propertyId=${n}`:"",ke=await fetch(`/api/utility/accounts${K}`);if(!ke.ok)throw new Error("Failed to fetch accounts");return ke.json()}}),{data:k=[],isLoading:R}=xe({queryKey:["/api/utility/bills",n],queryFn:async()=>{const K=n!=="all"?`?propertyId=${n}`:"",ke=await fetch(`/api/utility/bills${K}`);if(!ke.ok)throw new Error("Failed to fetch bills");return ke.json()}}),{data:F,isLoading:I}=xe({queryKey:["/api/utility/analytics",n],queryFn:async()=>{const K=n!=="all"?`?propertyId=${n}`:"",ke=await fetch(`/api/utility/analytics${K}`);if(!ke.ok)throw new Error("Failed to fetch analytics");return ke.json()}}),{data:W=[],isLoading:E}=xe({queryKey:["/api/utility/alert-rules"]}),{data:B=[],isLoading:G}=xe({queryKey:["/api/utility/alerts"]}),J=Wt({resolver:ts(KNe),defaultValues:{propertyId:"",utilityType:"",provider:"",accountNumber:"",amount:"",currency:j,dueDate:"",billingMonth:"",status:"pending",notes:""}}),C=Wt({resolver:ts(GNe),defaultValues:{propertyId:"",utilityType:"",provider:"",accountNumber:"",packageInfo:"",expectedBillDay:""}}),V=Wt({resolver:ts(WNe),defaultValues:{propertyId:"",utilityType:"",alertType:"",threshold:"",daysBeforeDue:"",notifyUsers:[],notifyRoles:[]}});v.useEffect(()=>{const ke=new URLSearchParams(window.location.search).get("propertyId");ke&&a(ke)},[t]);const z=K=>{a(K);const ke=K!=="all"?`/utility-tracker?propertyId=${K}`:"/utility-tracker";s(ke)},le=Te({mutationFn:async K=>{const ke=new FormData;if(Object.keys(K).forEach(Le=>{K[Le]!==void 0&&K[Le]!==null&&K[Le]!==""&&ke.append(Le,K[Le])}),y&&ke.append("receipt",y),x)return await Ne("PATCH",`/api/utility/bills/${x.id}`,K);{const Le=await fetch("/api/utility/bills",{method:"POST",body:ke});if(!Le.ok)throw new Error("Failed to create bill");return Le.json()}},onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility/bills"]}),wt.invalidateQueries({queryKey:["/api/utility/analytics"]}),c(!1),f(null),b(null),J.reset(),N({title:x?"Bill Updated":"Bill Created",description:`Bill has been ${x?"updated":"created"} successfully.`})},onError:K=>{N({title:"Error",description:K.message||"Failed to save bill",variant:"destructive"})}}),Ce=Te({mutationFn:async K=>await Ne("DELETE",`/api/utility/bills/${K}`),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility/bills"]}),wt.invalidateQueries({queryKey:["/api/utility/analytics"]}),N({title:"Bill Deleted",description:"Bill has been deleted successfully."})},onError:K=>{N({title:"Error",description:K.message||"Failed to delete bill",variant:"destructive"})}}),H=Te({mutationFn:async K=>p?await Ne("PATCH",`/api/utility/accounts/${p.id}`,K):await Ne("POST","/api/utility/accounts",K),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility/accounts"]}),u(!1),g(null),C.reset(),N({title:p?"Account Updated":"Account Created",description:`Account has been ${p?"updated":"created"} successfully.`})},onError:K=>{N({title:"Error",description:K.message||"Failed to save account",variant:"destructive"})}}),_=Te({mutationFn:async K=>await Ne("DELETE",`/api/utility/accounts/${K}`),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility/accounts"]}),N({title:"Account Deleted",description:"Account has been deleted successfully."})},onError:K=>{N({title:"Error",description:K.message||"Failed to delete account",variant:"destructive"})}}),se=Te({mutationFn:async K=>await Ne("POST","/api/utility/alert-rules",K),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility/alert-rules"]}),h(!1),V.reset(),N({title:"Alert Rule Created",description:"Alert rule has been created successfully."})},onError:K=>{N({title:"Error",description:K.message||"Failed to create alert rule",variant:"destructive"})}}),te=Te({mutationFn:async({ruleId:K,isEnabled:ke})=>await Ne("PATCH",`/api/utility/alert-rules/${K}`,{isEnabled:ke}),onMutate:async({ruleId:K,isEnabled:ke})=>{await wt.cancelQueries({queryKey:["/api/utility/alert-rules"]});const Le=wt.getQueryData(["/api/utility/alert-rules"]);return wt.setQueryData(["/api/utility/alert-rules"],qt=>qt&&qt.map(vt=>vt.id===K?{...vt,isEnabled:ke}:vt)),{previousRules:Le}},onSuccess:()=>{N({title:"Alert Rule Updated",description:"Alert rule status has been updated."})},onError:(K,ke,Le)=>{Le?.previousRules&&wt.setQueryData(["/api/utility/alert-rules"],Le.previousRules),N({title:"Error",description:"Failed to update alert rule status.",variant:"destructive"})}}),we=Te({mutationFn:async({alertId:K,alertStatus:ke})=>await Ne("PATCH",`/api/utility/alerts/${K}`,{alertStatus:ke}),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility/alerts"]}),N({title:"Alert Updated",description:"Alert status has been updated."})}}),ve=Te({mutationFn:async K=>await Ne("PATCH",`/api/utility/bills/${K}`,{status:"paid"}),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/utility/bills"]}),wt.invalidateQueries({queryKey:["/api/utility/analytics"]}),N({title:"Bill Marked as Paid",description:"Bill status has been updated to paid."})}}),X=K=>{const ke={...K,currency:K.currency||j};le.mutate(ke)},ce=K=>{H.mutate(K)},Y=K=>{se.mutate(K)},he=K=>{f(K),J.reset({propertyId:K.propertyId?.toString()||"",utilityType:K.type||"",provider:K.provider||"",accountNumber:K.accountNumber||"",amount:K.amount?.toString()||"",currency:K.currency||"AUD",dueDate:K.dueDate?new Date(K.dueDate).toISOString().split("T")[0]:"",billingMonth:K.billingMonth||"",status:K.status||"pending",notes:K.notes||""}),c(!0)},Fe=K=>{g(K),C.reset({propertyId:K.propertyId?.toString()||"",utilityType:K.utilityType||"",provider:K.provider||"",accountNumber:K.accountNumber||"",packageInfo:K.packageInfo||"",expectedBillDay:K.expectedBillDay?.toString()||""}),u(!0)},Ve=()=>{f(null),b(null),J.reset({propertyId:n!=="all"?n:"",utilityType:"",provider:"",accountNumber:"",amount:"",currency:j,billingMonth:"",status:"pending",notes:""}),c(!0)},rt=()=>{g(null),C.reset({propertyId:n!=="all"?n:"",utilityType:"",provider:"",accountNumber:"",packageInfo:"",expectedBillDay:""}),u(!0)},gt=K=>({paid:e.jsx(U,{"data-testid":`badge-${K}`,className:"bg-green-500",children:"Paid"}),pending:e.jsx(U,{"data-testid":`badge-${K}`,className:"bg-yellow-500",children:"Pending"}),overdue:e.jsx(U,{"data-testid":`badge-${K}`,className:"bg-red-500",children:"Overdue"})})[K]||e.jsx(U,{"data-testid":`badge-${K}`,children:K}),Vt=F?.summary||{totalAmount:0,paidAmount:0,pendingAmount:0,overdueAmount:0,billCount:0},xs=F?.byType||{},Qs=F?.byMonth||{},ue=K=>{if(K==null)return 0;const ke=typeof K=="number"?K:parseFloat(K);return isNaN(ke)?0:ke},q=Object.entries(xs).map(([K,ke])=>({name:K.charAt(0).toUpperCase()+K.slice(1),value:ue(ke.total)})),Se=Object.entries(Qs).map(([K,ke])=>({month:K,amount:ue(ke.total)})).sort((K,ke)=>K.month.localeCompare(ke.month)),_e=[...k].sort((K,ke)=>new Date(ke.createdAt||0).getTime()-new Date(K.createdAt||0).getTime()).slice(0,10);return e.jsxs("div",{className:"p-6 space-y-6","data-testid":"utility-tracker",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Utility Tracker"}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-page-description",children:"Manage utility bills, accounts, and expenses"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(Z,{htmlFor:"property-filter",children:"Property:"}),e.jsxs(ae,{value:n,onValueChange:z,children:[e.jsx(re,{className:"w-[200px]","data-testid":"select-property-filter",children:e.jsx(ie,{placeholder:"Select property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),S.map(K=>e.jsx(A,{value:K.id.toString(),children:K.name},K.id))]})]})]})]}),e.jsxs(xt,{value:i,onValueChange:l,"data-testid":"tabs-utility",children:[e.jsxs(ht,{className:"grid w-full grid-cols-6",children:[e.jsx(de,{value:"overview","data-testid":"tab-overview",children:"Overview"}),e.jsx(de,{value:"bills","data-testid":"tab-bills",children:"Bills"}),e.jsx(de,{value:"accounts","data-testid":"tab-accounts",children:"Accounts"}),e.jsx(de,{value:"analytics","data-testid":"tab-analytics",children:"Analytics"}),e.jsx(de,{value:"alerts","data-testid":"tab-alerts",children:"Alerts"}),e.jsx(de,{value:"settings","data-testid":"tab-settings",children:"Settings"})]}),e.jsxs(me,{value:"overview",className:"space-y-6","data-testid":"content-overview",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(D,{"data-testid":"card-total-monthly",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Monthly"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-total-monthly",children:["$",ue(Vt.totalAmount).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Vt.billCount," bills"]})]})]}),e.jsxs(D,{"data-testid":"card-paid-bills",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Paid Bills"}),e.jsx(Ie,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-paid-amount",children:["$",ue(Vt.paidAmount).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed payments"})]})]}),e.jsxs(D,{"data-testid":"card-pending-bills",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending"}),e.jsx(tt,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-600","data-testid":"text-pending-amount",children:["$",ue(Vt.pendingAmount).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting payment"})]})]}),e.jsxs(D,{"data-testid":"card-overdue-bills",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(St,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600","data-testid":"text-overdue-amount",children:["$",ue(Vt.overdueAmount).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Past due date"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["electricity","water","internet","gas","security","maintenance"].map(K=>{const ke=gj[K],Le=xs[K]||{total:0,count:0};return e.jsxs(D,{"data-testid":`card-type-${K}`,children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium capitalize",children:K}),e.jsx(ke,{className:"h-4 w-4",style:{color:ch[K]}})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":`text-type-${K}-amount`,children:["$",ue(Le.total).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Le.count||0," bills"]})]})]},K)})}),e.jsxs(D,{"data-testid":"card-recent-bills",children:[e.jsx($,{children:e.jsx(L,{children:"Recent Bills"})}),e.jsx(T,{children:R?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):_e.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No bills found"}):e.jsx("div",{className:"space-y-2",children:_e.map(K=>{const ke=gj[K.type];return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`item-recent-bill-${K.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ke,{className:"h-5 w-5",style:{color:ch[K.type]}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:K.propertyName||"Unknown Property"}),e.jsxs("div",{className:"text-sm text-muted-foreground capitalize",children:[K.type," - ",K.provider||"No provider"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:["$",K.amount?parseFloat(K.amount).toFixed(2):"0.00"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Due:"," ",K.dueDate?new Date(K.dueDate).toLocaleDateString():"N/A"]})]}),gt(K.status)]})]},K.id)})})})]})]}),e.jsxs(me,{value:"bills",className:"space-y-4","data-testid":"content-bills",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Bills"}),e.jsxs(M,{onClick:Ve,"data-testid":"button-add-bill",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Upload Bill"]})]}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:R?e.jsx("div",{className:"text-center py-8",children:"Loading bills..."}):k.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No bills found. Upload your first bill to get started."}):e.jsxs(qs,{"data-testid":"table-bills",children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Provider"}),e.jsx(Oe,{children:"Amount"}),e.jsx(Oe,{children:"Due Date"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{className:"text-right",children:"Actions"})]})}),e.jsx(zs,{children:k.map(K=>e.jsxs(Nt,{"data-testid":`row-bill-${K.id}`,children:[e.jsx(De,{children:K.propertyName||"Unknown"}),e.jsx(De,{className:"capitalize",children:K.type}),e.jsx(De,{children:K.provider||"N/A"}),e.jsxs(De,{children:["$",K.amount?parseFloat(K.amount).toFixed(2):"0.00"]}),e.jsx(De,{children:K.dueDate?new Date(K.dueDate).toLocaleDateString():"N/A"}),e.jsx(De,{children:gt(K.status)}),e.jsx(De,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[K.status!=="paid"&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>ve.mutate(K.id),"data-testid":`button-mark-paid-${K.id}`,children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Mark Paid"]}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>he(K),"data-testid":`button-edit-bill-${K.id}`,children:e.jsx(Nr,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>{confirm("Are you sure you want to delete this bill?")&&Ce.mutate(K.id)},"data-testid":`button-delete-bill-${K.id}`,children:e.jsx(ev,{className:"h-3 w-3"})})]})})]},K.id))})]})})})]}),e.jsxs(me,{value:"accounts",className:"space-y-4","data-testid":"content-accounts",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Utility Accounts"}),e.jsxs(M,{onClick:rt,"data-testid":"button-add-account",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Add Account"]})]}),P?e.jsx("div",{className:"text-center py-8",children:"Loading accounts..."}):O.length===0?e.jsx(D,{children:e.jsx(T,{className:"pt-6 text-center py-8 text-muted-foreground",children:"No utility accounts found. Add your first account to get started."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(K=>{const ke=gj[K.utilityType];return e.jsxs(D,{"data-testid":`card-account-${K.id}`,children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5",style:{color:ch[K.utilityType]}}),e.jsx(L,{className:"capitalize",children:K.utilityType})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{size:"sm",variant:"outline",onClick:()=>Fe(K),"data-testid":`button-edit-account-${K.id}`,children:e.jsx(Nr,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>{confirm("Are you sure you want to delete this account?")&&_.mutate(K.id)},"data-testid":`button-delete-account-${K.id}`,children:e.jsx(ev,{className:"h-3 w-3"})})]})]})}),e.jsxs(T,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Property"}),e.jsx("div",{className:"font-medium",children:K.propertyName||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Provider"}),e.jsx("div",{className:"font-medium",children:K.provider})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Account Number"}),e.jsx("div",{className:"font-medium",children:K.accountNumber})]}),K.packageInfo&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Package"}),e.jsx("div",{className:"font-medium",children:K.packageInfo})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Billing Day"}),e.jsxs("div",{className:"font-medium",children:["Day ",K.expectedBillDay," of month"]})]})]})]},K.id)})})]}),e.jsxs(me,{value:"analytics",className:"space-y-4","data-testid":"content-analytics",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Analytics & Insights"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(D,{"data-testid":"card-monthly-trend",children:[e.jsx($,{children:e.jsx(L,{children:"Monthly Spending Trend"})}),e.jsx(T,{children:I?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):Se.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No data available"}):e.jsx(da,{width:"100%",height:300,children:e.jsxs(rw,{data:Se,children:[e.jsx(Tl,{strokeDasharray:"3 3"}),e.jsx(va,{dataKey:"month"}),e.jsx(ya,{}),e.jsx(mr,{}),e.jsx(fa,{}),e.jsx(Za,{type:"monotone",dataKey:"amount",stroke:"#8b5cf6",strokeWidth:2})]})})})]}),e.jsxs(D,{"data-testid":"card-type-breakdown",children:[e.jsx($,{children:e.jsx(L,{children:"Spending by Utility Type"})}),e.jsx(T,{children:I?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):q.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No data available"}):e.jsx(da,{width:"100%",height:300,children:e.jsxs(sp,{children:[e.jsx(Tn,{data:q,cx:"50%",cy:"50%",labelLine:!1,label:({name:K,value:ke})=>`${K}: $${ue(ke).toFixed(2)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:q.map((K,ke)=>e.jsx(Ul,{fill:ch[K.name.toLowerCase()]||"#8884d8"},`cell-${ke}`))}),e.jsx(mr,{})]})})})]})]})]}),e.jsxs(me,{value:"alerts",className:"space-y-4","data-testid":"content-alerts",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Rules & Notifications"}),e.jsxs(M,{onClick:()=>h(!0),"data-testid":"button-add-alert-rule",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Create Alert Rule"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs(D,{"data-testid":"card-alert-rules",children:[e.jsx($,{children:e.jsx(L,{children:"Active Alert Rules"})}),e.jsx(T,{children:E?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):W.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No alert rules configured. Create one to get started."}):e.jsx("div",{className:"space-y-2",children:W.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`item-alert-rule-${K.id}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:K.alertType.replace(/_/g," ")}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[K.propertyId?`Property ID: ${K.propertyId}`:"All Properties"," | ",K.utilityType?`${K.utilityType}`:"All Types",K.threshold&&` | Threshold: $${K.threshold}`,K.daysBeforeDue&&` | ${K.daysBeforeDue} days before due`]})]}),e.jsx(Pt,{checked:K.isEnabled,onCheckedChange:ke=>te.mutate({ruleId:K.id,isEnabled:ke}),"data-testid":`switch-alert-rule-${K.id}`})]},K.id))})})]}),e.jsxs(D,{"data-testid":"card-active-alerts",children:[e.jsx($,{children:e.jsx(L,{children:"Active Alerts"})}),e.jsx(T,{children:G?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):B.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No active alerts"}):e.jsx("div",{className:"space-y-2",children:B.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`item-alert-${K.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Is,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:K.alertMessage||"Alert notification"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[K.propertyName||"Multiple properties"," -"," ",K.alertType]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{"data-testid":`badge-alert-status-${K.id}`,children:K.alertStatus||"active"}),K.alertStatus==="active"&&e.jsx(M,{size:"sm",variant:"outline",onClick:()=>we.mutate({alertId:K.id,alertStatus:"acknowledged"}),"data-testid":`button-acknowledge-alert-${K.id}`,children:"Acknowledge"})]})]},K.id))})})]})]})]}),e.jsxs(me,{value:"settings",className:"space-y-4","data-testid":"content-settings",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Settings & Preferences"}),e.jsxs(D,{"data-testid":"card-currency-settings",children:[e.jsx($,{children:e.jsx(L,{children:"Currency Settings"})}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"default-currency",children:"Default Currency"}),e.jsxs(ae,{value:j,onValueChange:K=>w(K),children:[e.jsx(re,{id:"default-currency","data-testid":"select-default-currency",children:e.jsx(ie,{placeholder:"Select currency"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"AUD",children:"Australian Dollar (AUD)"}),e.jsx(A,{value:"USD",children:"US Dollar (USD)"}),e.jsx(A,{value:"EUR",children:"Euro (EUR)"}),e.jsx(A,{value:"GBP",children:"British Pound (GBP)"}),e.jsx(A,{value:"THB",children:"Thai Baht (THB)"})]})]})]})})]}),e.jsxs(D,{"data-testid":"card-notification-settings",children:[e.jsx($,{children:e.jsx(L,{children:"Notification Preferences"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Email Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Receive email alerts for upcoming and overdue bills"})]}),e.jsx(Pt,{defaultChecked:!0,"data-testid":"switch-email-notifications"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"High Amount Alerts"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Get notified when bills exceed a threshold"})]}),e.jsx(Pt,{defaultChecked:!0,"data-testid":"switch-high-amount-alerts"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Payment Reminders"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Receive reminders before bill due dates"})]}),e.jsx(Pt,{defaultChecked:!0,"data-testid":"switch-payment-reminders"})]})]})]}),e.jsxs(D,{"data-testid":"card-alert-thresholds",children:[e.jsx($,{children:e.jsx(L,{children:"Alert Thresholds"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(Z,{htmlFor:"high-amount-threshold",children:["High Amount Threshold (",j,")"]}),e.jsx(Q,{id:"high-amount-threshold",type:"number",placeholder:"500",defaultValue:"500","data-testid":"input-high-amount-threshold"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reminder-days",children:"Reminder Days Before Due"}),e.jsx(Q,{id:"reminder-days",type:"number",placeholder:"7",defaultValue:"7","data-testid":"input-reminder-days"})]})]})]})]})]}),e.jsx(Ge,{open:o,onOpenChange:c,children:e.jsxs(We,{className:"max-h-[90vh] overflow-y-auto","data-testid":"dialog-bill-form",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:x?"Edit Bill":"Upload Bill"}),e.jsx(Ct,{children:x?"Update bill information":"Add a new utility bill to the system"})]}),e.jsx(Qt,{...J,children:e.jsxs("form",{onSubmit:J.handleSubmit(X),className:"space-y-4",children:[e.jsx(ge,{control:J.control,name:"propertyId",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-bill-property",children:e.jsx(ie,{placeholder:"Select property"})})}),e.jsx(ne,{children:S.map(ke=>e.jsx(A,{value:ke.id.toString(),children:ke.name},ke.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:J.control,name:"utilityType",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Utility Type"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-bill-type",children:e.jsx(ie,{placeholder:"Select type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"electricity",children:"Electricity"}),e.jsx(A,{value:"water",children:"Water"}),e.jsx(A,{value:"internet",children:"Internet"}),e.jsx(A,{value:"gas",children:"Gas"}),e.jsx(A,{value:"security",children:"Security"}),e.jsx(A,{value:"maintenance",children:"Maintenance"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:J.control,name:"provider",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Provider (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{...K,placeholder:"e.g., AGL Energy","data-testid":"input-bill-provider"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:J.control,name:"amount",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Amount (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{...K,type:"number",step:"0.01",placeholder:"0.00","data-testid":"input-bill-amount"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:J.control,name:"dueDate",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Due Date"}),e.jsx(fe,{children:e.jsx(Q,{...K,type:"date","data-testid":"input-bill-due-date"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:J.control,name:"billingMonth",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Billing Month"}),e.jsx(fe,{children:e.jsx(Q,{...K,type:"month",placeholder:"2025-01","data-testid":"input-bill-month"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:J.control,name:"status",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Status"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-bill-status",children:e.jsx(ie,{placeholder:"Select status"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:J.control,name:"notes",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Notes (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{...K,placeholder:"Additional notes","data-testid":"input-bill-notes"})}),e.jsx(be,{})]})}),!x&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"receipt-file",children:"Receipt File (Optional)"}),e.jsx(Q,{id:"receipt-file",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:K=>b(K.target.files?.[0]||null),"data-testid":"input-bill-file"})]}),e.jsxs(Zs,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:le.isPending,"data-testid":"button-submit-bill",children:le.isPending?"Saving...":x?"Update Bill":"Create Bill"})]})]})})]})}),e.jsx(Ge,{open:d,onOpenChange:u,children:e.jsxs(We,{className:"max-h-[90vh] overflow-y-auto","data-testid":"dialog-account-form",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:p?"Edit Account":"Add Account"}),e.jsx(Ct,{children:p?"Update utility account information":"Add a new utility account"})]}),e.jsx(Qt,{...C,children:e.jsxs("form",{onSubmit:C.handleSubmit(ce),className:"space-y-4",children:[e.jsx(ge,{control:C.control,name:"propertyId",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-account-property",children:e.jsx(ie,{placeholder:"Select property"})})}),e.jsx(ne,{children:S.map(ke=>e.jsx(A,{value:ke.id.toString(),children:ke.name},ke.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:C.control,name:"utilityType",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Utility Type"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-account-type",children:e.jsx(ie,{placeholder:"Select type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"electricity",children:"Electricity"}),e.jsx(A,{value:"water",children:"Water"}),e.jsx(A,{value:"internet",children:"Internet"}),e.jsx(A,{value:"gas",children:"Gas"}),e.jsx(A,{value:"security",children:"Security"}),e.jsx(A,{value:"maintenance",children:"Maintenance"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:C.control,name:"provider",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Provider"}),e.jsx(fe,{children:e.jsx(Q,{...K,placeholder:"e.g., AGL Energy","data-testid":"input-account-provider"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:C.control,name:"accountNumber",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Account Number"}),e.jsx(fe,{children:e.jsx(Q,{...K,placeholder:"Enter account number","data-testid":"input-account-number"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:C.control,name:"packageInfo",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Package Info (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{...K,placeholder:"e.g., Business Plan 100","data-testid":"input-account-package"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:C.control,name:"expectedBillDay",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Expected Bill Day"}),e.jsx(fe,{children:e.jsx(Q,{...K,type:"number",min:"1",max:"31",placeholder:"1-31","data-testid":"input-account-bill-day"})}),e.jsx(be,{})]})}),e.jsxs(Zs,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:H.isPending,"data-testid":"button-submit-account",children:H.isPending?"Saving...":p?"Update Account":"Add Account"})]})]})})]})}),e.jsx(Ge,{open:m,onOpenChange:h,children:e.jsxs(We,{className:"max-h-[90vh] overflow-y-auto","data-testid":"dialog-alert-rule-form",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Alert Rule"}),e.jsx(Ct,{children:"Set up automated alerts for utility bills"})]}),e.jsx(Qt,{...V,children:e.jsxs("form",{onSubmit:V.handleSubmit(Y),className:"space-y-4",children:[e.jsx(ge,{control:V.control,name:"alertType",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Alert Type"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-alert-type",children:e.jsx(ie,{placeholder:"Select alert type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"upcoming_due_date",children:"Upcoming Due Date"}),e.jsx(A,{value:"overdue_bill",children:"Overdue Bill"}),e.jsx(A,{value:"high_amount",children:"High Amount"}),e.jsx(A,{value:"missing_receipt",children:"Missing Receipt"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:V.control,name:"propertyId",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property (Optional - Leave blank for all)"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-alert-property",children:e.jsx(ie,{placeholder:"All properties"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),S.map(ke=>e.jsx(A,{value:ke.id.toString(),children:ke.name},ke.id))]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:V.control,name:"utilityType",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Utility Type (Optional - Leave blank for all)"}),e.jsxs(ae,{onValueChange:K.onChange,value:K.value,children:[e.jsx(fe,{children:e.jsx(re,{"data-testid":"input-alert-utility-type",children:e.jsx(ie,{placeholder:"All types"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"electricity",children:"Electricity"}),e.jsx(A,{value:"water",children:"Water"}),e.jsx(A,{value:"internet",children:"Internet"}),e.jsx(A,{value:"gas",children:"Gas"}),e.jsx(A,{value:"security",children:"Security"}),e.jsx(A,{value:"maintenance",children:"Maintenance"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:V.control,name:"threshold",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Threshold Amount (for high_amount alerts)"}),e.jsx(fe,{children:e.jsx(Q,{...K,type:"number",step:"0.01",placeholder:"500","data-testid":"input-alert-threshold"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:V.control,name:"daysBeforeDue",render:({field:K})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Days Before Due (for upcoming_due_date alerts)"}),e.jsx(fe,{children:e.jsx(Q,{...K,type:"number",placeholder:"7","data-testid":"input-alert-days"})}),e.jsx(be,{})]})}),e.jsxs(Zs,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:se.isPending,"data-testid":"button-submit-alert-rule",children:se.isPending?"Creating...":"Create Rule"})]})]})})]})})]})}function I5(){const[t,s]=v.useState("all"),[r,n]=v.useState({email:!0,sms:!1,inApp:!0,slack:!1}),{data:a=[]}=xe({queryKey:["/api/properties"]}),{data:i=[]}=xe({queryKey:["/api/ai-insights"]}),{data:l=[]}=xe({queryKey:["/api/notifications/history"]}),{data:o=[]}=xe({queryKey:["/api/automation-rules"]}),c=h=>{switch(h){case"maintenance":return ss;case"booking":return Xe;case"guest":return ot;case"financial":return Ze;default:return Is}},d=h=>{switch(h){case"maintenance":return"text-blue-500";case"booking":return"text-green-500";case"guest":return"text-purple-500";case"financial":return"text-orange-500";default:return"text-gray-500"}},u=h=>{switch(h){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=(h,x)=>new Intl.NumberFormat("en-US",{style:"currency",currency:x}).format(h);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Nn,{className:"w-8 h-8"}),"AI Notifications & Reminders"]}),e.jsx("p",{className:"text-gray-600",children:"Intelligent alerts and automated reminders powered by AI analysis"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(ss,{className:"w-4 h-4 mr-2"}),"Configure AI"]}),e.jsxs(M,{children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Test Notification"]})]})]}),e.jsxs(xt,{defaultValue:"insights",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"insights",children:"AI Insights"}),e.jsx(de,{value:"automation",children:"Automation Rules"}),e.jsx(de,{value:"history",children:"History"}),e.jsx(de,{value:"channels",children:"Channels"}),e.jsx(de,{value:"settings",children:"Settings"})]}),e.jsxs(me,{value:"insights",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Insights"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(Nn,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"High Priority"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.filter(h=>h.priority==="high").length})]}),e.jsx(St,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Confidence"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.round(i.reduce((h,x)=>h+x.confidence,0)/i.length),"%"]})]}),e.jsx(ar,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Savings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"â‚¹2,500"})]}),e.jsx(Ot,{className:"w-8 h-8 text-blue-500"})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Z,{children:"Filter by Property:"}),e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{className:"w-64",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),a.map(h=>e.jsx(A,{value:h.name,children:h.name},h.id))]})]})]})})}),e.jsx("div",{className:"space-y-4",children:i.map(h=>{const x=c(h.type);return e.jsx(D,{className:"border-l-4 border-l-blue-500",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:`w-6 h-6 ${d(h.type)}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.title}),e.jsx("p",{className:"text-sm text-gray-600",children:h.property})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:u(h.priority),children:h.priority}),e.jsxs(U,{variant:"outline",children:[h.confidence,"% confidence"]})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:h.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Suggested Action"}),e.jsx("p",{className:"text-blue-800",children:h.suggestedAction})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Estimated Cost"}),e.jsx("p",{className:"text-green-800",children:h.estimatedCost>0?m(h.estimatedCost,h.currency):"No cost"})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Due Date"}),e.jsx("p",{className:"text-orange-800",children:h.dueDate})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"AI Reasoning:"}),e.jsx("p",{className:"text-gray-700 text-sm",children:h.aiReasoning})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Accept & Schedule"]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Discuss"]}),e.jsx(M,{variant:"outline",size:"sm",children:"Dismiss"})]})]})},h.id)})})]}),e.jsx(me,{value:"automation",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Automation Rules"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:o.map(h=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zn,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.frequency})]})]}),e.jsx(Pt,{checked:h.enabled})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Trigger Condition"}),e.jsx("p",{children:h.trigger})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Action"}),e.jsx("p",{children:h.action})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-gray-500 font-medium text-sm",children:"Applied to:"}),e.jsx("div",{className:"flex gap-2 mt-1",children:h.properties.map((x,f)=>e.jsx(U,{variant:"outline",children:x},f))})]})]},h.id))})})]})}),e.jsx(me,{value:"history",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Notification History"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:l.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h.channel==="email"&&e.jsx(Sa,{className:"w-4 h-4 text-blue-500"}),h.channel==="sms"&&e.jsx(iB,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:h.subject}),e.jsxs("p",{className:"text-xs text-gray-600",children:["To: ",h.recipient]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.timestamp})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(U,{className:h.status==="delivered"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:h.status})})]},h.id))})})]})}),e.jsx(me,{value:"channels",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Email Notifications"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enable Email Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send notifications via email"})]}),e.jsx(Pt,{checked:r.email,onCheckedChange:h=>n({...r,email:h})})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Default Recipients"}),e.jsx(Q,{value:"admin@hostpilotpro.com",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Email Template"}),e.jsxs(ae,{defaultValue:"standard",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"standard",children:"Standard Template"}),e.jsx(A,{value:"detailed",children:"Detailed Template"}),e.jsx(A,{value:"minimal",children:"Minimal Template"})]})]})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"SMS Notifications"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enable SMS Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send critical alerts via SMS"})]}),e.jsx(Pt,{checked:r.sms,onCheckedChange:h=>n({...r,sms:h})})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Phone Number"}),e.jsx(Q,{value:"+66 89 123 4567",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Priority Threshold"}),e.jsxs(ae,{defaultValue:"high",children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Alerts"}),e.jsx(A,{value:"medium",children:"Medium & High"}),e.jsx(A,{value:"high",children:"High Priority Only"})]})]})]})]})]})]})}),e.jsx(me,{value:"settings",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"AI Configuration"})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"AI Analysis Frequency"}),e.jsxs(ae,{defaultValue:"hourly",children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"realtime",children:"Real-time"}),e.jsx(A,{value:"hourly",children:"Every Hour"}),e.jsx(A,{value:"daily",children:"Daily"}),e.jsx(A,{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Minimum Confidence Level"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(Q,{type:"range",min:"50",max:"95",defaultValue:"75",className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium",children:"75%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Learning Mode"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow AI to learn from user actions"})]}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Proactive Suggestions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate preventive recommendations"})]}),e.jsx(Pt,{defaultChecked:!0})]}),e.jsx(M,{children:"Save AI Settings"})]})]})})]})]})}const YNe=Object.freeze(Object.defineProperty({__proto__:null,default:I5},Symbol.toStringTag,{value:"Module"}));function XNe(){const[t,s]=v.useState("all"),[r,n]=v.useState("month"),[a,i]=v.useState(!1),[l,o]=v.useState({reportType:"comprehensive",includeRevenue:!0,includeExpenses:!0,includeOwnerBalances:!0,includeTransactions:!0,format:"pdf"}),{data:c=[]}=xe({queryKey:["/api/properties"],select:j=>j.map(w=>({id:w.id,name:w.name,location:w.location||"Unknown"}))}),d={totalRevenue:245e3,totalExpenses:89500,netProfit:155500,profitMargin:63.4,ownerPayouts:171500,pendingPayouts:28750,commissions:24500,managementFees:36750},u=[{source:"Airbnb",amount:125e3,percentage:51,bookings:28},{source:"VRBO",amount:75e3,percentage:31,bookings:18},{source:"Booking.com",amount:3e4,percentage:12,bookings:12},{source:"Direct",amount:15e3,percentage:6,bookings:5}],m=[{category:"Cleaning & Maintenance",amount:32500,percentage:36.3},{category:"Utilities",amount:28e3,percentage:31.3},{category:"Marketing",amount:12e3,percentage:13.4},{category:"Property Management",amount:1e4,percentage:11.2},{category:"Insurance & Legal",amount:7e3,percentage:7.8}],h=c.map((j,w)=>({id:j.id,ownerName:j.ownerName||`Owner ${w+1}`,property:j.name,currentBalance:0,pendingPayout:0,lastPayout:new Date().toISOString().split("T")[0],totalEarnings:0,status:"active"})),{data:x=[]}=xe({queryKey:["/api/finance/transactions"],select:j=>j?.slice(0,10)||[]}),f=j=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),p=j=>{switch(j){case"revenue":return Xj;case"expense":return L0;case"payout":return Cn;case"commission":return ar;default:return tn}},g=j=>{switch(j){case"revenue":return"text-green-600";case"expense":return"text-red-600";case"payout":return"text-blue-600";case"commission":return"text-purple-600";default:return"text-gray-600"}},y=j=>{switch(j){case"active":return"bg-green-100 text-green-800";case"pending_review":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},b=j=>{switch(j){case"active":case"completed":return Ie;case"pending_review":case"pending":return tt;default:return It}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ga,{className:"w-8 h-8"}),"Finance Engine"]}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive financial management and analytics dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),c.map(j=>e.jsx(A,{value:j.id.toString(),children:j.name},j.id))]})]}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"w-32",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"week",children:"This Week"}),e.jsx(A,{value:"month",children:"This Month"}),e.jsx(A,{value:"quarter",children:"This Quarter"}),e.jsx(A,{value:"year",children:"This Year"})]})]}),e.jsx(M,{onClick:()=>i(!0),children:"Generate Report"})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-6",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"revenue",children:"Revenue"}),e.jsx(de,{value:"expenses",children:"Expenses"}),e.jsx(de,{value:"owners",children:"Owner Balances"}),e.jsx(de,{value:"transactions",children:"Transactions"}),e.jsx(de,{value:"analytics",children:"Analytics"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:f(d.totalRevenue)})]}),e.jsx(Ot,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:f(d.totalExpenses)})]}),e.jsx(Yl,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f(d.netProfit)})]}),e.jsx(Ze,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Profit Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[d.profitMargin,"%"]})]}),e.jsx(ar,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Wd,{className:"w-5 h-5"}),"Revenue by Source"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:u.map((j,w)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500",style:{backgroundColor:`hsl(${220+w*30}, 70%, 50%)`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j.source}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j.bookings," bookings"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:f(j.amount)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j.percentage,"%"]})]})]},w))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Expense Categories"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:m.map((j,w)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500",style:{backgroundColor:`hsl(${10+w*25}, 70%, 50%)`}}),e.jsx("p",{className:"font-medium",children:j.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:f(j.amount)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j.percentage,"%"]})]})]},w))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx(Cn,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Owner Payouts"}),e.jsx("p",{className:"text-xl font-bold",children:f(d.ownerPayouts)})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx(tt,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Payouts"}),e.jsx("p",{className:"text-xl font-bold",children:f(d.pendingPayouts)})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx(ar,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Commissions"}),e.jsx("p",{className:"text-xl font-bold",children:f(d.commissions)})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx(Er,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Management Fees"}),e.jsx("p",{className:"text-xl font-bold",children:f(d.managementFees)})]})})]})]}),e.jsx(me,{value:"revenue",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Revenue Analysis"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Revenue by Platform"}),e.jsx("div",{className:"space-y-2",children:u.map((j,w)=>e.jsxs("div",{className:"flex justify-between items-center p-2 rounded border",children:[e.jsx("span",{children:j.source}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:f(j.amount)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[j.bookings," bookings"]})]})]},w))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Monthly Trend"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"January 2025"}),e.jsx("span",{className:"font-bold",children:f(245e3)})]}),e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"December 2024"}),e.jsx("span",{className:"font-bold",children:f(22e4)})]}),e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"November 2024"}),e.jsx("span",{className:"font-bold",children:f(198e3)})]})]})]})]})})]})}),e.jsx(me,{value:"expenses",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Expense Analysis"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:m.map((j,w)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:j.category}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:f(j.amount)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[j.percentage,"% of total"]})]})]})},w))})})]})}),e.jsx(me,{value:"owners",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Owner Balances & Payouts"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:h.map(j=>{const w=b(j.status);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:j.ownerName}),e.jsx("p",{className:"text-sm text-gray-600",children:j.property})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx(U,{className:y(j.status),children:j.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Current Balance"}),e.jsx("p",{className:"font-bold text-lg",children:f(j.currentBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Pending Payout"}),e.jsx("p",{className:"font-bold text-yellow-600",children:f(j.pendingPayout)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Last Payout"}),e.jsx("p",{className:"font-medium",children:j.lastPayout})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Earnings"}),e.jsx("p",{className:"font-bold text-green-600",children:f(j.totalEarnings)})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(M,{size:"sm",variant:"outline",children:"Process Payout"}),e.jsx(M,{size:"sm",variant:"outline",children:"View Details"})]})]},j.id)})})})]})}),e.jsx(me,{value:"transactions",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recent Transactions"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:x.map(j=>{const w=p(j.type),N=b(j.status);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:`w-5 h-5 ${g(j.type)}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j.description}),e.jsx("p",{className:"text-sm text-gray-600",children:j.property}),e.jsx("p",{className:"text-xs text-gray-500",children:j.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx(U,{className:y(j.status),children:j.status})]}),e.jsxs("p",{className:`font-bold text-lg ${j.amount>0?"text-green-600":"text-red-600"}`,children:[j.amount>0?"+":"",f(Math.abs(j.amount))]})]})]},j.id)})})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Performance Metrics"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Average Daily Revenue"}),e.jsx("span",{className:"font-bold",children:f(7903)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Revenue Growth (MoM)"}),e.jsx("span",{className:"font-bold text-green-600",children:"+11.4%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Expense Ratio"}),e.jsx("span",{className:"font-bold",children:"36.5%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Owner Satisfaction"}),e.jsx("span",{className:"font-bold text-green-600",children:"94.2%"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Financial Goals"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Monthly Revenue Target"}),e.jsx("span",{children:"97.8%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"97.8%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Expense Control"}),e.jsx("span",{children:"89.5%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"89.5%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Profit Margin Goal"}),e.jsx("span",{children:"105.7%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"100%"}})})]})]})})]})]})})]})]})}var $5=["PageUp","PageDown"],F5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L5={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},rd="Slider",[r0,ZNe,JNe]=Yu(rd),[B5,HAe]=er(rd,[JNe]),[ewe,qf]=B5(rd),V5=v.forwardRef((t,s)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[n],value:u,onValueChange:m=()=>{},onValueCommit:h=()=>{},inverted:x=!1,form:f,...p}=t,g=v.useRef(new Set),y=v.useRef(0),j=l==="horizontal"?twe:swe,[w=[],N]=Hr({prop:u,defaultProp:d,onChange:F=>{[...g.current][y.current]?.focus(),m(F)}}),S=v.useRef(w);function O(F){const I=lwe(w,F);R(F,I)}function P(F){R(F,y.current)}function k(){const F=S.current[y.current];w[y.current]!==F&&h(w)}function R(F,I,{commit:W}={commit:!1}){const E=uwe(i),B=mwe(Math.round((F-n)/i)*i+n,E),G=ru(B,[n,a]);N((J=[])=>{const C=awe(J,G,I);if(dwe(C,c*i)){y.current=C.indexOf(G);const V=String(C)!==String(J);return V&&W&&h(C),V?C:J}else return J})}return e.jsx(ewe,{scope:t.__scopeSlider,name:r,disabled:o,min:n,max:a,valueIndexToChangeRef:y,thumbs:g.current,values:w,orientation:l,form:f,children:e.jsx(r0.Provider,{scope:t.__scopeSlider,children:e.jsx(r0.Slot,{scope:t.__scopeSlider,children:e.jsx(j,{"aria-disabled":o,"data-disabled":o?"":void 0,...p,ref:s,onPointerDown:$e(p.onPointerDown,()=>{o||(S.current=w)}),min:n,max:a,inverted:x,onSlideStart:o?void 0:O,onSlideMove:o?void 0:P,onSlideEnd:o?void 0:k,onHomeKeyDown:()=>!o&&R(n,0,{commit:!0}),onEndKeyDown:()=>!o&&R(a,w.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:I})=>{if(!o){const B=$5.includes(F.key)||F.shiftKey&&F5.includes(F.key)?10:1,G=y.current,J=w[G],C=i*B*I;R(J+C,G,{commit:!0})}}})})})})});V5.displayName=rd;var[q5,U5]=B5(rd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),twe=v.forwardRef((t,s)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:c,onStepKeyDown:d,...u}=t,[m,h]=v.useState(null),x=ft(s,j=>h(j)),f=v.useRef(void 0),p=Xl(a),g=p==="ltr",y=g&&!i||!g&&i;function b(j){const w=f.current||m.getBoundingClientRect(),N=[0,w.width],O=nw(N,y?[r,n]:[n,r]);return f.current=w,O(j-w.left)}return e.jsx(q5,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(z5,{dir:p,"data-orientation":"horizontal",...u,ref:x,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const w=b(j.clientX);l?.(w)},onSlideMove:j=>{const w=b(j.clientX);o?.(w)},onSlideEnd:()=>{f.current=void 0,c?.()},onStepKeyDown:j=>{const N=L5[y?"from-left":"from-right"].includes(j.key);d?.({event:j,direction:N?-1:1})}})})}),swe=v.forwardRef((t,s)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:o,onStepKeyDown:c,...d}=t,u=v.useRef(null),m=ft(s,u),h=v.useRef(void 0),x=!a;function f(p){const g=h.current||u.current.getBoundingClientRect(),y=[0,g.height],j=nw(y,x?[n,r]:[r,n]);return h.current=g,j(p-g.top)}return e.jsx(q5,{scope:t.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:e.jsx(z5,{"data-orientation":"vertical",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const g=f(p.clientY);i?.(g)},onSlideMove:p=>{const g=f(p.clientY);l?.(g)},onSlideEnd:()=>{h.current=void 0,o?.()},onStepKeyDown:p=>{const y=L5[x?"from-bottom":"from-top"].includes(p.key);c?.({event:p,direction:y?-1:1})}})})}),z5=v.forwardRef((t,s)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:c,...d}=t,u=qf(rd,r);return e.jsx(Je.span,{...d,ref:s,onKeyDown:$e(t.onKeyDown,m=>{m.key==="Home"?(l(m),m.preventDefault()):m.key==="End"?(o(m),m.preventDefault()):$5.concat(F5).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:$e(t.onPointerDown,m=>{const h=m.target;h.setPointerCapture(m.pointerId),m.preventDefault(),u.thumbs.has(h)?h.focus():n(m)}),onPointerMove:$e(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&a(m)}),onPointerUp:$e(t.onPointerUp,m=>{const h=m.target;h.hasPointerCapture(m.pointerId)&&(h.releasePointerCapture(m.pointerId),i(m))})})}),H5="SliderTrack",K5=v.forwardRef((t,s)=>{const{__scopeSlider:r,...n}=t,a=qf(H5,r);return e.jsx(Je.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:s})});K5.displayName=H5;var n0="SliderRange",G5=v.forwardRef((t,s)=>{const{__scopeSlider:r,...n}=t,a=qf(n0,r),i=U5(n0,r),l=v.useRef(null),o=ft(s,l),c=a.values.length,d=a.values.map(h=>Y5(h,a.min,a.max)),u=c>1?Math.min(...d):0,m=100-Math.max(...d);return e.jsx(Je.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:o,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:m+"%"}})});G5.displayName=n0;var a0="SliderThumb",W5=v.forwardRef((t,s)=>{const r=ZNe(t.__scopeSlider),[n,a]=v.useState(null),i=ft(s,o=>a(o)),l=v.useMemo(()=>n?r().findIndex(o=>o.ref.current===n):-1,[r,n]);return e.jsx(rwe,{...t,ref:i,index:l})}),rwe=v.forwardRef((t,s)=>{const{__scopeSlider:r,index:n,name:a,...i}=t,l=qf(a0,r),o=U5(a0,r),[c,d]=v.useState(null),u=ft(s,b=>d(b)),m=c?l.form||!!c.closest("form"):!0,h=om(c),x=l.values[n],f=x===void 0?0:Y5(x,l.min,l.max),p=iwe(n,l.values.length),g=h?.[o.size],y=g?owe(g,f,o.direction):0;return v.useEffect(()=>{if(c)return l.thumbs.add(c),()=>{l.thumbs.delete(c)}},[c,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${f}% + ${y}px)`},children:[e.jsx(r0.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Je.span,{role:"slider","aria-label":t["aria-label"]||p,"aria-valuemin":l.min,"aria-valuenow":x,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:u,style:x===void 0?{display:"none"}:t.style,onFocus:$e(t.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),m&&e.jsx(Q5,{name:a??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:x},n)]})});W5.displayName=a0;var nwe="RadioBubbleInput",Q5=v.forwardRef(({__scopeSlider:t,value:s,...r},n)=>{const a=v.useRef(null),i=ft(a,n),l=mm(s);return v.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==s&&u){const m=new Event("input",{bubbles:!0});u.call(o,s),o.dispatchEvent(m)}},[l,s]),e.jsx(Je.input,{style:{display:"none"},...r,ref:i,defaultValue:s})});Q5.displayName=nwe;function awe(t=[],s,r){const n=[...t];return n[r]=s,n.sort((a,i)=>a-i)}function Y5(t,s,r){const i=100/(r-s)*(t-s);return ru(i,[0,100])}function iwe(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function lwe(t,s){if(t.length===1)return 0;const r=t.map(a=>Math.abs(a-s)),n=Math.min(...r);return r.indexOf(n)}function owe(t,s,r){const n=t/2,i=nw([0,50],[0,n]);return(n-i(s)*r)*r}function cwe(t){return t.slice(0,-1).map((s,r)=>t[r+1]-s)}function dwe(t,s){if(s>0){const r=cwe(t);return Math.min(...r)>=s}return!0}function nw(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function uwe(t){return(String(t).split(".")[1]||"").length}function mwe(t,s){const r=Math.pow(10,s);return Math.round(t*r)/r}var X5=V5,hwe=K5,xwe=G5,pwe=W5;const i0=v.forwardRef(({className:t,...s},r)=>e.jsxs(X5,{ref:r,className:Be("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(hwe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(xwe,{className:"absolute h-full bg-primary"})}),e.jsx(pwe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));i0.displayName=X5.displayName;const bd=12;function fwe({propertyId:t,images:s=[],isLocalProperty:r}){const[n,a]=v.useState(0),[i,l]=v.useState(!1),[o,c]=v.useState(null),[d,u]=v.useState(!1),m=v.useRef(null),{toast:h}=st(),x=pt(),f=Te({mutationFn:async C=>{const V=new FormData;C.forEach(le=>{V.append("images",le)});const z=await fetch(`/api/property-images/${t}/upload`,{method:"POST",body:V,credentials:"include"});if(!z.ok){const le=await z.json();throw new Error(le.error||"Failed to upload images")}return z.json()},onSuccess:C=>{h({title:"Images Uploaded",description:C.message||"Images uploaded successfully"}),x.invalidateQueries({queryKey:[`/api/properties/${t}`]}),x.invalidateQueries({queryKey:["/api/properties"]})},onError:C=>{h({title:"Upload Failed",description:C.message,variant:"destructive"})},onSettled:()=>{u(!1)}}),p=Te({mutationFn:async C=>{const V=await fetch(`/api/property-images/${t}/image`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:C}),credentials:"include"});if(!V.ok){const z=await V.json();throw new Error(z.error||"Failed to delete image")}return V.json()},onSuccess:()=>{h({title:"Image Deleted",description:"Image removed successfully"}),x.invalidateQueries({queryKey:[`/api/properties/${t}`]}),x.invalidateQueries({queryKey:["/api/properties"]})},onError:C=>{h({title:"Delete Failed",description:C.message,variant:"destructive"})}}),g=50,y=10*1024*1024,b=C=>{const V=C.target.files;if(V&&V.length>0){const z=Array.from(V),le=w.length;if(le+z.length>g){h({title:"Too Many Images",description:`Cannot upload ${z.length} images. You have ${le} images and the maximum is ${g}.`,variant:"destructive"}),m.current&&(m.current.value="");return}for(const Ce of z)if(Ce.size>y){h({title:"File Too Large",description:`${Ce.name} exceeds the 10MB limit.`,variant:"destructive"}),m.current&&(m.current.value="");return}m.current&&(m.current.value=""),u(!0),f.mutate(z)}},j=()=>{m.current?.click()},w=v.useMemo(()=>s.filter(C=>!C||typeof C!="string"||C.trim()===""||C.startsWith("file:///")||C.startsWith("file://")||C.match(/^[A-Z]:\\/i)?!1:C.startsWith("http://")||C.startsWith("https://")||C.startsWith("/")),[s]),N=Math.ceil(w.length/bd),S=v.useMemo(()=>{if(i)return w;const C=n*bd;return w.slice(C,C+bd)},[w,n,i]),O=()=>{a(C=>Math.max(0,C-1))},P=()=>{a(C=>Math.min(N-1,C+1))},k=C=>{a(C[0])},R=()=>{l(!0)},F=()=>{l(!1),a(0)},I=(C,V)=>{V?.stopPropagation(),confirm("Are you sure you want to delete this image?")&&p.mutate(C)},W=C=>{c(C)},E=w.length>bd,B=n>0,G=n<N-1,J=(C,V)=>e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:C.map((z,le)=>e.jsxs("div",{className:"relative group aspect-[4/3] rounded-lg overflow-hidden bg-slate-100 cursor-pointer hover:ring-2 hover:ring-emerald-400 transition-all duration-200",onClick:()=>W(z),"data-testid":`image-thumbnail-${le}`,children:[e.jsx("img",{src:z,alt:`Property image ${le+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-200"}),e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),W(z)},className:"absolute bottom-2 right-2 bg-white/90 hover:bg-white text-slate-700 rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200 shadow-md","data-testid":`button-zoom-${le}`,title:"View fullscreen",children:e.jsx(z8,{className:"w-4 h-4"})}),V&&r&&e.jsx("button",{onClick:Ce=>I(z,Ce),className:"absolute top-2 right-2 bg-red-500/90 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200 shadow-md","data-testid":`button-delete-${le}`,title:"Delete image",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute bottom-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(i?le:n*bd+le)+1})]},`${z}-${le}`))});return r?e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Property Images (",w.length," / ",g,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[E&&!i&&e.jsxs("span",{className:"text-sm text-slate-500",children:["Page ",n+1," of ",N]}),e.jsx(M,{onClick:j,disabled:d,className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700","data-testid":"button-upload-images",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u1,{className:"w-4 h-4"}),"Upload Images"]})})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsx("input",{ref:m,type:"file",accept:"image/jpeg,image/png,image/webp,image/tiff,.jpg,.jpeg,.png,.webp,.tiff,.tif",multiple:!0,onChange:b,className:"hidden","data-testid":"input-image-upload"}),w.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 border-2 border-dashed border-slate-300 rounded-xl cursor-pointer hover:border-emerald-400 hover:bg-emerald-50/50 transition-all duration-300",onClick:j,children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center mb-4",children:e.jsx(Jt,{className:"h-12 w-12 text-slate-400"})}),e.jsx("p",{className:"text-slate-600 font-semibold text-lg",children:"No images uploaded yet"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2 text-center max-w-sm",children:"Click here or use the button above to upload your property images"}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 text-xs text-slate-400",children:[e.jsx("span",{children:"JPG, PNG, WebP, TIFF"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),e.jsx("span",{children:"Max 50 images"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),e.jsx("span",{children:"10MB each"})]})]}):e.jsxs(e.Fragment,{children:[J(S,!0),E&&e.jsx("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:i?e.jsx("div",{className:"flex justify-center",children:e.jsx(M,{variant:"ghost",onClick:F,className:"text-slate-600 hover:text-slate-700","data-testid":"button-show-less",children:"Show Less"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:O,disabled:!B,className:"flex items-center gap-2","data-testid":"button-prev-page",children:[e.jsx(Ka,{className:"w-4 h-4"}),"Previous"]}),e.jsx("div",{className:"flex-1 max-w-xs px-4",children:e.jsx(i0,{value:[n],min:0,max:N-1,step:1,onValueChange:k,className:"cursor-pointer","data-testid":"slider-page-navigation"})}),e.jsxs(M,{variant:"outline",size:"sm",onClick:P,disabled:!G,className:"flex items-center gap-2","data-testid":"button-next-page",children:["Next",e.jsx(zn,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(M,{variant:"ghost",onClick:R,className:"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50","data-testid":"button-load-more",children:["Load More... (",w.length," total images)"]})})]})}),!E&&w.length<g&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs(M,{variant:"outline",onClick:j,disabled:d,className:"flex items-center gap-2","data-testid":"button-add-more",children:[e.jsx(u1,{className:"w-4 h-4"}),"Add More Images"]})})]})]})]}),o&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm",onClick:()=>c(null),children:[e.jsx("button",{className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",onClick:()=>c(null),"data-testid":"button-close-lightbox",children:e.jsx(Es,{className:"w-8 h-8"})}),e.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 bg-black/50 backdrop-blur-sm px-6 py-3 rounded-full",children:e.jsxs("span",{className:"text-white text-lg font-semibold",children:[w.indexOf(o)+1," / ",w.length]})}),w.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:C=>{C.stopPropagation();const V=w.indexOf(o),z=V===0?w.length-1:V-1;c(w[z])},className:"absolute left-6 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white rounded-full p-4 transition-all","data-testid":"button-lightbox-prev",children:e.jsx(Ka,{className:"w-8 h-8"})}),e.jsx("button",{onClick:C=>{C.stopPropagation();const V=w.indexOf(o),z=V===w.length-1?0:V+1;c(w[z])},className:"absolute right-6 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white rounded-full p-4 transition-all","data-testid":"button-lightbox-next",children:e.jsx(zn,{className:"w-8 h-8"})})]}),e.jsx("img",{src:o,alt:"Property image fullscreen",className:"max-h-[85vh] max-w-[90vw] object-contain rounded-lg shadow-2xl",onClick:C=>C.stopPropagation()})]})]}):w.length===0?e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Property Images"]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50",children:[e.jsx(Jt,{className:"h-16 w-16 text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No images available"}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Images are managed through the external platform"})]})})]}):e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Property Images (",w.length,")"]}),E&&!i&&e.jsxs("div",{className:"text-sm text-slate-500",children:["Page ",n+1," of ",N]})]})}),e.jsxs(T,{className:"space-y-4",children:[J(S,!1),E&&e.jsx("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:i?e.jsx("div",{className:"flex justify-center",children:e.jsx(M,{variant:"ghost",onClick:F,className:"text-slate-600 hover:text-slate-700","data-testid":"button-show-less",children:"Show Less"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:O,disabled:!B,className:"flex items-center gap-2","data-testid":"button-prev-page",children:[e.jsx(Ka,{className:"w-4 h-4"}),"Previous"]}),e.jsx("div",{className:"flex-1 max-w-xs px-4",children:e.jsx(i0,{value:[n],min:0,max:N-1,step:1,onValueChange:k,className:"cursor-pointer","data-testid":"slider-page-navigation"})}),e.jsxs(M,{variant:"outline",size:"sm",onClick:P,disabled:!G,className:"flex items-center gap-2","data-testid":"button-next-page",children:["Next",e.jsx(zn,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(M,{variant:"ghost",onClick:R,className:"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50","data-testid":"button-load-more",children:["Load More... (",w.length," total images)"]})})]})})]})]})}const gwe=[{name:"Airbnb",value:45,color:"#FF5A5F"},{name:"Booking.com",value:25,color:"#003580"},{name:"VRBO",value:20,color:"#FFD700"},{name:"Direct",value:10,color:"#4CAF50"}];function jwe(t){const s=t.match(/src="([^"]+)"/);if(s&&s[1]){const r=s[1];if(r.match(/pb=([^&]+)/)){const a=r.match(/!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/);if(a){const i=a[1],l=a[2];return`https://www.google.com/maps/search/?api=1&query=${i},${l}`}}return r.includes("maps.google.com")&&!r.includes("/embed"),r}return t}const jo={description:"Beautiful luxury villa with stunning ocean views, private pool, and modern amenities. Perfect for families or groups seeking a premium tropical experience.",spaceDescription:"3 spacious bedrooms with en-suite bathrooms, open-plan living area, fully equipped kitchen, private infinity pool, and multiple terraces with panoramic views.",interaction:"Our dedicated property manager is available 24/7 to assist with any requests. We provide personalized concierge services and local recommendations.",neighborhood:"Located in the prestigious Bophut area, close to pristine beaches, luxury resorts, world-class restaurants, and vibrant nightlife.",transit:"15 minutes from Samui Airport, complimentary airport transfers available. Scooter and car rental services can be arranged.",otherNotes:"Strict no-smoking policy. No pets allowed. Minimum 3-night stay required. Check-in: 3 PM, Check-out: 11 AM."};function fi({label:t,href:s,icon:r,variant:n="default",propertyId:a,onClick:i}){const[,l]=or(),{toast:o}=st(),c=()=>{try{i?i():(s.includes("/property/")||s.includes("/finances")||s.includes("/finance-hub")||s.includes("/bookings")||s.includes("/tasks")||s.includes("/utility"))&&a?l(`${s}?propertyId=${a}`):l(s)}catch(d){o({title:"Navigation Error",description:`Failed to navigate to ${t}. This feature will be available soon.`,variant:"destructive"}),console.error("Navigation error:",d)}};return e.jsxs(M,{variant:n,onClick:c,className:"w-full h-12 flex items-center justify-center gap-2",children:[e.jsx(r,{className:"w-4 h-4"}),t]})}function vwe({property:t,onUpdate:s}){const[r,n]=v.useState(t.googleMapsLink||""),[a,i]=v.useState(!1),{toast:l}=st(),o=pt(),c=Te({mutationFn:async u=>Ne("PUT",`/api/properties/${t.id}`,u),onSuccess:()=>{o.invalidateQueries({queryKey:[`/api/properties/${t.id}`]}),l({title:"Success",description:"Google Maps link updated successfully"}),i(!1),s()},onError:u=>{l({title:"Error",description:`Failed to update map link: ${u.message}`,variant:"destructive"})}}),d=()=>{c.mutate({googleMapsLink:r})};return e.jsxs(Ge,{open:a,onOpenChange:i,children:[e.jsx(hs,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"ml-2 p-1 h-6 w-6",children:e.jsx(Nr,{className:"w-3 h-3"})})}),e.jsxs(We,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Edit Google Maps Link"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"mapLink",children:"Google Maps Link or Embed HTML"}),e.jsx(ct,{id:"mapLink",value:r,onChange:u=>n(u.target.value),placeholder:"Paste Google Maps share link or embed HTML code here...",className:"mt-2 min-h-[100px]"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"You can paste either a Google Maps share link (https://maps.google.com/...) or full embed HTML code"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{onClick:d,disabled:c.isPending,children:c.isPending?"Saving...":"Save"})]})]})]})]})}function vo({title:t,text:s}){return e.jsxs(D,{className:"h-full",children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-base",children:t})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s||"Not available."})})]})}function ywe({data:t}){return e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Booking Source Breakdown"]})}),e.jsx(T,{children:e.jsx("div",{className:"h-80",children:e.jsx(da,{width:"100%",height:"100%",children:e.jsxs(sp,{children:[e.jsx(Tn,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:r})=>`${s} ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((s,r)=>e.jsx(Ul,{fill:s.color},`cell-${r}`))}),e.jsx(mr,{}),e.jsx(fa,{})]})})})})]})}const bwe=Yt({docType:Pe().min(1,"Document type is required"),fileUrl:Pe().min(1,"File URL is required"),expiryDate:Pe().optional()});function Nwe({propertyId:t,onSuccess:s}){const[r,n]=v.useState(!1),{toast:a}=st(),{user:i}=Mr(),l=pt(),o=Wt({resolver:ts(bwe),defaultValues:{docType:"",fileUrl:"",expiryDate:""}}),c=Te({mutationFn:async d=>{console.log("ðŸš€ Document upload mutation started",d);const u={...d,propertyId:parseInt(t),organizationId:i?.organizationId||"default-org",uploadedBy:i?.id||"unknown"};console.log("ðŸ“¦ Payload:",u);const m=await Ne("POST","/api/property-documents",u);return console.log("âœ… Document upload response:",m),m},onSuccess:()=>{console.log("âœ… Document upload successful"),hr.delete("/api/property-documents/expiring?days=30"),a({title:"Document Uploaded",description:"Property document has been uploaded successfully."}),l.invalidateQueries({queryKey:["/api/property-documents"]}),l.invalidateQueries({queryKey:[`/api/property-documents/property/${t}`]}),l.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),l.refetchQueries({queryKey:["/api/property-documents/expiring?days=30"]}),l.refetchQueries({queryKey:[`/api/property-documents/property/${t}`]}),o.reset(),n(!1),s()},onError:d=>{console.error("âŒ Document upload failed:",d),a({title:"Upload Failed",description:d.message,variant:"destructive"})}});return e.jsxs(Ge,{open:r,onOpenChange:n,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{className:"w-full","data-testid":"upload-document-button",children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Upload Document"]})}),e.jsxs(We,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Upload Property Document"})}),e.jsx(Qt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d=>{console.log("ðŸ“ Form submitted with data:",d),console.log("ðŸ” Form errors:",o.formState.errors),c.mutate(d)}),className:"space-y-4",children:[e.jsx(ge,{control:o.control,name:"docType",render:({field:d})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Document Type"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"e.g., License, Contract, Invoice",...d,"data-testid":"input-doc-type"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"fileUrl",render:({field:d})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Document Name / File URL"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"e.g., tourism-license-2025.pdf",...d,"data-testid":"input-file-url"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"expiryDate",render:({field:d})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Expiry Date (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...d,"data-testid":"input-expiry-date"})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-document",children:c.isPending?"Uploading...":"Upload"})]})]})})]})]})}const wwe=Yt({insurerName:Pe().min(1,"Insurance provider is required"),policyNumber:Pe().optional(),coverageDetails:Pe().optional(),expiryDate:Pe().optional()});function Swe({propertyId:t,onSuccess:s}){const[r,n]=v.useState(!1),{toast:a}=st(),{user:i}=Mr(),l=pt(),o=Wt({resolver:ts(wwe),defaultValues:{insurerName:"",policyNumber:"",coverageDetails:"",expiryDate:""}}),c=Te({mutationFn:async d=>{console.log("ðŸš€ Insurance mutation started",d);const u={...d,propertyId:parseInt(t),uploadedBy:i?.id||"unknown"};console.log("ðŸ“¦ Payload:",u);const m=await Ne("POST","/api/property-insurance",u);return console.log("âœ… Insurance response:",m),m},onSuccess:()=>{console.log("âœ… Insurance added successful"),hr.delete("/api/property-insurance/expiring/30"),a({title:"Insurance Added",description:"Property insurance has been added successfully."}),l.invalidateQueries({queryKey:["/api/property-insurance"]}),l.invalidateQueries({queryKey:[`/api/property-insurance/property/${t}`]}),l.invalidateQueries({queryKey:["/api/property-insurance/expiring/30"]}),l.refetchQueries({queryKey:["/api/property-insurance/expiring/30"]}),l.refetchQueries({queryKey:[`/api/property-insurance/property/${t}`]}),o.reset(),n(!1),s()},onError:d=>{console.error("âŒ Insurance failed:",d),a({title:"Failed to Add Insurance",description:d.message,variant:"destructive"})}});return e.jsxs(Ge,{open:r,onOpenChange:n,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{className:"w-full","data-testid":"add-insurance-button",children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Add Insurance"]})}),e.jsxs(We,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Add Property Insurance"})}),e.jsx(Qt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d=>{console.log("ðŸ“ Insurance form submitted with data:",d),console.log("ðŸ” Form errors:",o.formState.errors),c.mutate(d)}),className:"space-y-4",children:[e.jsx(ge,{control:o.control,name:"insurerName",render:({field:d})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Insurance Provider"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"e.g., AXA Thailand, Bangkok Insurance",...d,"data-testid":"input-insurer-name"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"policyNumber",render:({field:d})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Policy Number (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"e.g., POL-2025-12345",...d,"data-testid":"input-policy-number"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"coverageDetails",render:({field:d})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Coverage Details (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"e.g., Fire, flood, theft coverage up to 10M THB",...d,"data-testid":"input-coverage-details"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"expiryDate",render:({field:d})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Expiry Date (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...d,"data-testid":"input-insurance-expiry"})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-insurance",children:c.isPending?"Adding...":"Add Insurance"})]})]})})]})]})}function Cwe(){const[,t]=GF("/property/:id"),[,s]=or(),r=t?.id,{user:n}=Mr(),{formatWithConversion:a}=Rr(),i=n?.role||"guest",{toast:l}=st(),{data:o,isLoading:c}=xe({queryKey:[`/api/properties/${r}`],enabled:!!r}),{data:d=[],refetch:u}=xe({queryKey:[`/api/property-documents/property/${r}`],enabled:!!r,staleTime:0});console.log("ðŸ“„ Documents data:",d,"Length:",Array.isArray(d)?d.length:"not array");const{data:m=[],refetch:h}=xe({queryKey:[`/api/property-insurance/property/${r}`],enabled:!!r,staleTime:0});if(console.log("ðŸ›¡ï¸ Insurance data:",m,"Length:",Array.isArray(m)?m.length:"not array"),v.useEffect(()=>{if(d&&Array.isArray(d)&&d.length>0){const b=new Date,j=d.filter(w=>w.expiryDate?new Date(w.expiryDate)<b:!1);j.length>0&&j.forEach(w=>{l({title:"âš ï¸ Document Expired",description:`${w.docType} for ${o?.name||"this property"} expired on ${new Date(w.expiryDate).toLocaleDateString()}`,variant:"destructive"})})}},[d,o,l]),v.useEffect(()=>{if(m&&Array.isArray(m)&&m.length>0){const b=new Date,j=m.filter(w=>w.expiryDate?new Date(w.expiryDate)<b:!1);j.length>0&&j.forEach(w=>{l({title:"âš ï¸ Insurance Expired",description:`${w.insuranceType} for ${o?.name||"this property"} expired on ${new Date(w.expiryDate).toLocaleDateString()}`,variant:"destructive"})})}},[m,o,l]),c)return e.jsx("div",{className:"fixed inset-0 z-[9999] grid place-items-center bg-white/70 backdrop-blur-sm",children:e.jsx("div",{className:"text-lg font-medium text-slate-600",children:"Loading property details..."})});if(!o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Property Not Found"}),e.jsx(M,{onClick:()=>s("/property-hub?tab=hostaway-sync"),children:"Back to Properties"})]})});if(i==="guest")return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this property"}),e.jsx(M,{onClick:()=>s("/"),children:"Go to Dashboard"})]})});const x=o.address||[o.addressLine1,o.city,o.country].filter(Boolean).join(", ")||"Location unavailable";o.bedrooms??o.rooms?.bedrooms??o.numBedrooms??o.bedroomCount,o.bathrooms??o.rooms?.bathrooms??o.numBathrooms??o.bathroomCount,o.maxGuests??o.accommodates??o.guests??o.maxOccupancy,o.pricePerNight??null??o.baseNightlyRate??o.defaultDailyPrice??o.pricing?.defaultDailyPrice,o.currency??o.pricing?.currency;const f=o.status==="active"?"default":o.status==="maintenance"?"secondary":"destructive";return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{const b=o.source==="HOSTAWAY";s(b?"/property-hub?tab=hostaway-sync":"/property-hub?tab=properties")},className:"flex items-center gap-2",children:[e.jsx(ti,{className:"w-4 h-4"}),"Back to Properties"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"w-full lg:w-2/3",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:o.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(vs,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("button",{onClick:()=>{const b=o.googleMapsLink?o.googleMapsLink.includes("<iframe")?jwe(o.googleMapsLink):o.googleMapsLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(o.address)}`;window.open(b,"_blank")},className:"text-lg text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors flex items-center gap-1",title:"View on Google Maps",children:[x,e.jsx(Tr,{className:"w-4 h-4"})]}),i==="admin"&&e.jsx(vwe,{property:o,onUpdate:()=>{}})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fi,{className:"w-4 h-4"}),e.jsxs("span",{children:[o.bathrooms," Bathrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x4,{className:"w-4 h-4"}),e.jsxs("span",{children:[o.bathrooms," Bathrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsxs("span",{children:[o.maxGuests||"N/A"," Guests"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsxs("span",{children:[a(parseFloat(o.pricePerNight||"0")),"/night"]})]})]})]}),e.jsx("div",{className:"w-full lg:w-1/3",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Quick Stats"})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(U,{variant:f,children:o.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property ID:"}),e.jsxs("span",{className:"font-medium",children:["#",o.id]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Occupancy:"}),e.jsxs("span",{className:"font-medium",children:[78,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Rating:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ps,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:4.8}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",152," reviews)"]})]})]})]})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsx(fwe,{propertyId:o.id,images:o.images||[],isLocalProperty:!o.source||o.source==="LOCAL"})}),e.jsx("div",{className:"mb-8",children:e.jsx(ywe,{data:gwe})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(vo,{title:"General Description",text:jo.description}),e.jsx(vo,{title:"Space Description",text:jo.spaceDescription}),e.jsx(vo,{title:"Guest Interaction",text:jo.interaction}),e.jsx(vo,{title:"Neighborhood",text:jo.neighborhood}),e.jsx(vo,{title:"Transportation",text:jo.transit}),e.jsx(vo,{title:"Other Notes",text:jo.otherNotes})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Property Management Actions"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(fi,{label:"View Tasks",href:"/tasks",icon:Li,propertyId:o?.id}),e.jsx(fi,{label:"View Bookings",href:"/bookings",icon:Xe,propertyId:o?.id}),e.jsx(fi,{label:"Edit Property",href:`/property/${o?.id}/edit`,icon:ss,propertyId:o?.id}),e.jsx(fi,{label:"View Utilities",href:"/utility-tracker",icon:_o,variant:"outline"}),e.jsx(fi,{label:"View Finances",href:"/finance-hub",icon:Ze,variant:"outline",propertyId:o.id.toString()}),e.jsx(fi,{label:"Property Info",href:"/property-info",icon:Io,variant:"outline",onClick:()=>{l({title:"Property Information",description:"Detailed property information panel is displayed above. Additional settings available in admin dashboard."})}}),e.jsx(fi,{label:"Documents",href:"#documents-section",icon:dt,variant:"outline",onClick:()=>{document.getElementById("documents-section")?.scrollIntoView({behavior:"smooth"})}}),e.jsx(fi,{label:"View Calendar",href:"/multi-property-calendar",icon:ps})]})})]}),e.jsxs("div",{id:"documents-section",className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Property Documents"]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload property documents like licenses, contracts, and permits with expiry dates to receive alerts."}),e.jsx(Nwe,{propertyId:o.id,onSuccess:()=>{}}),d.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Uploaded Documents"}),d.map(b=>{const j=b.expiryDate&&new Date(b.expiryDate)<=new Date(Date.now()+2592e6),w=b.expiryDate&&new Date(b.expiryDate)<new Date;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg","data-testid":`document-${b.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:b.docType}),e.jsx("div",{className:"text-xs text-muted-foreground",children:b.fileUrl}),b.expiryDate&&e.jsxs("div",{className:"text-xs mt-1",children:["Expires:"," ",new Date(b.expiryDate).toLocaleDateString()]})]}),w&&e.jsx(U,{variant:"destructive",className:"ml-2",children:"ðŸ”´ Expired"}),j&&!w&&e.jsx(U,{variant:"secondary",className:"ml-2 bg-orange-500 text-white",children:"ðŸŸ  Expiring Soon"})]},b.id)})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Property Insurance"]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add property insurance details with expiry dates to track coverage and receive renewal alerts."}),e.jsx(Swe,{propertyId:o.id,onSuccess:()=>{}}),m.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Insurance Policies"}),m.map(b=>{const j=b.expiryDate&&new Date(b.expiryDate)<=new Date(Date.now()+2592e6),w=b.expiryDate&&new Date(b.expiryDate)<new Date;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg","data-testid":`insurance-${b.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:b.insurerName}),b.policyNumber&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Policy: ",b.policyNumber]}),b.expiryDate&&e.jsxs("div",{className:"text-xs mt-1",children:["Expires:"," ",new Date(b.expiryDate).toLocaleDateString()]})]}),w&&e.jsx(U,{variant:"destructive",className:"ml-2",children:"ðŸ”´ Expired"}),j&&!w&&e.jsx(U,{variant:"secondary",className:"ml-2 bg-orange-500 text-white",children:"ðŸŸ  Expiring Soon"})]},b.id)})]})]})]})]})]})})}function kwe(){const{id:t}=kT(),[,s]=or(),{toast:r}=st(),n=pt(),{data:a,isLoading:i}=xe({queryKey:[`/api/properties/${t}`]}),[l,o]=v.useState({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active",ownerId:""});v.useEffect(()=>{a&&o({name:a.name||"",address:a.address||"",description:a.description||"",bedrooms:a.bedrooms?.toString()||"",bathrooms:a.bathrooms?.toString()||"",maxGuests:a.maxGuests?.toString()||"",pricePerNight:a.pricePerNight?.toString()||"",status:a.status||"active",ownerId:a.ownerId?.toString()||""})},[a]);const c=Te({mutationFn:async u=>await Ne("PUT",`/api/properties/${t}`,u),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/properties"]}),n.invalidateQueries({queryKey:[`/api/properties/${t}`]}),r({title:"Success",description:"Property updated successfully"}),s(`/property/${t}`)},onError:u=>{r({title:"Error",description:u.message||"Failed to update property",variant:"destructive"})}}),d=u=>{u.preventDefault();const m={name:l.name,address:l.address,description:l.description,bedrooms:parseInt(l.bedrooms)||0,bathrooms:parseInt(l.bathrooms)||0,maxGuests:parseInt(l.maxGuests)||0,pricePerNight:parseFloat(l.pricePerNight)||0,status:l.status,ownerId:l.ownerId?parseInt(l.ownerId):null};c.mutate(m)};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"})}):a?e.jsx("div",{className:"min-h-screen mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(M,{variant:"ghost",onClick:()=>s(`/property/${t}`),className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:[e.jsx(ti,{className:"h-4 w-4 mr-2"}),"Back to Property Details"]})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{children:["Edit Property: ",a.name]})}),e.jsx(T,{children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"name",children:"Property Name *"}),e.jsx(Q,{id:"name",value:l.name,onChange:u=>o({...l,name:u.target.value}),required:!0,"data-testid":"input-property-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"address",children:"Address *"}),e.jsx(Q,{id:"address",value:l.address,onChange:u=>o({...l,address:u.target.value}),required:!0,"data-testid":"input-property-address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(Q,{id:"bedrooms",type:"number",value:l.bedrooms,onChange:u=>o({...l,bedrooms:u.target.value}),min:"0","data-testid":"input-property-bedrooms"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(Q,{id:"bathrooms",type:"number",value:l.bathrooms,onChange:u=>o({...l,bathrooms:u.target.value}),min:"0",step:"0.5","data-testid":"input-property-bathrooms"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"maxGuests",children:"Max Guests"}),e.jsx(Q,{id:"maxGuests",type:"number",value:l.maxGuests,onChange:u=>o({...l,maxGuests:u.target.value}),min:"0","data-testid":"input-property-maxGuests"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"pricePerNight",children:"Price Per Night"}),e.jsx(Q,{id:"pricePerNight",type:"number",value:l.pricePerNight,onChange:u=>o({...l,pricePerNight:u.target.value}),min:"0",step:"0.01","data-testid":"input-property-price"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"status",children:"Status"}),e.jsxs(ae,{value:l.status,onValueChange:u=>o({...l,status:u}),children:[e.jsx(re,{"data-testid":"select-property-status",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"inactive",children:"Inactive"}),e.jsx(A,{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(ct,{id:"description",value:l.description,onChange:u=>o({...l,description:u.target.value}),rows:4,"data-testid":"textarea-property-description"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(`/property/${t}`),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(M,{type:"submit",disabled:c.isPending,"data-testid":"button-save-property",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(rm,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Property Not Found"}),e.jsxs(M,{onClick:()=>s("/properties"),children:[e.jsx(ti,{className:"h-4 w-4 mr-2"}),"Back to Properties"]})]})})}function Pwe(){const[t,s]=v.useState(""),[r,n]=v.useState("all"),[a,i]=v.useState(new Date),{data:l=[],isLoading:o}=xe({queryKey:["/api/properties"]}),{data:c=[],isLoading:d}=xe({queryKey:["/api/bookings"]}),u=v.useMemo(()=>Array.from({length:30},(w,N)=>rr(a,N)),[a]),m=l.filter(w=>w.name.toLowerCase().includes(t.toLowerCase())&&(r==="all"||w.id.toString()===r)),h=w=>{const N=c.filter(k=>k.propertyId===w),S=[],O=ia(u[0]),P=rr(ia(u[u.length-1]),1);return N.forEach(k=>{const R=ia(new Date(k.checkIn)),F=ia(new Date(k.checkOut));if(R<P&&F>O){const W=R<O?O:R,E=F>P?P:F,B=u.findIndex(G=>Dr(ia(G),W));if(B>=0){const G=Lj(E,W);G>0&&S.push({booking:k,startIndex:B,span:G})}}}),S},x=(w,N,S)=>S.some(O=>N>=O.startIndex&&N<O.startIndex+O.span),f=(w,N,S)=>S.find(O=>O.startIndex===N)||null,p=w=>{switch(w?.toLowerCase()){case"confirmed":return"bg-emerald-500 hover:bg-emerald-600";case"pending":return"bg-amber-500 hover:bg-amber-600";case"completed":return"bg-blue-500 hover:bg-blue-600";case"cancelled":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-400 hover:bg-gray-500"}},g=()=>{i(rr(a,-7))},y=()=>{i(rr(a,7))},b=()=>{i(new Date)},j=o||d;return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Multi-Property Calendar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Horizontal timeline with live booking data"})]}),e.jsx(U,{variant:"outline",className:"text-blue-600",children:"Timeline View"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:g,"data-testid":"button-prev-week",children:[e.jsx(Ka,{className:"w-4 h-4"}),"Previous"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:b,"data-testid":"button-today",children:"Today"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:y,"data-testid":"button-next-week",children:["Next",e.jsx(zn,{className:"w-4 h-4"})]})]})]}),e.jsxs(D,{className:"mb-6",children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Filters"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search Property"}),e.jsx(Q,{type:"text",placeholder:"Search property name...",value:t,onChange:w=>s(w.target.value),"data-testid":"input-search-property"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter by Property"}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{"data-testid":"select-filter-property",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsxs(A,{value:"all",children:["All Properties (",l.length,")"]}),l.map(w=>e.jsxs(A,{value:w.id.toString(),children:[w.source==="HOSTAWAY"&&"ðŸ¢ ",w.name]},w.id))]})]})]})]})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-0",children:j?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar data..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex border-b sticky top-0 bg-white dark:bg-gray-900 z-10",children:[e.jsx("div",{className:"w-64 flex-shrink-0 border-r p-4 font-semibold bg-gray-50 dark:bg-gray-800",children:"Property"}),u.map((w,N)=>{const S=Dr(w,new Date);return e.jsxs("div",{className:`w-32 flex-shrink-0 border-r p-2 text-center text-sm ${S?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[e.jsx("div",{className:`font-semibold ${S?"text-blue-600":""}`,children:et(w,"EEE")}),e.jsx("div",{className:`text-xs ${S?"text-blue-600":"text-muted-foreground"}`,children:et(w,"MMM d")})]},N)})]}),m.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Jt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No properties found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search criteria"})]}):m.map(w=>{const N=h(w.id);return e.jsxs("div",{className:"flex border-b hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"w-64 flex-shrink-0 border-r p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsx("div",{className:"font-medium text-sm mb-1",children:w.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[w.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fi,{className:"w-3 h-3"}),e.jsxs("span",{children:[w.bedrooms," BR"]})]}),w.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"w-3 h-3"}),e.jsx("span",{children:w.location})]})]})]}),e.jsx("div",{className:"flex relative",children:u.map((S,O)=>{const P=f(w.id,O,N),k=x(w.id,O,N);return e.jsx("div",{className:"w-32 flex-shrink-0 border-r p-1 relative","data-testid":`cell-${w.id}-${O}`,children:P?e.jsxs("div",{className:`absolute top-1 left-1 h-[calc(100%-8px)] rounded px-2 py-1 text-white text-xs cursor-pointer transition-colors ${p(P.booking.status)}`,style:{width:`calc(${P.span*128}px - 8px)`,zIndex:5},title:`${P.booking.guestName}
${P.booking.checkIn} - ${P.booking.checkOut}
Status: ${P.booking.status}
Source: ${P.booking.source||"LOCAL"}${P.booking.bookingPlatform?`
Platform: ${P.booking.bookingPlatform}`:""}`,children:[e.jsxs("div",{className:"font-medium truncate flex items-center gap-1",children:[P.booking.source==="HOSTAWAY"&&e.jsx("span",{className:"text-[9px] bg-white/20 px-1 rounded",children:"H"}),P.booking.guestName]}),e.jsx("div",{className:"text-[10px] opacity-90",children:P.booking.status}),e.jsxs("div",{className:"text-[10px] opacity-75",children:[P.span," ",P.span===1?"day":"days"]})]}):!k&&e.jsx("div",{className:"h-full bg-gray-100 dark:bg-gray-700/30 rounded opacity-50 hover:opacity-75 transition-opacity"})},O)})})]},w.id)})]})})})}),e.jsx(D,{className:"mt-4",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-6 text-sm flex-wrap",children:[e.jsx("span",{className:"font-medium",children:"Status Legend:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-emerald-500"}),e.jsx("span",{children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-amber-500"}),e.jsx("span",{children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-blue-500"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),e.jsx("span",{children:"Cancelled"})]}),e.jsx("div",{className:"h-4 w-px bg-border mx-2"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] bg-gray-500 text-white px-1.5 py-0.5 rounded font-medium",children:"H"}),e.jsx("span",{children:"Hostaway Booking"})]})]})})}),e.jsx(D,{className:"mt-4",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground flex-wrap gap-4",children:[e.jsxs("span",{children:["Showing ",m.length," of ",l.length," properties"]}),e.jsxs("span",{children:["Total bookings: ",c.length]}),e.jsxs("span",{children:[et(u[0],"MMM d, yyyy")," - ",et(u[u.length-1],"MMM d, yyyy")]})]})})})]})})}const dh=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];function Awe(){const{formatWithConversion:t}=Rr(),[s,r]=v.useState("all"),[n,a]=v.useState("all"),[i,l]=v.useState("all"),[o,c]=v.useState(""),[d,u]=v.useState(""),{data:m=[]}=xe({queryKey:["/api/properties"]}),{data:h=[]}=xe({queryKey:["/api/finance"]}),{data:x=[]}=xe({queryKey:["/api/bookings"]}),f=v.useMemo(()=>[...new Set(h.map(B=>B.category))].filter(Boolean),[h]),p=v.useMemo(()=>h.filter(E=>{const B=s==="all"||E.propertyId.toString()===s,G=n==="all"||E.type===n,J=i==="all"||E.category===i;let C=!0;return o&&E.date&&(C=C&&!Oi(Lt(E.date),Lt(o))),d&&E.date&&(C=C&&!Cl(Lt(E.date),Lt(d))),B&&G&&J&&C}),[h,s,n,i,o,d]),g=v.useMemo(()=>x.filter(E=>{if(E.status==="cancelled")return!1;const B=s==="all"||E.propertyId.toString()===s;let G=!0;if(o||d){const J=Lt(E.checkIn),C=Lt(E.checkOut);if(o&&d){const V=Lt(o),z=Lt(d);G=J<=z&&C>=V}else if(o){const V=Lt(o);G=C>=V}else if(d){const V=Lt(d);G=J<=V}}return B&&G}),[x,s,o,d]),y=g.reduce((E,B)=>{const G=parseFloat(B.platformPayout||B.totalAmount||"0");return E+G},0),b=p.filter(E=>E.type==="income").reduce((E,B)=>E+parseFloat(B.amount||"0"),0),j=y+b,w=p.filter(E=>E.type==="expense").reduce((E,B)=>E+parseFloat(B.amount||"0"),0),N=j-w,S=j>0?N/j*100:0,O=v.useMemo(()=>{const E=new Map;return y>0&&E.set("Booking Revenue",y),p.filter(B=>B.type==="income").forEach(B=>{const G=E.get(B.category)||0;E.set(B.category,G+parseFloat(B.amount||"0"))}),Array.from(E.entries()).map(([B,G])=>({name:B,value:G})).sort((B,G)=>G.value-B.value)},[p,y]),P=v.useMemo(()=>{const E=new Map;return p.filter(B=>B.type==="expense").forEach(B=>{const G=E.get(B.category)||0;E.set(B.category,G+parseFloat(B.amount||"0"))}),Array.from(E.entries()).map(([B,G])=>({name:B,value:G})).sort((B,G)=>G.value-B.value)},[p]),k=v.useMemo(()=>s!=="all"?[]:m.map(E=>{const B=p.filter(le=>le.propertyId===E.id),G=g.filter(le=>le.propertyId===E.id),J=B.filter(le=>le.type==="income").reduce((le,Ce)=>le+parseFloat(Ce.amount||"0"),0),C=G.reduce((le,Ce)=>{const H=parseFloat(Ce.platformPayout||Ce.totalAmount||"0");return le+H},0),V=J+C,z=B.filter(le=>le.type==="expense").reduce((le,Ce)=>le+parseFloat(Ce.amount||"0"),0);return{name:E.name.length>15?E.name.substring(0,15)+"...":E.name,revenue:V,expenses:z,profit:V-z}}).filter(E=>E.revenue>0||E.expenses>0),[m,p,g,s]),R=v.useMemo(()=>{const E=new Map;return p.forEach(B=>{if(!B.date)return;const G=Lt(B.date),J=fr(G),C=J.toISOString(),V=E.get(C)||{revenue:0,expenses:0,sortDate:J};B.type==="income"?V.revenue+=parseFloat(B.amount||"0"):V.expenses+=parseFloat(B.amount||"0"),E.set(C,V)}),g.forEach(B=>{if(!B.checkIn)return;const G=Lt(B.checkIn),J=fr(G),C=J.toISOString(),V=E.get(C)||{revenue:0,expenses:0,sortDate:J},z=parseFloat(B.platformPayout||B.totalAmount||"0");V.revenue+=z,E.set(C,V)}),Array.from(E.entries()).map(([B,G])=>({month:et(G.sortDate,"MMM yyyy"),revenue:G.revenue,expenses:G.expenses,profit:G.revenue-G.expenses,sortDate:G.sortDate})).sort((B,G)=>B.sortDate.getTime()-G.sortDate.getTime())},[p,g]),F=v.useMemo(()=>{const E=new Map;return p.filter(B=>B.type==="income").forEach(B=>{const G=E.get(B.propertyId)||0;E.set(B.propertyId,G+parseFloat(B.amount||"0"))}),Array.from(E.entries()).map(([B,G])=>({property:m.find(J=>J.id===B)?.name||"Unknown",revenue:G})).sort((B,G)=>G.revenue-B.revenue).slice(0,5)},[p,m]),I=()=>{r("all"),a("all"),l("all"),c(""),u("")},W=(s!=="all"?1:0)+(n!=="all"?1:0)+(i!=="all"?1:0)+(o?1:0)+(d?1:0);return e.jsxs("div",{className:"min-h-screen bg-background p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Advanced Financial Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Multi-dimensional insights with dynamic filtering"})]}),e.jsxs(M,{variant:"outline","data-testid":"button-export",children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Export Report"]})]}),e.jsxs(D,{className:"mb-6",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"w-5 h-5"}),"Advanced Filters",W>0&&e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",W," active)"]})]}),W>0&&e.jsx(M,{variant:"ghost",size:"sm",onClick:I,"data-testid":"button-clear-filters",children:"Clear All"})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(ae,{value:s,onValueChange:r,children:[e.jsx(re,{"data-testid":"select-property",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),m.map(E=>e.jsx(A,{value:E.id.toString(),children:E.name},E.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsx(re,{"data-testid":"select-type",children:e.jsx(ie,{placeholder:"All Types"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"income",children:"Income"}),e.jsx(A,{value:"expense",children:"Expense"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(ae,{value:i,onValueChange:l,children:[e.jsx(re,{"data-testid":"select-category",children:e.jsx(ie,{placeholder:"All Categories"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Categories"}),f.map(E=>e.jsx(A,{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"From Date"}),e.jsx(Q,{type:"date",value:o,onChange:E=>c(E.target.value),"data-testid":"input-date-from"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"To Date"}),e.jsx(Q,{type:"date",value:d,onChange:E=>u(E.target.value),"data-testid":"input-date-to"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Ot,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"metric-revenue",children:t(j)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.filter(E=>E.type==="income").length," transactions"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(Yl,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"metric-expenses",children:t(w)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p.filter(E=>E.type==="expense").length," transactions"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(Ze,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:`text-2xl font-bold ${N>=0?"text-blue-600":"text-red-600"}`,"data-testid":"metric-profit",children:t(N)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[S.toFixed(1),"% margin"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Data Points"}),e.jsx($s,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Filtered transactions"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[R.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Monthly Trend Analysis"})}),e.jsx(T,{children:e.jsx(da,{width:"100%",height:300,children:e.jsxs(rw,{data:R,children:[e.jsx(Tl,{strokeDasharray:"3 3"}),e.jsx(va,{dataKey:"month"}),e.jsx(ya,{}),e.jsx(mr,{formatter:E=>t(Number(E))}),e.jsx(fa,{}),e.jsx(Za,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Revenue"}),e.jsx(Za,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",strokeWidth:2,name:"Expenses"}),e.jsx(Za,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:2,name:"Profit"})]})})})]}),O.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Revenue Distribution by Category"})}),e.jsx(T,{children:e.jsx(da,{width:"100%",height:300,children:e.jsxs(sp,{children:[e.jsx(Tn,{data:O,cx:"50%",cy:"50%",labelLine:!1,label:({name:E,percent:B})=>`${E}: ${(B*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:O.map((E,B)=>e.jsx(Ul,{fill:dh[B%dh.length]},`cell-${B}`))}),e.jsx(mr,{formatter:E=>t(Number(E))})]})})})]})]}),k.length>0&&s==="all"&&e.jsxs(D,{className:"mb-6",children:[e.jsx($,{children:e.jsx(L,{children:"Property Performance Comparison"})}),e.jsx(T,{children:e.jsx(da,{width:"100%",height:350,children:e.jsxs(s0,{data:k,children:[e.jsx(Tl,{strokeDasharray:"3 3"}),e.jsx(va,{dataKey:"name"}),e.jsx(ya,{}),e.jsx(mr,{formatter:E=>t(Number(E))}),e.jsx(fa,{}),e.jsx(Xn,{dataKey:"revenue",fill:"#10b981",name:"Revenue"}),e.jsx(Xn,{dataKey:"expenses",fill:"#ef4444",name:"Expenses"}),e.jsx(Xn,{dataKey:"profit",fill:"#3b82f6",name:"Profit"})]})})})]}),P.length>0&&e.jsxs(D,{className:"mb-6",children:[e.jsx($,{children:e.jsx(L,{children:"Expense Breakdown by Category"})}),e.jsx(T,{children:e.jsx(da,{width:"100%",height:300,children:e.jsxs(sp,{children:[e.jsx(Tn,{data:P,cx:"50%",cy:"50%",labelLine:!1,label:({name:E,percent:B})=>`${E}: ${(B*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:P.map((E,B)=>e.jsx(Ul,{fill:dh[B%dh.length]},`cell-${B}`))}),e.jsx(mr,{formatter:E=>t(Number(E))})]})})})]}),F.length>0&&s==="all"&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Top 5 Revenue Generating Properties"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:F.map((E,B)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold",children:B+1}),e.jsx("span",{className:"font-medium",children:E.property})]}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:t(E.revenue)})]},B))})})]}),p.length===0&&e.jsx(D,{children:e.jsxs(T,{className:"p-12 text-center",children:[e.jsx($s,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No data available for the selected filters"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your filter criteria"})]})})]})}async function Twe(t){try{return(await Ne("POST","/api/ai/test",{prompt:t})).result||"No response received"}catch(s){throw console.error("AI Assistant Error:",s),new Error(`AI Assistant failed: ${s.message}`)}}async function Dwe(t){try{return(await Ne("POST","/api/ai/property-description",{propertyDetails:t})).description||"No description generated"}catch(s){throw console.error("Property Description Error:",s),new Error(`Failed to generate property description: ${s.message}`)}}async function Owe(t){try{return(await Ne("POST","/api/ai/analyze-review",{reviewText:t})).analysis||{}}catch(s){throw console.error("Review Analysis Error:",s),new Error(`Failed to analyze guest review: ${s.message}`)}}async function Ewe(t,s){try{return(await Ne("POST","/api/ai/maintenance-suggestions",{propertyType:t,lastMaintenanceDate:s})).suggestions||{}}catch(r){throw console.error("Maintenance Suggestions Error:",r),new Error(`Failed to generate maintenance suggestions: ${r.message}`)}}function Mwe(){const[t,s]=v.useState(!1),[r,n]=v.useState(""),{toast:a}=st(),i=async()=>{s(!0);try{const d=await Twe("Hello! Can you confirm that you're working properly?");n(d||"No response received"),a({title:"Success",description:"AI Assistant is working!"})}catch(d){console.error("AI Test Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"AI Assistant failed to respond",variant:"destructive"})}finally{s(!1)}},l=async()=>{s(!0);try{const d=await Dwe({name:"Villa Test",bedrooms:3,bathrooms:2,amenities:["Pool","WiFi","Kitchen"],location:"Koh Samui, Thailand"});n(d||"No description generated"),a({title:"Success",description:"Property description generated!"})}catch(d){console.error("Property Description Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"Failed to generate property description",variant:"destructive"})}finally{s(!1)}},o=async()=>{s(!0);try{const d=await Owe("The villa was amazing! Great location, clean rooms, and helpful staff. Only issue was the WiFi was slow.");n(JSON.stringify(d,null,2)),a({title:"Success",description:"Review analysis completed!"})}catch(d){console.error("Review Analysis Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"Failed to analyze review",variant:"destructive"})}finally{s(!1)}},c=async()=>{s(!0);try{const d=await Ewe("villa","2025-01-01");n(JSON.stringify(d,null,2)),a({title:"Success",description:"Maintenance suggestions generated!"})}catch(d){console.error("Maintenance Suggestions Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"Failed to generate maintenance suggestions",variant:"destructive"})}finally{s(!1)}};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"AI Integration Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Test the OpenAI integration in HostPilotPro"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"w-5 h-5"}),"Basic AI Test"]})}),e.jsx(T,{children:e.jsx(M,{onClick:i,disabled:t,className:"w-full",children:"Test AI Assistant"})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Property Description"]})}),e.jsx(T,{children:e.jsx(M,{onClick:l,disabled:t,className:"w-full",children:"Generate Description"})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"w-5 h-5"}),"Review Analysis"]})}),e.jsx(T,{children:e.jsx(M,{onClick:o,disabled:t,className:"w-full",children:"Analyze Sample Review"})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),"Maintenance Suggestions"]})}),e.jsx(T,{children:e.jsx(M,{onClick:c,disabled:t,className:"w-full",children:"Generate Suggestions"})})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"AI Response"})}),e.jsx(T,{children:e.jsx(ct,{value:r,readOnly:!0,placeholder:"AI responses will appear here...",className:"min-h-[200px] font-mono text-sm"})})]})]})}function Rwe(){const[t,s]=v.useState(!1),[r,n]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState("The villa was amazing! Great location, clean rooms, and helpful staff. Only issue was the WiFi was slow."),{toast:c}=st(),d=async()=>{s(!0);try{const p=await(await Ne("POST","/api/ai/test",{prompt:"Hello! Please confirm you're working and tell me about HostPilotPro's AI capabilities."})).json();n(p.result||"No response received"),c({title:"AI Assistant Working!",description:"Basic AI functionality confirmed"})}catch(f){console.error("AI Test Error:",f),n(`Error: ${f.message}`),c({title:"AI Error",description:"Check if OpenAI API key is configured",variant:"destructive"})}finally{s(!1)}},u=async()=>{s(!0);try{const p=await(await Ne("POST","/api/ai/property-description",{propertyDetails:{name:"Villa Sunset Paradise",bedrooms:4,bathrooms:3,amenities:["Private Pool","Ocean View","WiFi","Modern Kitchen","Air Conditioning"],location:"Koh Samui, Thailand"}})).json();n(p.description||"No description generated"),c({title:"Success!",description:"AI property description generated"})}catch(f){console.error("Property Description Error:",f),n(`Error: ${f.message}`),c({title:"Error",description:"Failed to generate property description",variant:"destructive"})}finally{s(!1)}},m=async()=>{s(!0);try{const p=await(await Ne("POST","/api/ai/analyze-review",{reviewText:l})).json();n(JSON.stringify(p.analysis,null,2)),c({title:"Review Analyzed!",description:"AI sentiment analysis completed"})}catch(f){console.error("Review Analysis Error:",f),n(`Error: ${f.message}`),c({title:"Error",description:"Failed to analyze review",variant:"destructive"})}finally{s(!1)}},h=async()=>{s(!0);try{const p=await(await Ne("POST","/api/ai/maintenance-suggestions",{propertyType:"luxury villa",lastMaintenanceDate:"2024-01-15"})).json();n(JSON.stringify(p.suggestions,null,2)),c({title:"Maintenance Suggestions Generated!",description:"AI-powered maintenance recommendations ready"})}catch(f){console.error("Maintenance Suggestions Error:",f),n(`Error: ${f.message}`),c({title:"Error",description:"Failed to generate maintenance suggestions",variant:"destructive"})}finally{s(!1)}},x=async()=>{if(!a.trim()){c({title:"Empty Prompt",description:"Please enter a custom prompt to test",variant:"destructive"});return}s(!0);try{const p=await(await Ne("POST","/api/ai/custom",{prompt:a})).json();n(p.result||"No response received"),c({title:"Custom AI Response!",description:"Your custom prompt was processed"})}catch(f){console.error("Custom Prompt Error:",f),n(`Error: ${f.message}`),c({title:"Error",description:"Failed to process custom prompt",variant:"destructive"})}finally{s(!1)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Nn,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"AI Feature Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Test and explore HostPilotPro's AI capabilities"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"AI Status"}),e.jsx(Zn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"OpenAI GPT-4o Integration"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"AI Features"}),e.jsx(Zd,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8+"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI-powered tools available"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Integration"}),e.jsx(es,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Live"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Real-time AI responses"})]})]})]}),e.jsxs(xt,{defaultValue:"testing",className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"testing",children:"AI Testing"}),e.jsx(de,{value:"features",children:"AI Features"}),e.jsx(de,{value:"examples",children:"Live Examples"}),e.jsx(de,{value:"integration",children:"Integration"})]}),e.jsx(me,{value:"testing",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"h-5 w-5"}),"AI Test Suite"]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs(M,{onClick:d,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Test Basic AI Assistant"]}),e.jsxs(M,{onClick:u,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Generate Property Description"]}),e.jsxs(M,{onClick:h,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Generate Maintenance Tasks"]}),e.jsxs(M,{onClick:m,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Analyze Guest Review"]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Custom AI Prompt"})}),e.jsxs(T,{className:"space-y-3",children:[e.jsx(ct,{placeholder:"Enter your custom AI prompt here...",value:a,onChange:f=>i(f.target.value),rows:3}),e.jsxs(M,{onClick:x,disabled:t||!a.trim(),className:"w-full",children:[e.jsx(Zd,{className:"h-4 w-4 mr-2"}),"Send Custom Prompt"]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Review Analysis Test"})}),e.jsx(T,{className:"space-y-3",children:e.jsx(ct,{placeholder:"Enter a guest review to analyze...",value:l,onChange:f=>o(f.target.value),rows:3})})]})]}),e.jsx("div",{children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-primary border-t-transparent rounded-full"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"h-5 w-5 text-green-600"}),"AI Response"]})})}),e.jsx(T,{children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 min-h-[300px] max-h-[500px] overflow-y-auto",children:r?e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:r}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Click any test button to see AI results here"})})})]})})]})}),e.jsx(me,{value:"features",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-blue-600"}),"Property AI"]})}),e.jsx(T,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Property Description Generation"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Amenity Recommendations"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Pricing Suggestions"]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"h-5 w-5 text-purple-600"}),"Guest AI"]})}),e.jsx(T,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Review Sentiment Analysis"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Smart Guest Responses"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Guest Request Processing"]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5 text-orange-600"}),"Maintenance AI"]})}),e.jsx(T,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Task Suggestions"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Priority Assessment"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),"Preventive Scheduling"]})]})})]})]})}),e.jsx(me,{value:"examples",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"AI in Daily Operations"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(U,{variant:"secondary",children:"âœ¨ AI Features Active"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI is actively working in these areas:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"â€¢ Guest review analysis and sentiment tracking"}),e.jsx("li",{children:"â€¢ Automated maintenance task suggestions"}),e.jsx("li",{children:"â€¢ Smart guest communication responses"}),e.jsx("li",{children:"â€¢ Property description optimization"}),e.jsx("li",{children:"â€¢ Task priority assessment"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Available AI Tools"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(U,{variant:"outline",children:"Navigation: Settings â†’ AI Tools"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"â€¢ AI Feedback Monitor (Guest insights)"}),e.jsx("li",{children:"â€¢ AI Task Manager (Smart scheduling)"}),e.jsx("li",{children:"â€¢ AI Notifications & Reminders"}),e.jsx("li",{children:"â€¢ Guest Portal Smart Requests"}),e.jsx("li",{children:"â€¢ Property AI Recommendations"})]})]})})]})]})}),e.jsx(me,{value:"integration",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"AI Integration Status"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"OpenAI GPT-4o Integration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Latest AI model with enhanced capabilities"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Real-time Processing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Instant AI responses for guest and property management"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Multi-language Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI works in multiple languages for global guests"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Context-Aware Responses"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI understands property and guest context"})]})]})]})})]})})]})]})}function _we(){const{formatWithConversion:t}=Rr(),[s,r]=v.useState(!1),[n,a]=v.useState(!1),[i,l]=v.useState(!1),{toast:o}=st(),c=pt(),d=Wt({defaultValues:{amount:"",source:"",guestName:"",property:"",notes:"",receiptPhoto:""}}),u=Wt({defaultValues:{amount:"",description:"",category:"",property:"",receipt:"",receiptPhoto:""}}),m=(N,S)=>{const O=N.target.files?.[0];if(O){const P=new FileReader;P.onload=k=>{const R=k.target?.result;S==="cash"?d.setValue("receiptPhoto",R):u.setValue("receiptPhoto",R)},P.readAsDataURL(O)}},{data:h,isLoading:x,error:f}=xe({queryKey:["/api/staff-wallet/staff-pool"],enabled:!0,retry:3,staleTime:3e4}),{data:p=[],isLoading:g}=xe({queryKey:["/api/staff-wallet/staff-pool/transactions"],enabled:!0,retry:3,staleTime:3e4}),y=[{value:"transport",label:"Transport & Fuel",icon:em},{value:"supplies",label:"Office Supplies",icon:aB},{value:"maintenance",label:"Emergency Repairs",icon:Ms},{value:"meals",label:"Staff Meals",icon:j4},{value:"other",label:"Other Expenses",icon:tn}],b=Te({mutationFn:async N=>{const S=await fetch("/api/staff-wallet/staff-pool/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!S.ok)throw new Error("Failed to add expense");return S.json()},onSuccess:()=>{o({title:"Expense added successfully"}),r(!1),u.reset(),c.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),c.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}}),j=Te({mutationFn:async N=>{const S=await fetch("/api/staff-wallet/staff-pool/cash-income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!S.ok)throw new Error("Failed to record cash collection");return S.json()},onSuccess:()=>{o({title:"Cash collection recorded"}),a(!1),d.reset(),c.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),c.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}}),w=Te({mutationFn:async()=>{const N=await fetch("/api/staff-wallet/staff-pool/clear-balance",{method:"POST",headers:{"Content-Type":"application/json"}});if(!N.ok)throw new Error("Failed to clear balance");return N.json()},onSuccess:()=>{o({title:"Balance cleared and reset to base petty cash amount"}),l(!1),c.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),c.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}});return x||g?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-gray-600",children:"Loading your wallet data..."})]}),e.jsxs(U,{variant:"outline",className:"text-green-600 border-green-200",children:[e.jsx(Cn,{className:"w-4 h-4 mr-1"}),"Staff Wallet"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(N=>e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})})},N))})]}):f?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-red-600",children:"Error loading wallet data. Please try again."})]}),e.jsxs(U,{variant:"outline",className:"text-red-600 border-red-200",children:[e.jsx(It,{className:"w-4 h-4 mr-1"}),"Error"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-gray-600",children:"Manage your petty cash, expenses, and cash collections"})]}),e.jsxs(U,{variant:"outline",className:"text-green-600 border-green-200",children:[e.jsx(Cn,{className:"w-4 h-4 mr-1"}),"Staff Wallet"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(h?.currentBalance||0)})]}),e.jsx(Cn,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Base Petty Cash"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t(h?.basePettyCash||5e3)})]}),e.jsx(Ze,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cash Collected"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",t(h?.totalCollected||0)]})]}),e.jsx(Ot,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",t(h?.totalExpenses||0)]})]}),e.jsx(tn,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(Ge,{open:n,onOpenChange:a,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Cash Collection"]})}),e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Record Cash Collection"})}),e.jsxs("form",{onSubmit:d.handleSubmit(N=>j.mutate(N)),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Amount Collected (THB)"}),e.jsx(Q,{type:"number",placeholder:"Enter amount",...d.register("amount",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Source"}),e.jsxs(ae,{onValueChange:N=>d.setValue("source",N),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select source"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"checkout_electric",children:"Check-out - Electricity Payment"}),e.jsx(A,{value:"checkout_deposit",children:"Check-out - Deposit Collection"}),e.jsx(A,{value:"checkout_damages",children:"Check-out - Damage Charges"}),e.jsx(A,{value:"service_payment",children:"Service Payment"}),e.jsx(A,{value:"other",children:"Other Cash Collection"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Guest Name"}),e.jsx(Q,{placeholder:"Enter guest name",...d.register("guestName")})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Property"}),e.jsxs(ae,{onValueChange:N=>d.setValue("property",N),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"Villa Aruna",children:"Villa Aruna"}),e.jsx(A,{value:"Villa Samui Breeze",children:"Villa Samui Breeze"}),e.jsx(A,{value:"Villa Paradise",children:"Villa Paradise"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Notes"}),e.jsx(ct,{placeholder:"Additional details...",...d.register("notes")})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Receipt Photo (Optional)"}),e.jsx(Q,{type:"file",accept:"image/*",onChange:N=>m(N,"cash")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload receipt photo or proof of collection"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>a(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:j.isPending,children:j.isPending?"Recording...":"Record Collection"})]})]})]})]}),e.jsxs(Ge,{open:s,onOpenChange:r,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{variant:"outline",children:[e.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Add Expense"]})}),e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Record Expense"})}),e.jsxs("form",{onSubmit:u.handleSubmit(N=>b.mutate(N)),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Amount Spent (THB)"}),e.jsx(Q,{type:"number",placeholder:"Enter amount",...u.register("amount",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Category"}),e.jsxs(ae,{onValueChange:N=>u.setValue("category",N),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select category"})}),e.jsx(ne,{children:y.map(N=>e.jsx(A,{value:N.value,children:N.label},N.value))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Description"}),e.jsx(ct,{placeholder:"What was purchased/paid for?",...u.register("description",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Property"}),e.jsxs(ae,{onValueChange:N=>u.setValue("property",N),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"Villa Aruna",children:"Villa Aruna"}),e.jsx(A,{value:"Villa Samui Breeze",children:"Villa Samui Breeze"}),e.jsx(A,{value:"Villa Paradise",children:"Villa Paradise"}),e.jsx(A,{value:"NA",children:"N/A - General Expense"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Receipt Number/Details (Optional)"}),e.jsx(Q,{placeholder:"Receipt number or store details",...u.register("receipt")})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Receipt Photo (Optional)"}),e.jsx(Q,{type:"file",accept:"image/*",onChange:N=>m(N,"expense")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload receipt photo for expense verification"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>r(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:b.isPending,children:b.isPending?"Recording...":"Record Expense"})]})]})]})]}),e.jsxs(Ge,{open:i,onOpenChange:l,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"border-orange-300 text-orange-600 hover:bg-orange-50",children:[e.jsx(It,{className:"w-4 h-4 mr-2"}),"Clear Balance"]})}),e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Clear Wallet Balance"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-orange-800",children:["This will clear your current balance and reset your wallet to the base petty cash amount of ",t(h.basePettyCash),"."]}),e.jsxs("p",{className:"text-sm text-orange-600 mt-2 font-medium",children:["Current balance: ",t(h.currentBalance)," â†’ ",t(h.basePettyCash)]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Reason for clearing"}),e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select reason"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"end_of_day",children:"End of day clearing"}),e.jsx(A,{value:"bank_deposit",children:"Depositing excess cash"}),e.jsx(A,{value:"handover",children:"Shift handover"}),e.jsx(A,{value:"audit",children:"Audit requirement"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Notes"}),e.jsx(ct,{placeholder:"Additional notes about the clearing..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>w.mutate(),className:"bg-orange-600 hover:bg-orange-700",children:"Clear Balance"})]})]})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Recent Transactions"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(tt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-sm",children:"Add an expense or record cash collection to see transactions here"})]}):p.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N.type==="income"?"bg-green-100":"bg-red-100"}`,children:N.type==="income"?e.jsx(ut,{className:"w-5 h-5 text-green-600"}):e.jsx(Yd,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.description}),e.jsx("p",{className:"text-sm text-gray-600",children:N.date}),N.guestName&&e.jsxs("p",{className:"text-xs text-blue-600",children:[N.guestName," â€¢ ",N.propertyName]}),N.receipt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Receipt: ",N.receipt]}),N.receiptPhoto&&e.jsx("p",{className:"text-xs text-blue-600",children:"ðŸ“¸ Photo attached"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-lg font-semibold ${N.type==="income"?"text-green-600":"text-red-600"}`,children:[N.type==="income"?"+":"-",t(N.amount)]}),e.jsx(U,{variant:"outline",className:"text-xs",children:N.category.replace("_"," ")})]})]},N.id))})})]})]})}function Iwe(){const{formatWithConversion:t}=Rr(),[s,r]=v.useState(!1),[n,a]=v.useState(null),{toast:i}=st(),l=pt(),{data:o=[]}=xe({queryKey:["/api/staff-cash-collection/pending"]}),{data:c=[]}=xe({queryKey:["/api/staff-cash-collection/completed"]}),d=Te({mutationFn:async m=>{const h=await fetch("/api/staff-wallet/cash-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!h.ok)throw new Error("Failed to record cash collection");return h.json()},onSuccess:()=>{i({title:"Cash collection recorded and added to your wallet"}),r(!1),l.invalidateQueries({queryKey:["/api/staff-cash-collection"]})}}),u=m=>{a(m),r(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Cash Collection Tracker"}),e.jsx("p",{className:"text-gray-600",children:"Track cash collections from guest check-outs"})]}),e.jsxs(U,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(Er,{className:"w-4 h-4 mr-1"}),"Cash Tracker"]})]}),e.jsxs(xt,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(ht,{children:[e.jsxs(de,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4"}),"Pending Collections (",o.length,")"]}),e.jsxs(de,{value:"completed",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Completed (",c.length,")"]})]}),e.jsx(me,{value:"pending",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-orange-500"}),"Pending Cash Collections"]})}),e.jsx(T,{children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Er,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No pending cash collections"})]}):e.jsx("div",{className:"space-y-4",children:o.map(m=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(zt,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:m.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(At,{className:"w-4 h-4"}),m.propertyName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-4 h-4"}),m.checkoutDate," at ",m.checkoutTime]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-blue-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"w-4 h-4"}),m.electricityReading.start," â†’ ",m.electricityReading.end," kWh"]}),e.jsxs("span",{children:["Usage: ",m.electricityReading.end-m.electricityReading.start," kWh Ã— ",t(m.electricityReading.rate)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(m.estimatedCash)}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Expected cash"}),e.jsxs(M,{onClick:()=>u(m),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(tn,{className:"w-4 h-4 mr-2"}),"Collect Cash"]})]})]})},m.id))})})]})}),e.jsx(me,{value:"completed",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-green-500"}),"Completed Collections"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:c.map(m=>e.jsx("div",{className:"border rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:m.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(At,{className:"w-4 h-4"}),m.propertyName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tt,{className:"w-4 h-4"}),m.checkoutDate," at ",m.collectionTime]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{children:["Collected by: ",m.collectedBy]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(es,{className:"w-4 h-4"}),m.electricityUsage," kWh"]}),m.receiptPhoto&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(Ju,{className:"w-4 h-4"}),"Receipt photo"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(m.cashCollected)}),e.jsx(U,{variant:"outline",className:"text-green-600 border-green-200",children:"Added to wallet"})]})]})},m.id))})})]})})]}),e.jsx(Ge,{open:s,onOpenChange:r,children:e.jsxs(We,{className:"max-w-md",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Record Cash Collection"})}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(zt,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:n.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:n.propertyName})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Electricity Usage"}),e.jsxs("p",{className:"font-semibold",children:[n.electricityReading.end-n.electricityReading.start," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Expected Amount"}),e.jsx("p",{className:"font-semibold text-green-600",children:t(n.estimatedCash)})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Actual Amount Collected (THB)"}),e.jsx(Q,{type:"number",defaultValue:n.estimatedCash,placeholder:"Enter actual amount collected"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Collection Method"}),e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"How was payment collected?"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"cash",children:"Cash Payment"}),e.jsx(A,{value:"card_cash",children:"Card + Cash"}),e.jsx(A,{value:"transfer_cash",children:"Bank Transfer + Cash"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Receipt Photo (Optional)"}),e.jsx(Q,{type:"file",accept:"image/*"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Take a photo of the receipt or payment proof"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Collection Notes"}),e.jsx(ct,{placeholder:"Any additional notes about the collection...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(M,{onClick:()=>d.mutate({}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(tn,{className:"w-4 h-4 mr-2"}),"Record & Add to Wallet"]})]})]})]})})]})}function $we(){const{formatWithConversion:t}=Rr(),[s,r]=v.useState(null),[n,a]=v.useState(!1),[i,l]=v.useState(new Date().toISOString().split("T")[0]),{toast:o}=st(),c=pt(),{data:d}=xe({queryKey:["/api/staff-expenses"]}),{data:u}=xe({queryKey:["/api/properties"]}),m=(d||[]).filter(j=>j.status==="pending_review"),h=(d||[]).filter(j=>j.status==="approved"||j.status==="rejected"),x=(u||[]).map(j=>({value:j.id.toString(),label:j.name})),f=[{value:"company_expense",label:"Company Expense",color:"blue",description:"General business cost"},{value:"billed_to_guest",label:"Billed to Guest",color:"green",description:"Guest should be charged"},{value:"billed_to_owner",label:"Billed to Owner",color:"orange",description:"Property owner responsibility"}],p=Te({mutationFn:async j=>{const w=await fetch(`/api/staff-expenses/${s?.id}/review`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!w.ok)throw new Error("Failed to review expense");return w.json()},onSuccess:()=>{o({title:"Expense reviewed and categorized successfully"}),a(!1),c.invalidateQueries({queryKey:["/api/staff-expenses"]})}}),g=j=>{r(j),a(!0)},y=()=>m.reduce((j,w)=>j+w.amount,0),b=j=>h.filter(w=>w.finalCategory===j).reduce((w,N)=>w+N.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Expense Management"}),e.jsx("p",{className:"text-gray-600",children:"Review and categorize staff petty cash expenses"})]}),e.jsxs(U,{variant:"outline",className:"text-red-600 border-red-200",children:[e.jsx(It,{className:"w-4 h-4 mr-1"}),m.length," Pending Review"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t(y())})]}),e.jsx(tt,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Company Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t(b("company_expense"))})]}),e.jsx(At,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guest Billable"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(b("billed_to_guest"))})]}),e.jsx(zt,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Owner Billable"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:t(b("billed_to_owner"))})]}),e.jsx(Ze,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsxs(xt,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(ht,{children:[e.jsxs(de,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4"}),"Pending Review (",m.length,")"]}),e.jsxs(de,{value:"reviewed",className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Reviewed (",h.length,")"]})]}),e.jsx(me,{value:"pending",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5 text-red-500"}),"Expenses Pending Review"]})}),e.jsx(T,{children:m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ie,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No pending expenses to review"})]}):e.jsx("div",{className:"space-y-4",children:m.map(j=>e.jsx("div",{className:"border rounded-lg p-4 bg-red-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(tn,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:j.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"w-4 h-4"}),j.staffName]}),e.jsxs("span",{children:[j.date," at ",j.time]}),e.jsxs("span",{className:"text-blue-600",children:["Category: ",j.category]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mt-1",children:[e.jsxs(U,{variant:"outline",className:"text-blue-600",children:["AI Suggests: ",x.find(w=>w.value===j.suggestedProperty)?.label||"Company-wide"]}),e.jsxs(U,{variant:"outline",className:"text-green-600",children:["Category: ",f.find(w=>w.value===j.suggestedCategory)?.label]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t(j.amount)}),e.jsxs(M,{onClick:()=>g(j),className:"mt-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Review & Categorize"]})]})]})},j.id))})})]})}),e.jsx(me,{value:"reviewed",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-green-500"}),"Reviewed & Categorized Expenses"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:h.map(j=>e.jsx("div",{className:"border rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:j.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"w-4 h-4"}),j.staffName]}),e.jsx("span",{children:j.date}),e.jsxs("span",{children:["Reviewed by: ",j.reviewedBy]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mt-1",children:[e.jsx(U,{variant:"outline",className:`${j.finalCategory==="company_expense"?"text-blue-600 border-blue-200":j.finalCategory==="billed_to_guest"?"text-green-600 border-green-200":"text-orange-600 border-orange-200"}`,children:f.find(w=>w.value===j.finalCategory)?.label}),j.property&&e.jsxs(U,{variant:"outline",className:"text-purple-600",children:[e.jsx(At,{className:"w-3 h-3 mr-1"}),x.find(w=>w.value===j.property)?.label]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(j.amount)}),e.jsx(U,{variant:"outline",className:"text-green-600 border-green-200",children:"Approved"})]})]})},j.id))})})]})})]}),e.jsx(Ge,{open:n,onOpenChange:a,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Review & Categorize Expense"})}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 border rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-600",children:"Staff Member"}),e.jsx("p",{className:"font-semibold",children:s.staffName})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-600",children:"Amount"}),e.jsx("p",{className:"font-semibold text-green-600",children:t(s.amount)})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-600",children:"Date & Time"}),e.jsxs("p",{className:"font-semibold",children:[s.date," at ",s.time]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-600",children:"Category"}),e.jsx("p",{className:"font-semibold",children:s.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(Z,{className:"text-sm text-gray-600",children:"Description"}),e.jsx("p",{className:"font-semibold",children:s.description})]}),s.receipt&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(Z,{className:"text-sm text-gray-600",children:"Receipt"}),e.jsx("p",{className:"text-blue-600 text-sm",children:s.receipt})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"AI Recommendations"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-blue-600",children:"Suggested Property"}),e.jsx("p",{children:x.find(j=>j.value===s.suggestedProperty)?.label||"Company-wide"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-blue-600",children:"Suggested Category"}),e.jsx("p",{children:f.find(j=>j.value===s.suggestedCategory)?.label})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Expense Category *"}),e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"How should this expense be categorized?"})}),e.jsx(ne,{children:f.map(j=>e.jsx(A,{value:j.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${j.color}-500`}),e.jsx("span",{children:j.label}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",j.description,")"]})]})},j.value))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Assign to Property (Optional)"}),e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property or leave blank for company-wide"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"none",children:"Company-wide (No specific property)"}),x.map(j=>e.jsx(A,{value:j.value,children:j.label},j.value))]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Review Notes"}),e.jsx(ct,{placeholder:"Add any notes about this expense categorization...",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsxs(M,{onClick:()=>p.mutate({}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Approve & Categorize"]})]})]})]})})]})}function RP(){const{formatWithConversion:t}=Rr(),{data:s}=xe({queryKey:["/api/staff-wallet/staff-pool"],enabled:!0}),{data:r}=xe({queryKey:["/api/tasks"],enabled:!0}),{data:n}=xe({queryKey:["/api/staff-expenses"]}),{data:a}=xe({queryKey:["/api/staff-cash-collection"]}),i=s?.currentBalance||0,l=s?.basePettyCash||0,o=(n||[]).filter(g=>g.status==="pending_review").length,c=(a||[]).filter(g=>g.status==="pending").length,d=r?.filter(g=>{const y=new Date().toDateString();return new Date(g.dueDate).toDateString()===y})?.length||0,u=r?.filter(g=>{const y=new Date().toDateString();return g.status==="completed"&&new Date(g.completedAt||g.updatedAt).toDateString()===y})?.length||0,m=[{title:"My Tasks Today",count:d,icon:Wa,href:"/tasks",color:"blue",description:`${u} completed`},{title:"My Wallet Balance",count:t(i),icon:Cn,href:"/staff-wallet-petty-cash",color:"green",description:`Base: ${t(l)}`},{title:"Pending Expenses",count:o,icon:It,href:"/staff-expense-management",color:"orange",description:"Awaiting review"},{title:"Cash Collections",count:`${c} pending`,icon:Ze,href:"/staff-cash-collection",color:"purple",description:"Guest check-outs"}],h=r?.slice(0,5).map(g=>({id:g.id,title:g.title,property:g.propertyName||`Property ${g.propertyId}`,priority:g.priority||"normal",status:g.status||"pending",time:g.scheduledTime||"09:00",category:g.category||"maintenance"}))||[],x=g=>{switch(g){case"high":return"destructive";case"normal":return"secondary";case"low":return"outline";default:return"secondary"}},f=g=>{switch(g){case"completed":return"bg-green-100 text-green-700";case"in_progress":return"bg-blue-100 text-blue-700";case"pending":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},p=g=>{switch(g){case"pool":return Ie;case"maintenance":return Ms;case"checkout":case"checkin":return tt;default:return Wa}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your daily overview"})]}),e.jsxs(U,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(tt,{className:"w-4 h-4 mr-1"}),"Staff Portal"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:m.map(g=>{const y=g.icon;return e.jsx(us,{href:g.href,children:e.jsxs(D,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:g.title}),e.jsx(y,{className:`h-4 w-4 text-${g.color}-600`})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.count}),e.jsx("p",{className:`text-xs text-${g.color}-600`,children:g.description})]})]})},g.title)})}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"w-5 h-5"}),"Today's Tasks (",h.length,")"]})}),e.jsxs(T,{children:[e.jsx("div",{className:"space-y-3",children:h.map(g=>{const y=p(g.category);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:[g.property," â€¢ ",g.time]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{variant:x(g.priority),children:g.priority}),e.jsx(U,{variant:"outline",className:f(g.status),children:g.status.replace("_"," ")})]})]},g.id)})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(us,{href:"/tasks",children:e.jsx(M,{variant:"outline",className:"w-full",children:"View All My Tasks"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"ðŸ’° Wallet & Expenses"})}),e.jsxs(T,{className:"space-y-3",children:[e.jsx(us,{href:"/staff-wallet-petty-cash",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Manage Petty Cash"]})}),e.jsx(us,{href:"/staff-cash-collection",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Cash Collection"]})})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"ðŸ˜ï¸ Property Tasks"})}),e.jsxs(T,{className:"space-y-3",children:[e.jsx(us,{href:"/checkin-checkout-workflow",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Check-in/Out"]})}),e.jsx(us,{href:"/maintenance-log-warranty-tracker",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Maintenance"]})})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"ðŸ’¬ Guest Services"})}),e.jsxs(T,{className:"space-y-3",children:[e.jsx(us,{href:"/guest-portal-smart-requests",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Guest Requests"]})}),e.jsx(us,{href:"/daily-operations",children:e.jsxs(M,{variant:"outline",className:"w-full justify-start",children:[e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Daily Operations"]})})]})]})]})]})}function Fwe(){const[t,s]=v.useState(!1),[r,n]=v.useState(!1),[a,i]=v.useState(""),{toast:l}=st(),o=pt(),{data:c=[],isLoading:d}=xe({queryKey:["/api/admin/staff-permissions"]}),u=Te({mutationFn:async f=>Ne(`/api/admin/staff-permissions/${f.staffId}/grant-task-creation`,{method:"POST",body:JSON.stringify(f)}),onSuccess:()=>{l({title:"Permission Granted",description:"Task creation permission has been granted to the staff member."}),o.invalidateQueries({queryKey:["/api/admin/staff-permissions"]}),s(!1)},onError:f=>{l({title:"Error",description:f.message||"Failed to grant permission",variant:"destructive"})}}),m=Te({mutationFn:async f=>Ne(`/api/admin/staff-permissions/${f.staffId}/revoke-task-creation`,{method:"POST",body:JSON.stringify(f)}),onSuccess:()=>{l({title:"Permission Revoked",description:"Task creation permission has been revoked from the staff member."}),o.invalidateQueries({queryKey:["/api/admin/staff-permissions"]}),n(!1)},onError:f=>{l({title:"Error",description:f.message||"Failed to revoke permission",variant:"destructive"})}}),h=f=>{f.preventDefault();const p=new FormData(f.currentTarget),g={staffId:p.get("staffId"),reason:p.get("reason"),departments:p.get("departments").split(",").map(y=>y.trim()),maxTasksPerDay:parseInt(p.get("maxTasksPerDay")),expiresAt:p.get("expiresAt")||void 0};u.mutate(g)},x=f=>{f.preventDefault();const p=new FormData(f.currentTarget),g={staffId:p.get("staffId"),reason:p.get("reason")};m.mutate(g)};return d?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Permission Management"})]}),e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"Loading staff permissions..."})})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Permission Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage task creation permissions for staff members"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ge,{open:t,onOpenChange:s,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(nm,{className:"w-4 h-4 mr-2"}),"Grant Permission"]})}),e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Grant Task Creation Permission"})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"staffId",children:"Staff User ID"}),e.jsx(Q,{name:"staffId",placeholder:"staff-pool",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reason",children:"Reason for granting permission"}),e.jsx(ct,{name:"reason",placeholder:"e.g., Experienced staff member needs to create maintenance tasks",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"departments",children:"Allowed Departments (comma-separated)"}),e.jsx(Q,{name:"departments",placeholder:"cleaning, maintenance, general",defaultValue:"general",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"maxTasksPerDay",children:"Maximum Tasks Per Day"}),e.jsx(Q,{name:"maxTasksPerDay",type:"number",defaultValue:"3",min:"1",max:"10",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"expiresAt",children:"Expiration Date (optional)"}),e.jsx(Q,{name:"expiresAt",type:"date"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:u.isPending,children:u.isPending?"Granting...":"Grant Permission"})]})]})]})]}),e.jsxs(Ge,{open:r,onOpenChange:n,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{variant:"destructive",children:[e.jsx(S4,{className:"w-4 h-4 mr-2"}),"Revoke Permission"]})}),e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Revoke Task Creation Permission"})}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"staffId",children:"Staff User ID"}),e.jsx(Q,{name:"staffId",placeholder:"staff-pool",required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reason",children:"Reason for revoking permission"}),e.jsx(ct,{name:"reason",placeholder:"e.g., Staff member no longer needs task creation access",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx(M,{type:"submit",variant:"destructive",disabled:m.isPending,children:m.isPending?"Revoking...":"Revoke Permission"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Staff"}),e.jsx(ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Can Create Tasks"}),e.jsx(Ie,{className:"h-4 w-4 text-green-600"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.filter(f=>f.canCreateTasks&&f.isActive).length})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Permission Requests"}),e.jsx(It,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No pending requests"})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Staff Permissions"]})}),e.jsx(T,{children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Kt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No staff permissions configured"}),e.jsx("p",{className:"text-sm",children:"Grant permissions to staff members to allow task creation"})]}):e.jsx("div",{className:"space-y-4",children:c.map(f=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${f.canCreateTasks&&f.isActive?"bg-green-100":"bg-gray-100"}`,children:f.canCreateTasks&&f.isActive?e.jsx(Ie,{className:"w-5 h-5 text-green-600"}):e.jsx(It,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Staff ID: ",f.staffUserId]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Max tasks: ",f.maxTasksPerDay,"/day â€¢ Departments: ",f.allowedDepartments.join(", ")]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Granted by: ",f.grantedBy," â€¢ ",f.reason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{variant:f.canCreateTasks&&f.isActive?"default":"secondary",children:f.canCreateTasks&&f.isActive?"Active":"Inactive"}),f.expiresAt&&e.jsxs(U,{variant:"outline",className:"text-xs",children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"Expires: ",new Date(f.expiresAt).toLocaleDateString()]})]})]})},f.id))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Permission Guidelines"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(It,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Default Behavior:"})," Staff members cannot create tasks unless explicitly granted permission by an administrator."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(It,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Daily Limits:"})," Staff can only create a limited number of tasks per day to prevent system overload."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(It,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Department Restrictions:"})," Staff can only create tasks for departments they are authorized to work with."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(It,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Approval Process:"})," Staff-created tasks may require admin approval before being executed."]})]})]})})]})]})}const Lwe=()=>{const[t,s]=v.useState(!1),[r,n]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(!1),c=async()=>{if(r.trim()){o(!0),console.log("ðŸ” Processing query:",JSON.stringify(r));try{console.log("ðŸ“¤ Sending request to /api/ai-bot/query...");const u=await fetch("/api/ai-bot/query",{method:"POST",headers:{"Content-Type":"application/json",credentials:"include"},credentials:"include",body:JSON.stringify({question:r})});if(console.log("ðŸ“¥ Response status:",u.status),!u.ok){const h=await u.json().catch(()=>({error:"Unknown error"}));console.error("âŒ API Error:",u.status,h),u.status===401?i("ðŸ”’ Authentication required. Please refresh the page to log in automatically, then try again."):i(`Error (${u.status}): ${h.error||h.message||"Failed to get response from AI assistant."}`);return}const m=await u.json();console.log("âœ… Received data:",m),m.response?i(m.response):(console.warn("âš ï¸ No response field in data:",m),i("No response received from AI. Please try again or contact support."))}catch(u){console.error("âŒ Exception in askCortex:",u),i(`Connection error: ${u.message||"Could not connect to AI assistant. Please check your internet connection."}`)}finally{o(!1)}}},d=u=>{u.key==="Enter"&&u.ctrlKey&&c()};return e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t?e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg border dark:border-gray-700 rounded-lg w-96 max-h-[calc(100vh-2rem)] flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-4 pb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Captain Cortex"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",title:"Close",children:"âŒ"})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"The Smart Co-Pilot for Property Management by HostPilotPro"})]}),e.jsxs("div",{className:"flex-shrink-0 px-4",children:[e.jsx("textarea",{className:"w-full p-2 border dark:border-gray-600 rounded mb-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Ask about your tasks, properties, or any management question...",value:r,onChange:u=>n(u.target.value),onKeyDown:d}),e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded w-full disabled:bg-gray-400 transition-colors",onClick:c,disabled:l||!r.trim(),children:l?"Thinking...":"Ask (Ctrl+Enter)"})]}),a&&e.jsxs("div",{className:"mt-2 mx-4 mb-4 p-2 border dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700 text-sm overflow-y-auto flex-1 min-h-0",children:[e.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:"Response:"}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap mt-1",children:a})]})]}):e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-colors",onClick:()=>s(!0),title:"Open Captain Cortex AI Assistant",children:"ðŸ‘¨â€âœˆï¸ Captain Cortex"})})};function Bwe(){return v.useEffect(()=>{["/api/properties","/api/tasks","/api/bookings","/api/dashboard/stats","/api/finance","/api/finance/analytics","/api/users"].forEach(r=>{wt.prefetchQuery({queryKey:[r],staleTime:60*60*1e3})}),["/dashboard-hub","/property-hub","/finance-hub","/system-hub"].forEach(r=>{wt.prefetchQuery({queryKey:["route",r],queryFn:()=>Promise.resolve(!0),staleTime:60*60*1e3})})},[]),null}const Vwe=[{value:"villa",label:"Villa Management"},{value:"hotel",label:"Hotel / Resort"},{value:"apartment",label:"Apartment Complex"},{value:"bnb",label:"B&B / Guesthouse"},{value:"other",label:"Other"}],_P=[{value:"hostaway",label:"Hostaway",description:"Full integration available",supported:!0},{value:"guesty",label:"Guesty",description:"Integration coming soon",supported:!1},{value:"lodgify",label:"Lodgify",description:"Integration coming soon",supported:!1},{value:"airbnb",label:"Airbnb Direct",description:"Manual import only",supported:!1},{value:"none",label:"No PMS / Manual Entry",description:"Start without PMS integration",supported:!0}],IP=[{id:"starter",name:"Starter",icon:e.jsx(ps,{className:"h-5 w-5"}),description:"Perfect for small property managers",propertyRange:"1-10 properties",price:"$15",priceDetail:"per property/month",features:["Property & booking management","Basic task tracking","Financial reporting","Email support","Mobile app access"]},{id:"professional",name:"Professional",icon:e.jsx(kl,{className:"h-5 w-5"}),description:"For growing management companies",propertyRange:"11-50 properties",price:"$12",priceDetail:"per property/month",popular:!0,features:["Everything in Starter","PMS integrations (Hostaway)","Advanced analytics","Staff management","API access","Priority support"]},{id:"enterprise",name:"Enterprise",icon:e.jsx(es,{className:"h-5 w-5"}),description:"For large-scale operations",propertyRange:"50+ properties",price:"$8",priceDetail:"per property/month",features:["Everything in Professional","White-label branding","Custom integrations","Advanced reporting","Dedicated account manager","Custom training"]}],qwe=[{id:"hostaway",label:"Hostaway PMS",description:"Property sync & calendar"},{id:"stripe",label:"Stripe Payments",description:"Payment processing"},{id:"quickbooks",label:"QuickBooks",description:"Accounting integration"},{id:"twilio",label:"SMS/WhatsApp",description:"Guest communication"},{id:"mailchimp",label:"Email Marketing",description:"Guest outreach"}],Uwe=["Thailand","Singapore","Malaysia","Indonesia","Philippines","Vietnam","Cambodia","Laos","Myanmar","Brunei","Other"],zwe=[{value:"0-10k",label:"$0 - $10k/month"},{value:"10k-50k",label:"$10k - $50k/month"},{value:"50k-100k",label:"$50k - $100k/month"},{value:"100k+",label:"$100k+/month"}];function Hwe(){const{toast:t}=st(),[s,r]=v.useState("business"),[n,a]=v.useState(!1),[i,l]=v.useState({companyName:"",contactName:"",email:"",phone:"",country:"",website:"",propertyCount:"",businessType:"",subscriptionTier:"professional",subscriptionType:"trial",estimatedMonthlyRevenue:"",pmsSystem:"",currentSoftware:"",integrationPriority:[],staffStructure:{ceoCount:1,managerCount:1,supervisorCount:2,staffCount:5,agentCount:0},message:"",requestedFeatures:[]}),o=(p,g)=>{l(y=>({...y,integrationPriority:g?[...y.integrationPriority,p]:y.integrationPriority.filter(b=>b!==p)}))},c=()=>{const p=parseInt(i.propertyCount)||0,g=IP.find(b=>b.id===i.subscriptionTier);if(!g||p===0)return{monthly:0,tier:null};const y=parseInt(g.price.replace("$",""));return{monthly:p*y,tier:g,count:p}},d=()=>{const p=parseInt(i.propertyCount)||0;return p<=10?"starter":p<=50?"professional":"enterprise"},u=()=>{const p=["business","subscription","pms","staff","review"],g=p.indexOf(s);g<p.length-1&&r(p[g+1])},m=()=>{const p=["business","subscription","pms","staff","review"],g=p.indexOf(s);g>0&&r(p[g-1])},h=p=>{switch(p){case"business":return i.companyName&&i.contactName&&i.email&&i.country&&i.propertyCount;case"subscription":return i.subscriptionTier&&i.subscriptionType;case"pms":return i.pmsSystem!==void 0;case"staff":return!0;default:return!0}},x=async p=>{p.preventDefault(),a(!0);try{await Ne("/api/saas/signup-request","POST",{...i,propertyCount:parseInt(i.propertyCount)||0}),t({title:"Request Submitted!",description:`Thank you for your interest in HostPilotPro! We'll provision your ${i.subscriptionType==="trial"?"trial":"paid"} environment and send setup instructions to ${i.email} within 24 hours.`}),r("success")}catch{t({title:"Submission Failed",description:"Unable to submit your request. Please try again.",variant:"destructive"})}finally{a(!1)}},f=c();return d(),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Join HostPilotPro"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Scale your property management business with our comprehensive SaaS platform. Get your dedicated environment with PMS integrations, staff management, and enterprise-grade tools."})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex justify-center space-x-4",children:[{id:"business",label:"Business",icon:bs},{id:"subscription",label:"Plan",icon:kl},{id:"pms",label:"PMS",icon:ss},{id:"staff",label:"Team",icon:ot},{id:"review",label:"Review",icon:Ie}].map((p,g)=>{const y=s===p.id,b=["business","subscription","pms","staff"].slice(0,["business","subscription","pms","staff","review"].indexOf(s)).includes(p.id),j=p.icon;return e.jsxs("div",{className:`flex items-center ${g<4?"flex-1":""}`,children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${b?"bg-green-500 text-white":y?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e.jsx(j,{className:"h-5 w-5"})}),e.jsx("span",{className:`ml-2 text-sm font-medium ${y?"text-blue-600":b?"text-green-600":"text-gray-500"}`,children:p.label}),g<4&&e.jsx("div",{className:`flex-1 h-1 mx-4 ${b?"bg-green-500":"bg-gray-300"}`})]},p.id)})})}),e.jsxs(D,{className:"shadow-lg",children:[s==="business"&&e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-6 w-6 text-blue-600"}),"Business Information"]}),e.jsx(Ee,{children:"Tell us about your property management company"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"companyName",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Company Name *"]}),e.jsx(Q,{id:"companyName",value:i.companyName,onChange:p=>l(g=>({...g,companyName:p.target.value})),placeholder:"Mr Property Siam",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"contactName",className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-4 w-4"}),"Contact Person *"]}),e.jsx(Q,{id:"contactName",value:i.contactName,onChange:p=>l(g=>({...g,contactName:p.target.value})),placeholder:"Your Full Name",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-4 w-4"}),"Email Address *"]}),e.jsx(Q,{id:"email",type:"email",value:i.email,onChange:p=>l(g=>({...g,email:p.target.value})),placeholder:"contact@yourcompany.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Phone Number"]}),e.jsx(Q,{id:"phone",value:i.phone,onChange:p=>l(g=>({...g,phone:p.target.value})),placeholder:"+66 123 456 789"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"country",className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Country *"]}),e.jsxs(ae,{value:i.country,onValueChange:p=>l(g=>({...g,country:p})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select your country"})}),e.jsx(ne,{children:Uwe.map(p=>e.jsx(A,{value:p,children:p},p))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"website",className:"flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4"}),"Website"]}),e.jsx(Q,{id:"website",value:i.website,onChange:p=>l(g=>({...g,website:p.target.value})),placeholder:"https://yourcompany.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"propertyCount",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Number of Properties *"]}),e.jsx(Q,{id:"propertyCount",type:"number",min:"1",max:"500",value:i.propertyCount,onChange:p=>{const g=parseInt(p.target.value)||0;l(y=>({...y,propertyCount:p.target.value,subscriptionTier:g<=10?"starter":g<=50?"professional":"enterprise"}))},placeholder:"50"}),i.propertyCount&&e.jsxs("p",{className:"text-sm text-blue-600",children:["Recommended plan: ",d()==="starter"?"Starter":d()==="professional"?"Professional":"Enterprise"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"businessType",children:"Business Type"}),e.jsxs(ae,{value:i.businessType,onValueChange:p=>l(g=>({...g,businessType:p})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select business type"})}),e.jsx(ne,{children:Vwe.map(p=>e.jsx(A,{value:p.value,children:p.label},p.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"estimatedRevenue",children:"Estimated Monthly Revenue"}),e.jsxs(ae,{value:i.estimatedMonthlyRevenue,onValueChange:p=>l(g=>({...g,estimatedMonthlyRevenue:p})),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select revenue range (optional)"})}),e.jsx(ne,{children:zwe.map(p=>e.jsx(A,{value:p.value,children:p.label},p.value))})]})]})]})]}),s==="subscription"&&e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(kl,{className:"h-6 w-6 text-blue-600"}),"Choose Your Plan"]}),e.jsx(Ee,{children:"Select the subscription tier that fits your business size"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex",children:[e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i.subscriptionType==="trial"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,onClick:()=>l(p=>({...p,subscriptionType:"trial"})),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"14-Day Free Trial"]})}),e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i.subscriptionType==="paid"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,onClick:()=>l(p=>({...p,subscriptionType:"paid"})),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Start Paid Plan"]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:IP.map(p=>e.jsxs("div",{className:`relative p-6 rounded-lg border-2 cursor-pointer transition-all ${i.subscriptionTier===p.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-blue-300"} ${p.popular?"ring-2 ring-blue-200":""}`,onClick:()=>l(g=>({...g,subscriptionTier:p.id})),children:[p.popular&&e.jsx(U,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600",children:"Most Popular"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:p.icon}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:p.name}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:p.description}),e.jsx("p",{className:"text-sm text-blue-600 mb-4",children:p.propertyRange}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-3xl font-bold",children:p.price}),e.jsxs("span",{className:"text-gray-600",children:["/",p.priceDetail]})]}),i.propertyCount&&e.jsxs("div",{className:"mb-4 p-2 bg-gray-50 rounded",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[parseInt(i.propertyCount)," properties Ã— ",p.price]}),e.jsxs("p",{className:"font-bold text-lg",children:["$",parseInt(i.propertyCount)*parseInt(p.price.replace("$","")),"/month"]})]}),e.jsx("ul",{className:"text-left space-y-2 text-sm",children:p.features.map((g,y)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),g]},y))})]})]},p.id))}),f.monthly>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Your Plan Summary"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[f.count," properties on ",f.tier?.name," plan"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.subscriptionType==="trial"?"14-day free trial, then ":"","$",f.monthly,"/month"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.subscriptionType==="trial"?"FREE":`$${f.monthly}`}),e.jsx("p",{className:"text-sm text-gray-600",children:i.subscriptionType==="trial"?"for 14 days":"per month"})]})]})]})]})})]}),s==="pms"&&e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-6 w-6 text-blue-600"}),"PMS Integration"]}),e.jsx(Ee,{children:"Connect your Property Management System for seamless data sync"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:_P.map(p=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${i.pmsSystem===p.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"} ${p.supported?"":"opacity-60"}`,onClick:()=>l(g=>({...g,pmsSystem:p.value})),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[p.label,p.value==="hostaway"&&e.jsx(U,{className:"bg-green-100 text-green-800",children:"Ready for Mr Property Siam"}),!p.supported&&e.jsx(U,{variant:"secondary",children:"Coming Soon"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:p.description})]}),i.pmsSystem===p.value&&e.jsx(Ie,{className:"h-5 w-5 text-blue-500"})]})},p.value))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{htmlFor:"currentSoftware",children:"What software do you currently use?"}),e.jsx(Q,{id:"currentSoftware",value:i.currentSoftware,onChange:p=>l(g=>({...g,currentSoftware:p.target.value})),placeholder:"e.g., Excel, QuickBooks, custom system"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{className:"text-base font-semibold",children:"Integration Priorities (optional)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:qwe.map(p=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pi,{id:p.id,checked:i.integrationPriority.includes(p.id),onCheckedChange:g=>o(p.id,g)}),e.jsx(Z,{htmlFor:p.id,className:"text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:p.label}),e.jsx("p",{className:"text-gray-500 text-xs",children:p.description})]})})]},p.id))})]})]})]}),s==="staff"&&e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-6 w-6 text-blue-600"}),"Team Structure"]}),e.jsx(Ee,{children:"Plan your staff hierarchy for role-based access control"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"ceoCount",className:"flex items-center gap-2",children:[e.jsx(kl,{className:"h-4 w-4"}),"CEO/Owners (Full Access)"]}),e.jsx(Q,{id:"ceoCount",type:"number",min:"1",max:"5",value:i.staffStructure.ceoCount,onChange:p=>l(g=>({...g,staffStructure:{...g.staffStructure,ceoCount:parseInt(p.target.value)||1}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"System administration, billing, full property access"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"managerCount",className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Managers (Property Oversight)"]}),e.jsx(Q,{id:"managerCount",type:"number",min:"0",max:"10",value:i.staffStructure.managerCount,onChange:p=>l(g=>({...g,staffStructure:{...g.staffStructure,managerCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Property portfolio management, staff oversight"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"supervisorCount",className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-4 w-4"}),"Supervisors (Operations)"]}),e.jsx(Q,{id:"supervisorCount",type:"number",min:"0",max:"20",value:i.staffStructure.supervisorCount,onChange:p=>l(g=>({...g,staffStructure:{...g.staffStructure,supervisorCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Task management, quality control, reporting"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"staffCount",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Staff Members (Execution)"]}),e.jsx(Q,{id:"staffCount",type:"number",min:"0",max:"100",value:i.staffStructure.staffCount,onChange:p=>l(g=>({...g,staffStructure:{...g.staffStructure,staffCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Housekeeping, maintenance, guest services"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"agentCount",className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"h-4 w-4"}),"Agents (Bookings)"]}),e.jsx(Q,{id:"agentCount",type:"number",min:"0",max:"50",value:i.staffStructure.agentCount,onChange:p=>l(g=>({...g,staffStructure:{...g.staffStructure,agentCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sales agents, booking management, commissions"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Total Team Size"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Object.values(i.staffStructure).reduce((p,g)=>p+g,0)," team members"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Accounts will be created during setup based on your structure"})]})]})]}),s==="review"&&e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-6 w-6 text-blue-600"}),"Review & Submit"]}),e.jsx(Ee,{children:"Review your configuration and submit your request"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-base",children:"Business Information"})}),e.jsxs(T,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",i.companyName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",i.contactName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",i.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Properties:"})," ",i.propertyCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",i.country]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-base",children:"Subscription Plan"})}),e.jsxs(T,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tier:"})," ",i.subscriptionTier.charAt(0).toUpperCase()+i.subscriptionTier.slice(1)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",i.subscriptionType==="trial"?"14-day Free Trial":"Paid Plan"]}),f.monthly>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Monthly Cost:"})," ",i.subscriptionType==="trial"?"FREE (then $"+f.monthly+")":"$"+f.monthly]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-base",children:"PMS Integration"})}),e.jsxs(T,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"System:"})," ",_P.find(p=>p.value===i.pmsSystem)?.label||"None selected"]}),i.currentSoftware&&e.jsxs("p",{children:[e.jsx("strong",{children:"Current Software:"})," ",i.currentSoftware]}),i.integrationPriority.length>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Priority Integrations:"})," ",i.integrationPriority.length," selected"]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-base",children:"Team Structure"})}),e.jsxs(T,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"CEOs/Owners:"})," ",i.staffStructure.ceoCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Managers:"})," ",i.staffStructure.managerCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisors:"})," ",i.staffStructure.supervisorCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Staff:"})," ",i.staffStructure.staffCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Agents:"})," ",i.staffStructure.agentCount]}),e.jsxs("p",{className:"font-semibold border-t pt-1",children:[e.jsx("strong",{children:"Total:"})," ",Object.values(i.staffStructure).reduce((p,g)=>p+g,0)," accounts"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"finalMessage",className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"h-4 w-4"}),"Additional Requirements (optional)"]}),e.jsx(ct,{id:"finalMessage",value:i.message,onChange:p=>l(g=>({...g,message:p.target.value})),placeholder:"Any special requirements, questions, or timeline preferences...",rows:3})]})]})]}),s!=="success"&&e.jsxs("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:[e.jsxs(M,{type:"button",variant:"outline",onClick:m,disabled:s==="business",className:"flex items-center gap-2",children:[e.jsx(ti,{className:"h-4 w-4"}),"Back"]}),e.jsx("div",{className:"flex gap-2",children:s==="review"?e.jsxs(M,{type:"button",onClick:x,disabled:n,className:"flex items-center gap-2",children:[n?"Submitting...":"Submit Request",e.jsx(Ie,{className:"h-4 w-4"})]}):e.jsxs(M,{type:"button",onClick:u,disabled:!h(s),className:"flex items-center gap-2",children:["Next",e.jsx(h4,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-blue-600"}),"Quick Provisioning"]})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Your dedicated environment will be provisioned within 24 hours with all selected integrations ready to use."})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[e.jsx(ss,{className:"h-5 w-5 text-blue-600"}),"PMS Integration"]})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Seamless integration with Hostaway and other PMS systems. Perfect for companies like Mr Property Siam."})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[e.jsx(ot,{className:"h-5 w-5 text-blue-600"}),"Team Ready"]})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Role-based access control with accounts for CEOs, managers, staff, and agents from day one."})})]})]})]})})}function Z5(){const{toast:t}=st(),s=pt(),[r,n]=v.useState(null),[a,i]=v.useState(""),[l,o]=v.useState(""),{data:c=[],isLoading:d}=xe({queryKey:["/api/saas/signup-requests"]}),{data:u=[],isLoading:m}=xe({queryKey:["/api/saas/tenant-organizations"]}),h=Te({mutationFn:async({requestId:y,hostawayApiKey:b})=>Ne(`/api/saas/signup-requests/${y}/approve`,"POST",{hostawayApiKey:b}),onSuccess:()=>{t({title:"Request Approved",description:"Environment provisioning has started. The client will receive login details shortly."}),s.invalidateQueries({queryKey:["/api/saas/signup-requests"]}),s.invalidateQueries({queryKey:["/api/saas/tenant-organizations"]}),n(null),i("")},onError:y=>{t({title:"Approval Failed",description:y.message||"Failed to approve request",variant:"destructive"})}}),x=Te({mutationFn:async({requestId:y,reason:b})=>Ne(`/api/saas/signup-requests/${y}/reject`,"POST",{reason:b}),onSuccess:()=>{t({title:"Request Rejected",description:"The client has been notified of the rejection."}),s.invalidateQueries({queryKey:["/api/saas/signup-requests"]}),n(null),o("")}}),f=Te({mutationFn:async({organizationId:y,status:b})=>Ne(`/api/saas/tenant-organizations/${y}/status`,"PATCH",{status:b}),onSuccess:()=>{t({title:"Status Updated",description:"Tenant organization status has been updated successfully."}),s.invalidateQueries({queryKey:["/api/saas/tenant-organizations"]})}}),p=y=>{switch(y){case"pending":return e.jsxs(U,{variant:"outline",className:"text-yellow-600",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return e.jsxs(U,{variant:"outline",className:"text-green-600",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return e.jsxs(U,{variant:"outline",className:"text-red-600",children:[e.jsx(yr,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"active":return e.jsxs(U,{variant:"outline",className:"text-green-600",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Active"]});case"suspended":return e.jsxs(U,{variant:"outline",className:"text-yellow-600",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"Suspended"]});case"terminated":return e.jsxs(U,{variant:"outline",className:"text-red-600",children:[e.jsx(yr,{className:"h-3 w-3 mr-1"}),"Terminated"]});default:return e.jsx(U,{variant:"outline",children:y})}},g=y=>{const b={basic:"bg-blue-100 text-blue-800",pro:"bg-purple-100 text-purple-800",enterprise:"bg-amber-100 text-amber-800"};return e.jsx(U,{className:b[y]||"",children:y.toUpperCase()})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"SaaS Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage signup requests and tenant organizations"})]})}),e.jsxs(xt,{defaultValue:"requests",className:"space-y-4",children:[e.jsxs(ht,{children:[e.jsxs(de,{value:"requests",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Signup Requests"]}),e.jsxs(de,{value:"organizations",className:"flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4"}),"Organizations"]})]}),e.jsx(me,{value:"requests",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Pending Signup Requests"}),e.jsx(Ee,{children:"Review and approve new management company requests"})]}),e.jsx(T,{children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):c.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No signup requests found"}):e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Company"}),e.jsx(Oe,{children:"Contact"}),e.jsx(Oe,{children:"Country"}),e.jsx(Oe,{children:"Properties"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Submitted"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:c.map(y=>e.jsxs(Nt,{children:[e.jsx(De,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:y.companyName}),y.website&&e.jsx("div",{className:"text-sm text-gray-500",children:y.website})]})}),e.jsx(De,{children:e.jsxs("div",{children:[e.jsx("div",{children:y.contactName}),e.jsx("div",{className:"text-sm text-gray-500",children:y.email})]})}),e.jsx(De,{children:y.country}),e.jsx(De,{children:y.propertyCount||"N/A"}),e.jsx(De,{children:p(y.status)}),e.jsx(De,{children:Kd(new Date(y.submittedAt),{addSuffix:!0})}),e.jsx(De,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>n(y),children:[e.jsx(Bt,{className:"h-4 w-4 mr-1"}),"Review"]})}),e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Review Signup Request"}),e.jsxs(Ct,{children:[y.companyName," - ",y.contactName]})]}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Company Name"}),e.jsx("p",{children:r.companyName})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Contact Person"}),e.jsx("p",{children:r.contactName})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Email"}),e.jsx("p",{children:r.email})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Phone"}),e.jsx("p",{children:r.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Country"}),e.jsx("p",{children:r.country})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Properties"}),e.jsx("p",{children:r.propertyCount||"N/A"})]})]}),r.message&&e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Message"}),e.jsx("p",{className:"mt-1 text-sm",children:r.message})]}),r.requestedFeatures&&r.requestedFeatures.length>0&&e.jsxs("div",{children:[e.jsx(Z,{className:"font-semibold",children:"Requested Features"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:r.requestedFeatures.map(b=>e.jsx(U,{variant:"outline",children:b},b))})]}),r.status==="pending"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"hostawayApiKey",children:"Hostaway API Key (Optional)"}),e.jsx(Q,{id:"hostawayApiKey",value:a,onChange:b=>i(b.target.value),placeholder:"Enter Hostaway API key for integration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{onClick:()=>h.mutate({requestId:r.id,hostawayApiKey:a}),disabled:h.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Approve & Deploy"]}),e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{variant:"destructive",children:[e.jsx(yr,{className:"h-4 w-4 mr-1"}),"Reject"]})}),e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Reject Request"}),e.jsx(Ct,{children:"Please provide a reason for rejection"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{value:l,onChange:b=>o(b.target.value),placeholder:"Reason for rejection...",rows:3}),e.jsx(M,{onClick:()=>x.mutate({requestId:r.id,reason:l}),disabled:!l.trim()||x.isPending,variant:"destructive",className:"w-full",children:"Confirm Rejection"})]})]})]})]})]})]})]})]})})})]},y.id))})]})})]})}),e.jsx(me,{value:"organizations",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Active Organizations"}),e.jsx(Ee,{children:"Manage existing tenant organizations and their environments"})]}),e.jsx(T,{children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):u.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No organizations found"}):e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Company"}),e.jsx(Oe,{children:"Subdomain"}),e.jsx(Oe,{children:"Plan"}),e.jsx(Oe,{children:"Limits"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:u.map(y=>e.jsxs(Nt,{children:[e.jsx(De,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:y.companyName}),e.jsx("div",{className:"text-sm text-gray-500",children:y.contactEmail})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4 text-gray-400"}),y.subdomain,".hostpilotpro.com"]})}),e.jsx(De,{children:g(y.planType)}),e.jsx(De,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[y.maxProperties," properties"]}),e.jsxs("div",{className:"text-gray-500",children:[y.maxUsers," users"]})]})}),e.jsx(De,{children:p(y.status)}),e.jsx(De,{children:Kd(new Date(y.createdAt),{addSuffix:!0})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>window.open(`https://${y.subdomain}.hostpilotpro.com`,"_blank"),children:[e.jsx(ma,{className:"h-4 w-4 mr-1"}),"Visit"]}),e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(ss,{className:"h-4 w-4 mr-1"}),"Manage"]})}),e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Manage Organization"}),e.jsx(Ct,{children:y.companyName})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(M,{onClick:()=>f.mutate({organizationId:y.organizationId,status:y.status==="active"?"suspended":"active"}),variant:y.status==="active"?"destructive":"default",disabled:f.isPending,children:y.status==="active"?"Suspend":"Activate"})})})]})]})]})})]},y.id))})]})})]})})]})]})}const Kwe=Object.freeze(Object.defineProperty({__proto__:null,default:Z5},Symbol.toStringTag,{value:"Module"})),Gwe={task:{name:"Task Master",icon:Ie,color:"text-blue-600"},booking:{name:"Booking Expert",icon:Xe,color:"text-green-600"},finance:{name:"Finance Pro",icon:Ot,color:"text-yellow-600"},property:{name:"Property Guru",icon:ar,color:"text-purple-600"},system:{name:"System Elite",icon:kl,color:"text-red-600"}},To=[0,100,250,500,1e3,2e3,4e3,8e3,15e3,3e4,5e4];function Wwe(t){for(let s=To.length-1;s>=0;s--)if(t>=To[s])return s+1;return 1}function Qwe(t){const s=Wwe(t),r=To[s-1]||0,n=To[s]||To[To.length-1],a=(t-r)/(n-r)*100;return{current:r,next:n,progress:Math.min(a,100)}}function Ywe({userId:t,organizationId:s}){const[r,n]=v.useState("all"),{data:a,isLoading:i}=xe({queryKey:[`/api/achievements/user/${t}`],enabled:!!t}),{data:l=[],isLoading:o}=xe({queryKey:["/api/achievements/definitions"]}),c=i||o;l.filter(m=>m.isEarned);const d=Qwe(a?.totalPoints||0),u=r==="all"?l:l.filter(m=>m.category===r);return c?e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(D,{className:"bg-gradient-to-r from-primary/10 to-secondary/10",children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:e.jsx(kl,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Level ",a?.level||1]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a?.totalPoints||0," total points"]})]})]}),e.jsxs(U,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(y4,{className:"h-3 w-3"}),a?.currentStreak||0," day streak"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress to Level ",(a?.level||1)+1]}),e.jsxs("span",{children:[Math.round(d.progress),"%"]})]}),e.jsx(dn,{value:d.progress,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[d.current," pts"]}),e.jsxs("span",{children:[d.next," pts"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(D,{children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx(Ie,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:a?.tasksCompleted||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Tasks Completed"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx(Xe,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:a?.bookingsProcessed||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Bookings Processed"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx(ar,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:a?.propertiesManaged||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Managed"})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Hn,{className:"h-5 w-5 text-yellow-600"}),"Achievements"]}),e.jsx(Ee,{children:"Track your progress and unlock rewards"})]}),e.jsx(T,{children:e.jsxs(xt,{value:r,onValueChange:n,children:[e.jsxs(ht,{className:"grid w-full grid-cols-6",children:[e.jsx(de,{value:"all",children:"All"}),Object.entries(Gwe).map(([m,h])=>e.jsxs(de,{value:m,className:"flex items-center gap-1",children:[e.jsx(h.icon,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:h.name.split(" ")[0]})]},m))]}),e.jsx(me,{value:r,className:"mt-4",children:e.jsx(ic,{className:"h-96",children:e.jsx("div",{className:"grid gap-3",children:u.map(m=>e.jsxs("div",{className:Be("flex items-center gap-4 p-4 rounded-lg border transition-all",m.isEarned?"bg-primary/5 border-primary/20":"bg-muted/30 border-muted"),children:[e.jsx("div",{className:Be("w-12 h-12 rounded-full flex items-center justify-center",m.isEarned?"bg-primary text-primary-foreground":"bg-muted"),children:m.isEarned?e.jsx(H8,{className:"h-6 w-6"}):e.jsx(ps,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:m.name}),e.jsxs(U,{variant:"outline",style:{color:m.badgeColor,borderColor:m.badgeColor+"40",backgroundColor:m.badgeColor+"10"},children:[m.points," pts"]}),m.isEarned&&e.jsx(U,{variant:"secondary",className:"bg-green-100 text-green-800",children:"âœ“ Earned"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:m.description}),!m.isEarned&&m.progress!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[m.progress,"%"]})]}),e.jsx(dn,{value:m.progress,className:"h-1"})]}),m.isEarned&&m.earnedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earned ",new Date(m.earnedAt).toLocaleDateString()]})]})]},m.id))})})})]})})]})]})}const aw=v.createContext({});function iw(t){const s=v.useRef(null);return s.current===null&&(s.current=t()),s.current}const Uf=v.createContext(null),lw=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Xwe extends v.Component{getSnapshotBeforeUpdate(s){const r=this.props.childRef.current;if(r&&s.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Zwe({children:t,isPresent:s}){const r=v.useId(),n=v.useRef(null),a=v.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=v.useContext(lw);return v.useInsertionEffect(()=>{const{width:l,height:o,top:c,left:d}=a.current;if(s||!n.current||!l||!o)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[s]),e.jsx(Xwe,{isPresent:s,childRef:n,sizeRef:a,children:v.cloneElement(t,{ref:n})})}const Jwe=({children:t,initial:s,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:l})=>{const o=iw(e1e),c=v.useId(),d=v.useCallback(m=>{o.set(m,!0);for(const h of o.values())if(!h)return;n&&n()},[o,n]),u=v.useMemo(()=>({id:c,initial:s,isPresent:r,custom:a,onExitComplete:d,register:m=>(o.set(m,!1),()=>o.delete(m))}),i?[Math.random(),d]:[r,d]);return v.useMemo(()=>{o.forEach((m,h)=>o.set(h,!1))},[r]),v.useEffect(()=>{!r&&!o.size&&n&&n()},[r]),l==="popLayout"&&(t=e.jsx(Zwe,{isPresent:r,children:t})),e.jsx(Uf.Provider,{value:u,children:t})};function e1e(){return new Map}function J5(t=!0){const s=v.useContext(Uf);if(s===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=s,i=v.useId();v.useEffect(()=>{t&&a(i)},[t]);const l=v.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,l]:[!0]}const uh=t=>t.key||"";function $P(t){const s=[];return v.Children.forEach(t,r=>{v.isValidElement(r)&&s.push(r)}),s}const ow=typeof window<"u",e3=ow?v.useLayoutEffect:v.useEffect,t1e=({children:t,custom:s,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:l=!1})=>{const[o,c]=J5(l),d=v.useMemo(()=>$P(t),[t]),u=l&&!o?[]:d.map(uh),m=v.useRef(!0),h=v.useRef(d),x=iw(()=>new Map),[f,p]=v.useState(d),[g,y]=v.useState(d);e3(()=>{m.current=!1,h.current=d;for(let w=0;w<g.length;w++){const N=uh(g[w]);u.includes(N)?x.delete(N):x.get(N)!==!0&&x.set(N,!1)}},[g,u.length,u.join("-")]);const b=[];if(d!==f){let w=[...d];for(let N=0;N<g.length;N++){const S=g[N],O=uh(S);u.includes(O)||(w.splice(N,0,S),b.push(S))}i==="wait"&&b.length&&(w=b),y($P(w)),p(d);return}const{forceRender:j}=v.useContext(aw);return e.jsx(e.Fragment,{children:g.map(w=>{const N=uh(w),S=l&&!o?!1:d===g||u.includes(N),O=()=>{if(x.has(N))x.set(N,!0);else return;let P=!0;x.forEach(k=>{k||(P=!1)}),P&&(j?.(),y(h.current),l&&c?.(),n&&n())};return e.jsx(Jwe,{isPresent:S,initial:!m.current||r?void 0:!1,custom:S?void 0:s,presenceAffectsLayout:a,mode:i,onExitComplete:S?void 0:O,children:w},N)})})},on=t=>t;let t3=on;function cw(t){let s;return()=>(s===void 0&&(s=t()),s)}const Ec=(t,s,r)=>{const n=s-t;return n===0?1:(r-t)/n},Ja=t=>t*1e3,ei=t=>t/1e3,s1e={useManualTiming:!1};function r1e(t){let s=new Set,r=new Set,n=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function o(d){i.has(d)&&(c.schedule(d),t()),d(l)}const c={schedule:(d,u=!1,m=!1)=>{const x=m&&n?s:r;return u&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(l=d,n){a=!0;return}n=!0,[s,r]=[r,s],s.forEach(o),s.clear(),n=!1,a&&(a=!1,c.process(d))}};return c}const mh=["read","resolveKeyframes","update","preRender","render","postRender"],n1e=40;function s3(t,s){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,l=mh.reduce((y,b)=>(y[b]=r1e(i),y),{}),{read:o,resolveKeyframes:c,update:d,preRender:u,render:m,postRender:h}=l,x=()=>{const y=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(y-a.timestamp,n1e),1),a.timestamp=y,a.isProcessing=!0,o.process(a),c.process(a),d.process(a),u.process(a),m.process(a),h.process(a),a.isProcessing=!1,r&&s&&(n=!1,t(x))},f=()=>{r=!0,n=!0,a.isProcessing||t(x)};return{schedule:mh.reduce((y,b)=>{const j=l[b];return y[b]=(w,N=!1,S=!1)=>(r||f(),j.schedule(w,N,S)),y},{}),cancel:y=>{for(let b=0;b<mh.length;b++)l[mh[b]].cancel(y)},state:a,steps:l}}const{schedule:_s,cancel:Hi,state:Cr,steps:jj}=s3(typeof requestAnimationFrame<"u"?requestAnimationFrame:on,!0),r3=v.createContext({strict:!1}),FP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mc={};for(const t in FP)Mc[t]={isEnabled:s=>FP[t].some(r=>!!s[r])};function a1e(t){for(const s in t)Mc[s]={...Mc[s],...t[s]}}const i1e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||i1e.has(t)}let n3=t=>!rp(t);function l1e(t){t&&(n3=s=>s.startsWith("on")?!rp(s):t(s))}try{l1e(require("@emotion/is-prop-valid").default)}catch{}function o1e(t,s,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(n3(a)||r===!0&&rp(a)||!s&&!rp(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}function c1e(t){if(typeof Proxy>"u")return t;const s=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,a)=>a==="create"?t:(s.has(a)||s.set(a,t(a)),s.get(a))})}const zf=v.createContext({});function Hu(t){return typeof t=="string"||Array.isArray(t)}function Hf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const dw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uw=["initial",...dw];function Kf(t){return Hf(t.animate)||uw.some(s=>Hu(t[s]))}function a3(t){return!!(Kf(t)||t.variants)}function d1e(t,s){if(Kf(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Hu(r)?r:void 0,animate:Hu(n)?n:void 0}}return t.inherit!==!1?s:{}}function u1e(t){const{initial:s,animate:r}=d1e(t,v.useContext(zf));return v.useMemo(()=>({initial:s,animate:r}),[LP(s),LP(r)])}function LP(t){return Array.isArray(t)?t.join(" "):t}const m1e=Symbol.for("motionComponentSymbol");function Do(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function h1e(t,s,r){return v.useCallback(n=>{n&&t.onMount&&t.onMount(n),s&&(n?s.mount(n):s.unmount()),r&&(typeof r=="function"?r(n):Do(r)&&(r.current=n))},[s])}const mw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),x1e="framerAppearId",i3="data-"+mw(x1e),{schedule:hw}=s3(queueMicrotask,!1),l3=v.createContext({});function p1e(t,s,r,n,a){var i,l;const{visualElement:o}=v.useContext(zf),c=v.useContext(r3),d=v.useContext(Uf),u=v.useContext(lw).reducedMotion,m=v.useRef(null);n=n||c.renderer,!m.current&&n&&(m.current=n(t,{visualState:s,parent:o,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const h=m.current,x=v.useContext(l3);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&f1e(m.current,r,a,x);const f=v.useRef(!1);v.useInsertionEffect(()=>{h&&f.current&&h.update(r,d)});const p=r[i3],g=v.useRef(!!p&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,p))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,p)));return e3(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),hw.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),v.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,p)}),g.current=!1))}),h}function f1e(t,s,r,n){const{layoutId:a,layout:i,drag:l,dragConstraints:o,layoutScroll:c,layoutRoot:d}=s;t.projection=new r(t.latestValues,s["data-framer-portal-id"]?void 0:o3(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!l||o&&Do(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function o3(t){if(t)return t.options.allowProjection!==!1?t.projection:o3(t.parent)}function g1e({preloadedFeatures:t,createVisualElement:s,useRender:r,useVisualState:n,Component:a}){var i,l;t&&a1e(t);function o(d,u){let m;const h={...v.useContext(lw),...d,layoutId:j1e(d)},{isStatic:x}=h,f=u1e(d),p=n(d,x);if(!x&&ow){v1e();const g=y1e(h);m=g.MeasureLayout,f.visualElement=p1e(a,p,h,s,g.ProjectionNode)}return e.jsxs(zf.Provider,{value:f,children:[m&&f.visualElement?e.jsx(m,{visualElement:f.visualElement,...h}):null,r(a,d,h1e(p,f.visualElement,u),p,x,f.visualElement)]})}o.displayName=`motion.${typeof a=="string"?a:`create(${(l=(i=a.displayName)!==null&&i!==void 0?i:a.name)!==null&&l!==void 0?l:""})`}`;const c=v.forwardRef(o);return c[m1e]=a,c}function j1e({layoutId:t}){const s=v.useContext(aw).id;return s&&t!==void 0?s+"-"+t:t}function v1e(t,s){v.useContext(r3).strict}function y1e(t){const{drag:s,layout:r}=Mc;if(!s&&!r)return{};const n={...s,...r};return{MeasureLayout:s?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const b1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xw(t){return typeof t!="string"||t.includes("-")?!1:!!(b1e.indexOf(t)>-1||/[A-Z]/u.test(t))}function BP(t){const s=[{},{}];return t?.values.forEach((r,n)=>{s[0][n]=r.get(),s[1][n]=r.getVelocity()}),s}function pw(t,s,r,n){if(typeof s=="function"){const[a,i]=BP(n);s=s(r!==void 0?r:t.custom,a,i)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[a,i]=BP(n);s=s(r!==void 0?r:t.custom,a,i)}return s}const l0=t=>Array.isArray(t),N1e=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),w1e=t=>l0(t)?t[t.length-1]||0:t,Or=t=>!!(t&&t.getVelocity);function Ph(t){const s=Or(t)?t.get():t;return N1e(s)?s.toValue():s}function S1e({scrapeMotionValuesFromProps:t,createRenderState:s,onUpdate:r},n,a,i){const l={latestValues:C1e(n,a,i,t),renderState:s()};return r&&(l.onMount=o=>r({props:n,current:o,...l}),l.onUpdate=o=>r(o)),l}const c3=t=>(s,r)=>{const n=v.useContext(zf),a=v.useContext(Uf),i=()=>S1e(t,s,n,a);return r?i():iw(i)};function C1e(t,s,r,n){const a={},i=n(t,{});for(const h in i)a[h]=Ph(i[h]);let{initial:l,animate:o}=t;const c=Kf(t),d=a3(t);s&&d&&!c&&t.inherit!==!1&&(l===void 0&&(l=s.initial),o===void 0&&(o=s.animate));let u=r?r.initial===!1:!1;u=u||l===!1;const m=u?o:l;if(m&&typeof m!="boolean"&&!Hf(m)){const h=Array.isArray(m)?m:[m];for(let x=0;x<h.length;x++){const f=pw(t,h[x]);if(f){const{transitionEnd:p,transition:g,...y}=f;for(const b in y){let j=y[b];if(Array.isArray(j)){const w=u?j.length-1:0;j=j[w]}j!==null&&(a[b]=j)}for(const b in p)a[b]=p[b]}}}return a}const nd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],io=new Set(nd),d3=t=>s=>typeof s=="string"&&s.startsWith(t),u3=d3("--"),k1e=d3("var(--"),fw=t=>k1e(t)?P1e.test(t.split("/*")[0].trim()):!1,P1e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,m3=(t,s)=>s&&typeof t=="number"?s.transform(t):t,oi=(t,s,r)=>r>s?s:r<t?t:r,ad={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ku={...ad,transform:t=>oi(0,1,t)},hh={...ad,default:1},Mm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),ji=Mm("deg"),ba=Mm("%"),bt=Mm("px"),A1e=Mm("vh"),T1e=Mm("vw"),VP={...ba,parse:t=>ba.parse(t)/100,transform:t=>ba.transform(t*100)},D1e={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt},O1e={rotate:ji,rotateX:ji,rotateY:ji,rotateZ:ji,scale:hh,scaleX:hh,scaleY:hh,scaleZ:hh,skew:ji,skewX:ji,skewY:ji,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Ku,originX:VP,originY:VP,originZ:bt},qP={...ad,transform:Math.round},gw={...D1e,...O1e,zIndex:qP,size:bt,fillOpacity:Ku,strokeOpacity:Ku,numOctaves:qP},E1e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M1e=nd.length;function R1e(t,s,r){let n="",a=!0;for(let i=0;i<M1e;i++){const l=nd[i],o=t[l];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(l.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||r){const d=m3(o,gw[l]);if(!c){a=!1;const u=E1e[l]||l;n+=`${u}(${d}) `}r&&(s[l]=d)}}return n=n.trim(),r?n=r(s,a?"":n):a&&(n="none"),n}function jw(t,s,r){const{style:n,vars:a,transformOrigin:i}=t;let l=!1,o=!1;for(const c in s){const d=s[c];if(io.has(c)){l=!0;continue}else if(u3(c)){a[c]=d;continue}else{const u=m3(d,gw[c]);c.startsWith("origin")?(o=!0,i[c]=u):n[c]=u}}if(s.transform||(l||r?n.transform=R1e(s,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${d} ${u}`}}const _1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},I1e={offset:"strokeDashoffset",array:"strokeDasharray"};function $1e(t,s,r=1,n=0,a=!0){t.pathLength=1;const i=a?_1e:I1e;t[i.offset]=bt.transform(-n);const l=bt.transform(s),o=bt.transform(r);t[i.array]=`${l} ${o}`}function UP(t,s,r){return typeof t=="string"?t:bt.transform(s+r*t)}function F1e(t,s,r){const n=UP(s,t.x,t.width),a=UP(r,t.y,t.height);return`${n} ${a}`}function vw(t,{attrX:s,attrY:r,attrScale:n,originX:a,originY:i,pathLength:l,pathSpacing:o=1,pathOffset:c=0,...d},u,m){if(jw(t,d,m),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:x,dimensions:f}=t;h.transform&&(f&&(x.transform=h.transform),delete h.transform),f&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=F1e(f,a!==void 0?a:.5,i!==void 0?i:.5)),s!==void 0&&(h.x=s),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),l!==void 0&&$1e(h,l,o,c,!1)}const yw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),h3=()=>({...yw(),attrs:{}}),bw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function x3(t,{style:s,vars:r},n,a){Object.assign(t.style,s,a&&a.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const p3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function f3(t,s,r,n){x3(t,s,void 0,n);for(const a in s.attrs)t.setAttribute(p3.has(a)?a:mw(a),s.attrs[a])}const np={};function L1e(t){Object.assign(np,t)}function g3(t,{layout:s,layoutId:r}){return io.has(t)||t.startsWith("origin")||(s||r!==void 0)&&(!!np[t]||t==="opacity")}function Nw(t,s,r){var n;const{style:a}=t,i={};for(const l in a)(Or(a[l])||s.style&&Or(s.style[l])||g3(l,t)||((n=r?.getValue(l))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[l]=a[l]);return i}function j3(t,s,r){const n=Nw(t,s,r);for(const a in t)if(Or(t[a])||Or(s[a])){const i=nd.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=t[a]}return n}function B1e(t,s){try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}const zP=["x","y","width","height","cx","cy","r"],V1e={useVisualState:c3({scrapeMotionValuesFromProps:j3,createRenderState:h3,onUpdate:({props:t,prevProps:s,current:r,renderState:n,latestValues:a})=>{if(!r)return;let i=!!t.drag;if(!i){for(const o in a)if(io.has(o)){i=!0;break}}if(!i)return;let l=!s;if(s)for(let o=0;o<zP.length;o++){const c=zP[o];t[c]!==s[c]&&(l=!0)}l&&_s.read(()=>{B1e(r,n),_s.render(()=>{vw(n,a,bw(r.tagName),t.transformTemplate),f3(r,n)})})}})},q1e={useVisualState:c3({scrapeMotionValuesFromProps:Nw,createRenderState:yw})};function v3(t,s,r){for(const n in s)!Or(s[n])&&!g3(n,r)&&(t[n]=s[n])}function U1e({transformTemplate:t},s){return v.useMemo(()=>{const r=yw();return jw(r,s,t),Object.assign({},r.vars,r.style)},[s])}function z1e(t,s){const r=t.style||{},n={};return v3(n,r,t),Object.assign(n,U1e(t,s)),n}function H1e(t,s){const r={},n=z1e(t,s);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function K1e(t,s,r,n){const a=v.useMemo(()=>{const i=h3();return vw(i,s,bw(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[s]);if(t.style){const i={};v3(i,t.style,t),a.style={...i,...a.style}}return a}function G1e(t=!1){return(r,n,a,{latestValues:i},l)=>{const c=(xw(r)?K1e:H1e)(n,i,l,r),d=o1e(n,typeof r=="string",t),u=r!==v.Fragment?{...d,...c,ref:a}:{},{children:m}=n,h=v.useMemo(()=>Or(m)?m.get():m,[m]);return v.createElement(r,{...u,children:h})}}function W1e(t,s){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...xw(n)?V1e:q1e,preloadedFeatures:t,useRender:G1e(a),createVisualElement:s,Component:n};return g1e(l)}}function y3(t,s){if(!Array.isArray(s))return!1;const r=s.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(s[n]!==t[n])return!1;return!0}function Gf(t,s,r){const n=t.getProps();return pw(n,s,r!==void 0?r:n.custom,t)}const Q1e=cw(()=>window.ScrollTimeline!==void 0);class Y1e{constructor(s){this.stop=()=>this.runAll("stop"),this.animations=s.filter(Boolean)}get finished(){return Promise.all(this.animations.map(s=>"finished"in s?s.finished:s))}getAll(s){return this.animations[0][s]}setAll(s,r){for(let n=0;n<this.animations.length;n++)this.animations[n][s]=r}attachTimeline(s,r){const n=this.animations.map(a=>{if(Q1e()&&a.attachTimeline)return a.attachTimeline(s);if(typeof r=="function")return r(a)});return()=>{n.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(s){this.setAll("time",s)}get speed(){return this.getAll("speed")}set speed(s){this.setAll("speed",s)}get startTime(){return this.getAll("startTime")}get duration(){let s=0;for(let r=0;r<this.animations.length;r++)s=Math.max(s,this.animations[r].duration);return s}runAll(s){this.animations.forEach(r=>r[s]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class X1e extends Y1e{then(s,r){return Promise.all(this.animations).then(s).catch(r)}}function ww(t,s){return t?t[s]||t.default||t:void 0}const o0=2e4;function b3(t){let s=0;const r=50;let n=t.next(s);for(;!n.done&&s<o0;)s+=r,n=t.next(s);return s>=o0?1/0:s}function Sw(t){return typeof t=="function"}function HP(t,s){t.timeline=s,t.onfinish=null}const Cw=t=>Array.isArray(t)&&typeof t[0]=="number",Z1e={linearEasing:void 0};function J1e(t,s){const r=cw(t);return()=>{var n;return(n=Z1e[s])!==null&&n!==void 0?n:r()}}const ap=J1e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),N3=(t,s,r=10)=>{let n="";const a=Math.max(Math.round(s/r),2);for(let i=0;i<a;i++)n+=t(Ec(0,a-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function w3(t){return!!(typeof t=="function"&&ap()||!t||typeof t=="string"&&(t in c0||ap())||Cw(t)||Array.isArray(t)&&t.every(w3))}const Td=([t,s,r,n])=>`cubic-bezier(${t}, ${s}, ${r}, ${n})`,c0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Td([0,.65,.55,1]),circOut:Td([.55,0,1,.45]),backIn:Td([.31,.01,.66,-.59]),backOut:Td([.33,1.53,.69,.99])};function S3(t,s){if(t)return typeof t=="function"&&ap()?N3(t,s):Cw(t)?Td(t):Array.isArray(t)?t.map(r=>S3(r,s)||c0.easeOut):c0[t]}const Fn={x:!1,y:!1};function C3(){return Fn.x||Fn.y}function eSe(t,s,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const i=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function k3(t,s){const r=eSe(t),n=new AbortController,a={passive:!0,...s,signal:n.signal};return[r,a,()=>n.abort()]}function KP(t){return s=>{s.pointerType==="touch"||C3()||t(s)}}function tSe(t,s,r={}){const[n,a,i]=k3(t,r),l=KP(o=>{const{target:c}=o,d=s(o);if(typeof d!="function"||!c)return;const u=KP(m=>{d(m),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,a)});return n.forEach(o=>{o.addEventListener("pointerenter",l,a)}),i}const P3=(t,s)=>s?t===s?!0:P3(t,s.parentElement):!1,kw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,sSe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function rSe(t){return sSe.has(t.tagName)||t.tabIndex!==-1}const Dd=new WeakSet;function GP(t){return s=>{s.key==="Enter"&&t(s)}}function vj(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const nSe=(t,s)=>{const r=t.currentTarget;if(!r)return;const n=GP(()=>{if(Dd.has(r))return;vj(r,"down");const a=GP(()=>{vj(r,"up")}),i=()=>vj(r,"cancel");r.addEventListener("keyup",a,s),r.addEventListener("blur",i,s)});r.addEventListener("keydown",n,s),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),s)};function WP(t){return kw(t)&&!C3()}function aSe(t,s,r={}){const[n,a,i]=k3(t,r),l=o=>{const c=o.currentTarget;if(!WP(o)||Dd.has(c))return;Dd.add(c);const d=s(o),u=(x,f)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",h),!(!WP(x)||!Dd.has(c))&&(Dd.delete(c),typeof d=="function"&&d(x,{success:f}))},m=x=>{u(x,r.useGlobalTarget||P3(c,x.target))},h=x=>{u(x,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",h,a)};return n.forEach(o=>{!rSe(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(r.useGlobalTarget?window:o).addEventListener("pointerdown",l,a),o.addEventListener("focus",d=>nSe(d,a),a)}),i}function iSe(t){return t==="x"||t==="y"?Fn[t]?null:(Fn[t]=!0,()=>{Fn[t]=!1}):Fn.x||Fn.y?null:(Fn.x=Fn.y=!0,()=>{Fn.x=Fn.y=!1})}const A3=new Set(["width","height","top","left","right","bottom",...nd]);let Ah;function lSe(){Ah=void 0}const Na={now:()=>(Ah===void 0&&Na.set(Cr.isProcessing||s1e.useManualTiming?Cr.timestamp:performance.now()),Ah),set:t=>{Ah=t,queueMicrotask(lSe)}};function Pw(t,s){t.indexOf(s)===-1&&t.push(s)}function Aw(t,s){const r=t.indexOf(s);r>-1&&t.splice(r,1)}class Tw{constructor(){this.subscriptions=[]}add(s){return Pw(this.subscriptions,s),()=>Aw(this.subscriptions,s)}notify(s,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](s,r,n);else for(let i=0;i<a;i++){const l=this.subscriptions[i];l&&l(s,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function T3(t,s){return s?t*(1e3/s):0}const QP=30,oSe=t=>!isNaN(parseFloat(t));class cSe{constructor(s,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const i=Na.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(s),this.owner=r.owner}setCurrent(s){this.current=s,this.updatedAt=Na.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=oSe(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,r){this.events[s]||(this.events[s]=new Tw);const n=this.events[s].add(r);return s==="change"?()=>{n(),_s.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,r){this.passiveEffect=s,this.stopPassiveEffect=r}set(s,r=!0){!r||!this.passiveEffect?this.updateAndNotify(s,r):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-n}jump(s,r=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Na.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>QP)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,QP);return T3(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(s){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=s(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gu(t,s){return new cSe(t,s)}function dSe(t,s,r){t.hasValue(s)?t.getValue(s).set(r):t.addValue(s,Gu(r))}function uSe(t,s){const r=Gf(t,s);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const l in i){const o=w1e(i[l]);dSe(t,l,o)}}function mSe(t){return!!(Or(t)&&t.add)}function d0(t,s){const r=t.getValue("willChange");if(mSe(r))return r.add(s)}function D3(t){return t.props[i3]}const O3=(t,s,r)=>(((1-3*r+3*s)*t+(3*r-6*s))*t+3*s)*t,hSe=1e-7,xSe=12;function pSe(t,s,r,n,a){let i,l,o=0;do l=s+(r-s)/2,i=O3(l,n,a)-t,i>0?r=l:s=l;while(Math.abs(i)>hSe&&++o<xSe);return l}function Rm(t,s,r,n){if(t===s&&r===n)return on;const a=i=>pSe(i,0,1,t,r);return i=>i===0||i===1?i:O3(a(i),s,n)}const E3=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,M3=t=>s=>1-t(1-s),R3=Rm(.33,1.53,.69,.99),Dw=M3(R3),_3=E3(Dw),I3=t=>(t*=2)<1?.5*Dw(t):.5*(2-Math.pow(2,-10*(t-1))),Ow=t=>1-Math.sin(Math.acos(t)),$3=M3(Ow),F3=E3(Ow),L3=t=>/^0[^.\s]+$/u.test(t);function fSe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||L3(t):!0}const Vd=t=>Math.round(t*1e5)/1e5,Ew=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gSe(t){return t==null}const jSe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Mw=(t,s)=>r=>!!(typeof r=="string"&&jSe.test(r)&&r.startsWith(t)||s&&!gSe(r)&&Object.prototype.hasOwnProperty.call(r,s)),B3=(t,s,r)=>n=>{if(typeof n!="string")return n;const[a,i,l,o]=n.match(Ew);return{[t]:parseFloat(a),[s]:parseFloat(i),[r]:parseFloat(l),alpha:o!==void 0?parseFloat(o):1}},vSe=t=>oi(0,255,t),yj={...ad,transform:t=>Math.round(vSe(t))},wl={test:Mw("rgb","red"),parse:B3("red","green","blue"),transform:({red:t,green:s,blue:r,alpha:n=1})=>"rgba("+yj.transform(t)+", "+yj.transform(s)+", "+yj.transform(r)+", "+Vd(Ku.transform(n))+")"};function ySe(t){let s="",r="",n="",a="";return t.length>5?(s=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(s=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),s+=s,r+=r,n+=n,a+=a),{red:parseInt(s,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const u0={test:Mw("#"),parse:ySe,transform:wl.transform},Oo={test:Mw("hsl","hue"),parse:B3("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+ba.transform(Vd(s))+", "+ba.transform(Vd(r))+", "+Vd(Ku.transform(n))+")"},Pr={test:t=>wl.test(t)||u0.test(t)||Oo.test(t),parse:t=>wl.test(t)?wl.parse(t):Oo.test(t)?Oo.parse(t):u0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wl.transform(t):Oo.transform(t)},bSe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NSe(t){var s,r;return isNaN(t)&&typeof t=="string"&&(((s=t.match(Ew))===null||s===void 0?void 0:s.length)||0)+(((r=t.match(bSe))===null||r===void 0?void 0:r.length)||0)>0}const V3="number",q3="color",wSe="var",SSe="var(",YP="${}",CSe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wu(t){const s=t.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const o=s.replace(CSe,c=>(Pr.test(c)?(n.color.push(i),a.push(q3),r.push(Pr.parse(c))):c.startsWith(SSe)?(n.var.push(i),a.push(wSe),r.push(c)):(n.number.push(i),a.push(V3),r.push(parseFloat(c))),++i,YP)).split(YP);return{values:r,split:o,indexes:n,types:a}}function U3(t){return Wu(t).values}function z3(t){const{split:s,types:r}=Wu(t),n=s.length;return a=>{let i="";for(let l=0;l<n;l++)if(i+=s[l],a[l]!==void 0){const o=r[l];o===V3?i+=Vd(a[l]):o===q3?i+=Pr.transform(a[l]):i+=a[l]}return i}}const kSe=t=>typeof t=="number"?0:t;function PSe(t){const s=U3(t);return z3(t)(s.map(kSe))}const Ki={test:NSe,parse:U3,createTransformer:z3,getAnimatableNone:PSe},ASe=new Set(["brightness","contrast","saturate","opacity"]);function TSe(t){const[s,r]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[n]=r.match(Ew)||[];if(!n)return t;const a=r.replace(n,"");let i=ASe.has(s)?1:0;return n!==r&&(i*=100),s+"("+i+a+")"}const DSe=/\b([a-z-]*)\(.*?\)/gu,m0={...Ki,getAnimatableNone:t=>{const s=t.match(DSe);return s?s.map(TSe).join(" "):t}},OSe={...gw,color:Pr,backgroundColor:Pr,outlineColor:Pr,fill:Pr,stroke:Pr,borderColor:Pr,borderTopColor:Pr,borderRightColor:Pr,borderBottomColor:Pr,borderLeftColor:Pr,filter:m0,WebkitFilter:m0},Rw=t=>OSe[t];function H3(t,s){let r=Rw(t);return r!==m0&&(r=Ki),r.getAnimatableNone?r.getAnimatableNone(s):void 0}const ESe=new Set(["auto","none","0"]);function MSe(t,s,r){let n=0,a;for(;n<t.length&&!a;){const i=t[n];typeof i=="string"&&!ESe.has(i)&&Wu(i).values.length&&(a=t[n]),n++}if(a&&r)for(const i of s)t[i]=H3(r,a)}const XP=t=>t===ad||t===bt,ZP=(t,s)=>parseFloat(t.split(", ")[s]),JP=(t,s)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return ZP(a[1],s);{const i=n.match(/^matrix\((.+)\)$/u);return i?ZP(i[1],t):0}},RSe=new Set(["x","y","z"]),_Se=nd.filter(t=>!RSe.has(t));function ISe(t){const s=[];return _Se.forEach(r=>{const n=t.getValue(r);n!==void 0&&(s.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),s}const Rc={width:({x:t},{paddingLeft:s="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),height:({y:t},{paddingTop:s="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:JP(4,13),y:JP(5,14)};Rc.translateX=Rc.x;Rc.translateY=Rc.y;const Dl=new Set;let h0=!1,x0=!1;function K3(){if(x0){const t=Array.from(Dl).filter(n=>n.needsMeasurement),s=new Set(t.map(n=>n.element)),r=new Map;s.forEach(n=>{const a=ISe(n);a.length&&(r.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),s.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,l])=>{var o;(o=n.getValue(i))===null||o===void 0||o.set(l)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}x0=!1,h0=!1,Dl.forEach(t=>t.complete()),Dl.clear()}function G3(){Dl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(x0=!0)})}function $Se(){G3(),K3()}class _w{constructor(s,r,n,a,i,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...s],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Dl.add(this),h0||(h0=!0,_s.read(G3),_s.resolveKeyframes(K3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:r,element:n,motionValue:a}=this;for(let i=0;i<s.length;i++)if(s[i]===null)if(i===0){const l=a?.get(),o=s[s.length-1];if(l!==void 0)s[0]=l;else if(n&&r){const c=n.readValue(r,o);c!=null&&(s[0]=c)}s[0]===void 0&&(s[0]=o),a&&l===void 0&&a.set(s[0])}else s[i]=s[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Dl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Dl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const W3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),FSe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LSe(t){const s=FSe.exec(t);if(!s)return[,];const[,r,n,a]=s;return[`--${r??n}`,a]}function Q3(t,s,r=1){const[n,a]=LSe(t);if(!n)return;const i=window.getComputedStyle(s).getPropertyValue(n);if(i){const l=i.trim();return W3(l)?parseFloat(l):l}return fw(a)?Q3(a,s,r+1):a}const Y3=t=>s=>s.test(t),BSe={test:t=>t==="auto",parse:t=>t},X3=[ad,bt,ba,ji,T1e,A1e,BSe],eA=t=>X3.find(Y3(t));class Z3 extends _w{constructor(s,r,n,a,i){super(s,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<s.length;c++){let d=s[c];if(typeof d=="string"&&(d=d.trim(),fw(d))){const u=Q3(d,r.current);u!==void 0&&(s[c]=u),c===s.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!A3.has(n)||s.length!==2)return;const[a,i]=s,l=eA(a),o=eA(i);if(l!==o)if(XP(l)&&XP(o))for(let c=0;c<s.length;c++){const d=s[c];typeof d=="string"&&(s[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:r}=this,n=[];for(let a=0;a<s.length;a++)fSe(s[a])&&n.push(a);n.length&&MSe(s,n,r)}measureInitialState(){const{element:s,unresolvedKeyframes:r,name:n}=this;if(!s||!s.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Rc[n](s.measureViewportBox(),window.getComputedStyle(s.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&s.getValue(n,a).jump(a,!1)}measureEndState(){var s;const{element:r,name:n,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=Rc[n](r.measureViewportBox(),window.getComputedStyle(r.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((s=this.removedTransforms)===null||s===void 0)&&s.length&&this.removedTransforms.forEach(([c,d])=>{r.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const tA=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ki.test(t)||t==="0")&&!t.startsWith("url("));function VSe(t){const s=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}function qSe(t,s,r,n){const a=t[0];if(a===null)return!1;if(s==="display"||s==="visibility")return!0;const i=t[t.length-1],l=tA(a,s),o=tA(i,s);return!l||!o?!1:VSe(t)||(r==="spring"||Sw(r))&&n}const USe=t=>t!==null;function Wf(t,{repeat:s,repeatType:r="loop"},n){const a=t.filter(USe),i=s&&r!=="loop"&&s%2===1?0:a.length-1;return!i||n===void 0?a[i]:n}const zSe=40;class J3{constructor({autoplay:s=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Na.now(),this.options={autoplay:s,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:l,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>zSe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$Se(),this._resolved}onKeyframesResolved(s,r){this.resolvedAt=Na.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:i,delay:l,onComplete:o,onUpdate:c,isGenerator:d}=this.options;if(!d&&!qSe(s,n,a,i))if(l)this.options.duration=0;else{c&&c(Wf(s,this.options,r)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(s,r);u!==!1&&(this._resolved={keyframes:s,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(s,r){return this.currentFinishedPromise.then(s,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(s=>{this.resolveFinishedPromise=s})}}const Vs=(t,s,r)=>t+(s-t)*r;function bj(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(s-t)*6*r:r<1/2?s:r<2/3?t+(s-t)*(2/3-r)*6:t}function HSe({hue:t,saturation:s,lightness:r,alpha:n}){t/=360,s/=100,r/=100;let a=0,i=0,l=0;if(!s)a=i=l=r;else{const o=r<.5?r*(1+s):r+s-r*s,c=2*r-o;a=bj(c,o,t+1/3),i=bj(c,o,t),l=bj(c,o,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:n}}function ip(t,s){return r=>r>0?s:t}const Nj=(t,s,r)=>{const n=t*t,a=r*(s*s-n)+n;return a<0?0:Math.sqrt(a)},KSe=[u0,wl,Oo],GSe=t=>KSe.find(s=>s.test(t));function sA(t){const s=GSe(t);if(!s)return!1;let r=s.parse(t);return s===Oo&&(r=HSe(r)),r}const rA=(t,s)=>{const r=sA(t),n=sA(s);if(!r||!n)return ip(t,s);const a={...r};return i=>(a.red=Nj(r.red,n.red,i),a.green=Nj(r.green,n.green,i),a.blue=Nj(r.blue,n.blue,i),a.alpha=Vs(r.alpha,n.alpha,i),wl.transform(a))},WSe=(t,s)=>r=>s(t(r)),_m=(...t)=>t.reduce(WSe),p0=new Set(["none","hidden"]);function QSe(t,s){return p0.has(t)?r=>r<=0?t:s:r=>r>=1?s:t}function YSe(t,s){return r=>Vs(t,s,r)}function Iw(t){return typeof t=="number"?YSe:typeof t=="string"?fw(t)?ip:Pr.test(t)?rA:JSe:Array.isArray(t)?e$:typeof t=="object"?Pr.test(t)?rA:XSe:ip}function e$(t,s){const r=[...t],n=r.length,a=t.map((i,l)=>Iw(i)(i,s[l]));return i=>{for(let l=0;l<n;l++)r[l]=a[l](i);return r}}function XSe(t,s){const r={...t,...s},n={};for(const a in r)t[a]!==void 0&&s[a]!==void 0&&(n[a]=Iw(t[a])(t[a],s[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function ZSe(t,s){var r;const n=[],a={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const l=s.types[i],o=t.indexes[l][a[l]],c=(r=t.values[o])!==null&&r!==void 0?r:0;n[i]=c,a[l]++}return n}const JSe=(t,s)=>{const r=Ki.createTransformer(s),n=Wu(t),a=Wu(s);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?p0.has(t)&&!a.values.length||p0.has(s)&&!n.values.length?QSe(t,s):_m(e$(ZSe(n,a),a.values),r):ip(t,s)};function t$(t,s,r){return typeof t=="number"&&typeof s=="number"&&typeof r=="number"?Vs(t,s,r):Iw(t)(t,s)}const e2e=5;function s$(t,s,r){const n=Math.max(s-e2e,0);return T3(r-t(n),s-n)}const Hs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wj=.001;function t2e({duration:t=Hs.duration,bounce:s=Hs.bounce,velocity:r=Hs.velocity,mass:n=Hs.mass}){let a,i,l=1-s;l=oi(Hs.minDamping,Hs.maxDamping,l),t=oi(Hs.minDuration,Hs.maxDuration,ei(t)),l<1?(a=d=>{const u=d*l,m=u*t,h=u-r,x=f0(d,l),f=Math.exp(-m);return wj-h/x*f},i=d=>{const m=d*l*t,h=m*r+r,x=Math.pow(l,2)*Math.pow(d,2)*t,f=Math.exp(-m),p=f0(Math.pow(d,2),l);return(-a(d)+wj>0?-1:1)*((h-x)*f)/p}):(a=d=>{const u=Math.exp(-d*t),m=(d-r)*t+1;return-wj+u*m},i=d=>{const u=Math.exp(-d*t),m=(r-d)*(t*t);return u*m});const o=5/t,c=r2e(a,i,o);if(t=Ja(t),isNaN(c))return{stiffness:Hs.stiffness,damping:Hs.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:l*2*Math.sqrt(n*d),duration:t}}}const s2e=12;function r2e(t,s,r){let n=r;for(let a=1;a<s2e;a++)n=n-t(n)/s(n);return n}function f0(t,s){return t*Math.sqrt(1-s*s)}const n2e=["duration","bounce"],a2e=["stiffness","damping","mass"];function nA(t,s){return s.some(r=>t[r]!==void 0)}function i2e(t){let s={velocity:Hs.velocity,stiffness:Hs.stiffness,damping:Hs.damping,mass:Hs.mass,isResolvedFromDuration:!1,...t};if(!nA(t,a2e)&&nA(t,n2e))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*oi(.05,1,1-(t.bounce||0))*Math.sqrt(a);s={...s,mass:Hs.mass,stiffness:a,damping:i}}else{const r=t2e(t);s={...s,...r,mass:Hs.mass},s.isResolvedFromDuration=!0}return s}function r$(t=Hs.visualDuration,s=Hs.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],l=r.keyframes[r.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:m,velocity:h,isResolvedFromDuration:x}=i2e({...r,velocity:-ei(r.velocity||0)}),f=h||0,p=d/(2*Math.sqrt(c*u)),g=l-i,y=ei(Math.sqrt(c/u)),b=Math.abs(g)<5;n||(n=b?Hs.restSpeed.granular:Hs.restSpeed.default),a||(a=b?Hs.restDelta.granular:Hs.restDelta.default);let j;if(p<1){const N=f0(y,p);j=S=>{const O=Math.exp(-p*y*S);return l-O*((f+p*y*g)/N*Math.sin(N*S)+g*Math.cos(N*S))}}else if(p===1)j=N=>l-Math.exp(-y*N)*(g+(f+y*g)*N);else{const N=y*Math.sqrt(p*p-1);j=S=>{const O=Math.exp(-p*y*S),P=Math.min(N*S,300);return l-O*((f+p*y*g)*Math.sinh(P)+N*g*Math.cosh(P))/N}}const w={calculatedDuration:x&&m||null,next:N=>{const S=j(N);if(x)o.done=N>=m;else{let O=0;p<1&&(O=N===0?Ja(f):s$(j,N,S));const P=Math.abs(O)<=n,k=Math.abs(l-S)<=a;o.done=P&&k}return o.value=o.done?l:S,o},toString:()=>{const N=Math.min(b3(w),o0),S=N3(O=>w.next(N*O).value,N,30);return N+"ms "+S}};return w}function aA({keyframes:t,velocity:s=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:o,max:c,restDelta:d=.5,restSpeed:u}){const m=t[0],h={done:!1,value:m},x=P=>o!==void 0&&P<o||c!==void 0&&P>c,f=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let p=r*s;const g=m+p,y=l===void 0?g:l(g);y!==g&&(p=y-m);const b=P=>-p*Math.exp(-P/n),j=P=>y+b(P),w=P=>{const k=b(P),R=j(P);h.done=Math.abs(k)<=d,h.value=h.done?y:R};let N,S;const O=P=>{x(h.value)&&(N=P,S=r$({keyframes:[h.value,f(h.value)],velocity:s$(j,P,h.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return O(0),{calculatedDuration:null,next:P=>{let k=!1;return!S&&N===void 0&&(k=!0,w(P),O(P)),N!==void 0&&P>=N?S.next(P-N):(!k&&w(P),h)}}}const l2e=Rm(.42,0,1,1),o2e=Rm(0,0,.58,1),n$=Rm(.42,0,.58,1),c2e=t=>Array.isArray(t)&&typeof t[0]!="number",d2e={linear:on,easeIn:l2e,easeInOut:n$,easeOut:o2e,circIn:Ow,circInOut:F3,circOut:$3,backIn:Dw,backInOut:_3,backOut:R3,anticipate:I3},iA=t=>{if(Cw(t)){t3(t.length===4);const[s,r,n,a]=t;return Rm(s,r,n,a)}else if(typeof t=="string")return d2e[t];return t};function u2e(t,s,r){const n=[],a=r||t$,i=t.length-1;for(let l=0;l<i;l++){let o=a(t[l],t[l+1]);if(s){const c=Array.isArray(s)?s[l]||on:s;o=_m(c,o)}n.push(o)}return n}function m2e(t,s,{clamp:r=!0,ease:n,mixer:a}={}){const i=t.length;if(t3(i===s.length),i===1)return()=>s[0];if(i===2&&s[0]===s[1])return()=>s[1];const l=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),s=[...s].reverse());const o=u2e(s,n,a),c=o.length,d=u=>{if(l&&u<t[0])return s[0];let m=0;if(c>1)for(;m<t.length-2&&!(u<t[m+1]);m++);const h=Ec(t[m],t[m+1],u);return o[m](h)};return r?u=>d(oi(t[0],t[i-1],u)):d}function h2e(t,s){const r=t[t.length-1];for(let n=1;n<=s;n++){const a=Ec(0,s,n);t.push(Vs(r,1,a))}}function x2e(t){const s=[0];return h2e(s,t.length-1),s}function p2e(t,s){return t.map(r=>r*s)}function f2e(t,s){return t.map(()=>s||n$).splice(0,t.length-1)}function lp({duration:t=300,keyframes:s,times:r,ease:n="easeInOut"}){const a=c2e(n)?n.map(iA):iA(n),i={done:!1,value:s[0]},l=p2e(r&&r.length===s.length?r:x2e(s),t),o=m2e(l,s,{ease:Array.isArray(a)?a:f2e(s,a)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const g2e=t=>{const s=({timestamp:r})=>t(r);return{start:()=>_s.update(s,!0),stop:()=>Hi(s),now:()=>Cr.isProcessing?Cr.timestamp:Na.now()}},j2e={decay:aA,inertia:aA,tween:lp,keyframes:lp,spring:r$},v2e=t=>t/100;class $w extends J3{constructor(s){super(s),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:a,keyframes:i}=this.options,l=a?.KeyframeResolver||_w,o=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new l(i,o,r,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(s){const{type:r="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:l=0}=this.options,o=Sw(r)?r:j2e[r]||lp;let c,d;o!==lp&&typeof s[0]!="number"&&(c=_m(v2e,t$(s[0],s[1])),s=[0,100]);const u=o({...this.options,keyframes:s});i==="mirror"&&(d=o({...this.options,keyframes:[...s].reverse(),velocity:-l})),u.calculatedDuration===null&&(u.calculatedDuration=b3(u));const{calculatedDuration:m}=u,h=m+a,x=h*(n+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:h,totalDuration:x}}onPostResolved(){const{autoplay:s=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!s?this.pause():this.state=this.pendingPlayState}tick(s,r=!1){const{resolved:n}=this;if(!n){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:l,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:m}=n;if(this.startTime===null)return i.next(0);const{delay:h,repeat:x,repeatType:f,repeatDelay:p,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-u/this.speed,this.startTime)),r?this.currentTime=s:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(s-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?y<0:y>u;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let j=this.currentTime,w=i;if(x){const P=Math.min(this.currentTime,u)/m;let k=Math.floor(P),R=P%1;!R&&P>=1&&(R=1),R===1&&k--,k=Math.min(k,x+1),!!(k%2)&&(f==="reverse"?(R=1-R,p&&(R-=p/m)):f==="mirror"&&(w=l)),j=oi(0,1,R)*m}const N=b?{done:!1,value:c[0]}:w.next(j);o&&(N.value=o(N.value));let{done:S}=N;!b&&d!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return O&&a!==void 0&&(N.value=Wf(c,this.options,a)),g&&g(N.value),O&&this.finish(),N}get duration(){const{resolved:s}=this;return s?ei(s.calculatedDuration):0}get time(){return ei(this.currentTime)}set time(s){s=Ja(s),this.currentTime=s,this.holdTime!==null||this.speed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.speed)}get speed(){return this.playbackSpeed}set speed(s){const r=this.playbackSpeed!==s;this.playbackSpeed=s,r&&(this.time=ei(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:s=g2e,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var s;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(s=this.currentTime)!==null&&s!==void 0?s:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:s}=this.options;s&&s()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}}const y2e=new Set(["opacity","clipPath","filter","transform"]);function b2e(t,s,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:l="loop",ease:o="easeInOut",times:c}={}){const d={[s]:r};c&&(d.offset=c);const u=S3(o,a);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"})}const N2e=cw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),op=10,w2e=2e4;function S2e(t){return Sw(t.type)||t.type==="spring"||!w3(t.ease)}function C2e(t,s){const r=new $w({...s,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const a=[];let i=0;for(;!n.done&&i<w2e;)n=r.sample(i),a.push(n.value),i+=op;return{times:void 0,keyframes:a,duration:i-op,ease:"linear"}}const a$={anticipate:I3,backInOut:_3,circInOut:F3};function k2e(t){return t in a$}class lA extends J3{constructor(s){super(s);const{name:r,motionValue:n,element:a,keyframes:i}=this.options;this.resolver=new Z3(i,(l,o)=>this.onKeyframesResolved(l,o),r,n,a),this.resolver.scheduleResolve()}initPlayback(s,r){let{duration:n=300,times:a,ease:i,type:l,motionValue:o,name:c,startTime:d}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof i=="string"&&ap()&&k2e(i)&&(i=a$[i]),S2e(this.options)){const{onComplete:m,onUpdate:h,motionValue:x,element:f,...p}=this.options,g=C2e(s,p);s=g.keyframes,s.length===1&&(s[1]=s[0]),n=g.duration,a=g.times,i=g.ease,l="keyframes"}const u=b2e(o.owner.current,c,s,{...this.options,duration:n,times:a,ease:i});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(HP(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:m}=this.options;o.set(Wf(s,this.options,r)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:a,type:l,ease:i,keyframes:s}}get duration(){const{resolved:s}=this;if(!s)return 0;const{duration:r}=s;return ei(r)}get time(){const{resolved:s}=this;if(!s)return 0;const{animation:r}=s;return ei(r.currentTime||0)}set time(s){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Ja(s)}get speed(){const{resolved:s}=this;if(!s)return 1;const{animation:r}=s;return r.playbackRate}set speed(s){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=s}get state(){const{resolved:s}=this;if(!s)return"idle";const{animation:r}=s;return r.playState}get startTime(){const{resolved:s}=this;if(!s)return null;const{animation:r}=s;return r.startTime}attachTimeline(s){if(!this._resolved)this.pendingTimeline=s;else{const{resolved:r}=this;if(!r)return on;const{animation:n}=r;HP(n,s)}return on}play(){if(this.isStopped)return;const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:s}=this;if(!s)return;const{animation:r,keyframes:n,duration:a,type:i,ease:l,times:o}=s;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:m,element:h,...x}=this.options,f=new $w({...x,keyframes:n,duration:a,type:i,ease:l,times:o,isGenerator:!0}),p=Ja(this.time);d.setWithVelocity(f.sample(p-op).value,f.sample(p).value,op)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:s}=this;s&&s.animation.finish()}cancel(){const{resolved:s}=this;s&&s.animation.cancel()}static supports(s){const{motionValue:r,name:n,repeatDelay:a,repeatType:i,damping:l,type:o}=s;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=r.owner.getProps();return N2e()&&n&&y2e.has(n)&&!c&&!d&&!a&&i!=="mirror"&&l!==0&&o!=="inertia"}}const P2e={type:"spring",stiffness:500,damping:25,restSpeed:10},A2e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),T2e={type:"keyframes",duration:.8},D2e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},O2e=(t,{keyframes:s})=>s.length>2?T2e:io.has(t)?t.startsWith("scale")?A2e(s[1]):P2e:D2e;function E2e({when:t,delay:s,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:o,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const Fw=(t,s,r,n={},a,i)=>l=>{const o=ww(n,t)||{},c=o.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Ja(c);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:s.getVelocity(),...o,delay:-d,onUpdate:h=>{s.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{l(),o.onComplete&&o.onComplete()},name:t,motionValue:s,element:i?void 0:a};E2e(o)||(u={...u,...O2e(t,u)}),u.duration&&(u.duration=Ja(u.duration)),u.repeatDelay&&(u.repeatDelay=Ja(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(m=!0)),m&&!i&&s.get()!==void 0){const h=Wf(u.keyframes,o);if(h!==void 0)return _s.update(()=>{u.onUpdate(h),u.onComplete()}),new X1e([])}return!i&&lA.supports(u)?new lA(u):new $w(u)};function M2e({protectedKeys:t,needsAnimating:s},r){const n=t.hasOwnProperty(r)&&s[r]!==!0;return s[r]=!1,n}function i$(t,s,{delay:r=0,transitionOverride:n,type:a}={}){var i;let{transition:l=t.getDefaultTransition(),transitionEnd:o,...c}=s;n&&(l=n);const d=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const m in c){const h=t.getValue(m,(i=t.latestValues[m])!==null&&i!==void 0?i:null),x=c[m];if(x===void 0||u&&M2e(u,m))continue;const f={delay:r,...ww(l||{},m)};let p=!1;if(window.MotionHandoffAnimation){const y=D3(t);if(y){const b=window.MotionHandoffAnimation(y,m,_s);b!==null&&(f.startTime=b,p=!0)}}d0(t,m),h.start(Fw(m,h,x,t.shouldReduceMotion&&A3.has(m)?{type:!1}:f,t,p));const g=h.animation;g&&d.push(g)}return o&&Promise.all(d).then(()=>{_s.update(()=>{o&&uSe(t,o)})}),d}function g0(t,s,r={}){var n;const a=Gf(t,s,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const l=a?()=>Promise.all(i$(t,a,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:m,staggerDirection:h}=i;return R2e(t,s,u+d,m,h,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[l,o]:[o,l];return d().then(()=>u())}else return Promise.all([l(),o(r.delay)])}function R2e(t,s,r=0,n=0,a=1,i){const l=[],o=(t.variantChildren.size-1)*n,c=a===1?(d=0)=>d*n:(d=0)=>o-d*n;return Array.from(t.variantChildren).sort(_2e).forEach((d,u)=>{d.notify("AnimationStart",s),l.push(g0(d,s,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",s)))}),Promise.all(l)}function _2e(t,s){return t.sortNodePosition(s)}function I2e(t,s,r={}){t.notify("AnimationStart",s);let n;if(Array.isArray(s)){const a=s.map(i=>g0(t,i,r));n=Promise.all(a)}else if(typeof s=="string")n=g0(t,s,r);else{const a=typeof s=="function"?Gf(t,s,r.custom):s;n=Promise.all(i$(t,a,r))}return n.then(()=>{t.notify("AnimationComplete",s)})}const $2e=uw.length;function l$(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?l$(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const s={};for(let r=0;r<$2e;r++){const n=uw[r],a=t.props[n];(Hu(a)||a===!1)&&(s[n]=a)}return s}const F2e=[...dw].reverse(),L2e=dw.length;function B2e(t){return s=>Promise.all(s.map(({animation:r,options:n})=>I2e(t,r,n)))}function V2e(t){let s=B2e(t),r=oA(),n=!0;const a=c=>(d,u)=>{var m;const h=Gf(t,u,c==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(h){const{transition:x,transitionEnd:f,...p}=h;d={...d,...p,...f}}return d};function i(c){s=c(t)}function l(c){const{props:d}=t,u=l$(t.parent)||{},m=[],h=new Set;let x={},f=1/0;for(let g=0;g<L2e;g++){const y=F2e[g],b=r[y],j=d[y]!==void 0?d[y]:u[y],w=Hu(j),N=y===c?b.isActive:null;N===!1&&(f=g);let S=j===u[y]&&j!==d[y]&&w;if(S&&n&&t.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...x},!b.isActive&&N===null||!j&&!b.prevProp||Hf(j)||typeof j=="boolean")continue;const O=q2e(b.prevProp,j);let P=O||y===c&&b.isActive&&!S&&w||g>f&&w,k=!1;const R=Array.isArray(j)?j:[j];let F=R.reduce(a(y),{});N===!1&&(F={});const{prevResolvedValues:I={}}=b,W={...I,...F},E=J=>{P=!0,h.has(J)&&(k=!0,h.delete(J)),b.needsAnimating[J]=!0;const C=t.getValue(J);C&&(C.liveStyle=!1)};for(const J in W){const C=F[J],V=I[J];if(x.hasOwnProperty(J))continue;let z=!1;l0(C)&&l0(V)?z=!y3(C,V):z=C!==V,z?C!=null?E(J):h.add(J):C!==void 0&&h.has(J)?E(J):b.protectedKeys[J]=!0}b.prevProp=j,b.prevResolvedValues=F,b.isActive&&(x={...x,...F}),n&&t.blockInitialAnimation&&(P=!1),P&&(!(S&&O)||k)&&m.push(...R.map(J=>({animation:J,options:{type:y}})))}if(h.size){const g={};h.forEach(y=>{const b=t.getBaseTarget(y),j=t.getValue(y);j&&(j.liveStyle=!0),g[y]=b??null}),m.push({animation:g})}let p=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(p=!1),n=!1,p?s(m):Promise.resolve()}function o(c,d){var u;if(r[c].isActive===d)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var x;return(x=h.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),r[c].isActive=d;const m=l(c);for(const h in r)r[h].protectedKeys={};return m}return{animateChanges:l,setActive:o,setAnimateFunction:i,getState:()=>r,reset:()=>{r=oA(),n=!0}}}function q2e(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!y3(s,t):!1}function ol(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function oA(){return{animate:ol(!0),whileInView:ol(),whileHover:ol(),whileTap:ol(),whileDrag:ol(),whileFocus:ol(),exit:ol()}}class tl{constructor(s){this.isMounted=!1,this.node=s}update(){}}class U2e extends tl{constructor(s){super(s),s.animationState||(s.animationState=V2e(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Hf(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:r}=this.node.prevProps||{};s!==r&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)===null||s===void 0||s.call(this)}}let z2e=0;class H2e extends tl{constructor(){super(...arguments),this.id=z2e++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const a=this.node.animationState.setActive("exit",!s);r&&!s&&a.then(()=>r(this.id))}mount(){const{register:s}=this.node.presenceContext||{};s&&(this.unmount=s(this.id))}unmount(){}}const K2e={animation:{Feature:U2e},exit:{Feature:H2e}};function Qu(t,s,r,n={passive:!0}){return t.addEventListener(s,r,n),()=>t.removeEventListener(s,r)}function Im(t){return{point:{x:t.pageX,y:t.pageY}}}const G2e=t=>s=>kw(s)&&t(s,Im(s));function qd(t,s,r,n){return Qu(t,s,G2e(r),n)}const cA=(t,s)=>Math.abs(t-s);function W2e(t,s){const r=cA(t.x,s.x),n=cA(t.y,s.y);return Math.sqrt(r**2+n**2)}class o${constructor(s,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Cj(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,x=W2e(m.offset,{x:0,y:0})>=3;if(!h&&!x)return;const{point:f}=m,{timestamp:p}=Cr;this.history.push({...f,timestamp:p});const{onStart:g,onMove:y}=this.handlers;h||(g&&g(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,m)},this.handlePointerMove=(m,h)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Sj(h,this.transformPagePoint),_s.update(this.updatePoint,!0)},this.handlePointerUp=(m,h)=>{this.end();const{onEnd:x,onSessionEnd:f,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Cj(m.type==="pointercancel"?this.lastMoveEventInfo:Sj(h,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,g),f&&f(m,g)},!kw(s))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const l=Im(s),o=Sj(l,this.transformPagePoint),{point:c}=o,{timestamp:d}=Cr;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(s,Cj(o,this.history)),this.removeListeners=_m(qd(this.contextWindow,"pointermove",this.handlePointerMove),qd(this.contextWindow,"pointerup",this.handlePointerUp),qd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Hi(this.updatePoint)}}function Sj(t,s){return s?{point:s(t.point)}:t}function dA(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Cj({point:t},s){return{point:t,delta:dA(t,c$(s)),offset:dA(t,Q2e(s)),velocity:Y2e(s,.1)}}function Q2e(t){return t[0]}function c$(t){return t[t.length-1]}function Y2e(t,s){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=c$(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>Ja(s)));)r--;if(!n)return{x:0,y:0};const i=ei(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const l={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const d$=1e-4,X2e=1-d$,Z2e=1+d$,u$=.01,J2e=0-u$,eCe=0+u$;function un(t){return t.max-t.min}function tCe(t,s,r){return Math.abs(t-s)<=r}function uA(t,s,r,n=.5){t.origin=n,t.originPoint=Vs(s.min,s.max,t.origin),t.scale=un(r)/un(s),t.translate=Vs(r.min,r.max,t.origin)-t.originPoint,(t.scale>=X2e&&t.scale<=Z2e||isNaN(t.scale))&&(t.scale=1),(t.translate>=J2e&&t.translate<=eCe||isNaN(t.translate))&&(t.translate=0)}function Ud(t,s,r,n){uA(t.x,s.x,r.x,n?n.originX:void 0),uA(t.y,s.y,r.y,n?n.originY:void 0)}function mA(t,s,r){t.min=r.min+s.min,t.max=t.min+un(s)}function sCe(t,s,r){mA(t.x,s.x,r.x),mA(t.y,s.y,r.y)}function hA(t,s,r){t.min=s.min-r.min,t.max=t.min+un(s)}function zd(t,s,r){hA(t.x,s.x,r.x),hA(t.y,s.y,r.y)}function rCe(t,{min:s,max:r},n){return s!==void 0&&t<s?t=n?Vs(s,t,n.min):Math.max(t,s):r!==void 0&&t>r&&(t=n?Vs(r,t,n.max):Math.min(t,r)),t}function xA(t,s,r){return{min:s!==void 0?t.min+s:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function nCe(t,{top:s,left:r,bottom:n,right:a}){return{x:xA(t.x,r,a),y:xA(t.y,s,n)}}function pA(t,s){let r=s.min-t.min,n=s.max-t.max;return s.max-s.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function aCe(t,s){return{x:pA(t.x,s.x),y:pA(t.y,s.y)}}function iCe(t,s){let r=.5;const n=un(t),a=un(s);return a>n?r=Ec(s.min,s.max-n,t.min):n>a&&(r=Ec(t.min,t.max-a,s.min)),oi(0,1,r)}function lCe(t,s){const r={};return s.min!==void 0&&(r.min=s.min-t.min),s.max!==void 0&&(r.max=s.max-t.min),r}const j0=.35;function oCe(t=j0){return t===!1?t=0:t===!0&&(t=j0),{x:fA(t,"left","right"),y:fA(t,"top","bottom")}}function fA(t,s,r){return{min:gA(t,s),max:gA(t,r)}}function gA(t,s){return typeof t=="number"?t:t[s]||0}const jA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Eo=()=>({x:jA(),y:jA()}),vA=()=>({min:0,max:0}),Xs=()=>({x:vA(),y:vA()});function jn(t){return[t("x"),t("y")]}function m$({top:t,left:s,right:r,bottom:n}){return{x:{min:s,max:r},y:{min:t,max:n}}}function cCe({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function dCe(t,s){if(!s)return t;const r=s({x:t.left,y:t.top}),n=s({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function kj(t){return t===void 0||t===1}function v0({scale:t,scaleX:s,scaleY:r}){return!kj(t)||!kj(s)||!kj(r)}function ml(t){return v0(t)||h$(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function h$(t){return yA(t.x)||yA(t.y)}function yA(t){return t&&t!=="0%"}function cp(t,s,r){const n=t-r,a=s*n;return r+a}function bA(t,s,r,n,a){return a!==void 0&&(t=cp(t,a,n)),cp(t,r,n)+s}function y0(t,s=0,r=1,n,a){t.min=bA(t.min,s,r,n,a),t.max=bA(t.max,s,r,n,a)}function x$(t,{x:s,y:r}){y0(t.x,s.translate,s.scale,s.originPoint),y0(t.y,r.translate,r.scale,r.originPoint)}const NA=.999999999999,wA=1.0000000000001;function uCe(t,s,r,n=!1){const a=r.length;if(!a)return;s.x=s.y=1;let i,l;for(let o=0;o<a;o++){i=r[o],l=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ro(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(s.x*=l.x.scale,s.y*=l.y.scale,x$(t,l)),n&&ml(i.latestValues)&&Ro(t,i.latestValues))}s.x<wA&&s.x>NA&&(s.x=1),s.y<wA&&s.y>NA&&(s.y=1)}function Mo(t,s){t.min=t.min+s,t.max=t.max+s}function SA(t,s,r,n,a=.5){const i=Vs(t.min,t.max,a);y0(t,s,r,i,n)}function Ro(t,s){SA(t.x,s.x,s.scaleX,s.scale,s.originX),SA(t.y,s.y,s.scaleY,s.scale,s.originY)}function p$(t,s){return m$(dCe(t.getBoundingClientRect(),s))}function mCe(t,s,r){const n=p$(t,r),{scroll:a}=s;return a&&(Mo(n.x,a.offset.x),Mo(n.y,a.offset.y)),n}const f$=({current:t})=>t?t.ownerDocument.defaultView:null,hCe=new WeakMap;class xCe{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xs(),this.visualElement=s}start(s,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Im(u).point)},i=(u,m)=>{const{drag:h,dragPropagation:x,onDragStart:f}=this.getProps();if(h&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iSe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jn(g=>{let y=this.getAxisMotionValue(g).get()||0;if(ba.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const j=b.layout.layoutBox[g];j&&(y=un(j)*(parseFloat(y)/100))}}this.originPoint[g]=y}),f&&_s.postRender(()=>f(u,m)),d0(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},l=(u,m)=>{const{dragPropagation:h,dragDirectionLock:x,onDirectionLock:f,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:g}=m;if(x&&this.currentDirection===null){this.currentDirection=pCe(g),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",m.point,g),this.updateAxis("y",m.point,g),this.visualElement.render(),p&&p(u,m)},o=(u,m)=>this.stop(u,m),c=()=>jn(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new o$(s,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:f$(this.visualElement)})}stop(s,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&_s.postRender(()=>i(s,r))}cancel(){this.isDragging=!1;const{projection:s,animationState:r}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(s,r,n){const{drag:a}=this.getProps();if(!n||!xh(s,a,this.currentDirection))return;const i=this.getAxisMotionValue(s);let l=this.originPoint[s]+n[s];this.constraints&&this.constraints[s]&&(l=rCe(l,this.constraints[s],this.elastic[s])),i.set(l)}resolveConstraints(){var s;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)===null||s===void 0?void 0:s.layout,i=this.constraints;r&&Do(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=nCe(a.layoutBox,r):this.constraints=!1,this.elastic=oCe(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&jn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=lCe(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:r}=this.getProps();if(!s||!Do(s))return!1;const n=s.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=mCe(n,a.root,this.visualElement.getTransformPagePoint());let l=aCe(a.layout.layoutBox,i);if(r){const o=r(cCe(l));this.hasMutatedConstraints=!!o,o&&(l=m$(o))}return l}startAnimation(s){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=jn(u=>{if(!xh(u,r,this.currentDirection))return;let m=c&&c[u]||{};l&&(m={min:0,max:0});const h=a?200:1e6,x=a?40:1e7,f={type:"inertia",velocity:n?s[u]:0,bounceStiffness:h,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,f)});return Promise.all(d).then(o)}startAxisValueAnimation(s,r){const n=this.getAxisMotionValue(s);return d0(this.visualElement,s),n.start(Fw(s,n,0,r,this.visualElement,!1))}stopAnimation(){jn(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){jn(s=>{var r;return(r=this.getAxisMotionValue(s).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(s){var r;return(r=this.getAxisMotionValue(s).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(s){const r=`_drag${s.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(s,(n.initial?n.initial[s]:void 0)||0)}snapToCursor(s){jn(r=>{const{drag:n}=this.getProps();if(!xh(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:l,max:o}=a.layout.layoutBox[r];i.set(s[r]-Vs(l,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Do(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};jn(l=>{const o=this.getAxisMotionValue(l);if(o&&this.constraints!==!1){const c=o.get();a[l]=iCe({min:c,max:c},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),jn(l=>{if(!xh(l,s,null))return;const o=this.getAxisMotionValue(l),{min:c,max:d}=this.constraints[l];o.set(Vs(c,d,a[l]))})}addListeners(){if(!this.visualElement.current)return;hCe.set(this.visualElement,this);const s=this.visualElement.current,r=qd(s,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Do(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),_s.read(n);const l=Qu(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(jn(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{l(),r(),i(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:l=j0,dragMomentum:o=!0}=s;return{...s,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:l,dragMomentum:o}}}function xh(t,s,r){return(s===!0||s===t)&&(r===null||r===t)}function pCe(t,s=10){let r=null;return Math.abs(t.y)>s?r="y":Math.abs(t.x)>s&&(r="x"),r}class fCe extends tl{constructor(s){super(s),this.removeGroupControls=on,this.removeListeners=on,this.controls=new xCe(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||on}unmount(){this.removeGroupControls(),this.removeListeners()}}const CA=t=>(s,r)=>{t&&_s.postRender(()=>t(s,r))};class gCe extends tl{constructor(){super(...arguments),this.removePointerDownListener=on}onPointerDown(s){this.session=new o$(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:f$(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:CA(s),onStart:CA(r),onMove:n,onEnd:(i,l)=>{delete this.session,a&&_s.postRender(()=>a(i,l))}}}mount(){this.removePointerDownListener=qd(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Th={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kA(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Nd={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(bt.test(t))t=parseFloat(t);else return t;const r=kA(t,s.target.x),n=kA(t,s.target.y);return`${r}% ${n}%`}},jCe={correct:(t,{treeScale:s,projectionDelta:r})=>{const n=t,a=Ki.parse(t);if(a.length>5)return n;const i=Ki.createTransformer(t),l=typeof a[0]!="number"?1:0,o=r.x.scale*s.x,c=r.y.scale*s.y;a[0+l]/=o,a[1+l]/=c;const d=Vs(o,c,.5);return typeof a[2+l]=="number"&&(a[2+l]/=d),typeof a[3+l]=="number"&&(a[3+l]/=d),i(a)}};class vCe extends v.Component{componentDidMount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=s;L1e(yCe),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Th.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,l=n.projection;return l&&(l.isPresent=i,a||s.layoutDependency!==r||r===void 0?l.willUpdate():this.safeToRemove(),s.isPresent!==i&&(i?l.promote():l.relegate()||_s.postRender(()=>{const o=l.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),hw.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=s;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function g$(t){const[s,r]=J5(),n=v.useContext(aw);return e.jsx(vCe,{...t,layoutGroup:n,switchLayoutGroup:v.useContext(l3),isPresent:s,safeToRemove:r})}const yCe={borderRadius:{...Nd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nd,borderTopRightRadius:Nd,borderBottomLeftRadius:Nd,borderBottomRightRadius:Nd,boxShadow:jCe};function bCe(t,s,r){const n=Or(t)?t:Gu(t);return n.start(Fw("",n,s,r)),n.animation}function NCe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const wCe=(t,s)=>t.depth-s.depth;class SCe{constructor(){this.children=[],this.isDirty=!1}add(s){Pw(this.children,s),this.isDirty=!0}remove(s){Aw(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(wCe),this.isDirty=!1,this.children.forEach(s)}}function CCe(t,s){const r=Na.now(),n=({timestamp:a})=>{const i=a-r;i>=s&&(Hi(n),t(i-s))};return _s.read(n,!0),()=>Hi(n)}const j$=["TopLeft","TopRight","BottomLeft","BottomRight"],kCe=j$.length,PA=t=>typeof t=="string"?parseFloat(t):t,AA=t=>typeof t=="number"||bt.test(t);function PCe(t,s,r,n,a,i){a?(t.opacity=Vs(0,r.opacity!==void 0?r.opacity:1,ACe(n)),t.opacityExit=Vs(s.opacity!==void 0?s.opacity:1,0,TCe(n))):i&&(t.opacity=Vs(s.opacity!==void 0?s.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let l=0;l<kCe;l++){const o=`border${j$[l]}Radius`;let c=TA(s,o),d=TA(r,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||AA(c)===AA(d)?(t[o]=Math.max(Vs(PA(c),PA(d),n),0),(ba.test(d)||ba.test(c))&&(t[o]+="%")):t[o]=d}(s.rotate||r.rotate)&&(t.rotate=Vs(s.rotate||0,r.rotate||0,n))}function TA(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const ACe=v$(0,.5,$3),TCe=v$(.5,.95,on);function v$(t,s,r){return n=>n<t?0:n>s?1:r(Ec(t,s,n))}function DA(t,s){t.min=s.min,t.max=s.max}function fn(t,s){DA(t.x,s.x),DA(t.y,s.y)}function OA(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function EA(t,s,r,n,a){return t-=s,t=cp(t,1/r,n),a!==void 0&&(t=cp(t,1/a,n)),t}function DCe(t,s=0,r=1,n=.5,a,i=t,l=t){if(ba.test(s)&&(s=parseFloat(s),s=Vs(l.min,l.max,s/100)-l.min),typeof s!="number")return;let o=Vs(i.min,i.max,n);t===i&&(o-=s),t.min=EA(t.min,s,r,o,a),t.max=EA(t.max,s,r,o,a)}function MA(t,s,[r,n,a],i,l){DCe(t,s[r],s[n],s[a],s.scale,i,l)}const OCe=["x","scaleX","originX"],ECe=["y","scaleY","originY"];function RA(t,s,r,n){MA(t.x,s,OCe,r?r.x:void 0,n?n.x:void 0),MA(t.y,s,ECe,r?r.y:void 0,n?n.y:void 0)}function _A(t){return t.translate===0&&t.scale===1}function y$(t){return _A(t.x)&&_A(t.y)}function IA(t,s){return t.min===s.min&&t.max===s.max}function MCe(t,s){return IA(t.x,s.x)&&IA(t.y,s.y)}function $A(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function b$(t,s){return $A(t.x,s.x)&&$A(t.y,s.y)}function FA(t){return un(t.x)/un(t.y)}function LA(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class RCe{constructor(){this.members=[]}add(s){Pw(this.members,s),s.scheduleRender()}remove(s){if(Aw(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(s){const r=this.members.findIndex(a=>s===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(s,r){const n=this.lead;if(s!==n&&(this.prevLead=n,this.lead=s,s.show(),n)){n.instance&&n.scheduleRender(),s.scheduleRender(),s.resumeFrom=n,r&&(s.resumeFrom.preserveOpacity=!0),n.snapshot&&(s.snapshot=n.snapshot,s.snapshot.latestValues=n.animationValues||n.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:a}=s.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:r,resumingFrom:n}=s;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _Ce(t,s,r){let n="";const a=t.x.translate/s.x,i=t.y.translate/s.y,l=r?.z||0;if((a||i||l)&&(n=`translate3d(${a}px, ${i}px, ${l}px) `),(s.x!==1||s.y!==1)&&(n+=`scale(${1/s.x}, ${1/s.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:m,rotateY:h,skewX:x,skewY:f}=r;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),m&&(n+=`rotateX(${m}deg) `),h&&(n+=`rotateY(${h}deg) `),x&&(n+=`skewX(${x}deg) `),f&&(n+=`skewY(${f}deg) `)}const o=t.x.scale*s.x,c=t.y.scale*s.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const hl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Od=typeof window<"u"&&window.MotionDebug!==void 0,Pj=["","X","Y","Z"],ICe={visibility:"hidden"},BA=1e3;let $Ce=0;function Aj(t,s,r,n){const{latestValues:a}=s;a[t]&&(r[t]=a[t],s.setStaticValue(t,0),n&&(n[t]=0))}function N$(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const r=D3(s);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",_s,!(a||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&N$(n)}function w$({attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(l={},o=s?.()){this.id=$Ce++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Od&&(hl.totalNodes=hl.resolvedTargetDeltas=hl.recalculatedProjection=0),this.nodes.forEach(BCe),this.nodes.forEach(HCe),this.nodes.forEach(KCe),this.nodes.forEach(VCe),Od&&window.MotionDebug.record(hl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new SCe)}addEventListener(l,o){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Tw),this.eventHandlers.get(l).add(o)}notifyListeners(l,...o){const c=this.eventHandlers.get(l);c&&c.notify(...o)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NCe(l),this.instance=l;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(d||c)&&(this.isLayoutDirty=!0),t){let m;const h=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=CCe(h,250),Th.hasAnimatedSinceResize&&(Th.hasAnimatedSinceResize=!1,this.nodes.forEach(qA))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeTargetChanged:x,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||XCe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),b=!this.targetLayout||!b$(this.targetLayout,f)||x,j=!h&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,j);const w={...ww(p,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else h||qA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Hi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GCe),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&N$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VA);return}this.isUpdating||this.nodes.forEach(UCe),this.isUpdating=!1,this.nodes.forEach(zCe),this.nodes.forEach(FCe),this.nodes.forEach(LCe),this.clearAllSnapshots();const o=Na.now();Cr.delta=oi(0,1e3/60,o-Cr.timestamp),Cr.timestamp=o,Cr.isProcessing=!0,jj.update.process(Cr),jj.preRender.process(Cr),jj.render.process(Cr),Cr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qCe),this.sharedNodes.forEach(WCe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_s.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_s.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(o=!1),o){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!y$(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;l&&(o||ml(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return l&&(c=this.removeTransform(c)),ZCe(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:o}=this.options;if(!o)return Xs();const c=o.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(JCe))){const{scroll:u}=this.root;u&&(Mo(c.x,u.offset.x),Mo(c.y,u.offset.y))}return c}removeElementScroll(l){var o;const c=Xs();if(fn(c,l),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:m,options:h}=u;u!==this.root&&m&&h.layoutScroll&&(m.wasRoot&&fn(c,l),Mo(c.x,m.offset.x),Mo(c.y,m.offset.y))}return c}applyTransform(l,o=!1){const c=Xs();fn(c,l);for(let d=0;d<this.path.length;d++){const u=this.path[d];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ro(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ml(u.latestValues)&&Ro(c,u.latestValues)}return ml(this.latestValues)&&Ro(c,this.latestValues),c}removeTransform(l){const o=Xs();fn(o,l);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ml(d.latestValues))continue;v0(d.latestValues)&&d.updateSnapshot();const u=Xs(),m=d.measurePageBox();fn(u,m),RA(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return ml(this.latestValues)&&RA(o,this.latestValues),o}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Cr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=Cr.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xs(),this.relativeTargetOrigin=Xs(),zd(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xs(),this.targetWithTransforms=Xs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sCe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fn(this.target,this.layout.layoutBox),x$(this.target,this.targetDelta)):fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xs(),this.relativeTargetOrigin=Xs(),zd(this.relativeTargetOrigin,this.target,x.target),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Od&&hl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||v0(this.parent.latestValues)||h$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Cr.timestamp&&(d=!1),d)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;fn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,x=this.treeScale.y;uCe(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Xs());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OA(this.prevProjectionDelta.x,this.projectionDelta.x),OA(this.prevProjectionDelta.y,this.projectionDelta.y)),Ud(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==x||!LA(this.projectionDelta.x,this.prevProjectionDelta.x)||!LA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f)),Od&&hl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Eo(),this.projectionDelta=Eo(),this.projectionDeltaWithTransform=Eo()}setAnimationOrigin(l,o=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=Eo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Xs(),x=c?c.source:void 0,f=this.layout?this.layout.source:void 0,p=x!==f,g=this.getStack(),y=!g||g.members.length<=1,b=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(YCe));this.animationProgress=0;let j;this.mixTargetDelta=w=>{const N=w/1e3;UA(m.x,l.x,N),UA(m.y,l.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zd(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QCe(this.relativeTarget,this.relativeTargetOrigin,h,N),j&&MCe(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Xs()),fn(j,this.relativeTarget)),p&&(this.animationValues=u,PCe(u,d,this.latestValues,N,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Hi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_s.update(()=>{Th.hasAnimatedSinceResize=!0,this.currentAnimation=bCe(0,BA,{...l,onUpdate:o=>{this.mixTargetDelta(o),l.onUpdate&&l.onUpdate(o)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:u}=l;if(!(!o||!c||!d)){if(this!==l&&this.layout&&d&&S$(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Xs();const m=un(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+m;const h=un(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+h}fn(o,c),Ro(o,u),Ud(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(l,o){this.sharedNodes.has(l)||this.sharedNodes.set(l,new RCe),this.sharedNodes.get(l).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let o=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const d={};c.z&&Aj("z",l,d,this.animationValues);for(let u=0;u<Pj.length;u++)Aj(`rotate${Pj[u]}`,l,d,this.animationValues),Aj(`skew${Pj[u]}`,l,d,this.animationValues);l.render();for(const u in d)l.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);l.scheduleRender()}getProjectionStyles(l){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ICe;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Ph(l?.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Ph(l?.pointerEvents)||""),this.hasProjected&&!ml(this.latestValues)&&(p.transform=u?u({},""):"none",this.hasProjected=!1),p}const h=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=_Ce(this.projectionDeltaWithTransform,this.treeScale,h),u&&(d.transform=u(h,d.transform));const{x,y:f}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${f.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:d.opacity=m===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in np){if(h[p]===void 0)continue;const{correct:g,applyTo:y}=np[p],b=d.transform==="none"?h[p]:g(h[p],m);if(y){const j=y.length;for(let w=0;w<j;w++)d[y[w]]=b}else d[p]=b}return this.options.layoutId&&(d.pointerEvents=m===this?Ph(l?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var o;return(o=l.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(VA),this.root.sharedNodes.clear()}}}function FCe(t){t.updateLayout()}function LCe(t){var s;const r=((s=t.resumeFrom)===null||s===void 0?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=t.layout,{animationType:i}=t.options,l=r.source!==t.layout.source;i==="size"?jn(m=>{const h=l?r.measuredBox[m]:r.layoutBox[m],x=un(h);h.min=n[m].min,h.max=h.min+x}):S$(i,r.layoutBox,n)&&jn(m=>{const h=l?r.measuredBox[m]:r.layoutBox[m],x=un(n[m]);h.max=h.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+x)});const o=Eo();Ud(o,n,r.layoutBox);const c=Eo();l?Ud(c,t.applyTransform(a,!0),r.measuredBox):Ud(c,n,r.layoutBox);const d=!y$(o);let u=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:x}=m;if(h&&x){const f=Xs();zd(f,r.layoutBox,h.layoutBox);const p=Xs();zd(p,n,x.layoutBox),b$(f,p)||(u=!0),m.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=f,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function BCe(t){Od&&hl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function VCe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function qCe(t){t.clearSnapshot()}function VA(t){t.clearMeasurements()}function UCe(t){t.isLayoutDirty=!1}function zCe(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function qA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function HCe(t){t.resolveTargetDelta()}function KCe(t){t.calcProjection()}function GCe(t){t.resetSkewAndRotation()}function WCe(t){t.removeLeadSnapshot()}function UA(t,s,r){t.translate=Vs(s.translate,0,r),t.scale=Vs(s.scale,1,r),t.origin=s.origin,t.originPoint=s.originPoint}function zA(t,s,r,n){t.min=Vs(s.min,r.min,n),t.max=Vs(s.max,r.max,n)}function QCe(t,s,r,n){zA(t.x,s.x,r.x,n),zA(t.y,s.y,r.y,n)}function YCe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const XCe={duration:.45,ease:[.4,0,.1,1]},HA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),KA=HA("applewebkit/")&&!HA("chrome/")?Math.round:on;function GA(t){t.min=KA(t.min),t.max=KA(t.max)}function ZCe(t){GA(t.x),GA(t.y)}function S$(t,s,r){return t==="position"||t==="preserve-aspect"&&!tCe(FA(s),FA(r),.2)}function JCe(t){var s;return t!==t.root&&((s=t.scroll)===null||s===void 0?void 0:s.wasRoot)}const eke=w$({attachResizeListener:(t,s)=>Qu(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tj={current:void 0},C$=w$({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tj.current){const t=new eke({});t.mount(window),t.setOptions({layoutScroll:!0}),Tj.current=t}return Tj.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tke={pan:{Feature:gCe},drag:{Feature:fCe,ProjectionNode:C$,MeasureLayout:g$}};function WA(t,s,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=n[a];i&&_s.postRender(()=>i(s,Im(s)))}class ske extends tl{mount(){const{current:s}=this.node;s&&(this.unmount=tSe(s,r=>(WA(this.node,r,"Start"),n=>WA(this.node,n,"End"))))}unmount(){}}class rke extends tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_m(Qu(this.node.current,"focus",()=>this.onFocus()),Qu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function QA(t,s,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=n[a];i&&_s.postRender(()=>i(s,Im(s)))}class nke extends tl{mount(){const{current:s}=this.node;s&&(this.unmount=aSe(s,r=>(QA(this.node,r,"Start"),(n,{success:a})=>QA(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const b0=new WeakMap,Dj=new WeakMap,ake=t=>{const s=b0.get(t.target);s&&s(t)},ike=t=>{t.forEach(ake)};function lke({root:t,...s}){const r=t||document;Dj.has(r)||Dj.set(r,{});const n=Dj.get(r),a=JSON.stringify(s);return n[a]||(n[a]=new IntersectionObserver(ike,{root:t,...s})),n[a]}function oke(t,s,r){const n=lke(s);return b0.set(t,r),n.observe(t),()=>{b0.delete(t),n.unobserve(t)}}const cke={some:0,all:1};class dke extends tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=s,l={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:cke[a]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),h=d?u:m;h&&h(c)};return oke(this.node.current,l,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:r}=this.node;["amount","margin","root"].some(uke(s,r))&&this.startObserver()}unmount(){}}function uke({viewport:t={}},{viewport:s={}}={}){return r=>t[r]!==s[r]}const mke={inView:{Feature:dke},tap:{Feature:nke},focus:{Feature:rke},hover:{Feature:ske}},hke={layout:{ProjectionNode:C$,MeasureLayout:g$}},N0={current:null},k$={current:!1};function xke(){if(k$.current=!0,!!ow)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>N0.current=t.matches;t.addListener(s),s()}else N0.current=!1}const pke=[...X3,Pr,Ki],fke=t=>pke.find(Y3(t)),YA=new WeakMap;function gke(t,s,r){for(const n in s){const a=s[n],i=r[n];if(Or(a))t.addValue(n,a);else if(Or(i))t.addValue(n,Gu(a,{owner:t}));else if(i!==a)if(t.hasValue(n)){const l=t.getValue(n);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(n);t.addValue(n,Gu(l!==void 0?l:a,{owner:t}))}}for(const n in r)s[n]===void 0&&t.removeValue(n);return s}const XA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jke{scrapeMotionValuesFromProps(s,r,n){return{}}constructor({parent:s,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:l},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_w,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Na.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,_s.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:u}=l;this.onUpdate=u,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=s,this.props=r,this.presenceContext=n,this.depth=s?s.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Kf(r),this.isVariantNode=a3(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const x in h){const f=h[x];c[x]!==void 0&&Or(f)&&f.set(c[x],!1)}}mount(s){this.current=s,YA.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),k$.current||xke(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:N0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){YA.delete(this.current),this.projection&&this.projection.unmount(),Hi(this.notifyUpdate),Hi(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(s,r){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const n=io.has(s),a=r.on("change",o=>{this.latestValues[s]=o,this.props.onUpdate&&_s.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,s,r)),this.valueSubscriptions.set(s,()=>{a(),i(),l&&l(),r.owner&&r.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Mc){const r=Mc[s];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[s]&&a&&n(this.props)&&(this.features[s]=new a(this)),this.features[s]){const i=this.features[s];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xs()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,r){this.latestValues[s]=r}update(s,r){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<XA.length;n++){const a=XA[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,l=s[i];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=gke(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(s),()=>r.variantChildren.delete(s)}addValue(s,r){const n=this.values.get(s);r!==n&&(n&&this.removeValue(s),this.bindToMotionValue(s,r),this.values.set(s,r),this.latestValues[s]=r.get())}removeValue(s){this.values.delete(s);const r=this.valueSubscriptions.get(s);r&&(r(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,r){if(this.props.values&&this.props.values[s])return this.props.values[s];let n=this.values.get(s);return n===void 0&&r!==void 0&&(n=Gu(r===null?void 0:r,{owner:this}),this.addValue(s,n)),n}readValue(s,r){var n;let a=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:(n=this.getBaseTargetFromProps(this.props,s))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,s,this.options);return a!=null&&(typeof a=="string"&&(W3(a)||L3(a))?a=parseFloat(a):!fke(a)&&Ki.test(r)&&(a=H3(s,r)),this.setBaseTarget(s,Or(a)?a.get():a)),Or(a)?a.get():a}setBaseTarget(s,r){this.baseTarget[s]=r}getBaseTarget(s){var r;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const l=pw(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);l&&(a=l[s])}if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!Or(i)?i:this.initialValues[s]!==void 0&&a===void 0?void 0:this.baseTarget[s]}on(s,r){return this.events[s]||(this.events[s]=new Tw),this.events[s].add(r)}notify(s,...r){this.events[s]&&this.events[s].notify(...r)}}class P$ extends jke{constructor(){super(...arguments),this.KeyframeResolver=Z3}sortInstanceNodePosition(s,r){return s.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(s,r){return s.style?s.style[r]:void 0}removeValueFromRenderState(s,{vars:r,style:n}){delete r[s],delete n[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Or(s)&&(this.childSubscription=s.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function vke(t){return window.getComputedStyle(t)}class yke extends P${constructor(){super(...arguments),this.type="html",this.renderInstance=x3}readValueFromInstance(s,r){if(io.has(r)){const n=Rw(r);return n&&n.default||0}else{const n=vke(s),a=(u3(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(s,{transformPagePoint:r}){return p$(s,r)}build(s,r,n){jw(s,r,n.transformTemplate)}scrapeMotionValuesFromProps(s,r,n){return Nw(s,r,n)}}class bke extends P${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xs}getBaseTargetFromProps(s,r){return s[r]}readValueFromInstance(s,r){if(io.has(r)){const n=Rw(r);return n&&n.default||0}return r=p3.has(r)?r:mw(r),s.getAttribute(r)}scrapeMotionValuesFromProps(s,r,n){return j3(s,r,n)}build(s,r,n){vw(s,r,this.isSVGTag,n.transformTemplate)}renderInstance(s,r,n,a){f3(s,r,n,a)}mount(s){this.isSVGTag=bw(s.tagName),super.mount(s)}}const Nke=(t,s)=>xw(t)?new bke(s):new yke(s,{allowProjection:t!==v.Fragment}),wke=W1e({...K2e,...mke,...tke,...hke},Nke),Oj=c1e(wke);function Ske({userId:t,organizationId:s}){const[r,n]=v.useState([]),[a,i]=v.useState(!1),[l,o]=v.useState(null);v.useEffect(()=>{(()=>{const f={id:Date.now(),achievementId:1,achievement:{name:"Welcome Aboard!",description:"You've successfully logged into HostPilotPro",points:10,badgeColor:"#3B82F6",category:"system"},isRead:!1,createdAt:new Date().toISOString()};r.length===0&&setTimeout(()=>{c(f)},3e3)})()},[t,s]);const c=x=>{o(x),i(!0),n(f=>[x,...f]),setTimeout(()=>{i(!1)},5e3)},d=x=>{n(f=>f.map(p=>p.id===x?{...p,isRead:!0}:p))},u=()=>{i(!1),l&&d(l.id)},m=()=>!a||!l?null:e.jsx(Ge,{open:a,onOpenChange:u,children:e.jsxs(We,{className:"sm:max-w-md",children:[e.jsx(Qe,{children:e.jsx(Ye,{className:"text-center",children:e.jsxs(Oj.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Oj.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 border-4 border-dashed border-yellow-400 rounded-full"}),e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl",style:{backgroundColor:l.achievement.badgeColor},children:e.jsx(Hn,{})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-600",children:"Achievement Unlocked!"}),e.jsx("h4",{className:"text-lg font-semibold",children:l.achievement.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.achievement.description}),e.jsxs(U,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:["+",l.achievement.points," points"]})]})]})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(M,{onClick:u,className:"w-full",children:[e.jsx(Qd,{className:"h-4 w-4 mr-2"}),"Awesome!"]})})]})}),h=()=>{const x=r.filter(f=>!f.isRead);return x.length===0||a?null:e.jsx(t1e,{children:x.slice(0,1).map(f=>e.jsx(Oj.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:"fixed bottom-4 right-4 z-50",children:e.jsx(D,{className:"w-80 border-l-4 border-l-yellow-400 shadow-lg",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:f.achievement.badgeColor},children:e.jsx(ps,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Zd,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"Achievement Unlocked!"})]}),e.jsx("h4",{className:"font-semibold text-sm",children:f.achievement.name}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:f.achievement.description}),e.jsxs(U,{variant:"outline",className:"mt-1 text-xs",children:["+",f.achievement.points," pts"]})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0",onClick:()=>d(f.id),children:e.jsx(Es,{className:"h-3 w-3"})})]})})})},f.id))})};return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(h,{})]})}function Cke(){const{user:t}=On();return t?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Hn,{className:"h-8 w-8 text-yellow-600"}),"Achievements"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your progress and unlock rewards as you use HostPilotPro"})]}),e.jsxs(U,{variant:"outline",className:"bg-gradient-to-r from-yellow-50 to-orange-50 text-yellow-700 border-yellow-200",children:[e.jsx(ps,{className:"h-3 w-3 mr-1"}),"Gamification System"]})]}),e.jsx(Ywe,{userId:t.id,organizationId:t.organizationId||"default-org"}),e.jsx(Ske,{userId:t.id,organizationId:t.organizationId||"default-org"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(B0,{className:"h-5 w-5 text-blue-600"}),"How It Works"]})}),e.jsxs(T,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Complete tasks, process bookings, and manage properties to earn points"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Level up by accumulating points and maintaining activity streaks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Unlock badges and achievements for reaching milestones"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Track your progress across different categories"})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-green-600"}),"Benefits"]})}),e.jsxs(T,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Visual progress tracking keeps you motivated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Recognition for your contributions and improvements"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Competitive elements to drive engagement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"â€¢ Personalized goals based on your role and activities"})]})]})]})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(D,{children:e.jsx(T,{className:"p-6 text-center",children:e.jsx("p",{children:"Please log in to view your achievements."})})})})}var A$="AlertDialog",[kke,GAe]=er(A$,[dO]),mi=dO(),T$=t=>{const{__scopeAlertDialog:s,...r}=t,n=mi(s);return e.jsx(kO,{...n,...r,modal:!0})};T$.displayName=A$;var Pke="AlertDialogTrigger",Ake=v.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=mi(r);return e.jsx(PO,{...a,...n,ref:s})});Ake.displayName=Pke;var Tke="AlertDialogPortal",D$=t=>{const{__scopeAlertDialog:s,...r}=t,n=mi(s);return e.jsx(AO,{...n,...r})};D$.displayName=Tke;var Dke="AlertDialogOverlay",O$=v.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=mi(r);return e.jsx(lb,{...a,...n,ref:s})});O$.displayName=Dke;var Ho="AlertDialogContent",[Oke,Eke]=kke(Ho),Mke=VT("AlertDialogContent"),E$=v.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:n,...a}=t,i=mi(r),l=v.useRef(null),o=ft(s,l),c=v.useRef(null);return e.jsx(Uz,{contentName:Ho,titleName:M$,docsSlug:"alert-dialog",children:e.jsx(Oke,{scope:r,cancelRef:c,children:e.jsxs(ob,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:$e(a.onOpenAutoFocus,d=>{d.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(Mke,{children:n}),e.jsx(_ke,{contentRef:l})]})})})});E$.displayName=Ho;var M$="AlertDialogTitle",R$=v.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=mi(r);return e.jsx(cb,{...a,...n,ref:s})});R$.displayName=M$;var _$="AlertDialogDescription",I$=v.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=mi(r);return e.jsx(db,{...a,...n,ref:s})});I$.displayName=_$;var Rke="AlertDialogAction",$$=v.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=mi(r);return e.jsx(ub,{...a,...n,ref:s})});$$.displayName=Rke;var F$="AlertDialogCancel",L$=v.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=Eke(F$,r),i=mi(r),l=ft(s,a);return e.jsx(ub,{...i,...n,ref:l})});L$.displayName=F$;var _ke=({contentRef:t})=>{const s=`\`${Ho}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ho}\` by passing a \`${_$}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ho}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},Ike=T$,$ke=D$,B$=O$,V$=E$,q$=$$,U$=L$,z$=R$,H$=I$;const Lw=Ike,Fke=$ke,K$=v.forwardRef(({className:t,...s},r)=>e.jsx(B$,{className:Be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));K$.displayName=B$.displayName;const Qf=v.forwardRef(({className:t,...s},r)=>e.jsxs(Fke,{children:[e.jsx(K$,{}),e.jsx(V$,{ref:r,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));Qf.displayName=V$.displayName;const Yf=({className:t,...s})=>e.jsx("div",{className:Be("flex flex-col space-y-2 text-center sm:text-left",t),...s});Yf.displayName="AlertDialogHeader";const Xf=({className:t,...s})=>e.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Xf.displayName="AlertDialogFooter";const Zf=v.forwardRef(({className:t,...s},r)=>e.jsx(z$,{ref:r,className:Be("text-lg font-semibold",t),...s}));Zf.displayName=z$.displayName;const Jf=v.forwardRef(({className:t,...s},r)=>e.jsx(H$,{ref:r,className:Be("text-sm text-muted-foreground",t),...s}));Jf.displayName=H$.displayName;const eg=v.forwardRef(({className:t,...s},r)=>e.jsx(q$,{ref:r,className:Be(su(),t),...s}));eg.displayName=q$.displayName;const tg=v.forwardRef(({className:t,...s},r)=>e.jsx(U$,{ref:r,className:Be(su({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));tg.displayName=U$.displayName;function Ej(){const{toast:t}=st(),[s,r]=v.useState("staff"),[n,a]=v.useState(!1),[i,l]=v.useState(!1),[o,c]=v.useState(!1),[d,u]=v.useState(!1),[m,h]=v.useState(null),[x,f]=v.useState({firstName:"",lastName:"",position:"",department:"",salary:"",email:"",phone:""}),[p,g]=v.useState({firstName:"",lastName:"",position:"",department:"",salary:""}),{data:y}=xe({queryKey:["/api/auth/user"]}),b=y?.organizationId||"default-org",{data:j=[],isLoading:w}=xe({queryKey:["/api/staff-members",b],queryFn:async()=>{const H=await fetch(`/api/staff-members?organizationId=${b}`);if(!H.ok){const _=await H.json();throw new Error(_.error||"Failed to fetch staff members")}return H.json()},enabled:!0});console.log("staffList:",j);const{data:N=[],isLoading:S,error:O}=xe({queryKey:["/api/payroll-records",b],queryFn:async()=>{const H=await fetch(`/api/payroll-records?organizationId=${b}`);if(!H.ok){const _=await H.json();throw new Error(_.error||"Failed to fetch payroll records")}return H.json()},enabled:s==="payroll"&&!0});console.log("payrollRecords:",N);const P=Te({mutationFn:async H=>Ne("POST","/api/staff-members",H),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member added successfully"}),a(!1),f({firstName:"",lastName:"",position:"",department:"",salary:"",email:"",phone:""})},onError:H=>{t({title:"Error",description:H.message||"Failed to add staff member",variant:"destructive"})}}),k=Te({mutationFn:async({id:H,data:_})=>Ne("PUT",`/api/staff-members/${H}`,_),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member updated successfully"}),c(!1),h(null)},onError:H=>{t({title:"Error",description:H.message||"Failed to update staff member",variant:"destructive"})}}),R=Te({mutationFn:async H=>Ne("DELETE",`/api/staff-members/${H}`),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member deleted successfully"}),u(!1),h(null)},onError:H=>{t({title:"Error",description:H.message||"Failed to delete staff member",variant:"destructive"})}}),F=H=>{if(!H&&H!==0)return"à¸¿0";const _=typeof H=="string"?parseFloat(H):H;return isNaN(_)?"à¸¿0":`à¸¿${_.toLocaleString()}`},I=H=>H==="active"||H==="Active"?"bg-green-100 text-green-800 px-2 py-1 rounded text-xs":"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",W=()=>{if(!x.firstName||!x.lastName||!x.position||!x.department||!x.salary){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const H=j.length>0?Math.max(...j.map(se=>se.id))+1:1,_=`EMP${String(H).padStart(3,"0")}`;P.mutate({organizationId:b,employeeId:_,firstName:x.firstName,lastName:x.lastName,position:x.position,department:x.department,monthlySalary:x.salary,salaryType:"monthly",startDate:new Date().toISOString().split("T")[0],status:"active",email:x.email||void 0,phoneNumber:x.phone||void 0})},E=H=>{h(H),l(!0)},B=H=>{h(H),g({firstName:H.firstName,lastName:H.lastName,position:H.position,department:H.department,salary:H.monthlySalary}),c(!0)},G=()=>{if(!m||!p.firstName||!p.lastName||!p.position||!p.department||!p.salary){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}k.mutate({id:m.id,data:{firstName:p.firstName,lastName:p.lastName,position:p.position,department:p.department,monthlySalary:p.salary}})},J=H=>{h(H),u(!0)},C=()=>{m&&R.mutate(m.id)},V=j.length,z=j.reduce((H,_)=>H+parseFloat(_.monthlySalary||"0"),0),le=V>0?Math.round(z/V):0;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Salaries & Wages"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Admin-only staff salary and wage management system"})]}),e.jsxs(M,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2","data-testid":"button-add-staff",children:[e.jsx(ut,{className:"h-4 w-4"}),"Add Staff Member"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-total-staff",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-total-staff",children:V})]}),e.jsx("div",{className:"text-blue-600",children:"ðŸ‘¥"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-monthly-payroll",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Monthly Payroll"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-monthly-payroll",children:F(z)})]}),e.jsx("div",{className:"text-green-600",children:"ðŸ’°"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-average-salary",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average Salary"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-average-salary",children:F(le)})]}),e.jsx("div",{className:"text-purple-600",children:"ðŸ“Š"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-pending-payments",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Payments"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-pending-payments",children:0})]}),e.jsx("div",{className:"text-orange-600",children:"â°"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"border-b",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="staff"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>r("staff"),"data-testid":"tab-staff-members",children:"Staff Members"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="payroll"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>r("payroll"),"data-testid":"tab-payroll-records",children:"Payroll Records"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="departments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>r("departments"),"data-testid":"tab-departments",children:"Departments"})]})}),e.jsxs("div",{className:"p-6",children:[s==="staff"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Staff Members"}),w?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Gt,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:'No staff members found. Click "Add Staff Member" to get started.'})}):j.map(H=>e.jsxs("tr",{"data-testid":`row-staff-${H.id}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:H.employeeId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:`${H.firstName} ${H.lastName}`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H.position}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(H.monthlySalary)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:I(H.status),children:H.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1",onClick:()=>E(H),"data-testid":`button-view-${H.id}`,title:"View Details",children:e.jsx(Bt,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-yellow-600 hover:text-yellow-900 p-1",onClick:()=>B(H),"data-testid":`button-edit-${H.id}`,title:"Edit Staff",children:e.jsx(eB,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 p-1",onClick:()=>J(H),"data-testid":`button-delete-${H.id}`,title:"Delete Staff",children:e.jsx(ir,{className:"h-4 w-4"})})]})})]},H.id))})]})})]}),s==="payroll"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payroll Records"}),S?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(Gt,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading payroll records..."})]}):O?e.jsx("div",{className:"text-center py-8 text-red-500",children:"Error loading payroll records. Please try again later."}):N.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No payroll records yet. Payroll records will appear here once staff payments are processed."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(H=>{const _=j.find(te=>te.id===H.staffMemberId),se=_?`${_.firstName} ${_.lastName} (${_.employeeId})`:`Staff ID: ${H.staffMemberId}`;return e.jsxs("tr",{"data-testid":`row-payroll-${H.id}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(H.payPeriodStart).toLocaleDateString()," ","-"," ",new Date(H.payPeriodEnd).toLocaleDateString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(H.grossPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(H.deductions)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:F(H.netPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:H.status==="paid"||H.status==="Paid"?"bg-green-100 text-green-800 px-2 py-1 rounded text-xs":H.status==="pending"||H.status==="Pending"?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs":"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs",children:H.status||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H.paymentDate?new Date(H.paymentDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:H.notes||"-"})]},H.id)})})]})})]}),s==="departments"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Department Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:["Operations","Maintenance","Customer Service","Finance","Management","IT"].map(H=>e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-lg mb-2",children:H}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Staff Count:"}),e.jsx("span",{className:"font-medium",children:j.filter(_=>_.department===H).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Salary:"}),e.jsx("span",{className:"font-medium",children:F(j.filter(_=>_.department===H).reduce((_,se)=>_+parseFloat(se.monthlySalary||"0"),0))})]})]})]},H))})]})]})]}),e.jsx(Ge,{open:n,onOpenChange:a,children:e.jsxs(We,{className:"sm:max-w-[500px]",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Add New Staff Member"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"add-first-name",children:"First Name *"}),e.jsx(Q,{id:"add-first-name",placeholder:"First name",value:x.firstName,onChange:H=>f({...x,firstName:H.target.value}),"data-testid":"input-add-first-name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"add-last-name",children:"Last Name *"}),e.jsx(Q,{id:"add-last-name",placeholder:"Last name",value:x.lastName,onChange:H=>f({...x,lastName:H.target.value}),"data-testid":"input-add-last-name"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"add-position",children:"Position *"}),e.jsx(Q,{id:"add-position",placeholder:"Enter position",value:x.position,onChange:H=>f({...x,position:H.target.value}),"data-testid":"input-add-position"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"add-department",children:"Department *"}),e.jsxs(ae,{value:x.department,onValueChange:H=>f({...x,department:H}),children:[e.jsx(re,{"data-testid":"select-add-department",children:e.jsx(ie,{placeholder:"Select department"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"Operations",children:"Operations"}),e.jsx(A,{value:"Maintenance",children:"Maintenance"}),e.jsx(A,{value:"Customer Service",children:"Customer Service"}),e.jsx(A,{value:"Finance",children:"Finance"}),e.jsx(A,{value:"Management",children:"Management"}),e.jsx(A,{value:"IT",children:"IT"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"add-salary",children:"Monthly Salary (à¸¿) *"}),e.jsx(Q,{id:"add-salary",type:"number",placeholder:"Enter salary amount",value:x.salary,onChange:H=>f({...x,salary:H.target.value}),"data-testid":"input-add-salary"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"add-email",children:"Email"}),e.jsx(Q,{id:"add-email",type:"email",placeholder:"email@example.com",value:x.email,onChange:H=>f({...x,email:H.target.value}),"data-testid":"input-add-email"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"add-phone",children:"Phone"}),e.jsx(Q,{id:"add-phone",type:"tel",placeholder:"+66 XXX XXX XXX",value:x.phone,onChange:H=>f({...x,phone:H.target.value}),"data-testid":"input-add-phone"})]})]}),e.jsxs(Zs,{children:[e.jsx(M,{variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-add",disabled:P.isPending,children:"Cancel"}),e.jsxs(M,{onClick:W,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-confirm-add",disabled:P.isPending,children:[P.isPending&&e.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Add Staff Member"]})]})]})}),e.jsx(Ge,{open:i,onOpenChange:l,children:e.jsxs(We,{className:"sm:max-w-[500px]",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Staff Member Details"})}),m&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Employee ID"}),e.jsx("p",{className:"font-medium","data-testid":"view-employee-id",children:m.employeeId})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium","data-testid":"view-status",children:m.status})]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Full Name"}),e.jsx("p",{className:"font-medium","data-testid":"view-name",children:`${m.firstName} ${m.lastName}`})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Position"}),e.jsx("p",{className:"font-medium","data-testid":"view-position",children:m.position})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Department"}),e.jsx("p",{className:"font-medium","data-testid":"view-department",children:m.department})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Monthly Salary"}),e.jsx("p",{className:"font-medium text-lg","data-testid":"view-salary",children:F(m.monthlySalary)})]}),m.email&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:m.email})]}),m.phone&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:m.phone})]})]}),e.jsx(Zs,{children:e.jsx(M,{onClick:()=>l(!1),"data-testid":"button-close-view",children:"Close"})})]})}),e.jsx(Ge,{open:o,onOpenChange:c,children:e.jsxs(We,{className:"sm:max-w-[500px]",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Edit Staff Member"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"edit-first-name",children:"First Name *"}),e.jsx(Q,{id:"edit-first-name",placeholder:"First name",value:p.firstName,onChange:H=>g({...p,firstName:H.target.value}),"data-testid":"input-edit-first-name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"edit-last-name",children:"Last Name *"}),e.jsx(Q,{id:"edit-last-name",placeholder:"Last name",value:p.lastName,onChange:H=>g({...p,lastName:H.target.value}),"data-testid":"input-edit-last-name"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"edit-position",children:"Position *"}),e.jsx(Q,{id:"edit-position",placeholder:"Enter position",value:p.position,onChange:H=>g({...p,position:H.target.value}),"data-testid":"input-edit-position"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"edit-department",children:"Department *"}),e.jsxs(ae,{value:p.department,onValueChange:H=>g({...p,department:H}),children:[e.jsx(re,{"data-testid":"select-edit-department",children:e.jsx(ie,{placeholder:"Select department"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"Operations",children:"Operations"}),e.jsx(A,{value:"Maintenance",children:"Maintenance"}),e.jsx(A,{value:"Customer Service",children:"Customer Service"}),e.jsx(A,{value:"Finance",children:"Finance"}),e.jsx(A,{value:"Management",children:"Management"}),e.jsx(A,{value:"IT",children:"IT"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{htmlFor:"edit-salary",children:"Monthly Salary (à¸¿) *"}),e.jsx(Q,{id:"edit-salary",type:"number",placeholder:"Enter salary amount",value:p.salary,onChange:H=>g({...p,salary:H.target.value}),"data-testid":"input-edit-salary"})]})]}),e.jsxs(Zs,{children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),"data-testid":"button-cancel-edit",disabled:k.isPending,children:"Cancel"}),e.jsxs(M,{onClick:G,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-save-edit",disabled:k.isPending,children:[k.isPending&&e.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})}),e.jsx(Lw,{open:d,onOpenChange:u,children:e.jsxs(Qf,{children:[e.jsxs(Yf,{children:[e.jsx(Zf,{children:"Are you sure?"}),e.jsxs(Jf,{children:['This will permanently delete the staff member "',m?.firstName," ",m?.lastName,'". This action cannot be undone.']})]}),e.jsxs(Xf,{children:[e.jsx(tg,{"data-testid":"button-cancel-delete",disabled:R.isPending,children:"Cancel"}),e.jsxs(eg,{onClick:C,className:"bg-red-600 hover:bg-red-700","data-testid":"button-confirm-delete",disabled:R.isPending,children:[R.isPending&&e.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete"]})]})]})})]})}const Lke=Yt({propertyId:ms(),applianceType:Pe().min(1,"Appliance type is required"),brand:Pe().optional(),model:Pe().optional(),serialNumber:Pe().optional(),installDate:Pe().optional(),warrantyExpiry:Pe().optional(),notes:Pe().optional()}),Bke=Yt({applianceId:ms(),issueReported:Pe().min(1,"Issue description is required"),fixDescription:Pe().optional(),technicianName:Pe().optional(),repairCost:ms().optional(),receiptUrl:Pe().optional(),repairedAt:Pe().optional()});function Vke(){const{formatWithConversion:t}=Rr(),[s,r]=v.useState(""),[n,a]=v.useState("all"),[i,l]=v.useState(!1),[o,c]=v.useState(!1),[d,u]=v.useState(null),[m,h]=v.useState(null),{toast:x}=st(),f=pt(),{data:p=[],isLoading:g}=xe({queryKey:["/api/properties"]}),{data:y=[],isLoading:b}=xe({queryKey:["/api/property-appliances"]}),{data:j=[],isLoading:w}=xe({queryKey:["/api/appliance-repairs"]}),{data:N}=xe({queryKey:["/api/property-appliances/analytics"]}),S=Wt({resolver:ts(Lke),defaultValues:{propertyId:0,applianceType:"",brand:"",model:"",serialNumber:"",installDate:"",warrantyExpiry:"",notes:""}}),O=Wt({resolver:ts(Bke),defaultValues:{applianceId:0,issueReported:"",fixDescription:"",technicianName:"",repairCost:0,receiptUrl:"",repairedAt:""}}),P=Te({mutationFn:X=>Ne("POST","/api/property-appliances",X),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/property-appliances"]}),f.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),l(!1),S.reset(),x({title:"Success",description:"Appliance added successfully"})},onError:()=>{x({title:"Error",description:"Failed to add appliance",variant:"destructive"})}}),k=Te({mutationFn:({id:X,data:ce})=>Ne("PUT",`/api/property-appliances/${X}`,ce),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/property-appliances"]}),f.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),l(!1),u(null),S.reset(),x({title:"Success",description:"Appliance updated successfully"})},onError:()=>{x({title:"Error",description:"Failed to update appliance",variant:"destructive"})}}),R=Te({mutationFn:X=>Ne("DELETE",`/api/property-appliances/${X}`),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/property-appliances"]}),f.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),x({title:"Success",description:"Appliance deleted successfully"})},onError:()=>{x({title:"Error",description:"Failed to delete appliance",variant:"destructive"})}}),F=Te({mutationFn:X=>Ne("POST","/api/appliance-repairs",X),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/appliance-repairs"]}),c(!1),O.reset(),x({title:"Success",description:"Repair record added successfully"})},onError:()=>{x({title:"Error",description:"Failed to add repair record",variant:"destructive"})}}),I=Te({mutationFn:({id:X,data:ce})=>Ne("PUT",`/api/appliance-repairs/${X}`,ce),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/appliance-repairs"]}),c(!1),h(null),O.reset(),x({title:"Success",description:"Repair record updated successfully"})},onError:()=>{x({title:"Error",description:"Failed to update repair record",variant:"destructive"})}}),W=Te({mutationFn:X=>Ne("DELETE",`/api/appliance-repairs/${X}`),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/appliance-repairs"]}),x({title:"Success",description:"Repair record deleted successfully"})},onError:()=>{x({title:"Error",description:"Failed to delete repair record",variant:"destructive"})}}),E=()=>{u(null),S.reset(),l(!0)},B=X=>{u(X),S.reset({propertyId:X.propertyId,applianceType:X.applianceType,brand:X.brand||"",model:X.model||"",serialNumber:X.serialNumber||"",installDate:X.installDate||"",warrantyExpiry:X.warrantyExpiry||"",notes:X.notes||""}),l(!0)},G=X=>{confirm("Are you sure you want to delete this appliance?")&&R.mutate(X)},J=()=>{h(null),O.reset(),c(!0)},C=X=>{h(X),O.reset({applianceId:X.applianceId,issueReported:X.issueReported,fixDescription:X.fixDescription||"",technicianName:X.technicianName||"",repairCost:parseFloat(X.repairCost||"0"),receiptUrl:X.receiptUrl||"",repairedAt:X.repairedAt||""}),c(!0)},V=X=>{confirm("Are you sure you want to delete this repair record?")&&W.mutate(X)},z=X=>{d?k.mutate({id:d.id,data:X}):P.mutate(X)},le=X=>{m?I.mutate({id:m.id,data:X}):F.mutate(X)};if(g||b||w)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})});const Ce=y.filter(X=>{const ce=X.brand?.toLowerCase().includes(s.toLowerCase())||X.model?.toLowerCase().includes(s.toLowerCase())||X.applianceType?.toLowerCase().includes(s.toLowerCase()),Y=n==="all"||X.propertyId?.toString()===n;return ce&&Y}),H=X=>p.find(Y=>Y.id===X)?.name||"Unknown Property",_=X=>{const ce=y.find(Y=>Y.id===X);return ce?`${ce.applianceType} - ${ce.brand} ${ce.model}`:"Unknown Appliance"},se=X=>{if(!X)return null;const ce=new Date,he=new Date(X).getTime()-ce.getTime(),Fe=Math.ceil(he/(1e3*60*60*24));return Fe<0?{status:"expired",days:Math.abs(Fe)}:Fe<=30?{status:"expiring",days:Fe}:{status:"active",days:Fe}},te=y.length,we=j.reduce((X,ce)=>X+(ce.repairCost||0),0),ve=y.filter(X=>{const ce=se(X.warrantyExpiry);return ce&&(ce.status==="expiring"||ce.status==="expired")}).length;return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Property Appliances Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track appliances, warranties, and repair history"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:E,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Appliance"]}),e.jsxs(M,{onClick:J,variant:"outline",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Add Repair"]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"appliances",children:"Appliances"}),e.jsx(de,{value:"repairs",children:"Repair History"}),e.jsx(de,{value:"analytics",children:"Analytics"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Appliances"}),e.jsx(Ms,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:te}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all properties"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Repair Costs"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t(we)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time repair expenses"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Warranty Issues"}),e.jsx(St,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ve}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expired or expiring soon"})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Recent Activity"}),e.jsx(Ee,{children:"Latest appliance installations and repairs"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:j.slice(0,3).map(X=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(Ms,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_(X.applianceId)}),e.jsx("p",{className:"text-sm text-gray-600",children:X.issueReported})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:t(X.repairCost)}),e.jsx("p",{className:"text-sm text-gray-600",children:X.repairedAt})]})]},X.id))})})]})]}),e.jsx(me,{value:"appliances",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Appliances"}),e.jsx(Ee,{children:"Manage property appliances and warranties"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(Q,{placeholder:"Search appliances...",value:s,onChange:X=>r(X.target.value),className:"pl-10"})]}),e.jsxs("select",{value:n,onChange:X=>a(X.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Properties"}),p.map(X=>e.jsx("option",{value:X.id.toString(),children:X.name},X.id))]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Appliance"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Brand & Model"}),e.jsx(Oe,{children:"Warranty Status"}),e.jsx(Oe,{children:"Install Date"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:Ce.length===0?e.jsx(Nt,{children:e.jsx(De,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Ms,{className:"mx-auto h-12 w-12 mb-4 text-gray-300"}),e.jsx("p",{children:"No appliances found"}),e.jsx("p",{className:"text-sm",children:"Add appliances to start tracking them"})]})})}):Ce.map(X=>{const ce=se(X.warrantyExpiry);return e.jsxs(Nt,{children:[e.jsx(De,{className:"font-medium",children:X.applianceType}),e.jsx(De,{children:H(X.propertyId)}),e.jsx(De,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:X.brand}),e.jsx("p",{className:"text-sm text-gray-600",children:X.model})]})}),e.jsx(De,{children:ce?e.jsx(U,{variant:ce.status==="expired"?"destructive":ce.status==="expiring"?"secondary":"default",children:ce.status==="expired"?"Expired":ce.status==="expiring"?`Expires in ${ce.days} days`:"Active"}):e.jsx("span",{className:"text-gray-400",children:"No warranty"})}),e.jsx(De,{children:X.installDate||"N/A"}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>B(X),children:e.jsx(Nr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>G(X.id),className:"text-red-600 hover:text-red-700",children:e.jsx(ir,{className:"w-4 h-4"})})]})})]},X.id)})})]})})]})]})}),e.jsx(me,{value:"repairs",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Repair History"}),e.jsx(Ee,{children:"Track maintenance and repair records"})]}),e.jsx(T,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Appliance"}),e.jsx(Oe,{children:"Issue"}),e.jsx(Oe,{children:"Technician"}),e.jsx(Oe,{children:"Cost"}),e.jsx(Oe,{children:"Date"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:j.length===0?e.jsx(Nt,{children:e.jsx(De,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Xe,{className:"mx-auto h-12 w-12 mb-4 text-gray-300"}),e.jsx("p",{children:"No repair records found"}),e.jsx("p",{className:"text-sm",children:"Repair history will appear here"})]})})}):j.map(X=>e.jsxs(Nt,{children:[e.jsx(De,{className:"font-medium",children:_(X.applianceId)}),e.jsx(De,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:X.issueReported}),X.fixDescription&&e.jsx("p",{className:"text-sm text-gray-600",children:X.fixDescription})]})}),e.jsx(De,{children:X.technicianName||"N/A"}),e.jsx(De,{className:"font-medium",children:X.repairCost?t(X.repairCost):"N/A"}),e.jsx(De,{children:X.repairedAt||"N/A"}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>C(X),children:e.jsx(Nr,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>V(X.id),className:"text-red-600 hover:text-red-700",children:e.jsx(ir,{className:"w-4 h-4"})})]})})]},X.id))})]})})})]})}),e.jsx(me,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Appliance Types"}),e.jsx(Ee,{children:"Distribution by appliance type"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:Array.from(new Set(y.map(X=>X.applianceType))).map(X=>{const ce=y.filter(he=>he.applianceType===X).length,Y=ce/y.length*100;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:X}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Y}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-8",children:ce})]})]},X)})})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Repair Costs by Property"}),e.jsx(Ee,{children:"Total repair expenses per property"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:p.map(X=>{const ce=y.filter(Fe=>Fe.propertyId===X.id),he=j.filter(Fe=>ce.some(Ve=>Ve.id===Fe.applianceId)).reduce((Fe,Ve)=>Fe+(Ve.repairCost||0),0);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:X.name}),e.jsx("span",{className:"text-sm font-medium",children:t(he)})]},X.id)})})})]})]})})]}),e.jsx(Ge,{open:i,onOpenChange:l,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:d?"Edit Appliance":"Add New Appliance"})}),e.jsx(Qt,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit(z),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:S.control,name:"propertyId",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property"}),e.jsxs(ae,{onValueChange:ce=>X.onChange(parseInt(ce)),value:X.value?.toString(),children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})})}),e.jsx(ne,{children:p.map(ce=>e.jsx(A,{value:ce.id.toString(),children:ce.name},ce.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:S.control,name:"applianceType",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Appliance Type"}),e.jsx(fe,{children:e.jsx(Q,{...X,placeholder:"e.g., Air Conditioner"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:S.control,name:"brand",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Brand"}),e.jsx(fe,{children:e.jsx(Q,{...X,placeholder:"e.g., Daikin"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:S.control,name:"model",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Model"}),e.jsx(fe,{children:e.jsx(Q,{...X,placeholder:"e.g., FTXS25K"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:S.control,name:"serialNumber",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Serial Number"}),e.jsx(fe,{children:e.jsx(Q,{...X,placeholder:"e.g., DAI-2024-001"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:S.control,name:"installDate",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Install Date"}),e.jsx(fe,{children:e.jsx(Q,{...X,type:"date"})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:S.control,name:"warrantyExpiry",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Warranty Expiry"}),e.jsx(fe,{children:e.jsx(Q,{...X,type:"date"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:S.control,name:"notes",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Notes"}),e.jsx(fe,{children:e.jsx(ct,{...X,placeholder:"Additional notes..."})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:P.isPending||k.isPending,children:P.isPending||k.isPending?"Saving...":d?"Update Appliance":"Add Appliance"})]})]})})]})}),e.jsx(Ge,{open:o,onOpenChange:c,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:m?"Edit Repair Record":"Add New Repair Record"})}),e.jsx(Qt,{...O,children:e.jsxs("form",{onSubmit:O.handleSubmit(le),className:"space-y-4",children:[e.jsx(ge,{control:O.control,name:"applianceId",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Appliance"}),e.jsxs(ae,{onValueChange:ce=>X.onChange(parseInt(ce)),value:X.value?.toString(),children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select appliance"})})}),e.jsx(ne,{children:y.map(ce=>e.jsxs(A,{value:ce.id.toString(),children:[ce.applianceType," - ",ce.brand," ",ce.model," (",H(ce.propertyId),")"]},ce.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:O.control,name:"issueReported",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Issue Reported"}),e.jsx(fe,{children:e.jsx(ct,{...X,placeholder:"Describe the issue..."})}),e.jsx(be,{})]})}),e.jsx(ge,{control:O.control,name:"fixDescription",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Fix Description"}),e.jsx(fe,{children:e.jsx(ct,{...X,placeholder:"Describe what was done to fix the issue..."})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:O.control,name:"technicianName",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Technician Name"}),e.jsx(fe,{children:e.jsx(Q,{...X,placeholder:"e.g., Somchai Repair Service"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:O.control,name:"repairCost",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Repair Cost (THB)"}),e.jsx(fe,{children:e.jsx(Q,{...X,type:"number",placeholder:"0"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:O.control,name:"receiptUrl",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Receipt URL"}),e.jsx(fe,{children:e.jsx(Q,{...X,placeholder:"Link to receipt/invoice"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:O.control,name:"repairedAt",render:({field:X})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Repair Date"}),e.jsx(fe,{children:e.jsx(Q,{...X,type:"date"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:F.isPending||I.isPending,children:F.isPending||I.isPending?"Saving...":m?"Update Repair":"Add Repair"})]})]})})]})})]})}function qke(){const[t,s]=v.useState(""),[r,n]=v.useState("all"),[a,i]=v.useState("all"),{data:l=[],isLoading:o}=xe({queryKey:["/api/tasks"],select:h=>h.map(x=>({id:x.id,title:x.title||"Untitled Task",description:x.description||"No description",status:x.status||"pending",priority:x.priority||"medium",assignedTo:x.assignedTo||"Unassigned",propertyName:x.propertyName||"Unknown Property",dueDate:x.dueDate||new Date().toISOString(),createdAt:x.createdAt||new Date().toISOString()}))}),c=h=>{switch(h){case"completed":return e.jsx(Ie,{className:"w-4 h-4 text-green-500"});case"in-progress":return e.jsx(tt,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(It,{className:"w-4 h-4 text-yellow-500"})}},d=h=>{switch(h){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=l.filter(h=>{const x=h.title.toLowerCase().includes(t.toLowerCase())||h.description.toLowerCase().includes(t.toLowerCase())||h.propertyName.toLowerCase().includes(t.toLowerCase()),f=r==="all"||h.status===r,p=a==="all"||h.priority===a;return x&&f&&p}),m={total:l.length,pending:l.filter(h=>h.status==="pending").length,inProgress:l.filter(h=>h.status==="in-progress").length,completed:l.filter(h=>h.status==="completed").length};return o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((h,x)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},x))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Task Overview"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and monitor all property tasks"})]}),e.jsxs(M,{children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Schedule Task"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:m.total})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(It,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(tt,{className:"w-6 h-6 text-yellow-600"})})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.inProgress})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(tt,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.completed})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ie,{className:"w-6 h-6 text-green-600"})})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx(Q,{placeholder:"Search tasks...",value:t,onChange:h=>s(h.target.value),className:"pl-10"})]})}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"w-40",children:e.jsx(ie,{placeholder:"Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"in-progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"})]})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{className:"w-40",children:e.jsx(ie,{placeholder:"Priority"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Priority"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"low",children:"Low"})]})]})]})})}),e.jsx("div",{className:"grid gap-4",children:u.length===0?e.jsx(D,{children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx(It,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]})}):u.map(h=>e.jsx(D,{className:"hover:shadow-md transition-shadow",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c(h.status),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:h.title}),e.jsx(U,{className:`${d(h.priority)} border`,children:h.priority})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:h.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"w-4 h-4"}),h.propertyName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"w-4 h-4"}),h.assignedTo]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Due: ",new Date(h.dueDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(M,{variant:"outline",size:"sm",children:"View"})]})]})})},h.id))})]})}function Uke(){const[t,s]=v.useState(new Date().toISOString().split("T")[0]),{data:r=[],isLoading:n}=xe({queryKey:["/api/tasks"],select:x=>x.map(f=>({id:f.id,title:f.title||"Untitled Task",status:f.status||"pending",priority:f.priority||"medium",assignedTo:f.assignedTo||"Unassigned",propertyName:f.propertyName||"Unknown Property",dueDate:f.dueDate||new Date().toISOString(),type:f.type||"maintenance"}))}),{data:a=[],isLoading:i}=xe({queryKey:["/api/bookings"],select:x=>x.map(f=>({id:f.id,guestName:f.guestName||"Unknown Guest",propertyName:f.propertyName||"Unknown Property",checkIn:f.checkIn||new Date().toISOString(),checkOut:f.checkOut||new Date().toISOString(),status:f.status||"confirmed",totalAmount:f.totalAmount||0}))}),{data:l=[],isLoading:o}=xe({queryKey:["/api/properties"],select:x=>x.map(f=>({id:f.id,name:f.name||"Unnamed Property",status:f.status||"active",occupancyRate:Math.floor(Math.random()*100),revenue:Math.floor(Math.random()*5e4)+1e4,maintenanceIssues:Math.floor(Math.random()*5)}))}),c=r.filter(x=>{const f=new Date(x.dueDate).toDateString(),p=new Date().toDateString();return f===p}),d=a.filter(x=>{const f=new Date(x.checkIn).toDateString(),p=new Date().toDateString();return f===p}),u=a.filter(x=>{const f=new Date(x.checkOut).toDateString(),p=new Date().toDateString();return f===p}),m={totalProperties:l.length,activeProperties:l.filter(x=>x.status==="active").length,todayTasks:c.length,completedTasks:c.filter(x=>x.status==="completed").length,checkInsToday:d.length,checkOutsToday:u.length,averageOccupancy:l.length?Math.round(l.reduce((x,f)=>x+f.occupancyRate,0)/l.length):0,dailyRevenue:a.reduce((x,f)=>x+(f.totalAmount||0),0)};return n||i||o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(8)].map((x,f)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},f))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Daily Operations"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Today's overview - ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Alerts"]}),e.jsxs(M,{children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),"Live Status"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Properties Active"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.activeProperties,"/",m.totalProperties]})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(At,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Tasks"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.completedTasks,"/",m.todayTasks]})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Ie,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check-ins / Outs"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.checkInsToday," /"," ",m.checkOutsToday]})]}),e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(ot,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Occupancy"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.averageOccupancy,"%"]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Ot,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsxs(xt,{defaultValue:"tasks",className:"space-y-4",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"tasks",children:"Today's Tasks"}),e.jsx(de,{value:"bookings",children:"Guest Activities"}),e.jsx(de,{value:"properties",children:"Property Status"}),e.jsx(de,{value:"alerts",children:"Alerts & Issues"})]}),e.jsx(me,{value:"tasks",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-5 h-5"}),"Today's Tasks (",c.length,")"]})}),e.jsx(T,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ie,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"All tasks completed!"}),e.jsx("p",{className:"text-gray-600",children:"No pending tasks for today."})]}):e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${x.status==="completed"?"bg-green-500":x.status==="in-progress"?"bg-blue-500":"bg-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.propertyName," â€¢ ",x.assignedTo]})]})]}),e.jsx(U,{variant:x.priority==="high"?"destructive":"secondary",children:x.priority})]},x.id))})})]})}),e.jsx(me,{value:"bookings",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"text-green-600",children:["Today's Check-ins (",d.length,")"]})}),e.jsx(T,{children:d.length===0?e.jsx("p",{className:"text-gray-600",children:"No check-ins scheduled today"}):e.jsx("div",{className:"space-y-2",children:d.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.propertyName})]}),e.jsx(U,{variant:"outline",className:"text-green-600",children:new Date(x.checkIn).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.id))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"text-blue-600",children:["Today's Check-outs (",u.length,")"]})}),e.jsx(T,{children:u.length===0?e.jsx("p",{className:"text-gray-600",children:"No check-outs scheduled today"}):e.jsx("div",{className:"space-y-2",children:u.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.propertyName})]}),e.jsx(U,{variant:"outline",className:"text-blue-600",children:new Date(x.checkOut).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.id))})})]})]})}),e.jsx(me,{value:"properties",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:l.map(x=>e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg",children:x.name}),e.jsx("div",{className:"mt-2 space-y-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Occupancy:"}),e.jsx(dn,{value:x.occupancyRate,className:"w-20"}),e.jsxs("span",{className:"text-sm font-medium",children:[x.occupancyRate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm",children:["à¸¿",x.revenue.toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[x.maintenanceIssues>0&&e.jsxs(U,{variant:"destructive",children:[x.maintenanceIssues," Issues"]}),e.jsx(U,{variant:x.status==="active"?"default":"secondary",children:x.status})]})]})})},x.id))})}),e.jsx(me,{value:"alerts",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2 text-orange-600",children:[e.jsx(St,{className:"w-5 h-5"}),"Active Alerts & Issues"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-red-200 bg-red-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-red-800",children:"High Priority Task Overdue"}),e.jsx("p",{className:"text-sm text-red-600",children:"Pool maintenance at Villa Samui Breeze is 2 days overdue"})]}),e.jsx(U,{variant:"destructive",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-yellow-200 bg-yellow-50 rounded-lg",children:[e.jsx(tt,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Upcoming Maintenance Due"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"AC service required at Villa Ocean View in 3 days"})]}),e.jsx(U,{variant:"outline",className:"text-yellow-600",children:"Warning"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-blue-200 bg-blue-50 rounded-lg",children:[e.jsx(ot,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Guest Check-in Reminder"}),e.jsx("p",{className:"text-sm text-blue-600",children:"3 guests checking in today - ensure properties are ready"})]}),e.jsx(U,{variant:"outline",className:"text-blue-600",children:"Info"})]})]})})]})})]})]})}function zke(){const[t,s]=v.useState("overview"),[r,n]=v.useState(""),a=[{id:1,name:"Appliance Repair Overdue",description:"Alert when appliance repairs are overdue by more than 24 hours",triggerType:"appliance_repair",alertLevel:"warning",isActive:!0,createdAt:new Date().toISOString()},{id:2,name:"Critical System Health",description:"Alert for critical system health issues requiring immediate attention",triggerType:"system_health",alertLevel:"critical",isActive:!0,createdAt:new Date().toISOString()},{id:3,name:"Booking Payment Overdue",description:"Alert when guest payment is overdue",triggerType:"booking_overdue",alertLevel:"warning",isActive:!1,createdAt:new Date().toISOString()}],i=[],l={totalAlerts:47,resolutionRate:87,pendingAlerts:i.filter(m=>m.status==="pending").length,criticalAlerts:i.filter(m=>m.alertLevel==="critical"&&m.status==="pending").length},o=m=>m==="pending"?e.jsx(U,{className:"bg-yellow-500",children:"Pending"}):m==="acknowledged"?e.jsx(U,{className:"bg-blue-500",children:"Acknowledged"}):m==="resolved"?e.jsx(U,{className:"bg-green-500",children:"Resolved"}):e.jsx(U,{className:"bg-gray-500",children:"Dismissed"}),c=m=>m==="critical"?e.jsx(U,{variant:"destructive",children:"Critical"}):e.jsx(U,{variant:"secondary",children:"Warning"}),d=m=>m==="appliance_repair"?e.jsx(It,{className:"h-4 w-4"}):m==="booking_overdue"?e.jsx(tt,{className:"h-4 w-4"}):m==="property_maintenance"?e.jsx(Kt,{className:"h-4 w-4"}):m==="utility_bill"?e.jsx(Ot,{className:"h-4 w-4"}):m==="staff_task"?e.jsx(ot,{className:"h-4 w-4"}):m==="guest_complaint"?e.jsx(St,{className:"h-4 w-4"}):m==="system_health"?e.jsx(Is,{className:"h-4 w-4"}):e.jsx(It,{className:"h-4 w-4"}),u=m=>new Date(m).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Alert Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and manage system alerts and notifications"})]}),e.jsxs(xt,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"rules",children:"Alert Rules"}),e.jsx(de,{value:"logs",children:"Alert Logs"}),e.jsx(de,{value:"settings",children:"Settings"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Total Alerts"})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"All time"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Pending Alerts"})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.pendingAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"Requires attention"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Critical Alerts"})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.criticalAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"Urgent action needed"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm font-medium text-gray-600",children:"Resolution Rate"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[l.resolutionRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Last 30 days"})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Recent Alerts"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:i.slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:d(m.triggerType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.message}),e.jsx("p",{className:"text-sm text-gray-500",children:m.details})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[c(m.alertLevel),o(m.status)]}),e.jsx("div",{className:"text-sm text-gray-500",children:u(m.createdAt)})]},m.id))})})]})]}),e.jsxs(me,{value:"rules",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Rules"}),e.jsxs(M,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Name"}),e.jsx(Oe,{children:"Trigger Type"}),e.jsx(Oe,{children:"Alert Level"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:a.map(m=>e.jsxs(Nt,{children:[e.jsx(De,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.name}),e.jsx("div",{className:"text-sm text-gray-500",children:m.description})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[d(m.triggerType),e.jsx("span",{className:"capitalize",children:m.triggerType.replace("_"," ")})]})}),e.jsx(De,{children:c(m.alertLevel)}),e.jsx(De,{children:e.jsx(U,{variant:m.isActive?"default":"secondary",children:m.isActive?"Active":"Inactive"})}),e.jsx(De,{children:u(m.createdAt)}),e.jsx(De,{children:e.jsx(M,{variant:"outline",size:"sm",children:"Edit"})})]},m.id))})]})})})]}),e.jsxs(me,{value:"logs",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Logs"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(Q,{placeholder:"Search alerts...",value:r,onChange:m=>n(m.target.value),className:"pl-10 w-64"})]})})]}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Alert"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Level"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:i.map(m=>e.jsxs(Nt,{children:[e.jsx(De,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.message}),e.jsx("div",{className:"text-sm text-gray-500",children:m.details})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[d(m.triggerType),e.jsx("span",{className:"capitalize",children:m.triggerType.replace("_"," ")})]})}),e.jsx(De,{children:c(m.alertLevel)}),e.jsx(De,{children:o(m.status)}),e.jsx(De,{children:u(m.createdAt)}),e.jsx(De,{children:e.jsxs("div",{className:"flex space-x-2",children:[m.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",size:"sm",children:"Acknowledge"}),e.jsx(M,{variant:"outline",size:"sm",children:"Resolve"})]}),m.status==="acknowledged"&&e.jsx(M,{variant:"outline",size:"sm",children:"Resolve"})]})})]},m.id))})]})})})]}),e.jsxs(me,{value:"settings",className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Notification Preferences"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Email Notifications"}),e.jsx(U,{variant:"default",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"SMS Alerts"}),e.jsx(U,{variant:"secondary",children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Push Notifications"}),e.jsx(U,{variant:"default",children:"Enabled"})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Alert Thresholds"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Critical Alert Threshold"}),e.jsx("span",{className:"font-medium",children:"Immediate"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warning Alert Threshold"}),e.jsx("span",{className:"font-medium",children:"5 minutes"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-resolve After"}),e.jsx("span",{className:"font-medium",children:"24 hours"})]})]})]})]})]})]})]})})}function G$(){const{user:t}=On(),[s,r]=v.useState("overview"),{data:n=[],isLoading:a}=xe({queryKey:["/api/properties"],staleTime:10*60*1e3}),{data:i=[],isLoading:l}=xe({queryKey:["/api/tasks"],staleTime:5*60*1e3}),{data:o=[],isLoading:c}=xe({queryKey:["/api/bookings"],staleTime:10*60*1e3}),{data:d=[],isLoading:u}=xe({queryKey:["/api/finance"],staleTime:10*60*1e3}),m=a||l||c||u,h=Array.isArray(i)?i.slice(0,5):[],x=Array.isArray(o)?o.slice(0,5):[],f=Array.isArray(d)?d.slice(0,5):[],p=new Map;Array.isArray(n)&&n.forEach(b=>{p.set(b.id,b.name)});const g=b=>{if(b==null)return"à¸¿0";const j=typeof b=="string"?parseFloat(b):b;return`à¸¿${(Number.isFinite(j)&&j>0?j:0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})}`},y=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return m?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading dashboard..."})]})}):e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(zi,{title:"Enhanced Admin Dashboard"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-slate-200/60",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-5xl font-extrabold text-slate-900 dark:text-slate-100 tracking-tight",children:"Enhanced Admin Dashboard"}),e.jsxs("p",{className:"text-slate-400 dark:text-slate-500 mt-3 text-lg font-medium",children:["Welcome back, ",t?.firstName||t?.email]})]}),e.jsxs(M,{onClick:()=>window.location.reload(),className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 px-6 py-3",children:[e.jsx(dg,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-10",children:[e.jsx(D,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-emerald-100/50 hover:border-emerald-200 bg-gradient-to-br from-emerald-50/30 to-white cursor-pointer",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Properties"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:n.length})]}),e.jsx("div",{className:"p-3 bg-emerald-100/80 rounded-xl",children:e.jsx(At,{className:"h-8 w-8 text-emerald-600"})})]})})}),e.jsx(D,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-teal-100/50 hover:border-teal-200 bg-gradient-to-br from-teal-50/30 to-white cursor-pointer",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Active Tasks"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:i.length})]}),e.jsx("div",{className:"p-3 bg-teal-100/80 rounded-xl",children:e.jsx(Md,{className:"h-8 w-8 text-teal-600"})})]})})}),e.jsx(D,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-cyan-100/50 hover:border-cyan-200 bg-gradient-to-br from-cyan-50/30 to-white cursor-pointer",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Bookings"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:o.length})]}),e.jsx("div",{className:"p-3 bg-cyan-100/80 rounded-xl",children:e.jsx(Xe,{className:"h-8 w-8 text-cyan-600"})})]})})}),e.jsx(D,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-green-100/50 hover:border-green-200 bg-gradient-to-br from-green-50/30 to-white cursor-pointer",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Finances"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:d.length})]}),e.jsx("div",{className:"p-3 bg-green-100/80 rounded-xl",children:e.jsx(Ze,{className:"h-8 w-8 text-green-600"})})]})})})]}),e.jsxs(xt,{value:s,onValueChange:r,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4 bg-slate-100/60 rounded-xl p-1 shadow-inner",children:[e.jsx(de,{value:"overview",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Overview"}),e.jsx(de,{value:"tasks",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Tasks"}),e.jsx(de,{value:"bookings",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Bookings"}),e.jsx(de,{value:"finances",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Finances"})]}),e.jsx(me,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(D,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-emerald-100/50",children:[e.jsx($,{className:"pb-4 px-6 pt-6",children:e.jsxs(L,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-emerald-100/80 rounded-lg",children:e.jsx(At,{className:"h-6 w-6 text-emerald-600"})}),"Properties (",n.length,")"]})}),e.jsxs(T,{className:"space-y-4 px-6 pb-6",children:[n.slice(0,4).map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-emerald-50/50 to-slate-50/80 rounded-lg border border-emerald-100/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:b.name}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[b.bedrooms," BR"]})]}),e.jsx(U,{variant:b.status==="active"?"default":"secondary",className:b.status==="active"?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600 border-slate-200",children:b.status})]},b.id)),n.length>4&&e.jsxs("p",{className:"text-sm text-center text-slate-500 pt-2 font-medium",children:["+",n.length-4," more properties"]})]})]}),e.jsxs(D,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-teal-100/50",children:[e.jsx($,{className:"pb-4 px-6 pt-6",children:e.jsxs(L,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-teal-100/80 rounded-lg",children:e.jsx(Md,{className:"h-6 w-6 text-teal-600"})}),"Recent Tasks"]})}),e.jsx(T,{className:"space-y-4 px-6 pb-6",children:h.map(b=>e.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-teal-50/50 to-slate-50/80 rounded-lg border border-teal-100/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:b.title}),e.jsx(M,{size:"sm",className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg transition-all duration-300 hover:scale-110 p-2",children:e.jsx(dg,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{variant:"outline",className:"text-xs",children:b.status}),e.jsx(U,{variant:"outline",className:"text-xs",children:b.priority})]}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:["Due: ",y(b.dueDate)]})]},b.id))})]}),e.jsxs(D,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-cyan-100/50",children:[e.jsx($,{className:"pb-4 px-6 pt-6",children:e.jsxs(L,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-cyan-100/80 rounded-lg",children:e.jsx(Xe,{className:"h-6 w-6 text-cyan-600"})}),"Recent Bookings"]})}),e.jsx(T,{className:"space-y-4 px-6 pb-6",children:x.map(b=>{const j=p.get(b.propertyId)||`Property #${b.propertyId}`,w=b.totalAmount||b.guestTotalPrice||b.platformPayout||b.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-cyan-50/50 to-slate-50/80 rounded-lg border border-cyan-100/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:b.guestName}),e.jsx("p",{className:"text-xs text-cyan-600 font-semibold",children:j}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[y(b.checkInDate||b.checkIn)," - ",y(b.checkOutDate||b.checkOut)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-sm text-slate-800",children:g(w)}),e.jsx(U,{variant:b.status==="confirmed"?"default":"secondary",className:b.status==="confirmed"?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600 border-slate-200",children:b.status})]})]},b.id)})})]})]})}),e.jsx(me,{value:"tasks",className:"space-y-6",children:e.jsxs(D,{className:"rounded-xl shadow-lg border-2 border-teal-100/50",children:[e.jsx($,{className:"pb-4 px-6 pt-6",children:e.jsxs(L,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-100/80 rounded-lg",children:e.jsx(Md,{className:"h-6 w-6 text-teal-600"})}),"All Tasks"]})}),e.jsx(T,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:Array.isArray(i)&&i.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-teal-50/50 to-slate-50/80 rounded-xl border-2 border-teal-100/30 hover:border-teal-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b.title}),e.jsx(U,{variant:"outline",className:"bg-emerald-100/80 text-emerald-700 border-emerald-200 font-semibold",children:b.type})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(U,{variant:"outline",className:"text-xs",children:b.status}),e.jsx(U,{variant:"outline",className:"text-xs",children:b.priority})]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Assigned to: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:b.assignedTo})," | Due: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:y(b.dueDate)})]})]}),e.jsx(M,{size:"sm",className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg transition-all duration-300 hover:scale-110 p-3",children:e.jsx(dg,{className:"h-5 w-5"})})]},b.id))})})]})}),e.jsx(me,{value:"bookings",className:"space-y-6",children:e.jsxs(D,{className:"rounded-xl shadow-lg border-2 border-cyan-100/50",children:[e.jsx($,{className:"pb-4 px-6 pt-6",children:e.jsxs(L,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-100/80 rounded-lg",children:e.jsx(Xe,{className:"h-6 w-6 text-cyan-600"})}),"All Bookings"]})}),e.jsx(T,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:Array.isArray(o)&&o.map(b=>{const j=p.get(b.propertyId)||`Property #${b.propertyId}`,w=b.totalAmount||b.guestTotalPrice||b.platformPayout||b.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-cyan-50/50 to-slate-50/80 rounded-xl border-2 border-cyan-100/30 hover:border-cyan-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b.guestName}),e.jsx(U,{variant:b.status==="confirmed"?"default":"secondary",className:b.status==="confirmed"?"bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold":b.status==="pending"?"bg-amber-100 text-amber-700 border-amber-200 font-semibold":"bg-slate-100 text-slate-600 border-slate-200 font-semibold",children:b.status})]}),e.jsxs("p",{className:"text-sm text-cyan-600 font-bold mb-2",children:["Property: ",j]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[y(b.checkInDate||b.checkIn)," - ",y(b.checkOutDate||b.checkOut)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-xl text-slate-800 mb-1",children:g(w)}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:b.source||"Direct"})]})]},b.id)})})})]})}),e.jsx(me,{value:"finances",className:"space-y-6",children:e.jsxs(D,{className:"rounded-xl shadow-lg border-2 border-green-100/50",children:[e.jsx($,{className:"pb-4 px-6 pt-6",children:e.jsxs(L,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100/80 rounded-lg",children:e.jsx(Ze,{className:"h-6 w-6 text-green-600"})}),"Recent Financial Activity"]})}),e.jsx(T,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:f.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50/50 to-slate-50/80 rounded-xl border-2 border-green-100/30 hover:border-green-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b.description}),e.jsx(U,{variant:b.type==="income"?"default":b.type==="expense"?"destructive":"secondary",className:b.type==="income"?"bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold":b.type==="expense"?"bg-red-100 text-red-700 border-red-200 font-semibold":"bg-slate-100 text-slate-600 border-slate-200 font-semibold",children:b.type})]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[e.jsx("span",{className:"text-slate-700 font-semibold",children:y(b.date)})," | Property: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:b.propertyName||"General"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-bold text-xl mb-1 ${b.type==="income"?"text-emerald-600":b.type==="expense"?"text-red-600":"text-slate-600"}`,children:[b.type==="expense"?"-":"+",g(b.amount)]})})]},b.id))})})]})})]})]})]})})}const Hke=Object.freeze(Object.defineProperty({__proto__:null,default:G$},Symbol.toStringTag,{value:"Module"}));function W$(){const{toast:t}=st(),[s,r]=v.useState(!1),[n,a]=v.useState({commissionAutomation:!0,utilityAlerts:!0,lastRun:{commissionCheck:"2025-01-26 09:00:00",utilityCheck:"2025-01-26 09:00:00"},alerts:[]}),i=async()=>{r(!0);try{const d=(await Ne("POST","/api/automation/test-commission")).data||{};t({title:"Commission Test Complete",description:`Processed ${d.processed||0} bookings`})}catch{t({title:"Test Failed",description:"Could not run commission automation test",variant:"destructive"})}finally{r(!1)}},l=async()=>{r(!0);try{const d=(await Ne("POST","/api/automation/test-utility-alerts")).data||{};t({title:"Utility Alert Test Complete",description:`Generated ${d.alerts||0} alerts`})}catch{t({title:"Test Failed",description:"Could not run utility alerts test",variant:"destructive"})}finally{r(!1)}},o=async()=>{r(!0);try{const d=(await Ne("GET","/api/automation/status")).data||{};a(d),t({title:"Status Updated",description:"Automation status refreshed"})}catch{t({title:"Status Check Failed",description:"Could not get automation status",variant:"destructive"})}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(ss,{className:"h-8 w-8 text-blue-600"}),"Automation Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and control commission automation and utility alert systems"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Commission Automation"]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.commissionAutomation?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-red-600",children:"Inactive"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Real-time processing"})]}),e.jsx(U,{variant:n.commissionAutomation?"default":"destructive",children:n.commissionAutomation?"Live":"Stopped"})]})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Utility Alerts"]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.utilityAlerts?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-red-600",children:"Inactive"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Daily 9:00 AM checks"})]}),e.jsx(U,{variant:n.utilityAlerts?"default":"destructive",children:n.utilityAlerts?"Live":"Stopped"})]})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"System Health"]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Healthy"}),e.jsx("p",{className:"text-xs text-gray-500",children:"All systems operational"})]}),e.jsx(Ie,{className:"h-6 w-6 text-green-500"})]})})]})]}),e.jsxs(D,{className:"mb-8",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Xd,{className:"h-5 w-5"}),"Manual Testing & Controls"]})}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(M,{onClick:i,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Test Commission Automation"]}),e.jsxs(M,{onClick:l,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Test Utility Alerts"]}),e.jsxs(M,{onClick:o,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Refresh Status"]})]})})]}),e.jsxs(D,{className:"mb-8",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Last Run Information"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Commission Processing"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last Run: ",n.lastRun.commissionCheck]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Runs automatically on booking confirmations"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Utility Alert Check"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last Run: ",n.lastRun.utilityCheck]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Runs daily at 9:00 AM + weekly Monday reviews"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-5 w-5"}),"Current Alerts (",n.alerts?.length||0,")"]})}),e.jsx(T,{children:!n.alerts||n.alerts.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ie,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Active Alerts"}),e.jsx("p",{className:"text-gray-600",children:"All automation systems are running smoothly."})]}):e.jsx("div",{className:"space-y-4",children:n.alerts.map(c=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(St,{className:"h-5 w-5 text-amber-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.type}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:c.createdAt})]})]}),e.jsx(U,{variant:c.severity==="high"?"destructive":"secondary",children:c.severity})]})},c.id))})})]}),e.jsx(Jr,{className:"my-8"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"Automation systems powered by node-cron scheduling"}),e.jsx("p",{className:"mt-1",children:"Commission: 10% rates â€¢ Utility alerts: Daily checks â€¢ Auto-payouts: à¸¿5,000 threshold"})]})]})})}const Kke=Object.freeze(Object.defineProperty({__proto__:null,default:W$},Symbol.toStringTag,{value:"Module"})),Gke=Yt({baseCurrency:Pe().length(3,"Currency code must be 3 characters"),targetCurrency:Pe().length(3,"Currency code must be 3 characters"),rate:ms().positive("Rate must be positive")}),Wke=Yt({region:Pe().min(1,"Region is required"),vatRate:ms().min(0).max(100).optional(),gstRate:ms().min(0).max(100).optional(),whtRate:ms().min(0).max(100).optional()}),Qke=Yt({amount:ms().positive("Amount must be positive"),from:Pe().length(3,"Currency code must be 3 characters"),to:Pe().length(3,"Currency code must be 3 characters")}),Yke=Yt({amount:ms().positive("Amount must be positive"),region:Pe().min(1,"Region is required"),taxType:Rs(["vat","gst","wht"])});function Xke(){const{toast:t}=st(),[s,r]=v.useState("rates"),[n,a]=v.useState(!1),[i,l]=v.useState([]),[o,c]=v.useState([]),[d,u]=v.useState(null),[m,h]=v.useState(null),x=Wt({resolver:ts(Gke),defaultValues:{baseCurrency:"",targetCurrency:"",rate:0}}),f=Wt({resolver:ts(Wke),defaultValues:{region:"",vatRate:void 0,gstRate:void 0,whtRate:void 0}}),p=Wt({resolver:ts(Qke),defaultValues:{amount:0,from:"",to:""}}),g=Wt({resolver:ts(Yke),defaultValues:{amount:0,region:"",taxType:"vat"}}),y=async()=>{a(!0);try{const[P,k]=await Promise.all([Ne("GET","/api/currency/rates"),Ne("GET","/api/tax/rules")]);l(P.data||[]),c(k.data||[])}catch{t({title:"Error",description:"Failed to fetch data",variant:"destructive"})}finally{a(!1)}};v.useEffect(()=>{y()},[]);const b=async P=>{try{await Ne("PUT",`/api/currency/rates/${P.baseCurrency}/${P.targetCurrency}`,{rate:P.rate}),t({title:"Success",description:"Currency rate updated successfully"}),x.reset(),y()}catch{t({title:"Error",description:"Failed to update currency rate",variant:"destructive"})}},j=async P=>{try{await Ne("PUT",`/api/tax/rules/${P.region}`,P),t({title:"Success",description:"Tax rule updated successfully"}),f.reset(),y()}catch{t({title:"Error",description:"Failed to update tax rule",variant:"destructive"})}},w=async P=>{try{const k=await Ne("POST","/api/currency/convert",P);u(k.data),t({title:"Conversion Complete",description:`${P.amount} ${P.from} = ${k.data.convertedAmount.toFixed(2)} ${P.to}`})}catch{t({title:"Error",description:"Failed to convert currency",variant:"destructive"})}},N=async P=>{try{const k=await Ne("POST","/api/tax/calculate",P);h(k.data),t({title:"Tax Calculated",description:`Tax: ${k.data.taxAmount.toFixed(2)} (${k.data.rate}%)`})}catch{t({title:"Error",description:"Failed to calculate tax",variant:"destructive"})}},S=["THB","USD","EUR","GBP"],O=["thailand","singapore","usa","uk","australia","default"];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Ze,{className:"h-8 w-8 text-green-600"}),"Currency & Tax Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Multi-currency support and international tax compliance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(ma,{className:"h-4 w-4"}),"Currency Rates"]})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Exchange rate pairs"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Tax Regions"]})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configured regions"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Base Currency"]})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"THB"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Thai Baht"})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(_o,{className:"h-4 w-4"}),"Multi-Currency"]})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"Active"}),e.jsx("p",{className:"text-xs text-gray-500",children:"System enabled"})]})]})]}),e.jsxs(xt,{value:s,onValueChange:r,className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"rates",children:"Exchange Rates"}),e.jsx(de,{value:"taxes",children:"Tax Rules"}),e.jsx(de,{value:"convert",children:"Currency Converter"}),e.jsx(de,{value:"calculate",children:"Tax Calculator"})]}),e.jsxs(me,{value:"rates",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Currency Exchange Rates"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{onClick:y,variant:"outline",size:"sm",children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{size:"sm",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Add Rate"]})}),e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Add/Update Currency Rate"})}),e.jsx(Qt,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(b),className:"space-y-4",children:[e.jsx(ge,{control:x.control,name:"baseCurrency",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Base Currency"}),e.jsxs(ae,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select base currency"})})}),e.jsx(ne,{children:S.map(k=>e.jsx(A,{value:k,children:k},k))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:x.control,name:"targetCurrency",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Target Currency"}),e.jsxs(ae,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select target currency"})})}),e.jsx(ne,{children:S.map(k=>e.jsx(A,{value:k,children:k},k))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:x.control,name:"rate",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Exchange Rate"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.000001",placeholder:"1.234567",...P,onChange:k=>P.onChange(parseFloat(k.target.value))})}),e.jsx(be,{})]})}),e.jsx(M,{type:"submit",className:"w-full",children:"Update Rate"})]})})]})]})]})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"From"}),e.jsx(Oe,{children:"To"}),e.jsx(Oe,{children:"Rate"}),e.jsx(Oe,{children:"Last Updated"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:i.map(P=>e.jsxs(Nt,{children:[e.jsx(De,{children:e.jsx(U,{variant:"outline",children:P.baseCurrency})}),e.jsx(De,{children:e.jsx(U,{variant:"outline",children:P.targetCurrency})}),e.jsx(De,{className:"font-mono",children:parseFloat(P.rate).toFixed(6)}),e.jsx(De,{className:"text-gray-500",children:new Date(P.updatedAt).toLocaleDateString()}),e.jsx(De,{children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(Nr,{className:"h-4 w-4"})})})]},`${P.baseCurrency}-${P.targetCurrency}`))})]})})})]}),e.jsxs(me,{value:"taxes",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Tax Rules by Region"}),e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{size:"sm",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Add Tax Rule"]})}),e.jsxs(We,{children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Add/Update Tax Rule"})}),e.jsx(Qt,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(j),className:"space-y-4",children:[e.jsx(ge,{control:f.control,name:"region",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Region"}),e.jsxs(ae,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select region"})})}),e.jsx(ne,{children:O.map(k=>e.jsx(A,{value:k,children:k.charAt(0).toUpperCase()+k.slice(1)},k))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:f.control,name:"vatRate",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"VAT Rate (%)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",placeholder:"7.00",...P,onChange:k=>P.onChange(k.target.value?parseFloat(k.target.value):void 0)})}),e.jsx(be,{})]})}),e.jsx(ge,{control:f.control,name:"gstRate",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"GST Rate (%)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",placeholder:"8.00",...P,onChange:k=>P.onChange(k.target.value?parseFloat(k.target.value):void 0)})}),e.jsx(be,{})]})}),e.jsx(ge,{control:f.control,name:"whtRate",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"WHT Rate (%)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",placeholder:"3.00",...P,onChange:k=>P.onChange(k.target.value?parseFloat(k.target.value):void 0)})}),e.jsx(be,{})]})}),e.jsx(M,{type:"submit",className:"w-full",children:"Update Tax Rule"})]})})]})]})]}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Region"}),e.jsx(Oe,{children:"VAT Rate"}),e.jsx(Oe,{children:"GST Rate"}),e.jsx(Oe,{children:"WHT Rate"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(zs,{children:o.map(P=>e.jsxs(Nt,{children:[e.jsx(De,{children:e.jsx(U,{variant:"secondary",children:P.region.charAt(0).toUpperCase()+P.region.slice(1)})}),e.jsx(De,{children:P.vatRate?`${P.vatRate}%`:"â€”"}),e.jsx(De,{children:P.gstRate?`${P.gstRate}%`:"â€”"}),e.jsx(De,{children:P.whtRate?`${P.whtRate}%`:"â€”"}),e.jsx(De,{children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(Nr,{className:"h-4 w-4"})})})]},P.region))})]})})})]}),e.jsx(me,{value:"convert",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Currency Converter"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(Qt,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(w),className:"space-y-4",children:[e.jsx(ge,{control:p.control,name:"amount",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Amount"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",placeholder:"1000",...P,onChange:k=>P.onChange(parseFloat(k.target.value))})}),e.jsx(be,{})]})}),e.jsx(ge,{control:p.control,name:"from",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"From Currency"}),e.jsxs(ae,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select currency"})})}),e.jsx(ne,{children:S.map(k=>e.jsx(A,{value:k,children:k},k))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:p.control,name:"to",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"To Currency"}),e.jsxs(ae,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select currency"})})}),e.jsx(ne,{children:S.map(k=>e.jsx(A,{value:k,children:k},k))})]}),e.jsx(be,{})]})}),e.jsxs(M,{type:"submit",className:"w-full",children:[e.jsx(_o,{className:"h-4 w-4 mr-2"}),"Convert"]})]})}),d&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Conversion Result"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[d.convertedAmount.toFixed(2)," ",d.to]}),e.jsxs("div",{className:"text-gray-600",children:[d.amount," ",d.from]})]}),e.jsx(Jr,{}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Exchange Rate"}),e.jsxs("div",{className:"font-mono text-lg",children:["1 ",d.from," = ",d.rate," ",d.to]})]})]})})]})]})})]})}),e.jsx(me,{value:"calculate",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Tax Calculator"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(Qt,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(N),className:"space-y-4",children:[e.jsx(ge,{control:g.control,name:"amount",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Amount"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",placeholder:"10000",...P,onChange:k=>P.onChange(parseFloat(k.target.value))})}),e.jsx(be,{})]})}),e.jsx(ge,{control:g.control,name:"region",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Region"}),e.jsxs(ae,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select region"})})}),e.jsx(ne,{children:O.map(k=>e.jsx(A,{value:k,children:k.charAt(0).toUpperCase()+k.slice(1)},k))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:g.control,name:"taxType",render:({field:P})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Tax Type"}),e.jsxs(ae,{onValueChange:P.onChange,defaultValue:P.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select tax type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"vat",children:"VAT"}),e.jsx(A,{value:"gst",children:"GST"}),e.jsx(A,{value:"wht",children:"WHT"})]})]}),e.jsx(be,{})]})}),e.jsxs(M,{type:"submit",className:"w-full",children:[e.jsx(_o,{className:"h-4 w-4 mr-2"}),"Calculate Tax"]})]})}),m&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{className:"text-lg",children:"Tax Calculation Result"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Original Amount"}),e.jsxs("div",{className:"text-lg font-semibold",children:["à¸¿",m.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[m.taxType.toUpperCase()," (",m.rate,"%)"]}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["à¸¿",m.taxAmount.toLocaleString()]})]}),e.jsx(Jr,{}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["à¸¿",m.totalAmount.toLocaleString()]})]})]})})]})]})})]})})]}),e.jsx(Jr,{className:"my-8"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{children:"Multi-currency system for international property management"})]}),e.jsx("p",{children:"Exchange rates updated automatically â€¢ Tax compliance for multiple regions"})]})]})})}const Zke=Yt({guestId:Pe().min(1,"Guest ID is required"),propertyId:ms().min(1,"Property selection is required"),recommendationType:Rs(["extra_cleaning","private_chef","spa_service","tour_guide","grocery_delivery","laundry_service","transportation","other"]),message:Pe().min(10,"Message must be at least 10 characters"),status:Rs(["pending","sent","accepted","declined","expired"]).default("pending")}),Jke={pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"},ZA={extra_cleaning:"ðŸ§¹",private_chef:"ðŸ‘¨â€ðŸ³",spa_service:"ðŸ’†â€â™€ï¸",tour_guide:"ðŸ—ºï¸",grocery_delivery:"ðŸ›’",laundry_service:"ðŸ‘•",transportation:"ðŸš—",other:"âœ¨"};function ePe(){const[t,s]=v.useState(""),[r,n]=v.useState(),[a,i]=v.useState(),[l,o]=v.useState(),[c,d]=v.useState(!1),[u,m]=v.useState(!1),[h,x]=v.useState(null),f=pt(),{toast:p}=st(),{data:g=[],isLoading:y}=xe({queryKey:["/api/upsell-recommendations",{propertyId:r,recommendationType:a,status:l,search:t}],queryFn:()=>{const E=new URLSearchParams;return r&&E.append("propertyId",r.toString()),a&&E.append("recommendationType",a),l&&E.append("status",l),t&&E.append("q",t),fetch(`/api/upsell-recommendations${t?"/search":""}?${E}`).then(B=>B.json())}}),{data:b=[]}=xe({queryKey:["/api/properties"],queryFn:()=>fetch("/api/properties").then(E=>E.json())}),{data:j}=xe({queryKey:["/api/upsell-recommendations/analytics"],queryFn:()=>fetch("/api/upsell-recommendations/analytics").then(E=>E.json())}),{data:w=[]}=xe({queryKey:["/api/upsell-recommendations/types"],queryFn:()=>fetch("/api/upsell-recommendations/types").then(E=>E.json())}),N=Wt({resolver:ts(Zke),defaultValues:{guestId:"",propertyId:void 0,recommendationType:"extra_cleaning",message:"",status:"pending"}}),S=Te({mutationFn:E=>Ne("POST","/api/upsell-recommendations",E),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),f.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),f.invalidateQueries({queryKey:["/api/upsell-recommendations/types"]}),d(!1),N.reset(),p({title:"Success",description:"Upsell recommendation created successfully"})},onError:E=>{p({title:"Error",description:E.message||"Failed to create recommendation",variant:"destructive"})}}),O=Te({mutationFn:({id:E,data:B})=>Ne("PUT",`/api/upsell-recommendations/${E}`,B),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),f.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),m(!1),x(null),p({title:"Success",description:"Recommendation updated successfully"})},onError:E=>{p({title:"Error",description:E.message||"Failed to update recommendation",variant:"destructive"})}}),P=Te({mutationFn:E=>Ne("DELETE",`/api/upsell-recommendations/${E}`),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),f.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),p({title:"Success",description:"Recommendation deleted successfully"})},onError:E=>{p({title:"Error",description:E.message||"Failed to delete recommendation",variant:"destructive"})}}),k=Te({mutationFn:({guestId:E,propertyId:B})=>Ne("POST","/api/upsell-recommendations/generate",{guestId:E,propertyId:B}),onSuccess:E=>{f.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),f.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),p({title:"Success",description:`Generated ${E.recommendations?.length||0} smart recommendations with à¸¿${E.totalEstimatedValue?.toLocaleString()} potential value`})},onError:E=>{p({title:"Error",description:E.message||"Failed to generate recommendations",variant:"destructive"})}}),R=E=>{S.mutate(E)},F=E=>{x(E),m(!0)},I=(E,B)=>{O.mutate({id:E,data:{status:B}})},W=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Upsell Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage guest service recommendations and track conversion rates"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(Ge,{open:c,onOpenChange:d,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(ut,{className:"mr-2 h-4 w-4"}),"New Recommendation"]})}),e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Upsell Recommendation"}),e.jsx(Ct,{children:"Create targeted service recommendations for guests"})]}),e.jsx(Qt,{...N,children:e.jsxs("form",{onSubmit:N.handleSubmit(R),className:"space-y-4",children:[e.jsx(ge,{control:N.control,name:"guestId",render:({field:E})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest ID"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Enter guest identifier",...E})}),e.jsx(be,{})]})}),e.jsx(ge,{control:N.control,name:"propertyId",render:({field:E})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property"}),e.jsxs(ae,{onValueChange:B=>E.onChange(parseInt(B)),value:E.value?.toString(),children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})})}),e.jsx(ne,{children:b.map(B=>e.jsx(A,{value:B.id.toString(),children:B.name},B.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:N.control,name:"recommendationType",render:({field:E})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Recommendation Type"}),e.jsxs(ae,{onValueChange:E.onChange,value:E.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select service type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"extra_cleaning",children:"ðŸ§¹ Extra Cleaning"}),e.jsx(A,{value:"private_chef",children:"ðŸ‘¨â€ðŸ³ Private Chef"}),e.jsx(A,{value:"spa_service",children:"ðŸ’†â€â™€ï¸ Spa Service"}),e.jsx(A,{value:"tour_guide",children:"ðŸ—ºï¸ Tour Guide"}),e.jsx(A,{value:"grocery_delivery",children:"ðŸ›’ Grocery Delivery"}),e.jsx(A,{value:"laundry_service",children:"ðŸ‘• Laundry Service"}),e.jsx(A,{value:"transportation",children:"ðŸš— Transportation"}),e.jsx(A,{value:"other",children:"âœ¨ Other Service"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:N.control,name:"message",render:({field:E})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Recommendation Message"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Describe the service offering and benefits...",className:"min-h-[80px]",...E})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(M,{type:"submit",disabled:S.isPending,children:[S.isPending&&e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Recommendation"]})]})]})})]})]})})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(ht,{children:[e.jsx(de,{value:"overview",children:"ðŸ“Š Overview"}),e.jsx(de,{value:"recommendations",children:"ðŸ“‹ Recommendations"}),e.jsx(de,{value:"analytics",children:"ðŸ“ˆ Analytics"}),e.jsx(de,{value:"types",children:"ðŸŽ¯ Service Types"})]}),e.jsxs(me,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Recommendations"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j?.totalRecommendations||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time recommendations"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Conversion Rate"}),e.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[j?.conversionRate||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted vs declined"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Unique Guests"}),e.jsx(ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j?.uniqueGuests||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests with recommendations"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending"}),e.jsx($s,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j?.pendingCount||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting guest response"})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Quick Actions"}),e.jsx(Ee,{children:"Generate AI-powered recommendations for your guests"})]}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Generate personalized recommendations based on guest preferences and property amenities"})}),e.jsxs(M,{onClick:()=>k.mutate({guestId:"guest-demo-123",propertyId:b[0]?.id}),disabled:k.isPending||!b.length,children:[k.isPending&&e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(ps,{className:"mr-2 h-4 w-4"}),"Generate Smart Recommendations"]})]})})]})]}),e.jsxs(me,{value:"recommendations",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(as,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search recommendations...",value:t,onChange:E=>s(E.target.value),className:"max-w-sm"}),e.jsxs(ae,{value:r?.toString()||"",onValueChange:E=>n(E?parseInt(E):void 0),children:[e.jsx(re,{className:"w-[180px]",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Properties"}),b.map(E=>e.jsx(A,{value:E.id.toString(),children:E.name},E.id))]})]}),e.jsxs(ae,{value:a||"",onValueChange:i,children:[e.jsx(re,{className:"w-[180px]",children:e.jsx(ie,{placeholder:"All Types"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Types"}),e.jsx(A,{value:"extra_cleaning",children:"Extra Cleaning"}),e.jsx(A,{value:"private_chef",children:"Private Chef"}),e.jsx(A,{value:"spa_service",children:"Spa Service"}),e.jsx(A,{value:"tour_guide",children:"Tour Guide"}),e.jsx(A,{value:"grocery_delivery",children:"Grocery Delivery"}),e.jsx(A,{value:"laundry_service",children:"Laundry Service"}),e.jsx(A,{value:"transportation",children:"Transportation"}),e.jsx(A,{value:"other",children:"Other"})]})]}),e.jsxs(ae,{value:l||"",onValueChange:o,children:[e.jsx(re,{className:"w-[150px]",children:e.jsx(ie,{placeholder:"All Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"sent",children:"Sent"}),e.jsx(A,{value:"accepted",children:"Accepted"}),e.jsx(A,{value:"declined",children:"Declined"}),e.jsx(A,{value:"expired",children:"Expired"})]})]})]}),e.jsx(D,{children:e.jsx(T,{className:"p-0",children:y?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Gt,{className:"h-8 w-8 animate-spin"})}):e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Guest"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Service Type"}),e.jsx(Oe,{children:"Message"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Days Since"}),e.jsx(Oe,{className:"text-right",children:"Actions"})]})}),e.jsx(zs,{children:g.map(E=>e.jsxs(Nt,{children:[e.jsx(De,{className:"font-medium",children:E.guestName||E.guestId}),e.jsx(De,{children:E.propertyName}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:ZA[E.recommendationType]}),e.jsx("span",{className:"capitalize",children:E.recommendationType?.replace("_"," ")})]})}),e.jsx(De,{className:"max-w-xs truncate",children:E.message}),e.jsxs(De,{children:[e.jsx(U,{className:Jke[E.status],children:E.status}),E.isExpired&&e.jsx(U,{variant:"destructive",className:"ml-1",children:"Expired"})]}),e.jsx(De,{children:W(E.createdAt)}),e.jsxs(De,{children:[E.daysSinceCreated," days"]}),e.jsx(De,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>F(E),children:e.jsx(Nr,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>P.mutate(E.id),disabled:P.isPending,children:e.jsx(ir,{className:"h-4 w-4"})}),E.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>I(E.id,"sent"),children:"Send"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>I(E.id,"accepted"),children:"Accept"})]})]})})]},E.id))})]})})})]}),e.jsx(me,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Status Distribution"}),e.jsx(Ee,{children:"Breakdown of recommendation statuses"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pending"}),e.jsx("span",{className:"font-medium",children:j?.pendingCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sent"}),e.jsx("span",{className:"font-medium",children:j?.sentCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accepted"}),e.jsx("span",{className:"font-medium text-green-600",children:j?.acceptedCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Declined"}),e.jsx("span",{className:"font-medium text-red-600",children:j?.declinedCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Expired"}),e.jsx("span",{className:"font-medium text-gray-600",children:j?.expiredCount||0})]})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Performance Metrics"}),e.jsx(Ee,{children:"Key performance indicators"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Conversion Rate"}),e.jsxs("span",{className:"font-medium",children:[j?.conversionRate||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg. Recommendations/Guest"}),e.jsx("span",{className:"font-medium",children:j?.avgRecommendationsPerGuest||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Properties"}),e.jsx("span",{className:"font-medium",children:j?.uniqueProperties||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Guests"}),e.jsx("span",{className:"font-medium",children:j?.uniqueGuests||0})]})]})})]})]})}),e.jsx(me,{value:"types",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Service Type Performance"}),e.jsx(Ee,{children:"Analyze conversion rates by recommendation type"})]}),e.jsx(T,{children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Service Type"}),e.jsx(Oe,{children:"Total"}),e.jsx(Oe,{children:"Pending"}),e.jsx(Oe,{children:"Accepted"}),e.jsx(Oe,{children:"Declined"}),e.jsx(Oe,{children:"Conversion Rate"})]})}),e.jsx(zs,{children:w.map(E=>e.jsxs(Nt,{children:[e.jsx(De,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:ZA[E.recommendationType]}),e.jsx("span",{className:"capitalize",children:E.recommendationType?.replace("_"," ")})]})}),e.jsx(De,{children:E.recommendationCount}),e.jsx(De,{children:E.pendingCount}),e.jsx(De,{className:"text-green-600",children:E.acceptedCount}),e.jsx(De,{className:"text-red-600",children:E.declinedCount}),e.jsx(De,{children:e.jsxs(U,{variant:E.conversionRate>50?"default":"secondary",children:[E.conversionRate,"%"]})})]},E.recommendationType))})]})})]})})]}),e.jsx(Ge,{open:u,onOpenChange:m,children:e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Update Recommendation"}),e.jsx(Ct,{children:"Modify recommendation details and status"})]}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(ae,{value:h.status,onValueChange:E=>I(h.id,E),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"sent",children:"Sent"}),e.jsx(A,{value:"accepted",children:"Accepted"}),e.jsx(A,{value:"declined",children:"Declined"}),e.jsx(A,{value:"expired",children:"Expired"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})})]})]})})]})}function tPe({className:t}){const[s,r]=v.useState([{id:"1",type:"bot",content:"ðŸ‘¨â€âœˆï¸ Hello! I'm Captain Cortex â€“ your smart co-pilot for property management, powered by HostPilotPro. Ready to navigate tasks, finances, and data with you!",timestamp:new Date}]),[n,a]=v.useState(""),i=v.useRef(null);pt();const{data:l=[]}=xe({queryKey:["/api/ai-bot/suggestions"],staleTime:1e3*60*10}),o=Te({mutationFn:async m=>await Ne("/api/ai-bot/query",{method:"POST",body:{question:m}}),onSuccess:(m,h)=>{r(x=>[...x.filter(p=>!p.isLoading),{id:Date.now().toString(),type:"bot",content:m.response,timestamp:new Date}])},onError:m=>{r(h=>[...h.filter(f=>!f.isLoading),{id:Date.now().toString(),type:"bot",content:"I apologize, but I encountered an error processing your question. Please try again.",timestamp:new Date}])}}),c=async()=>{if(!n.trim())return;const m={id:Date.now().toString(),type:"user",content:n,timestamp:new Date},h={id:(Date.now()+1).toString(),type:"bot",content:"Analyzing your question and fetching relevant data...",timestamp:new Date,isLoading:!0};r(x=>[...x,m,h]),a(""),o.mutate(n)},d=m=>{a(m)},u=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),c())};return v.useEffect(()=>{if(i.current){const m=i.current.querySelector("[data-radix-scroll-area-viewport]");m&&(m.scrollTop=m.scrollHeight)}},[s]),e.jsxs(D,{className:`h-[600px] flex flex-col ${t}`,children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Zn,{className:"h-5 w-5 text-blue-500"}),"MR Pilot AI Assistant",e.jsx(U,{variant:"secondary",className:"ml-auto",children:"Connected to Live Data"})]})}),e.jsxs(T,{className:"flex-1 flex flex-col gap-3 p-4",children:[e.jsx(ic,{ref:i,className:"flex-1 pr-3",children:e.jsx("div",{className:"space-y-4",children:s.map(m=>e.jsxs("div",{className:`flex items-start gap-3 ${m.type==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${m.type==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"}`,children:m.type==="user"?e.jsx(zt,{className:"h-4 w-4"}):m.isLoading?e.jsx(Gt,{className:"h-4 w-4 animate-spin"}):e.jsx(Zn,{className:"h-4 w-4"})}),e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${m.type==="user"?"bg-blue-500 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:m.content}),e.jsx("div",{className:"text-xs mt-1 opacity-70",children:m.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},m.id))})}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ba,{className:"h-4 w-4"}),"Suggested questions:"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.slice(0,3).map((m,h)=>e.jsx(M,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>d(m),disabled:o.isPending,children:m},h))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{value:n,onChange:m=>a(m.target.value),onKeyPress:u,placeholder:"Ask about tasks, revenue, expenses, bookings...",disabled:o.isPending,className:"flex-1"}),e.jsx(M,{onClick:c,disabled:!n.trim()||o.isPending,size:"icon",children:o.isPending?e.jsx(Gt,{className:"h-4 w-4 animate-spin"}):e.jsx(U0,{className:"h-4 w-4"})})]})]})]})}function sPe(){return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsx(Zn,{className:"h-8 w-8 text-blue-500"}),"Captain Cortex AI Assistant"]}),e.jsx("p",{className:"text-muted-foreground",children:"Ask questions about your properties, tasks, revenue, expenses, and bookings. Captain Cortex is the Smart Co-Pilot for Property Management with real-time access to all your data."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(tPe,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-yellow-500"}),"AI Capabilities"]})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"What MR Pilot can help with:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"â€¢ Task scheduling and tracking"}),e.jsx("li",{children:"â€¢ Revenue and expense analysis"}),e.jsx("li",{children:"â€¢ Property performance insights"}),e.jsx("li",{children:"â€¢ Booking status and availability"}),e.jsx("li",{children:"â€¢ Financial reporting"}),e.jsx("li",{children:"â€¢ Maintenance scheduling"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ga,{className:"h-5 w-5 text-green-500"}),"Live Data Access"]})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Connected to:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"â€¢ All property records"}),e.jsx("li",{children:"â€¢ Task management system"}),e.jsx("li",{children:"â€¢ Booking calendar"}),e.jsx("li",{children:"â€¢ Financial transactions"}),e.jsx("li",{children:"â€¢ Expense tracking"}),e.jsx("li",{children:"â€¢ Revenue reporting"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[e.jsx(Kt,{className:"h-5 w-5 text-blue-500"}),"Security & Privacy"]})}),e.jsx(T,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Data Protection:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"â€¢ Organization-level data isolation"}),e.jsx("li",{children:"â€¢ Role-based access control"}),e.jsx("li",{children:"â€¢ Encrypted API communication"}),e.jsx("li",{children:"â€¢ No data stored by AI provider"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-lg",children:"Example Questions"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"What tasks do we have for tomorrow?"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"Show me revenue from Villa Tropical Paradise in March"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"What were the electric charges for Villa Aruna in May?"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"Which properties have bookings this week?"'})]})})]})]})]})]})}function rPe(){const[t,s]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(""),[c,d]=v.useState(!1),{data:u=[],isLoading:m}=xe({queryKey:["/api/properties"]}),h=v.useMemo(()=>u.map(p=>({id:p.id,name:p.name,location:p.location||"Thailand",price:p.nightlyRate||p.basePrice||5e3,bedrooms:p.bedrooms||2,bathrooms:p.bathrooms||2,guests:p.maxGuests||p.capacity||4,rating:4.8,image:"ðŸ ",commission:Math.round((p.nightlyRate||p.basePrice||5e3)*.1),amenities:p.amenities||["Pool","WiFi","Kitchen","AC"]})),[u]),x=v.useMemo(()=>h.filter(p=>{const g=t===""||p.name?.toLowerCase().includes(t.toLowerCase())||p.location?.toLowerCase().includes(t.toLowerCase()),y=(!r||p.price>=parseInt(r))&&(!a||p.price<=parseInt(a)),b=!l||p.guests>=parseInt(l);return g&&y&&b}),[t,r,a,l,h]),f=p=>{p.preventDefault(),d(!0)};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs(D,{className:"mb-6",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5"}),"Generate Client Quote"]})}),e.jsx(T,{children:e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Destination"}),e.jsx(Q,{placeholder:"Search destination...",value:t,onChange:p=>s(p.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Budget Range (THB)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{placeholder:"Min",type:"number",value:r,onChange:p=>n(p.target.value)}),e.jsx(Q,{placeholder:"Max",type:"number",value:a,onChange:p=>i(p.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Guests"}),e.jsx(Q,{placeholder:"Number of guests",type:"number",value:l,onChange:p=>o(p.target.value)})]}),e.jsxs(M,{type:"submit",className:"md:col-span-3 bg-blue-600 hover:bg-blue-700",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Search Properties"]})]})})]}),(c||t||r||a||l)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Found ",x.length," Properties"]}),e.jsxs(U,{variant:"secondary",children:["Total Commission: à¸¿",x.reduce((p,g)=>p+g.commission,0).toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(p=>e.jsx(D,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:p.image}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:p.name}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"}),p.location]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(ps,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:p.rating})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[p.bedrooms," bed"]}),e.jsxs("span",{children:[p.bathrooms," bath"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"h-3 w-3"}),p.guests]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["à¸¿",p.price.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Commission: à¸¿",p.commission.toLocaleString()]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:p.amenities.map(g=>e.jsx(U,{variant:"outline",className:"text-xs",children:g},g))}),e.jsx(M,{className:"w-full bg-green-600 hover:bg-green-700",children:"Generate Quote"})]})},p.id))}),x.length===0&&e.jsx(D,{children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No properties match your search criteria."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters."})]})})]})]})}function nPe(){return e.jsx(rPe,{})}function aPe(){const{data:t=[],isLoading:s}=xe({queryKey:["/api/commissions"]});return s?e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"My Commissions"}),e.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(4)].map((r,n)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},n))})]}):e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"My Commissions"}),e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Villa"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Guest"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Booking"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Commission"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{className:"border-b",children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No commissions found. Commissions will appear here when bookings are made."})}):t.map(r=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:new Date(r.date||r.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-2",children:r.propertyName||r.villa}),e.jsx("td",{className:"px-4 py-2",children:r.guestName||"Guest"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm ${r.status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:r.status==="paid"?"Paid":"Pending"})}),e.jsxs("td",{className:"px-4 py-2",children:["à¸¿",(r.bookingAmount||0).toLocaleString()]}),e.jsxs("td",{className:"px-4 py-2 font-bold",children:["à¸¿",(r.commissionAmount||0).toLocaleString()]})]},r.id))})]})]})}function iPe(){const{data:t=[],isLoading:s}=xe({queryKey:["/api/proposals"]});return s?e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Client Proposals"}),e.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(5)].map((r,n)=>e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"},n))})]}):e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Client Proposals"}),t.length===0?e.jsx("p",{className:"text-gray-500",children:"No proposals found. Create a proposal to get started."}):e.jsx("ul",{className:"list-disc pl-5",children:t.map((r,n)=>e.jsxs("li",{children:["Proposal #",r.id||n+1," â€“ ",r.propertyName," â€“ à¸¿",(r.amount||0).toLocaleString()," â€“ Status: ",r.status||"Draft"]},r.id||n))})]})}const lPe=["All Categories","exterior","interior","tour","aerial","marketing"],oPe=["All Types","image","video","document"];function cPe(){const[t,s]=v.useState(""),[r,n]=v.useState("All Properties"),[a,i]=v.useState("All Categories"),[l,o]=v.useState("All Types"),{data:c=[]}=xe({queryKey:["/api/properties"]}),{data:d=[],isLoading:u}=xe({queryKey:["/api/property-media"]}),m=v.useMemo(()=>["All Properties",...c.map(b=>b.name)],[c]),h=v.useMemo(()=>d.filter(y=>{const b=t===""||y.name?.toLowerCase().includes(t.toLowerCase())||y.property?.toLowerCase().includes(t.toLowerCase()),j=r==="All Properties"||y.property===r,w=a==="All Categories"||y.category===a,N=l==="All Types"||y.type===l;return b&&j&&w&&N}),[t,r,a,l,d]),x=y=>{switch(y){case"image":return e.jsx(q0,{className:"h-4 w-4"});case"video":return e.jsx(C4,{className:"h-4 w-4"});case"document":return e.jsx(dt,{className:"h-4 w-4"});default:return e.jsx(dt,{className:"h-4 w-4"})}},f=y=>{switch(y){case"image":return"bg-blue-100 text-blue-800";case"video":return"bg-purple-100 text-purple-800";case"document":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},p=y=>{console.log(`Downloading ${y.name}`)},g=()=>{s(""),n("All Properties"),i("All Categories"),o("All Types")};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs(D,{className:"mb-6",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"Media Library"]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search media...",value:t,onChange:y=>s(y.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsx(ne,{children:m.map(y=>e.jsx(A,{value:y,children:y},y))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsx(ne,{children:lPe.map(y=>e.jsx(A,{value:y,children:y},y))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(ae,{value:l,onValueChange:o,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsx(ne,{children:oPe.map(y=>e.jsx(A,{value:y,children:y},y))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{variant:"secondary",children:[h.length," items found"]}),e.jsxs(U,{variant:"outline",children:["Total size: ",h.reduce((y,b)=>y+parseFloat(b.size),0).toFixed(1),"MB"]})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:g,children:[e.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:h.map(y=>e.jsx(D,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 rounded-lg mb-3 flex items-center justify-center relative",children:[e.jsx("div",{className:"text-4xl",children:y.icon}),e.jsx(U,{className:`absolute top-2 right-2 ${f(y.type)}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[x(y.type),e.jsx("span",{className:"text-xs",children:y.type})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm leading-tight",children:y.name}),e.jsx("p",{className:"text-xs text-gray-600",children:y.property}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:y.resolution}),e.jsx("span",{children:y.size})]}),e.jsx(U,{variant:"outline",className:"text-xs",children:y.category}),e.jsxs(M,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",onClick:()=>p(y),children:[e.jsx(js,{className:"h-3 w-3 mr-1"}),"Download ",y.format]})]})]})},y.id))}),h.length===0&&e.jsx(D,{children:e.jsxs(T,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No media files match your criteria"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your search or filters"})]})})]})}function dPe(){return e.jsx(cPe,{})}const Mj=[{rank:1,name:"Ploy",bookings:12,earnings:89e3,bonus:"Dinner voucher",trend:"+15%"},{rank:2,name:"Sarah",bookings:8,earnings:65e3,bonus:"Spa day",trend:"+8%"},{rank:3,name:"Lisa",bookings:6,earnings:42e3,bonus:"Gift card",trend:"+3%"},{rank:4,name:"Anna",bookings:5,earnings:38e3,bonus:"Movie tickets",trend:"-2%"},{rank:5,name:"Emma",bookings:4,earnings:28e3,bonus:"Coffee voucher",trend:"+5%"}],Rj=[{rank:1,name:"George",referrals:9,earnings:54e3,bonus:"2-night stay",trend:"+12%"},{rank:2,name:"Mike",referrals:7,earnings:42e3,bonus:"Restaurant voucher",trend:"+6%"},{rank:3,name:"David",referrals:5,earnings:31e3,bonus:"Spa treatment",trend:"+4%"},{rank:4,name:"James",referrals:4,earnings:24e3,bonus:"Shopping voucher",trend:"-1%"},{rank:5,name:"Robert",referrals:3,earnings:18e3,bonus:"Activity pass",trend:"+2%"}],ph={name:"Anna K.",type:"Retail Agent",earnings:125e3,prize:"Weekend getaway prize"};function uPe(){const t=r=>{switch(r){case 1:return e.jsx(Hn,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(B0,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(ps,{className:"h-5 w-5 text-orange-500"});default:return e.jsx("span",{className:"h-5 w-5 flex items-center justify-center text-sm font-bold",children:r})}},s=r=>r.startsWith("+")?"text-green-600":r.startsWith("-")?"text-red-600":"text-gray-600";return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Agent Leaderboard"}),e.jsx("p",{className:"text-gray-600",children:"Top performing agents this month"})]}),e.jsxs(D,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(Hn,{className:"h-6 w-6"}),"Last Month's Champion"]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:ph.name}),e.jsx("p",{className:"text-gray-600",children:ph.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["à¸¿",ph.earnings.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:ph.prize})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-blue-600"}),"Retail Agents - This Month"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:Mj.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(r.rank),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.bookings," bookings"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["à¸¿",r.earnings.toLocaleString()]}),e.jsx(U,{variant:"outline",className:s(r.trend),children:r.trend})]}),e.jsx("p",{className:"text-xs text-gray-500",children:r.bonus})]})]},r.rank))})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-purple-600"}),"Referral Agents - This Month"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:Rj.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(r.rank),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.referrals," referrals"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["à¸¿",r.earnings.toLocaleString()]}),e.jsx(U,{variant:"outline",className:s(r.trend),children:r.trend})]}),e.jsx("p",{className:"text-xs text-gray-500",children:r.bonus})]})]},r.rank))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(D,{children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Mj.reduce((r,n)=>r+n.bookings,0)}),e.jsx("p",{className:"text-sm text-gray-500",children:"This month"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Referrals"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Rj.reduce((r,n)=>r+n.referrals,0)}),e.jsx("p",{className:"text-sm text-gray-500",children:"This month"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["à¸¿",(Mj.reduce((r,n)=>r+n.earnings,0)+Rj.reduce((r,n)=>r+n.earnings,0)).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Combined"})]})})]})]})}function mPe(){return e.jsx(uPe,{})}function hPe(){const[t,s]=v.useState(""),n=v.useMemo(()=>[{title:"Admin Dashboard",emoji:"ðŸ“Š",description:"Comprehensive overview of all properties, bookings, tasks, and financial metrics",href:"/",icon:$s,badge:"Main",color:"bg-emerald-50/50 hover:bg-emerald-100/70 border-emerald-200/60",keywords:["admin","overview","main","dashboard","analytics"]},{title:"Financial Dashboard",emoji:"ðŸ’°",description:"Revenue tracking, expense analysis, and financial performance insights",href:"/finance-hub",icon:Ze,badge:"Finance",color:"bg-teal-50/50 hover:bg-teal-100/70 border-teal-200/60",keywords:["finance","revenue","money","financial","analytics"]},{title:"Property Dashboard",emoji:"ðŸ¢",description:"Property-specific metrics, occupancy rates, and performance analytics",href:"/property-hub",icon:bs,badge:"Properties",color:"bg-cyan-50/50 hover:bg-cyan-100/70 border-cyan-200/60",keywords:["property","building","occupancy","real estate"]},{title:"Task Overview",emoji:"âœ…",description:"Global task monitoring across all properties with staff performance tracking",href:"/tasks",icon:Wa,badge:"Operations",color:"bg-green-50/50 hover:bg-green-100/70 border-green-200/60",keywords:["tasks","operations","staff","monitoring","workflow"]},{title:"Daily Operations",emoji:"âš¡",description:"Today's activities, urgent tasks, and operational status overview",href:"/daily-operations",icon:Bs,badge:"Today",color:"bg-slate-50/50 hover:bg-slate-100/70 border-slate-200/60",keywords:["daily","today","urgent","activities","operations"]},{title:"Portfolio Manager Dashboard",emoji:"ðŸ“ˆ",description:"Multi-property portfolio insights and management tools",href:"/portfolio-manager-dashboard",icon:Ot,badge:"Portfolio",color:"bg-emerald-50/50 hover:bg-emerald-100/70 border-emerald-200/60",keywords:["portfolio","manager","insights","analytics","trends"]}],[]).filter(i=>{if(!t.trim())return!0;const l=t.toLowerCase();return i.title.toLowerCase().includes(l)||i.description.toLowerCase().includes(l)||i.badge.toLowerCase().includes(l)||i.keywords.some(o=>o.includes(l))}),a=new Date().toLocaleDateString();return e.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-6 lg:px-8 py-3",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx(zi,{title:"Dashboard Hub",subtitle:"Access all dashboard views and analytics from one central location"}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl mt-2 font-bold text-slate-900 dark:text-slate-100 tracking-tight",children:"Dashboard Hub"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 sm:mt-3 text-base sm:text-lg font-medium tracking-wide",children:"Access all dashboard views and analytics from one central location"})]}),e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"relative max-w-xl sm:max-w-2xl mx-auto",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx(Q,{type:"text",placeholder:"Search dashboards...",value:t,onChange:i=>s(i.target.value),className:"pl-10 pr-4 py-3 rounded-xl border-2 border-slate-200/60 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200 shadow-sm hover:shadow-md bg-white/80 backdrop-blur-sm w-full","aria-label":"Search dashboards"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mt-6",children:n.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsxs("div",{className:"text-slate-400 text-lg font-medium",children:['No dashboards found matching "',t,'"']}),e.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Try adjusting your search terms"})]}):n.map(i=>(i.icon,e.jsx(us,{href:i.href,children:e.jsx("a",{className:`block h-full no-underline rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-200 ${i.color}`,"aria-label":`Open ${i.title}`,children:e.jsxs(D,{className:"h-full cursor-pointer transition-all duration-300 ease-in-out hover:shadow-xl hover:-translate-y-1 hover:scale-[1.02] border-2 shadow-lg bg-gradient-to-br from-emerald-50/30 to-white rounded-2xl",children:[e.jsx($,{className:"pb-4 pt-6 px-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:i.emoji}),e.jsx(L,{className:"text-base sm:text-lg md:text-lg font-bold text-slate-800 dark:text-slate-100 leading-tight whitespace-normal break-words",children:i.title})]})}),e.jsx(U,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 border-emerald-200 rounded-md px-2 py-0.5 font-semibold text-xs flex-shrink-0",children:i.badge})]})}),e.jsx(T,{className:"px-6 pb-6 flex-1",children:e.jsx("p",{className:"text-sm sm:text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium",children:i.description})})]})})},i.href)))}),e.jsx("div",{className:"mt-10 sm:mt-12 pt-6 border-t border-slate-200/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-6 text-sm text-slate-400 font-medium",children:[e.jsxs("span",{children:["Last updated: ",a]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"System Online"})]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-1 rounded-md text-xs font-semibold",children:"v2.0.1"})]})})]})}function xPe({filters:t,onFiltersChange:s,totalProperties:r,filteredCount:n}){const[a,i]=ee.useState(!1),l=(d,u)=>s({...t,[d]:u}),o=()=>s({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),c=(t.search?1:0)+(t.location?1:0)+(t.status?1:0)+(t.propertyType?1:0)+(t.occupancyMin>0||t.occupancyMax<100?1:0)+(t.roiMin>0||t.roiMax<50?1:0)+(t.hasMaintenanceTasks?1:0)+(t.lastBookingFrom||t.lastBookingTo?1:0);return e.jsxs(D,{className:"mb-6 bg-gradient-to-br from-white/60 to-slate-50/40 border-slate-200/40 shadow-sm",children:[e.jsx($,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(Dn,{className:"h-5 w-5 text-emerald-700"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(L,{className:"text-sm font-semibold truncate text-slate-800",children:"Property Filters"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[n," / ",r," shown",c>0&&e.jsxs("span",{className:"ml-2 inline-flex items-center bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full text-[11px]",children:[c," active"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>{const d=`name,location,status
`,u=new Blob([d],{type:"text/csv"}),m=document.createElement("a");m.href=URL.createObjectURL(u),m.download="properties.csv",m.click()},children:"ðŸ“Š Export"}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>window.print(),children:"ðŸ“‹ Print"}),e.jsx(M,{size:"sm",variant:"outline",onClick:()=>c?o():i(d=>!d),children:c?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"h-4 w-4"})," Clear"]}):e.jsx("span",{className:"text-sm",children:a?"Close":"Advanced"})})]})]})}),e.jsxs(T,{className:"p-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-center",children:[e.jsx("div",{className:"col-span-1 sm:col-span-2",children:e.jsx(Q,{placeholder:"Search properties...",value:t.search,onChange:d=>l("search",d.target.value),className:"w-full bg-white/80"})}),e.jsx("div",{className:"flex gap-2 items-center justify-end",children:e.jsxs(ae,{value:t.location||"all",onValueChange:d=>l("location",d==="all"?"":d),children:[e.jsx(re,{className:"min-w-[120px] text-sm",children:e.jsx(ie,{placeholder:"Location"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All"}),e.jsx(A,{value:"chaweng",children:"Chaweng"}),e.jsx(A,{value:"lamai",children:"Lamai"}),e.jsx(A,{value:"bophut",children:"Bophut"}),e.jsx(A,{value:"maenam",children:"Maenam"}),e.jsx(A,{value:"bangrak",children:"Bang Rak"})]})]})})]}),e.jsxs("div",{className:`mt-3 grid gap-3 ${a?"grid-cols-1 md:grid-cols-3":"hidden"}`,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(vs,{className:"h-4 w-4 text-emerald-600"}),"Status & Type"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{value:t.status||"all",onValueChange:d=>l("status",d==="all"?"":d),children:[e.jsx(re,{className:"min-w-[140px] text-sm",children:e.jsx(ie,{placeholder:"Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All"}),e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(ae,{value:t.propertyType||"all",onValueChange:d=>l("propertyType",d==="all"?"":d),children:[e.jsx(re,{className:"min-w-[140px] text-sm",children:e.jsx(ie,{placeholder:"Type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Types"}),e.jsx(A,{value:"villa",children:"Villa"}),e.jsx(A,{value:"apartment",children:"Apartment"}),e.jsx(A,{value:"condo",children:"Condo"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(Ot,{className:"h-4 w-4 text-teal-600"}),"Occupancy & ROI"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Q,{type:"number",value:t.occupancyMin,onChange:d=>l("occupancyMin",parseInt(d.target.value)||0),className:"w-20 text-sm",placeholder:"Min %"}),e.jsx(Q,{type:"number",value:t.occupancyMax,onChange:d=>l("occupancyMax",parseInt(d.target.value)||100),className:"w-20 text-sm",placeholder:"Max %"}),e.jsx(Q,{type:"number",value:t.roiMin,onChange:d=>l("roiMin",parseInt(d.target.value)||0),className:"w-20 text-sm",placeholder:"ROI Min"}),e.jsx(Q,{type:"number",value:t.roiMax,onChange:d=>l("roiMax",parseInt(d.target.value)||50),className:"w-20 text-sm",placeholder:"ROI Max"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(Xe,{className:"h-4 w-4 text-emerald-600"}),"Last Booking"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Q,{type:"date",value:t.lastBookingFrom,onChange:d=>l("lastBookingFrom",d.target.value),className:"text-sm"}),e.jsx(Q,{type:"date",value:t.lastBookingTo,onChange:d=>l("lastBookingTo",d.target.value),className:"text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.hasMaintenanceTasks,onChange:d=>l("hasMaintenanceTasks",d.target.checked),className:"h-4 w-4"}),e.jsx("span",{children:"Has maintenance"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>i(!1),children:"Close"}),e.jsx(M,{size:"sm",onClick:()=>{i(!1)},children:"Apply"})]})]})]})]}),c>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t.search&&e.jsxs(U,{className:"flex items-center gap-2",children:["Search: ",t.search,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("search","")})]}),t.location&&e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-3 w-3"}),t.location,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("location","")})]}),t.status&&e.jsxs(U,{className:"flex items-center gap-2",children:["Status: ",t.status,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("status","")})]})]})]})]})}function pPe({selectedProperties:t,onClearSelection:s,onRefresh:r}){const[n,a]=v.useState({isOpen:!1,action:"",data:null}),{toast:i}=st();if(t.length===0)return null;const l=()=>{a({isOpen:!0,action:"assign-manager",data:{selectedCount:t.length}})},o=()=>{a({isOpen:!0,action:"update-status",data:{selectedCount:t.length}})},c=()=>{a({isOpen:!0,action:"archive",data:{selectedCount:t.length}})},d=async(u,m)=>{try{await new Promise(x=>setTimeout(x,1e3));let h="";switch(u){case"assign-manager":h=`Assigned ${m.manager} to ${t.length} properties`;break;case"update-status":h=`Updated status to "${m.status}" for ${t.length} properties`;break;case"archive":h=`Archived ${t.length} properties`;break}i({title:"Bulk Action Completed",description:h}),a({isOpen:!1,action:"",data:null}),s(),r()}catch{i({title:"Error",description:"Failed to execute bulk action. Please try again.",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mb-6 border-blue-200 bg-blue-50",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wa,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"font-medium text-blue-900",children:[t.length," propert",t.length===1?"y":"ies"," selected"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.slice(0,3).map((u,m)=>e.jsx(U,{variant:"secondary",className:"text-xs",children:u.name},m)),t.length>3&&e.jsxs(U,{variant:"secondary",className:"text-xs",children:["+",t.length-3," more"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:l,className:"flex items-center gap-1",children:[e.jsx(ot,{className:"h-4 w-4"}),"Assign Manager"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:o,className:"flex items-center gap-1",children:[e.jsx(ss,{className:"h-4 w-4"}),"Update Status"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-1 text-orange-600 hover:text-orange-700",children:[e.jsx(E8,{className:"h-4 w-4"}),"Archive"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-slate-700",children:e.jsx(Es,{className:"h-4 w-4"})})]})]})})}),e.jsx(Ge,{open:n.isOpen,onOpenChange:u=>a({isOpen:u,action:"",data:null}),children:e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{children:[n.action==="assign-manager"&&"Assign Property Manager",n.action==="update-status"&&"Update Property Status",n.action==="archive"&&"Archive Properties"]}),e.jsxs(Ct,{children:[n.action==="assign-manager"&&`Select a property manager to assign to ${n.data?.selectedCount} selected properties.`,n.action==="update-status"&&`Choose the new status for ${n.data?.selectedCount} selected properties.`,n.action==="archive"&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[e.jsx(St,{className:"h-4 w-4"}),"This will archive ",n.data?.selectedCount," properties. They will be hidden from the main view but can be restored later."]})]})]}),e.jsxs("div",{className:"py-4",children:[n.action==="assign-manager"&&e.jsxs(ae,{defaultValue:"manager1",children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select Property Manager"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"manager1",children:"John Smith"}),e.jsx(A,{value:"manager2",children:"Sarah Johnson"}),e.jsx(A,{value:"manager3",children:"Mike Chen"}),e.jsx(A,{value:"manager4",children:"Lisa Wong"})]})]}),n.action==="update-status"&&e.jsxs(ae,{defaultValue:"active",children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"active",children:"Active"}),e.jsx(A,{value:"maintenance",children:"Under Maintenance"}),e.jsx(A,{value:"inactive",children:"Inactive"})]})]}),n.action==="archive"&&e.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:e.jsx("p",{className:"text-sm text-orange-800",children:"Archived properties will be moved to the archive section and will not appear in regular property listings. You can restore them at any time from the archive."})})]}),e.jsxs(Zs,{children:[e.jsx(M,{variant:"outline",onClick:()=>a({isOpen:!1,action:"",data:null}),children:"Cancel"}),e.jsx(M,{onClick:()=>{const u=n.action==="assign-manager"?{manager:"John Smith"}:n.action==="update-status"?{status:"active"}:{};d(n.action,u)},children:n.action==="archive"?"Archive Properties":"Apply Changes"})]})]})})]})}function fPe({properties:t,bookings:s,onBookingReschedule:r}){const[,n]=or(),[a,i]=v.useState(new Date),[l,o]=v.useState("all"),[c,d]=v.useState("month"),[u,m]=v.useState(null),[h,x]=v.useState(null),[f,p]=v.useState(null);console.log("selectedBooking",f);const[g,y]=v.useState(!1);console.log("MultiPropertyCalendar received bookings:",s),console.log("Hostaway bookings count:",s.filter(se=>se.source==="HOSTAWAY").length);const{toast:b}=st(),j=pt(),[w,N]=v.useState(s);ee.useEffect(()=>{N(s)},[s]);const S=Te({mutationFn:async({bookingId:se,newCheckIn:te,newCheckOut:we})=>Ne("PATCH",`/api/bookings/${se}`,{checkIn:te,checkOut:we}),onMutate:async({bookingId:se,newCheckIn:te,newCheckOut:we})=>{const ve=w,X=w.map(ce=>ce.id===se?{...ce,checkIn:te,checkOut:we}:ce);return N(X),r?.(se,te,we),{previousBookings:ve}},onSuccess:(se,te)=>{Rl(j),b({title:"âœ… Booking Rescheduled",description:"Successfully moved booking to new dates",variant:"default"})},onError:(se,te,we)=>{we?.previousBookings&&N(we.previousBookings),console.error("Error rescheduling booking:",se),b({title:"âŒ Rescheduling Failed",description:"Unable to reschedule booking. Please try again.",variant:"destructive"})}}),O=se=>{const te=new Date(se.getFullYear(),se.getMonth(),1),ve=new Date(se.getFullYear(),se.getMonth()+1,0).getDate(),X=te.getDay(),ce=[];for(let Y=0;Y<X;Y++)ce.push(null);for(let Y=1;Y<=ve;Y++)ce.push(new Date(se.getFullYear(),se.getMonth(),Y));return ce},P=se=>{const te=se.getFullYear(),we=String(se.getMonth()+1).padStart(2,"0"),ve=String(se.getDate()).padStart(2,"0");return`${te}-${we}-${ve}`},k=se=>{if(!se)return[];const te=P(se);return w.filter(we=>{const ve=we.checkIn.split("T")[0],X=we.checkOut.split("T")[0];return te>=ve&&te<X}).filter(we=>l==="all"||we.propertyId.toString()===l)},R=(se,te)=>{const we=new Date(te.checkIn),ve=new Date(te.checkOut),X=Math.ceil((ve.getTime()-we.getTime())/(1e3*60*60*24)),ce=new Date(se);return ce.setDate(ce.getDate()+X),w.some(Y=>{if(Y.id===te.id||Y.propertyId!==te.propertyId)return!1;const he=new Date(Y.checkIn),Fe=new Date(Y.checkOut);return se>=he&&se<Fe||ce>he&&ce<=Fe||se<=he&&ce>=Fe})},F=se=>{switch(se){case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"checked-in":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=se=>{switch(se){case"confirmed":return"bg-blue-500";case"pending":return"bg-yellow-500";case"cancelled":return"bg-red-500";case"checked-in":return"bg-green-500";case"completed":return"bg-purple-500";default:return"bg-gray-500"}},W=(se,te)=>{if(te.source==="HOSTAWAY"){se.preventDefault(),b({title:"Read-only booking",description:"Hostaway bookings are synced from your channel manager and can't be rescheduled here yet."});return}m(te),se.dataTransfer.effectAllowed="move"},E=(se,te)=>{se.preventDefault(),se.dataTransfer.dropEffect="move",x(te)},B=()=>{x(null)},G=(se,te)=>{if(se.preventDefault(),u&&te){if(u.status==="checked-in"||u.status==="completed"){b({title:"âŒ Cannot Reschedule",description:"Bookings that are checked-in or completed cannot be rescheduled.",variant:"destructive"}),m(null),x(null);return}if(R(te,u)){b({title:"âŒ Scheduling Conflict",description:"These dates conflict with an existing booking for this property.",variant:"destructive"}),m(null),x(null);return}const we=new Date(u.checkIn),ve=new Date(u.checkOut),X=Math.ceil((ve.getTime()-we.getTime())/(1e3*60*60*24)),ce=new Date(te),Y=new Date(te);Y.setDate(Y.getDate()+X);const he=new Date;if(he.setHours(0,0,0,0),ce<he){b({title:"âŒ Invalid Date",description:"Cannot schedule bookings in the past.",variant:"destructive"}),m(null),x(null);return}S.mutate({bookingId:u.id,newCheckIn:ce.toISOString(),newCheckOut:Y.toISOString()})}m(null),x(null)},J=se=>e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsxs("div",{className:"font-semibold text-sm",children:[se.source==="HOSTAWAY"&&e.jsx("span",{className:"text-[10px] bg-purple-600 text-white px-1 rounded mr-1",children:"H"}),se.source==="LOCAL"&&e.jsx("span",{className:"text-[10px] bg-emerald-600 text-white px-1 rounded mr-1",children:"L"}),se.guestName]}),e.jsx("div",{className:"text-xs text-slate-600",children:se.propertyName}),e.jsx("div",{className:"text-xs font-medium text-emerald-600",children:C(se.totalAmount)}),se.source==="HOSTAWAY"&&se.bookingPlatform&&e.jsxs("div",{className:"text-xs text-slate-500",children:["Platform: ",se.bookingPlatform]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Click to view details"})]}),C=se=>`à¸¿${se?.toLocaleString()||"0"}`,V=(se,te)=>{if(se.stopPropagation(),te.guestId)n(`/guests/${te.guestId}`);else{const we=[];te.guestEmail&&we.push(`Email: ${te.guestEmail}`),te.guestPhone&&we.push(`Phone: ${te.guestPhone}`),b({title:`Guest: ${te.guestName}`,description:we.length>0?we.join(`
`):"No contact information available"})}},z=(se,te)=>{se.stopPropagation(),te.invoiceId?n(`/finance?invoice=${te.invoiceId}`):b({title:"Booking Invoice",description:`Booking #${te.id}
Amount: ${C(te.totalAmount)}
Status: ${te.status}`})},le=(se,te)=>{se.stopPropagation(),p(te),y(!0)},Ce=se=>{i(te=>{const we=new Date(te);return se==="prev"?we.setMonth(te.getMonth()-1):we.setMonth(te.getMonth()+1),we})},H=["January","February","March","April","May","June","July","August","September","October","November","December"],_=O(a);return l==="all"||t.filter(se=>se.id.toString()===l),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5"}),"Multi-Property Calendar"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ae,{value:l,onValueChange:o,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"Select Property"})}),e.jsxs(ne,{children:[e.jsxs(A,{value:"all",children:["All Properties (",t.length,")"]}),t.map(se=>e.jsxs(A,{value:se.id.toString(),children:[se.source==="HOSTAWAY"&&"ðŸ¢ ",se.name]},se.id))]})]}),u&&e.jsxs("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full border border-blue-200 animate-pulse",children:["ðŸ”„ Rescheduling ",u.guestName,"..."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>Ce("prev"),children:e.jsx(Ka,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-lg font-semibold min-w-[140px] text-center",children:[H[a.getMonth()]," ",a.getFullYear()]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>Ce("next"),children:e.jsx(zn,{className:"h-4 w-4"})})]})]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(se=>e.jsx("div",{className:"p-2 text-center font-medium text-slate-600 bg-slate-50 rounded",children:se},se))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:_.map((se,te)=>{const we=k(se),ve=se?se.toDateString()===new Date().toDateString():!1,X=h&&se&&h.toDateString()===se.toDateString();return e.jsx(dm,{children:e.jsx("div",{className:`min-h-[120px] p-2 border rounded-lg transition-all ${se?"bg-white hover:bg-slate-50":"bg-slate-50"} ${ve?"ring-2 ring-emerald-500":""} ${X?"ring-2 ring-blue-400 bg-blue-50":""}`,onDragOver:se?ce=>E(ce,se):void 0,onDragLeave:B,onDrop:se?ce=>G(ce,se):void 0,children:se&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`text-sm font-medium ${ve?"text-emerald-600":"text-slate-700"}`,children:se.getDate()}),we.length>0&&e.jsxs("div",{className:"flex gap-1",children:[Array.from(new Set(we.map(ce=>ce.status))).slice(0,3).map((ce,Y)=>e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${I(ce)} cursor-help hover:scale-125 transition-transform`})}),e.jsx(Va,{children:e.jsxs("div",{className:"text-xs",children:[ce.charAt(0).toUpperCase()+ce.slice(1)," ","(",we.filter(he=>he.status===ce).length,")"]})})]},Y)),we.length>3&&e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400 cursor-help hover:scale-125 transition-transform"})}),e.jsx(Va,{children:e.jsxs("div",{className:"text-xs",children:[we.length," total bookings"]})})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[we.slice(0,2).map(ce=>e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:e.jsxs("div",{className:"group cursor-pointer",draggable:!0,onDragStart:Y=>W(Y,ce),onClick:Y=>le(Y,ce),children:[e.jsxs("div",{className:`text-xs p-1 rounded border transition-all hover:shadow-md group-hover:shadow-emerald-200 ${F(ce.status)} ${u?.id===ce.id?"opacity-50 scale-95":""}`,children:[e.jsxs("div",{className:"font-medium truncate flex items-center gap-1",children:[e.jsx(p1,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity text-slate-600"}),ce.source==="HOSTAWAY"&&e.jsx("span",{className:"text-[9px] bg-purple-600/80 text-white px-1 rounded font-bold",children:"H"}),ce.source==="LOCAL"&&e.jsx("span",{className:"text-[9px] bg-emerald-600/80 text-white px-1 rounded font-bold",children:"L"}),ce.guestName]}),e.jsx("div",{className:"truncate opacity-75",children:ce.propertyName}),e.jsx("div",{className:"text-[10px] font-medium text-emerald-600",children:C(ce.totalAmount)})]}),e.jsxs("div",{className:"invisible group-hover:visible flex gap-1 mt-1",children:[e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Guest Profile",onClick:Y=>V(Y,ce),"data-testid":`button-guest-${ce.id}`,children:e.jsx(zt,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Invoice",onClick:Y=>z(Y,ce),"data-testid":`button-invoice-${ce.id}`,children:e.jsx(dt,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Details",onClick:Y=>le(Y,ce),"data-testid":`button-details-${ce.id}`,children:e.jsx(Bt,{className:"h-3 w-3"})})]})]})}),e.jsx(Va,{side:"top",className:"p-0",children:J(ce)})]},ce.id)),we.length>2&&e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:e.jsxs("div",{className:"text-xs text-slate-500 text-center py-1 hover:text-slate-700 cursor-pointer rounded hover:bg-slate-100",children:["+",we.length-2," more"]})}),e.jsx(Va,{children:e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:"Additional Bookings"}),we.slice(2).map(ce=>e.jsxs("div",{className:"text-xs",children:[ce.guestName," -"," ",ce.propertyName]},ce.id))]})})]})]})]})})},te)})})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Booking Status Legend"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),e.jsx("span",{className:"text-xs",children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{className:"text-xs",children:"Checked-in"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-purple-500"}),e.jsx("span",{className:"text-xs",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),e.jsx("span",{className:"text-xs",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("h4",{className:"text-sm font-medium mb-2 text-emerald-800",children:"Enterprise Features"}),e.jsxs("div",{className:"text-xs text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p1,{className:"h-3 w-3"}),e.jsx("span",{children:"Drag bookings to reschedule dates instantly"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Hover over bookings for detailed revenue & guest info"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{children:"Status dots show booking states at a glance"})]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-lg font-bold text-blue-800",children:s.filter(se=>se.status==="confirmed").length}),e.jsx("div",{className:"text-xs text-blue-600",children:"Confirmed Bookings"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-lg font-bold text-green-800",children:s.filter(se=>se.status==="checked-in").length}),e.jsx("div",{className:"text-xs text-green-600",children:"Currently Checked-in"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-800",children:s.filter(se=>se.status==="pending").length}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Pending Confirmation"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-lg font-bold text-purple-800",children:C(s.reduce((se,te)=>se+(te.totalAmount||0),0))}),e.jsx("div",{className:"text-xs text-purple-600",children:"Total Revenue"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center gap-4 text-xs",children:[e.jsx("span",{className:"font-medium text-slate-600",children:"Legend:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-gray-500 text-white px-1.5 py-0.5 rounded font-bold text-[9px]",children:"H"}),e.jsx("span",{className:"text-slate-600",children:"Hostaway Booking"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:"ðŸ¢"}),e.jsx("span",{className:"text-slate-600",children:"Hostaway Property"})]})]})]}),e.jsx(Ge,{open:g,onOpenChange:y,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:"Booking Details"})}),f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Guest Name"}),e.jsx("div",{className:"text-lg font-semibold",children:f.guestName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Property"}),e.jsx("div",{className:"text-lg font-semibold",children:f.propertyName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Check-in"}),e.jsx("div",{className:"text-lg",children:new Date(f.checkIn).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Check-out"}),e.jsx("div",{className:"text-lg",children:new Date(f.checkOut).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Status"}),e.jsx("div",{children:e.jsx(U,{className:F(f.status),children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Total Amount"}),e.jsx("div",{className:"text-lg font-bold text-emerald-600",children:C(f.totalAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Booking ID"}),e.jsxs("div",{className:"text-sm font-mono",children:["#",f.id]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Nights"}),e.jsxs("div",{className:"text-lg",children:[Math.ceil((new Date(f.checkOut).getTime()-new Date(f.checkIn).getTime())/(1e3*60*60*24))," ","night(s)"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(M,{variant:"outline",className:"flex-1",onClick:()=>{y(!1),n(`/bookings?id=${f.id}`)},children:"View Full Booking"}),e.jsx(M,{variant:"outline",className:"flex-1",onClick:()=>{y(!1),n(`/property/${f.propertyId}`)},children:"View Property"})]})]})]})})]})}function gPe({onCreateTask:t,selectedProperties:s}){const[r,n]=v.useState(!1),[a,i]=v.useState(null),[l,o]=v.useState(""),[c,d]=v.useState("all"),[u,m]=v.useState("all"),[h,x]=v.useState("all"),[f,p]=v.useState(new Set),{toast:g}=st(),y=Wt({defaultValues:{propertyId:"",dueDate:new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],estimatedCost:void 0,notes:""}}),{register:b}=y,j=y.watch("propertyId")??"",w=pt(),N=Te({mutationFn:async C=>{const V=await Ne("POST","/api/tasks",C);return V.json?V.json():V},onSuccess:()=>{w.invalidateQueries({queryKey:["/api/tasks"],exact:!1}),w.refetchQueries({queryKey:["/api/tasks"],exact:!1})}}),{data:S=[]}=xe({queryKey:["/api/properties"]}),O=s.length>0?s:Array.isArray(S)?S:[],P=[{id:"clean-checkin",title:"Pre-Arrival Deep Clean",description:"Complete cleaning and preparation for guest arrival",type:"cleaning",priority:"high",estimatedDuration:120,category:"Guest Services",instructions:["Deep clean all rooms including bathrooms","Change all bed linens and towels","Stock amenities and toiletries","Check and clean pool area","Inspect all appliances and electronics","Final walkthrough and photo documentation"],isCommon:!0},{id:"maintenance-ac",title:"Air Conditioning Maintenance",description:"Routine AC system inspection and maintenance",type:"maintenance",priority:"medium",estimatedDuration:90,category:"Maintenance",instructions:["Check and replace air filters","Clean condenser coils","Inspect refrigerant levels","Test thermostat functionality","Clean drainage system","Document findings and recommendations"],isCommon:!0},{id:"pool-weekly",title:"Weekly Pool Maintenance",description:"Comprehensive pool cleaning and chemical balance",type:"maintenance",priority:"medium",estimatedDuration:60,category:"Pool & Spa",instructions:["Test and balance water chemistry","Skim surface and empty baskets","Brush walls and vacuum pool","Clean pool deck and furniture","Inspect equipment and filters","Update maintenance log"],isCommon:!0},{id:"security-check",title:"Security & Safety Inspection",description:"Monthly security and safety systems check",type:"inspection",priority:"high",estimatedDuration:45,category:"Security",instructions:["Test all door and window locks","Check security cameras and lighting","Inspect fire safety equipment","Verify alarm system functionality","Test smoke and carbon monoxide detectors","Document any security concerns"],isCommon:!0},{id:"garden-maintenance",title:"Garden & Landscaping",description:"Regular garden maintenance and landscaping",type:"maintenance",priority:"low",estimatedDuration:120,category:"Landscaping",instructions:["Trim and prune plants and trees","Water all plants and gardens","Remove weeds and dead vegetation","Fertilize plants as needed","Clean outdoor furniture and decorations","Inspect irrigation system"],isCommon:!0},{id:"checkout-inspection",title:"Post-Checkout Inspection",description:"Property inspection after guest departure",type:"inspection",priority:"high",estimatedDuration:30,category:"Guest Services",instructions:["Complete room-by-room inspection","Document any damages or issues","Check inventory and missing items","Take photos of property condition","Report maintenance needs","Prepare damage assessment if needed"],isCommon:!0}],k=C=>{switch(C){case"high":return"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border-red-300 shadow-red-100";case"medium":return"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border-yellow-300 shadow-yellow-100";case"low":return"bg-gradient-to-r from-blue-100 to-blue-50 text-blue-800 border-blue-300 shadow-blue-100";default:return"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-800 border-gray-300 shadow-gray-100"}},R=C=>{switch(C){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-blue-500";default:return"bg-gray-500"}},F=C=>{switch(C){case"high":return e.jsx(St,{className:"h-3 w-3"});case"medium":return e.jsx(tt,{className:"h-3 w-3"});case"low":return e.jsx(Ie,{className:"h-3 w-3"});default:return e.jsx(tt,{className:"h-3 w-3"})}},I=C=>{i(C),n(!0)},W=C=>{const V=new Set(f);V.has(C)?V.delete(C):V.add(C),p(V)},E=v.useMemo(()=>P.filter(C=>{const V=C.title.toLowerCase().includes(l.toLowerCase())||C.description.toLowerCase().includes(l.toLowerCase())||C.category.toLowerCase().includes(l.toLowerCase()),z=c==="all"||C.priority===c,le=u==="all"||C.category===u;let Ce=!0;return h==="short"?Ce=C.estimatedDuration<=60:h==="medium"?Ce=C.estimatedDuration>60&&C.estimatedDuration<=120:h==="long"&&(Ce=C.estimatedDuration>120),V&&z&&le&&Ce}),[l,c,u,h]),B=v.useMemo(()=>Array.from(new Set(P.map(C=>C.category))),[]),G=v.useMemo(()=>{const C={high:0,medium:0,low:0};return E.forEach(V=>C[V.priority]+=1),C},[E]),J=async C=>{try{if(!a){g({title:"Error",description:"No template selected. Please try again.",variant:"destructive"});return}if(!C.propertyId){g({title:"Error",description:"Please select a property before creating the task.",variant:"destructive"});return}const V=parseInt(C.propertyId);if(isNaN(V)||V<=0){g({title:"Error",description:"Invalid property selected. Please choose a valid property.",variant:"destructive"});return}const z={title:a.title,description:a.description,type:a.type,department:void 0,priority:a.priority,propertyId:V,assignedTo:null,dueDate:C.dueDate?new Date(C.dueDate).toISOString():null,estimatedCost:C.estimatedCost??null,isRecurring:!1,recurringType:null,recurringInterval:null,notes:C.notes||null,status:"pending"};await N.mutateAsync(z),t?.(a,V),g({title:"âœ… Task Created Successfully",description:`"${a.title}" has been created for the selected property.`}),n(!1),i(null),y.reset()}catch(V){console.error("Error creating task:",V),g({title:"âŒ Failed to Create Task",description:"Something went wrong while creating the task. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{className:"bg-gradient-to-br from-white to-slate-50/50 backdrop-blur-sm border border-slate-200/50",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Li,{className:"h-5 w-5"}),"Task Templates",e.jsxs(U,{variant:"secondary",className:"ml-2 bg-emerald-100 text-emerald-700 border-emerald-300",children:[E.length," of ",P.length," templates"]})]})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(Q,{placeholder:"Search templates by name, description, or category...",value:l,onChange:C=>o(C.target.value),className:"pl-10 bg-white/50 backdrop-blur-sm border-slate-200/50 focus:border-emerald-300 focus:ring-emerald-200"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{value:c,onValueChange:d,children:[e.jsx(re,{className:"w-32 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(ie,{placeholder:"Priority"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Priority"}),e.jsx(A,{value:"high",children:"High"}),e.jsx(A,{value:"medium",children:"Medium"}),e.jsx(A,{value:"low",children:"Low"})]})]}),e.jsxs(ae,{value:u,onValueChange:m,children:[e.jsx(re,{className:"w-40 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(ie,{placeholder:"Category"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Categories"}),B.map(C=>e.jsx(A,{value:C,children:C},C))]})]}),e.jsxs(ae,{value:h,onValueChange:x,children:[e.jsx(re,{className:"w-32 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(ie,{placeholder:"Duration"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"Any Duration"}),e.jsxs(A,{value:"short",children:["â‰¤"," 1 hour"]}),e.jsx(A,{value:"medium",children:"1â€“2 hours"}),e.jsxs(A,{value:"long",children:[">"," 2 hours"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(C=>e.jsxs(D,{className:"group hover:shadow-xl hover:shadow-emerald-500/20 hover:scale-[1.02] transition-all duration-300 bg-gradient-to-br from-white via-white to-slate-50/30 backdrop-blur-sm border border-slate-200/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/60 via-transparent to-white/30 pointer-events-none"}),e.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${R(C.priority)} opacity-80`}),e.jsx($,{className:"pb-3 relative",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1 text-slate-800",children:C.title}),e.jsx("p",{className:"text-xs text-slate-600 mb-3 leading-relaxed",children:C.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{variant:"outline",className:`${k(C.priority)} shadow-sm transition-all duration-200 hover:scale-105 animate-pulse`,children:[F(C.priority),e.jsx("span",{className:"capitalize font-medium",children:C.priority})]}),e.jsxs(U,{variant:"outline",className:"text-xs bg-slate-50 text-slate-700 border-slate-200",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),C.estimatedDuration,"min"]})]})]})})}),e.jsx(T,{className:"pt-0 relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-emerald-50/50 rounded-lg p-2 border border-emerald-100",children:[e.jsxs("span",{className:"text-xs text-emerald-700 font-medium",children:["Category:"," "]}),e.jsx("span",{className:"text-xs font-semibold text-emerald-800",children:C.category})]}),e.jsx("div",{children:e.jsxs(zR,{open:f.has(C.id),onOpenChange:()=>W(C.id),children:[e.jsx(HR,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"sm",className:"w-full justify-between p-2 h-auto bg-slate-50/50 hover:bg-slate-100/50 border border-slate-200/50",children:[e.jsxs("span",{className:"text-xs font-medium text-slate-700",children:["Instructions (",C.instructions.length," ","steps)"]}),f.has(C.id)?e.jsx(f4,{className:"h-3 w-3"}):e.jsx(Go,{className:"h-3 w-3"})]})}),e.jsx(KR,{className:"mt-2",children:e.jsx("ul",{className:"text-xs text-slate-600 space-y-2 max-h-32 overflow-y-auto bg-white/50 rounded-lg p-3 border border-slate-200/50",children:C.instructions.map((V,z)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-100 border border-emerald-300 flex items-center justify-center mt-0.5 flex-shrink-0",children:e.jsx("span",{className:"text-[10px] font-medium text-emerald-700",children:z+1})}),e.jsx("span",{className:"leading-relaxed",children:V})]},z))})}),!f.has(C.id)&&e.jsx("div",{className:"mt-2",children:e.jsx("ul",{className:"text-xs text-slate-600 space-y-1",children:C.instructions.slice(0,2).map((V,z)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-500 font-medium",children:"â€¢"}),e.jsx("span",{className:"truncate",children:V})]},z))})})]})}),e.jsxs(M,{size:"sm",onClick:()=>I(C),className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 hover:scale-105","data-testid":`button-create-task-${C.id}`,children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),"Create Task"]})]})})]},C.id))}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Li,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-slate-500",children:"Try adjusting your search or filter criteria"})]})]})]}),e.jsx(D,{className:"bg-gradient-to-r from-emerald-50 to-emerald-100/50 border border-emerald-200",children:e.jsx(T,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5 text-emerald-600"}),e.jsx("h3",{className:"font-semibold text-emerald-800",children:"Task Template Insights"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["High Priority: ",G.high]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Medium Priority: ",G.medium]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Low Priority: ",G.low]})]})]})]})})}),s.length>0&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(M,{size:"lg",onClick:()=>{E.length>0&&I(E[0])},className:"rounded-full shadow-2xl bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white border-4 border-white hover:scale-110 transition-all duration-300 animate-pulse",children:[e.jsx(es,{className:"h-5 w-5 mr-2"}),"Quick Create"]})}),e.jsx(Ge,{open:r,onOpenChange:n,children:e.jsxs(We,{className:"max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Task from Template"}),e.jsx(Ct,{children:a&&`Create "${a.title}" task. Select a property and assign the task.`})]}),e.jsx(Qt,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(J),className:"space-y-4 overflow-y-auto pr-2",style:{maxHeight:"calc(90vh - 120px)"},children:[e.jsx("input",{type:"hidden",...y.register("propertyId",{required:!0})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Property *"}),e.jsxs(ae,{value:j,onValueChange:C=>{y.setValue("propertyId",C,{shouldValidate:!0})},children:[e.jsx(re,{"data-testid":"select-task-property",children:e.jsx(ie,{placeholder:"Choose a property"})}),e.jsx(ne,{children:O.map(C=>e.jsx(A,{value:C.id.toString(),children:C.name},C.id))})]}),s.length===0&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Showing all ",O.length," properties"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Assign To"}),e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select staff member"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"staff1",children:"John Smith (Maintenance)"}),e.jsx(A,{value:"staff2",children:"Sarah Johnson (Cleaning)"}),e.jsx(A,{value:"staff3",children:"Mike Chen (General)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Due Date"}),e.jsx(Q,{type:"date",...b("dueDate",{required:!0})})]}),e.jsx(ge,{control:y.control,name:"estimatedCost",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Estimated Cost (THB)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",placeholder:"0.00",...C,onChange:V=>{const z=V.target.value;C.onChange(z===""?void 0:parseFloat(z))}})}),e.jsx(Zt,{children:"Optional estimated cost in Thai Baht"}),e.jsx(be,{})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Additional Notes"}),e.jsx(ct,{placeholder:"Any specific instructions or requirements...",...b("notes"),rows:3})]}),e.jsxs(Zs,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(M,{type:"submit",children:"Create Task"})]})]})})]})})]})}function jPe({open:t,onClose:s}){const{toast:r}=st(),[n,a]=v.useState("bookings"),i=Te({mutationFn:async()=>Ne("POST","/api/reports/generate",{type:n}),onSuccess:o=>{r({title:"Report Generated",description:`${n} report has been created successfully`}),s()},onError:o=>{r({title:"Error",description:o.message||"Failed to generate report",variant:"destructive"})}}),l=()=>{i.mutate()};return e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"sm:max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Generate Report"}),e.jsx(Ct,{children:"Select a report type to generate comprehensive analytics"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"report-type",children:"Report Type"}),e.jsxs(ae,{value:n,onValueChange:a,children:[e.jsx(re,{id:"report-type","data-testid":"select-report-type",children:e.jsx(ie,{placeholder:"Select report type"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"bookings",children:"Bookings Report"}),e.jsx(A,{value:"finances",children:"Financial Report"}),e.jsx(A,{value:"tasks",children:"Tasks Report"}),e.jsx(A,{value:"properties",children:"Properties Report"}),e.jsx(A,{value:"occupancy",children:"Occupancy Report"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(M,{onClick:l,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",disabled:i.isPending,"data-testid":"button-generate-report",children:i.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Report"}),e.jsx(M,{variant:"outline",onClick:s,disabled:i.isPending,"data-testid":"button-cancel-report",children:"Cancel"})]})]})]})})}function vPe({open:t,onClose:s}){const{toast:r}=st(),n=pt(),[a,i]=v.useState({name:"",description:"",trigger:"booking_due",action:"email",schedule:"0 9 * * *"}),l=Te({mutationFn:async()=>Ne("POST","/api/automations",a),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/automations"]}),r({title:"Automation Created",description:"Your automation rule has been created successfully"}),s(),i({name:"",description:"",trigger:"booking_due",action:"email",schedule:"0 9 * * *"})},onError:c=>{r({title:"Error",description:c.message||"Failed to create automation",variant:"destructive"})}}),o=()=>{if(!a.name||!a.trigger||!a.action){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l.mutate()};return e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"max-h-[90vh] overflow-y-auto sm:max-w-lg",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Automation"}),e.jsx(Ct,{children:"Set up automated workflows for property management"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"automation-name",children:"Name *"}),e.jsx(Q,{id:"automation-name",placeholder:"e.g., Send booking confirmation",value:a.name,onChange:c=>i({...a,name:c.target.value}),"data-testid":"input-automation-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"automation-description",children:"Description"}),e.jsx(ct,{id:"automation-description",placeholder:"Optional description",value:a.description,onChange:c=>i({...a,description:c.target.value}),"data-testid":"input-automation-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"automation-trigger",children:"Trigger *"}),e.jsxs(ae,{value:a.trigger,onValueChange:c=>i({...a,trigger:c}),children:[e.jsx(re,{id:"automation-trigger","data-testid":"select-automation-trigger",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"booking_due",children:"Booking Check-in Due"}),e.jsx(A,{value:"task_overdue",children:"Task Overdue"}),e.jsx(A,{value:"payment_pending",children:"Payment Pending"}),e.jsx(A,{value:"document_expiring",children:"Document Expiring"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"automation-action",children:"Action *"}),e.jsxs(ae,{value:a.action,onValueChange:c=>i({...a,action:c}),children:[e.jsx(re,{id:"automation-action","data-testid":"select-automation-action",children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"email",children:"Send Email"}),e.jsx(A,{value:"sms",children:"Send SMS"}),e.jsx(A,{value:"push_notification",children:"Push Notification"}),e.jsx(A,{value:"whatsapp",children:"WhatsApp Message"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"automation-schedule",children:"Schedule (Cron Expression)"}),e.jsx(Q,{id:"automation-schedule",placeholder:"e.g., 0 9 * * * (daily at 9 AM)",value:a.schedule,onChange:c=>i({...a,schedule:c.target.value}),"data-testid":"input-automation-schedule"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(M,{onClick:o,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",disabled:l.isPending,"data-testid":"button-create-automation",children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Automation"}),e.jsx(M,{variant:"outline",onClick:s,disabled:l.isPending,"data-testid":"button-cancel-automation",children:"Cancel"})]})]})]})})}function yPe(){const[t,s]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState(null),[l,o]=v.useState(!1),[c,d]=v.useState(null),[u,m]=v.useState(null),[h,x]=v.useState(!1),[f,p]=v.useState(null),[g,y]=v.useState(null),[b,j]=v.useState(!1),{toast:w}=st(),N=async()=>{if(!t||!r){w({title:"Missing Information",description:"Please enter both city and state",variant:"destructive"});return}o(!0);try{const P=await fetch(`/api/rentcast/market/search?city=${encodeURIComponent(t)}&state=${encodeURIComponent(r)}&limit=10`),k=await P.json();if(!P.ok)throw new Error(k.message||"Search failed");i(k),w({title:"Search Complete",description:`Found ${k.propertiesCount} properties in ${t}, ${r}`})}catch(P){w({title:"Search Error",description:P.message||"Failed to search market",variant:"destructive"})}finally{o(!1)}},S=async P=>{d(P),x(!0);try{const k=await fetch(`/api/rentcast/properties/${encodeURIComponent(P.id)}/enrich`),R=await k.json();if(k.ok)m(R);else throw new Error(R.message||"Failed to load details")}catch(k){w({title:"Error",description:k.message||"Failed to load property details",variant:"destructive"})}finally{x(!1)}},O=async P=>{p(P),j(!0);try{const k=await fetch(`/api/rentcast/listings/rental/${encodeURIComponent(P.id)}/enrich`),R=await k.json();if(k.ok)y(R);else throw new Error(R.message||"Failed to load details")}catch(k){w({title:"Error",description:k.message||"Failed to load listing details",variant:"destructive"})}finally{j(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-5 w-5 text-purple-600"}),"Search RentCast Market by City/State"]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"City"}),e.jsx("input",{type:"text",placeholder:"e.g., Los Angeles",value:t,onChange:P=>s(P.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"w-32",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"State"}),e.jsx("input",{type:"text",placeholder:"CA",value:r,onChange:P=>n(P.target.value.toUpperCase()),maxLength:2,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(M,{onClick:N,disabled:l,className:"bg-purple-600 hover:bg-purple-700",children:l?"Searching...":"Search Market"})})]})})]}),a&&e.jsxs("div",{className:"space-y-6",children:[a.marketData&&e.jsxs(D,{className:"bg-gradient-to-br from-purple-50 to-indigo-50",children:[e.jsx($,{children:e.jsxs(L,{children:["Market Statistics - ",a.city,","," ",a.state]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-semibold",children:"Median Rent"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",a.marketData.medianRent?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-indigo-600 font-semibold",children:"Median Price"}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900",children:["$",a.marketData.medianPrice?Math.round(a.marketData.medianPrice/1e3)+"k":"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-semibold",children:"Avg Rent"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",a.marketData.averageRent?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-indigo-600 font-semibold",children:"Total Listings"}),e.jsx("div",{className:"text-2xl font-bold text-indigo-900",children:a.marketData.totalListings?.toLocaleString()||"N/A"})]})]})})]}),a.properties&&a.properties.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{children:["Properties Found (",a.propertiesCount,")"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:a.properties.map((P,k)=>e.jsx("div",{className:"border rounded-lg p-4 bg-slate-50 hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>S(P),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:P.address}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Type:"})," ",e.jsx("span",{className:"font-medium",children:P.propertyType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Beds:"})," ",e.jsx("span",{className:"font-medium",children:P.bedrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Baths:"})," ",e.jsx("span",{className:"font-medium",children:P.bathrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Sq Ft:"})," ",e.jsx("span",{className:"font-medium",children:P.squareFootage?.toLocaleString()||"N/A"})]})]}),P.lastSalePrice&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Last Sale:"}),e.jsxs("span",{className:"font-medium text-emerald-700 ml-2",children:["$",P.lastSalePrice.toLocaleString(),P.lastSaleDate&&` (${new Date(P.lastSaleDate).getFullYear()})`]})]})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"ml-4",children:"View Details â†’"})]})},k))})})]}),a.rentalListings&&a.rentalListings.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{children:["Active Rental Listings (",a.rentalListingsCount,")"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:a.rentalListings.map((P,k)=>e.jsx("div",{className:"border rounded-lg p-4 bg-purple-50 hover:bg-purple-100 transition-colors cursor-pointer",onClick:()=>O(P),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:P.address}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Price:"})," ",e.jsxs("span",{className:"font-bold text-purple-900",children:["$",P.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Beds:"})," ",e.jsx("span",{className:"font-medium",children:P.bedrooms})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Baths:"})," ",e.jsx("span",{className:"font-medium",children:P.bathrooms})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"DOM:"})," ",e.jsxs("span",{className:"font-medium",children:[P.daysOnMarket," days"]})]})]})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"ml-4",children:"View Details â†’"})]})},k))})})]}),(!a.properties||a.properties.length===0)&&(!a.rentalListings||a.rentalListings.length===0)&&e.jsx(D,{children:e.jsx(T,{className:"py-12 text-center text-slate-500",children:"No properties or listings found in this market"})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>d(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:c.address}),e.jsx(M,{variant:"ghost",onClick:()=>d(null),children:"âœ•"})]}),e.jsx("div",{className:"p-6 space-y-6",children:h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading comprehensive property data..."})]}):u?e.jsxs("div",{className:"space-y-6",children:[(u.rentEstimate||u.valueEstimate)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.rentEstimate&&e.jsxs(D,{className:"bg-gradient-to-br from-purple-50 to-purple-100",children:[e.jsx($,{children:e.jsx(L,{className:"text-purple-900",children:"Estimated Monthly Rent"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:["$",u.rentEstimate.estimatedRent?.toLocaleString()]}),u.rentEstimate.rentRangeLow&&u.rentEstimate.rentRangeHigh&&e.jsxs("div",{className:"text-sm text-purple-700",children:["Range: $",u.rentEstimate.rentRangeLow.toLocaleString()," ","- $",u.rentEstimate.rentRangeHigh.toLocaleString()]}),u.rentEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:["Based on"," ",u.rentEstimate.comparablesCount," ","comparable properties"]})]})]}),u.valueEstimate&&e.jsxs(D,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100",children:[e.jsx($,{children:e.jsx(L,{className:"text-indigo-900",children:"Estimated Property Value"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-3xl font-bold text-indigo-900 mb-2",children:["$",u.valueEstimate.estimatedValue?.toLocaleString()]}),u.valueEstimate.valueRangeLow&&u.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-sm text-indigo-700",children:["Range: $",u.valueEstimate.valueRangeLow.toLocaleString()," ","- $",u.valueEstimate.valueRangeHigh.toLocaleString()]}),u.valueEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-xs text-indigo-600 mt-2",children:["Based on"," ",u.valueEstimate.comparablesCount," ","comparable sales"]})]})]})]}),u.propertyDetails&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Property Information"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Property Type"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.propertyType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Square Footage"}),e.jsxs("div",{className:"font-semibold",children:[u.propertyDetails.squareFootage?.toLocaleString()||"N/A"," ","sq ft"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Lot Size"}),e.jsxs("div",{className:"font-semibold",children:[u.propertyDetails.lotSize?.toLocaleString()||"N/A"," ","sq ft"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Year Built"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.yearBuilt||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"County"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.county||"N/A"})]}),u.propertyDetails.lastSalePrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Last Sale"}),e.jsxs("div",{className:"font-semibold text-emerald-700",children:["$",u.propertyDetails.lastSalePrice.toLocaleString(),u.propertyDetails.lastSaleDate&&` (${new Date(u.propertyDetails.lastSaleDate).getFullYear()})`]})]})]})})]}),u.rentEstimate?.comparables&&u.rentEstimate.comparables.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Rental Comparables"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:u.rentEstimate.comparables.map((P,k)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-purple-50",children:[e.jsx("div",{className:"font-medium",children:P.formattedAddress}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Rent:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",P.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Beds/Baths:"})," ",P.bedrooms,"bd / ",P.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Distance:"})," ",P.distance.toFixed(1)," mi"]})]})]},k))})})]}),u.nearbyRentals?.listings&&u.nearbyRentals.listings.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{children:["Nearby Rental Listings (",u.nearbyRentals.count,")"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:u.nearbyRentals.listings.map((P,k)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-indigo-50",children:[e.jsx("div",{className:"font-medium",children:P.address}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Price:"})," ",e.jsxs("span",{className:"font-bold",children:["$",P.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Size:"})," ",P.bedrooms,"bd / ",P.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"DOM:"})," ",P.daysOnMarket," days"]})]})]},k))})})]}),u.marketData&&e.jsxs(D,{className:"bg-gradient-to-br from-emerald-50 to-teal-50",children:[e.jsx($,{children:e.jsx(L,{children:"Local Market Statistics"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.marketData.medianRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Median Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",u.marketData.medianRent.toLocaleString()]})]}),u.marketData.averageRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Avg Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",u.marketData.averageRent.toLocaleString()]})]}),u.marketData.medianPrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Median Price"}),e.jsxs("div",{className:"text-xl font-bold text-teal-900",children:["$",Math.round(u.marketData.medianPrice/1e3),"k"]})]}),u.marketData.inventoryCount&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Inventory"}),e.jsx("div",{className:"text-xl font-bold text-teal-900",children:u.marketData.inventoryCount.toLocaleString()})]})]})})]})]}):e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No detailed data available for this property"})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>p(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:f.address}),e.jsx(M,{variant:"ghost",onClick:()=>p(null),children:"âœ•"})]}),e.jsx("div",{className:"p-6 space-y-6",children:b?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading comprehensive listing data..."})]}):g?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(D,{className:"bg-gradient-to-br from-purple-50 to-purple-100",children:[e.jsx($,{children:e.jsx(L,{className:"text-purple-900",children:"Monthly Rent"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:["$",g.listingDetails?.price?.toLocaleString(),"/mo"]}),e.jsx("div",{className:"text-sm text-purple-700",children:g.listingDetails?.status||"Active"}),e.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:["Listed"," ",g.listingDetails?.daysOnMarket||0," ","days ago"]})]})]}),e.jsxs(D,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100",children:[e.jsx($,{children:e.jsx(L,{className:"text-indigo-900",children:"Property Details"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Type:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:g.listingDetails?.propertyType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Bedrooms:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:g.listingDetails?.bedrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Bathrooms:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:g.listingDetails?.bathrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Square Footage:"})," ",e.jsxs("span",{className:"font-semibold ml-2",children:[g.listingDetails?.squareFootage?.toLocaleString()||"N/A"," ","sq ft"]})]})]})})]})]}),g.comparableListings&&g.comparableListings.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Comparable Rental Listings"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:g.comparableListings.map((P,k)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-purple-50",children:[e.jsx("div",{className:"font-medium",children:P.address}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Rent:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",P.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Size:"})," ",P.bedrooms,"bd / ",P.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"DOM:"})," ",P.daysOnMarket," days"]})]})]},k))})})]}),g.marketData&&e.jsxs(D,{className:"bg-gradient-to-br from-emerald-50 to-teal-50",children:[e.jsx($,{children:e.jsx(L,{children:"Local Market Statistics"})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[g.marketData.medianRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Median Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",g.marketData.medianRent.toLocaleString()]})]}),g.marketData.averageRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Avg Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",g.marketData.averageRent.toLocaleString()]})]}),g.marketData.medianPrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Median Price"}),e.jsxs("div",{className:"text-xl font-bold text-teal-900",children:["$",Math.round(g.marketData.medianPrice/1e3),"k"]})]}),g.marketData.inventoryCount&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Inventory"}),e.jsx("div",{className:"text-xl font-bold text-teal-900",children:g.marketData.inventoryCount.toLocaleString()})]})]})})]}),g.valueEstimate&&e.jsxs(D,{className:"bg-gradient-to-br from-amber-50 to-yellow-50",children:[e.jsx($,{children:e.jsx(L,{className:"text-amber-900",children:"Estimated Property Value"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-3xl font-bold text-amber-900 mb-2",children:["$",g.valueEstimate.estimatedValue?.toLocaleString()]}),g.valueEstimate.valueRangeLow&&g.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-sm text-amber-700",children:["Range: $",g.valueEstimate.valueRangeLow.toLocaleString()," ","- $",g.valueEstimate.valueRangeHigh.toLocaleString()]})]})]})]}):e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No detailed data available for this listing"})})]})})]})}function bPe(){const[t,s]=v.useState(null),[r,n]=v.useState(!1),[a,i]=v.useState(!1),[l,o]=v.useState(!1),[c,d]=v.useState(!0),[u,m]=v.useState({}),{toast:h}=st(),[,x]=or(),f=pt();v.useEffect(()=>{(async()=>{try{console.log("ðŸ“¥ Loading existing Hostaway properties from DB on mount...");const w=await fetch("/api/hostaway/listings",{credentials:"include"});if(w.ok){const N=await w.json();N.success&&N.listings&&N.listings.length>0?(console.log(`âœ… Loaded ${N.listings.length} Hostaway properties from DB`),s(N)):console.log("â„¹ï¸ No previously synced Hostaway properties found")}}catch(w){console.error("Error loading existing Hostaway properties:",w)}finally{d(!1)}})()},[]);const p=async()=>{n(!0);try{const w=await(await fetch("/api/hostaway/test-connection",{credentials:"include"})).json();w.success?h({title:"Connection Successful",description:w.message}):h({variant:"destructive",title:"Connection Failed",description:w.message})}catch(j){h({variant:"destructive",title:"Connection Error",description:j.message||"Failed to test connection"})}finally{n(!1)}},g=async()=>{i(!0),s(null);try{console.log("ðŸ”„ Starting Hostaway properties sync...");const j=await fetch("/api/hostaway/sync-properties",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“¡ [SYNC] Response status:",j.status,j.statusText),j.status===401)throw new Error("Please log in to your account first. Go to the Dashboard and sign in with your credentials.");let w;try{w=await j.json()}catch(O){throw console.error("[SYNC] Failed to parse response as JSON:",O),new Error("Received invalid response from server during sync. Please try again.")}if(console.log("ðŸ“¦ [SYNC] Hostaway sync result:",w),!j.ok||!w.success)throw new Error(w.message||"Failed to sync properties from Hostaway");console.log("ðŸ“¥ Loading Hostaway properties from DB...");const N=await fetch("/api/hostaway/listings",{credentials:"include"});if(console.log("ðŸ“¡ [LISTINGS] Response status:",N.status,N.statusText),console.log("ðŸ“‹ [LISTINGS] Content-Type:",N.headers.get("content-type")),N.status===401)throw new Error("Please log in to your account first. Go to the Dashboard and sign in with your credentials.");let S;try{S=await N.json()}catch(O){throw console.error("[LISTINGS] Failed to parse response as JSON:",O),new Error("Received invalid response from server when loading properties. Please try again.")}if(console.log("ðŸ“¦ [LISTINGS] Hostaway data received:",S),!N.ok||!S.success)throw new Error(S.message||"Failed to load Hostaway properties from database");s(S),h({title:"Sync Complete",description:`Successfully synced ${w.synced??S.count??0} properties from Hostaway`}),f.invalidateQueries({queryKey:["/api/properties"]})}catch(j){console.error("âŒ Hostaway sync error:",j),h({variant:"destructive",title:"Sync Failed",description:j.message||"Failed to sync properties from Hostaway"})}finally{i(!1)}},y=async()=>{o(!0);try{console.log("ðŸ”„ Starting Hostaway bookings sync...");const j=await fetch("/api/hostaway/sync-bookings",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“¡ [BOOKINGS SYNC] Response status:",j.status,j.statusText),j.status===401)throw new Error("Please log in to your account first. Go to the Dashboard and sign in with your credentials.");let w;try{w=await j.json()}catch(N){throw console.error("[BOOKINGS SYNC] Failed to parse response as JSON:",N),new Error("Received invalid response from server during bookings sync. Please try again.")}if(console.log("ðŸ“¦ [BOOKINGS SYNC] Hostaway bookings result:",w),!j.ok||!w.success)throw new Error(w.message||"Failed to sync bookings from Hostaway");h({title:"Bookings Sync Complete",description:`Successfully synced ${w.synced??w.count??0} bookings from Hostaway`}),f.invalidateQueries({queryKey:["/api/bookings"]})}catch(j){console.error("âŒ Hostaway bookings sync error:",j),h({variant:"destructive",title:"Bookings Sync Failed",description:j.message||"Failed to sync bookings from Hostaway"})}finally{o(!1)}},b=t?.backend==="db";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-5 w-5 text-blue-600"}),"Hostaway Properties"]})}),e.jsx(T,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(M,{onClick:p,disabled:r,variant:"outline","data-testid":"button-test-hostaway",children:r?"Testing...":"Test Connection"}),e.jsx(M,{onClick:g,disabled:a,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-sync-hostaway",children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Sync Properties"]})}),e.jsx(M,{onClick:y,disabled:l,className:"bg-emerald-600 hover:bg-emerald-700","data-testid":"button-sync-hostaway-bookings",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing Bookings..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Sync Bookings"]})})]})})]}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-semibold",children:["Hostaway Properties (",t.count,")"]}),e.jsxs(U,{variant:"secondary",className:"text-sm",children:[t.count," Properties"]})]}),t.listings&&t.listings.length===0?e.jsx(D,{children:e.jsxs(T,{className:"py-12 text-center text-slate-500",children:[e.jsx(bs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No properties found in your Hostaway account"})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.listings?.map(j=>{const w=u[j.id]??0;let N=[];Array.isArray(j.images)&&j.images.length>0?N=j.images:Array.isArray(j.listingImages)&&j.listingImages.length>0?N=j.listingImages.map(F=>F?.url).filter(Boolean):j.thumbnailUrl&&(N=[j.thumbnailUrl]);const S=N.length,O=S>0?N[w]:null,P=F=>{if(F.stopPropagation(),F.preventDefault(),S<=1)return;const I=w>0?w-1:S-1;m(W=>({...W,[j.id]:I}))},k=F=>{if(F.stopPropagation(),F.preventDefault(),S<=1)return;const I=w<S-1?w+1:0;m(W=>({...W,[j.id]:I}))},R=b&&!!j.id&&!!j.organizationId;return e.jsxs(D,{className:"overflow-hidden",children:[e.jsxs("div",{className:"relative h-64 w-full bg-slate-200 overflow-hidden",children:[O?e.jsx("div",{className:"w-full h-full",style:{animation:"smoothSlideIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards"},children:e.jsx("img",{src:O,alt:j.name||"Property image",className:"w-full h-full object-cover transition-transform duration-500 ease-out hover:scale-[1.03]",loading:"eager",onError:F=>{F.currentTarget.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23e2e8f0" width="400" height="300"/%3E%3Ctext fill="%2394a3b8" font-family="system-ui" font-size="18" x="50%25" y="50%25" text-anchor="middle" dominant-baseline="middle"%3ENo Image%3C/text%3E%3C/svg%3E'}})},`${j.id}-${w}`):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(bs,{className:"h-16 w-16 text-slate-400"})}),S>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:P,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white text-slate-800 rounded-full p-2 shadow-lg transition-all duration-200 z-10 hover:scale-110","aria-label":"Previous image",type:"button",children:e.jsx(Ka,{className:"h-5 w-5"})}),e.jsx("button",{onClick:k,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/90 hover:bg-white text-slate-800 rounded-full p-2 shadow-lg transition-all duration-200 z-10 hover:scale-110","aria-label":"Next image",type:"button",children:e.jsx(zn,{className:"h-5 w-5"})}),e.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm",children:[w+1," / ",S]})]}),S>1&&e.jsxs("div",{className:"absolute top-3 right-3 bg-black/60 text-white text-xs px-2 py-1 rounded-md backdrop-blur-sm",children:["+",S-1," photos"]})]}),e.jsxs($,{className:"pb-3",children:[e.jsx(L,{className:"text-lg line-clamp-2 leading-tight",children:j.name||j.internalListingName||j.externalListingName}),(j.city||j.country)&&e.jsxs("p",{className:"text-sm text-slate-600 flex items-center gap-1 mt-1",children:[e.jsx(bs,{className:"h-3.5 w-3.5"}),[j.city,j.country].filter(Boolean).join(", ")]})]}),e.jsxs(T,{className:"space-y-3",children:[j.description&&e.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:j.description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.price&&e.jsxs(U,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:["$",j.price,"/night"]}),j.bedroomsNumber&&e.jsxs(U,{variant:"outline",children:[j.bedroomsNumber," bed"]}),j.personCapacity&&e.jsxs(U,{variant:"outline",children:[j.personCapacity," guests"]}),j.bathroomsNumber&&e.jsxs(U,{variant:"outline",children:[j.bathroomsNumber," bath"]}),j.averageReviewRating&&e.jsxs(U,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:["â­ ",j.averageReviewRating]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 pt-2 border-t mt-2",children:[e.jsxs("span",{children:["ID: ",j.externalId||j.id]}),e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsx(M,{variant:"outline",size:"sm",className:"h-7 px-3 text-xs",onClick:()=>x(`/property/${j.id}`),children:"View Details â†’"}),j.airbnbListingUrl&&e.jsx("a",{href:j.airbnbListingUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 hover:underline",children:"Airbnb â†’"})]})]})]})]},j.id)})})]}),c&&!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading Hostaway properties..."})]}),a&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-12 w-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Syncing properties from Hostaway API..."})]})]})}function NPe(){const{user:t}=On(),[,s]=or(),n=new URLSearchParams(window.location.search).get("tab"),[a,i]=v.useState(n||"properties"),[l,o]=v.useState([]),[c,d]=v.useState({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),[u,m]=v.useState(1),[h]=v.useState(12),[x,f]=v.useState(!1),[p,g]=v.useState(!1),[y,b]=v.useState(!1),[j,w]=v.useState(!1),[N,S]=v.useState(!1),O=pt(),{toast:P}=st(),k=Te({mutationFn:async q=>{await Ne("DELETE",`/api/properties/${q}`)},onSuccess:()=>{O.invalidateQueries({queryKey:["/api/properties"]}),P({title:"Success",description:"Property deleted successfully"}),o(q=>q.filter(Se=>Se.id!==k.variables))},onError:q=>{P({title:"Error",description:"Failed to delete property",variant:"destructive"})}}),R=q=>{window.confirm("Are you sure you want to delete this property? This action cannot be undone.")&&k.mutate(q)},F=()=>{d({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),W(null),window.location.search&&window.history.replaceState({},"",window.location.pathname),J(),P({title:"Refreshed",description:"Property list updated and filters reset"})},[I,W]=v.useState(null);v.useEffect(()=>{const Se=new URLSearchParams(window.location.search).get("property");Se&&W(parseInt(Se,10))},[]);const{data:E=[],isLoading:B,isFetching:G,refetch:J}=xe({queryKey:["/api/properties"],staleTime:10*60*1e3});console.log("properties",E);const{data:C=[],isLoading:V}=xe({queryKey:["/api/bookings"],staleTime:10*60*1e3});console.log("bookings from API",C);const{data:z=[]}=xe({queryKey:["/api/property-documents/expiring?days=30"],staleTime:0}),{data:le=[]}=xe({queryKey:["/api/property-insurance/expiring/30"],staleTime:0}),Ce=Array.isArray(E)?E:[],H=Ce.filter(q=>q.source!=="HOSTAWAY");Ce.filter(q=>q.source==="HOSTAWAY");const _=Array.isArray(C)?C:[],{data:se={}}=xe({queryKey:["/api/rentcast/enrich-properties"],enabled:Ce.length>0,staleTime:60*60*1e3}),te=se||{},we=q=>{const Se=z.some(K=>K.propertyId===q),_e=le.some(K=>K.propertyId===q);if(Se||_e){const K=z.find(Le=>Le.propertyId===q&&new Date(Le.expiryDate)<new Date),ke=le.find(Le=>Le.propertyId===q&&new Date(Le.expiryDate)<new Date);return K||ke?"expired":"expiring"}return null},ve=v.useMemo(()=>H.filter(q=>{if(I!==null&&q.id!==I||c.search&&!q.name.toLowerCase().includes(c.search.toLowerCase())||c.location&&!q.address?.toLowerCase().includes(c.location.toLowerCase())||c.status&&q.status!==c.status)return!1;const Se=q.occupancyRate||Math.floor(Math.random()*30)+60;if(Se<c.occupancyMin||Se>c.occupancyMax)return!1;const _e=q.roi||Math.random()*20+5;if(_e<c.roiMin||_e>c.roiMax||c.propertyType&&(q.propertyType||(q.name?.toLowerCase().includes("villa")?"villa":q.name?.toLowerCase().includes("apartment")?"apartment":q.name?.toLowerCase().includes("condo")?"condo":q.name?.toLowerCase().includes("resort")?"resort":"villa"))!==c.propertyType)return!1;if(c.lastBookingFrom||c.lastBookingTo){const K=q.lastBookingDate||"2024-12-15",ke=new Date(K);if(c.lastBookingFrom){const Le=new Date(c.lastBookingFrom);if(ke<Le)return!1}if(c.lastBookingTo){const Le=new Date(c.lastBookingTo);if(ke>Le)return!1}}return!(c.hasMaintenanceTasks&&(q.maintenanceTasks||Math.floor(Math.random()*5))===0)}),[H,c,I]),X=Math.ceil(ve.length/h),ce=v.useMemo(()=>{const q=(u-1)*h;return ve.slice(q,q+h)},[ve,u,h]);v.useEffect(()=>{m(1)},[c]);const Y=()=>{u<X&&m(q=>q+1)},he=(q,Se)=>{o(Se?_e=>[..._e,q]:_e=>_e.filter(K=>K.id!==q.id))},Fe=()=>{l.length===ve.length?o([]):o(ve)},Ve=()=>{o([])},rt=q=>{s(`/property/${q.id}`)},gt=(q,Se)=>{P({title:"Task Created",description:`Created "${q.title}" for property ID ${Se}`})},Vt=Ce.map((q,Se)=>({id:q.id,name:q.name,source:q.source,color:`hsl(${Se*137.5%360}, 70%, 50%)`})),xs=_.map(q=>{const Se=q.propertyId||Math.floor(Math.random()*Ce.length)+1,_e=Ce.find(K=>K.id===Se);return{id:q.id,propertyId:Se,propertyName:_e?.name||q.propertyName||"Unknown Property",guestName:q.guestName||"Guest",guestEmail:q.guestEmail,guestPhone:q.guestPhone,checkIn:q.checkInDate||q.checkIn||"2024-08-01",checkOut:q.checkOutDate||q.checkOut||"2024-08-02",status:q.status||"confirmed",source:q.source,bookingPlatform:q.bookingPlatform,totalAmount:q.totalAmount||0,invoiceId:q.invoiceId,guestId:q.guestId}}),Qs=B||V,ue=G&&Ce.length===0;return Qs||ue?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading Property Hub..."})]})}):e.jsxs("div",{className:"min-h-screen flex bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(zi,{title:"Property Management"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute top-0 left-0 z-50",children:e.jsx(Uc,{fallbackRoute:"/dashboard-hub",forceRoute:!0,variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex items-center justify-between pt-10",children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-3 flex items-center gap-4",children:"ðŸ  Property Management Hub"}),e.jsx("p",{className:"text-lg text-slate-600 mb-2",children:"Enhanced property management with advanced filtering, bulk actions, and calendar views"}),e.jsxs("div",{className:"mt-3 text-sm text-emerald-600 font-medium flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 bg-emerald-500 rounded-full animate-pulse"}),"Connected to Dashboard â€¢ Showing Real Data from API"]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap sm:flex-nowrap",children:[t?.role==="admin"&&e.jsxs(M,{onClick:()=>f(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white hover:scale-105 transition-all duration-200 text-xs sm:text-sm px-2 sm:px-4","data-testid":"button-add-property",children:[e.jsx(ut,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Property"})]}),e.jsxs(M,{variant:"outline",onClick:F,className:"hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-700 hover:scale-105 transition-all duration-200 text-xs sm:text-sm px-2 sm:px-4","data-testid":"button-refresh",children:[e.jsx(Ut,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs(U,{variant:"outline",className:"px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold cursor-pointer hover:bg-emerald-200 hover:scale-105 transition-all duration-200 flex items-center gap-1 sm:gap-2 whitespace-nowrap rounded-lg",onClick:F,"data-testid":"badge-properties-counter",children:[Ce.length,e.jsx("span",{className:"hidden lg:inline",children:" Properties"})]})]})]})]}),e.jsxs(xt,{value:a,onValueChange:i,className:"space-y-6",children:[e.jsx("div",{className:"overflow-x-auto -mx-3 px-3 sm:mx-0 sm:px-0",children:e.jsxs(ht,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-3 lg:grid-cols-5 gap-1",children:[e.jsxs(de,{value:"properties",className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx(h1,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Property"}),"Cards"]}),e.jsxs(de,{value:"hostaway-sync",className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx(bs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Hostaway"]}),e.jsxs(de,{value:"calendar",className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx(Xe,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Calendar View"}),e.jsx("span",{className:"lg:hidden",children:"Calendar"})]}),e.jsxs(de,{value:"templates",className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx(Li,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Templates"]}),e.jsxs(de,{value:"grid",className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 text-xs sm:text-sm whitespace-nowrap",children:[e.jsx(b4,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Tools"]})]})}),e.jsxs(me,{value:"properties",className:"space-y-8",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2"}),e.jsx(xPe,{filters:c,onFiltersChange:d,totalProperties:Ce.length,filteredCount:ve.length}),e.jsx(pPe,{selectedProperties:l,onClearSelection:Ve,onRefresh:J}),ve.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white/50 p-4 rounded-lg border border-slate-200/50 backdrop-blur-sm",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:Fe,className:"hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-700 hover:scale-105 transition-all duration-200",children:[l.length===ve.length?"Deselect All":"Select All","(",ve.length,")"]}),e.jsxs("div",{className:"text-sm text-slate-600 font-medium",children:[l.length," of ",ve.length," ","selected"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:ce.map(q=>e.jsx(lR,{property:q,isSelected:l.some(Se=>Se.id===q.id),onSelect:Se=>he(q,Se),onViewDetails:()=>rt(q),onDelete:()=>R(q.id),expiryStatus:we(q.id),rentcastData:te[q.id]},q.id))}),ve.length>h&&e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-600 bg-white/50 px-4 py-2 rounded-lg border border-slate-200/50 backdrop-blur-sm",children:["Showing"," ",Math.min(u*h,ve.length)," ","of ",ve.length," properties",u<X&&` â€¢ Page ${u} of ${X}`]}),u<X&&e.jsxs(M,{onClick:Y,variant:"outline",size:"lg",className:"bg-emerald-50 hover:bg-emerald-100 border-emerald-200 text-emerald-700 hover:text-emerald-800 hover:scale-105 transition-all duration-200 shadow-sm",children:["ðŸ“„ Load More Properties (",ve.length-u*h," ","remaining)"]}),u>=X&&ve.length>h&&e.jsx("div",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 px-4 py-2 rounded-lg border border-emerald-200",children:"âœ… All properties loaded!"})]}),ve.length===0&&e.jsx("div",{className:"text-center py-12",children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Loading properties..."}),e.jsx("p",{className:"text-slate-600",children:"Please wait while we fetch your properties."})]}):e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No properties found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your filters to see more properties."})]})})]}),e.jsx(me,{value:"rentcast-search",className:"space-y-6",children:e.jsx(yPe,{})}),e.jsx(me,{value:"hostaway-sync",className:"space-y-6",children:e.jsx(bPe,{})}),e.jsx(me,{value:"calendar",children:Vt.length>0?e.jsx(fPe,{properties:Vt,bookings:xs}):G?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Loading Properties..."}),e.jsx("p",{className:"text-slate-600",children:"Please wait while we fetch your calendar data."})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xe,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No Properties Available"}),e.jsx("p",{className:"text-slate-600",children:"Add properties to view the calendar."})]})}),e.jsx(me,{value:"templates",children:e.jsx(gPe,{selectedProperties:l,onCreateTask:gt})}),e.jsxs(me,{value:"grid",className:"space-y-6",children:[e.jsx(D,{className:"bg-gradient-to-r from-emerald-50 via-emerald-100/50 to-emerald-50 backdrop-blur-sm border border-emerald-200/50",children:e.jsx(T,{className:"py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-8 text-sm font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“Š"}),e.jsxs("span",{className:"text-emerald-800",children:["Active Bookings:"," ",e.jsx("strong",{children:_.length})]})]}),e.jsx("div",{className:"text-emerald-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”§"}),e.jsxs("span",{className:"text-emerald-800",children:["Pending Tasks: ",e.jsx("strong",{children:"7"})]})]}),e.jsx("div",{className:"text-emerald-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ¢"}),e.jsxs("span",{className:"text-emerald-800",children:["Total Properties:"," ",e.jsx("strong",{children:Ce.length})]})]})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Properties List",description:"View and manage all properties with detailed information and status",href:"/property-hub",icon:bs,badge:"Core",badgeIcon:"ðŸ ",stats:`${Ce.length} total properties`,actionText:"Add Property",actionIcon:"âž•"},{title:"Calendar & Bookings",description:"Booking calendar, reservations management, and availability tracking",href:"/bookings",icon:Xe,badge:"Bookings",badgeIcon:"ðŸ“…",stats:`${_.length} bookings this week`,actionText:"Create Booking",actionIcon:"ðŸ“…"},{title:"Property Tasks",description:"Task management for cleaning, maintenance, and property operations",href:"/tasks",icon:Li,badge:"Tasks",badgeIcon:"âœ…",stats:"7 open tasks",actionText:"Add Task",actionIcon:"ðŸ“"},{title:"Reports & Analytics",description:"Generate comprehensive reports and analytics with PDF/CSV export capabilities",href:"/reports",icon:h1,badge:"Analytics",badgeIcon:"ðŸ“Š",stats:"3 reports ready",actionText:"Generate Report",actionIcon:"ðŸ“ˆ"},{title:"Automation & Alerts",description:"Smart reminders, AI insights, and automated property management workflows",href:"/automation",icon:Ut,badge:"AI & Auto",badgeIcon:"ðŸ¤–",stats:"5 active rules",actionText:"Setup Alert",actionIcon:"âš¡"}].map(q=>{const Se=q.icon,_e=e.jsxs(D,{className:`h-full flex flex-col group cursor-pointer transition-all duration-500 ease-in-out bg-gradient-to-br from-white via-slate-50/40 to-emerald-50/20 backdrop-blur-sm border border-slate-200/60 hover:border-emerald-300/50 hover:shadow-2xl hover:shadow-emerald-500/30 hover:scale-[1.05] hover:-translate-y-2 relative overflow-hidden ${q.isComingSoon?"opacity-85":""}`,onClick:()=>!q.isComingSoon&&s(q.href),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/70 via-emerald-50/30 to-white/40 opacity-80 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-500/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),q.isComingSoon&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx(U,{className:"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border-yellow-400/50 text-xs shadow-lg backdrop-blur-sm",children:"Coming Soon"})}),e.jsxs($,{className:"pb-3 relative z-10 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-emerald-100/80 via-emerald-50/60 to-white/40 backdrop-blur-sm rounded-xl shadow-xl border border-emerald-200/50 group-hover:shadow-emerald-300/60 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 ease-out flex-shrink-0",children:e.jsx(Se,{className:"h-5 w-5 text-emerald-700 group-hover:text-emerald-800 transition-colors duration-300"})}),e.jsx(L,{className:"text-base font-semibold text-slate-800 group-hover:text-slate-900 transition-colors duration-300 line-clamp-2",children:q.title})]}),e.jsxs(U,{className:"bg-gradient-to-r from-emerald-100/90 via-emerald-50/70 to-white/50 text-emerald-800 border-emerald-300/60 shadow-lg backdrop-blur-sm group-hover:shadow-emerald-200/80 transition-all duration-300 text-xs whitespace-nowrap flex-shrink-0",children:[e.jsx("span",{className:"mr-1",children:q.badgeIcon}),q.badge]})]}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50/80 via-white/60 to-slate-50/80 backdrop-blur-sm rounded-lg p-2.5 border border-slate-200/60 group-hover:border-emerald-200/60 group-hover:bg-gradient-to-r group-hover:from-emerald-50/40 group-hover:via-white/70 group-hover:to-emerald-50/40 transition-all duration-300",children:e.jsx("p",{className:"text-xs font-medium text-slate-700 group-hover:text-emerald-800 transition-colors duration-300 truncate",children:q.stats})})]}),e.jsxs(T,{className:"flex flex-col flex-1 relative z-10 pt-0",children:[e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-700 transition-colors duration-300 line-clamp-3 mb-4 flex-1",children:q.description}),e.jsxs(M,{size:"sm",className:`w-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-emerald-500 hover:from-emerald-600 hover:via-emerald-700 hover:to-emerald-600 text-white shadow-xl hover:shadow-2xl hover:shadow-emerald-500/40 transition-all duration-300 group-hover:scale-105 backdrop-blur-sm border border-emerald-400/30 hover:border-emerald-300/50 mt-auto ${q.isComingSoon?"opacity-60 cursor-not-allowed":""}`,disabled:q.isComingSoon,onClick:K=>{K.stopPropagation(),q.isComingSoon||(q.actionText==="Add Property"?f(!0):q.actionText==="Create Booking"?g(!0):q.actionText==="Add Task"?b(!0):q.actionText==="Generate Report"?w(!0):q.actionText==="Setup Alert"&&S(!0))},children:[e.jsx("span",{className:"mr-2 text-base group-hover:scale-110 transition-transform duration-200",children:q.actionIcon}),q.isComingSoon?"Coming Soon":q.actionText]})]})]},q.href);return q.isComingSoon?e.jsx(dm,{children:e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:_e}),e.jsx(Va,{side:"top",className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white border border-slate-600 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-sm",children:q.title}),e.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Feature launching soon!"}),e.jsx("p",{className:"text-xs text-emerald-300 mt-1",children:"Stay tuned for updates"})]})})]})},q.href):_e})})]})]})]}),e.jsx("footer",{className:"mt-12 border-t border-slate-200 bg-slate-50/30 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-8 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-medium",children:"System Online"})]}),e.jsx("div",{className:"text-slate-400",children:"|"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:"Last Updated: Today"})}),e.jsx("div",{className:"text-slate-400",children:"|"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold text-emerald-600",children:"v2.0.1"})})]})}),e.jsx("div",{className:"text-center text-sm text-slate-500 mt-2",children:"HostPilotPro Property Management â€¢ Enterprise Edition"})]})})]})]}),e.jsx(Hp,{open:x,onOpenChange:f}),e.jsx(wm,{open:p,onOpenChange:g}),e.jsx(Vp,{isOpen:y,onOpenChange:b,defaultPropertyId:I??void 0}),e.jsx(jPe,{open:j,onClose:()=>w(!1)}),e.jsx(vPe,{open:N,onClose:()=>S(!1)})]})}function _j(t){return/^401: .*Unauthorized/.test(t.message)}const wPe=Yt({type:Pe().min(1,"Type is required"),source:Pe().min(1,"Source is required"),sourceType:Pe().optional(),category:Pe().min(1,"Category is required"),subcategory:Pe().optional(),amount:Pe().min(1,"Amount is required"),description:Pe().optional(),date:Pe().min(1,"Date is required"),dueDate:Pe().optional(),status:Pe().default("pending"),propertyId:Pe().optional(),bookingId:Pe().optional(),ownerId:Pe().optional(),agentId:Pe().optional(),referenceNumber:Pe().optional(),isRecurring:Qr().default(!1),recurringType:Pe().optional()}),Ij=[{value:"guest-payment",label:"Guest Payment",icon:Er,description:"Payment received from guests",color:"text-green-600"},{value:"owner-charge",label:"Owner Charge",icon:zt,description:"Expense charged to property owner",color:"text-blue-600"},{value:"company-expense",label:"Company Expense",icon:bs,description:"Business operational expense",color:"text-purple-600"},{value:"complimentary",label:"Complimentary",icon:Qd,description:"Complimentary service or gift",color:"text-orange-600"}],SPe={"booking-payment":"Booking Payment",cleaning:"Cleaning Services",maintenance:"Property Maintenance",utilities:"Utilities",electricity:"Electricity",water:"Water",gas:"Gas",internet:"Internet/WiFi",commission:"Agent Commission","add-on-service":"Add-on Services",massage:"Massage Services","chef-service":"Chef Services",transportation:"Transportation","pool-service":"Pool Maintenance","garden-service":"Garden Maintenance",supplies:"Property Supplies",repairs:"Repairs",insurance:"Insurance","management-fee":"Management Fee",marketing:"Marketing/Advertising",other:"Other"};function CPe({open:t,onOpenChange:s}){const{user:r}=Mr(),{toast:n}=st(),a=pt(),[i,l]=v.useState(!1),o=Wt({resolver:ts(wPe),defaultValues:{type:"expense",source:"",sourceType:"",category:"",subcategory:"",amount:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",status:"pending",propertyId:"",bookingId:"",ownerId:"",agentId:"",referenceNumber:"",isRecurring:!1,recurringType:""}}),{data:c=[]}=xe({queryKey:["/api/properties"],retry:(p,g)=>_j(g)?!1:p<3}),{data:d=[]}=xe({queryKey:["/api/bookings"],retry:(p,g)=>_j(g)?!1:p<3}),u=Te({mutationFn:async p=>{const{referenceNumber:g,isRecurring:y,recurringType:b,...j}=p,w={type:j.type,source:j.source,category:j.category,amount:j.amount,date:j.date,processedBy:r?.id,organizationId:r?.organizationId||"default-org",department:"administration",currency:"THB",status:j.status||"pending"};return j.sourceType&&(w.sourceType=j.sourceType),j.subcategory&&(w.subcategory=j.subcategory),j.description&&(w.description=j.description),j.dueDate&&(w.dueDate=j.dueDate),j.propertyId&&(w.propertyId=parseInt(j.propertyId)),j.bookingId&&(w.bookingId=parseInt(j.bookingId)),j.ownerId&&(w.ownerId=j.ownerId),j.agentId&&(w.agentId=j.agentId),console.log("Creating finance record with data:",w),await Ne("POST","/api/finances",w)},onSuccess:async()=>{sb(a),n({title:"Finance Record Created",description:"The financial record has been added successfully."}),o.reset(),s(!1)},onError:p=>{if(_j(p)){n({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}n({title:"Failed to Create Record",description:"Please check all fields and try again.",variant:"destructive"})}}),m=p=>{u.mutate(p)},h=o.watch("source");o.watch("type");const x=p=>{o.setValue("source",p),l(p==="complimentary"),p!=="complimentary"&&o.setValue("sourceType","")},f=p=>{const g=Ij.find(y=>y.value===p);return g?g.icon:Ze};return e.jsx(Ge,{open:t,onOpenChange:s,children:e.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Qe,{children:e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(tn,{className:"h-5 w-5"}),"Create Financial Record"]})}),e.jsx(Qt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(m),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"font-medium text-sm",children:"Source & Traceability"})]}),e.jsx(ge,{control:o.control,name:"source",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Financial Source *"}),e.jsxs(ae,{onValueChange:x,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select source of funds"})})}),e.jsx(ne,{children:Ij.map(g=>{const y=g.icon;return e.jsx(A,{value:g.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:`h-4 w-4 ${g.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:g.description})]})]})},g.value)})})]}),e.jsx(be,{})]})}),i&&e.jsx(ge,{control:o.control,name:"sourceType",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Complimentary Type"}),e.jsxs(ae,{onValueChange:p.onChange,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select complimentary type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"owner-gift",children:"Owner Gift"}),e.jsx(A,{value:"company-gift",children:"Company Gift"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"referenceNumber",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Reference Number"}),e.jsx(fe,{children:e.jsx(Q,{...p,placeholder:"Invoice #, Receipt #, or external reference",className:"font-mono text-sm"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:o.control,name:"type",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Record Type *"}),e.jsxs(ae,{onValueChange:p.onChange,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"income",children:"Income"}),e.jsx(A,{value:"expense",children:"Expense"}),e.jsx(A,{value:"commission",children:"Commission"}),e.jsx(A,{value:"fee",children:"Fee"}),e.jsx(A,{value:"payout",children:"Payout"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"category",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Category *"}),e.jsxs(ae,{onValueChange:p.onChange,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select category"})})}),e.jsx(ne,{children:Object.entries(SPe).map(([g,y])=>e.jsx(A,{value:g,children:y},g))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"amount",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Amount *"}),e.jsx(fe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{...p,type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"pl-10"})]})}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"date",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Date *"}),e.jsx(fe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{...p,type:"date",className:"pl-10"})]})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:o.control,name:"propertyId",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Property (Optional)"}),e.jsxs(ae,{onValueChange:p.onChange,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})})}),e.jsx(ne,{children:c.map(g=>e.jsx(A,{value:g.id.toString(),children:g.name},g.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:o.control,name:"status",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Status"}),e.jsxs(ae,{onValueChange:p.onChange,value:p.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select status"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"}),e.jsx(A,{value:"scheduled",children:"Scheduled"})]})]}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:o.control,name:"description",render:({field:p})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Description"}),e.jsx(fe,{children:e.jsx(ct,{...p,placeholder:"Additional details about this financial record...",className:"min-h-[80px]"})}),e.jsx(be,{})]})}),h&&e.jsxs("div",{className:"p-3 border rounded-lg bg-blue-50 dark:bg-blue-950",children:[e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const p=f(h),g=Ij.find(y=>y.value===h);return e.jsxs(e.Fragment,{children:[e.jsx(p,{className:`h-4 w-4 ${g?.color||"text-blue-500"}`}),e.jsxs("span",{className:"font-medium text-sm",children:["Record will be tagged as: ",g?.label]})]})})()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Processed by: ",r?.firstName," ",r?.lastName," â€¢ ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:u.isPending,className:"min-w-[100px]",children:u.isPending?"Creating...":"Create Record"})]})]})})]})})}function kPe(){const{toast:t}=st(),{formatWithConversion:s,formatCurrency:r,convertAmount:n}=Rr(),[a,i]=v.useState(!1),[l,o]=v.useState(!1),[c,d]=v.useState(10),[u,m]=v.useState(10),[h,x]=v.useState("all"),[f,p]=v.useState("all"),[g,y]=v.useState(""),[b,j]=v.useState(""),{data:w,isLoading:N}=xe({queryKey:h!=="all"?Tt.finance.analytics(h):Tt.finance.analytics()}),{data:S=[],isLoading:O}=xe({queryKey:h!=="all"?[`/api/finance?propertyId=${h}`]:Tt.finance.all()}),{data:P=[]}=xe({queryKey:Tt.properties.all()}),{data:k=[]}=xe({queryKey:h!=="all"?Tt.bookings.withSource(h):Tt.bookings.withSource()}),{data:R=[]}=xe({queryKey:h!=="all"?[`/api/booking-revenue?propertyId=${h}`]:["/api/booking-revenue"]}),{data:F}=xe({queryKey:h!=="all"?[`/api/service-bookings?propertyId=${h}`]:["/api/service-bookings"]}),I=Array.isArray(F?.bookings)?F.bookings:[],E=new URLSearchParams(window.location.search).get("propertyId");v.useEffect(()=>{E&&x(E)},[E]);const B=E?P.find(_=>_.id===parseInt(E)):null,G=async()=>{i(!0);try{await Promise.all([wt.refetchQueries({predicate:_=>{const se=_.queryKey[0];return typeof se=="string"&&se.includes("/api/finance")}}),wt.refetchQueries({predicate:_=>{const se=_.queryKey[0];return typeof se=="string"&&se.includes("/api/booking-revenue")}}),wt.refetchQueries({predicate:_=>{const se=_.queryKey[0];return typeof se=="string"&&se.includes("/api/service-bookings")}}),wt.refetchQueries({predicate:_=>{const se=_.queryKey[0];return typeof se=="string"&&se.includes("/api/bookings")}})]),t({title:"Refreshed",description:"Finance data has been updated."})}catch{t({title:"Error",description:"Failed to refresh finance data.",variant:"destructive"})}finally{i(!1)}},J=_=>{if(!_)return"BOOKING";const se=_.toUpperCase().trim();return se.includes("HOSTAWAY")?"HOSTAWAY":se.includes("LOCAL")?"LOCAL":se.includes("DIRECT")?"DIRECT":se.includes("RETAIL")?"RETAIL":se||"BOOKING"},C=v.useMemo(()=>{const _=R.filter(Y=>(Y.paymentStatus||"").toLowerCase()==="paid").map(Y=>{const he=parseFloat(Y.finalPayoutAmount||Y.guestBookingPrice||"0"),Fe=J(Y.otaName),Ve=Y.reservationCode||`${Fe}-${Y.id}`,rt=Y.checkInDate||Y.createdAt,gt=rt?new Date(rt).toISOString():new Date().toISOString();return{id:`booking-revenue-${Y.id}`,date:gt,description:`Booking: ${Y.guestName} (${Y.reservationCode||"N/A"})`,amount:he,type:"income",category:"Booking Revenue",propertyId:Y.propertyId,referenceNumber:Ve,currency:Y.currency||"THB",createdAt:Y.createdAt||gt}}),se=k.filter(Y=>{const he=(Y.status||"").toLowerCase(),Fe=J(Y.source),Ve=["confirmed","checked-in","checked-out"].includes(he),rt=["HOSTAWAY","LOCAL","DIRECT","RETAIL"].includes(Fe);return Ve&&rt}).map(Y=>{const he=parseFloat(Y.totalAmount||"0"),Fe=J(Y.source),Ve=Y.checkIn||Y.checkInDate||Y.createdAt,rt=Ve?new Date(Ve).toISOString():new Date().toISOString(),gt=Y.reservationCode||`${Fe}-${Y.id}`;return{id:`booking-${Y.id}`,date:rt,description:`${Fe}: ${Y.guestName} (${Y.reservationCode||"N/A"})`,amount:he,type:"income",category:"Booking Revenue",propertyId:Y.propertyId,referenceNumber:gt,currency:Y.currency||"THB",createdAt:Y.createdAt||rt}}),te=new Set(se.map(Y=>Y.referenceNumber).filter(Boolean)),we=_.filter(Y=>Y.referenceNumber?!te.has(Y.referenceNumber):!0),ve=[...se,...we],X=I.filter(Y=>{const he=Y.billingType||"",Fe=["auto_guest","auto_owner"].includes(he);return Y.priceCents&&Y.priceCents>0&&Fe}).map(Y=>{const he=Y.priceCents?Y.priceCents/100:0,Fe=(Y.status||"pending").toLowerCase(),Ve=Fe==="pending"?" (Pending)":Fe==="completed"?" (Completed)":"";return{id:`service-${Y.id}`,date:Y.scheduledDate||Y.createdAt,description:`Service: ${Y.serviceName||"Add-on Service"} - ${Y.guestName}${Ve}`,amount:he,type:"income",category:"Service Revenue",propertyId:Y.propertyId,referenceNumber:Y.bookingIdRef||void 0,currency:Y.currency||"THB",createdAt:Y.createdAt}});let ce=[...S,...ve,...X];return h!=="all"&&(ce=ce.filter(Y=>String(Y.propertyId)===h)),f!=="all"&&(ce=ce.filter(Y=>Y.category===f)),g&&(ce=ce.filter(Y=>new Date(Y.date)>=new Date(g))),b&&(ce=ce.filter(Y=>new Date(Y.date)<=new Date(b))),ce.sort((Y,he)=>{const Fe=Y.createdAt||Y.date,Ve=he.createdAt||he.date;return new Date(Ve).getTime()-new Date(Fe).getTime()})},[S,R,k,I,h,f,g,b]),V=v.useMemo(()=>{const _=new Set(S.map(se=>se.category));return _.add("Booking Revenue"),_.add("Service Revenue"),Array.from(_).sort()},[S]),z=v.useMemo(()=>C.slice(0,u),[C,u]),le=v.useMemo(()=>k.filter(_=>{const se=parseFloat(_.amountDue||"0"),te=(_.status||"").toLowerCase(),we=te==="pending"||te==="pending_payment"||te==="awaiting_payment";return se>0&&!we}).sort((_,se)=>{const te=_.createdAt||_.checkIn||_.id,we=se.createdAt||se.checkIn||se.id;return new Date(we).getTime()-new Date(te).getTime()}),[k]),Ce=v.useMemo(()=>le.reduce((_,se)=>{const te=parseFloat(se.amountDue||"0"),we=se.currency||"USD",ve=n(te,we);return _+ve},0),[le,n]),H=()=>{x("all"),p("all"),y(""),j("")};return e.jsxs("div",{className:"max-w-7xl mx-auto w-full overflow-x-hidden px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>window.location.href="/dashboard-hub",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:[e.jsx(Xj,{className:"h-4 w-4 mr-2 rotate-[-135deg]"}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"}),e.jsx("span",{className:"sm:hidden text-sm",children:"Dashboard"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[e.jsx("div",{className:"min-w-0 flex-1",children:E&&B?e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 truncate",children:["Finance Hub - ",B.name]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 mt-1",children:"Financial data for this property"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",children:"Finance Hub"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 mt-1",children:"Comprehensive financial management and analytics"})]})}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 flex-wrap sm:flex-nowrap",children:[E&&e.jsxs(M,{variant:"outline",onClick:()=>window.location.href="/finance-hub","data-testid":"button-view-all-finances",className:"text-xs sm:text-sm px-2 sm:px-4",children:[e.jsx("span",{className:"hidden sm:inline",children:"View All Finances"}),e.jsx("span",{className:"sm:hidden",children:"All"})]}),e.jsxs(M,{onClick:G,variant:"outline",disabled:a,"data-testid":"button-refresh-finance",className:"text-xs sm:text-sm px-2 sm:px-4",children:[e.jsx(Ut,{className:`h-3 w-3 sm:h-4 sm:w-4 sm:mr-2 ${a?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs(M,{onClick:()=>o(!0),"data-testid":"button-create-finance",className:"text-xs sm:text-sm px-2 sm:px-4",children:[e.jsx(ut,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Transaction"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4 mb-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-1 sm:pb-2 p-3 sm:p-6",children:[e.jsx(L,{className:"text-xs sm:text-sm font-medium",children:"Total Revenue"}),e.jsx(Ot,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-600"})]}),e.jsxs(T,{className:"p-3 sm:p-6 pt-0",children:[e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600 truncate",children:s(w?.totalRevenue||0,w?.currency||"THB")}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 hidden sm:block",children:["From ",w?.confirmedBookingsCount||0," confirmed bookings"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-1 sm:pb-2 p-3 sm:p-6",children:[e.jsx(L,{className:"text-xs sm:text-sm font-medium",children:"Expenses"}),e.jsx(Yl,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-600"})]}),e.jsxs(T,{className:"p-3 sm:p-6 pt-0",children:[e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-red-600 truncate",children:s(w?.totalExpenses||0,w?.currency||"THB")}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 hidden sm:block",children:["From ",C.filter(_=>_.type==="expense").length," ","expense transactions"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-1 sm:pb-2 p-3 sm:p-6",children:[e.jsx(L,{className:"text-xs sm:text-sm font-medium",children:"Net Profit"}),e.jsx(Ze,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600"})]}),e.jsxs(T,{className:"p-3 sm:p-6 pt-0",children:[e.jsx("div",{className:`text-lg sm:text-2xl font-bold truncate ${(w?.netProfit||0)>=0?"text-green-600":"text-red-600"}`,children:s(w?.netProfit||0,w?.currency||"THB")}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 hidden sm:block",children:[w?.profitMargin?.toFixed(1),"% profit margin"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-1 sm:pb-2 p-3 sm:p-6",children:[e.jsx(L,{className:"text-xs sm:text-sm font-medium",children:"Pending"}),e.jsx(Cn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-orange-600"})]}),e.jsxs(T,{className:"p-3 sm:p-6 pt-0",children:[e.jsx("div",{className:"text-lg sm:text-2xl font-bold text-orange-600 truncate",children:r(n(w?.pendingPayments||0,"THB")+Ce)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 hidden sm:block",children:[w?.pendingBookingsCount||0," pending + ",le.length," outstanding"]})]})]})]}),!E&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{children:"Filters"}),(h!=="all"||f!=="all"||g||b)&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:H,"data-testid":"button-clear-filters",children:[e.jsx(Es,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"property-filter",children:"Property"}),e.jsxs(ae,{value:h,onValueChange:x,children:[e.jsx(re,{id:"property-filter","data-testid":"select-property-filter",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),P.map(_=>e.jsx(A,{value:String(_.id),children:_.name},_.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"category-filter",children:"Category"}),e.jsxs(ae,{value:f,onValueChange:p,children:[e.jsx(re,{id:"category-filter","data-testid":"select-category-filter",children:e.jsx(ie,{placeholder:"All Categories"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Categories"}),V.map(_=>e.jsx(A,{value:_,children:_},_))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"date-from",children:"Date From"}),e.jsx(Q,{id:"date-from",type:"date",value:g,onChange:_=>y(_.target.value),"data-testid":"input-date-from"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"date-to",children:"Date To"}),e.jsx(Q,{id:"date-to",type:"date",value:b,onChange:_=>j(_.target.value),"data-testid":"input-date-to"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Recent Transactions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",z.length," of"," ",C.length," transactions"]})]}),e.jsx(T,{children:O?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin text-gray-400"})}):z.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Cn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters or add a new transaction"})]}):e.jsxs("div",{className:"space-y-3",children:[z.map(_=>{const se=P.find(ve=>ve.id===_.propertyId),te=_.attachments&&_.attachments.length>0,we=_.referenceNumber?.startsWith("TASK-");return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors","data-testid":`transaction-${_.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full ${_.type==="income"?"bg-green-100":"bg-red-100"}`,children:_.type==="income"?e.jsx(Xj,{className:"h-4 w-4 text-green-600"}):e.jsx(L0,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:_.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:new Date(_.date).toLocaleDateString()}),se&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsx("span",{className:"text-sm text-gray-500",children:se.name})]}),e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsx(U,{variant:"outline",className:"text-xs",children:_.category}),we&&e.jsx(Ms,{className:"h-4 w-4 text-blue-600 ml-1",title:"Task expense","data-testid":`task-indicator-${_.id}`}),te&&e.jsx(Sn,{className:"h-4 w-4 text-green-600 ml-1",title:`${_.attachments?.length} evidence photo(s) attached`,"data-testid":`evidence-indicator-${_.id}`})]})]})]}),e.jsxs("div",{className:`text-lg font-semibold ${_.type==="income"?"text-green-600":"text-red-600"}`,children:[_.type==="income"?"+":"-",s(Math.abs(_.amount),_.currency)]})]},_.id)}),u<C.length&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs(M,{variant:"outline",onClick:()=>m(_=>_===10?30:_===30?50:Math.min(_+20,C.length)),className:"flex items-center gap-2","data-testid":"button-show-more-transactions",children:[e.jsx(Go,{className:"h-4 w-4"}),"Show More (",C.length-u," remaining)"]})})]})})]}),e.jsxs(D,{className:"border-l-4 border-l-red-500",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Er,{className:"h-5 w-5 text-red-600"}),"Outstanding Payments"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payments due from bookings"})]}),Ce>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s(Ce,"THB")})]})]})}),e.jsx(T,{children:le.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Sn,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 font-medium",children:"All Payments Up to Date"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No outstanding payments from bookings"})]}):e.jsxs("div",{className:"space-y-3",children:[le.slice(0,c).map(_=>{const se=P.find(ce=>ce.id===_.propertyId),te=parseFloat(_.amountDue||"0"),we=parseFloat(_.totalAmount||"0"),ve=parseFloat(_.amountPaid||"0"),X=we>0?ve/we*100:0;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50/50","data-testid":`outstanding-booking-${_.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:_.guestName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[se&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-600",children:se.name}),e.jsx("span",{className:"text-gray-300",children:"â€¢"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Check-in:"," ",new Date(_.checkIn).toLocaleDateString()]}),e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsx(U,{className:`${_.paymentStatus==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"} text-xs`,children:_.paymentStatus})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${X}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s(ve,_.currency||"THB")," / ",s(we,_.currency||"THB")]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount Due"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:s(te,_.currency||"THB")})]})]},_.id)}),le.length>c&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs(M,{variant:"outline",onClick:()=>{d(_=>_<=10?20:_<=20?40:_<=40?50:le.length)},className:"gap-2","data-testid":"show-more-outstanding",children:[e.jsx(Go,{className:"h-4 w-4"}),"Show More (",le.length-c," remaining)"]})})]})})]})]}),e.jsx(CPe,{open:l,onOpenChange:o})]})}function Q$({endpoints:t=["/api/dashboard/stats","/api/properties","/api/tasks","/api/bookings","/api/finance","/api/finance/analytics","/api/users"],variant:s="outline",size:r="sm",showStats:n=!1,showLastUpdate:a=!1,className:i=""}){const[l,o]=v.useState(!1),{refreshData:c,clearCache:d}=hD(),{toast:u}=st(),m=async()=>{o(!0);try{const x=t.map(async y=>{try{return await c(y),{endpoint:y,success:!0}}catch(b){return console.error(`Failed to refresh ${y}:`,b),{endpoint:y,success:!1,error:b}}}),f=await Promise.allSettled(x),p=f.filter(y=>y.status==="fulfilled").length,g=f.length-p;u({title:"Data Refreshed",description:`Updated ${p} endpoints${g>0?`, ${g} failed`:""}`,variant:g>0?"destructive":"default"})}catch(x){console.error("Data refresh failed:",x),u({title:"Refresh Failed",description:"Unable to refresh data",variant:"destructive"})}finally{o(!1)}},h=vi.getCacheStats();return e.jsxs("div",{className:`flex items-center gap-2 ${i}`,children:[e.jsxs(M,{variant:s,size:r,onClick:m,disabled:l,className:"flex items-center gap-2",children:[e.jsx(Ut,{className:`h-4 w-4 ${l?"animate-spin":""}`}),r!=="sm"&&(l?"Refreshing...":"Refresh Data")]}),n&&e.jsxs(U,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(Ga,{className:"h-3 w-3"}),e.jsxs("span",{children:[h.active," cached"]})]}),a&&e.jsxs(U,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(tt,{className:"h-3 w-3"}),e.jsx("span",{children:"Updated"})]})]})}function PPe(){return xD("/api/dashboard/stats",void 0,{backgroundRefresh:!0,refetchInterval:5*60*1e3})}function APe(){return xD("/api/users",void 0,{backgroundRefresh:!0,refetchInterval:10*60*1e3})}const TPe=v.lazy(()=>br(()=>import("./Settings-DhwvhuW1.js"),__vite__mapDeps([4,1,2]))),DPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>GW),void 0)),OPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>Kke),void 0)),EPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>YNe),void 0)),MPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>JW),void 0)),RPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>MW),void 0)),_Pe=v.lazy(()=>br(()=>import("./AdminGodModeRoleManager-DbjtUSRd.js"),__vite__mapDeps([5,1,2]))),IPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>Kwe),void 0)),$Pe=v.lazy(()=>br(()=>Promise.resolve().then(()=>sQ),void 0)),FPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>pQ),void 0)),LPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>oQ),void 0)),BPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>YPe),void 0)),VPe=v.lazy(()=>br(()=>Promise.resolve().then(()=>Hke),void 0));function qPe(){const[t,s]=v.useState(null);PPe(),APe();const r=[{title:"ðŸ”‘ API Connections",description:"Configure Stripe, Hostaway, OpenAI, Twilio and other third-party API integrations",key:"api-connections",icon:N4,badge:"APIs",color:"bg-emerald-50 hover:bg-emerald-100 border-emerald-300 border-2",component:$Pe},{title:"Settings",description:"General settings, branding, legal templates, and currency & tax configuration",key:"settings",icon:ss,badge:"Core",color:"bg-blue-50 hover:bg-blue-100 border-blue-200",component:TPe},{title:"Staff Management",description:"Manage staff members, roles, permissions, and granular access control across all platform modules",key:"user-management",icon:ot,badge:"Staff",color:"bg-green-50 hover:bg-green-100 border-green-200",component:DPe},{title:"Automation Management",description:"Configure automated workflows, scheduling, and system automation rules",key:"automation-management",icon:es,badge:"Auto",color:"bg-yellow-50 hover:bg-yellow-100 border-yellow-200",component:OPe},{title:"AI Features",description:"AI task management, notifications, feedback monitoring, and smart suggestions",key:"ai-features",icon:Nn,badge:"AI",color:"bg-purple-50 hover:bg-purple-100 border-purple-200",component:EPe},{title:"Activity Logs",description:"System activity monitoring, user actions, and audit trail management",key:"activity-logs",icon:Bs,badge:"Logs",color:"bg-orange-50 hover:bg-orange-100 border-orange-200",component:MPe},{title:"Sandbox Testing",description:"Demo data testing environment and system validation tools",key:"sandbox-testing",icon:z0,badge:"Test",color:"bg-pink-50 hover:bg-pink-100 border-pink-200",component:RPe},{title:"Admin God Mode",description:"Advanced admin controls, role management, and system override capabilities",key:"admin-god-mode-role-manager",icon:Kt,badge:"Admin",color:"bg-red-50 hover:bg-red-100 border-red-200",component:_Pe},{title:"SaaS Management",description:"Multi-tenant organization management, signup requests, and tenant provisioning",key:"saas-management",icon:Ga,badge:"SaaS",color:"bg-indigo-50 hover:bg-indigo-100 border-indigo-200",component:IPe},{title:"System Integrity Check",description:"System health monitoring, integrity scanning, and diagnostic tools",key:"system-integrity-check",icon:Kt,badge:"Diagnostics",color:"bg-red-50 hover:bg-red-100 border-red-200",component:FPe},{title:"AI Operations & Anomalies",description:"AI operations monitoring, anomaly detection, and performance analytics",key:"ai-ops-anomalies",icon:Nn,badge:"AI Ops",color:"bg-purple-50 hover:bg-purple-100 border-purple-200",component:LPe},{title:"Additional Settings",description:"Extended admin configuration options and advanced system settings",key:"additional-settings",icon:ss,badge:"Extended",color:"bg-gray-50 hover:bg-gray-100 border-gray-200",component:BPe},{title:"Upgraded Admin Dashboard",description:"Enhanced admin control center with advanced monitoring capabilities",key:"upgraded-admin-dashboard",icon:$s,badge:"Enhanced",color:"bg-blue-50 hover:bg-blue-100 border-blue-200",component:VPe}],n=i=>{s(i)},a=r.find(i=>i.key===t);if(t&&a){const i=a.component;return e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(zi,{title:a.title}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"p-4 border-b bg-white",children:e.jsxs(M,{variant:"outline",onClick:()=>s(null),className:"flex items-center gap-2",children:[e.jsx(ti,{className:"h-4 w-4"}),"Back to System Hub"]})}),e.jsx(v.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsxs("p",{className:"text-muted-foreground",children:["Loading ",a.title,"..."]})]})}),children:e.jsx(i,{})})]})]})})}return e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(zi,{title:"System Hub"}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"System Hub"}),e.jsx("p",{className:"text-gray-600",children:"Complete system administration suite for user management, automation, and platform configuration"})]}),e.jsx(Q$,{endpoints:["/api/dashboard/stats","/api/users"],variant:"outline",size:"sm",showStats:!0,showLastUpdate:!0})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(i=>{const l=i.icon;return e.jsxs(D,{className:`h-full ${i.color} border-2 transition-all duration-200 hover:scale-105 hover:shadow-lg hover:border-opacity-60 cursor-pointer group`,onClick:()=>n(i.key),children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/50",children:e.jsx(l,{className:"h-6 w-6 text-gray-700"})}),e.jsx("div",{children:e.jsx(L,{className:"text-lg font-semibold text-gray-900",children:i.title})})]}),e.jsx(U,{variant:"secondary",className:"bg-white/70 text-gray-700 border border-gray-300",children:i.badge})]})}),e.jsx(T,{className:"pt-0",children:e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:i.description})})]},i.key)})})]})})]})})}function UPe({size:t="md",className:s=""}){const r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return e.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${r[t]} ${s}`})}function zPe({show:t,text:s="Loadingâ€¦"}){return t?e.jsx("div",{className:"fixed inset-0 z-[1000] grid place-items-center bg-white/70 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border bg-white px-4 py-3 shadow-lg",children:[e.jsx(UPe,{size:"lg",className:"border-t-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:s})]})}):null}function HPe(){const{toast:t}=st(),[s,r]=v.useState(!1),{data:n,isLoading:a,error:i}=xe({queryKey:["/api/system"]}),l=async()=>{r(!0),await wt.invalidateQueries({queryKey:["/api/system"]}),await wt.refetchQueries({queryKey:["/api/system"]}),t({title:"System data refreshed",description:"Latest system information loaded successfully"}),setTimeout(()=>r(!1),500)};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx(zPe,{show:!0,text:"Loading system information..."})]})}):i||!n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-6",children:e.jsxs(D,{className:"max-w-md w-full",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(yr,{className:"h-6 w-6"}),"System Data Unavailable"]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:i instanceof Error?i.message:"No system data available"}),e.jsxs(M,{onClick:l,className:"w-full",children:[e.jsx(Ut,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background p-3 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 sm:space-y-6 overflow-x-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-2 sm:gap-3",children:[e.jsx(ss,{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-blue-600"}),"System Hub"]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Platform administration and system monitoring"})]}),e.jsxs(M,{onClick:l,disabled:s,variant:"outline",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(Ut,{className:`h-3 w-3 sm:h-4 sm:w-4 ${s?"animate-spin":""}`}),e.jsx("span",{className:"hidden xs:inline",children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[e.jsxs(D,{className:"border-2 border-blue-200 bg-blue-50",children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium text-blue-900",children:"System Version"})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:n.version}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"HostPilotPro"})]})]}),e.jsxs(D,{className:"border-2 border-green-200 bg-green-50",children:[e.jsx($,{className:"pb-3",children:e.jsxs(L,{className:"text-sm font-medium text-green-900 flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"System Status"]})}),e.jsxs(T,{children:[e.jsxs(U,{className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Sn,{className:"h-3 w-3 mr-1"}),n.status.toUpperCase()]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"All systems operational"})]})]}),e.jsxs(D,{className:"border-2 border-purple-200 bg-purple-50",children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium text-purple-900",children:"Last Updated"})}),e.jsxs(T,{children:[e.jsx("div",{className:"text-sm font-semibold text-purple-700",children:new Date(n.lastUpdated).toLocaleString()}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Real-time monitoring"})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5 text-yellow-600"}),"System Health"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Database"})]}),e.jsx(U,{className:n.health.database==="healthy"?"bg-green-600":"bg-red-600",children:n.health.database})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cg,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"API"})]}),e.jsx(U,{className:n.health.api==="operational"?"bg-green-600":"bg-red-600",children:n.health.api})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(es,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:"Cache"})]}),e.jsx(U,{className:n.health.cache==="active"?"bg-green-600":"bg-red-600",children:n.health.cache})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-blue-600"}),"Active Modules"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(us,{href:"/property-hub","data-testid":"module-link-properties",children:e.jsx(wd,{icon:bs,name:"Properties",count:n.modules.properties.count,active:n.modules.properties.active,color:"blue",clickable:!0})}),e.jsx(us,{href:"/admin/user-management","data-testid":"module-link-users",children:e.jsx(wd,{icon:ot,name:"Users",count:n.modules.users.count,active:n.modules.users.active,color:"green",clickable:!0})}),e.jsx(us,{href:"/finance-hub","data-testid":"module-link-finance",children:e.jsx(wd,{icon:Ze,name:"Finance",count:n.modules.finance.count,active:n.modules.finance.active,color:"emerald",clickable:!0})}),e.jsx(us,{href:"/ultra-fast-tasks","data-testid":"module-link-tasks",children:e.jsx(wd,{icon:Li,name:"Tasks",count:n.modules.tasks.count,active:n.modules.tasks.active,color:"orange",clickable:!0})}),e.jsx(us,{href:"/bookings-central","data-testid":"module-link-bookings",children:e.jsx(wd,{icon:Xe,name:"Bookings",count:n.modules.bookings.count,active:n.modules.bookings.active,color:"purple",clickable:!0})})]})})]}),n.hostaway&&e.jsxs(D,{className:"border-2 border-teal-200 bg-teal-50",children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2 text-teal-900",children:[e.jsx(Tr,{className:"h-5 w-5 text-teal-600"}),"Hostaway Integration"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-sm text-teal-700 mb-1",children:"Connection Status"}),e.jsx(U,{className:n.hostaway.isConnected?"bg-green-600":"bg-red-600",children:n.hostaway.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(Sn,{className:"h-3 w-3 mr-1"}),"Connected"]}):e.jsxs(e.Fragment,{children:[e.jsx(yr,{className:"h-3 w-3 mr-1"}),"Disconnected"]})})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-sm text-teal-700 mb-1",children:"Synced Properties"}),e.jsx("div",{className:"text-2xl font-bold text-teal-900",children:n.hostaway.properties})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-sm text-teal-700 mb-1",children:"Synced Bookings"}),e.jsx("div",{className:"text-2xl font-bold text-teal-900",children:n.hostaway.bookings})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-sm text-teal-700 mb-1",children:"Last Sync"}),e.jsx("div",{className:"text-sm font-semibold text-teal-900",children:n.hostaway.lastSync?new Date(n.hostaway.lastSync).toLocaleString():"Never"})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(cg,{className:"h-5 w-5 text-purple-600"}),"API Configurations"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(fh,{name:"Stripe",active:n.apiConfigs.hasStripe}),e.jsx(fh,{name:"Hostaway",active:n.apiConfigs.hasHostaway}),e.jsx(fh,{name:"OpenAI",active:n.apiConfigs.hasOpenAI}),e.jsx(fh,{name:"Twilio",active:n.apiConfigs.hasTwilio})]})})]}),e.jsxs(D,{className:"border-2 border-indigo-200 bg-indigo-50",children:[e.jsx($,{children:e.jsx(L,{className:"text-indigo-900",children:"Organization"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Name:"}),e.jsx("span",{className:"text-indigo-900 font-semibold",children:n.organization.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"ID:"}),e.jsx("span",{className:"text-indigo-900 font-mono text-sm",children:n.organization.id})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-5 w-5 text-indigo-600"}),"System Administration"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(us,{href:"/admin/user-management","data-testid":"link-user-management",children:e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-2 border-blue-200 rounded-lg transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ot,{className:"h-6 w-6 text-blue-600 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"User Management"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Create and manage user accounts with role-based access control"})]})}),e.jsx(us,{href:"/admin/api-connections","data-testid":"link-api-connections",children:e.jsxs("div",{className:"p-4 bg-gradient-to-br from-emerald-50 to-emerald-100 hover:from-emerald-100 hover:to-emerald-200 border-2 border-emerald-200 rounded-lg transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(cg,{className:"h-6 w-6 text-emerald-600 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-emerald-900",children:"API Connections"})]}),e.jsx("p",{className:"text-sm text-emerald-700",children:"Configure Stripe, Hostaway, OpenAI, Twilio and other integrations"})]})}),e.jsx(us,{href:"/settings","data-testid":"link-settings",children:e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 border-2 border-purple-200 rounded-lg transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ss,{className:"h-6 w-6 text-purple-600 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-purple-900",children:"System Settings"})]}),e.jsx("p",{className:"text-sm text-purple-700",children:"General settings, branding, legal templates, and configuration"})]})})]})})]})]})})}function wd({icon:t,name:s,count:r,active:n,color:a,clickable:i=!1}){const l={blue:"bg-blue-50 border-blue-200 text-blue-700",green:"bg-green-50 border-green-200 text-green-700",emerald:"bg-emerald-50 border-emerald-200 text-emerald-700",orange:"bg-orange-50 border-orange-200 text-orange-700",purple:"bg-purple-50 border-purple-200 text-purple-700"};return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${l[a]} ${i?"hover:shadow-lg hover:scale-105 transition-all cursor-pointer":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(t,{className:"h-5 w-5"}),n?e.jsx(Sn,{className:"h-4 w-4 text-green-600"}):e.jsx(yr,{className:"h-4 w-4 text-red-600"})]}),e.jsx("div",{className:"font-semibold text-lg",children:s}),e.jsxs("div",{className:"text-sm opacity-80",children:[r," records"]}),i&&e.jsx("div",{className:"text-xs mt-2 font-medium opacity-70",children:"Click to manage â†’"})]})}function fh({name:t,active:s}){return e.jsxs("div",{className:`p-3 rounded-lg border-2 flex items-center justify-between ${s?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("span",{className:"font-medium text-sm",children:t}),s?e.jsx(Sn,{className:"h-4 w-4 text-green-600"}):e.jsx(yr,{className:"h-4 w-4 text-gray-400"})]})}function Y$({userId:t,userRole:s,userEmail:r,userName:n,currentBalance:a,onBalanceReset:i}){const[l,o]=v.useState(!1),[c,d]=v.useState(""),[u,m]=v.useState(null),{user:h}=Mr(),{toast:x}=st(),f=pt();if(h?.role!=="admin"||!["owner","portfolio-manager","retail-agent","referral-agent"].includes(s))return null;const g=Te({mutationFn:async()=>await Ne("GET",`/api/admin/balance-reset/user/${t}/balance`),onSuccess:S=>{m(S),o(!0)},onError:S=>{x({title:"Error",description:S.message||"Failed to fetch balance information",variant:"destructive"})}}),y=Te({mutationFn:async S=>await Ne("POST","/api/admin/balance-reset/execute",S),onSuccess:()=>{x({title:"Balance Reset Successful",description:`${n}'s balance has been reset to zero.`}),f.invalidateQueries({queryKey:["/api/admin/balance-reset"]}),f.invalidateQueries({queryKey:["/api/owner"]}),f.invalidateQueries({queryKey:["/api/agent"]}),f.invalidateQueries({queryKey:["/api/referral"]}),o(!1),d(""),m(null),i?.()},onError:S=>{x({title:"Reset Failed",description:S.message||"Failed to reset user balance",variant:"destructive"})}}),b=()=>{g.mutate()},j=()=>{y.mutate({userId:t,resetReason:c.trim()||void 0})},w=S=>{switch(S){case"owner":return"Property Owner";case"portfolio-manager":return"Portfolio Manager";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";default:return S}},N=S=>{switch(S){case"owner":return"pending payouts and commission deductions";case"portfolio-manager":return"commission earnings and payout requests";case"retail-agent":return"commission earnings and payout requests";case"referral-agent":return"referral commissions and payout requests";default:return"financial balances"}};return e.jsxs(e.Fragment,{children:[e.jsxs(D,{className:"border-red-200 bg-red-50/50",children:[e.jsxs($,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"h-5 w-5 text-red-600"}),e.jsx(L,{className:"text-lg text-red-900",children:"Admin Controls"})]}),e.jsxs(Ee,{className:"text-red-700",children:["Administrative balance management for ",w(s)]})]}),e.jsxs(T,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Current Balance:"}),e.jsx("span",{className:"text-sm text-red-700",children:a!==void 0?`$${a.toFixed(2)}`:"Loading..."})]})}),e.jsx(M,{onClick:b,disabled:g.isPending||y.isPending,variant:"destructive",size:"sm",className:"w-full",children:g.isPending?"Loading Balance...":"Reset Balance to $0"}),e.jsxs("p",{className:"text-xs text-red-600",children:["âš ï¸ This action will clear all ",N(s)," and cannot be undone."]})]})]}),e.jsx(Lw,{open:l,onOpenChange:o,children:e.jsxs(Qf,{children:[e.jsxs(Yf,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-6 w-6 text-red-600"}),e.jsx(Zf,{children:"Confirm Balance Reset"})]}),e.jsxs(Jf,{className:"space-y-3",children:[e.jsxs("div",{children:["Are you sure you want to reset ",e.jsx("strong",{children:n}),"'s balance to zero?"]}),u&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"User:"}),e.jsxs("span",{className:"text-sm",children:[n," (",r,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Role:"}),e.jsx("span",{className:"text-sm",children:w(s)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Balance:"}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:["$",u.currentBalance.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"resetReason",className:"text-sm font-medium",children:"Reason for Reset (optional):"}),e.jsx(ct,{id:"resetReason",placeholder:"Enter reason for balance reset...",value:c,onChange:S=>d(S.target.value),className:"min-h-16"})]}),e.jsxs("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:[e.jsx("strong",{children:"Warning:"})," This action will be logged and cannot be undone."]})]})]}),e.jsxs(Xf,{children:[e.jsx(tg,{onClick:()=>d(""),children:"Cancel"}),e.jsx(eg,{onClick:j,disabled:y.isPending,className:"bg-red-600 hover:bg-red-700",children:y.isPending?"Resetting...":"Reset Balance"})]})]})})]})}const KPe=Yt({checkIn:Pe().min(1,"Check-in date required"),checkOut:Pe().min(1,"Check-out date required"),guests:ms().min(1,"At least 1 guest required"),bedrooms:ms().optional(),priceMin:ms().optional(),priceMax:ms().optional()}),GPe=Yt({propertyId:ms(),guestName:Pe().min(1,"Guest name required"),guestEmail:Pe().email("Valid email required"),guestPhone:Pe().min(1,"Phone number required"),guestCountry:Pe().optional(),checkIn:Pe().min(1,"Check-in date required"),checkOut:Pe().min(1,"Check-out date required"),guests:ms().min(1,"At least 1 guest required"),totalAmount:ms().min(1,"Amount required"),commissionType:Rs(["fixed_percentage","custom_topup"]).default("fixed_percentage"),netPrice:ms().optional(),topupAmount:ms().optional(),bookingPolicy:Rs(["standard","non_refundable"]).default("standard"),paymentMethod:Rs(["stripe_instant","bank_transfer","cash","other"]).default("stripe_instant"),paymentAmount:ms().min(1,"Payment amount required"),dueDate:Pe().optional(),specialRequests:Pe().optional(),notes:Pe().optional()}),WPe=Yt({payoutAmount:ms().min(1,"Amount required"),payoutMethod:Pe().min(1,"Payment method required"),requestNotes:Pe().optional(),agentBankDetails:Pe().min(1,"Bank details required")});function QPe(){const[t,s]=v.useState({checkIn:"",checkOut:"",guests:2}),[r,n]=v.useState(null),[a,i]=v.useState(!1),[l,o]=v.useState(!1),[c,d]=v.useState(!1),[u,m]=v.useState("booking-engine"),[h]=or();v.useEffect(()=>{const V=new URLSearchParams(window.location.search).get("tab");V&&m(V)},[h]);const{toast:x}=st(),f=pt(),{user:p}=Mr(),g=Wt({resolver:ts(KPe),defaultValues:t}),y=Wt({resolver:ts(GPe),defaultValues:{guests:2,totalAmount:0,commissionType:"fixed_percentage",netPrice:0,topupAmount:0,bookingPolicy:"standard",paymentMethod:"stripe_instant",paymentAmount:0,dueDate:""}}),b=Wt({resolver:ts(WPe),defaultValues:{payoutMethod:"bank_transfer"}}),{data:j=[],isLoading:w,error:N}=xe({queryKey:["/api/agent/properties",t],queryFn:async()=>{try{const C=new URLSearchParams;t.checkIn&&C.append("checkIn",t.checkIn),t.checkOut&&C.append("checkOut",t.checkOut),t.guests&&C.append("guests",t.guests.toString()),t.bedrooms&&C.append("bedrooms",t.bedrooms.toString()),t.priceMin&&C.append("priceMin",t.priceMin.toString()),t.priceMax&&C.append("priceMax",t.priceMax.toString());const V=await Ne("GET",`/api/agent/properties?${C.toString()}`);return Array.isArray(V)?V:[]}catch(C){return console.error("Failed to fetch properties:",C),[]}},enabled:!!(t.checkIn&&t.checkOut),retry:2,staleTime:3e4}),{data:S=[],error:O}=xe({queryKey:["/api/agent/bookings"],queryFn:async()=>{try{const C=await Ne("GET","/api/agent/bookings");return Array.isArray(C)?C:[]}catch(C){return console.error("Failed to fetch bookings:",C),[]}},retry:2,staleTime:6e4}),{data:P,error:k}=xe({queryKey:["/api/agent/commission-summary"],queryFn:async()=>{try{return await Ne("GET","/api/agent/commission-summary")||{totalCommissionEarned:0,totalCommissionPaid:0,pendingCommission:0,totalBookings:0,thisMonthCommission:0,thisMonthBookings:0,lastMonthCommission:0,lastMonthBookings:0,averageCommissionPerBooking:0,commissionRate:15,currency:"THB"}}catch(C){return console.error("Failed to fetch commission summary:",C),{totalCommissionEarned:0,totalCommissionPaid:0,pendingCommission:0,totalBookings:0,thisMonthCommission:0,thisMonthBookings:0,lastMonthCommission:0,lastMonthBookings:0,averageCommissionPerBooking:0,commissionRate:15,currency:"THB"}}},retry:2,staleTime:6e4}),{data:R=[],error:F}=xe({queryKey:["/api/agent/payouts"],queryFn:async()=>{try{const C=await Ne("GET","/api/agent/payouts");return Array.isArray(C)?C:[]}catch(C){return console.error("Failed to fetch payouts:",C),[]}},retry:2,staleTime:6e4}),I=Te({mutationFn:C=>{let V=0,z=10;C.commissionType==="fixed_percentage"?V=C.totalAmount*.1:C.commissionType==="custom_topup"&&C.netPrice&&C.totalAmount&&(V=C.totalAmount-C.netPrice,z=V/C.totalAmount*100);const le={...C,propertyId:r?.id||0,commissionAmount:V,commissionRate:z};return Ne("POST","/api/agent/bookings",le)},onSuccess:()=>{x({title:"Success",description:"Booking created successfully with commission calculated!"}),i(!1),y.reset(),n(null),f.invalidateQueries({queryKey:["/api/agent/bookings"]}),f.invalidateQueries({queryKey:["/api/agent/commission-summary"]})},onError:C=>{x({title:"Error",description:C?.message||"Failed to create booking",variant:"destructive"})}}),W=Te({mutationFn:C=>Ne("POST","/api/agent/payouts",C),onSuccess:()=>{x({title:"Success",description:"Payout request submitted!"}),o(!1),b.reset(),f.invalidateQueries({queryKey:["/api/agent/payouts"]})},onError:()=>{x({title:"Error",description:"Failed to submit payout request",variant:"destructive"})}}),E=C=>{s(C)},B=C=>{n(C),y.setValue("propertyId",C.id),y.setValue("checkIn",t.checkIn),y.setValue("checkOut",t.checkOut),y.setValue("guests",t.guests);const V=new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime(),z=Math.ceil(V/(1e3*60*60*24)),le=parseFloat(C.pricePerNight)*z;y.setValue("totalAmount",le);const H=(y.getValues("bookingPolicy")||"standard")==="non_refundable"?le:le*.3;y.setValue("paymentAmount",H),i(!0)},G=C=>{switch(C){case"confirmed":return e.jsx(U,{className:"bg-green-100 text-green-800",children:"Confirmed"});case"pending":return e.jsx(U,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return e.jsx(U,{className:"bg-red-100 text-red-800",children:"Cancelled"});default:return e.jsx(U,{children:C})}},J=C=>{switch(C){case"paid":return e.jsx(U,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return e.jsx(U,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"approved":return e.jsx(U,{className:"bg-blue-100 text-blue-800",children:"Approved"});case"rejected":return e.jsx(U,{className:"bg-red-100 text-red-800",children:"Rejected"});default:return e.jsx(U,{children:C})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Retail Agent Booking Engine"}),e.jsx("p",{className:"text-muted-foreground",children:"Live property booking system with commission tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[P&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"}),e.jsxs("p",{className:"text-lg font-semibold",children:[P.currency||"THB"," ",P.totalCommissionEarned||0]})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Commission"}),e.jsxs("p",{className:"text-lg font-semibold",children:[P.currency||"THB"," ",P.pendingCommission||0]})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"text-lg font-semibold",children:P.totalBookings||0})]})]})})})]}),e.jsxs(M,{variant:"outline",onClick:()=>window.location.href="/api/auth/demo-logout",className:"flex items-center gap-2",children:[e.jsx(vn,{className:"h-4 w-4"}),"Logout"]})]})]}),(N||O||k||F)&&e.jsx(D,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(It,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"API Connection Notice"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Some data may be temporarily unavailable. The system is using fallback data to ensure continued operation.",N&&" Properties data may be limited.",O&&" Booking history may be incomplete.",k&&" Commission data may be delayed.",F&&" Payout information may be outdated."]})]})]})})}),e.jsxs(xt,{value:u,onValueChange:m,className:"space-y-4",children:[e.jsxs(ht,{children:[e.jsx(de,{value:"booking-engine",children:"Live Booking Engine"}),e.jsx(de,{value:"my-bookings",children:"My Reservations"}),e.jsx(de,{value:"commission-tracker",children:"Commission Tracker"}),e.jsx(de,{value:"payout-requests",children:"Payout Requests"})]}),e.jsxs(me,{value:"booking-engine",className:"space-y-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center space-x-2",children:[e.jsx(as,{className:"h-5 w-5"}),e.jsx("span",{children:"Property Search"})]}),e.jsx(Ee,{children:"Search available properties with live availability"})]}),e.jsx(T,{children:e.jsx(Qt,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(E),className:"grid grid-cols-6 gap-4",children:[e.jsx(ge,{control:g.control,name:"checkIn",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Check-in"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:g.control,name:"checkOut",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Check-out"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:g.control,name:"guests",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guests"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",min:"1",...C,onChange:V=>C.onChange(parseInt(V.target.value))})}),e.jsx(be,{})]})}),e.jsx(ge,{control:g.control,name:"bedrooms",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Min Bedrooms"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",min:"0",placeholder:"Any",...C,onChange:V=>C.onChange(V.target.value?parseInt(V.target.value):void 0)})}),e.jsx(be,{})]})}),e.jsx(ge,{control:g.control,name:"priceMax",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Max Price/Night"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",min:"0",placeholder:"Any",...C,onChange:V=>C.onChange(V.target.value?parseFloat(V.target.value):void 0)})}),e.jsx(be,{})]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs(M,{type:"submit",className:"w-full",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Search"]})})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Searching properties..."})]}):j.length===0?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(It,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:t.checkIn&&t.checkOut?"No available properties found for your search criteria":"Enter search criteria to see available properties"})]}):j.map(C=>e.jsxs(D,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:C.images&&C.images.length>0?e.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover"}):e.jsx(vs,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:C.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:C.address})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Fi,{className:"h-4 w-4"}),e.jsxs("span",{children:[C.bedrooms," bed"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ot,{className:"h-4 w-4"}),e.jsxs("span",{children:[C.maxGuests," guests"]})]})]}),C.isAvailable?e.jsx(U,{className:"bg-green-100 text-green-800",children:"Available"}):e.jsx(U,{className:"bg-red-100 text-red-800",children:"Unavailable"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold",children:[C.currency||"THB"," ",parseFloat(C.pricePerNight||0).toLocaleString(),"/night"]}),t.checkIn&&t.checkOut&&e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:["Total: ",C.currency||"THB"," ",(parseFloat(C.pricePerNight||0)*Math.ceil((new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime())/(1e3*60*60*24))).toLocaleString()," for ",Math.ceil((new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime())/(1e3*60*60*24))," nights"]}),C.commission&&e.jsxs("p",{className:"text-sm text-green-600",children:[C.commission,"% commission"]})]}),e.jsx(M,{onClick:()=>B(C),disabled:!C.isAvailable||!t.checkIn||!t.checkOut,size:"sm",children:"Book Now"})]})]})})]},C.id))})]}),e.jsx(me,{value:"my-bookings",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"My Reservations"}),e.jsx(Ee,{children:"Track all your agent reservations and their status"})]}),e.jsx(T,{children:S.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V0,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No bookings found"})]}):e.jsx("div",{className:"space-y-4",children:S.map(C=>e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:C.propertyName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.guestName}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(Sa,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:C.guestEmail})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dates"}),e.jsxs("p",{className:"font-medium",children:[new Date(C.checkIn).toLocaleDateString()," - ",new Date(C.checkOut).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm",children:[C.guests," guests"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount & Commission"}),e.jsxs("p",{className:"font-medium",children:["à¸¿",C.totalAmount]}),e.jsxs("p",{className:"text-sm text-green-600",children:["Commission: à¸¿",C.commissionAmount]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[G(C.bookingStatus),e.jsxs("p",{className:"text-xs mt-1",children:["Commission: ",G(C.commissionStatus)]})]}),C.hostawayBookingId&&e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Tr,{className:"h-4 w-4"})})]})]})})},C.id))})})]})}),e.jsxs(me,{value:"commission-tracker",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"}),e.jsxs("p",{className:"text-2xl font-bold",children:["à¸¿",P?.totalEarned||P?.totalCommissionEarned||0]})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Paid"}),e.jsxs("p",{className:"text-2xl font-bold",children:["à¸¿",P?.totalPaid||P?.totalCommissionPaid||0]})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Balance"}),e.jsxs("p",{className:"text-2xl font-bold",children:["à¸¿",P?.currentBalance||(P?.totalCommissionEarned||0)-(P?.totalCommissionPaid||0)]})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tt,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsxs("p",{className:"text-2xl font-bold",children:["à¸¿",P?.pendingCommissions||P?.pendingCommission||0]})]})]})})})]}),p&&e.jsx(Y$,{userId:p.id,userRole:"retail-agent",userEmail:p.email||"",userName:`${p.firstName||""} ${p.lastName||""}`.trim()||p.email||"",currentBalance:P?.currentBalance,onBalanceReset:()=>{f.invalidateQueries({queryKey:["/api/agent/commission-summary"]}),f.invalidateQueries({queryKey:["/api/agent/payouts"]})}})]}),e.jsxs(me,{value:"payout-requests",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Payout Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Request payouts for your earned commissions"})]}),e.jsxs(Ge,{open:l,onOpenChange:o,children:[e.jsx(hs,{asChild:!0,children:e.jsx(M,{children:"Request Payout"})}),e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Request Commission Payout"}),e.jsx(Ct,{children:"Request a payout for your earned commissions"})]}),e.jsx(Qt,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(C=>W.mutate(C)),className:"space-y-4",children:[e.jsx(ge,{control:b.control,name:"payoutAmount",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Payout Amount"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",placeholder:"0.00",...C,onChange:V=>C.onChange(parseFloat(V.target.value))})}),e.jsx(be,{})]})}),e.jsx(ge,{control:b.control,name:"payoutMethod",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Payment Method"}),e.jsxs(ae,{onValueChange:C.onChange,defaultValue:C.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select payment method"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(A,{value:"paypal",children:"PayPal"}),e.jsx(A,{value:"check",children:"Check"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:b.control,name:"agentBankDetails",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Bank Details"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Enter your bank account details...",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:b.control,name:"requestNotes",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Notes (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Any additional notes...",...C})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:W.isPending,children:W.isPending?"Submitting...":"Submit Request"})]})]})})]})]})]}),e.jsx(D,{children:e.jsx(T,{className:"p-4",children:R.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ze,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No payout requests yet"})]}):e.jsx("div",{className:"space-y-4",children:R.map(C=>e.jsx(D,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["$",C.payoutAmount]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested on ",new Date(C.requestedAt).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm",children:["Method: ",C.payoutMethod]})]}),e.jsxs("div",{className:"text-right",children:[J(C.payoutStatus),C.paidAt&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Paid on ",new Date(C.paidAt).toLocaleDateString()]})]})]})})},C.id))})})})]})]}),e.jsx(Ge,{open:a,onOpenChange:i,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{children:["Create Booking - ",r?.name]}),e.jsx(Ct,{children:"Complete the booking details for your client"})]}),e.jsx(Qt,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(C=>I.mutate(C)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:y.control,name:"guestName",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Name"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Full name",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"guestEmail",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Email"}),e.jsx(fe,{children:e.jsx(Q,{type:"email",placeholder:"email@example.com",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"guestPhone",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Phone Number"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"+1 (555) 123-4567",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"guestCountry",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Country (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Country",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"checkIn",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Check-in Date"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"checkOut",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Check-out Date"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"guests",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Number of Guests"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",min:"1",...C,onChange:V=>C.onChange(parseInt(V.target.value))})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"totalAmount",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Total Amount"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",...C,onChange:V=>C.onChange(parseFloat(V.target.value))})}),e.jsx(be,{})]})})]}),e.jsxs(D,{className:"p-4 bg-blue-50 border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-blue-600"}),"Commission Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(ge,{control:y.control,name:"commissionType",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Commission Type"}),e.jsxs(ae,{onValueChange:C.onChange,defaultValue:C.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select commission type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"fixed_percentage",children:"Fixed 10% Commission"}),e.jsx(A,{value:"custom_topup",children:"Custom Top-up Amount"})]})]}),e.jsx(be,{})]})}),y.watch("commissionType")==="custom_topup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Io,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Important: Top-up Commission Guidelines"})]}),e.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>d(!0),className:"flex items-center gap-1 text-amber-700 border-amber-300 hover:bg-amber-100",children:[e.jsx(dt,{className:"h-3 w-3"}),"Read Me"]})]}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Please read our guidelines before setting custom margins to ensure optimal customer experience."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:y.control,name:"netPrice",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Net Price (USD)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",placeholder:"1050.00",...C,onChange:V=>{C.onChange(parseFloat(V.target.value));const z=parseFloat(V.target.value)||0,le=y.getValues("totalAmount")||0;if(z&&le>z){const Ce=le-z;y.setValue("topupAmount",Ce)}}})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"topupAmount",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Your Commission (Auto-calculated)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",readOnly:!0,className:"bg-gray-100",...C})}),e.jsx(Zt,{children:"Total Amount - Net Price = Your Commission"}),e.jsx(be,{})]})})]})]}),y.watch("commissionType")==="fixed_percentage"&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Fixed 10% Commission:"})," You'll earn 10% of the total booking amount as commission."]}),e.jsxs("p",{className:"text-sm font-medium text-green-600 mt-1",children:["Commission: $",((y.watch("totalAmount")||0)*.1).toFixed(2)]})]}),y.watch("commissionType")==="custom_topup"&&y.watch("netPrice")&&y.watch("totalAmount")&&e.jsx("div",{className:"p-3 bg-white rounded-lg border",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Net Price:"})," $",y.watch("netPrice")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Guest Pays:"})," $",y.watch("totalAmount")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Your Commission:"})," ",e.jsxs("span",{className:"text-green-600 font-medium",children:["$",((y.watch("totalAmount")||0)-(y.watch("netPrice")||0)).toFixed(2)]})]})]})})]})]}),e.jsxs(D,{className:"p-4 bg-green-50 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-green-600"}),"Booking Policy & Payment"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(ge,{control:y.control,name:"bookingPolicy",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Booking Policy"}),e.jsxs(ae,{onValueChange:V=>{C.onChange(V);const z=y.getValues("totalAmount")||0;V==="non_refundable"?y.setValue("paymentAmount",z):y.setValue("paymentAmount",z*.3)},defaultValue:C.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select booking policy"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"standard",children:"Standard - 30% Deposit Required"}),e.jsx(A,{value:"non_refundable",children:"Non-Refundable - Full Payment Required"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"paymentAmount",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Payment Amount (à¸¿)"}),e.jsx(fe,{children:e.jsx(Q,{type:"number",step:"0.01",...C,onChange:V=>C.onChange(parseFloat(V.target.value))})}),e.jsx(Zt,{children:y.watch("bookingPolicy")==="non_refundable"?"Non-refundable: Full payment required upfront":"Standard: 30% deposit required, remaining balance due at check-in"}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"paymentMethod",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Payment Method"}),e.jsxs(ae,{onValueChange:V=>{if(C.onChange(V),V!=="stripe_instant"){const z=new Date;z.setDate(z.getDate()+3),y.setValue("dueDate",z.toISOString().split("T")[0])}else y.setValue("dueDate","")},defaultValue:C.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select payment method"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"stripe_instant",children:"ðŸ’³ Stripe - Instant Payment"}),e.jsx(A,{value:"bank_transfer",children:"ðŸ¦ Bank Transfer"}),e.jsx(A,{value:"cash",children:"ðŸ’µ Cash Payment"}),e.jsx(A,{value:"other",children:"ðŸ“„ Other (Manual Invoice)"})]})]}),e.jsx(be,{})]})}),y.watch("paymentMethod")!=="stripe_instant"&&e.jsx(ge,{control:y.control,name:"dueDate",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Payment Due Date"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...C})}),e.jsx(Zt,{children:"Invoice will be generated with this due date"}),e.jsx(be,{})]})}),e.jsx("div",{className:"p-3 bg-white rounded-lg border",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Booking Amount:"}),e.jsxs("span",{className:"font-medium",children:["à¸¿",y.watch("totalAmount")||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Required Now:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["à¸¿",y.watch("paymentAmount")||0]})]}),y.watch("bookingPolicy")==="standard"&&e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{children:["à¸¿",((y.watch("totalAmount")||0)-(y.watch("paymentAmount")||0)).toFixed(2)]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Your Commission:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["à¸¿",y.watch("commissionType")==="fixed_percentage"?((y.watch("totalAmount")||0)*.1).toFixed(2):((y.watch("totalAmount")||0)-(y.watch("netPrice")||0)).toFixed(2)]})]})})]})})]})]}),e.jsx(ge,{control:y.control,name:"specialRequests",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Special Requests (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Any special requests from the guest...",...C})}),e.jsx(be,{})]})}),e.jsx(ge,{control:y.control,name:"notes",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Agent Notes (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Internal notes about this booking...",...C})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),y.watch("paymentMethod")==="stripe_instant"?e.jsx(M,{type:"submit",disabled:I.isPending,className:"bg-purple-600 hover:bg-purple-700",children:I.isPending?"Processing...":"ðŸ’³ Pay Now with Stripe"}):e.jsx(M,{type:"submit",disabled:I.isPending,children:I.isPending?"Creating...":"Create Booking & Generate Invoice"})]})]})})]})}),e.jsx(Ge,{open:c,onOpenChange:d,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(Io,{className:"h-5 w-5 text-blue-600"}),"Top-up Commission Guidelines"]}),e.jsx(Ct,{children:"Important information about setting custom margins for bookings"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Market-Based Pricing Policy"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Our rates are calculated according to current market conditions and are close to real market values. This ensures fair pricing for both guests and property owners while maintaining competitive positioning."})]}),e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Warning: Excessive Margins"]}),e.jsx("p",{className:"text-amber-700 text-sm mb-2",children:e.jsx("strong",{children:"Setting excessive margins may negatively impact customer experience."})}),e.jsxs("ul",{className:"text-amber-700 text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Higher prices create elevated guest expectations"}),e.jsx("li",{children:"Guests may expect premium services that exceed actual property offerings"}),e.jsx("li",{children:"This disconnect can lead to negative reviews and customer dissatisfaction"}),e.jsx("li",{children:"Poor reviews affect property reputation and future bookings"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Recommended Practice"}),e.jsxs("ul",{className:"text-green-700 text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Keep margins reasonable (typically 10-15% above net price)"}),e.jsx("li",{children:"Consider property amenities and market positioning"}),e.jsx("li",{children:"Ensure guest expectations align with actual offerings"}),e.jsx("li",{children:"Focus on long-term customer satisfaction over short-term profits"}),e.jsx("li",{children:"Use the fixed 10% commission option for standard bookings"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Example Scenarios"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"âœ“ Reasonable:"}),e.jsx("span",{children:"Net $1000 â†’ Guest Pays $1150 (15% margin)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-600",children:"âœ— Excessive:"}),e.jsx("span",{children:"Net $1000 â†’ Guest Pays $1400 (40% margin)"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(M,{onClick:()=>d(!1),children:"I Understand"})})]})})]})}const X$=()=>{const t=[{title:"Activity Logs",description:"View system activity logs and user actions",icon:Bs,href:"/admin/activity-log",badge:null},{title:"Finance Reset",description:"Administrative finance system reset controls",icon:Kt,href:"/admin/finance-reset",badge:null},{title:"AI Notifications & Reminders",description:"Configure AI-powered notifications and reminder systems",icon:Nn,href:"/ai-notifications-reminders",badge:"New"},{title:"Sandbox Testing",description:"Quality assurance testing environment",icon:Bs,href:"/sandbox-testing",badge:"QA"},{title:"System Integrity Check",description:"Verify system health and data integrity",icon:Kt,href:"/admin/system-integrity-check",badge:"QA"},{title:"System-Wide Demo Integration",description:"Demo data management and system integration tools",icon:Ga,href:"/system-wide-demo-integration",badge:"Demo"}];return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Additional Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Administrative tools and advanced configuration options"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2",children:t.map((s,r)=>{const n=s.icon;return e.jsxs(D,{className:"hover:shadow-md transition-shadow",children:[e.jsx($,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(n,{className:"h-5 w-5 text-primary"})}),e.jsx("div",{className:"space-y-1",children:e.jsxs(L,{className:"text-lg flex items-center gap-2",children:[s.title,s.badge&&e.jsx(U,{variant:"secondary",className:"text-xs",children:s.badge})]})})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsx(Ee,{className:"text-sm",children:s.description}),e.jsx(us,{href:s.href,children:e.jsxs(M,{className:"w-full",variant:"outline",children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Open ",s.title]})})]})]},r)})}),e.jsx("div",{className:"mt-8 p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsx("span",{children:"These settings require administrative privileges"})]})})]})},YPe=Object.freeze(Object.defineProperty({__proto__:null,default:X$},Symbol.toStringTag,{value:"Module"}));function JA(){const[t,s]=v.useState("all"),[r,n]=v.useState(null),[a,i]=v.useState(""),{toast:l}=st(),o=pt(),{data:c,isLoading:d}=xe({queryKey:["/api/smart-pricing/dashboard",t],queryFn:()=>Ne("GET",`/api/smart-pricing/dashboard${t!=="all"?`?propertyId=${t}`:""}`)}),{data:u,isLoading:m}=xe({queryKey:["/api/smart-pricing/year-on-year",t],queryFn:()=>Ne("GET",`/api/smart-pricing/year-on-year${t!=="all"?`?propertyId=${t}`:""}`)}),{data:h,isLoading:x}=xe({queryKey:["/api/smart-pricing/holidays"],queryFn:()=>Ne("GET","/api/smart-pricing/holidays"),retry:!1}),f=Array.isArray(h)?h:[],{data:p,isLoading:g}=xe({queryKey:["/api/smart-pricing/price-deviation",t],queryFn:()=>Ne("GET",`/api/smart-pricing/price-deviation${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),{data:y,isLoading:b}=xe({queryKey:["/api/smart-pricing/booking-gaps",t],queryFn:()=>Ne("GET",`/api/smart-pricing/booking-gaps${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),j=Array.isArray(p)?p:[],w=Array.isArray(y)?y:[],{data:N,isLoading:S}=xe({queryKey:["/api/smart-pricing/alerts",t],queryFn:()=>Ne("GET",`/api/smart-pricing/alerts${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),{data:O,isLoading:P}=xe({queryKey:["/api/smart-pricing/ai-summary",t],queryFn:()=>Ne("GET",`/api/smart-pricing/ai-summary${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),k=Array.isArray(N)?N:[],R=Array.isArray(O)?O:[],{data:F,isLoading:I}=xe({queryKey:["/api/smart-pricing/direct-booking",t],queryFn:()=>Ne("GET",`/api/smart-pricing/direct-booking${t!=="all"?`?propertyId=${t}`:""}`)}),{data:W,isLoading:E}=xe({queryKey:["/api/smart-pricing/heatmap",t],queryFn:()=>Ne("GET",`/api/smart-pricing/heatmap${t!=="all"?`?propertyId=${t}`:""}`)}),{data:B,isLoading:G}=xe({queryKey:["/api/smart-pricing/historical-patterns",t],queryFn:()=>Ne("GET",`/api/smart-pricing/historical-patterns${t!=="all"?`?propertyId=${t}`:""}`)}),J=Te({mutationFn:H=>Ne("PATCH",`/api/smart-pricing/alerts/${H}/read`),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/alerts"]}),l({title:"Alert marked as read"})}}),C=Te({mutationFn:({alertId:H,actionTaken:_})=>Ne("PATCH",`/api/smart-pricing/alerts/${H}/resolve`,{actionTaken:_}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/alerts"]}),n(null),i(""),l({title:"Alert resolved successfully"})}}),V=Te({mutationFn:({gapId:H,actionTaken:_})=>Ne("PATCH",`/api/smart-pricing/booking-gaps/${H}/resolve`,{actionTaken:_}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/booking-gaps"]}),l({title:"Booking gap resolved"})}}),z=H=>{switch(H){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}},le=H=>{switch(H){case"high":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"low":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}},Ce=H=>H.startsWith("A")?"text-green-600 dark:text-green-400":H.startsWith("B")?"text-blue-600 dark:text-blue-400":H.startsWith("C")?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return d?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Ut,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading Smart Pricing Toolkit..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Smart Pricing & Performance Toolkit"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered pricing optimization and performance insights for your property portfolio"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"Select property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),e.jsx(A,{value:"999",children:"Villa Demo12345"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(vs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:c?.totalProperties||0})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Active Alerts"}),e.jsx(St,{className:"h-4 w-4 text-orange-500"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c?.activeAlerts||0})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Avg Occupancy"}),e.jsx(ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[c?.avgOccupancyRate||0,"%"]})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Price Opportunities"}),e.jsx(ar,{className:"h-4 w-4 text-green-500"})]}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c?.priceOptimizationOpportunities||0})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Performance Grade"}),e.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(T,{children:e.jsx("div",{className:`text-2xl font-bold ${Ce(c?.recentPerformanceGrade||"C")}`,children:c?.recentPerformanceGrade||"C"})})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"YoY Growth"}),e.jsx(Ot,{className:"h-4 w-4 text-green-500"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",c?.yearOverYearGrowth||0,"%"]})})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(ht,{className:"grid w-full grid-cols-9",children:[e.jsx(de,{value:"overview",children:"ðŸ“Š Overview"}),e.jsx(de,{value:"performance",children:"ðŸ“ˆ Performance"}),e.jsx(de,{value:"holidays",children:"ðŸŒ Holidays"}),e.jsx(de,{value:"pricing",children:"ðŸ’¸ Pricing"}),e.jsx(de,{value:"gaps",children:"ðŸ” Gaps"}),e.jsx(de,{value:"ai-insights",children:"ðŸ§  AI Insights"}),e.jsx(de,{value:"direct-booking",children:"ðŸ” Direct Booking"}),e.jsx(de,{value:"alerts",children:"ðŸ”” Alerts"}),e.jsx(de,{value:"calendar",children:"ðŸ“… Calendar"})]}),e.jsxs(me,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center",children:[e.jsx(St,{className:"mr-2 h-5 w-5 text-orange-500"}),"Critical Alerts"]})}),e.jsx(T,{children:S?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ut,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[k.filter(H=>H.severity==="critical"||H.severity==="high").slice(0,3).map(H=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(It,{className:`h-4 w-4 mt-0.5 ${H.severity==="critical"?"text-red-500":"text-orange-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:H.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:H.message}),e.jsx(U,{className:`text-xs mt-1 ${z(H.severity)}`,children:H.severity.toUpperCase()})]})]},H.id)),(!k||k.length===0)&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No critical alerts"})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center",children:[e.jsx($s,{className:"mr-2 h-5 w-5 text-blue-500"}),"Performance Summary"]})}),e.jsx(T,{children:m?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ut,{className:"h-6 w-6 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:u&&u.length>=2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["à¸¿",Number(u[0]?.totalRevenue||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",((Number(u[0]?.totalRevenue||0)-Number(u[1]?.totalRevenue||0))/Number(u[1]?.totalRevenue||1)*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Occupancy Rate"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[u[0]?.occupancyRate||0,"%"]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",(Number(u[0]?.occupancyRate||0)-Number(u[1]?.occupancyRate||0)).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Daily Rate"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["à¸¿",Number(u[0]?.averageDailyRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",((Number(u[0]?.averageDailyRate||0)-Number(u[1]?.averageDailyRate||0))/Number(u[1]?.averageDailyRate||1)*100).toFixed(1),"%"]})]})]})]})})})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center",children:[e.jsx(Nn,{className:"mr-2 h-5 w-5 text-purple-500"}),"Recent AI Insights"]})}),e.jsx(T,{children:P?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ut,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[R.slice(0,1).map(H=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Performance Grade: "}),e.jsx(U,{className:`${Ce(H.performanceGrade||"C")}`,children:H.performanceGrade})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:H.keyInsights}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"AI Suggestions:"}),e.jsx("ul",{className:"space-y-1",children:H.aiSuggestions?.slice(0,3).map((_,se)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[e.jsx(es,{className:"h-3 w-3 mt-1 mr-2 text-yellow-500 flex-shrink-0"}),_]},se))})]})]},H.id)),(!R||R.length===0)&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No AI insights available"})]})})]})]}),e.jsx(me,{value:"performance",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(Ot,{className:"mr-2 h-5 w-5"}),"Year-on-Year Performance Tracker"]}),e.jsx(Ee,{children:"Compare current performance with the same period last year"})]}),e.jsx(T,{children:m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-6",children:u&&u.length>=2?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm",children:"Total Revenue"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["à¸¿",Number(u[0]?.totalRevenue||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1 text-green-500"}),"+",((Number(u[0]?.totalRevenue||0)-Number(u[1]?.totalRevenue||0))/Number(u[1]?.totalRevenue||1)*100).toFixed(1),"% vs last year"]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm",children:"Occupancy Rate"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[u[0]?.occupancyRate||0,"%"]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1 text-green-500"}),"+",(Number(u[0]?.occupancyRate||0)-Number(u[1]?.occupancyRate||0)).toFixed(1),"% vs last year"]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm",children:"Average Daily Rate"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["à¸¿",Number(u[0]?.averageDailyRate||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1 text-green-500"}),"+",((Number(u[0]?.averageDailyRate||0)-Number(u[1]?.averageDailyRate||0))/Number(u[1]?.averageDailyRate||1)*100).toFixed(1),"% vs last year"]})]})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-2",children:e.jsx(L,{className:"text-sm",children:"Average Lead Time"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[u[0]?.averageLeadTime||0," days"]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Yl,{className:"h-3 w-3 mr-1 text-red-500"}),Number(u[0]?.averageLeadTime||0)-Number(u[1]?.averageLeadTime||0)," days vs last year"]})]})]})]}),Number(u[0]?.totalRevenue||0)<Number(u[1]?.totalRevenue||0)&&e.jsxs(Wn,{children:[e.jsx(St,{className:"h-4 w-4"}),e.jsxs(Qn,{children:["Revenue is down ",((Number(u[1]?.totalRevenue||0)-Number(u[0]?.totalRevenue||0))/Number(u[1]?.totalRevenue||1)*100).toFixed(1),"% compared to the same month last year. Consider reviewing pricing strategy and marketing efforts."]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx($s,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No performance data available for comparison"})]})})})]})}),e.jsx(me,{value:"holidays",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(Xe,{className:"mr-2 h-5 w-5"}),"Global Holiday & Event Awareness"]}),e.jsx(Ee,{children:"Track international holidays and events that impact demand"})]}),e.jsx(T,{children:x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:f&&f.length>0?e.jsx("div",{className:"grid gap-4",children:f.map(H=>e.jsx(D,{children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-medium",children:H.eventName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),new Date(H.eventDate).toLocaleDateString()]}),e.jsx("span",{children:H.country||H.region}),e.jsxs(U,{className:le(H.demandImpact),children:[H.demandImpact," demand"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[Number(H.pricingMultiplier).toFixed(2),"x"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pricing multiplier"})]})]})})},H.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming holidays or events"})]})})})]})}),e.jsx(me,{value:"pricing",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(Ze,{className:"mr-2 h-5 w-5"}),"Internal Price Deviation Checker"]}),e.jsx(Ee,{children:"Identify underpriced and overpriced properties in your portfolio"})]}),e.jsx(T,{children:g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:j&&j.length>0?e.jsx("div",{className:"grid gap-4",children:j.map(H=>e.jsx(D,{className:`border-l-4 ${H.isUnderpriced?"border-l-orange-500":H.isOverpriced?"border-l-red-500":"border-l-green-500"}`,children:e.jsxs(T,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:H.propertyName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Current: à¸¿",Number(H.currentPrice).toLocaleString()]}),H.marketAverage&&e.jsxs("span",{children:["Market Avg: à¸¿",Number(H.marketAverage).toLocaleString()]}),H.portfolioAverage&&e.jsxs("span",{children:["Portfolio Avg: à¸¿",Number(H.portfolioAverage).toLocaleString()]})]}),H.deviationPercentage&&e.jsxs(U,{className:H.isUnderpriced?"bg-orange-100 text-orange-800":H.isOverpriced?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:[Number(H.deviationPercentage)>0?"+":"",Number(H.deviationPercentage).toFixed(1),"% deviation"]})]}),e.jsx("div",{className:"text-right",children:H.recommendedPrice&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["à¸¿",Number(H.recommendedPrice).toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Recommended"}),H.confidence&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(Number(H.confidence)*100).toFixed(0),"% confidence"]})]})})]}),H.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:H.notes})]})},H.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No price deviation analysis available"})]})})})]})}),e.jsx(me,{value:"gaps",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(ar,{className:"mr-2 h-5 w-5"}),"Booking Gap & Undervalued Dates Detector"]}),e.jsx(Ee,{children:"Identify and resolve booking gaps to maximize revenue"})]}),e.jsx(T,{children:b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:w&&w.length>0?e.jsx("div",{className:"grid gap-4",children:w.map(H=>e.jsx(D,{className:`border-l-4 ${H.isResolved?"border-l-green-500":"border-l-orange-500"}`,children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:H.propertyName}),e.jsx(U,{variant:H.isResolved?"default":"secondary",children:H.isResolved?"Resolved":"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Xe,{className:"h-3 w-3 mr-1"}),new Date(H.gapStartDate).toLocaleDateString()," - ",new Date(H.gapEndDate).toLocaleDateString()]}),e.jsxs("span",{children:[H.gapDuration," nights"]}),e.jsx(U,{className:"text-xs",children:H.gapType.replace("_"," ")})]}),H.recommendedAction&&e.jsxs("p",{className:"text-sm text-blue-600",children:["ðŸ’¡ ",H.recommendedAction.replace("_"," ")]})]}),e.jsxs("div",{className:"text-right",children:[H.estimatedRevenueLoss&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:["-à¸¿",Number(H.estimatedRevenueLoss).toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Estimated loss"})]}),!H.isResolved&&e.jsx(M,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{const _=prompt("Enter action taken to resolve this gap:");_&&V.mutate({gapId:H.id,actionTaken:_})},children:"Mark Resolved"})]})]})})},H.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ar,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No booking gaps detected"})]})})})]})}),e.jsx(me,{value:"ai-insights",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(Nn,{className:"mr-2 h-5 w-5"}),"AI-Powered Performance Summary"]}),e.jsx(Ee,{children:"Comprehensive AI analysis of your property performance"})]}),e.jsx(T,{children:P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-6",children:R&&R.length>0?R.map(H=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Performance Grade"}),e.jsx("div",{className:`text-3xl font-bold ${Ce(H.performanceGrade||"C")}`,children:H.performanceGrade})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"AI Confidence"}),e.jsxs("div",{className:"text-xl font-bold",children:[(Number(H.confidenceScore)*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Report Date"}),e.jsx("div",{className:"font-medium",children:new Date(H.summaryDate).toLocaleDateString()})]})]}),H.keyInsights&&e.jsxs(Wn,{children:[e.jsx(Nn,{className:"h-4 w-4"}),e.jsx(Qn,{children:H.keyInsights})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsxs(T,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:H.summaryData?.totalBookings||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Bookings"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[H.summaryData?.averageOccupancy||0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Occupancy"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["à¸¿",H.summaryData?.averageRate||0]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average Rate"})]})}),e.jsx(D,{children:e.jsxs(T,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[H.summaryData?.leadTime||0," days"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Lead Time"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center",children:[e.jsx(es,{className:"mr-2 h-4 w-4 text-yellow-500"}),"AI Suggestions"]}),e.jsx("div",{className:"grid gap-2",children:H.aiSuggestions?.map((_,se)=>e.jsx(D,{children:e.jsx(T,{className:"pt-3",children:e.jsx("p",{className:"text-sm",children:_})})},se))})]}),H.actionItems&&H.actionItems.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4 text-green-500"}),"Recommended Actions"]}),e.jsx("div",{className:"grid gap-2",children:H.actionItems.map((_,se)=>e.jsx(D,{children:e.jsx(T,{className:"pt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:_.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:_.estimatedImpact})]}),e.jsx(U,{className:_.priority==="high"?"bg-red-100 text-red-800":_.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:_.priority})]})})},se))})]})]},H.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No AI performance summary available"})]})})})]})}),e.jsx(me,{value:"direct-booking",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(Yd,{className:"mr-2 h-5 w-5"}),"Direct Booking Price Optimizer"]}),e.jsx(Ee,{children:"Optimize direct booking rates to compete with OTA platforms"})]}),e.jsx(T,{children:I?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:F&&F.length>0?e.jsx("div",{className:"grid gap-4",children:F.map(H=>e.jsx(D,{children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:H.propertyName}),e.jsxs(U,{className:H.conversionPotential==="high"?"bg-green-100 text-green-800":H.conversionPotential==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800",children:[H.conversionPotential," conversion potential"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Direct Rate"}),e.jsxs("div",{className:"text-xl font-bold",children:["à¸¿",Number(H.currentDirectRate).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"OTA Guest Rate"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["à¸¿",Number(H.otaGuestRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Net payout: à¸¿",Number(H.otaNetPayout||0).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Recommended Direct Rate"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["à¸¿",Number(H.recommendedDirectRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["à¸¿",Number(H.competitiveAdvantage||0).toLocaleString()," savings vs OTA"]})]})]}),H.suggestedPerks&&H.suggestedPerks.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Suggested Perks to Add Value:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:H.suggestedPerks.map((_,se)=>e.jsx(U,{variant:"outline",className:"text-xs",children:_},se))})]}),H.otaCommissionRate&&e.jsxs(Wn,{children:[e.jsx(It,{className:"h-4 w-4"}),e.jsxs(Qn,{children:["By pricing direct bookings at à¸¿",Number(H.recommendedDirectRate||0).toLocaleString(),", guests save à¸¿",Number(H.competitiveAdvantage||0).toLocaleString(),"while you avoid the ",Number(H.otaCommissionRate).toFixed(1),"% OTA commission."]})]})]})})},H.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Yd,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No direct booking optimization data available"})]})})})]})}),e.jsxs(me,{value:"alerts",className:"space-y-4",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(St,{className:"mr-2 h-5 w-5"}),"Smart Alert System"]}),e.jsx(Ee,{children:"Real-time alerts for pricing opportunities and performance issues"})]}),e.jsx(T,{children:S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:k&&k.length>0?e.jsx("div",{className:"grid gap-4",children:k.map(H=>e.jsx(D,{className:`border-l-4 ${H.severity==="critical"?"border-l-red-500":H.severity==="high"?"border-l-orange-500":H.severity==="medium"?"border-l-yellow-500":"border-l-blue-500"}`,children:e.jsx(T,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:H.title}),e.jsx(U,{className:z(H.severity),children:H.severity.toUpperCase()}),!H.isRead&&e.jsx(U,{variant:"secondary",className:"text-xs",children:"NEW"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:H.message}),H.propertyName&&e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(vs,{className:"h-3 w-3 mr-1"}),H.propertyName]}),H.recommendedAction&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["ðŸ’¡ ",e.jsx("strong",{children:"Recommended Action:"})," ",H.recommendedAction]})})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[!H.isRead&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>J.mutate(H.id),disabled:J.isPending,children:e.jsx(Bt,{className:"h-3 w-3"})}),!H.isResolved&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>n(H),children:"Resolve"}),H.isResolved&&e.jsx(U,{variant:"default",className:"text-xs",children:"Resolved"})]})]})})},H.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(St,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active alerts"})]})})})]}),r&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{children:["Resolve Alert: ",r.title]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"action",children:"Action Taken"}),e.jsx(ct,{id:"action",placeholder:"Describe the action you took to resolve this alert...",value:a,onChange:H=>i(H.target.value)})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>n(null),children:"Cancel"}),e.jsx(M,{onClick:()=>{a.trim()&&C.mutate({alertId:r.id,actionTaken:a})},disabled:!a.trim()||C.isPending,children:C.isPending?"Resolving...":"Resolve Alert"})]})]})]})]}),e.jsx(me,{value:"calendar",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center",children:[e.jsx(Xe,{className:"mr-2 h-5 w-5"}),"Holiday Heatmap Calendar View"]}),e.jsx(Ee,{children:"Color-coded calendar for strategic pricing decisions"})]}),e.jsx(T,{children:E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ut,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-6 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm",children:"High Demand - Increase Price"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Normal - Maintain Price"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Low Demand - Promote/Reduce"})]})]}),W&&W.length>0?e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(H=>e.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground p-2",children:H},H)),W.slice(0,28).map(H=>{const _=new Date(H.date);return _.getDay(),e.jsx(D,{className:`p-2 cursor-pointer transition-all hover:scale-105 ${H.colorCode==="green"?"bg-green-100 border-green-300":H.colorCode==="yellow"?"bg-yellow-100 border-yellow-300":"bg-red-100 border-red-300"}`,children:e.jsxs(T,{className:"p-0 space-y-1",children:[e.jsx("div",{className:"text-sm font-bold text-center",children:_.getDate()}),e.jsxs("div",{className:"text-xs text-center",children:["à¸¿",Number(H.recommendedRate).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:[Math.round(H.historicalOccupancy),"%"]}),H.events&&H.events.length>0&&e.jsx("div",{className:"text-xs text-center font-medium",children:"ðŸŽ‰"})]})},H.id)})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No heatmap data available"})]})]})})]})})]})]})}const XPe=Yt({requestedAmount:Pe().min(1,"Amount is required"),payoutType:Rs(["full","partial"]),propertyId:ms().optional(),bankAccountName:Pe().min(1,"Account name is required"),bankAccountNumber:Pe().min(1,"Account number is required"),bankName:Pe().min(1,"Bank name is required"),bankBranch:Pe().optional(),routingNumber:Pe().optional(),swiftCode:Pe().optional(),ownerNotes:Pe().optional(),urgencyLevel:Rs(["normal","urgent"]),preferredPayoutDate:ki().optional()}),ZPe=Yt({fromParty:Rs(["owner","management","portfolio_manager"]),fromPartyId:Pe().min(1,"From party ID is required"),toParty:Rs(["owner","management","portfolio_manager"]),toPartyId:Pe().min(1,"To party ID is required"),propertyId:ms().optional(),invoiceDate:ki(),dueDate:ki().optional(),periodStart:ki(),periodEnd:ki(),invoiceType:Rs(["management_fee","expenses","revenue_share","services"]),category:Rs(["rental_income","cleaning","maintenance","utilities","management"]),description:Pe().optional(),headerText:Pe().optional(),footerText:Pe().optional(),ownerNotes:Pe().optional()}),JPe=Yt({description:Pe().min(1,"Description is required"),category:Pe().min(1,"Category is required"),quantity:Pe().default("1"),unitPrice:Pe().min(1,"Unit price is required"),chargeType:Rs(["guest_billable","owner_billable","company_expense","complimentary"]),sourceType:Rs(["booking","service","utility","manual"]).optional(),sourceId:ms().optional(),serviceDate:ki().optional(),referenceNumber:Pe().optional(),vendorName:Pe().optional(),taxable:Qr().default(!0)});function eT(){const[t,s]=v.useState("overview"),[r,n]=v.useState("current"),[a,i]=v.useState(!1),[l,o]=v.useState(!1),[c,d]=v.useState(!1),[u,m]=v.useState(null),[h,x]=v.useState(null),[f,p]=v.useState("all"),{toast:g}=st(),y=pt(),b=Wt({resolver:ts(XPe),defaultValues:{payoutType:"full",urgencyLevel:"normal"}}),j=Wt({resolver:ts(ZPe),defaultValues:{fromParty:"management",toParty:"owner",invoiceType:"revenue_share",category:"rental_income",invoiceDate:new Date,periodStart:new Date,periodEnd:new Date}}),w=Wt({resolver:ts(JPe),defaultValues:{description:"",category:"",quantity:"1",unitPrice:"",chargeType:"owner_billable",referenceNumber:"",vendorName:"",taxable:!0}}),{data:N}=xe({queryKey:["/api/owner-invoicing/analytics",h,r],queryFn:()=>Ne("GET",`/api/owner-invoicing/analytics?${new URLSearchParams({...h&&{propertyId:h.toString()},period:r})}`)}),{data:S}=xe({queryKey:["/api/owner-balance",h],queryFn:()=>Ne("GET",`/api/owner-balance?${new URLSearchParams({...h&&{propertyId:h.toString()}})}`)}),{data:O}=xe({queryKey:["/api/owner-payout-requests",f,h],queryFn:()=>Ne("GET",`/api/owner-payout-requests?${new URLSearchParams({...f!=="all"&&{status:f},...h&&{propertyId:h.toString()}})}`),retry:!1}),P=Array.isArray(O)?O:[],{data:k}=xe({queryKey:["/api/owner-invoices",f,h],queryFn:()=>Ne("GET",`/api/owner-invoices?${new URLSearchParams({...f!=="all"&&{status:f},...h&&{propertyId:h.toString()}})}`),retry:!1}),R=Array.isArray(k)?k:[],{data:F}=xe({queryKey:["/api/properties"]}),{data:I}=xe({queryKey:["/api/users"]}),{data:W}=xe({queryKey:["/api/owner-invoices",u?.id,"line-items"],queryFn:()=>u?Ne("GET",`/api/owner-invoices/${u.id}/line-items`):null,enabled:!!u}),E=Te({mutationFn:_=>Ne("POST","/api/owner-payout-requests",_),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/owner-payout-requests"]}),y.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),i(!1),b.reset(),g({title:"Success",description:"Payout request created successfully"})},onError:_=>{g({title:"Error",description:_.message||"Failed to create payout request",variant:"destructive"})}}),B=Te({mutationFn:({id:_,...se})=>Ne("PUT",`/api/owner-payout-requests/${_}`,se),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/owner-payout-requests"]}),y.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),g({title:"Success",description:"Payout request updated successfully"})},onError:_=>{g({title:"Error",description:_.message||"Failed to update payout request",variant:"destructive"})}}),G=Te({mutationFn:_=>Ne("POST","/api/owner-invoices",_),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/owner-invoices"]}),y.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),o(!1),j.reset(),g({title:"Success",description:"Invoice created successfully"})},onError:_=>{g({title:"Error",description:_.message||"Failed to create invoice",variant:"destructive"})}}),J=Te({mutationFn:({invoiceId:_,...se})=>Ne("POST",`/api/owner-invoices/${_}/line-items`,se),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/owner-invoices",u?.id,"line-items"]}),y.invalidateQueries({queryKey:["/api/owner-invoices"]}),d(!1),w.reset(),g({title:"Success",description:"Line item added successfully"})},onError:_=>{g({title:"Error",description:_.message||"Failed to add line item",variant:"destructive"})}});Te({mutationFn:_=>Ne("POST","/api/owner-invoices/generate-from-bookings",_),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/owner-invoices"]}),y.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),g({title:"Success",description:"Invoice generated from booking data successfully"})},onError:_=>{g({title:"Error",description:_.message||"Failed to generate invoice",variant:"destructive"})}});const C=_=>{const te={pending:{variant:"secondary",icon:tt},approved:{variant:"default",icon:Ie},processing:{variant:"default",icon:pl},completed:{variant:"default",icon:Ie},rejected:{variant:"destructive",icon:yr},draft:{variant:"secondary",icon:Nr},sent:{variant:"default",icon:dt},viewed:{variant:"default",icon:Bt},paid:{variant:"default",icon:Ie},overdue:{variant:"destructive",icon:St},cancelled:{variant:"destructive",icon:yr}}[_]||{variant:"secondary",icon:tt},we=te.icon;return e.jsxs(U,{variant:te.variant,className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"}),_.charAt(0).toUpperCase()+_.slice(1)]})},V=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(typeof _=="string"?parseFloat(_):_),z=_=>{const se={..._,requestedAmount:_.requestedAmount,availableBalance:S?.currentBalance||"0",preferredPayoutDate:_.preferredPayoutDate?.toISOString().split("T")[0]};E.mutate(se)},le=_=>{const se={..._,invoiceDate:_.invoiceDate.toISOString().split("T")[0],dueDate:_.dueDate?.toISOString().split("T")[0],periodStart:_.periodStart.toISOString().split("T")[0],periodEnd:_.periodEnd.toISOString().split("T")[0],subtotal:"0",totalAmount:"0"};G.mutate(se)},Ce=_=>{const se=parseFloat(_.quantity)*parseFloat(_.unitPrice),te={..._,invoiceId:u.id,lineTotal:se.toString(),serviceDate:_.serviceDate?.toISOString().split("T")[0]};J.mutate(te)},H=(_,se)=>{B.mutate({id:_,status:se})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(Ub,{role:"admin",className:"mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Owner Invoicing & Payouts"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive owner financial integration with automated invoicing and payout management"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{value:h?.toString()||"all",onValueChange:_=>x(_==="all"?null:parseInt(_)),children:[e.jsx(re,{className:"w-[200px]",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),F?.map(_=>e.jsx(A,{value:_.id.toString(),children:_.name},_.id))]})]}),e.jsxs(M,{onClick:()=>i(!0),children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Request Payout"]})]})]}),N&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Current Balance"}),e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.currentBalance?V(N.currentBalance.currentBalance):"$0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for payout"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Payout Requests"}),e.jsx(pl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalPayoutRequests}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.pendingPayoutRequests," pending"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Invoices"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalInvoices}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.unpaidInvoices," unpaid"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Performance"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.completedPayoutRequests}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed payouts"})]})]})]}),e.jsxs(xt,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"balance",children:"Balance"}),e.jsx(de,{value:"payouts",children:"Payout Requests"}),e.jsx(de,{value:"invoices",children:"Invoices"}),e.jsx(de,{value:"analytics",children:"Analytics"})]}),e.jsx(me,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Recent Payout Requests"}),e.jsx(Ee,{children:"Latest payout requests and their status"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[N?.recentPayoutRequests?.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:V(_.requestedAmount)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:et(new Date(_.requestedAt),"MMM dd, yyyy")})]}),C(_.status)]},_.id)),(!N?.recentPayoutRequests||N.recentPayoutRequests.length===0)&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No recent payout requests"})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Recent Invoices"}),e.jsx(Ee,{children:"Latest invoices and payment status"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[N?.recentInvoices?.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_.invoiceNumber}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[V(_.totalAmount)," â€¢ ",et(new Date(_.invoiceDate),"MMM dd, yyyy")]})]}),C(_.status)]},_.id)),(!N?.recentInvoices||N.recentInvoices.length===0)&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No recent invoices"})]})})]})]})}),e.jsx(me,{value:"balance",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Owner Balance Details"}),e.jsx(Ee,{children:"Detailed breakdown of current balance and financial activity"})]}),e.jsx(T,{children:S?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:V(S.currentBalance)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:V(S.pendingRevenue)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold",children:V(S.totalExpenses)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Management Fees"}),e.jsx("p",{className:"text-2xl font-bold",children:V(S.managementFees)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Rental Income"}),e.jsx("p",{className:"text-2xl font-bold",children:V(S.monthlyRentalIncome)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Utilities"}),e.jsx("p",{className:"text-2xl font-bold",children:V(S.monthlyUtilities)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Maintenance"}),e.jsx("p",{className:"text-2xl font-bold",children:V(S.monthlyMaintenance)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Payout"}),e.jsx("p",{className:"text-2xl font-bold",children:S.lastPayoutAmount?V(S.lastPayoutAmount):"None"}),S.lastPayoutDate&&e.jsx("p",{className:"text-xs text-muted-foreground",children:et(new Date(S.lastPayoutDate),"MMM dd, yyyy")})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No balance data available"})})})]})}),e.jsxs(me,{value:"payouts",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs(ae,{value:f,onValueChange:p,children:[e.jsx(re,{className:"w-[150px]",children:e.jsx(ie,{placeholder:"Filter by status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"approved",children:"Approved"}),e.jsx(A,{value:"processing",children:"Processing"}),e.jsx(A,{value:"completed",children:"Completed"}),e.jsx(A,{value:"rejected",children:"Rejected"})]})]})}),e.jsxs(M,{onClick:()=>i(!0),children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"New Payout Request"]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Payout Requests"}),e.jsx(Ee,{children:"Manage your payout requests and track their status"})]}),e.jsx(T,{children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Request Date"}),e.jsx(Oe,{children:"Amount"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsxs(zs,{children:[P?.map(_=>e.jsxs(Nt,{children:[e.jsx(De,{children:et(new Date(_.requestedAt),"MMM dd, yyyy")}),e.jsx(De,{className:"font-medium",children:V(_.requestedAmount)}),e.jsx(De,{children:e.jsx(U,{variant:"outline",children:_.payoutType})}),e.jsx(De,{children:F?.find(se=>se.id===_.propertyId)?.name||"All Properties"}),e.jsx(De,{children:C(_.status)}),e.jsx(De,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Bt,{className:"w-4 h-4"})}),_.status==="pending"&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>H(_.id,"cancelled"),children:"Cancel"})]})})]},_.id)),(!P||P.length===0)&&e.jsx(Nt,{children:e.jsx(De,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No payout requests found"})})]})]})})]})]}),e.jsxs(me,{value:"invoices",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs(ae,{value:f,onValueChange:p,children:[e.jsx(re,{className:"w-[150px]",children:e.jsx(ie,{placeholder:"Filter by status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"draft",children:"Draft"}),e.jsx(A,{value:"sent",children:"Sent"}),e.jsx(A,{value:"viewed",children:"Viewed"}),e.jsx(A,{value:"paid",children:"Paid"}),e.jsx(A,{value:"overdue",children:"Overdue"})]})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Create Invoice"]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Owner Invoices"}),e.jsx(Ee,{children:"View and manage invoices between owners and management"})]}),e.jsx(T,{children:e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Invoice #"}),e.jsx(Oe,{children:"Date"}),e.jsx(Oe,{children:"From"}),e.jsx(Oe,{children:"To"}),e.jsx(Oe,{children:"Amount"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsxs(zs,{children:[R?.map(_=>e.jsxs(Nt,{children:[e.jsx(De,{className:"font-medium",children:_.invoiceNumber}),e.jsx(De,{children:et(new Date(_.invoiceDate),"MMM dd, yyyy")}),e.jsx(De,{children:e.jsx(U,{variant:"outline",children:_.fromParty})}),e.jsx(De,{children:e.jsx(U,{variant:"outline",children:_.toParty})}),e.jsx(De,{className:"font-medium",children:V(_.totalAmount)}),e.jsx(De,{children:C(_.status)}),e.jsx(De,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>m(_),children:e.jsx(Bt,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(js,{className:"w-4 h-4"})})]})})]},_.id)),(!R||R.length===0)&&e.jsx(Nt,{children:e.jsx(De,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No invoices found"})})]})]})})]})]}),e.jsx(me,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Financial Summary"}),e.jsx(Ee,{children:"Overview of financial performance"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Balance"}),e.jsx("span",{className:"font-medium",children:N?.currentBalance?V(N.currentBalance.currentBalance):"$0.00"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pending Payouts"}),e.jsx("span",{className:"font-medium",children:N?.pendingPayoutRequests||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completed Payouts"}),e.jsx("span",{className:"font-medium",children:N?.completedPayoutRequests||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Invoices"}),e.jsx("span",{className:"font-medium",children:N?.totalInvoices||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Paid Invoices"}),e.jsx("span",{className:"font-medium",children:N?.paidInvoices||0})]})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Quick Actions"}),e.jsx(Ee,{children:"Common tasks and utilities"})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>i(!0),children:[e.jsx(pl,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Request Payout"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>o(!0),children:[e.jsx(dt,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Create Invoice"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[e.jsx(js,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Export Data"})]}),e.jsxs(M,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[e.jsx(tn,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"View Reports"})]})]})})]})]})})]}),e.jsx(Ge,{open:a,onOpenChange:i,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Payout Request"}),e.jsx(Ct,{children:"Request a payout from your available balance"})]}),e.jsx(Qt,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(z),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:b.control,name:"requestedAmount",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Requested Amount"}),e.jsx(fe,{children:e.jsx(Q,{..._,type:"number",step:"0.01",placeholder:"0.00"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:b.control,name:"payoutType",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Payout Type"}),e.jsxs(ae,{onValueChange:_.onChange,defaultValue:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"full",children:"Full Balance"}),e.jsx(A,{value:"partial",children:"Partial Amount"})]})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:b.control,name:"bankAccountName",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Account Name"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Account holder name"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:b.control,name:"bankAccountNumber",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Account Number"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Bank account number"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:b.control,name:"bankName",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Bank Name"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Bank name"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:b.control,name:"bankBranch",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Bank Branch (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Branch name"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:b.control,name:"urgencyLevel",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Urgency Level"}),e.jsxs(ae,{onValueChange:_.onChange,defaultValue:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select urgency"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"normal",children:"Normal"}),e.jsx(A,{value:"urgent",children:"Urgent"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:b.control,name:"preferredPayoutDate",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Preferred Date (Optional)"}),e.jsxs(gl,{children:[e.jsx(jl,{asChild:!0,children:e.jsx(fe,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[_.value?et(_.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Xe,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ti,{className:"w-auto p-0",align:"start",children:e.jsx(Ai,{mode:"single",selected:_.value,onSelect:_.onChange,disabled:se=>se<new Date,initialFocus:!0})})]}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:b.control,name:"ownerNotes",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Notes (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{..._,placeholder:"Additional notes or special instructions",rows:3})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:E.isPending,children:E.isPending?"Creating...":"Create Request"})]})]})})]})}),e.jsx(Ge,{open:l,onOpenChange:o,children:e.jsxs(We,{className:"max-w-3xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Owner Invoice"}),e.jsx(Ct,{children:"Create a new invoice between owners and management"})]}),e.jsx(Qt,{...j,children:e.jsxs("form",{onSubmit:j.handleSubmit(le),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"fromParty",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"From"}),e.jsxs(ae,{onValueChange:_.onChange,defaultValue:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select sender"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"management",children:"Management"}),e.jsx(A,{value:"portfolio_manager",children:"Portfolio Manager"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"toParty",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"To"}),e.jsxs(ae,{onValueChange:_.onChange,defaultValue:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select recipient"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"owner",children:"Owner"}),e.jsx(A,{value:"management",children:"Management"}),e.jsx(A,{value:"portfolio_manager",children:"Portfolio Manager"})]})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"fromPartyId",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"From User"}),e.jsxs(ae,{onValueChange:_.onChange,value:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select user"})})}),e.jsx(ne,{children:I?.map(se=>e.jsxs(A,{value:se.id,children:[se.firstName," ",se.lastName," (",se.role,")"]},se.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"toPartyId",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"To User"}),e.jsxs(ae,{onValueChange:_.onChange,value:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select user"})})}),e.jsx(ne,{children:I?.map(se=>e.jsxs(A,{value:se.id,children:[se.firstName," ",se.lastName," (",se.role,")"]},se.id))})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"invoiceType",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Invoice Type"}),e.jsxs(ae,{onValueChange:_.onChange,defaultValue:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"management_fee",children:"Management Fee"}),e.jsx(A,{value:"expenses",children:"Expenses"}),e.jsx(A,{value:"revenue_share",children:"Revenue Share"}),e.jsx(A,{value:"services",children:"Services"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"category",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Category"}),e.jsxs(ae,{onValueChange:_.onChange,defaultValue:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select category"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"rental_income",children:"Rental Income"}),e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"utilities",children:"Utilities"}),e.jsx(A,{value:"management",children:"Management"})]})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ge,{control:j.control,name:"invoiceDate",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Invoice Date"}),e.jsxs(gl,{children:[e.jsx(jl,{asChild:!0,children:e.jsx(fe,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[_.value?et(_.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Xe,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ti,{className:"w-auto p-0",align:"start",children:e.jsx(Ai,{mode:"single",selected:_.value,onSelect:_.onChange,initialFocus:!0})})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"periodStart",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Period Start"}),e.jsxs(gl,{children:[e.jsx(jl,{asChild:!0,children:e.jsx(fe,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[_.value?et(_.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Xe,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ti,{className:"w-auto p-0",align:"start",children:e.jsx(Ai,{mode:"single",selected:_.value,onSelect:_.onChange,initialFocus:!0})})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"periodEnd",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Period End"}),e.jsxs(gl,{children:[e.jsx(jl,{asChild:!0,children:e.jsx(fe,{children:e.jsxs(M,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[_.value?et(_.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Xe,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ti,{className:"w-auto p-0",align:"start",children:e.jsx(Ai,{mode:"single",selected:_.value,onSelect:_.onChange,initialFocus:!0})})]}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:j.control,name:"description",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Description"}),e.jsx(fe,{children:e.jsx(ct,{..._,placeholder:"Invoice description",rows:3})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:G.isPending,children:G.isPending?"Creating...":"Create Invoice"})]})]})})]})}),u&&e.jsx(Ge,{open:!!u,onOpenChange:()=>m(null),children:e.jsxs(We,{className:"max-w-4xl",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{children:["Invoice Details - ",u.invoiceNumber]}),e.jsx(Ct,{children:"View invoice details and line items"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",et(new Date(u.invoiceDate),"PPP")]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Due Date:"})," ",u.dueDate?et(new Date(u.dueDate),"PPP"):"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Period:"})," ",et(new Date(u.periodStart),"MMM dd")," - ",et(new Date(u.periodEnd),"MMM dd, yyyy")]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",u.invoiceType]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"})," ",u.category]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"})," ",V(u.subtotal)]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax:"})," ",V(u.taxAmount||0)]}),e.jsxs("p",{className:"font-medium",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total:"})," ",V(u.totalAmount)]}),e.jsx("div",{className:"pt-2",children:C(u.status)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:"Line Items"}),e.jsxs(M,{size:"sm",onClick:()=>d(!0),children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Description"}),e.jsx(Oe,{children:"Category"}),e.jsx(Oe,{children:"Qty"}),e.jsx(Oe,{children:"Unit Price"}),e.jsx(Oe,{children:"Total"}),e.jsx(Oe,{children:"Type"})]})}),e.jsxs(zs,{children:[W?.map(_=>e.jsxs(Nt,{children:[e.jsx(De,{children:_.description}),e.jsx(De,{children:e.jsx(U,{variant:"outline",children:_.category})}),e.jsx(De,{children:_.quantity}),e.jsx(De,{children:V(_.unitPrice)}),e.jsx(De,{className:"font-medium",children:V(_.lineTotal)}),e.jsx(De,{children:e.jsx(U,{variant:"secondary",children:_.chargeType})})]},_.id)),(!W||W.length===0)&&e.jsx(Nt,{children:e.jsx(De,{colSpan:6,className:"text-center py-4 text-muted-foreground",children:"No line items found"})})]})]})]}),u.description&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>m(null),children:"Close"}),e.jsxs(M,{children:[e.jsx(js,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})]})}),e.jsx(Ge,{open:c,onOpenChange:d,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Add Line Item"}),e.jsx(Ct,{children:"Add a new line item to the invoice"})]}),e.jsx(Qt,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(Ce),className:"space-y-4",children:[e.jsx(ge,{control:w.control,name:"description",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Description"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Item description"})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:w.control,name:"category",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Category"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Item category"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:w.control,name:"chargeType",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Charge Type"}),e.jsxs(ae,{onValueChange:_.onChange,defaultValue:_.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select charge type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"guest_billable",children:"Guest Billable"}),e.jsx(A,{value:"owner_billable",children:"Owner Billable"}),e.jsx(A,{value:"company_expense",children:"Company Expense"}),e.jsx(A,{value:"complimentary",children:"Complimentary"})]})]}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:w.control,name:"quantity",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Quantity"}),e.jsx(fe,{children:e.jsx(Q,{..._,type:"number",step:"0.01",placeholder:"1"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:w.control,name:"unitPrice",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Unit Price"}),e.jsx(fe,{children:e.jsx(Q,{..._,type:"number",step:"0.01",placeholder:"0.00"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:w.control,name:"referenceNumber",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Reference Number (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Reference number"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:w.control,name:"vendorName",render:({field:_})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Vendor Name (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{..._,placeholder:"Vendor name"})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:J.isPending,children:J.isPending?"Adding...":"Add Line Item"})]})]})})]})})]})}const eAe=Yt({amount:Pe().min(1,"Amount is required"),requestNotes:Pe().optional()}),tAe=Yt({description:Pe().min(1,"Description is required"),quantity:Pe().min(1,"Quantity is required"),unitPrice:Pe().min(1,"Unit price is required"),referenceId:Pe().optional(),referenceType:Pe().optional()}),sAe=Yt({receiverType:Rs(["user","organization","external"]),receiverId:Pe().optional(),receiverName:Pe().min(1,"Receiver name is required"),receiverAddress:Pe().optional(),invoiceType:Pe().min(1,"Invoice type is required"),description:Pe().min(1,"Description is required"),lineItems:Sv(tAe).min(1,"At least one line item is required"),taxRate:Pe().optional(),notes:Pe().optional(),dueDate:Pe().optional(),referenceNumber:Pe().optional()});function rAe(){const{toast:t}=st(),s=pt(),{user:r}=Mr(),{formatWithConversion:n}=Rr(),[a,i]=v.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[l,o]=v.useState("all"),[c,d]=v.useState(""),[u,m]=v.useState(!1),[h,x]=v.useState(!1),[f,p]=v.useState(!1),[g,y]=v.useState(null),[b,j]=v.useState({department:"all",status:"all",search:""}),[w,N]=v.useState(null),[S,O]=v.useState(!1),P=r?.role==="admin",{data:k=[]}=xe({queryKey:["/api/users","portfolio-manager"],queryFn:()=>Ne("GET","/api/users?role=portfolio-manager"),enabled:P}),{data:R=[]}=xe({queryKey:["/api/staff-members"],queryFn:()=>Ne("GET","/api/staff-members?organizationId=default-org"),enabled:P}),F=ee.useMemo(()=>{const Ue=(k&&Array.isArray(k)?k:[]).filter(ye=>!ye.id?.toLowerCase().includes("demo")&&!ye.email?.toLowerCase().includes("demo")&&!ye.email?.toLowerCase().includes("test")&&!ye.email?.toLowerCase().includes("reza")&&!ye.name?.toLowerCase().includes("reza")&&!ye.firstName?.toLowerCase().includes("reza")).map(ye=>({id:ye.id,name:ye.name||`${ye.firstName||""} ${ye.lastName||""}`.trim(),type:"portfolio-manager",role:ye.role})),Ke=(R&&Array.isArray(R)?R:[]).map(ye=>({id:`staff-${ye.id}`,name:`${ye.firstName||""} ${ye.lastName||""}`.trim(),type:"staff",position:ye.position,department:ye.department}));return[...Ue,...Ke]},[k,R]);v.useEffect(()=>{P&&F.length>0&&!c?d(F[0]?.id):!P&&r?.id&&d(r?.id)},[P,F,r,c]);const{data:I,isLoading:W}=xe({queryKey:["/api/pm/dashboard/financial-overview",a.startDate,a.endDate,l,c],queryFn:async()=>{const oe=new URLSearchParams({startDate:a.startDate,endDate:a.endDate,...l!=="all"&&{propertyId:l},...c&&{portfolioManagerId:c}});return Ne("GET",`/api/pm/dashboard/financial-overview?${oe}`)},enabled:!!c}),{data:E,isLoading:B}=xe({queryKey:["/api/pm/dashboard/balance",c],queryFn:()=>{const oe=new URLSearchParams({...c&&{portfolioManagerId:c}});return Ne("GET",`/api/pm/dashboard/balance?${oe}`)},enabled:!!c}),{data:G,isLoading:J}=xe({queryKey:["/api/pm/dashboard/payouts",c],queryFn:()=>{const oe=new URLSearchParams({...c&&{portfolioManagerId:c}});return Ne("GET",`/api/pm/dashboard/payouts?${oe}`)},enabled:!!c}),{data:C,isLoading:V,refetch:z}=xe({queryKey:["/api/pm/dashboard/task-logs",b.department,b.status,a.startDate,a.endDate,c],queryFn:async()=>{const oe=new URLSearchParams({startDate:a.startDate,endDate:a.endDate,limit:"100",...b.department!=="all"&&{department:b.department},...b.status!=="all"&&{status:b.status},...c&&{portfolioManagerId:c}});return Ne("GET",`/api/pm/dashboard/task-logs?${oe}`)},enabled:!!c}),le=()=>{if(!C||C.length===0){t({title:"No data to export",description:"There are no task logs to export.",variant:"destructive"});return}const Ue=[["ID","Task Title","Department","Status","Property","Staff Assigned","Created At","Completed At","Result","Notes"].join(",")];C.forEach(_t=>{const Ls=[_t.id,`"${(_t.taskTitle||"").replace(/"/g,'""')}"`,_t.department||"",_t.status||"",`"${(_t.propertyName||"").replace(/"/g,'""')}"`,`"${(_t.staffAssigned||"").replace(/"/g,'""')}"`,_t.createdAt?et(Lt(_t.createdAt),"yyyy-MM-dd HH:mm"):"",_t.completedAt?et(Lt(_t.completedAt),"yyyy-MM-dd HH:mm"):"",`"${(_t.result||"").replace(/"/g,'""')}"`,`"${(_t.notes||"").replace(/"/g,'""')}"`];Ue.push(Ls.join(","))});const Ke=Ue.join(`
`),ye=new Blob([Ke],{type:"text/csv;charset=utf-8;"}),nt=document.createElement("a");nt.href=URL.createObjectURL(ye),nt.download=`task-logs-${et(new Date,"yyyy-MM-dd")}.csv`,nt.click(),t({title:"Export successful",description:`Exported ${C.length} task logs to CSV.`})},{data:Ce=[]}=xe({queryKey:["/api/properties"],queryFn:()=>Ne("GET","/api/properties")}),{data:H=[]}=xe({queryKey:["/api/pm/dashboard/portfolio",c],queryFn:()=>{const oe=new URLSearchParams({...c&&{portfolioManagerId:c}});return Ne("GET",`/api/pm/dashboard/portfolio?${oe}`)},enabled:!!c}),{data:_,isLoading:se}=xe({queryKey:["/api/pm/dashboard/notifications",c],queryFn:()=>{const oe=new URLSearchParams({limit:"20",...c&&{portfolioManagerId:c}});return Ne("GET",`/api/pm/dashboard/notifications?${oe}`)},enabled:!!c}),{data:te,isLoading:we}=xe({queryKey:["/api/pm/dashboard/invoices"],queryFn:()=>Ne("GET","/api/pm/dashboard/invoices")}),{data:ve,isLoading:X,refetch:ce}=xe({queryKey:["/api/pm/dashboard/analytics",a.startDate,a.endDate,c],queryFn:async()=>{const oe=new URLSearchParams({startDate:a.startDate,endDate:a.endDate,...c&&{portfolioManagerId:c}});return Ne("GET",`/api/pm/dashboard/analytics?${oe}`)},enabled:!!c}),Y=Te({mutationFn:oe=>Ne("POST","/api/pm/dashboard/payouts",oe),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),t({title:"Payout Request Submitted",description:"Your payout request has been submitted for approval."}),m(!1)},onError:oe=>{t({title:"Error",description:oe.message,variant:"destructive"})}}),he=Te({mutationFn:oe=>Ne("PATCH",`/api/pm/dashboard/payouts/${oe}/received`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),t({title:"Payment Confirmed",description:"Payment receipt confirmed successfully."})},onError:oe=>{t({title:"Error",description:oe.message,variant:"destructive"})}}),Fe=Te({mutationFn:oe=>Ne("POST","/api/pm/dashboard/invoices",oe),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/invoices"]}),t({title:"Invoice Created",description:"Invoice has been created successfully."}),x(!1)},onError:oe=>{t({title:"Error",description:oe.message,variant:"destructive"})}}),Ve=Te({mutationFn:oe=>Ne("PATCH",`/api/pm/dashboard/notifications/${oe}/read`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]})}}),rt=Te({mutationFn:()=>Ne("PATCH","/api/pm/dashboard/notifications/mark-all-read"),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]}),t({title:"All notifications marked as read",description:"Your notification inbox is now clear."})}}),gt=Te({mutationFn:oe=>Ne("DELETE",`/api/pm/dashboard/notifications/${oe}`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]}),t({title:"Notification deleted",description:"The notification has been removed."})}}),Vt=Te({mutationFn:()=>Ne("POST","/api/pm/dashboard/notifications/generate-sample"),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]}),t({title:"Sample notifications created",description:"5 sample notifications have been added for testing."})}}),[xs,Qs]=v.useState("all"),ue=Wt({resolver:ts(eAe),defaultValues:{amount:"",requestNotes:""}}),q=Wt({resolver:ts(sAe),defaultValues:{receiverType:"organization",receiverId:"",receiverName:"",receiverAddress:"",invoiceType:"management_commission",description:"",lineItems:[{description:"",quantity:"1",unitPrice:"",referenceId:"",referenceType:""}],taxRate:"10",notes:"",dueDate:"",referenceNumber:""}}),{fields:Se,append:_e,remove:K}=$7({control:q.control,name:"lineItems"}),ke=oe=>{Y.mutate(oe)},Le=oe=>{Fe.mutate(oe)},qt=async oe=>{try{const Ue=await Ne("GET",`/api/billing-invoices/${oe.id}`);y(Ue),p(!0)}catch(Ue){console.error("Error loading invoice:",Ue),y(oe),p(!0)}},vt=async oe=>{try{let Ue=oe;if(!oe.lineItems)try{Ue=await Ne("GET",`/api/billing-invoices/${oe.id}`)}catch(_t){console.error("Error fetching full invoice:",_t)}const Ke=window.open("","_blank");if(!Ke){t({title:"Error",description:"Please allow pop-ups to download PDF",variant:"destructive"});return}const ye=Ue.lineItems&&Ue.lineItems.length>0?`
          <table class="line-items">
            <thead>
              <tr>
                <th>Description</th>
                <th style="text-align: right;">Quantity</th>
                <th style="text-align: right;">Unit Price</th>
                <th style="text-align: right;">Amount</th>
              </tr>
            </thead>
            <tbody>
              ${Ue.lineItems.map(_t=>`
                <tr>
                  <td>${_t.description||"N/A"}</td>
                  <td style="text-align: right;">${_t.quantity||1}</td>
                  <td style="text-align: right;">$${parseFloat(_t.unitPrice||0).toFixed(2)}</td>
                  <td style="text-align: right;">$${(parseFloat(_t.quantity||1)*parseFloat(_t.unitPrice||0)).toFixed(2)}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        `:"",nt=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Invoice ${Ue.invoiceNumber||"N/A"}</title>
            <meta charset="UTF-8">
            <style>
              * { margin: 0; padding: 0; box-sizing: border-box; }
              body { 
                font-family: 'Segoe UI', Arial, sans-serif; 
                padding: 40px; 
                color: #333;
                line-height: 1.6;
              }
              .header { 
                text-align: center; 
                margin-bottom: 40px; 
                border-bottom: 3px solid #2563eb;
                padding-bottom: 20px;
              }
              .header h1 { 
                font-size: 36px; 
                color: #1e40af; 
                margin-bottom: 10px;
              }
              .header h2 { 
                font-size: 24px; 
                color: #64748b;
                margin-bottom: 10px;
              }
              .status { 
                padding: 6px 16px; 
                border-radius: 6px; 
                display: inline-block; 
                font-weight: 600;
                font-size: 14px;
                text-transform: uppercase;
              }
              .status-draft { background-color: #f1f5f9; color: #475569; }
              .status-sent { background-color: #dbeafe; color: #1e40af; }
              .status-paid { background-color: #dcfce7; color: #166534; }
              .status-overdue { background-color: #fee2e2; color: #991b1b; }
              
              .info-section { 
                display: grid; 
                grid-template-columns: 1fr 1fr; 
                gap: 20px; 
                margin: 30px 0; 
              }
              .info-box {
                background: #f8fafc;
                padding: 20px;
                border-radius: 8px;
                border-left: 4px solid #2563eb;
              }
              .info-box h3 {
                font-size: 14px;
                color: #64748b;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
              }
              .info-box p {
                font-size: 16px;
                color: #1e293b;
                font-weight: 500;
              }
              
              .line-items { 
                width: 100%; 
                border-collapse: collapse; 
                margin: 30px 0;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
              }
              .line-items th { 
                background-color: #1e40af; 
                color: white;
                padding: 12px; 
                text-align: left; 
                font-weight: 600;
              }
              .line-items td { 
                border-bottom: 1px solid #e2e8f0; 
                padding: 12px; 
              }
              .line-items tr:last-child td {
                border-bottom: none;
              }
              .line-items tr:hover {
                background-color: #f8fafc;
              }
              
              .totals-section {
                margin-top: 30px;
                text-align: right;
              }
              .total-row {
                display: flex;
                justify-content: flex-end;
                gap: 40px;
                margin: 10px 0;
                padding: 10px 0;
              }
              .total-row.grand-total {
                border-top: 3px solid #2563eb;
                padding-top: 15px;
                margin-top: 15px;
              }
              .total-label {
                font-size: 18px;
                color: #64748b;
              }
              .total-amount {
                font-size: 18px;
                font-weight: 600;
                color: #1e293b;
                min-width: 150px;
              }
              .grand-total .total-label,
              .grand-total .total-amount {
                font-size: 24px;
                color: #1e40af;
              }
              
              .notes-section {
                margin-top: 40px;
                padding: 20px;
                background: #f8fafc;
                border-radius: 8px;
                border-left: 4px solid #64748b;
              }
              .notes-section h3 {
                font-size: 14px;
                color: #64748b;
                margin-bottom: 8px;
                text-transform: uppercase;
              }
              .notes-section p {
                color: #475569;
              }
              
              @media print {
                body { padding: 20px; }
                .no-print { display: none; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              <h1>INVOICE</h1>
              <h2>${Ue.invoiceNumber||"N/A"}</h2>
              <span class="status status-${Ue.status||"draft"}">${(Ue.status||"draft").toUpperCase()}</span>
            </div>
            
            <div class="info-section">
              <div class="info-box">
                <h3>Bill To</h3>
                <p>${Ue.receiverName||"N/A"}</p>
                ${Ue.receiverAddress?`<p style="margin-top: 8px; font-size: 14px; color: #64748b;">${Ue.receiverAddress}</p>`:""}
              </div>
              <div class="info-box">
                <h3>Invoice Date</h3>
                <p>${Ue.createdAt?et(Lt(Ue.createdAt),"MMMM d, yyyy"):"N/A"}</p>
                ${Ue.dueDate?`
                  <h3 style="margin-top: 12px;">Due Date</h3>
                  <p>${et(Lt(Ue.dueDate),"MMMM d, yyyy")}</p>
                `:""}
              </div>
            </div>

            ${Ue.description?`
              <div class="info-box" style="margin: 20px 0;">
                <h3>Description</h3>
                <p>${Ue.description}</p>
              </div>
            `:""}

            ${ye}

            <div class="totals-section">
              ${Ue.subtotal?`
                <div class="total-row">
                  <div class="total-label">Subtotal:</div>
                  <div class="total-amount">$${parseFloat(Ue.subtotal).toFixed(2)}</div>
                </div>
              `:""}
              ${Ue.taxAmount?`
                <div class="total-row">
                  <div class="total-label">Tax:</div>
                  <div class="total-amount">$${parseFloat(Ue.taxAmount).toFixed(2)}</div>
                </div>
              `:""}
              <div class="total-row grand-total">
                <div class="total-label">Total Amount:</div>
                <div class="total-amount">$${Ue.totalAmount?parseFloat(Ue.totalAmount).toFixed(2):"0.00"}</div>
              </div>
            </div>

            ${Ue.paymentTerms||Ue.notes?`
              <div class="notes-section">
                ${Ue.paymentTerms?`
                  <h3>Payment Terms</h3>
                  <p>${Ue.paymentTerms}</p>
                `:""}
                ${Ue.notes?`
                  <h3 style="margin-top: ${Ue.paymentTerms?"15px":"0"};">Notes</h3>
                  <p>${Ue.notes}</p>
                `:""}
              </div>
            `:""}

            <div style="margin-top: 60px; padding-top: 20px; border-top: 1px solid #e2e8f0; text-align: center; color: #94a3b8; font-size: 12px;">
              <p>Thank you for your business!</p>
            </div>
          </body>
        </html>
      `;Ke.document.write(nt),Ke.document.close(),setTimeout(()=>{Ke.print()},300),t({title:"PDF Ready",description:"Use the print dialog to save or print your invoice"})}catch(Ue){t({title:"Error",description:Ue.message||"Failed to generate PDF",variant:"destructive"})}},Xt=({status:oe})=>{const Ue={pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",overdue:"bg-red-100 text-red-800"};return e.jsx(U,{className:Ue[oe]||"bg-gray-100 text-gray-800",children:oe})},mn=oe=>({cleaning:"bg-blue-100 text-blue-800",maintenance:"bg-orange-100 text-orange-800",gardening:"bg-green-100 text-green-800",pool:"bg-cyan-100 text-cyan-800",security:"bg-red-100 text-red-800",inspection:"bg-purple-100 text-purple-800"})[oe]||"bg-gray-100 text-gray-800";return W||B?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"container px-3 sm:px-6 overflow-x-hidden w-full",children:[e.jsx("div",{className:"mt-3",children:e.jsx(Uc,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:e.jsxs("div",{className:"mt-2 sm:mt-3 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold tracking-tight",children:"Portfolio Manager Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-muted-foreground",children:P?"Viewing data for:":"Manage your portfolio, track commissions, and create invoices"}),P&&c&&e.jsxs(U,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[e.jsx(zt,{className:"h-3 w-3 mr-1"}),F.find(oe=>oe.id===c)?.name||"Portfolio Manager"]})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:[P&&e.jsxs(ae,{value:c,onValueChange:d,children:[e.jsx(re,{className:"w-full sm:w-56",children:e.jsx(ie,{placeholder:"Select Staff Member",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:F.find(oe=>oe.id===c)?.name||"Select Staff"})]})})}),e.jsx(ne,{children:F.map(oe=>e.jsx(A,{value:oe.id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:oe.name})]}),e.jsx("span",{className:"text-xs text-gray-500",children:oe.type==="staff"?`${oe.position} - ${oe.department}`:oe.role})]})},oe.id))})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(Q,{type:"date",value:a.startDate,onChange:oe=>i(Ue=>({...Ue,startDate:oe.target.value})),className:"w-full sm:w-32 lg:w-40 text-sm"}),e.jsx(Q,{type:"date",value:a.endDate,onChange:oe=>i(Ue=>({...Ue,endDate:oe.target.value})),className:"w-full sm:w-32 lg:w-40 text-sm"})]}),e.jsxs(ae,{value:l,onValueChange:o,children:[e.jsx(re,{className:"w-full sm:w-40 lg:w-48",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),(Ce&&Array.isArray(Ce)?Ce:[])?.map(oe=>e.jsxs(A,{value:oe.id.toString(),children:[oe.name,oe.externalId&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Hostaway)"})]},oe.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[e.jsxs(D,{className:"border-l-4 border-l-green-500 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>document.querySelector('[value="balance"]')?.dispatchEvent(new MouseEvent("click",{bubbles:!0})),children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Commission Earnings"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Ze,{className:"h-5 w-5 text-green-600"})})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n(I?.totalCommissionEarnings||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"From management fees"})]})]}),e.jsxs(D,{className:"border-l-4 border-l-blue-500 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>window.location.href="/properties",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Portfolio Properties"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(At,{className:"h-5 w-5 text-blue-600"})})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(H&&Array.isArray(H)?H.length:0)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Under management"})]})]}),e.jsxs(D,{className:"border-l-4 border-l-orange-500 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>document.querySelector('[value="balance"]')?.dispatchEvent(new MouseEvent("click",{bubbles:!0})),children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending Balance"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(tt,{className:"h-5 w-5 text-orange-600"})})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n(E?.currentBalance||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for payout"})]})]}),e.jsxs(D,{className:"border-l-4 border-l-purple-500 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>document.querySelector('[value="notifications"]')?.dispatchEvent(new MouseEvent("click",{bubbles:!0})),children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Unread Notifications"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(Is,{className:"h-5 w-5 text-purple-600"})})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(_&&Array.isArray(_)?_.filter(oe=>!oe.isRead).length:0)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]})]}),e.jsxs(xt,{defaultValue:"overview",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto -mx-3 px-3 sm:mx-0 sm:px-0",children:e.jsxs(ht,{className:"inline-flex w-auto min-w-full sm:grid sm:w-full sm:grid-cols-6 h-auto",children:[e.jsx(de,{value:"overview",className:"text-xs sm:text-sm px-2 sm:px-3 py-2 whitespace-nowrap",children:"Overview"}),e.jsx(de,{value:"balance",className:"text-xs sm:text-sm px-2 sm:px-3 py-2 whitespace-nowrap",children:"Balance"}),e.jsx(de,{value:"invoices",className:"text-xs sm:text-sm px-2 sm:px-3 py-2 whitespace-nowrap",children:"Invoices"}),e.jsxs(de,{value:"tasks",className:"text-xs sm:text-sm px-2 sm:px-3 py-2 whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Task Logs"}),e.jsx("span",{className:"sm:hidden",children:"Tasks"})]}),e.jsxs(de,{value:"notifications",className:"text-xs sm:text-sm px-2 sm:px-3 py-2 whitespace-nowrap",children:[e.jsx("span",{className:"hidden sm:inline",children:"Notifications"}),e.jsx("span",{className:"sm:hidden",children:"Alerts"})]}),e.jsx(de,{value:"analytics",className:"text-xs sm:text-sm px-2 sm:px-3 py-2 whitespace-nowrap",children:"Analytics"})]})}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Portfolio Management"]}),e.jsx(Ee,{children:"Quick access to property management tools"})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>window.location.href="/properties",children:["View All Properties",e.jsx(Tr,{className:"h-4 w-4 ml-2"})]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-3 grid-cols-3 md:grid-cols-6",children:[e.jsxs(M,{variant:"outline",className:"h-24 flex-col hover:bg-blue-50 hover:border-blue-300 transition-colors",onClick:()=>window.location.href="/properties","data-testid":"button-property-access",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mb-2",children:e.jsx(At,{className:"h-5 w-5 text-blue-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Properties"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex-col hover:bg-purple-50 hover:border-purple-300 transition-colors",onClick:()=>window.location.href="/property-documents-management","data-testid":"button-document-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mb-2",children:e.jsx(dt,{className:"h-5 w-5 text-purple-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Documents"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex-col hover:bg-orange-50 hover:border-orange-300 transition-colors",onClick:()=>window.location.href="/tasks","data-testid":"button-maintenance",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center mb-2",children:e.jsx(ss,{className:"h-5 w-5 text-orange-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Maintenance"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex-col hover:bg-green-50 hover:border-green-300 transition-colors",onClick:()=>window.location.href="/services","data-testid":"button-service-tracker",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mb-2",children:e.jsx(Xe,{className:"h-5 w-5 text-green-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Services"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex-col hover:bg-red-50 hover:border-red-300 transition-colors",onClick:()=>window.location.href="/invoice-generator","data-testid":"button-invoices",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center mb-2",children:e.jsx(tn,{className:"h-5 w-5 text-red-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Invoices"})]}),e.jsxs(M,{variant:"outline",className:"h-24 flex-col hover:bg-yellow-50 hover:border-yellow-300 transition-colors",onClick:()=>window.location.href="/utility-tracker","data-testid":"button-utility-tracker",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center mb-2",children:e.jsx(es,{className:"h-5 w-5 text-yellow-600"})}),e.jsx("span",{className:"text-xs font-medium",children:"Utilities"})]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),"Property Performance"]}),e.jsx(Ee,{children:"Commission earnings by property"})]}),e.jsx(T,{children:I?.propertyBreakdown&&I.propertyBreakdown.length>0?e.jsx("div",{className:"h-64",children:e.jsx(da,{width:"100%",height:"100%",children:e.jsxs(s0,{data:I.propertyBreakdown.slice(0,5),children:[e.jsx(Tl,{strokeDasharray:"3 3"}),e.jsx(va,{dataKey:"propertyName",tick:{fontSize:10},interval:0,angle:-15,textAnchor:"end",height:60}),e.jsx(ya,{tick:{fontSize:10}}),e.jsx(mr,{formatter:oe=>[`$${oe.toLocaleString()}`,"Commission"]}),e.jsx(Xn,{dataKey:"commissionEarned",fill:"#10b981",radius:[4,4,0,0]})]})})}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx($s,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"No Performance Data"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Property performance data will appear here once you have bookings in your portfolio."})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Monthly Earnings Trend"]}),e.jsx(Ee,{children:"Commission earnings over time"})]}),e.jsx(T,{children:I?.monthlyTrend&&I.monthlyTrend.length>0?e.jsx("div",{className:"h-64",children:e.jsx(da,{width:"100%",height:"100%",children:e.jsxs(rw,{data:I.monthlyTrend,children:[e.jsx(Tl,{strokeDasharray:"3 3"}),e.jsx(va,{dataKey:"period",tick:{fontSize:10}}),e.jsx(ya,{tick:{fontSize:10}}),e.jsx(mr,{formatter:oe=>[`$${oe.toLocaleString()}`,"Earnings"]}),e.jsx(Za,{type:"monotone",dataKey:"earnings",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2}})]})})}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx(Ot,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"No Earnings Data"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs",children:"Earnings trend data will appear here as commissions are recorded over time."})]})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"text-base flex items-center gap-2",children:[e.jsx(At,{className:"h-4 w-4"}),"Portfolio Properties"]}),e.jsxs(U,{variant:"secondary",children:[H?.length||0," total"]})]})}),e.jsx(T,{children:H&&H.length>0?e.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[H.slice(0,5).map(oe=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>window.location.href=`/properties/${oe.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Jt,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:oe.name||oe.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:oe.city||oe.address||"No address"})]})]}),e.jsx(U,{variant:oe.status==="active"?"default":"secondary",className:"text-xs",children:oe.status||"Active"})]},oe.id)),H.length>5&&e.jsxs(M,{variant:"ghost",className:"w-full text-sm",onClick:()=>window.location.href="/properties",children:["View all ",H.length," properties",e.jsx(Tr,{className:"h-3 w-3 ml-2"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(At,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No properties assigned"}),e.jsx(M,{variant:"link",size:"sm",onClick:()=>window.location.href="/properties",children:"Browse Properties"})]})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"text-base flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),"Recent Tasks"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>document.querySelector('[value="tasks"]')?.dispatchEvent(new MouseEvent("click",{bubbles:!0})),children:"View All"})]})}),e.jsx(T,{children:C&&C.length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:C.slice(0,5).map(oe=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${oe.status==="completed"?"bg-green-100":oe.status==="in_progress"?"bg-blue-100":"bg-yellow-100"}`,children:oe.status==="completed"?e.jsx(Ie,{className:"h-4 w-4 text-green-600"}):oe.status==="in_progress"?e.jsx(tt,{className:"h-4 w-4 text-blue-600"}):e.jsx(It,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm line-clamp-1",children:oe.taskTitle}),e.jsx("p",{className:"text-xs text-muted-foreground",children:oe.propertyName})]})]}),e.jsx(Xt,{status:oe.status})]},oe.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(Ie,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent tasks"})]})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"text-base flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),"Recent Notifications"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>document.querySelector('[value="notifications"]')?.dispatchEvent(new MouseEvent("click",{bubbles:!0})),children:"View All"})]})}),e.jsx(T,{children:_&&_.length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:_.slice(0,5).map(oe=>e.jsxs("div",{className:`flex items-start gap-3 p-2 rounded-lg border transition-colors ${oe.isRead?"hover:bg-gray-50":"bg-blue-50 border-blue-200"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${oe.type==="urgent"?"bg-red-100":oe.type==="warning"?"bg-yellow-100":"bg-blue-100"}`,children:oe.type==="urgent"?e.jsx(St,{className:"h-4 w-4 text-red-600"}):oe.type==="warning"?e.jsx(It,{className:"h-4 w-4 text-yellow-600"}):e.jsx(Io,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm line-clamp-1",children:oe.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:oe.message})]}),!oe.isRead&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0 mt-2"})]},oe.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(Is,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notifications"})]})})]})]}),e.jsx(D,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Ba,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Common tasks to manage your portfolio"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(M,{size:"sm",onClick:()=>window.location.href="/tasks",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),"New Task"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>window.location.href="/bookings",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),"View Bookings"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>m(!0),disabled:!E?.currentBalance||E.currentBalance<=0,children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Request Payout"]})]})]})})})]}),e.jsxs(me,{value:"balance",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Commission Balance"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your earnings and request payouts"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]})},"data-testid":"button-refresh-balance",children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(Ge,{open:u,onOpenChange:m,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{disabled:!E?.currentBalance||E.currentBalance<=0,"data-testid":"button-request-payout",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Request Payout"]})}),e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Request Commission Payout"}),e.jsx(Ct,{children:"Submit a payout request for your earned commissions"})]}),e.jsx(Qt,{...ue,children:e.jsxs("form",{onSubmit:ue.handleSubmit(ke),className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Cn,{className:"h-5 w-5"}),e.jsx("span",{className:"font-semibold",children:"Available Balance"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-800 mt-1",children:n(E?.currentBalance||0)})]}),e.jsx(ge,{control:ue.control,name:"amount",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Amount to Request (USD)"}),e.jsx(fe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Enter amount",className:"pl-9",type:"number",step:"0.01",max:E?.currentBalance||0,...oe})]})}),e.jsxs(Zt,{children:["Maximum: $",E?.currentBalance?.toLocaleString()||0]}),e.jsx(be,{})]})}),e.jsx(ge,{control:ue.control,name:"requestNotes",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Notes (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Payment method preference, bank details, or other notes...",...oe})}),e.jsx(be,{})]})}),e.jsxs(Zs,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:Y.isPending,children:Y.isPending?"Submitting...":"Submit Request"})]})]})})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(D,{className:"border-l-4 border-l-green-500",children:e.jsxs(T,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:n(E?.totalEarned||0)})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Ot,{className:"h-6 w-6 text-green-600"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Lifetime commission earnings"})]})}),e.jsx(D,{className:"border-l-4 border-l-red-500",children:e.jsxs(T,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Paid Out"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:n(E?.totalPaid||0)})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(L0,{className:"h-6 w-6 text-red-600"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Total payouts received"})]})}),e.jsx(D,{className:"border-l-4 border-l-blue-500",children:e.jsxs(T,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Available Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n(E?.currentBalance||0)})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Cn,{className:"h-6 w-6 text-blue-600"})})]}),E?.lastPayoutDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Last payout: ",et(Lt(E.lastPayoutDate),"MMM d, yyyy")]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[P&&c&&e.jsx(Y$,{userId:c,userRole:"portfolio-manager",userEmail:k?.find(oe=>oe.id===c)?.email||"",userName:k?.find(oe=>oe.id===c)?.name||"",currentBalance:E?.currentBalance,onBalanceReset:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]})}}),e.jsxs(D,{className:P&&c?"":"md:col-span-2",children:[e.jsx($,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tn,{className:"h-5 w-5"}),"Payout Requests"]}),e.jsx(Ee,{children:G&&G.length>0?`${G.length} request${G.length!==1?"s":""} total`:"No payout requests yet"})]})}),e.jsx(T,{children:J?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ut,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsx("div",{className:"space-y-3",children:G&&Array.isArray(G)&&G.length>0?G.map(oe=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors","data-testid":`payout-item-${oe.id}`,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-lg",children:n(oe.amount||0)}),e.jsx(Xt,{status:oe.status})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),e.jsxs("span",{children:["Requested: ",et(Lt(oe.requestedAt),"MMM d, yyyy")]})]}),oe.approvedAt&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Ie,{className:"h-3 w-3"}),e.jsxs("span",{children:["Approved: ",et(Lt(oe.approvedAt),"MMM d")]})]}),oe.paidAt&&e.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(Ie,{className:"h-3 w-3"}),e.jsxs("span",{children:["Paid: ",et(Lt(oe.paidAt),"MMM d")]})]})]}),oe.requestNotes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Note: ",oe.requestNotes]}),oe.adminNotes&&e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Admin: ",oe.adminNotes]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[oe.status==="approved"&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>he.mutate(oe.id),disabled:he.isPending,className:"text-green-600 border-green-600 hover:bg-green-50",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Confirm Receipt"]}),oe.receiptUrl&&e.jsx(M,{size:"sm",variant:"ghost",asChild:!0,children:e.jsxs("a",{href:oe.receiptUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Tr,{className:"h-4 w-4 mr-1"}),"View Receipt"]})})]})]},oe.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx(tn,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payout requests"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"When you request payouts from your commission balance, they will appear here."}),E?.currentBalance&&E.currentBalance>0&&e.jsxs(M,{onClick:()=>m(!0),children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Request Your First Payout"]})]})})})]})]}),e.jsx(D,{className:"bg-blue-50 border-blue-200",children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(It,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800",children:"How Commission Payouts Work"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[e.jsx("li",{children:"â€¢ Your commission balance accumulates from property management fees"}),e.jsx("li",{children:"â€¢ Request a payout when your balance reaches the minimum threshold"}),e.jsx("li",{children:"â€¢ Admin will review and approve your request"}),e.jsx("li",{children:"â€¢ Once approved and paid, confirm receipt to update your records"})]})]})]})})})]}),e.jsxs(me,{value:"invoices",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage invoices for commissions and services"})]}),e.jsxs(Ge,{open:h,onOpenChange:x,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Create Invoice"]})}),e.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create New Invoice"}),e.jsx(Ct,{children:"Generate a professional invoice for commissions or services"})]}),e.jsx(Qt,{...q,children:e.jsxs("form",{onSubmit:q.handleSubmit(Le),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:q.control,name:"receiverType",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Receiver Type"}),e.jsx(fe,{children:e.jsxs(ae,{value:oe.value,onValueChange:oe.onChange,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"organization",children:"Organization"}),e.jsx(A,{value:"user",children:"User"}),e.jsx(A,{value:"external",children:"External Party"})]})]})}),e.jsx(be,{})]})}),e.jsx(ge,{control:q.control,name:"receiverName",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Receiver Name"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Company or person name",...oe})}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:q.control,name:"invoiceType",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Invoice Type"}),e.jsx(fe,{children:e.jsxs(ae,{value:oe.value,onValueChange:oe.onChange,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"management_commission",children:"Management Commission"}),e.jsx(A,{value:"booking_commission",children:"Booking Commission"}),e.jsx(A,{value:"service_fee",children:"Service Fee"}),e.jsx(A,{value:"consultation",children:"Consultation"}),e.jsx(A,{value:"maintenance",children:"Maintenance Charge"})]})]})}),e.jsx(be,{})]})}),e.jsx(ge,{control:q.control,name:"dueDate",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Due Date (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{type:"date",...oe})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:q.control,name:"description",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Description"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Invoice description...",...oe})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Line Items"}),e.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>_e({description:"",quantity:"1",unitPrice:"",referenceId:"",referenceType:""}),children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),Se.map((oe,Ue)=>e.jsxs("div",{className:"grid grid-cols-6 gap-2 items-end",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(ge,{control:q.control,name:`lineItems.${Ue}.description`,render:({field:Ke})=>e.jsx(pe,{children:e.jsx(fe,{children:e.jsx(Q,{placeholder:"Description",...Ke})})})})}),e.jsx(ge,{control:q.control,name:`lineItems.${Ue}.quantity`,render:({field:Ke})=>e.jsx(pe,{children:e.jsx(fe,{children:e.jsx(Q,{placeholder:"Qty",...Ke})})})}),e.jsx(ge,{control:q.control,name:`lineItems.${Ue}.unitPrice`,render:({field:Ke})=>e.jsx(pe,{children:e.jsx(fe,{children:e.jsx(Q,{placeholder:"Price",...Ke})})})}),e.jsx(ge,{control:q.control,name:`lineItems.${Ue}.referenceId`,render:({field:Ke})=>e.jsx(pe,{children:e.jsx(fe,{children:e.jsx(Q,{placeholder:"Reference",...Ke})})})}),e.jsx(M,{type:"button",variant:"outline",size:"sm",onClick:()=>K(Ue),disabled:Se.length===1,children:e.jsx(Yd,{className:"h-4 w-4"})})]},oe.id))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:q.control,name:"taxRate",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Tax Rate (%)"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"10",...oe})}),e.jsx(be,{})]})}),e.jsx(ge,{control:q.control,name:"referenceNumber",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Reference Number (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{placeholder:"Booking ID, etc.",...oe})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:q.control,name:"notes",render:({field:oe})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Notes (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{placeholder:"Additional notes...",...oe})}),e.jsx(be,{})]})}),e.jsxs(Zs,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:Fe.isPending,children:Fe.isPending?"Creating...":"Create Invoice"})]})]})})]})]})]}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:we?e.jsx("div",{className:"text-center py-8",children:"Loading invoices..."}):e.jsx("div",{className:"space-y-4",children:(te&&Array.isArray(te)?te:[])?.map(oe=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:oe.invoiceNumber}),e.jsx("p",{className:"text-sm text-muted-foreground",children:oe.receiverName}),e.jsx("p",{className:"text-sm",children:oe.description}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created:"," ",et(Lt(oe.createdAt),"MMM d, yyyy")]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsxs("p",{className:"font-semibold",children:["$",oe.totalAmount?.toLocaleString()]}),e.jsx(Xt,{status:oe.status}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>qt(oe),"data-testid":`button-view-invoice-${oe.id}`,children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>vt(oe),"data-testid":`button-pdf-invoice-${oe.id}`,children:[e.jsx(js,{className:"h-3 w-3 mr-1"}),"PDF"]})]})]})]},oe.id))||e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"})})})}),e.jsx(Ge,{open:f,onOpenChange:p,children:e.jsxs(We,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Invoice Details"}),e.jsx(Ct,{children:"View complete invoice information"})]}),g&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Invoice Number"}),e.jsx("p",{className:"font-semibold",children:g.invoiceNumber})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(Xt,{status:g.status})})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Bill To"}),e.jsx("p",{className:"font-medium",children:g.receiverName})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Total Amount"}),e.jsxs("p",{className:"font-semibold text-lg",children:["$",g.totalAmount?.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Created Date"}),e.jsx("p",{children:et(Lt(g.createdAt),"MMM d, yyyy")})]}),g.dueDate&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Due Date"}),e.jsx("p",{children:et(Lt(g.dueDate),"MMM d, yyyy")})]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Description"}),e.jsx("p",{className:"mt-1",children:g.description})]}),g.lineItems&&g.lineItems.length>0&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground mb-2 block",children:"Line Items"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Quantity"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),e.jsx("tbody",{children:g.lineItems.map((oe,Ue)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2",children:oe.description}),e.jsx("td",{className:"px-4 py-2 text-right",children:oe.quantity}),e.jsxs("td",{className:"px-4 py-2 text-right",children:["$",parseFloat(oe.unitPrice||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2 text-right font-semibold",children:["$",(parseFloat(oe.quantity||0)*parseFloat(oe.unitPrice||0)).toFixed(2)]})]},Ue))})]})})]}),g.paymentTerms&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Payment Terms"}),e.jsx("p",{className:"mt-1",children:g.paymentTerms})]}),g.notes&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"mt-1 text-sm",children:g.notes})]})]}),e.jsxs(Zs,{children:[e.jsxs(M,{variant:"outline",onClick:()=>g&&vt(g),children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),e.jsx(M,{onClick:()=>p(!1),children:"Close"})]})]})})]}),e.jsxs(me,{value:"tasks",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Task & Portfolio Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track tasks completed across your portfolio properties"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>z(),disabled:V,"data-testid":"button-refresh-tasks",children:[e.jsx(Ut,{className:`h-4 w-4 mr-2 ${V?"animate-spin":""}`}),"Refresh"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:le,disabled:!C||C.length===0,"data-testid":"button-export-tasks",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),C&&C.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(dt,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Tasks"})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Ie,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.filter(oe=>oe.status==="completed").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center",children:e.jsx(tt,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.filter(oe=>oe.status==="pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(es,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.filter(oe=>oe.status==="in_progress").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Progress"})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(Es,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:C.filter(oe=>oe.status==="cancelled").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cancelled"})]})]})})})]}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search tasks by title, property, or staff...",className:"pl-10",value:b.search,onChange:oe=>j(Ue=>({...Ue,search:oe.target.value})),"data-testid":"input-search-tasks"})]}),e.jsxs(ae,{value:b.department,onValueChange:oe=>j(Ue=>({...Ue,department:oe})),children:[e.jsxs(re,{className:"w-full md:w-44","data-testid":"select-department",children:[e.jsx(Dn,{className:"h-4 w-4 mr-2"}),e.jsx(ie,{placeholder:"Department"})]}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Departments"}),e.jsx(A,{value:"cleaning",children:"Cleaning"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"gardening",children:"Gardening"}),e.jsx(A,{value:"pool",children:"Pool"}),e.jsx(A,{value:"security",children:"Security"}),e.jsx(A,{value:"inspection",children:"Inspection"})]})]}),e.jsxs(ae,{value:b.status,onValueChange:oe=>j(Ue=>({...Ue,status:oe})),children:[e.jsx(re,{className:"w-full md:w-36","data-testid":"select-status",children:e.jsx(ie,{placeholder:"Status"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Status"}),e.jsx(A,{value:"pending",children:"Pending"}),e.jsx(A,{value:"in_progress",children:"In Progress"}),e.jsx(A,{value:"completed",children:"Completed"}),e.jsx(A,{value:"cancelled",children:"Cancelled"})]})]}),(b.search||b.department!=="all"||b.status!=="all")&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>j({department:"all",status:"all",search:""}),"data-testid":"button-clear-filters",children:[e.jsx(Es,{className:"h-4 w-4 mr-1"}),"Clear"]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:V?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ut,{className:"h-8 w-8 animate-spin text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading task logs..."})]}):e.jsx("div",{className:"space-y-3",children:(()=>{const Ue=(C&&Array.isArray(C)?C:[]).filter(Ke=>{if(b.search){const ye=b.search.toLowerCase();return Ke.taskTitle?.toLowerCase().includes(ye)||Ke.propertyName?.toLowerCase().includes(ye)||Ke.staffAssigned?.toLowerCase().includes(ye)||Ke.department?.toLowerCase().includes(ye)}return!0});return Ue.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx(dt,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:b.search||b.department!=="all"||b.status!=="all"?"No matching tasks":"No task logs yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:b.search||b.department!=="all"||b.status!=="all"?"Try adjusting your filters to see more results.":"Task logs from your portfolio properties will appear here."}),(b.search||b.department!=="all"||b.status!=="all")&&e.jsx(M,{variant:"outline",onClick:()=>j({department:"all",status:"all",search:""}),children:"Clear Filters"})]}):Ue.map(Ke=>e.jsxs("div",{className:"flex items-start justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>{N(Ke),O(!0)},"data-testid":`task-item-${Ke.id}`,children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"font-medium",children:Ke.taskTitle}),e.jsx(U,{className:mn(Ke.department),children:Ke.department}),e.jsx(Xt,{status:Ke.status})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(At,{className:"h-3 w-3"}),e.jsx("span",{children:Ke.propertyName||"Unknown Property"})]}),Ke.staffAssigned&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zt,{className:"h-3 w-3"}),e.jsx("span",{children:Ke.staffAssigned})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),e.jsx("span",{children:et(Lt(Ke.createdAt),"MMM d, yyyy")})]}),Ke.completedAt&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(Ie,{className:"h-3 w-3"}),e.jsxs("span",{children:["Completed ",et(Lt(Ke.completedAt),"MMM d")]})]})]}),Ke.result&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:Ke.result})]}),e.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[Ke.evidencePhotos&&Ke.evidencePhotos.length>0&&e.jsxs(U,{variant:"outline",className:"text-xs",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),Ke.evidencePhotos.length," Photos"]}),Ke.receipts&&Ke.receipts.length>0&&e.jsxs(U,{variant:"outline",className:"text-xs",children:[e.jsx(tn,{className:"h-3 w-3 mr-1"}),Ke.receipts.length," Receipts"]}),e.jsx(M,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),N(Ke),O(!0)},children:e.jsx(Bt,{className:"h-4 w-4"})})]})]},Ke.id))})()})})}),e.jsx(Ge,{open:S,onOpenChange:O,children:e.jsxs(We,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-5 w-5"}),"Task Details"]}),e.jsx(Ct,{children:"Complete information about this task"})]}),w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:w.taskTitle}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(U,{className:mn(w.department),children:w.department}),e.jsx(Xt,{status:w.status})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: #",w.id]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{className:"text-muted-foreground text-xs",children:"Property"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:w.propertyName||"Unknown"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{className:"text-muted-foreground text-xs",children:"Staff Assigned"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:w.staffAssigned||"Unassigned"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{className:"text-muted-foreground text-xs",children:"Created"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"font-medium",children:et(Lt(w.createdAt),"MMMM d, yyyy 'at' h:mm a")})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Z,{className:"text-muted-foreground text-xs",children:"Completed"}),e.jsx("div",{className:"flex items-center gap-2",children:w.completedAt?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"h-4 w-4 text-green-600"}),e.jsx("p",{className:"font-medium text-green-600",children:et(Lt(w.completedAt),"MMMM d, yyyy 'at' h:mm a")})]}):e.jsxs(e.Fragment,{children:[e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Not completed yet"})]})})]})]}),w.result&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-muted-foreground text-xs",children:"Result / Outcome"}),e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm",children:w.result})})]}),w.notes&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-muted-foreground text-xs",children:"Notes"}),e.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:e.jsx("p",{className:"text-sm",children:w.notes})})]}),w.evidencePhotos&&w.evidencePhotos.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{className:"text-muted-foreground text-xs",children:["Evidence Photos (",w.evidencePhotos.length,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.evidencePhotos.map((oe,Ue)=>e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center border",children:e.jsx("img",{src:oe,alt:`Evidence ${Ue+1}`,className:"max-w-full max-h-full object-cover rounded-lg",onError:Ke=>{Ke.target.style.display="none"}})},Ue))})]}),w.receipts&&w.receipts.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{className:"text-muted-foreground text-xs",children:["Receipts (",w.receipts.length,")"]}),e.jsx("div",{className:"space-y-2",children:w.receipts.map((oe,Ue)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tn,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Receipt ",Ue+1]})]}),e.jsx(M,{size:"sm",variant:"ghost",asChild:!0,children:e.jsx("a",{href:oe,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Tr,{className:"h-4 w-4"})})})]},Ue))})]})]}),e.jsx(Zs,{children:e.jsx(M,{variant:"outline",onClick:()=>O(!1),children:"Close"})})]})})]}),e.jsxs(me,{value:"notifications",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notifications & Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay updated on guest issues, approvals, and system suggestions"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]}),"data-testid":"button-refresh-notifications",children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Refresh"]}),_&&_.length>0&&_.some(oe=>!oe.isRead)&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>rt.mutate(),disabled:rt.isPending,"data-testid":"button-mark-all-read",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),rt.isPending?"Marking...":"Mark All Read"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All",icon:Is},{value:"urgent",label:"Urgent",icon:St},{value:"warning",label:"Warning",icon:It},{value:"info",label:"Info",icon:Io},{value:"unread",label:"Unread",icon:Bt}].map(oe=>e.jsxs(M,{variant:xs===oe.value?"default":"outline",size:"sm",onClick:()=>Qs(oe.value),"data-testid":`button-filter-${oe.value}`,children:[e.jsx(oe.icon,{className:"h-4 w-4 mr-1"}),oe.label,oe.value==="unread"&&_&&e.jsx(U,{className:"ml-2 bg-red-500 text-white text-xs",children:_.filter(Ue=>!Ue.isRead).length})]},oe.value))}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:se?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ut,{className:"h-8 w-8 animate-spin text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading notifications..."})]}):e.jsx("div",{className:"space-y-3",children:(()=>{const Ue=(_&&Array.isArray(_)?_:[]).filter(Ke=>xs==="all"?!0:xs==="unread"?!Ke.isRead:Ke.severity===xs);return Ue.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx(Is,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:xs==="all"?"No notifications yet":`No ${xs} notifications`}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:xs==="all"?"When you receive notifications about guest issues, approvals, or system suggestions, they will appear here.":`You don't have any ${xs==="unread"?"unread":xs+" priority"} notifications.`}),xs==="all"&&e.jsxs(M,{variant:"outline",onClick:()=>Vt.mutate(),disabled:Vt.isPending,"data-testid":"button-generate-sample",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),Vt.isPending?"Creating...":"Generate Sample Notifications"]})]}):Ue.map(Ke=>e.jsxs("div",{className:`flex items-start gap-3 p-4 border rounded-lg transition-all duration-200 ${Ke.isRead?"bg-white hover:bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200 shadow-sm"}`,"data-testid":`notification-item-${Ke.id}`,children:[e.jsx("div",{className:"mt-1 flex-shrink-0",children:Ke.severity==="urgent"?e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(St,{className:"h-5 w-5 text-red-600"})}):Ke.severity==="warning"?e.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center",children:e.jsx(It,{className:"h-5 w-5 text-yellow-600"})}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Io,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:`font-medium ${Ke.isRead?"text-gray-700":"text-gray-900"}`,children:Ke.title}),!Ke.isRead&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-600 text-white",children:"New"})]}),e.jsx("p",{className:"text-xs text-muted-foreground whitespace-nowrap",children:et(Lt(Ke.createdAt),"MMM d, HH:mm")})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Ke.message}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:[e.jsx(U,{variant:"outline",className:"text-xs capitalize",children:Ke.type.replace(/_/g," ")}),e.jsx(U,{className:`text-xs ${Ke.severity==="urgent"?"bg-red-100 text-red-800 border-red-200":Ke.severity==="warning"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-blue-100 text-blue-800 border-blue-200"}`,children:Ke.severity}),Ke.actionRequired&&e.jsx(U,{className:"bg-orange-100 text-orange-800 border-orange-200 text-xs",children:"Action Required"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[!Ke.isRead&&e.jsx(M,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),Ve.mutate(Ke.id)},disabled:Ve.isPending,title:"Mark as read","data-testid":`button-mark-read-${Ke.id}`,children:e.jsx(tm,{className:"h-4 w-4"})}),Ke.relatedType&&Ke.relatedId&&e.jsx(M,{size:"sm",variant:"ghost",title:"View related item","data-testid":`button-view-related-${Ke.id}`,children:e.jsx(Tr,{className:"h-4 w-4"})}),e.jsx(M,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),gt.mutate(Ke.id)},disabled:gt.isPending,title:"Delete notification",className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-notification-${Ke.id}`,children:e.jsx(ir,{className:"h-4 w-4"})})]})]},Ke.id))})()})})}),_&&_.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Is,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(St,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.filter(oe=>oe.severity==="urgent").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Urgent"})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(U8,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.filter(oe=>oe.actionRequired).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Action Needed"})]})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Bt,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:_.filter(oe=>!oe.isRead).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unread"})]})]})})})]})]}),e.jsxs(me,{value:"analytics",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portfolio Analytics"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Performance insights and AI-powered suggestions for ",ve?.period?.startDate," to ",ve?.period?.endDate]})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>ce(),disabled:X,children:[e.jsx(Ut,{className:`h-4 w-4 mr-2 ${X?"animate-spin":""}`}),"Refresh"]})]}),X?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ut,{className:"h-8 w-8 mx-auto mb-4 animate-spin text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading analytics..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",ve?.summary?.totalRevenue?.toLocaleString()||"0"]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(Ze,{className:"h-6 w-6 text-green-600"})})]})})}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ve?.summary?.totalBookings||0})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Xe,{className:"h-6 w-6 text-blue-600"})})]})})}),e.jsx(D,{children:e.jsxs(T,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Occupancy Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[ve?.summary?.occupancyRate?.toFixed(1)||"0","%"]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(ar,{className:"h-6 w-6 text-purple-600"})})]}),e.jsx(dn,{value:ve?.summary?.occupancyRate||0,className:"mt-3 h-2"})]})}),e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Booking Value"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["$",ve?.summary?.averageBookingValue?.toFixed(0)||"0"]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(Ot,{className:"h-6 w-6 text-orange-600"})})]})})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{className:"col-span-1",children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),"Revenue Trend"]}),e.jsx(Ee,{children:"Monthly revenue and booking performance"})]}),e.jsx(T,{children:ve?.revenueByMonth&&ve.revenueByMonth.length>0?e.jsx(da,{width:"100%",height:250,children:e.jsxs(s0,{data:ve.revenueByMonth,children:[e.jsx(Tl,{strokeDasharray:"3 3"}),e.jsx(va,{dataKey:"month",fontSize:12}),e.jsx(ya,{fontSize:12,tickFormatter:oe=>`$${(oe/1e3).toFixed(0)}k`}),e.jsx(mr,{formatter:(oe,Ue)=>[Ue==="revenue"?`$${oe.toLocaleString()}`:oe,Ue==="revenue"?"Revenue":"Bookings"]}),e.jsx(Xn,{dataKey:"revenue",fill:"#22c55e",radius:[4,4,0,0],name:"revenue"})]})}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx($s,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No revenue data available for this period"}),e.jsx("p",{className:"text-xs mt-1",children:"Add properties and track bookings to see revenue trends"})]})})]}),e.jsxs(D,{className:"col-span-1",children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-5 w-5 text-yellow-500"}),"AI Suggestions"]}),e.jsx(Ee,{children:"Smart recommendations for your portfolio"})]}),e.jsx(T,{className:"space-y-3",children:ve?.suggestions&&ve.suggestions.length>0?ve.suggestions.map(oe=>e.jsx("div",{className:`p-3 rounded-lg border ${oe.priority==="high"?"border-red-200 bg-red-50":oe.priority==="medium"?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:`mt-0.5 ${oe.priority==="high"?"text-red-600":oe.priority==="medium"?"text-yellow-600":"text-green-600"}`,children:[oe.type==="occupancy"&&e.jsx(ar,{className:"h-4 w-4"}),oe.type==="revenue"&&e.jsx(Ze,{className:"h-4 w-4"}),oe.type==="tasks"&&e.jsx(Ie,{className:"h-4 w-4"}),oe.type==="performance"&&e.jsx(ps,{className:"h-4 w-4"}),oe.type==="property"&&e.jsx(Jt,{className:"h-4 w-4"}),oe.type==="insight"&&e.jsx(Ba,{className:"h-4 w-4"}),oe.type==="info"&&e.jsx(It,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:oe.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:oe.description})]}),e.jsx(U,{variant:"outline",className:`text-xs ${oe.priority==="high"?"border-red-300 text-red-700":oe.priority==="medium"?"border-yellow-300 text-yellow-700":"border-green-300 text-green-700"}`,children:oe.priority})]})},oe.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ba,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No suggestions available"}),e.jsx("p",{className:"text-xs mt-1",children:"Add more data to receive AI-powered insights"})]})})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-5 w-5"}),"Property Performance"]}),e.jsx(Ee,{children:"Individual property metrics and rankings"})]}),e.jsx(T,{children:ve?.propertyPerformance&&ve.propertyPerformance.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-2 font-medium text-muted-foreground",children:"Property"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium text-muted-foreground",children:"Revenue"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium text-muted-foreground",children:"Bookings"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium text-muted-foreground",children:"Occupancy"}),e.jsx("th",{className:"text-right py-3 px-2 font-medium text-muted-foreground",children:"Rating"})]})}),e.jsx("tbody",{children:ve.propertyPerformance.map((oe,Ue)=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"py-3 px-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Ue===0&&oe.revenue>0&&e.jsx(U,{className:"bg-yellow-100 text-yellow-800 text-xs",children:"Top"}),e.jsx("span",{className:"font-medium",children:oe.propertyName})]})}),e.jsxs("td",{className:"text-right py-3 px-2 font-semibold text-green-600",children:["$",oe.revenue.toLocaleString()]}),e.jsx("td",{className:"text-right py-3 px-2",children:oe.bookings}),e.jsx("td",{className:"text-right py-3 px-2",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(dn,{value:oe.occupancyRate,className:"w-16 h-2"}),e.jsxs("span",{className:`text-sm ${oe.occupancyRate>=70?"text-green-600":oe.occupancyRate>=40?"text-yellow-600":"text-red-600"}`,children:[oe.occupancyRate.toFixed(0),"%"]})]})}),e.jsx("td",{className:"text-right py-3 px-2",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(ps,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{children:oe.rating.toFixed(1)})]})})]},oe.propertyId))})]})}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(At,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No properties in your portfolio"}),e.jsx("p",{className:"text-xs mt-1",children:"Properties assigned to you will appear here with performance metrics"})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-green-500"}),"Task Summary"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completed Tasks"}),e.jsx(U,{className:"bg-green-100 text-green-800",children:ve?.summary?.completedTasks||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pending Tasks"}),e.jsx(U,{className:"bg-yellow-100 text-yellow-800",children:ve?.summary?.pendingTasks||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Portfolio Properties"}),e.jsx(U,{className:"bg-blue-100 text-blue-800",children:ve?.summary?.propertyCount||0})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-blue-500"}),"Quick Stats"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Revenue per Property"}),e.jsxs("span",{className:"font-semibold",children:["$",ve?.summary?.propertyCount&&ve.summary.propertyCount>0?((ve.summary.totalRevenue||0)/ve.summary.propertyCount).toFixed(0):"0"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bookings per Property"}),e.jsx("span",{className:"font-semibold",children:ve?.summary?.propertyCount&&ve.summary.propertyCount>0?((ve.summary.totalBookings||0)/ve.summary.propertyCount).toFixed(1):"0"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Task Completion Rate"}),e.jsxs("span",{className:"font-semibold",children:[ve?.summary?.completedTasks!==void 0&&ve?.summary?.pendingTasks!==void 0?(ve.summary.completedTasks/Math.max(ve.summary.completedTasks+ve.summary.pendingTasks,1)*100).toFixed(0):"0","%"]})]})]})})]})]})]})]})]})]})]})}function nAe(){const{toast:t}=st(),s=pt(),[r,n]=v.useState(!1),[a,i]=v.useState({exportType:"pdf",dateRangeType:"month",startDate:et(fr(new Date),"yyyy-MM-dd"),endDate:et(Sl(new Date),"yyyy-MM-dd"),selectedProperties:[],includeNotes:!1,includeServiceLogs:!1,includeBranding:!0}),{data:l=[],isLoading:o}=xe({queryKey:["/api/properties"],select:j=>j.filter(w=>w.id)}),{data:c=[],isLoading:d}=xe({queryKey:["/api/owner-statement-exports"],refetchInterval:5e3}),u=Te({mutationFn:async j=>Ne("POST","/api/owner-statement-exports",j),onSuccess:j=>{t({title:"Export Started",description:`Your ${a.exportType.toUpperCase()} statement is being generated. You'll be notified when it's ready.`}),n(!1),s.invalidateQueries({queryKey:["/api/owner-statement-exports"]})},onError:j=>{t({title:"Export Failed",description:j.message||"Failed to start statement export",variant:"destructive"})}}),m=Te({mutationFn:async j=>{const w=await fetch(`/api/owner-statement-exports/${j}/download`);if(!w.ok)throw new Error("Download failed");const N=c.find(S=>S.id===j);if(N?.exportType==="csv"){const S=await w.text(),O=new Blob([S],{type:"text/csv"}),P=window.URL.createObjectURL(O),k=document.createElement("a");k.href=P,k.download=N.fileName,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(P)}else await w.json(),window.open(`/api/owner-statement-exports/${j}/pdf-data`,"_blank")},onSuccess:()=>{t({title:"Download Started",description:"Your statement file is being downloaded."})},onError:j=>{t({title:"Download Failed",description:j.message||"Failed to download statement",variant:"destructive"})}}),h=j=>{i(w=>{if(j==="month"){const N=new Date;return{...w,dateRangeType:j,startDate:et(fr(N),"yyyy-MM-dd"),endDate:et(Sl(N),"yyyy-MM-dd")}}return{...w,dateRangeType:j}})},x=j=>{const w=dF(new Date,j);i(N=>({...N,startDate:et(fr(w),"yyyy-MM-dd"),endDate:et(Sl(w),"yyyy-MM-dd")}))},f=j=>{i(w=>({...w,selectedProperties:w.selectedProperties.includes(j)?w.selectedProperties.filter(N=>N!==j):[...w.selectedProperties,j]}))},p=()=>{i(j=>({...j,selectedProperties:j.selectedProperties.length===l.length?[]:l.map(w=>w.id)}))},g=()=>{if(!a.selectedProperties.length){t({title:"Selection Required",description:"Please select at least one property for the statement.",variant:"destructive"});return}u.mutate({exportType:a.exportType,dateRangeType:a.dateRangeType,startDate:a.startDate,endDate:a.endDate,propertyIds:a.selectedProperties,includeNotes:a.includeNotes,includeServiceLogs:a.includeServiceLogs,includeBranding:a.includeBranding})},y=j=>{switch(j){case"completed":return e.jsx(Ie,{className:"h-4 w-4 text-green-500"});case"generating":return e.jsx(tt,{className:"h-4 w-4 text-yellow-500"});case"failed":return e.jsx(It,{className:"h-4 w-4 text-red-500"});default:return e.jsx(tt,{className:"h-4 w-4 text-gray-500"})}},b=j=>{const w={completed:"default",generating:"secondary",failed:"destructive"};return e.jsx(U,{variant:w[j]||"secondary",children:j.charAt(0).toUpperCase()+j.slice(1)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(dt,{className:"h-6 w-6 text-blue-500"}),"Financial Statements"]}),e.jsx("p",{className:"text-muted-foreground",children:"Export detailed financial reports for your properties"})]}),e.jsxs(Ge,{open:r,onOpenChange:n,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{className:"gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Export Statement"]})}),e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Export Owner Statement"}),e.jsx(Ct,{children:"Generate a comprehensive financial report for your properties"})]}),e.jsxs(xt,{defaultValue:"basic",className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-3",children:[e.jsx(de,{value:"basic",children:"Basic Settings"}),e.jsx(de,{value:"properties",children:"Properties"}),e.jsx(de,{value:"options",children:"Options"})]}),e.jsxs(me,{value:"basic",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"exportType",children:"Export Format"}),e.jsxs(ae,{value:a.exportType,onValueChange:j=>i(w=>({...w,exportType:j})),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"PDF Document"]})}),e.jsx(A,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q8,{className:"h-4 w-4"}),"CSV Spreadsheet"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"dateRangeType",children:"Date Range"}),e.jsxs(ae,{value:a.dateRangeType,onValueChange:h,children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsxs(ne,{children:[e.jsx(A,{value:"month",children:"Monthly"}),e.jsx(A,{value:"custom",children:"Custom Range"})]})]})]})]}),a.dateRangeType==="month"&&e.jsxs("div",{children:[e.jsx(Z,{children:"Quick Month Selection"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(0),children:"This Month"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(1),children:"Last Month"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(2),children:"2 Months Ago"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>x(3),children:"3 Months Ago"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"startDate",children:"Start Date"}),e.jsx(Q,{id:"startDate",type:"date",value:a.startDate,onChange:j=>i(w=>({...w,startDate:j.target.value}))})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"endDate",children:"End Date"}),e.jsx(Q,{id:"endDate",type:"date",value:a.endDate,onChange:j=>i(w=>({...w,endDate:j.target.value}))})]})]})]}),e.jsxs(me,{value:"properties",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Z,{children:"Select Properties"}),e.jsx(M,{variant:"outline",size:"sm",onClick:p,children:a.selectedProperties.length===l.length?"Deselect All":"Select All"})]}),o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Gt,{className:"h-6 w-6 animate-spin"})}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map(j=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pi,{id:`property-${j.id}`,checked:a.selectedProperties.includes(j.id),onCheckedChange:()=>f(j.id)}),e.jsxs(Z,{htmlFor:`property-${j.id}`,className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Jt,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:j.address})]})]})]},j.id))})]}),e.jsxs(me,{value:"options",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pi,{id:"includeNotes",checked:a.includeNotes,onCheckedChange:j=>i(w=>({...w,includeNotes:j}))}),e.jsx(Z,{htmlFor:"includeNotes",children:"Include property notes and comments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pi,{id:"includeServiceLogs",checked:a.includeServiceLogs,onCheckedChange:j=>i(w=>({...w,includeServiceLogs:j}))}),e.jsx(Z,{htmlFor:"includeServiceLogs",children:"Include service and maintenance logs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pi,{id:"includeBranding",checked:a.includeBranding,onCheckedChange:j=>i(w=>({...w,includeBranding:j}))}),e.jsx(Z,{htmlFor:"includeBranding",children:"Include company branding and logo"})]})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Statement Will Include:"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ All booking earnings by platform"}),e.jsx("li",{children:"â€¢ Property expenses and maintenance costs"}),e.jsx("li",{children:"â€¢ Management commission breakdown"}),e.jsx("li",{children:"â€¢ Add-on service charges"}),e.jsx("li",{children:"â€¢ Net balance calculation"}),a.includeNotes&&e.jsx("li",{children:"â€¢ Property notes and comments"}),a.includeServiceLogs&&e.jsx("li",{children:"â€¢ Service and maintenance logs"})]})]})]})]}),e.jsxs(Zs,{children:[e.jsx(M,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(M,{onClick:g,disabled:u.isPending||!a.selectedProperties.length,className:"gap-2",children:[u.isPending?e.jsx(Gt,{className:"h-4 w-4 animate-spin"}):e.jsx(js,{className:"h-4 w-4"}),"Generate Statement"]})]})]})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5"}),"Recent Statements"]}),e.jsx(Ee,{children:"Your exported financial statements and their status"})]}),e.jsx(T,{children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Gt,{className:"h-6 w-6 animate-spin"})}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No statements yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Export your first financial statement to get started"}),e.jsxs(M,{onClick:()=>n(!0),className:"gap-2",children:[e.jsx(ut,{className:"h-4 w-4"}),"Export Statement"]})]}):e.jsx("div",{className:"space-y-3",children:c.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[y(j.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.fileName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[et(new Date(j.createdAt),"MMM dd, yyyy at HH:mm")," â€¢"," ",j.status==="completed"&&j.fileSize&&`${Math.round(j.fileSize/1024)} KB`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Net: $",parseFloat(j.netBalance).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[et(new Date(j.startDate),"MMM dd")," - ",et(new Date(j.endDate),"MMM dd, yyyy")]})]}),b(j.status),j.status==="completed"&&e.jsxs(M,{size:"sm",onClick:()=>m.mutate(j.id),disabled:m.isPending,className:"gap-2",children:[m.isPending?e.jsx(Gt,{className:"h-4 w-4 animate-spin"}):e.jsx(js,{className:"h-4 w-4"}),"Download"]}),j.status==="failed"&&e.jsx("div",{className:"text-xs text-red-500 max-w-xs",children:j.errorMessage})]})]},j.id))})})]})]})}function aAe({guestTotalPrice:t,platformPayout:s,otaCommissionAmount:r,currency:n="THB",platform:a="OTA"}){const{formatWithConversion:i}=Rr(),l=r||t-s;return e.jsx(dm,{children:e.jsxs(Si,{children:[e.jsx(Ci,{asChild:!0,children:e.jsxs("div",{className:"text-center cursor-help",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Guest: ",i(t)]}),e.jsxs("div",{className:"font-semibold text-green-600",children:["Payout: ",i(s)]}),l>0&&e.jsxs("div",{className:"text-xs text-red-600",children:["-",i(l)]})]})}),e.jsx(Va,{children:e.jsxs("p",{children:["âš ï¸ ",a," commission already deducted from payout"]})})]})})}const iAe=[{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"last-month",label:"Last Month"},{value:"custom",label:"Custom Period"}],lAe={airbnb:"bg-red-100 text-red-800 border-red-200",vrbo:"bg-blue-100 text-blue-800 border-blue-200",bookingCom:"bg-purple-100 text-purple-800 border-purple-200",direct:"bg-green-100 text-green-800 border-green-200",marriott:"bg-yellow-100 text-yellow-800 border-yellow-200"},oAe={maintenance:Ms,amenity:ps,experience:Wo,safety:Kt,communication:Qo},cAe={checkin:nm,checkout:S4,cleaning:Zd,pool:sm,garden:dB,maintenance:Ms,note:Pn,expense:Ze,booking:Xe,repair:ss};function dAe(){const[t,s]=v.useState("earnings"),[r,n]=v.useState("month"),[a,i]=v.useState("all"),[l,o]=v.useState("all"),[c,d]=v.useState(!1),[u,m]=v.useState(!1),[h,x]=v.useState(null),[f,p]=v.useState({propertyId:"",amount:"",notes:""}),{toast:g}=st(),y=pt(),{user:b,isLoading:j}=Mr(),{data:w,isLoading:N}=xe({queryKey:["/api/owner/earnings",r,a],enabled:!!b&&b.role==="owner"}),{data:S,isLoading:O}=xe({queryKey:["/api/owner/balance"],enabled:!!b&&b.role==="owner"}),{data:P,isLoading:k}=xe({queryKey:["/api/owner/ai-suggestions"],enabled:!!b&&b.role==="owner"}),{data:R,isLoading:F}=xe({queryKey:["/api/owner/timeline",a,l],enabled:!!b&&b.role==="owner"}),{data:I}=xe({queryKey:["/api/properties"],enabled:!!b}),W=Te({mutationFn:async _=>Ne("POST","/api/owner/payout-request",_),onSuccess:()=>{g({title:"Payout request submitted successfully"}),d(!1),y.invalidateQueries({queryKey:["/api/owner/balance"]}),p({propertyId:"",amount:"",notes:""})},onError:_=>{g({title:"Error submitting payout request",description:_.message,variant:"destructive"})}}),E=Te({mutationFn:async _=>Ne("POST",`/api/owner/ai-suggestions/${_}/acknowledge`),onSuccess:()=>{g({title:"Suggestion acknowledged"}),y.invalidateQueries({queryKey:["/api/owner/ai-suggestions"]})}}),B=Te({mutationFn:async _=>Ne("POST",`/api/owner/ai-suggestions/${_}/dismiss`),onSuccess:()=>{g({title:"Suggestion dismissed"}),y.invalidateQueries({queryKey:["/api/owner/ai-suggestions"]})}}),G=_=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_),J=_=>`${Math.round(_)}%`,C=_=>{const se=new Date,te=new Date(_),we=Math.floor((se.getTime()-te.getTime())/(1e3*60));return we<60?`${we}m ago`:we<1440?`${Math.floor(we/60)}h ago`:`${Math.floor(we/1440)}d ago`},V=_=>{switch(_){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};if(j)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(!b||b.role!=="owner")return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(It,{className:"mx-auto h-12 w-12 text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Owner Access Required"}),e.jsx("p",{className:"text-gray-600",children:"This dashboard is only available for property owners."})]})})})});const z=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5 text-blue-500"}),"Earnings Overview"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"Select period"})}),e.jsx(ne,{children:iAe.map(_=>e.jsx(A,{value:_.value,children:_.label},_.value))})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),I?.map(_=>e.jsx(A,{value:_.id.toString(),children:_.name},_.id))]})]})]})]})}),e.jsx(T,{children:N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"Avg Nightly Rate"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:G(w?.averageNightlyRate||0)})]}),e.jsx(Fi,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Total Earnings"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:G(w?.totalEarnings?.[r]||0)})]}),e.jsx(L8,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-600 text-sm font-medium",children:"Occupancy Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:J(w?.occupancyRate?.thisMonth||0)}),w?.occupancyRate?.trend==="up"?e.jsx(Ot,{className:"h-4 w-4 text-green-500"}):w?.occupancyRate?.trend==="down"?e.jsx(Yl,{className:"h-4 w-4 text-red-500"}):e.jsx("div",{className:"h-4 w-4"})]})]}),e.jsx(ot,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"Total Properties"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:I?.length||0})]}),e.jsx(At,{className:"h-8 w-8 text-yellow-500"})]})})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Wd,{className:"h-5 w-5 text-orange-500"}),"Platform Revenue Split"]})}),e.jsxs(T,{children:[e.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-amber-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800",children:"OTA Commission Information"}),e.jsx("p",{className:"text-amber-700",children:"Platform revenue shown reflects actual payout received after OTA commissions. Hover over amounts for guest price details."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:w?.platformSplit&&Object.entries(w.platformSplit).map(([_,se])=>e.jsx("div",{className:`p-4 rounded-lg border ${lAe[_]}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold capitalize",children:_==="bookingCom"?"Booking.com":_}),e.jsx("p",{className:"text-2xl font-bold",children:J(se.percentage)}),_!=="direct"&&se.guestTotalPrice&&se.otaCommissionAmount?e.jsx("div",{className:"space-y-1",children:e.jsx(aAe,{guestTotalPrice:se.guestTotalPrice,platformPayout:se.revenue,otaCommissionAmount:se.otaCommissionAmount,currency:"THB",platform:_})}):e.jsx("p",{className:"text-sm",children:G(se.revenue)}),e.jsxs("p",{className:"text-xs",children:[se.bookings," bookings"]}),_!=="direct"&&se.otaCommissionRate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[se.otaCommissionRate,"% OTA fee"]})]})},_))})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx($8,{className:"h-5 w-5 text-indigo-500"}),"Revenue Trend"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:w?.monthlyTrend?.map((_,se)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"font-medium",children:_.month}),e.jsxs(U,{variant:"outline",children:[_.bookings," bookings"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:G(_.revenue)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[J(_.occupancy)," occupancy"]})]}),e.jsx(dn,{value:_.occupancy,className:"w-24"})]})]},se))})})]})]}),le=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(M8,{className:"h-5 w-5 text-green-500"}),"Balance Summary"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 bg-green-50 rounded-lg border border-green-200 text-center",children:[e.jsx("h3",{className:"text-green-600 font-medium mb-2",children:"Total Available Balance"}),e.jsx("p",{className:"text-3xl font-bold text-green-800",children:G(S?.totalBalance||0)})]}),e.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[e.jsx("h3",{className:"text-blue-600 font-medium mb-2",children:"Pending Payouts"}),e.jsx("p",{className:"text-3xl font-bold text-blue-800",children:S?.pendingPayoutRequests?.length||0})]}),e.jsxs("div",{className:"p-6 bg-purple-50 rounded-lg border border-purple-200 text-center",children:[e.jsx("h3",{className:"text-purple-600 font-medium mb-2",children:"Properties"}),e.jsx("p",{className:"text-3xl font-bold text-purple-800",children:S?.propertyBalances?.length||0})]})]})})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-5 w-5 text-blue-500"}),"Property Balances"]}),e.jsxs(M,{onClick:()=>d(!0),children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Request Payout"]})]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:S?.propertyBalances?.map(_=>e.jsxs(D,{className:"border border-gray-200",children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:_.propertyName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Property ID: ",_.propertyId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:G(_.currentBalance)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Available Balance"})]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("p",{className:"text-blue-600 text-sm",children:"Total Revenue"}),e.jsx("p",{className:"font-semibold",children:G(_.totalRevenue)})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[e.jsx("p",{className:"text-red-600 text-sm",children:"Management"}),e.jsx("p",{className:"font-semibold",children:G(_.expenses.management)})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded",children:[e.jsx("p",{className:"text-yellow-600 text-sm",children:"Utilities"}),e.jsx("p",{className:"font-semibold",children:G(_.expenses.utilities)})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[e.jsx("p",{className:"text-purple-600 text-sm",children:"Maintenance"}),e.jsx("p",{className:"font-semibold",children:G(_.expenses.maintenance)})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("p",{className:"text-green-600 text-sm",children:"Add-ons"}),e.jsx("p",{className:"font-semibold",children:G(_.expenses.addons)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{x(_),m(!0)},children:[e.jsx(Bt,{className:"h-4 w-4 mr-1"}),"See Finances"]}),e.jsxs(M,{size:"sm",onClick:()=>{p({...f,propertyId:_.propertyId.toString(),amount:_.currentBalance.toString()}),d(!0)},children:[e.jsx(js,{className:"h-4 w-4 mr-1"}),"Request Payout"]})]})]})]},_.propertyId))})})]}),S?.pendingPayoutRequests?.length>0&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5 text-orange-500"}),"Pending Payout Requests"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:S.pendingPayoutRequests.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Property ID: ",_.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Requested: ",et(Lt(_.requestDate),"MMM d, yyyy")]}),_.notes&&e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:_.notes})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-lg",children:G(_.amount)}),e.jsx(U,{className:_.status==="pending"?"bg-yellow-100 text-yellow-800":_.status==="approved"?"bg-blue-100 text-blue-800":_.status==="processing"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",children:_.status})]})]},_.id))})})]})]}),Ce=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-5 w-5 text-yellow-500"}),"AI-Powered Review Suggestions"]}),e.jsx(Ee,{children:"Automatic analysis of guest reviews to extract improvement suggestions and maintenance needs."})]}),e.jsx(T,{children:k?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[P?.map(_=>{const se=oAe[_.category];return e.jsxs(D,{className:"border-l-4 border-l-yellow-500",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(se,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:_.suggestion}),e.jsx("p",{className:"text-sm text-gray-600",children:_.propertyName})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:V(_.priority),children:_.priority}),e.jsx(U,{variant:"outline",children:_.category})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-gray-700",children:_.reason})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Source Review"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium text-sm",children:_.sourceReview.guestName}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((te,we)=>e.jsx(ps,{className:`h-3 w-3 ${we<_.sourceReview.rating?"text-yellow-400 fill-current":"text-gray-300"}`},we))}),e.jsxs("span",{className:"text-xs text-gray-600",children:[_.sourceReview.platform," â€¢ ",et(Lt(_.sourceReview.date),"MMM d")]})]}),e.jsxs("p",{className:"text-sm text-blue-700 italic",children:['"',_.sourceReview.excerpt,'"']})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Cost:"}),e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:G(_.estimatedCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expected Impact:"}),e.jsx("br",{}),e.jsxs(U,{variant:"outline",className:_.estimatedImpact==="high"?"bg-green-100 text-green-800":_.estimatedImpact==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:[_.estimatedImpact," impact"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[_.status==="new"&&e.jsxs(e.Fragment,{children:[e.jsxs(M,{size:"sm",onClick:()=>E.mutate(_.id),disabled:E.isPending,children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Acknowledge"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>B.mutate(_.id),disabled:B.isPending,children:"Dismiss"})]}),_.status==="acknowledged"&&e.jsxs(U,{className:"bg-blue-100 text-blue-800",children:[e.jsx(Bt,{className:"h-3 w-3 mr-1"}),"Acknowledged"]}),_.status==="implemented"&&e.jsxs(U,{className:"bg-green-100 text-green-800",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Implemented on ",et(Lt(_.implementationDate),"MMM d")]})]})]})]},_.id)}),P?.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Zn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No AI Suggestions Yet"}),e.jsx("p",{className:"text-gray-600",children:"AI will analyze guest reviews and suggest improvements automatically."})]})]})})]})}),H=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-indigo-500"}),"Property Timeline Activity"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Properties"}),I?.map(_=>e.jsx(A,{value:_.id.toString(),children:_.name},_.id))]})]}),e.jsxs(ae,{value:l,onValueChange:o,children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"All Activities"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Activities"}),e.jsx(A,{value:"guest",children:"Guest Activities"}),e.jsx(A,{value:"staff",children:"Staff Activities"}),e.jsx(A,{value:"maintenance",children:"Maintenance"}),e.jsx(A,{value:"expenses",children:"Expenses"})]})]})]})]})}),e.jsx(T,{children:F?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[R?.map((_,se)=>{const te=cAe[_.category];return e.jsxs("div",{className:"flex gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-2 rounded-full ${_.type==="guest"?"bg-blue-100":_.type==="staff"?"bg-green-100":_.type==="maintenance"?"bg-orange-100":"bg-purple-100"}`,children:e.jsx(te,{className:`h-4 w-4 ${_.type==="guest"?"text-blue-600":_.type==="staff"?"text-green-600":_.type==="maintenance"?"text-orange-600":"text-purple-600"}`})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:_.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description}),_.metadata?.guestName&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(User,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Guest: ",_.metadata.guestName]}),_.metadata.rating&&e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((we,ve)=>e.jsx(ps,{className:`h-3 w-3 ${ve<_.metadata.rating?"text-yellow-400 fill-current":"text-gray-300"}`},ve))})]}),_.metadata?.amount&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(Ze,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:G(_.metadata.amount)})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:C(_.timestamp)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(Kn,{className:"h-6 w-6",children:[e.jsx(eo,{src:_.user.avatar}),e.jsx(Gn,{className:"text-xs",children:_.user.name.split(" ").map(we=>we[0]).join("")})]}),e.jsx("span",{className:"text-xs text-gray-600",children:_.user.name})]})]})]}),_.status&&e.jsx(U,{className:`mt-2 ${_.status==="completed"?"bg-green-100 text-green-800":_.status==="in-progress"?"bg-blue-100 text-blue-800":_.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:_.status}),_.attachments&&_.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:_.attachments.map((we,ve)=>e.jsxs(M,{variant:"outline",size:"sm",children:[we.type==="image"?e.jsx(Ju,{className:"h-3 w-3 mr-1"}):e.jsx(dt,{className:"h-3 w-3 mr-1"}),we.name]},ve))}),_.metadata?.taskId&&e.jsxs(M,{variant:"link",size:"sm",className:"mt-2 p-0 h-auto",children:[e.jsx(Tr,{className:"h-3 w-3 mr-1"}),"View Task Details"]})]})]},_.id)}),R?.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Bs,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Activity Yet"}),e.jsx("p",{className:"text-gray-600",children:"Property activity will appear here as staff complete tasks and guests interact with your properties."})]})]})})]})});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(Ub,{role:"owner",className:"mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Jt,{className:"h-8 w-8 text-blue-500"}),"Owner Dashboard"]}),e.jsx("p",{className:"text-muted-foreground",children:"Complete property performance overview with earnings, balance management, AI suggestions, and activity timeline"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(M,{variant:"outline",onClick:()=>y.invalidateQueries(),children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})})]}),e.jsxs(xt,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsxs(de,{value:"earnings",className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-4 w-4"}),"ðŸ“Š Earnings Overview"]}),e.jsxs(de,{value:"balance",className:"flex items-center gap-2",children:[e.jsx(Er,{className:"h-4 w-4"}),"ðŸ§¾ Balance & Withdrawals"]}),e.jsxs(de,{value:"suggestions",className:"flex items-center gap-2",children:[e.jsx(Ba,{className:"h-4 w-4"}),"ðŸ’¡ AI Suggestions"]}),e.jsxs(de,{value:"timeline",className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"ðŸ“‹ Timeline Feed"]}),e.jsxs(de,{value:"finance",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"ðŸ“„ Financial Reports"]})]}),e.jsx(me,{value:"earnings",children:e.jsx(z,{})}),e.jsx(me,{value:"balance",children:e.jsx(le,{})}),e.jsx(me,{value:"suggestions",children:e.jsx(Ce,{})}),e.jsx(me,{value:"timeline",children:e.jsx(H,{})}),e.jsx(me,{value:"finance",children:e.jsx(nAe,{})})]}),e.jsx(Ge,{open:c,onOpenChange:d,children:e.jsxs(We,{className:"max-w-md",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Request Balance Payout"}),e.jsx(Ct,{children:"Submit a payout request for your property balance. Your assigned PM will be notified."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"property",children:"Property"}),e.jsxs(ae,{value:f.propertyId,onValueChange:_=>p({...f,propertyId:_}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})}),e.jsx(ne,{children:S?.propertyBalances?.map(_=>e.jsxs(A,{value:_.propertyId.toString(),children:[_.propertyName," - ",G(_.currentBalance)]},_.propertyId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"amount",children:"Amount"}),e.jsx(Q,{id:"amount",type:"number",step:"0.01",value:f.amount,onChange:_=>p({...f,amount:_.target.value}),placeholder:"Enter amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(ct,{id:"notes",value:f.notes,onChange:_=>p({...f,notes:_.target.value}),placeholder:"Add any notes for the payout request...",rows:3})]})]}),e.jsxs(Zs,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>W.mutate(f),disabled:W.isPending||!f.propertyId||!f.amount,children:W.isPending?"Submitting...":"Submit Request"})]})]})}),e.jsx(Ge,{open:u,onOpenChange:m,children:e.jsxs(We,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{children:["Financial Details - ",h?.propertyName]}),e.jsx(Ct,{children:"Detailed breakdown of income, expenses, and transactions for this property."})]}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border",children:[e.jsx("h4",{className:"text-green-600 font-medium",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:G(h.totalRevenue)})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border",children:[e.jsx("h4",{className:"text-red-600 font-medium",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-red-800",children:G(Object.values(h.expenses).reduce((_,se)=>_+se,0))})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border",children:[e.jsx("h4",{className:"text-blue-600 font-medium",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:G(h.currentBalance)})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border",children:[e.jsx("h4",{className:"text-purple-600 font-medium",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:G(h.pendingPayouts)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:h.breakdown?.map((_,se)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[et(Lt(_.date),"MMM d, yyyy")," â€¢ ",_.category]})]}),e.jsxs("div",{className:`font-semibold ${_.amount>0?"text-green-600":"text-red-600"}`,children:[_.amount>0?"+":"",G(_.amount)]})]},se))})]})]}),e.jsxs(Zs,{children:[e.jsx(M,{variant:"outline",onClick:()=>m(!1),children:"Close"}),e.jsxs(M,{children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})})]})}const uAe=Yt({guestName:Pe().min(1,"Guest name is required"),guestEmail:Pe().email("Valid email is required"),propertyId:ms().min(1,"Property selection is required"),messageContent:Pe().min(1,"Message content is required"),messageType:Rs(["chat","request","feedback","complaint"])}),mAe=Yt({guestName:Pe().min(1,"Guest name is required"),propertyId:ms().min(1,"Property selection is required"),serviceType:Rs(["massage","taxi","chef","cleaning","amenities"]),serviceName:Pe().min(1,"Service name is required"),requestedDate:ki(),requestedTime:Pe().min(1,"Time is required"),numberOfGuests:ms().min(1).max(20),specialRequests:Pe().optional()});function tT(){const{toast:t}=st(),s=pt(),[r,n]=v.useState(1),[a,i]=v.useState(null),[l,o]=v.useState(null),{data:c,isLoading:d}=xe({queryKey:["/api/guest-portal/messages",r]}),{data:u,isLoading:m}=xe({queryKey:["/api/guest-portal/ai-tasks",r]}),{data:h,isLoading:x}=xe({queryKey:["/api/guest-portal/service-requests",r]}),{data:f,isLoading:p}=xe({queryKey:["/api/guest-portal/ai-suggestions"]}),{data:g,isLoading:y}=xe({queryKey:["/api/guest-portal/settings",r]}),{data:b,isLoading:j}=xe({queryKey:["/api/guest-portal/analytics",r]}),w=Wt({resolver:ts(uAe),defaultValues:{propertyId:r,messageType:"chat"}}),N=Wt({resolver:ts(mAe),defaultValues:{propertyId:r,numberOfGuests:2,requestedDate:new Date}}),S=Te({mutationFn:C=>Ne("POST","/api/guest-portal/messages",C),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/messages"]}),t({title:"Success",description:"Message sent successfully"}),i(null),w.reset()},onError:C=>{t({title:"Error",description:C.message,variant:"destructive"})}}),O=Te({mutationFn:C=>Ne("POST","/api/guest-portal/service-requests",C),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),t({title:"Success",description:"Service request submitted successfully"}),i(null),N.reset()},onError:C=>{t({title:"Error",description:C.message,variant:"destructive"})}}),P=Te({mutationFn:({id:C,response:V})=>Ne("PATCH",`/api/guest-portal/messages/${C}/respond`,{response:V}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/messages"]}),t({title:"Success",description:"Response sent successfully"})},onError:C=>{t({title:"Error",description:C.message,variant:"destructive"})}}),k=Te({mutationFn:C=>Ne("PATCH",`/api/guest-portal/ai-tasks/${C}/approve`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/ai-tasks"]}),t({title:"Success",description:"AI task approved successfully"})},onError:C=>{t({title:"Error",description:C.message,variant:"destructive"})}}),R=Te({mutationFn:C=>Ne("PATCH",`/api/guest-portal/ai-tasks/${C}/reject`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/ai-tasks"]}),t({title:"Success",description:"AI task rejected successfully"})},onError:C=>{t({title:"Error",description:C.message,variant:"destructive"})}}),F=C=>{const V={new:"outline",acknowledged:"secondary",resolved:"default",pending:"outline",confirmed:"default",completed:"secondary",cancelled:"destructive"};return e.jsx(U,{variant:V[C]||"outline",children:C})},I=C=>{const V={low:"outline",normal:"secondary",high:"destructive",urgent:"destructive",critical:"destructive"};return e.jsx(U,{variant:V[C]||"outline",children:C})},W=C=>{switch(C){case"positive":return e.jsx(Ie,{className:"h-4 w-4 text-green-500"});case"negative":return e.jsx(yr,{className:"h-4 w-4 text-red-500"});default:return e.jsx(It,{className:"h-4 w-4 text-yellow-500"})}},E=C=>{switch(C){case"massage":return e.jsx(Wo,{className:"h-5 w-5"});case"taxi":return e.jsx(em,{className:"h-5 w-5"});case"chef":return e.jsx(am,{className:"h-5 w-5"});case"cleaning":return e.jsx(Jt,{className:"h-5 w-5"});default:return e.jsx(j4,{className:"h-5 w-5"})}},B=C=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"THB"}).format(typeof C=="string"?parseFloat(C):C),G=C=>et(new Date(C),"PPP"),J=C=>et(new Date(C),"p");return e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Guest Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Smart communication center with AI-powered task automation and guest services"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(ae,{value:r.toString(),onValueChange:C=>n(parseInt(C)),children:[e.jsx(re,{className:"w-48",children:e.jsx(ie,{placeholder:"Select property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"1",children:"Villa Sunset"}),e.jsx(A,{value:"2",children:"Ocean Breeze"}),e.jsx(A,{value:"3",children:"Mountain View"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Messages"}),e.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?b[0].totalMessages:0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest communications"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Service Requests"}),e.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?b[0].totalServiceRequests:0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bookings & requests"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Response Time"}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?`${b[0].averageResponseTime}m`:"0m"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average response"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Satisfaction"}),e.jsx(ps,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?`${b[0].guestSatisfactionScore}/5`:"0/5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest rating"})]})]})]}),e.jsxs(xt,{defaultValue:"messages",className:"space-y-6",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"messages",children:"ðŸ’¬ Messages"}),e.jsx(de,{value:"ai-tasks",children:"ðŸ¤– AI Tasks"}),e.jsx(de,{value:"services",children:"ðŸ›Žï¸ Services"}),e.jsx(de,{value:"suggestions",children:"ðŸ’¡ AI Insights"}),e.jsx(de,{value:"settings",children:"âš™ï¸ Settings"})]}),e.jsxs(me,{value:"messages",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Communication Center"}),e.jsxs(Ge,{open:a==="create-message",onOpenChange:C=>i(C?"create-message":null),children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Simulate Guest Message"]})}),e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Simulate Guest Message"}),e.jsx(Ct,{children:"Create a demo guest message to test AI processing"})]}),e.jsx(Qt,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(C=>S.mutate(C)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:w.control,name:"guestName",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Name"}),e.jsx(fe,{children:e.jsx(Q,{...C,placeholder:"Sarah Johnson"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:w.control,name:"guestEmail",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Email"}),e.jsx(fe,{children:e.jsx(Q,{...C,placeholder:"sarah.johnson@example.com"})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:w.control,name:"messageType",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Message Type"}),e.jsxs(ae,{onValueChange:C.onChange,value:C.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select message type"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"chat",children:"Chat"}),e.jsx(A,{value:"request",children:"Request"}),e.jsx(A,{value:"feedback",children:"Feedback"}),e.jsx(A,{value:"complaint",children:"Complaint"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:w.control,name:"messageContent",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Message Content"}),e.jsx(fe,{children:e.jsx(ct,{...C,placeholder:"The pool seems dirty and there's no hot water in the bathroom. Could someone please look into this?",rows:4})}),e.jsx(Zt,{children:"AI will process this message for keywords and sentiment"}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:S.isPending,children:S.isPending?"Processing...":"Send Message"})]})]})})]})]})]}),e.jsx("div",{className:"space-y-4",children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):c?.map(C=>e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(Qo,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:C.guestName}),e.jsx(U,{variant:"outline",children:C.messageType}),I(C.priority),W(C.aiSentiment)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C.guestEmail}),e.jsx("p",{className:"mt-2",children:C.messageContent}),C.aiProcessed&&e.jsxs("div",{className:"mt-3 p-3 bg-secondary/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Zn,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Analysis"}),e.jsxs(U,{variant:"secondary",children:[Math.round(parseFloat(C.aiConfidence)*100),"% confidence"]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Keywords:"})," ",C.aiKeywords?.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Suggestions:"})," ",C.aiSuggestions?.join(", ")]})]})]}),C.staffResponse&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ie,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Staff Response"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",C.respondedBy," â€¢"," ",J(C.respondedAt)]})]}),e.jsx("p",{className:"text-sm",children:C.staffResponse})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:G(C.createdAt)}),F(C.status),!C.staffResponse&&C.status!=="resolved"&&e.jsxs(M,{size:"sm",className:"mt-2",onClick:()=>{o(C),i("respond-message")},children:[e.jsx(U0,{className:"h-4 w-4 mr-1"}),"Respond"]})]})]})})},C.id))}),e.jsx(Ge,{open:a==="respond-message",onOpenChange:C=>i(C?"respond-message":null),children:e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Respond to Guest"}),e.jsxs(Ct,{children:["Send a response to ",l?.guestName]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-secondary/50 rounded-lg",children:e.jsx("p",{className:"text-sm",children:l?.messageContent})}),e.jsx(ct,{placeholder:"Type your response here...",rows:4,id:"response-text"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(M,{onClick:()=>{const C=document.getElementById("response-text")?.value;C&&l&&(P.mutate({id:l.id,response:C}),i(null))},children:"Send Response"})]})]})]})})]}),e.jsxs(me,{value:"ai-tasks",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI-Generated Tasks"}),e.jsx("div",{className:"space-y-4",children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):u?.map(C=>e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-secondary/50 rounded-lg",children:e.jsx(Zn,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold",children:["AI Task: ",C.department]}),e.jsx(U,{variant:"outline",children:C.taskType.replace("_"," ")}),I(C.urgency),e.jsxs(U,{variant:"secondary",children:[Math.round(parseFloat(C.confidence)*100),"% confidence"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Guest: ",C.guestId," â€¢ Property: ",C.propertyId]}),e.jsx("p",{className:"mb-3",children:C.aiDescription}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Keywords:"})," ",C.aiKeywords?.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",G(C.createdAt)]}),C.assignedTo&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Assigned to:"})," ",C.assignedTo]})]})]})]}),e.jsxs("div",{className:"text-right",children:[F(C.status),C.status==="pending"&&e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsxs(M,{size:"sm",onClick:()=>k.mutate(C.id),children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>R.mutate(C.id),children:[e.jsx(yr,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]})})},C.id))})]}),e.jsxs(me,{value:"services",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Service Requests"}),e.jsxs(Ge,{open:a==="create-service",onOpenChange:C=>i(C?"create-service":null),children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"New Service Request"]})}),e.jsxs(We,{className:"max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create Service Request"}),e.jsx(Ct,{children:"Book a service for guests"})]}),e.jsx(Qt,{...N,children:e.jsxs("form",{onSubmit:N.handleSubmit(C=>O.mutate(C)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:N.control,name:"guestName",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guest Name"}),e.jsx(fe,{children:e.jsx(Q,{...C,placeholder:"Mike Chen"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:N.control,name:"serviceType",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Service Type"}),e.jsxs(ae,{onValueChange:C.onChange,value:C.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select service"})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"massage",children:"Massage"}),e.jsx(A,{value:"taxi",children:"Taxi/Transport"}),e.jsx(A,{value:"chef",children:"Private Chef"}),e.jsx(A,{value:"cleaning",children:"Extra Cleaning"}),e.jsx(A,{value:"amenities",children:"Extra Amenities"})]})]}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:N.control,name:"serviceName",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Service Name"}),e.jsx(fe,{children:e.jsx(Q,{...C,placeholder:"Traditional Thai Massage"})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ge,{control:N.control,name:"requestedDate",render:({field:C})=>e.jsxs(pe,{className:"flex flex-col",children:[e.jsx(je,{children:"Date"}),e.jsxs(gl,{children:[e.jsx(jl,{asChild:!0,children:e.jsx(fe,{children:e.jsxs(M,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!C.value&&"text-muted-foreground"}`,children:[C.value?et(C.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Xe,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(Ti,{className:"w-auto p-0",align:"start",children:e.jsx(Ai,{mode:"single",selected:C.value,onSelect:C.onChange,disabled:V=>V<new Date,initialFocus:!0})})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:N.control,name:"requestedTime",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Time"}),e.jsx(fe,{children:e.jsx(Q,{...C,placeholder:"19:00"})}),e.jsx(be,{})]})}),e.jsx(ge,{control:N.control,name:"numberOfGuests",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Guests"}),e.jsx(fe,{children:e.jsx(Q,{...C,type:"number",min:"1",max:"20"})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:N.control,name:"specialRequests",render:({field:C})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Special Requests"}),e.jsx(fe,{children:e.jsx(ct,{...C,placeholder:"Couples massage preferred"})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:O.isPending,children:O.isPending?"Creating...":"Create Request"})]})]})})]})]})]}),e.jsx("div",{className:"grid gap-6",children:x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):h?.map(C=>e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:E(C.serviceType)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:C.serviceName}),e.jsx(U,{variant:"outline",children:C.serviceType})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Guest: ",C.guestName," â€¢"," ",C.numberOfGuests," guests"]}),e.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",G(C.requestedDate)," at"," ",C.requestedTime]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cost:"})," ",B(C.estimatedCost)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",C.paymentMethod.replace("_"," ")]})]}),C.specialRequests&&e.jsx("p",{className:"text-sm text-muted-foreground",children:C.specialRequests}),C.guestFeedback&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(ps,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Guest Feedback"}),e.jsx("div",{className:"flex",children:Array.from({length:C.guestRating},(V,z)=>e.jsx(ps,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"},z))})]}),e.jsx("p",{className:"text-sm",children:C.guestFeedback})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:G(C.createdAt)}),F(C.status)]})]})})},C.id))})]}),e.jsxs(me,{value:"suggestions",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI Smart Suggestions"}),e.jsx("div",{className:"grid gap-6",children:p?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):f?.map(C=>e.jsx(D,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-secondary/50 rounded-lg",children:e.jsx(Ba,{className:"h-5 w-5 text-yellow-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:C.suggestionTitle}),e.jsx(U,{variant:"outline",children:C.suggestionType.replace("_"," ")}),e.jsxs(U,{variant:"secondary",children:[Math.round(parseFloat(C.confidence)*100),"% confidence"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Target: ",C.targetAudience," â€¢ Based on:"," ",C.basedOnData.replace("_"," ")]}),e.jsx("p",{className:"mb-3",children:C.suggestionDescription}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[C.potentialRevenue&&parseFloat(C.potentialRevenue)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Potential Revenue:"})," ",B(C.potentialRevenue)]}),C.implementationCost&&parseFloat(C.implementationCost)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Implementation Cost:"})," ",B(C.implementationCost)]})]}),C.notes&&e.jsx("div",{className:"mt-3 p-3 bg-secondary/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:C.notes})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:G(C.createdAt)}),I(C.priority),F(C.status)]})]})})},C.id))})]}),e.jsxs(me,{value:"settings",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Portal Settings"}),y?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):g&&e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Portal Configuration"}),e.jsx(Ee,{children:"Enable or disable guest portal features"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(Z,{htmlFor:"enable-portal",children:"Guest Portal"}),e.jsx(Pt,{id:"enable-portal",checked:g.enableGuestPortal})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(Z,{htmlFor:"enable-ai",children:"AI Assistant"}),e.jsx(Pt,{id:"enable-ai",checked:g.enableAiAssistant})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(Z,{htmlFor:"enable-services",children:"Service Booking"}),e.jsx(Pt,{id:"enable-services",checked:g.enableServiceBooking})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(Z,{htmlFor:"enable-chat",children:"Chat System"}),e.jsx(Pt,{id:"enable-chat",checked:g.enableChatSystem})]})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Guest Information"}),e.jsx(Ee,{children:"Information displayed to guests"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Welcome Message"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.welcomeMessage})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(Z,{className:"flex items-center space-x-2",children:[e.jsx(im,{className:"h-4 w-4"}),e.jsx("span",{children:"WiFi Password"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.wifiPassword})]}),e.jsxs("div",{children:[e.jsxs(Z,{className:"flex items-center space-x-2",children:[e.jsx(ha,{className:"h-4 w-4"}),e.jsx("span",{children:"Emergency Contact"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.emergencyContact})]})]})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Local Recommendations"}),e.jsx(Ee,{children:"Places and activities recommended to guests"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-2",children:g.localRecommendations?.map((C,V)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:C})]},V))})})]})]})]})]})]})}const hAe=Yt({description:Pe().optional(),marketingDescription:Pe().optional(),electricityRate:gn.number().min(0),waterRate:gn.number().min(0),internetRate:gn.number().min(0),gasRate:gn.number().min(0),securityDeposit:gn.number().min(0),cleaningFee:gn.number().min(0),poolMaintenanceFee:gn.number().min(0),pestControlFee:gn.number().min(0),gpsLatitude:gn.number().optional(),gpsLongitude:gn.number().optional(),accessInstructions:Pe().optional(),maxGuests:gn.number().min(1),allowPets:Qr(),allowSmoking:Qr(),allowParties:Qr(),quietHoursStart:Pe(),quietHoursEnd:Pe(),guestRules:Pe().optional(),massageService:Qr(),chefService:Qr(),housekeepingService:Qr(),laundryService:Qr(),carRentalService:Qr(),airportTransfer:Qr()}),xAe=[{id:"wifi",name:"WiFi",icon:im},{id:"pool",name:"Swimming Pool",icon:sm},{id:"aircon",name:"Air Conditioning",icon:es},{id:"kitchen",name:"Full Kitchen",icon:At},{id:"parking",name:"Free Parking",icon:At},{id:"tv",name:"Smart TV",icon:At},{id:"washer",name:"Washing Machine",icon:At},{id:"balcony",name:"Balcony/Terrace",icon:At},{id:"garden",name:"Garden",icon:At},{id:"gym",name:"Gym/Fitness",icon:At}];function sT(){const[t,s]=v.useState(null),[r,n]=v.useState(!1),[a,i]=v.useState("basic"),{toast:l}=st(),o=pt(),{data:c,isLoading:d}=xe({queryKey:["/api/auth/user"],retry:!1}),u=c?.role||c?.primaryRole,m=["admin","portfolio-manager"].includes(u),h=["admin","portfolio-manager","owner"].includes(u),x=u==="owner"&&!1,{data:f,isLoading:p}=xe({queryKey:["/api/properties"],enabled:!!c}),{data:g,isLoading:y}=xe({queryKey:["/api/property-settings",t],enabled:!!t}),b=Te({mutationFn:async N=>await Ne("PUT",`/api/property-settings/${t}`,N),onSuccess:()=>{l({title:"Settings Updated",description:"Property settings have been updated successfully."}),o.invalidateQueries({queryKey:["/api/property-settings"]}),n(!1)},onError:N=>{l({title:"Update Failed",description:N.message,variant:"destructive"})}}),j=Wt({resolver:ts(hAe),defaultValues:{description:"",marketingDescription:"",electricityRate:7,waterRate:25,internetRate:800,gasRate:30,securityDeposit:5e3,cleaningFee:2e3,poolMaintenanceFee:1e3,pestControlFee:500,gpsLatitude:0,gpsLongitude:0,accessInstructions:"",maxGuests:4,allowPets:!1,allowSmoking:!1,allowParties:!1,quietHoursStart:"22:00",quietHoursEnd:"08:00",guestRules:"",massageService:!0,chefService:!1,housekeepingService:!0,laundryService:!0,carRentalService:!1,airportTransfer:!0}});ee.useEffect(()=>{g&&j.reset(g)},[g,j]);const w=N=>{b.mutate({...N,updatedBy:c?.id})};return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):h?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"âš™ï¸ Property Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure property details, utilities, amenities, and guest rules"})]}),(m||x)&&t&&e.jsx("div",{className:"flex gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"outline",onClick:()=>n(!1),children:[e.jsx(Es,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(M,{onClick:j.handleSubmit(w),disabled:b.isPending,children:[e.jsx(rm,{className:"h-4 w-4 mr-2"}),b.isPending?"Saving...":"Save Changes"]})]}):e.jsxs(M,{onClick:()=>n(!0),children:[e.jsx(Nr,{className:"h-4 w-4 mr-2"}),"Edit Settings"]})})]}),u==="owner"&&!x&&e.jsx(D,{className:"border-amber-200 bg-amber-50/50",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"View-Only Mode"})]}),e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"Settings are in view-only mode. Contact your property manager to request edit permissions."})]})}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Select Property"}),e.jsx(Ee,{children:"Choose a property to view and edit its settings"})]}),e.jsx(T,{children:e.jsxs(ae,{value:t?.toString(),onValueChange:N=>s(Number(N)),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select a property..."})}),e.jsx(ne,{children:f?.map(N=>e.jsxs(A,{value:N.id.toString(),children:[N.name," - ",N.address]},N.id))})]})})]}),t&&e.jsx(Qt,{...j,children:e.jsx("form",{onSubmit:j.handleSubmit(w),children:e.jsxs(xt,{value:a,onValueChange:i,children:[e.jsxs(ht,{className:"grid w-full grid-cols-6",children:[e.jsx(de,{value:"basic",children:"Basic Info"}),e.jsx(de,{value:"utilities",children:"Utilities"}),e.jsx(de,{value:"charges",children:"Fees & Charges"}),e.jsx(de,{value:"rules",children:"Guest Rules"}),e.jsx(de,{value:"services",children:"Services"}),e.jsx(de,{value:"goals",children:"Goals & Plan"})]}),e.jsxs(me,{value:"basic",className:"space-y-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-5 w-5"}),"Property Description"]}),e.jsx(Ee,{children:"Internal description and marketing content for the property"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsx(ge,{control:j.control,name:"description",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Internal Description"}),e.jsx(fe,{children:e.jsx(ct,{...N,placeholder:"Internal notes and description for staff...",disabled:!r,rows:3})}),e.jsx(Zt,{children:"Internal description for staff and management use"}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"marketingDescription",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Marketing Description"}),e.jsx(fe,{children:e.jsx(ct,{...N,placeholder:"Marketing description for guests and booking platforms...",disabled:!r,rows:4})}),e.jsx(Zt,{children:"Public description used for marketing and booking platforms"}),e.jsx(be,{})]})})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-5 w-5"}),"Location & Access"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"gpsLatitude",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"GPS Latitude"}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",step:"any",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"gpsLongitude",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"GPS Longitude"}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",step:"any",disabled:!r})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:j.control,name:"accessInstructions",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Access Instructions"}),e.jsx(fe,{children:e.jsx(ct,{...N,placeholder:"Detailed access instructions for guests...",disabled:!r,rows:3})}),e.jsx(Zt,{children:"Instructions for guests on how to access the property"}),e.jsx(be,{})]})})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Amenities"}),e.jsx(Ee,{children:"Available amenities and features"})]}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:xAe.map(N=>{const S=N.icon;return e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(S,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"flex-1",children:N.name}),e.jsx(Pt,{disabled:!r})]},N.id)})})})]})]}),e.jsx(me,{value:"utilities",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-5 w-5"}),"Utility Rates"]}),e.jsx(Ee,{children:"Set utility rates charged to guests (THB)"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"electricityRate",render:({field:N})=>e.jsxs(pe,{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Electricity Rate (THB/kWh)"]}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",step:"0.01",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"waterRate",render:({field:N})=>e.jsxs(pe,{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(sm,{className:"h-4 w-4"}),"Water Rate (THB/mÂ³)"]}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",step:"0.01",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"internetRate",render:({field:N})=>e.jsxs(pe,{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(im,{className:"h-4 w-4"}),"Internet Rate (THB/month)"]}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"gasRate",render:({field:N})=>e.jsxs(pe,{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Gas Rate (THB/kg)"]}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",step:"0.01",disabled:!r})}),e.jsx(be,{})]})})]})})]})}),e.jsx(me,{value:"charges",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Fees & Charges"]}),e.jsx(Ee,{children:"Standard fees and charges for guests"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"securityDeposit",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Security Deposit (THB)"}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"cleaningFee",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Cleaning Fee (THB)"}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"poolMaintenanceFee",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Pool Maintenance (THB)"}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"pestControlFee",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Pest Control (THB)"}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",disabled:!r})}),e.jsx(be,{})]})})]})})]})}),e.jsx(me,{value:"rules",className:"space-y-6",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"h-5 w-5"}),"Guest Policies"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsx(ge,{control:j.control,name:"maxGuests",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Maximum Guests"}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"number",min:"1",disabled:!r})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ge,{control:j.control,name:"allowPets",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Allow Pets"}),e.jsx(Zt,{children:"Whether pets are allowed in the property"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})}),e.jsx(ge,{control:j.control,name:"allowSmoking",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Allow Smoking"}),e.jsx(Zt,{children:"Whether smoking is allowed in the property"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})}),e.jsx(ge,{control:j.control,name:"allowParties",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Allow Parties"}),e.jsx(Zt,{children:"Whether parties and events are allowed"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"quietHoursStart",render:({field:N})=>e.jsxs(pe,{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),"Quiet Hours Start"]}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"time",disabled:!r})}),e.jsx(be,{})]})}),e.jsx(ge,{control:j.control,name:"quietHoursEnd",render:({field:N})=>e.jsxs(pe,{children:[e.jsxs(je,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4"}),"Quiet Hours End"]}),e.jsx(fe,{children:e.jsx(Q,{...N,type:"time",disabled:!r})}),e.jsx(be,{})]})})]}),e.jsx(ge,{control:j.control,name:"guestRules",render:({field:N})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Additional Guest Rules"}),e.jsx(fe,{children:e.jsx(ct,{...N,placeholder:"Additional rules and guidelines for guests...",disabled:!r,rows:4})}),e.jsx(Zt,{children:"Any additional rules or guidelines for guests"}),e.jsx(be,{})]})})]})]})}),e.jsx(me,{value:"services",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Service Availability"}),e.jsx(Ee,{children:"Configure which services are available for guests"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ge,{control:j.control,name:"massageService",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Massage Service"}),e.jsx(Zt,{children:"Professional massage service available"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})}),e.jsx(ge,{control:j.control,name:"chefService",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Chef Service"}),e.jsx(Zt,{children:"Private chef service available"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})}),e.jsx(ge,{control:j.control,name:"housekeepingService",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Housekeeping"}),e.jsx(Zt,{children:"Daily housekeeping service"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})}),e.jsx(ge,{control:j.control,name:"laundryService",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Laundry Service"}),e.jsx(Zt,{children:"Professional laundry service"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})}),e.jsx(ge,{control:j.control,name:"carRentalService",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Car Rental"}),e.jsx(Zt,{children:"Car rental service available"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})}),e.jsx(ge,{control:j.control,name:"airportTransfer",render:({field:N})=>e.jsxs(pe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(je,{className:"text-base",children:"Airport Transfer"}),e.jsx(Zt,{children:"Airport pickup and drop-off service"})]}),e.jsx(fe,{children:e.jsx(Pt,{checked:N.value,onCheckedChange:N.onChange,disabled:!r})})]})})]})})]})}),e.jsx(me,{value:"goals",className:"space-y-6",children:e.jsx(pAe,{propertyId:t,canEdit:m||x,editMode:r})})]})})})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(D,{children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx(At,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Property Settings are only accessible to Admin, Portfolio Manager, and Owner roles."})]})})})}function pAe({propertyId:t,canEdit:s,editMode:r}){const[n,a]=v.useState("overview"),i=Wt({resolver:ts(Yt({revenueTargetType:Pe().optional(),revenueTargetAmount:Pe().optional(),rewardCondition:Pe().optional()})),defaultValues:{revenueTargetType:"monthly",revenueTargetAmount:"150000",rewardCondition:"If revenue exceeds target, purchase new outdoor furniture set"}});return e.jsx(Qt,{...i,children:e.jsxs(xt,{value:n,onValueChange:a,children:[e.jsxs(ht,{className:"grid w-full grid-cols-4",children:[e.jsx(de,{value:"overview",children:"ðŸ“Š Overview"}),e.jsx(de,{value:"goals",children:"ðŸŽ¯ Revenue Goals"}),e.jsx(de,{value:"upgrades",children:"ðŸ—ï¸ Planned Upgrades"}),e.jsx(de,{value:"notes",children:"ðŸ“ Notes & Comments"})]}),e.jsx(me,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-5 w-5 text-green-600"}),"Active Goals"]}),e.jsx(Ee,{children:"Current revenue targets and progress"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Monthly Target:"}),e.jsx("span",{className:"font-semibold",children:"150,000 THB"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Current Progress:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:"125,000 THB (83%)"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"83%"}})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target reward: New outdoor sofa set"})]})})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5 text-blue-600"}),"Planned Upgrades"]}),e.jsx(Ee,{children:"Upcoming property improvements"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Pool Renovation"}),e.jsx(U,{variant:"outline",children:"High Priority"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Kitchen Upgrade"}),e.jsx(U,{variant:"secondary",children:"Medium"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Garden Landscaping"}),e.jsx(U,{variant:"secondary",children:"Low"})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Budget: 350,000 THB"})})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5 text-orange-600"}),"Recent Activity"]}),e.jsx(Ee,{children:"Latest updates and milestones"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Goal Updated"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"2 days ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"New Upgrade Added"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"1 week ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Note Added"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"2 weeks ago"})]})]})})]})]})}),e.jsx(me,{value:"goals",className:"space-y-6",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ar,{className:"h-5 w-5"}),"Revenue Goals & Rewards"]}),e.jsx(Ee,{children:"Set revenue targets and reward conditions for achieving goals"})]}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(ge,{control:i.control,name:"revenueTargetType",render:({field:l})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Target Period"}),e.jsx(fe,{children:e.jsxs(ae,{value:l.value||"monthly",onValueChange:l.onChange,disabled:!r,children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select period"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"monthly",children:"Monthly"}),e.jsx(A,{value:"quarterly",children:"Quarterly"}),e.jsx(A,{value:"yearly",children:"Yearly"})]})]})}),e.jsx(be,{})]})}),e.jsx(ge,{control:i.control,name:"revenueTargetAmount",render:({field:l})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Target Amount (THB)"}),e.jsx(fe,{children:e.jsx(Q,{...l,placeholder:"150,000",disabled:!r,type:"number"})}),e.jsx(Zt,{children:"Enter the revenue target for the selected period"}),e.jsx(be,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ge,{control:i.control,name:"rewardCondition",render:({field:l})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Reward Condition"}),e.jsx(fe,{children:e.jsx(ct,{...l,placeholder:"If revenue exceeds target, purchase new outdoor furniture set",disabled:!r,rows:3})}),e.jsx(Zt,{children:"Describe what reward/upgrade will be triggered when goal is achieved"}),e.jsx(be,{})]})}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 font-medium",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Current Progress"]}),e.jsx("div",{className:"mt-2 text-sm text-green-600",children:"125,000 THB of 150,000 THB target (83% complete)"}),e.jsx("div",{className:"mt-2 w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"83%"}})})]})]})]})})]})}),e.jsxs(me,{value:"upgrades",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Property Upgrades & Improvements"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan and track property enhancement projects"})]}),s&&r&&e.jsxs(M,{children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"Add Upgrade"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:"Pool Renovation Project"}),e.jsx(Ee,{children:"Complete pool resurfacing and equipment upgrade"})]}),e.jsx(U,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"High Priority"})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Budget"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"200,000 THB"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Target Date"}),e.jsx("div",{className:"text-sm",children:"Q2 2025"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(U,{variant:"secondary",children:"Pending Approval"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Condition Trigger"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-amber-50 p-3 rounded border",children:"âš ï¸ Only proceed if monthly revenue exceeds 180,000 THB for 3 consecutive months"})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(L,{className:"text-lg",children:"Kitchen Appliance Upgrade"}),e.jsx(Ee,{children:"Replace refrigerator and install new dishwasher"})]}),e.jsx(U,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Medium Priority"})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Budget"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"80,000 THB"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Target Date"}),e.jsx("div",{className:"text-sm",children:"Q3 2025"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(U,{variant:"secondary",children:"Planning"})]})]})})]})]})]}),e.jsxs(me,{value:"notes",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notes & Communications"}),e.jsx("p",{className:"text-muted-foreground",children:"Internal notes and stakeholder comments"})]}),s&&r&&e.jsxs(M,{children:[e.jsx(Pn,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kn,{className:"h-8 w-8",children:e.jsx(Gn,{children:"PM"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Portfolio Manager"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"2 days ago"})]})]}),e.jsx(U,{variant:"outline",children:"General"})]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm",children:"Revenue target for this month is looking achievable. Guest feedback has been consistently positive about the property condition. The pool renovation should be our next priority once we hit the target threshold."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Visible to: Owner, Staff"})]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kn,{className:"h-8 w-8",children:e.jsx(Gn,{children:"OW"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Property Owner"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"1 week ago"})]})]}),e.jsx(U,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Milestone"})]})}),e.jsxs(T,{children:[e.jsx("p",{className:"text-sm",children:"Approved the budget for kitchen upgrades. Let's prioritize the dishwasher installation as guests have mentioned this in several reviews. The refrigerator can wait until next quarter."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Bt,{className:"h-3 w-3"}),e.jsx("span",{children:"Visible to: Owner, Staff"})]})]})]})]})]})]})})}const fAe=["Chaweng","Lamai","Nathon","Bophut","Maenam","Choeng Mon","Taling Ngam","Lipa Noi"],gAe=[{label:"1 Bedroom",value:1},{label:"2 Bedrooms",value:2},{label:"3 Bedrooms",value:3},{label:"4 Bedrooms",value:4},{label:"5 Bedrooms",value:5},{label:"6 Bedrooms",value:6},{label:"7+ Bedrooms",value:7}],rT=[],nT=[{id:"owner1",name:"John Smith"},{id:"owner2",name:"Sarah Johnson"},{id:"owner3",name:"Michael Brown"},{id:"owner4",name:"Emma Davis"}],aT=[{id:"pm1",name:"Alex Thompson"},{id:"pm2",name:"Jessica Wilson"},{id:"pm3",name:"David Miller"}];function jAe({onFiltersChange:t,className:s}){const[r,n]=v.useState({}),[a,i]=v.useState(!1),l=u=>{const m={...r,...u};n(m),t(m)},o=()=>{n({}),t({})},c=u=>{const m={...r};delete m[u],n(m),t(m)},d=Object.keys(r).filter(u=>r[u]!==void 0&&r[u]!=="").length;return e.jsx(D,{className:`border-l-4 border-l-blue-500 ${s}`,children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Global Filters"}),d>0&&e.jsxs(U,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[d," active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d>0&&e.jsx(M,{variant:"ghost",size:"sm",onClick:o,className:"text-gray-500 hover:text-gray-700",children:"Clear All"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>i(!a),className:"text-blue-600 hover:text-blue-700",children:a?"Collapse":"Expand"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search properties, guests, tasks...",value:r.searchText||"",onChange:u=>l({searchText:u.target.value}),className:"pl-10"})]})}),d>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[r.propertyId&&e.jsxs(U,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(At,{className:"h-3 w-3"}),"Property: ",rT.find(u=>u.id===r.propertyId)?.name,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("propertyId")})]}),r.ownerId&&e.jsxs(U,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(zt,{className:"h-3 w-3"}),"Owner: ",nT.find(u=>u.id===r.ownerId)?.name,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("ownerId")})]}),r.portfolioManagerId&&e.jsxs(U,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ot,{className:"h-3 w-3"}),"PM: ",aT.find(u=>u.id===r.portfolioManagerId)?.name,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("portfolioManagerId")})]}),r.area&&e.jsxs(U,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"}),"Area: ",r.area,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("area")})]}),r.bedroomCount&&e.jsxs(U,{variant:"outline",className:"flex items-center gap-1",children:["Bedrooms: ",r.bedroomCount===7?"7+":r.bedroomCount,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("bedroomCount")})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsxs(ae,{value:r.propertyId?.toString()||"",onValueChange:u=>l({propertyId:u?parseInt(u):void 0}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Properties"}),rT.map(u=>e.jsx(A,{value:u.id.toString(),children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),e.jsxs(ae,{value:r.ownerId||"",onValueChange:u=>l({ownerId:u||void 0}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Owners"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Owners"}),nT.map(u=>e.jsx(A,{value:u.id,children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio Manager"}),e.jsxs(ae,{value:r.portfolioManagerId||"",onValueChange:u=>l({portfolioManagerId:u||void 0}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All PMs"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Portfolio Managers"}),aT.map(u=>e.jsx(A,{value:u.id,children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area"}),e.jsxs(ae,{value:r.area||"",onValueChange:u=>l({area:u||void 0}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"All Areas"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Areas"}),fAe.map(u=>e.jsx(A,{value:u,children:u},u))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),e.jsxs(ae,{value:r.bedroomCount?.toString()||"",onValueChange:u=>l({bedroomCount:u?parseInt(u):void 0}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Any"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"Any"}),gAe.map(u=>e.jsx(A,{value:u.value.toString(),children:u.label},u.value))]})]})]})]})]})})}function vAe(){const{user:t}=On(),[s,r]=v.useState({}),[n,a]=v.useState(!1),[i,l]=v.useState(!1),[o,c]=v.useState(!1),{data:d=[]}=xe({queryKey:["/api/properties"]}),{data:u=[]}=xe({queryKey:["/api/tasks"]}),{data:m=[]}=xe({queryKey:["/api/bookings"]}),{data:h=[]}=xe({queryKey:["/api/finance"]}),[x,f]=v.useState({properties:[],tasks:[],bookings:[],finances:[],utilities:[],maintenance:[]}),p={properties:Array.isArray(d)?d:[],tasks:Array.isArray(u)?u:[],bookings:Array.isArray(m)?m:[],finances:Array.isArray(h)?h:[],utilities:[],maintenance:[]};v.useEffect(()=>{const j=(w,N)=>w.filter(S=>{if(s.propertyId&&S.propertyId!==s.propertyId)return!1;if(s.searchText){const O=s.searchText.toLowerCase();if(!Object.values(S).join(" ").toLowerCase().includes(O))return!1}return!0});f({properties:j(p.properties),tasks:j(p.tasks),bookings:j(p.bookings),finances:j(p.finances),utilities:j(p.utilities),maintenance:j(p.maintenance)})},[s,d,u,m,h]);const g=j=>{switch(j){case"active":case"confirmed":case"paid":case"completed":return"default";case"pending":case"scheduled":return"secondary";case"overdue":case"high":return"destructive";case"maintenance":case"in_progress":case"medium":return"outline";default:return"secondary"}},y=j=>{switch(j){case"high":return e.jsx(St,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(tt,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(Ie,{className:"h-4 w-4 text-green-500"});default:return null}},b=j=>{const w=j.dueDate||j.due_date||j.due||j.deadline;if(!w)return"No date";try{const N=w instanceof Date?w:new Date(w);return isNaN(N.getTime())?"No date":N.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return"No date"}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(Ub,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive property management overview with global filtering"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{variant:"outline",className:"text-sm",children:t?.role==="admin"?"System Administrator":"Portfolio Manager"}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{try{window.location.href="/settings"}catch(j){console.error("Settings navigation error:",j),window.location.href="/simple-settings"}},title:"Settings",children:e.jsx(ss,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(jAe,{onFiltersChange:r,className:"flex-1"}),e.jsx(Q$,{variant:"outline",size:"sm",showStats:!0,showLastUpdate:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Properties"}),e.jsx("p",{className:"text-2xl font-bold",children:x.properties.length})]}),e.jsx(At,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:x.tasks.filter(j=>j.status!=="completed").length})]}),e.jsx(Md,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bookings"}),e.jsx("p",{className:"text-2xl font-bold",children:x.bookings.length})]}),e.jsx(Xe,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenue (THB)"}),e.jsx("p",{className:"text-2xl font-bold",children:x.finances.filter(j=>j.type==="revenue").reduce((j,w)=>j+w.amount,0).toLocaleString()})]}),e.jsx(Ze,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(xt,{defaultValue:"properties",className:"w-full",children:[e.jsxs(ht,{className:"grid w-full grid-cols-6",children:[e.jsx(de,{value:"properties",children:"Properties"}),e.jsx(de,{value:"tasks",children:"Tasks"}),e.jsx(de,{value:"bookings",children:"Bookings"}),e.jsx(de,{value:"finances",children:"Finances"}),e.jsx(de,{value:"utilities",children:"Utilities"}),e.jsx(de,{value:"maintenance",children:"Maintenance"})]}),e.jsx(me,{value:"properties",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-5 w-5"}),"Properties (",x.properties.length,")"]}),e.jsxs(M,{onClick:()=>c(!0),size:"sm",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),"Add Property"]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-4",children:[x.properties.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:j.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:j.address}),e.jsxs("span",{children:[j.bedrooms," bedrooms"]}),e.jsxs("span",{children:[j.maxGuests," max guests"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-semibold text-green-600",children:j.pricePerNight?`â‚¹${j.pricePerNight}/night`:"No rate set"})}),e.jsx(U,{variant:g(j.status),children:j.status})]})]},j.id)),x.properties.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No properties match your current filters"})]})})]})}),e.jsx(me,{value:"tasks",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Md,{className:"h-5 w-5"}),"Tasks (",x.tasks.length,")"]}),e.jsxs(M,{onClick:()=>a(!0),size:"sm",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),"Create Task"]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-4",children:[x.tasks.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[y(j.priority),e.jsx("h3",{className:"font-semibold",children:j.title})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:j.description}),e.jsxs("span",{children:["Assigned: ",j.assignedTo]}),e.jsxs("span",{children:["Due: ",b(j)]})]})]}),e.jsx(U,{variant:g(j.status),children:j.status})]},j.id)),x.tasks.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No tasks match your current filters"})]})})]})}),e.jsx(me,{value:"bookings",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5"}),"Bookings (",x.bookings.length,")"]}),e.jsxs(M,{onClick:()=>l(!0),size:"sm",children:[e.jsx(ut,{className:"h-4 w-4 mr-1"}),"Create Booking"]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-4",children:[x.bookings.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:j.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:j.property}),e.jsxs("span",{children:[j.checkIn," - ",j.checkOut]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-green-600",children:["â‚¹",j.amount.toLocaleString()]})}),e.jsx(U,{variant:g(j.status),children:j.status})]})]},j.id)),x.bookings.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No bookings match your current filters"})]})})]})}),e.jsx(me,{value:"finances",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5"}),"Financial Transactions (",x.finances.length,")"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-4",children:[x.finances.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:j.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:j.property}),e.jsx("span",{children:j.date})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-semibold ${j.type==="revenue"?"text-green-600":j.type==="expense"?"text-red-600":"text-blue-600"}`,children:[j.type==="expense"?"-":"+","â‚¹",j.amount.toLocaleString()]})}),e.jsx(U,{variant:j.type==="revenue"?"default":j.type==="expense"?"destructive":"secondary",children:j.type})]})]},j.id)),x.finances.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No financial transactions match your current filters"})]})})]})}),e.jsx(me,{value:"utilities",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Utility Bills (",x.utilities.length,")"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-4",children:[x.utilities.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold capitalize",children:j.type}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:j.property}),e.jsxs("span",{children:["Due: ",j.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold",children:["â‚¹",j.amount.toLocaleString()]})}),e.jsx(U,{variant:g(j.status),children:j.status})]})]},j.id)),x.utilities.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No utility bills match your current filters"})]})})]})}),e.jsx(me,{value:"maintenance",className:"space-y-4",children:e.jsxs(D,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Ms,{className:"h-5 w-5"}),"Maintenance Issues (",x.maintenance.length,")"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid gap-4",children:[x.maintenance.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[y(j.priority),e.jsx("h3",{className:"font-semibold",children:j.issue})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:j.property}),e.jsxs("span",{children:["Cost: â‚¹",j.cost.toLocaleString()]})]})]}),e.jsx(U,{variant:g(j.status),children:j.status})]},j.id)),x.maintenance.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No maintenance issues match your current filters"})]})})]})})]}),e.jsx(Vp,{isOpen:n,onOpenChange:a}),e.jsx(wm,{open:i,onOpenChange:l}),e.jsx(Hp,{open:o,onOpenChange:c})]})}const gh=[{value:"contracts",label:"ðŸ“„ Signed Contracts",icon:"ðŸ“„"},{value:"licenses",label:"ðŸ›ï¸ Government Licenses",icon:"ðŸ›ï¸"},{value:"manuals",label:"ðŸ“– House Manuals",icon:"ðŸ“–"},{value:"floorplans",label:"ðŸ—ï¸ Floor Plans",icon:"ðŸ—ï¸"},{value:"inventory",label:"ðŸ“‹ Inventory Lists",icon:"ðŸ“‹"},{value:"logs",label:"ðŸ“Š Service Logs",icon:"ðŸ“Š"},{value:"identification",label:"ðŸ†” Owner ID/Passport",icon:"ðŸ†”"},{value:"utility_accounts",label:"âš¡ Utility Screenshots",icon:"âš¡"},{value:"insurance",label:"ðŸ›¡ï¸ Insurance Documents",icon:"ðŸ›¡ï¸"},{value:"certificates",label:"ðŸŽ–ï¸ Safety Certificates",icon:"ðŸŽ–ï¸"}],iT=[{value:"admin_pm_only",label:"Admin/PM Only",icon:Kt},{value:"owner_visible",label:"Owner Visible",icon:ot},{value:"staff_visible",label:"Staff Visible",icon:At},{value:"all_visible",label:"All Visible",icon:Bt}];function yAe(){const[t,s]=v.useState("overview"),[r,n]=v.useState(""),[a,i]=v.useState(""),[l,o]=v.useState(""),[c,d]=v.useState(!1),[u,m]=v.useState(null),[h,x]=v.useState({title:"",category:"",visibility:"admin_pm_only",description:"",hasExpiration:!1,expirationDate:"",propertyId:"",tags:""}),{toast:f}=st(),p=pt(),{data:g=[]}=xe({queryKey:["/api/properties"]}),{data:y=[],isLoading:b}=xe({queryKey:["/api/documents",r,a,l],queryFn:()=>{const I=new URLSearchParams;return r&&I.append("propertyId",r),a&&I.append("category",a),l&&I.append("search",l),Ne("GET",`/api/documents?${I.toString()}`)}}),{data:j}=xe({queryKey:["/api/documents/summary",r],queryFn:()=>{const I=new URLSearchParams;return r&&I.append("propertyId",r),Ne("GET",`/api/documents/summary?${I.toString()}`)}}),{data:w=[]}=xe({queryKey:["/api/documents/expiring"],queryFn:()=>Ne("GET","/api/documents/expiring")}),N=Te({mutationFn:async I=>Ne("POST","/api/documents",I),onSuccess:()=>{f({title:"Document uploaded successfully",description:"The document has been added to the system."}),d(!1),x({title:"",category:"",visibility:"admin_pm_only",description:"",hasExpiration:!1,expirationDate:"",propertyId:"",tags:""}),p.invalidateQueries({queryKey:["/api/documents"]}),p.invalidateQueries({queryKey:["/api/documents/summary"]})},onError:I=>{f({title:"Upload failed",description:I.message||"Failed to upload document",variant:"destructive"})}}),S=()=>{if(!h.title||!h.category){f({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const I={...h,filename:`${h.title.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.pdf`,originalFilename:`${h.title}.pdf`,propertyId:h.propertyId?parseInt(h.propertyId):null,tags:h.tags?h.tags.split(",").map(W=>W.trim()):[],expirationDate:h.hasExpiration?h.expirationDate:null};N.mutate(I)},O=I=>{switch(I){case"active":return e.jsx(U,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"});case"pending_approval":return e.jsx(U,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"expired":return e.jsx(U,{variant:"destructive",children:"Expired"});default:return e.jsx(U,{variant:"outline",children:I})}},P=I=>{const E=iT.find(B=>B.value===I)?.icon||Bt;return e.jsx(E,{className:"h-4 w-4"})},k=I=>gh.find(E=>E.value===I)?.icon||"ðŸ“„",R=I=>{if(I===0)return"0 Bytes";const W=1024,E=["Bytes","KB","MB","GB"],B=Math.floor(Math.log(I)/Math.log(W));return parseFloat((I/Math.pow(W,B)).toFixed(2))+" "+E[B]},F=I=>{if(!I.hasExpiration||!I.expirationDate)return!1;const W=new Date(I.expirationDate),E=new Date(Date.now()+30*24*60*60*1e3);return W<=E};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"ðŸ“‚ Document Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure document vault and owner onboarding file management"})]}),e.jsxs(Ge,{open:c,onOpenChange:d,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Ca,{className:"mr-2 h-4 w-4"}),"Upload Document"]})}),e.jsxs(We,{className:"sm:max-w-[500px]",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Upload New Document"}),e.jsx(Ct,{children:"Add a new document to the property management system"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"title",children:"Document Title*"}),e.jsx(Q,{id:"title",value:h.title,onChange:I=>x({...h,title:I.target.value}),placeholder:"Enter document title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"property",children:"Property"}),e.jsxs(ae,{value:h.propertyId,onValueChange:I=>x({...h,propertyId:I}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select property"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Properties"}),g.map(I=>e.jsx(A,{value:I.id.toString(),children:I.name},I.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"category",children:"Category*"}),e.jsxs(ae,{value:h.category,onValueChange:I=>x({...h,category:I}),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select category"})}),e.jsx(ne,{children:gh.map(I=>e.jsx(A,{value:I.value,children:I.label},I.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"visibility",children:"Visibility"}),e.jsxs(ae,{value:h.visibility,onValueChange:I=>x({...h,visibility:I}),children:[e.jsx(re,{children:e.jsx(ie,{})}),e.jsx(ne,{children:iT.map(I=>e.jsx(A,{value:I.value,children:I.label},I.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(ct,{id:"description",value:h.description,onChange:I=>x({...h,description:I.target.value}),placeholder:"Brief description of the document",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(Q,{id:"tags",value:h.tags,onChange:I=>x({...h,tags:I.target.value}),placeholder:"important, signed, current"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"hasExpiration",checked:h.hasExpiration,onChange:I=>x({...h,hasExpiration:I.target.checked})}),e.jsx(Z,{htmlFor:"hasExpiration",children:"Document has expiration date"})]}),h.hasExpiration&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"expirationDate",children:"Expiration Date"}),e.jsx(Q,{id:"expirationDate",type:"date",value:h.expirationDate,onChange:I=>x({...h,expirationDate:I.target.value})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:S,disabled:N.isPending,children:N.isPending?"Uploading...":"Upload Document"})]})]})]})]})]}),e.jsxs(xt,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(ht,{className:"grid w-full grid-cols-5",children:[e.jsx(de,{value:"overview",children:"ðŸ“Š Overview"}),e.jsx(de,{value:"documents",children:"ðŸ“ All Documents"}),e.jsx(de,{value:"expiring",children:"âš ï¸ Expiring Soon"}),e.jsx(de,{value:"onboarding",children:"âœ… Owner Onboarding"}),e.jsx(de,{value:"access-logs",children:"ðŸ“‹ Access Logs"})]}),e.jsxs(me,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Documents"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j?.totalDocuments||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",j?.recentUploads||0," this week"]})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Expiring Soon"}),e.jsx(St,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:j?.expiringCount||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Pending Approval"}),e.jsx(tt,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:j?.pendingApproval||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires review"})]})]}),e.jsxs(D,{children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Categories"}),e.jsx(Jj,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j?.documentsByCategory?.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Document types"})]})]})]}),j?.documentsByCategory&&e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Documents by Category"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:j.documentsByCategory.map(I=>{const W=gh.find(B=>B.value===I.category),E=j.totalDocuments>0?I.count/j.totalDocuments*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:k(I.category)}),W?.label||I.category]}),e.jsx("span",{className:"font-medium",children:I.count})]}),e.jsx(dn,{value:E,className:"h-2"})]},I.category)})})})]})]}),e.jsxs(me,{value:"documents",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(Q,{placeholder:"Search documents...",value:l,onChange:I=>o(I.target.value),className:"pl-8"})]})}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"w-[200px]",children:e.jsx(ie,{placeholder:"All Properties"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Properties"}),g.map(I=>e.jsx(A,{value:I.id.toString(),children:I.name},I.id))]})]}),e.jsxs(ae,{value:a,onValueChange:i,children:[e.jsx(re,{className:"w-[200px]",children:e.jsx(ie,{placeholder:"All Categories"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"",children:"All Categories"}),gh.map(I=>e.jsx(A,{value:I.value,children:I.label},I.value))]})]})]}),b?e.jsx("div",{className:"text-center py-8",children:"Loading documents..."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(I=>e.jsxs(D,{className:"hover:shadow-md transition-shadow",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:k(I.category)}),e.jsxs("div",{children:[e.jsx(L,{className:"text-sm font-medium line-clamp-1",children:I.title}),e.jsx(Ee,{className:"text-xs",children:R(I.fileSize)})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[P(I.visibility),F(I)&&e.jsx(St,{className:"h-4 w-4 text-orange-500"})]})]})}),e.jsx(T,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[O(I.status),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(I.createdAt).toLocaleDateString()})]}),I.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:I.description}),I.tags&&I.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.tags.slice(0,3).map((W,E)=>e.jsx(U,{variant:"outline",className:"text-xs",children:W},E)),I.tags.length>3&&e.jsxs(U,{variant:"outline",className:"text-xs",children:["+",I.tags.length-3]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(Bt,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(js,{className:"h-3 w-3"})}),e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(Nr,{className:"h-3 w-3"})})]}),I.hasExpiration&&I.expirationDate&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(I.expirationDate).toLocaleDateString()]})]})]})})]},I.id))})]}),e.jsx(me,{value:"expiring",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-5 w-5 text-orange-500"}),"Documents Expiring Soon"]}),e.jsx(Ee,{children:"Documents that will expire within the next 30 days"})]}),e.jsx(T,{children:w.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ie,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No documents expiring soon"})]}):e.jsx("div",{className:"space-y-3",children:w.map(I=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:k(I.category)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:I.title}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Expires: ",I.expirationDate?new Date(I.expirationDate).toLocaleDateString():"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[O(I.status),e.jsx(M,{size:"sm",variant:"outline",children:e.jsx(Bt,{className:"h-3 w-3"})})]})]},I.id))})})]})}),e.jsx(me,{value:"onboarding",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"âœ… Owner Onboarding Checklist"}),e.jsx(Ee,{children:"Track document collection and setup progress for new owners"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ot,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Owner onboarding checklist interface coming soon"}),e.jsx("p",{className:"text-sm",children:"Will include step-by-step document collection workflow"})]})})]})}),e.jsx(me,{value:"access-logs",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"ðŸ“‹ Document Access Logs"}),e.jsx(Ee,{children:"Audit trail of all document access and modifications"})]}),e.jsx(T,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Kt,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Access logs interface coming soon"}),e.jsx("p",{className:"text-sm",children:"Will display detailed audit trail for compliance"})]})})]})})]})]})}const bAe=Yt({fileName:Pe().min(1,"File name is required"),category:Pe().min(1,"Category is required"),fileType:Pe(),tags:Pe().optional(),description:Pe().optional(),propertyId:gn.number()}),yo=[{id:"legal",name:"Legal Documents",icon:dt,color:"bg-blue-100 text-blue-700"},{id:"contracts",name:"Contracts",icon:dt,color:"bg-green-100 text-green-700"},{id:"licenses",name:"Licenses & Permits",icon:dt,color:"bg-purple-100 text-purple-700"},{id:"utility_bills",name:"Utility Bills",icon:dt,color:"bg-orange-100 text-orange-700"},{id:"insurance",name:"Insurance Documents",icon:dt,color:"bg-red-100 text-red-700"},{id:"financial",name:"Financial Records",icon:dt,color:"bg-yellow-100 text-yellow-700"},{id:"maintenance",name:"Maintenance Records",icon:dt,color:"bg-gray-100 text-gray-700"},{id:"photos",name:"Property Photos",icon:q0,color:"bg-pink-100 text-pink-700"}],NAe=t=>{if(!t)return"document";const s=t.split("/");return s[s.length-1].replace(/^\d+_/,"")||"document"},bo=t=>t.fileName?t.fileName:t.fileUrl?NAe(t.fileUrl):"document";function lT(){const[t,s]=v.useState(null),[r,n]=v.useState("all"),[a,i]=v.useState(""),[l,o]=v.useState(!1),[c,d]=v.useState(null),[u,m]=v.useState(!1),[h,x]=v.useState(null),[f,p]=v.useState(""),[g,y]=v.useState(""),[b,j]=v.useState("all"),[w,N]=v.useState(10),[S,O]=v.useState(null),{toast:P}=st(),k=pt(),R=async Y=>{if(!Y.id){P({title:"Download Failed",description:"Document ID is missing.",variant:"destructive"});return}try{const he=await fetch(`/api/property-documents/${Y.id}/download`);if(!he.ok)throw new Error("Failed to download file");const Fe=await he.blob(),Ve=window.URL.createObjectURL(Fe),rt=window.document.createElement("a");rt.href=Ve,rt.download=bo(Y),window.document.body.appendChild(rt),rt.click(),window.document.body.removeChild(rt),window.URL.revokeObjectURL(Ve),P({title:"Download Started",description:"Your file is being downloaded."})}catch{P({title:"Download Failed",description:"Failed to download the file. Please try again.",variant:"destructive"})}},F=Te({mutationFn:async Y=>await Ne("DELETE",`/api/property-documents/${Y}`),onSuccess:()=>{hr.delete("/api/property-documents/expiring?days=30"),P({title:"Document Deleted",description:"Document has been deleted successfully."}),k.invalidateQueries({predicate:Y=>Y.queryKey[0]&&typeof Y.queryKey[0]=="string"&&Y.queryKey[0].startsWith("/api/property-documents/property/")}),k.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),O(null)},onError:Y=>{P({title:"Delete Failed",description:Y.message,variant:"destructive"})}}),I=(Y,he)=>Y?Y.startsWith("image/")?"IMAGE":Y==="application/pdf"?"PDF":Y.includes("spreadsheet")||Y.includes("excel")?"EXCEL":Y.split("/")[1]?.toUpperCase()||"FILE":he?.split(".").pop()?.toUpperCase()||"FILE",{data:W,isLoading:E}=xe({queryKey:["/api/auth/user"],retry:!1}),B=W?.role,G=["admin","portfolio-manager"].includes(B),J=["admin","portfolio-manager","owner"].includes(B),{data:C,isLoading:V}=xe({queryKey:["/api/properties"],enabled:!!W}),{data:z,isLoading:le}=xe({queryKey:[`/api/property-documents/property/${t}`],enabled:!!t&&!!W}),Ce=Y=>["application/pdf","image/jpeg","image/png","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(Y.type)?Y.size>10485760?(P({title:"File Too Large",description:"File size must be less than 10 MB.",variant:"destructive"}),!1):!0:(P({title:"Invalid File Type",description:"Please upload a PDF, JPG, PNG, XLSX, or XLS file.",variant:"destructive"}),!1),H=Y=>{const he=Y.target.files?.[0];he&&Ce(he)&&(x(he),se.getValues("fileName")||se.setValue("fileName",he.name))},_=Te({mutationFn:async Y=>{const he=await fetch("/api/property-documents/upload",{method:"POST",body:Y,credentials:"include"});if(!he.ok){const Fe=await he.json();throw new Error(Fe.error||"Failed to upload document")}return he.json()},onSuccess:()=>{hr.delete("/api/property-documents/expiring?days=30"),P({title:"Document Uploaded",description:"Document has been uploaded successfully."}),k.invalidateQueries({predicate:Y=>Y.queryKey[0]&&typeof Y.queryKey[0]=="string"&&Y.queryKey[0].startsWith("/api/property-documents/property/")}),k.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),o(!1),x(null),se.reset()},onError:Y=>{P({title:"Upload Failed",description:Y.message,variant:"destructive"})}}),se=Wt({resolver:ts(bAe),defaultValues:{fileName:"",category:"",fileType:"pdf",tags:"",description:"",propertyId:t||0}}),te=Y=>{if(!h){P({title:"No File Selected",description:"Please select a file to upload.",variant:"destructive"});return}const he=new FormData;he.append("file",h),he.append("fileName",Y.fileName),he.append("category",Y.category),he.append("fileType",Y.fileType),he.append("tags",Y.tags||""),he.append("description",Y.description||""),he.append("propertyId",t?.toString()||""),_.mutate(he)};let we=z?.filter(Y=>{const he=r==="all"||Y.category===r||Y.docType===r,Fe=!a||Y.fileName?.toLowerCase().includes(a.toLowerCase())||Y.description?.toLowerCase().includes(a.toLowerCase())||Y.tags?.some(Vt=>Vt?.toLowerCase().includes(a.toLowerCase())),Ve=Y.createdAt?new Date(Y.createdAt).toISOString().split("T")[0]:null,rt=!f||!Ve||Ve>=f,gt=!g||!Ve||Ve<=g;return he&&Fe&&rt&&gt})||[];if(b!=="all"){const Y=parseInt(b);we=we.slice(0,Y)}const ve=we.slice(0,w),X=we.length>w,ce=Y=>{switch(Y){case"image":return e.jsx(q0,{className:"h-4 w-4"});case"pdf":return e.jsx(dt,{className:"h-4 w-4"});default:return e.jsx(Zj,{className:"h-4 w-4"})}};return E?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):J?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"ðŸ§¾ Property Document Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage legal documents, contracts, licenses, and utility bills"})]}),G&&e.jsxs(M,{onClick:()=>o(!0),children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Select Property"}),e.jsx(Ee,{children:"Choose a property to view its documents"})]}),e.jsx(T,{children:e.jsxs(ae,{value:t?.toString(),onValueChange:Y=>s(Number(Y)),children:[e.jsx(re,{children:e.jsx(ie,{placeholder:"Select a property..."})}),e.jsx(ne,{children:C?.map(Y=>e.jsxs(A,{value:Y.id.toString(),children:[Y.name," - ",Y.address]},Y.id))})]})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(Q,{placeholder:"Search documents by name, description, or tags...",value:a,onChange:Y=>i(Y.target.value),className:"pl-10"})]})}),e.jsxs(ae,{value:r,onValueChange:n,children:[e.jsx(re,{className:"md:w-48",children:e.jsx(ie,{placeholder:"Filter by category"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All Categories"}),yo.map(Y=>e.jsx(A,{value:Y.id,children:Y.name},Y.id))]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Date From:"}),e.jsx(Q,{type:"date",value:f,onChange:Y=>p(Y.target.value),className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Date To:"}),e.jsx(Q,{type:"date",value:g,onChange:Y=>y(Y.target.value),className:"flex-1"})]}),e.jsxs(ae,{value:b,onValueChange:Y=>{j(Y),N(10)},children:[e.jsx(re,{className:"md:w-32",children:e.jsx(ie,{placeholder:"Limit"})}),e.jsxs(ne,{children:[e.jsx(A,{value:"all",children:"All"}),e.jsx(A,{value:"20",children:"20"}),e.jsx(A,{value:"50",children:"50"}),e.jsx(A,{value:"80",children:"80"}),e.jsx(A,{value:"100",children:"100"})]})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:yo.map(Y=>{const he=z?.filter(Ve=>Ve.category===Y.id)?.length||0,Fe=Y.icon;return e.jsx(D,{className:`cursor-pointer transition-all hover:shadow-md ${r===Y.id?"ring-2 ring-primary":""}`,onClick:()=>n(Y.id),children:e.jsxs(T,{className:"p-4 text-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${Y.color} flex items-center justify-center mx-auto mb-2`,children:e.jsx(Fe,{className:"h-6 w-6"})}),e.jsx("h3",{className:"text-sm font-medium mb-1",children:Y.name}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:he})]})},Y.id)})}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Jj,{className:"h-5 w-5"}),"Documents",r!=="all"&&e.jsx(U,{variant:"secondary",children:yo.find(Y=>Y.id===r)?.name})]}),e.jsxs(Ee,{children:[we.length," documents found"]})]}),e.jsx(T,{children:le?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"})}):we.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Jj,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||r!=="all"?"Try adjusting your search or filter criteria.":"Upload your first document to get started."}),G&&e.jsxs(M,{onClick:()=>o(!0),children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:ve.map(Y=>{const he=yo.find(Fe=>Fe.id===Y.category);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${he?.color||"bg-gray-100 text-gray-700"}`,children:ce(Y.fileType)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:bo(Y)}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(U,{variant:"outline",className:"text-xs",children:he?.name||Y.category}),e.jsx("span",{children:"â€¢"}),e.jsx(zt,{className:"h-3 w-3"}),e.jsx("span",{children:Y.uploadedBy}),e.jsx("span",{children:"â€¢"}),e.jsx(Xe,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(Y.createdAt).toLocaleDateString()})]}),Y.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Y.description}),Y.tags&&Y.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Y.tags.map((Fe,Ve)=>e.jsxs(U,{variant:"secondary",className:"text-xs",children:[e.jsx(oB,{className:"h-2 w-2 mr-1"}),Fe]},Ve))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{d(Y),m(!0)},"data-testid":`button-view-${Y.id}`,children:e.jsx(Bt,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>R(Y),"data-testid":`button-download-${Y.id}`,children:e.jsx(js,{className:"h-4 w-4"})}),G&&e.jsx(M,{variant:"outline",size:"sm",onClick:()=>O(Y),className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${Y.id}`,children:e.jsx(ir,{className:"h-4 w-4"})})]})]},Y.id)})}),X&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(M,{variant:"outline",onClick:()=>N(Y=>Y+10),"data-testid":"button-view-more",children:["View More (",we.length-w," remaining)"]})})]})})]})]}),e.jsx(Ge,{open:l,onOpenChange:o,children:e.jsxs(We,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Upload Document"}),e.jsx(Ct,{children:"Upload a new document to the property document center"})]}),e.jsx(Qt,{...se,children:e.jsxs("form",{onSubmit:se.handleSubmit(te),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"file-upload",className:"text-sm font-medium",children:"Select File *"}),e.jsx(Q,{id:"file-upload",type:"file",accept:".pdf,.jpg,.jpeg,.png,.xlsx,.xls",onChange:H,className:"cursor-pointer"}),h&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",h.name," (",(h.size/1024).toFixed(2)," KB)"]})]}),e.jsx(ge,{control:se.control,name:"fileName",render:({field:Y})=>e.jsxs(pe,{children:[e.jsx(je,{children:"File Name"}),e.jsx(fe,{children:e.jsx(Q,{...Y,placeholder:"Enter file name..."})}),e.jsx(be,{})]})}),e.jsx(ge,{control:se.control,name:"category",render:({field:Y})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Category"}),e.jsxs(ae,{onValueChange:Y.onChange,defaultValue:Y.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{placeholder:"Select category..."})})}),e.jsx(ne,{children:yo.map(he=>e.jsx(A,{value:he.id,children:he.name},he.id))})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:se.control,name:"fileType",render:({field:Y})=>e.jsxs(pe,{children:[e.jsx(je,{children:"File Type"}),e.jsxs(ae,{onValueChange:Y.onChange,defaultValue:Y.value,children:[e.jsx(fe,{children:e.jsx(re,{children:e.jsx(ie,{})})}),e.jsxs(ne,{children:[e.jsx(A,{value:"pdf",children:"PDF Document"}),e.jsx(A,{value:"image",children:"Image"}),e.jsx(A,{value:"doc",children:"Word Document"}),e.jsx(A,{value:"excel",children:"Excel Spreadsheet"})]})]}),e.jsx(be,{})]})}),e.jsx(ge,{control:se.control,name:"tags",render:({field:Y})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Tags (Optional)"}),e.jsx(fe,{children:e.jsx(Q,{...Y,placeholder:"Enter tags separated by commas..."})}),e.jsx(be,{})]})}),e.jsx(ge,{control:se.control,name:"description",render:({field:Y})=>e.jsxs(pe,{children:[e.jsx(je,{children:"Description (Optional)"}),e.jsx(fe,{children:e.jsx(ct,{...Y,placeholder:"Brief description of the document..."})}),e.jsx(be,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:_.isPending,children:_.isPending?"Uploading...":"Upload"})]})]})})]})}),e.jsx(Ge,{open:u,onOpenChange:m,children:e.jsxs(We,{className:"sm:max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[c&&ce(c.fileType),c&&bo(c)]}),e.jsx(Ct,{children:"Document preview and details"})]}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"}),e.jsx(U,{variant:"outline",className:"ml-2",children:yo.find(Y=>Y.id===c.category)?.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded by:"}),e.jsx("span",{className:"ml-2",children:c.uploadedBy})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Upload date:"}),e.jsx("span",{className:"ml-2",children:new Date(c.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"File type:"}),e.jsx("span",{className:"ml-2",children:I(c.mimeType,c.fileUrl)})]})]}),c.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Description:"}),e.jsx("p",{className:"mt-1",children:c.description})]}),c.tags&&c.tags.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.tags.map((Y,he)=>e.jsx(U,{variant:"secondary",children:Y},he))})]}),e.jsx("div",{className:"border rounded-lg bg-gray-50 overflow-hidden",children:(()=>{const Y=I(c.mimeType,c.fileUrl),he=c.fileUrl;return Y==="IMAGE"||Y==="JPEG"||Y==="JPG"||Y==="PNG"?he&&!he.startsWith("file:///")&&!he.startsWith("file://")&&!he.match(/^[A-Z]:\\/i)?e.jsx("div",{className:"w-full max-h-[500px] flex items-center justify-center bg-white",children:e.jsx("img",{src:he,alt:bo(c),className:"max-w-full max-h-[500px] object-contain","data-testid":"image-preview",onError:Ve=>{Ve.currentTarget.style.display="none",Ve.currentTarget.parentElement.innerHTML=`
                              <div class="p-8 text-center">
                                <p class="text-sm text-red-600 font-medium">Failed to load image</p>
                                <p class="text-xs text-muted-foreground mt-1">The image file may be missing or corrupted</p>
                              </div>
                            `}})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(dt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Invalid file URL"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This document was uploaded incorrectly. Please re-upload the file."})]}):Y==="PDF"?e.jsx("div",{className:"w-full h-[500px]",children:e.jsx("iframe",{src:he,className:"w-full h-full border-0",title:bo(c),"data-testid":"pdf-preview"})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(dt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Preview not available for this file type"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["File type: ",Y]})]})})()})]})]})}),e.jsx(Lw,{open:!!S,onOpenChange:Y=>!Y&&O(null),children:e.jsxs(Qf,{children:[e.jsxs(Yf,{children:[e.jsx(Zf,{children:"Delete Document"}),e.jsxs(Jf,{children:['Are you sure you want to delete "',S&&bo(S),'"? This action cannot be undone.']})]}),e.jsxs(Xf,{children:[e.jsx(tg,{children:"Cancel"}),e.jsx(eg,{onClick:()=>{S&&F.mutate(S.id)},className:"bg-red-600 hover:bg-red-700",children:F.isPending?"Deleting...":"Delete"})]})]})})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(D,{children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx(At,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Document Center is only accessible to Admin, Portfolio Manager, and Owner roles."})]})})})}const $j=[{value:"ownership",label:"Proof of Ownership",required:!0,icon:dt},{value:"floorplan",label:"Floorplan",required:!1,icon:V8},{value:"license",label:"Rental License",required:!0,icon:dt},{value:"insurance",label:"Property Insurance",required:!0,icon:dt},{value:"welcome",label:"Welcome Book / Guest Manual",required:!1,icon:Zj},{value:"safety",label:"Safety Certificates",required:!1,icon:dt},{value:"hoa",label:"HOA / Residence Rules",required:!1,icon:Zj}];function wAe(){const[t,s]=v.useState(""),[r,n]=v.useState(null),{toast:a}=st(),i=pt(),{data:l}=xe({queryKey:["/api/owner/properties"]}),{data:o,isLoading:c}=xe({queryKey:["/api/owner/documents",t],enabled:!!t}),d=Te({mutationFn:async({propertyId:g,category:y,files:b})=>{const j=new FormData;return j.append("propertyId",g),j.append("category",y),b.forEach((w,N)=>{j.append(`file${N}`,w)}),fetch("/api/owner/documents/upload",{method:"POST",body:j})},onSuccess:()=>{a({title:"Documents uploaded successfully",description:"Your documents have been uploaded and will be reviewed."}),i.invalidateQueries({queryKey:["/api/owner/documents",t]}),n(null)},onError:()=>{a({title:"Upload failed",description:"There was an error uploading your documents. Please try again.",variant:"destructive"}),n(null)}}),u=Te({mutationFn:async g=>Ne("DELETE",`/api/owner/documents/${g}`),onSuccess:()=>{a({title:"Document deleted",description:"The document has been successfully deleted."}),i.invalidateQueries({queryKey:["/api/owner/documents",t]})},onError:()=>{a({title:"Delete failed",description:"There was an error deleting the document. Please try again.",variant:"destructive"})}}),m=(g,y)=>{if(!y||!t)return;const b=Array.from(y).filter(j=>{const w=j.type.includes("pdf")||j.type.includes("image"),N=j.size<=10*1024*1024;return w&&N});if(b.length===0){a({title:"Invalid files",description:"Please select PDF or image files under 10MB each.",variant:"destructive"});return}n(g),d.mutate({propertyId:t,category:g,files:b})},h=g=>{switch(g){case"approved":return e.jsx(Ie,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(It,{className:"h-4 w-4 text-red-500"});default:return e.jsx(It,{className:"h-4 w-4 text-yellow-500"})}},x=g=>{const y=g==="approved"?"default":g==="rejected"?"destructive":"secondary";return e.jsx(U,{variant:y,children:g})},p=o?$j.reduce((y,b)=>(o.filter(w=>w.category===b.value).length>0&&y.completed++,b.required&&y.required++,y),{completed:0,required:0}):{completed:0,required:0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Documents"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload and manage important documents for your properties"})]}),t&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completion Status"}),e.jsxs("div",{className:"text-lg font-semibold",children:[p.completed,"/",$j.length," Categories"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.required," required categories"]})]})]}),e.jsxs(D,{children:[e.jsx($,{children:e.jsx(L,{children:"Select Property"})}),e.jsx(T,{children:e.jsxs(ae,{value:t,onValueChange:s,children:[e.jsx(re,{className:"w-full",children:e.jsx(ie,{placeholder:"Choose a property to manage documents"})}),e.jsx(ne,{children:l?.map(g=>e.jsxs(A,{value:g.id.toString(),children:[g.name," - ",g.address]},g.id))})]})})]}),t&&e.jsx("div",{className:"grid gap-6",children:$j.map(g=>{const y=g.icon,b=o?.filter(w=>w.category===g.value)||[],j=r===g.value;return e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx(L,{className:"text-lg",children:g.label}),g.required&&e.jsx(U,{variant:"outline",className:"text-xs",children:"Required"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:b.length>0&&e.jsxs(U,{variant:"outline",children:[b.length," file(s)"]})})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Ca,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:w=>m(g.value,w.target.files),className:"hidden",id:`upload-${g.value}`,disabled:j}),e.jsx("label",{htmlFor:`upload-${g.value}`,className:`cursor-pointer text-blue-600 hover:text-blue-500 ${j?"opacity-50 cursor-not-allowed":""}`,children:j?"Uploading...":"Click to upload files"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG up to 10MB each"})]})]}),b.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Uploaded Documents"}),b.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(dt,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.filename}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Uploaded ",new Date(w.uploadedAt).toLocaleDateString()]})]}),h(w.status),x(w.status)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Ge,{children:[e.jsx(hs,{asChild:!0,children:e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Bt,{className:"h-4 w-4"})})}),e.jsxs(We,{className:"max-w-4xl max-h-[80vh]",children:[e.jsx(Qe,{children:e.jsx(Ye,{children:w.filename})}),e.jsx("div",{className:"flex-1 overflow-auto",children:w.fileType?.includes("pdf")?e.jsx("iframe",{src:w.fileUrl,className:"w-full h-96",title:w.filename}):e.jsx("img",{src:w.fileUrl,alt:w.filename,className:"max-w-full h-auto"})})]})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>window.open(w.fileUrl,"_blank"),children:e.jsx(js,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>u.mutate(w.id),disabled:u.isPending,children:e.jsx(ir,{className:"h-4 w-4"})})]})]},w.id))]}),e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 p-3 rounded",children:[e.jsx("strong",{children:"Document Requirements:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[g.value==="ownership"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Title deed or purchase agreement"}),e.jsx("li",{children:"â€¢ Property registration documents"})]}),g.value==="license"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Short-term rental license"}),e.jsx("li",{children:"â€¢ Business registration certificate"})]}),g.value==="insurance"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Property insurance policy"}),e.jsx("li",{children:"â€¢ Liability coverage documentation"})]}),g.value==="floorplan"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Architectural drawings or floor plans"}),e.jsx("li",{children:"â€¢ Room layout with dimensions"})]}),g.value==="safety"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Fire safety certificates"}),e.jsx("li",{children:"â€¢ Electrical safety inspections"})]}),g.value==="welcome"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Guest welcome instructions"}),e.jsx("li",{children:"â€¢ Property usage guidelines"})]}),g.value==="hoa"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"â€¢ Homeowners association rules"}),e.jsx("li",{children:"â€¢ Building or residence regulations"})]})]})]})]})]},g.value)})})]})}function oT(){const{toast:t}=st(),[s,r]=v.useState("bookings"),[n,a]=v.useState(null),[i,l]=v.useState("generate"),{data:o=[],isLoading:c}=xe({queryKey:["/api/reports"]}),d=Te({mutationFn:async y=>Ne("POST","/api/reports/generate",{type:y}),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/reports"]}),t({title:"Report Generated",description:"Your report has been generated successfully"})},onError:y=>{t({title:"Error",description:y.message||"Failed to generate report",variant:"destructive"})}}),u=Te({mutationFn:async y=>Ne("DELETE",`/api/reports/${y}`),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/reports"]}),a(null),t({title:"Report Deleted",description:"Report has been deleted successfully"})},onError:y=>{t({title:"Error",description:y.message||"Failed to delete report",variant:"destructive"})}}),m=()=>{d.mutate(s)},h=async y=>{try{const b=await fetch(`/api/reports/${y}/export`,{credentials:"include"});if(!b.ok)throw new Error("Export failed");const j=await b.blob(),w=window.URL.createObjectURL(j),N=document.createElement("a");N.href=w,N.download=`report_${y}.csv`,document.body.appendChild(N),N.click(),document.body.removeChild(N),window.URL.revokeObjectURL(w),t({title:"Export Successful",description:"Report has been exported to CSV"})}catch{t({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}},x=y=>{confirm("Are you sure you want to delete this report?")&&u.mutate(y)},f=[{value:"bookings",label:"Bookings Report",icon:dt},{value:"finances",label:"Financial Report",icon:Ot},{value:"tasks",label:"Tasks Report",icon:$s},{value:"properties",label:"Properties Report",icon:Wd}],p=y=>f.find(j=>j.value===y)?.label||y,g=y=>({bookings:"bg-blue-100 text-blue-800",finances:"bg-green-100 text-green-800",tasks:"bg-orange-100 text-orange-800",properties:"bg-purple-100 text-purple-800"})[y]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight","data-testid":"title-reports",children:"Reports & Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive reports and analytics"})]})}),e.jsxs(xt,{value:i,onValueChange:l,className:"space-y-6",children:[e.jsxs(ht,{children:[e.jsx(de,{value:"generate","data-testid":"tab-generate",children:"Generate Report"}),e.jsx(de,{value:"history","data-testid":"tab-history",children:"Report History"}),e.jsx(de,{value:"view","data-testid":"tab-view",disabled:!n,children:"View Report"})]}),e.jsx(me,{value:"generate",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Generate New Report"}),e.jsx(Ee,{children:"Select a report type to generate comprehensive analytics"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map(y=>e.jsx(D,{className:`cursor-pointer transition-all hover:shadow-md ${s===y.value?"ring-2 ring-primary":""}`,onClick:()=>r(y.value),"data-testid":`card-report-type-${y.value}`,children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx(y.icon,{className:"h-12 w-12 mx-auto mb-3 text-primary"}),e.jsx("h3",{className:"font-semibold",children:y.label})]})},y.value))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{value:s,onValueChange:r,children:[e.jsx(re,{className:"flex-1","data-testid":"select-report-type",children:e.jsx(ie,{placeholder:"Select report type"})}),e.jsx(ne,{children:f.map(y=>e.jsx(A,{value:y.value,children:y.label},y.value))})]}),e.jsx(M,{onClick:m,disabled:d.isPending,"data-testid":"button-generate-report",children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"mr-2 h-4 w-4"}),"Generate Report"]})})]})]})]})}),e.jsx(me,{value:"history",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Report History"}),e.jsx(Ee,{children:"View and manage previously generated reports"})]}),e.jsx(T,{children:c?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"})}):o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(dt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No reports generated yet"}),e.jsx("p",{className:"text-sm",children:"Generate your first report to get started"})]}):e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Report Title"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Generated"}),e.jsx(Oe,{className:"text-right",children:"Actions"})]})}),e.jsx(zs,{children:o.map(y=>e.jsxs(Nt,{"data-testid":`row-report-${y.id}`,children:[e.jsx(De,{className:"font-medium",children:y.title}),e.jsx(De,{children:e.jsx(U,{className:g(y.type),children:p(y.type)})}),e.jsx(De,{children:et(new Date(y.createdAt),"MMM dd, yyyy HH:mm")}),e.jsxs(De,{className:"text-right space-x-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{a(y),l("view")},"data-testid":`button-view-${y.id}`,children:[e.jsx(dt,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>h(y.id),"data-testid":`button-export-${y.id}`,children:[e.jsx(js,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>x(y.id),"data-testid":`button-delete-${y.id}`,children:[e.jsx(ir,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},y.id))})]})})]})}),e.jsx(me,{value:"view",className:"space-y-4",children:n&&e.jsxs(D,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(L,{children:n.title}),e.jsxs(Ee,{children:["Generated on ",et(new Date(n.createdAt),"MMMM dd, yyyy at HH:mm")]})]}),e.jsxs(M,{variant:"outline",onClick:()=>h(n.id),"data-testid":"button-export-current",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),e.jsxs(T,{className:"space-y-6",children:[n.data.summary&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(n.data.summary).map(([y,b])=>e.jsx(D,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:y.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-2xl font-bold",children:typeof b=="number"?b.toLocaleString():b})]})},y))}),n.data.details&&n.data.details.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Detailed Data"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsx(Nt,{children:Object.keys(n.data.details[0]).map(y=>e.jsx(Oe,{className:"capitalize",children:y.replace(/([A-Z])/g," $1").trim()},y))})}),e.jsx(zs,{children:n.data.details.slice(0,10).map((y,b)=>e.jsx(Nt,{children:Object.values(y).map((j,w)=>e.jsx(De,{children:typeof j=="object"?JSON.stringify(j):String(j)},w))},b))})]}),n.data.details.length>10&&e.jsxs("div",{className:"p-3 text-center text-sm text-muted-foreground bg-muted",children:["Showing 10 of ",n.data.details.length," records. Export to CSV to view all."]})]})]})]})]})})]})]})}function cT(){const{toast:t}=st(),[s,r]=v.useState(!1),[n,a]=v.useState(!1),[i,l]=v.useState(null),[o,c]=v.useState({name:"",description:"",trigger:"",action:"",schedule:""}),{data:d=[],isLoading:u}=xe({queryKey:["/api/automations"],refetchOnWindowFocus:!1,staleTime:3e4}),m=Te({mutationFn:async k=>Ne("POST","/api/automations",k),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/automations"]}),r(!1),p(),t({title:"Automation Created",description:"Your automation rule has been created successfully"})},onError:k=>{t({title:"Error",description:k.message||"Failed to create automation",variant:"destructive"})}}),h=Te({mutationFn:async({id:k,data:R})=>Ne("PUT",`/api/automations/${k}`,R),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/automations"]}),a(!1),l(null),p(),t({title:"Automation Updated",description:"Your automation rule has been updated successfully"})},onError:k=>{t({title:"Error",description:k.message||"Failed to update automation",variant:"destructive"})}}),x=Te({mutationFn:async({id:k,isActive:R})=>Ne("PATCH",`/api/automations/${k}/toggle`,{isActive:R}),onMutate:async({id:k,isActive:R})=>{await wt.cancelQueries({queryKey:["/api/automations"]});const F=wt.getQueryData(["/api/automations"]);return wt.setQueryData(["/api/automations"],I=>I&&I.map(W=>W.id===k?{...W,isActive:R}:W)),{previousAutomations:F}},onSuccess:k=>{wt.setQueryData(["/api/automations"],R=>R&&R.map(F=>F.id===k.id?k:F)),t({title:"Automation Updated",description:"Automation status has been updated"})},onError:(k,R,F)=>{wt.setQueryData(["/api/automations"],F?.previousAutomations),t({title:"Error",description:k.message||"Failed to toggle automation",variant:"destructive"})}}),f=Te({mutationFn:async k=>Ne("DELETE",`/api/automations/${k}`),onSuccess:()=>{wt.invalidateQueries({queryKey:["/api/automations"]}),t({title:"Automation Deleted",description:"Automation rule has been deleted successfully"})},onError:k=>{t({title:"Error",description:k.message||"Failed to delete automation",variant:"destructive"})}}),p=()=>{c({name:"",description:"",trigger:"",action:"",schedule:""})},g=()=>{if(!o.name||!o.trigger||!o.action){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}m.mutate(o)},y=k=>{l(k),c({name:k.name,description:k.description||"",trigger:k.trigger,action:k.action,schedule:k.schedule||""}),a(!0)},b=()=>{i&&h.mutate({id:i.id,data:o})},j=k=>{confirm("Are you sure you want to delete this automation?")&&f.mutate(k)},w=(k,R)=>{x.mutate({id:k,isActive:R})},N=[{value:"booking_due",label:"Booking Check-in Due",icon:tt},{value:"task_overdue",label:"Task Overdue",icon:Is},{value:"payment_pending",label:"Payment Pending",icon:Sa},{value:"utility_threshold",label:"Utility Threshold Exceeded",icon:es}],S=[{value:"send_email",label:"Send Email",icon:Sa},{value:"send_sms",label:"Send SMS",icon:Pn},{value:"create_task",label:"Create Task",icon:Sn},{value:"send_notification",label:"Send Notification",icon:Is}],O=k=>{const F=N.find(I=>I.value===k)?.icon||tt;return e.jsx(F,{className:"h-4 w-4"})},P=k=>{const F=S.find(I=>I.value===k)?.icon||Is;return e.jsx(F,{className:"h-4 w-4"})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight","data-testid":"title-automation",children:"Automation & Alerts"}),e.jsx("p",{className:"text-muted-foreground",children:"Smart reminders, AI insights, and automated property management workflows"})]}),e.jsxs(Ge,{open:s,onOpenChange:r,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(M,{"data-testid":"button-create-automation",children:[e.jsx(ut,{className:"mr-2 h-4 w-4"}),"Create Automation"]})}),e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Create New Automation"}),e.jsx(Ct,{children:"Set up a new automation rule for your property management"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"name",children:"Name *"}),e.jsx(Q,{id:"name",placeholder:"e.g., Send check-in reminder",value:o.name,onChange:k=>c({...o,name:k.target.value}),"data-testid":"input-automation-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(ct,{id:"description",placeholder:"Describe what this automation does",value:o.description,onChange:k=>c({...o,description:k.target.value}),"data-testid":"input-automation-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"trigger",children:"Trigger *"}),e.jsxs(ae,{value:o.trigger,onValueChange:k=>c({...o,trigger:k}),children:[e.jsx(re,{"data-testid":"select-trigger",children:e.jsx(ie,{placeholder:"Select trigger"})}),e.jsx(ne,{children:N.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"action",children:"Action *"}),e.jsxs(ae,{value:o.action,onValueChange:k=>c({...o,action:k}),children:[e.jsx(re,{"data-testid":"select-action",children:e.jsx(ie,{placeholder:"Select action"})}),e.jsx(ne,{children:S.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"schedule",children:"Schedule (Optional)"}),e.jsx(Q,{id:"schedule",placeholder:"e.g., daily, weekly, or cron expression",value:o.schedule,onChange:k=>c({...o,schedule:k.target.value}),"data-testid":"input-schedule"})]}),e.jsx(M,{onClick:g,className:"w-full",disabled:m.isPending,"data-testid":"button-submit-create",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Automation"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium text-muted-foreground",children:"Total Rules"})}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium text-muted-foreground",children:"Active"})}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(k=>k.isActive).length})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium text-muted-foreground",children:"Inactive"})}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:d.filter(k=>!k.isActive).length})})]}),e.jsxs(D,{children:[e.jsx($,{className:"pb-3",children:e.jsx(L,{className:"text-sm font-medium text-muted-foreground",children:"Total Triggers"})}),e.jsx(T,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.reduce((k,R)=>k+R.triggerCount,0)})})]})]}),e.jsxs(D,{children:[e.jsxs($,{children:[e.jsx(L,{children:"Automation Rules"}),e.jsx(Ee,{children:"Manage your automated workflows and alerts"})]}),e.jsx(T,{children:u?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(Gt,{className:"h-8 w-8 animate-spin text-primary"})}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(es,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No automation rules created yet"}),e.jsx("p",{className:"text-sm",children:"Create your first automation to get started"})]}):e.jsxs(qs,{children:[e.jsx(Us,{children:e.jsxs(Nt,{children:[e.jsx(Oe,{children:"Name"}),e.jsx(Oe,{children:"Trigger"}),e.jsx(Oe,{children:"Action"}),e.jsx(Oe,{children:"Triggered"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{className:"text-right",children:"Actions"})]})}),e.jsx(zs,{children:d.map(k=>e.jsxs(Nt,{"data-testid":`row-automation-${k.id}`,children:[e.jsx(De,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:k.name}),k.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[O(k.trigger),e.jsx("span",{className:"text-sm",children:N.find(R=>R.value===k.trigger)?.label||k.trigger})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[P(k.action),e.jsx("span",{className:"text-sm",children:S.find(R=>R.value===k.action)?.label||k.action})]})}),e.jsx(De,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[k.triggerCount," times"]}),k.lastTriggered&&e.jsxs("div",{className:"text-muted-foreground",children:["Last: ",et(new Date(k.lastTriggered),"MMM dd, HH:mm")]})]})}),e.jsx(De,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{checked:k.isActive,onCheckedChange:R=>w(k.id,R),"data-testid":`switch-active-${k.id}`}),e.jsx(U,{variant:k.isActive?"default":"secondary",children:k.isActive?"Active":"Inactive"})]})}),e.jsxs(De,{className:"text-right space-x-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>y(k),"data-testid":`button-edit-${k.id}`,children:e.jsx(Nr,{className:"h-4 w-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>j(k.id),"data-testid":`button-delete-${k.id}`,children:e.jsx(ir,{className:"h-4 w-4"})})]})]},k.id))})]})})]}),e.jsx(Ge,{open:n,onOpenChange:a,children:e.jsxs(We,{children:[e.jsxs(Qe,{children:[e.jsx(Ye,{children:"Edit Automation"}),e.jsx(Ct,{children:"Update your automation rule settings"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-name",children:"Name *"}),e.jsx(Q,{id:"edit-name",value:o.name,onChange:k=>c({...o,name:k.target.value}),"data-testid":"input-edit-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-description",children:"Description"}),e.jsx(ct,{id:"edit-description",value:o.description,onChange:k=>c({...o,description:k.target.value}),"data-testid":"input-edit-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-trigger",children:"Trigger *"}),e.jsxs(ae,{value:o.trigger,onValueChange:k=>c({...o,trigger:k}),children:[e.jsx(re,{"data-testid":"select-edit-trigger",children:e.jsx(ie,{})}),e.jsx(ne,{children:N.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-action",children:"Action *"}),e.jsxs(ae,{value:o.action,onValueChange:k=>c({...o,action:k}),children:[e.jsx(re,{"data-testid":"select-edit-action",children:e.jsx(ie,{})}),e.jsx(ne,{children:S.map(k=>e.jsx(A,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-schedule",children:"Schedule (Optional)"}),e.jsx(Q,{id:"edit-schedule",value:o.schedule,onChange:k=>c({...o,schedule:k.target.value}),"data-testid":"input-edit-schedule"})]}),e.jsx(M,{onClick:b,className:"w-full",disabled:h.isPending,"data-testid":"button-submit-update",children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Automation"})]})]})})]})}const SAe=()=>{const[t,s]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState(null),[l,o]=v.useState({});v.useEffect(()=>{(async()=>{try{i(null);const b=await fetch("/api/hostaway/listings");if(!b.ok)throw new Error("Failed to load Hostaway listings");const j=await b.json(),w=j.listings??j.data??[];s(w);const N={};for(const S of w)N[S.id]=0;o(N)}catch(b){console.error(b),i(b.message??"Unknown error")}finally{n(!1)}})()},[]);const c=y=>{const b=u(y);b.length!==0&&o(j=>{const N=((j[y.id]??0)-1+b.length)%b.length;return{...j,[y.id]:N}})},d=y=>{const b=u(y);b.length!==0&&o(j=>{const N=((j[y.id]??0)+1)%b.length;return{...j,[y.id]:N}})},u=y=>{const b=y.imageUrls??[],w=[...y.thumbnailUrl?[y.thumbnailUrl]:[],...b].filter(Boolean);return Array.from(new Set(w))},m=y=>{const b=y.pricePerNight??y.nightlyRate??y.price??y.nightly_price??null;if(b==null||b==="")return null;const j=typeof b=="string"?Number(b):b,w=y.currency||"$";return isNaN(j)?`${b}/night`:`${w}${j}/night`},h=y=>y.bedrooms??y.bedroomsCount??null,x=y=>y.bathrooms??y.bathroomsCount??null,f=y=>y.maxGuests??y.guests??y.sleeps??null,p=y=>y.rating??y.reviewScore??null,g=t.length;return r?e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Hostaway Properties"}),e.jsx("div",{className:"h-4 w-16 animate-pulse rounded-full bg-gray-200"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:[1,2,3].map(y=>e.jsx("div",{className:"h-72 animate-pulse rounded-2xl bg-gray-100"},y))})]}):a?e.jsxs("div",{className:"mt-6 rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:["Failed to load Hostaway properties: ",a]}):g?e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Hostaway Properties"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[g," Properties"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2 xl:grid-cols-3",children:t.map(y=>{const b=u(y),j=l[y.id]??0,w=b.length>0?b:["/images/property-placeholder.jpg"],N=y.photosCount??(b.length>0?b.length:null),S=y.title||y.name||"Untitled property",P=[y.city,y.country].filter(Boolean).join(", "),k=m(y),R=h(y),F=x(y),I=f(y),W=p(y);return e.jsxs("div",{className:"flex h-full flex-col overflow-hidden rounded-2xl border bg-white shadow-sm",children:[e.jsxs("div",{className:"relative h-56 w-full overflow-hidden",children:[e.jsx("div",{className:"flex h-full w-full transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${j*100}%)`},children:w.map((E,B)=>e.jsx("img",{src:E,alt:`${S} photo ${B+1}`,className:"h-full w-full flex-shrink-0 object-cover"},B))}),b.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>c(y),className:"absolute left-3 top-1/2 flex h-8 w-8 -translate-y-1/2 items-center justify-center rounded-full bg-white/85 text-gray-700 shadow hover:bg-white",children:"â€¹"}),e.jsx("button",{type:"button",onClick:()=>d(y),className:"absolute right-3 top-1/2 flex h-8 w-8 -translate-y-1/2 items-center justify-center rounded-full bg-white/85 text-gray-700 shadow hover:bg-white",children:"â€º"})]}),N&&N>1&&e.jsxs("div",{className:"absolute right-3 top-3 rounded-full bg-black/65 px-3 py-1 text-xs font-medium text-white",children:["+",N-1," photos"]}),b.length>0&&e.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 rounded-full bg-black/70 px-3 py-1 text-xs font-medium text-white",children:[Math.min(j+1,b.length)," / ",b.length]})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-2 p-4",children:[e.jsx("h3",{className:"line-clamp-2 text-sm font-semibold",children:S}),P&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx("span",{role:"img","aria-label":"location",children:"ðŸ“"}),e.jsx("span",{children:P})]}),y.description&&e.jsx("p",{className:"line-clamp-2 text-xs text-gray-600",children:y.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:[k&&e.jsx("span",{className:"rounded-full bg-blue-50 px-3 py-1 font-semibold text-blue-700",children:k}),R!=null&&R!==""&&e.jsxs("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-gray-700",children:[R," bed"]}),F!=null&&F!==""&&e.jsxs("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-gray-700",children:[F," bath"]}),I!=null&&I!==""&&e.jsxs("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-gray-700",children:[I," guests"]}),W!=null&&W!==""&&e.jsxs("span",{className:"ml-auto rounded-full bg-yellow-50 px-3 py-1 font-medium text-yellow-700",children:["â­ ",W]})]})]})]},y.id)})})]}):e.jsxs("div",{className:"mt-6 rounded-lg border bg-white p-6 text-sm text-gray-600",children:["No Hostaway properties found. Try clicking ",e.jsx("b",{children:"Sync Properties"})," first."]})};function CAe(){const{user:t,isLoading:s}=On();return nU({enabled:!!t,debounceMs:150}),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"text-lg font-medium text-blue-700",children:"Loading HostPilotPro..."})]})}):t?e.jsxs("div",{className:"min-h-screen min-h-dvh bg-background w-full max-w-full overflow-x-hidden",children:[e.jsx(Fq,{}),e.jsx("div",{className:"ml-0 md:ml-64 transition-all duration-300 min-h-screen",children:e.jsxs(Vj,{children:[e.jsx(Re,{path:"/",component:HG}),e.jsx(Re,{path:"/properties",component:KG}),e.jsx(Re,{path:"/property/:id/edit",component:kwe}),e.jsx(Re,{path:"/property/:id",component:Cwe}),e.jsx(Re,{path:"/tasks",component:fS}),e.jsx(Re,{path:"/ultra-fast-tasks",component:fS}),e.jsx(Re,{path:"/bookings",component:XG}),e.jsx(Re,{path:"/bookings-central",component:ZG}),e.jsx(Re,{path:"/services",component:mW}),e.jsx(Re,{path:"/finances",component:hW}),e.jsx(Re,{path:"/advanced-analytics",component:Awe}),e.jsx(Re,{path:"/settings",component:wS}),e.jsx(Re,{path:"/profile",component:bW}),e.jsx(Re,{path:"/help",component:AS}),e.jsx(Re,{path:"/dashboard-hub",component:hPe}),e.jsx(Re,{path:"/property-hub",component:NPe}),e.jsx(Re,{path:"/finance-hub",component:kPe}),e.jsx(Re,{path:"/enhanced-finances",children:()=>{const r=v.lazy(()=>br(()=>import("./EnhancedFinances-DF88Magp.js"),__vite__mapDeps([6,1,2])));return e.jsx(v.Suspense,{fallback:e.jsx("div",{children:"Loading Enhanced Finance Analytics..."}),children:e.jsx(r,{})})}}),e.jsx(Re,{path:"/admin/finance",component:v.lazy(()=>br(()=>import("./AdminFinance-D5OW2Mkv.js"),__vite__mapDeps([7,1,2])))}),e.jsx(Re,{path:"/system-hub",component:HPe}),e.jsx(Re,{path:"/system-hub-old",component:qPe}),e.jsx(Re,{path:"/enhanced-admin-dashboard",component:vAe}),e.jsx(Re,{path:"/simple-filtered-financial-dashboard",component:oU}),e.jsx(Re,{path:"/filtered-property-dashboard",component:Rz}),e.jsx(Re,{path:"/multi-property-calendar",component:Pwe}),e.jsx(Re,{path:"/maintenance-suggestions",component:SW}),e.jsx(Re,{path:"/checkin-checkout-workflow",component:Fg}),e.jsx(Re,{path:"/daily-operations",component:CS}),e.jsx(Re,{path:"/task-overview",component:qke}),e.jsx(Re,{path:"/daily-operations-overview",component:Uke}),e.jsx(Re,{path:"/sandbox-testing",component:LR}),e.jsx(Re,{path:"/guest-portal-smart-requests",component:_W}),e.jsx(Re,{path:"/guest-activity-recommendations",component:FW}),e.jsx(Re,{path:"/upsell-recommendations-management",component:ePe}),e.jsx(Re,{path:"/admin/api-connections",component:GR}),e.jsx(Re,{path:"/admin/organization-branding",component:aQ}),e.jsx(Re,{path:"/admin/legal-templates",component:iQ}),e.jsx(Re,{path:"/admin/marketing-pack-management",component:lQ}),e.jsx(Re,{path:"/integrations/hostaway",component:SAe}),e.jsx(Re,{path:"/admin/ai-ops-anomalies",component:WR}),e.jsx(Re,{path:"/admin/user-management",component:kv}),e.jsx(Re,{path:"/user-management",component:TS}),e.jsx(Re,{path:"/user-management/edit",component:TS}),e.jsx(Re,{path:"/legacy-user-management",component:kv}),e.jsx(Re,{path:"/admin/activity-log",component:Pv}),e.jsx(Re,{path:"/owner-target-upgrade-tracker",component:ZW}),e.jsx(Re,{path:"/auto-scheduling-recurring-task-generator",component:cQ}),e.jsx(Re,{path:"/ota-revenue-net-payout-calculation",component:dQ}),e.jsx(Re,{path:"/ota-payout-logic-smart-revenue",component:uQ}),e.jsx(Re,{path:"/loyalty-guest-tracker",component:OS}),e.jsx(Re,{path:"/loyalty-tracker",component:OS}),e.jsx(Re,{path:"/invoice-generator",component:ES}),e.jsx(Re,{path:"/invoices",component:ES}),e.jsx(Re,{path:"/staff-advance-salary-overtime-tracker",component:mQ}),e.jsx(Re,{path:"/staff-wallet-petty-cash",component:_we}),e.jsx(Re,{path:"/staff-cash-collection",component:Iwe}),e.jsx(Re,{path:"/staff-expense-management",component:$we}),e.jsx(Re,{path:"/admin/staff-permission-management",component:Fwe}),e.jsx(Re,{path:"/maintenance-log-warranty-tracker",component:hQ}),e.jsx(Re,{path:"/staff-profile-payroll",component:xQ}),e.jsx(Re,{path:"/admin/system-integrity-check",component:QR}),e.jsx(Re,{path:"/utility-tracker",component:QNe}),e.jsx(Re,{path:"/ai-notifications-reminders",component:I5}),e.jsx(Re,{path:"/finance-engine",component:XNe}),e.jsx(Re,{path:"/property-appliances-management",component:Vke}),e.jsx(Re,{path:"/alert-management",component:zke}),e.jsx(Re,{path:"/automation-management",component:W$}),e.jsx(Re,{path:"/currency-tax-management",component:Xke}),e.jsx(Re,{path:"/document-center",component:yAe}),e.jsx(Re,{path:"/property-document-center",component:lT}),e.jsx(Re,{path:"/property-documents-management",component:lT}),e.jsx(Re,{path:"/property-document-upload",component:wAe}),e.jsx(Re,{path:"/ai-test",component:Mwe}),e.jsx(Re,{path:"/ai-features",component:Rwe}),e.jsx(Re,{path:"/retail-agent",component:QPe}),e.jsx(Re,{path:"/referral-agent",component:iR}),e.jsx(Re,{path:"/agent/hub",component:aR}),e.jsx(Re,{path:"/agent/quote-generator",component:nPe}),e.jsx(Re,{path:"/agent/commissions",component:aPe}),e.jsx(Re,{path:"/agent/proposals",component:iPe}),e.jsx(Re,{path:"/agent/media-download",component:dPe}),e.jsx(Re,{path:"/agent/leaderboard",component:mPe}),e.jsx(Re,{path:"/signup-request",component:Hwe}),e.jsx(Re,{path:"/admin/saas-management",component:Z5}),e.jsx(Re,{path:"/simple-settings",component:wS}),e.jsx(Re,{path:"/help",component:BW}),e.jsx(Re,{path:"/simple-help",component:LW}),e.jsx(Re,{path:"/fast-help",component:AS}),e.jsx(Re,{path:"/admin/additional-settings",component:X$}),e.jsx(Re,{path:"/admin/upgraded-dashboard",component:G$}),e.jsx(Re,{path:"/smart-pricing-performance-toolkit",component:JA}),e.jsx(Re,{path:"/smart-pricing",component:JA}),e.jsx(Re,{path:"/owner-invoicing-payouts",component:eT}),e.jsx(Re,{path:"/owner-invoicing",component:eT}),e.jsx(Re,{path:"/portfolio-manager-dashboard",component:rAe}),e.jsx(Re,{path:"/owner-dashboard",component:dAe}),e.jsx(Re,{path:"/guest-services",component:tT}),e.jsx(Re,{path:"/guest-portal",component:tT}),e.jsx(Re,{path:"/property-settings",component:sT}),e.jsx(Re,{path:"/property-settings-module",component:sT}),e.jsx(Re,{path:"/staff-operations",component:RP}),e.jsx(Re,{path:"/staff-dashboard",component:RP}),e.jsx(Re,{path:"/check-in-check-out",component:Fg}),e.jsx(Re,{path:"/checkin-checkout",component:Fg}),e.jsx(Re,{path:"/guest-checkin-checkout-tracker",component:SS}),e.jsx(Re,{path:"/guest-check-in-check-out",component:SS}),e.jsx(Re,{path:"/activity-logs",component:Pv}),e.jsx(Re,{path:"/daily-operations",component:CS}),e.jsx(Re,{path:"/ai-bot",component:sPe}),e.jsx(Re,{path:"/achievements",component:Cke}),e.jsx(Re,{path:"/salaries-wages",component:Ej}),e.jsx(Re,{path:"/staff-salaries",component:Ej}),e.jsx(Re,{path:"/admin/salaries-wages",component:Ej}),e.jsx(Re,{path:"/reports",component:oT}),e.jsx(Re,{path:"/reports-analytics",component:oT}),e.jsx(Re,{path:"/automation",component:cT}),e.jsx(Re,{path:"/automation-alerts",component:cT}),e.jsx(Re,{component:wW})]})})]}):e.jsxs(Vj,{children:[e.jsx(Re,{path:"/login",component:yW}),e.jsx(Re,{component:NW})]})}function kAe(){return v.useEffect(()=>{Bq()},[]),e.jsx(fL,{client:wt,children:e.jsx(Vq,{children:e.jsx(Hq,{children:e.jsx(Iq,{children:e.jsxs(dm,{children:[e.jsx(Bwe,{}),e.jsx(CAe,{}),e.jsx(Lwe,{}),e.jsx(WB,{})]})})})})})}window.addEventListener("error",t=>{console.error("ðŸš¨ JS Error:",t.message,"at",t.filename,":",t.lineno)});window.addEventListener("unhandledrejection",t=>{console.error("ðŸš¨ Unhandled Promise Rejection:",t.reason)});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("button").forEach(t=>{!(t.onclick||t.getAttribute("onclick")||t.hasAttribute("data-testid")||t.closest("form")||t.type==="submit"||t.getAttribute("aria-expanded")!==null)&&t.innerText.trim()&&!t.disabled&&console.warn("âš ï¸ Button may have no action:",t.innerText.trim())})},3e3)});pT(document.getElementById("root")).render(e.jsx(kAe,{}));export{Ge as $,mr as A,U as B,D as C,js as D,Xn as E,Dn as F,sp as G,Tn as H,Q as I,Ul as J,or as K,Z as L,zi as M,ti as N,Ae as O,gl as P,qs as Q,Ut as R,ae as S,Ot as T,Us as U,Nt as V,Oe as W,Es as X,ya as Y,zs as Z,De as _,T as a,hs as a0,Bt as a1,We as a2,Qe as a3,Ye as a4,tt as a5,Ie as a6,nm as a7,bs as a8,g1 as a9,ma as aA,Pt as aB,v4 as aC,Jr as aD,Jt as aE,na as aF,Ms as aG,$s as aH,Wa as aI,Nn as aJ,dt as aK,rB as aL,kl as aM,Ee as aN,Kn as aO,eo as aP,Gn as aQ,aB as aa,ar as ab,zt as ac,st as ad,pt as ae,Te as af,Ne as ag,ss as ah,rm as ai,Nr as aj,tB as ak,ut as al,ot as am,Rr as an,as as ao,ps as ap,St as aq,vs as ar,Fi as as,x4 as at,Mr as au,_j as av,Kt as aw,Er as ax,es as ay,N4 as az,$ as b,L as c,M as d,re as e,ie as f,ne as g,A as h,jl as i,e as j,Be as k,Xe as l,Ti as m,Ai as n,Ze as o,Yl as p,At as q,xt as r,ht as s,de as t,xe as u,me as v,da as w,s0 as x,Tl as y,va as z};

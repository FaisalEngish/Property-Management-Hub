const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SimpleFilteredFinancialDashboard-CB8ZW-xL.js","assets/vendor-DazevGLP.js","assets/utils-Bf-PQeq0.js","assets/FilteredPropertyDashboard-BgVnnd0T.js","assets/Settings-CgxdD_eN.js","assets/AdminGodModeRoleManager-DR13_X9Z.js","assets/EnhancedFinances-DYJ82SbE.js","assets/AdminFinance-Dd1Ubfdf.js"])))=>i.map(i=>d[i]);
import{r as j,a as bc,R as n0,b as X,c as u$,d as Nm,g as ls}from"./vendor-DazevGLP.js";import{s as ar,e as ml,a as Xn,b as m$,c as ua,d as Od,i as a0,f as Ed,g as vr,h as sr,j as th,k as Ta,l as h$,m as wj,n as x$,o as rt,p as hh,q as p$,r as f$,t as g$,u as j$,v as zf,w as pw,x as v$,y as $A,z as FA,A as i0,B as l0,C as y$,D as b$,E as LA,F as Md,G as Sj,H as xs,I as N$}from"./utils-Bf-PQeq0.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var BA={exports:{}},Hx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w$=j,S$=Symbol.for("react.element"),C$=Symbol.for("react.fragment"),P$=Object.prototype.hasOwnProperty,k$=w$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A$={key:!0,ref:!0,__self:!0,__source:!0};function VA(t,s,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(n in s)P$.call(s,n)&&!A$.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:S$,type:t,key:i,ref:l,props:a,_owner:k$.current}}Hx.Fragment=C$;Hx.jsx=VA;Hx.jsxs=VA;BA.exports=Hx;var e=BA.exports,qA,fw=bc;qA=fw.createRoot,fw.hydrateRoot;const T$="modulepreload",D$=function(t){return"/"+t},gw={},ur=function(s,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");a=Promise.allSettled(r.map(c=>{if(c=D$(c),c in gw)return;gw[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":T$,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,x)=>{m.addEventListener("load",h),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return s().catch(i)})};function O$(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,a,i,l=[],o="",c=t.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(l.push(r),o+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),i=a.indexOf(".",1),l.push(a.substring(1,~n?n:~i?i:a.length)),o+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~n?"?":"")+"\\"+a.substring(i))):o+="/"+a;return{keys:l,pattern:new RegExp("^"+o+(s?"(?=$|/)":"/?$"),"i")}}var UA={exports:{}},zA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=j;function E$(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var M$=typeof Object.is=="function"?Object.is:E$,R$=To.useState,_$=To.useEffect,I$=To.useLayoutEffect,$$=To.useDebugValue;function F$(t,s){var r=s(),n=R$({inst:{value:r,getSnapshot:s}}),a=n[0].inst,i=n[1];return I$(function(){a.value=r,a.getSnapshot=s,Gf(a)&&i({inst:a})},[t,r,s]),_$(function(){return Gf(a)&&i({inst:a}),t(function(){Gf(a)&&i({inst:a})})},[t]),$$(r),r}function Gf(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!M$(t,r)}catch{return!0}}function L$(t,s){return s()}var B$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?L$:F$;zA.useSyncExternalStore=To.useSyncExternalStore!==void 0?To.useSyncExternalStore:B$;UA.exports=zA;var GA=UA.exports;const V$=n0.useInsertionEffect,q$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U$=q$?j.useLayoutEffect:j.useEffect,z$=V$||U$,HA=t=>{const s=j.useRef([t,(...r)=>s[0](...r)]).current;return z$(()=>{s[0]=t}),s[1]},G$="popstate",o0="pushState",c0="replaceState",H$="hashchange",jw=[G$,o0,c0,H$],K$=t=>{for(const s of jw)addEventListener(s,t);return()=>{for(const s of jw)removeEventListener(s,t)}},KA=(t,s)=>GA.useSyncExternalStore(K$,t,s),W$=()=>location.search,Y$=({ssrSearch:t=""}={})=>KA(W$,()=>t),vw=()=>location.pathname,Q$=({ssrPath:t}={})=>KA(vw,t?()=>t:vw),X$=(t,{replace:s=!1,state:r=null}={})=>history[s?c0:o0](r,"",t),Z$=(t={})=>[Q$(t),X$],yw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[yw]>"u"){for(const t of[o0,c0]){const s=history[t];history[t]=function(){const r=s.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,yw,{value:!0})}const J$=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",WA=(t="")=>t==="/"?"":t,eF=(t,s)=>t[0]==="~"?t.slice(1):WA(s)+t,tF=(t="",s)=>J$(bw(WA(t)),bw(s)),bw=t=>{try{return decodeURI(t)}catch{return t}},YA={hook:Z$,searchHook:Y$,parser:O$,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},QA=j.createContext(YA),Nc=()=>j.useContext(QA),XA={},ZA=j.createContext(XA),JA=()=>j.useContext(ZA),Kx=t=>{const[s,r]=t.hook(t);return[tF(t.base,s),HA((n,a)=>r(eF(n,t.base),a))]},pr=()=>Kx(Nc()),d0=(t,s,r,n)=>{const{pattern:a,keys:i}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",n),l=a.exec(r)||[],[o,...c]=l;return o!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((m,h)=>[m,c[h]])):l.groups;let u={...c};return d&&Object.assign(u,d),u})(),...n?[o]:[]]:[!1,null]},sF=t=>d0(Nc().parser,t,pr()[0]),rF=({children:t,...s})=>{const r=Nc(),n=s.hook?YA:r;let a=n;const[i,l]=s.ssrPath?.split("?")??[];l&&(s.ssrSearch=l,s.ssrPath=i),s.hrefs=s.hrefs??s.hook?.hrefs;let o=j.useRef({}),c=o.current,d=c;for(let u in n){const m=u==="base"?n[u]+(s[u]||""):s[u]||n[u];c===d&&m!==d[u]&&(o.current=d={...d}),d[u]=m,(m!==n[u]||m!==a[u])&&(a=d)}return j.createElement(QA.Provider,{value:a,children:t})},Nw=({children:t,component:s},r)=>s?j.createElement(s,{params:r}):typeof t=="function"?t(r):t,nF=t=>{let s=j.useRef(XA);const r=s.current;return s.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([n,a])=>a!==r[n])?t:r},Ee=({path:t,nest:s,match:r,...n})=>{const a=Nc(),[i]=Kx(a),[l,o,c]=r??d0(a.parser,t,i,s),d=nF({...JA(),...o});if(!l)return null;const u=c?j.createElement(rF,{base:c},Nw(n,d)):Nw(n,d);return j.createElement(ZA.Provider,{value:d,children:u})},Es=j.forwardRef((t,s)=>{const r=Nc(),[n,a]=Kx(r),{to:i="",href:l=i,onClick:o,asChild:c,children:d,className:u,replace:m,state:h,...x}=t,g=HA(f=>{f.ctrlKey||f.metaKey||f.altKey||f.shiftKey||f.button!==0||(o?.(f),f.defaultPrevented||(f.preventDefault(),a(l,t)))}),p=r.hrefs(l[0]==="~"?l.slice(1):r.base+l,r);return c&&j.isValidElement(d)?j.cloneElement(d,{onClick:g,href:p}):j.createElement("a",{...x,onClick:g,href:p,className:u?.call?u(n===l):u,children:d,ref:s})}),eT=t=>Array.isArray(t)?t.flatMap(s=>eT(s&&s.type===j.Fragment?s.props.children:s)):[t],Cj=({children:t,location:s})=>{const r=Nc(),[n]=Kx(r);for(const a of eT(t)){let i=0;if(j.isValidElement(a)&&(i=d0(r.parser,a.props.path,s||n,a.props.nest))[0])return j.cloneElement(a,{match:i})}return null};var wc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jl=typeof window>"u"||"Deno"in globalThis;function Sr(){}function aF(t,s){return typeof t=="function"?t(s):t}function Pj(t){return typeof t=="number"&&t>=0&&t!==1/0}function tT(t,s){return Math.max(t+(s||0)-Date.now(),0)}function yi(t,s){return typeof t=="function"?t(s):t}function Dn(t,s){return typeof t=="function"?t(s):t}function ww(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=t;if(l){if(n){if(s.queryHash!==u0(l,s.options))return!1}else if(!Rd(s.queryKey,l))return!1}if(r!=="all"){const c=s.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&s.isStale()!==o||a&&a!==s.state.fetchStatus||i&&!i(s))}function Sw(t,s){const{exact:r,status:n,predicate:a,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(vl(s.options.mutationKey)!==vl(i))return!1}else if(!Rd(s.options.mutationKey,i))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function u0(t,s){return(s?.queryKeyHashFn||vl)(t)}function vl(t){return JSON.stringify(t,(s,r)=>kj(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Rd(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>Rd(t[r],s[r])):!1}function m0(t,s){if(t===s)return t;const r=Cw(t)&&Cw(s);if(r||kj(t)&&kj(s)){const n=r?t:Object.keys(t),a=n.length,i=r?s:Object.keys(s),l=i.length,o=r?[]:{},c=new Set(n);let d=0;for(let u=0;u<l;u++){const m=r?u:i[u];(!r&&c.has(m)||r)&&t[m]===void 0&&s[m]===void 0?(o[m]=void 0,d++):(o[m]=m0(t[m],s[m]),o[m]===t[m]&&t[m]!==void 0&&d++)}return a===l&&d===a?t:o}return s}function xh(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Cw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function kj(t){if(!Pw(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Pw(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Pw(t){return Object.prototype.toString.call(t)==="[object Object]"}function iF(t){return new Promise(s=>{setTimeout(s,t)})}function Aj(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?m0(t,s):s}function lF(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function oF(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var h0=Symbol();function sT(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===h0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function rT(t,s){return typeof t=="function"?t(...s):!!t}var cF=class extends wc{#t;#e;#s;constructor(){super(),this.#s=t=>{if(!jl&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},x0=new cF,dF=class extends wc{#t=!0;#e;#s;constructor(){super(),this.#s=t=>{if(!jl&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#s=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#t}},ph=new dF;function Tj(){let t,s;const r=new Promise((a,i)=>{t=a,s=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}function uF(t){return Math.min(1e3*2**t,3e4)}function nT(t){return(t??"online")==="online"?ph.isOnline():!0}var aT=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Hf(t){return t instanceof aT}function iT(t){let s=!1,r=0,n=!1,a;const i=Tj(),l=p=>{n||(h(new aT(p)),t.abort?.())},o=()=>{s=!0},c=()=>{s=!1},d=()=>x0.isFocused()&&(t.networkMode==="always"||ph.isOnline())&&t.canRun(),u=()=>nT(t.networkMode)&&t.canRun(),m=p=>{n||(n=!0,t.onSuccess?.(p),a?.(),i.resolve(p))},h=p=>{n||(n=!0,t.onError?.(p),a?.(),i.reject(p))},x=()=>new Promise(p=>{a=f=>{(n||d())&&p(f)},t.onPause?.()}).then(()=>{a=void 0,n||t.onContinue?.()}),g=()=>{if(n)return;let p;const f=r===0?t.initialPromise:void 0;try{p=f??t.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(m).catch(v=>{if(n)return;const b=t.retry??(jl?0:3),y=t.retryDelay??uF,S=typeof y=="function"?y(r,v):y,w=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(s||!w){h(v);return}r++,t.onFail?.(r,v),iF(S).then(()=>d()?void 0:x()).then(()=>{s?h(v):g()})})};return{promise:i,cancel:l,continue:()=>(a?.(),i),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?g():x().then(g),i)}}var mF=t=>setTimeout(t,0);function hF(){let t=[],s=0,r=o=>{o()},n=o=>{o()},a=mF;const i=o=>{s?t.push(o):a(()=>{r(o)})},l=()=>{const o=t;t=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;s++;try{c=o()}finally{s--,s||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var Qs=hF(),lT=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Pj(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(jl?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},xF=class extends lT{#t;#e;#s;#r;#n;#i;#l;constructor(t){super(),this.#l=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#s=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=pF(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=Aj(this.state.data,t,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#a({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#n?.promise;return this.#n?.cancel(t),s?s.then(Sr).catch(Sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>Dn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!tT(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#n&&(this.#l?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#l=!0,r.signal)})},a=()=>{const c=sT(this.options,s),u=(()=>{const m={client:this.#r,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#l=!1,this.options.persister?this.options.persister(c,u,this):c(u)},l=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:a};return n(c),c})();this.options.behavior?.onFetch(l,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta});const o=c=>{Hf(c)&&c.silent||this.#a({type:"error",error:c}),Hf(c)||(this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#n=iT({initialPromise:s?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:c=>{if(c===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(d){o(d);return}this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:o,onFail:(c,d)=>{this.#a({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#n.start()}#a(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...oT(r.data,this.options),fetchMeta:t.meta??null};case"success":return this.#e=void 0,{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Hf(n)&&n.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),Qs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function oT(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nT(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function pF(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var fF=class extends wc{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,s,r){const n=s.queryKey,a=s.queryHash??u0(n,s);let i=this.get(a);return i||(i=new xF({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#t.get(t.queryHash);s&&(t.destroy(),s===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Qs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>ww(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>ww(t,r)):s}notify(t){Qs.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Qs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Qs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gF=class extends lT{#t;#e;#s;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||cT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})};this.#s=iT({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#r({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#s.canStart();try{if(r)s();else{this.#r({type:"pending",variables:t,isPaused:n}),await this.#e.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const a=await this.#s.start();return await this.#e.config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await this.#e.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),this.#r({type:"success",data:a}),a}catch(a){try{throw await this.#e.config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await this.#e.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{this.#r({type:"error",error:a})}}finally{this.#e.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Qs.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function cT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jF=class extends wc{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(t,s,r){const n=new gF({mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){this.#t.add(t);const s=wm(t);if(typeof s=="string"){const r=this.#e.get(s);r?r.push(t):this.#e.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const s=wm(t);if(typeof s=="string"){const r=this.#e.get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#e.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=wm(t);if(typeof s=="string"){const n=this.#e.get(s)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=wm(t);return typeof s=="string"?this.#e.get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Qs.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Sw(s,r))}findAll(t={}){return this.getAll().filter(s=>Sw(t,s))}notify(t){Qs.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Qs.batch(()=>Promise.all(t.map(s=>s.continue().catch(Sr))))}};function wm(t){return t.options.scope?.id}function kw(t){return{onFetch:(s,r)=>{const n=s.options,a=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],l=s.state.data?.pageParams||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const m=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},h=sT(s.options,s.fetchOptions),x=async(g,p,f)=>{if(u)return Promise.reject();if(p==null&&g.pages.length)return Promise.resolve(g);const b=(()=>{const C={client:s.client,queryKey:s.queryKey,pageParam:p,direction:f?"backward":"forward",meta:s.options.meta};return m(C),C})(),y=await h(b),{maxPages:S}=s.options,w=f?oF:lF;return{pages:w(g.pages,y,S),pageParams:w(g.pageParams,p,S)}};if(a&&i.length){const g=a==="backward",p=g?vF:Aw,f={pages:i,pageParams:l},v=p(n,f);o=await x(f,v,g)}else{const g=t??i.length;do{const p=c===0?l[0]??n.initialPageParam:Aw(n,o);if(c>0&&p==null)break;o=await x(o,p),c++}while(c<g)}return o};s.options.persister?s.fetchFn=()=>s.options.persister?.(d,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=d}}}function Aw(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function vF(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var yF=class{#t;#e;#s;#r;#n;#i;#l;#a;constructor(t={}){this.#t=t.queryCache||new fF,this.#e=t.mutationCache||new jF,this.#s=t.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=x0.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=ph.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#t.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#t.build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(yi(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),i=this.#t.get(n.queryHash)?.state.data,l=aF(s,i);if(l!==void 0)return this.#t.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,s,r){return Qs.batch(()=>this.#t.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#t.get(s.queryHash)?.state}removeQueries(t){const s=this.#t;Qs.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#t;return Qs.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=Qs.batch(()=>this.#t.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(Sr).catch(Sr)}invalidateQueries(t,s={}){return Qs.batch(()=>(this.#t.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=Qs.batch(()=>this.#t.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Sr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Sr)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#t.build(this,s);return r.isStaleByTime(yi(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Sr).catch(Sr)}fetchInfiniteQuery(t){return t.behavior=kw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Sr).catch(Sr)}ensureInfiniteQueryData(t){return t.behavior=kw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ph.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#r.set(vl(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(n=>{Rd(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){this.#n.set(vl(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#n.values()],r={};return s.forEach(n=>{Rd(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=u0(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===h0&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},bF=class extends wc{constructor(t,s){super(),this.options=s,this.#t=t,this.#a=null,this.#l=Tj(),this.options.experimental_prefetchInRender||this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}#t;#e=void 0;#s=void 0;#r=void 0;#n;#i;#l;#a;#p;#m;#h;#c;#d;#o;#x=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),Tw(this.#e,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Dj(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Dj(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#b(),this.#e.removeObserver(this)}setOptions(t){const s=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Dn(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),s._defaulted&&!xh(this.options,s)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&Dw(this.#e,r,this.options,s)&&this.#u(),this.updateResult(),n&&(this.#e!==r||Dn(this.options.enabled,this.#e)!==Dn(s.enabled,this.#e)||yi(this.options.staleTime,this.#e)!==yi(s.staleTime,this.#e))&&this.#f();const a=this.#g();n&&(this.#e!==r||Dn(this.options.enabled,this.#e)!==Dn(s.enabled,this.#e)||a!==this.#o)&&this.#j(a)}getOptimisticResult(t){const s=this.#t.getQueryCache().build(this.#t,t),r=this.createResult(s,t);return wF(this,r)&&(this.#r=r,this.#i=this.options,this.#n=this.#e.state),r}getCurrentResult(){return this.#r}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s?.(n),Reflect.get(r,n))})}trackProp(t){this.#x.add(t)}getCurrentQuery(){return this.#e}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#t.defaultQueryOptions(t),r=this.#t.getQueryCache().build(this.#t,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#u(t){this.#N();let s=this.#e.fetch(this.options,t);return t?.throwOnError||(s=s.catch(Sr)),s}#f(){this.#y();const t=yi(this.options.staleTime,this.#e);if(jl||this.#r.isStale||!Pj(t))return;const r=tT(this.#r.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#j(t){this.#b(),this.#o=t,!(jl||Dn(this.options.enabled,this.#e)===!1||!Pj(this.#o)||this.#o===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||x0.isFocused())&&this.#u()},this.#o))}#v(){this.#f(),this.#j(this.#g())}#y(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#e,n=this.options,a=this.#r,i=this.#n,l=this.#i,c=t!==r?t.state:this.#s,{state:d}=t;let u={...d},m=!1,h;if(s._optimisticResults){const A=this.hasListeners(),N=!A&&Tw(t,s),M=A&&Dw(t,r,s,n);(N||M)&&(u={...u,...oT(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:p}=u;h=u.data;let f=!1;if(s.placeholderData!==void 0&&h===void 0&&p==="pending"){let A;a?.isPlaceholderData&&s.placeholderData===l?.placeholderData?(A=a.data,f=!0):A=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,A!==void 0&&(p="success",h=Aj(a?.data,A,s),m=!0)}if(s.select&&h!==void 0&&!f)if(a&&h===i?.data&&s.select===this.#p)h=this.#m;else try{this.#p=s.select,h=s.select(h),h=Aj(a?.data,h,s),this.#m=h,this.#a=null}catch(A){this.#a=A}this.#a&&(x=this.#a,h=this.#m,g=Date.now(),p="error");const v=u.fetchStatus==="fetching",b=p==="pending",y=p==="error",S=b&&v,w=h!==void 0,k={status:p,fetchStatus:u.fetchStatus,isPending:b,isSuccess:p==="success",isError:y,isInitialLoading:S,isLoading:S,data:h,dataUpdatedAt:u.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:y&&!w,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:y&&w,isStale:p0(t,s),refetch:this.refetch,promise:this.#l};if(this.options.experimental_prefetchInRender){const A=F=>{k.status==="error"?F.reject(k.error):k.data!==void 0&&F.resolve(k.data)},N=()=>{const F=this.#l=k.promise=Tj();A(F)},M=this.#l;switch(M.status){case"pending":t.queryHash===r.queryHash&&A(M);break;case"fulfilled":(k.status==="error"||k.data!==M.value)&&N();break;case"rejected":(k.status!=="error"||k.error!==M.reason)&&N();break}}return k}updateResult(){const t=this.#r,s=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#e),xh(s,t))return;this.#r=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#x.size)return!0;const i=new Set(a??this.#x);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(l=>{const o=l;return this.#r[o]!==t[o]&&i.has(o)})};this.#w({listeners:r()})}#N(){const t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;const s=this.#e;this.#e=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(t){Qs.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#r)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function NF(t,s){return Dn(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Tw(t,s){return NF(t,s)||t.state.data!==void 0&&Dj(t,s,s.refetchOnMount)}function Dj(t,s,r){if(Dn(s.enabled,t)!==!1&&yi(s.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&p0(t,s)}return!1}function Dw(t,s,r,n){return(t!==s||Dn(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&p0(t,r)}function p0(t,s){return Dn(s.enabled,t)!==!1&&t.isStaleByTime(yi(s.staleTime,t))}function wF(t,s){return!xh(t.getCurrentResult(),s)}var SF=class extends wc{#t;#e=void 0;#s;#r;constructor(s,r){super(),this.#t=s,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#t.defaultMutationOptions(s),xh(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&vl(r.mutationKey)!==vl(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#n(),this.#i(s)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(s,r){return this.#r=r,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(s)}#n(){const s=this.#s?.state??cT();this.#e={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#i(s){Qs.batch(()=>{if(this.#r&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;s?.type==="success"?(this.#r.onSuccess?.(s.data,r,n),this.#r.onSettled?.(s.data,null,r,n)):s?.type==="error"&&(this.#r.onError?.(s.error,r,n),this.#r.onSettled?.(void 0,s.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},dT=j.createContext(void 0),ut=t=>{const s=j.useContext(dT);if(t)return t;if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},CF=({client:t,children:s})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(dT.Provider,{value:t,children:s})),uT=j.createContext(!1),PF=()=>j.useContext(uT);uT.Provider;function kF(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var AF=j.createContext(kF()),TF=()=>j.useContext(AF),DF=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},OF=t=>{j.useEffect(()=>{t.clearReset()},[t])},EF=({result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||rT(r,[t.error,n])),MF=t=>{if(t.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>s(r(...n)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},RF=(t,s)=>t.isLoading&&t.isFetching&&!s,_F=(t,s)=>t?.suspense&&s.isPending,Ow=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function IF(t,s,r){const n=PF(),a=TF(),i=ut(r),l=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=n?"isRestoring":"optimistic",MF(l),DF(l,a),OF(a);const o=!i.getQueryCache().get(l.queryHash),[c]=j.useState(()=>new s(i,l)),d=c.getOptimisticResult(l),u=!n&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(m=>{const h=u?c.subscribe(Qs.batchCalls(m)):Sr;return c.updateResult(),h},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(l)},[l,c]),_F(l,d))throw Ow(l,c,a);if(EF({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(l,d),l.experimental_prefetchInRender&&!jl&&RF(d,n)&&(o?Ow(l,c,a):i.getQueryCache().get(l.queryHash)?.promise)?.catch(Sr).finally(()=>{c.updateResult()}),l.notifyOnChangeProps?d:c.trackResult(d)}function ge(t,s){return IF(t,bF,s)}function $F(t,s){const r=ut(s);return FF({filters:{...t,status:"pending"}},r).length}function Ew(t,s){return t.findAll(s.filters).map(r=>s.select?s.select(r):r.state)}function FF(t={},s){const r=ut(s).getMutationCache(),n=j.useRef(t),a=j.useRef(null);return a.current||(a.current=Ew(r,t)),j.useEffect(()=>{n.current=t}),j.useSyncExternalStore(j.useCallback(i=>r.subscribe(()=>{const l=m0(a.current,Ew(r,n.current));a.current!==l&&(a.current=l,Qs.schedule(i))}),[r]),()=>a.current,()=>a.current)}function Ce(t,s){const r=ut(s),[n]=j.useState(()=>new SF(r,t));j.useEffect(()=>{n.setOptions(t)},[n,t]);const a=j.useSyncExternalStore(j.useCallback(l=>n.subscribe(Qs.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=j.useCallback((l,o)=>{n.mutate(l,o).catch(Sr)},[n]);if(a.error&&rT(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}class LF{constructor(){this.cache=new Map}set(s,r,n=30){this.cache.set(s,{data:r,timestamp:Date.now(),ttl:n*60*1e3})}get(s){const r=this.cache.get(s);return r?Date.now()-r.timestamp>r.ttl?(this.cache.delete(s),null):r.data:null}has(s){return this.get(s)!==null}delete(s){this.cache.delete(s)}clear(){this.cache.clear()}cleanup(){const s=Date.now();for(const[r,n]of this.cache.entries())s-n.timestamp>n.ttl&&this.cache.delete(r)}}const mn=new LF;setInterval(()=>mn.cleanup(),5*60*1e3);const BF={"/api/properties":[{id:17,name:"Villa Samui Breeze",bedrooms:3,status:"active"},{id:18,name:"Villa Ocean View",bedrooms:2,status:"active"},{id:19,name:"Villa Tropical Paradise",bedrooms:4,status:"active"},{id:20,name:"Villa Aruna Demo",bedrooms:4,status:"active"}],"/api/tasks":[{id:1,title:"Pool Cleaning",status:"pending",priority:"high"},{id:2,title:"AC Maintenance",status:"in-progress",priority:"medium"},{id:3,title:"Garden Care",status:"completed",priority:"low"}],"/api/bookings":[{id:9,guestName:"John Smith",status:"confirmed",totalAmount:8500},{id:10,guestName:"Sarah Wilson",status:"pending",totalAmount:12e3}],"/api/dashboard/stats":{totalProperties:17,activeBookings:8,pendingTasks:23,monthlyRevenue:149400}};function VF(t){return sessionStorage.getItem("app_visited")?null:(sessionStorage.setItem("app_visited","true"),BF[t]||null)}async function qF(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function fe(t,s,r){const n={method:t,credentials:"include",headers:r?{"Content-Type":"application/json"}:{}};r!==void 0&&(n.body=JSON.stringify(r));const a=await fetch(s,n),i=await a.text();let l=null;try{l=i?JSON.parse(i):{}}catch{console.warn("⚠️ Non-JSON response from server:",i),l={message:i||"No response body"}}if(!a.ok){const o=new Error(l?.message||`Request failed: ${a.status}`);throw o.status=a.status,o.data=l,o}return l}const UF=({on401:t})=>async({queryKey:s})=>{const r=s[0],n=VF(r);if(n)return console.log(`Instant data served: ${r}`),mn.set(r,n,60),n;if(mn.has(r)){const l=mn.get(r);return console.log(`Fast cache hit: ${r}`),l}const a=await fetch(r,{credentials:"include"});await qF(a);const i=await a.json();return mn.set(r,i,30),i},ws=new yF({defaultOptions:{queries:{queryFn:UF({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!1,staleTime:120*1e3,gcTime:300*1e3,retry:2,networkMode:"online",notifyOnChangeProps:["data","error"]},mutations:{retry:!1,networkMode:"online"}}});typeof window<"u"&&(window.queryClient=ws);const zF=1,GF=1e6;let Kf=0;function HF(){return Kf=(Kf+1)%Number.MAX_SAFE_INTEGER,Kf.toString()}const Wf=new Map,Mw=t=>{if(Wf.has(t))return;const s=setTimeout(()=>{Wf.delete(t),jd({type:"REMOVE_TOAST",toastId:t})},GF);Wf.set(t,s)},KF=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,zF)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?Mw(r):t.toasts.forEach(n=>{Mw(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},sh=[];let rh={toasts:[]};function jd(t){rh=KF(rh,t),sh.forEach(s=>{s(rh)})}function WF({...t}){const s=HF(),r=a=>jd({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>jd({type:"DISMISS_TOAST",toastId:s});return jd({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function Xe(){const[t,s]=j.useState(rh);return j.useEffect(()=>(sh.push(s),()=>{const r=sh.indexOf(s);r>-1&&sh.splice(r,1)}),[t]),{...t,toast:WF,dismiss:r=>jd({type:"DISMISS_TOAST",toastId:r})}}function Re(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return s?.(a)}}function Rw(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Wx(...t){return s=>{let r=!1;const n=t.map(a=>{const i=Rw(a,s);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Rw(t[a],null)}}}}function jt(...t){return j.useCallback(Wx(...t),t)}function YF(t,s){const r=j.createContext(s),n=i=>{const{children:l,...o}=i,c=j.useMemo(()=>o,Object.values(o));return e.jsx(r.Provider,{value:c,children:l})};n.displayName=t+"Provider";function a(i){const l=j.useContext(r);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function Zs(t,s=[]){let r=[];function n(i,l){const o=j.createContext(l),c=r.length;r=[...r,l];const d=m=>{const{scope:h,children:x,...g}=m,p=h?.[t]?.[c]||o,f=j.useMemo(()=>g,Object.values(g));return e.jsx(p.Provider,{value:f,children:x})};d.displayName=i+"Provider";function u(m,h){const x=h?.[t]?.[c]||o,g=j.useContext(x);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(l=>j.createContext(l));return function(o){const c=o?.[t]||i;return j.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[n,QF(a,...s)]}function QF(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return j.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return r.scopeName=s.scopeName,r}function Pi(t){const s=XF(t),r=j.forwardRef((n,a)=>{const{children:i,...l}=n,o=j.Children.toArray(i),c=o.find(ZF);if(c){const d=c.props.children,u=o.map(m=>m===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:m);return e.jsx(s,{...l,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return e.jsx(s,{...l,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var mT=Pi("Slot");function XF(t){const s=j.forwardRef((r,n)=>{const{children:a,...i}=r;if(j.isValidElement(a)){const l=eL(a),o=JF(i,a.props);return a.type!==j.Fragment&&(o.ref=n?Wx(n,l):l),j.cloneElement(a,o)}return j.Children.count(a)>1?j.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var hT=Symbol("radix.slottable");function xT(t){const s=({children:r})=>e.jsx(e.Fragment,{children:r});return s.displayName=`${t}.Slottable`,s.__radixId=hT,s}function ZF(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===hT}function JF(t,s){const r={...s};for(const n in s){const a=t[n],i=s[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function eL(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Yx(t){const s=t+"CollectionProvider",[r,n]=Zs(s),[a,i]=r(s,{collectionRef:{current:null},itemMap:new Map}),l=p=>{const{scope:f,children:v}=p,b=X.useRef(null),y=X.useRef(new Map).current;return e.jsx(a,{scope:f,itemMap:y,collectionRef:b,children:v})};l.displayName=s;const o=t+"CollectionSlot",c=Pi(o),d=X.forwardRef((p,f)=>{const{scope:v,children:b}=p,y=i(o,v),S=jt(f,y.collectionRef);return e.jsx(c,{ref:S,children:b})});d.displayName=o;const u=t+"CollectionItemSlot",m="data-radix-collection-item",h=Pi(u),x=X.forwardRef((p,f)=>{const{scope:v,children:b,...y}=p,S=X.useRef(null),w=jt(f,S),C=i(u,v);return X.useEffect(()=>(C.itemMap.set(S,{ref:S,...y}),()=>void C.itemMap.delete(S))),e.jsx(h,{[m]:"",ref:w,children:b})});x.displayName=u;function g(p){const f=i(t+"CollectionConsumer",p);return X.useCallback(()=>{const b=f.collectionRef.current;if(!b)return[];const y=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(f.itemMap.values()).sort((C,k)=>y.indexOf(C.ref.current)-y.indexOf(k.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:l,Slot:d,ItemSlot:x},g,n]}var tL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=tL.reduce((t,s)=>{const r=Pi(`Primitive.${s}`),n=j.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function f0(t,s){t&&bc.flushSync(()=>t.dispatchEvent(s))}function Rs(t){const s=j.useRef(t);return j.useEffect(()=>{s.current=t}),j.useMemo(()=>(...r)=>s.current?.(...r),[])}function sL(t,s=globalThis?.document){const r=Rs(t);j.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var rL="DismissableLayer",Oj="dismissableLayer.update",nL="dismissableLayer.pointerDownOutside",aL="dismissableLayer.focusOutside",_w,pT=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ml=j.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,d=j.useContext(pT),[u,m]=j.useState(null),h=u?.ownerDocument??globalThis?.document,[,x]=j.useState({}),g=jt(s,k=>m(k)),p=Array.from(d.layers),[f]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=p.indexOf(f),b=u?p.indexOf(u):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=v,w=lL(k=>{const A=k.target,N=[...d.branches].some(M=>M.contains(A));!S||N||(a?.(k),l?.(k),k.defaultPrevented||o?.())},h),C=oL(k=>{const A=k.target;[...d.branches].some(M=>M.contains(A))||(i?.(k),l?.(k),k.defaultPrevented||o?.())},h);return sL(k=>{b===d.layers.size-1&&(n?.(k),!k.defaultPrevented&&o&&(k.preventDefault(),o()))},h),j.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(_w=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Iw(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=_w)}},[u,h,r,d]),j.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Iw())},[u,d]),j.useEffect(()=>{const k=()=>x({});return document.addEventListener(Oj,k),()=>document.removeEventListener(Oj,k)},[]),e.jsx(Ye.div,{...c,ref:g,style:{pointerEvents:y?S?"auto":"none":void 0,...t.style},onFocusCapture:Re(t.onFocusCapture,C.onFocusCapture),onBlurCapture:Re(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Re(t.onPointerDownCapture,w.onPointerDownCapture)})});Ml.displayName=rL;var iL="DismissableLayerBranch",fT=j.forwardRef((t,s)=>{const r=j.useContext(pT),n=j.useRef(null),a=jt(s,n);return j.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(Ye.div,{...t,ref:a})});fT.displayName=iL;function lL(t,s=globalThis?.document){const r=Rs(t),n=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let c=function(){gT(nL,r,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function oL(t,s=globalThis?.document){const r=Rs(t),n=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!n.current&&gT(aL,r,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Iw(){const t=new CustomEvent(Oj);document.dispatchEvent(t)}function gT(t,s,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?f0(a,i):a.dispatchEvent(i)}var cL=Ml,dL=fT,$s=globalThis?.document?j.useLayoutEffect:()=>{},uL="Portal",Sc=j.forwardRef((t,s)=>{const{container:r,...n}=t,[a,i]=j.useState(!1);$s(()=>i(!0),[]);const l=r||a&&globalThis?.document?.body;return l?u$.createPortal(e.jsx(Ye.div,{...n,ref:s}),l):null});Sc.displayName=uL;function mL(t,s){return j.useReducer((r,n)=>s[r][n]??r,t)}var Js=t=>{const{present:s,children:r}=t,n=hL(s),a=typeof r=="function"?r({present:n.isPresent}):j.Children.only(r),i=jt(n.ref,xL(a));return typeof r=="function"||n.isPresent?j.cloneElement(a,{ref:i}):null};Js.displayName="Presence";function hL(t){const[s,r]=j.useState(),n=j.useRef(null),a=j.useRef(t),i=j.useRef("none"),l=t?"mounted":"unmounted",[o,c]=mL(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=Sm(n.current);i.current=o==="mounted"?d:"none"},[o]),$s(()=>{const d=n.current,u=a.current;if(u!==t){const h=i.current,x=Sm(d);t?c("MOUNT"):x==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&h!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),$s(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,m=x=>{const p=Sm(n.current).includes(x.animationName);if(x.target===s&&p&&(c("ANIMATION_END"),!a.current)){const f=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=f)})}},h=x=>{x.target===s&&(i.current=Sm(n.current))};return s.addEventListener("animationstart",h),s.addEventListener("animationcancel",m),s.addEventListener("animationend",m),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",h),s.removeEventListener("animationcancel",m),s.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:j.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Sm(t){return t?.animationName||"none"}function xL(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var pL=n0[" useInsertionEffect ".trim().toString()]||$s;function Jr({prop:t,defaultProp:s,onChange:r=()=>{},caller:n}){const[a,i,l]=fL({defaultProp:s,onChange:r}),o=t!==void 0,c=o?t:a;{const u=j.useRef(t!==void 0);j.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const d=j.useCallback(u=>{if(o){const m=gL(u)?u(t):u;m!==t&&l.current?.(m)}else i(u)},[o,t,i,l]);return[c,d]}function fL({defaultProp:t,onChange:s}){const[r,n]=j.useState(t),a=j.useRef(r),i=j.useRef(s);return pL(()=>{i.current=s},[s]),j.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function gL(t){return typeof t=="function"}var jT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jL="VisuallyHidden",Qx=j.forwardRef((t,s)=>e.jsx(Ye.span,{...t,ref:s,style:{...jT,...t.style}}));Qx.displayName=jL;var vL=Qx,g0="ToastProvider",[j0,yL,bL]=Yx("Toast"),[vT,ake]=Zs("Toast",[bL]),[NL,Xx]=vT(g0),yT=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=t,[o,c]=j.useState(null),[d,u]=j.useState(0),m=j.useRef(!1),h=j.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${g0}\`. Expected non-empty \`string\`.`),e.jsx(j0.Provider,{scope:s,children:e.jsx(NL,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:j.useCallback(()=>u(x=>x+1),[]),onToastRemove:j.useCallback(()=>u(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:l})})};yT.displayName=g0;var bT="ToastViewport",wL=["F8"],Ej="toast.viewportPause",Mj="toast.viewportResume",NT=j.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=wL,label:a="Notifications ({hotkey})",...i}=t,l=Xx(bT,r),o=yL(r),c=j.useRef(null),d=j.useRef(null),u=j.useRef(null),m=j.useRef(null),h=jt(s,m,l.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=l.toastCount>0;j.useEffect(()=>{const f=v=>{n.length!==0&&n.every(y=>v[y]||v.code===y)&&m.current?.focus()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n]),j.useEffect(()=>{const f=c.current,v=m.current;if(g&&f&&v){const b=()=>{if(!l.isClosePausedRef.current){const C=new CustomEvent(Ej);v.dispatchEvent(C),l.isClosePausedRef.current=!0}},y=()=>{if(l.isClosePausedRef.current){const C=new CustomEvent(Mj);v.dispatchEvent(C),l.isClosePausedRef.current=!1}},S=C=>{!f.contains(C.relatedTarget)&&y()},w=()=>{f.contains(document.activeElement)||y()};return f.addEventListener("focusin",b),f.addEventListener("focusout",S),f.addEventListener("pointermove",b),f.addEventListener("pointerleave",w),window.addEventListener("blur",b),window.addEventListener("focus",y),()=>{f.removeEventListener("focusin",b),f.removeEventListener("focusout",S),f.removeEventListener("pointermove",b),f.removeEventListener("pointerleave",w),window.removeEventListener("blur",b),window.removeEventListener("focus",y)}}},[g,l.isClosePausedRef]);const p=j.useCallback(({tabbingDirection:f})=>{const b=o().map(y=>{const S=y.ref.current,w=[S,...IL(S)];return f==="forwards"?w:w.reverse()});return(f==="forwards"?b.reverse():b).flat()},[o]);return j.useEffect(()=>{const f=m.current;if(f){const v=b=>{const y=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!y){const w=document.activeElement,C=b.shiftKey;if(b.target===f&&C){d.current?.focus();return}const N=p({tabbingDirection:C?"backwards":"forwards"}),M=N.findIndex(F=>F===w);Yf(N.slice(M+1))?b.preventDefault():C?d.current?.focus():u.current?.focus()}};return f.addEventListener("keydown",v),()=>f.removeEventListener("keydown",v)}},[o,p]),e.jsxs(dL,{ref:c,role:"region","aria-label":a.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&e.jsx(Rj,{ref:d,onFocusFromOutsideViewport:()=>{const f=p({tabbingDirection:"forwards"});Yf(f)}}),e.jsx(j0.Slot,{scope:r,children:e.jsx(Ye.ol,{tabIndex:-1,...i,ref:h})}),g&&e.jsx(Rj,{ref:u,onFocusFromOutsideViewport:()=>{const f=p({tabbingDirection:"backwards"});Yf(f)}})]})});NT.displayName=bT;var wT="ToastFocusProxy",Rj=j.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,i=Xx(wT,r);return e.jsx(Qx,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:l=>{const o=l.relatedTarget;!i.viewport?.contains(o)&&n()}})});Rj.displayName=wT;var Fu="Toast",SL="toast.swipeStart",CL="toast.swipeMove",PL="toast.swipeCancel",kL="toast.swipeEnd",ST=j.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...l}=t,[o,c]=Jr({prop:n,defaultProp:a??!0,onChange:i,caller:Fu});return e.jsx(Js,{present:r||o,children:e.jsx(DL,{open:o,...l,ref:s,onClose:()=>c(!1),onPause:Rs(t.onPause),onResume:Rs(t.onResume),onSwipeStart:Re(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Re(t.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Re(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Re(t.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});ST.displayName=Fu;var[AL,TL]=vT(Fu,{onClose(){}}),DL=j.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:x,...g}=t,p=Xx(Fu,r),[f,v]=j.useState(null),b=jt(s,E=>v(E)),y=j.useRef(null),S=j.useRef(null),w=a||p.duration,C=j.useRef(0),k=j.useRef(w),A=j.useRef(0),{onToastAdd:N,onToastRemove:M}=p,F=Rs(()=>{f?.contains(document.activeElement)&&p.viewport?.focus(),l()}),I=j.useCallback(E=>{!E||E===1/0||(window.clearTimeout(A.current),C.current=new Date().getTime(),A.current=window.setTimeout(F,E))},[F]);j.useEffect(()=>{const E=p.viewport;if(E){const G=()=>{I(k.current),d?.()},Y=()=>{const Q=new Date().getTime()-C.current;k.current=k.current-Q,window.clearTimeout(A.current),c?.()};return E.addEventListener(Ej,Y),E.addEventListener(Mj,G),()=>{E.removeEventListener(Ej,Y),E.removeEventListener(Mj,G)}}},[p.viewport,w,c,d,I]),j.useEffect(()=>{i&&!p.isClosePausedRef.current&&I(w)},[i,w,p.isClosePausedRef,I]),j.useEffect(()=>(N(),()=>M()),[N,M]);const V=j.useMemo(()=>f?OT(f):null,[f]);return p.viewport?e.jsxs(e.Fragment,{children:[V&&e.jsx(OL,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),e.jsx(AL,{scope:r,onClose:F,children:bc.createPortal(e.jsx(j0.ItemSlot,{scope:r,children:e.jsx(cL,{asChild:!0,onEscapeKeyDown:Re(o,()=>{p.isFocusedToastEscapeKeyDownRef.current||F(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Re(t.onKeyDown,E=>{E.key==="Escape"&&(o?.(E.nativeEvent),E.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Re(t.onPointerDown,E=>{E.button===0&&(y.current={x:E.clientX,y:E.clientY})}),onPointerMove:Re(t.onPointerMove,E=>{if(!y.current)return;const G=E.clientX-y.current.x,Y=E.clientY-y.current.y,Q=!!S.current,T=["left","right"].includes(p.swipeDirection),B=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,W=T?B(0,G):0,he=T?0:B(0,Y),Se=E.pointerType==="touch"?10:2,z={x:W,y:he},L={originalEvent:E,delta:z};Q?(S.current=z,Cm(CL,m,L,{discrete:!1})):$w(z,p.swipeDirection,Se)?(S.current=z,Cm(SL,u,L,{discrete:!1}),E.target.setPointerCapture(E.pointerId)):(Math.abs(G)>Se||Math.abs(Y)>Se)&&(y.current=null)}),onPointerUp:Re(t.onPointerUp,E=>{const G=S.current,Y=E.target;if(Y.hasPointerCapture(E.pointerId)&&Y.releasePointerCapture(E.pointerId),S.current=null,y.current=null,G){const Q=E.currentTarget,T={originalEvent:E,delta:G};$w(G,p.swipeDirection,p.swipeThreshold)?Cm(kL,x,T,{discrete:!0}):Cm(PL,h,T,{discrete:!0}),Q.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),OL=t=>{const{__scopeToast:s,children:r,...n}=t,a=Xx(Fu,s),[i,l]=j.useState(!1),[o,c]=j.useState(!1);return RL(()=>l(!0)),j.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:e.jsx(Sc,{asChild:!0,children:e.jsx(Qx,{...n,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},EL="ToastTitle",CT=j.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Ye.div,{...n,ref:s})});CT.displayName=EL;var ML="ToastDescription",PT=j.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(Ye.div,{...n,ref:s})});PT.displayName=ML;var kT="ToastAction",AT=j.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(DT,{altText:r,asChild:!0,children:e.jsx(v0,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${kT}\`. Expected non-empty \`string\`.`),null)});AT.displayName=kT;var TT="ToastClose",v0=j.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=TL(TT,r);return e.jsx(DT,{asChild:!0,children:e.jsx(Ye.button,{type:"button",...n,ref:s,onClick:Re(t.onClick,a.onClose)})})});v0.displayName=TT;var DT=j.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(Ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function OT(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),_L(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...OT(n))}}),s}function Cm(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?f0(a,i):a.dispatchEvent(i)}var $w=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return s==="left"||s==="right"?i&&n>r:!i&&a>r};function RL(t=()=>{}){const s=Rs(t);$s(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function _L(t){return t.nodeType===t.ELEMENT_NODE}function IL(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Yf(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var $L=yT,ET=NT,MT=ST,RT=CT,_T=PT,IT=AT,$T=v0;function FT(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=FT(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function At(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=FT(t))&&(n&&(n+=" "),n+=s);return n}const Fw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Lw=At,Lu=(t,s)=>r=>{var n;if(s?.variants==null)return Lw(t,r?.class,r?.className);const{variants:a,defaultVariants:i}=s,l=Object.keys(a).map(d=>{const u=r?.[d],m=i?.[d];if(u===null)return null;const h=Fw(u)||Fw(m);return a[d][h]}),o=r&&Object.entries(r).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:h,...x}=u;return Object.entries(x).every(g=>{let[p,f]=g;return Array.isArray(f)?f.includes({...i,...o}[p]):{...i,...o}[p]===f})?[...d,m,h]:d},[]);return Lw(t,l,c,r?.class,r?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LT=(...t)=>t.filter((s,r,n)=>!!s&&n.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=j.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...o},c)=>j.createElement("svg",{ref:c,...LL,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:LT("lucide",a),...o},[...l.map(([d,u])=>j.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,s)=>{const r=j.forwardRef(({className:n,...a},i)=>j.createElement(BL,{ref:i,iconNode:s,className:LT(`lucide-${FL(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=we("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=we("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=we("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=we("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=we("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=we("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=we("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=we("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=we("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=we("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=we("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=we("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=we("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=we("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=we("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=we("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=we("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=we("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=we("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=we("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=we("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=we("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=we("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=we("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=we("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=we("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=we("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=we("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=we("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=we("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=we("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=we("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=we("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=we("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=we("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=we("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=we("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=we("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=we("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=we("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=we("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=we("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=we("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=we("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=we("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=we("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=we("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=we("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=we("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=we("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=we("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=we("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=we("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=we("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=we("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=we("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=we("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=we("Luggage",[["path",{d:"M6 20a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2",key:"1m57jg"}],["path",{d:"M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14",key:"1l99gc"}],["path",{d:"M10 20h4",key:"ni2waw"}],["circle",{cx:"16",cy:"20",r:"2",key:"1vifvg"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=we("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=we("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=we("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=we("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=we("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=we("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=we("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=we("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=we("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=we("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=we("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=we("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=we("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=we("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=we("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=we("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=we("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=we("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=we("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=we("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=we("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=we("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=we("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=we("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=we("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=we("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=we("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=we("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=we("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=we("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=we("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=we("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=we("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=we("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=we("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=we("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=we("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=we("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=we("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=we("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=we("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=we("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=we("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=we("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),w0="-",b8=t=>{const s=w8(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const o=l.split(w0);return o[0]===""&&o.length!==1&&o.shift(),s4(o,s)||N8(l)},getConflictingClassGroupIds:(l,o)=>{const c=r[l]||[];return o&&n[l]?[...c,...n[l]]:c}}},s4=(t,s)=>{if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?s4(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const i=t.join(w0);return s.validators.find(({validator:l})=>l(i))?.classGroupId},Kw=/^\[(.+)\]$/,N8=t=>{if(Kw.test(t)){const s=Kw.exec(t)[1],r=s?.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},w8=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return C8(Object.entries(t.classGroups),r).forEach(([i,l])=>{Fj(l,n,i,s)}),n},Fj=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?s:Ww(s,a);i.classGroupId=r;return}if(typeof a=="function"){if(S8(a)){Fj(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,l])=>{Fj(l,Ww(s,i),r,n)})})},Ww=(t,s)=>{let r=t;return s.split(w0).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},S8=t=>t.isThemeGetter,C8=(t,s)=>s?t.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[s+l,o])):i);return[r,a]}):t,P8=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(i,l)=>{r.set(i,l),s++,s>t&&(s=0,n=r,r=new Map)};return{get(i){let l=r.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return a(i,l),l},set(i,l){r.has(i)?r.set(i,l):a(i,l)}}},r4="!",k8=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],i=s.length,l=o=>{const c=[];let d=0,u=0,m;for(let f=0;f<o.length;f++){let v=o[f];if(d===0){if(v===a&&(n||o.slice(f,f+i)===s)){c.push(o.slice(u,f)),u=f+i;continue}if(v==="/"){m=f;continue}}v==="["?d++:v==="]"&&d--}const h=c.length===0?o:o.substring(u),x=h.startsWith(r4),g=x?h.substring(1):h,p=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:p}};return r?o=>r({className:o,parseClassName:l}):l},A8=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},T8=t=>({cache:P8(t.cacheSize),parseClassName:k8(t),...b8(t)}),D8=/\s+/,O8=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,i=[],l=t.trim().split(D8);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:x}=r(d);let g=!!x,p=n(g?h.substring(0,x):h);if(!p){if(!g){o=d+(o.length>0?" "+o:o);continue}if(p=n(h),!p){o=d+(o.length>0?" "+o:o);continue}g=!1}const f=A8(u).join(":"),v=m?f+r4:f,b=v+p;if(i.includes(b))continue;i.push(b);const y=a(p,g);for(let S=0;S<y.length;++S){const w=y[S];i.push(v+w)}o=d+(o.length>0?" "+o:o)}return o};function E8(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=n4(s))&&(n&&(n+=" "),n+=r);return n}const n4=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=n4(t[n]))&&(r&&(r+=" "),r+=s);return r};function M8(t,...s){let r,n,a,i=l;function l(c){const d=s.reduce((u,m)=>m(u),t());return r=T8(d),n=r.cache.get,a=r.cache.set,i=o,o(c)}function o(c){const d=n(c);if(d)return d;const u=O8(c,r);return a(c,u),u}return function(){return i(E8.apply(null,arguments))}}const vs=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},a4=/^\[(?:([a-z-]+):)?(.+)\]$/i,R8=/^\d+\/\d+$/,_8=new Set(["px","full","screen"]),I8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,F8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,L8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,B8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wa=t=>bo(t)||_8.has(t)||R8.test(t),ai=t=>Cc(t,"length",W8),bo=t=>!!t&&!Number.isNaN(Number(t)),Zf=t=>Cc(t,"number",bo),Kc=t=>!!t&&Number.isInteger(Number(t)),V8=t=>t.endsWith("%")&&bo(t.slice(0,-1)),Dt=t=>a4.test(t),ii=t=>I8.test(t),q8=new Set(["length","size","percentage"]),U8=t=>Cc(t,q8,i4),z8=t=>Cc(t,"position",i4),G8=new Set(["image","url"]),H8=t=>Cc(t,G8,Q8),K8=t=>Cc(t,"",Y8),Wc=()=>!0,Cc=(t,s,r)=>{const n=a4.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},W8=t=>$8.test(t)&&!F8.test(t),i4=()=>!1,Y8=t=>L8.test(t),Q8=t=>B8.test(t),X8=()=>{const t=vs("colors"),s=vs("spacing"),r=vs("blur"),n=vs("brightness"),a=vs("borderColor"),i=vs("borderRadius"),l=vs("borderSpacing"),o=vs("borderWidth"),c=vs("contrast"),d=vs("grayscale"),u=vs("hueRotate"),m=vs("invert"),h=vs("gap"),x=vs("gradientColorStops"),g=vs("gradientColorStopPositions"),p=vs("inset"),f=vs("margin"),v=vs("opacity"),b=vs("padding"),y=vs("saturate"),S=vs("scale"),w=vs("sepia"),C=vs("skew"),k=vs("space"),A=vs("translate"),N=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Dt,s],I=()=>[Dt,s],V=()=>["",wa,ai],E=()=>["auto",bo,Dt],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Dt],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[bo,Dt];return{cacheSize:500,separator:":",theme:{colors:[Wc],spacing:[wa,ai],blur:["none","",ii,Dt],brightness:he(),borderColor:[t],borderRadius:["none","","full",ii,Dt],borderSpacing:I(),borderWidth:V(),contrast:he(),grayscale:B(),hueRotate:he(),invert:B(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[V8,ai],inset:F(),margin:F(),opacity:he(),padding:I(),saturate:he(),scale:he(),sepia:B(),skew:he(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Dt]}],container:["container"],columns:[{columns:[ii]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),Dt]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kc,Dt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Dt]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Kc,Dt]}],"grid-cols":[{"grid-cols":[Wc]}],"col-start-end":[{col:["auto",{span:["full",Kc,Dt]},Dt]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[Wc]}],"row-start-end":[{row:["auto",{span:[Kc,Dt]},Dt]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Dt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Dt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[f]}],mx:[{mx:[f]}],my:[{my:[f]}],ms:[{ms:[f]}],me:[{me:[f]}],mt:[{mt:[f]}],mr:[{mr:[f]}],mb:[{mb:[f]}],ml:[{ml:[f]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Dt,s]}],"min-w":[{"min-w":[Dt,s,"min","max","fit"]}],"max-w":[{"max-w":[Dt,s,"none","full","min","max","fit","prose",{screen:[ii]},ii]}],h:[{h:[Dt,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Dt,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Dt,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Dt,s,"auto","min","max","fit"]}],"font-size":[{text:["base",ii,ai]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zf]}],"font-family":[{font:[Wc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Dt]}],"line-clamp":[{"line-clamp":["none",bo,Zf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wa,Dt]}],"list-image":[{"list-image":["none",Dt]}],"list-style-type":[{list:["none","disc","decimal",Dt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wa,ai]}],"underline-offset":[{"underline-offset":["auto",wa,Dt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),z8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",U8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},H8]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:Y()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[wa,Dt]}],"outline-w":[{outline:[wa,ai]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[wa,ai]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ii,K8]}],"shadow-color":[{shadow:[Wc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ii,Dt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Dt]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",Dt]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",Dt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Kc,Dt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Dt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Dt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Dt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[wa,ai,Zf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Z8=M8(X8);function _e(...t){return Z8(At(t))}function Sn(t,s="THB"){return new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}const J8=$L,l4=j.forwardRef(({className:t,...s},r)=>e.jsx(ET,{ref:r,className:_e("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));l4.displayName=ET.displayName;const eB=Lu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),o4=j.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(MT,{ref:n,className:_e(eB({variant:s}),t),...r}));o4.displayName=MT.displayName;const tB=j.forwardRef(({className:t,...s},r)=>e.jsx(IT,{ref:r,className:_e("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));tB.displayName=IT.displayName;const c4=j.forwardRef(({className:t,...s},r)=>e.jsx($T,{ref:r,className:_e("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Is,{className:"h-4 w-4"})}));c4.displayName=$T.displayName;const d4=j.forwardRef(({className:t,...s},r)=>e.jsx(RT,{ref:r,className:_e("text-sm font-semibold",t),...s}));d4.displayName=RT.displayName;const u4=j.forwardRef(({className:t,...s},r)=>e.jsx(_T,{ref:r,className:_e("text-sm opacity-90",t),...s}));u4.displayName=_T.displayName;function sB(){const{toasts:t}=Xe();return e.jsxs(J8,{children:[t.map(function({id:s,title:r,description:n,action:a,...i}){return e.jsxs(o4,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(d4,{children:r}),n&&e.jsx(u4,{children:n})]}),a,e.jsx(c4,{})]},s)}),e.jsx(l4,{})]})}var rB=n0[" useId ".trim().toString()]||(()=>{}),nB=0;function Wr(t){const[s,r]=j.useState(rB());return $s(()=>{r(n=>n??String(nB++))},[t]),t||(s?`radix-${s}`:"")}const aB=["top","right","bottom","left"],Ti=Math.min,zr=Math.max,gh=Math.round,Pm=Math.floor,aa=t=>({x:t,y:t}),iB={left:"right",right:"left",bottom:"top",top:"bottom"},lB={start:"end",end:"start"};function Lj(t,s,r){return zr(t,Ti(s,r))}function za(t,s){return typeof t=="function"?t(s):t}function Ga(t){return t.split("-")[0]}function Pc(t){return t.split("-")[1]}function S0(t){return t==="x"?"y":"x"}function C0(t){return t==="y"?"height":"width"}const oB=new Set(["top","bottom"]);function Jn(t){return oB.has(Ga(t))?"y":"x"}function P0(t){return S0(Jn(t))}function cB(t,s,r){r===void 0&&(r=!1);const n=Pc(t),a=P0(t),i=C0(a);let l=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=jh(l)),[l,jh(l)]}function dB(t){const s=jh(t);return[Bj(t),s,Bj(s)]}function Bj(t){return t.replace(/start|end/g,s=>lB[s])}const Yw=["left","right"],Qw=["right","left"],uB=["top","bottom"],mB=["bottom","top"];function hB(t,s,r){switch(t){case"top":case"bottom":return r?s?Qw:Yw:s?Yw:Qw;case"left":case"right":return s?uB:mB;default:return[]}}function xB(t,s,r,n){const a=Pc(t);let i=hB(Ga(t),r==="start",n);return a&&(i=i.map(l=>l+"-"+a),s&&(i=i.concat(i.map(Bj)))),i}function jh(t){return t.replace(/left|right|bottom|top/g,s=>iB[s])}function pB(t){return{top:0,right:0,bottom:0,left:0,...t}}function m4(t){return typeof t!="number"?pB(t):{top:t,right:t,bottom:t,left:t}}function vh(t){const{x:s,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function Xw(t,s,r){let{reference:n,floating:a}=t;const i=Jn(s),l=P0(s),o=C0(l),c=Ga(s),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let x;switch(c){case"top":x={x:u,y:n.y-a.height};break;case"bottom":x={x:u,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:m};break;case"left":x={x:n.x-a.width,y:m};break;default:x={x:n.x,y:n.y}}switch(Pc(s)){case"start":x[l]-=h*(r&&d?-1:1);break;case"end":x[l]+=h*(r&&d?-1:1);break}return x}const fB=async(t,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:l}=r,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(s));let d=await l.getElementRects({reference:t,floating:s,strategy:a}),{x:u,y:m}=Xw(d,n,c),h=n,x={},g=0;for(let p=0;p<o.length;p++){const{name:f,fn:v}=o[p],{x:b,y,data:S,reset:w}=await v({x:u,y:m,initialPlacement:n,placement:h,strategy:a,middlewareData:x,rects:d,platform:l,elements:{reference:t,floating:s}});u=b??u,m=y??m,x={...x,[f]:{...x[f],...S}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(d=w.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:a}):w.rects),{x:u,y:m}=Xw(d,h,c)),p=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:x}};async function Bd(t,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:x=0}=za(s,t),g=m4(x),f=o[h?m==="floating"?"reference":"floating":m],v=vh(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(f)))==null||r?f:f.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),b=m==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),S=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},w=vh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:y,strategy:c}):b);return{top:(v.top-w.top+g.top)/S.y,bottom:(w.bottom-v.bottom+g.bottom)/S.y,left:(v.left-w.left+g.left)/S.x,right:(w.right-v.right+g.right)/S.x}}const gB=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:n,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=s,{element:d,padding:u=0}=za(t,s)||{};if(d==null)return{};const m=m4(u),h={x:r,y:n},x=P0(a),g=C0(x),p=await l.getDimensions(d),f=x==="y",v=f?"top":"left",b=f?"bottom":"right",y=f?"clientHeight":"clientWidth",S=i.reference[g]+i.reference[x]-h[x]-i.floating[g],w=h[x]-i.reference[x],C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let k=C?C[y]:0;(!k||!await(l.isElement==null?void 0:l.isElement(C)))&&(k=o.floating[y]||i.floating[g]);const A=S/2-w/2,N=k/2-p[g]/2-1,M=Ti(m[v],N),F=Ti(m[b],N),I=M,V=k-p[g]-F,E=k/2-p[g]/2+A,G=Lj(I,E,V),Y=!c.arrow&&Pc(a)!=null&&E!==G&&i.reference[g]/2-(E<I?M:F)-p[g]/2<0,Q=Y?E<I?E-I:E-V:0;return{[x]:h[x]+Q,data:{[x]:G,centerOffset:E-G-Q,...Y&&{alignmentOffset:Q}},reset:Y}}}),jB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,n;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...f}=za(t,s);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=Ga(a),b=Jn(o),y=Ga(o)===o,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),w=h||(y||!p?[jh(o)]:dB(o)),C=g!=="none";!h&&C&&w.push(...xB(o,p,g,S));const k=[o,...w],A=await Bd(s,f),N=[];let M=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&N.push(A[v]),m){const E=cB(a,l,S);N.push(A[E[0]],A[E[1]])}if(M=[...M,{placement:a,overflows:N}],!N.every(E=>E<=0)){var F,I;const E=(((F=i.flip)==null?void 0:F.index)||0)+1,G=k[E];if(G&&(!(m==="alignment"?b!==Jn(G):!1)||M.every(T=>T.overflows[0]>0&&Jn(T.placement)===b)))return{data:{index:E,overflows:M},reset:{placement:G}};let Y=(I=M.filter(Q=>Q.overflows[0]<=0).sort((Q,T)=>Q.overflows[1]-T.overflows[1])[0])==null?void 0:I.placement;if(!Y)switch(x){case"bestFit":{var V;const Q=(V=M.filter(T=>{if(C){const B=Jn(T.placement);return B===b||B==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(B=>B>0).reduce((B,W)=>B+W,0)]).sort((T,B)=>T[1]-B[1])[0])==null?void 0:V[0];Q&&(Y=Q);break}case"initialPlacement":Y=o;break}if(a!==Y)return{reset:{placement:Y}}}return{}}}};function Zw(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function Jw(t){return aB.some(s=>t[s]>=0)}const vB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=za(t,s);switch(n){case"referenceHidden":{const i=await Bd(s,{...a,elementContext:"reference"}),l=Zw(i,r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Jw(l)}}}case"escaped":{const i=await Bd(s,{...a,altBoundary:!0}),l=Zw(i,r.floating);return{data:{escapedOffsets:l,escaped:Jw(l)}}}default:return{}}}}},h4=new Set(["left","top"]);async function yB(t,s){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=Ga(r),o=Pc(r),c=Jn(r)==="y",d=h4.has(l)?-1:1,u=i&&c?-1:1,m=za(s,t);let{mainAxis:h,crossAxis:x,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof g=="number"&&(x=o==="end"?g*-1:g),c?{x:x*u,y:h*d}:{x:h*d,y:x*u}}const bB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,n;const{x:a,y:i,placement:l,middlewareData:o}=s,c=await yB(s,t);return l===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},NB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:f=>{let{x:v,y:b}=f;return{x:v,y:b}}},...c}=za(t,s),d={x:r,y:n},u=await Bd(s,c),m=Jn(Ga(a)),h=S0(m);let x=d[h],g=d[m];if(i){const f=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=x+u[f],y=x-u[v];x=Lj(b,x,y)}if(l){const f=m==="y"?"top":"left",v=m==="y"?"bottom":"right",b=g+u[f],y=g-u[v];g=Lj(b,g,y)}const p=o.fn({...s,[h]:x,[m]:g});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[h]:i,[m]:l}}}}}},wB=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:n,placement:a,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=za(t,s),u={x:r,y:n},m=Jn(a),h=S0(m);let x=u[h],g=u[m];const p=za(o,s),f=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const y=h==="y"?"height":"width",S=i.reference[h]-i.floating[y]+f.mainAxis,w=i.reference[h]+i.reference[y]-f.mainAxis;x<S?x=S:x>w&&(x=w)}if(d){var v,b;const y=h==="y"?"width":"height",S=h4.has(Ga(a)),w=i.reference[m]-i.floating[y]+(S&&((v=l.offset)==null?void 0:v[m])||0)+(S?0:f.crossAxis),C=i.reference[m]+i.reference[y]+(S?0:((b=l.offset)==null?void 0:b[m])||0)-(S?f.crossAxis:0);g<w?g=w:g>C&&(g=C)}return{[h]:x,[m]:g}}}},SB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,n;const{placement:a,rects:i,platform:l,elements:o}=s,{apply:c=()=>{},...d}=za(t,s),u=await Bd(s,d),m=Ga(a),h=Pc(a),x=Jn(a)==="y",{width:g,height:p}=i.floating;let f,v;m==="top"||m==="bottom"?(f=m,v=h===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(v=m,f=h==="end"?"top":"bottom");const b=p-u.top-u.bottom,y=g-u.left-u.right,S=Ti(p-u[f],b),w=Ti(g-u[v],y),C=!s.middlewareData.shift;let k=S,A=w;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(A=y),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(k=b),C&&!h){const M=zr(u.left,0),F=zr(u.right,0),I=zr(u.top,0),V=zr(u.bottom,0);x?A=g-2*(M!==0||F!==0?M+F:zr(u.left,u.right)):k=p-2*(I!==0||V!==0?I+V:zr(u.top,u.bottom))}await c({...s,availableWidth:A,availableHeight:k});const N=await l.getDimensions(o.floating);return g!==N.width||p!==N.height?{reset:{rects:!0}}:{}}}};function tp(){return typeof window<"u"}function kc(t){return x4(t)?(t.nodeName||"").toLowerCase():"#document"}function Yr(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function va(t){var s;return(s=(x4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function x4(t){return tp()?t instanceof Node||t instanceof Yr(t).Node:!1}function qn(t){return tp()?t instanceof Element||t instanceof Yr(t).Element:!1}function pa(t){return tp()?t instanceof HTMLElement||t instanceof Yr(t).HTMLElement:!1}function e1(t){return!tp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Yr(t).ShadowRoot}const CB=new Set(["inline","contents"]);function Ku(t){const{overflow:s,overflowX:r,overflowY:n,display:a}=Un(t);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!CB.has(a)}const PB=new Set(["table","td","th"]);function kB(t){return PB.has(kc(t))}const AB=[":popover-open",":modal"];function sp(t){return AB.some(s=>{try{return t.matches(s)}catch{return!1}})}const TB=["transform","translate","scale","rotate","perspective"],DB=["transform","translate","scale","rotate","perspective","filter"],OB=["paint","layout","strict","content"];function k0(t){const s=A0(),r=qn(t)?Un(t):t;return TB.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||DB.some(n=>(r.willChange||"").includes(n))||OB.some(n=>(r.contain||"").includes(n))}function EB(t){let s=Di(t);for(;pa(s)&&!Mo(s);){if(k0(s))return s;if(sp(s))return null;s=Di(s)}return null}function A0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const MB=new Set(["html","body","#document"]);function Mo(t){return MB.has(kc(t))}function Un(t){return Yr(t).getComputedStyle(t)}function rp(t){return qn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Di(t){if(kc(t)==="html")return t;const s=t.assignedSlot||t.parentNode||e1(t)&&t.host||va(t);return e1(s)?s.host:s}function p4(t){const s=Di(t);return Mo(s)?t.ownerDocument?t.ownerDocument.body:t.body:pa(s)&&Ku(s)?s:p4(s)}function Vd(t,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=p4(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),l=Yr(a);if(i){const o=Vj(l);return s.concat(l,l.visualViewport||[],Ku(a)?a:[],o&&r?Vd(o):[])}return s.concat(a,Vd(a,[],r))}function Vj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function f4(t){const s=Un(t);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=pa(t),i=a?t.offsetWidth:r,l=a?t.offsetHeight:n,o=gh(r)!==i||gh(n)!==l;return o&&(r=i,n=l),{width:r,height:n,$:o}}function T0(t){return qn(t)?t:t.contextElement}function No(t){const s=T0(t);if(!pa(s))return aa(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:i}=f4(s);let l=(i?gh(r.width):r.width)/n,o=(i?gh(r.height):r.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const RB=aa(0);function g4(t){const s=Yr(t);return!A0()||!s.visualViewport?RB:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function _B(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==Yr(t)?!1:s}function yl(t,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=T0(t);let l=aa(1);s&&(n?qn(n)&&(l=No(n)):l=No(t));const o=_B(i,r,n)?g4(i):aa(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,m=a.height/l.y;if(i){const h=Yr(i),x=n&&qn(n)?Yr(n):n;let g=h,p=Vj(g);for(;p&&n&&x!==g;){const f=No(p),v=p.getBoundingClientRect(),b=Un(p),y=v.left+(p.clientLeft+parseFloat(b.paddingLeft))*f.x,S=v.top+(p.clientTop+parseFloat(b.paddingTop))*f.y;c*=f.x,d*=f.y,u*=f.x,m*=f.y,c+=y,d+=S,g=Yr(p),p=Vj(g)}}return vh({width:u,height:m,x:c,y:d})}function D0(t,s){const r=rp(t).scrollLeft;return s?s.left+r:yl(va(t)).left+r}function j4(t,s,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+s.scrollLeft-(r?0:D0(t,n)),i=n.top+s.scrollTop;return{x:a,y:i}}function IB(t){let{elements:s,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",l=va(n),o=s?sp(s.floating):!1;if(n===l||o&&i)return r;let c={scrollLeft:0,scrollTop:0},d=aa(1);const u=aa(0),m=pa(n);if((m||!m&&!i)&&((kc(n)!=="body"||Ku(l))&&(c=rp(n)),pa(n))){const x=yl(n);d=No(n),u.x=x.x+n.clientLeft,u.y=x.y+n.clientTop}const h=l&&!m&&!i?j4(l,c,!0):aa(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:r.y*d.y-c.scrollTop*d.y+u.y+h.y}}function $B(t){return Array.from(t.getClientRects())}function FB(t){const s=va(t),r=rp(t),n=t.ownerDocument.body,a=zr(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),i=zr(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let l=-r.scrollLeft+D0(t);const o=-r.scrollTop;return Un(n).direction==="rtl"&&(l+=zr(s.clientWidth,n.clientWidth)-a),{width:a,height:i,x:l,y:o}}function LB(t,s){const r=Yr(t),n=va(t),a=r.visualViewport;let i=n.clientWidth,l=n.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=A0();(!d||d&&s==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}const BB=new Set(["absolute","fixed"]);function VB(t,s){const r=yl(t,!0,s==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=pa(t)?No(t):aa(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:l,height:o,x:c,y:d}}function t1(t,s,r){let n;if(s==="viewport")n=LB(t,r);else if(s==="document")n=FB(va(t));else if(qn(s))n=VB(s,r);else{const a=g4(t);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return vh(n)}function v4(t,s){const r=Di(t);return r===s||!qn(r)||Mo(r)?!1:Un(r).position==="fixed"||v4(r,s)}function qB(t,s){const r=s.get(t);if(r)return r;let n=Vd(t,[],!1).filter(o=>qn(o)&&kc(o)!=="body"),a=null;const i=Un(t).position==="fixed";let l=i?Di(t):t;for(;qn(l)&&!Mo(l);){const o=Un(l),c=k0(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&BB.has(a.position)||Ku(l)&&!c&&v4(t,l))?n=n.filter(u=>u!==l):a=o,l=Di(l)}return s.set(t,n),n}function UB(t){let{element:s,boundary:r,rootBoundary:n,strategy:a}=t;const l=[...r==="clippingAncestors"?sp(s)?[]:qB(s,this._c):[].concat(r),n],o=l[0],c=l.reduce((d,u)=>{const m=t1(s,u,a);return d.top=zr(m.top,d.top),d.right=Ti(m.right,d.right),d.bottom=Ti(m.bottom,d.bottom),d.left=zr(m.left,d.left),d},t1(s,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zB(t){const{width:s,height:r}=f4(t);return{width:s,height:r}}function GB(t,s,r){const n=pa(s),a=va(s),i=r==="fixed",l=yl(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const c=aa(0);function d(){c.x=D0(a)}if(n||!n&&!i)if((kc(s)!=="body"||Ku(a))&&(o=rp(s)),n){const x=yl(s,!0,i,s);c.x=x.x+s.clientLeft,c.y=x.y+s.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?j4(a,o):aa(0),m=l.left+o.scrollLeft-c.x-u.x,h=l.top+o.scrollTop-c.y-u.y;return{x:m,y:h,width:l.width,height:l.height}}function Jf(t){return Un(t).position==="static"}function s1(t,s){if(!pa(t)||Un(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return va(t)===r&&(r=r.ownerDocument.body),r}function y4(t,s){const r=Yr(t);if(sp(t))return r;if(!pa(t)){let a=Di(t);for(;a&&!Mo(a);){if(qn(a)&&!Jf(a))return a;a=Di(a)}return r}let n=s1(t,s);for(;n&&kB(n)&&Jf(n);)n=s1(n,s);return n&&Mo(n)&&Jf(n)&&!k0(n)?r:n||EB(t)||r}const HB=async function(t){const s=this.getOffsetParent||y4,r=this.getDimensions,n=await r(t.floating);return{reference:GB(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function KB(t){return Un(t).direction==="rtl"}const WB={convertOffsetParentRelativeRectToViewportRelativeRect:IB,getDocumentElement:va,getClippingRect:UB,getOffsetParent:y4,getElementRects:HB,getClientRects:$B,getDimensions:zB,getScale:No,isElement:qn,isRTL:KB};function b4(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function YB(t,s){let r=null,n;const a=va(t);function i(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:u,top:m,width:h,height:x}=d;if(o||s(),!h||!x)return;const g=Pm(m),p=Pm(a.clientWidth-(u+h)),f=Pm(a.clientHeight-(m+x)),v=Pm(u),y={rootMargin:-g+"px "+-p+"px "+-f+"px "+-v+"px",threshold:zr(0,Ti(1,c))||1};let S=!0;function w(C){const k=C[0].intersectionRatio;if(k!==c){if(!S)return l();k?l(!1,k):n=setTimeout(()=>{l(!1,1e-7)},1e3)}k===1&&!b4(d,t.getBoundingClientRect())&&l(),S=!1}try{r=new IntersectionObserver(w,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(w,y)}r.observe(t)}return l(!0),i}function QB(t,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=T0(t),u=a||i?[...d?Vd(d):[],...Vd(s)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const m=d&&o?YB(d,r):null;let h=-1,x=null;l&&(x=new ResizeObserver(v=>{let[b]=v;b&&b.target===d&&x&&(x.unobserve(s),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=x)==null||y.observe(s)})),r()}),d&&!c&&x.observe(d),x.observe(s));let g,p=c?yl(t):null;c&&f();function f(){const v=yl(t);p&&!b4(p,v)&&r(),p=v,g=requestAnimationFrame(f)}return r(),()=>{var v;u.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),m?.(),(v=x)==null||v.disconnect(),x=null,c&&cancelAnimationFrame(g)}}const XB=bB,ZB=NB,JB=jB,eV=SB,tV=vB,r1=gB,sV=wB,rV=(t,s,r)=>{const n=new Map,a={platform:WB,...r},i={...a.platform,_c:n};return fB(t,s,{...a,platform:i})};var nV=typeof document<"u",aV=function(){},nh=nV?j.useLayoutEffect:aV;function yh(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,n,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!yh(t[n],s[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!yh(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function N4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function n1(t,s){const r=N4(t);return Math.round(s*r)/r}function eg(t){const s=j.useRef(t);return nh(()=>{s.current=t}),s}function iV(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[u,m]=j.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[h,x]=j.useState(n);yh(h,n)||x(n);const[g,p]=j.useState(null),[f,v]=j.useState(null),b=j.useCallback(T=>{T!==C.current&&(C.current=T,p(T))},[]),y=j.useCallback(T=>{T!==k.current&&(k.current=T,v(T))},[]),S=i||g,w=l||f,C=j.useRef(null),k=j.useRef(null),A=j.useRef(u),N=c!=null,M=eg(c),F=eg(a),I=eg(d),V=j.useCallback(()=>{if(!C.current||!k.current)return;const T={placement:s,strategy:r,middleware:h};F.current&&(T.platform=F.current),rV(C.current,k.current,T).then(B=>{const W={...B,isPositioned:I.current!==!1};E.current&&!yh(A.current,W)&&(A.current=W,bc.flushSync(()=>{m(W)}))})},[h,s,r,F,I]);nh(()=>{d===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,m(T=>({...T,isPositioned:!1})))},[d]);const E=j.useRef(!1);nh(()=>(E.current=!0,()=>{E.current=!1}),[]),nh(()=>{if(S&&(C.current=S),w&&(k.current=w),S&&w){if(M.current)return M.current(S,w,V);V()}},[S,w,V,M,N]);const G=j.useMemo(()=>({reference:C,floating:k,setReference:b,setFloating:y}),[b,y]),Y=j.useMemo(()=>({reference:S,floating:w}),[S,w]),Q=j.useMemo(()=>{const T={position:r,left:0,top:0};if(!Y.floating)return T;const B=n1(Y.floating,u.x),W=n1(Y.floating,u.y);return o?{...T,transform:"translate("+B+"px, "+W+"px)",...N4(Y.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:B,top:W}},[r,o,Y.floating,u.x,u.y]);return j.useMemo(()=>({...u,update:V,refs:G,elements:Y,floatingStyles:Q}),[u,V,G,Y,Q])}const lV=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&s(n)?n.current!=null?r1({element:n.current,padding:a}).fn(r):{}:n?r1({element:n,padding:a}).fn(r):{}}}},oV=(t,s)=>({...XB(t),options:[t,s]}),cV=(t,s)=>({...ZB(t),options:[t,s]}),dV=(t,s)=>({...sV(t),options:[t,s]}),uV=(t,s)=>({...JB(t),options:[t,s]}),mV=(t,s)=>({...eV(t),options:[t,s]}),hV=(t,s)=>({...tV(t),options:[t,s]}),xV=(t,s)=>({...lV(t),options:[t,s]});var pV="Arrow",w4=j.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...i}=t;return e.jsx(Ye.svg,{...i,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});w4.displayName=pV;var fV=w4;function np(t){const[s,r]=j.useState(void 0);return $s(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=t.offsetWidth,o=t.offsetHeight;r({width:l,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var O0="Popper",[S4,Ii]=Zs(O0),[gV,C4]=S4(O0),P4=t=>{const{__scopePopper:s,children:r}=t,[n,a]=j.useState(null);return e.jsx(gV,{scope:s,anchor:n,onAnchorChange:a,children:r})};P4.displayName=O0;var k4="PopperAnchor",A4=j.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=C4(k4,r),l=j.useRef(null),o=jt(s,l);return j.useEffect(()=>{i.onAnchorChange(n?.current||l.current)}),n?null:e.jsx(Ye.div,{...a,ref:o})});A4.displayName=k4;var E0="PopperContent",[jV,vV]=S4(E0),T4=j.forwardRef((t,s)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:g,...p}=t,f=C4(E0,r),[v,b]=j.useState(null),y=jt(s,me=>b(me)),[S,w]=j.useState(null),C=np(S),k=C?.width??0,A=C?.height??0,N=n+(i!=="center"?"-"+i:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(d)?d:[d],I=F.length>0,V={padding:M,boundary:F.filter(bV),altBoundary:I},{refs:E,floatingStyles:G,placement:Y,isPositioned:Q,middlewareData:T}=iV({strategy:"fixed",placement:N,whileElementsMounted:(...me)=>QB(...me,{animationFrame:x==="always"}),elements:{reference:f.anchor},middleware:[oV({mainAxis:a+A,alignmentAxis:l}),c&&cV({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?dV():void 0,...V}),c&&uV({...V}),mV({...V,apply:({elements:me,rects:U,availableWidth:je,availableHeight:ye})=>{const{width:ae,height:pe}=U.reference,Je=me.floating.style;Je.setProperty("--radix-popper-available-width",`${je}px`),Je.setProperty("--radix-popper-available-height",`${ye}px`),Je.setProperty("--radix-popper-anchor-width",`${ae}px`),Je.setProperty("--radix-popper-anchor-height",`${pe}px`)}}),S&&xV({element:S,padding:o}),NV({arrowWidth:k,arrowHeight:A}),h&&hV({strategy:"referenceHidden",...V})]}),[B,W]=E4(Y),he=Rs(g);$s(()=>{Q&&he?.()},[Q,he]);const Se=T.arrow?.x,z=T.arrow?.y,L=T.arrow?.centerOffset!==0,[le,Z]=j.useState();return $s(()=>{v&&Z(window.getComputedStyle(v).zIndex)},[v]),e.jsx("div",{ref:E.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:Q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[T.transformOrigin?.x,T.transformOrigin?.y].join(" "),...T.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(jV,{scope:r,placedSide:B,onArrowChange:w,arrowX:Se,arrowY:z,shouldHideArrow:L,children:e.jsx(Ye.div,{"data-side":B,"data-align":W,...p,ref:y,style:{...p.style,animation:Q?void 0:"none"}})})})});T4.displayName=E0;var D4="PopperArrow",yV={top:"bottom",right:"left",bottom:"top",left:"right"},O4=j.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,i=vV(D4,n),l=yV[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(fV,{...a,ref:r,style:{...a.style,display:"block"}})})});O4.displayName=D4;function bV(t){return t!==null}var NV=t=>({name:"transformOrigin",options:t,fn(s){const{placement:r,rects:n,middlewareData:a}=s,l=a.arrow?.centerOffset!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[d,u]=E4(r),m={start:"0%",center:"50%",end:"100%"}[u],h=(a.arrow?.x??0)+o/2,x=(a.arrow?.y??0)+c/2;let g="",p="";return d==="bottom"?(g=l?m:`${h}px`,p=`${-c}px`):d==="top"?(g=l?m:`${h}px`,p=`${n.floating.height+c}px`):d==="right"?(g=`${-c}px`,p=l?m:`${x}px`):d==="left"&&(g=`${n.floating.width+c}px`,p=l?m:`${x}px`),{data:{x:g,y:p}}}});function E4(t){const[s,r="center"]=t.split("-");return[s,r]}var ap=P4,Wu=A4,ip=T4,lp=O4,[op,ike]=Zs("Tooltip",[Ii]),cp=Ii(),M4="TooltipProvider",wV=700,qj="tooltip.open",[SV,M0]=op(M4),R4=t=>{const{__scopeTooltip:s,delayDuration:r=wV,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=t,l=j.useRef(!0),o=j.useRef(!1),c=j.useRef(0);return j.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),e.jsx(SV,{scope:s,isOpenDelayedRef:l,delayDuration:r,onOpen:j.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:j.useCallback(d=>{o.current=d},[]),disableHoverableContent:a,children:i})};R4.displayName=M4;var qd="Tooltip",[CV,dp]=op(qd),_4=t=>{const{__scopeTooltip:s,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=t,c=M0(qd,t.__scopeTooltip),d=cp(s),[u,m]=j.useState(null),h=Wr(),x=j.useRef(0),g=l??c.disableHoverableContent,p=o??c.delayDuration,f=j.useRef(!1),[v,b]=Jr({prop:n,defaultProp:a??!1,onChange:k=>{k?(c.onOpen(),document.dispatchEvent(new CustomEvent(qj))):c.onClose(),i?.(k)},caller:qd}),y=j.useMemo(()=>v?f.current?"delayed-open":"instant-open":"closed",[v]),S=j.useCallback(()=>{window.clearTimeout(x.current),x.current=0,f.current=!1,b(!0)},[b]),w=j.useCallback(()=>{window.clearTimeout(x.current),x.current=0,b(!1)},[b]),C=j.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{f.current=!0,b(!0),x.current=0},p)},[p,b]);return j.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),e.jsx(ap,{...d,children:e.jsx(CV,{scope:s,contentId:h,open:v,stateAttribute:y,trigger:u,onTriggerChange:m,onTriggerEnter:j.useCallback(()=>{c.isOpenDelayedRef.current?C():S()},[c.isOpenDelayedRef,C,S]),onTriggerLeave:j.useCallback(()=>{g?w():(window.clearTimeout(x.current),x.current=0)},[w,g]),onOpen:S,onClose:w,disableHoverableContent:g,children:r})})};_4.displayName=qd;var Uj="TooltipTrigger",I4=j.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=dp(Uj,r),i=M0(Uj,r),l=cp(r),o=j.useRef(null),c=jt(s,o,a.onTriggerChange),d=j.useRef(!1),u=j.useRef(!1),m=j.useCallback(()=>d.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(Wu,{asChild:!0,...l,children:e.jsx(Ye.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Re(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Re(t.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Re(t.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Re(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:Re(t.onBlur,a.onClose),onClick:Re(t.onClick,a.onClose)})})});I4.displayName=Uj;var PV="TooltipPortal",[lke,kV]=op(PV,{forceMount:void 0}),Ro="TooltipContent",$4=j.forwardRef((t,s)=>{const r=kV(Ro,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=t,l=dp(Ro,t.__scopeTooltip);return e.jsx(Js,{present:n||l.open,children:l.disableHoverableContent?e.jsx(F4,{side:a,...i,ref:s}):e.jsx(AV,{side:a,...i,ref:s})})}),AV=j.forwardRef((t,s)=>{const r=dp(Ro,t.__scopeTooltip),n=M0(Ro,t.__scopeTooltip),a=j.useRef(null),i=jt(s,a),[l,o]=j.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=n,h=j.useCallback(()=>{o(null),m(!1)},[m]),x=j.useCallback((g,p)=>{const f=g.currentTarget,v={x:g.clientX,y:g.clientY},b=MV(v,f.getBoundingClientRect()),y=RV(v,b),S=_V(p.getBoundingClientRect()),w=$V([...y,...S]);o(w),m(!0)},[m]);return j.useEffect(()=>()=>h(),[h]),j.useEffect(()=>{if(c&&u){const g=f=>x(f,u),p=f=>x(f,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",p)}}},[c,u,x,h]),j.useEffect(()=>{if(l){const g=p=>{const f=p.target,v={x:p.clientX,y:p.clientY},b=c?.contains(f)||u?.contains(f),y=!IV(v,l);b?h():y&&(h(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,l,d,h]),e.jsx(F4,{...t,ref:i})}),[TV,DV]=op(qd,{isInside:!1}),OV=xT("TooltipContent"),F4=j.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=t,c=dp(Ro,r),d=cp(r),{onClose:u}=c;return j.useEffect(()=>(document.addEventListener(qj,u),()=>document.removeEventListener(qj,u)),[u]),j.useEffect(()=>{if(c.trigger){const m=h=>{h.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),e.jsx(Ml,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:e.jsxs(ip,{"data-state":c.stateAttribute,...d,...o,ref:s,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(OV,{children:n}),e.jsx(TV,{scope:r,isInside:!0,children:e.jsx(vL,{id:c.contentId,role:"tooltip",children:a||n})})]})})});$4.displayName=Ro;var L4="TooltipArrow",EV=j.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=cp(r);return DV(L4,r).isInside?null:e.jsx(lp,{...a,...n,ref:s})});EV.displayName=L4;function MV(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function RV(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function _V(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function IV(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],d=o.x,u=o.y,m=c.x,h=c.y;u>n!=h>n&&r<(m-d)*(n-u)/(h-u)+d&&(a=!a)}return a}function $V(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),FV(s)}function FV(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var LV=R4,BV=_4,VV=I4,B4=$4;const Yu=LV,fi=BV,gi=VV,Da=j.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(B4,{ref:n,sideOffset:s,className:_e("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));Da.displayName=B4.displayName;const Ud=Lu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=j.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},i)=>{const l=n?mT:"button";return e.jsx(l,{className:_e(Ud({variant:s,size:r,className:t})),ref:i,...a})});R.displayName="Button";class zd{static{this.SESSION_KEY="hostpilot_fast_auth_session"}static saveSession(s){try{localStorage.setItem(this.SESSION_KEY,JSON.stringify({...s,expiresAt:s.expiresAt.toISOString()}))}catch(r){console.error("Failed to save auth session:",r)}}static getSession(){try{const s=localStorage.getItem(this.SESSION_KEY);if(!s)return null;const r=JSON.parse(s),n=new Date(r.expiresAt);return n<=new Date?(this.clearSession(),null):{...r,expiresAt:n}}catch(s){return console.error("Failed to retrieve auth session:",s),this.clearSession(),null}}static clearSession(){try{localStorage.removeItem(this.SESSION_KEY)}catch(s){console.error("Failed to clear auth session:",s)}}}async function qV(t,s){const r=fetch("/api/auth/demo-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:s}),credentials:"include"});try{const n=await r;if(!n.ok){const c=await n.json();throw new Error(c.message||"Login failed")}const a=await n.json();console.log("Login response data:",a);const i=a.user||a,l={id:i.id,email:i.email,name:`${i.firstName||""} ${i.lastName||""}`.trim()||i.email,role:i.role||i.primaryRole,organizationId:i.organizationId,permissions:i.permissions||[],listingsAccess:i.listingsAccess||[]};console.log("Created auth user:",l);const o={user:l,expiresAt:new Date(Date.now()+24*60*60*1e3)};return zd.saveSession(o),l}catch(n){throw zd.clearSession(),n}}async function UV(){zd.clearSession(),fetch("/api/auth/demo-logout",{method:"POST",credentials:"include"}).catch(t=>{console.error("Logout API failed:",t)})}function vn(){const[t,s]=j.useState(null),[r,n]=j.useState(!0);j.useEffect(()=>{a()},[]);const a=async()=>{try{const o=await fetch("/api/auth/user",{credentials:"include"});if(o.ok){const c=await o.json();console.log("Server auth response:",c);const d={...c,permissions:[],listingsAccess:[]};console.log("Processed auth user:",d);const u={user:d,expiresAt:new Date(Date.now()+24*60*60*1e3)};zd.saveSession(u),s(d)}else s(null)}catch(o){console.error("Auth check failed:",o),zd.clearSession(),s(null)}finally{n(!1)}};return{user:t,isLoading:r,login:async(o,c)=>{const d=await qV(o,c);return s(d),d},logout:async()=>{try{s(null),await UV(),setTimeout(()=>{window.location.href="/"},100)}catch(o){console.error("Logout failed:",o),s(null),window.location.href="/"}},isAuthenticated:!!t}}const V4=j.createContext(void 0);function zV({children:t}){const[s,r]=j.useState(()=>localStorage.getItem("sidebarCollapsed")==="true");j.useEffect(()=>{localStorage.setItem("sidebarCollapsed",String(s))},[s]),j.useEffect(()=>{const a=i=>{i.key==="sidebarCollapsed"&&i.newValue!==null&&r(i.newValue==="true")};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const n=()=>{r(a=>!a)};return e.jsx(V4.Provider,{value:{collapsed:s,toggleCollapsed:n,setCollapsed:r},children:t})}function GV(){const t=j.useContext(V4);if(t===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return t}function HV({className:t}){const[s,r]=pr(),{collapsed:n,toggleCollapsed:a}=GV(),[i,l]=j.useState(!1),[o,c]=j.useState(!1),{user:d,isAuthenticated:u,logout:m}=vn();j.useEffect(()=>{const v=window.matchMedia("(max-width: 767px)"),b=y=>{l(y.matches),y.matches||c(!1)};return b(v),v.addEventListener("change",b),()=>v.removeEventListener("change",b)},[]);const h=d?.role||"guest",g=(v=>{const b=[{label:"Dashboard",icon:qs,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:_s,href:"/property-hub",tooltip:"Property Management"},{label:"Finance",icon:He,href:"/finance-hub",tooltip:"Finance Hub"},{label:"System",icon:Lt,href:"/system-hub",tooltip:"System Settings"},{label:"Salaries",icon:yo,href:"/salaries-wages",tooltip:"Staff Salaries"},{label:"Achievements",icon:Rn,href:"/achievements",tooltip:"Achievements"}];return{admin:b,"portfolio-manager":b,staff:[{label:"Dashboard",icon:qs,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:_s,href:"/property-hub",tooltip:"Property Management"},{label:"Achievements",icon:Rn,href:"/achievements",tooltip:"Achievements"}],owner:[{label:"Dashboard",icon:qs,href:"/dashboard-hub",tooltip:"Dashboard Hub"},{label:"Property",icon:_s,href:"/property-hub",tooltip:"Property Management"},{label:"Finance",icon:He,href:"/finance-hub",tooltip:"Finance Hub"},{label:"Achievements",icon:Rn,href:"/achievements",tooltip:"Achievements"}],guest:[{label:"My Stay",icon:Us,href:"/",tooltip:"Guest Dashboard"},{label:"Property Info",icon:Tt,href:"/property-info",tooltip:"Property Information"},{label:"Calendar",icon:We,href:"/services",tooltip:"Services"}]}[v]||b})(h),p=async()=>{try{await m()}catch(v){console.error("Logout error:",v),window.location.href="/"}},f=v=>{r(v),i&&c(!1)};return u?e.jsxs(Yu,{delayDuration:200,children:[i&&e.jsx("button",{"aria-expanded":o,"aria-label":o?"Close menu":"Open menu",onClick:()=>c(v=>!v),className:"max-h-screen fixed top-4 left-4 z-60 p-2 rounded-md bg-white/90 dark:bg-black/90 shadow-lg md:hidden",children:o?e.jsx(Is,{className:"h-5 w-5"}):e.jsx(JL,{className:"h-5 w-5"})}),i&&o&&e.jsx("div",{onClick:()=>c(!1),className:"min-h-screen fixed inset-0 bg-black/50 z-40 md:hidden"}),e.jsxs("div",{className:_e("sticky top-0 h-screen bg-white dark:bg-black text-black dark:text-slate-500 flex flex-col items-start transition-all duration-300 ease-in-out shadow-2xl",!i&&"flex-shrink-0",!i&&(n?"w-16":"w-64"),i&&"fixed left-0 top-0 z-50",i&&(o?"w-64 translate-x-0":"w-64 -translate-x-full pointer-events-none"),t),children:[e.jsx("div",{className:"w-full border-b border-slate-700/50 text-black dark:text-white",children:e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:_e("w-10 h-10 bg-emerald-500 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",n&&"w-8 h-8"),children:e.jsx(Tt,{className:_e("text-white",n?"h-4 w-4":"h-5 w-5")})}),!n&&!i&&e.jsx("div",{className:"flex flex-col min-w-0",children:e.jsx("span",{className:"font-bold text-sm text-black dark:text-white truncate",children:"HostPilotPro"})})]}),i&&o&&e.jsx("button",{"aria-label":"Close sidebar",onClick:()=>c(!1),className:"p-1 rounded-md",children:e.jsx(Is,{className:"h-4 w-4"})})]})}),e.jsx("nav",{className:"flex-1 w-full overflow-y-auto py-4 px-2 text-black",children:e.jsx("ul",{className:"space-y-1",children:g.map((v,b)=>{const y=v.icon,S=s===v.href||s.startsWith(v.href+"?"),w=e.jsxs("button",{onClick:()=>f(v.href),className:_e("w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200",S?"bg-emerald-500 text-white shadow-lg":"text-slate-900 hover:bg-slate-700/50 hover:text-white",(n||i&&!o)&&"justify-center px-2"),"data-testid":`nav-${v.label.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx(y,{className:_e("flex-shrink-0","h-5 w-5")}),!n&&(!i||o)&&e.jsx("span",{className:"text-sm font-medium truncate",children:v.label})]},b);return n&&!i?e.jsx("li",{children:e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:w}),e.jsx(Da,{side:"right",className:"bg-slate-700 text-white border-slate-600",children:v.tooltip})]})},b):e.jsx("li",{children:w},b)})})}),e.jsxs("div",{className:"w-full border-t border-slate-700/50 flex-none",children:[!n&&(!i||o)&&e.jsx("div",{className:"px-4 py-3",children:e.jsxs(R,{variant:"ghost",size:"sm",onClick:p,className:"w-full justify-start text-slate-900 hover:bg-slate-700/50 hover:text-white",children:[e.jsx(cn,{className:"h-4 w-4 mr-2"}),"Logout"]})}),!i&&e.jsx("div",{className:"p-3",children:e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"sm",onClick:a,"aria-expanded":!n,"aria-label":n?"Expand sidebar":"Collapse sidebar",className:_e("w-full h-10 text-slate-300 hover:bg-slate-700/50 hover:text-white transition-all duration-200",n&&"justify-center px-0"),"data-testid":"sidebar-toggle",children:n?e.jsx(Rl,{className:"h-5 w-5"}):e.jsxs(e.Fragment,{children:[e.jsx(Vu,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-sm",children:"Collapse"})]})})}),e.jsx(Da,{side:"right",className:"bg-slate-700 text-white border-slate-600",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})]})]})]}):null}class KV{constructor(){this.cache=new Map,this.listeners=new Map,this.CACHE_DURATION=120*1e3}set(s,r){this.cache.set(s,{data:r,timestamp:Date.now(),key:s,isStale:!1}),this.notifyListeners(s,r)}addListener(s,r){this.listeners.has(s)||this.listeners.set(s,new Set),this.listeners.get(s).add(r)}removeListener(s,r){const n=this.listeners.get(s);n&&(n.delete(r),n.size===0&&this.listeners.delete(s))}notifyListeners(s,r){const n=this.listeners.get(s);n&&n.forEach(a=>a(s,r))}get(s){const r=this.cache.get(s);return r?Date.now()-r.timestamp>this.CACHE_DURATION?(this.cache.delete(s),null):r.data:null}isStale(s){const r=this.cache.get(s);return r?Date.now()-r.timestamp>this.CACHE_DURATION:!0}clear(s){if(!s){this.cache.clear();return}for(const[r]of this.cache)r.includes(s)&&this.cache.delete(r)}getAllCachedKeys(){return Array.from(this.cache.keys())}getCacheStats(){const s=Date.now();let r=0,n=0;for(const a of this.cache.values())s-a.timestamp>this.CACHE_DURATION?r++:n++;return{total:this.cache.size,expired:r,active:n}}async preloadDashboardData(){const r=["/api/dashboard/stats","/api/properties","/api/tasks","/api/bookings","/api/finance/analytics"].map(async n=>{try{const a=await fetch(n,{credentials:"include"});if(a.ok){const i=await a.json();this.set(n,i)}}catch(a){console.warn(`Failed to preload ${n}:`,a)}});await Promise.allSettled(r)}}const ui=new KV;function WV(){typeof window<"u"&&setTimeout(()=>{ui.preloadDashboardData()},1e3)}const q4=j.createContext(void 0);function YV({children:t}){const[,s]=j.useState({}),r=d=>ui.get(d),n=(d,u)=>{ui.set(d,u),s({})},c={getCachedData:r,setCachedData:n,refreshData:async d=>{try{const u=await fetch(d,{credentials:"include"});if(u.ok){const m=await u.json();return n(d,m),m}}catch(u){console.error(`Failed to refresh data for ${d}:`,u)}},isStale:d=>ui.isStale(d),clearCache:d=>{ui.clear(d),s({})},subscribeToCacheUpdates:(d,u)=>{const m=(h,x)=>{h===d&&u(x)};return ui.addListener(d,m),()=>{ui.removeListener(d,m)}}};return e.jsx(q4.Provider,{value:c,children:t})}function U4(){const t=j.useContext(q4);if(t===void 0)throw new Error("useCache must be used within a CacheProvider");return t}function z4(t,s,r={}){const{getCachedData:n,setCachedData:a,subscribeToCacheUpdates:i,isStale:l}=U4(),[o,c]=j.useState(()=>n(t)),[d,u]=j.useState(!o),[m,h]=j.useState(null);j.useEffect(()=>i(t,p=>{c(p),u(!1),h(null)}),[t,i]);const x=async(g=!0)=>{try{if(h(null),g){const f=n(t);if(f)return c(f),u(!1),l(t)&&r.backgroundRefresh!==!1&&x(!1),f}u(!0);let p;if(!s){const f=await fetch(t,{credentials:"include"});if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);p=await f.json()}return a(t,p),c(p),p}catch(p){const f=p instanceof Error?p:new Error("Unknown error");h(f);const v=n(t);v&&c(v)}finally{u(!1)}};return j.useEffect(()=>{x()},[t]),j.useEffect(()=>{if(r.refetchInterval){const g=setInterval(()=>{x(!1)},r.refetchInterval);return()=>clearInterval(g)}},[r.refetchInterval]),{data:o,isLoading:d,error:m,refetch:()=>x(!1),isStale:l(t)}}const O=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:_e("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));O.displayName="Card";const _=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:_e("flex flex-col space-y-1.5 p-6",t),...s}));_.displayName="CardHeader";const $=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:_e("text-2xl font-semibold leading-none tracking-tight",t),...s}));$.displayName="CardTitle";const Te=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:_e("text-sm text-muted-foreground",t),...s}));Te.displayName="CardDescription";const D=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:_e("p-6 pt-0",t),...s}));D.displayName="CardContent";const QV=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:_e("flex items-center p-6 pt-0",t),...s}));QV.displayName="CardFooter";j.lazy(()=>ur(()=>Promise.resolve().then(()=>MH),void 0));const XV=j.lazy(()=>ur(()=>import("./SimpleFilteredFinancialDashboard-CB8ZW-xL.js"),__vite__mapDeps([0,1,2])));j.lazy(()=>ur(()=>import("./FilteredPropertyDashboard-BgVnnd0T.js"),__vite__mapDeps([3,1,2])));function ZV(){return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})}),e.jsx(D,{children:e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})})]},t))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2].map(t=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"},s))})})]},t))})]})}function JV(){return e.jsx(j.Suspense,{fallback:e.jsx(ZV,{}),children:e.jsx(XV,{})})}const H=j.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:_e("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));H.displayName="Input";const eq=Lu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function q({className:t,variant:s,...r}){return e.jsx("div",{className:_e(eq({variant:s}),t),...r})}function zj(t,[s,r]){return Math.min(r,Math.max(s,t))}var tq=j.createContext(void 0);function Ac(t){const s=j.useContext(tq);return t||s||"ltr"}var tg=0;function up(){j.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??a1()),document.body.insertAdjacentElement("beforeend",t[1]??a1()),tg++,()=>{tg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),tg--}},[])}function a1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var sg="focusScope.autoFocusOnMount",rg="focusScope.autoFocusOnUnmount",i1={bubbles:!1,cancelable:!0},sq="FocusScope",Qu=j.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=j.useState(null),d=Rs(a),u=Rs(i),m=j.useRef(null),h=jt(s,p=>c(p)),x=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(n){let p=function(y){if(x.paused||!o)return;const S=y.target;o.contains(S)?m.current=S:ci(m.current,{select:!0})},f=function(y){if(x.paused||!o)return;const S=y.relatedTarget;S!==null&&(o.contains(S)||ci(m.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const w of y)w.removedNodes.length>0&&ci(o)};document.addEventListener("focusin",p),document.addEventListener("focusout",f);const b=new MutationObserver(v);return o&&b.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",f),b.disconnect()}}},[n,o,x.paused]),j.useEffect(()=>{if(o){o1.add(x);const p=document.activeElement;if(!o.contains(p)){const v=new CustomEvent(sg,i1);o.addEventListener(sg,d),o.dispatchEvent(v),v.defaultPrevented||(rq(oq(G4(o)),{select:!0}),document.activeElement===p&&ci(o))}return()=>{o.removeEventListener(sg,d),setTimeout(()=>{const v=new CustomEvent(rg,i1);o.addEventListener(rg,u),o.dispatchEvent(v),v.defaultPrevented||ci(p??document.body,{select:!0}),o.removeEventListener(rg,u),o1.remove(x)},0)}}},[o,d,u,x]);const g=j.useCallback(p=>{if(!r&&!n||x.paused)return;const f=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,v=document.activeElement;if(f&&v){const b=p.currentTarget,[y,S]=nq(b);y&&S?!p.shiftKey&&v===S?(p.preventDefault(),r&&ci(y,{select:!0})):p.shiftKey&&v===y&&(p.preventDefault(),r&&ci(S,{select:!0})):v===b&&p.preventDefault()}},[r,n,x.paused]);return e.jsx(Ye.div,{tabIndex:-1,...l,ref:h,onKeyDown:g})});Qu.displayName=sq;function rq(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(ci(n,{select:s}),document.activeElement!==r)return}function nq(t){const s=G4(t),r=l1(s,t),n=l1(s.reverse(),t);return[r,n]}function G4(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function l1(t,s){for(const r of t)if(!aq(r,{upTo:s}))return r}function aq(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function iq(t){return t instanceof HTMLInputElement&&"select"in t}function ci(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&iq(t)&&s&&t.select()}}var o1=lq();function lq(){let t=[];return{add(s){const r=t[0];s!==r&&r?.pause(),t=c1(t,s),t.unshift(s)},remove(s){t=c1(t,s),t[0]?.resume()}}}function c1(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function oq(t){return t.filter(s=>s.tagName!=="A")}function mp(t){const s=j.useRef({value:t,previous:t});return j.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var cq=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},Gl=new WeakMap,km=new WeakMap,Am={},ng=0,H4=function(t){return t&&(t.host||H4(t.parentNode))},dq=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=H4(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},uq=function(t,s,r,n){var a=dq(s,Array.isArray(t)?t:[t]);Am[r]||(Am[r]=new WeakMap);var i=Am[r],l=[],o=new Set,c=new Set(a),d=function(m){!m||o.has(m)||(o.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(o.has(h))u(h);else try{var x=h.getAttribute(n),g=x!==null&&x!=="false",p=(Gl.get(h)||0)+1,f=(i.get(h)||0)+1;Gl.set(h,p),i.set(h,f),l.push(h),p===1&&g&&km.set(h,!0),f===1&&h.setAttribute(r,"true"),g||h.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(s),o.clear(),ng++,function(){l.forEach(function(m){var h=Gl.get(m)-1,x=i.get(m)-1;Gl.set(m,h),i.set(m,x),h||(km.has(m)||m.removeAttribute(n),km.delete(m)),x||m.removeAttribute(r)}),ng--,ng||(Gl=new WeakMap,Gl=new WeakMap,km=new WeakMap,Am={})}},hp=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=cq(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),uq(n,a,r,"aria-hidden")):function(){return null}},Zn=function(){return Zn=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},Zn.apply(this,arguments)};function K4(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function mq(t,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}var ah="right-scroll-bar-position",ih="width-before-scroll-bar",hq="with-scroll-bars-hidden",xq="--removed-body-scroll-bar-size";function ag(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function pq(t,s){var r=j.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var fq=typeof window<"u"?j.useLayoutEffect:j.useEffect,d1=new WeakMap;function gq(t,s){var r=pq(null,function(n){return t.forEach(function(a){return ag(a,n)})});return fq(function(){var n=d1.get(r);if(n){var a=new Set(n),i=new Set(t),l=r.current;a.forEach(function(o){i.has(o)||ag(o,null)}),i.forEach(function(o){a.has(o)||ag(o,l)})}d1.set(r,t)},[t]),r}function jq(t){return t}function vq(t,s){s===void 0&&(s=jq);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var l=s(i,n);return r.push(l),function(){r=r.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(n=!0;r.length;){var l=r;r=[],l.forEach(i)}r={push:function(o){return i(o)},filter:function(){return r}}},assignMedium:function(i){n=!0;var l=[];if(r.length){var o=r;r=[],o.forEach(i),l=r}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),r}}}};return a}function yq(t){t===void 0&&(t={});var s=vq(null);return s.options=Zn({async:!0,ssr:!1},t),s}var W4=function(t){var s=t.sideCar,r=K4(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return j.createElement(n,Zn({},r))};W4.isSideCarExport=!0;function bq(t,s){return t.useMedium(s),W4}var Y4=yq(),ig=function(){},xp=j.forwardRef(function(t,s){var r=j.useRef(null),n=j.useState({onScrollCapture:ig,onWheelCapture:ig,onTouchMoveCapture:ig}),a=n[0],i=n[1],l=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,m=t.shards,h=t.sideCar,x=t.noRelative,g=t.noIsolation,p=t.inert,f=t.allowPinchZoom,v=t.as,b=v===void 0?"div":v,y=t.gapMode,S=K4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,C=gq([r,s]),k=Zn(Zn({},S),a);return j.createElement(j.Fragment,null,u&&j.createElement(w,{sideCar:Y4,removeScrollBar:d,shards:m,noRelative:x,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!f,lockRef:r,gapMode:y}),l?j.cloneElement(j.Children.only(o),Zn(Zn({},k),{ref:C})):j.createElement(b,Zn({},k,{className:c,ref:C}),o))});xp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xp.classNames={fullWidth:ih,zeroRight:ah};var Nq=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wq(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=Nq();return s&&t.setAttribute("nonce",s),t}function Sq(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function Cq(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var Pq=function(){var t=0,s=null;return{add:function(r){t==0&&(s=wq())&&(Sq(s,r),Cq(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},kq=function(){var t=Pq();return function(s,r){j.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},Q4=function(){var t=kq(),s=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return s},Aq={left:0,top:0,right:0,gap:0},lg=function(t){return parseInt(t||"",10)||0},Tq=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[lg(r),lg(n),lg(a)]},Dq=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Aq;var s=Tq(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},Oq=Q4(),wo="data-scroll-locked",Eq=function(t,s,r,n){var a=t.left,i=t.top,l=t.right,o=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(hq,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(wo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ah,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(ih,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(ah," .").concat(ah,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ih," .").concat(ih,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(wo,`] {
    `).concat(xq,": ").concat(o,`px;
  }
`)},u1=function(){var t=parseInt(document.body.getAttribute(wo)||"0",10);return isFinite(t)?t:0},Mq=function(){j.useEffect(function(){return document.body.setAttribute(wo,(u1()+1).toString()),function(){var t=u1()-1;t<=0?document.body.removeAttribute(wo):document.body.setAttribute(wo,t.toString())}},[])},Rq=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;Mq();var i=j.useMemo(function(){return Dq(a)},[a]);return j.createElement(Oq,{styles:Eq(i,!s,a,r?"":"!important")})},Gj=!1;if(typeof window<"u")try{var Tm=Object.defineProperty({},"passive",{get:function(){return Gj=!0,!0}});window.addEventListener("test",Tm,Tm),window.removeEventListener("test",Tm,Tm)}catch{Gj=!1}var Hl=Gj?{passive:!1}:!1,_q=function(t){return t.tagName==="TEXTAREA"},X4=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!_q(t)&&r[s]==="visible")},Iq=function(t){return X4(t,"overflowY")},$q=function(t){return X4(t,"overflowX")},m1=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=Z4(t,n);if(a){var i=J4(t,n),l=i[1],o=i[2];if(l>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Fq=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},Lq=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},Z4=function(t,s){return t==="v"?Iq(s):$q(s)},J4=function(t,s){return t==="v"?Fq(s):Lq(s)},Bq=function(t,s){return t==="h"&&s==="rtl"?-1:1},Vq=function(t,s,r,n,a){var i=Bq(t,window.getComputedStyle(s).direction),l=i*n,o=r.target,c=s.contains(o),d=!1,u=l>0,m=0,h=0;do{if(!o)break;var x=J4(t,o),g=x[0],p=x[1],f=x[2],v=p-f-i*g;(g||v)&&Z4(t,o)&&(m+=v,h+=g);var b=o.parentNode;o=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&o!==document.body||c&&(s.contains(o)||s===o));return(u&&Math.abs(m)<1||!u&&Math.abs(h)<1)&&(d=!0),d},Dm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},h1=function(t){return[t.deltaX,t.deltaY]},x1=function(t){return t&&"current"in t?t.current:t},qq=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Uq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},zq=0,Kl=[];function Gq(t){var s=j.useRef([]),r=j.useRef([0,0]),n=j.useRef(),a=j.useState(zq++)[0],i=j.useState(Q4)[0],l=j.useRef(t);j.useEffect(function(){l.current=t},[t]),j.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=mq([t.lockRef.current],(t.shards||[]).map(x1),!0).filter(Boolean);return p.forEach(function(f){return f.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(f){return f.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=j.useCallback(function(p,f){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!l.current.allowPinchZoom;var v=Dm(p),b=r.current,y="deltaX"in p?p.deltaX:b[0]-v[0],S="deltaY"in p?p.deltaY:b[1]-v[1],w,C=p.target,k=Math.abs(y)>Math.abs(S)?"h":"v";if("touches"in p&&k==="h"&&C.type==="range")return!1;var A=m1(k,C);if(!A)return!0;if(A?w=k:(w=k==="v"?"h":"v",A=m1(k,C)),!A)return!1;if(!n.current&&"changedTouches"in p&&(y||S)&&(n.current=w),!w)return!0;var N=n.current||w;return Vq(N,f,p,N==="h"?y:S)},[]),c=j.useCallback(function(p){var f=p;if(!(!Kl.length||Kl[Kl.length-1]!==i)){var v="deltaY"in f?h1(f):Dm(f),b=s.current.filter(function(w){return w.name===f.type&&(w.target===f.target||f.target===w.shadowParent)&&qq(w.delta,v)})[0];if(b&&b.should){f.cancelable&&f.preventDefault();return}if(!b){var y=(l.current.shards||[]).map(x1).filter(Boolean).filter(function(w){return w.contains(f.target)}),S=y.length>0?o(f,y[0]):!l.current.noIsolation;S&&f.cancelable&&f.preventDefault()}}},[]),d=j.useCallback(function(p,f,v,b){var y={name:p,delta:f,target:v,should:b,shadowParent:Hq(v)};s.current.push(y),setTimeout(function(){s.current=s.current.filter(function(S){return S!==y})},1)},[]),u=j.useCallback(function(p){r.current=Dm(p),n.current=void 0},[]),m=j.useCallback(function(p){d(p.type,h1(p),p.target,o(p,t.lockRef.current))},[]),h=j.useCallback(function(p){d(p.type,Dm(p),p.target,o(p,t.lockRef.current))},[]);j.useEffect(function(){return Kl.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Hl),document.addEventListener("touchmove",c,Hl),document.addEventListener("touchstart",u,Hl),function(){Kl=Kl.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,Hl),document.removeEventListener("touchmove",c,Hl),document.removeEventListener("touchstart",u,Hl)}},[]);var x=t.removeScrollBar,g=t.inert;return j.createElement(j.Fragment,null,g?j.createElement(i,{styles:Uq(a)}):null,x?j.createElement(Rq,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Hq(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const Kq=bq(Y4,Gq);var Xu=j.forwardRef(function(t,s){return j.createElement(xp,Zn({},t,{ref:s,sideCar:Kq}))});Xu.classNames=xp.classNames;var Wq=[" ","Enter","ArrowUp","ArrowDown"],Yq=[" ","Enter"],bl="Select",[pp,fp,Qq]=Yx(bl),[Tc,oke]=Zs(bl,[Qq,Ii]),gp=Ii(),[Xq,$i]=Tc(bl),[Zq,Jq]=Tc(bl),eD=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:x,form:g}=t,p=gp(s),[f,v]=j.useState(null),[b,y]=j.useState(null),[S,w]=j.useState(!1),C=Ac(d),[k,A]=Jr({prop:n,defaultProp:a??!1,onChange:i,caller:bl}),[N,M]=Jr({prop:l,defaultProp:o,onChange:c,caller:bl}),F=j.useRef(null),I=f?g||!!f.closest("form"):!0,[V,E]=j.useState(new Set),G=Array.from(V).map(Y=>Y.props.value).join(";");return e.jsx(ap,{...p,children:e.jsxs(Xq,{required:x,scope:s,trigger:f,onTriggerChange:v,valueNode:b,onValueNodeChange:y,valueNodeHasChildren:S,onValueNodeHasChildrenChange:w,contentId:Wr(),value:N,onValueChange:M,open:k,onOpenChange:A,dir:C,triggerPointerDownPosRef:F,disabled:h,children:[e.jsx(pp.Provider,{scope:s,children:e.jsx(Zq,{scope:t.__scopeSelect,onNativeOptionAdd:j.useCallback(Y=>{E(Q=>new Set(Q).add(Y))},[]),onNativeOptionRemove:j.useCallback(Y=>{E(Q=>{const T=new Set(Q);return T.delete(Y),T})},[]),children:r})}),I?e.jsxs(SD,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:m,value:N,onChange:Y=>M(Y.target.value),disabled:h,form:g,children:[N===void 0?e.jsx("option",{value:""}):null,Array.from(V)]},G):null]})})};eD.displayName=bl;var tD="SelectTrigger",sD=j.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,i=gp(r),l=$i(tD,r),o=l.disabled||n,c=jt(s,l.onTriggerChange),d=fp(r),u=j.useRef("touch"),[m,h,x]=PD(p=>{const f=d().filter(y=>!y.disabled),v=f.find(y=>y.value===l.value),b=kD(f,p,v);b!==void 0&&l.onValueChange(b.value)}),g=p=>{o||(l.onOpenChange(!0),x()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(Wu,{asChild:!0,...i,children:e.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":CD(l.value)?"":void 0,...a,ref:c,onClick:Re(a.onClick,p=>{p.currentTarget.focus(),u.current!=="mouse"&&g(p)}),onPointerDown:Re(a.onPointerDown,p=>{u.current=p.pointerType;const f=p.target;f.hasPointerCapture(p.pointerId)&&f.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:Re(a.onKeyDown,p=>{const f=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(f&&p.key===" ")&&Wq.includes(p.key)&&(g(),p.preventDefault())})})})});sD.displayName=tD;var rD="SelectValue",nD=j.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:l="",...o}=t,c=$i(rD,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=jt(s,c.onValueNodeChange);return $s(()=>{d(u)},[d,u]),e.jsx(Ye.span,{...o,ref:m,style:{pointerEvents:"none"},children:CD(c.value)?e.jsx(e.Fragment,{children:l}):i})});nD.displayName=rD;var eU="SelectIcon",aD=j.forwardRef((t,s)=>{const{__scopeSelect:r,children:n,...a}=t;return e.jsx(Ye.span,{"aria-hidden":!0,...a,ref:s,children:n||"▼"})});aD.displayName=eU;var tU="SelectPortal",iD=t=>e.jsx(Sc,{asChild:!0,...t});iD.displayName=tU;var Nl="SelectContent",lD=j.forwardRef((t,s)=>{const r=$i(Nl,t.__scopeSelect),[n,a]=j.useState();if($s(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?bc.createPortal(e.jsx(oD,{scope:t.__scopeSelect,children:e.jsx(pp.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(cD,{...t,ref:s})});lD.displayName=Nl;var Pn=10,[oD,Fi]=Tc(Nl),sU="SelectContentImpl",rU=Pi("SelectContent.RemoveScroll"),cD=j.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:g,hideWhenDetached:p,avoidCollisions:f,...v}=t,b=$i(Nl,r),[y,S]=j.useState(null),[w,C]=j.useState(null),k=jt(s,me=>S(me)),[A,N]=j.useState(null),[M,F]=j.useState(null),I=fp(r),[V,E]=j.useState(!1),G=j.useRef(!1);j.useEffect(()=>{if(y)return hp(y)},[y]),up();const Y=j.useCallback(me=>{const[U,...je]=I().map(pe=>pe.ref.current),[ye]=je.slice(-1),ae=document.activeElement;for(const pe of me)if(pe===ae||(pe?.scrollIntoView({block:"nearest"}),pe===U&&w&&(w.scrollTop=0),pe===ye&&w&&(w.scrollTop=w.scrollHeight),pe?.focus(),document.activeElement!==ae))return},[I,w]),Q=j.useCallback(()=>Y([A,y]),[Y,A,y]);j.useEffect(()=>{V&&Q()},[V,Q]);const{onOpenChange:T,triggerPointerDownPosRef:B}=b;j.useEffect(()=>{if(y){let me={x:0,y:0};const U=ye=>{me={x:Math.abs(Math.round(ye.pageX)-(B.current?.x??0)),y:Math.abs(Math.round(ye.pageY)-(B.current?.y??0))}},je=ye=>{me.x<=10&&me.y<=10?ye.preventDefault():y.contains(ye.target)||T(!1),document.removeEventListener("pointermove",U),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",U),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",je,{capture:!0})}}},[y,T,B]),j.useEffect(()=>{const me=()=>T(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[T]);const[W,he]=PD(me=>{const U=I().filter(ae=>!ae.disabled),je=U.find(ae=>ae.ref.current===document.activeElement),ye=kD(U,me,je);ye&&setTimeout(()=>ye.ref.current.focus())}),Se=j.useCallback((me,U,je)=>{const ye=!G.current&&!je;(b.value!==void 0&&b.value===U||ye)&&(N(me),ye&&(G.current=!0))},[b.value]),z=j.useCallback(()=>y?.focus(),[y]),L=j.useCallback((me,U,je)=>{const ye=!G.current&&!je;(b.value!==void 0&&b.value===U||ye)&&F(me)},[b.value]),le=n==="popper"?Hj:dD,Z=le===Hj?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:x,sticky:g,hideWhenDetached:p,avoidCollisions:f}:{};return e.jsx(oD,{scope:r,content:y,viewport:w,onViewportChange:C,itemRefCallback:Se,selectedItem:A,onItemLeave:z,itemTextRefCallback:L,focusSelectedItem:Q,selectedItemText:M,position:n,isPositioned:V,searchRef:W,children:e.jsx(Xu,{as:rU,allowPinchZoom:!0,children:e.jsx(Qu,{asChild:!0,trapped:b.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:Re(a,me=>{b.trigger?.focus({preventScroll:!0}),me.preventDefault()}),children:e.jsx(Ml,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:me=>me.preventDefault(),...v,...Z,onPlaced:()=>E(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Re(v.onKeyDown,me=>{const U=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!U&&me.key.length===1&&he(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let ye=I().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(me.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const ae=me.target,pe=ye.indexOf(ae);ye=ye.slice(pe+1)}setTimeout(()=>Y(ye)),me.preventDefault()}})})})})})})});cD.displayName=sU;var nU="SelectItemAlignedPosition",dD=j.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,i=$i(Nl,r),l=Fi(Nl,r),[o,c]=j.useState(null),[d,u]=j.useState(null),m=jt(s,k=>u(k)),h=fp(r),x=j.useRef(!1),g=j.useRef(!0),{viewport:p,selectedItem:f,selectedItemText:v,focusSelectedItem:b}=l,y=j.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&p&&f&&v){const k=i.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),M=v.getBoundingClientRect();if(i.dir!=="rtl"){const ae=M.left-A.left,pe=N.left-ae,Je=k.left-pe,et=k.width+Je,Pe=Math.max(et,A.width),mt=window.innerWidth-Pn,Mt=zj(pe,[Pn,Math.max(Pn,mt-Pe)]);o.style.minWidth=et+"px",o.style.left=Mt+"px"}else{const ae=A.right-M.right,pe=window.innerWidth-N.right-ae,Je=window.innerWidth-k.right-pe,et=k.width+Je,Pe=Math.max(et,A.width),mt=window.innerWidth-Pn,Mt=zj(pe,[Pn,Math.max(Pn,mt-Pe)]);o.style.minWidth=et+"px",o.style.right=Mt+"px"}const F=h(),I=window.innerHeight-Pn*2,V=p.scrollHeight,E=window.getComputedStyle(d),G=parseInt(E.borderTopWidth,10),Y=parseInt(E.paddingTop,10),Q=parseInt(E.borderBottomWidth,10),T=parseInt(E.paddingBottom,10),B=G+Y+V+T+Q,W=Math.min(f.offsetHeight*5,B),he=window.getComputedStyle(p),Se=parseInt(he.paddingTop,10),z=parseInt(he.paddingBottom,10),L=k.top+k.height/2-Pn,le=I-L,Z=f.offsetHeight/2,me=f.offsetTop+Z,U=G+Y+me,je=B-U;if(U<=L){const ae=F.length>0&&f===F[F.length-1].ref.current;o.style.bottom="0px";const pe=d.clientHeight-p.offsetTop-p.offsetHeight,Je=Math.max(le,Z+(ae?z:0)+pe+Q),et=U+Je;o.style.height=et+"px"}else{const ae=F.length>0&&f===F[0].ref.current;o.style.top="0px";const Je=Math.max(L,G+p.offsetTop+(ae?Se:0)+Z)+je;o.style.height=Je+"px",p.scrollTop=U-L+p.offsetTop}o.style.margin=`${Pn}px 0`,o.style.minHeight=W+"px",o.style.maxHeight=I+"px",n?.(),requestAnimationFrame(()=>x.current=!0)}},[h,i.trigger,i.valueNode,o,d,p,f,v,i.dir,n]);$s(()=>y(),[y]);const[S,w]=j.useState();$s(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);const C=j.useCallback(k=>{k&&g.current===!0&&(y(),b?.(),g.current=!1)},[y,b]);return e.jsx(iU,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:x,onScrollButtonChange:C,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:e.jsx(Ye.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});dD.displayName=nU;var aU="SelectPopperPosition",Hj=j.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Pn,...i}=t,l=gp(r);return e.jsx(ip,{...l,...i,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hj.displayName=aU;var[iU,R0]=Tc(Nl,{}),Kj="SelectViewport",uD=j.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:n,...a}=t,i=Fi(Kj,r),l=R0(Kj,r),o=jt(s,i.onViewportChange),c=j.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(pp.Slot,{scope:r,children:e.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Re(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=l;if(h?.current&&m){const x=Math.abs(c.current-u.scrollTop);if(x>0){const g=window.innerHeight-Pn*2,p=parseFloat(m.style.minHeight),f=parseFloat(m.style.height),v=Math.max(p,f);if(v<g){const b=v+x,y=Math.min(g,b),S=b-y;m.style.height=y+"px",m.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});uD.displayName=Kj;var mD="SelectGroup",[lU,oU]=Tc(mD),cU=j.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Wr();return e.jsx(lU,{scope:r,id:a,children:e.jsx(Ye.div,{role:"group","aria-labelledby":a,...n,ref:s})})});cU.displayName=mD;var hD="SelectLabel",xD=j.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=oU(hD,r);return e.jsx(Ye.div,{id:a.id,...n,ref:s})});xD.displayName=hD;var bh="SelectItem",[dU,pD]=Tc(bh),fD=j.forwardRef((t,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...l}=t,o=$i(bh,r),c=Fi(bh,r),d=o.value===n,[u,m]=j.useState(i??""),[h,x]=j.useState(!1),g=jt(s,b=>c.itemRefCallback?.(b,n,a)),p=Wr(),f=j.useRef("touch"),v=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(dU,{scope:r,value:n,disabled:a,textId:p,isSelected:d,onItemTextChange:j.useCallback(b=>{m(y=>y||(b?.textContent??"").trim())},[]),children:e.jsx(pp.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:e.jsx(Ye.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:g,onFocus:Re(l.onFocus,()=>x(!0)),onBlur:Re(l.onBlur,()=>x(!1)),onClick:Re(l.onClick,()=>{f.current!=="mouse"&&v()}),onPointerUp:Re(l.onPointerUp,()=>{f.current==="mouse"&&v()}),onPointerDown:Re(l.onPointerDown,b=>{f.current=b.pointerType}),onPointerMove:Re(l.onPointerMove,b=>{f.current=b.pointerType,a?c.onItemLeave?.():f.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(l.onPointerLeave,b=>{b.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Re(l.onKeyDown,b=>{c.searchRef?.current!==""&&b.key===" "||(Yq.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})})})})});fD.displayName=bh;var cd="SelectItemText",gD=j.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,...i}=t,l=$i(cd,r),o=Fi(cd,r),c=pD(cd,r),d=Jq(cd,r),[u,m]=j.useState(null),h=jt(s,v=>m(v),c.onItemTextChange,v=>o.itemTextRefCallback?.(v,c.value,c.disabled)),x=u?.textContent,g=j.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:p,onNativeOptionRemove:f}=d;return $s(()=>(p(g),()=>f(g)),[p,f,g]),e.jsxs(e.Fragment,{children:[e.jsx(Ye.span,{id:c.textId,...i,ref:h}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?bc.createPortal(i.children,l.valueNode):null]})});gD.displayName=cd;var jD="SelectItemIndicator",vD=j.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return pD(jD,r).isSelected?e.jsx(Ye.span,{"aria-hidden":!0,...n,ref:s}):null});vD.displayName=jD;var Wj="SelectScrollUpButton",yD=j.forwardRef((t,s)=>{const r=Fi(Wj,t.__scopeSelect),n=R0(Wj,t.__scopeSelect),[a,i]=j.useState(!1),l=jt(s,n.onScrollButtonChange);return $s(()=>{if(r.viewport&&r.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?e.jsx(ND,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});yD.displayName=Wj;var Yj="SelectScrollDownButton",bD=j.forwardRef((t,s)=>{const r=Fi(Yj,t.__scopeSelect),n=R0(Yj,t.__scopeSelect),[a,i]=j.useState(!1),l=jt(s,n.onScrollButtonChange);return $s(()=>{if(r.viewport&&r.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?e.jsx(ND,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=r;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});bD.displayName=Yj;var ND=j.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,i=Fi("SelectScrollButton",r),l=j.useRef(null),o=fp(r),c=j.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),$s(()=>{o().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),e.jsx(Ye.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:Re(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Re(a.onPointerMove,()=>{i.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Re(a.onPointerLeave,()=>{c()})})}),uU="SelectSeparator",wD=j.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return e.jsx(Ye.div,{"aria-hidden":!0,...n,ref:s})});wD.displayName=uU;var Qj="SelectArrow",mU=j.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=gp(r),i=$i(Qj,r),l=Fi(Qj,r);return i.open&&l.position==="popper"?e.jsx(lp,{...a,...n,ref:s}):null});mU.displayName=Qj;var hU="SelectBubbleInput",SD=j.forwardRef(({__scopeSelect:t,value:s,...r},n)=>{const a=j.useRef(null),i=jt(n,a),l=mp(s);return j.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==s&&u){const m=new Event("change",{bubbles:!0});u.call(o,s),o.dispatchEvent(m)}},[l,s]),e.jsx(Ye.select,{...r,style:{...jT,...r.style},ref:i,defaultValue:s})});SD.displayName=hU;function CD(t){return t===""||t===void 0}function PD(t){const s=Rs(t),r=j.useRef(""),n=j.useRef(0),a=j.useCallback(l=>{const o=r.current+l;s(o),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(o)},[s]),i=j.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function kD(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let l=xU(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==r));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function xU(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var pU=eD,AD=sD,fU=nD,gU=aD,jU=iD,TD=lD,vU=uD,DD=xD,OD=fD,yU=gD,bU=vD,ED=yD,MD=bD,RD=wD;const te=pU,se=fU,J=j.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(AD,{ref:n,className:_e("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(gU,{asChild:!0,children:e.jsx(Jx,{className:"h-4 w-4 opacity-50"})})]}));J.displayName=AD.displayName;const _D=j.forwardRef(({className:t,...s},r)=>e.jsx(ED,{ref:r,className:_e("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(HT,{className:"h-4 w-4"})}));_D.displayName=ED.displayName;const ID=j.forwardRef(({className:t,...s},r)=>e.jsx(MD,{ref:r,className:_e("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Jx,{className:"h-4 w-4"})}));ID.displayName=MD.displayName;const ee=j.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(jU,{children:e.jsxs(TD,{ref:a,className:_e("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(_D,{}),e.jsx(vU,{className:_e("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(ID,{})]})}));ee.displayName=TD.displayName;const NU=j.forwardRef(({className:t,...s},r)=>e.jsx(DD,{ref:r,className:_e("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));NU.displayName=DD.displayName;const P=j.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(OD,{ref:n,className:_e("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(bU,{children:e.jsx(Zx,{className:"h-4 w-4"})})}),e.jsx(yU,{children:s})]}));P.displayName=OD.displayName;const wU=j.forwardRef(({className:t,...s},r)=>e.jsx(RD,{ref:r,className:_e("-mx-1 my-1 h-px bg-muted",t),...s}));wU.displayName=RD.displayName;const SU=[{id:1,name:"Villa Samui Breeze",location:"Koh Samui, Thailand",status:"active",bedrooms:3,bathrooms:2,capacity:6,occupancy:85,monthlyRevenue:125e3,roi:12.5,lastBooking:"2 days ago",maintenanceTasks:2,nextCheckIn:"Tomorrow",image:"🏖️",bookingsThisMonth:8,avgDailyRate:4500},{id:2,name:"Villa Ocean View",location:"Phuket, Thailand",status:"active",bedrooms:2,bathrooms:2,capacity:4,occupancy:72,monthlyRevenue:89e3,roi:9.8,lastBooking:"5 days ago",maintenanceTasks:0,nextCheckIn:"Next week",image:"🌊",bookingsThisMonth:6,avgDailyRate:3200},{id:3,name:"Villa Tropical Paradise",location:"Krabi, Thailand",status:"maintenance",bedrooms:4,bathrooms:3,capacity:8,occupancy:0,monthlyRevenue:0,roi:0,lastBooking:"1 week ago",maintenanceTasks:5,nextCheckIn:"In renovation",image:"🌺",bookingsThisMonth:0,avgDailyRate:0},{id:4,name:"Villa Aruna Demo",location:"Chiang Mai, Thailand",status:"active",bedrooms:5,bathrooms:4,capacity:10,occupancy:92,monthlyRevenue:18e4,roi:15.2,lastBooking:"Yesterday",maintenanceTasks:1,nextCheckIn:"Today",image:"🏔️",bookingsThisMonth:12,avgDailyRate:6e3}],Gi={totalProperties:4,activeProperties:3,totalRevenue:394e3,avgOccupancy:62.3,totalBookings:26,pendingTasks:8};function CU(){const[t,s]=j.useState(""),[r,n]=j.useState("all"),[a,i]=j.useState("overview"),l=j.useMemo(()=>SU.filter(d=>{const u=t===""||d.name.toLowerCase().includes(t.toLowerCase())||d.location.toLowerCase().includes(t.toLowerCase()),m=r==="all"||d.status===r;return u&&m}),[t,r]),o=d=>{switch(d){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},c=d=>`฿${d.toLocaleString()}`;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Property Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive overview of your property portfolio performance"})]}),e.jsxs(R,{className:"gap-2",children:[e.jsx(ht,{className:"h-4 w-4"}),"Add Property"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(_s,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Gi.totalProperties}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Gi.activeProperties," active"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c(Gi.totalRevenue)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Avg Occupancy"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Gi.avgOccupancy,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Portfolio average"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Bookings"}),e.jsx(We,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Gi.totalBookings}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Tasks"}),e.jsx(As,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Gi.pendingTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Active Properties"}),e.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Gi.activeProperties}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently operating"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(H,{placeholder:"Search properties by name or location...",className:"pl-10",value:t,onChange:d=>s(d.target.value)})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsxs(J,{className:"w-48",children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),e.jsx(se,{placeholder:"Filter by status"})]}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"inactive",children:"Inactive"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(d=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:d.image}),e.jsxs("div",{children:[e.jsx($,{className:"text-lg",children:d.name}),e.jsxs(Te,{className:"flex items-center gap-1",children:[e.jsx(is,{className:"h-3 w-3"}),d.location]})]})]}),e.jsx(q,{className:o(d.status),children:d.status})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:[d.bedrooms,"BR/",d.bathrooms,"BA"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{children:["Up to ",d.capacity]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Occupancy"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d.occupancy}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[d.occupancy,"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:c(d.monthlyRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ROI"}),e.jsxs("span",{className:"text-sm font-semibold",children:[d.roi,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Last Booking"}),e.jsx("span",{className:"text-sm",children:d.lastBooking})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Next Check-in"}),e.jsx("span",{className:"text-sm font-medium",children:d.nextCheckIn})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(R,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(qs,{className:"h-3 w-3 mr-1"}),"Analytics"]})]}),d.maintenanceTasks>0&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 rounded-md",children:[e.jsx(Nt,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("span",{className:"text-sm text-yellow-800",children:[d.maintenanceTasks," pending task",d.maintenanceTasks>1?"s":""]})]})]})]},d.id))}),l.length===0&&e.jsx(O,{className:"py-12",children:e.jsxs(D,{className:"text-center",children:[e.jsx(_s,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or add a new property to get started."}),e.jsxs(R,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Your First Property"]})]})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Quick Insights"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(d=>d.status==="active").length}),e.jsx("div",{className:"text-green-800",children:"Active Properties"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(l.reduce((d,u)=>d+u.occupancy,0)/l.length||0),"%"]}),e.jsx("div",{className:"text-blue-800",children:"Average Occupancy"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c(l.reduce((d,u)=>d+u.monthlyRevenue,0))}),e.jsx("div",{className:"text-purple-800",children:"Total Revenue"})]})]})})]})]})}const zs=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:_e("w-full caption-bottom text-sm",t),...s})}));zs.displayName="Table";const Gs=j.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:_e("[&_tr]:border-b",t),...s}));Gs.displayName="TableHeader";const Hs=j.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:_e("[&_tr:last-child]:border-0",t),...s}));Hs.displayName="TableBody";const PU=j.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:_e("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));PU.displayName="TableFooter";const wt=j.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:_e("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));wt.displayName="TableRow";const Oe=j.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:_e("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));Oe.displayName="TableHead";const Ae=j.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:_e("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));Ae.displayName="TableCell";const kU=j.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:_e("mt-4 text-sm text-muted-foreground",t),...s}));kU.displayName="TableCaption";var jp="Dialog",[$D,FD]=Zs(jp),[AU,Kn]=$D(jp),LD=t=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,o=j.useRef(null),c=j.useRef(null),[d,u]=Jr({prop:n,defaultProp:a??!1,onChange:i,caller:jp});return e.jsx(AU,{scope:s,triggerRef:o,contentRef:c,contentId:Wr(),titleId:Wr(),descriptionId:Wr(),open:d,onOpenChange:u,onOpenToggle:j.useCallback(()=>u(m=>!m),[u]),modal:l,children:r})};LD.displayName=jp;var BD="DialogTrigger",VD=j.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Kn(BD,r),i=jt(s,a.triggerRef);return e.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":$0(a.open),...n,ref:i,onClick:Re(t.onClick,a.onOpenToggle)})});VD.displayName=BD;var _0="DialogPortal",[TU,qD]=$D(_0,{forceMount:void 0}),UD=t=>{const{__scopeDialog:s,forceMount:r,children:n,container:a}=t,i=Kn(_0,s);return e.jsx(TU,{scope:s,forceMount:r,children:j.Children.map(n,l=>e.jsx(Js,{present:r||i.open,children:e.jsx(Sc,{asChild:!0,container:a,children:l})}))})};UD.displayName=_0;var Nh="DialogOverlay",zD=j.forwardRef((t,s)=>{const r=qD(Nh,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Kn(Nh,t.__scopeDialog);return i.modal?e.jsx(Js,{present:n||i.open,children:e.jsx(OU,{...a,ref:s})}):null});zD.displayName=Nh;var DU=Pi("DialogOverlay.RemoveScroll"),OU=j.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Kn(Nh,r);return e.jsx(Xu,{as:DU,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(Ye.div,{"data-state":$0(a.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),wl="DialogContent",GD=j.forwardRef((t,s)=>{const r=qD(wl,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Kn(wl,t.__scopeDialog);return e.jsx(Js,{present:n||i.open,children:i.modal?e.jsx(EU,{...a,ref:s}):e.jsx(MU,{...a,ref:s})})});GD.displayName=wl;var EU=j.forwardRef((t,s)=>{const r=Kn(wl,t.__scopeDialog),n=j.useRef(null),a=jt(s,r.contentRef,n);return j.useEffect(()=>{const i=n.current;if(i)return hp(i)},[]),e.jsx(HD,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(t.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Re(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:Re(t.onFocusOutside,i=>i.preventDefault())})}),MU=j.forwardRef((t,s)=>{const r=Kn(wl,t.__scopeDialog),n=j.useRef(!1),a=j.useRef(!1);return e.jsx(HD,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;r.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),HD=j.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,o=Kn(wl,r),c=j.useRef(null),d=jt(s,c);return up(),e.jsxs(e.Fragment,{children:[e.jsx(Qu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Ml,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":$0(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(_U,{titleId:o.titleId}),e.jsx($U,{contentRef:c,descriptionId:o.descriptionId})]})]})}),I0="DialogTitle",KD=j.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Kn(I0,r);return e.jsx(Ye.h2,{id:a.titleId,...n,ref:s})});KD.displayName=I0;var WD="DialogDescription",YD=j.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Kn(WD,r);return e.jsx(Ye.p,{id:a.descriptionId,...n,ref:s})});YD.displayName=WD;var QD="DialogClose",XD=j.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=Kn(QD,r);return e.jsx(Ye.button,{type:"button",...n,ref:s,onClick:Re(t.onClick,()=>a.onOpenChange(!1))})});XD.displayName=QD;function $0(t){return t?"open":"closed"}var ZD="DialogTitleWarning",[RU,JD]=YF(ZD,{contentName:wl,titleName:I0,docsSlug:"dialog"}),_U=({titleId:t})=>{const s=JD(ZD),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return j.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},IU="DialogDescriptionWarning",$U=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${JD(IU).contentName}}.`;return j.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},eO=LD,tO=VD,sO=UD,F0=zD,L0=GD,B0=KD,V0=YD,q0=XD;const Ve=eO,Yt=tO,FU=sO,rO=j.forwardRef(({className:t,...s},r)=>e.jsx(F0,{ref:r,className:_e("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));rO.displayName=F0.displayName;const qe=j.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(FU,{children:[e.jsx(rO,{}),e.jsxs(L0,{ref:n,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(q0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qe.displayName=L0.displayName;const Ue=({className:t,...s})=>e.jsx("div",{className:_e("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Ue.displayName="DialogHeader";const Nr=({className:t,...s})=>e.jsx("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Nr.displayName="DialogFooter";const ze=j.forwardRef(({className:t,...s},r)=>e.jsx(B0,{ref:r,className:_e("text-lg font-semibold leading-none tracking-tight",t),...s}));ze.displayName=B0.displayName;const Pt=j.forwardRef(({className:t,...s},r)=>e.jsx(V0,{ref:r,className:_e("text-sm text-muted-foreground",t),...s}));Pt.displayName=V0.displayName;var og="rovingFocusGroup.onEntryFocus",LU={bubbles:!1,cancelable:!0},Zu="RovingFocusGroup",[Xj,nO,BU]=Yx(Zu),[VU,Dc]=Zs(Zu,[BU]),[qU,UU]=VU(Zu),aO=j.forwardRef((t,s)=>e.jsx(Xj.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Xj.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(zU,{...t,ref:s})})}));aO.displayName=Zu;var zU=j.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=t,h=j.useRef(null),x=jt(s,h),g=Ac(i),[p,f]=Jr({prop:l,defaultProp:o??null,onChange:c,caller:Zu}),[v,b]=j.useState(!1),y=Rs(d),S=nO(r),w=j.useRef(!1),[C,k]=j.useState(0);return j.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(og,y),()=>A.removeEventListener(og,y)},[y]),e.jsx(qU,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:p,onItemFocus:j.useCallback(A=>f(A),[f]),onItemShiftTab:j.useCallback(()=>b(!0),[]),onFocusableItemAdd:j.useCallback(()=>k(A=>A+1),[]),onFocusableItemRemove:j.useCallback(()=>k(A=>A-1),[]),children:e.jsx(Ye.div,{tabIndex:v||C===0?-1:0,"data-orientation":n,...m,ref:x,style:{outline:"none",...t.style},onMouseDown:Re(t.onMouseDown,()=>{w.current=!0}),onFocus:Re(t.onFocus,A=>{const N=!w.current;if(A.target===A.currentTarget&&N&&!v){const M=new CustomEvent(og,LU);if(A.currentTarget.dispatchEvent(M),!M.defaultPrevented){const F=S().filter(Y=>Y.focusable),I=F.find(Y=>Y.active),V=F.find(Y=>Y.id===p),G=[I,V,...F].filter(Boolean).map(Y=>Y.ref.current);oO(G,u)}}w.current=!1}),onBlur:Re(t.onBlur,()=>b(!1))})})}),iO="RovingFocusGroupItem",lO=j.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:l,...o}=t,c=Wr(),d=i||c,u=UU(iO,r),m=u.currentTabStopId===d,h=nO(r),{onFocusableItemAdd:x,onFocusableItemRemove:g,currentTabStopId:p}=u;return j.useEffect(()=>{if(n)return x(),()=>g()},[n,x,g]),e.jsx(Xj.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:e.jsx(Ye.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:s,onMouseDown:Re(t.onMouseDown,f=>{n?u.onItemFocus(d):f.preventDefault()}),onFocus:Re(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:Re(t.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){u.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const v=KU(f,u.orientation,u.dir);if(v!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let y=h().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const S=y.indexOf(f.currentTarget);y=u.loop?WU(y,S+1):y.slice(S+1)}setTimeout(()=>oO(y))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:p!=null}):l})})});lO.displayName=iO;var GU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function HU(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function KU(t,s,r){const n=HU(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return GU[n]}function oO(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function WU(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var U0=aO,z0=lO,Zj=["Enter"," "],YU=["ArrowDown","PageUp","Home"],cO=["ArrowUp","PageDown","End"],QU=[...YU,...cO],XU={ltr:[...Zj,"ArrowRight"],rtl:[...Zj,"ArrowLeft"]},ZU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ju="Menu",[Gd,JU,e9]=Yx(Ju),[Il,dO]=Zs(Ju,[e9,Ii,Dc]),vp=Ii(),uO=Dc(),[t9,$l]=Il(Ju),[s9,em]=Il(Ju),mO=t=>{const{__scopeMenu:s,open:r=!1,children:n,dir:a,onOpenChange:i,modal:l=!0}=t,o=vp(s),[c,d]=j.useState(null),u=j.useRef(!1),m=Rs(i),h=Ac(a);return j.useEffect(()=>{const x=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),e.jsx(ap,{...o,children:e.jsx(t9,{scope:s,open:r,onOpenChange:m,content:c,onContentChange:d,children:e.jsx(s9,{scope:s,onClose:j.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:h,modal:l,children:n})})})};mO.displayName=Ju;var r9="MenuAnchor",G0=j.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=vp(r);return e.jsx(Wu,{...a,...n,ref:s})});G0.displayName=r9;var H0="MenuPortal",[n9,hO]=Il(H0,{forceMount:void 0}),xO=t=>{const{__scopeMenu:s,forceMount:r,children:n,container:a}=t,i=$l(H0,s);return e.jsx(n9,{scope:s,forceMount:r,children:e.jsx(Js,{present:r||i.open,children:e.jsx(Sc,{asChild:!0,container:a,children:n})})})};xO.displayName=H0;var fn="MenuContent",[a9,K0]=Il(fn),pO=j.forwardRef((t,s)=>{const r=hO(fn,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=$l(fn,t.__scopeMenu),l=em(fn,t.__scopeMenu);return e.jsx(Gd.Provider,{scope:t.__scopeMenu,children:e.jsx(Js,{present:n||i.open,children:e.jsx(Gd.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(i9,{...a,ref:s}):e.jsx(l9,{...a,ref:s})})})})}),i9=j.forwardRef((t,s)=>{const r=$l(fn,t.__scopeMenu),n=j.useRef(null),a=jt(s,n);return j.useEffect(()=>{const i=n.current;if(i)return hp(i)},[]),e.jsx(W0,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Re(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),l9=j.forwardRef((t,s)=>{const r=$l(fn,t.__scopeMenu);return e.jsx(W0,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),o9=Pi("MenuContent.ScrollLock"),W0=j.forwardRef((t,s)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:x,disableOutsideScroll:g,...p}=t,f=$l(fn,r),v=em(fn,r),b=vp(r),y=uO(r),S=JU(r),[w,C]=j.useState(null),k=j.useRef(null),A=jt(s,k,f.onContentChange),N=j.useRef(0),M=j.useRef(""),F=j.useRef(0),I=j.useRef(null),V=j.useRef("right"),E=j.useRef(0),G=g?Xu:j.Fragment,Y=g?{as:o9,allowPinchZoom:!0}:void 0,Q=B=>{const W=M.current+B,he=S().filter(me=>!me.disabled),Se=document.activeElement,z=he.find(me=>me.ref.current===Se)?.textValue,L=he.map(me=>me.textValue),le=y9(L,W,z),Z=he.find(me=>me.textValue===le)?.ref.current;(function me(U){M.current=U,window.clearTimeout(N.current),U!==""&&(N.current=window.setTimeout(()=>me(""),1e3))})(W),Z&&setTimeout(()=>Z.focus())};j.useEffect(()=>()=>window.clearTimeout(N.current),[]),up();const T=j.useCallback(B=>V.current===I.current?.side&&N9(B,I.current?.area),[]);return e.jsx(a9,{scope:r,searchRef:M,onItemEnter:j.useCallback(B=>{T(B)&&B.preventDefault()},[T]),onItemLeave:j.useCallback(B=>{T(B)||(k.current?.focus(),C(null))},[T]),onTriggerLeave:j.useCallback(B=>{T(B)&&B.preventDefault()},[T]),pointerGraceTimerRef:F,onPointerGraceIntentChange:j.useCallback(B=>{I.current=B},[]),children:e.jsx(G,{...Y,children:e.jsx(Qu,{asChild:!0,trapped:a,onMountAutoFocus:Re(i,B=>{B.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Ml,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:x,children:e.jsx(U0,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:w,onCurrentTabStopIdChange:C,onEntryFocus:Re(c,B=>{v.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(ip,{role:"menu","aria-orientation":"vertical","data-state":OO(f.open),"data-radix-menu-content":"",dir:v.dir,...b,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:Re(p.onKeyDown,B=>{const he=B.target.closest("[data-radix-menu-content]")===B.currentTarget,Se=B.ctrlKey||B.altKey||B.metaKey,z=B.key.length===1;he&&(B.key==="Tab"&&B.preventDefault(),!Se&&z&&Q(B.key));const L=k.current;if(B.target!==L||!QU.includes(B.key))return;B.preventDefault();const Z=S().filter(me=>!me.disabled).map(me=>me.ref.current);cO.includes(B.key)&&Z.reverse(),j9(Z)}),onBlur:Re(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(N.current),M.current="")}),onPointerMove:Re(t.onPointerMove,Hd(B=>{const W=B.target,he=E.current!==B.clientX;if(B.currentTarget.contains(W)&&he){const Se=B.clientX>E.current?"right":"left";V.current=Se,E.current=B.clientX}}))})})})})})})});pO.displayName=fn;var c9="MenuGroup",Y0=j.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Ye.div,{role:"group",...n,ref:s})});Y0.displayName=c9;var d9="MenuLabel",fO=j.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Ye.div,{...n,ref:s})});fO.displayName=d9;var wh="MenuItem",p1="menu.itemSelect",yp=j.forwardRef((t,s)=>{const{disabled:r=!1,onSelect:n,...a}=t,i=j.useRef(null),l=em(wh,t.__scopeMenu),o=K0(wh,t.__scopeMenu),c=jt(s,i),d=j.useRef(!1),u=()=>{const m=i.current;if(!r&&m){const h=new CustomEvent(p1,{bubbles:!0,cancelable:!0});m.addEventListener(p1,x=>n?.(x),{once:!0}),f0(m,h),h.defaultPrevented?d.current=!1:l.onClose()}};return e.jsx(gO,{...a,ref:c,disabled:r,onClick:Re(t.onClick,u),onPointerDown:m=>{t.onPointerDown?.(m),d.current=!0},onPointerUp:Re(t.onPointerUp,m=>{d.current||m.currentTarget?.click()}),onKeyDown:Re(t.onKeyDown,m=>{const h=o.searchRef.current!=="";r||h&&m.key===" "||Zj.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});yp.displayName=wh;var gO=j.forwardRef((t,s)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=t,l=K0(wh,r),o=uO(r),c=j.useRef(null),d=jt(s,c),[u,m]=j.useState(!1),[h,x]=j.useState("");return j.useEffect(()=>{const g=c.current;g&&x((g.textContent??"").trim())},[i.children]),e.jsx(Gd.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:e.jsx(z0,{asChild:!0,...o,focusable:!n,children:e.jsx(Ye.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:Re(t.onPointerMove,Hd(g=>{n?l.onItemLeave(g):(l.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Re(t.onPointerLeave,Hd(g=>l.onItemLeave(g))),onFocus:Re(t.onFocus,()=>m(!0)),onBlur:Re(t.onBlur,()=>m(!1))})})})}),u9="MenuCheckboxItem",jO=j.forwardRef((t,s)=>{const{checked:r=!1,onCheckedChange:n,...a}=t;return e.jsx(wO,{scope:t.__scopeMenu,checked:r,children:e.jsx(yp,{role:"menuitemcheckbox","aria-checked":Sh(r)?"mixed":r,...a,ref:s,"data-state":X0(r),onSelect:Re(a.onSelect,()=>n?.(Sh(r)?!0:!r),{checkForDefaultPrevented:!1})})})});jO.displayName=u9;var vO="MenuRadioGroup",[m9,h9]=Il(vO,{value:void 0,onValueChange:()=>{}}),yO=j.forwardRef((t,s)=>{const{value:r,onValueChange:n,...a}=t,i=Rs(n);return e.jsx(m9,{scope:t.__scopeMenu,value:r,onValueChange:i,children:e.jsx(Y0,{...a,ref:s})})});yO.displayName=vO;var bO="MenuRadioItem",NO=j.forwardRef((t,s)=>{const{value:r,...n}=t,a=h9(bO,t.__scopeMenu),i=r===a.value;return e.jsx(wO,{scope:t.__scopeMenu,checked:i,children:e.jsx(yp,{role:"menuitemradio","aria-checked":i,...n,ref:s,"data-state":X0(i),onSelect:Re(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});NO.displayName=bO;var Q0="MenuItemIndicator",[wO,x9]=Il(Q0,{checked:!1}),SO=j.forwardRef((t,s)=>{const{__scopeMenu:r,forceMount:n,...a}=t,i=x9(Q0,r);return e.jsx(Js,{present:n||Sh(i.checked)||i.checked===!0,children:e.jsx(Ye.span,{...a,ref:s,"data-state":X0(i.checked)})})});SO.displayName=Q0;var p9="MenuSeparator",CO=j.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...n,ref:s})});CO.displayName=p9;var f9="MenuArrow",PO=j.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=vp(r);return e.jsx(lp,{...a,...n,ref:s})});PO.displayName=f9;var g9="MenuSub",[cke,kO]=Il(g9),dd="MenuSubTrigger",AO=j.forwardRef((t,s)=>{const r=$l(dd,t.__scopeMenu),n=em(dd,t.__scopeMenu),a=kO(dd,t.__scopeMenu),i=K0(dd,t.__scopeMenu),l=j.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},u=j.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return j.useEffect(()=>u,[u]),j.useEffect(()=>{const m=o.current;return()=>{window.clearTimeout(m),c(null)}},[o,c]),e.jsx(G0,{asChild:!0,...d,children:e.jsx(gO,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":OO(r.open),...t,ref:Wx(s,a.onTriggerChange),onClick:m=>{t.onClick?.(m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Re(t.onPointerMove,Hd(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!r.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:Re(t.onPointerLeave,Hd(m=>{u();const h=r.content?.getBoundingClientRect();if(h){const x=r.content?.dataset.side,g=x==="right",p=g?-5:5,f=h[g?"left":"right"],v=h[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+p,y:m.clientY},{x:f,y:h.top},{x:v,y:h.top},{x:v,y:h.bottom},{x:f,y:h.bottom}],side:x}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Re(t.onKeyDown,m=>{const h=i.searchRef.current!=="";t.disabled||h&&m.key===" "||XU[n.dir].includes(m.key)&&(r.onOpenChange(!0),r.content?.focus(),m.preventDefault())})})})});AO.displayName=dd;var TO="MenuSubContent",DO=j.forwardRef((t,s)=>{const r=hO(fn,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=$l(fn,t.__scopeMenu),l=em(fn,t.__scopeMenu),o=kO(TO,t.__scopeMenu),c=j.useRef(null),d=jt(s,c);return e.jsx(Gd.Provider,{scope:t.__scopeMenu,children:e.jsx(Js,{present:n||i.open,children:e.jsx(Gd.Slot,{scope:t.__scopeMenu,children:e.jsx(W0,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{l.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Re(t.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Re(t.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:Re(t.onKeyDown,u=>{const m=u.currentTarget.contains(u.target),h=ZU[l.dir].includes(u.key);m&&h&&(i.onOpenChange(!1),o.trigger?.focus(),u.preventDefault())})})})})})});DO.displayName=TO;function OO(t){return t?"open":"closed"}function Sh(t){return t==="indeterminate"}function X0(t){return Sh(t)?"indeterminate":t?"checked":"unchecked"}function j9(t){const s=document.activeElement;for(const r of t)if(r===s||(r.focus(),document.activeElement!==s))return}function v9(t,s){return t.map((r,n)=>t[(s+n)%t.length])}function y9(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,i=r?t.indexOf(r):-1;let l=v9(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==r));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function b9(t,s){const{x:r,y:n}=t;let a=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],c=s[l],d=o.x,u=o.y,m=c.x,h=c.y;u>n!=h>n&&r<(m-d)*(n-u)/(h-u)+d&&(a=!a)}return a}function N9(t,s){if(!s)return!1;const r={x:t.clientX,y:t.clientY};return b9(r,s)}function Hd(t){return s=>s.pointerType==="mouse"?t(s):void 0}var w9=mO,S9=G0,C9=xO,P9=pO,k9=Y0,A9=fO,T9=yp,D9=jO,O9=yO,E9=NO,M9=SO,R9=CO,_9=PO,I9=AO,$9=DO,bp="DropdownMenu",[F9,dke]=Zs(bp,[dO]),Mr=dO(),[L9,EO]=F9(bp),MO=t=>{const{__scopeDropdownMenu:s,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=t,c=Mr(s),d=j.useRef(null),[u,m]=Jr({prop:a,defaultProp:i??!1,onChange:l,caller:bp});return e.jsx(L9,{scope:s,triggerId:Wr(),triggerRef:d,contentId:Wr(),open:u,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(h=>!h),[m]),modal:o,children:e.jsx(w9,{...c,open:u,onOpenChange:m,dir:n,modal:o,children:r})})};MO.displayName=bp;var RO="DropdownMenuTrigger",_O=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=t,i=EO(RO,r),l=Mr(r);return e.jsx(S9,{asChild:!0,...l,children:e.jsx(Ye.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Wx(s,i.triggerRef),onPointerDown:Re(t.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Re(t.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});_O.displayName=RO;var B9="DropdownMenuPortal",IO=t=>{const{__scopeDropdownMenu:s,...r}=t,n=Mr(s);return e.jsx(C9,{...n,...r})};IO.displayName=B9;var $O="DropdownMenuContent",FO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=EO($O,r),i=Mr(r),l=j.useRef(!1);return e.jsx(P9,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:s,onCloseAutoFocus:Re(t.onCloseAutoFocus,o=>{l.current||a.triggerRef.current?.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:Re(t.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FO.displayName=$O;var V9="DropdownMenuGroup",q9=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(k9,{...a,...n,ref:s})});q9.displayName=V9;var U9="DropdownMenuLabel",LO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(A9,{...a,...n,ref:s})});LO.displayName=U9;var z9="DropdownMenuItem",BO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(T9,{...a,...n,ref:s})});BO.displayName=z9;var G9="DropdownMenuCheckboxItem",VO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(D9,{...a,...n,ref:s})});VO.displayName=G9;var H9="DropdownMenuRadioGroup",K9=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(O9,{...a,...n,ref:s})});K9.displayName=H9;var W9="DropdownMenuRadioItem",qO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(E9,{...a,...n,ref:s})});qO.displayName=W9;var Y9="DropdownMenuItemIndicator",UO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(M9,{...a,...n,ref:s})});UO.displayName=Y9;var Q9="DropdownMenuSeparator",zO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(R9,{...a,...n,ref:s})});zO.displayName=Q9;var X9="DropdownMenuArrow",Z9=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(_9,{...a,...n,ref:s})});Z9.displayName=X9;var J9="DropdownMenuSubTrigger",GO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx(I9,{...a,...n,ref:s})});GO.displayName=J9;var ez="DropdownMenuSubContent",HO=j.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Mr(r);return e.jsx($9,{...a,...n,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HO.displayName=ez;var tz=MO,sz=_O,rz=IO,KO=FO,WO=LO,YO=BO,QO=VO,XO=qO,ZO=UO,JO=zO,eE=GO,tE=HO;const Kd=tz,Wd=sz,nz=j.forwardRef(({className:t,inset:s,children:r,...n},a)=>e.jsxs(eE,{ref:a,className:_e("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...n,children:[r,e.jsx(Rl,{className:"ml-auto"})]}));nz.displayName=eE.displayName;const az=j.forwardRef(({className:t,...s},r)=>e.jsx(tE,{ref:r,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));az.displayName=tE.displayName;const _o=j.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(rz,{children:e.jsx(KO,{ref:n,sideOffset:s,className:_e("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));_o.displayName=KO.displayName;const Pr=j.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(YO,{ref:n,className:_e("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r}));Pr.displayName=YO.displayName;const iz=j.forwardRef(({className:t,children:s,checked:r,...n},a)=>e.jsxs(QO,{ref:a,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ZO,{children:e.jsx(Zx,{className:"h-4 w-4"})})}),s]}));iz.displayName=QO.displayName;const lz=j.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(XO,{ref:n,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ZO,{children:e.jsx(KT,{className:"h-2 w-2 fill-current"})})}),s]}));lz.displayName=XO.displayName;const Yd=j.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(WO,{ref:n,className:_e("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));Yd.displayName=WO.displayName;const Ni=j.forwardRef(({className:t,...s},r)=>e.jsx(JO,{ref:r,className:_e("-mx-1 my-1 h-px bg-muted",t),...s}));Ni.displayName=JO.displayName;var tm=t=>t.type==="checkbox",rl=t=>t instanceof Date,Cr=t=>t==null;const sE=t=>typeof t=="object";var Ks=t=>!Cr(t)&&!Array.isArray(t)&&sE(t)&&!rl(t),rE=t=>Ks(t)&&t.target?tm(t.target)?t.target.checked:t.target.value:t,oz=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,nE=(t,s)=>t.has(oz(s)),cz=t=>{const s=t.constructor&&t.constructor.prototype;return Ks(s)&&s.hasOwnProperty("isPrototypeOf")},Z0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ys(t){let s;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(Z0&&(t instanceof Blob||n))&&(r||Ks(t)))if(s=r?[]:{},!r&&!cz(t))s=t;else for(const a in t)t.hasOwnProperty(a)&&(s[a]=ys(t[a]));else return t;return s}var Np=t=>/^\w*$/.test(t),Ss=t=>t===void 0,wp=t=>Array.isArray(t)?t.filter(Boolean):[],J0=t=>wp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Le=(t,s,r)=>{if(!s||!Ks(t))return r;const n=(Np(s)?[s]:J0(s)).reduce((a,i)=>Cr(a)?a:a[i],t);return Ss(n)||n===t?Ss(t[s])?r:t[s]:n},Ur=t=>typeof t=="boolean",Ht=(t,s,r)=>{let n=-1;const a=Np(s)?[s]:J0(s),i=a.length,l=i-1;for(;++n<i;){const o=a[n];let c=r;if(n!==l){const d=t[o];c=Ks(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const Ch={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},dn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Sa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},eb=X.createContext(null);eb.displayName="HookFormContext";const sm=()=>X.useContext(eb),dz=t=>{const{children:s,...r}=t;return X.createElement(eb.Provider,{value:r},s)};var aE=(t,s,r,n=!0)=>{const a={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const l=i;return s._proxyFormState[l]!==dn.all&&(s._proxyFormState[l]=!n||dn.all),r&&(r[l]=!0),t[l]}});return a};const Sp=typeof window<"u"?j.useLayoutEffect:j.useEffect;function uz(t){const s=sm(),{control:r=s.control,disabled:n,name:a,exact:i}=t||{},[l,o]=X.useState(r._formState),c=X.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Sp(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!n&&o({...r._formState,...d})}}),[a,n,i]),X.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),X.useMemo(()=>aE(l,r,c.current,!1),[l,r])}var ea=t=>typeof t=="string",iE=(t,s,r,n,a)=>ea(t)?(n&&s.watch.add(t),Le(r,t,a)):Array.isArray(t)?t.map(i=>(n&&s.watch.add(i),Le(r,i))):(n&&(s.watchAll=!0),r);function mz(t){const s=sm(),{control:r=s.control,name:n,defaultValue:a,disabled:i,exact:l}=t||{},o=X.useRef(a),[c,d]=X.useState(r._getWatch(n,o.current));return Sp(()=>r._subscribe({name:n,formState:{values:!0},exact:l,callback:u=>!i&&d(iE(n,r._names,u.values||r._formValues,!1,o.current))}),[n,r,i,l]),X.useEffect(()=>r._removeUnmounted()),c}function hz(t){const s=sm(),{name:r,disabled:n,control:a=s.control,shouldUnregister:i}=t,l=nE(a._names.array,r),o=mz({control:a,name:r,defaultValue:Le(a._formValues,r,Le(a._defaultValues,r,t.defaultValue)),exact:!0}),c=uz({control:a,name:r,exact:!0}),d=X.useRef(t),u=X.useRef(a.register(r,{...t.rules,value:o,...Ur(t.disabled)?{disabled:t.disabled}:{}})),m=X.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Le(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!Le(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Le(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Le(c.validatingFields,r)},error:{enumerable:!0,get:()=>Le(c.errors,r)}}),[c,r]),h=X.useCallback(f=>u.current.onChange({target:{value:rE(f),name:r},type:Ch.CHANGE}),[r]),x=X.useCallback(()=>u.current.onBlur({target:{value:Le(a._formValues,r),name:r},type:Ch.BLUR}),[r,a._formValues]),g=X.useCallback(f=>{const v=Le(a._fields,r);v&&f&&(v._f.ref={focus:()=>f.focus&&f.focus(),select:()=>f.select&&f.select(),setCustomValidity:b=>f.setCustomValidity(b),reportValidity:()=>f.reportValidity()})},[a._fields,r]),p=X.useMemo(()=>({name:r,value:o,...Ur(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:h,onBlur:x,ref:g}),[r,n,c.disabled,h,x,g,o]);return X.useEffect(()=>{const f=a._options.shouldUnregister||i;a.register(r,{...d.current.rules,...Ur(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(b,y)=>{const S=Le(a._fields,b);S&&S._f&&(S._f.mount=y)};if(v(r,!0),f){const b=ys(Le(a._options.defaultValues,r));Ht(a._defaultValues,r,b),Ss(Le(a._formValues,r))&&Ht(a._formValues,r,b)}return!l&&a.register(r),()=>{(l?f&&!a._state.action:f)?a.unregister(r):v(r,!1)}},[r,a,l,i]),X.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),X.useMemo(()=>({field:p,formState:c,fieldState:m}),[p,c,m])}const xz=t=>t.render(hz(t));var lE=(t,s,r,n,a)=>s?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:a||!0}}:{},Ir=t=>Array.isArray(t)?t:[t],f1=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}},Jj=t=>Cr(t)||!sE(t);function xi(t,s,r=new WeakSet){if(Jj(t)||Jj(s))return t===s;if(rl(t)&&rl(s))return t.getTime()===s.getTime();const n=Object.keys(t),a=Object.keys(s);if(n.length!==a.length)return!1;if(r.has(t)||r.has(s))return!0;r.add(t),r.add(s);for(const i of n){const l=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const o=s[i];if(rl(l)&&rl(o)||Ks(l)&&Ks(o)||Array.isArray(l)&&Array.isArray(o)?!xi(l,o,r):l!==o)return!1}}return!0}var wr=t=>Ks(t)&&!Object.keys(t).length,tb=t=>t.type==="file",On=t=>typeof t=="function",Ph=t=>{if(!Z0)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},oE=t=>t.type==="select-multiple",sb=t=>t.type==="radio",pz=t=>sb(t)||tm(t),cg=t=>Ph(t)&&t.isConnected;function fz(t,s){const r=s.slice(0,-1).length;let n=0;for(;n<r;)t=Ss(t)?n++:t[s[n++]];return t}function gz(t){for(const s in t)if(t.hasOwnProperty(s)&&!Ss(t[s]))return!1;return!0}function Ls(t,s){const r=Array.isArray(s)?s:Np(s)?[s]:J0(s),n=r.length===1?t:fz(t,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Ks(n)&&wr(n)||Array.isArray(n)&&gz(n))&&Ls(t,r.slice(0,-1)),t}var cE=t=>{for(const s in t)if(On(t[s]))return!0;return!1};function kh(t,s={}){const r=Array.isArray(t);if(Ks(t)||r)for(const n in t)Array.isArray(t[n])||Ks(t[n])&&!cE(t[n])?(s[n]=Array.isArray(t[n])?[]:{},kh(t[n],s[n])):Cr(t[n])||(s[n]=!0);return s}function dE(t,s,r){const n=Array.isArray(t);if(Ks(t)||n)for(const a in t)Array.isArray(t[a])||Ks(t[a])&&!cE(t[a])?Ss(s)||Jj(r[a])?r[a]=Array.isArray(t[a])?kh(t[a],[]):{...kh(t[a])}:dE(t[a],Cr(s)?{}:s[a],r[a]):r[a]=!xi(t[a],s[a]);return r}var Yc=(t,s)=>dE(t,s,kh(s));const g1={value:!1,isValid:!1},j1={value:!0,isValid:!0};var uE=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ss(t[0].attributes.value)?Ss(t[0].value)||t[0].value===""?j1:{value:t[0].value,isValid:!0}:j1:g1}return g1},mE=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:n})=>Ss(t)?t:s?t===""?NaN:t&&+t:r&&ea(t)?new Date(t):n?n(t):t;const v1={isValid:!1,value:null};var hE=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,v1):v1;function y1(t){const s=t.ref;return tb(s)?s.files:sb(s)?hE(t.refs).value:oE(s)?[...s.selectedOptions].map(({value:r})=>r):tm(s)?uE(t.refs).value:mE(Ss(s.value)?t.ref.value:s.value,t)}var jz=(t,s,r,n)=>{const a={};for(const i of t){const l=Le(s,i);l&&Ht(a,i,l._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:n}},Ah=t=>t instanceof RegExp,Qc=t=>Ss(t)?t:Ah(t)?t.source:Ks(t)?Ah(t.value)?t.value.source:t.value:t,ao=t=>({isOnSubmit:!t||t===dn.onSubmit,isOnBlur:t===dn.onBlur,isOnChange:t===dn.onChange,isOnAll:t===dn.all,isOnTouch:t===dn.onTouched});const b1="AsyncFunction";var vz=t=>!!t&&!!t.validate&&!!(On(t.validate)&&t.validate.constructor.name===b1||Ks(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===b1)),yz=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),ev=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const So=(t,s,r,n)=>{for(const a of r||Object.keys(t)){const i=Le(t,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],a)&&!n)return!0;if(l.ref&&s(l.ref,l.name)&&!n)return!0;if(So(o,s))break}else if(Ks(o)&&So(o,s))break}}};function N1(t,s,r){const n=Le(t,r);if(n||Np(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),l=Le(s,i),o=Le(t,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};a.pop()}return{name:r}}var bz=(t,s,r,n)=>{r(t);const{name:a,...i}=t;return wr(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!n||dn.all))},Nz=(t,s,r)=>!t||!s||t===s||Ir(t).some(n=>n&&(r?n===s:n.startsWith(s)||s.startsWith(n))),wz=(t,s,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(s||t):(r?n.isOnBlur:a.isOnBlur)?!t:(r?n.isOnChange:a.isOnChange)?t:!0,Sz=(t,s)=>!wp(Le(t,s)).length&&Ls(t,s),xE=(t,s,r)=>{const n=Ir(Le(t,r));return Ht(n,"root",s[r]),Ht(t,r,n),t},lh=t=>ea(t);function w1(t,s,r="validate"){if(lh(t)||Array.isArray(t)&&t.every(lh)||Ur(t)&&!t)return{type:r,message:lh(t)?t:"",ref:s}}var Wl=t=>Ks(t)&&!Ah(t)?t:{value:t,message:""},tv=async(t,s,r,n,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:m,max:h,pattern:x,validate:g,name:p,valueAsNumber:f,mount:v}=t._f,b=Le(r,p);if(!v||s.has(p))return{};const y=o?o[0]:l,S=I=>{a&&y.reportValidity&&(y.setCustomValidity(Ur(I)?"":I||""),y.reportValidity())},w={},C=sb(l),k=tm(l),A=C||k,N=(f||tb(l))&&Ss(l.value)&&Ss(b)||Ph(l)&&l.value===""||b===""||Array.isArray(b)&&!b.length,M=lE.bind(null,p,n,w),F=(I,V,E,G=Sa.maxLength,Y=Sa.minLength)=>{const Q=I?V:E;w[p]={type:I?G:Y,message:Q,ref:l,...M(I?G:Y,Q)}};if(i?!Array.isArray(b)||!b.length:c&&(!A&&(N||Cr(b))||Ur(b)&&!b||k&&!uE(o).isValid||C&&!hE(o).isValid)){const{value:I,message:V}=lh(c)?{value:!!c,message:c}:Wl(c);if(I&&(w[p]={type:Sa.required,message:V,ref:y,...M(Sa.required,V)},!n))return S(V),w}if(!N&&(!Cr(m)||!Cr(h))){let I,V;const E=Wl(h),G=Wl(m);if(!Cr(b)&&!isNaN(b)){const Y=l.valueAsNumber||b&&+b;Cr(E.value)||(I=Y>E.value),Cr(G.value)||(V=Y<G.value)}else{const Y=l.valueAsDate||new Date(b),Q=W=>new Date(new Date().toDateString()+" "+W),T=l.type=="time",B=l.type=="week";ea(E.value)&&b&&(I=T?Q(b)>Q(E.value):B?b>E.value:Y>new Date(E.value)),ea(G.value)&&b&&(V=T?Q(b)<Q(G.value):B?b<G.value:Y<new Date(G.value))}if((I||V)&&(F(!!I,E.message,G.message,Sa.max,Sa.min),!n))return S(w[p].message),w}if((d||u)&&!N&&(ea(b)||i&&Array.isArray(b))){const I=Wl(d),V=Wl(u),E=!Cr(I.value)&&b.length>+I.value,G=!Cr(V.value)&&b.length<+V.value;if((E||G)&&(F(E,I.message,V.message),!n))return S(w[p].message),w}if(x&&!N&&ea(b)){const{value:I,message:V}=Wl(x);if(Ah(I)&&!b.match(I)&&(w[p]={type:Sa.pattern,message:V,ref:l,...M(Sa.pattern,V)},!n))return S(V),w}if(g){if(On(g)){const I=await g(b,r),V=w1(I,y);if(V&&(w[p]={...V,...M(Sa.validate,V.message)},!n))return S(V.message),w}else if(Ks(g)){let I={};for(const V in g){if(!wr(I)&&!n)break;const E=w1(await g[V](b,r),y,V);E&&(I={...E,...M(V,E.message)},S(E.message),n&&(w[p]=I))}if(!wr(I)&&(w[p]={ref:y,...I},!n))return w}}return S(!0),w};const Cz={mode:dn.onSubmit,reValidateMode:dn.onChange,shouldFocusError:!0};function Pz(t={}){let s={...Cz,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:On(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},a=Ks(s.defaultValues)||Ks(s.values)?ys(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:ys(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const h={array:f1(),state:f1()},x=s.criteriaMode===dn.all,g=ie=>be=>{clearTimeout(d),d=setTimeout(ie,be)},p=async ie=>{if(!s.disabled&&(u.isValid||m.isValid||ie)){const be=s.resolver?wr((await k()).errors):await N(n,!0);be!==r.isValid&&h.state.next({isValid:be})}},f=(ie,be)=>{!s.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((ie||Array.from(o.mount)).forEach(ke=>{ke&&(be?Ht(r.validatingFields,ke,be):Ls(r.validatingFields,ke))}),h.state.next({validatingFields:r.validatingFields,isValidating:!wr(r.validatingFields)}))},v=(ie,be=[],ke,Ge,Be=!0,Ie=!0)=>{if(Ge&&ke&&!s.disabled){if(l.action=!0,Ie&&Array.isArray(Le(n,ie))){const ct=ke(Le(n,ie),Ge.argA,Ge.argB);Be&&Ht(n,ie,ct)}if(Ie&&Array.isArray(Le(r.errors,ie))){const ct=ke(Le(r.errors,ie),Ge.argA,Ge.argB);Be&&Ht(r.errors,ie,ct),Sz(r.errors,ie)}if((u.touchedFields||m.touchedFields)&&Ie&&Array.isArray(Le(r.touchedFields,ie))){const ct=ke(Le(r.touchedFields,ie),Ge.argA,Ge.argB);Be&&Ht(r.touchedFields,ie,ct)}(u.dirtyFields||m.dirtyFields)&&(r.dirtyFields=Yc(a,i)),h.state.next({name:ie,isDirty:F(ie,be),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ht(i,ie,be)},b=(ie,be)=>{Ht(r.errors,ie,be),h.state.next({errors:r.errors})},y=ie=>{r.errors=ie,h.state.next({errors:r.errors,isValid:!1})},S=(ie,be,ke,Ge)=>{const Be=Le(n,ie);if(Be){const Ie=Le(i,ie,Ss(ke)?Le(a,ie):ke);Ss(Ie)||Ge&&Ge.defaultChecked||be?Ht(i,ie,be?Ie:y1(Be._f)):E(ie,Ie),l.mount&&p()}},w=(ie,be,ke,Ge,Be)=>{let Ie=!1,ct=!1;const Gt={name:ie};if(!s.disabled){if(!ke||Ge){(u.isDirty||m.isDirty)&&(ct=r.isDirty,r.isDirty=Gt.isDirty=F(),Ie=ct!==Gt.isDirty);const rs=xi(Le(a,ie),be);ct=!!Le(r.dirtyFields,ie),rs?Ls(r.dirtyFields,ie):Ht(r.dirtyFields,ie,!0),Gt.dirtyFields=r.dirtyFields,Ie=Ie||(u.dirtyFields||m.dirtyFields)&&ct!==!rs}if(ke){const rs=Le(r.touchedFields,ie);rs||(Ht(r.touchedFields,ie,ke),Gt.touchedFields=r.touchedFields,Ie=Ie||(u.touchedFields||m.touchedFields)&&rs!==ke)}Ie&&Be&&h.state.next(Gt)}return Ie?Gt:{}},C=(ie,be,ke,Ge)=>{const Be=Le(r.errors,ie),Ie=(u.isValid||m.isValid)&&Ur(be)&&r.isValid!==be;if(s.delayError&&ke?(c=g(()=>b(ie,ke)),c(s.delayError)):(clearTimeout(d),c=null,ke?Ht(r.errors,ie,ke):Ls(r.errors,ie)),(ke?!xi(Be,ke):Be)||!wr(Ge)||Ie){const ct={...Ge,...Ie&&Ur(be)?{isValid:be}:{},errors:r.errors,name:ie};r={...r,...ct},h.state.next(ct)}},k=async ie=>{f(ie,!0);const be=await s.resolver(i,s.context,jz(ie||o.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return f(ie),be},A=async ie=>{const{errors:be}=await k(ie);if(ie)for(const ke of ie){const Ge=Le(be,ke);Ge?Ht(r.errors,ke,Ge):Ls(r.errors,ke)}else r.errors=be;return be},N=async(ie,be,ke={valid:!0})=>{for(const Ge in ie){const Be=ie[Ge];if(Be){const{_f:Ie,...ct}=Be;if(Ie){const Gt=o.array.has(Ie.name),rs=Be._f&&vz(Be._f);rs&&u.validatingFields&&f([Ge],!0);const ve=await tv(Be,o.disabled,i,x,s.shouldUseNativeValidation&&!be,Gt);if(rs&&u.validatingFields&&f([Ge]),ve[Ie.name]&&(ke.valid=!1,be))break;!be&&(Le(ve,Ie.name)?Gt?xE(r.errors,ve,Ie.name):Ht(r.errors,Ie.name,ve[Ie.name]):Ls(r.errors,Ie.name))}!wr(ct)&&await N(ct,be,ke)}}return ke.valid},M=()=>{for(const ie of o.unMount){const be=Le(n,ie);be&&(be._f.refs?be._f.refs.every(ke=>!cg(ke)):!cg(be._f.ref))&&me(ie)}o.unMount=new Set},F=(ie,be)=>!s.disabled&&(ie&&be&&Ht(i,ie,be),!xi(W(),a)),I=(ie,be,ke)=>iE(ie,o,{...l.mount?i:Ss(be)?a:ea(ie)?{[ie]:be}:be},ke,be),V=ie=>wp(Le(l.mount?i:a,ie,s.shouldUnregister?Le(a,ie,[]):[])),E=(ie,be,ke={})=>{const Ge=Le(n,ie);let Be=be;if(Ge){const Ie=Ge._f;Ie&&(!Ie.disabled&&Ht(i,ie,mE(be,Ie)),Be=Ph(Ie.ref)&&Cr(be)?"":be,oE(Ie.ref)?[...Ie.ref.options].forEach(ct=>ct.selected=Be.includes(ct.value)):Ie.refs?tm(Ie.ref)?Ie.refs.forEach(ct=>{(!ct.defaultChecked||!ct.disabled)&&(Array.isArray(Be)?ct.checked=!!Be.find(Gt=>Gt===ct.value):ct.checked=Be===ct.value||!!Be)}):Ie.refs.forEach(ct=>ct.checked=ct.value===Be):tb(Ie.ref)?Ie.ref.value="":(Ie.ref.value=Be,Ie.ref.type||h.state.next({name:ie,values:ys(i)})))}(ke.shouldDirty||ke.shouldTouch)&&w(ie,Be,ke.shouldTouch,ke.shouldDirty,!0),ke.shouldValidate&&B(ie)},G=(ie,be,ke)=>{for(const Ge in be){if(!be.hasOwnProperty(Ge))return;const Be=be[Ge],Ie=ie+"."+Ge,ct=Le(n,Ie);(o.array.has(ie)||Ks(Be)||ct&&!ct._f)&&!rl(Be)?G(Ie,Be,ke):E(Ie,Be,ke)}},Y=(ie,be,ke={})=>{const Ge=Le(n,ie),Be=o.array.has(ie),Ie=ys(be);Ht(i,ie,Ie),Be?(h.array.next({name:ie,values:ys(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&ke.shouldDirty&&h.state.next({name:ie,dirtyFields:Yc(a,i),isDirty:F(ie,Ie)})):Ge&&!Ge._f&&!Cr(Ie)?G(ie,Ie,ke):E(ie,Ie,ke),ev(ie,o)&&h.state.next({...r}),h.state.next({name:l.mount?ie:void 0,values:ys(i)})},Q=async ie=>{l.mount=!0;const be=ie.target;let ke=be.name,Ge=!0;const Be=Le(n,ke),Ie=rs=>{Ge=Number.isNaN(rs)||rl(rs)&&isNaN(rs.getTime())||xi(rs,Le(i,ke,rs))},ct=ao(s.mode),Gt=ao(s.reValidateMode);if(Be){let rs,ve;const lt=be.type?y1(Be._f):rE(ie),ms=ie.type===Ch.BLUR||ie.type===Ch.FOCUS_OUT,Fs=!yz(Be._f)&&!s.resolver&&!Le(r.errors,ke)&&!Be._f.deps||wz(ms,Le(r.touchedFields,ke),r.isSubmitted,Gt,ct),ti=ev(ke,o,ms);Ht(i,ke,lt),ms?(Be._f.onBlur&&Be._f.onBlur(ie),c&&c(0)):Be._f.onChange&&Be._f.onChange(ie);const si=w(ke,lt,ms),ym=!wr(si)||ti;if(!ms&&h.state.next({name:ke,type:ie.type,values:ys(i)}),Fs)return(u.isValid||m.isValid)&&(s.mode==="onBlur"?ms&&p():ms||p()),ym&&h.state.next({name:ke,...ti?{}:si});if(!ms&&ti&&h.state.next({...r}),s.resolver){const{errors:ri}=await k([ke]);if(Ie(lt),Ge){const ni=N1(r.errors,n,ke),bm=N1(ri,n,ni.name||ke);rs=bm.error,ke=bm.name,ve=wr(ri)}}else f([ke],!0),rs=(await tv(Be,o.disabled,i,x,s.shouldUseNativeValidation))[ke],f([ke]),Ie(lt),Ge&&(rs?ve=!1:(u.isValid||m.isValid)&&(ve=await N(n,!0)));Ge&&(Be._f.deps&&B(Be._f.deps),C(ke,ve,rs,si))}},T=(ie,be)=>{if(Le(r.errors,be)&&ie.focus)return ie.focus(),1},B=async(ie,be={})=>{let ke,Ge;const Be=Ir(ie);if(s.resolver){const Ie=await A(Ss(ie)?ie:Be);ke=wr(Ie),Ge=ie?!Be.some(ct=>Le(Ie,ct)):ke}else ie?(Ge=(await Promise.all(Be.map(async Ie=>{const ct=Le(n,Ie);return await N(ct&&ct._f?{[Ie]:ct}:ct)}))).every(Boolean),!(!Ge&&!r.isValid)&&p()):Ge=ke=await N(n);return h.state.next({...!ea(ie)||(u.isValid||m.isValid)&&ke!==r.isValid?{}:{name:ie},...s.resolver||!ie?{isValid:ke}:{},errors:r.errors}),be.shouldFocus&&!Ge&&So(n,T,ie?Be:o.mount),Ge},W=ie=>{const be={...l.mount?i:a};return Ss(ie)?be:ea(ie)?Le(be,ie):ie.map(ke=>Le(be,ke))},he=(ie,be)=>({invalid:!!Le((be||r).errors,ie),isDirty:!!Le((be||r).dirtyFields,ie),error:Le((be||r).errors,ie),isValidating:!!Le(r.validatingFields,ie),isTouched:!!Le((be||r).touchedFields,ie)}),Se=ie=>{ie&&Ir(ie).forEach(be=>Ls(r.errors,be)),h.state.next({errors:ie?r.errors:{}})},z=(ie,be,ke)=>{const Ge=(Le(n,ie,{_f:{}})._f||{}).ref,Be=Le(r.errors,ie)||{},{ref:Ie,message:ct,type:Gt,...rs}=Be;Ht(r.errors,ie,{...rs,...be,ref:Ge}),h.state.next({name:ie,errors:r.errors,isValid:!1}),ke&&ke.shouldFocus&&Ge&&Ge.focus&&Ge.focus()},L=(ie,be)=>On(ie)?h.state.subscribe({next:ke=>ie(I(void 0,be),ke)}):I(ie,be,!0),le=ie=>h.state.subscribe({next:be=>{Nz(ie.name,be.name,ie.exact)&&bz(be,ie.formState||u,Mt,ie.reRenderRoot)&&ie.callback({values:{...i},...r,...be})}}).unsubscribe,Z=ie=>(l.mount=!0,m={...m,...ie.formState},le({...ie,formState:m})),me=(ie,be={})=>{for(const ke of ie?Ir(ie):o.mount)o.mount.delete(ke),o.array.delete(ke),be.keepValue||(Ls(n,ke),Ls(i,ke)),!be.keepError&&Ls(r.errors,ke),!be.keepDirty&&Ls(r.dirtyFields,ke),!be.keepTouched&&Ls(r.touchedFields,ke),!be.keepIsValidating&&Ls(r.validatingFields,ke),!s.shouldUnregister&&!be.keepDefaultValue&&Ls(a,ke);h.state.next({values:ys(i)}),h.state.next({...r,...be.keepDirty?{isDirty:F()}:{}}),!be.keepIsValid&&p()},U=({disabled:ie,name:be})=>{(Ur(ie)&&l.mount||ie||o.disabled.has(be))&&(ie?o.disabled.add(be):o.disabled.delete(be))},je=(ie,be={})=>{let ke=Le(n,ie);const Ge=Ur(be.disabled)||Ur(s.disabled);return Ht(n,ie,{...ke||{},_f:{...ke&&ke._f?ke._f:{ref:{name:ie}},name:ie,mount:!0,...be}}),o.mount.add(ie),ke?U({disabled:Ur(be.disabled)?be.disabled:s.disabled,name:ie}):S(ie,!0,be.value),{...Ge?{disabled:be.disabled||s.disabled}:{},...s.progressive?{required:!!be.required,min:Qc(be.min),max:Qc(be.max),minLength:Qc(be.minLength),maxLength:Qc(be.maxLength),pattern:Qc(be.pattern)}:{},name:ie,onChange:Q,onBlur:Q,ref:Be=>{if(Be){je(ie,be),ke=Le(n,ie);const Ie=Ss(Be.value)&&Be.querySelectorAll&&Be.querySelectorAll("input,select,textarea")[0]||Be,ct=pz(Ie),Gt=ke._f.refs||[];if(ct?Gt.find(rs=>rs===Ie):Ie===ke._f.ref)return;Ht(n,ie,{_f:{...ke._f,...ct?{refs:[...Gt.filter(cg),Ie,...Array.isArray(Le(a,ie))?[{}]:[]],ref:{type:Ie.type,name:ie}}:{ref:Ie}}}),S(ie,!1,void 0,Ie)}else ke=Le(n,ie,{}),ke._f&&(ke._f.mount=!1),(s.shouldUnregister||be.shouldUnregister)&&!(nE(o.array,ie)&&l.action)&&o.unMount.add(ie)}}},ye=()=>s.shouldFocusError&&So(n,T,o.mount),ae=ie=>{Ur(ie)&&(h.state.next({disabled:ie}),So(n,(be,ke)=>{const Ge=Le(n,ke);Ge&&(be.disabled=Ge._f.disabled||ie,Array.isArray(Ge._f.refs)&&Ge._f.refs.forEach(Be=>{Be.disabled=Ge._f.disabled||ie}))},0,!1))},pe=(ie,be)=>async ke=>{let Ge;ke&&(ke.preventDefault&&ke.preventDefault(),ke.persist&&ke.persist());let Be=ys(i);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:Ie,values:ct}=await k();r.errors=Ie,Be=ys(ct)}else await N(n);if(o.disabled.size)for(const Ie of o.disabled)Ls(Be,Ie);if(Ls(r.errors,"root"),wr(r.errors)){h.state.next({errors:{}});try{await ie(Be,ke)}catch(Ie){Ge=Ie}}else be&&await be({...r.errors},ke),ye(),setTimeout(ye);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wr(r.errors)&&!Ge,submitCount:r.submitCount+1,errors:r.errors}),Ge)throw Ge},Je=(ie,be={})=>{Le(n,ie)&&(Ss(be.defaultValue)?Y(ie,ys(Le(a,ie))):(Y(ie,be.defaultValue),Ht(a,ie,ys(be.defaultValue))),be.keepTouched||Ls(r.touchedFields,ie),be.keepDirty||(Ls(r.dirtyFields,ie),r.isDirty=be.defaultValue?F(ie,ys(Le(a,ie))):F()),be.keepError||(Ls(r.errors,ie),u.isValid&&p()),h.state.next({...r}))},et=(ie,be={})=>{const ke=ie?ys(ie):a,Ge=ys(ke),Be=wr(ie),Ie=Be?a:Ge;if(be.keepDefaultValues||(a=ke),!be.keepValues){if(be.keepDirtyValues){const ct=new Set([...o.mount,...Object.keys(Yc(a,i))]);for(const Gt of Array.from(ct))Le(r.dirtyFields,Gt)?Ht(Ie,Gt,Le(i,Gt)):Y(Gt,Le(Ie,Gt))}else{if(Z0&&Ss(ie))for(const ct of o.mount){const Gt=Le(n,ct);if(Gt&&Gt._f){const rs=Array.isArray(Gt._f.refs)?Gt._f.refs[0]:Gt._f.ref;if(Ph(rs)){const ve=rs.closest("form");if(ve){ve.reset();break}}}}if(be.keepFieldsRef)for(const ct of o.mount)Y(ct,Le(Ie,ct));else n={}}i=s.shouldUnregister?be.keepDefaultValues?ys(a):{}:ys(Ie),h.array.next({values:{...Ie}}),h.state.next({values:{...Ie}})}o={mount:be.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!be.keepIsValid||!!be.keepDirtyValues,l.watch=!!s.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?r.submitCount:0,isDirty:Be?!1:be.keepDirty?r.isDirty:!!(be.keepDefaultValues&&!xi(ie,a)),isSubmitted:be.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Be?{}:be.keepDirtyValues?be.keepDefaultValues&&i?Yc(a,i):r.dirtyFields:be.keepDefaultValues&&ie?Yc(a,ie):be.keepDirty?r.dirtyFields:{},touchedFields:be.keepTouched?r.touchedFields:{},errors:be.keepErrors?r.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Pe=(ie,be)=>et(On(ie)?ie(i):ie,be),mt=(ie,be={})=>{const ke=Le(n,ie),Ge=ke&&ke._f;if(Ge){const Be=Ge.refs?Ge.refs[0]:Ge.ref;Be.focus&&(Be.focus(),be.shouldSelect&&On(Be.select)&&Be.select())}},Mt=ie=>{r={...r,...ie}},lr={control:{register:je,unregister:me,getFieldState:he,handleSubmit:pe,setError:z,_subscribe:le,_runSchema:k,_focusError:ye,_getWatch:I,_getDirty:F,_setValid:p,_setFieldArray:v,_setDisabledField:U,_setErrors:y,_getFieldArray:V,_reset:et,_resetDefaultValues:()=>On(s.defaultValues)&&s.defaultValues().then(ie=>{Pe(ie,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:ae,_subjects:h,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(ie){l=ie},get _defaultValues(){return a},get _names(){return o},set _names(ie){o=ie},get _formState(){return r},get _options(){return s},set _options(ie){s={...s,...ie}}},subscribe:Z,trigger:B,register:je,handleSubmit:pe,watch:L,setValue:Y,getValues:W,reset:Pe,resetField:Je,clearErrors:Se,unregister:me,setError:z,setFocus:mt,getFieldState:he};return{...lr,formControl:lr}}var li=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(Math.random()*16+t)%16|0;return(s=="x"?r:r&3|8).toString(16)})},dg=(t,s,r={})=>r.shouldFocus||Ss(r.shouldFocus)?r.focusName||`${t}.${Ss(r.focusIndex)?s:r.focusIndex}.`:"",ug=(t,s)=>[...t,...Ir(s)],mg=t=>Array.isArray(t)?t.map(()=>{}):void 0;function hg(t,s,r){return[...t.slice(0,s),...Ir(r),...t.slice(s)]}var xg=(t,s,r)=>Array.isArray(t)?(Ss(t[r])&&(t[r]=void 0),t.splice(r,0,t.splice(s,1)[0]),t):[],pg=(t,s)=>[...Ir(s),...Ir(t)];function kz(t,s){let r=0;const n=[...t];for(const a of s)n.splice(a-r,1),r++;return wp(n).length?n:[]}var fg=(t,s)=>Ss(s)?[]:kz(t,Ir(s).sort((r,n)=>r-n)),gg=(t,s,r)=>{[t[s],t[r]]=[t[r],t[s]]},S1=(t,s,r)=>(t[s]=r,t);function Az(t){const s=sm(),{control:r=s.control,name:n,keyName:a="id",shouldUnregister:i,rules:l}=t,[o,c]=X.useState(r._getFieldArray(n)),d=X.useRef(r._getFieldArray(n).map(li)),u=X.useRef(o),m=X.useRef(n),h=X.useRef(!1);m.current=n,u.current=o,r._names.array.add(n),l&&r.register(n,l),Sp(()=>r._subjects.array.subscribe({next:({values:C,name:k})=>{if(k===m.current||!k){const A=Le(C,m.current);Array.isArray(A)&&(c(A),d.current=A.map(li))}}}).unsubscribe,[r]);const x=X.useCallback(C=>{h.current=!0,r._setFieldArray(n,C)},[r,n]),g=(C,k)=>{const A=Ir(ys(C)),N=ug(r._getFieldArray(n),A);r._names.focus=dg(n,N.length-1,k),d.current=ug(d.current,A.map(li)),x(N),c(N),r._setFieldArray(n,N,ug,{argA:mg(C)})},p=(C,k)=>{const A=Ir(ys(C)),N=pg(r._getFieldArray(n),A);r._names.focus=dg(n,0,k),d.current=pg(d.current,A.map(li)),x(N),c(N),r._setFieldArray(n,N,pg,{argA:mg(C)})},f=C=>{const k=fg(r._getFieldArray(n),C);d.current=fg(d.current,C),x(k),c(k),!Array.isArray(Le(r._fields,n))&&Ht(r._fields,n,void 0),r._setFieldArray(n,k,fg,{argA:C})},v=(C,k,A)=>{const N=Ir(ys(k)),M=hg(r._getFieldArray(n),C,N);r._names.focus=dg(n,C,A),d.current=hg(d.current,C,N.map(li)),x(M),c(M),r._setFieldArray(n,M,hg,{argA:C,argB:mg(k)})},b=(C,k)=>{const A=r._getFieldArray(n);gg(A,C,k),gg(d.current,C,k),x(A),c(A),r._setFieldArray(n,A,gg,{argA:C,argB:k},!1)},y=(C,k)=>{const A=r._getFieldArray(n);xg(A,C,k),xg(d.current,C,k),x(A),c(A),r._setFieldArray(n,A,xg,{argA:C,argB:k},!1)},S=(C,k)=>{const A=ys(k),N=S1(r._getFieldArray(n),C,A);d.current=[...N].map((M,F)=>!M||F===C?li():d.current[F]),x(N),c([...N]),r._setFieldArray(n,N,S1,{argA:C,argB:A},!0,!1)},w=C=>{const k=Ir(ys(C));d.current=k.map(li),x([...k]),c([...k]),r._setFieldArray(n,[...k],A=>A,{},!0,!1)};return X.useEffect(()=>{if(r._state.action=!1,ev(n,r._names)&&r._subjects.state.next({...r._formState}),h.current&&(!ao(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!ao(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(C=>{const k=Le(C.errors,n),A=Le(r._formState.errors,n);(A?!k&&A.type||k&&(A.type!==k.type||A.message!==k.message):k&&k.type)&&(k?Ht(r._formState.errors,n,k):Ls(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const C=Le(r._fields,n);C&&C._f&&!(ao(r._options.reValidateMode).isOnSubmit&&ao(r._options.mode).isOnSubmit)&&tv(C,r._names.disabled,r._formValues,r._options.criteriaMode===dn.all,r._options.shouldUseNativeValidation,!0).then(k=>!wr(k)&&r._subjects.state.next({errors:xE(r._formState.errors,k,n)}))}r._subjects.state.next({name:n,values:ys(r._formValues)}),r._names.focus&&So(r._fields,(C,k)=>{if(r._names.focus&&k.startsWith(r._names.focus)&&C.focus)return C.focus(),1}),r._names.focus="",r._setValid(),h.current=!1},[o,n,r]),X.useEffect(()=>(!Le(r._formValues,n)&&r._setFieldArray(n),()=>{const C=(k,A)=>{const N=Le(r._fields,k);N&&N._f&&(N._f.mount=A)};r._options.shouldUnregister||i?r.unregister(n):C(n,!1)}),[n,r,a,i]),{swap:X.useCallback(b,[x,n,r]),move:X.useCallback(y,[x,n,r]),prepend:X.useCallback(p,[x,n,r]),append:X.useCallback(g,[x,n,r]),remove:X.useCallback(f,[x,n,r]),insert:X.useCallback(v,[x,n,r]),update:X.useCallback(S,[x,n,r]),replace:X.useCallback(w,[x,n,r]),fields:X.useMemo(()=>o.map((C,k)=>({...C,[a]:d.current[k]||li()})),[o,a])}}function Ft(t={}){const s=X.useRef(void 0),r=X.useRef(void 0),[n,a]=X.useState({isDirty:!1,isValidating:!1,isLoading:On(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:On(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:n},t.defaultValues&&!On(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=Pz(t);s.current={...o,formState:n}}const i=s.current.control;return i._options=t,Sp(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),X.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),X.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),X.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),X.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),X.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),X.useEffect(()=>{t.values&&!xi(t.values,r.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=t.values,a(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),X.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=aE(n,i),s.current}const C1=(t,s,r)=>{if(t&&"reportValidity"in t){const n=Le(r,s);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},pE=(t,s)=>{for(const r in s.fields){const n=s.fields[r];n&&n.ref&&"reportValidity"in n.ref?C1(n.ref,r,t):n.refs&&n.refs.forEach(a=>C1(a,r,t))}},Tz=(t,s)=>{s.shouldUseNativeValidation&&pE(t,s);const r={};for(const n in t){const a=Le(s.fields,n),i=Object.assign(t[n]||{},{ref:a&&a.ref});if(Dz(s.names||Object.keys(t),n)){const l=Object.assign({},Le(r,n));Ht(l,"root",i),Ht(r,n,l)}else Ht(r,n,i)}return r},Dz=(t,s)=>t.some(r=>r.startsWith(s+"."));var Oz=function(t,s){for(var r={};t.length;){var n=t[0],a=n.code,i=n.message,l=n.path.join(".");if(!r[l])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[l]={message:o.message,type:o.code}}else r[l]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(m){return t.push(m)})}),s){var c=r[l].types,d=c&&c[n.code];r[l]=lE(l,s,r,a,d?[].concat(d,n.message):n.message)}t.shift()}return r},es=function(t,s,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,s)).then(function(d){return i.shouldUseNativeValidation&&pE({},i),{errors:{},values:r.raw?n:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o?.errors)}(l))return{values:{},errors:Tz(Oz(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},Vt;(function(t){t.assertEqual=a=>{};function s(a){}t.assertIs=s;function r(a){throw new Error}t.assertNever=r,t.arrayToEnum=a=>{const i={};for(const l of a)i[l]=l;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),l={};for(const o of i)l[o]=a[o];return t.objectValues(l)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&i.push(l);return i},t.find=(a,i)=>{for(const l of a)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Vt||(Vt={}));var P1;(function(t){t.mergeShapes=(s,r)=>({...s,...r})})(P1||(P1={}));const tt=Vt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mi=t=>{switch(typeof t){case"undefined":return tt.undefined;case"string":return tt.string;case"number":return Number.isNaN(t)?tt.nan:tt.number;case"boolean":return tt.boolean;case"function":return tt.function;case"bigint":return tt.bigint;case"symbol":return tt.symbol;case"object":return Array.isArray(t)?tt.array:t===null?tt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?tt.promise:typeof Map<"u"&&t instanceof Map?tt.map:typeof Set<"u"&&t instanceof Set?tt.set:typeof Date<"u"&&t instanceof Date?tt.date:tt.object;default:return tt.unknown}},$e=Vt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ha extends Error{get errors(){return this.issues}constructor(s){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=s}format(s){const r=s||function(i){return i.message},n={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)n._errors.push(r(l));else{let o=n,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(r(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return a(this),n}static assert(s){if(!(s instanceof Ha))throw new Error(`Not a ZodError: ${s}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Vt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(s=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(s(a))}else n.push(s(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ha.create=t=>new Ha(t);const sv=(t,s)=>{let r;switch(t.code){case $e.invalid_type:t.received===tt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case $e.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Vt.jsonStringifyReplacer)}`;break;case $e.unrecognized_keys:r=`Unrecognized key(s) in object: ${Vt.joinValues(t.keys,", ")}`;break;case $e.invalid_union:r="Invalid input";break;case $e.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Vt.joinValues(t.options)}`;break;case $e.invalid_enum_value:r=`Invalid enum value. Expected ${Vt.joinValues(t.options)}, received '${t.received}'`;break;case $e.invalid_arguments:r="Invalid function arguments";break;case $e.invalid_return_type:r="Invalid function return type";break;case $e.invalid_date:r="Invalid date";break;case $e.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Vt.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case $e.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case $e.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case $e.custom:r="Invalid input";break;case $e.invalid_intersection_types:r="Intersection results could not be merged";break;case $e.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case $e.not_finite:r="Number must be finite";break;default:r=s.defaultError,Vt.assertNever(t)}return{message:r}};let Ez=sv;function Mz(){return Ez}const Rz=t=>{const{data:s,path:r,errorMaps:n,issueData:a}=t,i=[...r,...a.path||[]],l={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:s,defaultError:o}).message;return{...a,path:i,message:o}};function Qe(t,s){const r=Mz(),n=Rz({issueData:s,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===sv?void 0:sv].filter(a=>!!a)});t.common.issues.push(n)}class en{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(s,r){const n=[];for(const a of r){if(a.status==="aborted")return St;a.status==="dirty"&&s.dirty(),n.push(a.value)}return{status:s.value,value:n}}static async mergeObjectAsync(s,r){const n=[];for(const a of r){const i=await a.key,l=await a.value;n.push({key:i,value:l})}return en.mergeObjectSync(s,n)}static mergeObjectSync(s,r){const n={};for(const a of r){const{key:i,value:l}=a;if(i.status==="aborted"||l.status==="aborted")return St;i.status==="dirty"&&s.dirty(),l.status==="dirty"&&s.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(n[i.value]=l.value)}return{status:s.value,value:n}}}const St=Object.freeze({status:"aborted"}),ud=t=>({status:"dirty",value:t}),yn=t=>({status:"valid",value:t}),k1=t=>t.status==="aborted",A1=t=>t.status==="dirty",Io=t=>t.status==="valid",Th=t=>typeof Promise<"u"&&t instanceof Promise;var at;(function(t){t.errToObj=s=>typeof s=="string"?{message:s}:s||{},t.toString=s=>typeof s=="string"?s:s?.message})(at||(at={}));class Oi{constructor(s,r,n,a){this._cachedPath=[],this.parent=s,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const T1=(t,s)=>{if(Io(s))return{success:!0,data:s.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ha(t.common.issues);return this._error=r,this._error}}};function Rt(t){if(!t)return{};const{errorMap:s,invalid_type_error:r,required_error:n,description:a}=t;if(s&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return s?{errorMap:s,description:a}:{errorMap:(l,o)=>{const{message:c}=t;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??n??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??r??o.defaultError}},description:a}}class Bt{get description(){return this._def.description}_getType(s){return mi(s.data)}_getOrReturnCtx(s,r){return r||{common:s.parent.common,data:s.data,parsedType:mi(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}_processInputParams(s){return{status:new en,ctx:{common:s.parent.common,data:s.data,parsedType:mi(s.data),schemaErrorMap:this._def.errorMap,path:s.path,parent:s.parent}}}_parseSync(s){const r=this._parse(s);if(Th(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(s){const r=this._parse(s);return Promise.resolve(r)}parse(s,r){const n=this.safeParse(s,r);if(n.success)return n.data;throw n.error}safeParse(s,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:mi(s)},a=this._parseSync({data:s,path:n.path,parent:n});return T1(n,a)}"~validate"(s){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:mi(s)};if(!this["~standard"].async)try{const n=this._parseSync({data:s,path:[],parent:r});return Io(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:s,path:[],parent:r}).then(n=>Io(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(s,r){const n=await this.safeParseAsync(s,r);if(n.success)return n.data;throw n.error}async safeParseAsync(s,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:s,parsedType:mi(s)},a=this._parse({data:s,path:n.path,parent:n}),i=await(Th(a)?a:Promise.resolve(a));return T1(n,i)}refine(s,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const l=s(a),o=()=>i.addIssue({code:$e.custom,...n(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(s,r){return this._refinement((n,a)=>s(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(s){return new Lo({schema:this,typeName:Ct.ZodEffects,effect:{type:"refinement",refinement:s}})}superRefine(s){return this._refinement(s)}constructor(s){this.spa=this.safeParseAsync,this._def=s,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return wi.create(this,this._def)}nullable(){return Bo.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ia.create(this)}promise(){return Mh.create(this,this._def)}or(s){return Oh.create([this,s],this._def)}and(s){return Eh.create(this,s,this._def)}transform(s){return new Lo({...Rt(this._def),schema:this,typeName:Ct.ZodEffects,effect:{type:"transform",transform:s}})}default(s){const r=typeof s=="function"?s:()=>s;return new av({...Rt(this._def),innerType:this,defaultValue:r,typeName:Ct.ZodDefault})}brand(){return new r7({typeName:Ct.ZodBranded,type:this,...Rt(this._def)})}catch(s){const r=typeof s=="function"?s:()=>s;return new iv({...Rt(this._def),innerType:this,catchValue:r,typeName:Ct.ZodCatch})}describe(s){const r=this.constructor;return new r({...this._def,description:s})}pipe(s){return rb.create(this,s)}readonly(){return lv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _z=/^c[^\s-]{8,}$/i,Iz=/^[0-9a-z]+$/,$z=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Fz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Lz=/^[a-z0-9_-]{21}$/i,Bz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Vz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Uz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let jg;const zz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Hz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Wz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Yz=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qz=new RegExp(`^${fE}$`);function gE(t){let s="[0-5]\\d";t.precision?s=`${s}\\.\\d{${t.precision}}`:t.precision==null&&(s=`${s}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${s})${r}`}function Xz(t){return new RegExp(`^${gE(t)}$`)}function Zz(t){let s=`${fE}T${gE(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),s=`${s}(${r.join("|")})`,new RegExp(`^${s}$`)}function Jz(t,s){return!!((s==="v4"||!s)&&zz.test(t)||(s==="v6"||!s)&&Hz.test(t))}function e7(t,s){if(!Bz.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||s&&a.alg!==s)}catch{return!1}}function t7(t,s){return!!((s==="v4"||!s)&&Gz.test(t)||(s==="v6"||!s)&&Kz.test(t))}class Oa extends Bt{_parse(s){if(this._def.coerce&&(s.data=String(s.data)),this._getType(s)!==tt.string){const i=this._getOrReturnCtx(s);return Qe(i,{code:$e.invalid_type,expected:tt.string,received:i.parsedType}),St}const n=new en;let a;for(const i of this._def.checks)if(i.kind==="min")s.data.length<i.value&&(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")s.data.length>i.value&&(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const l=s.data.length>i.value,o=s.data.length<i.value;(l||o)&&(a=this._getOrReturnCtx(s,a),l?Qe(a,{code:$e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Qe(a,{code:$e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")qz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"email",code:$e.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")jg||(jg=new RegExp(Uz,"u")),jg.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"emoji",code:$e.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Fz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"uuid",code:$e.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Lz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"nanoid",code:$e.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")_z.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"cuid",code:$e.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Iz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"cuid2",code:$e.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")$z.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"ulid",code:$e.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(s.data)}catch{a=this._getOrReturnCtx(s,a),Qe(a,{validation:"url",code:$e.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"regex",code:$e.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?s.data=s.data.trim():i.kind==="includes"?s.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?s.data=s.data.toLowerCase():i.kind==="toUpperCase"?s.data=s.data.toUpperCase():i.kind==="startsWith"?s.data.startsWith(i.value)||(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?s.data.endsWith(i.value)||(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Zz(i).test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Qz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Xz(i).test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Vz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"duration",code:$e.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Jz(s.data,i.version)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"ip",code:$e.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?e7(s.data,i.alg)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"jwt",code:$e.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?t7(s.data,i.version)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"cidr",code:$e.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Wz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"base64",code:$e.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Yz.test(s.data)||(a=this._getOrReturnCtx(s,a),Qe(a,{validation:"base64url",code:$e.invalid_string,message:i.message}),n.dirty()):Vt.assertNever(i);return{status:n.value,value:s.data}}_regex(s,r,n){return this.refinement(a=>s.test(a),{validation:r,code:$e.invalid_string,...at.errToObj(n)})}_addCheck(s){return new Oa({...this._def,checks:[...this._def.checks,s]})}email(s){return this._addCheck({kind:"email",...at.errToObj(s)})}url(s){return this._addCheck({kind:"url",...at.errToObj(s)})}emoji(s){return this._addCheck({kind:"emoji",...at.errToObj(s)})}uuid(s){return this._addCheck({kind:"uuid",...at.errToObj(s)})}nanoid(s){return this._addCheck({kind:"nanoid",...at.errToObj(s)})}cuid(s){return this._addCheck({kind:"cuid",...at.errToObj(s)})}cuid2(s){return this._addCheck({kind:"cuid2",...at.errToObj(s)})}ulid(s){return this._addCheck({kind:"ulid",...at.errToObj(s)})}base64(s){return this._addCheck({kind:"base64",...at.errToObj(s)})}base64url(s){return this._addCheck({kind:"base64url",...at.errToObj(s)})}jwt(s){return this._addCheck({kind:"jwt",...at.errToObj(s)})}ip(s){return this._addCheck({kind:"ip",...at.errToObj(s)})}cidr(s){return this._addCheck({kind:"cidr",...at.errToObj(s)})}datetime(s){return typeof s=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:s}):this._addCheck({kind:"datetime",precision:typeof s?.precision>"u"?null:s?.precision,offset:s?.offset??!1,local:s?.local??!1,...at.errToObj(s?.message)})}date(s){return this._addCheck({kind:"date",message:s})}time(s){return typeof s=="string"?this._addCheck({kind:"time",precision:null,message:s}):this._addCheck({kind:"time",precision:typeof s?.precision>"u"?null:s?.precision,...at.errToObj(s?.message)})}duration(s){return this._addCheck({kind:"duration",...at.errToObj(s)})}regex(s,r){return this._addCheck({kind:"regex",regex:s,...at.errToObj(r)})}includes(s,r){return this._addCheck({kind:"includes",value:s,position:r?.position,...at.errToObj(r?.message)})}startsWith(s,r){return this._addCheck({kind:"startsWith",value:s,...at.errToObj(r)})}endsWith(s,r){return this._addCheck({kind:"endsWith",value:s,...at.errToObj(r)})}min(s,r){return this._addCheck({kind:"min",value:s,...at.errToObj(r)})}max(s,r){return this._addCheck({kind:"max",value:s,...at.errToObj(r)})}length(s,r){return this._addCheck({kind:"length",value:s,...at.errToObj(r)})}nonempty(s){return this.min(1,at.errToObj(s))}trim(){return new Oa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Oa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Oa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(s=>s.kind==="datetime")}get isDate(){return!!this._def.checks.find(s=>s.kind==="date")}get isTime(){return!!this._def.checks.find(s=>s.kind==="time")}get isDuration(){return!!this._def.checks.find(s=>s.kind==="duration")}get isEmail(){return!!this._def.checks.find(s=>s.kind==="email")}get isURL(){return!!this._def.checks.find(s=>s.kind==="url")}get isEmoji(){return!!this._def.checks.find(s=>s.kind==="emoji")}get isUUID(){return!!this._def.checks.find(s=>s.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(s=>s.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(s=>s.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(s=>s.kind==="cuid2")}get isULID(){return!!this._def.checks.find(s=>s.kind==="ulid")}get isIP(){return!!this._def.checks.find(s=>s.kind==="ip")}get isCIDR(){return!!this._def.checks.find(s=>s.kind==="cidr")}get isBase64(){return!!this._def.checks.find(s=>s.kind==="base64")}get isBase64url(){return!!this._def.checks.find(s=>s.kind==="base64url")}get minLength(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxLength(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}Oa.create=t=>new Oa({checks:[],typeName:Ct.ZodString,coerce:t?.coerce??!1,...Rt(t)});function s7(t,s){const r=(t.toString().split(".")[1]||"").length,n=(s.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(t.toFixed(a).replace(".","")),l=Number.parseInt(s.toFixed(a).replace(".",""));return i%l/10**a}class Sl extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(s){if(this._def.coerce&&(s.data=Number(s.data)),this._getType(s)!==tt.number){const i=this._getOrReturnCtx(s);return Qe(i,{code:$e.invalid_type,expected:tt.number,received:i.parsedType}),St}let n;const a=new en;for(const i of this._def.checks)i.kind==="int"?Vt.isInteger(s.data)||(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?s7(s.data,i.value)!==0&&(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(s.data)||(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.not_finite,message:i.message}),a.dirty()):Vt.assertNever(i);return{status:a.value,value:s.data}}gte(s,r){return this.setLimit("min",s,!0,at.toString(r))}gt(s,r){return this.setLimit("min",s,!1,at.toString(r))}lte(s,r){return this.setLimit("max",s,!0,at.toString(r))}lt(s,r){return this.setLimit("max",s,!1,at.toString(r))}setLimit(s,r,n,a){return new Sl({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:at.toString(a)}]})}_addCheck(s){return new Sl({...this._def,checks:[...this._def.checks,s]})}int(s){return this._addCheck({kind:"int",message:at.toString(s)})}positive(s){return this._addCheck({kind:"min",value:0,inclusive:!1,message:at.toString(s)})}negative(s){return this._addCheck({kind:"max",value:0,inclusive:!1,message:at.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:0,inclusive:!0,message:at.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:0,inclusive:!0,message:at.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:at.toString(r)})}finite(s){return this._addCheck({kind:"finite",message:at.toString(s)})}safe(s){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:at.toString(s)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:at.toString(s)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}get isInt(){return!!this._def.checks.find(s=>s.kind==="int"||s.kind==="multipleOf"&&Vt.isInteger(s.value))}get isFinite(){let s=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(s===null||n.value<s)&&(s=n.value)}return Number.isFinite(r)&&Number.isFinite(s)}}Sl.create=t=>new Sl({checks:[],typeName:Ct.ZodNumber,coerce:t?.coerce||!1,...Rt(t)});class Cl extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(s){if(this._def.coerce)try{s.data=BigInt(s.data)}catch{return this._getInvalidInput(s)}if(this._getType(s)!==tt.bigint)return this._getInvalidInput(s);let n;const a=new en;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?s.data<i.value:s.data<=i.value)&&(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?s.data>i.value:s.data>=i.value)&&(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?s.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(s,n),Qe(n,{code:$e.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Vt.assertNever(i);return{status:a.value,value:s.data}}_getInvalidInput(s){const r=this._getOrReturnCtx(s);return Qe(r,{code:$e.invalid_type,expected:tt.bigint,received:r.parsedType}),St}gte(s,r){return this.setLimit("min",s,!0,at.toString(r))}gt(s,r){return this.setLimit("min",s,!1,at.toString(r))}lte(s,r){return this.setLimit("max",s,!0,at.toString(r))}lt(s,r){return this.setLimit("max",s,!1,at.toString(r))}setLimit(s,r,n,a){return new Cl({...this._def,checks:[...this._def.checks,{kind:s,value:r,inclusive:n,message:at.toString(a)}]})}_addCheck(s){return new Cl({...this._def,checks:[...this._def.checks,s]})}positive(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:at.toString(s)})}negative(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:at.toString(s)})}nonpositive(s){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:at.toString(s)})}nonnegative(s){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:at.toString(s)})}multipleOf(s,r){return this._addCheck({kind:"multipleOf",value:s,message:at.toString(r)})}get minValue(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s}get maxValue(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s}}Cl.create=t=>new Cl({checks:[],typeName:Ct.ZodBigInt,coerce:t?.coerce??!1,...Rt(t)});class Dh extends Bt{_parse(s){if(this._def.coerce&&(s.data=!!s.data),this._getType(s)!==tt.boolean){const n=this._getOrReturnCtx(s);return Qe(n,{code:$e.invalid_type,expected:tt.boolean,received:n.parsedType}),St}return yn(s.data)}}Dh.create=t=>new Dh({typeName:Ct.ZodBoolean,coerce:t?.coerce||!1,...Rt(t)});class $o extends Bt{_parse(s){if(this._def.coerce&&(s.data=new Date(s.data)),this._getType(s)!==tt.date){const i=this._getOrReturnCtx(s);return Qe(i,{code:$e.invalid_type,expected:tt.date,received:i.parsedType}),St}if(Number.isNaN(s.data.getTime())){const i=this._getOrReturnCtx(s);return Qe(i,{code:$e.invalid_date}),St}const n=new en;let a;for(const i of this._def.checks)i.kind==="min"?s.data.getTime()<i.value&&(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?s.data.getTime()>i.value&&(a=this._getOrReturnCtx(s,a),Qe(a,{code:$e.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Vt.assertNever(i);return{status:n.value,value:new Date(s.data.getTime())}}_addCheck(s){return new $o({...this._def,checks:[...this._def.checks,s]})}min(s,r){return this._addCheck({kind:"min",value:s.getTime(),message:at.toString(r)})}max(s,r){return this._addCheck({kind:"max",value:s.getTime(),message:at.toString(r)})}get minDate(){let s=null;for(const r of this._def.checks)r.kind==="min"&&(s===null||r.value>s)&&(s=r.value);return s!=null?new Date(s):null}get maxDate(){let s=null;for(const r of this._def.checks)r.kind==="max"&&(s===null||r.value<s)&&(s=r.value);return s!=null?new Date(s):null}}$o.create=t=>new $o({checks:[],coerce:t?.coerce||!1,typeName:Ct.ZodDate,...Rt(t)});class D1 extends Bt{_parse(s){if(this._getType(s)!==tt.symbol){const n=this._getOrReturnCtx(s);return Qe(n,{code:$e.invalid_type,expected:tt.symbol,received:n.parsedType}),St}return yn(s.data)}}D1.create=t=>new D1({typeName:Ct.ZodSymbol,...Rt(t)});class O1 extends Bt{_parse(s){if(this._getType(s)!==tt.undefined){const n=this._getOrReturnCtx(s);return Qe(n,{code:$e.invalid_type,expected:tt.undefined,received:n.parsedType}),St}return yn(s.data)}}O1.create=t=>new O1({typeName:Ct.ZodUndefined,...Rt(t)});class E1 extends Bt{_parse(s){if(this._getType(s)!==tt.null){const n=this._getOrReturnCtx(s);return Qe(n,{code:$e.invalid_type,expected:tt.null,received:n.parsedType}),St}return yn(s.data)}}E1.create=t=>new E1({typeName:Ct.ZodNull,...Rt(t)});class M1 extends Bt{constructor(){super(...arguments),this._any=!0}_parse(s){return yn(s.data)}}M1.create=t=>new M1({typeName:Ct.ZodAny,...Rt(t)});class R1 extends Bt{constructor(){super(...arguments),this._unknown=!0}_parse(s){return yn(s.data)}}R1.create=t=>new R1({typeName:Ct.ZodUnknown,...Rt(t)});class Ei extends Bt{_parse(s){const r=this._getOrReturnCtx(s);return Qe(r,{code:$e.invalid_type,expected:tt.never,received:r.parsedType}),St}}Ei.create=t=>new Ei({typeName:Ct.ZodNever,...Rt(t)});class _1 extends Bt{_parse(s){if(this._getType(s)!==tt.undefined){const n=this._getOrReturnCtx(s);return Qe(n,{code:$e.invalid_type,expected:tt.void,received:n.parsedType}),St}return yn(s.data)}}_1.create=t=>new _1({typeName:Ct.ZodVoid,...Rt(t)});class ia extends Bt{_parse(s){const{ctx:r,status:n}=this._processInputParams(s),a=this._def;if(r.parsedType!==tt.array)return Qe(r,{code:$e.invalid_type,expected:tt.array,received:r.parsedType}),St;if(a.exactLength!==null){const l=r.data.length>a.exactLength.value,o=r.data.length<a.exactLength.value;(l||o)&&(Qe(r,{code:l?$e.too_big:$e.too_small,minimum:o?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Qe(r,{code:$e.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Qe(r,{code:$e.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((l,o)=>a.type._parseAsync(new Oi(r,l,r.path,o)))).then(l=>en.mergeArray(n,l));const i=[...r.data].map((l,o)=>a.type._parseSync(new Oi(r,l,r.path,o)));return en.mergeArray(n,i)}get element(){return this._def.type}min(s,r){return new ia({...this._def,minLength:{value:s,message:at.toString(r)}})}max(s,r){return new ia({...this._def,maxLength:{value:s,message:at.toString(r)}})}length(s,r){return new ia({...this._def,exactLength:{value:s,message:at.toString(r)}})}nonempty(s){return this.min(1,s)}}ia.create=(t,s)=>new ia({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ct.ZodArray,...Rt(s)});function no(t){if(t instanceof Ys){const s={};for(const r in t.shape){const n=t.shape[r];s[r]=wi.create(no(n))}return new Ys({...t._def,shape:()=>s})}else return t instanceof ia?new ia({...t._def,type:no(t.element)}):t instanceof wi?wi.create(no(t.unwrap())):t instanceof Bo?Bo.create(no(t.unwrap())):t instanceof Pl?Pl.create(t.items.map(s=>no(s))):t}class Ys extends Bt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const s=this._def.shape(),r=Vt.objectKeys(s);return this._cached={shape:s,keys:r},this._cached}_parse(s){if(this._getType(s)!==tt.object){const d=this._getOrReturnCtx(s);return Qe(d,{code:$e.invalid_type,expected:tt.object,received:d.parsedType}),St}const{status:n,ctx:a}=this._processInputParams(s),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ei&&this._def.unknownKeys==="strip"))for(const d in a.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Oi(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Ei){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")o.length>0&&(Qe(a,{code:$e.unrecognized_keys,keys:o}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Oi(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,h=await u.value;d.push({key:m,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>en.mergeObjectSync(n,d)):en.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(s){return at.errToObj,new Ys({...this._def,unknownKeys:"strict",...s!==void 0?{errorMap:(r,n)=>{const a=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:at.errToObj(s).message??a}:{message:a}}}:{}})}strip(){return new Ys({...this._def,unknownKeys:"strip"})}passthrough(){return new Ys({...this._def,unknownKeys:"passthrough"})}extend(s){return new Ys({...this._def,shape:()=>({...this._def.shape(),...s})})}merge(s){return new Ys({unknownKeys:s._def.unknownKeys,catchall:s._def.catchall,shape:()=>({...this._def.shape(),...s._def.shape()}),typeName:Ct.ZodObject})}setKey(s,r){return this.augment({[s]:r})}catchall(s){return new Ys({...this._def,catchall:s})}pick(s){const r={};for(const n of Vt.objectKeys(s))s[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Ys({...this._def,shape:()=>r})}omit(s){const r={};for(const n of Vt.objectKeys(this.shape))s[n]||(r[n]=this.shape[n]);return new Ys({...this._def,shape:()=>r})}deepPartial(){return no(this)}partial(s){const r={};for(const n of Vt.objectKeys(this.shape)){const a=this.shape[n];s&&!s[n]?r[n]=a:r[n]=a.optional()}return new Ys({...this._def,shape:()=>r})}required(s){const r={};for(const n of Vt.objectKeys(this.shape))if(s&&!s[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof wi;)i=i._def.innerType;r[n]=i}return new Ys({...this._def,shape:()=>r})}keyof(){return jE(Vt.objectKeys(this.shape))}}Ys.create=(t,s)=>new Ys({shape:()=>t,unknownKeys:"strip",catchall:Ei.create(),typeName:Ct.ZodObject,...Rt(s)});Ys.strictCreate=(t,s)=>new Ys({shape:()=>t,unknownKeys:"strict",catchall:Ei.create(),typeName:Ct.ZodObject,...Rt(s)});Ys.lazycreate=(t,s)=>new Ys({shape:t,unknownKeys:"strip",catchall:Ei.create(),typeName:Ct.ZodObject,...Rt(s)});class Oh extends Bt{_parse(s){const{ctx:r}=this._processInputParams(s),n=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new Ha(o.ctx.common.issues));return Qe(r,{code:$e.invalid_union,unionErrors:l}),St}if(r.common.async)return Promise.all(n.map(async i=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(a);{let i;const l=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new Ha(c));return Qe(r,{code:$e.invalid_union,unionErrors:o}),St}}get options(){return this._def.options}}Oh.create=(t,s)=>new Oh({options:t,typeName:Ct.ZodUnion,...Rt(s)});function rv(t,s){const r=mi(t),n=mi(s);if(t===s)return{valid:!0,data:t};if(r===tt.object&&n===tt.object){const a=Vt.objectKeys(s),i=Vt.objectKeys(t).filter(o=>a.indexOf(o)!==-1),l={...t,...s};for(const o of i){const c=rv(t[o],s[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(r===tt.array&&n===tt.array){if(t.length!==s.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const l=t[i],o=s[i],c=rv(l,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===tt.date&&n===tt.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}class Eh extends Bt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=(i,l)=>{if(k1(i)||k1(l))return St;const o=rv(i.value,l.value);return o.valid?((A1(i)||A1(l))&&r.dirty(),{status:r.value,value:o.data}):(Qe(n,{code:$e.invalid_intersection_types}),St)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,l])=>a(i,l)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Eh.create=(t,s,r)=>new Eh({left:t,right:s,typeName:Ct.ZodIntersection,...Rt(r)});class Pl extends Bt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==tt.array)return Qe(n,{code:$e.invalid_type,expected:tt.array,received:n.parsedType}),St;if(n.data.length<this._def.items.length)return Qe(n,{code:$e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),St;!this._def.rest&&n.data.length>this._def.items.length&&(Qe(n,{code:$e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Oi(n,l,n.path,o)):null}).filter(l=>!!l);return n.common.async?Promise.all(i).then(l=>en.mergeArray(r,l)):en.mergeArray(r,i)}get items(){return this._def.items}rest(s){return new Pl({...this._def,rest:s})}}Pl.create=(t,s)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pl({items:t,typeName:Ct.ZodTuple,rest:null,...Rt(s)})};class I1 extends Bt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==tt.map)return Qe(n,{code:$e.invalid_type,expected:tt.map,received:n.parsedType}),St;const a=this._def.keyType,i=this._def.valueType,l=[...n.data.entries()].map(([o,c],d)=>({key:a._parse(new Oi(n,o,n.path,[d,"key"])),value:i._parse(new Oi(n,c,n.path,[d,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return St;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return St;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(d.value,u.value)}return{status:r.value,value:o}}}}I1.create=(t,s,r)=>new I1({valueType:s,keyType:t,typeName:Ct.ZodMap,...Rt(r)});class Qd extends Bt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.parsedType!==tt.set)return Qe(n,{code:$e.invalid_type,expected:tt.set,received:n.parsedType}),St;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Qe(n,{code:$e.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Qe(n,{code:$e.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return St;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const o=[...n.data.values()].map((c,d)=>i._parse(new Oi(n,c,n.path,d)));return n.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(s,r){return new Qd({...this._def,minSize:{value:s,message:at.toString(r)}})}max(s,r){return new Qd({...this._def,maxSize:{value:s,message:at.toString(r)}})}size(s,r){return this.min(s,r).max(s,r)}nonempty(s){return this.min(1,s)}}Qd.create=(t,s)=>new Qd({valueType:t,minSize:null,maxSize:null,typeName:Ct.ZodSet,...Rt(s)});class $1 extends Bt{get schema(){return this._def.getter()}_parse(s){const{ctx:r}=this._processInputParams(s);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}$1.create=(t,s)=>new $1({getter:t,typeName:Ct.ZodLazy,...Rt(s)});class nv extends Bt{_parse(s){if(s.data!==this._def.value){const r=this._getOrReturnCtx(s);return Qe(r,{received:r.data,code:$e.invalid_literal,expected:this._def.value}),St}return{status:"valid",value:s.data}}get value(){return this._def.value}}nv.create=(t,s)=>new nv({value:t,typeName:Ct.ZodLiteral,...Rt(s)});function jE(t,s){return new Fo({values:t,typeName:Ct.ZodEnum,...Rt(s)})}class Fo extends Bt{_parse(s){if(typeof s.data!="string"){const r=this._getOrReturnCtx(s),n=this._def.values;return Qe(r,{expected:Vt.joinValues(n),received:r.parsedType,code:$e.invalid_type}),St}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(s.data)){const r=this._getOrReturnCtx(s),n=this._def.values;return Qe(r,{received:r.data,code:$e.invalid_enum_value,options:n}),St}return yn(s.data)}get options(){return this._def.values}get enum(){const s={};for(const r of this._def.values)s[r]=r;return s}get Values(){const s={};for(const r of this._def.values)s[r]=r;return s}get Enum(){const s={};for(const r of this._def.values)s[r]=r;return s}extract(s,r=this._def){return Fo.create(s,{...this._def,...r})}exclude(s,r=this._def){return Fo.create(this.options.filter(n=>!s.includes(n)),{...this._def,...r})}}Fo.create=jE;class F1 extends Bt{_parse(s){const r=Vt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(s);if(n.parsedType!==tt.string&&n.parsedType!==tt.number){const a=Vt.objectValues(r);return Qe(n,{expected:Vt.joinValues(a),received:n.parsedType,code:$e.invalid_type}),St}if(this._cache||(this._cache=new Set(Vt.getValidEnumValues(this._def.values))),!this._cache.has(s.data)){const a=Vt.objectValues(r);return Qe(n,{received:n.data,code:$e.invalid_enum_value,options:a}),St}return yn(s.data)}get enum(){return this._def.values}}F1.create=(t,s)=>new F1({values:t,typeName:Ct.ZodNativeEnum,...Rt(s)});class Mh extends Bt{unwrap(){return this._def.type}_parse(s){const{ctx:r}=this._processInputParams(s);if(r.parsedType!==tt.promise&&r.common.async===!1)return Qe(r,{code:$e.invalid_type,expected:tt.promise,received:r.parsedType}),St;const n=r.parsedType===tt.promise?r.data:Promise.resolve(r.data);return yn(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Mh.create=(t,s)=>new Mh({type:t,typeName:Ct.ZodPromise,...Rt(s)});class Lo extends Bt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(s){const{status:r,ctx:n}=this._processInputParams(s),a=this._def.effect||null,i={addIssue:l=>{Qe(n,l),l.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const l=a.transform(n.data,i);if(n.common.async)return Promise.resolve(l).then(async o=>{if(r.value==="aborted")return St;const c=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return c.status==="aborted"?St:c.status==="dirty"||r.value==="dirty"?ud(c.value):c});{if(r.value==="aborted")return St;const o=this._def.schema._parseSync({data:l,path:n.path,parent:n});return o.status==="aborted"?St:o.status==="dirty"||r.value==="dirty"?ud(o.value):o}}if(a.type==="refinement"){const l=o=>{const c=a.refinement(o,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?St:(o.status==="dirty"&&r.dirty(),l(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?St:(o.status==="dirty"&&r.dirty(),l(o.value).then(()=>({status:r.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Io(l))return St;const o=a.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>Io(l)?Promise.resolve(a.transform(l.value,i)).then(o=>({status:r.value,value:o})):St);Vt.assertNever(a)}}Lo.create=(t,s,r)=>new Lo({schema:t,typeName:Ct.ZodEffects,effect:s,...Rt(r)});Lo.createWithPreprocess=(t,s,r)=>new Lo({schema:s,effect:{type:"preprocess",transform:t},typeName:Ct.ZodEffects,...Rt(r)});class wi extends Bt{_parse(s){return this._getType(s)===tt.undefined?yn(void 0):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}wi.create=(t,s)=>new wi({innerType:t,typeName:Ct.ZodOptional,...Rt(s)});class Bo extends Bt{_parse(s){return this._getType(s)===tt.null?yn(null):this._def.innerType._parse(s)}unwrap(){return this._def.innerType}}Bo.create=(t,s)=>new Bo({innerType:t,typeName:Ct.ZodNullable,...Rt(s)});class av extends Bt{_parse(s){const{ctx:r}=this._processInputParams(s);let n=r.data;return r.parsedType===tt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}av.create=(t,s)=>new av({innerType:t,typeName:Ct.ZodDefault,defaultValue:typeof s.default=="function"?s.default:()=>s.default,...Rt(s)});class iv extends Bt{_parse(s){const{ctx:r}=this._processInputParams(s),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Th(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ha(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ha(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}iv.create=(t,s)=>new iv({innerType:t,typeName:Ct.ZodCatch,catchValue:typeof s.catch=="function"?s.catch:()=>s.catch,...Rt(s)});class L1 extends Bt{_parse(s){if(this._getType(s)!==tt.nan){const n=this._getOrReturnCtx(s);return Qe(n,{code:$e.invalid_type,expected:tt.nan,received:n.parsedType}),St}return{status:"valid",value:s.data}}}L1.create=t=>new L1({typeName:Ct.ZodNaN,...Rt(t)});class r7 extends Bt{_parse(s){const{ctx:r}=this._processInputParams(s),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class rb extends Bt{_parse(s){const{status:r,ctx:n}=this._processInputParams(s);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?St:i.status==="dirty"?(r.dirty(),ud(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?St:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(s,r){return new rb({in:s,out:r,typeName:Ct.ZodPipeline})}}class lv extends Bt{_parse(s){const r=this._def.innerType._parse(s),n=a=>(Io(a)&&(a.value=Object.freeze(a.value)),a);return Th(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}lv.create=(t,s)=>new lv({innerType:t,typeName:Ct.ZodReadonly,...Rt(s)});var Ct;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ct||(Ct={}));const Ne=Oa.create,Zt=Sl.create;Cl.create;const Vr=Dh.create,ji=$o.create;Ei.create;const n7=ia.create,Qt=Ys.create;Oh.create;Eh.create;Pl.create;const md=nv.create,Cs=Fo.create;Mh.create;wi.create;Bo.create;const ln={string:t=>Oa.create({...t,coerce:!0}),number:t=>Sl.create({...t,coerce:!0}),boolean:t=>Dh.create({...t,coerce:!0}),bigint:t=>Cl.create({...t,coerce:!0}),date:t=>$o.create({...t,coerce:!0})};var a7="Label",vE=j.forwardRef((t,s)=>e.jsx(Ye.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));vE.displayName=a7;var yE=vE;const i7=Lu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),K=j.forwardRef(({className:t,...s},r)=>e.jsx(yE,{ref:r,className:_e(i7(),t),...s}));K.displayName=yE.displayName;const Wt=dz,bE=j.createContext({}),de=({...t})=>e.jsx(bE.Provider,{value:{name:t.name},children:e.jsx(xz,{...t})}),Cp=()=>{const t=j.useContext(bE),s=j.useContext(NE),{getFieldState:r,formState:n}=sm(),a=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},NE=j.createContext({}),oe=j.forwardRef(({className:t,...s},r)=>{const n=j.useId();return e.jsx(NE.Provider,{value:{id:n},children:e.jsx("div",{ref:r,className:_e("space-y-2",t),...s})})});oe.displayName="FormItem";const ue=j.forwardRef(({className:t,...s},r)=>{const{error:n,formItemId:a}=Cp();return e.jsx(K,{ref:r,className:_e(n&&"text-destructive",t),htmlFor:a,...s})});ue.displayName="FormLabel";const ce=j.forwardRef(({...t},s)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=Cp();return e.jsx(mT,{ref:s,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...t})});ce.displayName="FormControl";const Kt=j.forwardRef(({className:t,...s},r)=>{const{formDescriptionId:n}=Cp();return e.jsx("p",{ref:r,id:n,className:_e("text-sm text-muted-foreground",t),...s})});Kt.displayName="FormDescription";const xe=j.forwardRef(({className:t,children:s,...r},n)=>{const{error:a,formMessageId:i}=Cp(),l=a?String(a?.message??""):s;return l?e.jsx("p",{ref:n,id:i,className:_e("text-sm font-medium text-destructive",t),...r,children:l}):null});xe.displayName="FormMessage";const nt=j.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:_e("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));nt.displayName="Textarea";var Pp="Checkbox",[l7,uke]=Zs(Pp),[o7,nb]=l7(Pp);function c7(t){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:i,form:l,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=t,[h,x]=Jr({prop:r,defaultProp:a??!1,onChange:c,caller:Pp}),[g,p]=j.useState(null),[f,v]=j.useState(null),b=j.useRef(!1),y=g?!!l||!!g.closest("form"):!0,S={checked:h,disabled:i,setChecked:x,control:g,setControl:p,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:Si(a)?!1:a,isFormControl:y,bubbleInput:f,setBubbleInput:v};return e.jsx(o7,{scope:s,...S,children:d7(m)?m(S):n})}var wE="CheckboxTrigger",SE=j.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...n},a)=>{const{control:i,value:l,disabled:o,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:x,bubbleInput:g}=nb(wE,t),p=jt(a,u),f=j.useRef(c);return j.useEffect(()=>{const v=i?.form;if(v){const b=()=>m(f.current);return v.addEventListener("reset",b),()=>v.removeEventListener("reset",b)}},[i,m]),e.jsx(Ye.button,{type:"button",role:"checkbox","aria-checked":Si(c)?"mixed":c,"aria-required":d,"data-state":TE(c),"data-disabled":o?"":void 0,disabled:o,value:l,...n,ref:p,onKeyDown:Re(s,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Re(r,v=>{m(b=>Si(b)?!0:!b),g&&x&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})})});SE.displayName=wE;var ab=j.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=t;return e.jsx(c7,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:o,required:l,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(SE,{...m,ref:s,__scopeCheckbox:r}),h&&e.jsx(AE,{__scopeCheckbox:r})]})})});ab.displayName=Pp;var CE="CheckboxIndicator",PE=j.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,i=nb(CE,r);return e.jsx(Js,{present:n||Si(i.checked)||i.checked===!0,children:e.jsx(Ye.span,{"data-state":TE(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});PE.displayName=CE;var kE="CheckboxBubbleInput",AE=j.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:o,disabled:c,name:d,value:u,form:m,bubbleInput:h,setBubbleInput:x}=nb(kE,t),g=jt(r,x),p=mp(i),f=np(n);j.useEffect(()=>{const b=h;if(!b)return;const y=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(y,"checked").set,C=!a.current;if(p!==i&&w){const k=new Event("click",{bubbles:C});b.indeterminate=Si(i),w.call(b,Si(i)?!1:i),b.dispatchEvent(k)}},[h,p,i,a]);const v=j.useRef(Si(i)?!1:i);return e.jsx(Ye.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??v.current,required:o,disabled:c,name:d,value:u,form:m,...s,tabIndex:-1,ref:g,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});AE.displayName=kE;function d7(t){return typeof t=="function"}function Si(t){return t==="indeterminate"}function TE(t){return Si(t)?"indeterminate":t?"checked":"unchecked"}const nl=j.forwardRef(({className:t,...s},r)=>e.jsx(ab,{ref:r,className:_e("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(PE,{className:_e("flex items-center justify-center text-current"),children:e.jsx(Zx,{className:"h-4 w-4"})})}));nl.displayName=ab.displayName;var vt=function(){return vt=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},vt.apply(this,arguments)};function u7(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function DE(t,s,r){for(var n=0,a=s.length,i;n<a;n++)(i||!(n in s))&&(i||(i=Array.prototype.slice.call(s,0,n)),i[n]=s[n]);return t.concat(i||Array.prototype.slice.call(s))}function rm(t){return t.mode==="multiple"}function nm(t){return t.mode==="range"}function kp(t){return t.mode==="single"}var m7={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function h7(t,s){return rt(t,"LLLL y",s)}function x7(t,s){return rt(t,"d",s)}function p7(t,s){return rt(t,"LLLL",s)}function f7(t){return"".concat(t)}function g7(t,s){return rt(t,"cccccc",s)}function j7(t,s){return rt(t,"yyyy",s)}var v7=Object.freeze({__proto__:null,formatCaption:h7,formatDay:x7,formatMonthCaption:p7,formatWeekNumber:f7,formatWeekdayName:g7,formatYearCaption:j7}),y7=function(t,s,r){return rt(t,"do MMMM (EEEE)",r)},b7=function(){return"Month: "},N7=function(){return"Go to next month"},w7=function(){return"Go to previous month"},S7=function(t,s){return rt(t,"cccc",s)},C7=function(t){return"Week n. ".concat(t)},P7=function(){return"Year: "},k7=Object.freeze({__proto__:null,labelDay:y7,labelMonthDropdown:b7,labelNext:N7,labelPrevious:w7,labelWeekNumber:C7,labelWeekday:S7,labelYearDropdown:P7});function A7(){var t="buttons",s=m7,r=m$,n={},a={},i=1,l={},o=new Date;return{captionLayout:t,classNames:s,formatters:v7,labels:k7,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:l,today:o,mode:"default"}}function T7(t){var s=t.fromYear,r=t.toYear,n=t.fromMonth,a=t.toMonth,i=t.fromDate,l=t.toDate;return n?i=ar(n):s&&(i=new Date(s,0,1)),a?l=ml(a):r&&(l=new Date(r,11,31)),{fromDate:i?Xn(i):void 0,toDate:l?Xn(l):void 0}}var OE=j.createContext(void 0);function D7(t){var s,r=t.initialProps,n=A7(),a=T7(r),i=a.fromDate,l=a.toDate,o=(s=r.captionLayout)!==null&&s!==void 0?s:n.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(kp(r)||rm(r)||nm(r))&&(c=r.onSelect);var d=vt(vt(vt({},n),r),{captionLayout:o,classNames:vt(vt({},n.classNames),r.classNames),components:vt({},r.components),formatters:vt(vt({},n.formatters),r.formatters),fromDate:i,labels:vt(vt({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:vt(vt({},n.modifiers),r.modifiers),modifiersClassNames:vt(vt({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:vt(vt({},n.styles),r.styles),toDate:l});return e.jsx(OE.Provider,{value:d,children:t.children})}function js(){var t=j.useContext(OE);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function EE(t){var s=js(),r=s.locale,n=s.classNames,a=s.styles,i=s.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:r})})}function O7(t){return e.jsx("svg",vt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function ME(t){var s,r,n=t.onChange,a=t.value,i=t.children,l=t.caption,o=t.className,c=t.style,d=js(),u=(r=(s=d.components)===null||s===void 0?void 0:s.IconDropdown)!==null&&r!==void 0?r:O7;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:i}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function E7(t){var s,r=js(),n=r.fromDate,a=r.toDate,i=r.styles,l=r.locale,o=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});var m=[];if(j$(n,a))for(var h=ar(n),x=n.getMonth();x<=a.getMonth();x++)m.push(zf(h,x));else for(var h=ar(new Date),x=0;x<=11;x++)m.push(zf(h,x));var g=function(f){var v=Number(f.target.value),b=zf(ar(t.displayMonth),v);t.onChange(b)},p=(s=d?.Dropdown)!==null&&s!==void 0?s:ME;return e.jsx(p,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:l}),children:m.map(function(f){return e.jsx("option",{value:f.getMonth(),children:o(f,{locale:l})},f.getMonth())})})}function M7(t){var s,r=t.displayMonth,n=js(),a=n.fromDate,i=n.toDate,l=n.locale,o=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,m=n.labels.labelYearDropdown,h=[];if(!a)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var x=a.getFullYear(),g=i.getFullYear(),p=x;p<=g;p++)h.push(pw(v$(new Date),p));var f=function(b){var y=pw(ar(r),Number(b.target.value));t.onChange(y)},v=(s=d?.Dropdown)!==null&&s!==void 0?s:ME;return e.jsx(v,{name:"years","aria-label":m(),className:c.dropdown_year,style:o.dropdown_year,onChange:f,value:r.getFullYear(),caption:u(r,{locale:l}),children:h.map(function(b){return e.jsx("option",{value:b.getFullYear(),children:u(b,{locale:l})},b.getFullYear())})})}function R7(t,s){var r=j.useState(t),n=r[0],a=r[1],i=s===void 0?n:s;return[i,a]}function _7(t){var s=t.month,r=t.defaultMonth,n=t.today,a=s||r||n||new Date,i=t.toDate,l=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(i&&Od(i,a)<0){var d=-1*(c-1);a=ua(i,d)}return l&&Od(a,l)<0&&(a=l),ar(a)}function I7(){var t=js(),s=_7(t),r=R7(s,t.month),n=r[0],a=r[1],i=function(l){var o;if(!t.disableNavigation){var c=ar(l);a(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[n,i]}function $7(t,s){for(var r=s.reverseMonths,n=s.numberOfMonths,a=ar(t),i=ar(ua(a,n)),l=Od(i,a),o=[],c=0;c<l;c++){var d=ua(a,c);o.push(d)}return r&&(o=o.reverse()),o}function F7(t,s){if(!s.disableNavigation){var r=s.toDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=n?i:1,o=ar(t);if(!r)return ua(o,l);var c=Od(r,t);if(!(c<i))return ua(o,l)}}function L7(t,s){if(!s.disableNavigation){var r=s.fromDate,n=s.pagedNavigation,a=s.numberOfMonths,i=a===void 0?1:a,l=n?i:1,o=ar(t);if(!r)return ua(o,-l);var c=Od(o,r);if(!(c<=0))return ua(o,-l)}}var RE=j.createContext(void 0);function B7(t){var s=js(),r=I7(),n=r[0],a=r[1],i=$7(n,s),l=F7(n,s),o=L7(n,s),c=function(m){return i.some(function(h){return a0(m,h)})},d=function(m,h){c(m)||(h&&Ed(m,h)?a(ua(m,1+s.numberOfMonths*-1)):a(m))},u={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx(RE.Provider,{value:u,children:t.children})}function am(){var t=j.useContext(RE);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function B1(t){var s,r=js(),n=r.classNames,a=r.styles,i=r.components,l=am().goToMonth,o=function(u){l(ua(u,t.displayIndex?-t.displayIndex:0))},c=(s=i?.CaptionLabel)!==null&&s!==void 0?s:EE,d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:d}),e.jsx(E7,{onChange:o,displayMonth:t.displayMonth}),e.jsx(M7,{onChange:o,displayMonth:t.displayMonth})]})}function V7(t){return e.jsx("svg",vt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function q7(t){return e.jsx("svg",vt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Rh=j.forwardRef(function(t,s){var r=js(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var l=i.join(" "),o=vt(vt({},a.button_reset),a.button);return t.style&&Object.assign(o,t.style),e.jsx("button",vt({},t,{ref:s,type:"button",className:l,style:o}))});function U7(t){var s,r,n=js(),a=n.dir,i=n.locale,l=n.classNames,o=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,m=n.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var h=d(t.previousMonth,{locale:i}),x=[l.nav_button,l.nav_button_previous].join(" "),g=u(t.nextMonth,{locale:i}),p=[l.nav_button,l.nav_button_next].join(" "),f=(s=m?.IconRight)!==null&&s!==void 0?s:q7,v=(r=m?.IconLeft)!==null&&r!==void 0?r:V7;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(Rh,{name:"previous-month","aria-label":h,className:x,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?e.jsx(f,{className:l.nav_icon,style:o.nav_icon}):e.jsx(v,{className:l.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(Rh,{name:"next-month","aria-label":g,className:p,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?e.jsx(v,{className:l.nav_icon,style:o.nav_icon}):e.jsx(f,{className:l.nav_icon,style:o.nav_icon})})]})}function V1(t){var s=js().numberOfMonths,r=am(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,l=r.displayMonths,o=l.findIndex(function(g){return a0(t.displayMonth,g)}),c=o===0,d=o===l.length-1,u=s>1&&(c||!d),m=s>1&&(d||!c),h=function(){n&&i(n)},x=function(){a&&i(a)};return e.jsx(U7,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:x})}function z7(t){var s,r=js(),n=r.classNames,a=r.disableNavigation,i=r.styles,l=r.captionLayout,o=r.components,c=(s=o?.CaptionLabel)!==null&&s!==void 0?s:EE,d;return a?d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?d=e.jsx(B1,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx(B1,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx(V1,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(V1,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:n.caption,style:i.caption,children:d})}function G7(t){var s=js(),r=s.footer,n=s.styles,a=s.classNames.tfoot;return r?e.jsx("tfoot",{className:a,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:r})})}):e.jsx(e.Fragment,{})}function H7(t,s,r){for(var n=r?i0(new Date):l0(new Date,{locale:t,weekStartsOn:s}),a=[],i=0;i<7;i++){var l=sr(n,i);a.push(l)}return a}function K7(){var t=js(),s=t.classNames,r=t.styles,n=t.showWeekNumber,a=t.locale,i=t.weekStartsOn,l=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=H7(a,i,l);return e.jsxs("tr",{style:r.head_row,className:s.head_row,children:[n&&e.jsx("td",{style:r.head_cell,className:s.head_cell}),d.map(function(u,m){return e.jsx("th",{scope:"col",className:s.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:o(u,{locale:a})},m)})]})}function W7(){var t,s=js(),r=s.classNames,n=s.styles,a=s.components,i=(t=a?.HeadRow)!==null&&t!==void 0?t:K7;return e.jsx("thead",{style:n.head,className:r.head,children:e.jsx(i,{})})}function Y7(t){var s=js(),r=s.locale,n=s.formatters.formatDay;return e.jsx(e.Fragment,{children:n(t.date,{locale:r})})}var ib=j.createContext(void 0);function Q7(t){if(!rm(t.initialProps)){var s={selected:void 0,modifiers:{disabled:[]}};return e.jsx(ib.Provider,{value:s,children:t.children})}return e.jsx(X7,{initialProps:t.initialProps,children:t.children})}function X7(t){var s=t.initialProps,r=t.children,n=s.selected,a=s.min,i=s.max,l=function(d,u,m){var h,x;(h=s.onDayClick)===null||h===void 0||h.call(s,d,u,m);var g=!!(u.selected&&a&&n?.length===a);if(!g){var p=!!(!u.selected&&i&&n?.length===i);if(!p){var f=n?DE([],n):[];if(u.selected){var v=f.findIndex(function(b){return vr(d,b)});f.splice(v,1)}else f.push(d);(x=s.onSelect)===null||x===void 0||x.call(s,f,d,u,m)}}},o={disabled:[]};n&&o.disabled.push(function(d){var u=i&&n.length>i-1,m=n.some(function(h){return vr(h,d)});return!!(u&&!m)});var c={selected:n,onDayClick:l,modifiers:o};return e.jsx(ib.Provider,{value:c,children:r})}function lb(){var t=j.useContext(ib);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Z7(t,s){var r=s||{},n=r.from,a=r.to;return n&&a?vr(a,t)&&vr(n,t)?void 0:vr(a,t)?{from:a,to:void 0}:vr(n,t)?void 0:hh(n,t)?{from:t,to:a}:{from:n,to:t}:a?hh(t,a)?{from:a,to:t}:{from:t,to:a}:n?Ed(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var ob=j.createContext(void 0);function J7(t){if(!nm(t.initialProps)){var s={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(ob.Provider,{value:s,children:t.children})}return e.jsx(eG,{initialProps:t.initialProps,children:t.children})}function eG(t){var s=t.initialProps,r=t.children,n=s.selected,a=n||{},i=a.from,l=a.to,o=s.min,c=s.max,d=function(x,g,p){var f,v;(f=s.onDayClick)===null||f===void 0||f.call(s,x,g,p);var b=Z7(x,n);(v=s.onSelect)===null||v===void 0||v.call(s,b,x,g,p)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],l?(u.range_end=[l],vr(i,l)||(u.range_middle=[{after:i,before:l}])):u.range_end=[i]):l&&(u.range_start=[l],u.range_end=[l]),o&&(i&&!l&&u.disabled.push({after:th(i,o-1),before:sr(i,o-1)}),i&&l&&u.disabled.push({after:i,before:sr(i,o-1)}),!i&&l&&u.disabled.push({after:th(l,o-1),before:sr(l,o-1)})),c){if(i&&!l&&(u.disabled.push({before:sr(i,-c+1)}),u.disabled.push({after:sr(i,c-1)})),i&&l){var m=Ta(l,i)+1,h=c-m;u.disabled.push({before:th(i,h)}),u.disabled.push({after:sr(l,h)})}!i&&l&&(u.disabled.push({before:sr(l,-c+1)}),u.disabled.push({after:sr(l,c-1)}))}return e.jsx(ob.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function cb(){var t=j.useContext(ob);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function oh(t){return Array.isArray(t)?DE([],t):t!==void 0?[t]:[]}function tG(t){var s={};return Object.entries(t).forEach(function(r){var n=r[0],a=r[1];s[n]=oh(a)}),s}var zn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(zn||(zn={}));var sG=zn.Selected,Ca=zn.Disabled,rG=zn.Hidden,nG=zn.Today,vg=zn.RangeEnd,yg=zn.RangeMiddle,bg=zn.RangeStart,aG=zn.Outside;function iG(t,s,r){var n,a=(n={},n[sG]=oh(t.selected),n[Ca]=oh(t.disabled),n[rG]=oh(t.hidden),n[nG]=[t.today],n[vg]=[],n[yg]=[],n[bg]=[],n[aG]=[],n);return t.fromDate&&a[Ca].push({before:t.fromDate}),t.toDate&&a[Ca].push({after:t.toDate}),rm(t)?a[Ca]=a[Ca].concat(s.modifiers[Ca]):nm(t)&&(a[Ca]=a[Ca].concat(r.modifiers[Ca]),a[bg]=r.modifiers[bg],a[yg]=r.modifiers[yg],a[vg]=r.modifiers[vg]),a}var _E=j.createContext(void 0);function lG(t){var s=js(),r=lb(),n=cb(),a=iG(s,r,n),i=tG(s.modifiers),l=vt(vt({},a),i);return e.jsx(_E.Provider,{value:l,children:t.children})}function IE(){var t=j.useContext(_E);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function oG(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function cG(t){return!!(t&&typeof t=="object"&&"from"in t)}function dG(t){return!!(t&&typeof t=="object"&&"after"in t)}function uG(t){return!!(t&&typeof t=="object"&&"before"in t)}function mG(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function hG(t,s){var r,n=s.from,a=s.to;if(n&&a){var i=Ta(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var l=Ta(t,n)>=0&&Ta(a,t)>=0;return l}return a?vr(a,t):n?vr(n,t):!1}function xG(t){return LA(t)}function pG(t){return Array.isArray(t)&&t.every(LA)}function fG(t,s){return s.some(function(r){if(typeof r=="boolean")return r;if(xG(r))return vr(t,r);if(pG(r))return r.includes(t);if(cG(r))return hG(t,r);if(mG(r))return r.dayOfWeek.includes(t.getDay());if(oG(r)){var n=Ta(r.before,t),a=Ta(r.after,t),i=n>0,l=a<0,o=hh(r.before,r.after);return o?l&&i:i||l}return dG(r)?Ta(t,r.after)>0:uG(r)?Ta(r.before,t)>0:typeof r=="function"?r(t):!1})}function db(t,s,r){var n=Object.keys(s).reduce(function(i,l){var o=s[l];return fG(t,o)&&i.push(l),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!a0(t,r)&&(a.outside=!0),a}function gG(t,s){for(var r=ar(t[0]),n=ml(t[t.length-1]),a,i,l=r;l<=n;){var o=db(l,s),c=!o.disabled&&!o.hidden;if(!c){l=sr(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),a||(a=l),l=sr(l,1)}return i||a}var jG=365;function $E(t,s){var r=s.moveBy,n=s.direction,a=s.context,i=s.modifiers,l=s.retry,o=l===void 0?{count:0,lastFocused:t}:l,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,h={day:sr,week:wj,month:ua,year:p$,startOfWeek:function(f){return a.ISOWeek?i0(f):l0(f,{locale:m,weekStartsOn:c})},endOfWeek:function(f){return a.ISOWeek?$A(f):FA(f,{locale:m,weekStartsOn:c})}},x=h[r](t,n==="after"?1:-1);n==="before"&&d?x=f$([d,x]):n==="after"&&u&&(x=g$([u,x]));var g=!0;if(i){var p=db(x,i);g=!p.disabled&&!p.hidden}return g?x:o.count>jG?o.lastFocused:$E(x,{moveBy:r,direction:n,context:a,modifiers:i,retry:vt(vt({},o),{count:o.count+1})})}var FE=j.createContext(void 0);function vG(t){var s=am(),r=IE(),n=j.useState(),a=n[0],i=n[1],l=j.useState(),o=l[0],c=l[1],d=gG(s.displayMonths,r),u=a??(o&&s.isDateDisplayed(o))?o:d,m=function(){c(a),i(void 0)},h=function(f){i(f)},x=js(),g=function(f,v){if(a){var b=$E(a,{moveBy:f,direction:v,context:x,modifiers:r});vr(a,b)||(s.goToDate(b,a),h(b))}},p={focusedDay:a,focusTarget:u,blur:m,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return e.jsx(FE.Provider,{value:p,children:t.children})}function ub(){var t=j.useContext(FE);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function yG(t,s){var r=IE(),n=db(t,r,s);return n}var mb=j.createContext(void 0);function bG(t){if(!kp(t.initialProps)){var s={selected:void 0};return e.jsx(mb.Provider,{value:s,children:t.children})}return e.jsx(NG,{initialProps:t.initialProps,children:t.children})}function NG(t){var s=t.initialProps,r=t.children,n=function(i,l,o){var c,d,u;if((c=s.onDayClick)===null||c===void 0||c.call(s,i,l,o),l.selected&&!s.required){(d=s.onSelect)===null||d===void 0||d.call(s,void 0,i,l,o);return}(u=s.onSelect)===null||u===void 0||u.call(s,i,i,l,o)},a={selected:s.selected,onDayClick:n};return e.jsx(mb.Provider,{value:a,children:r})}function LE(){var t=j.useContext(mb);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function wG(t,s){var r=js(),n=LE(),a=lb(),i=cb(),l=ub(),o=l.focusDayAfter,c=l.focusDayBefore,d=l.focusWeekAfter,u=l.focusWeekBefore,m=l.blur,h=l.focus,x=l.focusMonthBefore,g=l.focusMonthAfter,p=l.focusYearBefore,f=l.focusYearAfter,v=l.focusStartOfWeek,b=l.focusEndOfWeek,y=function(Q){var T,B,W,he;kp(r)?(T=n.onDayClick)===null||T===void 0||T.call(n,t,s,Q):rm(r)?(B=a.onDayClick)===null||B===void 0||B.call(a,t,s,Q):nm(r)?(W=i.onDayClick)===null||W===void 0||W.call(i,t,s,Q):(he=r.onDayClick)===null||he===void 0||he.call(r,t,s,Q)},S=function(Q){var T;h(t),(T=r.onDayFocus)===null||T===void 0||T.call(r,t,s,Q)},w=function(Q){var T;m(),(T=r.onDayBlur)===null||T===void 0||T.call(r,t,s,Q)},C=function(Q){var T;(T=r.onDayMouseEnter)===null||T===void 0||T.call(r,t,s,Q)},k=function(Q){var T;(T=r.onDayMouseLeave)===null||T===void 0||T.call(r,t,s,Q)},A=function(Q){var T;(T=r.onDayPointerEnter)===null||T===void 0||T.call(r,t,s,Q)},N=function(Q){var T;(T=r.onDayPointerLeave)===null||T===void 0||T.call(r,t,s,Q)},M=function(Q){var T;(T=r.onDayTouchCancel)===null||T===void 0||T.call(r,t,s,Q)},F=function(Q){var T;(T=r.onDayTouchEnd)===null||T===void 0||T.call(r,t,s,Q)},I=function(Q){var T;(T=r.onDayTouchMove)===null||T===void 0||T.call(r,t,s,Q)},V=function(Q){var T;(T=r.onDayTouchStart)===null||T===void 0||T.call(r,t,s,Q)},E=function(Q){var T;(T=r.onDayKeyUp)===null||T===void 0||T.call(r,t,s,Q)},G=function(Q){var T;switch(Q.key){case"ArrowLeft":Q.preventDefault(),Q.stopPropagation(),r.dir==="rtl"?o():c();break;case"ArrowRight":Q.preventDefault(),Q.stopPropagation(),r.dir==="rtl"?c():o();break;case"ArrowDown":Q.preventDefault(),Q.stopPropagation(),d();break;case"ArrowUp":Q.preventDefault(),Q.stopPropagation(),u();break;case"PageUp":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?p():x();break;case"PageDown":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?f():g();break;case"Home":Q.preventDefault(),Q.stopPropagation(),v();break;case"End":Q.preventDefault(),Q.stopPropagation(),b();break}(T=r.onDayKeyDown)===null||T===void 0||T.call(r,t,s,Q)},Y={onClick:y,onFocus:S,onBlur:w,onKeyDown:G,onKeyUp:E,onMouseEnter:C,onMouseLeave:k,onPointerEnter:A,onPointerLeave:N,onTouchCancel:M,onTouchEnd:F,onTouchMove:I,onTouchStart:V};return Y}function SG(){var t=js(),s=LE(),r=lb(),n=cb(),a=kp(t)?s.selected:rm(t)?r.selected:nm(t)?n.selected:void 0;return a}function CG(t){return Object.values(zn).includes(t)}function PG(t,s){var r=[t.classNames.day];return Object.keys(s).forEach(function(n){var a=t.modifiersClassNames[n];if(a)r.push(a);else if(CG(n)){var i=t.classNames["day_".concat(n)];i&&r.push(i)}}),r}function kG(t,s){var r=vt({},t.styles.day);return Object.keys(s).forEach(function(n){var a;r=vt(vt({},r),(a=t.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function AG(t,s,r){var n,a,i,l=js(),o=ub(),c=yG(t,s),d=wG(t,c),u=SG(),m=!!(l.onDayClick||l.mode!=="default");j.useEffect(function(){var C;c.outside||o.focusedDay&&m&&vr(o.focusedDay,t)&&((C=r.current)===null||C===void 0||C.focus())},[o.focusedDay,t,r,m,c.outside]);var h=PG(l,c).join(" "),x=kG(l,c),g=!!(c.outside&&!l.showOutsideDays||c.hidden),p=(i=(a=l.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:Y7,f=e.jsx(p,{date:t,displayMonth:s,activeModifiers:c}),v={style:x,className:h,children:f,role:"gridcell"},b=o.focusTarget&&vr(o.focusTarget,t)&&!c.outside,y=o.focusedDay&&vr(o.focusedDay,t),S=vt(vt(vt({},v),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=y||b?0:-1,n)),d),w={isButton:m,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:S,divProps:v};return w}function TG(t){var s=j.useRef(null),r=AG(t.date,t.displayMonth,s);return r.isHidden?e.jsx("div",{role:"gridcell"}):r.isButton?e.jsx(Rh,vt({name:"day",ref:s},r.buttonProps)):e.jsx("div",vt({},r.divProps))}function DG(t){var s=t.number,r=t.dates,n=js(),a=n.onWeekNumberClick,i=n.styles,l=n.classNames,o=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(s),{locale:o});if(!a)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:u});var m=c(Number(s),{locale:o}),h=function(x){a(s,r,x)};return e.jsx(Rh,{name:"week-number","aria-label":m,className:l.weeknumber,style:i.weeknumber,onClick:h,children:u})}function OG(t){var s,r,n=js(),a=n.styles,i=n.classNames,l=n.showWeekNumber,o=n.components,c=(s=o?.Day)!==null&&s!==void 0?s:TG,d=(r=o?.WeekNumber)!==null&&r!==void 0?r:DG,u;return l&&(u=e.jsx("td",{className:i.cell,style:a.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:a.row,children:[u,t.dates.map(function(m){return e.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:m})},x$(m))})]})}function q1(t,s,r){for(var n=r?.ISOWeek?$A(s):FA(s,r),a=r?.ISOWeek?i0(t):l0(t,r),i=Ta(n,a),l=[],o=0;o<=i;o++)l.push(sr(a,o));var c=l.reduce(function(d,u){var m=r?.ISOWeek?y$(u):b$(u,r),h=d.find(function(x){return x.weekNumber===m});return h?(h.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function EG(t,s){var r=q1(ar(t),ml(t),s);if(s?.useFixedWeeks){var n=h$(t,s);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],l=wj(i,6-n),o=q1(wj(i,1),l,s);r.push.apply(r,o)}}return r}function MG(t){var s,r,n,a=js(),i=a.locale,l=a.classNames,o=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,x=a.ISOWeek,g=EG(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:x,locale:i,weekStartsOn:m,firstWeekContainsDate:h}),p=(s=u?.Head)!==null&&s!==void 0?s:W7,f=(r=u?.Row)!==null&&r!==void 0?r:OG,v=(n=u?.Footer)!==null&&n!==void 0?n:G7;return e.jsxs("table",{id:t.id,className:l.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(p,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:g.map(function(b){return e.jsx(f,{displayMonth:t.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),e.jsx(v,{displayMonth:t.displayMonth})]})}function RG(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var _G=RG()?j.useLayoutEffect:j.useEffect,Ng=!1,IG=0;function U1(){return"react-day-picker-".concat(++IG)}function $G(t){var s,r=t??(Ng?U1():null),n=j.useState(r),a=n[0],i=n[1];return _G(function(){a===null&&i(U1())},[]),j.useEffect(function(){Ng===!1&&(Ng=!0)},[]),(s=t??a)!==null&&s!==void 0?s:void 0}function FG(t){var s,r,n=js(),a=n.dir,i=n.classNames,l=n.styles,o=n.components,c=am().displayMonths,d=$G(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,m=[i.month],h=l.month,x=t.displayIndex===0,g=t.displayIndex===c.length-1,p=!x&&!g;a==="rtl"&&(s=[x,g],g=s[0],x=s[1]),x&&(m.push(i.caption_start),h=vt(vt({},h),l.caption_start)),g&&(m.push(i.caption_end),h=vt(vt({},h),l.caption_end)),p&&(m.push(i.caption_between),h=vt(vt({},h),l.caption_between));var f=(r=o?.Caption)!==null&&r!==void 0?r:z7;return e.jsxs("div",{className:m.join(" "),style:h,children:[e.jsx(f,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(MG,{id:u,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function LG(t){var s=js(),r=s.classNames,n=s.styles;return e.jsx("div",{className:r.months,style:n.months,children:t.children})}function BG(t){var s,r,n=t.initialProps,a=js(),i=ub(),l=am(),o=j.useState(!1),c=o[0],d=o[1];j.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=vt(vt({},a.styles.root),a.style),h=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,p){var f;return vt(vt({},g),(f={},f[p]=n[p],f))},{}),x=(r=(s=n.components)===null||s===void 0?void 0:s.Months)!==null&&r!==void 0?r:LG;return e.jsx("div",vt({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:e.jsx(x,{children:l.displayMonths.map(function(g,p){return e.jsx(FG,{displayIndex:p,displayMonth:g},p)})})}))}function VG(t){var s=t.children,r=u7(t,["children"]);return e.jsx(D7,{initialProps:r,children:e.jsx(B7,{children:e.jsx(bG,{initialProps:r,children:e.jsx(Q7,{initialProps:r,children:e.jsx(J7,{initialProps:r,children:e.jsx(lG,{children:e.jsx(vG,{children:s})})})})})})})}function qG(t){return e.jsx(VG,vt({},t,{children:e.jsx(BG,{initialProps:t})}))}function al({className:t,classNames:s,showOutsideDays:r=!0,...n}){return e.jsx(qG,{showOutsideDays:r,className:_e("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:_e(Ud({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:_e(Ud({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...a})=>e.jsx(Vu,{className:"h-4 w-4"}),IconRight:({...a})=>e.jsx(Rl,{className:"h-4 w-4"})},...n})}al.displayName="Calendar";var Ap="Popover",[BE,mke]=Zs(Ap,[Ii]),im=Ii(),[UG,Li]=BE(Ap),VE=t=>{const{__scopePopover:s,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:l=!1}=t,o=im(s),c=j.useRef(null),[d,u]=j.useState(!1),[m,h]=Jr({prop:n,defaultProp:a??!1,onChange:i,caller:Ap});return e.jsx(ap,{...o,children:e.jsx(UG,{scope:s,contentId:Wr(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:d,onCustomAnchorAdd:j.useCallback(()=>u(!0),[]),onCustomAnchorRemove:j.useCallback(()=>u(!1),[]),modal:l,children:r})})};VE.displayName=Ap;var qE="PopoverAnchor",zG=j.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Li(qE,r),i=im(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return j.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Wu,{...i,...n,ref:s})});zG.displayName=qE;var UE="PopoverTrigger",zE=j.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Li(UE,r),i=im(r),l=jt(s,a.triggerRef),o=e.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":YE(a.open),...n,ref:l,onClick:Re(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:e.jsx(Wu,{asChild:!0,...i,children:o})});zE.displayName=UE;var hb="PopoverPortal",[GG,HG]=BE(hb,{forceMount:void 0}),GE=t=>{const{__scopePopover:s,forceMount:r,children:n,container:a}=t,i=Li(hb,s);return e.jsx(GG,{scope:s,forceMount:r,children:e.jsx(Js,{present:r||i.open,children:e.jsx(Sc,{asChild:!0,container:a,children:n})})})};GE.displayName=hb;var Vo="PopoverContent",HE=j.forwardRef((t,s)=>{const r=HG(Vo,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,i=Li(Vo,t.__scopePopover);return e.jsx(Js,{present:n||i.open,children:i.modal?e.jsx(WG,{...a,ref:s}):e.jsx(YG,{...a,ref:s})})});HE.displayName=Vo;var KG=Pi("PopoverContent.RemoveScroll"),WG=j.forwardRef((t,s)=>{const r=Li(Vo,t.__scopePopover),n=j.useRef(null),a=jt(s,n),i=j.useRef(!1);return j.useEffect(()=>{const l=n.current;if(l)return hp(l)},[]),e.jsx(Xu,{as:KG,allowPinchZoom:!0,children:e.jsx(KE,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Re(t.onCloseAutoFocus,l=>{l.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Re(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Re(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),YG=j.forwardRef((t,s)=>{const r=Li(Vo,t.__scopePopover),n=j.useRef(!1),a=j.useRef(!1);return e.jsx(KE,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;r.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),KE=j.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=t,h=Li(Vo,r),x=im(r);return up(),e.jsx(Qu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(Ml,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(ip,{"data-state":YE(h.open),role:"dialog",id:h.contentId,...x,...m,ref:s,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),WE="PopoverClose",QG=j.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=Li(WE,r);return e.jsx(Ye.button,{type:"button",...n,ref:s,onClick:Re(t.onClick,()=>a.onOpenChange(!1))})});QG.displayName=WE;var XG="PopoverArrow",ZG=j.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=im(r);return e.jsx(lp,{...a,...n,ref:s})});ZG.displayName=XG;function YE(t){return t?"open":"closed"}var JG=VE,eH=zE,tH=GE,QE=HE;const io=JG,lo=eH,il=j.forwardRef(({className:t,align:s="center",sideOffset:r=4,...n},a)=>e.jsx(tH,{children:e.jsx(QE,{ref:a,align:s,sideOffset:r,className:_e("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));il.displayName=QE.displayName;const sH=Qt({title:Ne().min(1,"Title is required").max(100,"Title too long"),description:Ne().optional(),type:Ne().min(1,"Task type is required"),department:Ne().optional(),priority:Cs(["low","medium","high","urgent"]).default("medium"),propertyId:Zt().min(1,"Property is required"),assignedTo:Ne().optional(),dueDate:ji().optional(),estimatedCost:Zt().optional(),isRecurring:Vr().default(!1),recurringType:Cs(["daily","weekly","monthly","yearly"]).optional(),recurringInterval:Zt().min(1).default(1).optional()}),rH=[{value:"cleaning",label:"Cleaning"},{value:"maintenance",label:"Maintenance"},{value:"pool-service",label:"Pool Service"},{value:"garden",label:"Garden Care"},{value:"inspection",label:"Inspection"},{value:"repair",label:"Repair"},{value:"landscaping",label:"Landscaping"},{value:"technology",label:"Technology"},{value:"security",label:"Security"},{value:"guest-service",label:"Guest Service"}],nH=[{value:"housekeeping",label:"Housekeeping"},{value:"maintenance",label:"Maintenance"},{value:"landscaping",label:"Landscaping"},{value:"pool",label:"Pool Service"},{value:"guest-services",label:"Guest Services"},{value:"security",label:"Security"},{value:"technology",label:"Technology"}],z1=[{name:"Deep Clean",title:"Deep Cleaning Service",description:"Complete deep cleaning including floors, windows, bathrooms, kitchen, furniture, and all surfaces. Remove all stains and sanitize all areas.",type:"cleaning",department:"housekeeping",priority:"medium",estimatedCost:150},{name:"Steam Clean",title:"Steam Cleaning Service",description:"Professional steam cleaning of carpets, upholstery, mattresses, and curtains. Deep sanitization using high-temperature steam.",type:"cleaning",department:"housekeeping",priority:"medium",estimatedCost:120},{name:"General Maintenance",title:"General Property Maintenance",description:"Routine maintenance check including plumbing, electrical, HVAC, locks, doors, windows, and general property condition assessment.",type:"maintenance",department:"maintenance",priority:"low",estimatedCost:80},{name:"Pool Service",title:"Pool Cleaning & Maintenance",description:"Complete pool service including water testing, chemical balancing, skimming, vacuuming, filter cleaning, and equipment check.",type:"pool-service",department:"pool",priority:"medium",estimatedCost:100},{name:"Garden Care",title:"Garden Maintenance",description:"Lawn mowing, hedge trimming, weeding, plant care, and general garden tidying to keep property landscape pristine.",type:"garden",department:"landscaping",priority:"low",estimatedCost:90}];function Tp({isOpen:t,onOpenChange:s,trigger:r,onCreated:n}){const[a,i]=j.useState(),{toast:l}=Xe(),o=ut();X.useEffect(()=>{console.log("CreateTaskDialog - isOpen changed to:",t)},[t]);const{data:c=[]}=ge({queryKey:["/api/properties"]}),{data:d=[]}=ge({queryKey:["/api/users"]}),u=Array.isArray(c)?c:[],m=Array.isArray(d)?d:[];console.log("usersArray",m);const h=Ft({resolver:es(sH),defaultValues:{title:"",description:"",type:"",department:"",priority:"medium",propertyId:0,assignedTo:"unassigned",estimatedCost:void 0,isRecurring:!1,recurringInterval:1}}),x=Ce({mutationFn:async v=>{const b={...v,dueDate:a?a.toISOString():null,estimatedCost:v.estimatedCost||null,assignedTo:v.assignedTo==="unassigned"?null:v.assignedTo,description:v.description||null,department:v.department||null,recurringType:v.isRecurring?v.recurringType:null,recurringInterval:v.isRecurring?v.recurringInterval:null};return console.log("Creating task with data:",b),await fe("POST","/api/tasks",b)},onSuccess:v=>{console.log("Task created successfully:",v),o.invalidateQueries({queryKey:["/api/tasks"]}),o.invalidateQueries({queryKey:["/api/dashboard"]}),o.invalidateQueries({queryKey:["/api/dashboard/recent-tasks"]}),o.invalidateQueries({queryKey:["/api/dashboard/task-stats"]}),o.invalidateQueries({queryKey:["/api/dashboard/stats"]}),o.refetchQueries({queryKey:["/api/tasks"]}),o.refetchQueries({queryKey:["/api/dashboard/recent-tasks"]}),o.refetchQueries({queryKey:["/api/dashboard/task-stats"]}),l({title:"Success",description:`Task "${v.title||"New task"}" created successfully`}),n?.(v),h.reset(),i(void 0),s(!1)},onError:v=>{console.error("Task creation error:",v),l({title:"Error",description:v.message||"Failed to create task. Please try again.",variant:"destructive"})}}),g=v=>{const b=z1.find(y=>y.name===v);b&&(h.setValue("title",b.title),h.setValue("description",b.description),h.setValue("type",b.type),h.setValue("department",b.department),h.setValue("priority",b.priority),h.setValue("estimatedCost",b.estimatedCost),l({title:"Template Applied",description:`"${b.name}" template has been applied. You can still modify the fields.`}))},p=v=>{console.log("Form submitted with data:",v),x.mutate(v)},f=e.jsxs(qe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create New Task"}),e.jsx(Pt,{children:"Add a new task to be assigned and tracked in the system."})]}),e.jsxs("div",{className:"border-b pb-4 mb-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Quick Templates"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:z1.map(v=>e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>g(v.name),className:"text-xs h-auto py-2","data-testid":`button-template-${v.name.toLowerCase().replace(" ","-")}`,children:v.name},v.name))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click a template to auto-fill the form"})]}),e.jsx(Wt,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(p),className:"space-y-4",children:[e.jsx(de,{control:h.control,name:"title",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Task Title *"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"e.g. Pool cleaning and chemical balancing",...v})}),e.jsx(xe,{})]})}),e.jsx(de,{control:h.control,name:"description",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Description"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Detailed description of the task...",rows:3,...v})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:h.control,name:"propertyId",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Property *"}),e.jsxs(te,{onValueChange:b=>v.onChange(parseInt(b)),children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})})}),e.jsx(ee,{children:u.map(b=>e.jsx(P,{value:b.id.toString(),children:b.name},b.id))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:h.control,name:"type",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Task Type *"}),e.jsxs(te,{onValueChange:v.onChange,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select type"})})}),e.jsx(ee,{children:rH.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:h.control,name:"department",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Department"}),e.jsxs(te,{onValueChange:v.onChange,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select department"})})}),e.jsx(ee,{children:nH.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:h.control,name:"priority",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Priority"}),e.jsxs(te,{onValueChange:v.onChange,defaultValue:v.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select priority"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"low",children:"Low"}),e.jsx(P,{value:"medium",children:"Medium"}),e.jsx(P,{value:"high",children:"High"}),e.jsx(P,{value:"urgent",children:"Urgent"})]})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:h.control,name:"assignedTo",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Assign To"}),e.jsxs(te,{onValueChange:v.onChange,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select assignee"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"unassigned",children:"Unassigned"}),m.filter(b=>b.role==="staff"||b.role==="admin").map(b=>e.jsxs(P,{value:b.id,children:[b.name," (",b.role,")"]},b.id))]})]}),e.jsx(xe,{})]})}),e.jsxs(oe,{children:[e.jsx(ue,{children:"Due Date"}),e.jsxs(io,{children:[e.jsx(lo,{asChild:!0,children:e.jsx(ce,{children:e.jsxs(R,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[a?rt(a,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(We,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(il,{className:"w-auto p-0",align:"start",children:e.jsx(al,{mode:"single",selected:a,onSelect:i,disabled:v=>v<new Date,initialFocus:!0})})]}),e.jsx(Kt,{children:"Optional deadline for this task"})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/10",children:[e.jsx(de,{control:h.control,name:"isRecurring",render:({field:v})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"Recurring Task"}),e.jsx(Kt,{children:"Create a task that repeats on a schedule"})]}),e.jsx(ce,{children:e.jsx(nl,{checked:v.value,onCheckedChange:v.onChange})})]})}),h.watch("isRecurring")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:h.control,name:"recurringType",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Frequency"}),e.jsxs(te,{onValueChange:v.onChange,value:v.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select frequency"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"daily",children:"Daily"}),e.jsx(P,{value:"weekly",children:"Weekly"}),e.jsx(P,{value:"monthly",children:"Monthly"}),e.jsx(P,{value:"yearly",children:"Yearly"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:h.control,name:"recurringInterval",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Every"}),e.jsx(ce,{children:e.jsx(H,{type:"number",min:"1",placeholder:"1",...v,onChange:b=>v.onChange(parseInt(b.target.value)||1)})}),e.jsxs(Kt,{children:[h.watch("recurringType")==="daily"&&"day(s)",h.watch("recurringType")==="weekly"&&"week(s)",h.watch("recurringType")==="monthly"&&"month(s)",h.watch("recurringType")==="yearly"&&"year(s)"]}),e.jsx(xe,{})]})})]})]}),e.jsx(de,{control:h.control,name:"estimatedCost",render:({field:v})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Estimated Cost (THB)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",placeholder:"0.00",...v,onChange:b=>v.onChange(parseFloat(b.target.value))})}),e.jsx(Kt,{children:"Optional estimated cost in Thai Baht"}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:x.isPending,children:"Cancel"}),e.jsx(R,{type:"submit",disabled:x.isPending,children:x.isPending?"Creating...":"Create Task"})]})]})})]});return r?e.jsxs(Ve,{open:t,onOpenChange:s,children:[e.jsx(Yt,{asChild:!0,children:r}),f]}):e.jsx(Ve,{open:t,onOpenChange:s,children:f})}function aH(){const{user:t}=vn(),[s,r]=j.useState(""),[n,a]=j.useState("all"),[i,l]=j.useState("all"),[o,c]=j.useState("all"),[d,u]=j.useState("all"),[m,h]=j.useState(null),[x,g]=j.useState(!1),[p,f]=j.useState(!1),[v,b]=j.useState(!1),[y,S]=j.useState(null),[w,C]=j.useState({}),[k,A]=j.useState([]),{toast:N}=Xe(),M=ut(),F=ve=>{const lt=ve.getFullYear(),ms=String(ve.getMonth()+1).padStart(2,"0"),Fs=String(ve.getDate()).padStart(2,"0");return`${lt}-${ms}-${Fs}`},I=ve=>{const lt=new Date,ms=new Date,Fs=new Date;switch(ve){case"today":ms.setHours(0,0,0,0),Fs.setHours(23,59,59,999);break;case"this-week":ms.setDate(lt.getDate()-lt.getDay()),ms.setHours(0,0,0,0),Fs.setDate(ms.getDate()+6),Fs.setHours(23,59,59,999);break;case"next-7-days":ms.setHours(0,0,0,0),Fs.setDate(lt.getDate()+7),Fs.setHours(23,59,59,999);break;case"next-30-days":ms.setHours(0,0,0,0),Fs.setDate(lt.getDate()+30),Fs.setHours(23,59,59,999);break;case"next-90-days":ms.setHours(0,0,0,0),Fs.setDate(lt.getDate()+90),Fs.setHours(23,59,59,999);break;default:return null}return{from:F(ms),to:F(Fs)}},V=ve=>{if(u(ve),ve==="all")h(null);else{if(ve==="custom")return;{const lt=I(ve);h(lt)}}},[E]=pr(),G=X.useMemo(()=>{try{const ve=E.includes("?")?E.split("?")[1]:window.location.search.slice(1),lt=new URLSearchParams(ve).get("propertyId");return lt&&!Number.isNaN(Number(lt))?String(Number(lt)):""}catch{return""}},[E]),Y=j.useMemo(()=>{const ve=new URLSearchParams;return m&&(ve.append("due_from",m.from),ve.append("due_to",m.to)),G&&ve.append("propertyId",G),ve.toString()},[m,G]),{data:Q=[],isLoading:T,error:B}=ge({queryKey:["/api/tasks",Y],queryFn:async()=>{const ve=`/api/tasks${Y?`?${Y}`:""}`;return(await fetch(ve)).json()},staleTime:0,gcTime:0}),W=Array.isArray(Q)?Q:[];console.log("UltraFastTasks - Tasks loaded:",W.length,"tasks");const{data:he=[]}=ge({queryKey:["/api/properties"]}),{data:Se=[]}=ge({queryKey:["/api/users"]}),z=Array.isArray(he)?he:[],L=Array.isArray(Se)?Se:[],le=j.useMemo(()=>{const ve=new Map;return z.forEach(lt=>{ve.set(lt.id,lt.name)}),ve},[z]),Z=j.useMemo(()=>{const ve=new Map;return L.forEach(lt=>{ve.set(lt.id,lt.name)}),ve},[L]),me=j.useMemo(()=>W.map(ve=>({...ve,propertyName:le.get(ve.propertyId)||`Property ${ve.propertyId}`,assigneeName:ve.assignedTo?Z.get(ve.assignedTo)||"Unknown User":"Unassigned"})),[W,le,Z]),U=j.useMemo(()=>me.filter(ve=>{const lt=!G||ve.propertyId===Number(G),ms=s===""||ve.title&&ve.title.toLowerCase().includes(s.toLowerCase())||ve.description&&ve.description.toLowerCase().includes(s.toLowerCase())||ve.propertyName&&ve.propertyName.toLowerCase().includes(s.toLowerCase()),Fs=n==="all"||ve.status===n,ti=i==="all"||ve.priority===i,si=o==="all"||ve.type===o;return lt&&ms&&Fs&&ti&&si}),[me,s,n,i,o,G]),je=j.useMemo(()=>({totalTasks:me.length,pendingTasks:me.filter(ve=>ve.status==="pending").length,inProgressTasks:me.filter(ve=>ve.status==="in-progress").length,completedTasks:me.filter(ve=>ve.status==="completed").length,overdueTasks:me.filter(ve=>ve.dueDate?new Date(ve.dueDate)<new Date&&ve.status!=="completed":!1).length,highPriorityTasks:me.filter(ve=>ve.priority==="high"||ve.priority==="urgent").length}),[me]),ye=ve=>{switch(ve){case"pending":return"bg-yellow-100 text-yellow-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ae=ve=>{switch(ve){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-orange-100 text-orange-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},pe=ve=>{switch(ve){case"pending":return e.jsx(Ke,{className:"h-4 w-4"});case"in-progress":return e.jsx(As,{className:"h-4 w-4"});case"completed":return e.jsx(Mn,{className:"h-4 w-4"});default:return e.jsx(Nt,{className:"h-4 w-4"})}},Je=ve=>{try{return new Date(ve).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return ve}},et=Ce({mutationFn:async ve=>await fe("PUT",`/api/tasks/${ve}`,{status:"completed"}),onSuccess:async()=>{await M.invalidateQueries({queryKey:["/api/tasks"]}),await M.refetchQueries({queryKey:["/api/tasks"]}),t?.id&&(console.log("🎮 Task completed! Invalidating achievement cache for user:",t.id),await M.invalidateQueries({queryKey:[`/api/achievements/user/${t.id}`]}),await M.invalidateQueries({queryKey:["/api/achievements/definitions"]}),await M.refetchQueries({queryKey:[`/api/achievements/user/${t.id}`]})),N({title:"Success",description:"Task completed successfully"})},onError:ve=>{N({title:"Error",description:ve.message||"Failed to complete task",variant:"destructive"})}}),Pe=Ce({mutationFn:async({id:ve,data:lt})=>await fe("PUT",`/api/tasks/${ve}`,lt),onSuccess:async(ve,lt)=>{await M.invalidateQueries({queryKey:["/api/tasks"]}),await M.refetchQueries({queryKey:["/api/tasks"]}),(lt.data.status==="completed"||lt.data.status==="approved")&&t?.id&&(console.log("🎮 Task status updated! Invalidating achievement cache for user:",t.id,"status:",lt.data.status),await M.invalidateQueries({queryKey:[`/api/achievements/user/${t.id}`]}),await M.invalidateQueries({queryKey:["/api/achievements/definitions"]}),await M.refetchQueries({queryKey:[`/api/achievements/user/${t.id}`]})),b(!1),S(null),C({}),A([]),N({title:"Success",description:"Task updated successfully"})},onError:ve=>{N({title:"Error",description:ve.message||"Failed to update task",variant:"destructive"})}}),mt=Ce({mutationFn:async()=>(M.invalidateQueries({queryKey:["/api/tasks"]}),"refreshed"),onSuccess:()=>{N({title:"Tasks Refreshed",description:"Task list updated with latest data"})}}),Mt=Ce({mutationFn:async()=>await fe("DELETE","/api/tasks/bulk-delete/expired"),onSuccess:ve=>{M.invalidateQueries({queryKey:["/api/tasks"]}),N({title:"Expired tasks deleted",description:`Successfully deleted ${ve?.deletedCount||0} expired tasks`}),f(!1)},onError:ve=>{N({title:"Error deleting expired tasks",description:ve.message||"Failed to delete expired tasks",variant:"destructive"})}}),os=Ce({mutationFn:async()=>await fe("DELETE","/api/tasks/bulk-delete/completed"),onSuccess:ve=>{M.invalidateQueries({queryKey:["/api/tasks"]}),N({title:"Completed tasks deleted",description:`Successfully deleted ${ve?.deletedCount||0} completed tasks`}),f(!1)},onError:ve=>{N({title:"Error deleting completed tasks",description:ve.message||"Failed to delete completed tasks",variant:"destructive"})}}),lr=Ce({mutationFn:async()=>await fe("DELETE","/api/tasks/bulk-delete/old"),onSuccess:ve=>{M.invalidateQueries({queryKey:["/api/tasks"]}),N({title:"Old tasks deleted",description:`Successfully deleted ${ve?.deletedCount||0} old tasks`}),f(!1)},onError:ve=>{N({title:"Error deleting old tasks",description:ve.message||"Failed to delete old tasks",variant:"destructive"})}}),ie=ve=>{console.log("✅ Complete task button clicked! Task ID:",ve),et.mutate(ve)},be=ve=>{console.log("🔧 Edit task button clicked! Task ID:",ve);const lt=me.find(ms=>ms.id===ve);lt&&(S(lt),C({title:lt.title||"",description:lt.description||"",type:lt.type||"maintenance",priority:lt.priority||"medium",status:lt.status||"pending",assignedTo:lt.assignedTo||"",dueDate:lt.dueDate?lt.dueDate.split("T")[0]:"",propertyId:lt.propertyId||""}),A(lt.evidencePhotos||[]),b(!0))},ke=ve=>{const lt=ve.target.files;if(!lt)return;const ms=["image/jpeg","image/jpg","image/png"],Fs=6,ti=1920,si=1080;if(k.length+lt.length>Fs){N({title:"Too many photos",description:`You can upload a maximum of ${Fs} photos per task. Currently have ${k.length} photo(s).`,variant:"destructive"}),ve.target.value="";return}Array.from(lt).forEach(ym=>{if(!ms.includes(ym.type)){N({title:"Invalid file type",description:"Only .jpg and .png files are allowed",variant:"destructive"});return}const ri=new FileReader;ri.onloadend=()=>{if(ri.result){const ni=new Image;ni.onload=()=>{if(ni.width>ti||ni.height>si){N({title:"Photo too large",description:`Photo dimensions must not exceed ${ti}×${si} pixels (Full HD). This photo is ${ni.width}×${ni.height} pixels.`,variant:"destructive"});return}A(bm=>[...bm,ri.result])},ni.src=ri.result}},ri.readAsDataURL(ym)}),ve.target.value=""},Ge=ve=>{A(lt=>lt.filter((ms,Fs)=>Fs!==ve))},Be=()=>{if(y){const ve={};w.title&&(ve.title=w.title),w.description&&(ve.description=w.description),w.type&&(ve.type=w.type),w.priority&&(ve.priority=w.priority),w.status&&(ve.status=w.status),w.assignedTo&&(ve.assignedTo=w.assignedTo),w.propertyId&&(ve.propertyId=w.propertyId),w.dueDate&&(ve.dueDate=new Date(w.dueDate)),ve.evidencePhotos=k,console.log("Sending update data:",ve),Pe.mutate({id:y.id,data:ve})}},Ie=()=>{mt.mutate()},ct=()=>{Mt.mutate()},Gt=()=>{os.mutate()},rs=()=>{lr.mutate()};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Task Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage all property maintenance and operational tasks"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",onClick:Ie,disabled:mt.isPending,className:"gap-2",children:[e.jsx(cs,{className:`h-4 w-4 ${mt.isPending?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>{console.log("Create Task button clicked"),g(!0),console.log("Dialog state should be:",!0)},className:"gap-2","data-testid":"button-create-task",children:[e.jsx(ht,{className:"h-4 w-4"}),"Create Task"]}),e.jsxs(R,{onClick:()=>f(!0),variant:"outline",className:"gap-2 border-red-200 text-red-600 hover:bg-red-50",children:[e.jsx(Er,{className:"h-4 w-4"}),"Bulk Actions"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(As,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:je.totalTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All tasks"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:je.pendingTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting start"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(As,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:je.inProgressTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:je.completedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recently finished"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"High Priority"}),e.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:je.highPriorityTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Urgent attention"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(We,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:je.overdueTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Past due date"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(H,{placeholder:"Search tasks by title, description, or property...",className:"pl-10",value:s,onChange:ve=>r(ve.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Kd,{children:[e.jsx(Wd,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"w-44",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),d==="all"&&"All Dates",d==="today"&&"Today",d==="this-week"&&"This Week",d==="next-7-days"&&"Next 7 Days",d==="next-30-days"&&"Next 30 Days",d==="next-90-days"&&"Next 90 Days",d==="custom"&&"Custom Range"]})}),e.jsxs(_o,{align:"end",children:[e.jsx(Pr,{onClick:()=>V("all"),children:"All Dates"}),e.jsx(Pr,{onClick:()=>V("today"),children:"Today"}),e.jsx(Pr,{onClick:()=>V("this-week"),children:"This Week"}),e.jsx(Pr,{onClick:()=>V("next-7-days"),children:"Next 7 Days"}),e.jsx(Pr,{onClick:()=>V("next-30-days"),children:"Next 30 Days"}),e.jsx(Pr,{onClick:()=>V("next-90-days"),children:"Next 90 Days"})]})]}),e.jsxs(te,{value:n,onValueChange:a,children:[e.jsxs(J,{className:"w-40",children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),e.jsx(se,{placeholder:"Status"})]}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"in-progress",children:"In Progress"}),e.jsx(P,{value:"completed",children:"Completed"})]})]}),e.jsxs(te,{value:i,onValueChange:l,children:[e.jsx(J,{className:"w-40",children:e.jsx(se,{placeholder:"Priority"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Priority"}),e.jsx(P,{value:"high",children:"High"}),e.jsx(P,{value:"medium",children:"Medium"}),e.jsx(P,{value:"low",children:"Low"})]})]}),e.jsxs(te,{value:o,onValueChange:c,children:[e.jsx(J,{className:"w-40",children:e.jsx(se,{placeholder:"Type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Types"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"cleaning",children:"Cleaning"}),e.jsx(P,{value:"landscaping",children:"Landscaping"}),e.jsx(P,{value:"technology",children:"Technology"}),e.jsx(P,{value:"security",children:"Security"})]})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{children:["Tasks (",U.length,")"]}),e.jsx(Te,{children:"Manage all property tasks and assignments"})]}),e.jsx(D,{children:U.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(As,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or create a new task."}),e.jsxs(R,{onClick:()=>g(!0),children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Create New Task"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Task"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Assignee"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Priority"}),e.jsx(Oe,{children:"Due Date"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:[...U].sort((ve,lt)=>new Date(lt.dueDate).getTime()-new Date(ve.dueDate).getTime()).map(ve=>e.jsxs(wt,{children:[e.jsx(Ae,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:ve.title||"Untitled Task"}),e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:ve.description||"No description"}),ve.estimatedCost&&e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:e.jsxs("span",{children:["฿",parseFloat(ve.estimatedCost||0).toLocaleString()]})})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:ve.propertyName})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:ve.assigneeName})]})}),e.jsx(Ae,{children:e.jsx(q,{variant:"outline",className:"capitalize",children:(ve.type||"").replace("-"," ")})}),e.jsx(Ae,{children:e.jsx(q,{className:ae(ve.priority||"medium"),children:ve.priority||"medium"})}),e.jsx(Ae,{children:e.jsx("div",{className:"text-sm",children:ve.dueDate?Je(ve.dueDate):"No due date"})}),e.jsx(Ae,{children:e.jsx(q,{className:ye(ve.status||"pending"),children:e.jsxs("span",{className:"flex items-center gap-1",children:[pe(ve.status||"pending"),(ve.status||"pending").replace("-"," ")]})})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>be(ve.id),children:"Edit"}),ve.status!=="completed"&&e.jsx(R,{variant:"default",size:"sm",onClick:()=>ie(ve.id),disabled:et.isPending,children:et.isPending?"Completing...":"Complete"})]})})]},ve.id))})]})})})]}),e.jsx(Tp,{isOpen:x,onOpenChange:g,onCreated:()=>{M.invalidateQueries({queryKey:["/api/tasks"],exact:!1}),M.refetchQueries({queryKey:["/api/tasks"],exact:!1})}}),e.jsx(Ve,{open:p,onOpenChange:f,children:e.jsxs(qe,{className:"sm:max-w-md",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Bulk Task Management"}),e.jsxs(Pt,{children:["Clean up old tasks to improve performance. We currently have"," ",W.length," tasks."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs(R,{onClick:ct,variant:"destructive",className:"w-full",disabled:Mt.isPending,children:[e.jsx(Er,{className:"mr-2 h-4 w-4"}),Mt.isPending?"Deleting...":"Delete Expired Tasks (30+ days old)"]}),e.jsxs(R,{onClick:Gt,variant:"outline",className:"w-full border-orange-200 text-orange-600 hover:bg-orange-50",disabled:os.isPending,children:[e.jsx(Mn,{className:"mr-2 h-4 w-4"}),os.isPending?"Deleting...":"Delete All Completed Tasks"]}),e.jsxs(R,{onClick:rs,variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50",disabled:lr.isPending,children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),lr.isPending?"Deleting...":"Delete Tasks Older Than 90 Days"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{children:"• Expired tasks: Tasks older than 30 days"}),e.jsx("p",{children:"• Completed tasks: All tasks marked as completed"}),e.jsx("p",{children:"• Old tasks: All tasks older than 90 days regardless of status"})]})]}),e.jsx(Nr,{children:e.jsx(R,{variant:"outline",onClick:()=>f(!1),children:"Cancel"})})]})}),e.jsx(Ve,{open:v,onOpenChange:b,children:e.jsxs(qe,{className:"sm:max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Edit Task"}),e.jsx(Pt,{children:"Update task details and save changes"})]}),e.jsxs("div",{className:"grid gap-4 py-4 overflow-y-auto max-h-[60vh]",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"title",className:"text-right font-medium",children:"Title"}),e.jsx(H,{id:"title",value:w.title||"",onChange:ve=>C({...w,title:ve.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"description",className:"text-right font-medium",children:"Description"}),e.jsx(H,{id:"description",value:w.description||"",onChange:ve=>C({...w,description:ve.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"type",className:"text-right font-medium",children:"Type"}),e.jsxs(te,{value:w.type||"maintenance",onValueChange:ve=>C({...w,type:ve}),children:[e.jsx(J,{className:"col-span-3",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"cleaning",children:"Cleaning"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"inspection",children:"Inspection"}),e.jsx(P,{value:"repair",children:"Repair"}),e.jsx(P,{value:"setup",children:"Setup"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"priority",className:"text-right font-medium",children:"Priority"}),e.jsxs(te,{value:w.priority||"medium",onValueChange:ve=>C({...w,priority:ve}),children:[e.jsx(J,{className:"col-span-3",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"low",children:"Low"}),e.jsx(P,{value:"medium",children:"Medium"}),e.jsx(P,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"status",className:"text-right font-medium",children:"Status"}),e.jsxs(te,{value:w.status||"pending",onValueChange:ve=>C({...w,status:ve}),children:[e.jsx(J,{className:"col-span-3",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"approved",children:"Approved"}),e.jsx(P,{value:"in-progress",children:"In Progress"}),e.jsx(P,{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"assignedTo",className:"text-right font-medium",children:"Assignee"}),e.jsxs(te,{value:w.assignedTo||"",onValueChange:ve=>C({...w,assignedTo:ve}),children:[e.jsx(J,{className:"col-span-3",children:e.jsx(se,{placeholder:"Select assignee"})}),e.jsx(ee,{children:L.filter(ve=>ve.role==="staff"||ve.role==="admin").map(ve=>e.jsxs(P,{value:ve.id,children:[ve.firstName," ",ve.lastName]},ve.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"dueDate",className:"text-right font-medium",children:"Due Date"}),e.jsx(H,{id:"dueDate",type:"date",value:w.dueDate||"",onChange:ve=>C({...w,dueDate:ve.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("label",{htmlFor:"propertyId",className:"text-right font-medium",children:"Property"}),e.jsxs(te,{value:w.propertyId?.toString()||"",onValueChange:ve=>C({...w,propertyId:parseInt(ve)}),children:[e.jsx(J,{className:"col-span-3",children:e.jsx(se,{placeholder:"Select property"})}),e.jsx(ee,{children:z.map(ve=>e.jsx(P,{value:ve.id.toString(),children:ve.name},ve.id))})]})]}),k.length>0&&e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[e.jsx("label",{className:"text-right font-medium pt-2",children:"Evidence Photos"}),e.jsx("div",{className:"col-span-3",children:e.jsx("div",{className:"grid grid-cols-3 gap-2",children:k.map((ve,lt)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:ve,alt:`Evidence ${lt+1}`,className:"w-full h-20 object-cover rounded border"}),e.jsx("button",{onClick:()=>Ge(lt),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity","data-testid":`button-remove-photo-${lt}`,children:e.jsx(Is,{className:"h-3 w-3"})})]},lt))})})]})]}),e.jsxs(Nr,{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",id:"evidence-upload",accept:".jpg, .jpeg,.png, .pdf",multiple:!0,onChange:ke,className:"hidden","data-testid":"input-evidence-upload"}),e.jsxs(R,{variant:"outline",onClick:()=>document.getElementById("evidence-upload")?.click(),className:"bg-blue-600 text-white hover:bg-blue-700",disabled:k.length>=10,"data-testid":"button-upload-evidence",children:[e.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Upload Evidence"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[k.length,"/10 photos"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",onClick:()=>{b(!1),A([])},children:"Cancel"}),e.jsx(R,{onClick:Be,disabled:Pe.isPending,children:Pe.isPending?"Saving...":"Save Changes"})]})]})]})})]})}function Rr(){const{data:t,isLoading:s}=ge({queryKey:["/api/auth/user"],retry:!1});return{user:t,isLoading:s,isAuthenticated:!!t}}function iH(){return GA.useSyncExternalStore(lH,()=>!0,()=>!1)}function lH(){return()=>{}}var xb="Avatar",[oH,hke]=Zs(xb),[cH,XE]=oH(xb),ZE=j.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,i]=j.useState("idle");return e.jsx(cH,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(Ye.span,{...n,ref:s})})});ZE.displayName=xb;var JE="AvatarImage",eM=j.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=t,l=XE(JE,r),o=dH(n,i),c=Rs(d=>{a(d),l.onImageLoadingStatusChange(d)});return $s(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?e.jsx(Ye.img,{...i,ref:s,src:n}):null});eM.displayName=JE;var tM="AvatarFallback",sM=j.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,i=XE(tM,r),[l,o]=j.useState(n===void 0);return j.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(c)}},[n]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(Ye.span,{...a,ref:s}):null});sM.displayName=tM;function G1(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function dH(t,{referrerPolicy:s,crossOrigin:r}){const n=iH(),a=j.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[l,o]=j.useState(()=>G1(i,t));return $s(()=>{o(G1(i,t))},[i,t]),$s(()=>{const c=m=>()=>{o(m)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),s&&(i.referrerPolicy=s),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,r,s]),l}var rM=ZE,nM=eM,aM=sM;const _n=j.forwardRef(({className:t,...s},r)=>e.jsx(rM,{ref:r,className:_e("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));_n.displayName=rM.displayName;const Fl=j.forwardRef(({className:t,...s},r)=>e.jsx(nM,{ref:r,className:_e("aspect-square h-full w-full",t),...s}));Fl.displayName=nM.displayName;const In=j.forwardRef(({className:t,...s},r)=>e.jsx(aM,{ref:r,className:_e("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));In.displayName=aM.displayName;function uH(t,s){return j.useReducer((r,n)=>s[r][n]??r,t)}var pb="ScrollArea",[iM,xke]=Zs(pb),[mH,bn]=iM(pb),lM=j.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...l}=t,[o,c]=j.useState(null),[d,u]=j.useState(null),[m,h]=j.useState(null),[x,g]=j.useState(null),[p,f]=j.useState(null),[v,b]=j.useState(0),[y,S]=j.useState(0),[w,C]=j.useState(!1),[k,A]=j.useState(!1),N=jt(s,F=>c(F)),M=Ac(a);return e.jsx(mH,{scope:r,type:n,dir:M,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:u,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:g,scrollbarXEnabled:w,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:f,scrollbarYEnabled:k,onScrollbarYEnabledChange:A,onCornerWidthChange:b,onCornerHeightChange:S,children:e.jsx(Ye.div,{dir:M,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":y+"px",...t.style}})})});lM.displayName=pb;var oM="ScrollAreaViewport",cM=j.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=t,l=bn(oM,r),o=j.useRef(null),c=jt(s,o,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Ye.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});cM.displayName=oM;var ya="ScrollAreaScrollbar",fb=j.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=bn(ya,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=t.orientation==="horizontal";return j.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?e.jsx(hH,{...n,ref:s,forceMount:r}):a.type==="scroll"?e.jsx(xH,{...n,ref:s,forceMount:r}):a.type==="auto"?e.jsx(dM,{...n,ref:s,forceMount:r}):a.type==="always"?e.jsx(gb,{...n,ref:s}):null});fb.displayName=ya;var hH=j.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=bn(ya,t.__scopeScrollArea),[i,l]=j.useState(!1);return j.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(Js,{present:r||i,children:e.jsx(dM,{"data-state":i?"visible":"hidden",...n,ref:s})})}),xH=j.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=bn(ya,t.__scopeScrollArea),i=t.orientation==="horizontal",l=Op(()=>c("SCROLL_END"),100),[o,c]=uH("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),j.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const h=()=>{const x=d[u];m!==x&&(c("SCROLL"),l()),m=x};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,l]),e.jsx(Js,{present:r||o!=="hidden",children:e.jsx(gb,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:Re(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Re(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),dM=j.forwardRef((t,s)=>{const r=bn(ya,t.__scopeScrollArea),{forceMount:n,...a}=t,[i,l]=j.useState(!1),o=t.orientation==="horizontal",c=Op(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(o?d:u)}},10);return qo(r.viewport,c),qo(r.content,c),e.jsx(Js,{present:n||i,children:e.jsx(gb,{"data-state":i?"visible":"hidden",...a,ref:s})})}),gb=j.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,a=bn(ya,t.__scopeScrollArea),i=j.useRef(null),l=j.useRef(0),[o,c]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=pM(o.viewport,o.content),u={...n,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function m(h,x){return yH(h,l.current,o,x)}return r==="horizontal"?e.jsx(pH,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,x=H1(h,o,a.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):r==="vertical"?e.jsx(fH,{...u,ref:s,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,x=H1(h,o);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),pH=j.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=bn(ya,t.__scopeScrollArea),[l,o]=j.useState(),c=j.useRef(null),d=jt(s,c,i.onScrollbarXChange);return j.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(mM,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Dp(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),gM(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ih(l.paddingLeft),paddingEnd:Ih(l.paddingRight)}})}})}),fH=j.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,i=bn(ya,t.__scopeScrollArea),[l,o]=j.useState(),c=j.useRef(null),d=jt(s,c,i.onScrollbarYChange);return j.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx(mM,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Dp(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),gM(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ih(l.paddingTop),paddingEnd:Ih(l.paddingBottom)}})}})}),[gH,uM]=iM(ya),mM=j.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...h}=t,x=bn(ya,r),[g,p]=j.useState(null),f=jt(s,N=>p(N)),v=j.useRef(null),b=j.useRef(""),y=x.viewport,S=n.content-n.viewport,w=Rs(u),C=Rs(c),k=Op(m,10);function A(N){if(v.current){const M=N.clientX-v.current.left,F=N.clientY-v.current.top;d({x:M,y:F})}}return j.useEffect(()=>{const N=M=>{const F=M.target;g?.contains(F)&&w(M,S)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[y,g,S,w]),j.useEffect(C,[n,C]),qo(g,k),qo(x.content,k),e.jsx(gH,{scope:r,scrollbar:g,hasThumb:a,onThumbChange:Rs(i),onThumbPointerUp:Rs(l),onThumbPositionChange:C,onThumbPointerDown:Rs(o),children:e.jsx(Ye.div,{...h,ref:f,style:{position:"absolute",...h.style},onPointerDown:Re(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),v.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),A(N))}),onPointerMove:Re(t.onPointerMove,A),onPointerUp:Re(t.onPointerUp,N=>{const M=N.target;M.hasPointerCapture(N.pointerId)&&M.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=b.current,x.viewport&&(x.viewport.style.scrollBehavior=""),v.current=null})})})}),_h="ScrollAreaThumb",hM=j.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=uM(_h,t.__scopeScrollArea);return e.jsx(Js,{present:r||a.hasThumb,children:e.jsx(jH,{ref:s,...n})})}),jH=j.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:n,...a}=t,i=bn(_h,r),l=uM(_h,r),{onThumbPositionChange:o}=l,c=jt(s,m=>l.onThumbChange(m)),d=j.useRef(void 0),u=Op(()=>{d.current&&(d.current(),d.current=void 0)},100);return j.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(u(),!d.current){const x=bH(m,o);d.current=x,o()}};return o(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,u,o]),e.jsx(Ye.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Re(t.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),g=m.clientX-x.left,p=m.clientY-x.top;l.onThumbPointerDown({x:g,y:p})}),onPointerUp:Re(t.onPointerUp,l.onThumbPointerUp)})});hM.displayName=_h;var jb="ScrollAreaCorner",xM=j.forwardRef((t,s)=>{const r=bn(jb,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(vH,{...t,ref:s}):null});xM.displayName=jb;var vH=j.forwardRef((t,s)=>{const{__scopeScrollArea:r,...n}=t,a=bn(jb,r),[i,l]=j.useState(0),[o,c]=j.useState(0),d=!!(i&&o);return qo(a.scrollbarX,()=>{const u=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(u),c(u)}),qo(a.scrollbarY,()=>{const u=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(u),l(u)}),d?e.jsx(Ye.div,{...n,ref:s,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ih(t){return t?parseInt(t,10):0}function pM(t,s){const r=t/s;return isNaN(r)?0:r}function Dp(t){const s=pM(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*s;return Math.max(n,18)}function yH(t,s,r,n="ltr"){const a=Dp(r),i=a/2,l=s||i,o=a-l,c=r.scrollbar.paddingStart+l,d=r.scrollbar.size-r.scrollbar.paddingEnd-o,u=r.content-r.viewport,m=n==="ltr"?[0,u]:[u*-1,0];return fM([c,d],m)(t)}function H1(t,s,r="ltr"){const n=Dp(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-a,l=s.content-s.viewport,o=i-n,c=r==="ltr"?[0,l]:[l*-1,0],d=zj(t,c);return fM([0,l],[0,o])(d)}function fM(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function gM(t,s){return t>0&&t<s}var bH=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},l=r.left!==i.left,o=r.top!==i.top;(l||o)&&s(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Op(t,s){const r=Rs(t),n=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),j.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function qo(t,s){const r=Rs(s);$s(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,r])}var jM=lM,NH=cM,wH=xM;const Uo=j.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(jM,{ref:n,className:_e("relative overflow-hidden",t),...r,children:[e.jsx(NH,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(vM,{}),e.jsx(wH,{})]}));Uo.displayName=jM.displayName;const vM=j.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(fb,{ref:n,orientation:s,className:_e("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(hM,{className:"relative flex-1 rounded-full bg-border"})}));vM.displayName=fb.displayName;function SH(){const[t,s]=j.useState({isOpen:!1,type:null,lastOpenTime:null}),[r,n]=j.useState(!1);j.useEffect(()=>{if(t.isOpen&&t.lastOpenTime){const o=setTimeout(()=>{Date.now()-t.lastOpenTime>1500&&n(!0)},1600);return()=>clearTimeout(o)}else n(!1)},[t.isOpen,t.lastOpenTime]),j.useEffect(()=>{const o=c=>{c.key==="Escape"&&t.isOpen&&l()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t.isOpen]);const a=j.useCallback(o=>{s({isOpen:!0,type:o,lastOpenTime:Date.now()}),n(!1)},[]),i=j.useCallback(()=>{s({isOpen:!1,type:null,lastOpenTime:null}),n(!1)},[]),l=j.useCallback(()=>{document.querySelectorAll("[data-radix-popper-content-wrapper]").forEach(u=>u.remove()),document.querySelectorAll("[data-radix-portal]").forEach(u=>u.remove()),s({isOpen:!1,type:null,lastOpenTime:null}),n(!1),document.body.style.overflow="",document.body.style.pointerEvents="";const d=document.body;d.style.position="",d.style.zIndex=""},[]);return{modalState:t,isStuck:r,openModal:a,closeModal:i,forceCloseAll:l}}function CH(){const t=ut(),{openModal:s,closeModal:r}=SH(),{isAuthenticated:n}=Rr(),[a,i]=j.useState(!1),{data:l=[]}=ge({queryKey:["/api/notifications"],staleTime:10*60*1e3,refetchOnMount:!1,enabled:n&&a}),{data:o=[]}=ge({queryKey:["/api/notifications/unread"],refetchInterval:n&&a?6e4:!1,staleTime:5*60*1e3,refetchOnMount:!1,enabled:n&&a}),c=Ce({mutationFn:async f=>fe("POST",`/api/notifications/${f}/read`),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),d=Ce({mutationFn:async()=>fe("POST","/api/notifications/read-all"),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),u=Ce({mutationFn:async f=>fe("DELETE",`/api/notifications/${f}`),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread"]})}}),m=f=>{switch(f){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"normal":return"bg-blue-500";case"low":return"bg-gray-500";default:return"bg-blue-500"}},h=f=>{switch(f){case"task_assignment":return"📋";case"booking_update":return"🏠";case"payout_action":return"💰";case"maintenance_approval":return"🔧";default:return"🔔"}},x=f=>{f.isRead||c.mutate(f.id),f.actionUrl&&(window.location.href=f.actionUrl)},g=o.length,p=f=>{i(f),f?s("notifications"):r()};return e.jsxs(Kd,{open:a,onOpenChange:p,children:[e.jsx(Wd,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"icon",className:"relative",children:[e.jsx(Vs,{className:"h-4 w-4"}),g>0&&e.jsx(q,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:g>99?"99+":g})]})}),e.jsxs(_o,{align:"end",className:"w-80",children:[e.jsxs(Yd,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Notifications"}),g>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:f=>{f.preventDefault(),f.stopPropagation(),d.mutate()},disabled:d.isPending,children:[e.jsx(Zx,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),e.jsx(Ni,{}),!Array.isArray(l)||l.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):e.jsx(Uo,{className:"h-96",children:l.slice(0,10).map(f=>e.jsx(Pr,{className:"flex flex-col items-start p-3 cursor-pointer relative",onSelect:v=>v.preventDefault(),onClick:v=>{v.stopPropagation(),x(f)},children:e.jsxs("div",{className:"flex items-start justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("span",{className:"text-lg",children:h(f.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:f.title}),!f.isRead&&e.jsx("div",{className:`w-2 h-2 rounded-full ${m(f.priority)}`})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:f.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Md(new Date(f.createdAt),{addSuffix:!0})})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!f.isRead&&e.jsx(R,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),c.mutate(f.id)},disabled:c.isPending,className:"h-6 w-6 p-0",children:e.jsx($t,{className:"h-3 w-3"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:v=>{v.stopPropagation(),u.mutate(f.id)},disabled:u.isPending,className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:e.jsx(Is,{className:"h-3 w-3"})})]})]})},f.id))}),Array.isArray(l)&&l.length>10&&e.jsxs(e.Fragment,{children:[e.jsx(Ni,{}),e.jsx(Pr,{className:"text-center text-muted-foreground",children:"Showing latest 10 notifications"})]})]})]})}function PH({isOpen:t,onClose:s}){const[r,n]=j.useState(""),[,a]=pr(),{data:i=[],isLoading:l}=ge({queryKey:[`/api/global-search?q=${encodeURIComponent(r)}`],enabled:r.length>2&&r.trim().length>0}),o=m=>{a(m.path),s()},c=m=>{m.key==="Escape"?s():m.key==="Enter"&&i.length>0&&o(i[0])};j.useEffect(()=>{t&&n("")},[t]);const d=m=>{switch(m){case"property":return Us;case"booking":return We;case"task":return _a;case"user":return st;case"finance":return He;default:return Jt}},u=m=>{switch(m){case"property":return"Property";case"booking":return"Booking";case"task":return"Task";case"user":return"User";case"finance":return"Finance";default:return"Result"}};return e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"max-w-2xl p-0 flex flex-col",style:{maxHeight:"80vh"},children:[e.jsx(Ue,{className:"px-6 py-4 border-b shrink-0",children:e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Global Search"]})}),e.jsx("div",{className:"px-6 py-4 border-b shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(H,{placeholder:"Search properties, bookings, tasks, users, finance records...",value:r,onChange:m=>n(m.target.value),onKeyDown:c,className:"pl-9 pr-4",autoFocus:!0}),r&&e.jsx(R,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>n(""),children:e.jsx(Is,{className:"h-3 w-3"})})]})}),e.jsx("div",{className:"px-6 py-4 overflow-y-auto flex-1 min-h-0",children:l?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching..."})]}):r.length<=2?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Jt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type at least 3 characters to search"}),e.jsxs("div",{className:"mt-4 text-xs text-muted-foreground",children:[e.jsx("p",{children:"Search across:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mt-2",children:[e.jsx(q,{variant:"outline",className:"text-xs",children:"Properties"}),e.jsx(q,{variant:"outline",className:"text-xs",children:"Bookings"}),e.jsx(q,{variant:"outline",className:"text-xs",children:"Tasks"}),e.jsx(q,{variant:"outline",className:"text-xs",children:"Users"}),e.jsx(q,{variant:"outline",className:"text-xs",children:"Finance"})]})]})]}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Jt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:['No results found for "',r,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Try different keywords or check spelling"})]}):e.jsx("div",{className:"space-y-2",children:i.map(m=>{const h=d(m.type);return e.jsx("div",{className:"p-3 rounded-lg border hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>o(m),children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"p-1.5 rounded-md bg-primary/10",children:e.jsx(h,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:m.title}),e.jsx(q,{variant:"secondary",className:"text-xs",children:u(m.type)}),m.badge&&e.jsx(q,{variant:m.badge.variant,className:"text-xs",children:m.badge.text})]}),m.subtitle&&e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:m.subtitle}),m.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:m.description})]})]})})},`${m.type}-${m.id}`)})})}),i.length>0&&e.jsx("div",{className:"px-6 py-3 border-t bg-muted/30 shrink-0",children:e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border rounded",children:"Enter"})," to open first result,",e.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted border rounded ml-1",children:"Esc"})," to close"]})})]})})}function kH(){const[t,s]=j.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"ghost",size:"sm",className:"hidden md:flex h-8 w-8 p-0",onClick:()=>s(!0),title:"Global Search (Ctrl+K)",children:e.jsx(Jt,{className:"h-4 w-4"})}),e.jsx(PH,{isOpen:t,onClose:()=>s(!1)})]})}const AH={admin:_t,"portfolio-manager":GL,owner:Us,staff:zu,"retail-agent":Dr,"referral-agent":st,guest:Ke},TH={admin:"bg-red-500","portfolio-manager":"bg-blue-500",owner:"bg-green-500",staff:"bg-yellow-500","retail-agent":"bg-purple-500","referral-agent":"bg-orange-500",guest:"bg-gray-500"};function Mi({title:t,subtitle:s,action:r}){const{user:n}=Rr(),[,a]=pr(),i=n?.role||"guest",l=AH[i]||Ke,o=TH[i]||"bg-gray-500",c=Ce({mutationFn:async()=>await fe("POST","/api/auth/demo-logout",{}),onSuccess:()=>{window.location.href="/"}});return e.jsx("header",{className:"sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800 bg-white/95 dark:bg-gray-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-gray-900/60 shadow-sm",children:e.jsxs("div",{className:"flex h-14 items-center gap-4 px-4 lg:px-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate lg:text-xl",children:t}),s&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s})]})})}),e.jsx("div",{className:"flex items-center gap-2",children:r}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kH,{}),e.jsx(CH,{}),e.jsx(R,{variant:"ghost",size:"sm",className:"hidden sm:flex h-8 w-8 p-0",onClick:()=>a("/help"),title:"Help Center",children:e.jsx(fh,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"sm",className:"hidden sm:flex h-8 w-8 p-0",onClick:()=>a("/simple-settings"),title:"Settings",children:e.jsx(Lt,{className:"h-4 w-4"})}),e.jsxs(Kd,{children:[e.jsx(Wd,{asChild:!0,children:e.jsxs(R,{variant:"ghost",className:"flex items-center gap-3 pl-2 hover:bg-gray-100 dark:hover:bg-gray-800",children:[e.jsxs("div",{className:"hidden sm:block text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[n?.firstName," ",n?.lastName]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{variant:"secondary",className:"text-xs",children:i==="portfolio-manager"?"PM":i==="retail-agent"?"Retail":i==="referral-agent"?"Referral":i.charAt(0).toUpperCase()+i.slice(1)})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(_n,{className:"h-8 w-8 lg:h-9 lg:w-9",children:[e.jsx(Fl,{src:n?.profileImageUrl}),e.jsx(In,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-sm",children:(n?.firstName||"U").charAt(0)})]}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 ${o} rounded-full flex items-center justify-center border-2 border-white dark:border-gray-900`,children:e.jsx(l,{className:"w-1.5 h-1.5 text-white"})})]})]})}),e.jsxs(_o,{align:"end",className:"w-56",children:[e.jsx(Yd,{children:"My Account"}),e.jsx(Ni,{}),e.jsxs(Pr,{className:"flex items-center gap-2",onClick:()=>a("/profile"),children:[e.jsx(It,{className:"h-4 w-4"}),"Profile"]}),e.jsxs(Pr,{className:"flex items-center gap-2",onClick:()=>{try{window.location.href="/settings"}catch(d){console.error("Settings navigation error:",d),window.location.href="/simple-settings"}},children:[e.jsx(Lt,{className:"h-4 w-4"}),"Settings"]}),e.jsx(Ni,{}),e.jsxs(Pr,{className:"flex items-center gap-2 text-red-600 focus:text-red-600",onClick:()=>c.mutate(),disabled:c.isPending,children:[e.jsx(cn,{className:"h-4 w-4"}),c.isPending?"Logging out...":"Logout"]})]})]})]})]})})}function Om({title:t,value:s,icon:r,color:n}){const a={primary:"bg-primary/10 text-primary",success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-600",accent:"bg-orange-100 text-orange-600"};return e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s})]}),e.jsx("div",{className:`p-3 rounded-lg ${a[n]}`,children:e.jsx(r,{className:"w-6 h-6"})})]})})})}const fs={auth:{user:()=>["/api/auth/user"]},properties:{all:()=>["/api/properties"],detail:t=>["/api/properties",t]},finance:{all:()=>["/api/finance"],analytics:t=>t?[`/api/finance/analytics?propertyId=${t}`]:["/api/finance/analytics"]},bookings:{all:()=>["/api/bookings"],withSource:t=>t?[`/api/bookings/with-source?propertyId=${t}`]:["/api/bookings/with-source"]},tasks:{all:()=>["/api/tasks"],byProperty:t=>["/api/tasks",{propertyId:t}]},utilities:{all:()=>["/api/utilities"],byProperty:t=>["/api/utilities",{propertyId:t}]},dashboard:{summary:()=>["/api/dashboard"]},documents:{all:()=>["/api/property-documents"],expiring:()=>["/api/property-documents/expiring"],byProperty:t=>["/api/property-documents",{propertyId:t}]},users:{all:()=>["/api/users"]}},yM=t=>{t.invalidateQueries({queryKey:fs.finance.all()}),t.invalidateQueries({predicate:s=>{const r=s.queryKey[0];return typeof r=="string"&&r.includes("/api/finance/analytics")}}),t.invalidateQueries({queryKey:fs.dashboard.summary()})},ov=t=>{t.invalidateQueries({queryKey:fs.properties.all()}),t.invalidateQueries({queryKey:fs.dashboard.summary()})},Xd=t=>{t.invalidateQueries({queryKey:fs.bookings.all()}),t.invalidateQueries({predicate:s=>{const r=s.queryKey[0];return typeof r=="string"&&r.includes("/api/bookings/with-source")}}),t.invalidateQueries({queryKey:fs.finance.all()}),t.invalidateQueries({queryKey:fs.dashboard.summary()})};function Ep({open:t,onOpenChange:s}){const[r,n]=j.useState({propertyId:"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:"",totalAmount:"",paymentStatus:"pending",amountPaid:"",specialRequests:""}),a=ut(),{toast:i}=Xe(),{user:l}=vn(),{data:o=[]}=ge({queryKey:["/api/properties"]}),c=Ce({mutationFn:async m=>await fe("POST","/api/bookings",m),onMutate:async m=>{try{await a.cancelQueries(fs.bookings.all())}catch{}await a.cancelQueries({queryKey:["/api/bookings"]});const h=a.getQueryData(fs.bookings.all()),x=a.getQueryData(["/api/bookings"]),g=m?.propertyId?a.getQueryData(fs.bookings.withSource(String(m.propertyId))):null,p={id:-Date.now(),...m,totalAmount:String(m.totalAmount??"0"),createdAt:new Date().toISOString()};try{a.setQueryData(fs.bookings.all(),f=>f?[p,...f]:[p])}catch{a.setQueryData(["/api/bookings"],f=>f?[p,...f]:[p])}if(m?.propertyId)try{a.setQueryData(fs.bookings.withSource(String(m.propertyId)),f=>f?[p,...f]:[p])}catch{}return{previousAll:h,previousApi:x,previousByProp:g}},onError:(m,h,x)=>{if(console.error("Booking creation error:",m),x?.previousAll!==void 0)try{a.setQueryData(fs.bookings.all(),x.previousAll)}catch{a.setQueryData(["/api/bookings"],x.previousApi)}else x?.previousApi!==void 0&&a.setQueryData(["/api/bookings"],x.previousApi);if(x?.previousByProp!==void 0&&h?.propertyId)try{a.setQueryData(fs.bookings.withSource(String(h.propertyId)),x.previousByProp)}catch{}i({title:"Error",description:m?.message||"Failed to create booking",variant:"destructive"})},onSuccess:async m=>{try{a.setQueryData(fs.bookings.all(),h=>{if(!h)return[m];const x=h.filter(g=>!(typeof g.id=="number"&&g.id<0));return[m,...x]})}catch{a.setQueryData(["/api/bookings"],h=>{if(!h)return[m];const x=h.filter(g=>!(typeof g.id=="number"&&g.id<0));return[m,...x]})}Xd(a),l?.id&&(a.invalidateQueries({queryKey:[`/api/achievements/user/${l.id}`]}),a.invalidateQueries({queryKey:["/api/achievements/definitions"]})),i({title:"Success",description:`Booking created successfully for ${m.guestName}`}),s(!1),n({propertyId:"",guestName:"",guestEmail:"",guestPhone:"",checkIn:"",checkOut:"",guests:"",totalAmount:"",paymentStatus:"pending",amountPaid:"",specialRequests:""})},onSettled:()=>{try{Xd(a)}catch{a.invalidateQueries({queryKey:["/api/bookings"]})}a.invalidateQueries({queryKey:["/api/properties"]})}}),d=m=>{if(m.preventDefault(),!r.propertyId){i({title:"Validation Error",description:"Please select a property",variant:"destructive"});return}if(!r.guestName){i({title:"Validation Error",description:"Guest name is required",variant:"destructive"});return}const h=parseFloat(r.totalAmount),x=parseFloat(r.amountPaid);if(isNaN(h)||!isFinite(h)){i({title:"Validation Error",description:"Total amount must be a valid number",variant:"destructive"});return}if(isNaN(x)||!isFinite(x)){i({title:"Validation Error",description:"Amount paid must be a valid number",variant:"destructive"});return}if(h<0){i({title:"Validation Error",description:"Total amount cannot be negative",variant:"destructive"});return}if(x<0){i({title:"Validation Error",description:"Amount paid cannot be negative",variant:"destructive"});return}if(x>h){i({title:"Validation Error",description:"Amount paid cannot exceed total amount",variant:"destructive"});return}const g=Math.max(0,h-x),p={propertyId:parseInt(r.propertyId),guestName:r.guestName,guestEmail:r.guestEmail||null,guestPhone:r.guestPhone||null,checkIn:r.checkIn,checkOut:r.checkOut,guests:parseInt(r.guests)||1,totalAmount:r.totalAmount||"0",paymentStatus:r.paymentStatus,amountPaid:r.amountPaid||"0",amountDue:g.toFixed(2),specialRequests:r.specialRequests||null};c.mutate(p)},u=(m,h)=>n(x=>({...x,[m]:h}));return e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"w-[95vw] max-w-2xl p-0 overflow-y-auto max-h-[90vh]",children:[e.jsx(Ue,{className:"sticky top-0 z-10 border-b bg-white/90 backdrop-blur px-6 py-4",children:e.jsx(ze,{children:"Create New Booking"})}),e.jsxs("form",{onSubmit:d,className:"flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"propertyId",children:"Property"}),e.jsxs(te,{value:r.propertyId,onValueChange:m=>u("propertyId",m),required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsx(ee,{children:Array.isArray(o)?o.map(m=>e.jsx(P,{value:m.id.toString(),children:m.name},m.id)):[]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guests",children:"Number of Guests"}),e.jsx(H,{id:"guests",type:"number",value:r.guests,onChange:m=>u("guests",m.target.value),placeholder:"1",min:"1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guestName",children:"Guest Name"}),e.jsx(H,{id:"guestName",value:r.guestName,onChange:m=>u("guestName",m.target.value),placeholder:"Full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guestEmail",children:"Guest Email"}),e.jsx(H,{id:"guestEmail",type:"email",value:r.guestEmail,onChange:m=>u("guestEmail",m.target.value),placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guestPhone",children:"Guest Phone"}),e.jsx(H,{id:"guestPhone",value:r.guestPhone,onChange:m=>u("guestPhone",m.target.value),placeholder:"+1234567890"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"checkIn",children:"Check-in Date"}),e.jsx(H,{id:"checkIn",type:"date",value:r.checkIn,onChange:m=>u("checkIn",m.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"checkOut",children:"Check-out Date"}),e.jsx(H,{id:"checkOut",type:"date",value:r.checkOut,onChange:m=>u("checkOut",m.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"totalAmount",children:"Total Amount"}),e.jsx(H,{id:"totalAmount",type:"number",step:"0.01",value:r.totalAmount,onChange:m=>u("totalAmount",m.target.value),placeholder:"0.00",min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"paymentStatus",children:"Payment Status"}),e.jsxs(te,{value:r.paymentStatus,onValueChange:m=>u("paymentStatus",m),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select payment status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"paid",children:"Paid"}),e.jsx(P,{value:"pending",children:"Payment Pending"}),e.jsx(P,{value:"partial",children:"Partial Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"amountPaid",children:"Amount Paid"}),e.jsx(H,{id:"amountPaid",type:"number",step:"0.01",value:r.amountPaid,onChange:m=>u("amountPaid",m.target.value),placeholder:"0.00",min:"0",max:r.totalAmount||void 0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"amountDue",children:"Amount Due"}),e.jsx(H,{id:"amountDue",type:"number",step:"0.01",value:(parseFloat(r.totalAmount)||0)-(parseFloat(r.amountPaid)||0),readOnly:!0,className:"bg-muted",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Auto-calculated: Total - Paid"})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"specialRequests",children:"Special Requests"}),e.jsx(nt,{id:"specialRequests",value:r.specialRequests,onChange:m=>u("specialRequests",m.target.value),placeholder:"Any special requests or notes...",rows:3})]})]}),e.jsxs("div",{className:"sticky bottom-0 z-10 flex items-center justify-end gap-2 border-t bg-white/90 backdrop-blur px-6 py-3",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:c.isPending,children:c.isPending?"Creating...":"Create Booking"})]})]})]})})}var Mp="Tabs",[DH,pke]=Zs(Mp,[Dc]),bM=Dc(),[OH,vb]=DH(Mp),NM=j.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=t,u=Ac(o),[m,h]=Jr({prop:n,onChange:a,defaultProp:i??"",caller:Mp});return e.jsx(OH,{scope:r,baseId:Wr(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:c,children:e.jsx(Ye.div,{dir:u,"data-orientation":l,...d,ref:s})})});NM.displayName=Mp;var wM="TabsList",SM=j.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,i=vb(wM,r),l=bM(r);return e.jsx(U0,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(Ye.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:s})})});SM.displayName=wM;var CM="TabsTrigger",PM=j.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=t,l=vb(CM,r),o=bM(r),c=TM(l.baseId,n),d=DM(l.baseId,n),u=n===l.value;return e.jsx(z0,{asChild:!0,...o,focusable:!a,active:u,children:e.jsx(Ye.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:s,onMouseDown:Re(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(n):m.preventDefault()}),onKeyDown:Re(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(n)}),onFocus:Re(t.onFocus,()=>{const m=l.activationMode!=="manual";!u&&!a&&m&&l.onValueChange(n)})})})});PM.displayName=CM;var kM="TabsContent",AM=j.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...l}=t,o=vb(kM,r),c=TM(o.baseId,n),d=DM(o.baseId,n),u=n===o.value,m=j.useRef(u);return j.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Js,{present:a||u,children:({present:h})=>e.jsx(Ye.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});AM.displayName=kM;function TM(t,s){return`${t}-trigger-${s}`}function DM(t,s){return`${t}-content-${s}`}var EH=NM,OM=SM,EM=PM,MM=AM;const ot=EH,it=j.forwardRef(({className:t,...s},r)=>e.jsx(OM,{ref:r,className:_e("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));it.displayName=OM.displayName;const re=j.forwardRef(({className:t,...s},r)=>e.jsx(EM,{ref:r,className:_e("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));re.displayName=EM.displayName;const ne=j.forwardRef(({className:t,...s},r)=>e.jsx(MM,{ref:r,className:_e("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));ne.displayName=MM.displayName;console.log("🏠 Property Dialog component loaded");function Rp({open:t,onOpenChange:s}){const[r,n]=j.useState({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active"}),[a,i]=j.useState(""),[l,o]=j.useState(!1),c=ut(),{toast:d}=Xe(),{user:u}=vn(),m=Ce({mutationFn:async p=>{console.log("🚀 Frontend: Submitting property data:",p);const f=await fe("POST","/api/properties",p);return console.log("✅ Frontend: Property created successfully:",f),f},onSuccess:async p=>{console.log("🎉 Frontend: Property creation successful, invalidating cache"),mn.delete("/api/properties"),mn.delete("/api/dashboard/stats"),mn.delete("/api/dashboard"),console.log("✅ FastCache cleared for properties and dashboard"),ov(c),u?.id&&(c.invalidateQueries({queryKey:[`/api/achievements/user/${u.id}`]}),c.invalidateQueries({queryKey:["/api/achievements/definitions"]})),d({title:"Success",description:`Property "${p.name}" created successfully!`}),s(!1),n({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active"})},onError:p=>{console.error("❌ Frontend: Property creation error:",p);let f="Failed to create property";p.message?f=p.message:p.errors&&Array.isArray(p.errors)&&(f=p.errors.map(v=>v.message||v.path?.join(".")+": "+v.message).join(", ")),d({title:"Error",description:f,variant:"destructive"})}}),h=p=>{if(p.preventDefault(),console.log("🔄 Frontend: Form submitted with data:",r),!r.name.trim()){d({title:"Validation Error",description:"Property name is required",variant:"destructive"});return}if(!r.address.trim()){d({title:"Validation Error",description:"Property address is required",variant:"destructive"});return}const f={organizationId:"default-org",name:r.name.trim(),address:r.address.trim(),description:r.description?.trim()||"",bedrooms:r.bedrooms?parseInt(r.bedrooms):null,bathrooms:r.bathrooms?parseInt(r.bathrooms):null,maxGuests:r.maxGuests?parseInt(r.maxGuests):null,pricePerNight:r.pricePerNight?parseFloat(r.pricePerNight):null,currency:"THB",status:r.status};console.log("🚀 Frontend: Final property data being submitted:",f),m.mutate(f)},x=(p,f)=>{n(v=>({...v,[p]:f}))},g=async()=>{if(!a.trim()){d({title:"Validation Error",description:"Please enter an Airbnb URL",variant:"destructive"});return}if(!(a.includes("airbnb.com")||a.includes("abnb.me")||a.includes("airbnb.")||a.includes("www.airbnb")||/airbnb/i.test(a))){d({title:"Invalid URL",description:"Please enter a valid Airbnb listing URL",variant:"destructive"});return}o(!0);try{const v=await(await fe("POST","/api/properties/import/airbnb",{url:a.trim()})).json();if(v.success)n({name:v.property.name||"",address:v.property.address||"",description:v.property.description||"",bedrooms:v.property.bedrooms?.toString()||"",bathrooms:v.property.bathrooms?.toString()||"",maxGuests:v.property.maxGuests?.toString()||"",pricePerNight:v.property.pricePerNight?.toString()||"",status:"active"}),d({title:"Import Successful",description:"Property data imported from Airbnb. Please review and save."}),i("");else throw new Error(v.message||"Failed to import property data")}catch(f){console.error("Airbnb import error:",f),d({title:"Import Failed",description:f.message||"Could not import from Airbnb. Please enter property details manually.",variant:"destructive"})}finally{o(!1)}};return e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Add New Property"})}),e.jsxs(ot,{defaultValue:"manual",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-2",children:[e.jsxs(re,{value:"manual",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Create from Scratch"]}),e.jsxs(re,{value:"airbnb",children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Import from Airbnb"]})]}),e.jsx(ne,{value:"airbnb",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Import from Airbnb"}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Enter an Airbnb listing URL to automatically import property details, photos, and amenities."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"airbnb-url",children:"Airbnb Listing URL"}),e.jsx(H,{id:"airbnb-url",value:a,onChange:p=>i(p.target.value),placeholder:"https://www.airbnb.com/rooms/12345678",className:"mt-1"})]}),e.jsx(R,{type:"button",onClick:g,disabled:l||!a.trim(),className:"w-full",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing from Airbnb..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Import Property Data"]})})]})]})}),e.jsx(ne,{value:"manual",className:"mt-4",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"name",children:"Property Name"}),e.jsx(H,{id:"name",value:r.name,onChange:p=>x("name",p.target.value),placeholder:"Enter property name",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"status",children:"Status"}),e.jsxs(te,{value:r.status,onValueChange:p=>x("status",p),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"inactive",children:"Inactive"}),e.jsx(P,{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"address",children:"Address"}),e.jsx(H,{id:"address",value:r.address,onChange:p=>x("address",p.target.value),placeholder:"Enter full address",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"description",children:"Description"}),e.jsx(nt,{id:"description",value:r.description,onChange:p=>x("description",p.target.value),placeholder:"Describe the property...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(H,{id:"bedrooms",type:"number",value:r.bedrooms,onChange:p=>x("bedrooms",p.target.value),placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(H,{id:"bathrooms",type:"number",value:r.bathrooms,onChange:p=>x("bathrooms",p.target.value),placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"maxGuests",children:"Max Guests"}),e.jsx(H,{id:"maxGuests",type:"number",value:r.maxGuests,onChange:p=>x("maxGuests",p.target.value),placeholder:"0",min:"1"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"pricePerNight",children:"Price/Night"}),e.jsx(H,{id:"pricePerNight",type:"number",step:"0.01",value:r.pricePerNight,onChange:p=>x("pricePerNight",p.target.value),placeholder:"0.00",min:"0"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:m.isPending,children:m.isPending?"Creating...":"Create Property"})]})]})})]})]})})}function xt(t){if(t==null)return"฿0";const s=typeof t=="string"?parseFloat(t):t;return typeof s!="number"||isNaN(s)?"฿0":new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}function cv(){Rr();const{toast:t}=Xe(),[s,r]=j.useState(!1),[n,a]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState({}),[d,u]=j.useState("overview"),{data:m}=ge({queryKey:["/api/dashboard/stats"],staleTime:30*1e3,refetchOnMount:!0}),{data:h=[]}=ge({queryKey:["/api/properties"],staleTime:30*1e3,refetchOnMount:!0}),{data:x=[]}=ge({queryKey:["/api/dashboard/recent-tasks"],staleTime:5*60*1e3,refetchOnMount:!1}),{data:g={}}=ge({queryKey:["/api/dashboard/task-stats"],staleTime:5*60*1e3,refetchOnMount:!1}),{data:p=[]}=ge({queryKey:["/api/bookings"],staleTime:0,refetchOnMount:!0});console.log("📅 Dashboard - Bookings data:",p,"Count:",p.length);const{data:f=[]}=ge({queryKey:["/api/property-documents/expiring?days=30"],staleTime:0,refetchOnMount:!0});console.log("📋 Dashboard - Expiring Documents:",f,"Count:",f.length);const{data:v=[]}=ge({queryKey:["/api/property-insurance/expiring/30"],staleTime:0,refetchOnMount:!0}),b=p.filter(N=>parseFloat(N.amountDue||"0")>0);j.useEffect(()=>{if(f&&Array.isArray(f)&&f.length>0){const N=new Date,M=f.filter(F=>F.expiryDate?new Date(F.expiryDate)<N:!1);M.length>0&&t({title:"⚠️ Documents Expired",description:`${M.length} property document${M.length>1?"s have":" has"} expired. Check the dashboard for details.`,variant:"destructive"})}},[f,t]),j.useEffect(()=>{if(b.length>0){const N=b.reduce((M,F)=>M+parseFloat(F.amountDue||"0"),0);t({title:"💰 Outstanding Payments",description:`${b.length} customer${b.length>1?"s have":" has"} outstanding balances totaling ${xt(N)}`,variant:"default"})}},[b.length,t]);const y=p.sort((N,M)=>new Date(M.createdAt||0).getTime()-new Date(N.createdAt||0).getTime()).slice(0,3),S=x.slice(0,5),w=new Map;h.forEach(N=>{w.set(N.id,N.name)});const C=h.filter(N=>!(o.searchText&&!N.name.toLowerCase().includes(o.searchText.toLowerCase())||o.area&&N.area!==o.area||o.bedroomCount&&N.bedrooms!==o.bedroomCount)),k=N=>{switch(N){case"active":case"confirmed":case"paid":case"completed":return"default";case"pending":case"scheduled":return"secondary";case"overdue":case"high":return"destructive";case"maintenance":case"in-progress":case"medium":return"outline";default:return"secondary"}},A=N=>{switch(N){case"high":return e.jsx(Nt,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(Ke,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(Me,{className:"h-4 w-4 text-green-500"});default:return null}};return e.jsxs("div",{className:"container mx-auto bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Mi,{title:"Enhanced Admin Dashboard",subtitle:"Comprehensive property management overview with advanced filtering"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsx(O,{className:"mb-6",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(H,{placeholder:"Search properties...",value:o.searchText||"",onChange:N=>c(M=>({...M,searchText:N.target.value}))}),e.jsxs(te,{value:o.area||"all",onValueChange:N=>c(M=>({...M,area:N==="all"?void 0:N})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Areas"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Areas"}),e.jsx(P,{value:"Chaweng",children:"Chaweng"}),e.jsx(P,{value:"Lamai",children:"Lamai"}),e.jsx(P,{value:"Bophut",children:"Bophut"}),e.jsx(P,{value:"Nathon",children:"Nathon"})]})]}),e.jsxs(te,{value:o.bedroomCount?.toString()||"all",onValueChange:N=>c(M=>({...M,bedroomCount:N==="all"?void 0:parseInt(N)})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Bedrooms"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Bedrooms"}),e.jsx(P,{value:"2",children:"2 Bedrooms"}),e.jsx(P,{value:"3",children:"3 Bedrooms"}),e.jsx(P,{value:"4",children:"4 Bedrooms"}),e.jsx(P,{value:"5",children:"5+ Bedrooms"})]})]}),e.jsx(R,{variant:"outline",onClick:()=>c({}),className:"w-full",children:"Clear Filters"})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(Om,{title:"Total Properties",value:C.length,icon:Tt,color:"primary"}),e.jsx(Om,{title:"Active Properties",value:C.filter(N=>N.status==="active").length,icon:Us,color:"success"}),e.jsx(Om,{title:"Expired Documents",value:f.filter(N=>N.expiryDate?new Date(N.expiryDate)<new Date:!1).length,icon:Nt,color:"warning"}),e.jsx(Om,{title:"High Priority Tasks",value:g.highPriority||0,icon:Nt,color:"accent"})]}),e.jsxs(ot,{value:d,onValueChange:u,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"properties",children:"Properties"}),e.jsx(re,{value:"tasks",children:"Tasks"}),e.jsx(re,{value:"bookings",children:"Bookings"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent Bookings"})}),e.jsx(D,{children:y.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No bookings found"}):e.jsx("div",{className:"space-y-4",children:y.map(N=>{const M=w.get(N.propertyId)||N.property||`Property #${N.propertyId}`,F=N.totalAmount||N.guestTotalPrice||N.platformPayout||N.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(Us,{className:"w-6 h-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.guestName}),e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:M})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[new Date(N.checkIn).toLocaleDateString()," ","-"," ",new Date(N.checkOut).toLocaleDateString()]}),e.jsx("p",{className:"text-sm text-gray-500",children:xt(F)})]})]},N.id)})})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Task Overview"})}),e.jsx(D,{children:S.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No tasks found"}):e.jsx("div",{className:"space-y-4",children:S.map(N=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${N.status==="pending"?"bg-yellow-500":N.status==="in-progress"?"bg-blue-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.title}),e.jsx("p",{className:"text-sm text-gray-500",children:N.type})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.status==="pending"?"bg-yellow-100 text-yellow-800":N.status==="in-progress"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:N.status.replace("-"," ")})})]},N.id))})})]})]}),b.length>0&&e.jsxs(O,{className:"border-red-200 bg-red-50",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2 text-red-800",children:[e.jsx(He,{className:"h-5 w-5"}),"Outstanding Payments (",b.length,")"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map(N=>{const M=w.get(N.propertyId)||`Property #${N.propertyId}`,F=parseFloat(N.amountDue||"0");return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-red-100",children:e.jsx(He,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:M})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(q,{variant:"destructive",children:[xt(F)," due"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Check-in:"," ",new Date(N.checkIn).toLocaleDateString()]})]})]},N.id)})}),b.length>5&&e.jsxs("p",{className:"text-sm text-gray-600 mt-3 text-center",children:["+",b.length-5," more customers with outstanding balances"]})]})]}),(f.length>0||v.length>0)&&e.jsxs(O,{className:"border-orange-200 bg-orange-50",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(Nt,{className:"h-5 w-5"}),"Expiry Alerts (",f.length+v.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[f.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-900 mb-3",children:"Property Documents Expiring"}),e.jsx("div",{className:"space-y-3",children:f.map(N=>{const M=w.get(N.propertyId)||`Property #${N.propertyId}`,F=Math.ceil((new Date(N.expiryDate).getTime()-Date.now())/(1e3*60*60*24)),I=F<0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${I?"bg-red-100":"bg-orange-100"}`,children:e.jsx(Tt,{className:`w-5 h-5 ${I?"text-red-600":"text-orange-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.docType||"Document"}),e.jsx("p",{className:"text-sm text-gray-600",children:M})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(q,{variant:I?"destructive":"outline",className:I?"":"border-orange-300 text-orange-700",children:I?"Expired":`${F} days left`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(N.expiryDate).toLocaleDateString()})]})]},N.id)})})]}),v.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-900 mb-3",children:"Property Insurance Expiring"}),e.jsx("div",{className:"space-y-3",children:v.map(N=>{const M=w.get(N.propertyId)||`Property #${N.propertyId}`,F=Math.ceil((new Date(N.expiryDate).getTime()-Date.now())/(1e3*60*60*24)),I=F<0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${I?"bg-red-100":"bg-blue-100"}`,children:e.jsx(Tt,{className:`w-5 h-5 ${I?"text-red-600":"text-blue-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.insuranceType||"Insurance"}),e.jsx("p",{className:"text-sm text-gray-600",children:M})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(q,{variant:I?"destructive":"outline",className:I?"":"border-blue-300 text-blue-700",children:I?"Expired":`${F} days left`}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(N.expiryDate).toLocaleDateString()})]})]},N.id)})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>r(!0),children:[e.jsx(ht,{className:"w-6 h-6 text-primary"}),e.jsx("span",{children:"New Booking"})]}),e.jsxs(R,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>a(!0),children:[e.jsx(Us,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{children:"Add Property"})]}),e.jsxs(R,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>l(!0),children:[e.jsx(Ai,{className:"w-6 h-6 text-yellow-600"}),e.jsx("span",{children:"Create Task"})]}),e.jsxs(R,{variant:"outline",className:"h-24 flex flex-col items-center justify-center space-y-2",onClick:()=>window.location.href="/finances",children:[e.jsx(Ot,{className:"w-6 h-6 text-orange-600"}),e.jsx("span",{children:"View Reports"})]})]})]}),e.jsxs(ne,{value:"properties",className:"space-y-4",children:[e.jsx("div",{className:"grid gap-4",children:C.map(N=>e.jsx(O,{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>window.location.href=`/property-hub?property=${N.id}`,children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:N.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[N.address||"No address"," •"," ",N.bedrooms||0," bedrooms"]}),e.jsx("p",{className:"text-sm font-medium text-green-600",children:N.pricePerNight?`฿${N.pricePerNight}/night`:"No price set"})]}),e.jsx(q,{variant:k(N.status),children:N.status})]})})},N.id))}),e.jsx("div",{className:"text-center pt-4",children:e.jsx(R,{variant:"outline",onClick:()=>window.location.href="/property-hub",className:"w-full",children:"View All Properties in Property Management Hub"})})]}),e.jsx(ne,{value:"tasks",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:S.length===0?e.jsx(O,{children:e.jsx(D,{className:"p-8 text-center text-muted-foreground",children:"No tasks found"})}):S.map(N=>{const M=w.get(N.propertyId)||N.property||`Property #${N.propertyId}`;return e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[A(N.priority),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:N.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[M," • ",N.type]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Due Date:"," ",N.dueDate?new Date(N.dueDate).toLocaleDateString():N.scheduledDate?new Date(N.scheduledDate).toLocaleDateString():"No date"]})]})]}),e.jsx(q,{variant:k(N.status),children:N.status})]})})},N.id)})})}),e.jsx(ne,{value:"bookings",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:p.length===0?e.jsx(O,{children:e.jsx(D,{className:"p-8 text-center text-muted-foreground",children:"No bookings found"})}):p.map(N=>{const M=w.get(N.propertyId)||N.property||`Property #${N.propertyId}`,F=N.totalAmount||N.guestTotalPrice||N.platformPayout||N.netHostPayout||0;return e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:N.guestName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:M}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(N.checkIn).toLocaleDateString()," ","→"," ",new Date(N.checkOut).toLocaleDateString()]}),e.jsx("p",{className:"text-sm font-medium text-green-600",children:xt(F)})]}),e.jsx(q,{variant:k(N.status),children:N.status})]})})},N.id)})})})]})]})]}),e.jsx(Ep,{open:s,onOpenChange:r}),e.jsx(Rp,{open:n,onOpenChange:a}),e.jsx(Tp,{isOpen:i,onOpenChange:l})]})}const MH=Object.freeze(Object.defineProperty({__proto__:null,default:cv},Symbol.toStringTag,{value:"Module"})),Qn={monthlyEarnings:89e3,thisMonthBookings:12,pendingCommissions:15600,currentRank:1,totalAgents:25,conversionRate:32.5},RH=[{type:"booking",message:"New booking: Villa Samui Breeze",amount:8e3,time:"2 hours ago"},{type:"commission",message:"Commission paid",amount:2400,time:"1 day ago"},{type:"quote",message:"Quote generated for Villa Ocean View",amount:6500,time:"3 hours ago"},{type:"ranking",message:"Moved to #1 position",amount:null,time:"Yesterday"}],_H=[{id:"quote-generator",title:"Quote Generator",description:"Generate instant quotes for clients",icon:Jt,color:"bg-blue-600 hover:bg-blue-700",route:"/agent/quote-generator",stats:"4 properties available"},{id:"commissions",title:"Commissions",description:"Track earnings and payouts",icon:He,color:"bg-green-600 hover:bg-green-700",route:"/agent/commissions",stats:`฿${Qn.monthlyEarnings.toLocaleString()} this month`},{id:"proposals",title:"Proposals",description:"Manage client proposals",icon:dt,color:"bg-purple-600 hover:bg-purple-700",route:"/agent/proposals",stats:"3 pending reviews"},{id:"media-download",title:"Media Library",description:"Download property media",icon:as,color:"bg-orange-600 hover:bg-orange-700",route:"/agent/media-download",stats:"48 files available"},{id:"leaderboard",title:"Leaderboard",description:"View agent rankings",icon:Rn,color:"bg-yellow-600 hover:bg-yellow-700",route:"/agent/leaderboard",stats:`Rank #${Qn.currentRank} of ${Qn.totalAgents}`}];function RM(){const t=r=>{window.location.href=r},s=r=>{switch(r){case"booking":return e.jsx(We,{className:"h-4 w-4 text-blue-600"});case"commission":return e.jsx(He,{className:"h-4 w-4 text-green-600"});case"quote":return e.jsx(Jt,{className:"h-4 w-4 text-purple-600"});case"ranking":return e.jsx(Rn,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(st,{className:"h-4 w-4 text-gray-600"})}};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Retail Agent Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's your performance overview"})]}),e.jsxs(q,{variant:"default",className:"bg-green-100 text-green-800 px-3 py-1",children:["Rank #",Qn.currentRank," Agent"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["฿",Qn.monthlyEarnings.toLocaleString()]})]}),e.jsx(He,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bookings This Month"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Qn.thisMonthBookings})]}),e.jsx(We,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Commissions"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["฿",Qn.pendingCommissions.toLocaleString()]})]}),e.jsx(dr,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Conversion Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Qn.conversionRate,"%"]})]}),e.jsx(Ot,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Quick Actions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Access your most used tools"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_H.map(r=>e.jsx(O,{className:"hover:shadow-lg transition-all cursor-pointer border-2 hover:border-blue-200",onClick:()=>t(r.route),children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${r.color}`,children:e.jsx(r.icon,{className:"h-6 w-6 text-white"})}),e.jsx(Rl,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r.description}),e.jsx(q,{variant:"outline",className:"text-xs",children:r.stats})]})},r.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Recent Activity"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:RH.map((r,n)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s(r.type),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:r.message}),e.jsx("p",{className:"text-xs text-gray-500",children:r.time})]})]}),r.amount&&e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-green-600",children:["฿",r.amount.toLocaleString()]})})]},n))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5"}),"Performance Summary"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"This Month Goal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"฿100,000 target"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"89%"}),e.jsx("p",{className:"text-xs text-gray-500",children:"฿11K to go"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Ranking Position"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Out of ",Qn.totalAgents," agents"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["#",Qn.currentRank]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Top performer"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Avg. Deal Size"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last 30 days"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"฿7,400"}),e.jsx("p",{className:"text-xs text-gray-500",children:"+12% vs last month"})]})]})]})})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Need Help?"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(R,{variant:"outline",size:"sm",children:"📚 Agent Training"}),e.jsx(R,{variant:"outline",size:"sm",children:"💬 Support Chat"}),e.jsx(R,{variant:"outline",size:"sm",children:"📊 Monthly Report"}),e.jsx(R,{variant:"outline",size:"sm",children:"🎯 Set Goals"})]})})]})]})}const IH=()=>{const[t,s]=j.useState("services");j.useEffect(()=>{const d=new URLSearchParams(window.location.search).get("tab")||"services";s(d);const u=m=>{console.log("Received tab change event:",m.detail.tab),s(m.detail.tab)};return window.addEventListener("changeReferralTab",u),()=>window.removeEventListener("changeReferralTab",u)},[]);const r=c=>{console.log("Changing to tab:",c),s(c)},n=[{id:1,name:"Villa Samui Breeze",referralDate:"2024-01-15",client:"Johnson Family",monthlyRevenue:85e3,occupancyRate:78,totalBookings:12,averageRating:4.8,commission:8500,status:"Active"},{id:2,name:"Villa Tropical Paradise",referralDate:"2024-03-20",client:"Thompson Estate",monthlyRevenue:12e4,occupancyRate:85,totalBookings:15,averageRating:4.9,commission:12e3,status:"Active"}],a=[{id:1,name:"Villa Ocean View",bedrooms:3,bathrooms:2,maxGuests:6,location:"Koh Samui",priceRange:"฿6,500 - ฿8,500/night",amenities:["Pool","WiFi","AC","Kitchen"]},{id:2,name:"Villa Aruna Premium",bedrooms:5,bathrooms:4,maxGuests:10,location:"Koh Samui",priceRange:"฿18,000 - ฿25,000/night",amenities:["Private Pool","Chef Service","WiFi","AC","Gym"]},{id:3,name:"Villa Beachfront Elite",bedrooms:4,bathrooms:3,maxGuests:8,location:"Koh Samui",priceRange:"฿12,000 - ฿16,000/night",amenities:["Beach Access","Pool","WiFi","AC","BBQ"]}],i=[{title:"Guest Management",description:"Complete guest experience from check-in to check-out",features:["24/7 guest support","Check-in/out coordination","Concierge services","Issue resolution"]},{title:"Property Maintenance",description:"Regular upkeep and maintenance of properties",features:["Scheduled cleaning","Pool maintenance","Garden care","Repairs & fixes"]},{title:"Revenue Optimization",description:"Maximize booking income through smart pricing",features:["Dynamic pricing","Multi-platform listing","Revenue analytics","Booking optimization"]},{title:"Financial Management",description:"Complete financial oversight and reporting",features:["Monthly statements","Expense tracking","Tax preparation","Owner payouts"]}],l=()=>{console.log("Downloading management services PDF..."),alert("Management Services PDF would be downloaded here")},o=c=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(c);return e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6 pt-20 lg:pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Referral Agent Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Property Management Services & Referral Tracking"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(q,{variant:"secondary",className:"bg-green-50 text-green-700",children:[e.jsx(st,{className:"w-3 h-3 mr-1"}),"Real Estate Agent"]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs(R,{variant:t==="services"?"default":"outline",onClick:()=>r("services"),className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"Service Overview"]}),e.jsxs(R,{variant:t==="properties"?"default":"outline",onClick:()=>r("properties"),className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4"}),"Property Browse"]}),e.jsxs(R,{variant:t==="referred"?"default":"outline",onClick:()=>r("referred"),className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"My Referrals"]}),e.jsxs(R,{variant:t==="finances"?"default":"outline",onClick:()=>r("finances"),className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Commission Tracking"]})]}),e.jsxs(ot,{value:t,onValueChange:r,className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[e.jsx(re,{value:"services",children:"Service Overview"}),e.jsx(re,{value:"properties",children:"Property Browse"}),e.jsx(re,{value:"referred",children:"My Referrals"}),e.jsx(re,{value:"finances",children:"Commission Tracking"})]}),e.jsx(ne,{value:"services",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Property Management Services"]}),e.jsx(Te,{children:"Comprehensive villa management services for property owners"})]}),e.jsxs(R,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),"Download PDF Brochure"]})]})}),e.jsxs(D,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:i.map((c,d)=>e.jsxs(O,{className:"border border-gray-200",children:[e.jsxs(_,{className:"pb-3",children:[e.jsx($,{className:"text-lg",children:c.title}),e.jsx(Te,{children:c.description})]}),e.jsx(D,{children:e.jsx("ul",{className:"space-y-1 text-sm",children:c.features.map((u,m)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),u]},m))})})]},d))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Referral Commission Structure"}),e.jsxs("p",{className:"text-blue-800 text-sm",children:["As a referral partner, you receive ",e.jsx("strong",{children:"10% of our monthly management commission"})," for every property you refer to our management services. This provides you with ongoing passive income for successful referrals."]})]})]})]})}),e.jsx(ne,{value:"properties",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),"Available Properties Portfolio"]}),e.jsx(Te,{children:"Browse our managed properties (limited information for referral purposes)"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(c=>e.jsxs(O,{className:"border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs(_,{className:"pb-3",children:[e.jsx($,{className:"text-lg",children:c.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Tt,{className:"w-4 h-4"}),c.location]})]}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.bedrooms}),e.jsx("div",{className:"text-muted-foreground",children:"Bedrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.bathrooms}),e.jsx("div",{className:"text-muted-foreground",children:"Bathrooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:c.maxGuests}),e.jsx("div",{className:"text-muted-foreground",children:"Guests"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-green-600",children:c.priceRange}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Nightly rate range"})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.amenities.slice(0,3).map((d,u)=>e.jsx(q,{variant:"outline",className:"text-xs",children:d},u)),c.amenities.length>3&&e.jsxs(q,{variant:"outline",className:"text-xs",children:["+",c.amenities.length-3," more"]})]})})]})]},c.id))})})]})}),e.jsx(ne,{value:"referred",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5"}),"My Referred Properties"]}),e.jsx(Te,{children:"Properties you've referred and their performance metrics"})]}),e.jsx(D,{children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(st,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No referrals yet. Start referring clients to earn 10% monthly commissions!"})]}):e.jsx("div",{className:"space-y-4",children:n.map(c=>e.jsxs(O,{className:"border border-gray-200",children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx($,{className:"text-lg",children:c.name}),e.jsxs(Te,{children:["Referred: ",new Date(c.referralDate).toLocaleDateString()," | Client: ",c.client]})]}),e.jsx(q,{variant:c.status==="Active"?"default":"secondary",children:c.status})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-green-600",children:o(c.monthlyRevenue)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-blue-600",children:[c.occupancyRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Occupancy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-purple-600",children:c.totalBookings}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bookings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-yellow-600 flex items-center justify-center gap-1",children:[e.jsx(us,{className:"w-3 h-3 fill-current"}),c.averageRating]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rating"})]})]})})]},c.id))})})]})}),e.jsxs(ne,{value:"finances",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium",children:"Total Monthly Commission"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o(n.reduce((c,d)=>c+d.commission,0))}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["From ",n.length," active referrals"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium",children:"Average Occupancy"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[n.length>0?Math.round(n.reduce((c,d)=>c+d.occupancyRate,0)/n.length):0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across all referrals"})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium",children:"Total Properties"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active referrals"})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Commission Details"]}),e.jsx(Te,{children:"Detailed breakdown of your 10% referral commissions"})]}),e.jsx(D,{children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ot,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No commission data available yet."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Property"}),e.jsx("th",{className:"text-left py-2",children:"Monthly Revenue"}),e.jsx("th",{className:"text-left py-2",children:"Management Fee (Base)"}),e.jsx("th",{className:"text-left py-2",children:"Your Commission (10%)"}),e.jsx("th",{className:"text-left py-2",children:"Status"})]})}),e.jsx("tbody",{children:n.map(c=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:c.client})]})}),e.jsx("td",{className:"py-3",children:o(c.monthlyRevenue)}),e.jsx("td",{className:"py-3",children:o(c.commission*10)}),e.jsx("td",{className:"py-3 font-semibold text-green-600",children:o(c.commission)}),e.jsx("td",{className:"py-3",children:e.jsx(q,{variant:c.status==="Active"?"default":"secondary",children:c.status})})]},c.id))})]})})})]})]})]})]})},_M=()=>e.jsx(IH,{});function $H({children:t}){const[s,r]=j.useState(!1);return j.useEffect(()=>{r(!0)},[]),s?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})})}function FH(){const{user:t}=vn();j.useEffect(()=>{t?.role==="retail-agent"&&(window.location.href="/agent/hub")},[t?.role]);const s=()=>{switch(t?.role){case"staff":return e.jsx(cv,{});case"retail-agent":return e.jsx(RM,{});case"referral-agent":return e.jsx(_M,{});case"admin":case"portfolio-manager":case"owner":default:return e.jsx(cv,{})}};return e.jsx($H,{children:s()})}function IM({property:t,isSelected:s=!1,onSelect:r,onViewDetails:n,onDelete:a,expiryStatus:i,rentcastData:l}){const o=M=>{switch(M?.toLowerCase()){case"active":return"bg-emerald-500/90 text-white";case"maintenance":return"bg-amber-500/90 text-white";case"inactive":return"bg-slate-500/90 text-white";default:return"bg-slate-500/90 text-white"}},c=M=>M>=4.8?"text-amber-400":M>=4.5?"text-amber-300":"text-amber-200",d=M=>M>=85?"from-emerald-500 to-teal-500":M>=70?"from-blue-500 to-cyan-500":M>=50?"from-amber-500 to-orange-500":"from-red-500 to-rose-500",u=t.name||"Property",m=t.address||"Unknown Address",h=t.bedrooms??0,x=t.bathrooms??0,g=t.maxGuests??0,p=parseFloat(t.pricePerNight||"0"),f=t.monthlyRevenue??0,v=t.occupancyRate??0,b=t.rating??4.7,y=Array.isArray(t.images)&&t.images.length>0&&t.images[0]||`https://picsum.photos/seed/property-${t.id||"0"}/800/600`,S=d(v),w=t.googleMapsLink||"";let C="";const k=w.match(/src=(?:\"|')([^\"']+)(?:\"|')/i);k&&k[1]?C=k[1]:w&&(w.startsWith("http")||w.includes("google.com/maps")||w.includes("maps.google"))?C=w:C=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(m)}`;const A=(M,F)=>{try{const I=F||t.currency||"THB";return new Intl.NumberFormat("en-US",{style:"currency",currency:I}).format(M)}catch{return`${M}`}},N=M=>M?M>=1e3?`${Math.round(M/100)/10}k`:`${M}`:"฿0";return e.jsx("div",{className:"group relative h-full",children:e.jsxs("div",{className:`h-full rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 cursor-pointer transform hover:scale-105 border-2 ${s?"border-emerald-500 ring-2 ing-emerald-300":"border-slate-200 hover:border-emerald-300"}`,children:[e.jsxs("div",{className:"relative h-48 sm:h-56 overflow-hidden bg-slate-100",children:[e.jsx("img",{src:y,alt:u,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",onError:M=>{M.currentTarget.src=`https://picsum.photos/seed/property-${t.id||"0"}/800/600`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4 z-20",children:e.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs sm:text-sm font-bold backdrop-blur-md ${o(t.status)}`,children:t.status==="active"?"✓ Active":t.status||"Status"})}),e.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 z-20",children:e.jsxs("div",{className:"flex items-center gap-1 bg-black/60 backdrop-blur-md px-3 py-1.5 rounded-full",children:[e.jsx(us,{className:`h-4 w-4 ${c(b)}`,fill:"currentColor"}),e.jsx("span",{className:"text-white font-semibold text-sm",children:b?b.toFixed(1):"—"})]})}),i&&e.jsx("div",{className:"absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-20",children:e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full backdrop-blur-md text-xs font-semibold ${i==="expired"?"bg-red-500/90 text-white":"bg-amber-500/90 text-white"}`,children:[e.jsx(Et,{className:"h-3.5 w-3.5"}),i==="expired"?"Expired":"Expiring Soon"]})}),r&&e.jsx("div",{className:"absolute top-3 left-3 z-30 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("input",{type:"checkbox",checked:s,onChange:M=>r(M.target.checked),className:"w-5 h-5 cursor-pointer rounded border-2 border-white bg-emerald-500 checked:bg-emerald-600 shadow-lg",onClick:M=>M.stopPropagation()})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 p-4 sm:p-5 lg:p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-slate-900 truncate mb-1",children:u}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-slate-600",children:[e.jsx(is,{className:"h-4 w-4 flex-shrink-0 text-emerald-600"}),e.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"truncate underline-offset-2 hover:underline text-slate-700",onClick:M=>M.stopPropagation(),title:"Open location in Google Maps",children:m})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-xl p-2.5 text-center border border-blue-200/50",children:[e.jsx(Us,{className:"h-4 w-4 mx-auto mb-1 text-blue-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-blue-900",children:h}),e.jsx("div",{className:"text-xs text-blue-700",children:"Beds"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100/50 rounded-xl p-2.5 text-center border border-teal-200/50",children:[e.jsx(UT,{className:"h-4 w-4 mx-auto mb-1 text-teal-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-teal-900",children:x}),e.jsx("div",{className:"text-xs text-teal-700",children:"Baths"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-xl p-2.5 text-center border border-emerald-200/50",children:[e.jsx(st,{className:"h-4 w-4 mx-auto mb-1 text-emerald-600"}),e.jsx("div",{className:"text-xs sm:text-sm font-bold text-emerald-900",children:g}),e.jsx("div",{className:"text-xs text-emerald-700",children:"Guests"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-slate-700",children:"Occupancy"}),e.jsxs("span",{className:"text-xs sm:text-sm font-bold text-emerald-700",children:[v,"%"]})]}),e.jsx("div",{className:"w-full h-2.5 bg-slate-200 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${S} rounded-full transition-all duration-700 shadow-md`,style:{width:`${Math.min(v,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-100/50 rounded-xl p-3 border border-amber-200/50",children:[e.jsx("div",{className:"text-xs text-amber-700 font-semibold mb-1",children:"Price / Night"}),e.jsx("div",{className:"text-sm sm:text-sm font-bold text-amber-900",children:A(p,t.currency)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-100/50 rounded-xl p-3 border border-emerald-200/50",children:[e.jsx("div",{className:"text-xs text-emerald-700 font-semibold mb-1",children:"Monthly"}),e.jsx("div",{className:"text-sm sm:text-xl font-bold text-emerald-900",children:N(f)})]})]}),l&&e.jsxs("div",{className:"mb-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-purple-600"}),e.jsx("div",{className:"text-xs font-bold text-purple-900",children:"RentCast Market Intelligence"})]}),(l.rentEstimate||l.valueEstimate)&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.rentEstimate&&e.jsxs("div",{className:"bg-white/80 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] text-purple-600 font-semibold mb-0.5",children:"MONTHLY RENT"}),e.jsxs("div",{className:"text-base font-bold text-purple-900",children:["$",l.rentEstimate.estimatedRent?.toLocaleString()||"N/A"]}),l.rentEstimate.rentRangeLow&&l.rentEstimate.rentRangeHigh&&e.jsxs("div",{className:"text-[9px] text-purple-700",children:["$",l.rentEstimate.rentRangeLow.toLocaleString()," ","- $",l.rentEstimate.rentRangeHigh.toLocaleString()]}),l.rentEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-[9px] text-purple-600 mt-0.5",children:[l.rentEstimate.comparablesCount," comps"]})]}),l.valueEstimate&&e.jsxs("div",{className:"bg-white/80 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] text-indigo-600 font-semibold mb-0.5",children:"PROPERTY VALUE"}),e.jsxs("div",{className:"text-base font-bold text-indigo-900",children:["$",Math.round((l.valueEstimate.estimatedValue||0)/1e3),"k"]}),l.valueEstimate.valueRangeLow&&l.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-[9px] text-indigo-700",children:["$",Math.round(l.valueEstimate.valueRangeLow/1e3),"k - $",Math.round(l.valueEstimate.valueRangeHigh/1e3),"k"]}),l.valueEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-[9px] text-indigo-600 mt-0.5",children:[l.valueEstimate.comparablesCount," comps"]})]})]}),l.propertyDetails&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] font-semibold text-purple-700 mb-1.5",children:"PROPERTY DATA"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[10px]",children:[l.propertyDetails.squareFootage&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Sq Ft:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.squareFootage.toLocaleString()})]}),l.propertyDetails.yearBuilt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Built:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.yearBuilt})]}),l.propertyDetails.lotSize&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Lot:"}),e.jsxs("span",{className:"font-medium text-purple-900",children:[l.propertyDetails.lotSize.toLocaleString()," ","sf"]})]}),l.propertyDetails.propertyType&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-600",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-900",children:l.propertyDetails.propertyType})]}),l.propertyDetails.lastSalePrice&&e.jsxs("div",{className:"flex justify-between col-span-2",children:[e.jsx("span",{className:"text-purple-600",children:"Last Sale:"}),e.jsxs("span",{className:"font-medium text-purple-900",children:["$",l.propertyDetails.lastSalePrice.toLocaleString(),l.propertyDetails.lastSaleDate&&` (${new Date(l.propertyDetails.lastSaleDate).getFullYear()})`]})]})]})]}),l.marketData&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsx("div",{className:"text-[10px] font-semibold text-indigo-700 mb-1.5",children:"MARKET STATS"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[10px]",children:[l.marketData.medianRent&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Median Rent:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",l.marketData.medianRent.toLocaleString()]})]}),l.marketData.averageRent&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Avg Rent:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",l.marketData.averageRent.toLocaleString()]})]}),l.marketData.medianPrice&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Median Price:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",Math.round(l.marketData.medianPrice/1e3),"k"]})]}),l.marketData.averagePrice&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-indigo-600",children:"Avg Price:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:["$",Math.round(l.marketData.averagePrice/1e3),"k"]})]}),l.marketData.inventoryCount&&e.jsxs("div",{className:"flex justify-between col-span-2",children:[e.jsx("span",{className:"text-indigo-600",children:"Market Inventory:"}),e.jsxs("span",{className:"font-medium text-indigo-900",children:[l.marketData.inventoryCount.toLocaleString()," ","listings"]})]})]})]}),l.nearbyRentals?.count>0&&e.jsxs("div",{className:"bg-white/60 rounded-lg p-2",children:[e.jsxs("div",{className:"text-[10px] font-semibold text-purple-700 mb-1.5",children:["NEARBY RENTALS (",l.nearbyRentals.count,")"]}),e.jsx("div",{className:"space-y-1.5",children:l.nearbyRentals.listings.slice(0,2).map((M,F)=>e.jsxs("div",{className:"text-[9px] bg-purple-50 rounded p-1.5",children:[e.jsx("div",{className:"font-medium text-purple-900 truncate",children:M.address}),e.jsxs("div",{className:"flex justify-between text-purple-700",children:[e.jsxs("span",{children:["$",M.price.toLocaleString(),"/mo"]}),e.jsxs("span",{children:[M.bedrooms,"bd ",M.bathrooms,"ba"]})]})]},F))})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-slate-200",children:[e.jsx("button",{onClick:n,className:"flex-1 px-3 py-2.5 sm:py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-semibold text-xs sm:text-sm rounded-lg shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:"View Details"}),a&&e.jsx("button",{onClick:a,className:"px-3 py-2.5 sm:py-3 bg-red-50 hover:bg-red-100 text-red-600 font-semibold text-xs sm:text-sm rounded-lg border border-red-200 shadow-sm hover:shadow-md transition-all duration-200",children:"Delete"})]})]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors duration-300 rounded-2xl pointer-events-none"})]})})}function LH(){const[t,s]=j.useState(!1),[r,n]=j.useState(new Set),[a,i]=j.useState(""),[,l]=pr(),o=ut(),{toast:c}=Xe(),{data:d=[],isLoading:u}=ge({queryKey:fs.properties.all()}),m=Array.isArray(d)?d:[],h=Ce({mutationFn:async y=>{await fe("DELETE",`/api/properties/${y}`)},onSuccess:()=>{ov(o),c({title:"Success",description:"Property deleted successfully"}),n(new Set)},onError:()=>{c({title:"Error",description:"Failed to delete property",variant:"destructive"})}}),x=Ce({mutationFn:async y=>{await Promise.all(y.map(S=>fe("DELETE",`/api/properties/${S}`)))},onSuccess:()=>{ov(o),c({title:"Success",description:"Selected properties deleted"}),n(new Set)},onError:()=>{c({title:"Error",description:"Bulk delete failed",variant:"destructive"})}}),g=y=>{window.confirm("Are you sure you want to delete this property?")&&h.mutate(y)},p=()=>{r.size!==0&&window.confirm(`Delete ${r.size} selected properties?`)&&x.mutate(Array.from(r))},f=(y,S)=>{n(w=>{const C=new Set(w);return S?C.add(y):C.delete(y),C})},v=y=>{l(`/property/${y}`)},b=j.useMemo(()=>{const y=a.trim().toLowerCase();return y?m.filter(S=>S?[S.name,S.title,S.location,S.address,String(S.id)].join(" ").toLowerCase().includes(y):!1):m},[m,a]);return e.jsxs(e.Fragment,{children:[e.jsx(Mi,{title:"Properties",action:e.jsxs(R,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Property"]})}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("label",{htmlFor:"property-search",className:"sr-only",children:"Search properties"}),e.jsxs("div",{className:"relative w-full sm:w-[420px]",children:[e.jsx("input",{id:"property-search",value:a,onChange:y=>i(y.target.value),placeholder:"Search by name, location or id...",className:"w-full rounded-lg border border-slate-200 px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-emerald-400"}),a&&e.jsx("button",{onClick:()=>i(""),"aria-label":"Clear search",className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-700",children:"✕"})]}),r.size>0&&e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-slate-600",children:[r.size," selected"]}),e.jsxs(R,{variant:"destructive",size:"sm",onClick:p,className:"flex items-center gap-2",children:[e.jsx(Er,{className:"w-4 h-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm text-slate-600 hidden sm:block",children:u?"Loading…":`${b.length} of ${m.length} properties`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{size:"sm",variant:"ghost",onClick:()=>{const y=b.map(S=>S?.id).filter(Boolean);n(new Set(y))},children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Select All"]}),e.jsxs(R,{size:"sm",onClick:()=>s(!0),className:"hidden sm:inline-flex bg-primary hover:bg-primary/90",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add"]})]})]})]}),u?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((y,S)=>e.jsx("div",{className:"rounded-lg border border-slate-200 bg-gradient-to-br from-white to-slate-50 p-4 h-56 animate-pulse"},S))}):b.length===0?e.jsxs("div",{className:"border border-dashed border-slate-200 rounded-lg py-16 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-3xl",children:"🏠"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"No properties found"}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xl text-center",children:"Try adding your first property or clear the search/filter to show results."}),e.jsx("div",{className:"mt-4",children:e.jsxs(R,{onClick:()=>s(!0),className:"bg-primary hover:bg-primary/90",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Your First Property"]})})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:b.filter((y,S,w)=>y&&y.id&&w.findIndex(C=>C.id===y.id)===S).map(y=>e.jsx(IM,{property:y,isSelected:r.has(y.id),onSelect:S=>f(y.id,S),onViewDetails:()=>v(y.id),onDelete:()=>g(y.id)},`property-${y.id}`))})]})}),e.jsx(Rp,{open:t,onOpenChange:s})]})}function BH({bookings:t}){const[s,r]=j.useState(new Date),n=new Date(s.getFullYear(),s.getMonth(),1);new Date(s.getFullYear(),s.getMonth()+1,0);const a=new Date(n);a.setDate(a.getDate()-a.getDay());const i=[],l=new Date(a);for(let x=0;x<42;x++)i.push(new Date(l)),l.setDate(l.getDate()+1);const o=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=()=>{r(new Date(s.getFullYear(),s.getMonth()-1,1))},u=()=>{r(new Date(s.getFullYear(),s.getMonth()+1,1))},m=x=>t.some(g=>{const p=new Date(g.checkIn),f=new Date(g.checkOut);return x>=p&&x<=f}),h=x=>x.getMonth()===s.getMonth();return e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{children:[o[s.getMonth()]," ",s.getFullYear()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:d,children:e.jsx(Vu,{className:"w-4 h-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:u,children:e.jsx(Rl,{className:"w-4 h-4"})})]})]})}),e.jsxs(D,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:c.map(x=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:x},x))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:i.map((x,g)=>{const p=h(x),f=m(x);return e.jsxs("div",{className:`aspect-square p-1 text-center text-sm border border-gray-100 relative ${p?"text-gray-900":"text-gray-400"} ${f?"bg-primary text-white":"hover:bg-gray-50"}`,children:[e.jsx("span",{children:x.getDate()}),f&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})})]},g)})}),e.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-primary rounded"}),e.jsx("span",{children:"Booked"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-200 rounded"}),e.jsx("span",{children:"Available"})]})]})]})]})}var VH="Separator",K1="horizontal",qH=["horizontal","vertical"],$M=j.forwardRef((t,s)=>{const{decorative:r,orientation:n=K1,...a}=t,i=UH(n)?n:K1,o=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(Ye.div,{"data-orientation":i,...o,...a,ref:s})});$M.displayName=VH;function UH(t){return qH.includes(t)}var FM=$M;const Gr=j.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...n},a)=>e.jsx(FM,{ref:a,decorative:r,orientation:s,className:_e("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Gr.displayName=FM.displayName;function zH({open:t,onOpenChange:s,bookingId:r}){const[n,a]=j.useState(""),[i,l]=j.useState(""),o=ut(),{toast:c}=Xe(),{data:d,isLoading:u}=ge({queryKey:["/api/bookings",r],queryFn:async()=>{const A=await fetch(`/api/bookings/${r}`);if(!A.ok)throw new Error("Failed to fetch booking");return A.json()},enabled:!!r&&t}),{data:m=[]}=ge({queryKey:["/api/properties"]}),h=m.find(A=>A.id===d?.propertyId),x=Ce({mutationFn:async A=>await fe("PATCH",`/api/bookings/${r}`,{status:A}),onSuccess:()=>{Xd(o),a(""),c({title:"Success",description:"Booking status updated successfully"})},onError:A=>{c({title:"Error",description:A.message||"Failed to update booking status",variant:"destructive"})}}),g=Ce({mutationFn:async A=>await fe("PATCH",`/api/bookings/${r}`,{amountPaid:A.toString(),paymentStatus:A>=parseFloat(d?.totalAmount||"0")?"paid":"partial"}),onSuccess:()=>{Xd(o),yM(o),l(""),c({title:"Success",description:"Payment updated successfully"})},onError:A=>{c({title:"Error",description:A.message||"Failed to update payment",variant:"destructive"})}}),p=()=>{if(!(!n||n===d?.status)){if(n.toLowerCase()==="checked-out"){const A=parseFloat(d?.amountDue||"0");if(A>0){const N=d?.currency==="USD"?"$":d?.currency==="EUR"?"€":d?.currency==="GBP"?"£":d?.currency||"THB";c({title:"Payment Required",description:`Please clear all outstanding payments (${N} ${y(A)}) before checking out the guest.`,variant:"destructive"});return}}x.mutate(n)}},f=(A=!1)=>{if(!d)return;let N;if(A)N=parseFloat(d.totalAmount||"0");else{if(N=parseFloat(i),isNaN(N)||N<=0){c({title:"Validation Error",description:"Please enter a valid payment amount",variant:"destructive"});return}const M=parseFloat(d.amountPaid||"0"),F=parseFloat(d.totalAmount||"0"),I=M+N;if(I>F){c({title:"Validation Error",description:"Payment amount cannot exceed the total due",variant:"destructive"});return}N=I}g.mutate(N)},v=()=>{window.open(`/api/bookings/${r}/invoice`,"_blank")},b=A=>{switch(A?.toLowerCase()){case"paid":return"bg-green-100 text-green-800 border-green-200";case"partial":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"pending":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},y=A=>{const N=typeof A=="string"?parseFloat(A):A;return isNaN(N)?"0.00":N.toLocaleString("en-AU",{minimumFractionDigits:2,maximumFractionDigits:2})},S=A=>{switch(A?.toLowerCase()){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"checked-in":return"bg-blue-100 text-blue-800 border-blue-200";case"checked-out":return"bg-purple-100 text-purple-800 border-purple-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},w=A=>{switch(A?.toLowerCase()){case"confirmed":return e.jsx(Me,{className:"w-4 h-4"});case"pending":return e.jsx(Ke,{className:"w-4 h-4"});case"cancelled":return e.jsx(br,{className:"w-4 h-4"});default:return e.jsx(Ke,{className:"w-4 h-4"})}},C=A=>A?new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",k=()=>{if(!d?.checkIn||!d?.checkOut)return 0;const A=new Date(d.checkIn),N=new Date(d.checkOut);return Math.ceil((N.getTime()-A.getTime())/(1e3*60*60*24))};return r?e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ue,{children:e.jsx(ze,{className:"text-2xl",children:"Booking Details"})}),u?e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Loading booking details..."}):d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{className:`${S(d.status)} flex items-center gap-1 text-sm px-3 py-1`,children:[w(d.status),d.status]}),(d.status?.toLowerCase()==="pending"||d.status?.toLowerCase()==="confirmed")&&(d.paymentStatus==="paid"||d.paymentStatus==="partial")&&e.jsxs(q,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1 text-sm px-3 py-1",children:[e.jsx(Dr,{className:"w-3 h-3"}),d.paymentStatus==="paid"?"Pre-Paid":"Partial Pre-Paid"]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Booking ID: #",d.id]})]}),(d.status?.toLowerCase()==="pending"||d.status?.toLowerCase()==="confirmed")&&(d.paymentStatus==="paid"||d.paymentStatus==="partial")&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(Et,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Payment Received - Awaiting Check-in"}),e.jsxs("p",{className:"text-sm text-blue-700",children:[d.paymentStatus==="paid"?`Full payment of ${d.currency||"THB"} $${y(d.amountPaid||0)} has been received.`:`Partial payment of ${d.currency||"THB"} $${y(d.amountPaid||0)} received. ${d.currency||"THB"} $${y(d.amountDue||0)} still due.`," Guest has not checked in yet."]})]})]}),e.jsx(Gr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5"}),"Guest Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),e.jsx("p",{className:"font-medium",children:d.guestName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Guests"}),e.jsxs("p",{className:"font-medium",children:[d.guests||1," guest",d.guests>1?"s":""]})]}),d.guestEmail&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:d.guestEmail})]}),d.guestPhone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:d.guestPhone})]})]})]}),e.jsx(Gr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5"}),"Property Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium",children:h?.name||"Unknown Property"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h?.address||"N/A"}),h?.bedrooms&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ki,{className:"w-4 h-4"}),e.jsxs("span",{children:[h.bedrooms," Bedroom",h.bedrooms>1?"s":""]})]})]})]}),e.jsx(Gr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Booking Dates"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check-in"}),e.jsx("p",{className:"font-medium",children:C(d.checkIn)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check-out"}),e.jsx("p",{className:"font-medium",children:C(d.checkOut)})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k()," night",k()>1?"s":""]})]}),e.jsx(Gr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Financial Information"]}),d.paymentStatus&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(q,{className:`${b(d.paymentStatus)} flex items-center gap-1 px-3 py-1`,children:[e.jsx(Dr,{className:"w-3 h-3"}),d.paymentStatus.charAt(0).toUpperCase()+d.paymentStatus.slice(1)]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),e.jsxs("p",{className:"text-xl font-bold",children:[d.currency||"THB"," $",y(d.totalAmount||0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Paid"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:[d.currency||"THB"," $",y(d.amountPaid||0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount Due"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:[d.currency||"THB"," $",y(d.amountDue||0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform"}),e.jsx("p",{className:"font-medium",children:d.bookingPlatform||"Direct"})]})]}),d.status?.toLowerCase()==="checked-in"&&parseFloat(d.amountDue||"0")>0&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(Et,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Outstanding Payment"}),e.jsxs("p",{className:"text-sm text-amber-700",children:["Guest has checked in with ",d.currency||"THB"," $",y(d.amountDue||0)," still due"]})]})]}),parseFloat(d.amountDue||"0")>0&&e.jsxs("div",{className:"space-y-3 p-4 bg-slate-50 rounded-lg border",children:[e.jsx(K,{className:"text-sm font-medium",children:"Record Payment"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{type:"number",placeholder:"Enter amount",value:i,onChange:A=>l(A.target.value),step:"0.01",min:"0",max:d.amountDue,className:"flex-1","data-testid":"input-payment-amount"}),e.jsxs(R,{onClick:()=>f(!1),disabled:!i||g.isPending,size:"sm","data-testid":"button-add-payment",children:[e.jsx(Dr,{className:"w-4 h-4 mr-1"}),g.isPending?"Processing...":"Add Payment"]})]}),e.jsxs(R,{onClick:()=>f(!0),disabled:g.isPending,className:"w-full",variant:"default","data-testid":"button-mark-fully-paid",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),g.isPending?"Processing...":"Mark as Fully Paid"]})]}),parseFloat(d.amountDue||"0")===0&&d.paymentStatus==="paid"&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Me,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Payment Completed"})]})]}),d.specialRequests&&e.jsxs(e.Fragment,{children:[e.jsx(Gr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Special Requests"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.specialRequests})]})]}),e.jsx(Gr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:"Update Status"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(te,{value:n||d.status,onValueChange:a,children:[e.jsx(J,{className:"flex-1",children:e.jsx(se,{placeholder:"Select status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"confirmed",children:"Confirmed"}),e.jsx(P,{value:"checked-in",children:"Checked-in"}),e.jsx(P,{value:"checked-out",children:"Checked-out"}),e.jsx(P,{value:"cancelled",children:"Cancelled"})]})]}),e.jsx(R,{onClick:p,disabled:!n||n===d.status||x.isPending,children:x.isPending?"Updating...":"Update"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>s(!1),children:"Close"}),e.jsxs(R,{className:"flex-1",onClick:v,children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Generate Invoice"]})]})]}):e.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"Booking not found"})]})}):null}function Oc({fallbackRoute:t="/",variant:s="ghost",position:r="top-left",className:n="",children:a}){const[,i]=pr(),l=()=>{window.history.length>1?window.history.back():i(t)},o=r==="floating"?"fixed bottom-4 left-4 z-50 shadow-lg":"";return e.jsxs(R,{onClick:l,variant:s,size:"sm",className:`${o} ${n}`,children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),a||"Back"]})}function yb({role:t,...s}){const r=n=>{switch(n){case"admin":return"/dashboard";case"portfolio-manager":return"/dashboard";case"staff":return"/staff-dashboard";case"owner":return"/owner-dashboard";case"retail-agent":return"/retail-agent";case"referral-agent":return"/referral-agent";case"guest":return"/guest-portal";default:return"/"}};return e.jsx(Oc,{fallbackRoute:r(t),...s})}function GH(){const[t,s]=j.useState("bookings"),[r,n]=j.useState("list"),[a,i]=j.useState(""),[l,o]=j.useState("all"),[c,d]=j.useState("all"),[u,m]=j.useState("all"),[h,x]=j.useState("all"),[g,p]=j.useState(!1),[f,v]=j.useState(null),[b,y]=j.useState(!1),S=ut(),C=$F()>0,A=(typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams).get("propertyId"),{data:N=[],isLoading:M}=ge({queryKey:A?fs.bookings.withSource(A):fs.bookings.all(),staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:F=[],isLoading:I}=ge({queryKey:["/api/properties"],staleTime:0});j.useEffect(()=>{const W=setInterval(()=>{try{S.invalidateQueries(fs.bookings.all())}catch{S.invalidateQueries({queryKey:["/api/bookings"]})}S.invalidateQueries({queryKey:["/api/properties"]})},3e4);return()=>clearInterval(W)},[S]);const V=Array.isArray(N)?N:[],E=Array.isArray(F)?F:[],G=A?E.find(W=>W.id===parseInt(A)):null,Y=W=>{v(W),y(!0)},Q=W=>{switch(W){case"Confirmed":return"bg-green-100 text-green-800 border-green-200";case"Pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},T=A?V:V.filter(W=>{const he=E.find(je=>je.id===W.propertyId),Se=he?.name||"",z=he?.address||"",L=l==="all"||W.propertyId===parseInt(l),le=a===""||Se.toLowerCase().includes(a.toLowerCase())||W.guestName&&W.guestName.toLowerCase().includes(a.toLowerCase()),Z=c==="all"||z.toLowerCase().includes(c.toLowerCase()),me=u==="all",U=h==="all"||W.status?.toLowerCase()===h.toLowerCase();return L&&le&&Z&&me&&U}),B=E.map(W=>({...W,bookings:T.filter(he=>he.propertyId===W.id)})).filter(W=>W.bookings.length>0||(a===""||W.name.toLowerCase().includes(a.toLowerCase()))&&(c==="all"||W.address&&W.address.toLowerCase().includes(c.toLowerCase())));return e.jsxs("div",{className:"relative container mx-auto min-h-screen bg-background",children:[C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 bg-white/90 dark:bg-slate-800/90 p-5 rounded-lg shadow-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-t-transparent animate-spin border-primary"}),e.jsx("div",{className:"text-base font-medium",children:"Saving changes…"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Please wait — updating data."})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-8 h-8 text-primary"}),e.jsx("div",{children:A&&G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(Oc,{fallbackRoute:A?`/bookings?propertyId=${A}`:"/bookings",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Property"})})}),e.jsxs("h1",{className:"text-3xl font-bold",children:["Bookings - ",G.name]}),e.jsx("p",{className:"text-muted-foreground",children:"Viewing all bookings for this property"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Unified Calendar & Bookings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all bookings, calendars, and property schedules"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[A&&e.jsx(R,{variant:"outline",onClick:()=>window.location.href="/bookings","data-testid":"button-view-all-bookings",children:"View All Bookings"}),e.jsxs(R,{className:"gap-2",onClick:()=>p(!0),"data-testid":"button-new-booking",children:[e.jsx(ht,{className:"w-4 h-4"}),"New Booking"]}),e.jsxs(R,{variant:"outline",className:"gap-2",onClick:()=>s("live"),"data-testid":"button-live-calendar",children:[e.jsx($t,{className:"w-4 h-4"}),"Live Calendar"]})]})]}),!A&&e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(ja,{className:"w-5 h-5"}),"Filters & Search"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"w-4 h-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(H,{type:"text",placeholder:"Search property or guest...",value:a,onChange:W=>i(W.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(te,{value:l,onValueChange:o,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),E.map(W=>e.jsx(P,{value:String(W.id),children:W.name},W.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Area"}),e.jsxs(te,{value:c,onValueChange:d,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Areas"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Areas"}),e.jsx(P,{value:"Bophut",children:"Bophut"}),e.jsx(P,{value:"Lamai",children:"Lamai"}),e.jsx(P,{value:"Chaweng",children:"Chaweng"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Manager"}),e.jsxs(te,{value:u,onValueChange:m,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Managers"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Managers"}),e.jsx(P,{value:"Dean",children:"Dean"}),e.jsx(P,{value:"Jane",children:"Jane"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(te,{value:h,onValueChange:x,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"Confirmed",children:"Confirmed"}),e.jsx(P,{value:"Pending",children:"Pending"}),e.jsx(P,{value:"Cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"View Mode"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:r==="list"?"default":"outline",size:"sm",onClick:()=>n("list"),className:"flex-1",children:e.jsx(Uw,{className:"w-4 h-4"})}),e.jsx(R,{variant:r==="grid"?"default":"outline",size:"sm",onClick:()=>n("grid"),className:"flex-1",children:e.jsx(XT,{className:"w-4 h-4"})})]})]})]})})]}),e.jsxs(ot,{value:t,onValueChange:s,children:[e.jsxs(it,{className:"grid w-full grid-cols-3",children:[e.jsxs(re,{value:"bookings",className:"gap-2",children:[e.jsx(Uw,{className:"w-4 h-4"}),"Booking List"]}),e.jsxs(re,{value:"calendar",className:"gap-2",children:[e.jsx(We,{className:"w-4 h-4"}),"Multi-Property Calendar"]}),e.jsxs(re,{value:"live",className:"gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Live Calendar"]})]}),e.jsxs(ne,{value:"bookings",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Individual Bookings (",T.length,")"]}),e.jsxs(q,{variant:"outline",children:["Total Revenue: ฿",T.reduce((W,he)=>W+(parseFloat(he.totalAmount)||0),0).toLocaleString()]})]}),M?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading bookings..."})}):T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(st,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Bookings Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||l!=="all"||c!=="all"||h!=="all"?"Try adjusting your filters":"Create your first booking to get started"}),e.jsxs(R,{onClick:()=>p(!0),children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"New Booking"]})]}):r==="list"?e.jsx("div",{className:"space-y-3",children:T.map(W=>{const he=E.find(le=>le.id===W.propertyId),Se=W.checkIn?new Date(W.checkIn).toLocaleDateString():"N/A",z=W.checkOut?new Date(W.checkOut).toLocaleDateString():"N/A",L=W.checkIn&&W.checkOut?Math.ceil((new Date(W.checkOut).getTime()-new Date(W.checkIn).getTime())/(1e3*60*60*24)):0;return e.jsx(O,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Y(W.id),"data-testid":`booking-card-${W.id}`,children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(st,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:W.guestName||"Guest"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:he?.name||"Property"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{children:he?.address||"N/A"})]}),he?.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ki,{className:"w-4 h-4"}),e.jsxs("span",{children:[he.bedrooms," BR"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["฿",parseFloat(W.totalAmount||0).toLocaleString()]}),L>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[L," nights"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm",children:[Se," → ",z]}),e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(q,{className:Q(W.status),children:W.status}),(W.status?.toLowerCase()==="pending"||W.status?.toLowerCase()==="confirmed")&&(W.paymentStatus==="paid"||W.paymentStatus==="partial")&&e.jsxs(q,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1",children:[e.jsx(Dr,{className:"w-3 h-3"}),W.paymentStatus==="paid"?"Pre-Paid":"Partial"]})]})]})]})})},W.id)})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(W=>{const he=E.find(L=>L.id===W.propertyId),Se=W.checkIn?new Date(W.checkIn).toLocaleDateString():"N/A",z=W.checkOut?new Date(W.checkOut).toLocaleDateString():"N/A";return e.jsxs(O,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>Y(W.id),"data-testid":`booking-card-grid-${W.id}`,children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsx($,{className:"text-lg",children:W.guestName||"Guest"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:Q(W.status),children:W.status}),(W.status?.toLowerCase()==="pending"||W.status?.toLowerCase()==="confirmed")&&(W.paymentStatus==="paid"||W.paymentStatus==="partial")&&e.jsxs(q,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center gap-1",children:[e.jsx(Dr,{className:"w-3 h-3"}),W.paymentStatus==="paid"?"Pre-Paid":"Partial"]})]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:he?.name||"Property"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[he?.address||"N/A",he?.bedrooms&&` • ${he.bedrooms} BR`]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Check-in:"}),e.jsx("span",{className:"text-sm font-medium",children:Se})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Check-out:"}),e.jsx("span",{className:"text-sm font-medium",children:z})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Amount:"}),e.jsxs("span",{className:"text-sm font-medium",children:["฿",parseFloat(W.totalAmount||0).toLocaleString()]})]})]})})]},W.id)})})]}),e.jsxs(ne,{value:"calendar",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Multi-Property Calendar (",B.length," ","properties)"]}),e.jsxs(q,{variant:"outline",children:["Total Bookings:"," ",B.reduce((W,he)=>W+he.bookings.length,0)]})]}),I?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading properties..."})}):B.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(We,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Properties Found"}),e.jsx("p",{className:"text-muted-foreground",children:a||c!=="all"?"Try adjusting your filters":"No properties available"})]}):e.jsx("div",{className:"space-y-4",children:B.map(W=>e.jsxs(O,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(_,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{className:"text-xl",children:W.name}),e.jsxs(q,{variant:"secondary",children:[W.bookings.length," Booking",W.bookings.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsxs("span",{children:["Address: ",W.address||"N/A"]})]}),W.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ki,{className:"w-4 h-4"}),e.jsxs("span",{children:[W.bedrooms," Bedrooms"]})]}),W.bathrooms&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:[W.bathrooms," Bathrooms"]})})]})]}),e.jsx(D,{children:W.bookings.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No bookings for this property"}):e.jsx("div",{className:"space-y-3",children:W.bookings.map(he=>{const Se=he.checkIn?new Date(he.checkIn).toLocaleDateString():"N/A",z=he.checkOut?new Date(he.checkOut).toLocaleDateString():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:he.guestName||"Guest"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Se," → ",z]})]})]}),e.jsx(q,{className:Q(he.status),children:he.status})]},he.id)})})})]},W.id))})]}),e.jsxs(ne,{value:"live",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Live Booking Calendar"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(R,{onClick:()=>p(!0),className:"gap-2",children:[e.jsx(ht,{className:"w-4 h-4"}),"New Booking"]})})]}),M?e.jsx(O,{children:e.jsx(D,{className:"p-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar..."})})}):e.jsx(BH,{bookings:V.map(W=>({...W,checkIn:W.checkIn||W.checkInDate,checkOut:W.checkOut||W.checkOutDate}))}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{children:["Upcoming Bookings (",T.length,")"]})}),e.jsx(D,{children:T.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No bookings to display"}):e.jsx("div",{className:"space-y-3",children:T.slice(0,10).map(W=>{const he=E.find(L=>L.id===W.propertyId),Se=W.checkIn?new Date(W.checkIn).toLocaleDateString():"N/A",z=W.checkOut?new Date(W.checkOut).toLocaleDateString():"N/A";return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:W.guestName||"Guest"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:he?.name||"Property"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[Se," → ",z]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["฿",parseFloat(W.totalAmount||0).toLocaleString()]})]}),e.jsx(q,{className:Q(W.status),children:W.status})]},W.id)})})})]})]})]}),e.jsx(O,{className:"mt-6",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Showing"," ",t==="bookings"?T.length:B.length,t==="bookings"?" bookings":" properties"]}),e.jsx("span",{children:t==="bookings"?`Total Revenue: ฿${T.reduce((W,he)=>W+(parseFloat(he.totalAmount)||0),0).toLocaleString()}`:`Total Properties: ${B.length}`})]})})})]}),e.jsx(Ep,{open:g,onOpenChange:p}),e.jsx(zH,{open:b,onOpenChange:y,bookingId:f})]})}var bb="Radio",[HH,LM]=Zs(bb),[KH,WH]=HH(bb),BM=j.forwardRef((t,s)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:l,value:o="on",onCheck:c,form:d,...u}=t,[m,h]=j.useState(null),x=jt(s,f=>h(f)),g=j.useRef(!1),p=m?d||!!m.closest("form"):!0;return e.jsxs(KH,{scope:r,checked:a,disabled:l,children:[e.jsx(Ye.button,{type:"button",role:"radio","aria-checked":a,"data-state":zM(a),"data-disabled":l?"":void 0,disabled:l,value:o,...u,ref:x,onClick:Re(t.onClick,f=>{a||c?.(),p&&(g.current=f.isPropagationStopped(),g.current||f.stopPropagation())})}),p&&e.jsx(UM,{control:m,bubbles:!g.current,name:n,value:o,checked:a,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});BM.displayName=bb;var VM="RadioIndicator",qM=j.forwardRef((t,s)=>{const{__scopeRadio:r,forceMount:n,...a}=t,i=WH(VM,r);return e.jsx(Js,{present:n||i.checked,children:e.jsx(Ye.span,{"data-state":zM(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});qM.displayName=VM;var YH="RadioBubbleInput",UM=j.forwardRef(({__scopeRadio:t,control:s,checked:r,bubbles:n=!0,...a},i)=>{const l=j.useRef(null),o=jt(l,i),c=mp(r),d=np(s);return j.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&x){const g=new Event("click",{bubbles:n});x.call(u,r),u.dispatchEvent(g)}},[c,r,n]),e.jsx(Ye.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});UM.displayName=YH;function zM(t){return t?"checked":"unchecked"}var QH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_p="RadioGroup",[XH,fke]=Zs(_p,[Dc,LM]),GM=Dc(),HM=LM(),[ZH,JH]=XH(_p),KM=j.forwardRef((t,s)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:l=!1,disabled:o=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...h}=t,x=GM(r),g=Ac(d),[p,f]=Jr({prop:i,defaultProp:a??null,onChange:m,caller:_p});return e.jsx(ZH,{scope:r,name:n,required:l,disabled:o,value:p,onValueChange:f,children:e.jsx(U0,{asChild:!0,...x,orientation:c,dir:g,loop:u,children:e.jsx(Ye.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":o?"":void 0,dir:g,...h,ref:s})})})});KM.displayName=_p;var WM="RadioGroupItem",YM=j.forwardRef((t,s)=>{const{__scopeRadioGroup:r,disabled:n,...a}=t,i=JH(WM,r),l=i.disabled||n,o=GM(r),c=HM(r),d=j.useRef(null),u=jt(s,d),m=i.value===a.value,h=j.useRef(!1);return j.useEffect(()=>{const x=p=>{QH.includes(p.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",g)}},[]),e.jsx(z0,{asChild:!0,...o,focusable:!l,active:m,children:e.jsx(BM,{disabled:l,required:i.required,checked:m,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:Re(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:Re(a.onFocus,()=>{h.current&&d.current?.click()})})})});YM.displayName=WM;var eK="RadioGroupIndicator",QM=j.forwardRef((t,s)=>{const{__scopeRadioGroup:r,...n}=t,a=HM(r);return e.jsx(qM,{...a,...n,ref:s})});QM.displayName=eK;var XM=KM,ZM=YM,tK=QM;const JM=j.forwardRef(({className:t,...s},r)=>e.jsx(XM,{className:_e("grid gap-2",t),...s,ref:r}));JM.displayName=XM.displayName;const eR=j.forwardRef(({className:t,...s},r)=>e.jsx(ZM,{ref:r,className:_e("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(tK,{className:"flex items-center justify-center",children:e.jsx(KT,{className:"h-2.5 w-2.5 fill-current text-current"})})}));eR.displayName=ZM.displayName;const W1=[{value:"auto-bill-guest",label:"Auto-Bill Guest",icon:Dr,description:"Charge automatically to guest bill",color:"text-blue-600"},{value:"auto-bill-owner",label:"Auto-Bill Owner",icon:It,description:"Charge to property owner account",color:"text-green-600"},{value:"owner-gift",label:"Owner Gift",icon:Id,description:"Complimentary from property owner",color:"text-purple-600"},{value:"company-gift",label:"Company Gift",icon:_s,description:"Complimentary from management company",color:"text-orange-600"}],Y1={transportation:bi,massage:zu,chef:Gu,cleaning:Us,activities:We,concierge:It},sK=Qt({serviceId:Ne().min(1,"Please select a service"),propertyId:Ne().min(1,"Please select a property"),guestName:Ne().min(1,"Guest name is required"),guestEmail:Ne().email("Valid email required").optional().or(md("")),guestPhone:Ne().optional(),scheduledDate:Ne().min(1,"Date and time required"),duration:Ne().optional(),quantity:Ne().default("1"),billingType:Cs(["auto-bill-guest","auto-bill-owner","owner-gift","company-gift"]),price:Ne().optional(),dateDue:Ne().optional(),giftReason:Ne().optional(),notes:Ne().optional(),internalNotes:Ne().optional()}).refine(t=>t.billingType==="owner-gift"||t.billingType==="company-gift"?!0:t.price&&t.price.trim().length>0,{message:"Price is required",path:["price"]});function rK({open:t,onOpenChange:s,selectedPropertyId:r,selectedServiceId:n,bookerRole:a="manager"}){const{toast:i}=Xe(),l=ut(),[o,c]=j.useState(null),[d,u]=j.useState(0),m=Ft({resolver:es(sK),defaultValues:{serviceId:n?.toString()||"",propertyId:r?.toString()||"",guestName:"",guestEmail:"",guestPhone:"",scheduledDate:"",duration:"",quantity:"1",billingType:"auto-bill-guest",price:"",dateDue:"",giftReason:"",notes:"",internalNotes:""}}),{data:h}=ge({queryKey:["/api/addon-services"]}),{data:x}=ge({queryKey:["/api/properties"]}),g=m.watch("serviceId"),p=m.watch("duration"),f=m.watch("quantity"),v=m.watch("billingType"),b=m.watch("price");j.useEffect(()=>{t&&n&&m.setValue("serviceId",n.toString()),t&&r&&m.setValue("propertyId",r.toString())},[t,n,r,m]),j.useEffect(()=>{if(h&&g){const M=h.find(F=>F.id.toString()===g);if(M){c(M);let F=0;const I=parseInt(f)||1;if(M.pricingModel==="fixed")F=parseFloat(M.basePrice||"0")*I;else if(M.pricingModel==="variable"&&p){const V=parseInt(p)||0,E=parseFloat(M.hourlyRate||"0"),G=parseFloat(M.minimumCharge||"0");F=Math.max(V/60*E*I,G)}else M.pricingModel==="complimentary"&&(F=0);u(F)}}},[h,g,p,f]);const y=Ce({mutationFn:async M=>{const F={"auto-bill-guest":"auto_guest","auto-bill-owner":"auto_owner","owner-gift":"owner_gift","company-gift":"company_gift"},I={service_id:parseInt(M.serviceId),property_id:parseInt(M.propertyId),guest_name:M.guestName,guest_email:M.guestEmail||null,guest_phone:M.guestPhone||null,billing_type:F[M.billingType],price:M.price||(d>0?d.toString():null),date_due:M.dateDue||null,scheduled_date:new Date(M.scheduledDate).toISOString()};return await fe("POST","/api/service-bookings",I)},onSuccess:()=>{i({title:"Service Booked Successfully",description:`${o?.name} has been scheduled for ${m.getValues("guestName")}`}),l.invalidateQueries({queryKey:["/api/service-bookings"]}),l.invalidateQueries({queryKey:["/api/addon-bookings"]}),l.invalidateQueries({queryKey:["/api/finances"]}),m.reset(),s(!1)},onError:M=>{i({title:"Booking Failed",description:M.message,variant:"destructive"})}}),S=M=>{if(console.log("✅ Form submitted with data:",M),(M.billingType==="owner-gift"||M.billingType==="company-gift")&&!M.giftReason){m.setError("giftReason",{message:"Gift reason is required for complimentary services"}),i({title:"Missing Information",description:"Please provide a reason for the complimentary service",variant:"destructive"});return}y.mutate(M)},{data:w}=ge({queryKey:["/api/system-settings"]}),C=M=>{const F=w?.defaultCurrency||"AUD";return new Intl.NumberFormat("en-AU",{style:"currency",currency:F}).format(M)},k=b&&parseFloat(b)>0?parseFloat(b):d,A=v==="owner-gift"||v==="company-gift",N=W1.find(M=>M.value===v);return e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Book Add-on Service"]}),e.jsx(Pt,{children:"Schedule an add-on service with flexible pricing and billing options"})]}),e.jsx(Wt,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(S),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{control:m.control,name:"serviceId",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Service"}),e.jsxs(te,{onValueChange:M.onChange,value:M.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select a service"})})}),e.jsx(ee,{children:h?.map(F=>{const I=Y1[F.category]||It;return e.jsx(P,{value:F.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:F.name}),e.jsx(q,{variant:"outline",className:"ml-auto",children:F.pricingModel})]})},F.id)})})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:m.control,name:"propertyId",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Property"}),e.jsxs(te,{onValueChange:M.onChange,value:M.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})})}),e.jsx(ee,{children:x?.map(F=>e.jsx(P,{value:F.id.toString(),children:F.name},F.id))})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{control:m.control,name:"guestName",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Name"}),e.jsx(ce,{children:e.jsx(H,{...M,placeholder:"Guest full name"})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(de,{control:m.control,name:"guestEmail",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Email (Optional)"}),e.jsx(ce,{children:e.jsx(H,{...M,type:"email",placeholder:"guest@example.com"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:m.control,name:"guestPhone",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Phone (Optional)"}),e.jsx(ce,{children:e.jsx(H,{...M,placeholder:"+61 400 000 000"})}),e.jsx(xe,{})]})})]})]})]}),o&&e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[(()=>{const M=Y1[o.category]||It;return e.jsx(M,{className:"w-5 h-5"})})(),o.name,e.jsx(q,{variant:"outline",children:o.pricingModel})]}),e.jsx(Te,{children:o.description})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(de,{control:m.control,name:"scheduledDate",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{className:"text-red-600",children:"Date & Time *"}),e.jsx(ce,{children:e.jsx(H,{type:"datetime-local",value:M.value,onChange:M.onChange,onBlur:M.onBlur,name:M.name,ref:M.ref,required:!0})}),e.jsx(xe,{})]})}),o.pricingModel==="variable"&&e.jsx(de,{control:m.control,name:"duration",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Duration (minutes)"}),e.jsx(ce,{children:e.jsx(H,{...M,type:"number",placeholder:"60"})}),e.jsxs(Kt,{children:["Rate: ",C(o.hourlyRate||0),"/hour"]}),e.jsx(xe,{})]})}),e.jsx(de,{control:m.control,name:"quantity",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Quantity"}),e.jsx(ce,{children:e.jsx(H,{...M,type:"number",min:"1"})}),e.jsx(xe,{})]})})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-5 h-5"}),"Billing & Payment"]})}),e.jsxs(D,{children:[e.jsx(de,{control:m.control,name:"billingType",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"How should this be billed?"}),e.jsx(ce,{children:e.jsx(JM,{onValueChange:M.onChange,value:M.value,className:"grid grid-cols-2 gap-4",children:W1.map(F=>{const I=F.icon;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(eR,{value:F.value,id:F.value}),e.jsxs(K,{htmlFor:F.value,className:"flex items-center gap-2 cursor-pointer flex-1 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(I,{className:`w-4 h-4 ${F.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:F.label}),e.jsx("div",{className:"text-xs text-gray-500",children:F.description})]})]})]},F.value)})})}),e.jsx(xe,{})]})}),A&&e.jsx(de,{control:m.control,name:"giftReason",render:({field:M})=>e.jsxs(oe,{className:"mt-4",children:[e.jsx(ue,{children:"Gift Reason"}),e.jsx(ce,{children:e.jsx(H,{...M,placeholder:"e.g., Welcome gift, Apology for inconvenience"})}),e.jsx(Kt,{children:"Explain why this service is being provided complimentary"}),e.jsx(xe,{})]})}),!A&&e.jsx(de,{control:m.control,name:"price",render:({field:M})=>e.jsxs(oe,{className:"mt-4",children:[e.jsx(ue,{children:"Price"}),e.jsx(ce,{children:e.jsx(H,{...M,type:"number",step:"0.01",placeholder:d>0?C(d):"0.00"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:m.control,name:"dateDue",render:({field:M})=>e.jsxs(oe,{className:"mt-4",children:[e.jsx(ue,{children:"Payment Due Date (Optional)"}),e.jsx(ce,{children:e.jsx(H,{...M,type:"date",min:new Date().toISOString().split("T")[0]})}),e.jsx(Kt,{children:"When should this payment be due?"}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Price:"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:A?"Complimentary":C(k)})]}),N&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-gray-600",children:[e.jsx(N.icon,{className:`w-4 h-4 ${N.color}`}),e.jsx("span",{children:N.description})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:m.control,name:"notes",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Notes"}),e.jsx(ce,{children:e.jsx(nt,{...M,placeholder:"Special requests or instructions"})}),e.jsx(Kt,{children:"Visible to guest and staff"}),e.jsx(xe,{})]})}),(a==="manager"||a==="staff")&&e.jsx(de,{control:m.control,name:"internalNotes",render:({field:M})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Internal Notes"}),e.jsx(ce,{children:e.jsx(nt,{...M,placeholder:"Staff-only notes"})}),e.jsx(Kt,{children:"Only visible to staff and management"}),e.jsx(xe,{})]})})]}),e.jsxs(Nr,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:y.isPending,onClick:M=>{console.log("🔘 Book Service button clicked"),console.log("Form values:",m.getValues()),console.log("Form errors:",m.formState.errors),console.log("Form is valid:",m.formState.isValid)},children:y.isPending?"Booking...":"Book Service"})]})]})})]})})}function nK({open:t,onClose:s}){const{toast:r}=Xe(),[n,a]=j.useState(null),[i,l]=j.useState(""),[o,c]=j.useState(""),[d,u]=j.useState(""),[m,h]=j.useState(""),[x,g]=j.useState(""),[p,f]=j.useState(""),[v,b]=j.useState(""),[y,S]=j.useState("owner"),[w,C]=j.useState(!1),{data:k=[]}=ge({queryKey:["/api/properties"]}),A=["application/pdf","image/jpeg","image/jpg","image/png"],N=I=>{const V=I.target.files?.[0];if(V){if(!A.includes(V.type)){r({title:"Invalid file type",description:"Only PDF, JPG, and PNG files are allowed.",variant:"destructive"}),I.target.value="";return}if(V.size>10*1024*1024){r({title:"File too large",description:"File size must be less than 10MB.",variant:"destructive"}),I.target.value="";return}a(V)}},M=async I=>{if(I.preventDefault(),!n){r({title:"Missing file",description:"Please attach a receipt (PDF, JPG, or PNG).",variant:"destructive"});return}if(!i){r({title:"Missing property",description:"Please select a property.",variant:"destructive"});return}if(!o){r({title:"Missing bill type",description:"Please select a bill type.",variant:"destructive"});return}if(!m){r({title:"Missing due date",description:"Please select a due date.",variant:"destructive"});return}if(!v){r({title:"Missing billing month",description:"Please select a billing month.",variant:"destructive"});return}C(!0);try{const V=new FormData;V.append("receipt",n),V.append("property_id",i),V.append("bill_type",o),V.append("amount",d||"0"),V.append("due_date",m),V.append("provider",x||""),V.append("account_number",p||""),V.append("billing_month",v),V.append("responsible_party",y);const E=await fetch("/api/utility-bills",{method:"POST",body:V,credentials:"include"}),G=await E.json();if(!E.ok)throw new Error(G.error||"Upload failed");r({title:"Upload successful",description:"Utility bill has been uploaded successfully."}),ws.invalidateQueries({queryKey:["/api/utility-bills"]}),F()}catch(V){console.error("Upload error:",V),r({title:"Upload failed",description:V.message||"An error occurred while uploading the bill.",variant:"destructive"})}finally{C(!1)}},F=()=>{a(null),l(""),c(""),u(""),h(""),g(""),f(""),b(""),S("owner"),s()};return e.jsx(Ve,{open:t,onOpenChange:F,children:e.jsxs(qe,{className:"sm:max-w-[500px] max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Upload Utility Bill"})}),e.jsxs("form",{onSubmit:M,className:"space-y-4 overflow-y-auto px-1",style:{maxHeight:"calc(90vh - 120px)"},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"property",children:"Property *"}),e.jsxs(te,{value:i,onValueChange:l,required:!0,children:[e.jsx(J,{id:"property","data-testid":"select-property",children:e.jsx(se,{placeholder:"Select property"})}),e.jsx(ee,{children:k.map(I=>e.jsx(P,{value:I.id.toString(),children:I.name},I.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"billType",children:"Bill Type *"}),e.jsxs(te,{value:o,onValueChange:c,required:!0,children:[e.jsx(J,{id:"billType","data-testid":"select-bill-type",children:e.jsx(se,{placeholder:"Select type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"electricity",children:"Electricity"}),e.jsx(P,{value:"water",children:"Water"}),e.jsx(P,{value:"gas",children:"Gas"}),e.jsx(P,{value:"internet",children:"Internet"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"amount",children:"Amount"}),e.jsx(H,{id:"amount",type:"number",step:"0.01",min:"0",value:d,onChange:I=>u(I.target.value),placeholder:"0.00","data-testid":"input-amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"dueDate",children:"Due Date *"}),e.jsx(H,{id:"dueDate",type:"date",value:m,onChange:I=>h(I.target.value),required:!0,"data-testid":"input-due-date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"billingMonth",children:"Billing Month * (YYYY-MM)"}),e.jsx(H,{id:"billingMonth",type:"month",value:v,onChange:I=>b(I.target.value),required:!0,"data-testid":"input-billing-month"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"provider",children:"Provider"}),e.jsx(H,{id:"provider",type:"text",value:x,onChange:I=>g(I.target.value),placeholder:"e.g. Energy Australia","data-testid":"input-provider"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"accountNumber",children:"Account Number"}),e.jsx(H,{id:"accountNumber",type:"text",value:p,onChange:I=>f(I.target.value),placeholder:"Optional","data-testid":"input-account-number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"responsibleParty",children:"Responsible Party"}),e.jsxs(te,{value:y,onValueChange:S,children:[e.jsx(J,{id:"responsibleParty","data-testid":"select-responsible-party",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"owner",children:"Owner"}),e.jsx(P,{value:"company",children:"Company"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"receipt",children:"Receipt * (PDF, JPG, PNG - max 10MB)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{id:"receipt",type:"file",accept:".pdf,image/jpeg,image/jpg,image/png",onChange:N,required:!0,"data-testid":"input-receipt-file",className:"flex-1"}),n&&e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(null),"data-testid":"button-remove-file",children:e.jsx(Is,{className:"w-4 h-4"})})]}),n&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",n.name," (",(n.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:F,disabled:w,"data-testid":"button-cancel-upload",children:"Cancel"}),e.jsx(R,{type:"submit",disabled:w,"data-testid":"button-submit-upload",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Vn,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})]})})}function aK(){const[t,s]=j.useState("addon-services"),[r,n]=j.useState(!1),[a,i]=j.useState(),[l,o]=j.useState(),[c,d]=j.useState(!1),[u,m]=j.useState("all"),[h,x]=j.useState("all"),[g,p]=j.useState("all"),[f,v]=j.useState(""),[b,y]=j.useState(""),{toast:S}=Xe(),{data:w=[]}=ge({queryKey:["/api/addon-services"]}),{data:C=[]}=ge({queryKey:["/api/addon-bookings"]}),{data:k}=ge({queryKey:["/api/service-bookings"]}),A=Array.isArray(k?.bookings)?k.bookings:[],{data:N=[]}=ge({queryKey:["/api/utility-bills"]}),{data:M=[]}=ge({queryKey:["/api/properties"]}),{data:F}=ge({queryKey:["/api/system-settings"]}),I=Ce({mutationFn:async({billId:T,status:B})=>await fe("PATCH",`/api/utility-bills/${T}`,{status:B}),onSuccess:async()=>{await ws.refetchQueries({queryKey:["/api/utility-bills"]}),S({title:"Status Updated",description:"Bill status has been updated successfully."})},onError:T=>{S({title:"Update Failed",description:T.message||"Failed to update bill status.",variant:"destructive"})}}),V=Ce({mutationFn:async T=>await fe("DELETE",`/api/utility-bills/${T}`),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/utility-bills"]}),S({title:"Bill Deleted",description:"Utility bill has been deleted successfully."})},onError:T=>{S({title:"Delete Failed",description:T.message||"Failed to delete bill.",variant:"destructive"})}}),E=j.useMemo(()=>N.filter(T=>{if(u!=="all"&&T.propertyId!==parseInt(u)||h!=="all"&&T.type!==h||g!=="all"&&T.status!==g)return!1;const B=new Date(T.dueDate);return!(f&&new Date(f)>B||b&&new Date(b)<B)}),[N,u,h,g,f,b]),G=T=>{if(T==null)return"$0.00";const B=T/100,W=F?.defaultCurrency||"AUD";return new Intl.NumberFormat("en-AU",{style:"currency",currency:W}).format(B)},Y=T=>{switch(T){case"chef":return e.jsx(Gu,{className:"w-5 h-5"});case"massage":return e.jsx(Do,{className:"w-5 h-5"});case"transportation":return e.jsx(bi,{className:"w-5 h-5"});case"activities":return e.jsx(is,{className:"w-5 h-5"});default:return e.jsx(st,{className:"w-5 h-5"})}},Q=T=>{switch(T){case"active":return"default";case"pending":return"secondary";case"confirmed":return"default";case"completed":return"outline";case"paid":return"outline";case"overdue":return"destructive";default:return"secondary"}};return e.jsxs("div",{className:"min-h-screen flex bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(Mi,{title:"Services & Utilities",action:e.jsxs(R,{className:"bg-primary hover:bg-primary/90",onClick:()=>{i(void 0),n(!0)},"data-testid":"button-add-service",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Service"]})}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsx(R,{variant:t==="addon-services"?"default":"ghost",size:"sm",onClick:()=>s("addon-services"),children:"Add-on Services"}),e.jsx(R,{variant:t==="service-bookings"?"default":"ghost",size:"sm",onClick:()=>s("service-bookings"),children:"Service Bookings"}),e.jsx(R,{variant:t==="utility-bills"?"default":"ghost",size:"sm",onClick:()=>s("utility-bills"),children:"Utility Bills"})]}),t==="addon-services"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(T=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:Y(T.category)}),e.jsxs("div",{children:[e.jsx($,{className:"text-lg",children:T.name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:T.category})]})]}),e.jsx(q,{variant:T.isActive?"default":"secondary",children:T.isActive?"Active":"Inactive"})]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:T.description}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{children:e.jsx("span",{className:"text-lg font-semibold text-primary",children:T.pricingModel==="complimentary"?"Complimentary":T.pricingModel==="variable"?T.hourlyRate?`$${Number(T.hourlyRate).toFixed(2)}/hr`:"$0.00/hr":T.defaultPriceCents!=null?`$${(T.defaultPriceCents/100).toFixed(2)}`:T.basePrice!=null?`$${Number(T.basePrice).toFixed(2)}`:"$0.00"})}),e.jsx(q,{variant:"outline",className:"capitalize",children:T.pricingModel})]}),e.jsxs(R,{onClick:()=>{i(T.id),n(!0)},className:"w-full",size:"sm",disabled:!T.isActive,children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Book Service"]})]})]},T.id))}),w.length===0&&e.jsx(O,{children:e.jsxs(D,{className:"text-center py-12",children:[e.jsx(st,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Add-on Services"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start by adding services like cleaning, massage, or chef services."}),e.jsxs(R,{className:"bg-primary hover:bg-primary/90",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add First Service"]})]})})]}),t==="service-bookings"&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Service Bookings"})}),e.jsx(D,{children:A.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(We,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No service bookings found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Booking ID"}),e.jsx(Oe,{children:"Service"}),e.jsx(Oe,{children:"Guest"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Scheduled Date"}),e.jsx(Oe,{children:"Price"}),e.jsx(Oe,{children:"Billing Type"}),e.jsx(Oe,{children:"Due Date"})]})}),e.jsx(Hs,{children:A.map(T=>e.jsxs(wt,{children:[e.jsx(Ae,{className:"font-mono text-xs",children:T.bookingIdRef||"N/A"}),e.jsx(Ae,{children:T.serviceName||"Unknown"}),e.jsx(Ae,{children:T.guestName}),e.jsx(Ae,{children:T.propertyName||`Property ${T.propertyId}`}),e.jsx(Ae,{children:new Date(T.scheduledDate).toLocaleDateString()}),e.jsx(Ae,{children:T.priceCents?G(T.priceCents):e.jsx(q,{variant:"secondary",children:"Complimentary"})}),e.jsx(Ae,{className:"capitalize",children:T.billingType?.replace("_"," ")||"N/A"}),e.jsx(Ae,{children:T.dateDue?new Date(T.dateDue).toLocaleDateString():"-"})]},T.id))})]})})})]}),t==="utility-bills"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Property"}),e.jsxs(te,{value:u,onValueChange:m,children:[e.jsx(J,{"data-testid":"select-filter-property",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),M.map(T=>e.jsx(P,{value:T.id.toString(),children:T.name},T.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Type"}),e.jsxs(te,{value:h,onValueChange:x,children:[e.jsx(J,{"data-testid":"select-filter-type",children:e.jsx(se,{placeholder:"All Types"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Types"}),e.jsx(P,{value:"electricity",children:"Electricity"}),e.jsx(P,{value:"water",children:"Water"}),e.jsx(P,{value:"gas",children:"Gas"}),e.jsx(P,{value:"internet",children:"Internet"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Status"}),e.jsxs(te,{value:g,onValueChange:p,children:[e.jsx(J,{"data-testid":"select-filter-status",children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"uploaded",children:"Uploaded"}),e.jsx(P,{value:"paid",children:"Paid"}),e.jsx(P,{value:"overdue",children:"Overdue"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date From"}),e.jsx(H,{type:"date",value:f,onChange:T=>v(T.target.value),"data-testid":"input-filter-date-from"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Date To"}),e.jsx(H,{type:"date",value:b,onChange:T=>y(T.target.value),"data-testid":"input-filter-date-to"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",E.length," of ",N.length," bills"]}),e.jsxs(R,{variant:"default",onClick:()=>d(!0),"data-testid":"button-upload-receipt",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Upload Receipt"]})]})]})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Utility Bills & Recurring Expenses"})}),e.jsx(D,{children:E.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:N.length===0?"No utility bills found":"No bills match the current filters"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Provider"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Amount"}),e.jsx(Oe,{children:"Due Date"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:E.map(T=>e.jsxs(wt,{children:[e.jsx(Ae,{className:"capitalize",children:T.type}),e.jsx(Ae,{children:T.provider||"-"}),e.jsx(Ae,{children:T.propertyName||`Property ${T.propertyId}`}),e.jsx(Ae,{children:T.amount?`$${Number(T.amount).toFixed(2)}`:"-"}),e.jsx(Ae,{children:e.jsx("span",{className:`${new Date(T.dueDate)<new Date&&T.status!=="paid"?"text-red-600 font-medium":"text-gray-900"}`,children:new Date(T.dueDate).toLocaleDateString()})}),e.jsx(Ae,{children:e.jsxs(te,{value:T.status,onValueChange:B=>{I.mutate({billId:T.id,status:B})},disabled:I.isPending,children:[e.jsx(J,{className:"w-[120px]","data-testid":`select-status-${T.id}`,children:e.jsx(se,{children:e.jsx(q,{variant:Q(T.status),className:"cursor-pointer",children:T.status})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"uploaded",children:"Uploaded"}),e.jsx(P,{value:"paid",children:"Paid"}),e.jsx(P,{value:"overdue",children:"Overdue"})]})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex space-x-2",children:[T.receiptUrl&&e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>window.open(T.receiptUrl,"_blank"),"data-testid":`button-view-receipt-${T.id}`,children:[e.jsx(ma,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this utility bill?")&&V.mutate(T.id)},disabled:V.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${T.id}`,children:e.jsx(Er,{className:"w-3 h-3"})})]})})]},T.id))})]})})})]})]})]})]}),e.jsx(rK,{open:r,onOpenChange:n,selectedServiceId:a,selectedPropertyId:l,bookerRole:"manager"}),e.jsx(nK,{open:c,onClose:()=>d(!1)})]})}function iK(){const[t,s]=j.useState("all"),{data:r=[]}=ge({queryKey:["/api/properties"]}),{data:n=[]}=ge({queryKey:["/api/finance"]}),{data:a=[]}=ge({queryKey:["/api/bookings"]}),i=t==="all"?n:n.filter(N=>N.propertyId.toString()===t),l=t==="all"?a:a.filter(N=>N.propertyId.toString()===t),o=l.filter(N=>N.status!=="cancelled").reduce((N,M)=>{const F=parseFloat(M.platformPayout||M.totalAmount||"0");return N+F},0),c=i.filter(N=>N.type==="income").reduce((N,M)=>N+parseFloat(M.amount||"0"),0),d=o+c,u=i.filter(N=>N.type==="expense").reduce((N,M)=>N+parseFloat(M.amount||"0"),0),m=d-u,h=Xn(new Date),x=ar(h),g=ml(h),p=Sj(g,x)+1,f=l.filter(N=>N.status!=="cancelled").reduce((N,M)=>{const F=Xn(xs(M.checkIn)),I=Xn(xs(M.checkOut)),V=sr(g,1),E=F>x?F:x,G=I<V?I:V;return E<G?N+Sj(G,E):N},0),b=(t==="all"?r.length:1)*p,y=b>0?(f/b*100).toFixed(1):"0",S=l.filter(N=>N.status==="confirmed"&&Ed(h,xs(N.checkIn))).reduce((N,M)=>{const F=parseFloat(M.platformPayout||M.totalAmount||"0");return N+F},0),w=l.filter(N=>N.status==="confirmed"&&Ed(h,xs(N.checkIn))).length,C=[...i].sort((N,M)=>new Date(M.date).getTime()-new Date(N.date).getTime()).slice(0,10),k=t==="all"?r.map(N=>{const M=n.filter(I=>I.propertyId===N.id&&I.type==="income").reduce((I,V)=>I+parseFloat(V.amount||"0"),0),F=d>0?(M/d*100).toFixed(0):0;return{name:N.name,revenue:M,percentage:F}}).filter(N=>N.revenue>0):[],A=t==="all"?"All Properties":r.find(N=>N.id.toString()===t)?.name||"Unknown";return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Financial Dashboard"}),e.jsx("div",{className:"w-64",children:e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{"data-testid":"select-property-filter",children:e.jsx(se,{placeholder:"Filter by Property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),r.map(N=>e.jsx(P,{value:N.id.toString(),children:N.name},N.id))]})]})})]}),t!=="all"&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing finances for: ",e.jsx("strong",{children:A})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Ot,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-total-revenue",children:xt(d)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Bookings: ",xt(o)," + Other: ",xt(c)]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Booking Revenue"}),e.jsx(We,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"text-booking-revenue",children:xt(o)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l.filter(N=>N.status!=="cancelled").length," bookings"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Occupancy Rate"}),e.jsx(We,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600","data-testid":"text-occupancy-rate",children:[y,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f," of ",b," days booked"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Payments"}),e.jsx(Ke,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"text-pending-payments",children:xt(S)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w," upcoming booking",w!==1?"s":""]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(_l,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"text-total-expenses",children:xt(u)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.filter(N=>N.type==="expense").length," transactions"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(na,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${m>=0?"text-blue-600":"text-red-600"}`,"data-testid":"text-net-profit",children:xt(m)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Profit margin: ",d>0?(m/d*100).toFixed(1):0,"%"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Properties"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t==="all"?r.length:1}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t==="all"?"All properties":A})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent Transactions"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:C.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No transactions found"}):C.map(N=>{const M=r.find(F=>F.id===N.propertyId);return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.category}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[M?.name||"Unknown Property"," • ",new Date(N.date).toLocaleDateString()]})]}),e.jsxs("span",{className:`font-medium ${N.type==="income"?"text-green-600":"text-red-600"}`,children:[N.type==="income"?"+":"-",xt(parseFloat(N.amount))]})]},N.id)})})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:t==="all"?"Revenue by Property":"Revenue Breakdown"})}),e.jsx(D,{children:t==="all"?e.jsx("div",{className:"space-y-3",children:k.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No revenue data available"}):k.map((N,M)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:N.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:xt(N.revenue)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",N.percentage,"%)"]})]})]},M))}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Income"}),e.jsx("span",{className:"font-medium text-green-600",children:xt(d)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Total Expenses"}),e.jsx("span",{className:"font-medium text-red-600",children:xt(u)})]}),e.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Net Profit"}),e.jsx("span",{className:`font-bold ${m>=0?"text-blue-600":"text-red-600"}`,children:xt(m)})]})]})})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsx(_,{children:e.jsx($,{children:"Summary"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transactions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[d>0&&u>0?(m/d*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit Margin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length>0?xt(d/i.filter(N=>N.type==="income").length||0):xt(0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg. Transaction Value"})]})]})})]})]})}var Ip="Switch",[lK,gke]=Zs(Ip),[oK,cK]=lK(Ip),tR=j.forwardRef((t,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...m}=t,[h,x]=j.useState(null),g=jt(s,y=>x(y)),p=j.useRef(!1),f=h?u||!!h.closest("form"):!0,[v,b]=Jr({prop:a,defaultProp:i??!1,onChange:d,caller:Ip});return e.jsxs(oK,{scope:r,checked:v,disabled:o,children:[e.jsx(Ye.button,{type:"button",role:"switch","aria-checked":v,"aria-required":l,"data-state":aR(v),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:g,onClick:Re(t.onClick,y=>{b(S=>!S),f&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})}),f&&e.jsx(nR,{control:h,bubbles:!p.current,name:n,value:c,checked:v,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});tR.displayName=Ip;var sR="SwitchThumb",rR=j.forwardRef((t,s)=>{const{__scopeSwitch:r,...n}=t,a=cK(sR,r);return e.jsx(Ye.span,{"data-state":aR(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});rR.displayName=sR;var dK="SwitchBubbleInput",nR=j.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:n=!0,...a},i)=>{const l=j.useRef(null),o=jt(l,i),c=mp(r),d=np(s);return j.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&x){const g=new Event("click",{bubbles:n});x.call(u,r),u.dispatchEvent(g)}},[c,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nR.displayName=dK;function aR(t){return t?"checked":"unchecked"}var iR=tR,uK=rR;const yt=j.forwardRef(({className:t,...s},r)=>e.jsx(iR,{className:_e("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(uK,{className:_e("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));yt.displayName=iR.displayName;function Q1(){const{user:t}=Rr(),{toast:s}=Xe(),r=ut(),[n,a]=j.useState("profile"),[i,l]=j.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:"",timezone:"UTC",language:"en"}),[o,c]=j.useState({emailNotifications:!0,pushNotifications:!0,taskReminders:!0}),[d,u]=j.useState("system"),[m,h]=j.useState({organizationName:"HostPilotPro",currency:"THB",dateFormat:"DD/MM/YYYY"});j.useEffect(()=>{t&&l(k=>({...k,firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||""}))},[t]);const x=Ce({mutationFn:async k=>(await fe("PATCH",`/api/users/${t?.id}`,k)).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/auth/user"]}),r.invalidateQueries({queryKey:["/api/users"]}),s({title:"Profile Updated",description:"Your profile settings have been saved successfully."})},onError:k=>{s({title:"Update Failed",description:k?.message||"Failed to update profile settings.",variant:"destructive"})}}),g=(k,A)=>{l(N=>({...N,[k]:A}))},p=()=>{const k=`${i.firstName} ${i.lastName}`.trim();x.mutate({name:k,email:i.email})},f=(k,A)=>{c(N=>({...N,[k]:A})),s({title:"Setting Updated",description:"Notification preference has been saved."})},v=k=>{u(k);const A=document.documentElement;k==="dark"?A.classList.add("dark"):k==="light"?A.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?A.classList.add("dark"):A.classList.remove("dark"),localStorage.setItem("theme",k),s({title:"Theme Updated",description:`Theme changed to ${k} mode.`})},b=(k,A)=>{h(N=>({...N,[k]:A})),s({title:"Setting Updated",description:`${k} has been updated.`})},y=[{value:"USD",label:"US Dollar ($)"},{value:"EUR",label:"Euro (€)"},{value:"GBP",label:"British Pound (£)"},{value:"THB",label:"Thai Baht (฿)"},{value:"JPY",label:"Japanese Yen (¥)"},{value:"AUD",label:"Australian Dollar (A$)"}],S=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"},{value:"Asia/Bangkok",label:"Bangkok"},{value:"Australia/Sydney",label:"Sydney"}],w=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"th",label:"Thai"},{value:"ja",label:"Japanese"}],C=t?.role==="admin";return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(Lt,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Settings"})]}),e.jsxs(ot,{value:n,onValueChange:a,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"profile","data-testid":"tab-profile",children:"Profile"}),e.jsx(re,{value:"notifications","data-testid":"tab-notifications",children:"Notifications"}),e.jsx(re,{value:"appearance","data-testid":"tab-appearance",children:"Appearance"}),C&&e.jsx(re,{value:"system","data-testid":"tab-system",children:"System"})]}),e.jsx(ne,{value:"profile",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-5 w-5"}),"Personal Information"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"firstName",children:"First Name"}),e.jsx(H,{id:"firstName","data-testid":"input-firstName",value:i.firstName,onChange:k=>g("firstName",k.target.value),placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"lastName",children:"Last Name"}),e.jsx(H,{id:"lastName","data-testid":"input-lastName",value:i.lastName,onChange:k=>g("lastName",k.target.value),placeholder:"Enter last name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"email",children:"Email Address"}),e.jsx(H,{id:"email","data-testid":"input-email",type:"email",value:i.email,onChange:k=>g("email",k.target.value),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"phone",children:"Phone Number"}),e.jsx(H,{id:"phone","data-testid":"input-phone",value:i.phone,onChange:k=>g("phone",k.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(te,{value:i.timezone,onValueChange:k=>g("timezone",k),children:[e.jsx(J,{"data-testid":"select-timezone",children:e.jsx(se,{placeholder:"Select timezone"})}),e.jsx(ee,{children:S.map(k=>e.jsx(P,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"language",children:"Language"}),e.jsxs(te,{value:i.language,onValueChange:k=>g("language",k),children:[e.jsx(J,{"data-testid":"select-language",children:e.jsx(se,{placeholder:"Select language"})}),e.jsx(ee,{children:w.map(k=>e.jsx(P,{value:k.value,children:k.label},k.value))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(q,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(_t,{className:"h-3 w-3"}),t?.role," Access Level"]}),e.jsxs(R,{onClick:p,disabled:x.isPending,"data-testid":"button-save-profile",children:[e.jsx(Uu,{className:"h-4 w-4 mr-2"}),x.isPending?"Saving...":"Save Profile"]})]})]})]})}),e.jsx(ne,{value:"notifications",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"h-5 w-5"}),"Notification Preferences"]})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(K,{className:"text-base",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(yt,{"data-testid":"toggle-emailNotifications",checked:o.emailNotifications,onCheckedChange:k=>f("emailNotifications",k)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(K,{className:"text-base",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive browser push notifications"})]}),e.jsx(yt,{"data-testid":"toggle-pushNotifications",checked:o.pushNotifications,onCheckedChange:k=>f("pushNotifications",k)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(K,{className:"text-base",children:"Task Reminders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get reminded about upcoming and overdue tasks"})]}),e.jsx(yt,{"data-testid":"toggle-taskReminders",checked:o.taskReminders,onCheckedChange:k=>f("taskReminders",k)})]})]})]})}),e.jsx(ne,{value:"appearance",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(JT,{className:"h-5 w-5"}),"Theme & Display"]})}),e.jsx(D,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(K,{className:"text-base",children:"Theme Preference"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"light",label:"Light",icon:x8},{value:"dark",label:"Dark",icon:t8},{value:"system",label:"System",icon:e8}].map(({value:k,label:A,icon:N})=>e.jsxs(R,{variant:d===k?"default":"outline",className:"flex flex-col items-center gap-2 h-auto py-4",onClick:()=>v(k),"data-testid":`button-theme-${k}`,children:[e.jsx(N,{className:"h-5 w-5"}),A]},k))})]})})]})}),C&&e.jsx(ne,{value:"system",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5"}),"System Configuration"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"orgName",children:"Organization Name"}),e.jsx(H,{id:"orgName","data-testid":"input-orgName",value:m.organizationName,onChange:k=>b("organizationName",k.target.value),placeholder:"Enter organization name"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"currency",children:"Default Currency"}),e.jsxs(te,{value:m.currency,onValueChange:k=>b("currency",k),children:[e.jsx(J,{"data-testid":"select-currency",children:e.jsx(se,{placeholder:"Select currency"})}),e.jsx(ee,{children:y.map(k=>e.jsx(P,{value:k.value,children:k.label},k.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"dateFormat",children:"Date Format"}),e.jsxs(te,{value:m.dateFormat,onValueChange:k=>b("dateFormat",k),children:[e.jsx(J,{"data-testid":"select-dateFormat",children:e.jsx(se,{placeholder:"Select date format"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(P,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(P,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),e.jsxs("div",{className:"pt-4 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Me,{className:"h-4 w-4"}),"Settings are saved automatically"]})]})]})})]})]})}const mK=Lu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$n=j.forwardRef(({className:t,variant:s,...r},n)=>e.jsx("div",{ref:n,role:"alert",className:_e(mK({variant:s}),t),...r}));$n.displayName="Alert";const lR=j.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:_e("mb-1 font-medium leading-none tracking-tight",t),...s}));lR.displayName="AlertTitle";const Fn=j.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:_e("text-sm [&_p]:leading-relaxed",t),...s}));Fn.displayName="AlertDescription";const wg=[{email:"admin@test.com",role:"Admin",password:"admin123",permissions:"Full system access, User management, God Mode"},{email:"manager@test.com",role:"JOHN DO (Portfolio Manager)",password:"manager123",permissions:"Property management, Financial oversight"},{email:"owner@test.com",role:"Property Owner",password:"owner123",permissions:"Own properties, Financial reports"},{email:"staff@test.com",role:"Staff Member",password:"staff123",permissions:"Task management, Property operations"},{email:"retail@test.com",role:"Retail Agent",password:"retail123",permissions:"Booking management, Commission tracking"},{email:"referral@test.com",role:"Referral Agent",password:"referral123",permissions:"Property referrals, Commission tracking"}];function hK(){const[,t]=pr(),{login:s,user:r,isLoading:n}=vn(),[a,i]=j.useState(""),[l,o]=j.useState(""),[c,d]=j.useState(!1),[u,m]=j.useState("");if(r&&!n)return X.useEffect(()=>{t("/")},[t]),null;const h=async g=>{g.preventDefault(),d(!0),m("");try{await s(a,l),t("/")}catch(p){m(p.message||"Login failed. Please check your credentials."),d(!1)}},x=async g=>{const f=wg.find(v=>v.email===g)?.password||"123456";i(g),o(f),d(!0),m("");try{await s(g,f),t("/")}catch(v){m(v.message||"Demo login failed."),d(!1)}};return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ts,{className:"h-6 w-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:e.jsxs("div",{className:"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"hidden lg:block space-y-8",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"HostPilotPro"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Complete Hospitality Management Platform"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_s,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Property Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Comprehensive property oversight with intelligent automation"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(st,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Multi-Role Access"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Role-based permissions for admins, managers, owners, staff, and agents"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_t,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Secure Platform"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Enterprise-grade security with encrypted sessions and audit trails"})]})]})]})]}),e.jsx("div",{className:"w-full max-w-md mx-auto lg:mx-0",children:e.jsxs(O,{className:"shadow-xl border-0 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm",children:[e.jsxs(_,{className:"text-center",children:[e.jsx($,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Welcome Back"}),e.jsx(Te,{className:"text-gray-600 dark:text-gray-300",children:"Sign in to your HostPilotPro account"})]}),e.jsxs(D,{className:"space-y-6",children:[u&&e.jsx($n,{className:"border-red-200 bg-red-50 dark:bg-red-900/20",children:e.jsx(Fn,{className:"text-red-700 dark:text-red-300",children:u})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"email",children:"Email"}),e.jsx(H,{id:"email",type:"email",value:a,onChange:g=>i(g.target.value),placeholder:"Enter your email",required:!0,disabled:c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"password",children:"Password"}),e.jsx(H,{id:"password",type:"password",value:l,onChange:g=>o(g.target.value),placeholder:"Enter your password",required:!0,disabled:c})]}),e.jsx(R,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-500",children:"Demo Accounts"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-1 gap-2",children:wg.slice(0,4).map(g=>e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>x(g.email),disabled:c,className:"justify-start text-left",children:[e.jsx(Me,{className:"mr-2 h-4 w-4 text-green-600"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:g.role}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:g.email})]})]},g.email))}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:wg.slice(4).map(g=>e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>x(g.email),disabled:c,className:"justify-start text-left",children:[e.jsx(Me,{className:"mr-2 h-4 w-4 text-blue-600"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:g.role}),e.jsx("span",{className:"text-xs text-gray-500 truncate",children:g.email})]})]},g.email))})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Demo passwords: admin123, manager123, owner123, staff123, 123456, guest123"})})]})]})})]})})}const Em={saveProfile:(t,s)=>{try{return localStorage.setItem(`profile_${t}`,JSON.stringify(s)),!0}catch(r){return console.error("Error saving profile:",r),!1}},getProfile:t=>{try{const s=localStorage.getItem(`profile_${t}`);return s?JSON.parse(s):null}catch(s){return console.error("Error loading profile:",s),null}},saveNotifications:(t,s)=>{try{return localStorage.setItem(`notifications_${t}`,JSON.stringify(s)),!0}catch(r){return console.error("Error saving notifications:",r),!1}},getNotifications:t=>{try{const s=localStorage.getItem(`notifications_${t}`);return s?JSON.parse(s):null}catch(s){return console.error("Error loading notifications:",s),null}}};function xK(){const{user:t}=vn(),{toast:s}=Xe(),[r,n]=j.useState(!1),[a,i]=j.useState(!1),[l,o]=j.useState({firstName:t?.firstName||"Demo",lastName:t?.lastName||"Admin",email:t?.email||"admin@test.com",phone:t?.phone||"+66 2 123 4567",company:t?.company||"HostPilotPro",department:t?.department||"Administration",timezone:t?.timezone||"Asia/Bangkok",language:t?.language||"English"});j.useEffect(()=>{if(t){const f=Em.getProfile(t.id);f&&o(b=>({...b,...f}));const v=Em.getNotifications(t.id);v&&d(v)}},[t]);const[c,d]=j.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,taskReminders:!0,bookingAlerts:!0,maintenanceAlerts:!0,paymentNotifications:!0,weeklyReports:!0,monthlyReports:!0,systemUpdates:!1}),[u,m]=j.useState({twoFactorEnabled:!1,sessionTimeout:"4 hours",passwordLastChanged:"2024-12-15"}),h=()=>{if(t){const f={firstName:l.firstName,lastName:l.lastName,email:l.email,phone:l.phone,company:l.company,department:l.department},v=Em.saveProfile(t.id,f);s(v?{title:"Profile Updated",description:"Your profile information has been saved successfully."}:{title:"Save Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}n(!1)},x=(f,v)=>{const b={...c,[f]:v};d(b),t&&Em.saveNotifications(t.id,b),s({title:"Notification Settings Updated",description:`${f.replace(/([A-Z])/g," $1").toLowerCase()} ${v?"enabled":"disabled"}.`})},g=f=>{switch(f){case"admin":return"System Administrator";case"portfolio-manager":return"Portfolio Manager";case"owner":return"Property Owner";case"staff":return"Staff Member";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";case"guest":return"Guest";default:return f}},p=f=>{switch(f){case"admin":return"bg-red-500";case"portfolio-manager":return"bg-blue-500";case"owner":return"bg-green-500";case"staff":return"bg-purple-500";case"retail-agent":return"bg-orange-500";case"referral-agent":return"bg-yellow-500";case"guest":return"bg-gray-500";default:return"bg-gray-500"}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Es,{href:"/",children:e.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Ua,{className:"h-4 w-4"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account information and preferences"})]})]}),e.jsx(q,{className:`${p(t?.role)} text-white`,children:g(t?.role)})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(O,{className:"lg:col-span-1",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-5 w-5"}),"Profile Overview"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(_n,{className:"h-24 w-24",children:[e.jsx(Fl,{src:t?.profileImageUrl}),e.jsxs(In,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-2xl",children:[l.firstName.charAt(0),l.lastName.charAt(0)]})]}),e.jsx(R,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 rounded-full h-8 w-8 p-0",onClick:()=>s({title:"Photo Upload",description:"Photo upload feature coming soon!"}),children:e.jsx(Bu,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[l.firstName," ",l.lastName]}),e.jsx("p",{className:"text-gray-600",children:l.email}),e.jsx(q,{variant:"secondary",className:"mt-2",children:g(t?.role)})]})]}),e.jsx(Gr,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Company"}),e.jsx("span",{className:"text-sm font-medium",children:l.company})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Department"}),e.jsx("span",{className:"text-sm font-medium",children:l.department})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Timezone"}),e.jsx("span",{className:"text-sm font-medium",children:l.timezone})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Language"}),e.jsx("span",{className:"text-sm font-medium",children:l.language})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5"}),"Personal Information"]}),e.jsx(R,{variant:r?"default":"outline",size:"sm",onClick:()=>r?h():n(!0),children:r?e.jsxs(e.Fragment,{children:[e.jsx(Uu,{className:"h-4 w-4 mr-2"}),"Save Changes"]}):"Edit Profile"})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"firstName",children:"First Name"}),e.jsx(H,{id:"firstName",value:l.firstName,onChange:f=>o(v=>({...v,firstName:f.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"lastName",children:"Last Name"}),e.jsx(H,{id:"lastName",value:l.lastName,onChange:f=>o(v=>({...v,lastName:f.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"email",children:"Email Address"}),e.jsx(H,{id:"email",type:"email",value:l.email,onChange:f=>o(v=>({...v,email:f.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"phone",children:"Phone Number"}),e.jsx(H,{id:"phone",value:l.phone,onChange:f=>o(v=>({...v,phone:f.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"company",children:"Company"}),e.jsx(H,{id:"company",value:l.company,onChange:f=>o(v=>({...v,company:f.target.value})),disabled:!r})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"department",children:"Department"}),e.jsx(H,{id:"department",value:l.department,onChange:f=>o(v=>({...v,department:f.target.value})),disabled:!r})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"h-5 w-5"}),"Notification Preferences"]})}),e.jsx(D,{className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(c).map(([f,v])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[v?e.jsx(Vs,{className:"h-4 w-4 text-green-600"}):e.jsx(zT,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:f.replace(/([A-Z])/g," $1").replace(/^./,b=>b.toUpperCase())})]}),e.jsx(yt,{checked:v,onCheckedChange:b=>x(f,b)})]},f))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5"}),"Security Settings"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsx(yt,{checked:u.twoFactorEnabled,onCheckedChange:f=>{m(v=>({...v,twoFactorEnabled:f})),s({title:"Security Setting Updated",description:`Two-factor authentication ${f?"enabled":"disabled"}.`})}})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Password Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Last Changed"}),e.jsx("span",{className:"text-xs font-medium",children:u.passwordLastChanged})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Session Timeout"}),e.jsx("span",{className:"text-xs font-medium",children:u.sessionTimeout})]}),e.jsx(R,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>s({title:"Change Password",description:"Password change feature coming soon!"}),children:"Change Password"})]})]})]})]})]})]})]})}function pK(){const[t,s]=j.useState(""),[r,n]=j.useState(""),[a,i]=j.useState(!1),{toast:l}=Xe(),{data:o=[]}=ge({queryKey:["/api/auth/demo-users"]}),c=Ce({mutationFn:async x=>await fe("POST","/api/auth/demo-login",x),onSuccess:x=>{l({title:"Login successful",description:`Welcome! Redirecting to your ${x.user?.role} dashboard...`}),setTimeout(()=>{window.location.href=x.redirectUrl||"/dashboard"},1e3)},onError:x=>{l({title:"Login failed",description:x.message||"Invalid credentials",variant:"destructive"})}}),d=x=>{if(x.preventDefault(),!t||!r){l({title:"Missing credentials",description:"Please enter both email and password",variant:"destructive"});return}c.mutate({email:t,password:r})},u=x=>{s(x.email),n(x.password),c.mutate({email:x.email,password:x.password})},m=x=>{navigator.clipboard.writeText(`${x.email} / ${x.password}`),l({title:"Copied to clipboard",description:`${x.email} / ${x.password}`})},h=x=>({admin:"bg-red-100 text-red-800","portfolio-manager":"bg-blue-100 text-blue-800",owner:"bg-green-100 text-green-800",staff:"bg-yellow-100 text-yellow-800","retail-agent":"bg-purple-100 text-purple-800","referral-agent":"bg-indigo-100 text-indigo-800",guest:"bg-gray-100 text-gray-800"})[x]||"bg-gray-100 text-gray-800";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 pt-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(Tt,{className:"h-10 w-10 text-blue-600"}),e.jsx("h1",{className:"text-5xl font-bold text-gray-900",children:"HostPilotPro"})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Complete property management platform for hospitality professionals. Manage properties, track tasks, handle bookings, and monitor finances."})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs(O,{className:"w-full",children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-5 w-5"}),"Login to HostPilotPro"]}),e.jsx(Te,{children:"Enter your credentials or use a demo account below"})]}),e.jsx(D,{children:e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"email",children:"Email"}),e.jsx(H,{id:"email",type:"email",value:t,onChange:x=>s(x.target.value),placeholder:"admin@hostpilotpro.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{id:"password",type:a?"text":"password",value:r,onChange:x=>n(x.target.value),placeholder:"Enter password",required:!0}),e.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?e.jsx(YT,{className:"h-4 w-4"}):e.jsx($t,{className:"h-4 w-4"})})]})]}),e.jsx(R,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:c.isPending,children:c.isPending?"Signing in...":"Sign In"})]})})]}),e.jsxs(O,{className:"w-full",children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-5 w-5"}),"Demo Accounts"]}),e.jsx(Te,{children:"Click any account to login instantly, or copy credentials"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map((x,g)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-medium text-sm",children:[x.firstName," ",x.lastName]}),e.jsx(q,{variant:"secondary",className:`text-xs ${h(x.role)}`,children:x.role})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[x.email," / ",x.password]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>m(x),className:"h-8 w-8 p-0",children:e.jsx(YL,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",onClick:()=>u(x),disabled:c.isPending,className:"text-xs bg-blue-600 hover:bg-blue-700",children:"Login"})]})]},g))})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Property Management"})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Track properties, owners, and status updates with real-time management tools."})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Agent Dashboards"})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Referral and retail agent portals with commission tracking and booking management."})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Financial Toolkit"})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600",children:"Revenue tracking, expense monitoring, and automated invoice generation."})})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(q,{variant:"secondary",className:"text-sm px-4 py-2",children:"Multi-tenant ready • Role-based access • Real-time updates"})})]})})}function fK(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(O,{className:"w-full max-w-md mx-4",children:e.jsxs(D,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(Et,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function gK(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Maintenance Suggestions & Approval"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pending Suggestions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"Pool Filter Replacement"}),e.jsx("p",{className:"text-gray-600",children:"Villa Samui - Recommended based on usage patterns"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Cost: $150"})]}),e.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"AC Maintenance"}),e.jsx("p",{className:"text-gray-600",children:"Villa Aruna - Due for quarterly service"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Cost: $250"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recently Approved"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsx("h3",{className:"font-medium",children:"Garden Maintenance"}),e.jsx("p",{className:"text-gray-600",children:"Villa Paradise - Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cost: $120"})]})})]})]})]})}function Sg(){const{user:t}=Rr(),{toast:s}=Xe(),r=ut(),[n,a]=j.useState("overview"),[i,l]=j.useState(""),{data:o=[],isLoading:c}=ge({queryKey:["/api/checkins"],retry:!1}),{data:d=[],isLoading:u}=ge({queryKey:["/api/checkouts"],retry:!1}),{data:m=[],isLoading:h}=ge({queryKey:["/api/checkins"],retry:!1}),{data:x=[]}=ge({queryKey:["/api/properties"],retry:!1}),g=C=>{switch(C){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=C=>{switch(C){case"management":return e.jsx(It,{className:"h-4 w-4"});case"housekeeping":return e.jsx(Me,{className:"h-4 w-4"});case"pool":return e.jsx(Ut,{className:"h-4 w-4"});case"maintenance":return e.jsx(Lt,{className:"h-4 w-4"});default:return e.jsx(dt,{className:"h-4 w-4"})}},f=(C,k="THB")=>{const A=typeof C=="string"?parseFloat(C):C;return new Intl.NumberFormat("th-TH",{style:"currency",currency:k,minimumFractionDigits:2}).format(A)},v=({checkIn:C,onComplete:k})=>{const[A,N]=j.useState({electricMeterReading:"",meterReadingMethod:"manual",guestNames:[""],passportNumbers:[""],depositType:"none",depositAmount:"",depositCurrency:"THB",completionNotes:""}),M=()=>{k(C.id,A)};return e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Complete Check-in"]})}),e.jsxs(qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ue,{children:e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-5 w-5"}),"Complete Guest Check-in"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(K,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Electric Meter Reading (kWh)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"reading",children:"Current Reading"}),e.jsx(H,{id:"reading",type:"number",step:"0.001",placeholder:"0.000",value:A.electricMeterReading,onChange:F=>N({...A,electricMeterReading:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"method",children:"Reading Method"}),e.jsxs(te,{value:A.meterReadingMethod,onValueChange:F=>N({...A,meterReadingMethod:F}),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"manual",children:"Manual Entry"}),e.jsx(P,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(P,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(K,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Guest Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guestName",children:"Guest Name"}),e.jsx(H,{id:"guestName",placeholder:"Full name from passport",value:A.guestNames[0],onChange:F=>N({...A,guestNames:[F.target.value,...A.guestNames.slice(1)]})})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"passportNumber",children:"Passport Number"}),e.jsx(H,{id:"passportNumber",placeholder:"Passport number",value:A.passportNumbers[0],onChange:F=>N({...A,passportNumbers:[F.target.value,...A.passportNumbers.slice(1)]})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(K,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Security Deposit"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"depositType",children:"Deposit Type"}),e.jsxs(te,{value:A.depositType,onValueChange:F=>N({...A,depositType:F}),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"none",children:"No Deposit"}),e.jsx(P,{value:"cash",children:"Cash"}),e.jsx(P,{value:"digital",children:"Digital Payment"})]})]})]}),A.depositType!=="none"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"depositAmount",children:"Amount"}),e.jsx(H,{id:"depositAmount",type:"number",placeholder:"0.00",value:A.depositAmount,onChange:F=>N({...A,depositAmount:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"depositCurrency",children:"Currency"}),e.jsxs(te,{value:A.depositCurrency,onValueChange:F=>N({...A,depositCurrency:F}),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"THB",children:"THB (Thai Baht)"}),e.jsx(P,{value:"USD",children:"USD (US Dollar)"}),e.jsx(P,{value:"EUR",children:"EUR (Euro)"}),e.jsx(P,{value:"GBP",children:"GBP (British Pound)"})]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"notes",children:"Completion Notes"}),e.jsx(nt,{id:"notes",placeholder:"Any additional notes or observations...",value:A.completionNotes,onChange:F=>N({...A,completionNotes:F.target.value}),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(R,{variant:"outline",children:"Cancel"}),e.jsx(R,{onClick:M,className:"bg-green-600 hover:bg-green-700",children:"Complete Check-in"})]})]})]})]})},b=({checkOut:C,onComplete:k})=>{const[A,N]=j.useState({electricMeterReading:"",meterReadingMethod:"manual",paymentStatus:"included",paymentMethod:"",discountAmount:"",discountReason:"",completionNotes:"",handlerComments:""}),M=()=>{k(C.id,A)};return e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{size:"sm",className:"bg-red-600 hover:bg-red-700",children:[e.jsx(cn,{className:"h-4 w-4 mr-1"}),"Complete Check-out"]})}),e.jsxs(qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ue,{children:e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),"Complete Guest Check-out"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(K,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Final Electric Meter Reading (kWh)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"reading",children:"Final Reading"}),e.jsx(H,{id:"reading",type:"number",step:"0.001",placeholder:"0.000",value:A.electricMeterReading,onChange:F=>N({...A,electricMeterReading:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"method",children:"Reading Method"}),e.jsxs(te,{value:A.meterReadingMethod,onValueChange:F=>N({...A,meterReadingMethod:F}),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"manual",children:"Manual Entry"}),e.jsx(P,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(P,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(K,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Electricity Payment"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"paymentStatus",children:"Payment Status"}),e.jsxs(te,{value:A.paymentStatus,onValueChange:F=>N({...A,paymentStatus:F}),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"included",children:"Included in Stay"}),e.jsx(P,{value:"paid_by_guest",children:"Paid by Guest"}),e.jsx(P,{value:"not_charged",children:"Not Charged"})]})]})]}),A.paymentStatus==="paid_by_guest"&&e.jsxs("div",{children:[e.jsx(K,{htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(te,{value:A.paymentMethod,onValueChange:F=>N({...A,paymentMethod:F}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select method"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"cash",children:"Cash"}),e.jsx(P,{value:"digital",children:"Digital Payment"}),e.jsx(P,{value:"deducted_from_deposit",children:"Deducted from Deposit"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(K,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Discount (Optional)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"discountAmount",children:"Discount Amount (THB)"}),e.jsx(H,{id:"discountAmount",type:"number",step:"0.01",placeholder:"0.00",value:A.discountAmount,onChange:F=>N({...A,discountAmount:F.target.value})})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"discountReason",children:"Discount Reason"}),e.jsxs(te,{value:A.discountReason,onValueChange:F=>N({...A,discountReason:F}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select reason"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"power_outage",children:"Power Outage"}),e.jsx(P,{value:"goodwill_gesture",children:"Goodwill Gesture"}),e.jsx(P,{value:"maintenance_issue",children:"Maintenance Issue"}),e.jsx(P,{value:"guest_complaint",children:"Guest Complaint"}),e.jsx(P,{value:"other",children:"Other"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"completionNotes",children:"Completion Notes"}),e.jsx(nt,{id:"completionNotes",placeholder:"Any observations about the check-out process...",value:A.completionNotes,onChange:F=>N({...A,completionNotes:F.target.value}),rows:2})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"handlerComments",children:"Handler Comments"}),e.jsx(nt,{id:"handlerComments",placeholder:"Private comments for internal reference...",value:A.handlerComments,onChange:F=>N({...A,handlerComments:F.target.value}),rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(R,{variant:"outline",children:"Cancel"}),e.jsx(R,{onClick:M,className:"bg-green-600 hover:bg-green-700",children:"Complete Check-out"})]})]})]})]})},y=Ce({mutationFn:({id:C,data:k})=>fe("PUT",`/api/guest-checkins/${C}/complete`,k),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/guest-checkins"]}),s({title:"Check-in Completed",description:"Guest check-in has been successfully completed."})},onError:C=>{s({title:"Error",description:C.message||"Failed to complete check-in",variant:"destructive"})}}),S=Ce({mutationFn:({id:C,data:k})=>fe("PUT",`/api/guest-checkouts/${C}/complete`,k),onSuccess:C=>{r.invalidateQueries({queryKey:["/api/guest-checkouts"]}),C.depositRefundAlert?s({title:"Check-out Completed with Alert",description:"Manual deposit refund required for non-THB currency.",variant:"default"}):s({title:"Check-out Completed",description:"Guest check-out has been successfully completed."})},onError:C=>{s({title:"Error",description:C.message||"Failed to complete check-out",variant:"destructive"})}}),w=Ce({mutationFn:({id:C,data:k})=>fe("PUT",`/api/checkin-checkout-demo-tasks/${C}/complete`,k),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/checkin-checkout-demo-tasks"]}),s({title:"Task Completed",description:"Demo task has been marked as completed."})},onError:C=>{s({title:"Error",description:C.message||"Failed to complete task",variant:"destructive"})}});return t?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ka,{className:"h-8 w-8 text-blue-600"})}),"Check-in/Check-out Workflow"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage guest arrivals, departures, and electric meter readings with OCR automation"})]})}),e.jsxs(ot,{value:n,onValueChange:a,className:"space-y-6",children:[e.jsxs(it,{className:"grid grid-cols-5 w-full max-w-2xl",children:[e.jsxs(re,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(KL,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(re,{value:"checkins",className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-4 w-4"}),"Check-ins"]}),e.jsxs(re,{value:"checkouts",className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-4 w-4"}),"Check-outs"]}),e.jsxs(re,{value:"tasks",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Demo Tasks"]}),e.jsxs(re,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-4 w-4"}),"Settings"]})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Check-ins"}),e.jsx(ka,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.filter(C=>C.status==="pending").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Awaiting staff assignment"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Check-outs"}),e.jsx(cn,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.filter(C=>C.status==="pending").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Awaiting completion"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx($,{className:"text-sm font-medium",children:"Active Tasks"}),e.jsx(Me,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.filter(C=>C.status!=="completed").length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Across all departments"})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Recent Activity"]}),e.jsx(Te,{children:"Latest check-in/check-out workflow activities"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:[...o.slice(0,3),...d.slice(0,3)].sort((C,k)=>new Date(k.createdAt||k.scheduledDate).getTime()-new Date(C.createdAt||C.scheduledDate).getTime()).slice(0,5).map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[C.checkInId?e.jsx(cn,{className:"h-5 w-5 text-red-500"}):e.jsx(ka,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[C.checkInId?"Check-out":"Check-in"," - Property #",C.propertyId]}),e.jsx("p",{className:"text-sm text-gray-600",children:rt(new Date(C.scheduledDate),"MMM dd, yyyy at HH:mm")})]})]}),e.jsx(q,{className:g(C.status),children:C.status.replace("_"," ")})]},`${C.id}-${C.checkInId?"out":"in"}`))})})]})]}),e.jsx(ne,{value:"checkins",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-5 w-5"}),"Guest Check-ins"]}),e.jsx(Te,{children:"Manage guest arrivals with passport documentation and electric meter readings"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ka,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No check-ins found"})]}):o.map(C=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ka,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Property #",C.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",rt(new Date(C.scheduledDate),"MMM dd, yyyy at HH:mm")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:g(C.status),children:C.status.replace("_"," ")}),C.status==="pending"&&t?.role==="staff"&&e.jsx(v,{checkIn:C,onComplete:(k,A)=>y.mutate({id:k,data:A})})]})]}),C.status==="completed"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Electric Reading"}),e.jsxs("p",{className:"font-medium",children:[C.electricMeterReading," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guest Names"}),e.jsx("p",{className:"font-medium",children:C.guestNames?.join(", ")||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Deposit"}),e.jsx("p",{className:"font-medium",children:C.depositType==="none"?"No Deposit":`${f(C.depositAmount,C.depositCurrency)}`})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Method"}),e.jsx("p",{className:"font-medium",children:C.meterReadingMethod?.replace("_"," ")})]})]}),C.completionNotes&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Notes"}),e.jsx("p",{className:"text-sm",children:C.completionNotes})]})]},C.id))})})]})}),e.jsx(ne,{value:"checkouts",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-5 w-5"}),"Guest Check-outs"]}),e.jsx(Te,{children:"Process guest departures with electricity billing and payment collection"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(cn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No check-outs found"})]}):d.map(C=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cn,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Property #",C.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Scheduled: ",rt(new Date(C.scheduledDate),"MMM dd, yyyy at HH:mm")]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:g(C.status),children:C.status.replace("_"," ")}),C.status==="pending"&&t?.role==="staff"&&e.jsx(b,{checkOut:C,onComplete:(k,A)=>S.mutate({id:k,data:A})})]})]}),C.status==="completed"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Electric Usage"}),e.jsxs("p",{className:"font-medium",children:[C.electricityUsed," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Charge"}),e.jsxs("p",{className:"font-medium",children:[f(C.totalElectricityCharge),C.discountAmount>0&&e.jsxs("span",{className:"text-sm text-green-600 ml-1",children:["(-",f(C.discountAmount),")"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payment Status"}),e.jsx("p",{className:"font-medium",children:C.paymentStatus?.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rate"}),e.jsxs("p",{className:"font-medium",children:[C.electricityRatePerKwh," THB/kWh"]})]})]}),(C.discountReason||C.handlerComments)&&e.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[C.discountReason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Discount Reason"}),e.jsx("p",{className:"text-sm",children:C.discountReason})]}),C.handlerComments&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Handler Comments"}),e.jsx("p",{className:"text-sm",children:C.handlerComments})]})]})]},C.id))})})]})}),e.jsx(ne,{value:"tasks",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5"}),"Check-in/Check-out Demo Tasks"]}),e.jsx(Te,{children:"Role-specific tasks for pool staff, housekeepers, hosting staff, and managers"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No demo tasks found"})]}):m.map(C=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[p(C.department),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:C.title}),e.jsx("p",{className:"text-sm text-gray-600",children:C.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{variant:"outline",className:"text-xs",children:C.department}),e.jsx(q,{className:g(C.status),children:C.status.replace("_"," ")}),C.status==="pending"&&t?.role==="staff"&&e.jsxs(R,{size:"sm",onClick:()=>w.mutate({id:C.id,data:{completionNotes:"Task completed via workflow interface"}}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 pt-3 border-t text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Task Type"}),e.jsx("p",{className:"font-medium",children:C.taskType?.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Assigned Role"}),e.jsx("p",{className:"font-medium",children:C.assignedRole})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:rt(new Date(C.dueDate),"MMM dd, HH:mm")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[C.estimatedDuration||30," min"]})]})]})]},C.id))})})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5"}),"Workflow Settings"]}),e.jsx(Te,{children:"Configure electricity rates, OCR settings, and notification preferences"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Electricity Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"defaultRate",children:"Default Rate (THB per kWh)"}),e.jsx(H,{id:"defaultRate",type:"number",step:"0.01",defaultValue:"7.00",placeholder:"7.00"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"currency",children:"Currency"}),e.jsxs(te,{defaultValue:"THB",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"THB",children:"THB (Thai Baht)"}),e.jsx(P,{value:"USD",children:"USD (US Dollar)"}),e.jsx(P,{value:"EUR",children:"EUR (Euro)"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Bu,{className:"h-4 w-4"}),"OCR Settings"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{htmlFor:"autoOcr",children:"Auto OCR Processing"}),e.jsx("input",{type:"checkbox",id:"autoOcr",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{htmlFor:"manualOverride",children:"Manual Override Allowed"}),e.jsx("input",{type:"checkbox",id:"manualOverride",defaultChecked:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"confidence",children:"Minimum Confidence (%)"}),e.jsx(H,{id:"confidence",type:"number",min:"50",max:"100",defaultValue:"85"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Notification Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{children:"Deposit Refund Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{children:"High Usage Warnings"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{children:"Task Assignment Notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{children:"Completion Confirmations"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Settings"})})]})})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Nt,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to access the check-in/check-out workflow."})]})})}function X1(){const[t,s]=j.useState("overview"),[r,n]=j.useState(1),[a,i]=j.useState(null),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(!1),{toast:g}=Xe(),p=ut(),{data:f=[],isLoading:v}=ge({queryKey:["/api/checkins",r],queryFn:()=>fe("GET","/api/checkins"),retry:!1}),{data:b=[],isLoading:y}=ge({queryKey:["/api/checkouts",r],queryFn:()=>fe("GET","/api/checkouts"),retry:!1}),{data:S=[],isLoading:w}=ge({queryKey:["/api/checkins-tasks",r],queryFn:()=>fe("GET","/api/checkins"),retry:!1}),{data:C=[],isLoading:k}=ge({queryKey:["/api/checkins-history",r],queryFn:()=>fe("GET","/api/checkins"),retry:!1}),A=Array.isArray(f)?f:[],N=Array.isArray(b)?b:[],M=Array.isArray(S)?S:[],F=Array.isArray(C)?C:[],{data:I=[]}=ge({queryKey:["/api/properties"],queryFn:()=>fe("GET","/api/properties")}),V=Ce({mutationFn:Z=>fe("POST","/api/guest-checkin/check-ins",Z),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-ins"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),d(!1),g({title:"Check-in Created",description:"Guest check-in has been successfully created."})},onError:Z=>{g({title:"Error",description:Z.message||"Failed to create check-in",variant:"destructive"})}}),E=Ce({mutationFn:Z=>fe("POST","/api/guest-checkin/check-outs",Z),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),m(!1),g({title:"Check-out Created",description:"Guest check-out has been successfully created."})},onError:Z=>{g({title:"Error",description:Z.message||"Failed to create check-out",variant:"destructive"})}}),G=Ce({mutationFn:Z=>fe("POST",`/api/guest-checkin/check-ins/${Z}/complete`),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-ins"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),g({title:"Check-in Completed",description:"Guest check-in has been marked as completed."})},onError:Z=>{g({title:"Error",description:Z.message||"Failed to complete check-in",variant:"destructive"})}}),Y=Ce({mutationFn:Z=>fe("POST",`/api/guest-checkin/check-outs/${Z}/complete`),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),g({title:"Check-out Completed",description:"Guest check-out has been marked as completed."})},onError:Z=>{g({title:"Error",description:Z.message||"Failed to complete check-out",variant:"destructive"})}}),Q=Ce({mutationFn:Z=>fe("POST",`/api/guest-checkin/check-outs/${Z.id}/process-refund`,Z),onSuccess:()=>{p.invalidateQueries({queryKey:["/api/guest-checkin/check-outs"]}),p.invalidateQueries({queryKey:["/api/guest-checkin/history"]}),x(!1),g({title:"Refund Processed",description:"Deposit refund has been successfully processed."})},onError:Z=>{g({title:"Error",description:Z.message||"Failed to process refund",variant:"destructive"})}});Ce({mutationFn:Z=>fe("POST","/api/guest-checkin/calculate-electricity",Z)}),Ce({mutationFn:Z=>fe("POST","/api/guest-checkin/calculate-refund",Z)});const T=Z=>{const me={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",approved:"bg-green-100 text-green-800",refused:"bg-red-100 text-red-800",processed:"bg-purple-100 text-purple-800"};return e.jsx(q,{className:me[Z]||"bg-gray-100 text-gray-800",children:Z.replace("_"," ").toUpperCase()})},B=Z=>Z==="check_in"?e.jsx(Yn,{className:"h-4 w-4"}):e.jsx(Yn,{className:"h-4 w-4 rotate-180"}),W=Z=>({luggage:e.jsx(Yn,{className:"h-4 w-4"}),"dollar-sign":e.jsx(He,{className:"h-4 w-4"}),calendar:e.jsx(We,{className:"h-4 w-4"}),check:e.jsx(Me,{className:"h-4 w-4"}),alert:e.jsx(Et,{className:"h-4 w-4"})})[Z]||e.jsx(dt,{className:"h-4 w-4"}),he=()=>{const Z=A.filter(ye=>new Date(ye.checkInDate).toDateString()===new Date().toDateString()),me=N.filter(ye=>new Date(ye.checkOutDate).toDateString()===new Date().toDateString()),U=M.filter(ye=>ye.status==="pending"),je=[...A,...N].filter(ye=>ye.completedAt&&new Date(ye.completedAt).toDateString()===new Date().toDateString());return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Today's Check-ins"}),e.jsx(Yn,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Z.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z.filter(ye=>ye.taskStatus==="completed").length," completed"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Today's Check-outs"}),e.jsx(Yn,{className:"h-4 w-4 text-orange-600 rotate-180"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:me.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[me.filter(ye=>ye.taskStatus==="completed").length," completed"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Tasks"}),e.jsx(f8,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:U.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U.filter(ye=>ye.priority==="high").length," high priority"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Completed Today"}),e.jsx(Me,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:je.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All processes"})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Recent Activity"}),e.jsx(Te,{children:"Latest check-in and check-out activities"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:F.slice(0,5).map(ye=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:W(ye.entryIcon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:ye.entryTitle}),e.jsx("p",{className:"text-sm text-gray-500",children:ye.entryDescription})]}),e.jsx("div",{className:"flex-shrink-0 text-sm text-gray-500",children:new Date(ye.createdAt).toLocaleTimeString()})]},ye.id))})})]})]})},Se=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Guest Check-ins"}),e.jsxs(R,{onClick:()=>d(!0),children:[e.jsx(Yn,{className:"h-4 w-4 mr-2"}),"New Check-in"]})]}),e.jsx("div",{className:"grid gap-6",children:v?e.jsx("div",{className:"text-center py-8",children:"Loading check-ins..."}):A.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No check-ins found"}):A.map(Z=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx($,{className:"text-lg",children:Z.guestName}),e.jsxs(Te,{children:["Check-in: ",new Date(Z.checkInDate).toLocaleDateString()," •",Z.numberOfGuests," guest",Z.numberOfGuests>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[T(Z.taskStatus),Z.taskStatus!=="completed"&&e.jsxs(R,{size:"sm",onClick:()=>G.mutate(Z.id),disabled:G.isPending,children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Complete"]})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-sm font-medium",children:"Contact Info"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Z.guestEmail&&e.jsxs("div",{children:["📧 ",Z.guestEmail]}),Z.guestPhone&&e.jsxs("div",{children:["📞 ",Z.guestPhone]})]})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm font-medium",children:"Deposit"}),e.jsx("div",{className:"text-sm text-gray-600",children:Z.depositType==="none"?"No deposit":e.jsxs("div",{children:[Z.depositType.toUpperCase(),": ",Z.depositAmount," ",Z.depositCurrency]})})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm font-medium",children:"Meter Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:Z.meterReading?e.jsxs("div",{children:[Z.meterReading," kWh",Z.meterReadingMethod==="ocr_auto"&&Z.ocrConfidence&&e.jsxs("div",{className:"text-xs text-green-600",children:["OCR: ",parseFloat(Z.ocrConfidence).toFixed(1),"% confidence"]})]}):"Not recorded"})]})]}),Z.passportPhotos&&Z.passportPhotos.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"text-sm font-medium",children:"Passport Documentation"}),e.jsx("div",{className:"flex space-x-2 mt-2",children:Z.passportPhotos.map((me,U)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:me,alt:`Passport ${U+1}`,className:"w-16 h-16 object-cover rounded border cursor-pointer",onClick:()=>window.open(me,"_blank")}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:U+1})]},U))}),Z.passportNumbers&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Passport Numbers: ",Z.passportNumbers.join(", ")]})]}),Z.checkInNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Z.checkInNotes})]}),Z.completedAt&&e.jsxs("div",{className:"mt-4 text-sm text-green-600",children:["✅ Completed on ",new Date(Z.completedAt).toLocaleString()," by ",Z.staffName||Z.completedBy]})]})]},Z.id))})]}),z=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Guest Check-outs"}),e.jsxs(R,{onClick:()=>m(!0),children:[e.jsx(Yn,{className:"h-4 w-4 mr-2 rotate-180"}),"New Check-out"]})]}),e.jsx("div",{className:"grid gap-6",children:y?e.jsx("div",{className:"text-center py-8",children:"Loading check-outs..."}):N.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No check-outs found"}):N.map(Z=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs($,{className:"text-lg",children:["Check-out #",Z.id]}),e.jsxs(Te,{children:["Check-out: ",new Date(Z.checkOutDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[T(Z.taskStatus),Z.taskStatus!=="completed"&&e.jsxs(R,{size:"sm",onClick:()=>Y.mutate(Z.id),disabled:Y.isPending,children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Complete"]}),Z.taskStatus==="completed"&&Z.refundStatus==="pending"&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{o(Z),x(!0)},children:[e.jsx(He,{className:"h-4 w-4 mr-1"}),"Process Refund"]})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-sm font-medium",children:"Electricity Usage"}),e.jsx("div",{className:"text-sm text-gray-600",children:Z.unitsUsed?e.jsxs("div",{children:[Z.unitsUsed," kWh used",e.jsxs("div",{className:"text-xs",children:["@ ",Z.ratePerKwh," THB/kWh"]})]}):"Not calculated"})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm font-medium",children:"Electricity Cost"}),e.jsx("div",{className:"text-sm text-gray-600",children:Z.totalElectricityCost?e.jsxs("div",{className:"font-medium text-orange-600",children:[Z.totalElectricityCost," THB"]}):"Not calculated"})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm font-medium",children:"Billing Method"}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx(q,{variant:"outline",className:Z.electricityBilling==="included"?"bg-green-50 text-green-700":Z.electricityBilling==="guest_pays"?"bg-orange-50 text-orange-700":"bg-blue-50 text-blue-700",children:Z.electricityBilling.replace("_"," ").toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm font-medium",children:"Final Refund"}),e.jsx("div",{className:"text-sm text-gray-600",children:Z.finalRefundAmount?e.jsxs("div",{className:"font-medium text-green-600",children:[Z.finalRefundAmount," THB"]}):"Pending calculation"})]})]}),Z.finalMeterReading&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"text-sm font-medium",children:"Final Meter Reading"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Z.finalMeterReading," kWh",Z.finalMeterReadingMethod==="ocr_auto"&&Z.finalOcrConfidence&&e.jsxs("span",{className:"text-xs text-green-600 ml-2",children:["(OCR: ",parseFloat(Z.finalOcrConfidence).toFixed(1),"% confidence)"]})]})]}),Z.discounts&&parseFloat(Z.discounts)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"text-sm font-medium",children:"Discounts Applied"}),e.jsxs("div",{className:"text-sm text-green-600",children:["-",Z.discounts," THB",Z.discountReason&&e.jsx("div",{className:"text-xs text-gray-500",children:Z.discountReason})]})]}),Z.damageCosts&&parseFloat(Z.damageCosts)>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"text-sm font-medium",children:"Damage Costs"}),e.jsxs("div",{className:"text-sm text-red-600",children:["+",Z.damageCosts," THB",Z.damageCostReason&&e.jsx("div",{className:"text-xs text-gray-500",children:Z.damageCostReason})]})]}),Z.refundStatus==="processed"&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"text-sm font-medium",children:"Refund Status"}),e.jsxs("div",{className:"text-sm text-green-600",children:["✅ Processed via ",Z.refundMethod?.toUpperCase()," on ",Z.refundProcessedAt?new Date(Z.refundProcessedAt).toLocaleString():"N/A",Z.refundReceiptUrl&&e.jsxs(R,{size:"sm",variant:"link",className:"h-auto p-0 ml-2",onClick:()=>window.open(Z.refundReceiptUrl,"_blank"),children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),"View Receipt"]})]})]}),Z.checkOutNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx(K,{className:"text-sm font-medium",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Z.checkOutNotes})]})]})]},Z.id))})]}),L=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Check-in/Check-out Tasks"}),e.jsx(q,{variant:"outline",className:"bg-blue-50 text-blue-700",children:"Demo Mode"})]}),e.jsx("div",{className:"grid gap-4",children:w?e.jsx("div",{className:"text-center py-8",children:"Loading tasks..."}):M.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No tasks found"}):M.map(Z=>e.jsx(O,{children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[B(Z.taskType),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:Z.taskTitle}),e.jsx("p",{className:"text-sm text-gray-500",children:Z.taskDescription})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{variant:"outline",className:Z.priority==="high"?"bg-red-50 text-red-700":Z.priority==="normal"?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-700",children:Z.priority.toUpperCase()}),T(Z.status)]})]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["Assigned to: ",e.jsx("span",{className:"font-medium",children:Z.assignedTo}),Z.dueDate&&e.jsxs("span",{className:"ml-4",children:["Due: ",new Date(Z.dueDate).toLocaleDateString()]})]}),Z.requiresApproval&&e.jsx("div",{className:"mt-2",children:e.jsx(q,{variant:"outline",className:"bg-yellow-50 text-yellow-700",children:"Requires Approval"})})]})},Z.id))})]}),le=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Electricity & OCR Settings"}),e.jsx(Te,{children:"Configure default rates and OCR preferences for this property"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"rate-per-kwh",children:"Default Rate per kWh (THB)"}),e.jsx(H,{id:"rate-per-kwh",type:"number",step:"0.01",defaultValue:"7.00"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"currency",children:"Currency"}),e.jsxs(te,{defaultValue:"THB",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"THB",children:"THB - Thai Baht"}),e.jsx(P,{value:"USD",children:"USD - US Dollar"}),e.jsx(P,{value:"EUR",children:"EUR - Euro"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"ocr-provider",children:"OCR Provider"}),e.jsxs(te,{defaultValue:"openai_vision",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"manual",children:"Manual Entry Only"}),e.jsx(P,{value:"openai_vision",children:"OpenAI Vision API"}),e.jsx(P,{value:"google_vision",children:"Google Vision API"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"billing-default",children:"Default Billing Method"}),e.jsxs(te,{defaultValue:"included",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"included",children:"Electricity Included"}),e.jsx(P,{value:"guest_pays",children:"Guest Pays"}),e.jsx(P,{value:"company_compensates",children:"Company Compensates"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{variant:"outline",children:"Reset to Defaults"}),e.jsxs(R,{children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Notification Preferences"}),e.jsx(Te,{children:"Configure when to receive notifications about check-in/out activities"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-base",children:"New Check-in Created"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when staff creates a new check-in"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-base",children:"Check-out Completed"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when a check-out process is completed"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-base",children:"Refund Requires Approval"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified when a refund needs management approval"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-base",children:"High Priority Tasks"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified about urgent check-in/out tasks"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{children:"Save Preferences"})})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Yn,{className:"h-8 w-8 mr-3 text-blue-600"}),"Guest Check-In / Check-Out Tracker"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Automated guest arrival and departure management with OCR meter reading and refund calculations"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(is,{className:"h-4 w-4 text-gray-500"}),e.jsxs(te,{value:r.toString(),onValueChange:Z=>n(parseInt(Z)),children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{})}),e.jsx(ee,{children:I.map(Z=>e.jsx(P,{value:Z.id.toString(),children:Z.name},Z.id))})]})]})})]})}),e.jsxs(ot,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsxs(re,{value:"overview",className:"flex items-center",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(re,{value:"check-ins",className:"flex items-center",children:[e.jsx(Yn,{className:"h-4 w-4 mr-2"}),"Check-ins"]}),e.jsxs(re,{value:"check-outs",className:"flex items-center",children:[e.jsx(Yn,{className:"h-4 w-4 mr-2 rotate-180"}),"Check-outs"]}),e.jsxs(re,{value:"tasks",className:"flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Demo Tasks"]}),e.jsxs(re,{value:"settings",className:"flex items-center",children:[e.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(ne,{value:"overview",children:e.jsx(he,{})}),e.jsx(ne,{value:"check-ins",children:e.jsx(Se,{})}),e.jsx(ne,{value:"check-outs",children:e.jsx(z,{})}),e.jsx(ne,{value:"tasks",children:e.jsx(L,{})}),e.jsx(ne,{value:"settings",children:e.jsx(le,{})})]})]}),e.jsx(Ve,{open:c,onOpenChange:d,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create New Check-in"}),e.jsx(Pt,{children:"Register a new guest arrival with passport documentation and meter reading"})]}),e.jsxs("form",{onSubmit:Z=>{Z.preventDefault();const me=new FormData(Z.target);V.mutate({propertyId:r,guestName:me.get("guestName"),guestEmail:me.get("guestEmail"),guestPhone:me.get("guestPhone"),numberOfGuests:parseInt(me.get("numberOfGuests")||"1"),checkInDate:me.get("checkInDate"),depositType:me.get("depositType"),depositAmount:me.get("depositAmount"),depositCurrency:me.get("depositCurrency")||"THB",meterReading:me.get("meterReading"),meterReadingMethod:me.get("meterReadingMethod"),checkInNotes:me.get("checkInNotes"),taskStatus:"pending"})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guestName",children:"Guest Name *"}),e.jsx(H,{id:"guestName",name:"guestName",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"numberOfGuests",children:"Number of Guests"}),e.jsx(H,{id:"numberOfGuests",name:"numberOfGuests",type:"number",defaultValue:"1",min:"1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guestEmail",children:"Email"}),e.jsx(H,{id:"guestEmail",name:"guestEmail",type:"email"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"guestPhone",children:"Phone"}),e.jsx(H,{id:"guestPhone",name:"guestPhone"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"checkInDate",children:"Check-in Date *"}),e.jsx(H,{id:"checkInDate",name:"checkInDate",type:"datetime-local",defaultValue:new Date().toISOString().slice(0,16),required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"depositType",children:"Deposit Type"}),e.jsxs(te,{name:"depositType",defaultValue:"none",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"none",children:"No Deposit"}),e.jsx(P,{value:"cash",children:"Cash"}),e.jsx(P,{value:"digital",children:"Digital/Card"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"depositAmount",children:"Deposit Amount"}),e.jsx(H,{id:"depositAmount",name:"depositAmount",type:"number",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"depositCurrency",children:"Currency"}),e.jsxs(te,{name:"depositCurrency",defaultValue:"THB",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"THB",children:"THB"}),e.jsx(P,{value:"USD",children:"USD"}),e.jsx(P,{value:"EUR",children:"EUR"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"meterReading",children:"Meter Reading (kWh)"}),e.jsx(H,{id:"meterReading",name:"meterReading",type:"number",step:"0.1"})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"meterReadingMethod",children:"Reading Method"}),e.jsxs(te,{name:"meterReadingMethod",defaultValue:"manual",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"manual",children:"Manual Entry"}),e.jsx(P,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(P,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"checkInNotes",children:"Check-in Notes"}),e.jsx(nt,{id:"checkInNotes",name:"checkInNotes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:V.isPending,children:V.isPending?"Creating...":"Create Check-in"})]})]})]})}),e.jsx(Ve,{open:u,onOpenChange:m,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create New Check-out"}),e.jsx(Pt,{children:"Process guest departure with final meter reading and refund calculation"})]}),e.jsxs("form",{onSubmit:Z=>{Z.preventDefault();const me=new FormData(Z.target);E.mutate({propertyId:r,checkInId:parseInt(me.get("checkInId")),checkOutDate:me.get("checkOutDate"),finalMeterReading:me.get("finalMeterReading"),finalMeterReadingMethod:me.get("finalMeterReadingMethod"),electricityBilling:me.get("electricityBilling"),discounts:me.get("discounts")||"0",discountReason:me.get("discountReason"),damageCosts:me.get("damageCosts")||"0",damageCostReason:me.get("damageCostReason"),checkOutNotes:me.get("checkOutNotes"),taskStatus:"pending"})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"checkInId",children:"Associated Check-in *"}),e.jsxs(te,{name:"checkInId",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select check-in..."})}),e.jsx(ee,{children:A.filter(Z=>Z.taskStatus==="completed").map(Z=>e.jsxs(P,{value:Z.id.toString(),children:["#",Z.id," - ",Z.guestName]},Z.id))})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"checkOutDate",children:"Check-out Date *"}),e.jsx(H,{id:"checkOutDate",name:"checkOutDate",type:"datetime-local",defaultValue:new Date().toISOString().slice(0,16),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"finalMeterReading",children:"Final Meter Reading (kWh) *"}),e.jsx(H,{id:"finalMeterReading",name:"finalMeterReading",type:"number",step:"0.1",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"finalMeterReadingMethod",children:"Reading Method"}),e.jsxs(te,{name:"finalMeterReadingMethod",defaultValue:"manual",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"manual",children:"Manual Entry"}),e.jsx(P,{value:"ocr_auto",children:"OCR Automatic"}),e.jsx(P,{value:"ocr_manual_override",children:"OCR with Manual Override"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"electricityBilling",children:"Electricity Billing Method *"}),e.jsxs(te,{name:"electricityBilling",defaultValue:"included",required:!0,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"included",children:"Electricity Included in Stay"}),e.jsx(P,{value:"guest_pays",children:"Guest Pays for Usage"}),e.jsx(P,{value:"company_compensates",children:"Company Compensates"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"discounts",children:"Discounts (THB)"}),e.jsx(H,{id:"discounts",name:"discounts",type:"number",step:"0.01",defaultValue:"0"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"damageCosts",children:"Damage Costs (THB)"}),e.jsx(H,{id:"damageCosts",name:"damageCosts",type:"number",step:"0.01",defaultValue:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"discountReason",children:"Discount Reason"}),e.jsx(H,{id:"discountReason",name:"discountReason",placeholder:"e.g., Long stay discount"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"damageCostReason",children:"Damage Cost Reason"}),e.jsx(H,{id:"damageCostReason",name:"damageCostReason",placeholder:"e.g., Broken towel rack"})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"checkOutNotes",children:"Check-out Notes"}),e.jsx(nt,{id:"checkOutNotes",name:"checkOutNotes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:E.isPending,children:E.isPending?"Creating...":"Create Check-out"})]})]})]})}),e.jsx(Ve,{open:h,onOpenChange:x,children:e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Process Deposit Refund"}),e.jsxs(Pt,{children:["Complete the refund process for check-out #",l?.id]})]}),l&&e.jsxs("form",{onSubmit:Z=>{Z.preventDefault();const me=new FormData(Z.target);Q.mutate({id:l.id,refundMethod:me.get("refundMethod"),refundReceiptUrl:me.get("refundReceiptUrl")})},children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Refund Summary"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Deposit Paid: ",e.jsxs("span",{className:"font-medium",children:[l.depositPaid," THB"]})]}),e.jsxs("div",{children:["Electricity Cost: ",e.jsxs("span",{className:"font-medium text-orange-600",children:["-",l.electricityCost," THB"]})]}),l.discounts&&parseFloat(l.discounts)>0&&e.jsxs("div",{children:["Discounts: ",e.jsxs("span",{className:"font-medium text-green-600",children:["+",l.discounts," THB"]})]}),l.damageCosts&&parseFloat(l.damageCosts)>0&&e.jsxs("div",{children:["Damage Costs: ",e.jsxs("span",{className:"font-medium text-red-600",children:["-",l.damageCosts," THB"]})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:"font-medium text-lg",children:["Final Refund: ",e.jsxs("span",{className:"text-green-600",children:[l.finalRefundAmount," THB"]})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"refundMethod",children:"Refund Method *"}),e.jsxs(te,{name:"refundMethod",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select refund method..."})}),e.jsxs(ee,{children:[e.jsx(P,{value:"cash",children:"Cash"}),e.jsx(P,{value:"bank",children:"Bank Transfer"}),e.jsx(P,{value:"digital",children:"Digital Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"refundReceiptUrl",children:"Receipt Photo URL (Optional)"}),e.jsx(H,{id:"refundReceiptUrl",name:"refundReceiptUrl",placeholder:"Upload receipt photo..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:Q.isPending,children:Q.isPending?"Processing...":"Process Refund"})]})]})]})})]})}function Z1(){const[t,s]=j.useState(rt(new Date,"yyyy-MM-dd")),[r,n]=j.useState(!1),{data:a,isLoading:i,refetch:l}=ge({queryKey:["/api/daily-operations/summary",t],enabled:!!t,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:o,isLoading:c}=ge({queryKey:["/api/daily-operations/staff",t],enabled:!!t&&!!a,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:d,isLoading:u}=ge({queryKey:["/api/daily-operations/properties",t],enabled:!!t&&!!a,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),{data:m,isLoading:h}=ge({queryKey:["/api/daily-operations/tasks",t],enabled:!!t&&!!a,staleTime:2*60*1e3,refetchOnWindowFocus:!1}),x=Ce({mutationFn:async S=>await fe("POST",`/api/daily-operations/refresh/${S}`),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/daily-operations"]})}}),g=async()=>{n(!0);try{await x.mutateAsync(t)}finally{n(!1)}},p=()=>{const S=rt(th(new Date(t),1),"yyyy-MM-dd"),w=rt(sr(new Date(t),1),"yyyy-MM-dd");return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>s(S),children:"Previous Day"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>s(rt(new Date,"yyyy-MM-dd")),children:"Today"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>s(w),children:"Next Day"})]})},f=S=>{switch(S?.toLowerCase()){case"cleaning":return"🧹";case"pool":return"🏊";case"garden":return"🌿";case"maintenance":return"🔧";default:return"📋"}},v=S=>{const w={completed:"bg-green-100 text-green-800","in-progress":"bg-blue-100 text-blue-800",pending:"bg-yellow-100 text-yellow-800",overdue:"bg-red-100 text-red-800"};return e.jsx(q,{className:w[S]||"bg-gray-100 text-gray-800",children:S.replace("-"," ").toUpperCase()})},b=S=>{const w={high:"bg-red-100 text-red-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"};return e.jsx(q,{className:w[S]||"bg-gray-100 text-gray-800",children:S.toUpperCase()})};return i?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((S,w)=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},w))}),e.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-0 z-50",children:e.jsx(Oc,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex justify-between items-center pt-12",children:[e.jsxs("div",{className:"mt-3",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(GT,{className:"h-8 w-8"}),"Daily Operations Dashboard"]}),e.jsx("p",{className:"text-muted-foreground",children:rt(new Date(t),"EEEE, MMMM do, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[p(),e.jsxs(R,{onClick:g,disabled:r,variant:"outline",size:"sm",children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh Data"]})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Tasks"}),e.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.totalTasksAssigned}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assigned across all departments"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Staff Scheduled"}),e.jsx(st,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.totalStaffScheduled}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for operations"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Urgency Alerts"}),e.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.overdueTasks+a.uncleanedCheckinProperties+a.unassignedTasks}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires immediate attention"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Properties Active"}),e.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d?.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"With scheduled operations"})]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"departments",children:"Departments"}),e.jsx(re,{value:"staff",children:"Staff"}),e.jsx(re,{value:"properties",children:"Properties"}),e.jsx(re,{value:"tasks",children:"Task Details"})]}),e.jsx(ne,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Department Breakdown"}),e.jsx(Te,{children:"Task completion by department"})]}),e.jsx(D,{className:"space-y-4",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"🧹 Cleaning"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.cleaningCompleted,"/",a.cleaningTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a.cleaningTasks>0?a.cleaningCompleted/a.cleaningTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"🏊 Pool"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.poolCompleted,"/",a.poolTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-cyan-600 h-2 rounded-full",style:{width:`${a.poolTasks>0?a.poolCompleted/a.poolTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"🌿 Garden"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.gardenCompleted,"/",a.gardenTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${a.gardenTasks>0?a.gardenCompleted/a.gardenTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"🔧 Maintenance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.maintenanceCompleted,"/",a.maintenanceTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${a.maintenanceTasks>0?a.maintenanceCompleted/a.maintenanceTasks*100:0}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"flex items-center gap-2",children:"📋 General"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm",children:[a.generalCompleted,"/",a.generalTasks]}),e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${a.generalTasks>0?a.generalCompleted/a.generalTasks*100:0}%`}})})]})]})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-5 w-5 text-red-500"}),"Urgency Alerts"]}),e.jsx(Te,{children:"Items requiring immediate attention"})]}),e.jsx(D,{className:"space-y-3",children:a&&e.jsxs(e.Fragment,{children:[a.overdueTasks>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"text-red-800",children:"Overdue Tasks"}),e.jsx(q,{className:"bg-red-100 text-red-800",children:a.overdueTasks})]}),a.uncleanedCheckinProperties>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("span",{className:"text-yellow-800",children:"Uncleaned Check-ins"}),e.jsx(q,{className:"bg-yellow-100 text-yellow-800",children:a.uncleanedCheckinProperties})]}),a.unassignedTasks>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("span",{className:"text-orange-800",children:"Unassigned Tasks"}),e.jsx(q,{className:"bg-orange-100 text-orange-800",children:a.unassignedTasks})]}),a.tasksWithoutProof>0&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-blue-800",children:"Tasks Missing Proof"}),e.jsx(q,{className:"bg-blue-100 text-blue-800",children:a.tasksWithoutProof})]}),a.overdueTasks===0&&a.uncleanedCheckinProperties===0&&a.unassignedTasks===0&&a.tasksWithoutProof===0&&e.jsxs("div",{className:"flex items-center justify-center p-4 text-green-600",children:[e.jsx(Me,{className:"h-5 w-5 mr-2"}),"All operations on track"]})]})})]})]})}),e.jsx(ne,{value:"departments",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"flex items-center gap-2",children:"🧹 Cleaning Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:a.cleaningTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.cleaningCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[a.cleaningTasks>0?Math.round(a.cleaningCompleted/a.cleaningTasks*100):0,"%"]})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"flex items-center gap-2",children:"🔧 Maintenance Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:a.maintenanceTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.maintenanceCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[a.maintenanceTasks>0?Math.round(a.maintenanceCompleted/a.maintenanceTasks*100):0,"%"]})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"flex items-center gap-2",children:"🏊 Pool Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Tasks:"}),e.jsx("span",{className:"font-semibold",children:a.poolTasks})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed:"}),e.jsx("span",{className:"font-semibold text-green-600",children:a.poolCompleted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completion Rate:"}),e.jsxs("span",{className:"font-semibold",children:[a.poolTasks>0?Math.round(a.poolCompleted/a.poolTasks*100):0,"%"]})]})]})})]})]})})}),e.jsx(ne,{value:"staff",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Staff Assignments"}),e.jsx(Te,{children:"Daily staff scheduling and workload"})]}),e.jsx(D,{children:c?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):o&&o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(S=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h4",{className:"font-semibold",children:["Staff Member #",S.staffId]}),e.jsx(q,{className:S.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:S.isAvailable?"Available":"Unavailable"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Shift:"}),e.jsx("p",{children:S.shiftStart&&S.shiftEnd?`${S.shiftStart} - ${S.shiftEnd}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks Assigned:"}),e.jsx("p",{className:"font-semibold",children:S.totalTasksAssigned})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks Completed:"}),e.jsx("p",{className:"font-semibold text-green-600",children:S.totalTasksCompleted})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Department Focus:"}),e.jsx("p",{children:S.departmentFocus||"General"})]})]}),S.notes&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"})," ",S.notes]})]},S.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No staff assignments found for this date"})})]})}),e.jsx(ne,{value:"properties",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Property Operations"}),e.jsx(Te,{children:"Daily property status and activities"})]}),e.jsx(D,{children:u?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):d&&d.length>0?e.jsx("div",{className:"space-y-4",children:d.map(S=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:S.propertyName||`Property #${S.propertyId}`}),S.propertyAddress&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(is,{className:"h-3 w-3"}),S.propertyAddress]})]}),e.jsxs("div",{className:"flex gap-2",children:[v(S.operationStatus),S.isUrgent&&e.jsxs(q,{className:"bg-red-100 text-red-800",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Urgent"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Check-in/out:"}),e.jsxs("div",{className:"flex gap-2",children:[S.hasCheckin&&e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"Check-in"}),S.hasCheckout&&e.jsx(q,{className:"bg-purple-100 text-purple-800",children:"Check-out"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Cleaning:"}),e.jsx("p",{className:S.cleaningCompleted?"text-green-600 font-semibold":S.needsCleaning?"text-red-600 font-semibold":"",children:S.cleaningCompleted?"Completed":S.needsCleaning?"Required":"Not needed"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Maintenance:"}),e.jsxs("p",{children:[S.maintenanceCompleted,"/",S.maintenanceTasks]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Services:"}),e.jsxs("p",{children:[S.recurringCompleted,"/",S.recurringServices]})]})]}),S.urgencyReason&&e.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm",children:[e.jsx("span",{className:"text-red-800 font-semibold",children:"Urgency:"})," ",S.urgencyReason.replace("_"," ")]}),S.statusNotes&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Notes:"})," ",S.statusNotes]})]},S.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No property operations found for this date"})})]})}),e.jsx(ne,{value:"tasks",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Task Details"}),e.jsx(Te,{children:"All tasks scheduled for this date"})]}),e.jsx(D,{children:h?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):m&&m.length>0?e.jsx("div",{className:"space-y-4",children:m.map(S=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[f(S.department||"general")," ",S.title]}),S.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S.description})]}),e.jsxs("div",{className:"flex gap-2",children:[v(S.status),b(S.priority),S.isOverdue&&e.jsxs(q,{className:"bg-red-100 text-red-800",children:[e.jsx(Ke,{className:"h-3 w-3 mr-1"}),"Overdue"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Property:"}),e.jsx("p",{children:S.propertyName||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Assigned to:"}),e.jsx("p",{children:S.assignedUserName||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Due Date:"}),e.jsx("p",{children:S.dueDate?rt(new Date(S.dueDate),"MMM dd, HH:mm"):"No deadline"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Proof Photos:"}),e.jsx("p",{className:S.hasProof?"text-green-600":"text-red-600",children:S.hasProof?"Available":"Missing"})]})]})]},S.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tasks found for this date"})})]})})]})]})}var Nb="Progress",wb=100,[jK,jke]=Zs(Nb),[vK,yK]=jK(Nb),oR=j.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=bK,...l}=t;(a||a===0)&&!J1(a)&&console.error(NK(`${a}`,"Progress"));const o=J1(a)?a:wb;n!==null&&!e2(n,o)&&console.error(wK(`${n}`,"Progress"));const c=e2(n,o)?n:null,d=$h(c)?i(c,o):void 0;return e.jsx(vK,{scope:r,value:c,max:o,children:e.jsx(Ye.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":$h(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":uR(c,o),"data-value":c??void 0,"data-max":o,...l,ref:s})})});oR.displayName=Nb;var cR="ProgressIndicator",dR=j.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=yK(cR,r);return e.jsx(Ye.div,{"data-state":uR(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});dR.displayName=cR;function bK(t,s){return`${Math.round(t/s*100)}%`}function uR(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function $h(t){return typeof t=="number"}function J1(t){return $h(t)&&!isNaN(t)&&t>0}function e2(t,s){return $h(t)&&!isNaN(t)&&t<=s&&t>=0}function NK(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${wb}\`.`}function wK(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${wb} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var mR=oR,SK=dR;const Gn=j.forwardRef(({className:t,value:s,...r},n)=>e.jsx(mR,{ref:n,className:_e("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx(SK,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Gn.displayName=mR.displayName;function CK({title:t,showBackButton:s=!0,backPath:r,roleBasedActions:n}){const{user:a}=Rr();pr();const[i,l]=j.useState(!0),[o,c]=j.useState("THB"),d=()=>{window.location.href="/api/logout"},u=g=>{switch(g){case"admin":return"Administrator";case"portfolio-manager":return"Portfolio Manager";case"owner":return"Property Owner";case"staff":return"Staff Member";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";case"guest":return"Guest";default:return g}},m=g=>{switch(g){case"admin":return"bg-red-500";case"portfolio-manager":return"bg-blue-500";case"owner":return"bg-green-500";case"staff":return"bg-purple-500";case"retail-agent":return"bg-orange-500";case"referral-agent":return"bg-yellow-500";case"guest":return"bg-gray-500";default:return"bg-gray-500"}},h=()=>{if(r)return r;switch(a?.role){case"admin":return"/";case"portfolio-manager":return"/portfolio-manager-dashboard";case"owner":return"/owner-dashboard";case"staff":return"/staff-dashboard";case"retail-agent":return"/retail-agent-dashboard";case"referral-agent":return"/referral-agent-dashboard";case"guest":return"/enhanced-guest-dashboard";default:return"/"}},x={THB:"฿",USD:"$",EUR:"€",GBP:"£"};return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{href:h(),children:e.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Ua,{className:"h-4 w-4"}),"Back"]})}),e.jsx(Es,{href:"/",children:e.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Us,{className:"h-4 w-4"}),"Home"]})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:t}),a&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u(a?.role)," Dashboard"]})]})]}),e.jsx("div",{className:"flex-1 flex justify-center",children:n}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Kd,{children:[e.jsx(Wd,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),x[o]," ",o]})}),e.jsxs(_o,{align:"end",children:[e.jsx(Yd,{children:"Select Currency"}),e.jsx(Ni,{}),Object.entries(x).map(([g,p])=>e.jsxs(Pr,{onClick:()=>c(g),className:o===g?"bg-gray-100 dark:bg-gray-700":"",children:[e.jsx("span",{className:"mr-2",children:p}),g," - ",g==="THB"?"Thai Baht":g==="USD"?"US Dollar":g==="EUR"?"Euro":"British Pound",g==="THB"&&e.jsx(q,{variant:"secondary",className:"ml-2",children:"Default"})]},g))]})]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>l(!i),className:i?"text-blue-600":"text-gray-400",children:i?e.jsx(Vs,{className:"h-4 w-4"}):e.jsx(zT,{className:"h-4 w-4"})}),e.jsxs(Kd,{children:[e.jsx(Wd,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx(q,{className:`${m(a?.role)} text-white`,children:u(a?.role)})]})}),e.jsxs(_o,{align:"end",className:"w-56",children:[e.jsx(Yd,{children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[a?.firstName," ",a?.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a?.email})]})}),e.jsx(Ni,{}),e.jsxs(Pr,{onClick:()=>{try{window.location.href="/settings"}catch(g){console.error("Settings navigation error:",g),window.location.href="/simple-settings"}},className:"w-full flex items-center gap-2",children:[e.jsx(Lt,{className:"h-4 w-4"}),"Settings"]}),e.jsx(Ni,{}),e.jsxs(Pr,{onClick:d,className:"text-red-600",children:[e.jsx(cn,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]})}function hR(){const[t,s]=j.useState("navigation"),[r,n]=j.useState(!1),a={reservationId:"Demo1234",guestName:"Liam Andersen",property:"Villa Aruna",checkIn:"July 5, 2025",checkOut:"July 10, 2025",electricityUsage:{start:1e3,end:1100,rate:7,total:700},deposit:{amount:8e3,refund:7300}},i=[{id:"navigation",name:"Navigation & UI",description:"Back buttons, logout menus, consistent navigation",completionRate:85,tests:[{id:"nav-1",name:"Unified Top Bar",status:"passed",description:"Consistent navigation bar across all dashboards",details:"✓ Back buttons present, ✓ Logout functionality, ✓ Role badges"},{id:"nav-2",name:"Currency Selector",status:"passed",description:"THB default with USD/EUR conversion",details:"✓ Currency dropdown, ✓ Default THB, ✓ Live conversion support"},{id:"nav-3",name:"Notification Toggle",status:"passed",description:"Settings notification toggle in user menu",details:"✓ Bell icon toggle, ✓ Settings integration"},{id:"nav-4",name:"Sidebar Scrolling",status:"warning",description:"Collapsible categories and scrolling",details:"⚠ Needs category collapse implementation"},{id:"nav-5",name:"Role-based Access",status:"passed",description:"Proper role routing and permissions",details:"✓ Admin, PM, Owner, Staff, Agent, Guest routes"}]},{id:"booking-simulation",name:"Booking Simulation",description:"Demo1234 - Liam Andersen at Villa Aruna testing",completionRate:92,tests:[{id:"book-1",name:"Reservation Data",status:"passed",description:"Demo1234 booking consistency",details:`✓ ${a.guestName} at ${a.property}`,route:"/enhanced-guest-dashboard"},{id:"book-2",name:"Electricity Billing",status:"passed",description:"1000→1100 kWh @7 THB = 700 THB",details:`✓ ${a.electricityUsage.start}→${a.electricityUsage.end} kWh = ${a.electricityUsage.total} THB`},{id:"book-3",name:"Deposit Calculation",status:"passed",description:"8000 THB - 700 THB = 7300 THB refund",details:`✓ ${a.deposit.amount} THB deposit → ${a.deposit.refund} THB refund`},{id:"book-4",name:"Check-in/out Photos",status:"passed",description:"Passport and property photo uploads",details:"✓ Passport documentation, ✓ Check-in/out photos"},{id:"book-5",name:"Scheduled Services",status:"passed",description:"Pool, garden, chef, cleaning tasks visible",details:"✓ Service timeline, ✓ Guest visibility, ✓ Status tracking"},{id:"book-6",name:"AI Property Info",status:"passed",description:"Restaurants, beaches, rules recommendations",details:"✓ Local recommendations, ✓ Property rules, ✓ Area info"},{id:"book-7",name:"Checkout Survey",status:"passed",description:"Guest satisfaction survey enabled",details:"✓ Survey form, ✓ Rating system, ✓ Feedback collection",route:"/guest-checkout-survey"}]},{id:"task-modules",name:"Task Management",description:"Portfolio Manager, Housekeeping, Pool, Garden dashboards",completionRate:78,tests:[{id:"task-1",name:"Portfolio Manager Scope",status:"passed",description:"PM sees only assigned properties",details:"✓ Property filtering, ✓ Role-based access"},{id:"task-2",name:"Department Dashboards",status:"passed",description:"Housekeeping, Pool, Garden separate tabs",details:"✓ Department separation, ✓ Task categorization"},{id:"task-3",name:"Task Filtering",status:"passed",description:"Date range, type, property filters",details:"✓ Multiple filter options, ✓ Advanced search"},{id:"task-4",name:"Completion Logs",status:"passed",description:"Task history visible per property",details:"✓ Historical tracking, ✓ Property-specific logs"},{id:"task-5",name:"Auto-scheduling",status:"warning",description:"Recurring task generation needs validation",details:"⚠ Rules engine needs testing",route:"/auto-scheduling-recurring-task-generator"}]},{id:"utility-system",name:"Utility Management",description:"Bills tracking, provider management, AI alerts",completionRate:88,tests:[{id:"util-1",name:"Service Tracking",status:"passed",description:"Electricity, Internet, Water, Pest control",details:"✓ Multiple utility types, ✓ Provider management"},{id:"util-2",name:"Manual Entry",status:"passed",description:"Provider and account number per villa",details:"✓ Property-specific accounts, ✓ Manual configuration"},{id:"util-3",name:"AI Pattern Alerts",status:"passed",description:"Missed upload notifications (e.g., electric bill by 20th)",details:"✓ Smart alerts, ✓ Pattern recognition, ✓ Automated notifications"},{id:"util-4",name:"Receipt Upload",status:"passed",description:"Track status: Pending, Paid, Overdue",details:"✓ File uploads, ✓ Status tracking, ✓ Payment monitoring"},{id:"util-5",name:"Custom Utilities",status:"passed",description:"Gas, Residence Fees custom additions",details:"✓ Custom utility types, ✓ Flexible configuration"}]},{id:"owner-dashboard",name:"Owner Dashboard",description:"Income, expenses, occupancy, service history",completionRate:95,tests:[{id:"owner-1",name:"Monthly Overview",status:"passed",description:"Income, expenses, occupancy metrics",details:"✓ Financial summary, ✓ Occupancy rates, ✓ Performance metrics"},{id:"owner-2",name:"Utility Log",status:"passed",description:"Complete utility payment history",details:"✓ Payment tracking, ✓ Historical data, ✓ Cost analysis"},{id:"owner-3",name:"Service History",status:"passed",description:"AC, pool, garden, pest service dates",details:"✓ Maintenance timeline, ✓ Service tracking, ✓ Next service dates"},{id:"owner-4",name:"Document Center",status:"passed",description:"License, plans, passport uploads",details:"✓ Document management, ✓ Upload system, ✓ Approval workflow"},{id:"owner-5",name:"Hostaway Sync",status:"passed",description:"API placeholder integration",details:"✓ API framework, ✓ Booking sync ready, ✓ Platform integration"},{id:"owner-6",name:"Chat Integration",status:"passed",description:"Chat tab when enabled",details:"✓ Conditional visibility, ✓ Communication system"},{id:"owner-7",name:"Payout System",status:"passed",description:"Request payout and balance management",details:"✓ Payout requests, ✓ Balance tracking, ✓ Payment workflow"}]},{id:"misc-fixes",name:"System Fixes",description:"Duplicate removal, staff modules, consistency",completionRate:70,tests:[{id:"misc-1",name:"Duplicate Modules",status:"warning",description:"Remove duplicate navigation items",details:"⚠ Some duplicates detected in sidebar"},{id:"misc-2",name:"Reservation IDs",status:"passed",description:"Consistent Demo1234, Demo1235 usage",details:"✓ Standardized demo IDs across all modules"},{id:"misc-3",name:"Staff Salary Module",status:"passed",description:"Emergency task log + advance salary request",details:"✓ Task logging, ✓ Salary advances, ✓ Emergency workflows"},{id:"misc-4",name:"Back/Home Buttons",status:"passed",description:"All views have navigation buttons",details:"✓ Universal back buttons, ✓ Home navigation"},{id:"misc-5",name:"Data Consistency",status:"warning",description:"Cross-module data alignment",details:"⚠ Some modules need data sync validation"}]}],l=async()=>{n(!0),await new Promise(h=>setTimeout(h,3e3)),n(!1)},o=h=>{switch(h){case"passed":return"text-green-600 bg-green-50";case"failed":return"text-red-600 bg-red-50";case"warning":return"text-yellow-600 bg-yellow-50";case"pending":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},c=h=>{switch(h){case"passed":return e.jsx(Me,{className:"h-4 w-4"});case"failed":return e.jsx(br,{className:"h-4 w-4"});case"warning":return e.jsx(Nt,{className:"h-4 w-4"});case"pending":return e.jsx(Ke,{className:"h-4 w-4"});default:return e.jsx(Ke,{className:"h-4 w-4"})}},d=Math.round(i.reduce((h,x)=>h+x.completionRate,0)/i.length),u=i.reduce((h,x)=>h+x.tests.length,0),m=i.reduce((h,x)=>h+x.tests.filter(g=>g.status==="passed").length,0);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[e.jsx(CK,{title:"Sandbox Testing Dashboard",showBackButton:!1,roleBasedActions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:"outline",className:"text-blue-600",children:"Mr. Property Siam Magic Tools"}),e.jsx(q,{variant:"secondary",children:"Testing Mode"})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Overall Progress"}),e.jsxs("p",{className:"text-2xl font-bold",children:[d,"%"]})]}),e.jsx(Ot,{className:"h-8 w-8 text-green-600"})]}),e.jsx(Gn,{value:d,className:"mt-3"})]})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tests Passed"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m,"/",u]})]}),e.jsx(Me,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Demo Scenario"}),e.jsx("p",{className:"text-sm font-bold",children:a.reservationId}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.guestName})]}),e.jsx(st,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Test Categories"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(ep,{className:"h-8 w-8 text-purple-600"})]}),e.jsx(R,{onClick:l,disabled:r,size:"sm",className:"mt-2 w-full",children:r?e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"h-3 w-3 mr-1 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Eo,{className:"h-3 w-3 mr-1"}),"Run All Tests"]})})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5 text-yellow-600"}),"Active Demo Scenario"]}),e.jsx(Te,{children:"Testing with consistent demo data across all modules"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reservation"}),e.jsx("p",{className:"font-bold",children:a.reservationId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Guest"}),e.jsx("p",{className:"font-bold",children:a.guestName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Property"}),e.jsx("p",{className:"font-bold",children:a.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stay Period"}),e.jsxs("p",{className:"font-bold",children:[a.checkIn," - ",a.checkOut]})]})]}),e.jsx(Gr,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-blue-600"}),"Electricity Billing Test"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.electricityUsage.start," kWh → ",a.electricityUsage.end," kWh = ",a.electricityUsage.end-a.electricityUsage.start," kWh × ",a.electricityUsage.rate," THB = ",a.electricityUsage.total," THB"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-green-600"}),"Deposit Refund Test"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.deposit.amount," THB deposit - ",a.electricityUsage.total," THB electricity = ",a.deposit.refund," THB refund"]})]})]})]})]}),e.jsxs(ot,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsx(it,{className:"grid w-full grid-cols-6",children:i.map(h=>e.jsx(re,{value:h.id,className:"text-xs",children:h.name},h.id))}),i.map(h=>e.jsx(ne,{value:h.id,className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx($,{children:h.name}),e.jsx(Te,{children:h.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[h.completionRate,"%"]}),e.jsx(Gn,{value:h.completionRate,className:"w-24"})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"grid gap-4",children:h.tests.map(x=>e.jsx("div",{className:`p-4 rounded-lg border ${o(x.status)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c(x.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:x.name}),x.role&&e.jsx(q,{variant:"outline",className:"text-xs",children:x.role})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:x.description}),x.details&&e.jsx("p",{className:"text-xs font-mono bg-white/50 dark:bg-black/20 p-2 rounded",children:x.details})]})]}),x.route&&e.jsx(Es,{href:x.route,children:e.jsxs(R,{variant:"outline",size:"sm",className:"gap-1",children:[e.jsx(ma,{className:"h-3 w-3"}),"Test"]})})]})},x.id))})})]})},h.id))]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Quick Test Access"}),e.jsx(Te,{children:"Direct links to key testing scenarios"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Es,{href:"/enhanced-guest-dashboard",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(st,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Guest Dashboard"})]})}),e.jsx(Es,{href:"/enhanced-agent-booking-demo",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(zL,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Agent Demo"})]})}),e.jsx(Es,{href:"/guest-checkin-checkout-tracker",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(We,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Check-in/out"})]})}),e.jsx(Es,{href:"/property-utilities-maintenance",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(qu,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Utilities"})]})}),e.jsx(Es,{href:"/owner-dashboard",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Us,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Owner Dashboard"})]})}),e.jsx(Es,{href:"/staff-dashboard",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(zu,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Staff Dashboard"})]})}),e.jsx(Es,{href:"/guest-checkout-survey",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(gn,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Survey System"})]})}),e.jsx(Es,{href:"/settings",children:e.jsxs(R,{variant:"outline",className:"w-full h-16 flex-col gap-1",children:[e.jsx(Lt,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Settings"})]})})]})})]})]})]})}const PK=Object.freeze(Object.defineProperty({__proto__:null,default:hR},Symbol.toStringTag,{value:"Module"})),Yl={id:"Demo1234",guestName:"Liam Andersen",propertyName:"Villa Aruna",checkIn:"2025-07-05"},kK=[{id:"spa",name:"Spa & Wellness",icon:us,keywords:["massage","spa","wellness","treatment"]},{id:"dining",name:"Dining",icon:Gu,keywords:["dinner","chef","meal","restaurant","food"]},{id:"housekeeping",name:"Housekeeping",icon:ki,keywords:["cleaning","towels","bed","room","housekeeping"]},{id:"transport",name:"Transportation",icon:bi,keywords:["taxi","transfer","airport","car","driver"]},{id:"concierge",name:"Concierge",icon:is,keywords:["recommendation","booking","tour","tickets"]},{id:"general",name:"General",icon:ra,keywords:["other","help","question","request"]}];function AK(){const{user:t}=Rr(),{toast:s}=Xe(),r=ut(),[n,a]=j.useState(""),[i,l]=j.useState(null),o=j.useRef(null),c=t?.role==="guest",d=["admin","portfolio-manager","staff"].includes(t?.role||""),{data:u=[],isLoading:m}=ge({queryKey:["/api/guest-portal/chat-messages",Yl.id],enabled:!!t}),{data:h=[],isLoading:x}=ge({queryKey:["/api/guest-portal/service-requests",Yl.id],enabled:!!t}),{data:g=[],isLoading:p}=ge({queryKey:["/api/guest-portal/notifications"],enabled:d}),f=Ce({mutationFn:async k=>fe("POST","/api/guest-portal/send-message",k),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/guest-portal/chat-messages"]}),r.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),r.invalidateQueries({queryKey:["/api/guest-portal/notifications"]}),a(""),s({title:"Message sent",description:"Your message has been sent successfully."})},onError:k=>{s({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),v=Ce({mutationFn:async({requestId:k,action:A,notes:N})=>fe("POST",`/api/guest-portal/service-requests/${k}/action`,{action:A,notes:N}),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),r.invalidateQueries({queryKey:["/api/guest-portal/notifications"]}),l(null),s({title:"Request updated",description:"Service request has been updated successfully."})},onError:k=>{s({title:"Error",description:"Failed to update request. Please try again.",variant:"destructive"})}});j.useEffect(()=>{o.current?.scrollIntoView({behavior:"smooth"})},[u]);const b=()=>{if(!n.trim())return;const k={reservationId:Yl.id,messageText:n,senderType:c?"guest":"staff",senderId:t?.id||"demo-user"};f.mutate(k)},y=(k,A)=>{i&&v.mutate({requestId:i.id,action:k,notes:A})},S=new Date(Yl.checkIn),w=new Date(S);w.setDate(S.getDate()-7);const C=new Date>=w;return m||x?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})}):c?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Guest Portal"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Welcome back, ",Yl.guestName,"! Your stay at ",Yl.propertyName]})]}),!C&&e.jsxs($n,{className:"mb-6",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsxs(Fn,{children:["Full access unlocks 7 days before check-in (",w.toLocaleDateString(),"). Chat and basic information are available now."]})]}),e.jsxs(ot,{defaultValue:"chat",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-3",children:[e.jsx(re,{value:"chat",children:"💬 Chat & Requests"}),e.jsx(re,{value:"services",children:"✨ Confirmed Services"}),e.jsx(re,{value:"info",disabled:!C,children:"📋 Arrival & Info"})]}),e.jsx(ne,{value:"chat",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Oo,{className:"h-5 w-5"}),"Chat with our team"]}),e.jsx(Te,{children:"Ask questions, request services, or get recommendations. Our AI will help route your requests."})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Uo,{className:"h-96 border rounded-lg p-4",children:e.jsxs("div",{className:"space-y-4",children:[u.map(k=>e.jsx("div",{className:`flex gap-3 ${k.senderType==="guest"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex items-start gap-2 max-w-xs lg:max-w-md ${k.senderType==="guest"?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:k.senderType==="guest"?e.jsx(It,{className:"h-4 w-4"}):k.isSystemGenerated?e.jsx(Bn,{className:"h-4 w-4"}):e.jsx(It,{className:"h-4 w-4"})}),e.jsxs("div",{className:`p-3 rounded-lg ${k.senderType==="guest"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm",children:k.messageText}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(k.createdAt).toLocaleTimeString()})]})]})},k.id)),e.jsx("div",{ref:o})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{placeholder:"Type your message or request...",value:n,onChange:k=>a(k.target.value),onKeyPress:k=>k.key==="Enter"&&b(),className:"flex-1"}),e.jsx(R,{onClick:b,disabled:!n.trim()||f.isPending,children:e.jsx(N0,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:kK.map(k=>{const A=k.icon;return e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>a(`I would like to request ${k.name.toLowerCase()}`),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),k.name]},k.id)})})]})})]})}),e.jsx(ne,{value:"services",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Confirmed Services & Requests"}),e.jsx(Te,{children:"View all confirmed services and add-ons for your stay"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[h.filter(k=>k.status==="accepted").map(k=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:k.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:k.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(q,{variant:"secondary",children:k.category}),e.jsx(q,{variant:k.billingType==="guest_billable"?"destructive":"default",children:k.billingType})]})]}),e.jsxs(q,{variant:"default",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Confirmed"]})]}),k.scheduledDate&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(We,{className:"h-4 w-4"}),"Scheduled: ",new Date(k.scheduledDate).toLocaleDateString()]})]},k.id)),h.filter(k=>k.status==="accepted").length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No confirmed services yet"}),e.jsx("p",{className:"text-sm",children:"Request services through the chat to get started"})]})]})})]})}),e.jsx(ne,{value:"info",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(c8,{className:"h-5 w-5"}),"Arrival Details"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Please provide your arrival details for a smooth check-in"}),e.jsx(R,{children:"Update Arrival Info"})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(UL,{className:"h-5 w-5"}),"House Manual"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Important information about your stay"}),e.jsx(R,{variant:"outline",children:"View Manual"})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5"}),"Area Guide"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Local recommendations and attractions"}),e.jsx(R,{variant:"outline",children:"Explore Area"})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Service Schedule"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Cleaning and maintenance schedule"}),e.jsx(R,{variant:"outline",children:"View Schedule"})]})]})]})})]})]})}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Guest Portal Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage guest communications and service requests"})]}),e.jsxs(ot,{defaultValue:"notifications",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-3",children:[e.jsxs(re,{value:"notifications",children:["🔔 Notifications",g.length>0&&e.jsx(q,{variant:"destructive",className:"ml-2",children:g.length})]}),e.jsx(re,{value:"requests",children:"📋 All Requests"}),e.jsx(re,{value:"chat",children:"💬 Chat Monitor"})]}),e.jsx(ne,{value:"notifications",children:e.jsxs("div",{className:"space-y-4",children:[g.map(k=>e.jsxs(O,{className:"border-l-4 border-l-orange-500",children:[e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"h-5 w-5"}),"New Service Request"]}),e.jsx(q,{variant:"outline",children:"Pending"})]}),e.jsxs(Te,{children:["From ",k.guestName," - ",k.propertyName]})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:k.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:k.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>y("accept"),disabled:v.isPending,children:[e.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsx(R,{variant:"outline",onClick:()=>l(k),children:"Edit"}),e.jsxs(R,{variant:"destructive",onClick:()=>y("decline"),disabled:v.isPending,children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),"Decline"]})]})]})})]},k.id)),g.length===0&&e.jsx(O,{children:e.jsxs(D,{className:"text-center py-8",children:[e.jsx(Vs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-gray-500",children:"No pending notifications"})]})})]})}),e.jsx(ne,{value:"requests",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"All Service Requests"}),e.jsx(Te,{children:"Complete history of service requests across all reservations"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[h.map(k=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:k.serviceType}),e.jsx(q,{variant:k.status==="accepted"?"default":k.status==="pending"?"secondary":"destructive",children:k.status})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:k.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:k.guestName}),e.jsx("span",{children:"•"}),e.jsx("span",{children:k.propertyName}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(k.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 text-right",children:[e.jsx(q,{variant:k.billingType==="guest_billable"?"destructive":"outline",children:k.billingType}),k.estimatedCost&&e.jsxs("span",{className:"text-sm font-semibold",children:["฿",k.estimatedCost]})]})]})},k.id)),h.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Nt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No service requests found"})]})]})})]})}),e.jsx(ne,{value:"chat",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Chat Monitor"}),e.jsx(Te,{children:"Monitor guest conversations and AI-generated requests"})]}),e.jsx(D,{children:e.jsx(Uo,{className:"h-96",children:e.jsx("div",{className:"space-y-4",children:u.map(k=>e.jsx("div",{className:`p-3 rounded-lg border ${k.senderType==="guest"?"bg-blue-50 dark:bg-blue-950":"bg-gray-50 dark:bg-gray-950"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[k.senderType==="guest"?e.jsx(It,{className:"h-4 w-4"}):k.isSystemGenerated?e.jsx(Bn,{className:"h-4 w-4"}):e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-sm",children:k.senderType==="guest"?"Guest":k.isSystemGenerated?"AI Assistant":"Staff"})]}),e.jsx("p",{className:"text-sm",children:k.messageText})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(k.createdAt).toLocaleTimeString()})]})},k.id))})})})]})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(O,{className:"w-full max-w-md",children:[e.jsx(_,{children:e.jsx($,{children:"Edit Service Request"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:i.serviceType}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:i.description})]}),e.jsx(nt,{placeholder:"Add notes or modifications...",rows:3}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:()=>y("accept"),disabled:v.isPending,className:"flex-1",children:"Accept"}),e.jsx(R,{variant:"destructive",onClick:()=>y("decline"),disabled:v.isPending,className:"flex-1",children:"Decline"})]}),e.jsx(R,{variant:"outline",onClick:()=>l(null),className:"w-full",children:"Cancel"})]})})]})})]})})}const TK={restaurant:Gu,beach:y8,viewpoint:s8,spa:Ld,market:u8,tour:Bu},DK={restaurant:"bg-orange-100 text-orange-800",beach:"bg-blue-100 text-blue-800",viewpoint:"bg-green-100 text-green-800",spa:"bg-purple-100 text-purple-800",market:"bg-yellow-100 text-yellow-800",tour:"bg-red-100 text-red-800"};function OK(){const{toast:t}=Xe(),s=ut(),[r,n]=j.useState("all"),[a,i]=j.useState(!1),[l,o]=j.useState({preferredCategories:[],travelStyle:"romantic",budgetPreference:"luxury",activityLevel:"relaxing",groupSize:2,hasChildren:!1,specialInterests:[]}),c={reservationId:"Demo1234",guestId:"guest-liam-andersen",propertyId:1,guestName:"Liam Andersen",checkInDate:"2025-07-05",checkOutDate:"2025-07-10",property:{name:"Villa Aruna",location:"Koh Samui, Thailand"}},{data:d=[],isLoading:u}=ge({queryKey:["/api/guest-activity-recommendations",c.propertyId,r],queryFn:()=>{const y=new URLSearchParams;return r!=="all"&&y.append("category",r),y.append("isFeatured","true"),fe("GET",`/api/guest-activity-recommendations/${c.propertyId}?${y}`)}}),{data:m}=ge({queryKey:["/api/guest-activity-preferences",c.reservationId],queryFn:()=>fe("GET",`/api/guest-activity-preferences/${c.reservationId}`)}),h=Ce({mutationFn:y=>fe("POST","/api/guest-recommendation-interactions",y),onSuccess:()=>{}}),x=Ce({mutationFn:y=>m?fe("PUT",`/api/guest-activity-preferences/${c.reservationId}`,y):fe("POST","/api/guest-activity-preferences",{...y,organizationId:"default-org",reservationId:c.reservationId,guestId:c.guestId,propertyId:c.propertyId}),onSuccess:()=>{t({title:"Preferences Updated",description:"Your activity preferences have been saved. We'll show you more personalized recommendations!"}),s.invalidateQueries({queryKey:["/api/guest-activity-preferences"]}),i(!1)}}),g=(y,S,w)=>{h.mutate({organizationId:"default-org",reservationId:c.reservationId,guestId:c.guestId,recommendationId:y.id,interactionType:S,sessionId:`session-${Date.now()}`,deviceType:"desktop",clickedElement:w,viewDuration:S==="view"?30:void 0})},p=()=>{x.mutate({preferredCategories:l.preferredCategories,travelStyle:l.travelStyle,budgetPreference:l.budgetPreference,activityLevel:l.activityLevel,groupSize:l.groupSize,hasChildren:l.hasChildren,specialInterests:l.specialInterests,preferencesSetBy:"guest"})},f=[{value:"all",label:"All Recommendations"},{value:"restaurant",label:"Restaurants"},{value:"beach",label:"Beaches"},{value:"tour",label:"Tours & Activities"},{value:"spa",label:"Spa & Wellness"},{value:"viewpoint",label:"Viewpoints"},{value:"market",label:"Markets & Shopping"}],v=r==="all"?d:d.filter(y=>y.category===r);return(()=>{const y=new Date,S=new Date(c.checkInDate),w=new Date(c.checkOutDate),C=new Date(S);return C.setDate(C.getDate()-3),y>=C&&y<=w})()?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["Discover ",c.property.location]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome ",c.guestName,"! Here are personalized recommendations for your stay at ",c.property.name]})]}),e.jsxs(R,{onClick:()=>i(!0),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Do,{className:"h-4 w-4"}),"Customize Preferences"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Browse by Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(y=>e.jsx(R,{onClick:()=>n(y.value),variant:r===y.value?"default":"outline",size:"sm",children:y.label},y.value))})]})]}),u?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(y=>e.jsxs(O,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),e.jsxs(D,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},y))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(y=>{const S=TK[y.category]||is;return e.jsxs(O,{className:"hover:shadow-xl transition-all duration-300 bg-white",onMouseEnter:()=>g(y,"view"),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-blue-500 to-purple-600 rounded-t-lg flex items-center justify-center",children:e.jsx(S,{className:"h-12 w-12 text-white"})}),y.isFeatured&&e.jsx(q,{className:"absolute top-3 right-3 bg-yellow-500 text-white",children:"Featured"}),e.jsx(q,{className:`absolute top-3 left-3 ${DK[y.category]}`,children:y.category})]}),e.jsxs(D,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:y.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:y.shortDescription}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(is,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:y.address})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ke,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-600",children:y.operatingHours})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(us,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-gray-600",children:y.estimatedPrice})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:y.tags.slice(0,3).map((w,C)=>e.jsx(q,{variant:"secondary",className:"text-xs",children:w},C))}),e.jsxs("div",{className:"flex gap-2",children:[y.googleMapsLink&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{g(y,"click","maps"),window.open(y.googleMapsLink,"_blank")},children:[e.jsx(r8,{className:"h-4 w-4 mr-1"}),"Maps"]}),y.websiteUrl&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{g(y,"click","website"),window.open(y.websiteUrl,"_blank")},children:[e.jsx(sa,{className:"h-4 w-4 mr-1"}),"Website"]}),y.phoneNumber&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{g(y,"click","phone"),window.open(`tel:${y.phoneNumber}`,"_blank")},children:[e.jsx(ra,{className:"h-4 w-4 mr-1"}),"Call"]})]}),y.bookingUrl&&e.jsxs(R,{className:"w-full mt-3",onClick:()=>{g(y,"click","booking"),window.open(y.bookingUrl,"_blank")},children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Book Now"]})]})]},y.id)})}),v.length===0&&!u&&e.jsx(O,{children:e.jsxs(D,{className:"text-center py-12",children:[e.jsx(is,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No recommendations found"}),e.jsx("p",{className:"text-gray-600",children:"Try selecting a different category or customize your preferences."})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(O,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_,{children:[e.jsx($,{children:"Customize Your Preferences"}),e.jsx(Te,{children:"Tell us about your interests to get more personalized recommendations"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Preferred Categories"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.slice(1).map(y=>e.jsx(R,{size:"sm",variant:l.preferredCategories?.includes(y.value)?"default":"outline",onClick:()=>{const S=l.preferredCategories||[];S.includes(y.value)?o({...l,preferredCategories:S.filter(w=>w!==y.value)}):o({...l,preferredCategories:[...S,y.value]})},children:y.label},y.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Travel Style"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["romantic","family","adventure","relaxation","cultural"].map(y=>e.jsx(R,{size:"sm",variant:l.travelStyle===y?"default":"outline",onClick:()=>o({...l,travelStyle:y}),children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Budget Preference"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["budget","moderate","luxury"].map(y=>e.jsx(R,{size:"sm",variant:l.budgetPreference===y?"default":"outline",onClick:()=>o({...l,budgetPreference:y}),children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Activity Level"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["relaxing","moderate","active"].map(y=>e.jsx(R,{size:"sm",variant:l.activityLevel===y?"default":"outline",onClick:()=>o({...l,activityLevel:y}),children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{onClick:p,disabled:x.isPending,className:"flex-1",children:x.isPending?"Saving...":"Save Preferences"}),e.jsx(R,{variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(O,{children:[e.jsxs(_,{className:"text-center",children:[e.jsx($,{className:"text-2xl",children:"Activity Recommendations"}),e.jsx(Te,{children:"Activity recommendations will be available 3 days before your check-in date."})]}),e.jsxs(D,{className:"text-center",children:[e.jsx(We,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsxs("p",{className:"text-lg mb-2",children:["Check-in: ",new Date(c.checkInDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recommendations available from: ",new Date(new Date(c.checkInDate).getTime()-3*24*60*60*1e3).toLocaleDateString()]})]})]})})})}function EK(){return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Help & Support"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," support@hostpilotpro.com"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +1 (555) 123-4567"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Support Hours:"})," 9 AM - 6 PM (Monday - Friday)"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Links"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"• Property Management Guide"}),e.jsx("p",{children:"• Booking System Tutorial"}),e.jsx("p",{children:"• Financial Reports Help"}),e.jsx("p",{children:"• Task Management Overview"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-green-600",children:"✓ All systems operational"}),e.jsx("p",{className:"text-green-600",children:"✓ Database connectivity: Good"}),e.jsx("p",{className:"text-green-600",children:"✓ API services: Running"})]})]})]})]})}function t2(){const[,t]=pr();return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>t("/"),className:"mb-4","data-testid":"button-back-dashboard",children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get quick assistance with HostPilotPro - Your property management platform"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-5 w-5"}),"Contact Support"]}),e.jsx(Te,{children:"Immediate assistance available"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ra,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"+66 (0) 76-123-456"}),e.jsx(q,{className:"text-xs",children:"24/7 Available"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ha,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"support@hostpilotpro.com"}),e.jsx(q,{variant:"secondary",className:"text-xs",children:"Response within 2 hours"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oo,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Live Chat"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Available in-app"}),e.jsx(q,{variant:"outline",className:"text-xs",children:"Online now"})]})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5"}),"Quick Actions"]}),e.jsx(Te,{children:"Fast solutions for common tasks"})]}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs(R,{className:"w-full justify-start",variant:"outline",children:[e.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Start Live Chat Support"]}),e.jsxs(R,{className:"w-full justify-start",variant:"outline",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"View User Guide"]}),e.jsxs(R,{className:"w-full justify-start",variant:"outline",children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Knowledge Base"]}),e.jsxs(R,{className:"w-full justify-start",variant:"outline",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Training Videos"]})]})]}),e.jsxs(O,{className:"md:col-span-2",children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(fh,{className:"h-5 w-5"}),"Common Solutions"]}),e.jsx(Te,{children:"Quick fixes for frequent questions"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Property Management"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Adding Properties:"})," Go to Property Hub → Add New Property"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Task Assignment:"})," Use Daily Operations → Create Task"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Booking Management:"})," Access via Bookings tab"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Financial Tools"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Invoice Generation:"})," Finance Hub → Invoice Generator"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Revenue Reports:"})," Admin Dashboard → Financial Reports"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Commission Tracking:"})," Finance Engine → Commission System"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"User Management"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Add Users:"})," Admin → User Management → Add User"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Permissions:"})," Click Permissions button next to any user"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Role Changes:"})," Edit user profile and update role"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"AI Assistant"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Captain Cortex:"})," Click the AI button in bottom-right corner"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Smart Queries:"})," Ask about properties, revenue, or tasks"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Report Generation:"})," Request automated insights"]})]})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Platform Status"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"System Status"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"All Systems Operational"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"API Response"}),e.jsx(q,{variant:"outline",children:"< 50ms average"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Last Update"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Today, 2:30 PM"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ra,{className:"h-5 w-5"}),"Emergency Support"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-red-800",children:"24/7 Emergency Hotline"}),e.jsx("p",{className:"text-lg font-bold text-red-900",children:"+66 (0) 76-999-888"}),e.jsx("p",{className:"text-xs text-red-700",children:"For critical system issues or property emergencies"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Technical Support"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:"+66 (0) 76-888-777"}),e.jsx("p",{className:"text-xs text-blue-700",children:"For urgent technical assistance"})]})]})]})]})]})}function MK(){const[t,s]=j.useState(""),r=[{id:"1",title:"Getting Started with HostPilotPro",description:"Learn the basics of property management and initial setup",category:"Getting Started",tags:["setup","basics","onboarding"],readTime:"5 min",difficulty:"beginner"},{id:"2",title:"Managing Properties and Bookings",description:"Complete guide to property setup and booking management",category:"Properties",tags:["properties","bookings","calendar"],readTime:"8 min",difficulty:"beginner"},{id:"3",title:"Finance Intelligence Module",description:"AI-powered financial analysis and business insights",category:"Finance",tags:["finance","ai","analytics","reports"],readTime:"12 min",difficulty:"intermediate"},{id:"4",title:"Staff Management & Payroll",description:"Manage staff salaries, wages, and payroll information",category:"Staff",tags:["staff","payroll","salaries","admin"],readTime:"10 min",difficulty:"intermediate"},{id:"5",title:"Task Automation and Scheduling",description:"Set up automatic task creation and scheduling rules",category:"Tasks",tags:["tasks","automation","scheduling"],readTime:"15 min",difficulty:"advanced"},{id:"6",title:"User Roles and Permissions",description:"Configure user access levels and module permissions",category:"Administration",tags:["users","permissions","roles","security"],readTime:"7 min",difficulty:"intermediate"}],n=[{question:"How do I reset a user's password?",answer:"Navigate to User Management, select the user, and click 'Reset Password'. An email will be sent to the user with reset instructions.",category:"User Management"},{question:"Can I export financial reports?",answer:"Yes! Go to Finance Hub → Finance Intelligence and click 'Export Report' to download PDF or CSV reports with AI insights.",category:"Finance"},{question:"How do I set up automated tasks?",answer:"Go to Task Management → Automation Rules to create recurring tasks based on property events, dates, or booking triggers.",category:"Tasks"},{question:"What's the difference between Admin and Portfolio Manager roles?",answer:"Admins have full system access including user management and system settings. Portfolio Managers can manage properties and view reports but cannot access admin-only features.",category:"Roles"},{question:"How do I add a new property?",answer:"Navigate to Property Management and click 'Add Property'. Fill in the required details including address, amenities, and owner information.",category:"Properties"},{question:"Can I integrate with external booking platforms?",answer:"Yes, HostPilotPro supports integrations with Airbnb, Booking.com, and VRBO through our API connections panel in Settings.",category:"Integrations"}],a=[{title:"Video Tutorials",description:"Watch step-by-step guides",icon:t4,action:()=>window.open("https://youtube.com/@hostpilotpro","_blank")},{title:"Contact Support",description:"Get help from our team",icon:Oo,action:()=>window.open("mailto:support@hostpilotpro.com","_blank")},{title:"Community Forum",description:"Connect with other users",icon:st,action:()=>window.open("https://community.hostpilotpro.com","_blank")},{title:"System Status",description:"Check service availability",icon:_a,action:()=>window.open("https://status.hostpilotpro.com","_blank")}],i=r.filter(d=>t===""||d.title.toLowerCase().includes(t.toLowerCase())||d.description.toLowerCase().includes(t.toLowerCase())||d.tags.some(u=>u.toLowerCase().includes(t.toLowerCase()))),l=n.filter(d=>t===""||d.question.toLowerCase().includes(t.toLowerCase())||d.answer.toLowerCase().includes(t.toLowerCase())),o=d=>{switch(d){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},c=d=>{switch(d){case"Properties":return Us;case"Finance":return He;case"Tasks":return _a;case"Staff":return st;case"Administration":return Lt;default:return dt}};return e.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(fh,{className:"h-8 w-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Help Center"})]}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Find answers, guides, and resources to help you get the most out of HostPilotPro"})]}),e.jsxs("div",{className:"relative mb-8 max-w-md mx-auto",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(H,{placeholder:"Search help articles and FAQs...",value:t,onChange:d=>s(d.target.value),className:"pl-9"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:a.map((d,u)=>e.jsx(O,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:d.action,children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(d.icon,{className:"h-8 w-8 mx-auto mb-2 text-blue-600"}),e.jsx("h3",{className:"font-medium mb-1",children:d.title}),e.jsx("p",{className:"text-sm text-gray-600",children:d.description}),e.jsx(ma,{className:"h-3 w-3 mx-auto mt-2 text-gray-400"})]})},u))}),e.jsxs(ot,{defaultValue:"articles",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-2",children:[e.jsx(re,{value:"articles",children:"Help Articles"}),e.jsx(re,{value:"faq",children:"FAQ"})]}),e.jsx(ne,{value:"articles",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:i.map(d=>{const u=c(d.category);return e.jsx(O,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:e.jsx(u,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:d.title}),e.jsx(q,{variant:"secondary",className:"text-xs",children:d.category}),e.jsx(q,{className:`text-xs ${o(d.difficulty)}`,children:d.difficulty})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:d.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"h-3 w-3"}),d.readTime]}),e.jsx("div",{className:"flex gap-1",children:d.tags.map(m=>e.jsx(q,{variant:"outline",className:"text-xs",children:m},m))})]})]})]}),e.jsx(VT,{className:"h-5 w-5 text-gray-400"})]})})},d.id)})})}),e.jsx(ne,{value:"faq",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:l.map((d,u)=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(fh,{className:"h-5 w-5 text-blue-600"}),d.question]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:d.answer}),e.jsx(q,{variant:"outline",className:"mt-3 text-xs",children:d.category})]})]},u))})})]}),e.jsx(O,{className:"mt-8 bg-blue-50",children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Still need help?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Our support team is here to help you succeed"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(R,{onClick:()=>window.open("mailto:support@hostpilotpro.com","_blank"),children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Email Support"]}),e.jsxs(R,{variant:"outline",onClick:()=>window.open("tel:+1-555-HOSTPRO","_blank"),children:[e.jsx(ra,{className:"h-4 w-4 mr-2"}),"Call Support"]})]})]})})]})}var $p="Collapsible",[RK,vke]=Zs($p),[_K,Sb]=RK($p),xR=j.forwardRef((t,s)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:i,onOpenChange:l,...o}=t,[c,d]=Jr({prop:n,defaultProp:a??!1,onChange:l,caller:$p});return e.jsx(_K,{scope:r,disabled:i,contentId:Wr(),open:c,onOpenToggle:j.useCallback(()=>d(u=>!u),[d]),children:e.jsx(Ye.div,{"data-state":Pb(c),"data-disabled":i?"":void 0,...o,ref:s})})});xR.displayName=$p;var pR="CollapsibleTrigger",fR=j.forwardRef((t,s)=>{const{__scopeCollapsible:r,...n}=t,a=Sb(pR,r);return e.jsx(Ye.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Pb(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:s,onClick:Re(t.onClick,a.onOpenToggle)})});fR.displayName=pR;var Cb="CollapsibleContent",gR=j.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Sb(Cb,t.__scopeCollapsible);return e.jsx(Js,{present:r||a.open,children:({present:i})=>e.jsx(IK,{...n,ref:s,present:i})})});gR.displayName=Cb;var IK=j.forwardRef((t,s)=>{const{__scopeCollapsible:r,present:n,children:a,...i}=t,l=Sb(Cb,r),[o,c]=j.useState(n),d=j.useRef(null),u=jt(s,d),m=j.useRef(0),h=m.current,x=j.useRef(0),g=x.current,p=l.open||o,f=j.useRef(p),v=j.useRef(void 0);return j.useEffect(()=>{const b=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(b)},[]),$s(()=>{const b=d.current;if(b){v.current=v.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const y=b.getBoundingClientRect();m.current=y.height,x.current=y.width,f.current||(b.style.transitionDuration=v.current.transitionDuration,b.style.animationName=v.current.animationName),c(n)}},[l.open,n]),e.jsx(Ye.div,{"data-state":Pb(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!p,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:p&&a})});function Pb(t){return t?"open":"closed"}var $K=xR;const jR=$K,vR=fR,yR=gR,FK=Qt({name:Ne().min(1,"Name is required"),email:Ne().email("Invalid email address"),role:Cs(["admin","portfolio-manager","staff","owner","guest"]),status:Cs(["active","inactive"])}),LK=Qt({name:Ne().min(1,"Name is required"),email:Ne().email("Invalid email address"),role:Cs(["admin","portfolio-manager","staff","owner","guest"]),password:Ne().min(6,"Password must be at least 6 characters")}),Hi={"Core Dashboard":{"Admin Dashboard":{view:!0,edit:!0,create:!1,delete:!1},"Portfolio Manager Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Owner Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Staff Dashboard":{view:!0,edit:!1,create:!1,delete:!1},"Retail Agent Hub":{view:!0,edit:!1,create:!1,delete:!1}},"Property Management":{"Property CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Property Settings":{view:!0,edit:!0,create:!1,delete:!1},"Property Goals":{view:!0,edit:!0,create:!0,delete:!1},"Property Hub":{view:!0,edit:!1,create:!1,delete:!1},"Property Overview":{view:!0,edit:!1,create:!1,delete:!1}},"Task Management":{"Task CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Task Templates":{view:!0,edit:!0,create:!0,delete:!1},"Task Automation":{view:!0,edit:!0,create:!1,delete:!1},"Daily Operations":{view:!0,edit:!1,create:!1,delete:!1},"Maintenance Tracking":{view:!0,edit:!0,create:!0,delete:!1}},"Booking & Guest Services":{"Booking CRUD":{view:!0,edit:!0,create:!0,delete:!1},"Guest Portal":{view:!0,edit:!1,create:!1,delete:!1},"Check-in/Check-out":{view:!0,edit:!0,create:!1,delete:!1},"Guest Communication":{view:!0,edit:!0,create:!0,delete:!1},"Guest Services":{view:!0,edit:!1,create:!1,delete:!1}},"Financial Management":{"Finance CRUD":{view:!0,edit:!0,create:!0,delete:!0},"Invoice Generator":{view:!0,edit:!0,create:!0,delete:!1},"Finance Engine":{view:!0,edit:!0,create:!1,delete:!1},"Smart Pricing":{view:!0,edit:!0,create:!1,delete:!1},"OTA Payout Logic":{view:!0,edit:!1,create:!1,delete:!1},"Owner Invoicing":{view:!0,edit:!0,create:!0,delete:!1},"Commission System":{view:!0,edit:!0,create:!1,delete:!1}},"Utilities & Maintenance":{"Utility Tracker":{view:!0,edit:!0,create:!0,delete:!1},"Water Management":{view:!0,edit:!0,create:!0,delete:!1},"Maintenance System":{view:!0,edit:!0,create:!0,delete:!1},"Vendor Management":{view:!0,edit:!0,create:!0,delete:!0},"Supply Orders":{view:!0,edit:!0,create:!0,delete:!1}},"Staff & Operations":{"Staff Management":{view:!0,edit:!0,create:!0,delete:!1},"Staff Permissions":{view:!0,edit:!0,create:!1,delete:!1},"Staff Workload":{view:!0,edit:!1,create:!1,delete:!1},"Staff Skills":{view:!0,edit:!0,create:!0,delete:!1},"Operational Efficiency":{view:!0,edit:!1,create:!1,delete:!1}},"Reports & Analytics":{"Financial Reports":{view:!0,edit:!1,create:!1,delete:!1},"Performance Analytics":{view:!0,edit:!1,create:!1,delete:!1},"Portfolio Health":{view:!0,edit:!1,create:!1,delete:!1},"Sustainability Metrics":{view:!0,edit:!1,create:!1,delete:!1},"Revenue Forecasting":{view:!0,edit:!1,create:!1,delete:!1}},"AI & Automation":{"Captain Cortex AI":{view:!0,edit:!1,create:!1,delete:!1},"AI Notifications":{view:!0,edit:!0,create:!1,delete:!1},"AI Task Automation":{view:!0,edit:!0,create:!1,delete:!1},"Smart Suggestions":{view:!0,edit:!1,create:!1,delete:!1}},"System Administration":{"User Management":{view:!0,edit:!0,create:!0,delete:!0},"System Settings":{view:!0,edit:!0,create:!1,delete:!1},"API Connections":{view:!0,edit:!0,create:!1,delete:!1},"Sandbox Testing":{view:!0,edit:!0,create:!1,delete:!1},"System Integrity":{view:!0,edit:!1,create:!1,delete:!1}}};function dv(){const[t,s]=j.useState(""),[r,n]=j.useState("all"),[a,i]=j.useState(null),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(null),[g,p]=j.useState({}),[f,v]=j.useState([]),{toast:b}=Xe(),y=ut(),{data:S=[],isLoading:w}=ge({queryKey:["/api/users"]}),C=Ft({resolver:es(FK),defaultValues:{name:"",email:"",role:"staff",status:"active"}}),k=Ft({resolver:es(LK),defaultValues:{name:"",email:"",role:"staff",password:""}}),A=Ce({mutationFn:async B=>{const{id:W,...he}=B;return fe("PATCH",`/api/users/${W}`,he)},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/users"]}),o(!1),i(null),C.reset(),b({title:"Success",description:"User updated successfully"})},onError:B=>{b({title:"Error",description:B.message||"Failed to update user",variant:"destructive"})}}),N=Ce({mutationFn:async B=>fe("POST","/api/users",B),onSuccess:()=>{y.invalidateQueries({queryKey:["/api/users"]}),d(!1),k.reset(),b({title:"Success",description:"User created successfully"})},onError:B=>{b({title:"Error",description:B.message||"Failed to create user",variant:"destructive"})}}),M=B=>{i(B),C.reset({name:B.name||`${B.firstName||""} ${B.lastName||""}`.trim(),email:B.email,role:B.role,status:B.status||"active"}),o(!0)},F=B=>{a&&A.mutate({...B,id:a.id})},I=B=>{N.mutate(B)},V=B=>{x(B);const W={};Object.keys(Hi).forEach(he=>{W[he]={},Object.keys(Hi[he]).forEach(Se=>{const z=B.role==="admin",L=B.role==="portfolio-manager",le=B.role==="staff";B.role,W[he][Se]={view:!0,edit:z||L&&!he.includes("System"),create:z||L&&!he.includes("System"),delete:z},he==="System Administration"&&!z&&(W[he][Se]={view:!1,edit:!1,create:!1,delete:!1}),he==="Financial Management"&&le&&(W[he][Se].edit=!1,W[he][Se].create=!1)})}),p(W),m(!0)},E=(B,W,he,Se)=>{p(z=>({...z,[B]:{...z[B],[W]:{...z[B][W],[he]:Se}}}))},G=B=>{v(W=>W.includes(B)?W.filter(he=>he!==B):[...W,B])},Y=()=>{b({title:"Success",description:`Permissions updated for ${h?.name||h?.email}`}),m(!1)},Q=S.filter(B=>{const W=!t||B.name?.toLowerCase().includes(t.toLowerCase())||B.email?.toLowerCase().includes(t.toLowerCase())||`${B.firstName||""} ${B.lastName||""}`.toLowerCase().includes(t.toLowerCase()),he=r==="all"||B.role===r;return W&&he}),T={admin:"bg-red-100 text-red-800","portfolio-manager":"bg-blue-100 text-blue-800",staff:"bg-green-100 text-green-800",owner:"bg-purple-100 text-purple-800",guest:"bg-gray-100 text-gray-800"};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage users, permissions, and access controls"})]}),e.jsxs(Ve,{open:c,onOpenChange:d,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(Hw,{className:"w-4 h-4 mr-2"}),"Add User"]})}),e.jsxs(qe,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Add New User"})}),e.jsx(Wt,{...k,children:e.jsxs("form",{onSubmit:k.handleSubmit(I),className:"space-y-4",children:[e.jsx(de,{control:k.control,name:"name",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Full Name"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Enter full name",...B})}),e.jsx(xe,{})]})}),e.jsx(de,{control:k.control,name:"email",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Email"}),e.jsx(ce,{children:e.jsx(H,{type:"email",placeholder:"Enter email address",...B})}),e.jsx(xe,{})]})}),e.jsx(de,{control:k.control,name:"password",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Password"}),e.jsx(ce,{children:e.jsx(H,{type:"password",placeholder:"Enter password",...B})}),e.jsx(xe,{})]})}),e.jsx(de,{control:k.control,name:"role",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Role"}),e.jsxs(te,{onValueChange:B.onChange,defaultValue:B.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select role"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"staff",children:"Staff"}),e.jsx(P,{value:"owner",children:"Owner"}),e.jsx(P,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(P,{value:"admin",children:"Admin"}),e.jsx(P,{value:"guest",children:"Guest"})]})]}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:N.isPending,children:N.isPending?"Creating...":"Create User"})]})]})})]})]}),e.jsx(Ve,{open:u,onOpenChange:m,children:e.jsxs(qe,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ue,{children:e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5"}),"Manage Permissions: ",h?.name||h?.email]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:T[h?.role],children:h?.role}),e.jsx("span",{className:"text-sm text-gray-600",children:h?.email})]}),e.jsx("div",{className:"ml-auto text-xs text-gray-500",children:"Configure granular permissions for each module and operation"})]}),e.jsx("div",{className:"space-y-3",children:Object.keys(Hi).map(B=>e.jsx("div",{className:"border rounded-lg",children:e.jsxs(jR,{children:[e.jsx(vR,{className:"w-full p-3 flex items-center justify-between hover:bg-gray-50",onClick:()=>G(B),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jx,{className:`h-4 w-4 transition-transform ${f.includes(B)?"rotate-180":""}`}),e.jsx("h3",{className:"font-semibold",children:B}),e.jsxs(q,{variant:"outline",children:[Object.keys(Hi[B]).length," modules"]})]})}),e.jsx(yR,{children:e.jsx("div",{className:"p-3 border-t space-y-3",children:Object.keys(Hi[B]).map(W=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx("div",{className:"font-medium text-sm",children:W}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-3 w-3 text-blue-500"}),e.jsx("span",{className:"text-xs",children:"View"}),e.jsx(yt,{checked:g[B]?.[W]?.view||!1,onCheckedChange:he=>E(B,W,"view",he)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-3 w-3 text-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Edit"}),e.jsx(yt,{checked:g[B]?.[W]?.edit||!1,onCheckedChange:he=>E(B,W,"edit",he)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hw,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-xs",children:"Create"}),e.jsx(yt,{checked:g[B]?.[W]?.create||!1,onCheckedChange:he=>E(B,W,"create",he)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-xs",children:"Delete"}),e.jsx(yt,{checked:g[B]?.[W]?.delete||!1,onCheckedChange:he=>E(B,W,"delete",he)})]})]})]},W))})})]})},B))}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(R,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(R,{onClick:Y,children:"Save Permissions"})]})]})]})})]}),e.jsxs(ot,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsxs(re,{value:"users",className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"Users"]}),e.jsxs(re,{value:"permissions",className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4"}),"Permissions"]}),e.jsxs(re,{value:"access",className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),"Access Control"]}),e.jsxs(re,{value:"visibility",className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Property Visibility"]})]}),e.jsx(ne,{value:"users",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5"}),"User Management"]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Jt,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(H,{placeholder:"Search users...",className:"pl-10",value:t,onChange:B=>s(B.target.value)})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"Filter by role"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Roles"}),e.jsx(P,{value:"admin",children:"Admin"}),e.jsx(P,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(P,{value:"staff",children:"Staff"}),e.jsx(P,{value:"owner",children:"Owner"})]})]})]}),w?e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((B,W)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-300 rounded"}),e.jsx("div",{className:"h-3 w-48 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-6 w-16 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-8 w-16 bg-gray-300 rounded"})]})]},W))}):e.jsxs("div",{className:"space-y-4",children:[Q.map(B=>{const W=B.name||`${B.firstName||""} ${B.lastName||""}`.trim()||B.email,he=W.split(" ").map(Se=>Se[0]).join("").toUpperCase();return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:he}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:W}),e.jsx("p",{className:"text-sm text-gray-600",children:B.email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Role: ",B.role]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:T[B.role],children:B.role}),e.jsx(q,{variant:(B.status||"active")==="active"?"default":"secondary",children:B.status||"active"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>M(B),children:"Edit"}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>V(B),children:[e.jsx(_t,{className:"w-4 h-4 mr-1"}),"Permissions"]})]})]},B.id)}),Q.length===0&&!w&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found matching your filters."})]})]})]})}),e.jsx(ne,{value:"permissions",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5"}),"Global Permission Templates"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Manage Permissions"}),e.jsx("p",{className:"text-blue-800 text-sm",children:'Click the "Permissions" button next to any user in the Users tab to configure their detailed module access. Each user can have granular permissions for View, Edit, Create, and Delete operations across all platform modules.'})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-700 mb-2",children:"Admin Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Full system access"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"User management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"System settings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"All CRUD operations"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Portfolio Manager"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Property management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Financial oversight"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"Limited staff management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No system admin"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-700 mb-2",children:"Staff Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Task management"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Guest services"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{children:"Basic financial view"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No financial edit"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-700 mb-2",children:"Owner Role"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Own properties view"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Financial reports"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{children:"Payout requests"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{children:"No management access"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Total Platform Modules Coverage"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:Object.keys(Hi).map(B=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium",children:B}),e.jsxs("div",{className:"text-xs text-gray-600",children:[Object.keys(Hi[B]).length," modules"]})]},B))})]})]})})]})}),e.jsx(ne,{value:"access",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-5 h-5"}),"User Access & Visibility Manager"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Dashboard Access"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Admin Dashboard"}),e.jsx(q,{className:"bg-red-100 text-red-800",children:"Admin Only"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Financial Dashboard"}),e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"Admin/PM"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Staff Dashboard"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Staff"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Feature Access"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"User Management"}),e.jsx(q,{className:"bg-red-100 text-red-800",children:"Admin Only"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Property CRUD"}),e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"Admin/PM"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Task Creation"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"All Staff"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Data Visibility"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"All Properties"}),e.jsx(q,{className:"bg-red-100 text-red-800",children:"Admin"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Assigned Properties"}),e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"PM/Staff"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Own Properties"}),e.jsx(q,{className:"bg-purple-100 text-purple-800",children:"Owner"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Access Control Matrix"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Feature"}),e.jsx("th",{className:"text-center p-2",children:"Admin"}),e.jsx("th",{className:"text-center p-2",children:"PM"}),e.jsx("th",{className:"text-center p-2",children:"Staff"}),e.jsx("th",{className:"text-center p-2",children:"Owner"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"User Management"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"✗"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"✗"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"✗"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Financial Reports"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"✗"}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"Limited"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Property Management"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"Limited"}),e.jsx("td",{className:"text-center p-2 text-yellow-600",children:"View Only"})]})]})]})})]})]})})]})}),e.jsx(ne,{value:"visibility",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),"Property Visibility Control"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Property Assignment"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Villa Samui Breeze"}),e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"PM: Jane"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Owner: Alice Owner"}),e.jsx("p",{children:"Staff Access: Bob Staff, Carol Manager"})]})]}),e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"Villa Aruna"}),e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"PM: Jane"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"Owner: Alice Owner"}),e.jsx("p",{children:"Staff Access: Bob Staff"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Visibility Rules"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Admin Global Access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Can view all properties"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"PM Property Assignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only assigned properties"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Owner Property Restriction"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only owned properties"})]}),e.jsx(yt,{defaultChecked:!0})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Current Property Access Matrix"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Property"}),e.jsx("th",{className:"text-center p-2",children:"Admin"}),e.jsx("th",{className:"text-center p-2",children:"PM Jane"}),e.jsx("th",{className:"text-center p-2",children:"Staff Bob"}),e.jsx("th",{className:"text-center p-2",children:"Owner Alice"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Samui Breeze"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Aruna"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:"Villa Paradise"}),e.jsx("td",{className:"text-center p-2 text-green-600",children:"✓"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"✗"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"✗"}),e.jsx("td",{className:"text-center p-2 text-red-600",children:"✗"})]})]})]})})]})]})})]})})]}),e.jsx(Ve,{open:l,onOpenChange:o,children:e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Edit User"})}),e.jsx(Wt,{...C,children:e.jsxs("form",{onSubmit:C.handleSubmit(F),className:"space-y-4",children:[e.jsx(de,{control:C.control,name:"name",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Name"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Enter user name",...B})}),e.jsx(xe,{})]})}),e.jsx(de,{control:C.control,name:"email",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Email"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Enter email address",...B})}),e.jsx(xe,{})]})}),e.jsx(de,{control:C.control,name:"role",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Role"}),e.jsxs(te,{onValueChange:B.onChange,defaultValue:B.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select a role"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"admin",children:"Admin"}),e.jsx(P,{value:"portfolio-manager",children:"Portfolio Manager"}),e.jsx(P,{value:"staff",children:"Staff"}),e.jsx(P,{value:"owner",children:"Owner"}),e.jsx(P,{value:"guest",children:"Guest"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:C.control,name:"status",render:({field:B})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Status"}),e.jsxs(te,{onValueChange:B.onChange,defaultValue:B.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select status"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"inactive",children:"Inactive"})]})]}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:A.isPending,children:A.isPending?"Saving...":"Save Changes"})]})]})})]})})]})}const BK=Object.freeze(Object.defineProperty({__proto__:null,default:dv},Symbol.toStringTag,{value:"Module"})),VK=[{id:1,avatar:"/api/placeholder/40/40",firstName:"John",lastName:"Smith",email:"john.smith@example.com",title:"Property Manager",userGroups:["Property Managers","Administrators"],lastLogin:"2 hours ago",phone:"+66 123 456 789",preferredContact:"Email",address:"123 Sukhumvit Road, Bangkok",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!1,canAccessFinance:!0},notifications:{dashboard:!0,mobile:!1,email:!0,sms:!1},listingsAccess:[1,2,3]},{id:2,avatar:"/api/placeholder/40/40",firstName:"Sarah",lastName:"Wilson",email:"sarah.wilson@example.com",title:"Villa Coordinator",userGroups:["Staff"],lastLogin:"1 day ago",phone:"+66 987 654 321",preferredContact:"Phone",address:"456 Patong Beach, Phuket",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!1,canAccessFinance:!1},notifications:{dashboard:!0,mobile:!0,email:!0,sms:!0},listingsAccess:[1,4]},{id:3,avatar:"/api/placeholder/40/40",firstName:"Michael",lastName:"Chen",email:"michael.chen@example.com",title:"Operations Manager",userGroups:["Property Managers"],lastLogin:"3 hours ago",phone:"+66 555 123 456",preferredContact:"Email",address:"789 Chaweng Beach, Koh Samui",permissions:{canViewReports:!0,canManageBookings:!0,canManageUsers:!0,canAccessFinance:!0},notifications:{dashboard:!0,mobile:!1,email:!0,sms:!1},listingsAccess:[2,3,4]}],qK=[{id:1,name:"Villa Samui Breeze",image:"/api/placeholder/100/80"},{id:2,name:"Villa Ocean View",image:"/api/placeholder/100/80"},{id:3,name:"Villa Aruna Demo",image:"/api/placeholder/100/80"},{id:4,name:"Villa Tropical Paradise",image:"/api/placeholder/100/80"}];function UK({users:t,onEditUser:s}){const[r,n]=j.useState(""),a=t.filter(i=>i.firstName.toLowerCase().includes(r.toLowerCase())||i.lastName.toLowerCase().includes(r.toLowerCase())||i.email.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(R,{variant:"outline",size:"sm",className:"text-gray-600",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs(R,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add new"]})]})]}),e.jsxs(ot,{defaultValue:"users",className:"w-full",children:[e.jsxs(it,{className:"grid w-32 grid-cols-2",children:[e.jsx(re,{value:"users",children:"Users"}),e.jsx(re,{value:"groups",children:"Groups"})]}),e.jsx(ne,{value:"users",className:"mt-4",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(H,{placeholder:"Search users...",value:r,onChange:i=>n(i.target.value),className:"pl-10"})]})})})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Groups"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(_n,{className:"h-8 w-8 mr-3",children:[e.jsx(Fl,{src:i.avatar}),e.jsxs(In,{children:[i.firstName[0],i.lastName[0]]})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[i.firstName," ",i.lastName]})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:i.userGroups.map((l,o)=>e.jsx(q,{variant:"secondary",className:"text-xs",children:l},o))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.lastLogin}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>s(i),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Or,{className:"w-4 h-4"})}),e.jsx(R,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-900",children:e.jsx(Er,{className:"w-4 h-4"})})]})})]},i.id))})]})})]})}function zK({user:t,onSave:s,onCancel:r}){const[n,a]=j.useState({...t}),i=()=>{s(n)},l=(c,d)=>{a(u=>({...u,[c]:d}))},o=(c,d,u)=>{a(m=>({...m,[c]:{...m[c],[d]:u}}))};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit User: ",n.firstName," ",n.lastName]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(R,{variant:"outline",onClick:r,children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(R,{onClick:i,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Uu,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs(ot,{defaultValue:"basic",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"basic",children:"Basic Info"}),e.jsx(re,{value:"address",children:"Address"}),e.jsx(re,{value:"permissions",children:"Access Permissions"}),e.jsx(re,{value:"notifications",children:"Notifications"}),e.jsx(re,{value:"listings",children:"Listings Access"})]}),e.jsx(ne,{value:"basic",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs(_n,{className:"h-20 w-20",children:[e.jsx(Fl,{src:n.avatar}),e.jsxs(In,{className:"text-lg",children:[n.firstName[0],n.lastName[0]]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx(H,{value:n.firstName,onChange:c=>l("firstName",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx(H,{value:n.lastName,onChange:c=>l("lastName",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx(H,{value:n.title,onChange:c=>l("title",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(H,{type:"email",value:n.email,onChange:c=>l("email",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx(H,{value:n.phone,onChange:c=>l("phone",c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Contact Method"}),e.jsxs("select",{value:n.preferredContact,onChange:c=>l("preferredContact",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"SMS",children:"SMS"})]})]})]})]})}),e.jsx(ne,{value:"address",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{value:n.address,onChange:c=>l("address",c.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})})}),e.jsx(ne,{value:"permissions",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Access Permissions"}),e.jsx("div",{className:"space-y-3",children:Object.entries(n.permissions).map(([c,d])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:c,checked:d,onChange:u=>o("permissions",c,u.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:c,className:"ml-3 text-sm text-gray-700",children:c.replace(/([A-Z])/g," $1").replace(/^./,u=>u.toUpperCase())})]},c))})]})}),e.jsx(ne,{value:"notifications",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notification Settings"}),e.jsx("div",{className:"space-y-3",children:Object.entries(n.notifications).map(([c,d])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"text-sm text-gray-700",children:[c.charAt(0).toUpperCase()+c.slice(1)," Notifications"]}),e.jsx("button",{type:"button",onClick:()=>o("notifications",c,!d),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${d?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${d?"translate-x-5":"translate-x-0"}`})})]},c))})]})}),e.jsx(ne,{value:"listings",className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Listings Access"}),e.jsx(R,{variant:"outline",size:"sm",children:"Select All"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:qK.map(c=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${n.listingsAccess.includes(c.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{const d=n.listingsAccess.includes(c.id)?n.listingsAccess.filter(u=>u!==c.id):[...n.listingsAccess,c.id];l("listingsAccess",d)},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-16 h-12 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Villa Property"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("input",{type:"checkbox",checked:n.listingsAccess.includes(c.id),onChange:()=>{},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})})]})},c.id))})]})})]})})]})}function s2(){const[t,s]=pr(),[r,n]=j.useState(VK),[a,i]=j.useState(null),l=d=>{i(d),s("/user-management/edit")},o=d=>{n(u=>u.map(m=>m.id===d.id?d:m)),s("/user-management"),i(null)},c=()=>{s("/user-management"),i(null)};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs(Cj,{children:[e.jsx(Ee,{path:"/user-management/edit",children:a&&e.jsx(zK,{user:a,onSave:o,onCancel:c})}),e.jsx(Ee,{children:e.jsx(UK,{users:r,onEditUser:l})})]})})}function GK(){const[t,s]=j.useState("2025"),r=[{id:1,owner:"Alice Owner",property:"Villa Samui Breeze",currentRevenue:85e3,targetRevenue:12e4,progress:71,upgradePlan:"Premium Package",status:"in-progress",deadline:"2025-06-30"},{id:2,owner:"Bob Johnson",property:"Villa Aruna",currentRevenue:45e3,targetRevenue:6e4,progress:75,upgradePlan:"Standard Plus",status:"on-track",deadline:"2025-08-15"},{id:3,owner:"Carol Smith",property:"Villa Paradise",currentRevenue:25e3,targetRevenue:8e4,progress:31,upgradePlan:"Full Renovation",status:"at-risk",deadline:"2025-12-31"}],n=[{name:"Premium Package",features:["Professional Photography","Enhanced Listings","Concierge Service"],estimatedIncrease:"40-60%",cost:"$5,000"},{name:"Standard Plus",features:["Updated Amenities","Marketing Boost","Guest Experience"],estimatedIncrease:"25-35%",cost:"$3,000"},{name:"Full Renovation",features:["Complete Makeover","Premium Furnishing","Smart Home"],estimatedIncrease:"80-120%",cost:"$15,000"}],a=i=>{switch(i){case"on-track":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"at-risk":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(dr,{className:"w-8 h-8"}),"Owner Targets & Upgrades"]}),e.jsx("p",{className:"text-gray-600",children:"Track revenue targets and upgrade progress for property owners"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{className:"w-32",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"2024",children:"2024"}),e.jsx(P,{value:"2025",children:"2025"}),e.jsx(P,{value:"2026",children:"2026"})]})]}),e.jsxs(R,{children:[e.jsx(dr,{className:"w-4 h-4 mr-2"}),"Set New Target"]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"targets",children:"Revenue Targets"}),e.jsx(re,{value:"upgrades",children:"Upgrade Plans"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Owners"}),e.jsx("p",{className:"text-2xl font-bold",children:"12"})]}),e.jsx(st,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On Track"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"8"})]}),e.jsx(Ot,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"3"})]}),e.jsx(dr,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:"67%"})]}),e.jsx(He,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Owner Progress Overview"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tt,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.owner}),e.jsx("p",{className:"text-sm text-gray-600",children:i.property})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(q,{className:a(i.status),children:i.status.replace("-"," ")}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Due: ",i.deadline]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Revenue"}),e.jsxs("p",{className:"font-semibold",children:["$",i.currentRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Target Revenue"}),e.jsxs("p",{className:"font-semibold",children:["$",i.targetRevenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Upgrade Plan"}),e.jsx("p",{className:"font-semibold",children:i.upgradePlan})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[i.progress,"%"]})]}),e.jsx(Gn,{value:i.progress,className:"h-2"})]})]},i.id))})})]})]}),e.jsx(ne,{value:"targets",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Revenue Targets Management"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(H,{placeholder:"Owner name"}),e.jsx(H,{placeholder:"Target amount",type:"number"}),e.jsx(H,{placeholder:"Deadline",type:"date"}),e.jsx(R,{children:"Set Target"})]}),e.jsx("div",{className:"space-y-3",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.owner}),e.jsx("p",{className:"text-sm text-gray-600",children:i.property})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",i.targetRevenue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:i.deadline})]}),e.jsx(Gn,{value:i.progress,className:"w-24 h-2"}),e.jsx(R,{variant:"outline",size:"sm",children:"Edit"})]})]},i.id))})]})})]})}),e.jsx(ne,{value:"upgrades",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Upgrade Plans & Packages"})}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((i,l)=>e.jsxs(O,{className:"border-2",children:[e.jsxs(_,{children:[e.jsx($,{className:"text-lg",children:i.name}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.cost})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expected Increase"}),e.jsx("p",{className:"font-semibold text-green-600",children:i.estimatedIncrease})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Features Included:"}),e.jsx("ul",{className:"space-y-1",children:i.features.map((o,c)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),o]},c))})]}),e.jsx(R,{className:"w-full mt-4",children:"Select Plan"})]})})]},l))})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Target Achievement Rate"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"67%"}),e.jsx("p",{className:"text-gray-600",children:"Average Progress"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q1 2025"}),e.jsx("span",{className:"font-semibold",children:"72%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q2 2025"}),e.jsx("span",{className:"font-semibold",children:"68%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Q3 2025"}),e.jsx("span",{className:"font-semibold",children:"61%"})]})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Upgrade ROI Analysis"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"156%"}),e.jsx("p",{className:"text-gray-600",children:"Average ROI"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Premium Package"}),e.jsx("span",{className:"font-semibold text-green-600",children:"180%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Standard Plus"}),e.jsx("span",{className:"font-semibold text-green-600",children:"145%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Full Renovation"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"142%"})]})]})]})})]})]})})]})]})}function uv(){const[t,s]=j.useState(""),[r,n]=j.useState("all"),[a,i]=j.useState("all"),[l,o]=j.useState("today"),c=[{id:1,timestamp:"2025-01-21 15:42:33",user:"John Admin",userRole:"admin",action:"USER_LOGIN",entity:"System",details:"Admin user logged in successfully",ipAddress:"192.168.1.100",severity:"info"},{id:2,timestamp:"2025-01-21 15:40:15",user:"Jane Manager",userRole:"portfolio-manager",action:"PROPERTY_UPDATE",entity:"Villa Samui Breeze",details:"Updated property pricing from $150/night to $175/night",ipAddress:"192.168.1.101",severity:"medium"},{id:3,timestamp:"2025-01-21 15:35:22",user:"Bob Staff",userRole:"staff",action:"TASK_COMPLETED",entity:"Pool Cleaning Task #45",details:"Pool cleaning task marked as completed with photos uploaded",ipAddress:"192.168.1.102",severity:"low"},{id:4,timestamp:"2025-01-21 15:30:08",user:"John Admin",userRole:"admin",action:"USER_PERMISSIONS_MODIFIED",entity:"Staff User: Carol Wilson",details:"Granted property management permissions to staff user",ipAddress:"192.168.1.100",severity:"high"},{id:5,timestamp:"2025-01-21 15:25:41",user:"System",userRole:"system",action:"BOOKING_CREATED",entity:"Booking #BK-2025-0156",details:"New booking created via Hostaway API integration",ipAddress:"API",severity:"medium"},{id:6,timestamp:"2025-01-21 15:20:17",user:"Alice Owner",userRole:"owner",action:"PAYOUT_REQUESTED",entity:"Owner Payout #PO-2025-0089",details:"Requested payout of $2,450.00 for December earnings",ipAddress:"192.168.1.103",severity:"medium"},{id:7,timestamp:"2025-01-21 15:15:52",user:"John Admin",userRole:"admin",action:"FINANCE_RESET",entity:"User Balance: Bob Johnson",details:"Admin reset user balance from $1,200 to $0 - Reason: Account reconciliation",ipAddress:"192.168.1.100",severity:"critical"}],d=x=>{switch(x){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";case"info":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},u=x=>{switch(x){case"admin":return"bg-red-100 text-red-800";case"portfolio-manager":return"bg-blue-100 text-blue-800";case"staff":return"bg-green-100 text-green-800";case"owner":return"bg-purple-100 text-purple-800";case"system":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=x=>{switch(x){case"USER_LOGIN":return e.jsx(It,{className:"w-4 h-4"});case"PROPERTY_UPDATE":return e.jsx($t,{className:"w-4 h-4"});case"TASK_COMPLETED":return e.jsx(ks,{className:"w-4 h-4"});case"USER_PERMISSIONS_MODIFIED":return e.jsx(_t,{className:"w-4 h-4"});case"FINANCE_RESET":return e.jsx(_t,{className:"w-4 h-4"});default:return e.jsx(ks,{className:"w-4 h-4"})}},h={totalLogs:c.length,criticalActions:c.filter(x=>x.severity==="critical").length,adminActions:c.filter(x=>x.userRole==="admin").length,systemActions:c.filter(x=>x.userRole==="system").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(ks,{className:"w-8 h-8"}),"Activity Logs"]}),e.jsx("p",{className:"text-gray-600",children:"Monitor system activities and user actions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Export Logs"]}),e.jsxs(R,{children:[e.jsx(ja,{className:"w-4 h-4 mr-2"}),"Advanced Filter"]})]})]}),e.jsxs(ot,{defaultValue:"logs",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"logs",children:"Activity Logs"}),e.jsx(re,{value:"critical",children:"Critical Actions"}),e.jsx(re,{value:"analytics",children:"Analytics"}),e.jsx(re,{value:"settings",children:"Log Settings"})]}),e.jsxs(ne,{value:"logs",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Logs"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalLogs})]}),e.jsx(ks,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Critical Actions"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:h.criticalActions})]}),e.jsx(_t,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admin Actions"}),e.jsx("p",{className:"text-2xl font-bold",children:h.adminActions})]}),e.jsx(It,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"System Actions"}),e.jsx("p",{className:"text-2xl font-bold",children:h.systemActions})]}),e.jsx(ks,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(H,{placeholder:"Search logs...",className:"pl-10",value:t,onChange:x=>s(x.target.value)})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Filter by user"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Users"}),e.jsx(P,{value:"admin",children:"Admin Users"}),e.jsx(P,{value:"portfolio-manager",children:"Portfolio Managers"}),e.jsx(P,{value:"staff",children:"Staff"}),e.jsx(P,{value:"owner",children:"Owners"}),e.jsx(P,{value:"system",children:"System"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Filter by action"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Actions"}),e.jsx(P,{value:"USER_LOGIN",children:"User Login"}),e.jsx(P,{value:"PROPERTY_UPDATE",children:"Property Update"}),e.jsx(P,{value:"TASK_COMPLETED",children:"Task Completed"}),e.jsx(P,{value:"USER_PERMISSIONS_MODIFIED",children:"Permissions Modified"}),e.jsx(P,{value:"FINANCE_RESET",children:"Finance Reset"})]})]}),e.jsxs(te,{value:l,onValueChange:o,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Date range"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"today",children:"Today"}),e.jsx(P,{value:"week",children:"This Week"}),e.jsx(P,{value:"month",children:"This Month"}),e.jsx(P,{value:"year",children:"This Year"})]})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent Activity"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:m(x.action)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium",children:x.action.replace(/_/g," ")}),e.jsx(q,{className:d(x.severity),children:x.severity})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.details}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(It,{className:"w-3 h-3"}),x.user]}),e.jsx(q,{className:u(x.userRole),variant:"outline",children:x.userRole}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"}),x.timestamp]}),e.jsxs("span",{children:["IP: ",x.ipAddress]})]})]})]}),e.jsx(q,{variant:"outline",className:"text-xs",children:x.entity})]})},x.id))})})]})]}),e.jsx(ne,{value:"critical",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5 text-red-500"}),"Critical Actions Requiring Attention"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.filter(x=>x.severity==="critical"||x.severity==="high").map(x=>e.jsx("div",{className:"border-l-4 border-red-500 bg-red-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-medium text-red-800",children:x.action.replace(/_/g," ")}),e.jsx(q,{className:"bg-red-200 text-red-800",children:x.severity})]}),e.jsx("p",{className:"text-sm text-red-700 mb-2",children:x.details}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-red-600",children:[e.jsxs("span",{children:["User: ",x.user]}),e.jsxs("span",{children:["Entity: ",x.entity]}),e.jsxs("span",{children:["Time: ",x.timestamp]})]})]}),e.jsx(R,{variant:"outline",size:"sm",children:"Review"})]})},x.id))})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Activity by User Role"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Admin"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"60%"}})}),e.jsx("span",{className:"text-sm",children:"3"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Portfolio Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Staff"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Owner"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"System"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Activity by Severity"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Critical"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:h.criticalActions})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"High"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Medium"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"43%"}})}),e.jsx("span",{className:"text-sm",children:"3"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Low"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Info"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"14%"}})}),e.jsx("span",{className:"text-sm",children:"1"})]})]})]})})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Logging Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Log Retention"}),e.jsxs(te,{defaultValue:"90",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"30",children:"30 days"}),e.jsx(P,{value:"90",children:"90 days"}),e.jsx(P,{value:"180",children:"180 days"}),e.jsx(P,{value:"365",children:"1 year"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Auto Export"}),e.jsxs(te,{defaultValue:"monthly",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"disabled",children:"Disabled"}),e.jsx(P,{value:"weekly",children:"Weekly"}),e.jsx(P,{value:"monthly",children:"Monthly"}),e.jsx(P,{value:"quarterly",children:"Quarterly"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Alert Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Critical Action Alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed Login Attempts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Permission Changes"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Financial Actions"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx(R,{children:"Save Settings"})]})]})})]})]})}const HK=Object.freeze(Object.defineProperty({__proto__:null,default:uv},Symbol.toStringTag,{value:"Module"})),KK=Qt({name:Ne().min(1,"Service name is required"),apiKey:Ne().min(1,"API key is required"),apiSecret:Ne().optional(),baseUrl:Ne().url().optional(),isActive:Vr().default(!0),description:Ne().optional()}),WK=[{service:"lodgify",name:"Lodgify Property Management",icon:Us,color:"bg-amber-100 text-amber-700",description:"Sync properties, bookings, and financial data from Lodgify",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Lodgify API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.lodgify.com",type:"text"}]},{service:"makcorps",name:"Makcorps Hotel Pricing",icon:Ut,color:"bg-indigo-100 text-indigo-700",description:"Real-time hotel pricing from 200+ OTAs (Booking.com, Expedia, Agoda, etc.)",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Makcorps API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.makcorps.com",type:"text"}]},{service:"rentcast",name:"RentCast Property Data",icon:Us,color:"bg-teal-100 text-teal-700",description:"140M+ property records, rental estimates (AVM), valuations, market data & trends",fields:[{name:"apiKey",label:"API Key",placeholder:"Your RentCast API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.rentcast.io/v1",type:"text"}]},{service:"stripe",name:"Stripe Payment Processing",icon:Dr,color:"bg-purple-100 text-purple-700",description:"Process payments and manage subscriptions",fields:[{name:"apiKey",label:"Publishable Key",placeholder:"pk_live_...",type:"text"},{name:"apiSecret",label:"Secret Key",placeholder:"sk_live_...",type:"password"}]},{service:"hostaway",name:"Hostaway Property Management",icon:Us,color:"bg-blue-100 text-blue-700",description:"Sync properties, bookings, and guest data",fields:[{name:"apiKey",label:"API Key",placeholder:"Your Hostaway API key",type:"password"},{name:"baseUrl",label:"API Base URL",placeholder:"https://api.hostaway.com",type:"text"}]},{service:"openai",name:"OpenAI AI Assistant",icon:hn,color:"bg-green-100 text-green-700",description:"AI-powered recommendations and automation",fields:[{name:"apiKey",label:"API Key",placeholder:"sk-...",type:"password"}]},{service:"twilio",name:"Twilio SMS Notifications",icon:Hu,color:"bg-red-100 text-red-700",description:"Send SMS notifications to guests and staff",fields:[{name:"apiKey",label:"Account SID",placeholder:"AC...",type:"text"},{name:"apiSecret",label:"Auth Token",placeholder:"Your auth token",type:"password"}]}];function bR(){const[t,s]=j.useState(null),[r,n]=j.useState({}),[a,i]=j.useState(null),{toast:l}=Xe(),o=ut(),c=Ft({resolver:es(KK),defaultValues:{isActive:!0}}),{data:d=[],isLoading:u}=ge({queryKey:["/api/admin/api-connections"],queryFn:()=>fe("GET","/api/admin/api-connections")}),m=Array.isArray(d)?d:[],h=Ce({mutationFn:S=>fe("PUT",`/api/admin/api-connections/${S.service}`,S.config),onSuccess:(S,w)=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]}),s(null),c.reset(),l({title:"Connection Updated",description:`${w.service} configuration has been saved successfully.`})},onError:S=>{l({title:"Update Failed",description:S.message||"Failed to update API connection",variant:"destructive"})}}),x=Ce({mutationFn:S=>fe("POST",`/api/admin/api-connections/${S}/test`),onSuccess:(S,w)=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]}),i(null),l({title:"Connection Test Successful",description:`${w} API is working correctly.`})},onError:(S,w)=>{i(null),l({title:"Connection Test Failed",description:`${w}: ${S.message||"Connection test failed"}`,variant:"destructive"})}}),g=Ce({mutationFn:S=>fe("PATCH",`/api/admin/api-connections/${S.service}/toggle`,{isActive:S.isActive}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/admin/api-connections"]})}}),p=S=>{const w=m.find(C=>C.service===S.service);s(S.service),c.reset({name:S.name,isActive:w?.isActive??!0,description:S.description})},f=S=>{i(S),x.mutate(S)},v=S=>{n(w=>({...w,[S]:!w[S]}))},b=S=>{if(!S)return e.jsx(br,{className:"h-4 w-4 text-gray-400"});switch(S.status){case"connected":return e.jsx(Me,{className:"h-4 w-4 text-green-500"});case"error":return e.jsx(br,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Et,{className:"h-4 w-4 text-yellow-500"})}},y=S=>{if(!S)return e.jsx(q,{variant:"secondary",children:"Not Configured"});switch(S.status){case"connected":return e.jsx(q,{variant:"default",className:"bg-green-100 text-green-700",children:"Connected"});case"error":return e.jsx(q,{variant:"destructive",children:"Error"});default:return e.jsx(q,{variant:"secondary",children:"Disconnected"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(Lt,{className:"h-8 w-8 text-blue-600"}),"API Connections"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure third-party integrations for your property management system"})]})}),e.jsxs($n,{children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsxs(Fn,{children:[e.jsx("strong",{children:"Security Notice:"})," All API keys are encrypted and stored securely. Only administrators can view and modify these settings."]})]}),e.jsxs(ot,{defaultValue:"services",className:"space-y-6",children:[e.jsxs(it,{children:[e.jsx(re,{value:"services",children:"Service Connections"}),e.jsx(re,{value:"logs",children:"Connection Logs"}),e.jsx(re,{value:"settings",children:"Global Settings"})]}),e.jsx(ne,{value:"services",children:e.jsx("div",{className:"grid gap-6",children:WK.map(S=>{const w=m.find(k=>k.service===S.service),C=S.icon;return e.jsxs(O,{className:"relative",children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${S.color}`,children:e.jsx(C,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs($,{className:"flex items-center gap-2",children:[S.name,b(w)]}),e.jsx(Te,{children:S.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y(w),e.jsx(yt,{checked:w?.isActive??!1,onCheckedChange:k=>g.mutate({service:S.service,isActive:k}),disabled:!w?.hasCredentials})]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:w?.hasCredentials?`Last tested: ${w.lastTested||"Never"}`:"No credentials configured"}),e.jsxs("div",{className:"flex gap-2",children:[w?.hasCredentials&&e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>f(S.service),disabled:a===S.service,children:[e.jsx(ep,{className:"h-4 w-4 mr-1"}),a===S.service?"Testing...":"Test"]}),e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>p(S),children:[e.jsx(ZT,{className:"h-4 w-4 mr-1"}),"Configure"]})}),e.jsxs(qe,{className:"sm:max-w-md",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Configure ",S.name]}),e.jsxs(Pt,{children:["Enter your API credentials for ",S.name]})]}),e.jsx(Wt,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(k=>h.mutate({service:S.service,config:k})),className:"space-y-4",children:[S.fields.map(k=>e.jsx(de,{control:c.control,name:k.name,render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:k.label}),e.jsx(ce,{children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{type:k.type==="password"&&!r[k.name]?"password":"text",placeholder:k.placeholder,...A}),k.type==="password"&&e.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>v(k.name),children:r[k.name]?e.jsx(YT,{className:"h-4 w-4"}):e.jsx($t,{className:"h-4 w-4"})})]})}),e.jsx(xe,{})]})},k.name)),e.jsx(de,{control:c.control,name:"isActive",render:({field:k})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{children:"Enable Service"}),e.jsx(Kt,{children:"Activate this integration for your organization"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:k.value,onCheckedChange:k.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(Yt,{asChild:!0,children:e.jsx(R,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(R,{type:"submit",disabled:h.isPending,children:h.isPending?"Saving...":"Save Configuration"})]})]})})]})]})]})]})})]},S.service)})})}),e.jsx(ne,{value:"logs",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Connection Activity Logs"}),e.jsx(Te,{children:"Monitor API connection status and error logs"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ut,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Connection logs will appear here when services are tested or used"})]})})]})}),e.jsx(ne,{value:"settings",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Global API Settings"}),e.jsx(Te,{children:"Configure global settings for all API integrations"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Automatic Testing"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Automatically test connections every 24 hours"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Error Notifications"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Send email notifications when connections fail"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("div",{className:"font-medium",children:"Debug Logging"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable detailed logging for troubleshooting"})]}),e.jsx(yt,{})]})]})]})})]})]})}const YK=Object.freeze(Object.defineProperty({__proto__:null,default:bR},Symbol.toStringTag,{value:"Module"})),QK=Qt({logoUrl:Ne().url().optional().or(md("")),primaryColor:Ne().min(7,"Must be a valid hex color").optional().or(md("")),secondaryColor:Ne().min(7,"Must be a valid hex color").optional().or(md("")),reportTheme:Cs(["modern","classic","minimal","corporate"]).optional(),customDomain:Ne().url().optional().or(md(""))}),XK=Qt({mode:Cs(["full","summary","financial-only","limited"])});function ZK(){const{toast:t}=Xe(),s=ut(),[r,n]=j.useState(""),{data:a=[],isLoading:i}=ge({queryKey:["/api/admin/users"],staleTime:2*60*1e3}),l=a.filter(p=>p.role==="owner"),{data:o,isLoading:c}=ge({queryKey:["/api/owner-settings",r],enabled:!!r,staleTime:1*60*1e3}),d=Ft({resolver:es(QK),defaultValues:{logoUrl:"",primaryColor:"#3b82f6",secondaryColor:"#06b6d4",reportTheme:"modern",customDomain:""}}),u=Ft({resolver:es(XK),defaultValues:{mode:"summary"}});j.useState(()=>{o?.customBranding&&d.reset({logoUrl:o.customBranding.logoUrl||"",primaryColor:o.customBranding.primaryColor||"#3b82f6",secondaryColor:o.customBranding.secondaryColor||"#06b6d4",reportTheme:o.customBranding.reportTheme||"modern",customDomain:o.customBranding.customDomain||""}),o?.transparencyMode&&u.reset({mode:o.transparencyMode})});const m=Ce({mutationFn:async p=>fe("PATCH",`/api/owner-settings/${r}/branding`,p),onSuccess:()=>{t({title:"Branding Updated",description:"Custom branding settings have been saved successfully."}),s.invalidateQueries({queryKey:["/api/owner-settings"]})},onError:p=>{t({title:"Update Failed",description:p.message||"Failed to update branding settings",variant:"destructive"})}}),h=Ce({mutationFn:async p=>fe("PATCH",`/api/owner-settings/${r}/transparency`,p),onSuccess:()=>{t({title:"Transparency Updated",description:"Owner transparency mode has been updated successfully."}),s.invalidateQueries({queryKey:["/api/owner-settings"]})},onError:p=>{t({title:"Update Failed",description:p.message||"Failed to update transparency settings",variant:"destructive"})}}),x=p=>{m.mutate(p)},g=p=>{h.mutate(p)};return i?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_s,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Organization Branding"}),e.jsx("p",{className:"text-gray-600",children:"Manage custom branding and transparency settings for property owners"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5"}),"Select Owner"]}),e.jsx(Te,{children:"Choose a property owner to configure their branding and transparency settings"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"owner-select",children:"Property Owner"}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select an owner to configure..."})}),e.jsx(ee,{children:l.map(p=>e.jsx(P,{value:p.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:p.username}),e.jsx(q,{variant:"secondary",className:"ml-2",children:p.email})]})},p.id))})]})]}),l.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(st,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No property owners found in the system."}),e.jsx("p",{className:"text-sm",children:"Owners will appear here once they are created."})]})]})})]}),r&&e.jsxs(ot,{defaultValue:"branding",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-3",children:[e.jsxs(re,{value:"branding",className:"flex items-center gap-2",children:[e.jsx(JT,{className:"w-4 h-4"}),"Custom Branding"]}),e.jsxs(re,{value:"transparency",className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),"Transparency"]}),e.jsxs(re,{value:"preview",className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),"Preview"]})]}),e.jsx(ne,{value:"branding",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Custom Branding Configuration"}),e.jsx(Te,{children:"Customize the visual appearance for this owner's reports and documents"})]}),e.jsx(D,{children:c?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):e.jsx(Wt,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(x),className:"space-y-6",children:[e.jsx(de,{control:d.control,name:"logoUrl",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Company Logo URL"}),e.jsx(ce,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{placeholder:"https://example.com/logo.png",...p}),e.jsx(R,{type:"button",variant:"outline",size:"sm",children:e.jsx(Vn,{className:"w-4 h-4"})})]})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:d.control,name:"primaryColor",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Primary Brand Color"}),e.jsx(ce,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{type:"color",className:"w-16 h-10",...p}),e.jsx(H,{placeholder:"#3b82f6",...p})]})}),e.jsx(xe,{})]})}),e.jsx(de,{control:d.control,name:"secondaryColor",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Secondary Brand Color"}),e.jsx(ce,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{type:"color",className:"w-16 h-10",...p}),e.jsx(H,{placeholder:"#06b6d4",...p})]})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:d.control,name:"reportTheme",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Report Theme"}),e.jsxs(te,{onValueChange:p.onChange,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Choose a report theme"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"modern",children:"Modern"}),e.jsx(P,{value:"classic",children:"Classic"}),e.jsx(P,{value:"minimal",children:"Minimal"}),e.jsx(P,{value:"corporate",children:"Corporate"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:d.control,name:"customDomain",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Custom Domain (Optional)"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"https://reports.yourcompany.com",...p})}),e.jsx(xe,{})]})}),e.jsx(R,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?"Saving...":"Save Branding Settings"})]})})})]})}),e.jsx(ne,{value:"transparency",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Owner Transparency Settings"}),e.jsx(Te,{children:"Control what financial and operational information this owner can access"})]}),e.jsx(D,{children:e.jsx(Wt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(g),className:"space-y-6",children:[e.jsx(de,{control:u.control,name:"mode",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Transparency Level"}),e.jsxs(te,{onValueChange:p.onChange,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select transparency level"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"full",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Full Transparency"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete access to all financial and operational data"})]})}),e.jsx(P,{value:"summary",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Summary Reports"}),e.jsx("div",{className:"text-sm text-gray-500",children:"High-level summaries and key metrics only"})]})}),e.jsx(P,{value:"financial-only",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Financial Only"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Access to financial data, limited operational details"})]})}),e.jsx(P,{value:"limited",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:"Limited Access"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Basic property status and essential information only"})]})})]})]}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Transparency Level Details"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Full:"})," Complete financial reports, task details, guest information"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Summary:"})," Monthly summaries, key performance indicators, basic metrics"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Financial Only:"})," Revenue, expenses, payouts - no operational details"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Limited:"})," Property status, basic booking information, essential notifications"]})]})]}),e.jsx(R,{type:"submit",className:"w-full",disabled:h.isPending,children:h.isPending?"Updating...":"Update Transparency Settings"})]})})})]})}),e.jsx(ne,{value:"preview",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Branding Preview"}),e.jsx(Te,{children:"Preview how the custom branding will appear in owner reports and documents"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",style:{borderColor:d.watch("primaryColor")||"#3b82f6"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d.watch("logoUrl")?e.jsx("img",{src:d.watch("logoUrl"),alt:"Company Logo",className:"h-12 w-auto",onError:p=>{p.target.style.display="none"}}):e.jsx("div",{className:"h-12 w-24 rounded flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:d.watch("primaryColor")||"#3b82f6"},children:"LOGO"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Monthly Property Report"}),e.jsx("p",{className:"text-gray-600",children:"December 2024"})]})]}),e.jsxs(q,{style:{backgroundColor:d.watch("secondaryColor")||"#06b6d4",color:"white"},children:[d.watch("reportTheme")||"Modern"," Theme"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Revenue"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:d.watch("primaryColor")||"#3b82f6"},children:"฿128,500"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Occupancy"}),e.jsx("p",{className:"text-2xl font-bold",style:{color:d.watch("secondaryColor")||"#06b6d4"},children:"85%"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Net Profit"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"฿89,200"})]})]}),d.watch("customDomain")&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Custom Domain:"})," ",d.watch("customDomain")]})})]}),e.jsx("div",{className:"text-center text-gray-500 text-sm",children:"This is a preview of how your branding will appear in owner reports and documents. Save your settings to apply these changes."})]})})]})})]})]})}const r2=[{code:"THA",name:"Thailand"},{code:"USA",name:"United States"},{code:"GBR",name:"United Kingdom"},{code:"SGP",name:"Singapore"},{code:"MYS",name:"Malaysia"},{code:"IDN",name:"Indonesia"},{code:"VNM",name:"Vietnam"},{code:"PHL",name:"Philippines"}],Cg=[{value:"contract",label:"Rental Contract"},{value:"deposit_rules",label:"Deposit Rules"},{value:"terms_conditions",label:"Terms & Conditions"},{value:"privacy_policy",label:"Privacy Policy"},{value:"cancellation_policy",label:"Cancellation Policy"},{value:"house_rules",label:"House Rules"}];function JK(){const[t,s]=j.useState(""),[r,n]=j.useState(""),[a,i]=j.useState(!1),[l,o]=j.useState(null),[c,d]=j.useState({countryCode:"",docType:"",templateText:""}),{toast:u}=Xe(),m=ut(),{data:h=[],isLoading:x}=ge({queryKey:["/api/legal-templates",t,r],queryFn:()=>{const N=new URLSearchParams;return t&&N.append("countryCode",t),r&&N.append("docType",r),fe("GET",`/api/legal-templates?${N.toString()}`).then(M=>M.json())}}),{data:g=[]}=ge({queryKey:["/api/legal-templates/countries"],queryFn:()=>fe("GET","/api/legal-templates/countries").then(N=>N.json())}),{data:p=[]}=ge({queryKey:["/api/legal-templates/doc-types"],queryFn:()=>fe("GET","/api/legal-templates/doc-types").then(N=>N.json())}),f=Ce({mutationFn:N=>fe("POST","/api/legal-templates",{body:N}).then(M=>M.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),m.invalidateQueries({queryKey:["/api/legal-templates/countries"]}),m.invalidateQueries({queryKey:["/api/legal-templates/doc-types"]}),u({title:"Success",description:"Legal template created successfully"}),i(!1),y()},onError:()=>{u({title:"Error",description:"Failed to create legal template",variant:"destructive"})}}),v=Ce({mutationFn:({id:N,...M})=>fe("PUT",`/api/legal-templates/${N}`,{body:M}).then(F=>F.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),u({title:"Success",description:"Legal template updated successfully"}),i(!1),o(null),y()},onError:()=>{u({title:"Error",description:"Failed to update legal template",variant:"destructive"})}}),b=Ce({mutationFn:N=>fe("DELETE",`/api/legal-templates/${N}`).then(M=>M.json()),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/legal-templates"]}),m.invalidateQueries({queryKey:["/api/legal-templates/countries"]}),m.invalidateQueries({queryKey:["/api/legal-templates/doc-types"]}),u({title:"Success",description:"Legal template deleted successfully"})},onError:()=>{u({title:"Error",description:"Failed to delete legal template",variant:"destructive"})}}),y=()=>{d({countryCode:"",docType:"",templateText:""}),o(null)},S=N=>{if(N.preventDefault(),!c.countryCode||!c.docType||!c.templateText){u({title:"Error",description:"All fields are required",variant:"destructive"});return}l?v.mutate({id:l.id,...c}):f.mutate(c)},w=N=>{o(N),d({countryCode:N.countryCode,docType:N.docType,templateText:N.templateText}),i(!0)},C=N=>{confirm("Are you sure you want to delete this legal template?")&&b.mutate(N)},k=N=>r2.find(M=>M.code===N)?.name||N,A=N=>Cg.find(M=>M.value===N)?.label||N;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Legal Templates Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage country-specific legal documents and contract templates"})]}),e.jsxs(Ve,{open:a,onOpenChange:i,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{onClick:y,children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Template"]})}),e.jsxs(qe,{className:"max-w-4xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:l?"Edit Legal Template":"Create Legal Template"}),e.jsx(Pt,{children:l?"Update the legal template details":"Create a new country-specific legal template"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"countryCode",children:"Country"}),e.jsxs(te,{value:c.countryCode,onValueChange:N=>d(M=>({...M,countryCode:N})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select country"})}),e.jsx(ee,{children:r2.map(N=>e.jsxs(P,{value:N.code,children:[N.name," (",N.code,")"]},N.code))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"docType",children:"Document Type"}),e.jsxs(te,{value:c.docType,onValueChange:N=>d(M=>({...M,docType:N})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select document type"})}),e.jsx(ee,{children:Cg.map(N=>e.jsx(P,{value:N.value,children:N.label},N.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"templateText",children:"Template Content"}),e.jsx(nt,{id:"templateText",value:c.templateText,onChange:N=>d(M=>({...M,templateText:N.target.value})),placeholder:"Enter the legal template text...",className:"min-h-[300px]"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:f.isPending||v.isPending,children:l?"Update Template":"Create Template"})]})]})]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(it,{children:[e.jsx(re,{value:"overview",children:"📊 Overview"}),e.jsx(re,{value:"templates",children:"📄 Templates"}),e.jsx(re,{value:"countries",children:"🌍 Countries"})]}),e.jsx(ne,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Templates"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:h.length})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Countries"}),e.jsx(sa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:g.length})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Document Types"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:p.length})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Recent Updates"}),e.jsx(We,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.filter(N=>new Date(N.createdAt)>new Date(Date.now()-7*24*60*60*1e3)).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This week"})]})]})]})}),e.jsxs(ne,{value:"templates",className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"Filter by country"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All countries"}),g.map(N=>e.jsx(P,{value:N,children:k(N)},N))]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"Filter by document type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All document types"}),p.map(N=>e.jsx(P,{value:N,children:A(N)},N))]})]})]}),x?e.jsx("div",{className:"text-center py-8",children:"Loading templates..."}):e.jsxs("div",{className:"grid gap-4",children:[h.map(N=>e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"text-lg",children:A(N.docType)}),e.jsx(q,{variant:"secondary",children:k(N.countryCode)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>w(N),children:e.jsx(Or,{className:"w-4 h-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>C(N.id),disabled:b.isPending,children:e.jsx(Er,{className:"w-4 h-4"})})]})]}),e.jsxs(Te,{children:["Created: ",new Date(N.createdAt).toLocaleDateString()]})]}),e.jsx(D,{children:e.jsxs("div",{className:"bg-muted p-4 rounded-md",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Template Preview:"}),e.jsx("div",{className:"text-sm max-h-32 overflow-y-auto",children:N.templateText.length>200?`${N.templateText.substring(0,200)}...`:N.templateText})]})})]},N.id)),h.length===0&&e.jsx(O,{children:e.jsxs(D,{className:"text-center py-8",children:[e.jsx(dt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No legal templates found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first template to get started"})]})})]})]}),e.jsx(ne,{value:"countries",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.map(N=>{const M=h.filter(F=>F.countryCode===N);return e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(sa,{className:"w-5 h-5"}),k(N)]}),e.jsxs(Te,{children:[M.length," template(s) available"]})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-2",children:Cg.map(F=>{const I=M.some(V=>V.docType===F.value);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:F.label}),e.jsx(q,{variant:I?"default":"secondary",children:I?"Available":"Missing"})]},F.value)})})})]},N)}),g.length===0&&e.jsx(O,{className:"col-span-full",children:e.jsxs(D,{className:"text-center py-8",children:[e.jsx(sa,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No countries configured"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add legal templates to see countries here"})]})})]})})]})]})}function eW(){const[t,s]=j.useState(!1),[r,n]=j.useState(!1),[a,i]=j.useState(null),[l,o]=j.useState(!1),[c,d]=j.useState("all"),[u,m]=j.useState("all"),[h,x]=j.useState(""),[g,p]=j.useState([]),{toast:f}=Xe(),v=ut(),{data:b=[],isLoading:y}=ge({queryKey:["/api/marketing-packs"]}),{data:S=[]}=ge({queryKey:["/api/properties"]}),{data:w={}}=ge({queryKey:["/api/marketing-packs/analytics"]}),C=Ce({mutationFn:E=>fe("POST","/api/marketing-packs",E),onSuccess:()=>{f({title:"Success",description:"Marketing pack created successfully"}),v.invalidateQueries({queryKey:["/api/marketing-packs"]}),s(!1)},onError:()=>{f({title:"Error",description:"Failed to create marketing pack",variant:"destructive"})}}),k=Ce({mutationFn:E=>fe("DELETE",`/api/marketing-packs/${E}`),onSuccess:()=>{f({title:"Success",description:"Marketing pack deleted successfully"}),v.invalidateQueries({queryKey:["/api/marketing-packs"]})},onError:()=>{f({title:"Error",description:"Failed to delete marketing pack",variant:"destructive"})}}),A=Ce({mutationFn:E=>fe("POST","/api/marketing-packs/bulk-generate",E),onSuccess:E=>{f({title:"Success",description:E.message}),v.invalidateQueries({queryKey:["/api/marketing-packs"]}),o(!1),p([])},onError:()=>{f({title:"Error",description:"Failed to bulk generate marketing packs",variant:"destructive"})}}),N=E=>{E.preventDefault();const G=new FormData(E.target),Y={propertyId:parseInt(G.get("propertyId")),packType:G.get("packType"),targetAudience:G.get("targetAudience"),language:G.get("language"),status:"draft"};C.mutate(Y)},M=E=>{E.preventDefault();const G=new FormData(E.target),Y={propertyIds:g,packType:G.get("packType"),targetAudience:G.get("targetAudience"),language:G.get("language")};A.mutate(Y)},F=E=>{switch(E){case"published":return"default";case"generated":return"secondary";case"draft":return"outline";case"archived":return"destructive";default:return"outline"}},I=E=>{switch(E){case"luxury":return"💎";case"premium":return"⭐";case"standard":return"📄";case"agent-focused":return"🏢";default:return"📦"}},V=b.filter(E=>{const G=c==="all"||E.status===c,Y=u==="all"||E.packType===u,Q=!h||E.propertyName?.toLowerCase().includes(h.toLowerCase())||E.packType.toLowerCase().includes(h.toLowerCase())||E.targetAudience.toLowerCase().includes(h.toLowerCase());return G&&Y&&Q});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Marketing Pack Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate and manage AI-powered marketing materials for your properties"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>o(!0),variant:"outline",children:[e.jsx(n8,{className:"h-4 w-4 mr-2"}),"Bulk Generate"]}),e.jsxs(R,{onClick:()=>s(!0),children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Create Pack"]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(it,{children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"packs",children:"Marketing Packs"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsxs(ne,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Packs"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w?.totalPacks||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all properties"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Published"}),e.jsx(q,{variant:"default",className:"h-4 w-4 rounded-full"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w?.statusDistribution?.published||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready for use"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Generated"}),e.jsx(v8,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w?.statusDistribution?.generated||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI generated content"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Draft"}),e.jsx(Or,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w?.statusDistribution?.draft||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Work in progress"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Pack Type Distribution"}),e.jsx(Te,{children:"Distribution of marketing pack types"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:w?.packTypeDistribution?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:I(E.packType)}),e.jsx("span",{className:"capitalize",children:E.packType})]}),e.jsx(q,{variant:"outline",children:E.count})]},E.packType))})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Target Audience Distribution"}),e.jsx(Te,{children:"Marketing focus by audience type"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:w?.audienceDistribution?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"capitalize",children:E.audience})]}),e.jsx(q,{variant:"outline",children:E.count})]},E.audience))})})]})]})]}),e.jsxs(ne,{value:"packs",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(H,{placeholder:"Search packs...",value:h,onChange:E=>x(E.target.value),className:"max-w-sm"}),e.jsxs(te,{value:c,onValueChange:d,children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(se,{placeholder:"Filter by status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"draft",children:"Draft"}),e.jsx(P,{value:"generated",children:"Generated"}),e.jsx(P,{value:"published",children:"Published"}),e.jsx(P,{value:"archived",children:"Archived"})]})]}),e.jsxs(te,{value:u,onValueChange:m,children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(se,{placeholder:"Filter by type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Types"}),e.jsx(P,{value:"standard",children:"Standard"}),e.jsx(P,{value:"premium",children:"Premium"}),e.jsx(P,{value:"luxury",children:"Luxury"}),e.jsx(P,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(E=>e.jsxs(O,{className:"hover:shadow-md transition-shadow",children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs($,{className:"text-lg",children:[e.jsx("span",{className:"mr-2",children:I(E.packType)}),E.propertyName]}),e.jsxs(Te,{className:"capitalize",children:[E.packType," • ",E.targetAudience]})]}),e.jsx(q,{variant:F(E.status),children:E.status})]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Vw,{className:"h-4 w-4"}),e.jsx("span",{className:"uppercase",children:E.language})]}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-3",children:[E.aiSummary?.substring(0,100),"..."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{i(E),n(!0)},children:[e.jsx($t,{className:"h-4 w-4 mr-1"}),"View"]}),E.pdfUrl&&e.jsx(R,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs("a",{href:E.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(as,{className:"h-4 w-4 mr-1"}),"PDF"]})}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>k.mutate(E.id),children:e.jsx(Er,{className:"h-4 w-4"})})]})]})})]},E.id))}),V.length===0&&!y&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No marketing packs found"}),e.jsx("p",{className:"text-muted-foreground",children:"Create your first marketing pack to get started."})]})]}),e.jsx(ne,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"h-5 w-5"}),"Language Distribution"]}),e.jsx(Te,{children:"Marketing packs by language"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:w?.languageDistribution?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vw,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"uppercase",children:E.language})]}),e.jsx(q,{variant:"outline",children:E.count})]},E.language))})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Monthly Trends"}),e.jsx(Te,{children:"Pack creation over time"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:w?.monthlyTrends?.map(E=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:new Date(E.month).toLocaleDateString("en-US",{year:"numeric",month:"short"})}),e.jsxs(q,{variant:"outline",children:[E.count," packs"]})]},E.month))})})]})]})})]}),e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"sm:max-w-[425px]",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create Marketing Pack"}),e.jsx(Pt,{children:"Generate AI-powered marketing materials for your property."})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"propertyId",children:"Property"}),e.jsxs(te,{name:"propertyId",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsx(ee,{children:S.map(E=>e.jsxs(P,{value:E.id.toString(),children:[E.name," - ",E.bedrooms,"BR"]},E.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"packType",children:"Pack Type"}),e.jsxs(te,{name:"packType",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select pack type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"standard",children:"Standard"}),e.jsx(P,{value:"premium",children:"Premium"}),e.jsx(P,{value:"luxury",children:"Luxury"}),e.jsx(P,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsxs(te,{name:"targetAudience",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select target audience"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"general",children:"General"}),e.jsx(P,{value:"families",children:"Families"}),e.jsx(P,{value:"couples",children:"Couples"}),e.jsx(P,{value:"business",children:"Business"}),e.jsx(P,{value:"luxury",children:"Luxury"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"language",children:"Language"}),e.jsxs(te,{name:"language",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select language"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"en",children:"English"}),e.jsx(P,{value:"th",children:"Thai"}),e.jsx(P,{value:"zh",children:"Chinese"}),e.jsx(P,{value:"ja",children:"Japanese"}),e.jsx(P,{value:"ko",children:"Korean"})]})]})]}),e.jsx(Nr,{children:e.jsx(R,{type:"submit",disabled:C.isPending,children:C.isPending?"Creating...":"Create Pack"})})]})]})}),e.jsx(Ve,{open:r,onOpenChange:n,children:e.jsxs(qe,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx("span",{children:I(a?.packType||"")}),a?.propertyName," - ",a?.packType]}),e.jsxs(Pt,{children:["Generated for ",a?.targetAudience," audience in ",a?.language?.toUpperCase()]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{variant:F(a.status),children:a.status}),e.jsx(q,{variant:"outline",children:a.language?.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"AI Generated Content"}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:a.aiSummary})})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(a.createdAt).toLocaleDateString(),a.updatedAt!==a.createdAt&&e.jsxs(e.Fragment,{children:[" • ","Updated: ",new Date(a.updatedAt).toLocaleDateString()]})]})]})]})}),e.jsx(Ve,{open:l,onOpenChange:o,children:e.jsxs(qe,{className:"sm:max-w-[500px]",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Bulk Generate Marketing Packs"}),e.jsx(Pt,{children:"Generate marketing packs for multiple properties at once."})]}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Select Properties"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2 space-y-2",children:S.map(E=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:g.includes(E.id),onChange:G=>{G.target.checked?p([...g,E.id]):p(g.filter(Y=>Y!==E.id))}}),e.jsxs("span",{className:"text-sm",children:[E.name," - ",E.bedrooms,"BR"]})]},E.id))}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.length," properties selected"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"packType",children:"Pack Type"}),e.jsxs(te,{name:"packType",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select pack type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"standard",children:"Standard"}),e.jsx(P,{value:"premium",children:"Premium"}),e.jsx(P,{value:"luxury",children:"Luxury"}),e.jsx(P,{value:"agent-focused",children:"Agent-Focused"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"targetAudience",children:"Target Audience"}),e.jsxs(te,{name:"targetAudience",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select target audience"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"general",children:"General"}),e.jsx(P,{value:"families",children:"Families"}),e.jsx(P,{value:"couples",children:"Couples"}),e.jsx(P,{value:"business",children:"Business"}),e.jsx(P,{value:"luxury",children:"Luxury"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"language",children:"Language"}),e.jsxs(te,{name:"language",required:!0,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select language"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"en",children:"English"}),e.jsx(P,{value:"th",children:"Thai"}),e.jsx(P,{value:"zh",children:"Chinese"}),e.jsx(P,{value:"ja",children:"Japanese"}),e.jsx(P,{value:"ko",children:"Korean"})]})]})]}),e.jsx(Nr,{children:e.jsx(R,{type:"submit",disabled:A.isPending||g.length===0,children:A.isPending?"Generating...":`Generate ${g.length} Packs`})})]})]})})]})}const Pg=t=>{switch(t){case"critical":return"destructive";case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},kg=t=>{switch(t){case"open":return"destructive";case"in-progress":return"default";case"resolved":return"secondary";default:return"outline"}},Ag=t=>{switch(t){case"missing-task":return e.jsx(Ke,{className:"h-4 w-4"});case"overdue-maintenance":return e.jsx(Nt,{className:"h-4 w-4"});case"booking-conflict":return e.jsx(Et,{className:"h-4 w-4"});case"payout-mismatch":return e.jsx(Ot,{className:"h-4 w-4"});default:return e.jsx(ks,{className:"h-4 w-4"})}};function NR(){const[t,s]=j.useState("overview"),{toast:r}=Xe(),n=ut(),{data:a,isLoading:i}=ge({queryKey:["/api/ai-ops-anomalies"],staleTime:1e3*60*2}),{data:l,isLoading:o}=ge({queryKey:["/api/ai-ops-anomalies/analytics"],staleTime:1e3*60*2}),c=Ce({mutationFn:()=>fe("POST","/api/ai-ops-anomalies/detect"),onSuccess:m=>{r({title:"Anomaly Detection Complete",description:m.message}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{r({title:"Detection Failed",description:"Failed to detect anomalies",variant:"destructive"})}}),d=Ce({mutationFn:()=>fe("POST","/api/ai-ops-anomalies/auto-fix"),onSuccess:m=>{r({title:"Auto-Fix Complete",description:m.message}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{r({title:"Auto-Fix Failed",description:"Failed to auto-fix anomalies",variant:"destructive"})}}),u=Ce({mutationFn:({id:m,fixAction:h})=>fe("POST",`/api/ai-ops-anomalies/${m}/resolve`,{fixAction:h}),onSuccess:()=>{r({title:"Anomaly Resolved",description:"Anomaly has been marked as resolved"}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies"]}),n.invalidateQueries({queryKey:["/api/ai-ops-anomalies/analytics"]})},onError:()=>{r({title:"Resolution Failed",description:"Failed to resolve anomaly",variant:"destructive"})}});return i||o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ts,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"AI Operations Anomalies"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage system anomalies with AI-powered detection and auto-fix capabilities"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:()=>c.mutate(),disabled:c.isPending,variant:"outline",children:[c.isPending?e.jsx(ts,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Eo,{className:"h-4 w-4 mr-2"}),"Detect Anomalies"]}),e.jsxs(R,{onClick:()=>d.mutate(),disabled:d.isPending,variant:"default",children:[d.isPending?e.jsx(ts,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(As,{className:"h-4 w-4 mr-2"}),"Auto-Fix"]})]})]}),e.jsxs(ot,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(it,{children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"anomalies",children:"Anomalies"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsxs(ne,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Anomalies"}),e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.totalAnomalies||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Detected across all properties"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Open Issues"}),e.jsx(Nt,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.statusDistribution?.find(m=>m.status==="open")?.count||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requiring attention"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Auto-Fix Rate"}),e.jsx(Ut,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[l?.autoFixSuccessRate||"0.0","%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully auto-resolved"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Resolved"}),e.jsx(Me,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l?.statusDistribution?.find(m=>m.status==="resolved")?.count||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Issues fixed"})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Recent Anomalies"}),e.jsx(Te,{children:"Latest detected system anomalies"})]}),e.jsx(D,{children:a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[Ag(m.anomalyType),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.details?.description||"Unknown anomaly"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(q,{variant:Pg(m.severity),children:m.severity}),e.jsx(q,{variant:kg(m.status),children:m.status}),e.jsx("span",{className:"text-sm text-muted-foreground",children:Md(new Date(m.detectedAt),{addSuffix:!0})})]})]})]}),m.status==="open"&&e.jsx(R,{size:"sm",variant:"outline",onClick:()=>u.mutate({id:m.id,fixAction:"Manually resolved from overview"}),disabled:u.isPending,children:"Resolve"})]},m.id))}):e.jsxs($n,{children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx(Fn,{children:"No anomalies detected. Your system is running smoothly!"})]})})]})]}),e.jsx(ne,{value:"anomalies",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"All Anomalies"}),e.jsx(Te,{children:"Complete list of system anomalies"})]}),e.jsx(D,{children:a&&a.length>0?e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Description"}),e.jsx(Oe,{children:"Severity"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Auto-Fixed"}),e.jsx(Oe,{children:"Detected"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:a.map(m=>e.jsxs(wt,{children:[e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[Ag(m.anomalyType),e.jsx("span",{className:"capitalize",children:m.anomalyType.replace("-"," ")})]})}),e.jsx(Ae,{className:"max-w-md",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:m.details?.description}),m.details?.recommendation&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m.details.recommendation})]})}),e.jsx(Ae,{children:e.jsx(q,{variant:Pg(m.severity),children:m.severity})}),e.jsx(Ae,{children:e.jsx(q,{variant:kg(m.status),children:m.status})}),e.jsx(Ae,{children:m.autoFixed?e.jsx(Me,{className:"h-4 w-4 text-green-500"}):e.jsx("span",{className:"text-muted-foreground",children:"—"})}),e.jsx(Ae,{children:Md(new Date(m.detectedAt),{addSuffix:!0})}),e.jsx(Ae,{children:m.status==="open"&&e.jsx(R,{size:"sm",variant:"outline",onClick:()=>u.mutate({id:m.id,fixAction:"Manually resolved"}),disabled:u.isPending,children:"Resolve"})})]},m.id))})]}):e.jsxs($n,{children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx(Fn,{children:"No anomalies found. Run detection to scan for issues."})]})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Status Distribution"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:l?.statusDistribution?.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(q,{variant:kg(m.status),children:m.status})}),e.jsx("span",{className:"font-medium",children:m.count})]},m.status))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Severity Distribution"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:l?.severityDistribution?.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(q,{variant:Pg(m.severity),children:m.severity})}),e.jsx("span",{className:"font-medium",children:m.count})]},m.severity))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Anomaly Types"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:l?.typeDistribution?.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[Ag(m.type),e.jsx("span",{className:"capitalize",children:m.type.replace("-"," ")})]}),e.jsx("span",{className:"font-medium",children:m.count})]},m.type))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"AI Performance"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-Fix Success Rate"}),e.jsxs("span",{className:"text-2xl font-bold",children:[l?.autoFixSuccessRate,"%"]})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${l?.autoFixSuccessRate}%`}})})]})})]})]})})]})]})}const tW=Object.freeze(Object.defineProperty({__proto__:null,default:NR},Symbol.toStringTag,{value:"Module"}));function sW(){const[t,s]=j.useState(""),[r,n]=j.useState("weekly"),a=[{id:1,name:"Pool Cleaning Schedule",frequency:"Weekly",nextRun:"2025-01-22 10:00",department:"pool",taskTemplate:"Pool cleaning and chemical balance check",assignedTo:"Pool Team",property:"All Properties",status:"active",lastGenerated:"2025-01-15 10:00",tasksCreated:12},{id:2,name:"Deep Cleaning Rotation",frequency:"Monthly",nextRun:"2025-01-25 09:00",department:"cleaning",taskTemplate:"Deep cleaning of property including all rooms",assignedTo:"Housekeeping Team",property:"Villa Samui Breeze",status:"active",lastGenerated:"2024-12-25 09:00",tasksCreated:8},{id:3,name:"Garden Maintenance",frequency:"Bi-weekly",nextRun:"2025-01-23 08:00",department:"garden",taskTemplate:"Garden pruning, watering, and landscaping maintenance",assignedTo:"Garden Team",property:"Villa Aruna",status:"paused",lastGenerated:"2025-01-09 08:00",tasksCreated:15},{id:4,name:"AC System Inspection",frequency:"Monthly",nextRun:"2025-01-28 14:00",department:"maintenance",taskTemplate:"Air conditioning system inspection and filter replacement",assignedTo:"Maintenance Team",property:"All Properties",status:"active",lastGenerated:"2024-12-28 14:00",tasksCreated:6},{id:5,name:"Wi-Fi & Tech Check",frequency:"Weekly",nextRun:"2025-01-24 16:00",department:"general",taskTemplate:"Internet connectivity and smart device functionality check",assignedTo:"Tech Support",property:"All Properties",status:"active",lastGenerated:"2025-01-17 16:00",tasksCreated:20}],i=[{id:1,title:"Pool Cleaning - Villa Samui Breeze",generatedBy:"Pool Cleaning Schedule",createdAt:"2025-01-21 10:00",assignedTo:"Pool Team",dueDate:"2025-01-21 15:00",status:"pending",department:"pool"},{id:2,title:"Wi-Fi Check - Villa Aruna",generatedBy:"Wi-Fi & Tech Check",createdAt:"2025-01-21 16:00",assignedTo:"Tech Support",dueDate:"2025-01-21 17:00",status:"in-progress",department:"general"},{id:3,title:"Deep Cleaning - Villa Paradise",generatedBy:"Deep Cleaning Rotation",createdAt:"2025-01-20 09:00",assignedTo:"Housekeeping Team",dueDate:"2025-01-20 17:00",status:"completed",department:"cleaning"}],l=d=>{switch(d){case"pool":return"bg-blue-100 text-blue-800";case"cleaning":return"bg-green-100 text-green-800";case"garden":return"bg-emerald-100 text-emerald-800";case"maintenance":return"bg-orange-100 text-orange-800";case"general":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},o=d=>{switch(d){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},c={activeRules:a.filter(d=>d.status==="active").length,totalTasksGenerated:a.reduce((d,u)=>d+u.tasksCreated,0),pendingTasks:i.filter(d=>d.status==="pending").length,completedTasks:i.filter(d=>d.status==="completed").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Gw,{className:"w-8 h-8"}),"Auto-Schedule Task Generator"]}),e.jsx("p",{className:"text-gray-600",children:"Automate recurring task creation with smart scheduling rules"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Global Settings"]}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Create Rule"]})]})]}),e.jsxs(ot,{defaultValue:"rules",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"rules",children:"Scheduling Rules"}),e.jsx(re,{value:"tasks",children:"Generated Tasks"}),e.jsx(re,{value:"analytics",children:"Analytics"}),e.jsx(re,{value:"settings",children:"System Settings"})]}),e.jsxs(ne,{value:"rules",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Rules"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.activeRules})]}),e.jsx(Eo,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tasks Generated"}),e.jsx("p",{className:"text-2xl font-bold",children:c.totalTasksGenerated})]}),e.jsx(Gw,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.pendingTasks})]}),e.jsx(Ke,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.completedTasks})]}),e.jsx(We,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Create New Scheduling Rule"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsx(H,{placeholder:"Rule name",value:t,onChange:d=>s(d.target.value)}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"daily",children:"Daily"}),e.jsx(P,{value:"weekly",children:"Weekly"}),e.jsx(P,{value:"bi-weekly",children:"Bi-weekly"}),e.jsx(P,{value:"monthly",children:"Monthly"}),e.jsx(P,{value:"quarterly",children:"Quarterly"})]})]}),e.jsxs(te,{defaultValue:"all",children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),e.jsx(P,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(P,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(P,{value:"villa-paradise",children:"Villa Paradise"})]})]}),e.jsxs(te,{defaultValue:"cleaning",children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Department"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"cleaning",children:"Cleaning"}),e.jsx(P,{value:"pool",children:"Pool"}),e.jsx(P,{value:"garden",children:"Garden"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"general",children:"General"})]})]}),e.jsx(H,{placeholder:"Assigned to"}),e.jsx(R,{children:"Create Rule"})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Active Scheduling Rules"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:a.map(d=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600",children:d.taskTemplate})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:o(d.status),children:d.status}),e.jsx(q,{className:l(d.department),children:d.department})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Frequency"}),e.jsx("p",{className:"text-sm font-medium",children:d.frequency})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Run"}),e.jsx("p",{className:"text-sm font-medium",children:d.nextRun})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Assigned To"}),e.jsx("p",{className:"text-sm font-medium",children:d.assignedTo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Property"}),e.jsx("p",{className:"text-sm font-medium",children:d.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tasks Created"}),e.jsx("p",{className:"text-sm font-medium",children:d.tasksCreated})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:e.jsxs("span",{children:["Last generated: ",d.lastGenerated]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Or,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(R,{variant:"outline",size:"sm",children:d.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(a8,{className:"w-3 h-3 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(Eo,{className:"w-3 h-3 mr-1"}),"Resume"]})}),e.jsxs(R,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-800",children:[e.jsx(g8,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]},d.id))})})]})]}),e.jsx(ne,{value:"tasks",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recently Generated Tasks"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:i.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Generated by: ",d.generatedBy]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",d.createdAt," • Due: ",d.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:l(d.department),children:d.department}),e.jsx(q,{className:o(d.status),children:d.status}),e.jsx("span",{className:"text-sm text-gray-600",children:d.assignedTo})]})]},d.id))})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Task Generation by Department"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pool"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"20%"}})}),e.jsx("span",{className:"text-sm",children:"12"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"General"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"33%"}})}),e.jsx("span",{className:"text-sm",children:"20"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Garden"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"15"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Cleaning"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"13%"}})}),e.jsx("span",{className:"text-sm",children:"8"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maintenance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"10%"}})}),e.jsx("span",{className:"text-sm",children:"6"})]})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Completion Rate by Rule"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"94%"}),e.jsx("p",{className:"text-gray-600",children:"Average Completion Rate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Pool Cleaning Schedule"}),e.jsx("span",{className:"font-semibold text-green-600",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Wi-Fi & Tech Check"}),e.jsx("span",{className:"font-semibold text-green-600",children:"95%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Deep Cleaning Rotation"}),e.jsx("span",{className:"font-semibold text-green-600",children:"88%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"AC System Inspection"}),e.jsx("span",{className:"font-semibold text-orange-600",children:"83%"})]})]})]})})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Global System Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Task Generation"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-generate tasks"}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Skip holidays"}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Weekend generation"}),e.jsx(yt,{})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Notifications"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Rule creation alerts"}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Task generation alerts"}),e.jsx(yt,{})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed generation alerts"}),e.jsx(yt,{defaultChecked:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Default Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default Assignment"}),e.jsx(H,{placeholder:"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Task Due Hours"}),e.jsx(H,{type:"number",placeholder:"24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Priority Level"}),e.jsxs(te,{defaultValue:"medium",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"low",children:"Low"}),e.jsx(P,{value:"medium",children:"Medium"}),e.jsx(P,{value:"high",children:"High"}),e.jsx(P,{value:"urgent",children:"Urgent"})]})]})]})]})]}),e.jsx(R,{children:"Save Settings"})]})]})})]})]})}function rW(){const[t,s]=j.useState("all"),[r,n]=j.useState("all"),[a,i]=j.useState("month"),[l,o]=j.useState({minRevenue:"",maxRevenue:"",minBookings:"",dateFrom:"",dateTo:""}),c=[{name:"Airbnb",totalBookings:45,grossRevenue:67500,hostFee:3375,guestServiceFee:8100,netPayout:64125,averageNightly:1500,commissionRate:5,color:"bg-red-100 text-red-800"},{name:"Booking.com",totalBookings:32,grossRevenue:52800,hostFee:7920,guestServiceFee:0,netPayout:44880,averageNightly:1650,commissionRate:15,color:"bg-blue-100 text-blue-800"},{name:"VRBO",totalBookings:28,grossRevenue:47600,hostFee:3808,guestServiceFee:4760,netPayout:43792,averageNightly:1700,commissionRate:8,color:"bg-yellow-100 text-yellow-800"},{name:"Expedia",totalBookings:15,grossRevenue:24750,hostFee:4455,guestServiceFee:0,netPayout:20295,averageNightly:1650,commissionRate:18,color:"bg-purple-100 text-purple-800"}],d=[{property:"Villa Samui Breeze",airbnb:{bookings:18,gross:27e3,net:25650},booking:{bookings:12,gross:19800,net:16830},vrbo:{bookings:10,gross:17e3,net:15640},expedia:{bookings:5,gross:8250,net:6765},total:{bookings:45,gross:72050,net:64885}},{property:"Villa Aruna",airbnb:{bookings:15,gross:22500,net:21375},booking:{bookings:10,gross:16500,net:14025},vrbo:{bookings:8,gross:13600,net:12512},expedia:{bookings:4,gross:6600,net:5412},total:{bookings:37,gross:59200,net:53324}},{property:"Villa Paradise",airbnb:{bookings:12,gross:18e3,net:17100},booking:{bookings:10,gross:16500,net:14025},vrbo:{bookings:10,gross:17e3,net:15640},expedia:{bookings:6,gross:9900,net:8118},total:{bookings:38,gross:61400,net:54883}}],u=[{month:"Oct 2024",airbnb:21500,booking:16200,vrbo:14800,expedia:7200},{month:"Nov 2024",airbnb:22800,booking:17100,vrbo:15600,expedia:8100},{month:"Dec 2024",airbnb:23200,booking:17900,vrbo:16200,expedia:8400},{month:"Jan 2025",airbnb:24e3,booking:18400,vrbo:16800,expedia:9e3}],m=c.reduce((f,v)=>f+v.grossRevenue,0),h=c.reduce((f,v)=>f+v.netPayout,0),x=m-h,g=x/m*100,p=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(yo,{className:"w-8 h-8"}),"OTA Revenue & Net Payout Calculation"]}),e.jsx("p",{className:"text-gray-600",children:"Analyze commission structures and actual payouts across booking platforms"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(R,{children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Filters & Property Selection"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Property"}),e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),e.jsx(P,{value:"villa-samui-breeze",children:"Villa Samui Breeze"}),e.jsx(P,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(P,{value:"villa-paradise",children:"Villa Paradise"}),e.jsx(P,{value:"villa-tropical",children:"Villa Tropical"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"OTA Platform"}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select platform"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Platforms"}),e.jsx(P,{value:"airbnb",children:"Airbnb"}),e.jsx(P,{value:"booking",children:"Booking.com"}),e.jsx(P,{value:"vrbo",children:"VRBO"}),e.jsx(P,{value:"expedia",children:"Expedia"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time Period"}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select period"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"week",children:"This Week"}),e.jsx(P,{value:"month",children:"This Month"}),e.jsx(P,{value:"quarter",children:"This Quarter"}),e.jsx(P,{value:"year",children:"This Year"}),e.jsx(P,{value:"custom",children:"Custom Range"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Bookings"}),e.jsx(H,{type:"number",placeholder:"e.g. 10",value:l.minBookings,onChange:f=>o({...l,minBookings:f.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Min Revenue ($)"}),e.jsx(H,{type:"number",placeholder:"e.g. 5000",value:l.minRevenue,onChange:f=>o({...l,minRevenue:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Revenue ($)"}),e.jsx(H,{type:"number",placeholder:"e.g. 50000",value:l.maxRevenue,onChange:f=>o({...l,maxRevenue:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date From"}),e.jsx(H,{type:"date",value:l.dateFrom,onChange:f=>o({...l,dateFrom:f.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date To"}),e.jsx(H,{type:"date",value:l.dateTo,onChange:f=>o({...l,dateTo:f.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(R,{onClick:()=>{console.log("Filters applied:",l,t,r,a)},children:"Apply Filters"}),e.jsx(R,{variant:"outline",onClick:()=>{o({minRevenue:"",maxRevenue:"",minBookings:"",dateFrom:"",dateTo:""}),s("all"),n("all"),i("month")},children:"Clear Filters"}),e.jsxs(q,{variant:"outline",className:"ml-2 px-3 py-1",children:[t==="all"?"All Properties":t," •",r==="all"?"All Platforms":r," •",a]})]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"overview",children:"Revenue Overview"}),e.jsx(re,{value:"platforms",children:"Platform Analysis"}),e.jsx(re,{value:"properties",children:"Property Breakdown"}),e.jsx(re,{value:"trends",children:"Monthly Trends"}),e.jsx(re,{value:"calculator",children:"Payout Calculator"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Gross Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:p(m)})]}),e.jsx(He,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Payout Received"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p(h)})]}),e.jsx(Ot,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Commission Loss"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:p(x)})]}),e.jsx(o8,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Commission Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[g.toFixed(1),"%"]})]}),e.jsx(qs,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),e.jsx(P,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(P,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(P,{value:"villa-paradise",children:"Villa Paradise"})]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Platforms"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Platforms"}),e.jsx(P,{value:"airbnb",children:"Airbnb"}),e.jsx(P,{value:"booking",children:"Booking.com"}),e.jsx(P,{value:"vrbo",children:"VRBO"}),e.jsx(P,{value:"expedia",children:"Expedia"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"This Month"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"week",children:"This Week"}),e.jsx(P,{value:"month",children:"This Month"}),e.jsx(P,{value:"quarter",children:"This Quarter"}),e.jsx(P,{value:"year",children:"This Year"})]})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Revenue vs Payout Comparison"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c.map(f=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:f.color,children:f.name}),e.jsxs("span",{className:"text-sm text-gray-600",children:[f.commissionRate,"% commission"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:p(f.netPayout)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["from ",p(f.grossRevenue)]})]})]}),e.jsxs("div",{className:"flex gap-1 h-3",children:[e.jsx("div",{className:"bg-green-400 rounded-l",style:{width:`${f.netPayout/f.grossRevenue*100}%`}}),e.jsx("div",{className:"bg-red-400 rounded-r",style:{width:`${f.hostFee/f.grossRevenue*100}%`}})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Net Payout: ",(f.netPayout/f.grossRevenue*100).toFixed(1),"%"]}),e.jsxs("span",{children:["Commission: ",(f.hostFee/f.grossRevenue*100).toFixed(1),"%"]})]})]},f.name))})})]})]}),e.jsx(ne,{value:"platforms",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(f=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsx(q,{className:f.color,children:f.name}),e.jsxs("span",{className:"text-lg font-bold",children:[f.commissionRate,"%"]})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-xl font-bold",children:f.totalBookings})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Nightly Rate"}),e.jsx("p",{className:"text-xl font-bold",children:p(f.averageNightly)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Gross Revenue"}),e.jsx("span",{className:"font-medium",children:p(f.grossRevenue)})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsxs("span",{className:"text-sm",children:["Host Fee (",f.commissionRate,"%)"]}),e.jsxs("span",{className:"font-medium",children:["-",p(f.hostFee)]})]}),f.guestServiceFee>0&&e.jsxs("div",{className:"flex justify-between text-orange-600",children:[e.jsx("span",{className:"text-sm",children:"Guest Service Fee"}),e.jsxs("span",{className:"font-medium",children:["-",p(f.guestServiceFee)]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-green-600 font-bold",children:[e.jsx("span",{children:"Net Payout"}),e.jsx("span",{children:p(f.netPayout)})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Payout Efficiency"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[(f.netPayout/f.grossRevenue*100).toFixed(1),"%"]})]})})]})]},f.name))})}),e.jsx(ne,{value:"properties",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Revenue Breakdown by Property"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-6",children:d.map(f=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-4",children:f.property}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Airbnb"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[f.airbnb.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:p(f.airbnb.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",p(f.airbnb.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Booking.com"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[f.booking.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:p(f.booking.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",p(f.booking.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"VRBO"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[f.vrbo.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:p(f.vrbo.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",p(f.vrbo.gross)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Expedia"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[f.expedia.bookings," bookings"]}),e.jsx("p",{className:"font-medium",children:p(f.expedia.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",p(f.expedia.gross)]})]}),e.jsxs("div",{className:"space-y-2 border-l pl-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[f.total.bookings," bookings"]}),e.jsx("p",{className:"font-bold text-green-600",children:p(f.total.net)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["from ",p(f.total.gross)]})]})]})]},f.property))})})]})}),e.jsx(ne,{value:"trends",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Monthly Revenue Trends"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:u.map(f=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:f.month})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 font-medium",children:p(f.airbnb)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Airbnb"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-600 font-medium",children:p(f.booking)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Booking.com"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-yellow-600 font-medium",children:p(f.vrbo)}),e.jsx("p",{className:"text-xs text-gray-500",children:"VRBO"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-purple-600 font-medium",children:p(f.expedia)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Expedia"})]}),e.jsxs("div",{className:"text-center border-l pl-4",children:[e.jsx("p",{className:"text-green-600 font-bold",children:p(f.airbnb+f.booking+f.vrbo+f.expedia)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total"})]})]})]},f.month))})})]})}),e.jsx(ne,{value:"calculator",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Payout Calculator"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Booking Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Guest Total Payment"}),e.jsx(H,{type:"number",placeholder:"1500.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"OTA Platform"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select platform"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"airbnb",children:"Airbnb (5%)"}),e.jsx(P,{value:"booking",children:"Booking.com (15%)"}),e.jsx(P,{value:"vrbo",children:"VRBO (8%)"}),e.jsx(P,{value:"expedia",children:"Expedia (18%)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Custom Commission Rate (%)"}),e.jsx(H,{type:"number",placeholder:"5.0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Calculated Payout"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Guest Payment:"}),e.jsx("span",{className:"font-medium",children:"$1,500.00"})]}),e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Platform Commission (5%):"}),e.jsx("span",{className:"font-medium",children:"-$75.00"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-green-600 font-bold",children:[e.jsx("span",{children:"Your Net Payout:"}),e.jsx("span",{children:"$1,425.00"})]}),e.jsx("div",{className:"text-center pt-2",children:e.jsx("p",{className:"text-sm text-gray-600",children:"Payout Efficiency: 95.0%"})})]})]})]}),e.jsx(R,{className:"w-full",children:"Calculate Payout"})]})]})})]})]})}const nW=()=>{const[t,s]=j.useState("overview"),[r,n]=j.useState(null),[a,i]=j.useState(!1),[l,o]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState({otaPlatform:"",payoutStatus:"",dateRange:""}),h=ut(),{data:x,isLoading:g}=ge({queryKey:["/api/ota-payout/bookings",u],queryFn:()=>fe("GET","/api/ota-payout/bookings"),retry:!1}),p=Array.isArray(x)?x:[],{data:f,isLoading:v}=ge({queryKey:["/api/ota-payout/alerts"],queryFn:()=>fe("GET","/api/ota-payout/alerts"),retry:!1}),b=Array.isArray(f)?f:[],{data:y,isLoading:S}=ge({queryKey:["/api/ota-payout/analytics"],queryFn:()=>fe("GET","/api/ota-payout/analytics"),retry:!1}),w=Ce({mutationFn:E=>fe(`/api/ota-payout/bookings/${E}/confirm`,{method:"PUT"}).then(G=>G.json()),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/ota-payout/bookings"]}),h.invalidateQueries({queryKey:["/api/ota-payout/analytics"]})}});Ce({mutationFn:({payoutId:E,data:G})=>fe(`/api/ota-payout/bookings/${E}/override`,{method:"PUT",body:JSON.stringify(G),headers:{"Content-Type":"application/json"}}).then(Y=>Y.json()),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/ota-payout/bookings"]}),h.invalidateQueries({queryKey:["/api/ota-payout/analytics"]}),i(!1),n(null)}});const C=Ce({mutationFn:({alertId:E,resolutionNotes:G})=>fe(`/api/ota-payout/alerts/${E}/resolve`,{method:"PUT",body:JSON.stringify({resolutionNotes:G}),headers:{"Content-Type":"application/json"}}).then(Y=>Y.json()),onSuccess:()=>{h.invalidateQueries({queryKey:["/api/ota-payout/alerts"]}),o(!1),d(null)}}),k=E=>{switch(E.toLowerCase()){case"airbnb":return"🏠";case"booking_com":return"🏨";case"vrbo":return"🏖️";case"direct":return"🎯";default:return"🌐"}},A=E=>{switch(E){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"received":return"bg-blue-100 text-blue-800";case"discrepancy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=E=>{switch(E){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},M=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"col-span-full",children:e.jsxs($n,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Nt,{className:"h-4 w-4 text-orange-600"}),e.jsx(lR,{className:"text-orange-800",children:"Revenue Calculation Notice"}),e.jsx(Fn,{className:"text-orange-700",children:"All internal calculations (fees, commissions, splits) are based on net received payout. OTA commissions are not part of your earnings."})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Net Payout"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:y&&y.totalNetPayout!=null?Sn(y.totalNetPayout,"THB"):"฿0"})]}),e.jsx(Ot,{className:"h-8 w-8 text-green-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Actual revenue after OTA commissions"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"OTA Commissions"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:y&&y.totalOtaCommissions!=null?Sn(y.totalOtaCommissions,"THB"):"฿0"})]}),e.jsx(_l,{className:"h-8 w-8 text-red-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Total platform fees deducted"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Commission Rate"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:y&&y.averageOtaCommissionRate!=null?`${y.averageOtaCommissionRate.toFixed(1)}%`:"0.0%"})]}),e.jsx(_d,{className:"h-8 w-8 text-blue-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Across all platforms"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:y&&y.totalBookings!=null?y.totalBookings:"0"})]}),e.jsx(We,{className:"h-8 w-8 text-purple-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"All tracked reservations"})]})}),e.jsx("div",{className:"col-span-full",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"h-5 w-5"}),"Platform Revenue Breakdown"]}),e.jsx(Te,{children:"Revenue distribution by OTA platform showing guest payments vs net payouts"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y?.platformBreakdown&&Array.isArray(y.platformBreakdown)?y.platformBreakdown.map(E=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2",children:[e.jsx("span",{children:k(E.platform)}),E.platform.replace("_",".")]}),e.jsxs(q,{variant:"outline",children:[E.bookingCount," bookings"]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Paid:"}),e.jsx("span",{className:"font-medium",children:E.totalGuestPayments!=null?Sn(E.totalGuestPayments,"THB"):"฿0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payout:"}),e.jsx("span",{className:"font-medium text-green-600",children:E.totalNetPayouts!=null?Sn(E.totalNetPayouts,"THB"):"฿0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Commission:"}),e.jsxs("span",{className:"font-medium text-red-600",children:[E.averageCommissionRate!=null?E.averageCommissionRate.toFixed(1):"0.0","%"]})]})]})]},E.platform)):e.jsx("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"No platform data available"})})})]})})]}),F=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"h-5 w-5"}),"Filter Booking Payouts"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"platform-filter",children:"OTA Platform"}),e.jsxs(te,{value:u.otaPlatform,onValueChange:E=>m(G=>({...G,otaPlatform:E})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All platforms"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All platforms"}),e.jsx(P,{value:"airbnb",children:"Airbnb"}),e.jsx(P,{value:"booking_com",children:"Booking.com"}),e.jsx(P,{value:"vrbo",children:"VRBO"}),e.jsx(P,{value:"direct",children:"Direct"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"status-filter",children:"Payout Status"}),e.jsxs(te,{value:u.payoutStatus,onValueChange:E=>m(G=>({...G,payoutStatus:E})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All statuses"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All statuses"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"confirmed",children:"Confirmed"}),e.jsx(P,{value:"received",children:"Received"}),e.jsx(P,{value:"discrepancy",children:"Discrepancy"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{variant:"outline",onClick:()=>m({otaPlatform:"",payoutStatus:"",dateRange:""}),className:"w-full",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Reset Filters"]})})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"Booking Payouts"]}),e.jsxs(q,{variant:"outline",children:[p.length," records"]})]}),e.jsx(Te,{children:"Track all booking payouts with transparent OTA commission deductions"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:g?e.jsx("div",{className:"text-center py-8",children:"Loading payouts..."}):p.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No payouts found"}):p.map(E=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:k(E.otaPlatform)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:E.guestName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[E.reservationCode," • ",E.propertyName]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Paid:"}),e.jsx("p",{className:"font-medium",children:E.guestPaidAmount?Sn(parseFloat(E.guestPaidAmount),E.currency):"฿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"OTA Commission:"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",E.otaCommissionAmount?Sn(parseFloat(E.otaCommissionAmount),E.currency):"฿0","(",E.otaCommissionRate,"%)"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payout:"}),e.jsx("p",{className:"font-semibold text-green-600",children:E.netPayoutAmount?Sn(parseFloat(E.netPayoutAmount),E.currency):"฿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(q,{className:A(E.payoutStatus),children:E.payoutStatus})]})]}),E.manualOverride&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-600",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsxs("span",{children:["Manual override applied: ",E.overrideReason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[E.payoutStatus==="pending"&&e.jsxs(R,{size:"sm",onClick:()=>w.mutate(E.id),disabled:w.isPending,children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Confirm"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{n(E),i(!0)},children:[e.jsx(i8,{className:"h-4 w-4 mr-1"}),"Override"]})]})]})},E.id))})})]})]}),I=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-5 w-5"}),"Payout Alerts & Issues"]}),e.jsx(Te,{children:"Monitor payout discrepancies and manual review requirements"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:v?e.jsx("div",{className:"text-center py-8",children:"Loading alerts..."}):b.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No alerts found"}):b.map(E=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:N(E.severity),children:E.severity}),e.jsx(q,{variant:"outline",children:E.alertType}),E.isResolved&&e.jsx(q,{className:"bg-green-100 text-green-800",children:"Resolved"})]}),e.jsx("p",{className:"font-medium",children:E.alertMessage}),E.booking&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Related to: ",E.booking.guestName," (",E.booking.reservationCode,")"]}),E.isResolved&&E.resolutionNotes&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-3 text-sm",children:[e.jsx("p",{className:"font-medium text-green-800",children:"Resolution:"}),e.jsx("p",{className:"text-green-700",children:E.resolutionNotes})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!E.isResolved&&e.jsxs(R,{size:"sm",onClick:()=>{d(E),o(!0)},children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Resolve"]}),e.jsxs(R,{size:"sm",variant:"outline",children:[e.jsx($t,{className:"h-4 w-4 mr-1"}),"View"]})]})]})},E.id))})})]})}),V=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Monthly Revenue Trends"]}),e.jsx(Te,{children:"Track guest payments vs net payouts over time"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:y?.monthlyTrends&&Array.isArray(y.monthlyTrends)?y.monthlyTrends.map(E=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium",children:E.month}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Commission Impact: ",E.otaCommissions!=null?Sn(E.otaCommissions,"THB"):"฿0"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Guest Payments:"}),e.jsx("p",{className:"font-medium",children:E.guestPayments!=null?Sn(E.guestPayments,"THB"):"฿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Net Payouts:"}),e.jsx("p",{className:"font-medium text-green-600",children:E.netPayouts!=null?Sn(E.netPayouts,"THB"):"฿0"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Loss Ratio:"}),e.jsxs("p",{className:"font-medium text-red-600",children:[E.otaCommissions!=null&&E.guestPayments!=null&&E.guestPayments>0?(E.otaCommissions/E.guestPayments*100).toFixed(1):"0.0","%"]})]})]})]},E.month)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No trend data available"})})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_d,{className:"h-5 w-5"}),"Payout Status Distribution"]})}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y?.payoutStatusBreakdown&&Array.isArray(y.payoutStatusBreakdown)?y.payoutStatusBreakdown.map(E=>e.jsxs("div",{className:"border rounded-lg p-4 text-center",children:[e.jsx(q,{className:A(E.status),variant:"outline",children:E.status}),e.jsx("p",{className:"font-semibold text-lg mt-2",children:E.count}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E.totalAmount!=null?Sn(E.totalAmount,"THB"):"฿0"})]},E.status)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No status breakdown data available"})})})]})]});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Ut,{className:"h-8 w-8 text-yellow-600"}),"OTA Payout Logic — Smart Revenue Tracking"]}),e.jsx("p",{className:"text-lg text-gray-600 mt-2",children:"Comprehensive revenue transparency with dual pricing logic for accurate financial reporting"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Export Report"]}),e.jsxs(R,{children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Configure Rules"]})]})]})}),e.jsxs(ot,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsxs(re,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(re,{value:"payouts",className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Payouts"]}),e.jsxs(re,{value:"alerts",className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Alerts"]}),e.jsxs(re,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(qs,{className:"h-4 w-4"}),"Analytics"]})]}),e.jsx(ne,{value:"overview",children:e.jsx(M,{})}),e.jsx(ne,{value:"payouts",children:e.jsx(F,{})}),e.jsx(ne,{value:"alerts",children:e.jsx(I,{})}),e.jsx(ne,{value:"analytics",children:e.jsx(V,{})})]}),e.jsx(Ve,{open:a,onOpenChange:i,children:e.jsxs(qe,{className:"max-w-md",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Override Payout Calculation"}),e.jsxs(Pt,{children:["Manually adjust payout amounts for booking ",r?.reservationCode]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"net-payout",children:"Net Payout Amount (THB)"}),e.jsx(H,{id:"net-payout",type:"number",defaultValue:r?.netPayoutAmount,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"commission-amount",children:"OTA Commission Amount (THB)"}),e.jsx(H,{id:"commission-amount",type:"number",defaultValue:r?.otaCommissionAmount,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"commission-rate",children:"OTA Commission Rate (%)"}),e.jsx(H,{id:"commission-rate",type:"number",defaultValue:r?.otaCommissionRate,step:"0.01"})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"override-reason",children:"Override Reason"}),e.jsx(nt,{id:"override-reason",placeholder:"Explain why this override is necessary...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(R,{children:"Apply Override"})]})]})]})}),e.jsx(Ve,{open:l,onOpenChange:o,children:e.jsxs(qe,{className:"max-w-md",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Resolve Alert"}),e.jsx(Pt,{children:"Mark this alert as resolved and add resolution notes"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border rounded p-3",children:[e.jsx("p",{className:"font-medium",children:c?.alertMessage}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Type: ",c?.alertType," • Severity: ",c?.severity]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"resolution-notes",children:"Resolution Notes"}),e.jsx(nt,{id:"resolution-notes",placeholder:"Describe how this issue was resolved...",rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{onClick:()=>{if(c){const E=document.getElementById("resolution-notes")?.value;C.mutate({alertId:c.id,resolutionNotes:E})}},disabled:C.isPending,children:C.isPending?"Resolving...":"Mark Resolved"})]})]})]})})]})})};function n2(){const[t,s]=j.useState(""),[r,n]=j.useState("all"),[a,i]=j.useState("all"),l=[{name:"Bronze",color:"bg-orange-100 text-orange-800",minStays:1,benefits:["Welcome drink","Late checkout"]},{name:"Silver",color:"bg-gray-100 text-gray-800",minStays:3,benefits:["Room upgrade","Spa discount 10%","Priority booking"]},{name:"Gold",color:"bg-yellow-100 text-yellow-800",minStays:5,benefits:["Free breakfast","Airport transfer","Spa discount 20%"]},{name:"Platinum",color:"bg-purple-100 text-purple-800",minStays:10,benefits:["Free night after 5 stays","Concierge service","Spa discount 30%"]}],o=[{id:1,name:"Sarah Johnson",email:"sarah.johnson@email.com",tier:"Platinum",totalStays:12,totalSpent:18500,lastStay:"2024-12-15",nextBooking:"2025-02-10",favoriteProperty:"Villa Samui Breeze",preferences:["Ocean view","Late checkout","Spa services"],pointsBalance:2400,rewardsEarned:8,status:"active",joinDate:"2023-01-15"},{id:2,name:"Michael Chen",email:"m.chen@business.com",tier:"Gold",totalStays:8,totalSpent:12800,lastStay:"2025-01-05",nextBooking:"2025-03-20",favoriteProperty:"Villa Aruna",preferences:["Pool access","Business center","Early checkin"],pointsBalance:1850,rewardsEarned:5,status:"active",joinDate:"2023-06-20"},{id:3,name:"Emma Williams",email:"emma.w@travel.com",tier:"Silver",totalStays:4,totalSpent:6200,lastStay:"2024-11-28",nextBooking:null,favoriteProperty:"Villa Paradise",preferences:["Garden view","Yoga space","Healthy meals"],pointsBalance:920,rewardsEarned:2,status:"active",joinDate:"2024-03-10"},{id:4,name:"David Kim",email:"david.kim@startup.io",tier:"Bronze",totalStays:2,totalSpent:3100,lastStay:"2024-08-15",nextBooking:null,favoriteProperty:"Villa Samui Breeze",preferences:["WiFi","Workspace","Coffee machine"],pointsBalance:465,rewardsEarned:1,status:"inactive",joinDate:"2024-07-05"},{id:5,name:"Lisa Anderson",email:"lisa.anderson@family.com",tier:"Gold",totalStays:6,totalSpent:9800,lastStay:"2024-12-30",nextBooking:"2025-04-15",favoriteProperty:"Villa Paradise",preferences:["Family rooms","Pool safety","Kids activities"],pointsBalance:1470,rewardsEarned:4,status:"active",joinDate:"2023-11-08"}],c=[{id:1,guestName:"Sarah Johnson",activity:"Earned 150 points from Villa Samui Breeze stay",date:"2024-12-15",type:"points_earned"},{id:2,guestName:"Michael Chen",activity:"Redeemed free spa treatment (500 points)",date:"2025-01-05",type:"reward_redeemed"},{id:3,guestName:"Emma Williams",activity:"Upgraded to Silver tier (4 stays completed)",date:"2024-11-28",type:"tier_upgrade"},{id:4,guestName:"Lisa Anderson",activity:"Booked next stay with Gold tier benefits",date:"2024-12-30",type:"booking_made"}],d=x=>{switch(x){case"Bronze":return e.jsx(y0,{className:"w-4 h-4"});case"Silver":return e.jsx(us,{className:"w-4 h-4"});case"Gold":return e.jsx(Rn,{className:"w-4 h-4"});case"Platinum":return e.jsx(hl,{className:"w-4 h-4"});default:return e.jsx(st,{className:"w-4 h-4"})}},u=x=>{switch(x){case"Bronze":return"bg-orange-100 text-orange-800";case"Silver":return"bg-gray-100 text-gray-800";case"Gold":return"bg-yellow-100 text-yellow-800";case"Platinum":return"bg-purple-100 text-purple-800";default:return"bg-blue-100 text-blue-800"}},m=x=>x==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",h={totalGuests:o.length,activeGuests:o.filter(x=>x.status==="active").length,totalPointsIssued:o.reduce((x,g)=>x+g.pointsBalance,0),averageStays:(o.reduce((x,g)=>x+g.totalStays,0)/o.length).toFixed(1)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Do,{className:"w-8 h-8"}),"Loyalty Guest Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track guest loyalty, rewards, and retention programs"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Id,{className:"w-4 h-4 mr-2"}),"Send Rewards"]}),e.jsxs(R,{children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Add Guest"]})]})]}),e.jsxs(ot,{defaultValue:"guests",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"guests",children:"Loyalty Guests"}),e.jsx(re,{value:"tiers",children:"Tier Management"}),e.jsx(re,{value:"rewards",children:"Rewards Program"}),e.jsx(re,{value:"analytics",children:"Analytics"}),e.jsx(re,{value:"settings",children:"Program Settings"})]}),e.jsxs(ne,{value:"guests",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Loyalty Guests"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalGuests})]}),e.jsx(st,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.activeGuests})]}),e.jsx(Do,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Points Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.totalPointsIssued.toLocaleString()})]}),e.jsx(us,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Stays per Guest"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:h.averageStays})]}),e.jsx(Ot,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(H,{placeholder:"Search guests...",value:t,onChange:x=>s(x.target.value)}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Tiers"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Tiers"}),e.jsx(P,{value:"Bronze",children:"Bronze"}),e.jsx(P,{value:"Silver",children:"Silver"}),e.jsx(P,{value:"Gold",children:"Gold"}),e.jsx(P,{value:"Platinum",children:"Platinum"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"inactive",children:"Inactive"})]})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Loyalty Members"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[d(x.tier),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.email})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:u(x.tier),children:x.tier}),e.jsx(q,{className:m(x.status),children:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Stays"}),e.jsx("p",{className:"font-medium",children:x.totalStays})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Spent"}),e.jsxs("p",{className:"font-medium",children:["$",x.totalSpent.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Points Balance"}),e.jsx("p",{className:"font-medium text-purple-600",children:x.pointsBalance})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Stay"}),e.jsx("p",{className:"font-medium",children:x.lastStay})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Booking"}),e.jsx("p",{className:"font-medium",children:x.nextBooking||"None scheduled"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Rewards Earned"}),e.jsx("p",{className:"font-medium text-green-600",children:x.rewardsEarned})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Preferences"}),e.jsx("div",{className:"flex gap-1",children:x.preferences.slice(0,3).map((g,p)=>e.jsx(q,{variant:"outline",className:"text-xs",children:g},p))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:"View Profile"}),e.jsx(R,{variant:"outline",size:"sm",children:"Send Offer"})]})]})]},x.id))})})]})]}),e.jsx(ne,{value:"tiers",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(x=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d(x.name),e.jsxs("span",{children:[x.name," Tier"]})]}),e.jsxs(q,{className:x.color,children:[x.minStays,"+ stays"]})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Member Benefits:"}),e.jsx("ul",{className:"space-y-1",children:x.benefits.map((g,p)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx(us,{className:"w-3 h-3 text-yellow-500"}),g]},p))})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Current Members: ",o.filter(g=>g.tier===x.name).length]})})]})]},x.name))})}),e.jsx(ne,{value:"rewards",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent Reward Activities"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Id,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.activity})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:x.date}),e.jsx(q,{variant:"outline",className:"text-xs",children:x.type.replace("_"," ")})]})]},x.id))})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Tier Distribution"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:l.map(x=>{const g=o.filter(f=>f.tier===x.name).length,p=(g/o.length*100).toFixed(1);return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[d(x.name),x.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${p}%`}})}),e.jsxs("span",{className:"text-sm w-12",children:[g," (",p,"%)"]})]})]},x.name)})})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Guest Retention Metrics"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"80%"}),e.jsx("p",{className:"text-gray-600",children:"Retention Rate"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Repeat Bookings"}),e.jsx("span",{className:"font-semibold",children:"75%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Tier Progression"}),e.jsx("span",{className:"font-semibold",children:"65%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Referral Rate"}),e.jsx("span",{className:"font-semibold",children:"25%"})]})]})]})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Loyalty Program Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Points System"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Points per $1 spent"}),e.jsx(H,{type:"number",defaultValue:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Points expiry (months)"}),e.jsx(H,{type:"number",defaultValue:"24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Bonus points for reviews"}),e.jsx(H,{type:"number",defaultValue:"100"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Communication"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Welcome email"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Birthday offers"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Points expiry alerts"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tier upgrade notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]})]}),e.jsx(R,{children:"Save Settings"})]})]})})]})]})}function a2(){const[t,s]=j.useState("all"),[r,n]=j.useState("all"),[a,i]=j.useState("month"),[l,o]=j.useState("invoices"),c=[{id:1,name:"Owner Revenue Share",description:"Monthly revenue distribution to property owners",defaultItems:["Booking Revenue Share","Management Fee","Maintenance Deduction","Utility Charges"]},{id:2,name:"Portfolio Manager Commission",description:"Commission payments to portfolio managers",defaultItems:["Management Commission","Performance Bonus","Override Commission"]},{id:3,name:"Agent Commission",description:"Commission payments to retail and referral agents",defaultItems:["Booking Commission","Referral Bonus","Performance Incentive"]},{id:4,name:"Service Provider Payment",description:"Payments to external service providers",defaultItems:["Service Fee","Materials Cost","Labor Charges"]},{id:5,name:"Expense Reimbursement",description:"Reimbursement for business expenses",defaultItems:["Travel Expenses","Material Purchases","Service Payments"]}],[d,u]=j.useState({invoiceNumber:"",clientType:"",clientName:"",property:"",template:"",issueDate:"",dueDate:"",description:"",items:[]}),[m,h]=j.useState({description:"",amount:""}),x=[{id:"INV-2025-001",clientName:"John Smith",clientType:"Owner",property:"Villa Samui Breeze",issueDate:"2025-01-15",dueDate:"2025-02-14",amount:2450,status:"paid",description:"December 2024 Revenue Share",items:[{description:"Booking Revenue (70% share)",amount:2100},{description:"Management Fee",amount:-150},{description:"Cleaning Services",amount:-75},{description:"Utility Charges",amount:-125},{description:"Platform Fees",amount:600}]},{id:"INV-2025-002",clientName:"Sarah Wilson",clientType:"Portfolio Manager",property:"Multiple Properties",issueDate:"2025-01-18",dueDate:"2025-02-17",amount:3200,status:"pending",description:"January 2025 Commission Payment",items:[{description:"Management Commission (15%)",amount:2800},{description:"Performance Bonus",amount:400}]},{id:"INV-2025-003",clientName:"Mike Chen",clientType:"Retail Agent",property:"Villa Aruna",issueDate:"2025-01-20",dueDate:"2025-02-19",amount:850,status:"overdue",description:"December 2024 Booking Commission",items:[{description:"Booking Commission (10%)",amount:750},{description:"Referral Bonus",amount:100}]},{id:"INV-2025-004",clientName:"HostPilotPro Management",clientType:"Internal",property:"Villa Paradise",issueDate:"2025-01-21",dueDate:"2025-02-20",amount:1200,status:"draft",description:"January 2025 Operating Expenses",items:[{description:"Staff Salaries",amount:800},{description:"Maintenance Costs",amount:250},{description:"Marketing Expenses",amount:150}]}],g=x.filter(M=>{const F=t==="all"||M.status===t,I=r==="all"||M.clientType===r,V=new Date(M.issueDate),E=new Date;let G=!0;if(a==="week"){const Y=new Date(E.getTime()-6048e5);G=V>=Y}else if(a==="month"){const Y=new Date(E.getFullYear(),E.getMonth()-1,E.getDate());G=V>=Y}else if(a==="quarter"){const Y=new Date(E.getFullYear(),E.getMonth()-3,E.getDate());G=V>=Y}else if(a==="year"){const Y=new Date(E.getFullYear()-1,E.getMonth(),E.getDate());G=V>=Y}return F&&I&&G}),p=M=>{switch(M){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},f=M=>{switch(M){case"Owner":return e.jsx(It,{className:"w-4 h-4"});case"Portfolio Manager":return e.jsx(Tt,{className:"w-4 h-4"});case"Retail Agent":return e.jsx(It,{className:"w-4 h-4"});case"Internal":return e.jsx(Tt,{className:"w-4 h-4"});default:return e.jsx(It,{className:"w-4 h-4"})}},v=M=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(M),b=()=>{m.description&&m.amount&&(u(M=>({...M,items:[...M.items,{description:m.description,amount:parseFloat(m.amount)}]})),h({description:"",amount:""}))},y=()=>{if(!d.clientName||!d.clientType||d.items.length===0){alert("Please fill in all required fields and add at least one line item.");return}const M={...d,id:d.invoiceNumber,amount:w(),status:"draft"};console.log("Creating invoice:",M),A(),o("invoices"),alert("Invoice created successfully!")},S=M=>{u(F=>({...F,items:F.items.filter((I,V)=>V!==M)}))},w=()=>d.items.reduce((M,F)=>M+F.amount,0),C=M=>{const F=c.find(I=>I.name===M);if(F){const I=F.defaultItems.map(V=>({description:V,amount:0}));u(V=>({...V,template:M,items:I}))}},k=()=>{const M=new Date().getFullYear(),F=String(new Date().getMonth()+1).padStart(2,"0"),I=String(x.length+1).padStart(3,"0");return`INV-${M}-${F}-${I}`},A=()=>{u({invoiceNumber:"",clientType:"",clientName:"",property:"",template:"",issueDate:"",dueDate:"",description:"",items:[]}),h({description:"",amount:""})},N={totalInvoices:x.length,totalAmount:x.reduce((M,F)=>M+F.amount,0),paidInvoices:x.filter(M=>M.status==="paid").length,overdueInvoices:x.filter(M=>M.status==="overdue").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(dt,{className:"w-8 h-8"}),"Invoice Generator"]}),e.jsx("p",{className:"text-gray-600",children:"Create, manage, and track invoices for owners, agents, and service providers"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(R,{onClick:()=>{o("create"),d.invoiceNumber||u(M=>({...M,invoiceNumber:k(),issueDate:new Date().toISOString().split("T")[0]}))},children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"New Invoice"]})]})]}),e.jsxs(ot,{value:l,onValueChange:o,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"invoices",children:"All Invoices"}),e.jsx(re,{value:"create",children:"Create Invoice"}),e.jsx(re,{value:"templates",children:"Templates"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsxs(ne,{value:"invoices",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold",children:N.totalInvoices})]}),e.jsx(dt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold",children:v(N.totalAmount)})]}),e.jsx(He,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:N.paidInvoices})]}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Paid"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:N.overdueInvoices})]}),e.jsx(q,{className:"bg-red-100 text-red-800",children:"Overdue"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"draft",children:"Draft"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"paid",children:"Paid"}),e.jsx(P,{value:"overdue",children:"Overdue"})]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Clients"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Clients"}),e.jsx(P,{value:"Owner",children:"Owners"}),e.jsx(P,{value:"Portfolio Manager",children:"Portfolio Managers"}),e.jsx(P,{value:"Retail Agent",children:"Retail Agents"}),e.jsx(P,{value:"Internal",children:"Internal"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"This Month"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"week",children:"This Week"}),e.jsx(P,{value:"month",children:"This Month"}),e.jsx(P,{value:"quarter",children:"This Quarter"}),e.jsx(P,{value:"year",children:"This Year"})]})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{children:"Recent Invoices"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",g.length," of ",x.length," invoices"]}),(t!=="all"||r!=="all"||a!=="month")&&e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{s("all"),n("all"),i("month")},children:"Clear Filters"})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:g.map(M=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[f(M.clientType),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:M.id}),e.jsx("p",{className:"text-sm text-gray-600",children:M.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:p(M.status),children:M.status}),e.jsx("span",{className:"font-bold text-green-600",children:v(M.amount)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Client"}),e.jsx("p",{className:"font-medium",children:M.clientName}),e.jsx("p",{className:"text-xs text-gray-500",children:M.clientType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Property"}),e.jsx("p",{className:"font-medium",children:M.property})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Issue Date"}),e.jsx("p",{className:"font-medium",children:M.issueDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:M.dueDate})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Line Items"}),e.jsxs("p",{className:"font-medium",children:[M.items.length," items"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"}),"Created: ",M.issueDate]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx($t,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(as,{className:"w-3 h-3 mr-1"}),"PDF"]}),M.status==="draft"&&e.jsx(R,{size:"sm",children:"Send Invoice"})]})]})]},M.id))})})]})]}),e.jsx(ne,{value:"create",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Create New Invoice"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Invoice Number"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{value:d.invoiceNumber,onChange:M=>u({...d,invoiceNumber:M.target.value}),placeholder:"INV-2025-005"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>u({...d,invoiceNumber:k()}),children:"Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Client Type"}),e.jsxs(te,{value:d.clientType,onValueChange:M=>u({...d,clientType:M}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select client type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"owner",children:"Property Owner"}),e.jsx(P,{value:"pm",children:"Portfolio Manager"}),e.jsx(P,{value:"agent",children:"Retail Agent"}),e.jsx(P,{value:"referral",children:"Referral Agent"}),e.jsx(P,{value:"vendor",children:"Service Provider"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Client Name"}),e.jsx(H,{value:d.clientName,onChange:M=>u({...d,clientName:M.target.value}),placeholder:"Enter client name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Property"}),e.jsxs(te,{value:d.property,onValueChange:M=>u({...d,property:M}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(P,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(P,{value:"villa-paradise",children:"Villa Paradise"}),e.jsx(P,{value:"multiple",children:"Multiple Properties"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Template"}),e.jsxs(te,{value:d.template,onValueChange:M=>{u({...d,template:M}),C(M)},children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select template"})}),e.jsx(ee,{children:c.map(M=>e.jsx(P,{value:M.name,children:M.name},M.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Issue Date"}),e.jsx(H,{type:"date",value:d.issueDate,onChange:M=>u({...d,issueDate:M.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Due Date"}),e.jsx(H,{type:"date",value:d.dueDate,onChange:M=>u({...d,dueDate:M.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Description"}),e.jsx(H,{value:d.description,onChange:M=>u({...d,description:M.target.value}),placeholder:"Invoice description"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Line Items"}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(H,{value:m.description,onChange:M=>h({...m,description:M.target.value}),placeholder:"Description"}),e.jsx(H,{type:"number",value:m.amount,onChange:M=>h({...m,amount:M.target.value}),placeholder:"Amount"}),e.jsx(R,{variant:"outline",onClick:b,disabled:!m.description||!m.amount,children:"Add Item"})]}),d.items.length>0&&e.jsx("div",{className:"space-y-2 pt-3 border-t",children:d.items.map((M,F)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"flex-1",children:e.jsx(H,{value:M.description,onChange:I=>{const V=[...d.items];V[F].description=I.target.value,u({...d,items:V})},className:"mb-1"})}),e.jsx("div",{className:"w-32 mx-2",children:e.jsx(H,{type:"number",value:M.amount,onChange:I=>{const V=[...d.items];V[F].amount=parseFloat(I.target.value)||0,u({...d,items:V})}})}),e.jsx(R,{variant:"destructive",size:"sm",onClick:()=>S(F),children:"Remove"})]},F))}),d.items.length===0&&e.jsx("div",{className:"text-sm text-gray-600",children:d.template?"Template items loaded above. You can edit amounts or add new items.":"Add line items or select a template to populate default items"})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"text-lg font-bold",children:["Total: ",e.jsx("span",{className:"text-green-600",children:v(w())})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{variant:"outline",onClick:()=>{console.log("Saving invoice as draft:",d),alert("Invoice saved as draft")},children:"Save as Draft"}),e.jsx(R,{onClick:y,disabled:!d.invoiceNumber||!d.clientName||d.items.length===0,children:"Generate Invoice"}),e.jsx(R,{variant:"outline",onClick:A,children:"Clear Form"})]})]})]})]})}),e.jsx(ne,{value:"templates",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(M=>e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsx("span",{children:M.name}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{o("create"),C(M.name)},children:"Use Template"})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:M.description}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Default Line Items:"}),e.jsx("ul",{className:"space-y-1",children:M.defaultItems.map((F,I)=>e.jsxs("li",{className:"text-sm flex items-center gap-2",children:[e.jsx(dt,{className:"w-3 h-3 text-gray-400"}),F]},I))})]})]})]},M.id))})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Invoice Status Distribution"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Paid"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pending"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Overdue"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Draft"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gray-500 h-2 rounded-full",style:{width:"25%"}})}),e.jsx("span",{className:"text-sm",children:"1 (25%)"})]})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Monthly Invoice Totals"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:v(N.totalAmount)}),e.jsx("p",{className:"text-gray-600",children:"January 2025 Total"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Owners"}),e.jsx("span",{className:"font-semibold",children:"$2,450"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Portfolio Managers"}),e.jsx("span",{className:"font-semibold",children:"$3,200"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Agents"}),e.jsx("span",{className:"font-semibold",children:"$850"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Internal"}),e.jsx("span",{className:"font-semibold",children:"$1,200"})]})]})]})]})]})})]})]})}function aW(){const[t,s]=j.useState("all"),[r,n]=j.useState("all"),[a,i]=j.useState("month"),l=[{id:1,name:"Niran Thaksin",position:"Head Housekeeper",baseSalary:25e3,overtimeRate:150,currentAdvance:5e3,totalOvertime:32.5,overtimeEarnings:4875,status:"active",department:"housekeeping"},{id:2,name:"Somchai Patel",position:"Pool Maintenance",baseSalary:22e3,overtimeRate:135,currentAdvance:0,totalOvertime:15,overtimeEarnings:2025,status:"active",department:"maintenance"},{id:3,name:"Malee Kasem",position:"Guest Relations",baseSalary:28e3,overtimeRate:170,currentAdvance:8e3,totalOvertime:28,overtimeEarnings:4760,status:"active",department:"guest_services"},{id:4,name:"Kamon Saetang",position:"Security Guard",baseSalary:2e4,overtimeRate:120,currentAdvance:3e3,totalOvertime:45,overtimeEarnings:5400,status:"active",department:"security"},{id:5,name:"Ploy Chamnong",position:"Chef Assistant",baseSalary:18e3,overtimeRate:110,currentAdvance:2e3,totalOvertime:12,overtimeEarnings:1320,status:"active",department:"kitchen"}],o=[{id:1,staffName:"Niran Thaksin",date:"2025-01-20",regularHours:8,overtimeHours:4,reason:"Guest checkout deep cleaning",approvedBy:"Jane Manager",amount:600,status:"approved"},{id:2,staffName:"Malee Kasem",date:"2025-01-19",regularHours:8,overtimeHours:3,reason:"Late guest check-in assistance",approvedBy:"Pending",amount:510,status:"pending"},{id:3,staffName:"Kamon Saetang",date:"2025-01-18",regularHours:8,overtimeHours:6,reason:"Night security coverage",approvedBy:"John Admin",amount:720,status:"approved"},{id:4,staffName:"Somchai Patel",date:"2025-01-17",regularHours:8,overtimeHours:2,reason:"Emergency pool repair",approvedBy:"Jane Manager",amount:270,status:"approved"}],c=[{id:1,staffName:"Malee Kasem",requestDate:"2025-01-10",amount:8e3,reason:"Medical emergency for family member",approvedBy:"John Admin",repaymentPlan:"4 months",remainingBalance:6e3,status:"active"},{id:2,staffName:"Niran Thaksin",requestDate:"2025-01-05",amount:5e3,reason:"Children school fees",approvedBy:"Jane Manager",repaymentPlan:"3 months",remainingBalance:3333,status:"active"},{id:3,staffName:"Kamon Saetang",requestDate:"2024-12-20",amount:3e3,reason:"Home renovation",approvedBy:"John Admin",repaymentPlan:"2 months",remainingBalance:1500,status:"active"},{id:4,staffName:"Ploy Chamnong",requestDate:"2024-12-15",amount:2e3,reason:"Motorbike repair",approvedBy:"Jane Manager",repaymentPlan:"2 months",remainingBalance:1e3,status:"active"}],d=x=>{switch(x){case"housekeeping":return"bg-blue-100 text-blue-800";case"maintenance":return"bg-orange-100 text-orange-800";case"guest_services":return"bg-green-100 text-green-800";case"security":return"bg-red-100 text-red-800";case"kitchen":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},u=x=>{switch(x){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=x=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(x),h={totalStaff:l.length,totalOvertimeHours:o.reduce((x,g)=>x+g.overtimeHours,0),totalOvertimePay:o.reduce((x,g)=>x+g.amount,0),totalAdvances:c.reduce((x,g)=>x+g.remainingBalance,0)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Ke,{className:"w-8 h-8"}),"Staff Advance & Overtime Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track salary advances, overtime hours, and additional compensation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Generate Report"]}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"New Request"]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"overview",children:"Staff Overview"}),e.jsx(re,{value:"overtime",children:"Overtime Records"}),e.jsx(re,{value:"advances",children:"Salary Advances"}),e.jsx(re,{value:"payroll",children:"Payroll Summary"}),e.jsx(re,{value:"settings",children:"Settings"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:h.totalStaff})]}),e.jsx(st,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overtime Hours"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:h.totalOvertimeHours})]}),e.jsx(Ke,{className:"w-8 h-8 text-orange-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overtime Pay"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m(h.totalOvertimePay)})]}),e.jsx(He,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Advances"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:m(h.totalAdvances)})]}),e.jsx(Et,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Staff"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Staff"}),l.map(x=>e.jsx(P,{value:x.name,children:x.name},x.id))]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"approved",children:"Approved"}),e.jsx(P,{value:"pending",children:"Pending"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"This Month"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"week",children:"This Week"}),e.jsx(P,{value:"month",children:"This Month"}),e.jsx(P,{value:"quarter",children:"This Quarter"}),e.jsx(P,{value:"year",children:"This Year"})]})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Staff Members"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(st,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.position})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:d(x.department),children:x.department.replace("_"," ")}),e.jsx(q,{className:u(x.status),children:x.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:m(x.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Rate"}),e.jsxs("p",{className:"font-medium",children:[m(x.overtimeRate),"/hr"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Overtime"}),e.jsxs("p",{className:"font-medium text-orange-600",children:[x.totalOvertime," hrs"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Earnings"}),e.jsx("p",{className:"font-medium text-green-600",children:m(x.overtimeEarnings)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Current Advance"}),e.jsx("p",{className:"font-medium text-red-600",children:m(x.currentAdvance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Net Earnings"}),e.jsx("p",{className:"font-medium text-blue-600",children:m(x.baseSalary+x.overtimeEarnings-x.currentAdvance)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Department: ",x.department.replace("_"," ")," • Position: ",x.position]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(R,{variant:"outline",size:"sm",children:"Edit"})]})]})]},x.id))})})]})]}),e.jsx(ne,{value:"overtime",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Overtime Records"}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Log Overtime"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"w-4 h-4 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.staffName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:[x.date," • ",x.regularHours,"h regular + ",x.overtimeHours,"h overtime"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-green-600",children:m(x.amount)}),e.jsx(q,{className:u(x.status),children:x.status}),e.jsx("p",{className:"text-xs text-gray-500",children:x.status==="approved"?`by ${x.approvedBy}`:"Pending approval"})]})]},x.id))})})]})}),e.jsx(ne,{value:"advances",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Salary Advances"}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"New Advance"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(He,{className:"w-5 h-5 text-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.staffName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.reason}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Requested: ",x.requestDate," • Approved by: ",x.approvedBy]})]})]}),e.jsx(q,{className:u(x.status),children:x.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Original Amount"}),e.jsx("p",{className:"font-medium",children:m(x.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Remaining Balance"}),e.jsx("p",{className:"font-medium text-red-600",children:m(x.remainingBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Repayment Plan"}),e.jsx("p",{className:"font-medium",children:x.repaymentPlan})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Progress"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${(x.amount-x.remainingBalance)/x.amount*100}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((x.amount-x.remainingBalance)/x.amount*100).toFixed(1),"% repaid"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Monthly deduction: ",m(x.remainingBalance/parseInt(x.repaymentPlan))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(R,{variant:"outline",size:"sm",children:"Adjust Plan"})]})]})]},x.id))})})]})}),e.jsx(ne,{value:"payroll",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Monthly Payroll Summary"})}),e.jsxs(D,{children:[e.jsx("div",{className:"space-y-4",children:l.map(x=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x.position})]}),e.jsx(q,{className:d(x.department),children:x.department.replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:m(x.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Overtime Pay"}),e.jsxs("p",{className:"font-medium text-green-600",children:["+",m(x.overtimeEarnings)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Advance Deduction"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",m(x.currentAdvance/3)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Net Pay"}),e.jsx("p",{className:"font-bold text-blue-600",children:m(x.baseSalary+x.overtimeEarnings-x.currentAdvance/3)})]}),e.jsx("div",{children:e.jsxs(R,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),"Process Pay"]})})]})]},x.id))}),e.jsx("div",{className:"border-t pt-4 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Base Salaries"}),e.jsx("p",{className:"text-lg font-bold",children:m(l.reduce((x,g)=>x+g.baseSalary,0))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Overtime Pay"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:m(l.reduce((x,g)=>x+g.overtimeEarnings,0))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Advance Deductions"}),e.jsxs("p",{className:"text-lg font-bold text-red-600",children:["-",m(l.reduce((x,g)=>x+g.currentAdvance/3,0))]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Net Payroll"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:m(l.reduce((x,g)=>x+g.baseSalary+g.overtimeEarnings-g.currentAdvance/3,0))})]})]})})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Payroll Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Overtime Configuration"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Standard Overtime Multiplier"}),e.jsx(H,{type:"number",defaultValue:"1.5",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Holiday Overtime Multiplier"}),e.jsx(H,{type:"number",defaultValue:"2.0",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Daily Overtime Threshold (hours)"}),e.jsx(H,{type:"number",defaultValue:"8"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Advance Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Maximum Advance (% of salary)"}),e.jsx(H,{type:"number",defaultValue:"50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default Repayment Period (months)"}),e.jsx(H,{type:"number",defaultValue:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Minimum Service Period (months)"}),e.jsx(H,{type:"number",defaultValue:"6"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Approval Workflow"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Require manager approval for overtime"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Require admin approval for advances"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-approve overtime under 2 hours"}),e.jsx("input",{type:"checkbox"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Send notifications for pending approvals"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsx(R,{children:"Save Settings"})]})]})})]})]})}function iW(){const[t,s]=j.useState("all"),[r,n]=j.useState("all"),[a,i]=j.useState("realistic"),l=[{id:1,name:"Property Management Demo",description:"Comprehensive property portfolio with Villa Samui Breeze, Villa Aruna, and Villa Paradise",status:"active",lastUpdated:"2025-01-22",records:145,coverage:"100%",features:["Properties","Bookings","Tasks","Maintenance","Financial Tracking"]},{id:2,name:"Guest Services Demo",description:"Complete guest lifecycle from check-in to check-out with AI recommendations",status:"active",lastUpdated:"2025-01-22",records:89,coverage:"95%",features:["Guest Portal","Smart Requests","Activity Recommendations","Service Timeline"]},{id:3,name:"Financial Operations Demo",description:"Revenue tracking, commission calculations, and expense management",status:"active",lastUpdated:"2025-01-22",records:267,coverage:"98%",features:["Booking Revenue","Commission Tracking","Expense Reports","Invoicing"]},{id:4,name:"Staff Management Demo",description:"Staff profiles, task assignments, payroll, and performance tracking",status:"active",lastUpdated:"2025-01-22",records:156,coverage:"92%",features:["Staff Profiles","Task Management","Payroll","Overtime Tracking"]},{id:5,name:"Agent & Partner Demo",description:"Retail and referral agent management with commission tracking",status:"active",lastUpdated:"2025-01-22",records:78,coverage:"88%",features:["Agent Profiles","Commission Tracking","Performance Analytics","Booking Engine"]}],o=[{id:1,name:"John Admin",role:"admin",email:"admin@test.com",lastActive:"2025-01-22 09:30",sessionsCount:15,modulesAccessed:8},{id:2,name:"Jane Manager",role:"portfolio-manager",email:"manager@test.com",lastActive:"2025-01-22 08:45",sessionsCount:12,modulesAccessed:6},{id:3,name:"Bob Owner",role:"owner",email:"owner@test.com",lastActive:"2025-01-21 18:20",sessionsCount:8,modulesAccessed:4},{id:4,name:"Sarah Staff",role:"staff",email:"staff@test.com",lastActive:"2025-01-22 07:15",sessionsCount:20,modulesAccessed:5},{id:5,name:"Mike Agent",role:"retail-agent",email:"agent@test.com",lastActive:"2025-01-21 16:30",sessionsCount:6,modulesAccessed:3}],c={totalModules:l.length,activeModules:l.filter(h=>h.status==="active").length,totalRecords:l.reduce((h,x)=>h+x.records,0),averageCoverage:(l.reduce((h,x)=>h+parseInt(x.coverage),0)/l.length).toFixed(1)},d=h=>{switch(h){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"updating":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},u=h=>{switch(h){case"admin":return"bg-red-100 text-red-800";case"portfolio-manager":return"bg-blue-100 text-blue-800";case"owner":return"bg-green-100 text-green-800";case"staff":return"bg-purple-100 text-purple-800";case"retail-agent":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},m=h=>{const x=parseInt(h);return x>=95?"text-green-600":x>=80?"text-yellow-600":"text-red-600"};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(pn,{className:"w-8 h-8"}),"System-Wide Demo Integration"]}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive demo data management and system integration overview"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Configure Demo"]}),e.jsxs(R,{children:[e.jsx(Eo,{className:"w-4 h-4 mr-2"}),"Refresh All Data"]})]})]}),e.jsxs(ot,{defaultValue:"modules",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"modules",children:"Demo Modules"}),e.jsx(re,{value:"users",children:"Demo Users"}),e.jsx(re,{value:"integration",children:"Integration Status"}),e.jsx(re,{value:"analytics",children:"System Analytics"}),e.jsx(re,{value:"settings",children:"Demo Settings"})]}),e.jsxs(ne,{value:"modules",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Modules"}),e.jsx("p",{className:"text-2xl font-bold",children:c.totalModules})]}),e.jsx(pn,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Modules"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.activeModules})]}),e.jsx(Me,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Demo Records"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.totalRecords.toLocaleString()})]}),e.jsx(He,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Coverage"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[c.averageCoverage,"%"]})]}),e.jsx(Ut,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Modules"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Modules"}),e.jsx(P,{value:"property",children:"Property Management"}),e.jsx(P,{value:"guest",children:"Guest Services"}),e.jsx(P,{value:"financial",children:"Financial Operations"}),e.jsx(P,{value:"staff",children:"Staff Management"})]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"inactive",children:"Inactive"}),e.jsx(P,{value:"updating",children:"Updating"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Demo Mode"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"realistic",children:"Realistic Data"}),e.jsx(P,{value:"minimal",children:"Minimal Data"}),e.jsx(P,{value:"comprehensive",children:"Comprehensive"})]})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Demo Modules"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:l.map(h=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pn,{className:"w-5 h-5 text-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:d(h.status),children:h.status}),e.jsx("span",{className:`font-bold ${m(h.coverage)}`,children:h.coverage})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:h.lastUpdated})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Demo Records"}),e.jsx("p",{className:"font-medium text-purple-600",children:h.records})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Coverage"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:h.coverage}})}),e.jsx("span",{className:"text-sm",children:h.coverage})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Features"}),e.jsxs("p",{className:"font-medium",children:[h.features.length," modules"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Features Included"}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[h.features.slice(0,3).map((x,g)=>e.jsx(q,{variant:"outline",className:"text-xs",children:x},g)),h.features.length>3&&e.jsxs(q,{variant:"outline",className:"text-xs",children:["+",h.features.length-3," more"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(R,{variant:"outline",size:"sm",children:"Refresh Data"})]})]})]},h.id))})})]})]}),e.jsx(ne,{value:"users",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Demo User Accounts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(st,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{className:u(h.role),children:h.role}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("p",{className:"font-medium",children:[h.sessionsCount," sessions"]}),e.jsxs("p",{className:"text-gray-500",children:[h.modulesAccessed," modules accessed"]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("p",{className:"text-gray-500",children:"Last active:"}),e.jsx("p",{className:"font-medium",children:h.lastActive})]}),e.jsx(R,{variant:"outline",size:"sm",children:"Login As"})]})]},h.id))})})]})}),e.jsx(ne,{value:"integration",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"System Integration Health"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Database Connection"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Healthy"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Demo Data Sync"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Synced"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Cross-Module References"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Valid"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"User Authentication"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"API Endpoints"}),e.jsx(q,{className:"bg-yellow-100 text-yellow-800",children:"98% Responsive"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Data Consistency Report"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:"99.2%"}),e.jsx("p",{className:"text-gray-600",children:"Overall Data Integrity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Property Records"}),e.jsx("span",{className:"font-semibold",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"User Profiles"}),e.jsx("span",{className:"font-semibold",children:"100%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Financial Data"}),e.jsx("span",{className:"font-semibold",children:"98.5%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Task Management"}),e.jsx("span",{className:"font-semibold",children:"99.1%"})]})]})]})]})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Usage Statistics"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"1,247"}),e.jsx("p",{className:"text-gray-600",children:"Total Demo Interactions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Page Views"}),e.jsx("span",{className:"font-semibold",children:"856"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"API Calls"}),e.jsx("span",{className:"font-semibold",children:"391"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"User Sessions"}),e.jsx("span",{className:"font-semibold",children:"61"})]})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Most Accessed Modules"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property Management"}),e.jsx("span",{className:"font-semibold",children:"34%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Financial Dashboard"}),e.jsx("span",{className:"font-semibold",children:"28%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Task Management"}),e.jsx("span",{className:"font-semibold",children:"18%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Guest Services"}),e.jsx("span",{className:"font-semibold",children:"12%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Staff Management"}),e.jsx("span",{className:"font-semibold",children:"8%"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Performance Metrics"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"245ms"}),e.jsx("p",{className:"text-gray-600",children:"Average Response Time"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Uptime"}),e.jsx("span",{className:"font-semibold",children:"99.8%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Error Rate"}),e.jsx("span",{className:"font-semibold",children:"0.2%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Cache Hit Rate"}),e.jsx("span",{className:"font-semibold",children:"94.5%"})]})]})]})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Demo Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Data Generation"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-refresh demo data"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Generate realistic timestamps"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Cross-reference data integrity"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Refresh interval (hours)"}),e.jsx(H,{type:"number",defaultValue:"24"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Demo Modes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Default demo mode"}),e.jsxs(te,{defaultValue:"realistic",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"minimal",children:"Minimal Data"}),e.jsx(P,{value:"realistic",children:"Realistic Data"}),e.jsx(P,{value:"comprehensive",children:"Comprehensive"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"User session timeout (minutes)"}),e.jsx(H,{type:"number",defaultValue:"60"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx("div",{children:e.jsx(R,{variant:"outline",children:"Reset All Demo Data"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(R,{variant:"outline",children:"Export Configuration"}),e.jsx(R,{children:"Save Settings"})]})]})]})]})})]})]})}function lW(){const[t,s]=j.useState("all"),[r,n]=j.useState("all"),[a,i]=j.useState("all"),l=[{id:1,property:"Villa Samui Breeze",category:"HVAC",description:"Air conditioning system service and filter replacement",date:"2025-01-20",technician:"Somchai HVAC Services",cost:2500,status:"completed",warrantyExpiry:"2025-07-20",nextService:"2025-04-20",priority:"medium",photos:["ac_service_1.jpg","filter_replacement.jpg"]},{id:2,property:"Villa Aruna",category:"Pool",description:"Pool pump replacement and chemical balancing",date:"2025-01-18",technician:"AquaTech Pool Services",cost:4200,status:"completed",warrantyExpiry:"2026-01-18",nextService:"2025-02-18",priority:"high",photos:["pool_pump_before.jpg","pool_pump_after.jpg"]},{id:3,property:"Villa Paradise",category:"Plumbing",description:"Kitchen sink faucet repair and pipe inspection",date:"2025-01-15",technician:"Thailand Plumbing Co.",cost:800,status:"completed",warrantyExpiry:"2025-06-15",nextService:"2025-07-15",priority:"low",photos:["faucet_repair.jpg"]},{id:4,property:"Villa Samui Breeze",category:"Electrical",description:"Main electrical panel upgrade and safety inspection",date:"2025-01-12",technician:"PowerTech Electrical",cost:6500,status:"in_progress",warrantyExpiry:"2027-01-12",nextService:"2025-06-12",priority:"high",photos:["electrical_panel_new.jpg"]},{id:5,property:"Villa Aruna",category:"Garden",description:"Irrigation system installation and landscaping",date:"2025-01-10",technician:"Green Gardens Thailand",cost:3200,status:"scheduled",warrantyExpiry:"2025-12-10",nextService:"2025-03-10",priority:"medium",photos:[]}],o=[{id:1,property:"Villa Paradise",item:"Water heater unit",category:"Plumbing",purchaseDate:"2024-01-15",warrantyExpiry:"2025-01-15",daysUntilExpiry:-7,status:"expired",vendor:"Rheem Thailand",cost:8500},{id:2,property:"Villa Samui Breeze",item:"Refrigerator - Kitchen",category:"Appliances",purchaseDate:"2023-06-20",warrantyExpiry:"2025-06-20",daysUntilExpiry:149,status:"warning",vendor:"Samsung Electronics",cost:15e3},{id:3,property:"Villa Aruna",item:"Solar panel system",category:"Electrical",purchaseDate:"2022-11-10",warrantyExpiry:"2027-11-10",daysUntilExpiry:1024,status:"active",vendor:"Thai Solar Solutions",cost:45e3}],c=[{id:1,property:"Villa Samui Breeze",prediction:"Pool pump replacement recommended",confidence:87,category:"Pool",estimatedCost:4500,timeframe:"2-3 months",reasoning:"Based on usage patterns and similar equipment lifecycle",priority:"medium"},{id:2,property:"Villa Paradise",prediction:"HVAC system deep cleaning required",confidence:92,category:"HVAC",estimatedCost:1200,timeframe:"1 month",reasoning:"Seasonal maintenance due and efficiency monitoring indicates need",priority:"high"},{id:3,property:"Villa Aruna",prediction:"Roof inspection and minor repairs",confidence:74,category:"Structure",estimatedCost:2800,timeframe:"6 months",reasoning:"Age of property and recent weather patterns suggest preventive maintenance",priority:"low"}],d=g=>{switch(g){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},u=g=>{switch(g){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"warning":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=g=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(g),x={totalRecords:l.length,completedTasks:l.filter(g=>g.status==="completed").length,totalCost:l.reduce((g,p)=>g+p.cost,0),warrantyAlerts:o.filter(g=>g.status==="warning"||g.status==="expired").length};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(As,{className:"w-8 h-8"}),"Maintenance Log & Warranty Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track maintenance records, warranty status, and AI-powered service predictions"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Log Maintenance"]})]})]}),e.jsxs(ot,{defaultValue:"maintenance",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"maintenance",children:"Maintenance Log"}),e.jsx(re,{value:"warranty",children:"Warranty Tracker"}),e.jsx(re,{value:"predictions",children:"AI Predictions"}),e.jsx(re,{value:"analytics",children:"Analytics"}),e.jsx(re,{value:"settings",children:"Settings"})]}),e.jsxs(ne,{value:"maintenance",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalRecords})]}),e.jsx(As,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.completedTasks})]}),e.jsx(Me,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h(x.totalCost)})]}),e.jsx(He,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Warranty Alerts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.warrantyAlerts})]}),e.jsx(Nt,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),e.jsx(P,{value:"villa-samui",children:"Villa Samui Breeze"}),e.jsx(P,{value:"villa-aruna",children:"Villa Aruna"}),e.jsx(P,{value:"villa-paradise",children:"Villa Paradise"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Categories"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Categories"}),e.jsx(P,{value:"hvac",children:"HVAC"}),e.jsx(P,{value:"pool",children:"Pool"}),e.jsx(P,{value:"plumbing",children:"Plumbing"}),e.jsx(P,{value:"electrical",children:"Electrical"}),e.jsx(P,{value:"garden",children:"Garden"})]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"completed",children:"Completed"}),e.jsx(P,{value:"in_progress",children:"In Progress"}),e.jsx(P,{value:"scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(H,{placeholder:"Search maintenance...",className:"pl-10"})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Maintenance Records"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:l.map(g=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(As,{className:"w-5 h-5 text-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:g.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[g.property," • ",g.category]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Technician: ",g.technician]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:u(g.priority),children:g.priority}),e.jsx(q,{className:d(g.status),children:g.status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium",children:g.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cost"}),e.jsx("p",{className:"font-medium text-green-600",children:h(g.cost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Warranty Until"}),e.jsx("p",{className:"font-medium",children:g.warrantyExpiry})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Next Service"}),e.jsx("p",{className:"font-medium",children:g.nextService})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Photos"}),e.jsxs("p",{className:"font-medium",children:[g.photos.length," attachments"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Category: ",g.category," • Priority: ",g.priority]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:"View Photos"}),e.jsx(R,{variant:"outline",size:"sm",children:"Edit Record"})]})]})]},g.id))})})]})]}),e.jsx(ne,{value:"warranty",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warranty Alerts"}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Warranty"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:o.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_t,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.item}),e.jsxs("p",{className:"text-sm text-gray-600",children:[g.property," • ",g.category]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Vendor: ",g.vendor," • Cost: ",h(g.cost)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(q,{className:m(g.status),children:g.status}),e.jsx("p",{className:"text-sm font-medium mt-1",children:g.daysUntilExpiry<0?`Expired ${Math.abs(g.daysUntilExpiry)} days ago`:`${g.daysUntilExpiry} days remaining`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Expires: ",g.warrantyExpiry]})]})]},g.id))})})]})}),e.jsx(ne,{value:"predictions",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"AI Maintenance Predictions"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:c.map(g=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:g.prediction}),e.jsxs("p",{className:"text-sm text-gray-600",children:[g.property," • ",g.category]}),e.jsx("p",{className:"text-xs text-gray-500",children:g.reasoning})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:u(g.priority),children:g.priority}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[g.confidence,"% confidence"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Estimated Cost"}),e.jsx("p",{className:"font-medium text-orange-600",children:h(g.estimatedCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Timeframe"}),e.jsx("p",{className:"font-medium",children:g.timeframe})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Confidence"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${g.confidence}%`}})}),e.jsxs("span",{className:"text-sm",children:[g.confidence,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["AI Recommendation • ",g.category," • ",g.priority," priority"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:"Schedule Maintenance"}),e.jsx(R,{variant:"outline",size:"sm",children:"Dismiss"})]})]})]},g.id))})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Maintenance Cost by Category"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"HVAC Systems"}),e.jsx("span",{className:"font-bold",children:h(2500)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pool Maintenance"}),e.jsx("span",{className:"font-bold",children:h(4200)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Electrical Work"}),e.jsx("span",{className:"font-bold",children:h(6500)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Garden & Landscaping"}),e.jsx("span",{className:"font-bold",children:h(3200)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Plumbing"}),e.jsx("span",{className:"font-bold",children:h(800)})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Upcoming Maintenance"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Aruna - Pool Service"}),e.jsx("span",{className:"text-sm font-medium",children:"Feb 18, 2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Paradise - HVAC Service"}),e.jsx("span",{className:"text-sm font-medium",children:"Mar 10, 2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Samui - Pool Service"}),e.jsx("span",{className:"text-sm font-medium",children:"Apr 20, 2025"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Villa Aruna - Electrical Inspection"}),e.jsx("span",{className:"text-sm font-medium",children:"Jun 12, 2025"})]})]})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Maintenance Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warranty expiry alerts (days before)"}),e.jsx(H,{type:"number",defaultValue:"30",className:"w-20"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Maintenance due reminders"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"AI prediction notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"AI Prediction Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Minimum confidence threshold"}),e.jsx(H,{type:"number",defaultValue:"75",className:"w-20"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Enable predictive maintenance"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-schedule high confidence predictions"}),e.jsx("input",{type:"checkbox"})]})]})]})]}),e.jsx(R,{children:"Save Settings"})]})]})})]})]})}function oW(){const[t,s]=j.useState("all"),[r,n]=j.useState("current"),[a,i]=j.useState("all"),l=[{id:1,name:"Somchai Jaidee",role:"Maintenance Supervisor",department:"Maintenance",email:"somchai@hostpilotpro.com",phone:"+66 81 234 5678",address:"123 Soi Sukhumvit 42, Bangkok 10110",startDate:"2023-03-15",baseSalary:35e3,status:"active",avatar:"/avatars/somchai.jpg",skills:["HVAC","Plumbing","Electrical","Pool Maintenance"],certifications:["Thai Electrical License","Pool Chemical Handler"],emergencyContact:{name:"Malee Jaidee",relationship:"Spouse",phone:"+66 89 765 4321"}},{id:2,name:"Niran Thepsiri",role:"Housekeeping Manager",department:"Housekeeping",email:"niran@hostpilotpro.com",phone:"+66 82 345 6789",address:"456 Thanon Phra Ram 4, Bangkok 10110",startDate:"2022-11-20",baseSalary:32e3,status:"active",avatar:"/avatars/niran.jpg",skills:["Team Leadership","Quality Control","Inventory Management"],certifications:["Hospitality Management Certificate"],emergencyContact:{name:"Preecha Thepsiri",relationship:"Father",phone:"+66 81 876 5432"}},{id:3,name:"Apinya Khamchong",role:"Guest Services Coordinator",department:"Guest Services",email:"apinya@hostpilotpro.com",phone:"+66 83 456 7890",address:"789 Soi Thonglor 15, Bangkok 10110",startDate:"2023-08-10",baseSalary:28e3,status:"active",avatar:"/avatars/apinya.jpg",skills:["Customer Service","English/Thai Translation","Concierge Services"],certifications:["Tourism Authority License","First Aid Certificate"],emergencyContact:{name:"Siriporn Khamchong",relationship:"Mother",phone:"+66 84 567 8901"}},{id:4,name:"Wichai Suwanapong",role:"Security Officer",department:"Security",email:"wichai@hostpilotpro.com",phone:"+66 85 567 8901",address:"321 Soi Asoke 12, Bangkok 10110",startDate:"2024-01-05",baseSalary:26e3,status:"active",avatar:"/avatars/wichai.jpg",skills:["Security Protocols","Emergency Response","CCTV Operations"],certifications:["Security Guard License","CPR Certification"],emergencyContact:{name:"Chanida Suwanapong",relationship:"Sister",phone:"+66 86 678 9012"}}],o=[{id:1,staffId:1,payPeriod:"January 2025",baseSalary:35e3,overtime:2800,bonus:5e3,deductions:1200,netPay:41600,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:14},{id:2,staffId:2,payPeriod:"January 2025",baseSalary:32e3,overtime:1600,bonus:3e3,deductions:1e3,netPay:35600,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:8},{id:3,staffId:3,payPeriod:"January 2025",baseSalary:28e3,overtime:1200,bonus:2e3,deductions:800,netPay:30400,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:6},{id:4,staffId:4,payPeriod:"January 2025",baseSalary:26e3,overtime:2400,bonus:1500,deductions:700,netPay:29200,payDate:"2025-01-31",status:"paid",workingDays:22,overtimeHours:12}],c=[{staffId:1,date:"2025-01-22",checkIn:"08:00",checkOut:"17:00",status:"present",hoursWorked:8,overtime:1},{staffId:1,date:"2025-01-21",checkIn:"08:00",checkOut:"18:30",status:"present",hoursWorked:8,overtime:2.5},{staffId:2,date:"2025-01-22",checkIn:"07:30",checkOut:"16:30",status:"present",hoursWorked:8,overtime:0},{staffId:3,date:"2025-01-22",checkIn:"09:00",checkOut:"18:00",status:"present",hoursWorked:8,overtime:0}],d=g=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(g),u=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},m=g=>{switch(g){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},h=g=>{switch(g){case"Maintenance":return"bg-orange-100 text-orange-800";case"Housekeeping":return"bg-purple-100 text-purple-800";case"Guest Services":return"bg-blue-100 text-blue-800";case"Security":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x={totalStaff:l.length,activeStaff:l.filter(g=>g.status==="active").length,monthlyPayroll:o.reduce((g,p)=>g+p.netPay,0),totalOvertime:o.reduce((g,p)=>g+p.overtime,0)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(st,{className:"w-8 h-8"}),"Staff Profile & Payroll"]}),e.jsx("p",{className:"text-gray-600",children:"Manage staff profiles, payroll processing, and attendance tracking"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),"Export Payroll"]}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Staff"]})]})]}),e.jsxs(ot,{defaultValue:"profiles",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"profiles",children:"Staff Profiles"}),e.jsx(re,{value:"payroll",children:"Payroll Management"}),e.jsx(re,{value:"attendance",children:"Attendance"}),e.jsx(re,{value:"analytics",children:"Analytics"}),e.jsx(re,{value:"settings",children:"Settings"})]}),e.jsxs(ne,{value:"profiles",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalStaff})]}),e.jsx(st,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Staff"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.activeStaff})]}),e.jsx(st,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Payroll"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d(x.monthlyPayroll)})]}),e.jsx(He,{className:"w-8 h-8 text-purple-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Overtime"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:d(x.totalOvertime)})]}),e.jsx(Ke,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Departments"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Departments"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"housekeeping",children:"Housekeeping"}),e.jsx(P,{value:"guest-services",children:"Guest Services"}),e.jsx(P,{value:"security",children:"Security"})]})]}),e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Staff"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Staff"}),e.jsx(P,{value:"active",children:"Active Only"}),e.jsx(P,{value:"inactive",children:"Inactive Only"})]})]}),e.jsx(H,{placeholder:"Search staff..."}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(g=>e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(_n,{className:"w-12 h-12",children:[e.jsx(Fl,{src:g.avatar,alt:g.name}),e.jsx(In,{children:g.name.split(" ").map(p=>p[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:g.name}),e.jsx("p",{className:"text-sm text-gray-600",children:g.role}),e.jsx(q,{className:h(g.department),children:g.department})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:u(g.status),children:g.status}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(Or,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:g.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:g.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:g.address})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm",children:["Started: ",g.startDate]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[d(g.baseSalary),"/month"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Skills"}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[g.skills.slice(0,3).map((p,f)=>e.jsx(q,{variant:"outline",className:"text-xs",children:p},f)),g.skills.length>3&&e.jsxs(q,{variant:"outline",className:"text-xs",children:["+",g.skills.length-3," more"]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Emergency Contact"}),e.jsxs("p",{className:"text-sm",children:[g.emergencyContact.name," (",g.emergencyContact.relationship,")"]}),e.jsx("p",{className:"text-xs text-gray-600",children:g.emergencyContact.phone})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(R,{variant:"outline",size:"sm",className:"flex-1",children:"View Profile"}),e.jsx(R,{variant:"outline",size:"sm",className:"flex-1",children:"Payroll History"})]})]})},g.id))})]}),e.jsxs(ne,{value:"payroll",className:"space-y-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Pay Period"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"current",children:"January 2025"}),e.jsx(P,{value:"previous",children:"December 2024"}),e.jsx(P,{value:"november",children:"November 2024"})]})]}),e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Staff"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Staff"}),l.map(g=>e.jsx(P,{value:g.id.toString(),children:g.name},g.id))]})]}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"paid",children:"Paid"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"processing",children:"Processing"})]})]}),e.jsx(R,{children:"Generate Payroll"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Payroll Records - January 2025"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(g=>{const p=l.find(f=>f.id===g.staffId);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_n,{className:"w-10 h-10",children:e.jsx(In,{children:p?.name.split(" ").map(f=>f[0]).join("")})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:p?.name}),e.jsx("p",{className:"text-sm text-gray-600",children:p?.role})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:m(g.status),children:g.status}),e.jsx("span",{className:"font-bold text-green-600",children:d(g.netPay)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Base Salary"}),e.jsx("p",{className:"font-medium",children:d(g.baseSalary)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Overtime"}),e.jsx("p",{className:"font-medium text-blue-600",children:d(g.overtime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Bonus"}),e.jsx("p",{className:"font-medium text-green-600",children:d(g.bonus)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Deductions"}),e.jsxs("p",{className:"font-medium text-red-600",children:["-",d(g.deductions)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Working Days"}),e.jsxs("p",{className:"font-medium",children:[g.workingDays," days"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"OT Hours"}),e.jsxs("p",{className:"font-medium",children:[g.overtimeHours,"h"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Pay Date: ",g.payDate]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),"Payslip"]}),e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Dr,{className:"w-4 h-4 mr-1"}),"Payment"]})]})]})]},g.id)})})})]})]}),e.jsx(ne,{value:"attendance",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Daily Attendance - January 22, 2025"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:c.map((g,p)=>{const f=l.find(v=>v.id===g.staffId);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_n,{className:"w-8 h-8",children:e.jsx(In,{children:f?.name.split(" ").map(v=>v[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:f?.name}),e.jsx("p",{className:"text-sm text-gray-600",children:f?.department})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Check In"}),e.jsx("p",{className:"font-medium",children:g.checkIn})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Check Out"}),e.jsx("p",{className:"font-medium",children:g.checkOut})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Hours"}),e.jsxs("p",{className:"font-medium",children:[g.hoursWorked,"h"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Overtime"}),e.jsxs("p",{className:"font-medium text-blue-600",children:[g.overtime,"h"]})]})]}),e.jsx(q,{className:"bg-green-100 text-green-800",children:g.status})]},p)})})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Payroll Cost by Department"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maintenance"}),e.jsx("span",{className:"font-bold",children:d(41600)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Housekeeping"}),e.jsx("span",{className:"font-bold",children:d(35600)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Guest Services"}),e.jsx("span",{className:"font-bold",children:d(30400)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Security"}),e.jsx("span",{className:"font-bold",children:d(29200)})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Overtime by Staff"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Somchai (14h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(2800)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Wichai (12h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(2400)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Niran (8h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(1600)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Apinya (6h)"}),e.jsx("span",{className:"text-sm font-medium",children:d(1200)})]})]})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Payroll Settings"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Pay Period Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Pay frequency"}),e.jsxs(te,{defaultValue:"monthly",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"weekly",children:"Weekly"}),e.jsx(P,{value:"bi-weekly",children:"Bi-weekly"}),e.jsx(P,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Pay day"}),e.jsx(H,{type:"number",defaultValue:"31"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Overtime Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Overtime rate multiplier"}),e.jsx(H,{type:"number",step:"0.1",defaultValue:"1.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Standard hours per day"}),e.jsx(H,{type:"number",defaultValue:"8"})]})]})]})]}),e.jsx(R,{children:"Save Settings"})]})]})})]})]})}function wR(){const[t,s]=j.useState(!1),[r,n]=j.useState(0),a=[{category:"Database Integrity",icon:pn,status:"healthy",issues:0,checks:[{name:"Property Records",status:"pass",description:"All property records are valid"},{name:"Booking Consistency",status:"pass",description:"No orphaned booking records"},{name:"User Account Integrity",status:"warning",description:"2 inactive accounts need review"},{name:"Financial Records",status:"pass",description:"All transactions balanced"}]},{category:"API Endpoints",icon:d8,status:"healthy",issues:1,checks:[{name:"Authentication Service",status:"pass",description:"All auth endpoints responding"},{name:"Property Management API",status:"pass",description:"CRUD operations working"},{name:"Booking Engine API",status:"warning",description:"Slow response times detected"},{name:"Financial API",status:"pass",description:"All payment endpoints active"}]},{category:"User Access Control",icon:st,status:"warning",issues:3,checks:[{name:"Role Permissions",status:"pass",description:"All roles configured correctly"},{name:"Admin Access",status:"pass",description:"Admin permissions verified"},{name:"Guest Access",status:"warning",description:"3 expired guest sessions found"},{name:"Staff Permissions",status:"pass",description:"Staff access levels correct"}]},{category:"Property Data",icon:Tt,status:"healthy",issues:0,checks:[{name:"Property Listings",status:"pass",description:"All properties have complete data"},{name:"Amenity Information",status:"pass",description:"Amenities properly configured"},{name:"Pricing Data",status:"pass",description:"All pricing rules valid"},{name:"Availability Calendar",status:"pass",description:"Calendar sync operational"}]}],i=[{id:1,type:"warning",message:"3 guest sessions expired and need cleanup",timestamp:"2025-01-22 09:30:00",category:"User Access"},{id:2,type:"info",message:"Database backup completed successfully",timestamp:"2025-01-22 08:00:00",category:"System"},{id:3,type:"warning",message:"Booking API response time increased to 2.3s",timestamp:"2025-01-22 07:45:00",category:"Performance"},{id:4,type:"success",message:"Security scan completed - no vulnerabilities found",timestamp:"2025-01-22 06:00:00",category:"Security"}],l=[{name:"Database Query Speed",value:95,unit:"ms avg",status:"good"},{name:"API Response Time",value:230,unit:"ms avg",status:"warning"},{name:"Memory Usage",value:68,unit:"% used",status:"good"},{name:"CPU Utilization",value:42,unit:"% avg",status:"good"},{name:"Storage Usage",value:73,unit:"% used",status:"good"},{name:"Active Connections",value:156,unit:"concurrent",status:"good"}],o=u=>{switch(u){case"pass":case"healthy":case"good":case"success":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"error":case"critical":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},c=u=>{switch(u){case"pass":case"healthy":case"good":case"success":return Me;case"warning":return Nt;case"error":case"critical":return br;default:return Me}},d=()=>{s(!0),n(0);const u=setInterval(()=>{n(m=>m>=100?(clearInterval(u),s(!1),100):m+10)},300)};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(_t,{className:"w-8 h-8"}),"System Integrity Check"]}),e.jsx("p",{className:"text-gray-600",children:"Monitor system health, database integrity, and performance metrics"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(R,{onClick:d,disabled:t,children:[e.jsx(cs,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),t?"Scanning...":"Run Full Scan"]})]})]}),t&&e.jsx(O,{className:"mb-6",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ks,{className:"w-5 h-5 animate-pulse"}),e.jsx("span",{className:"font-medium",children:"System Scan in Progress..."})]}),e.jsx(Gn,{value:r,className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[r,"% Complete"]})]})}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"database",children:"Database"}),e.jsx(re,{value:"performance",children:"Performance"}),e.jsx(re,{value:"security",children:"Security"}),e.jsx(re,{value:"alerts",children:"Alerts"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"System Status"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Healthy"})]}),e.jsx(Me,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Issues"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"4"})]}),e.jsx(Nt,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Scan"}),e.jsx("p",{className:"text-2xl font-bold",children:"2h ago"})]}),e.jsx(Ke,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"99.8%"})]}),e.jsx(ks,{className:"w-8 h-8 text-green-500"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map((u,m)=>{const h=u.icon,x=c(u.status);return e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),u.category]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx(q,{className:o(u.status),children:u.status})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.checks.map((g,p)=>{const f=c(g.status);return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:g.name}),e.jsx("p",{className:"text-xs text-gray-600",children:g.description})]})]}),e.jsx(q,{className:o(g.status),variant:"outline",children:g.status})]},p)})})})]},m)})})]}),e.jsxs(ne,{value:"database",className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Database Health Check"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(pn,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"font-medium",children:"Total Tables"}),e.jsx("p",{className:"text-2xl font-bold",children:"24"})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(Me,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"font-medium",children:"Healthy Tables"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"22"})]}),e.jsxs("div",{className:"text-center p-4 border rounded",children:[e.jsx(Nt,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"font-medium",children:"Need Attention"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:"2"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Table Status Details"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:[{name:"properties",records:1245,status:"healthy",lastCheck:"5 min ago"},{name:"bookings",records:3567,status:"healthy",lastCheck:"5 min ago"},{name:"users",records:892,status:"warning",lastCheck:"5 min ago"},{name:"tasks",records:2134,status:"healthy",lastCheck:"5 min ago"},{name:"financial_transactions",records:8901,status:"healthy",lastCheck:"5 min ago"}].map((u,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pn,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.records.toLocaleString()," records"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:u.lastCheck}),e.jsx(q,{className:o(u.status),children:u.status})]})]},m))})})]})]}),e.jsx(ne,{value:"performance",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((u,m)=>e.jsx(O,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsx(q,{className:o(u.status),children:u.status})]}),e.jsx("p",{className:"text-2xl font-bold",children:u.value}),e.jsx("p",{className:"text-sm text-gray-600",children:u.unit})]})},m))})}),e.jsx(ne,{value:"security",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Security Status"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"SSL Certificate"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Valid"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Firewall Status"}),e.jsx(q,{className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Last Security Scan"}),e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"6h ago"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed Login Attempts"}),e.jsx(q,{className:"bg-yellow-100 text-yellow-800",children:"3 today"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Access Control"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Active Sessions"}),e.jsx("span",{className:"font-bold",children:"156"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Admin Sessions"}),e.jsx("span",{className:"font-bold",children:"3"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Guest Sessions"}),e.jsx("span",{className:"font-bold",children:"89"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Expired Sessions"}),e.jsx("span",{className:"font-bold text-yellow-600",children:"3"})]})]})})]})]})}),e.jsx(ne,{value:"alerts",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent System Alerts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:i.map(u=>e.jsx($n,{children:e.jsxs(Fn,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u.type==="warning"&&e.jsx(Nt,{className:"w-4 h-4 text-yellow-500"}),u.type==="success"&&e.jsx(Me,{className:"w-4 h-4 text-green-500"}),u.type==="info"&&e.jsx(ks,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{children:u.message}),e.jsxs("p",{className:"text-sm text-gray-500",children:[u.category," • ",u.timestamp]})]})]}),e.jsx(q,{variant:"outline",children:u.type})]})},u.id))})})]})})]})]})}const cW=Object.freeze(Object.defineProperty({__proto__:null,default:wR},Symbol.toStringTag,{value:"Module"}));function dW(){const[t,s]=j.useState("all"),[r,n]=j.useState("all"),[a,i]=j.useState("current"),[l,o]=j.useState(!1),[c,d]=j.useState({property:"",utilityType:"",provider:"",accountNumber:"",rate:"",autoPayEnabled:!1}),{toast:u}=Xe(),m=ut(),{data:h=[],isLoading:x}=ge({queryKey:["/api/automation/utility-alerts"],refetchInterval:6e4}),g=Ce({mutationFn:async()=>{const N=await fetch("/api/automation/check-utility-alerts",{method:"POST",headers:{"Content-Type":"application/json"}});if(!N.ok)throw new Error("Failed to trigger alert check");return N.json()},onSuccess:()=>{u({title:"Alert Check Triggered",description:"Manual utility alert check has been initiated successfully."}),m.invalidateQueries({queryKey:["/api/automation/utility-alerts"]})},onError:N=>{u({title:"Error",description:N.message||"Failed to trigger alert check",variant:"destructive"})}}),p=Ce({mutationFn:async()=>{const M=await fetch("/api/automation/utility-alerts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({alertType:"test_alert",alertTitle:"Test Alert - System Check",alertMessage:"This is a test alert to verify the utility alert system is working correctly.",alertSeverity:"info",propertyId:1,utilityType:"electricity"})});if(!M.ok)throw new Error("Failed to create test alert");return M.json()},onSuccess:()=>{u({title:"Test Alert Created",description:"A test alert has been generated successfully. Check the alerts list below."}),m.invalidateQueries({queryKey:["/api/automation/utility-alerts"]})},onError:N=>{u({title:"Error",description:N.message||"Failed to create test alert",variant:"destructive"})}}),f=Ce({mutationFn:async()=>{const N={utilityBills:b,properties:v,monthlyStats:S,generatedAt:new Date().toISOString(),reportType:"utility_tracker_summary"},M=[["Property","Utility Type","Provider","Amount (THB)","Status","Due Date"],...b.map(E=>[v.find(G=>G.id===E.propertyId)?.name||"Unknown",E.type.replace("_"," ").toUpperCase(),E.provider,E.amount.toString(),E.status.toUpperCase(),E.dueDate])].map(E=>E.join(",")).join(`
`),F=new Blob([M],{type:"text/csv"}),I=window.URL.createObjectURL(F),V=document.createElement("a");return V.href=I,V.download=`utility-report-${new Date().toISOString().split("T")[0]}.csv`,V.click(),window.URL.revokeObjectURL(I),N},onSuccess:()=>{u({title:"Report Exported",description:"Utility report has been downloaded as CSV file."})},onError:N=>{u({title:"Export Failed",description:N.message||"Failed to export report",variant:"destructive"})}}),{data:v=[]}=ge({queryKey:["/api/properties"]}),{data:b=[]}=ge({queryKey:["/api/utility-bills"]}),y=[{id:"electricity",name:"Electricity",icon:Ut,color:"text-yellow-500"},{id:"water",name:"Water",icon:qu,color:"text-blue-500"},{id:"internet",name:"Internet",icon:Hu,color:"text-green-500"},{id:"gas",name:"Gas",icon:QT,color:"text-orange-500"},{id:"security",name:"Security",icon:_t,color:"text-red-500"},{id:"maintenance",name:"Maintenance",icon:Lt,color:"text-purple-500"}],S={totalAmount:b.reduce((N,M)=>N+parseFloat(M.amount||"0"),0),paidAmount:b.filter(N=>N.status==="paid").reduce((N,M)=>N+parseFloat(M.amount||"0"),0),pendingAmount:b.filter(N=>N.status==="pending").reduce((N,M)=>N+parseFloat(M.amount||"0"),0),overdueAmount:b.filter(N=>N.status==="overdue").reduce((N,M)=>N+parseFloat(M.amount||"0"),0),billCount:b.length,averagePerProperty:v.length>0?b.reduce((N,M)=>N+parseFloat(M.amount||"0"),0)/v.length:0},w=(N,M)=>new Intl.NumberFormat("en-US",{style:"currency",currency:M}).format(N),C=N=>{switch(N){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"processing":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},k=N=>{switch(N){case"paid":return Me;case"pending":return Ke;case"overdue":return Nt;default:return Ke}},A=b.filter(N=>!(t!=="all"&&N.propertyId!==parseInt(t)||r!=="all"&&N.type!==r));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(bi,{className:"w-8 h-8"}),"Utility Tracker"]}),e.jsx("p",{className:"text-gray-600",children:"Track utility bills, usage, and payments across all properties"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"outline",children:[e.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Upload Bill"]})}),e.jsxs(qe,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Upload Utility Bill"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Property"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsx(ee,{children:v.map(N=>e.jsx(P,{value:N.id.toString(),children:N.name},N.id))})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Utility Type"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select type"})}),e.jsx(ee,{children:y.map(N=>e.jsx(P,{value:N.id,children:N.name},N.id))})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Bill Amount"}),e.jsx(H,{type:"number",placeholder:"Enter amount"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Due Date"}),e.jsx(H,{type:"date"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Upload Receipt"}),e.jsx(H,{type:"file",accept:".pdf,.jpg,.png"})]}),e.jsx(R,{className:"w-full",onClick:()=>{u({title:"Bill Upload",description:"Bill upload functionality will be integrated with actual backend storage."})},children:"Upload Bill"})]})]})]}),e.jsxs(R,{variant:"outline",onClick:()=>f.mutate(),disabled:f.isPending,children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),f.isPending?"Exporting...":"Export Report"]}),e.jsxs(R,{children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Utility Account"]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-6",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"bills",children:"Bills"}),e.jsx(re,{value:"accounts",children:"Accounts"}),e.jsx(re,{value:"analytics",children:"Analytics"}),e.jsx(re,{value:"alerts",children:"Alerts"}),e.jsx(re,{value:"settings",children:"Settings"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Monthly"}),e.jsx("p",{className:"text-2xl font-bold",children:w(S.totalAmount,"THB")})]}),e.jsx(He,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Bills"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:w(S.paidAmount,"THB")})]}),e.jsx(Me,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:w(S.pendingAmount,"THB")})]}),e.jsx(Ke,{className:"w-8 h-8 text-yellow-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:w(S.overdueAmount,"THB")})]}),e.jsx(Nt,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:y.map(N=>{const M=N.icon,F=b.filter(V=>V.type===N.id),I=F.reduce((V,E)=>V+E.amount,0);return e.jsx(O,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(M,{className:`w-8 h-8 mx-auto mb-2 ${N.color}`}),e.jsx("p",{className:"font-medium text-sm",children:N.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[F.length," bills"]}),e.jsx("p",{className:"text-sm font-bold mt-1",children:w(I,"THB")})]})},N.id)})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent Bills"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map(N=>{const M=v.find(E=>E.id===N.propertyId),F=y.find(E=>E.id===N.type),I=k(N.status),V=F?.icon||bi;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:`w-5 h-5 ${F?.color}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:M?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[F?.name," • ",N.period]}),e.jsx("p",{className:"text-xs text-gray-500",children:N.provider})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx(q,{className:C(N.status),children:N.status})]}),e.jsx("p",{className:"font-bold",children:w(N.amount,N.currency)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Due: ",N.dueDate]})]})]},N.id)})})})]})]}),e.jsxs(ne,{value:"bills",className:"space-y-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),v.map(N=>e.jsx(P,{value:N.id.toString(),children:N.name},N.id))]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Utilities"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Utilities"}),y.map(N=>e.jsx(P,{value:N.id,children:N.name},N.id))]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Current Month"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"current",children:"Current Month"}),e.jsx(P,{value:"last",children:"Last Month"}),e.jsx(P,{value:"last3",children:"Last 3 Months"}),e.jsx(P,{value:"year",children:"This Year"})]})]}),e.jsx(R,{children:"Apply Filters"})]})})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{children:["Utility Bills (",A.length,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:A.map(N=>{const M=v.find(E=>E.id===N.propertyId),F=y.find(E=>E.id===N.type),I=k(N.status),V=F?.icon||bi;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:`w-6 h-6 ${F?.color}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:M?.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[F?.name," Bill"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx(q,{className:C(N.status),children:N.status})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Provider"}),e.jsx("p",{className:"font-medium",children:N.provider})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Period"}),e.jsx("p",{className:"font-medium",children:N.period})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Usage"}),e.jsx("p",{className:"font-medium",children:N.usage})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Amount"}),e.jsx("p",{className:"font-bold text-lg",children:w(N.amount,N.currency)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Due: ",N.dueDate," • Account: ",N.accountNumber]}),e.jsxs("div",{className:"flex gap-2",children:[N.receiptUrl&&e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx($t,{className:"w-4 h-4 mr-1"}),"View Receipt"]}),e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),"Mark Paid"]})]})]})]},N.id)})})})]})]}),e.jsx(ne,{value:"accounts",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Utility Accounts Setup"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:v.map(N=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:N.name}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:y.map(M=>{const F=M.icon;return e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:`w-4 h-4 ${M.color}`}),e.jsx("span",{className:"text-sm",children:M.name})]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{d({property:N.name,utilityType:M.name,provider:"",accountNumber:"",rate:"",autoPayEnabled:!1}),o(!0)},children:"Setup"})]},M.id)})})]},N.id))})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Monthly Trends"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"January 2025"}),e.jsx("span",{className:"font-bold",children:w(8940,"THB")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"December 2024"}),e.jsx("span",{className:"font-bold",children:w(8230,"THB")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"November 2024"}),e.jsx("span",{className:"font-bold",children:w(7890,"THB")})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Cost by Utility Type"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:y.map(N=>{const F=b.filter(V=>V.type===N.id).reduce((V,E)=>V+E.amount,0),I=N.icon;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:`w-4 h-4 ${N.color}`}),e.jsx("span",{className:"text-sm",children:N.name})]}),e.jsx("span",{className:"font-medium",children:w(F,"THB")})]},N.id)})})})]})]})}),e.jsx(ne,{value:"alerts",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{children:"Utility Alert System"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>p.mutate(),disabled:p.isPending,children:[e.jsx(ep,{className:"w-4 h-4 mr-2"}),p.isPending?"Testing...":"Test Alert"]}),e.jsxs(R,{size:"sm",onClick:()=>g.mutate(),disabled:g.isPending,children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),g.isPending?"Checking...":"Manual Check"]})]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:x?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(cs,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:"Loading alerts..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Vs,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Alerts"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"All utility bills are up to date. Use the buttons above to test the alert system."})]}):h.map(N=>{const M={urgent:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:Nt,iconColor:"text-red-500"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:Ke,iconColor:"text-yellow-500"},info:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:Vs,iconColor:"text-blue-500"}},F=M[N.alertSeverity]||M.info,I=F.icon;return e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded ${F.bg} ${F.border}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:`w-5 h-5 ${F.iconColor}`}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${F.text}`,children:N.alertTitle}),e.jsx("p",{className:`text-sm ${F.text.replace("800","600")}`,children:N.alertMessage}),N.propertyName&&e.jsxs("p",{className:`text-xs ${F.text.replace("800","500")} mt-1`,children:["Property: ",N.propertyName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:N.alertSeverity==="urgent"?"destructive":"secondary",children:N.alertStatus||"Active"}),e.jsx(R,{size:"sm",variant:"outline",children:N.alertSeverity==="urgent"?"Resolve":"View"})]})]},N.id)})})})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Notification Settings"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive email alerts for due bills"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get SMS alerts for overdue bills"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-pay Reminders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reminders 7 days before due date"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Default Currency"}),e.jsxs(te,{defaultValue:"THB",children:[e.jsx(J,{className:"w-32",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"THB",children:"THB"}),e.jsx(P,{value:"USD",children:"USD"}),e.jsx(P,{value:"EUR",children:"EUR"}),e.jsx(P,{value:"IDR",children:"IDR"})]})]})]}),e.jsx(R,{children:"Save Settings"})]})})]})})]}),e.jsx(Ve,{open:l,onOpenChange:o,children:e.jsxs(qe,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Setup Utility Account"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Property"}),e.jsx(H,{value:c.property,disabled:!0,className:"bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Utility Type"}),e.jsx(H,{value:c.utilityType,disabled:!0,className:"bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Provider Name"}),e.jsx(H,{placeholder:"e.g., PEA, Metropolitan Waterworks",value:c.provider,onChange:N=>d({...c,provider:N.target.value})})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Account Number"}),e.jsx(H,{placeholder:"Enter account number",value:c.accountNumber,onChange:N=>d({...c,accountNumber:N.target.value})})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Rate per Unit (THB)"}),e.jsx(H,{type:"number",placeholder:"e.g., 7.50",value:c.rate,onChange:N=>d({...c,rate:N.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{checked:c.autoPayEnabled,onCheckedChange:N=>d({...c,autoPayEnabled:N})}),e.jsx(K,{children:"Enable Auto-pay Notifications"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{className:"flex-1",onClick:()=>{console.log("Setting up utility account:",c),o(!1),d({property:"",utilityType:"",provider:"",accountNumber:"",rate:"",autoPayEnabled:!1})},children:"Save Account Setup"}),e.jsx(R,{variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]})})]})}function SR(){const[t,s]=j.useState("all"),[r,n]=j.useState({email:!0,sms:!1,inApp:!0,slack:!1}),a=[{id:1,name:"Villa Samui Breeze",location:"Koh Samui"},{id:2,name:"Villa Tropical Paradise",location:"Phuket"},{id:3,name:"Villa Aruna",location:"Bali"},{id:4,name:"Villa Gala",location:"Krabi"}],i=[{id:1,type:"maintenance",priority:"high",title:"Pool Maintenance Due",description:"Villa Samui Breeze pool hasn't been cleaned in 6 days. AI recommends immediate action based on guest check-in tomorrow.",property:"Villa Samui Breeze",confidence:92,suggestedAction:"Schedule pool cleaning",estimatedCost:800,currency:"THB",dueDate:"2025-01-23",aiReasoning:"Historical data shows guest complaints increase by 45% when pool maintenance exceeds 7 days"},{id:2,type:"booking",priority:"medium",title:"Price Optimization Opportunity",description:"Villa Tropical Paradise rates are 15% below market average for next weekend. AI suggests price adjustment.",property:"Villa Tropical Paradise",confidence:87,suggestedAction:"Increase rates by 12%",estimatedCost:0,currency:"THB",dueDate:"2025-01-24",aiReasoning:"Similar properties in area showing 95% occupancy at higher rates"},{id:3,type:"guest",priority:"low",title:"Guest Experience Enhancement",description:"Repeat guest Sarah Johnson prefers extra towels. AI suggests proactive preparation.",property:"Villa Aruna",confidence:78,suggestedAction:"Add extra towels to housekeeping checklist",estimatedCost:0,currency:"THB",dueDate:"2025-01-25",aiReasoning:"Guest mentioned towel preference in previous 3 stays"},{id:4,type:"financial",priority:"high",title:"Utility Bill Alert",description:"Villa Gala electricity usage up 35% this month. AI recommends investigation.",property:"Villa Gala",confidence:95,suggestedAction:"Check AC units and appliances",estimatedCost:500,currency:"THB",dueDate:"2025-01-23",aiReasoning:"Usage pattern indicates potential equipment malfunction"}],l=[{id:1,type:"sent",channel:"email",recipient:"property.manager@company.com",subject:"AI Alert: Pool Maintenance Required",timestamp:"2025-01-22 14:30:00",status:"delivered"},{id:2,type:"sent",channel:"sms",recipient:"+66 89 123 4567",subject:"Price optimization alert for Villa Tropical Paradise",timestamp:"2025-01-22 13:15:00",status:"delivered"},{id:3,type:"scheduled",channel:"email",recipient:"owner@villa-aruna.com",subject:"Weekly AI Performance Report",timestamp:"2025-01-23 09:00:00",status:"pending"}],o=[{id:1,name:"Maintenance Reminders",trigger:"Days since last service > 7",action:"Send notification to maintenance team",frequency:"Daily check",enabled:!0,properties:["All Properties"]},{id:2,name:"Price Optimization",trigger:"Rate variance > 10% from market",action:"Alert revenue manager",frequency:"Hourly check",enabled:!0,properties:["Villa Samui Breeze","Villa Tropical Paradise"]},{id:3,name:"Guest Preference Alerts",trigger:"Repeat guest booking detected",action:"Send preference reminder to housekeeping",frequency:"On booking confirmation",enabled:!1,properties:["All Properties"]}],c=h=>{switch(h){case"maintenance":return Lt;case"booking":return We;case"guest":return st;case"financial":return He;default:return Vs}},d=h=>{switch(h){case"maintenance":return"text-blue-500";case"booking":return"text-green-500";case"guest":return"text-purple-500";case"financial":return"text-orange-500";default:return"text-gray-500"}},u=h=>{switch(h){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=(h,x)=>new Intl.NumberFormat("en-US",{style:"currency",currency:x}).format(h);return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(hn,{className:"w-8 h-8"}),"AI Notifications & Reminders"]}),e.jsx("p",{className:"text-gray-600",children:"Intelligent alerts and automated reminders powered by AI analysis"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Configure AI"]}),e.jsxs(R,{children:[e.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Test Notification"]})]})]}),e.jsxs(ot,{defaultValue:"insights",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"insights",children:"AI Insights"}),e.jsx(re,{value:"automation",children:"Automation Rules"}),e.jsx(re,{value:"history",children:"History"}),e.jsx(re,{value:"channels",children:"Channels"}),e.jsx(re,{value:"settings",children:"Settings"})]}),e.jsxs(ne,{value:"insights",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Insights"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(hn,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"High Priority"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.filter(h=>h.priority==="high").length})]}),e.jsx(Nt,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Confidence"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.round(i.reduce((h,x)=>h+x.confidence,0)/i.length),"%"]})]}),e.jsx(dr,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Savings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"₹2,500"})]}),e.jsx(Ot,{className:"w-8 h-8 text-blue-500"})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{children:"Filter by Property:"}),e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{className:"w-64",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),a.map(h=>e.jsx(P,{value:h.name,children:h.name},h.id))]})]})]})})}),e.jsx("div",{className:"space-y-4",children:i.map(h=>{const x=c(h.type);return e.jsx(O,{className:"border-l-4 border-l-blue-500",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:`w-6 h-6 ${d(h.type)}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.title}),e.jsx("p",{className:"text-sm text-gray-600",children:h.property})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:u(h.priority),children:h.priority}),e.jsxs(q,{variant:"outline",children:[h.confidence,"% confidence"]})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:h.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Suggested Action"}),e.jsx("p",{className:"text-blue-800",children:h.suggestedAction})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Estimated Cost"}),e.jsx("p",{className:"text-green-800",children:h.estimatedCost>0?m(h.estimatedCost,h.currency):"No cost"})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Due Date"}),e.jsx("p",{className:"text-orange-800",children:h.dueDate})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"AI Reasoning:"}),e.jsx("p",{className:"text-gray-700 text-sm",children:h.aiReasoning})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Accept & Schedule"]}),e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(gn,{className:"w-4 h-4 mr-2"}),"Discuss"]}),e.jsx(R,{variant:"outline",size:"sm",children:"Dismiss"})]})]})},h.id)})})]}),e.jsx(ne,{value:"automation",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Automation Rules"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(h=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bn,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-gray-600",children:h.frequency})]})]}),e.jsx(yt,{checked:h.enabled})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Trigger Condition"}),e.jsx("p",{children:h.trigger})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-medium",children:"Action"}),e.jsx("p",{children:h.action})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-gray-500 font-medium text-sm",children:"Applied to:"}),e.jsx("div",{className:"flex gap-2 mt-1",children:h.properties.map((x,g)=>e.jsx(q,{variant:"outline",children:x},g))})]})]},h.id))})})]})}),e.jsx(ne,{value:"history",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Notification History"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:l.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h.channel==="email"&&e.jsx(ha,{className:"w-4 h-4 text-blue-500"}),h.channel==="sms"&&e.jsx(h8,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:h.subject}),e.jsxs("p",{className:"text-xs text-gray-600",children:["To: ",h.recipient]}),e.jsx("p",{className:"text-xs text-gray-500",children:h.timestamp})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(q,{className:h.status==="delivered"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:h.status})})]},h.id))})})]})}),e.jsx(ne,{value:"channels",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Email Notifications"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enable Email Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send notifications via email"})]}),e.jsx(yt,{checked:r.email,onCheckedChange:h=>n({...r,email:h})})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Default Recipients"}),e.jsx(H,{value:"admin@hostpilotpro.com",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Email Template"}),e.jsxs(te,{defaultValue:"standard",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"standard",children:"Standard Template"}),e.jsx(P,{value:"detailed",children:"Detailed Template"}),e.jsx(P,{value:"minimal",children:"Minimal Template"})]})]})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"SMS Notifications"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enable SMS Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send critical alerts via SMS"})]}),e.jsx(yt,{checked:r.sms,onCheckedChange:h=>n({...r,sms:h})})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Phone Number"}),e.jsx(H,{value:"+66 89 123 4567",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Priority Threshold"}),e.jsxs(te,{defaultValue:"high",children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Alerts"}),e.jsx(P,{value:"medium",children:"Medium & High"}),e.jsx(P,{value:"high",children:"High Priority Only"})]})]})]})]})]})]})}),e.jsx(ne,{value:"settings",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"AI Configuration"})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(K,{children:"AI Analysis Frequency"}),e.jsxs(te,{defaultValue:"hourly",children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"realtime",children:"Real-time"}),e.jsx(P,{value:"hourly",children:"Every Hour"}),e.jsx(P,{value:"daily",children:"Daily"}),e.jsx(P,{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Minimum Confidence Level"}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(H,{type:"range",min:"50",max:"95",defaultValue:"75",className:"flex-1"}),e.jsx("span",{className:"text-sm font-medium",children:"75%"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Learning Mode"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow AI to learn from user actions"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Proactive Suggestions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate preventive recommendations"})]}),e.jsx(yt,{defaultChecked:!0})]}),e.jsx(R,{children:"Save AI Settings"})]})]})})]})]})}const uW=Object.freeze(Object.defineProperty({__proto__:null,default:SR},Symbol.toStringTag,{value:"Module"}));function mW(){const[t,s]=j.useState("all"),[r,n]=j.useState("month"),[a,i]=j.useState(!1),[l,o]=j.useState({reportType:"comprehensive",includeRevenue:!0,includeExpenses:!0,includeOwnerBalances:!0,includeTransactions:!0,format:"pdf"}),c=[{id:1,name:"Villa Samui Breeze",location:"Koh Samui"},{id:2,name:"Villa Tropical Paradise",location:"Phuket"},{id:3,name:"Villa Aruna",location:"Bali"},{id:4,name:"Villa Gala",location:"Krabi"}],d={totalRevenue:245e3,totalExpenses:89500,netProfit:155500,profitMargin:63.4,ownerPayouts:171500,pendingPayouts:28750,commissions:24500,managementFees:36750},u=[{source:"Airbnb",amount:125e3,percentage:51,bookings:28},{source:"VRBO",amount:75e3,percentage:31,bookings:18},{source:"Booking.com",amount:3e4,percentage:12,bookings:12},{source:"Direct",amount:15e3,percentage:6,bookings:5}],m=[{category:"Cleaning & Maintenance",amount:32500,percentage:36.3},{category:"Utilities",amount:28e3,percentage:31.3},{category:"Marketing",amount:12e3,percentage:13.4},{category:"Property Management",amount:1e4,percentage:11.2},{category:"Insurance & Legal",amount:7e3,percentage:7.8}],h=[{id:1,ownerName:"John Smith",property:"Villa Samui Breeze",currentBalance:45e3,pendingPayout:12500,lastPayout:"2025-01-15",totalEarnings:156e3,status:"active"},{id:2,ownerName:"Sarah Johnson",property:"Villa Tropical Paradise",currentBalance:28e3,pendingPayout:8750,lastPayout:"2025-01-18",totalEarnings:98500,status:"active"},{id:3,ownerName:"Michael Chen",property:"Villa Aruna",currentBalance:35e3,pendingPayout:5500,lastPayout:"2025-01-20",totalEarnings:125e3,status:"pending_review"},{id:4,ownerName:"Lisa Wong",property:"Villa Gala",currentBalance:52e3,pendingPayout:2e3,lastPayout:"2025-01-12",totalEarnings:18e4,status:"active"}],x=[{id:1,date:"2025-01-22",type:"revenue",description:"Airbnb booking - Villa Samui Breeze",amount:8500,property:"Villa Samui Breeze",status:"completed"},{id:2,date:"2025-01-22",type:"expense",description:"Pool cleaning service",amount:-800,property:"Villa Tropical Paradise",status:"completed"},{id:3,date:"2025-01-21",type:"payout",description:"Owner payout - John Smith",amount:-12500,property:"Villa Samui Breeze",status:"pending"},{id:4,date:"2025-01-21",type:"commission",description:"Management fee - 15%",amount:1275,property:"Villa Tropical Paradise",status:"completed"}],g=y=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB",minimumFractionDigits:0,maximumFractionDigits:0}).format(y),p=y=>{switch(y){case"revenue":return qT;case"expense":return BT;case"payout":return na;case"commission":return dr;default:return xa}},f=y=>{switch(y){case"revenue":return"text-green-600";case"expense":return"text-red-600";case"payout":return"text-blue-600";case"commission":return"text-purple-600";default:return"text-gray-600"}},v=y=>{switch(y){case"active":return"bg-green-100 text-green-800";case"pending_review":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},b=y=>{switch(y){case"active":case"completed":return Me;case"pending_review":case"pending":return Ke;default:return Et}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(pn,{className:"w-8 h-8"}),"Finance Engine"]}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive financial management and analytics dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),c.map(y=>e.jsx(P,{value:y.id.toString(),children:y.name},y.id))]})]}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{className:"w-32",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"week",children:"This Week"}),e.jsx(P,{value:"month",children:"This Month"}),e.jsx(P,{value:"quarter",children:"This Quarter"}),e.jsx(P,{value:"year",children:"This Year"})]})]}),e.jsx(R,{onClick:()=>i(!0),children:"Generate Report"})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-6",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"revenue",children:"Revenue"}),e.jsx(re,{value:"expenses",children:"Expenses"}),e.jsx(re,{value:"owners",children:"Owner Balances"}),e.jsx(re,{value:"transactions",children:"Transactions"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g(d.totalRevenue)})]}),e.jsx(Ot,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g(d.totalExpenses)})]}),e.jsx(_l,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Profit"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g(d.netProfit)})]}),e.jsx(He,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Profit Margin"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[d.profitMargin,"%"]})]}),e.jsx(dr,{className:"w-8 h-8 text-purple-500"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_d,{className:"w-5 h-5"}),"Revenue by Source"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.map((y,S)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500",style:{backgroundColor:`hsl(${220+S*30}, 70%, 50%)`}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:y.source}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.bookings," bookings"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:g(y.amount)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.percentage,"%"]})]})]},S))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-5 h-5"}),"Expense Categories"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:m.map((y,S)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500",style:{backgroundColor:`hsl(${10+S*25}, 70%, 50%)`}}),e.jsx("p",{className:"font-medium",children:y.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:g(y.amount)}),e.jsxs("p",{className:"text-sm text-gray-600",children:[y.percentage,"%"]})]})]},S))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(O,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(na,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Owner Payouts"}),e.jsx("p",{className:"text-xl font-bold",children:g(d.ownerPayouts)})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(Ke,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Payouts"}),e.jsx("p",{className:"text-xl font-bold",children:g(d.pendingPayouts)})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(dr,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Commissions"}),e.jsx("p",{className:"text-xl font-bold",children:g(d.commissions)})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(Dr,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Management Fees"}),e.jsx("p",{className:"text-xl font-bold",children:g(d.managementFees)})]})})]})]}),e.jsx(ne,{value:"revenue",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Revenue Analysis"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Revenue by Platform"}),e.jsx("div",{className:"space-y-2",children:u.map((y,S)=>e.jsxs("div",{className:"flex justify-between items-center p-2 rounded border",children:[e.jsx("span",{children:y.source}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:g(y.amount)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[y.bookings," bookings"]})]})]},S))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Monthly Trend"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"January 2025"}),e.jsx("span",{className:"font-bold",children:g(245e3)})]}),e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"December 2024"}),e.jsx("span",{className:"font-bold",children:g(22e4)})]}),e.jsxs("div",{className:"flex justify-between p-2 rounded border",children:[e.jsx("span",{children:"November 2024"}),e.jsx("span",{className:"font-bold",children:g(198e3)})]})]})]})]})})]})}),e.jsx(ne,{value:"expenses",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Expense Analysis"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:m.map((y,S)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:y.category}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:g(y.amount)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[y.percentage,"% of total"]})]})]})},S))})})]})}),e.jsx(ne,{value:"owners",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Owner Balances & Payouts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:h.map(y=>{const S=b(y.status);return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:y.ownerName}),e.jsx("p",{className:"text-sm text-gray-600",children:y.property})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx(q,{className:v(y.status),children:y.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Current Balance"}),e.jsx("p",{className:"font-bold text-lg",children:g(y.currentBalance)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Pending Payout"}),e.jsx("p",{className:"font-bold text-yellow-600",children:g(y.pendingPayout)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Last Payout"}),e.jsx("p",{className:"font-medium",children:y.lastPayout})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Earnings"}),e.jsx("p",{className:"font-bold text-green-600",children:g(y.totalEarnings)})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(R,{size:"sm",variant:"outline",children:"Process Payout"}),e.jsx(R,{size:"sm",variant:"outline",children:"View Details"})]})]},y.id)})})})]})}),e.jsx(ne,{value:"transactions",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent Transactions"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:x.map(y=>{const S=p(y.type),w=b(y.status);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:`w-5 h-5 ${f(y.type)}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:y.description}),e.jsx("p",{className:"text-sm text-gray-600",children:y.property}),e.jsx("p",{className:"text-xs text-gray-500",children:y.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx(q,{className:v(y.status),children:y.status})]}),e.jsxs("p",{className:`font-bold text-lg ${y.amount>0?"text-green-600":"text-red-600"}`,children:[y.amount>0?"+":"",g(Math.abs(y.amount))]})]})]},y.id)})})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Performance Metrics"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Average Daily Revenue"}),e.jsx("span",{className:"font-bold",children:g(7903)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Revenue Growth (MoM)"}),e.jsx("span",{className:"font-bold text-green-600",children:"+11.4%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Expense Ratio"}),e.jsx("span",{className:"font-bold",children:"36.5%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Owner Satisfaction"}),e.jsx("span",{className:"font-bold text-green-600",children:"94.2%"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Financial Goals"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Monthly Revenue Target"}),e.jsx("span",{children:"97.8%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"97.8%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Expense Control"}),e.jsx("span",{children:"89.5%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"89.5%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Profit Margin Goal"}),e.jsx("span",{children:"105.7%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"100%"}})})]})]})})]})]})})]})]})}var hW=Array.isArray,Fr=hW,xW=typeof Nm=="object"&&Nm&&Nm.Object===Object&&Nm,CR=xW,pW=CR,fW=typeof self=="object"&&self&&self.Object===Object&&self,gW=pW||fW||Function("return this")(),ba=gW,jW=ba,vW=jW.Symbol,lm=vW,i2=lm,PR=Object.prototype,yW=PR.hasOwnProperty,bW=PR.toString,Xc=i2?i2.toStringTag:void 0;function NW(t){var s=yW.call(t,Xc),r=t[Xc];try{t[Xc]=void 0;var n=!0}catch{}var a=bW.call(t);return n&&(s?t[Xc]=r:delete t[Xc]),a}var wW=NW,SW=Object.prototype,CW=SW.toString;function PW(t){return CW.call(t)}var kW=PW,l2=lm,AW=wW,TW=kW,DW="[object Null]",OW="[object Undefined]",o2=l2?l2.toStringTag:void 0;function EW(t){return t==null?t===void 0?OW:DW:o2&&o2 in Object(t)?AW(t):TW(t)}var Xa=EW;function MW(t){return t!=null&&typeof t=="object"}var Za=MW,RW=Xa,_W=Za,IW="[object Symbol]";function $W(t){return typeof t=="symbol"||_W(t)&&RW(t)==IW}var Ec=$W,FW=Fr,LW=Ec,BW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,VW=/^\w*$/;function qW(t,s){if(FW(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||LW(t)?!0:VW.test(t)||!BW.test(t)||s!=null&&t in Object(s)}var kb=qW;function UW(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var Bi=UW;const Mc=ls(Bi);var zW=Xa,GW=Bi,HW="[object AsyncFunction]",KW="[object Function]",WW="[object GeneratorFunction]",YW="[object Proxy]";function QW(t){if(!GW(t))return!1;var s=zW(t);return s==KW||s==WW||s==HW||s==YW}var Ab=QW;const bt=ls(Ab);var XW=ba,ZW=XW["__core-js_shared__"],JW=ZW,Tg=JW,c2=function(){var t=/[^.]+$/.exec(Tg&&Tg.keys&&Tg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function eY(t){return!!c2&&c2 in t}var tY=eY,sY=Function.prototype,rY=sY.toString;function nY(t){if(t!=null){try{return rY.call(t)}catch{}try{return t+""}catch{}}return""}var kR=nY,aY=Ab,iY=tY,lY=Bi,oY=kR,cY=/[\\^$.*+?()[\]{}|]/g,dY=/^\[object .+?Constructor\]$/,uY=Function.prototype,mY=Object.prototype,hY=uY.toString,xY=mY.hasOwnProperty,pY=RegExp("^"+hY.call(xY).replace(cY,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fY(t){if(!lY(t)||iY(t))return!1;var s=aY(t)?pY:dY;return s.test(oY(t))}var gY=fY;function jY(t,s){return t?.[s]}var vY=jY,yY=gY,bY=vY;function NY(t,s){var r=bY(t,s);return yY(r)?r:void 0}var Ll=NY,wY=Ll,SY=wY(Object,"create"),Fp=SY,d2=Fp;function CY(){this.__data__=d2?d2(null):{},this.size=0}var PY=CY;function kY(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var AY=kY,TY=Fp,DY="__lodash_hash_undefined__",OY=Object.prototype,EY=OY.hasOwnProperty;function MY(t){var s=this.__data__;if(TY){var r=s[t];return r===DY?void 0:r}return EY.call(s,t)?s[t]:void 0}var RY=MY,_Y=Fp,IY=Object.prototype,$Y=IY.hasOwnProperty;function FY(t){var s=this.__data__;return _Y?s[t]!==void 0:$Y.call(s,t)}var LY=FY,BY=Fp,VY="__lodash_hash_undefined__";function qY(t,s){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=BY&&s===void 0?VY:s,this}var UY=qY,zY=PY,GY=AY,HY=RY,KY=LY,WY=UY;function Rc(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Rc.prototype.clear=zY;Rc.prototype.delete=GY;Rc.prototype.get=HY;Rc.prototype.has=KY;Rc.prototype.set=WY;var YY=Rc;function QY(){this.__data__=[],this.size=0}var XY=QY;function ZY(t,s){return t===s||t!==t&&s!==s}var Tb=ZY,JY=Tb;function eQ(t,s){for(var r=t.length;r--;)if(JY(t[r][0],s))return r;return-1}var Lp=eQ,tQ=Lp,sQ=Array.prototype,rQ=sQ.splice;function nQ(t){var s=this.__data__,r=tQ(s,t);if(r<0)return!1;var n=s.length-1;return r==n?s.pop():rQ.call(s,r,1),--this.size,!0}var aQ=nQ,iQ=Lp;function lQ(t){var s=this.__data__,r=iQ(s,t);return r<0?void 0:s[r][1]}var oQ=lQ,cQ=Lp;function dQ(t){return cQ(this.__data__,t)>-1}var uQ=dQ,mQ=Lp;function hQ(t,s){var r=this.__data__,n=mQ(r,t);return n<0?(++this.size,r.push([t,s])):r[n][1]=s,this}var xQ=hQ,pQ=XY,fQ=aQ,gQ=oQ,jQ=uQ,vQ=xQ;function _c(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}_c.prototype.clear=pQ;_c.prototype.delete=fQ;_c.prototype.get=gQ;_c.prototype.has=jQ;_c.prototype.set=vQ;var Bp=_c,yQ=Ll,bQ=ba,NQ=yQ(bQ,"Map"),Db=NQ,u2=YY,wQ=Bp,SQ=Db;function CQ(){this.size=0,this.__data__={hash:new u2,map:new(SQ||wQ),string:new u2}}var PQ=CQ;function kQ(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var AQ=kQ,TQ=AQ;function DQ(t,s){var r=t.__data__;return TQ(s)?r[typeof s=="string"?"string":"hash"]:r.map}var Vp=DQ,OQ=Vp;function EQ(t){var s=OQ(this,t).delete(t);return this.size-=s?1:0,s}var MQ=EQ,RQ=Vp;function _Q(t){return RQ(this,t).get(t)}var IQ=_Q,$Q=Vp;function FQ(t){return $Q(this,t).has(t)}var LQ=FQ,BQ=Vp;function VQ(t,s){var r=BQ(this,t),n=r.size;return r.set(t,s),this.size+=r.size==n?0:1,this}var qQ=VQ,UQ=PQ,zQ=MQ,GQ=IQ,HQ=LQ,KQ=qQ;function Ic(t){var s=-1,r=t==null?0:t.length;for(this.clear();++s<r;){var n=t[s];this.set(n[0],n[1])}}Ic.prototype.clear=UQ;Ic.prototype.delete=zQ;Ic.prototype.get=GQ;Ic.prototype.has=HQ;Ic.prototype.set=KQ;var Ob=Ic,AR=Ob,WQ="Expected a function";function Eb(t,s){if(typeof t!="function"||s!=null&&typeof s!="function")throw new TypeError(WQ);var r=function(){var n=arguments,a=s?s.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var l=t.apply(this,n);return r.cache=i.set(a,l)||i,l};return r.cache=new(Eb.Cache||AR),r}Eb.Cache=AR;var TR=Eb;const YQ=ls(TR);var QQ=TR,XQ=500;function ZQ(t){var s=QQ(t,function(n){return r.size===XQ&&r.clear(),n}),r=s.cache;return s}var JQ=ZQ,eX=JQ,tX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sX=/\\(\\)?/g,rX=eX(function(t){var s=[];return t.charCodeAt(0)===46&&s.push(""),t.replace(tX,function(r,n,a,i){s.push(a?i.replace(sX,"$1"):n||r)}),s}),nX=rX;function aX(t,s){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=s(t[r],r,t);return a}var Mb=aX,m2=lm,iX=Mb,lX=Fr,oX=Ec,h2=m2?m2.prototype:void 0,x2=h2?h2.toString:void 0;function DR(t){if(typeof t=="string")return t;if(lX(t))return iX(t,DR)+"";if(oX(t))return x2?x2.call(t):"";var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var cX=DR,dX=cX;function uX(t){return t==null?"":dX(t)}var OR=uX,mX=Fr,hX=kb,xX=nX,pX=OR;function fX(t,s){return mX(t)?t:hX(t,s)?[t]:xX(pX(t))}var ER=fX,gX=Ec;function jX(t){if(typeof t=="string"||gX(t))return t;var s=t+"";return s=="0"&&1/t==-1/0?"-0":s}var qp=jX,vX=ER,yX=qp;function bX(t,s){s=vX(s,t);for(var r=0,n=s.length;t!=null&&r<n;)t=t[yX(s[r++])];return r&&r==n?t:void 0}var Rb=bX,NX=Rb;function wX(t,s,r){var n=t==null?void 0:NX(t,s);return n===void 0?r:n}var MR=wX;const Qr=ls(MR);function SX(t){return t==null}var CX=SX;const kt=ls(CX);var PX=Xa,kX=Fr,AX=Za,TX="[object String]";function DX(t){return typeof t=="string"||!kX(t)&&AX(t)&&PX(t)==TX}var OX=DX;const kl=ls(OX);var RR={exports:{}},ss={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b=Symbol.for("react.element"),Ib=Symbol.for("react.portal"),Up=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),Gp=Symbol.for("react.profiler"),Hp=Symbol.for("react.provider"),Kp=Symbol.for("react.context"),EX=Symbol.for("react.server_context"),Wp=Symbol.for("react.forward_ref"),Yp=Symbol.for("react.suspense"),Qp=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),Zp=Symbol.for("react.lazy"),MX=Symbol.for("react.offscreen"),_R;_R=Symbol.for("react.module.reference");function Nn(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case _b:switch(t=t.type,t){case Up:case Gp:case zp:case Yp:case Qp:return t;default:switch(t=t&&t.$$typeof,t){case EX:case Kp:case Wp:case Zp:case Xp:case Hp:return t;default:return s}}case Ib:return s}}}ss.ContextConsumer=Kp;ss.ContextProvider=Hp;ss.Element=_b;ss.ForwardRef=Wp;ss.Fragment=Up;ss.Lazy=Zp;ss.Memo=Xp;ss.Portal=Ib;ss.Profiler=Gp;ss.StrictMode=zp;ss.Suspense=Yp;ss.SuspenseList=Qp;ss.isAsyncMode=function(){return!1};ss.isConcurrentMode=function(){return!1};ss.isContextConsumer=function(t){return Nn(t)===Kp};ss.isContextProvider=function(t){return Nn(t)===Hp};ss.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_b};ss.isForwardRef=function(t){return Nn(t)===Wp};ss.isFragment=function(t){return Nn(t)===Up};ss.isLazy=function(t){return Nn(t)===Zp};ss.isMemo=function(t){return Nn(t)===Xp};ss.isPortal=function(t){return Nn(t)===Ib};ss.isProfiler=function(t){return Nn(t)===Gp};ss.isStrictMode=function(t){return Nn(t)===zp};ss.isSuspense=function(t){return Nn(t)===Yp};ss.isSuspenseList=function(t){return Nn(t)===Qp};ss.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Up||t===Gp||t===zp||t===Yp||t===Qp||t===MX||typeof t=="object"&&t!==null&&(t.$$typeof===Zp||t.$$typeof===Xp||t.$$typeof===Hp||t.$$typeof===Kp||t.$$typeof===Wp||t.$$typeof===_R||t.getModuleId!==void 0)};ss.typeOf=Nn;RR.exports=ss;var RX=RR.exports,_X=Xa,IX=Za,$X="[object Number]";function FX(t){return typeof t=="number"||IX(t)&&_X(t)==$X}var IR=FX;const LX=ls(IR);var BX=IR;function VX(t){return BX(t)&&t!=+t}var qX=VX;const om=ls(qX);var kr=function(s){return s===0?0:s>0?1:-1},ll=function(s){return kl(s)&&s.indexOf("%")===s.length-1},Fe=function(s){return LX(s)&&!om(s)},UX=function(s){return kt(s)},nr=function(s){return Fe(s)||kl(s)},zX=0,$c=function(s){var r=++zX;return"".concat(s||"").concat(r)},Ar=function(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Fe(s)&&!kl(s))return n;var i;if(ll(s)){var l=s.indexOf("%");i=r*parseFloat(s.slice(0,l))/100}else i=+s;return om(i)&&(i=n),a&&i>r&&(i=r),i},pi=function(s){if(!s)return null;var r=Object.keys(s);return r&&r.length?s[r[0]]:null},GX=function(s){if(!Array.isArray(s))return!1;for(var r=s.length,n={},a=0;a<r;a++)if(!n[s[a]])n[s[a]]=!0;else return!0;return!1},Hr=function(s,r){return Fe(s)&&Fe(r)?function(n){return s+n*(r-s)}:function(){return r}};function Fh(t,s,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof s=="function"?s(n):Qr(n,s))===r})}var HX=function(s,r){return Fe(s)&&Fe(r)?s-r:kl(s)&&kl(r)?s.localeCompare(r):s instanceof Date&&r instanceof Date?s.getTime()-r.getTime():String(s).localeCompare(String(r))};function Co(t,s){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(s,r)||t[r]!==s[r]))return!1;for(var n in s)if({}.hasOwnProperty.call(s,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function mv(t){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},mv(t)}var KX=["viewBox","children"],WX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],p2=["points","pathLength"],Dg={svg:KX,polygon:p2,polyline:p2},$b=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Lh=function(s,r){if(!s||typeof s=="function"||typeof s=="boolean")return null;var n=s;if(j.isValidElement(s)&&(n=s.props),!Mc(n))return null;var a={};return Object.keys(n).forEach(function(i){$b.includes(i)&&(a[i]=r||function(l){return n[i](n,l)})}),a},YX=function(s,r,n){return function(a){return s(r,n,a),null}},Al=function(s,r,n){if(!Mc(s)||mv(s)!=="object")return null;var a=null;return Object.keys(s).forEach(function(i){var l=s[i];$b.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=YX(l,r,n))}),a},QX=["children"],XX=["children"];function f2(t,s){if(t==null)return{};var r=ZX(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ZX(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function hv(t){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hv(t)}var g2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ia=function(s){return typeof s=="string"?s:s?s.displayName||s.name||"Component":""},j2=null,Og=null,Fb=function t(s){if(s===j2&&Array.isArray(Og))return Og;var r=[];return j.Children.forEach(s,function(n){kt(n)||(RX.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Og=r,j2=s,r};function Xr(t,s){var r=[],n=[];return Array.isArray(s)?n=s.map(function(a){return Ia(a)}):n=[Ia(s)],Fb(t).forEach(function(a){var i=Qr(a,"type.displayName")||Qr(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function qr(t,s){var r=Xr(t,s);return r&&r[0]}var v2=function(s){if(!s||!s.props)return!1;var r=s.props,n=r.width,a=r.height;return!(!Fe(n)||n<=0||!Fe(a)||a<=0)},JX=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],eZ=function(s){return s&&s.type&&kl(s.type)&&JX.indexOf(s.type)>=0},tZ=function(s){return s&&hv(s)==="object"&&"clipDot"in s},sZ=function(s,r,n,a){var i,l=(i=Dg?.[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!bt(s)&&(a&&l.includes(r)||WX.includes(r))||n&&$b.includes(r)},pt=function(s,r,n){if(!s||typeof s=="function"||typeof s=="boolean")return null;var a=s;if(j.isValidElement(s)&&(a=s.props),!Mc(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;sZ((o=a)===null||o===void 0?void 0:o[l],l,r,n)&&(i[l]=a[l])}),i},xv=function t(s,r){if(s===r)return!0;var n=j.Children.count(s);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return y2(Array.isArray(s)?s[0]:s,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=s[a],l=r[a];if(Array.isArray(i)||Array.isArray(l)){if(!t(i,l))return!1}else if(!y2(i,l))return!1}return!0},y2=function(s,r){if(kt(s)&&kt(r))return!0;if(!kt(s)&&!kt(r)){var n=s.props||{},a=n.children,i=f2(n,QX),l=r.props||{},o=l.children,c=f2(l,XX);return a&&o?Co(i,c)&&xv(a,o):!a&&!o?Co(i,c):!1}return!1},b2=function(s,r){var n=[],a={};return Fb(s).forEach(function(i,l){if(eZ(i))n.push(i);else if(i){var o=Ia(i.type),c=r[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var m=d(i,o,l);n.push(m),a[o]=!0}}}),n},rZ=function(s){var r=s&&s.type;return r&&g2[r]?g2[r]:null},nZ=function(s,r){return Fb(r).indexOf(s)},aZ=["children","width","height","viewBox","className","style","title","desc"];function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pv.apply(this,arguments)}function iZ(t,s){if(t==null)return{};var r=lZ(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lZ(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fv(t){var s=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,l=t.style,o=t.title,c=t.desc,d=iZ(t,aZ),u=a||{width:r,height:n,x:0,y:0},m=At("recharts-surface",i);return X.createElement("svg",pv({},pt(d,!0,"svg"),{className:m,width:r,height:n,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),X.createElement("title",null,o),X.createElement("desc",null,c),s)}var oZ=["children","className"];function gv(){return gv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gv.apply(this,arguments)}function cZ(t,s){if(t==null)return{};var r=dZ(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dZ(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qt=X.forwardRef(function(t,s){var r=t.children,n=t.className,a=cZ(t,oZ),i=At("recharts-layer",n);return X.createElement("g",gv({className:i},pt(a,!0),{ref:s}),r)}),Ln=function(s,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function uZ(t,s,r){var n=-1,a=t.length;s<0&&(s=-s>a?0:a+s),r=r>a?a:r,r<0&&(r+=a),a=s>r?0:r-s>>>0,s>>>=0;for(var i=Array(a);++n<a;)i[n]=t[n+s];return i}var mZ=uZ,hZ=mZ;function xZ(t,s,r){var n=t.length;return r=r===void 0?n:r,!s&&r>=n?t:hZ(t,s,r)}var pZ=xZ,fZ="\\ud800-\\udfff",gZ="\\u0300-\\u036f",jZ="\\ufe20-\\ufe2f",vZ="\\u20d0-\\u20ff",yZ=gZ+jZ+vZ,bZ="\\ufe0e\\ufe0f",NZ="\\u200d",wZ=RegExp("["+NZ+fZ+yZ+bZ+"]");function SZ(t){return wZ.test(t)}var $R=SZ;function CZ(t){return t.split("")}var PZ=CZ,FR="\\ud800-\\udfff",kZ="\\u0300-\\u036f",AZ="\\ufe20-\\ufe2f",TZ="\\u20d0-\\u20ff",DZ=kZ+AZ+TZ,OZ="\\ufe0e\\ufe0f",EZ="["+FR+"]",jv="["+DZ+"]",vv="\\ud83c[\\udffb-\\udfff]",MZ="(?:"+jv+"|"+vv+")",LR="[^"+FR+"]",BR="(?:\\ud83c[\\udde6-\\uddff]){2}",VR="[\\ud800-\\udbff][\\udc00-\\udfff]",RZ="\\u200d",qR=MZ+"?",UR="["+OZ+"]?",_Z="(?:"+RZ+"(?:"+[LR,BR,VR].join("|")+")"+UR+qR+")*",IZ=UR+qR+_Z,$Z="(?:"+[LR+jv+"?",jv,BR,VR,EZ].join("|")+")",FZ=RegExp(vv+"(?="+vv+")|"+$Z+IZ,"g");function LZ(t){return t.match(FZ)||[]}var BZ=LZ,VZ=PZ,qZ=$R,UZ=BZ;function zZ(t){return qZ(t)?UZ(t):VZ(t)}var GZ=zZ,HZ=pZ,KZ=$R,WZ=GZ,YZ=OR;function QZ(t){return function(s){s=YZ(s);var r=KZ(s)?WZ(s):void 0,n=r?r[0]:s.charAt(0),a=r?HZ(r,1).join(""):s.slice(1);return n[t]()+a}}var XZ=QZ,ZZ=XZ,JZ=ZZ("toUpperCase"),eJ=JZ;const Jp=ls(eJ);function ps(t){return function(){return t}}const zR=Math.cos,Bh=Math.sin,Wn=Math.sqrt,Vh=Math.PI,ef=2*Vh,yv=Math.PI,bv=2*yv,Xi=1e-6,tJ=bv-Xi;function GR(t){this._+=t[0];for(let s=1,r=t.length;s<r;++s)this._+=arguments[s]+t[s]}function sJ(t){let s=Math.floor(t);if(!(s>=0))throw new Error(`invalid digits: ${t}`);if(s>15)return GR;const r=10**s;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class rJ{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?GR:sJ(s)}moveTo(s,r){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,r){this._append`L${this._x1=+s},${this._y1=+r}`}quadraticCurveTo(s,r,n,a){this._append`Q${+s},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(s,r,n,a,i,l){this._append`C${+s},${+r},${+n},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(s,r,n,a,i){if(s=+s,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=n-s,d=a-r,u=l-s,m=o-r,h=u*u+m*m;if(this._x1===null)this._append`M${this._x1=s},${this._y1=r}`;else if(h>Xi)if(!(Math.abs(m*c-d*u)>Xi)||!i)this._append`L${this._x1=s},${this._y1=r}`;else{let x=n-l,g=a-o,p=c*c+d*d,f=x*x+g*g,v=Math.sqrt(p),b=Math.sqrt(h),y=i*Math.tan((yv-Math.acos((p+h-f)/(2*v*b)))/2),S=y/b,w=y/v;Math.abs(S-1)>Xi&&this._append`L${s+S*u},${r+S*m}`,this._append`A${i},${i},0,0,${+(m*x>u*g)},${this._x1=s+w*c},${this._y1=r+w*d}`}}arc(s,r,n,a,i,l){if(s=+s,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),d=s+o,u=r+c,m=1^l,h=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Xi||Math.abs(this._y1-u)>Xi)&&this._append`L${d},${u}`,n&&(h<0&&(h=h%bv+bv),h>tJ?this._append`A${n},${n},0,1,${m},${s-o},${r-c}A${n},${n},0,1,${m},${this._x1=d},${this._y1=u}`:h>Xi&&this._append`A${n},${n},0,${+(h>=yv)},${m},${this._x1=s+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(s,r,n,a){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Lb(t){let s=3;return t.digits=function(r){if(!arguments.length)return s;if(r==null)s=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);s=n}return t},()=>new rJ(s)}function Bb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function HR(t){this._context=t}HR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._context.lineTo(t,s);break}}};function tf(t){return new HR(t)}function KR(t){return t[0]}function WR(t){return t[1]}function YR(t,s){var r=ps(!0),n=null,a=tf,i=null,l=Lb(o);t=typeof t=="function"?t:t===void 0?KR:ps(t),s=typeof s=="function"?s:s===void 0?WR:ps(s);function o(c){var d,u=(c=Bb(c)).length,m,h=!1,x;for(n==null&&(i=a(x=l())),d=0;d<=u;++d)!(d<u&&r(m=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(m,d,c),+s(m,d,c));if(x)return i=null,x+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:ps(+c),o):t},o.y=function(c){return arguments.length?(s=typeof c=="function"?c:ps(+c),o):s},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ps(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Mm(t,s,r){var n=null,a=ps(!0),i=null,l=tf,o=null,c=Lb(d);t=typeof t=="function"?t:t===void 0?KR:ps(+t),s=typeof s=="function"?s:ps(s===void 0?0:+s),r=typeof r=="function"?r:r===void 0?WR:ps(+r);function d(m){var h,x,g,p=(m=Bb(m)).length,f,v=!1,b,y=new Array(p),S=new Array(p);for(i==null&&(o=l(b=c())),h=0;h<=p;++h){if(!(h<p&&a(f=m[h],h,m))===v)if(v=!v)x=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=x;--g)o.point(y[g],S[g]);o.lineEnd(),o.areaEnd()}v&&(y[h]=+t(f,h,m),S[h]=+s(f,h,m),o.point(n?+n(f,h,m):y[h],r?+r(f,h,m):S[h]))}if(b)return o=null,b+""||null}function u(){return YR().defined(a).curve(l).context(i)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:ps(+m),n=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:ps(+m),d):t},d.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:ps(+m),d):n},d.y=function(m){return arguments.length?(s=typeof m=="function"?m:ps(+m),r=null,d):s},d.y0=function(m){return arguments.length?(s=typeof m=="function"?m:ps(+m),d):s},d.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:ps(+m),d):r},d.lineX0=d.lineY0=function(){return u().x(t).y(s)},d.lineY1=function(){return u().x(t).y(r)},d.lineX1=function(){return u().x(n).y(s)},d.defined=function(m){return arguments.length?(a=typeof m=="function"?m:ps(!!m),d):a},d.curve=function(m){return arguments.length?(l=m,i!=null&&(o=l(i)),d):l},d.context=function(m){return arguments.length?(m==null?i=o=null:o=l(i=m),d):i},d}class QR{constructor(s,r){this._context=s,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,r){switch(s=+s,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,r):this._context.moveTo(s,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,r,s,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,s,this._y0,s,r);break}}this._x0=s,this._y0=r}}function nJ(t){return new QR(t,!0)}function aJ(t){return new QR(t,!1)}const Vb={draw(t,s){const r=Wn(s/Vh);t.moveTo(r,0),t.arc(0,0,r,0,ef)}},iJ={draw(t,s){const r=Wn(s/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},XR=Wn(1/3),lJ=XR*2,oJ={draw(t,s){const r=Wn(s/lJ),n=r*XR;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},cJ={draw(t,s){const r=Wn(s),n=-r/2;t.rect(n,n,r,r)}},dJ=.8908130915292852,ZR=Bh(Vh/10)/Bh(7*Vh/10),uJ=Bh(ef/10)*ZR,mJ=-zR(ef/10)*ZR,hJ={draw(t,s){const r=Wn(s*dJ),n=uJ*r,a=mJ*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const l=ef*i/5,o=zR(l),c=Bh(l);t.lineTo(c*r,-o*r),t.lineTo(o*n-c*a,c*n+o*a)}t.closePath()}},Eg=Wn(3),xJ={draw(t,s){const r=-Wn(s/(Eg*3));t.moveTo(0,r*2),t.lineTo(-Eg*r,-r),t.lineTo(Eg*r,-r),t.closePath()}},sn=-.5,rn=Wn(3)/2,Nv=1/Wn(12),pJ=(Nv/2+1)*3,fJ={draw(t,s){const r=Wn(s/pJ),n=r/2,a=r*Nv,i=n,l=r*Nv+r,o=-i,c=l;t.moveTo(n,a),t.lineTo(i,l),t.lineTo(o,c),t.lineTo(sn*n-rn*a,rn*n+sn*a),t.lineTo(sn*i-rn*l,rn*i+sn*l),t.lineTo(sn*o-rn*c,rn*o+sn*c),t.lineTo(sn*n+rn*a,sn*a-rn*n),t.lineTo(sn*i+rn*l,sn*l-rn*i),t.lineTo(sn*o+rn*c,sn*c-rn*o),t.closePath()}};function gJ(t,s){let r=null,n=Lb(a);t=typeof t=="function"?t:ps(t||Vb),s=typeof s=="function"?s:ps(s===void 0?64:+s);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+s.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:ps(i),a):t},a.size=function(i){return arguments.length?(s=typeof i=="function"?i:ps(+i),a):s},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function qh(){}function Uh(t,s,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+s)/6,(t._y0+4*t._y1+r)/6)}function JR(t){this._context=t}JR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Uh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Uh(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function jJ(t){return new JR(t)}function e_(t){this._context=t}e_.prototype={areaStart:qh,areaEnd:qh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:Uh(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function vJ(t){return new e_(t)}function t_(t){this._context=t}t_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Uh(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function yJ(t){return new t_(t)}function s_(t){this._context=t}s_.prototype={areaStart:qh,areaEnd:qh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,s){t=+t,s=+s,this._point?this._context.lineTo(t,s):(this._point=1,this._context.moveTo(t,s))}};function bJ(t){return new s_(t)}function N2(t){return t<0?-1:1}function w2(t,s,r){var n=t._x1-t._x0,a=s-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),l=(r-t._y1)/(a||n<0&&-0),o=(i*a+l*n)/(n+a);return(N2(i)+N2(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function S2(t,s){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-s)/2:s}function Mg(t,s,r){var n=t._x0,a=t._y0,i=t._x1,l=t._y1,o=(i-n)/3;t._context.bezierCurveTo(n+o,a+o*s,i-o,l-o*r,i,l)}function zh(t){this._context=t}zh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mg(this,this._t0,S2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){var r=NaN;if(t=+t,s=+s,!(t===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,Mg(this,S2(this,r=w2(this,t,s)),r);break;default:Mg(this,this._t0,r=w2(this,t,s));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s,this._t0=r}}};function r_(t){this._context=new n_(t)}(r_.prototype=Object.create(zh.prototype)).point=function(t,s){zh.prototype.point.call(this,s,t)};function n_(t){this._context=t}n_.prototype={moveTo:function(t,s){this._context.moveTo(s,t)},closePath:function(){this._context.closePath()},lineTo:function(t,s){this._context.lineTo(s,t)},bezierCurveTo:function(t,s,r,n,a,i){this._context.bezierCurveTo(s,t,n,r,i,a)}};function NJ(t){return new zh(t)}function wJ(t){return new r_(t)}function a_(t){this._context=t}a_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,s=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],s[0]):this._context.moveTo(t[0],s[0]),r===2)this._context.lineTo(t[1],s[1]);else for(var n=C2(t),a=C2(s),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[l],s[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,s){this._x.push(+t),this._y.push(+s)}};function C2(t){var s,r=t.length-1,n,a=new Array(r),i=new Array(r),l=new Array(r);for(a[0]=0,i[0]=2,l[0]=t[0]+2*t[1],s=1;s<r-1;++s)a[s]=1,i[s]=4,l[s]=4*t[s]+2*t[s+1];for(a[r-1]=2,i[r-1]=7,l[r-1]=8*t[r-1]+t[r],s=1;s<r;++s)n=a[s]/i[s-1],i[s]-=n,l[s]-=n*l[s-1];for(a[r-1]=l[r-1]/i[r-1],s=r-2;s>=0;--s)a[s]=(l[s]-a[s+1])/i[s];for(i[r-1]=(t[r]+a[r-1])/2,s=0;s<r-1;++s)i[s]=2*t[s+1]-a[s+1];return[a,i]}function SJ(t){return new a_(t)}function sf(t,s){this._context=t,this._t=s}sf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(t,s);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,s)}break}}this._x=t,this._y=s}};function CJ(t){return new sf(t,.5)}function PJ(t){return new sf(t,0)}function kJ(t){return new sf(t,1)}function zo(t,s){if((l=t.length)>1)for(var r=1,n,a,i=t[s[0]],l,o=i.length;r<l;++r)for(a=i,i=t[s[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function wv(t){for(var s=t.length,r=new Array(s);--s>=0;)r[s]=s;return r}function AJ(t,s){return t[s]}function TJ(t){const s=[];return s.key=t,s}function DJ(){var t=ps([]),s=wv,r=zo,n=AJ;function a(i){var l=Array.from(t.apply(this,arguments),TJ),o,c=l.length,d=-1,u;for(const m of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+n(m,l[o].key,d,i)]).data=m;for(o=0,u=Bb(s(l));o<c;++o)l[u[o]].index=o;return r(l,u),l}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:ps(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ps(+i),a):n},a.order=function(i){return arguments.length?(s=i==null?wv:typeof i=="function"?i:ps(Array.from(i)),a):s},a.offset=function(i){return arguments.length?(r=i??zo,a):r},a}function OJ(t,s){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,l;a<i;++a){for(l=r=0;r<n;++r)l+=t[r][a][1]||0;if(l)for(r=0;r<n;++r)t[r][a][1]/=l}zo(t,s)}}function EJ(t,s){if((a=t.length)>0){for(var r=0,n=t[s[0]],a,i=n.length;r<i;++r){for(var l=0,o=0;l<a;++l)o+=t[l][r][1]||0;n[r][1]+=n[r][0]=-o/2}zo(t,s)}}function MJ(t,s){if(!(!((l=t.length)>0)||!((i=(a=t[s[0]]).length)>0))){for(var r=0,n=1,a,i,l;n<i;++n){for(var o=0,c=0,d=0;o<l;++o){for(var u=t[s[o]],m=u[n][1]||0,h=u[n-1][1]||0,x=(m-h)/2,g=0;g<o;++g){var p=t[s[g]],f=p[n][1]||0,v=p[n-1][1]||0;x+=f-v}c+=m,d+=x*m}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,zo(t,s)}}function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Zd(t)}var RJ=["type","size","sizeType"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sv.apply(this,arguments)}function P2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function k2(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?P2(Object(r),!0).forEach(function(n){_J(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _J(t,s,r){return s=IJ(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function IJ(t){var s=$J(t,"string");return Zd(s)=="symbol"?s:s+""}function $J(t,s){if(Zd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function FJ(t,s){if(t==null)return{};var r=LJ(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function LJ(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var i_={symbolCircle:Vb,symbolCross:iJ,symbolDiamond:oJ,symbolSquare:cJ,symbolStar:hJ,symbolTriangle:xJ,symbolWye:fJ},BJ=Math.PI/180,VJ=function(s){var r="symbol".concat(Jp(s));return i_[r]||Vb},qJ=function(s,r,n){if(r==="area")return s;switch(n){case"cross":return 5*s*s/9;case"diamond":return .5*s*s/Math.sqrt(3);case"square":return s*s;case"star":{var a=18*BJ;return 1.25*s*s*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*s*s/4;case"wye":return(21-10*Math.sqrt(3))*s*s/8;default:return Math.PI*s*s/4}},UJ=function(s,r){i_["symbol".concat(Jp(s))]=r},qb=function(s){var r=s.type,n=r===void 0?"circle":r,a=s.size,i=a===void 0?64:a,l=s.sizeType,o=l===void 0?"area":l,c=FJ(s,RJ),d=k2(k2({},c),{},{type:n,size:i,sizeType:o}),u=function(){var f=VJ(n),v=gJ().type(f).size(qJ(i,o,n));return v()},m=d.className,h=d.cx,x=d.cy,g=pt(d,!0);return h===+h&&x===+x&&i===+i?X.createElement("path",Sv({},g,{className:At("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(x,")"),d:u()})):null};qb.registerSymbol=UJ;function Go(t){"@babel/helpers - typeof";return Go=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Go(t)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cv.apply(this,arguments)}function A2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zJ(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?A2(Object(r),!0).forEach(function(n){Jd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GJ(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function HJ(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o_(n.key),n)}}function KJ(t,s,r){return s&&HJ(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function WJ(t,s,r){return s=Gh(s),YJ(t,l_()?Reflect.construct(s,r||[],Gh(t).constructor):s.apply(t,r))}function YJ(t,s){if(s&&(Go(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QJ(t)}function QJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l_=function(){return!!t})()}function Gh(t){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gh(t)}function XJ(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Pv(t,s)}function Pv(t,s){return Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Pv(t,s)}function Jd(t,s,r){return s=o_(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function o_(t){var s=ZJ(t,"string");return Go(s)=="symbol"?s:s+""}function ZJ(t,s){if(Go(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Go(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nn=32,Ub=function(t){function s(){return GJ(this,s),WJ(this,s,arguments)}return XJ(s,t),KJ(s,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=nn/2,l=nn/6,o=nn/3,c=n.inactive?a:n.color;if(n.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:nn,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(nn,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return X.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(nn/8,"h").concat(nn,"v").concat(nn*3/4,"h").concat(-nn,"z"),className:"recharts-legend-icon"});if(X.isValidElement(n.legendIcon)){var d=zJ({},n);return delete d.legendIcon,X.cloneElement(n.legendIcon,d)}return X.createElement(qb,{fill:c,cx:i,cy:i,size:nn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:nn,height:nn},m={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,g){var p=x.formatter||c,f=At(Jd(Jd({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",x.inactive));if(x.type==="none")return null;var v=bt(x.value)?null:x.value;Ln(!bt(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=x.inactive?d:x.color;return X.createElement("li",Cv({className:f,style:m,key:"legend-item-".concat(g)},Al(n.props,x,g)),X.createElement(fv,{width:l,height:l,viewBox:u,style:h},n.renderIcon(x)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(v,x,g):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,l=n.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(j.PureComponent);Jd(Ub,"displayName","Legend");Jd(Ub,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var JJ=Bp;function eee(){this.__data__=new JJ,this.size=0}var tee=eee;function see(t){var s=this.__data__,r=s.delete(t);return this.size=s.size,r}var ree=see;function nee(t){return this.__data__.get(t)}var aee=nee;function iee(t){return this.__data__.has(t)}var lee=iee,oee=Bp,cee=Db,dee=Ob,uee=200;function mee(t,s){var r=this.__data__;if(r instanceof oee){var n=r.__data__;if(!cee||n.length<uee-1)return n.push([t,s]),this.size=++r.size,this;r=this.__data__=new dee(n)}return r.set(t,s),this.size=r.size,this}var hee=mee,xee=Bp,pee=tee,fee=ree,gee=aee,jee=lee,vee=hee;function Fc(t){var s=this.__data__=new xee(t);this.size=s.size}Fc.prototype.clear=pee;Fc.prototype.delete=fee;Fc.prototype.get=gee;Fc.prototype.has=jee;Fc.prototype.set=vee;var c_=Fc,yee="__lodash_hash_undefined__";function bee(t){return this.__data__.set(t,yee),this}var Nee=bee;function wee(t){return this.__data__.has(t)}var See=wee,Cee=Ob,Pee=Nee,kee=See;function Hh(t){var s=-1,r=t==null?0:t.length;for(this.__data__=new Cee;++s<r;)this.add(t[s])}Hh.prototype.add=Hh.prototype.push=Pee;Hh.prototype.has=kee;var d_=Hh;function Aee(t,s){for(var r=-1,n=t==null?0:t.length;++r<n;)if(s(t[r],r,t))return!0;return!1}var u_=Aee;function Tee(t,s){return t.has(s)}var m_=Tee,Dee=d_,Oee=u_,Eee=m_,Mee=1,Ree=2;function _ee(t,s,r,n,a,i){var l=r&Mee,o=t.length,c=s.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(t),u=i.get(s);if(d&&u)return d==s&&u==t;var m=-1,h=!0,x=r&Ree?new Dee:void 0;for(i.set(t,s),i.set(s,t);++m<o;){var g=t[m],p=s[m];if(n)var f=l?n(p,g,m,s,t,i):n(g,p,m,t,s,i);if(f!==void 0){if(f)continue;h=!1;break}if(x){if(!Oee(s,function(v,b){if(!Eee(x,b)&&(g===v||a(g,v,r,n,i)))return x.push(b)})){h=!1;break}}else if(!(g===p||a(g,p,r,n,i))){h=!1;break}}return i.delete(t),i.delete(s),h}var h_=_ee,Iee=ba,$ee=Iee.Uint8Array,Fee=$ee;function Lee(t){var s=-1,r=Array(t.size);return t.forEach(function(n,a){r[++s]=[a,n]}),r}var Bee=Lee;function Vee(t){var s=-1,r=Array(t.size);return t.forEach(function(n){r[++s]=n}),r}var zb=Vee,T2=lm,D2=Fee,qee=Tb,Uee=h_,zee=Bee,Gee=zb,Hee=1,Kee=2,Wee="[object Boolean]",Yee="[object Date]",Qee="[object Error]",Xee="[object Map]",Zee="[object Number]",Jee="[object RegExp]",ete="[object Set]",tte="[object String]",ste="[object Symbol]",rte="[object ArrayBuffer]",nte="[object DataView]",O2=T2?T2.prototype:void 0,Rg=O2?O2.valueOf:void 0;function ate(t,s,r,n,a,i,l){switch(r){case nte:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case rte:return!(t.byteLength!=s.byteLength||!i(new D2(t),new D2(s)));case Wee:case Yee:case Zee:return qee(+t,+s);case Qee:return t.name==s.name&&t.message==s.message;case Jee:case tte:return t==s+"";case Xee:var o=zee;case ete:var c=n&Hee;if(o||(o=Gee),t.size!=s.size&&!c)return!1;var d=l.get(t);if(d)return d==s;n|=Kee,l.set(t,s);var u=Uee(o(t),o(s),n,a,i,l);return l.delete(t),u;case ste:if(Rg)return Rg.call(t)==Rg.call(s)}return!1}var ite=ate;function lte(t,s){for(var r=-1,n=s.length,a=t.length;++r<n;)t[a+r]=s[r];return t}var x_=lte,ote=x_,cte=Fr;function dte(t,s,r){var n=s(t);return cte(t)?n:ote(n,r(t))}var ute=dte;function mte(t,s){for(var r=-1,n=t==null?0:t.length,a=0,i=[];++r<n;){var l=t[r];s(l,r,t)&&(i[a++]=l)}return i}var hte=mte;function xte(){return[]}var pte=xte,fte=hte,gte=pte,jte=Object.prototype,vte=jte.propertyIsEnumerable,E2=Object.getOwnPropertySymbols,yte=E2?function(t){return t==null?[]:(t=Object(t),fte(E2(t),function(s){return vte.call(t,s)}))}:gte,bte=yte;function Nte(t,s){for(var r=-1,n=Array(t);++r<t;)n[r]=s(r);return n}var wte=Nte,Ste=Xa,Cte=Za,Pte="[object Arguments]";function kte(t){return Cte(t)&&Ste(t)==Pte}var Ate=kte,M2=Ate,Tte=Za,p_=Object.prototype,Dte=p_.hasOwnProperty,Ote=p_.propertyIsEnumerable,Ete=M2(function(){return arguments}())?M2:function(t){return Tte(t)&&Dte.call(t,"callee")&&!Ote.call(t,"callee")},Gb=Ete,Kh={exports:{}};function Mte(){return!1}var Rte=Mte;Kh.exports;(function(t,s){var r=ba,n=Rte,a=s&&!s.nodeType&&s,i=a&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===a,o=l?r.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||n;t.exports=d})(Kh,Kh.exports);var f_=Kh.exports,_te=9007199254740991,Ite=/^(?:0|[1-9]\d*)$/;function $te(t,s){var r=typeof t;return s=s??_te,!!s&&(r=="number"||r!="symbol"&&Ite.test(t))&&t>-1&&t%1==0&&t<s}var Hb=$te,Fte=9007199254740991;function Lte(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Fte}var Kb=Lte,Bte=Xa,Vte=Kb,qte=Za,Ute="[object Arguments]",zte="[object Array]",Gte="[object Boolean]",Hte="[object Date]",Kte="[object Error]",Wte="[object Function]",Yte="[object Map]",Qte="[object Number]",Xte="[object Object]",Zte="[object RegExp]",Jte="[object Set]",ese="[object String]",tse="[object WeakMap]",sse="[object ArrayBuffer]",rse="[object DataView]",nse="[object Float32Array]",ase="[object Float64Array]",ise="[object Int8Array]",lse="[object Int16Array]",ose="[object Int32Array]",cse="[object Uint8Array]",dse="[object Uint8ClampedArray]",use="[object Uint16Array]",mse="[object Uint32Array]",bs={};bs[nse]=bs[ase]=bs[ise]=bs[lse]=bs[ose]=bs[cse]=bs[dse]=bs[use]=bs[mse]=!0;bs[Ute]=bs[zte]=bs[sse]=bs[Gte]=bs[rse]=bs[Hte]=bs[Kte]=bs[Wte]=bs[Yte]=bs[Qte]=bs[Xte]=bs[Zte]=bs[Jte]=bs[ese]=bs[tse]=!1;function hse(t){return qte(t)&&Vte(t.length)&&!!bs[Bte(t)]}var xse=hse;function pse(t){return function(s){return t(s)}}var g_=pse,Wh={exports:{}};Wh.exports;(function(t,s){var r=CR,n=s&&!s.nodeType&&s,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,l=i&&r.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();t.exports=o})(Wh,Wh.exports);var fse=Wh.exports,gse=xse,jse=g_,R2=fse,_2=R2&&R2.isTypedArray,vse=_2?jse(_2):gse,j_=vse,yse=wte,bse=Gb,Nse=Fr,wse=f_,Sse=Hb,Cse=j_,Pse=Object.prototype,kse=Pse.hasOwnProperty;function Ase(t,s){var r=Nse(t),n=!r&&bse(t),a=!r&&!n&&wse(t),i=!r&&!n&&!a&&Cse(t),l=r||n||a||i,o=l?yse(t.length,String):[],c=o.length;for(var d in t)(s||kse.call(t,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Sse(d,c)))&&o.push(d);return o}var Tse=Ase,Dse=Object.prototype;function Ose(t){var s=t&&t.constructor,r=typeof s=="function"&&s.prototype||Dse;return t===r}var Ese=Ose;function Mse(t,s){return function(r){return t(s(r))}}var v_=Mse,Rse=v_,_se=Rse(Object.keys,Object),Ise=_se,$se=Ese,Fse=Ise,Lse=Object.prototype,Bse=Lse.hasOwnProperty;function Vse(t){if(!$se(t))return Fse(t);var s=[];for(var r in Object(t))Bse.call(t,r)&&r!="constructor"&&s.push(r);return s}var qse=Vse,Use=Ab,zse=Kb;function Gse(t){return t!=null&&zse(t.length)&&!Use(t)}var cm=Gse,Hse=Tse,Kse=qse,Wse=cm;function Yse(t){return Wse(t)?Hse(t):Kse(t)}var rf=Yse,Qse=ute,Xse=bte,Zse=rf;function Jse(t){return Qse(t,Zse,Xse)}var ere=Jse,I2=ere,tre=1,sre=Object.prototype,rre=sre.hasOwnProperty;function nre(t,s,r,n,a,i){var l=r&tre,o=I2(t),c=o.length,d=I2(s),u=d.length;if(c!=u&&!l)return!1;for(var m=c;m--;){var h=o[m];if(!(l?h in s:rre.call(s,h)))return!1}var x=i.get(t),g=i.get(s);if(x&&g)return x==s&&g==t;var p=!0;i.set(t,s),i.set(s,t);for(var f=l;++m<c;){h=o[m];var v=t[h],b=s[h];if(n)var y=l?n(b,v,h,s,t,i):n(v,b,h,t,s,i);if(!(y===void 0?v===b||a(v,b,r,n,i):y)){p=!1;break}f||(f=h=="constructor")}if(p&&!f){var S=t.constructor,w=s.constructor;S!=w&&"constructor"in t&&"constructor"in s&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(p=!1)}return i.delete(t),i.delete(s),p}var are=nre,ire=Ll,lre=ba,ore=ire(lre,"DataView"),cre=ore,dre=Ll,ure=ba,mre=dre(ure,"Promise"),hre=mre,xre=Ll,pre=ba,fre=xre(pre,"Set"),y_=fre,gre=Ll,jre=ba,vre=gre(jre,"WeakMap"),yre=vre,kv=cre,Av=Db,Tv=hre,Dv=y_,Ov=yre,b_=Xa,Lc=kR,$2="[object Map]",bre="[object Object]",F2="[object Promise]",L2="[object Set]",B2="[object WeakMap]",V2="[object DataView]",Nre=Lc(kv),wre=Lc(Av),Sre=Lc(Tv),Cre=Lc(Dv),Pre=Lc(Ov),Zi=b_;(kv&&Zi(new kv(new ArrayBuffer(1)))!=V2||Av&&Zi(new Av)!=$2||Tv&&Zi(Tv.resolve())!=F2||Dv&&Zi(new Dv)!=L2||Ov&&Zi(new Ov)!=B2)&&(Zi=function(t){var s=b_(t),r=s==bre?t.constructor:void 0,n=r?Lc(r):"";if(n)switch(n){case Nre:return V2;case wre:return $2;case Sre:return F2;case Cre:return L2;case Pre:return B2}return s});var kre=Zi,_g=c_,Are=h_,Tre=ite,Dre=are,q2=kre,U2=Fr,z2=f_,Ore=j_,Ere=1,G2="[object Arguments]",H2="[object Array]",Rm="[object Object]",Mre=Object.prototype,K2=Mre.hasOwnProperty;function Rre(t,s,r,n,a,i){var l=U2(t),o=U2(s),c=l?H2:q2(t),d=o?H2:q2(s);c=c==G2?Rm:c,d=d==G2?Rm:d;var u=c==Rm,m=d==Rm,h=c==d;if(h&&z2(t)){if(!z2(s))return!1;l=!0,u=!1}if(h&&!u)return i||(i=new _g),l||Ore(t)?Are(t,s,r,n,a,i):Tre(t,s,c,r,n,a,i);if(!(r&Ere)){var x=u&&K2.call(t,"__wrapped__"),g=m&&K2.call(s,"__wrapped__");if(x||g){var p=x?t.value():t,f=g?s.value():s;return i||(i=new _g),a(p,f,r,n,i)}}return h?(i||(i=new _g),Dre(t,s,r,n,a,i)):!1}var _re=Rre,Ire=_re,W2=Za;function N_(t,s,r,n,a){return t===s?!0:t==null||s==null||!W2(t)&&!W2(s)?t!==t&&s!==s:Ire(t,s,r,n,N_,a)}var Wb=N_,$re=c_,Fre=Wb,Lre=1,Bre=2;function Vre(t,s,r,n){var a=r.length,i=a,l=!n;if(t==null)return!i;for(t=Object(t);a--;){var o=r[a];if(l&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++a<i;){o=r[a];var c=o[0],d=t[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in t))return!1}else{var m=new $re;if(n)var h=n(d,u,c,t,s,m);if(!(h===void 0?Fre(u,d,Lre|Bre,n,m):h))return!1}}return!0}var qre=Vre,Ure=Bi;function zre(t){return t===t&&!Ure(t)}var w_=zre,Gre=w_,Hre=rf;function Kre(t){for(var s=Hre(t),r=s.length;r--;){var n=s[r],a=t[n];s[r]=[n,a,Gre(a)]}return s}var Wre=Kre;function Yre(t,s){return function(r){return r==null?!1:r[t]===s&&(s!==void 0||t in Object(r))}}var S_=Yre,Qre=qre,Xre=Wre,Zre=S_;function Jre(t){var s=Xre(t);return s.length==1&&s[0][2]?Zre(s[0][0],s[0][1]):function(r){return r===t||Qre(r,t,s)}}var ene=Jre;function tne(t,s){return t!=null&&s in Object(t)}var sne=tne,rne=ER,nne=Gb,ane=Fr,ine=Hb,lne=Kb,one=qp;function cne(t,s,r){s=rne(s,t);for(var n=-1,a=s.length,i=!1;++n<a;){var l=one(s[n]);if(!(i=t!=null&&r(t,l)))break;t=t[l]}return i||++n!=a?i:(a=t==null?0:t.length,!!a&&lne(a)&&ine(l,a)&&(ane(t)||nne(t)))}var dne=cne,une=sne,mne=dne;function hne(t,s){return t!=null&&mne(t,s,une)}var xne=hne,pne=Wb,fne=MR,gne=xne,jne=kb,vne=w_,yne=S_,bne=qp,Nne=1,wne=2;function Sne(t,s){return jne(t)&&vne(s)?yne(bne(t),s):function(r){var n=fne(r,t);return n===void 0&&n===s?gne(r,t):pne(s,n,Nne|wne)}}var Cne=Sne;function Pne(t){return t}var Bc=Pne;function kne(t){return function(s){return s?.[t]}}var Ane=kne,Tne=Rb;function Dne(t){return function(s){return Tne(s,t)}}var One=Dne,Ene=Ane,Mne=One,Rne=kb,_ne=qp;function Ine(t){return Rne(t)?Ene(_ne(t)):Mne(t)}var $ne=Ine,Fne=ene,Lne=Cne,Bne=Bc,Vne=Fr,qne=$ne;function Une(t){return typeof t=="function"?t:t==null?Bne:typeof t=="object"?Vne(t)?Lne(t[0],t[1]):Fne(t):qne(t)}var Na=Une;function zne(t,s,r,n){for(var a=t.length,i=r+(n?1:-1);n?i--:++i<a;)if(s(t[i],i,t))return i;return-1}var C_=zne;function Gne(t){return t!==t}var Hne=Gne;function Kne(t,s,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===s)return n;return-1}var Wne=Kne,Yne=C_,Qne=Hne,Xne=Wne;function Zne(t,s,r){return s===s?Xne(t,s,r):Yne(t,Qne,r)}var Jne=Zne,eae=Jne;function tae(t,s){var r=t==null?0:t.length;return!!r&&eae(t,s,0)>-1}var sae=tae;function rae(t,s,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(s,t[n]))return!0;return!1}var nae=rae;function aae(){}var iae=aae,Ig=y_,lae=iae,oae=zb,cae=1/0,dae=Ig&&1/oae(new Ig([,-0]))[1]==cae?function(t){return new Ig(t)}:lae,uae=dae,mae=d_,hae=sae,xae=nae,pae=m_,fae=uae,gae=zb,jae=200;function vae(t,s,r){var n=-1,a=hae,i=t.length,l=!0,o=[],c=o;if(r)l=!1,a=xae;else if(i>=jae){var d=s?null:fae(t);if(d)return gae(d);l=!1,a=pae,c=new mae}else c=s?[]:o;e:for(;++n<i;){var u=t[n],m=s?s(u):u;if(u=r||u!==0?u:0,l&&m===m){for(var h=c.length;h--;)if(c[h]===m)continue e;s&&c.push(m),o.push(u)}else a(c,m,r)||(c!==o&&c.push(m),o.push(u))}return o}var yae=vae,bae=Na,Nae=yae;function wae(t,s){return t&&t.length?Nae(t,bae(s)):[]}var Sae=wae;const Y2=ls(Sae);function P_(t,s,r){return s===!0?Y2(t,r):bt(s)?Y2(t,s):t}function Ho(t){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ho(t)}var Cae=["ref"];function Q2(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pa(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Q2(Object(r),!0).forEach(function(n){nf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pae(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function X2(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A_(n.key),n)}}function kae(t,s,r){return s&&X2(t.prototype,s),r&&X2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aae(t,s,r){return s=Yh(s),Tae(t,k_()?Reflect.construct(s,r||[],Yh(t).constructor):s.apply(t,r))}function Tae(t,s){if(s&&(Ho(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dae(t)}function Dae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k_=function(){return!!t})()}function Yh(t){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yh(t)}function Oae(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ev(t,s)}function Ev(t,s){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ev(t,s)}function nf(t,s,r){return s=A_(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function A_(t){var s=Eae(t,"string");return Ho(s)=="symbol"?s:s+""}function Eae(t,s){if(Ho(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Ho(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Mae(t,s){if(t==null)return{};var r=Rae(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rae(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _ae(t){return t.value}function Iae(t,s){if(X.isValidElement(t))return X.cloneElement(t,s);if(typeof t=="function")return X.createElement(t,s);s.ref;var r=Mae(s,Cae);return X.createElement(Ub,r)}var Z2=1,$a=function(t){function s(){var r;Pae(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Aae(this,s,[].concat(a)),nf(r,"lastBoundingBox",{width:-1,height:-1}),r}return Oae(s,t),kae(s,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>Z2||Math.abs(a.height-this.lastBoundingBox.height)>Z2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Pa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,m,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(l==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((d||0)-x.width)/2}}else m=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();h={top:((u||0)-g.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Pa(Pa({},m),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,m=Pa(Pa({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return X.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){n.wrapperNode=x}},Iae(i,Pa(Pa({},this.props),{},{payload:P_(u,d,_ae)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Pa(Pa({},this.defaultProps),n.props),l=i.layout;return l==="vertical"&&Fe(n.props.height)?{height:n.props.height}:l==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);nf($a,"displayName","Legend");nf($a,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var J2=lm,$ae=Gb,Fae=Fr,eS=J2?J2.isConcatSpreadable:void 0;function Lae(t){return Fae(t)||$ae(t)||!!(eS&&t&&t[eS])}var Bae=Lae,Vae=x_,qae=Bae;function T_(t,s,r,n,a){var i=-1,l=t.length;for(r||(r=qae),a||(a=[]);++i<l;){var o=t[i];s>0&&r(o)?s>1?T_(o,s-1,r,n,a):Vae(a,o):n||(a[a.length]=o)}return a}var D_=T_;function Uae(t){return function(s,r,n){for(var a=-1,i=Object(s),l=n(s),o=l.length;o--;){var c=l[t?o:++a];if(r(i[c],c,i)===!1)break}return s}}var zae=Uae,Gae=zae,Hae=Gae(),Kae=Hae,Wae=Kae,Yae=rf;function Qae(t,s){return t&&Wae(t,s,Yae)}var O_=Qae,Xae=cm;function Zae(t,s){return function(r,n){if(r==null)return r;if(!Xae(r))return t(r,n);for(var a=r.length,i=s?a:-1,l=Object(r);(s?i--:++i<a)&&n(l[i],i,l)!==!1;);return r}}var Jae=Zae,eie=O_,tie=Jae,sie=tie(eie),Yb=sie,rie=Yb,nie=cm;function aie(t,s){var r=-1,n=nie(t)?Array(t.length):[];return rie(t,function(a,i,l){n[++r]=s(a,i,l)}),n}var E_=aie;function iie(t,s){var r=t.length;for(t.sort(s);r--;)t[r]=t[r].value;return t}var lie=iie,tS=Ec;function oie(t,s){if(t!==s){var r=t!==void 0,n=t===null,a=t===t,i=tS(t),l=s!==void 0,o=s===null,c=s===s,d=tS(s);if(!o&&!d&&!i&&t>s||i&&l&&c&&!o&&!d||n&&l&&c||!r&&c||!a)return 1;if(!n&&!i&&!d&&t<s||d&&r&&a&&!n&&!i||o&&r&&a||!l&&a||!c)return-1}return 0}var cie=oie,die=cie;function uie(t,s,r){for(var n=-1,a=t.criteria,i=s.criteria,l=a.length,o=r.length;++n<l;){var c=die(a[n],i[n]);if(c){if(n>=o)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return t.index-s.index}var mie=uie,$g=Mb,hie=Rb,xie=Na,pie=E_,fie=lie,gie=g_,jie=mie,vie=Bc,yie=Fr;function bie(t,s,r){s.length?s=$g(s,function(i){return yie(i)?function(l){return hie(l,i.length===1?i[0]:i)}:i}):s=[vie];var n=-1;s=$g(s,gie(xie));var a=pie(t,function(i,l,o){var c=$g(s,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return fie(a,function(i,l){return jie(i,l,r)})}var Nie=bie;function wie(t,s,r){switch(r.length){case 0:return t.call(s);case 1:return t.call(s,r[0]);case 2:return t.call(s,r[0],r[1]);case 3:return t.call(s,r[0],r[1],r[2])}return t.apply(s,r)}var Sie=wie,Cie=Sie,sS=Math.max;function Pie(t,s,r){return s=sS(s===void 0?t.length-1:s,0),function(){for(var n=arguments,a=-1,i=sS(n.length-s,0),l=Array(i);++a<i;)l[a]=n[s+a];a=-1;for(var o=Array(s+1);++a<s;)o[a]=n[a];return o[s]=r(l),Cie(t,this,o)}}var kie=Pie;function Aie(t){return function(){return t}}var Tie=Aie,Die=Ll,Oie=function(){try{var t=Die(Object,"defineProperty");return t({},"",{}),t}catch{}}(),M_=Oie,Eie=Tie,rS=M_,Mie=Bc,Rie=rS?function(t,s){return rS(t,"toString",{configurable:!0,enumerable:!1,value:Eie(s),writable:!0})}:Mie,_ie=Rie,Iie=800,$ie=16,Fie=Date.now;function Lie(t){var s=0,r=0;return function(){var n=Fie(),a=$ie-(n-r);if(r=n,a>0){if(++s>=Iie)return arguments[0]}else s=0;return t.apply(void 0,arguments)}}var Bie=Lie,Vie=_ie,qie=Bie,Uie=qie(Vie),zie=Uie,Gie=Bc,Hie=kie,Kie=zie;function Wie(t,s){return Kie(Hie(t,s,Gie),t+"")}var Yie=Wie,Qie=Tb,Xie=cm,Zie=Hb,Jie=Bi;function ele(t,s,r){if(!Jie(r))return!1;var n=typeof s;return(n=="number"?Xie(r)&&Zie(s,r.length):n=="string"&&s in r)?Qie(r[s],t):!1}var af=ele,tle=D_,sle=Nie,rle=Yie,nS=af,nle=rle(function(t,s){if(t==null)return[];var r=s.length;return r>1&&nS(t,s[0],s[1])?s=[]:r>2&&nS(s[0],s[1],s[2])&&(s=[s[0]]),sle(t,tle(s,1),[])}),ale=nle;const Qb=ls(ale);function eu(t){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},eu(t)}function Mv(){return Mv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mv.apply(this,arguments)}function ile(t,s){return dle(t)||cle(t,s)||ole(t,s)||lle()}function lle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ole(t,s){if(t){if(typeof t=="string")return aS(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aS(t,s)}}function aS(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function cle(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function dle(t){if(Array.isArray(t))return t}function iS(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?iS(Object(r),!0).forEach(function(n){ule(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ule(t,s,r){return s=mle(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function mle(t){var s=hle(t,"string");return eu(s)=="symbol"?s:s+""}function hle(t,s){if(eu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function xle(t){return Array.isArray(t)&&nr(t[0])&&nr(t[1])?t.join(" ~ "):t}var ple=function(s){var r=s.separator,n=r===void 0?" : ":r,a=s.contentStyle,i=a===void 0?{}:a,l=s.itemStyle,o=l===void 0?{}:l,c=s.labelStyle,d=c===void 0?{}:c,u=s.payload,m=s.formatter,h=s.itemSorter,x=s.wrapperClassName,g=s.labelClassName,p=s.label,f=s.labelFormatter,v=s.accessibilityLayer,b=v===void 0?!1:v,y=function(){if(u&&u.length){var I={padding:0,margin:0},V=(h?Qb(u,h):u).map(function(E,G){if(E.type==="none")return null;var Y=Fg({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},o),Q=E.formatter||m||xle,T=E.value,B=E.name,W=T,he=B;if(Q&&W!=null&&he!=null){var Se=Q(T,B,E,G,u);if(Array.isArray(Se)){var z=ile(Se,2);W=z[0],he=z[1]}else W=Se}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:Y},nr(he)?X.createElement("span",{className:"recharts-tooltip-item-name"},he):null,nr(he)?X.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,X.createElement("span",{className:"recharts-tooltip-item-value"},W),X.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:I},V)}return null},S=Fg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=Fg({margin:0},d),C=!kt(p),k=C?p:"",A=At("recharts-default-tooltip",x),N=At("recharts-tooltip-label",g);C&&f&&u!==void 0&&u!==null&&(k=f(p,u));var M=b?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",Mv({className:A,style:S},M),X.createElement("p",{className:N,style:w},X.isValidElement(k)?k:"".concat(k)),y())};function tu(t){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tu(t)}function _m(t,s,r){return s=fle(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function fle(t){var s=gle(t,"string");return tu(s)=="symbol"?s:s+""}function gle(t,s){if(tu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Zc="recharts-tooltip-wrapper",jle={visibility:"hidden"};function vle(t){var s=t.coordinate,r=t.translateX,n=t.translateY;return At(Zc,_m(_m(_m(_m({},"".concat(Zc,"-right"),Fe(r)&&s&&Fe(s.x)&&r>=s.x),"".concat(Zc,"-left"),Fe(r)&&s&&Fe(s.x)&&r<s.x),"".concat(Zc,"-bottom"),Fe(n)&&s&&Fe(s.y)&&n>=s.y),"".concat(Zc,"-top"),Fe(n)&&s&&Fe(s.y)&&n<s.y))}function lS(t){var s=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,l=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&Fe(i[n]))return i[n];var u=r[n]-o-a,m=r[n]+a;if(s[n])return l[n]?u:m;if(l[n]){var h=u,x=c[n];return h<x?Math.max(m,c[n]):Math.max(u,c[n])}var g=m+o,p=c[n]+d;return g>p?Math.max(u,c[n]):Math.max(m,c[n])}function yle(t){var s=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(s,"px, ").concat(r,"px, 0)"):"translate(".concat(s,"px, ").concat(r,"px)")}}function ble(t){var s=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,l=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,d,u,m;return l.height>0&&l.width>0&&r?(u=lS({allowEscapeViewBox:s,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),m=lS({allowEscapeViewBox:s,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=yle({translateX:u,translateY:m,useTranslate3d:o})):d=jle,{cssProperties:d,cssClasses:vle({translateX:u,translateY:m,coordinate:r})}}function Ko(t){"@babel/helpers - typeof";return Ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ko(t)}function oS(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cS(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?oS(Object(r),!0).forEach(function(n){_v(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nle(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function wle(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,__(n.key),n)}}function Sle(t,s,r){return s&&wle(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cle(t,s,r){return s=Qh(s),Ple(t,R_()?Reflect.construct(s,r||[],Qh(t).constructor):s.apply(t,r))}function Ple(t,s){if(s&&(Ko(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kle(t)}function kle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R_=function(){return!!t})()}function Qh(t){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qh(t)}function Ale(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Rv(t,s)}function Rv(t,s){return Rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Rv(t,s)}function _v(t,s,r){return s=__(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function __(t){var s=Tle(t,"string");return Ko(s)=="symbol"?s:s+""}function Tle(t,s){if(Ko(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Ko(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dS=1,Dle=function(t){function s(){var r;Nle(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Cle(this,s,[].concat(a)),_v(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_v(r,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return Ale(s,t),Sle(s,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>dS||Math.abs(n.height-this.state.lastBoundingBox.height)>dS)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,m=a.hasPayload,h=a.isAnimationActive,x=a.offset,g=a.position,p=a.reverseDirection,f=a.useTranslate3d,v=a.viewBox,b=a.wrapperStyle,y=ble({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:x,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:v}),S=y.cssClasses,w=y.cssProperties,C=cS(cS({transition:h&&i?"transform ".concat(o,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},b);return X.createElement("div",{tabIndex:-1,className:S,style:C,ref:function(A){n.wrapperNode=A}},d)}}])}(j.PureComponent),Ole=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Bl={isSsr:Ole()};function Wo(t){"@babel/helpers - typeof";return Wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wo(t)}function uS(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mS(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?uS(Object(r),!0).forEach(function(n){Xb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ele(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Mle(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$_(n.key),n)}}function Rle(t,s,r){return s&&Mle(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function _le(t,s,r){return s=Xh(s),Ile(t,I_()?Reflect.construct(s,r||[],Xh(t).constructor):s.apply(t,r))}function Ile(t,s){if(s&&(Wo(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $le(t)}function $le(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I_=function(){return!!t})()}function Xh(t){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xh(t)}function Fle(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Iv(t,s)}function Iv(t,s){return Iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Iv(t,s)}function Xb(t,s,r){return s=$_(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function $_(t){var s=Lle(t,"string");return Wo(s)=="symbol"?s:s+""}function Lle(t,s){if(Wo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Wo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ble(t){return t.dataKey}function Vle(t,s){return X.isValidElement(t)?X.cloneElement(t,s):typeof t=="function"?X.createElement(t,s):X.createElement(ple,s)}var _r=function(t){function s(){return Ele(this,s),_le(this,s,arguments)}return Fle(s,t),Rle(s,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,m=a.filterNull,h=a.isAnimationActive,x=a.offset,g=a.payload,p=a.payloadUniqBy,f=a.position,v=a.reverseDirection,b=a.useTranslate3d,y=a.viewBox,S=a.wrapperStyle,w=g??[];m&&w.length&&(w=P_(g.filter(function(k){return k.value!=null&&(k.hide!==!0||n.props.includeHidden)}),p,Ble));var C=w.length>0;return X.createElement(Dle,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:h,active:i,coordinate:u,hasPayload:C,offset:x,position:f,reverseDirection:v,useTranslate3d:b,viewBox:y,wrapperStyle:S},Vle(d,mS(mS({},this.props),{},{payload:w})))}}])}(j.PureComponent);Xb(_r,"displayName","Tooltip");Xb(_r,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Bl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qle=ba,Ule=function(){return qle.Date.now()},zle=Ule,Gle=/\s/;function Hle(t){for(var s=t.length;s--&&Gle.test(t.charAt(s)););return s}var Kle=Hle,Wle=Kle,Yle=/^\s+/;function Qle(t){return t&&t.slice(0,Wle(t)+1).replace(Yle,"")}var Xle=Qle,Zle=Xle,hS=Bi,Jle=Ec,xS=NaN,eoe=/^[-+]0x[0-9a-f]+$/i,toe=/^0b[01]+$/i,soe=/^0o[0-7]+$/i,roe=parseInt;function noe(t){if(typeof t=="number")return t;if(Jle(t))return xS;if(hS(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=hS(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=Zle(t);var r=toe.test(t);return r||soe.test(t)?roe(t.slice(2),r?2:8):eoe.test(t)?xS:+t}var F_=noe,aoe=Bi,Lg=zle,pS=F_,ioe="Expected a function",loe=Math.max,ooe=Math.min;function coe(t,s,r){var n,a,i,l,o,c,d=0,u=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError(ioe);s=pS(s)||0,aoe(r)&&(u=!!r.leading,m="maxWait"in r,i=m?loe(pS(r.maxWait)||0,s):i,h="trailing"in r?!!r.trailing:h);function x(C){var k=n,A=a;return n=a=void 0,d=C,l=t.apply(A,k),l}function g(C){return d=C,o=setTimeout(v,s),u?x(C):l}function p(C){var k=C-c,A=C-d,N=s-k;return m?ooe(N,i-A):N}function f(C){var k=C-c,A=C-d;return c===void 0||k>=s||k<0||m&&A>=i}function v(){var C=Lg();if(f(C))return b(C);o=setTimeout(v,p(C))}function b(C){return o=void 0,h&&n?x(C):(n=a=void 0,l)}function y(){o!==void 0&&clearTimeout(o),d=0,n=c=a=o=void 0}function S(){return o===void 0?l:b(Lg())}function w(){var C=Lg(),k=f(C);if(n=arguments,a=this,c=C,k){if(o===void 0)return g(c);if(m)return clearTimeout(o),o=setTimeout(v,s),x(c)}return o===void 0&&(o=setTimeout(v,s)),l}return w.cancel=y,w.flush=S,w}var doe=coe,uoe=doe,moe=Bi,hoe="Expected a function";function xoe(t,s,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(hoe);return moe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),uoe(t,s,{leading:n,maxWait:s,trailing:a})}var poe=xoe;const L_=ls(poe);function su(t){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},su(t)}function fS(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Im(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?fS(Object(r),!0).forEach(function(n){foe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function foe(t,s,r){return s=goe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function goe(t){var s=joe(t,"string");return su(s)=="symbol"?s:s+""}function joe(t,s){if(su(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function voe(t,s){return woe(t)||Noe(t,s)||boe(t,s)||yoe()}function yoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function boe(t,s){if(t){if(typeof t=="string")return gS(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gS(t,s)}}function gS(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Noe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function woe(t){if(Array.isArray(t))return t}var hd=j.forwardRef(function(t,s){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,l=i===void 0?"100%":i,o=t.height,c=o===void 0?"100%":o,d=t.minWidth,u=d===void 0?0:d,m=t.minHeight,h=t.maxHeight,x=t.children,g=t.debounce,p=g===void 0?0:g,f=t.id,v=t.className,b=t.onResize,y=t.style,S=y===void 0?{}:y,w=j.useRef(null),C=j.useRef();C.current=b,j.useImperativeHandle(s,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var k=j.useState({containerWidth:a.width,containerHeight:a.height}),A=voe(k,2),N=A[0],M=A[1],F=j.useCallback(function(V,E){M(function(G){var Y=Math.round(V),Q=Math.round(E);return G.containerWidth===Y&&G.containerHeight===Q?G:{containerWidth:Y,containerHeight:Q}})},[]);j.useEffect(function(){var V=function(B){var W,he=B[0].contentRect,Se=he.width,z=he.height;F(Se,z),(W=C.current)===null||W===void 0||W.call(C,Se,z)};p>0&&(V=L_(V,p,{trailing:!0,leading:!1}));var E=new ResizeObserver(V),G=w.current.getBoundingClientRect(),Y=G.width,Q=G.height;return F(Y,Q),E.observe(w.current),function(){E.disconnect()}},[F,p]);var I=j.useMemo(function(){var V=N.containerWidth,E=N.containerHeight;if(V<0||E<0)return null;Ln(ll(l)||ll(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),Ln(!r||r>0,"The aspect(%s) must be greater than zero.",r);var G=ll(l)?V:l,Y=ll(c)?E:c;r&&r>0&&(G?Y=G/r:Y&&(G=Y*r),h&&Y>h&&(Y=h)),Ln(G>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,Y,l,c,u,m,r);var Q=!Array.isArray(x)&&Ia(x.type).endsWith("Chart");return X.Children.map(x,function(T){return X.isValidElement(T)?j.cloneElement(T,Im({width:G,height:Y},Q?{style:Im({height:"100%",width:"100%",maxHeight:Y,maxWidth:G},T.props.style)}:{})):T})},[r,x,c,h,m,u,N,l]);return X.createElement("div",{id:f?"".concat(f):void 0,className:At("recharts-responsive-container",v),style:Im(Im({},S),{},{width:l,height:c,minWidth:u,minHeight:m,maxHeight:h}),ref:w},I)}),Yo=function(s){return null};Yo.displayName="Cell";function ru(t){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ru(t)}function jS(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $v(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?jS(Object(r),!0).forEach(function(n){Soe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Soe(t,s,r){return s=Coe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Coe(t){var s=Poe(t,"string");return ru(s)=="symbol"?s:s+""}function Poe(t,s){if(ru(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Ql={widthCache:{},cacheCount:0},koe=2e3,Aoe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vS="recharts_measurement_span";function Toe(t){var s=$v({},t);return Object.keys(s).forEach(function(r){s[r]||delete s[r]}),s}var yd=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s==null||Bl.isSsr)return{width:0,height:0};var n=Toe(r),a=JSON.stringify({text:s,copyStyle:n});if(Ql.widthCache[a])return Ql.widthCache[a];try{var i=document.getElementById(vS);i||(i=document.createElement("span"),i.setAttribute("id",vS),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=$v($v({},Aoe),n);Object.assign(i.style,l),i.textContent="".concat(s);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return Ql.widthCache[a]=c,++Ql.cacheCount>koe&&(Ql.cacheCount=0,Ql.widthCache={}),c}catch{return{width:0,height:0}}},Doe=function(s){return{top:s.top+window.scrollY-document.documentElement.clientTop,left:s.left+window.scrollX-document.documentElement.clientLeft}};function nu(t){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},nu(t)}function Zh(t,s){return Roe(t)||Moe(t,s)||Eoe(t,s)||Ooe()}function Ooe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eoe(t,s){if(t){if(typeof t=="string")return yS(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yS(t,s)}}function yS(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Moe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Roe(t){if(Array.isArray(t))return t}function _oe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function bS(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$oe(n.key),n)}}function Ioe(t,s,r){return s&&bS(t.prototype,s),r&&bS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $oe(t){var s=Foe(t,"string");return nu(s)=="symbol"?s:s+""}function Foe(t,s){if(nu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Loe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Boe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,B_={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Voe=Object.keys(B_),oo="NaN";function qoe(t,s){return t*B_[s]}var $m=function(){function t(s,r){_oe(this,t),this.num=s,this.unit=r,this.num=s,this.unit=r,Number.isNaN(s)&&(this.unit=""),r!==""&&!Loe.test(r)&&(this.num=NaN,this.unit=""),Voe.includes(r)&&(this.num=qoe(s,r),this.unit="px")}return Ioe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Boe.exec(r))!==null&&n!==void 0?n:[],i=Zh(a,3),l=i[1],o=i[2];return new t(parseFloat(l),o??"")}}])}();function V_(t){if(t.includes(oo))return oo;for(var s=t;s.includes("*")||s.includes("/");){var r,n=(r=NS.exec(s))!==null&&r!==void 0?r:[],a=Zh(n,4),i=a[1],l=a[2],o=a[3],c=$m.parse(i??""),d=$m.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return oo;s=s.replace(NS,u.toString())}for(;s.includes("+")||/.-\d+(?:\.\d+)?/.test(s);){var m,h=(m=wS.exec(s))!==null&&m!==void 0?m:[],x=Zh(h,4),g=x[1],p=x[2],f=x[3],v=$m.parse(g??""),b=$m.parse(f??""),y=p==="+"?v.add(b):v.subtract(b);if(y.isNaN())return oo;s=s.replace(wS,y.toString())}return s}var SS=/\(([^()]*)\)/;function Uoe(t){for(var s=t;s.includes("(");){var r=SS.exec(s),n=Zh(r,2),a=n[1];s=s.replace(SS,V_(a))}return s}function zoe(t){var s=t.replace(/\s+/g,"");return s=Uoe(s),s=V_(s),s}function Goe(t){try{return zoe(t)}catch{return oo}}function Bg(t){var s=Goe(t.slice(5,-1));return s===oo?"":s}var Hoe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Koe=["dx","dy","angle","className","breakAll"];function Fv(){return Fv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fv.apply(this,arguments)}function CS(t,s){if(t==null)return{};var r=Woe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Woe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function PS(t,s){return Zoe(t)||Xoe(t,s)||Qoe(t,s)||Yoe()}function Yoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qoe(t,s){if(t){if(typeof t=="string")return kS(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kS(t,s)}}function kS(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Xoe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Zoe(t){if(Array.isArray(t))return t}var q_=/[ \f\n\r\t\v\u2028\u2029]+/,U_=function(s){var r=s.children,n=s.breakAll,a=s.style;try{var i=[];kt(r)||(n?i=r.toString().split(""):i=r.toString().split(q_));var l=i.map(function(c){return{word:c,width:yd(c,a).width}}),o=n?0:yd(" ",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},Joe=function(s,r,n,a,i){var l=s.maxLines,o=s.children,c=s.style,d=s.breakAll,u=Fe(l),m=o,h=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(Y,Q){var T=Q.word,B=Q.width,W=Y[Y.length-1];if(W&&(a==null||i||W.width+B+n<Number(a)))W.words.push(T),W.width+=B+n;else{var he={words:[T],width:B};Y.push(he)}return Y},[])},x=h(r),g=function(G){return G.reduce(function(Y,Q){return Y.width>Q.width?Y:Q})};if(!u)return x;for(var p="…",f=function(G){var Y=m.slice(0,G),Q=U_({breakAll:d,style:c,children:Y+p}).wordsWithComputedWidth,T=h(Q),B=T.length>l||g(T).width>Number(a);return[B,T]},v=0,b=m.length-1,y=0,S;v<=b&&y<=m.length-1;){var w=Math.floor((v+b)/2),C=w-1,k=f(C),A=PS(k,2),N=A[0],M=A[1],F=f(w),I=PS(F,1),V=I[0];if(!N&&!V&&(v=w+1),N&&V&&(b=w-1),!N&&V){S=M;break}y++}return S||x},AS=function(s){var r=kt(s)?[]:s.toString().split(q_);return[{words:r}]},ece=function(s){var r=s.width,n=s.scaleToFit,a=s.children,i=s.style,l=s.breakAll,o=s.maxLines;if((r||n)&&!Bl.isSsr){var c,d,u=U_({breakAll:l,children:a,style:i});if(u){var m=u.wordsWithComputedWidth,h=u.spaceWidth;c=m,d=h}else return AS(a);return Joe({breakAll:l,children:a,maxLines:o,style:i},c,d,r,n)}return AS(a)},TS="#808080",Tl=function(s){var r=s.x,n=r===void 0?0:r,a=s.y,i=a===void 0?0:a,l=s.lineHeight,o=l===void 0?"1em":l,c=s.capHeight,d=c===void 0?"0.71em":c,u=s.scaleToFit,m=u===void 0?!1:u,h=s.textAnchor,x=h===void 0?"start":h,g=s.verticalAnchor,p=g===void 0?"end":g,f=s.fill,v=f===void 0?TS:f,b=CS(s,Hoe),y=j.useMemo(function(){return ece({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:m,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,m,b.style,b.width]),S=b.dx,w=b.dy,C=b.angle,k=b.className,A=b.breakAll,N=CS(b,Koe);if(!nr(n)||!nr(i))return null;var M=n+(Fe(S)?S:0),F=i+(Fe(w)?w:0),I;switch(p){case"start":I=Bg("calc(".concat(d,")"));break;case"middle":I=Bg("calc(".concat((y.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:I=Bg("calc(".concat(y.length-1," * -").concat(o,")"));break}var V=[];if(m){var E=y[0].width,G=b.width;V.push("scale(".concat((Fe(G)?G/E:1)/E,")"))}return C&&V.push("rotate(".concat(C,", ").concat(M,", ").concat(F,")")),V.length&&(N.transform=V.join(" ")),X.createElement("text",Fv({},pt(N,!0),{x:M,y:F,className:At("recharts-text",k),textAnchor:x,fill:v.includes("url")?TS:v}),y.map(function(Y,Q){var T=Y.words.join(A?"":" ");return X.createElement("tspan",{x:M,dy:Q===0?I:o,key:"".concat(T,"-").concat(Q)},T)}))};function Ci(t,s){return t==null||s==null?NaN:t<s?-1:t>s?1:t>=s?0:NaN}function tce(t,s){return t==null||s==null?NaN:s<t?-1:s>t?1:s>=t?0:NaN}function Zb(t){let s,r,n;t.length!==2?(s=Ci,r=(o,c)=>Ci(t(o),c),n=(o,c)=>t(o)-c):(s=t===Ci||t===tce?t:sce,r=t,n=t);function a(o,c,d=0,u=o.length){if(d<u){if(s(c,c)!==0)return u;do{const m=d+u>>>1;r(o[m],c)<0?d=m+1:u=m}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(s(c,c)!==0)return u;do{const m=d+u>>>1;r(o[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function l(o,c,d=0,u=o.length){const m=a(o,c,d,u-1);return m>d&&n(o[m-1],c)>-n(o[m],c)?m-1:m}return{left:a,center:l,right:i}}function sce(){return 0}function z_(t){return t===null?NaN:+t}function*rce(t,s){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const nce=Zb(Ci),dm=nce.right;Zb(z_).center;class DS extends Map{constructor(s,r=lce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),s!=null)for(const[n,a]of s)this.set(n,a)}get(s){return super.get(OS(this,s))}has(s){return super.has(OS(this,s))}set(s,r){return super.set(ace(this,s),r)}delete(s){return super.delete(ice(this,s))}}function OS({_intern:t,_key:s},r){const n=s(r);return t.has(n)?t.get(n):r}function ace({_intern:t,_key:s},r){const n=s(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function ice({_intern:t,_key:s},r){const n=s(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function lce(t){return t!==null&&typeof t=="object"?t.valueOf():t}function oce(t=Ci){if(t===Ci)return G_;if(typeof t!="function")throw new TypeError("compare is not a function");return(s,r)=>{const n=t(s,r);return n||n===0?n:(t(r,r)===0)-(t(s,s)===0)}}function G_(t,s){return(t==null||!(t>=t))-(s==null||!(s>=s))||(t<s?-1:t>s?1:0)}const cce=Math.sqrt(50),dce=Math.sqrt(10),uce=Math.sqrt(2);function Jh(t,s,r){const n=(s-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),l=i>=cce?10:i>=dce?5:i>=uce?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(t*d),c=Math.round(s*d),o/d<t&&++o,c/d>s&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(t/d),c=Math.round(s/d),o*d<t&&++o,c*d>s&&--c),c<o&&.5<=r&&r<2?Jh(t,s,r*2):[o,c,d]}function Lv(t,s,r){if(s=+s,t=+t,r=+r,!(r>0))return[];if(t===s)return[t];const n=s<t,[a,i,l]=n?Jh(s,t,r):Jh(t,s,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function Bv(t,s,r){return s=+s,t=+t,r=+r,Jh(t,s,r)[2]}function Vv(t,s,r){s=+s,t=+t,r=+r;const n=s<t,a=n?Bv(s,t,r):Bv(t,s,r);return(n?-1:1)*(a<0?1/-a:a)}function ES(t,s){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function MS(t,s){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function H_(t,s,r=0,n=1/0,a){if(s=Math.floor(s),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=s&&s<=n))return t;for(a=a===void 0?G_:oce(a);n>r;){if(n-r>600){const c=n-r+1,d=s-r+1,u=Math.log(c),m=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),x=Math.max(r,Math.floor(s-d*m/c+h)),g=Math.min(n,Math.floor(s+(c-d)*m/c+h));H_(t,s,x,g,a)}const i=t[s];let l=r,o=n;for(Jc(t,r,s),a(t[n],i)>0&&Jc(t,r,n);l<o;){for(Jc(t,l,o),++l,--o;a(t[l],i)<0;)++l;for(;a(t[o],i)>0;)--o}a(t[r],i)===0?Jc(t,r,o):(++o,Jc(t,o,n)),o<=s&&(r=o+1),s<=o&&(n=o-1)}return t}function Jc(t,s,r){const n=t[s];t[s]=t[r],t[r]=n}function mce(t,s,r){if(t=Float64Array.from(rce(t)),!(!(n=t.length)||isNaN(s=+s))){if(s<=0||n<2)return MS(t);if(s>=1)return ES(t);var n,a=(n-1)*s,i=Math.floor(a),l=ES(H_(t,i).subarray(0,i+1)),o=MS(t.subarray(i+1));return l+(o-l)*(a-i)}}function hce(t,s,r=z_){if(!(!(n=t.length)||isNaN(s=+s))){if(s<=0||n<2)return+r(t[0],0,t);if(s>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*s,i=Math.floor(a),l=+r(t[i],i,t),o=+r(t[i+1],i+1,t);return l+(o-l)*(a-i)}}function xce(t,s,r){t=+t,s=+s,r=(a=arguments.length)<2?(s=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((s-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function wn(t,s){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(s).domain(t);break}return this}function Ja(t,s){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const qv=Symbol("implicit");function Jb(){var t=new DS,s=[],r=[],n=qv;function a(i){let l=t.get(i);if(l===void 0){if(n!==qv)return n;t.set(i,l=s.push(i)-1)}return r[l%r.length]}return a.domain=function(i){if(!arguments.length)return s.slice();s=[],t=new DS;for(const l of i)t.has(l)||t.set(l,s.push(l)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Jb(s,r).unknown(n)},wn.apply(a,arguments),a}function au(){var t=Jb().unknown(void 0),s=t.domain,r=t.range,n=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete t.unknown;function m(){var h=s().length,x=a<n,g=x?a:n,p=x?n:a;i=(p-g)/Math.max(1,h-c+d*2),o&&(i=Math.floor(i)),g+=(p-g-i*(h-c))*u,l=i*(1-c),o&&(g=Math.round(g),l=Math.round(l));var f=xce(h).map(function(v){return g+i*v});return r(x?f.reverse():f)}return t.domain=function(h){return arguments.length?(s(h),m()):s()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,m()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(h){return arguments.length?(o=!!h,m()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),m()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),m()):c},t.paddingOuter=function(h){return arguments.length?(d=+h,m()):d},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),m()):u},t.copy=function(){return au(s(),[n,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},wn.apply(m(),arguments)}function K_(t){var s=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return K_(s())},t}function bd(){return K_(au.apply(null,arguments).paddingInner(1))}function eN(t,s,r){t.prototype=s.prototype=r,r.constructor=t}function W_(t,s){var r=Object.create(t.prototype);for(var n in s)r[n]=s[n];return r}function um(){}var iu=.7,ex=1/iu,Po="\\s*([+-]?\\d+)\\s*",lu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",la="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pce=/^#([0-9a-f]{3,8})$/,fce=new RegExp(`^rgb\\(${Po},${Po},${Po}\\)$`),gce=new RegExp(`^rgb\\(${la},${la},${la}\\)$`),jce=new RegExp(`^rgba\\(${Po},${Po},${Po},${lu}\\)$`),vce=new RegExp(`^rgba\\(${la},${la},${la},${lu}\\)$`),yce=new RegExp(`^hsl\\(${lu},${la},${la}\\)$`),bce=new RegExp(`^hsla\\(${lu},${la},${la},${lu}\\)$`),RS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eN(um,ou,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_S,formatHex:_S,formatHex8:Nce,formatHsl:wce,formatRgb:IS,toString:IS});function _S(){return this.rgb().formatHex()}function Nce(){return this.rgb().formatHex8()}function wce(){return Y_(this).formatHsl()}function IS(){return this.rgb().formatRgb()}function ou(t){var s,r;return t=(t+"").trim().toLowerCase(),(s=pce.exec(t))?(r=s[1].length,s=parseInt(s[1],16),r===6?$S(s):r===3?new $r(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):r===8?Fm(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):r===4?Fm(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=fce.exec(t))?new $r(s[1],s[2],s[3],1):(s=gce.exec(t))?new $r(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=jce.exec(t))?Fm(s[1],s[2],s[3],s[4]):(s=vce.exec(t))?Fm(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=yce.exec(t))?BS(s[1],s[2]/100,s[3]/100,1):(s=bce.exec(t))?BS(s[1],s[2]/100,s[3]/100,s[4]):RS.hasOwnProperty(t)?$S(RS[t]):t==="transparent"?new $r(NaN,NaN,NaN,0):null}function $S(t){return new $r(t>>16&255,t>>8&255,t&255,1)}function Fm(t,s,r,n){return n<=0&&(t=s=r=NaN),new $r(t,s,r,n)}function Sce(t){return t instanceof um||(t=ou(t)),t?(t=t.rgb(),new $r(t.r,t.g,t.b,t.opacity)):new $r}function Uv(t,s,r,n){return arguments.length===1?Sce(t):new $r(t,s,r,n??1)}function $r(t,s,r,n){this.r=+t,this.g=+s,this.b=+r,this.opacity=+n}eN($r,Uv,W_(um,{brighter(t){return t=t==null?ex:Math.pow(ex,t),new $r(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?iu:Math.pow(iu,t),new $r(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $r(xl(this.r),xl(this.g),xl(this.b),tx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FS,formatHex:FS,formatHex8:Cce,formatRgb:LS,toString:LS}));function FS(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}`}function Cce(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}${ol((isNaN(this.opacity)?1:this.opacity)*255)}`}function LS(){const t=tx(this.opacity);return`${t===1?"rgb(":"rgba("}${xl(this.r)}, ${xl(this.g)}, ${xl(this.b)}${t===1?")":`, ${t})`}`}function tx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ol(t){return t=xl(t),(t<16?"0":"")+t.toString(16)}function BS(t,s,r,n){return n<=0?t=s=r=NaN:r<=0||r>=1?t=s=NaN:s<=0&&(t=NaN),new En(t,s,r,n)}function Y_(t){if(t instanceof En)return new En(t.h,t.s,t.l,t.opacity);if(t instanceof um||(t=ou(t)),!t)return new En;if(t instanceof En)return t;t=t.rgb();var s=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(s,r,n),i=Math.max(s,r,n),l=NaN,o=i-a,c=(i+a)/2;return o?(s===i?l=(r-n)/o+(r<n)*6:r===i?l=(n-s)/o+2:l=(s-r)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new En(l,o,c,t.opacity)}function Pce(t,s,r,n){return arguments.length===1?Y_(t):new En(t,s,r,n??1)}function En(t,s,r,n){this.h=+t,this.s=+s,this.l=+r,this.opacity=+n}eN(En,Pce,W_(um,{brighter(t){return t=t==null?ex:Math.pow(ex,t),new En(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?iu:Math.pow(iu,t),new En(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,s=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*s,a=2*r-n;return new $r(Vg(t>=240?t-240:t+120,a,n),Vg(t,a,n),Vg(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new En(VS(this.h),Lm(this.s),Lm(this.l),tx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=tx(this.opacity);return`${t===1?"hsl(":"hsla("}${VS(this.h)}, ${Lm(this.s)*100}%, ${Lm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function VS(t){return t=(t||0)%360,t<0?t+360:t}function Lm(t){return Math.max(0,Math.min(1,t||0))}function Vg(t,s,r){return(t<60?s+(r-s)*t/60:t<180?r:t<240?s+(r-s)*(240-t)/60:s)*255}const tN=t=>()=>t;function kce(t,s){return function(r){return t+r*s}}function Ace(t,s,r){return t=Math.pow(t,r),s=Math.pow(s,r)-t,r=1/r,function(n){return Math.pow(t+n*s,r)}}function Tce(t){return(t=+t)==1?Q_:function(s,r){return r-s?Ace(s,r,t):tN(isNaN(s)?r:s)}}function Q_(t,s){var r=s-t;return r?kce(t,r):tN(isNaN(t)?s:t)}const qS=function t(s){var r=Tce(s);function n(a,i){var l=r((a=Uv(a)).r,(i=Uv(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),d=Q_(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=t,n}(1);function Dce(t,s){s||(s=[]);var r=t?Math.min(s.length,t.length):0,n=s.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+s[a]*i;return n}}function Oce(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ece(t,s){var r=s?s.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)a[l]=Vc(t[l],s[l]);for(;l<r;++l)i[l]=s[l];return function(o){for(l=0;l<n;++l)i[l]=a[l](o);return i}}function Mce(t,s){var r=new Date;return t=+t,s=+s,function(n){return r.setTime(t*(1-n)+s*n),r}}function sx(t,s){return t=+t,s=+s,function(r){return t*(1-r)+s*r}}function Rce(t,s){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(s===null||typeof s!="object")&&(s={});for(a in s)a in t?r[a]=Vc(t[a],s[a]):n[a]=s[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var zv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qg=new RegExp(zv.source,"g");function _ce(t){return function(){return t}}function Ice(t){return function(s){return t(s)+""}}function $ce(t,s){var r=zv.lastIndex=qg.lastIndex=0,n,a,i,l=-1,o=[],c=[];for(t=t+"",s=s+"";(n=zv.exec(t))&&(a=qg.exec(s));)(i=a.index)>r&&(i=s.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(n=n[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:sx(n,a)})),r=qg.lastIndex;return r<s.length&&(i=s.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?Ice(c[0].x):_ce(s):(s=c.length,function(d){for(var u=0,m;u<s;++u)o[(m=c[u]).i]=m.x(d);return o.join("")})}function Vc(t,s){var r=typeof s,n;return s==null||r==="boolean"?tN(s):(r==="number"?sx:r==="string"?(n=ou(s))?(s=n,qS):$ce:s instanceof ou?qS:s instanceof Date?Mce:Oce(s)?Dce:Array.isArray(s)?Ece:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?Rce:sx)(t,s)}function sN(t,s){return t=+t,s=+s,function(r){return Math.round(t*(1-r)+s*r)}}function Fce(t,s){s===void 0&&(s=t,t=Vc);for(var r=0,n=s.length-1,a=s[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=s[++r]);return function(l){var o=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[o](l-o)}}function Lce(t){return function(){return t}}function rx(t){return+t}var US=[0,1];function Tr(t){return t}function Gv(t,s){return(s-=t=+t)?function(r){return(r-t)/s}:Lce(isNaN(s)?NaN:.5)}function Bce(t,s){var r;return t>s&&(r=t,t=s,s=r),function(n){return Math.max(t,Math.min(s,n))}}function Vce(t,s,r){var n=t[0],a=t[1],i=s[0],l=s[1];return a<n?(n=Gv(a,n),i=r(l,i)):(n=Gv(n,a),i=r(i,l)),function(o){return i(n(o))}}function qce(t,s,r){var n=Math.min(t.length,s.length)-1,a=new Array(n),i=new Array(n),l=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),s=s.slice().reverse());++l<n;)a[l]=Gv(t[l],t[l+1]),i[l]=r(s[l],s[l+1]);return function(o){var c=dm(t,o,1,n)-1;return i[c](a[c](o))}}function mm(t,s){return s.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lf(){var t=US,s=US,r=Vc,n,a,i,l=Tr,o,c,d;function u(){var h=Math.min(t.length,s.length);return l!==Tr&&(l=Bce(t[0],t[h-1])),o=h>2?qce:Vce,c=d=null,m}function m(h){return h==null||isNaN(h=+h)?i:(c||(c=o(t.map(n),s,r)))(n(l(h)))}return m.invert=function(h){return l(a((d||(d=o(s,t.map(n),sx)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,rx),u()):t.slice()},m.range=function(h){return arguments.length?(s=Array.from(h),u()):s.slice()},m.rangeRound=function(h){return s=Array.from(h),r=sN,u()},m.clamp=function(h){return arguments.length?(l=h?!0:Tr,u()):l!==Tr},m.interpolate=function(h){return arguments.length?(r=h,u()):r},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,x){return n=h,a=x,u()}}function rN(){return lf()(Tr,Tr)}function Uce(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function nx(t,s){if((r=(t=s?t.toExponential(s-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Qo(t){return t=nx(Math.abs(t)),t?t[1]:NaN}function zce(t,s){return function(r,n){for(var a=r.length,i=[],l=0,o=t[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=t[l=(l+1)%t.length];return i.reverse().join(s)}}function Gce(t){return function(s){return s.replace(/[0-9]/g,function(r){return t[+r]})}}var Hce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cu(t){if(!(s=Hce.exec(t)))throw new Error("invalid format: "+t);var s;return new nN({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}cu.prototype=nN.prototype;function nN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kce(t){e:for(var s=t.length,r=1,n=-1,a;r<s;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var X_;function Wce(t,s){var r=nx(t,s);if(!r)return t+"";var n=r[0],a=r[1],i=a-(X_=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+nx(t,Math.max(0,s+i-1))[0]}function zS(t,s){var r=nx(t,s);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const GS={"%":(t,s)=>(t*100).toFixed(s),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Uce,e:(t,s)=>t.toExponential(s),f:(t,s)=>t.toFixed(s),g:(t,s)=>t.toPrecision(s),o:t=>Math.round(t).toString(8),p:(t,s)=>zS(t*100,s),r:zS,s:Wce,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function HS(t){return t}var KS=Array.prototype.map,WS=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Yce(t){var s=t.grouping===void 0||t.thousands===void 0?HS:zce(KS.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?HS:Gce(KS.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(m){m=cu(m);var h=m.fill,x=m.align,g=m.sign,p=m.symbol,f=m.zero,v=m.width,b=m.comma,y=m.precision,S=m.trim,w=m.type;w==="n"?(b=!0,w="g"):GS[w]||(y===void 0&&(y=12),S=!0,w="g"),(f||h==="0"&&x==="=")&&(f=!0,h="0",x="=");var C=p==="$"?r:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=p==="$"?n:/[%p]/.test(w)?l:"",A=GS[w],N=/[defgprs%]/.test(w);y=y===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function M(F){var I=C,V=k,E,G,Y;if(w==="c")V=A(F)+V,F="";else{F=+F;var Q=F<0||1/F<0;if(F=isNaN(F)?c:A(Math.abs(F),y),S&&(F=Kce(F)),Q&&+F==0&&g!=="+"&&(Q=!1),I=(Q?g==="("?g:o:g==="-"||g==="("?"":g)+I,V=(w==="s"?WS[8+X_/3]:"")+V+(Q&&g==="("?")":""),N){for(E=-1,G=F.length;++E<G;)if(Y=F.charCodeAt(E),48>Y||Y>57){V=(Y===46?a+F.slice(E+1):F.slice(E))+V,F=F.slice(0,E);break}}}b&&!f&&(F=s(F,1/0));var T=I.length+F.length+V.length,B=T<v?new Array(v-T+1).join(h):"";switch(b&&f&&(F=s(B+F,B.length?v-V.length:1/0),B=""),x){case"<":F=I+F+V+B;break;case"=":F=I+B+F+V;break;case"^":F=B.slice(0,T=B.length>>1)+I+F+V+B.slice(T);break;default:F=B+I+F+V;break}return i(F)}return M.toString=function(){return m+""},M}function u(m,h){var x=d((m=cu(m),m.type="f",m)),g=Math.max(-8,Math.min(8,Math.floor(Qo(h)/3)))*3,p=Math.pow(10,-g),f=WS[8+g/3];return function(v){return x(p*v)+f}}return{format:d,formatPrefix:u}}var Bm,aN,Z_;Qce({thousands:",",grouping:[3],currency:["$",""]});function Qce(t){return Bm=Yce(t),aN=Bm.format,Z_=Bm.formatPrefix,Bm}function Xce(t){return Math.max(0,-Qo(Math.abs(t)))}function Zce(t,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qo(s)/3)))*3-Qo(Math.abs(t)))}function Jce(t,s){return t=Math.abs(t),s=Math.abs(s)-t,Math.max(0,Qo(s)-Qo(t))+1}function J_(t,s,r,n){var a=Vv(t,s,r),i;switch(n=cu(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(s));return n.precision==null&&!isNaN(i=Zce(a,l))&&(n.precision=i),Z_(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Jce(a,Math.max(Math.abs(t),Math.abs(s))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Xce(a))&&(n.precision=i-(n.type==="%")*2);break}}return aN(n)}function Vi(t){var s=t.domain;return t.ticks=function(r){var n=s();return Lv(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=s();return J_(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=s(),a=0,i=n.length-1,l=n[a],o=n[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=Bv(l,o,r),d===c)return n[a]=l,n[i]=o,s(n);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function ax(){var t=rN();return t.copy=function(){return mm(t,ax())},wn.apply(t,arguments),Vi(t)}function e5(t){var s;function r(n){return n==null||isNaN(n=+n)?s:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,rx),r):t.slice()},r.unknown=function(n){return arguments.length?(s=n,r):s},r.copy=function(){return e5(t).unknown(s)},t=arguments.length?Array.from(t,rx):[0,1],Vi(r)}function t5(t,s){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],l;return i<a&&(l=r,r=n,n=l,l=a,a=i,i=l),t[r]=s.floor(a),t[n]=s.ceil(i),t}function YS(t){return Math.log(t)}function QS(t){return Math.exp(t)}function ede(t){return-Math.log(-t)}function tde(t){return-Math.exp(-t)}function sde(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rde(t){return t===10?sde:t===Math.E?Math.exp:s=>Math.pow(t,s)}function nde(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),s=>Math.log(s)/t)}function XS(t){return(s,r)=>-t(-s,r)}function iN(t){const s=t(YS,QS),r=s.domain;let n=10,a,i;function l(){return a=nde(n),i=rde(n),r()[0]<0?(a=XS(a),i=XS(i),t(ede,tde)):t(YS,QS),s}return s.base=function(o){return arguments.length?(n=+o,l()):n},s.domain=function(o){return arguments.length?(r(o),l()):r()},s.ticks=o=>{const c=r();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let h=a(d),x=a(u),g,p;const f=o==null?10:+o;let v=[];if(!(n%1)&&x-h<f){if(h=Math.floor(h),x=Math.ceil(x),d>0){for(;h<=x;++h)for(g=1;g<n;++g)if(p=h<0?g/i(-h):g*i(h),!(p<d)){if(p>u)break;v.push(p)}}else for(;h<=x;++h)for(g=n-1;g>=1;--g)if(p=h>0?g/i(-h):g*i(h),!(p<d)){if(p>u)break;v.push(p)}v.length*2<f&&(v=Lv(d,u,f))}else v=Lv(h,x,Math.min(x-h,f)).map(i);return m?v.reverse():v},s.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=cu(c)).precision==null&&(c.trim=!0),c=aN(c)),o===1/0)return c;const d=Math.max(1,n*o/s.ticks().length);return u=>{let m=u/i(Math.round(a(u)));return m*n<n-.5&&(m*=n),m<=d?c(u):""}},s.nice=()=>r(t5(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),s}function s5(){const t=iN(lf()).domain([1,10]);return t.copy=()=>mm(t,s5()).base(t.base()),wn.apply(t,arguments),t}function ZS(t){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/t))}}function JS(t){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*t}}function lN(t){var s=1,r=t(ZS(s),JS(s));return r.constant=function(n){return arguments.length?t(ZS(s=+n),JS(s)):s},Vi(r)}function r5(){var t=lN(lf());return t.copy=function(){return mm(t,r5()).constant(t.constant())},wn.apply(t,arguments)}function eC(t){return function(s){return s<0?-Math.pow(-s,t):Math.pow(s,t)}}function ade(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ide(t){return t<0?-t*t:t*t}function oN(t){var s=t(Tr,Tr),r=1;function n(){return r===1?t(Tr,Tr):r===.5?t(ade,ide):t(eC(r),eC(1/r))}return s.exponent=function(a){return arguments.length?(r=+a,n()):r},Vi(s)}function cN(){var t=oN(lf());return t.copy=function(){return mm(t,cN()).exponent(t.exponent())},wn.apply(t,arguments),t}function lde(){return cN.apply(null,arguments).exponent(.5)}function tC(t){return Math.sign(t)*t*t}function ode(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function n5(){var t=rN(),s=[0,1],r=!1,n;function a(i){var l=ode(t(i));return isNaN(l)?n:r?Math.round(l):l}return a.invert=function(i){return t.invert(tC(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((s=Array.from(i,rx)).map(tC)),a):s.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return n5(t.domain(),s).round(r).clamp(t.clamp()).unknown(n)},wn.apply(a,arguments),Vi(a)}function a5(){var t=[],s=[],r=[],n;function a(){var l=0,o=Math.max(1,s.length);for(r=new Array(o-1);++l<o;)r[l-1]=hce(t,l/o);return i}function i(l){return l==null||isNaN(l=+l)?n:s[dm(r,l)]}return i.invertExtent=function(l){var o=s.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:t[0],o<r.length?r[o]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let o of l)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ci),a()},i.range=function(l){return arguments.length?(s=Array.from(l),a()):s.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return a5().domain(t).range(s).unknown(n)},wn.apply(i,arguments)}function i5(){var t=0,s=1,r=1,n=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[dm(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*s-(c-r)*t)/(r+1);return l}return l.domain=function(c){return arguments.length?([t,s]=c,t=+t,s=+s,o()):[t,s]},l.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],s]:[n[d-1],n[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return n.slice()},l.copy=function(){return i5().domain([t,s]).range(a).unknown(i)},wn.apply(Vi(l),arguments)}function l5(){var t=[.5],s=[0,1],r,n=1;function a(i){return i!=null&&i<=i?s[dm(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,s.length-1),a):t.slice()},a.range=function(i){return arguments.length?(s=Array.from(i),n=Math.min(t.length,s.length-1),a):s.slice()},a.invertExtent=function(i){var l=s.indexOf(i);return[t[l-1],t[l]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return l5().domain(t).range(s).unknown(r)},wn.apply(a,arguments)}const Ug=new Date,zg=new Date;function ir(t,s,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),s(i,1),t(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),s(i,o),t(i);while(d<i&&i<l);return c},a.filter=i=>ir(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;s(l,-1),!i(l););else for(;--o>=0;)for(;s(l,1),!i(l););}),r&&(a.count=(i,l)=>(Ug.setTime(+i),zg.setTime(+l),t(Ug),t(zg),Math.floor(r(Ug,zg))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?l=>n(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const ix=ir(()=>{},(t,s)=>{t.setTime(+t+s)},(t,s)=>s-t);ix.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ir(s=>{s.setTime(Math.floor(s/t)*t)},(s,r)=>{s.setTime(+s+r*t)},(s,r)=>(r-s)/t):ix);ix.range;const Ea=1e3,xn=Ea*60,Ma=xn*60,Ka=Ma*24,dN=Ka*7,sC=Ka*30,Gg=Ka*365,cl=ir(t=>{t.setTime(t-t.getMilliseconds())},(t,s)=>{t.setTime(+t+s*Ea)},(t,s)=>(s-t)/Ea,t=>t.getUTCSeconds());cl.range;const uN=ir(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ea)},(t,s)=>{t.setTime(+t+s*xn)},(t,s)=>(s-t)/xn,t=>t.getMinutes());uN.range;const mN=ir(t=>{t.setUTCSeconds(0,0)},(t,s)=>{t.setTime(+t+s*xn)},(t,s)=>(s-t)/xn,t=>t.getUTCMinutes());mN.range;const hN=ir(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ea-t.getMinutes()*xn)},(t,s)=>{t.setTime(+t+s*Ma)},(t,s)=>(s-t)/Ma,t=>t.getHours());hN.range;const xN=ir(t=>{t.setUTCMinutes(0,0,0)},(t,s)=>{t.setTime(+t+s*Ma)},(t,s)=>(s-t)/Ma,t=>t.getUTCHours());xN.range;const hm=ir(t=>t.setHours(0,0,0,0),(t,s)=>t.setDate(t.getDate()+s),(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*xn)/Ka,t=>t.getDate()-1);hm.range;const of=ir(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/Ka,t=>t.getUTCDate()-1);of.range;const o5=ir(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/Ka,t=>Math.floor(t/Ka));o5.range;function Vl(t){return ir(s=>{s.setDate(s.getDate()-(s.getDay()+7-t)%7),s.setHours(0,0,0,0)},(s,r)=>{s.setDate(s.getDate()+r*7)},(s,r)=>(r-s-(r.getTimezoneOffset()-s.getTimezoneOffset())*xn)/dN)}const cf=Vl(0),lx=Vl(1),cde=Vl(2),dde=Vl(3),Xo=Vl(4),ude=Vl(5),mde=Vl(6);cf.range;lx.range;cde.range;dde.range;Xo.range;ude.range;mde.range;function ql(t){return ir(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-t)%7),s.setUTCHours(0,0,0,0)},(s,r)=>{s.setUTCDate(s.getUTCDate()+r*7)},(s,r)=>(r-s)/dN)}const df=ql(0),ox=ql(1),hde=ql(2),xde=ql(3),Zo=ql(4),pde=ql(5),fde=ql(6);df.range;ox.range;hde.range;xde.range;Zo.range;pde.range;fde.range;const pN=ir(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,s)=>{t.setMonth(t.getMonth()+s)},(t,s)=>s.getMonth()-t.getMonth()+(s.getFullYear()-t.getFullYear())*12,t=>t.getMonth());pN.range;const fN=ir(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCMonth(t.getUTCMonth()+s)},(t,s)=>s.getUTCMonth()-t.getUTCMonth()+(s.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());fN.range;const Wa=ir(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s)},(t,s)=>s.getFullYear()-t.getFullYear(),t=>t.getFullYear());Wa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ir(s=>{s.setFullYear(Math.floor(s.getFullYear()/t)*t),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,r)=>{s.setFullYear(s.getFullYear()+r*t)});Wa.range;const Ya=ir(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s)},(t,s)=>s.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ya.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ir(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/t)*t),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,r)=>{s.setUTCFullYear(s.getUTCFullYear()+r*t)});Ya.range;function c5(t,s,r,n,a,i){const l=[[cl,1,Ea],[cl,5,5*Ea],[cl,15,15*Ea],[cl,30,30*Ea],[i,1,xn],[i,5,5*xn],[i,15,15*xn],[i,30,30*xn],[a,1,Ma],[a,3,3*Ma],[a,6,6*Ma],[a,12,12*Ma],[n,1,Ka],[n,2,2*Ka],[r,1,dN],[s,1,sC],[s,3,3*sC],[t,1,Gg]];function o(d,u,m){const h=u<d;h&&([d,u]=[u,d]);const x=m&&typeof m.range=="function"?m:c(d,u,m),g=x?x.range(d,+u+1):[];return h?g.reverse():g}function c(d,u,m){const h=Math.abs(u-d)/m,x=Zb(([,,f])=>f).right(l,h);if(x===l.length)return t.every(Vv(d/Gg,u/Gg,m));if(x===0)return ix.every(Math.max(Vv(d,u,m),1));const[g,p]=l[h/l[x-1][2]<l[x][2]/h?x-1:x];return g.every(p)}return[o,c]}const[gde,jde]=c5(Ya,fN,df,o5,xN,mN),[vde,yde]=c5(Wa,pN,cf,hm,hN,uN);function Hg(t){if(0<=t.y&&t.y<100){var s=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return s.setFullYear(t.y),s}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Kg(t){if(0<=t.y&&t.y<100){var s=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return s.setUTCFullYear(t.y),s}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ed(t,s,r){return{y:t,m:s,d:r,H:0,M:0,S:0,L:0}}function bde(t){var s=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,l=t.shortDays,o=t.months,c=t.shortMonths,d=td(a),u=sd(a),m=td(i),h=sd(i),x=td(l),g=sd(l),p=td(o),f=sd(o),v=td(c),b=sd(c),y={a:Q,A:T,b:B,B:W,c:null,d:oC,e:oC,f:zde,g:eue,G:sue,H:Vde,I:qde,j:Ude,L:d5,m:Gde,M:Hde,p:he,q:Se,Q:uC,s:mC,S:Kde,u:Wde,U:Yde,V:Qde,w:Xde,W:Zde,x:null,X:null,y:Jde,Y:tue,Z:rue,"%":dC},S={a:z,A:L,b:le,B:Z,c:null,d:cC,e:cC,f:lue,g:gue,G:vue,H:nue,I:aue,j:iue,L:m5,m:oue,M:cue,p:me,q:U,Q:uC,s:mC,S:due,u:uue,U:mue,V:hue,w:xue,W:pue,x:null,X:null,y:fue,Y:jue,Z:yue,"%":dC},w={a:M,A:F,b:I,B:V,c:E,d:iC,e:iC,f:$de,g:aC,G:nC,H:lC,I:lC,j:Mde,L:Ide,m:Ede,M:Rde,p:N,q:Ode,Q:Lde,s:Bde,S:_de,u:Pde,U:kde,V:Ade,w:Cde,W:Tde,x:G,X:Y,y:aC,Y:nC,Z:Dde,"%":Fde};y.x=C(r,y),y.X=C(n,y),y.c=C(s,y),S.x=C(r,S),S.X=C(n,S),S.c=C(s,S);function C(je,ye){return function(ae){var pe=[],Je=-1,et=0,Pe=je.length,mt,Mt,os;for(ae instanceof Date||(ae=new Date(+ae));++Je<Pe;)je.charCodeAt(Je)===37&&(pe.push(je.slice(et,Je)),(Mt=rC[mt=je.charAt(++Je)])!=null?mt=je.charAt(++Je):Mt=mt==="e"?" ":"0",(os=ye[mt])&&(mt=os(ae,Mt)),pe.push(mt),et=Je+1);return pe.push(je.slice(et,Je)),pe.join("")}}function k(je,ye){return function(ae){var pe=ed(1900,void 0,1),Je=A(pe,je,ae+="",0),et,Pe;if(Je!=ae.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(ye&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(et=Kg(ed(pe.y,0,1)),Pe=et.getUTCDay(),et=Pe>4||Pe===0?ox.ceil(et):ox(et),et=of.offset(et,(pe.V-1)*7),pe.y=et.getUTCFullYear(),pe.m=et.getUTCMonth(),pe.d=et.getUTCDate()+(pe.w+6)%7):(et=Hg(ed(pe.y,0,1)),Pe=et.getDay(),et=Pe>4||Pe===0?lx.ceil(et):lx(et),et=hm.offset(et,(pe.V-1)*7),pe.y=et.getFullYear(),pe.m=et.getMonth(),pe.d=et.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),Pe="Z"in pe?Kg(ed(pe.y,0,1)).getUTCDay():Hg(ed(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(Pe+5)%7:pe.w+pe.U*7-(Pe+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,Kg(pe)):Hg(pe)}}function A(je,ye,ae,pe){for(var Je=0,et=ye.length,Pe=ae.length,mt,Mt;Je<et;){if(pe>=Pe)return-1;if(mt=ye.charCodeAt(Je++),mt===37){if(mt=ye.charAt(Je++),Mt=w[mt in rC?ye.charAt(Je++):mt],!Mt||(pe=Mt(je,ae,pe))<0)return-1}else if(mt!=ae.charCodeAt(pe++))return-1}return pe}function N(je,ye,ae){var pe=d.exec(ye.slice(ae));return pe?(je.p=u.get(pe[0].toLowerCase()),ae+pe[0].length):-1}function M(je,ye,ae){var pe=x.exec(ye.slice(ae));return pe?(je.w=g.get(pe[0].toLowerCase()),ae+pe[0].length):-1}function F(je,ye,ae){var pe=m.exec(ye.slice(ae));return pe?(je.w=h.get(pe[0].toLowerCase()),ae+pe[0].length):-1}function I(je,ye,ae){var pe=v.exec(ye.slice(ae));return pe?(je.m=b.get(pe[0].toLowerCase()),ae+pe[0].length):-1}function V(je,ye,ae){var pe=p.exec(ye.slice(ae));return pe?(je.m=f.get(pe[0].toLowerCase()),ae+pe[0].length):-1}function E(je,ye,ae){return A(je,s,ye,ae)}function G(je,ye,ae){return A(je,r,ye,ae)}function Y(je,ye,ae){return A(je,n,ye,ae)}function Q(je){return l[je.getDay()]}function T(je){return i[je.getDay()]}function B(je){return c[je.getMonth()]}function W(je){return o[je.getMonth()]}function he(je){return a[+(je.getHours()>=12)]}function Se(je){return 1+~~(je.getMonth()/3)}function z(je){return l[je.getUTCDay()]}function L(je){return i[je.getUTCDay()]}function le(je){return c[je.getUTCMonth()]}function Z(je){return o[je.getUTCMonth()]}function me(je){return a[+(je.getUTCHours()>=12)]}function U(je){return 1+~~(je.getUTCMonth()/3)}return{format:function(je){var ye=C(je+="",y);return ye.toString=function(){return je},ye},parse:function(je){var ye=k(je+="",!1);return ye.toString=function(){return je},ye},utcFormat:function(je){var ye=C(je+="",S);return ye.toString=function(){return je},ye},utcParse:function(je){var ye=k(je+="",!0);return ye.toString=function(){return je},ye}}}var rC={"-":"",_:" ",0:"0"},mr=/^\s*\d+/,Nde=/^%/,wde=/[\\^$*+?|[\]().{}]/g;function zt(t,s,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(s)+a:a)}function Sde(t){return t.replace(wde,"\\$&")}function td(t){return new RegExp("^(?:"+t.map(Sde).join("|")+")","i")}function sd(t){return new Map(t.map((s,r)=>[s.toLowerCase(),r]))}function Cde(t,s,r){var n=mr.exec(s.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Pde(t,s,r){var n=mr.exec(s.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function kde(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Ade(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Tde(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function nC(t,s,r){var n=mr.exec(s.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function aC(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Dde(t,s,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ode(t,s,r){var n=mr.exec(s.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Ede(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function iC(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Mde(t,s,r){var n=mr.exec(s.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function lC(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Rde(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function _de(t,s,r){var n=mr.exec(s.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Ide(t,s,r){var n=mr.exec(s.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function $de(t,s,r){var n=mr.exec(s.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Fde(t,s,r){var n=Nde.exec(s.slice(r,r+1));return n?r+n[0].length:-1}function Lde(t,s,r){var n=mr.exec(s.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Bde(t,s,r){var n=mr.exec(s.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function oC(t,s){return zt(t.getDate(),s,2)}function Vde(t,s){return zt(t.getHours(),s,2)}function qde(t,s){return zt(t.getHours()%12||12,s,2)}function Ude(t,s){return zt(1+hm.count(Wa(t),t),s,3)}function d5(t,s){return zt(t.getMilliseconds(),s,3)}function zde(t,s){return d5(t,s)+"000"}function Gde(t,s){return zt(t.getMonth()+1,s,2)}function Hde(t,s){return zt(t.getMinutes(),s,2)}function Kde(t,s){return zt(t.getSeconds(),s,2)}function Wde(t){var s=t.getDay();return s===0?7:s}function Yde(t,s){return zt(cf.count(Wa(t)-1,t),s,2)}function u5(t){var s=t.getDay();return s>=4||s===0?Xo(t):Xo.ceil(t)}function Qde(t,s){return t=u5(t),zt(Xo.count(Wa(t),t)+(Wa(t).getDay()===4),s,2)}function Xde(t){return t.getDay()}function Zde(t,s){return zt(lx.count(Wa(t)-1,t),s,2)}function Jde(t,s){return zt(t.getFullYear()%100,s,2)}function eue(t,s){return t=u5(t),zt(t.getFullYear()%100,s,2)}function tue(t,s){return zt(t.getFullYear()%1e4,s,4)}function sue(t,s){var r=t.getDay();return t=r>=4||r===0?Xo(t):Xo.ceil(t),zt(t.getFullYear()%1e4,s,4)}function rue(t){var s=t.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+zt(s/60|0,"0",2)+zt(s%60,"0",2)}function cC(t,s){return zt(t.getUTCDate(),s,2)}function nue(t,s){return zt(t.getUTCHours(),s,2)}function aue(t,s){return zt(t.getUTCHours()%12||12,s,2)}function iue(t,s){return zt(1+of.count(Ya(t),t),s,3)}function m5(t,s){return zt(t.getUTCMilliseconds(),s,3)}function lue(t,s){return m5(t,s)+"000"}function oue(t,s){return zt(t.getUTCMonth()+1,s,2)}function cue(t,s){return zt(t.getUTCMinutes(),s,2)}function due(t,s){return zt(t.getUTCSeconds(),s,2)}function uue(t){var s=t.getUTCDay();return s===0?7:s}function mue(t,s){return zt(df.count(Ya(t)-1,t),s,2)}function h5(t){var s=t.getUTCDay();return s>=4||s===0?Zo(t):Zo.ceil(t)}function hue(t,s){return t=h5(t),zt(Zo.count(Ya(t),t)+(Ya(t).getUTCDay()===4),s,2)}function xue(t){return t.getUTCDay()}function pue(t,s){return zt(ox.count(Ya(t)-1,t),s,2)}function fue(t,s){return zt(t.getUTCFullYear()%100,s,2)}function gue(t,s){return t=h5(t),zt(t.getUTCFullYear()%100,s,2)}function jue(t,s){return zt(t.getUTCFullYear()%1e4,s,4)}function vue(t,s){var r=t.getUTCDay();return t=r>=4||r===0?Zo(t):Zo.ceil(t),zt(t.getUTCFullYear()%1e4,s,4)}function yue(){return"+0000"}function dC(){return"%"}function uC(t){return+t}function mC(t){return Math.floor(+t/1e3)}var Xl,x5,p5;bue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bue(t){return Xl=bde(t),x5=Xl.format,Xl.parse,p5=Xl.utcFormat,Xl.utcParse,Xl}function Nue(t){return new Date(t)}function wue(t){return t instanceof Date?+t:+new Date(+t)}function gN(t,s,r,n,a,i,l,o,c,d){var u=rN(),m=u.invert,h=u.domain,x=d(".%L"),g=d(":%S"),p=d("%I:%M"),f=d("%I %p"),v=d("%a %d"),b=d("%b %d"),y=d("%B"),S=d("%Y");function w(C){return(c(C)<C?x:o(C)<C?g:l(C)<C?p:i(C)<C?f:n(C)<C?a(C)<C?v:b:r(C)<C?y:S)(C)}return u.invert=function(C){return new Date(m(C))},u.domain=function(C){return arguments.length?h(Array.from(C,wue)):h().map(Nue)},u.ticks=function(C){var k=h();return t(k[0],k[k.length-1],C??10)},u.tickFormat=function(C,k){return k==null?w:d(k)},u.nice=function(C){var k=h();return(!C||typeof C.range!="function")&&(C=s(k[0],k[k.length-1],C??10)),C?h(t5(k,C)):u},u.copy=function(){return mm(u,gN(t,s,r,n,a,i,l,o,c,d))},u}function Sue(){return wn.apply(gN(vde,yde,Wa,pN,cf,hm,hN,uN,cl,x5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cue(){return wn.apply(gN(gde,jde,Ya,fN,df,of,xN,mN,cl,p5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uf(){var t=0,s=1,r,n,a,i,l=Tr,o=!1,c;function d(m){return m==null||isNaN(m=+m)?c:l(a===0?.5:(m=(i(m)-r)*a,o?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,s]=m,r=i(t=+t),n=i(s=+s),a=r===n?0:1/(n-r),d):[t,s]},d.clamp=function(m){return arguments.length?(o=!!m,d):o},d.interpolator=function(m){return arguments.length?(l=m,d):l};function u(m){return function(h){var x,g;return arguments.length?([x,g]=h,l=m(x,g),d):[l(0),l(1)]}}return d.range=u(Vc),d.rangeRound=u(sN),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return i=m,r=m(t),n=m(s),a=r===n?0:1/(n-r),d}}function qi(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function f5(){var t=Vi(uf()(Tr));return t.copy=function(){return qi(t,f5())},Ja.apply(t,arguments)}function g5(){var t=iN(uf()).domain([1,10]);return t.copy=function(){return qi(t,g5()).base(t.base())},Ja.apply(t,arguments)}function j5(){var t=lN(uf());return t.copy=function(){return qi(t,j5()).constant(t.constant())},Ja.apply(t,arguments)}function jN(){var t=oN(uf());return t.copy=function(){return qi(t,jN()).exponent(t.exponent())},Ja.apply(t,arguments)}function Pue(){return jN.apply(null,arguments).exponent(.5)}function v5(){var t=[],s=Tr;function r(n){if(n!=null&&!isNaN(n=+n))return s((dm(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ci),r},r.interpolator=function(n){return arguments.length?(s=n,r):s},r.range=function(){return t.map((n,a)=>s(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>mce(t,i/n))},r.copy=function(){return v5(s).domain(t)},Ja.apply(r,arguments)}function mf(){var t=0,s=.5,r=1,n=1,a,i,l,o,c,d=Tr,u,m=!1,h;function x(p){return isNaN(p=+p)?h:(p=.5+((p=+u(p))-i)*(n*p<n*i?o:c),d(m?Math.max(0,Math.min(1,p)):p))}x.domain=function(p){return arguments.length?([t,s,r]=p,a=u(t=+t),i=u(s=+s),l=u(r=+r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,x):[t,s,r]},x.clamp=function(p){return arguments.length?(m=!!p,x):m},x.interpolator=function(p){return arguments.length?(d=p,x):d};function g(p){return function(f){var v,b,y;return arguments.length?([v,b,y]=f,d=Fce(p,[v,b,y]),x):[d(0),d(.5),d(1)]}}return x.range=g(Vc),x.rangeRound=g(sN),x.unknown=function(p){return arguments.length?(h=p,x):h},function(p){return u=p,a=p(t),i=p(s),l=p(r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,x}}function y5(){var t=Vi(mf()(Tr));return t.copy=function(){return qi(t,y5())},Ja.apply(t,arguments)}function b5(){var t=iN(mf()).domain([.1,1,10]);return t.copy=function(){return qi(t,b5()).base(t.base())},Ja.apply(t,arguments)}function N5(){var t=lN(mf());return t.copy=function(){return qi(t,N5()).constant(t.constant())},Ja.apply(t,arguments)}function vN(){var t=oN(mf());return t.copy=function(){return qi(t,vN()).exponent(t.exponent())},Ja.apply(t,arguments)}function kue(){return vN.apply(null,arguments).exponent(.5)}const hC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:au,scaleDiverging:y5,scaleDivergingLog:b5,scaleDivergingPow:vN,scaleDivergingSqrt:kue,scaleDivergingSymlog:N5,scaleIdentity:e5,scaleImplicit:qv,scaleLinear:ax,scaleLog:s5,scaleOrdinal:Jb,scalePoint:bd,scalePow:cN,scaleQuantile:a5,scaleQuantize:i5,scaleRadial:n5,scaleSequential:f5,scaleSequentialLog:g5,scaleSequentialPow:jN,scaleSequentialQuantile:v5,scaleSequentialSqrt:Pue,scaleSequentialSymlog:j5,scaleSqrt:lde,scaleSymlog:r5,scaleThreshold:l5,scaleTime:Sue,scaleUtc:Cue,tickFormat:J_},Symbol.toStringTag,{value:"Module"}));var Aue=Ec;function Tue(t,s,r){for(var n=-1,a=t.length;++n<a;){var i=t[n],l=s(i);if(l!=null&&(o===void 0?l===l&&!Aue(l):r(l,o)))var o=l,c=i}return c}var hf=Tue;function Due(t,s){return t>s}var w5=Due,Oue=hf,Eue=w5,Mue=Bc;function Rue(t){return t&&t.length?Oue(t,Mue,Eue):void 0}var _ue=Rue;const xf=ls(_ue);function Iue(t,s){return t<s}var S5=Iue,$ue=hf,Fue=S5,Lue=Bc;function Bue(t){return t&&t.length?$ue(t,Lue,Fue):void 0}var Vue=Bue;const pf=ls(Vue);var que=Mb,Uue=Na,zue=E_,Gue=Fr;function Hue(t,s){var r=Gue(t)?que:zue;return r(t,Uue(s))}var Kue=Hue,Wue=D_,Yue=Kue;function Que(t,s){return Wue(Yue(t,s),1)}var Xue=Que;const Zue=ls(Xue);var Jue=Wb;function eme(t,s){return Jue(t,s)}var tme=eme;const xm=ls(tme);var qc=1e9,sme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bN,Ts=!0,jn="[DecimalError] ",pl=jn+"Invalid argument: ",yN=jn+"Exponent out of range: ",Uc=Math.floor,Ji=Math.pow,rme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Kr,or=1e7,Ns=7,C5=9007199254740991,cx=Uc(C5/Ns),Ze={};Ze.absoluteValue=Ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ze.comparedTo=Ze.cmp=function(t){var s,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,s=0,r=n<a?n:a;s<r;++s)if(i.d[s]!==t.d[s])return i.d[s]>t.d[s]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ze.decimalPlaces=Ze.dp=function(){var t=this,s=t.d.length-1,r=(s-t.e)*Ns;if(s=t.d[s],s)for(;s%10==0;s/=10)r--;return r<0?0:r};Ze.dividedBy=Ze.div=function(t){return Fa(this,new this.constructor(t))};Ze.dividedToIntegerBy=Ze.idiv=function(t){var s=this,r=s.constructor;return ds(Fa(s,new r(t),0,1),r.precision)};Ze.equals=Ze.eq=function(t){return!this.cmp(t)};Ze.exponent=function(){return Xs(this)};Ze.greaterThan=Ze.gt=function(t){return this.cmp(t)>0};Ze.greaterThanOrEqualTo=Ze.gte=function(t){return this.cmp(t)>=0};Ze.isInteger=Ze.isint=function(){return this.e>this.d.length-2};Ze.isNegative=Ze.isneg=function(){return this.s<0};Ze.isPositive=Ze.ispos=function(){return this.s>0};Ze.isZero=function(){return this.s===0};Ze.lessThan=Ze.lt=function(t){return this.cmp(t)<0};Ze.lessThanOrEqualTo=Ze.lte=function(t){return this.cmp(t)<1};Ze.logarithm=Ze.log=function(t){var s,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Kr))throw Error(jn+"NaN");if(r.s<1)throw Error(jn+(r.s?"NaN":"-Infinity"));return r.eq(Kr)?new n(0):(Ts=!1,s=Fa(du(r,i),du(t,i),i),Ts=!0,ds(s,a))};Ze.minus=Ze.sub=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?A5(s,t):P5(s,(t.s=-t.s,t))};Ze.modulo=Ze.mod=function(t){var s,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(jn+"NaN");return r.s?(Ts=!1,s=Fa(r,t,0,1).times(t),Ts=!0,r.minus(s)):ds(new n(r),a)};Ze.naturalExponential=Ze.exp=function(){return k5(this)};Ze.naturalLogarithm=Ze.ln=function(){return du(this)};Ze.negated=Ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ze.plus=Ze.add=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?P5(s,t):A5(s,(t.s=-t.s,t))};Ze.precision=Ze.sd=function(t){var s,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(pl+t);if(s=Xs(a)+1,n=a.d.length-1,r=n*Ns+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&s>r?s:r};Ze.squareRoot=Ze.sqrt=function(){var t,s,r,n,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(jn+"NaN")}for(t=Xs(o),Ts=!1,a=Math.sqrt(+o),a==0||a==1/0?(s=ta(o.d),(s.length+t)%2==0&&(s+="0"),a=Math.sqrt(s),t=Uc((t+1)/2)-(t<0||t%2),a==1/0?s="5e"+t:(s=a.toExponential(),s=s.slice(0,s.indexOf("e")+1)+t),n=new c(s)):n=new c(a.toString()),r=c.precision,a=l=r+3;;)if(i=n,n=i.plus(Fa(o,i,l+2)).times(.5),ta(i.d).slice(0,l)===(s=ta(n.d)).slice(0,l)){if(s=s.slice(l-3,l+1),a==l&&s=="4999"){if(ds(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(s!="9999")break;l+=4}return Ts=!0,ds(n,r)};Ze.times=Ze.mul=function(t){var s,r,n,a,i,l,o,c,d,u=this,m=u.constructor,h=u.d,x=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,r=u.e+t.e,c=h.length,d=x.length,c<d&&(i=h,h=x,x=i,l=c,c=d,d=l),i=[],l=c+d,n=l;n--;)i.push(0);for(n=d;--n>=0;){for(s=0,a=c+n;a>n;)o=i[a]+x[n]*h[a-n-1]+s,i[a--]=o%or|0,s=o/or|0;i[a]=(i[a]+s)%or|0}for(;!i[--l];)i.pop();return s?++r:i.shift(),t.d=i,t.e=r,Ts?ds(t,m.precision):t};Ze.toDecimalPlaces=Ze.todp=function(t,s){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(fa(t,0,qc),s===void 0?s=n.rounding:fa(s,0,8),ds(r,t+Xs(r)+1,s))};Ze.toExponential=function(t,s){var r,n=this,a=n.constructor;return t===void 0?r=Dl(n,!0):(fa(t,0,qc),s===void 0?s=a.rounding:fa(s,0,8),n=ds(new a(n),t+1,s),r=Dl(n,!0,t+1)),r};Ze.toFixed=function(t,s){var r,n,a=this,i=a.constructor;return t===void 0?Dl(a):(fa(t,0,qc),s===void 0?s=i.rounding:fa(s,0,8),n=ds(new i(a),t+Xs(a)+1,s),r=Dl(n.abs(),!1,t+Xs(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ze.toInteger=Ze.toint=function(){var t=this,s=t.constructor;return ds(new s(t),Xs(t)+1,s.rounding)};Ze.toNumber=function(){return+this};Ze.toPower=Ze.pow=function(t){var s,r,n,a,i,l,o=this,c=o.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(Kr);if(o=new c(o),!o.s){if(t.s<1)throw Error(jn+"Infinity");return o}if(o.eq(Kr))return o;if(n=c.precision,t.eq(Kr))return ds(o,n);if(s=t.e,r=t.d.length-1,l=s>=r,i=o.s,l){if((r=u<0?-u:u)<=C5){for(a=new c(Kr),s=Math.ceil(n/Ns+4),Ts=!1;r%2&&(a=a.times(o),pC(a.d,s)),r=Uc(r/2),r!==0;)o=o.times(o),pC(o.d,s);return Ts=!0,t.s<0?new c(Kr).div(a):ds(a,n)}}else if(i<0)throw Error(jn+"NaN");return i=i<0&&t.d[Math.max(s,r)]&1?-1:1,o.s=1,Ts=!1,a=t.times(du(o,n+d)),Ts=!0,a=k5(a),a.s=i,a};Ze.toPrecision=function(t,s){var r,n,a=this,i=a.constructor;return t===void 0?(r=Xs(a),n=Dl(a,r<=i.toExpNeg||r>=i.toExpPos)):(fa(t,1,qc),s===void 0?s=i.rounding:fa(s,0,8),a=ds(new i(a),t,s),r=Xs(a),n=Dl(a,t<=r||r<=i.toExpNeg,t)),n};Ze.toSignificantDigits=Ze.tosd=function(t,s){var r=this,n=r.constructor;return t===void 0?(t=n.precision,s=n.rounding):(fa(t,1,qc),s===void 0?s=n.rounding:fa(s,0,8)),ds(new n(r),t,s)};Ze.toString=Ze.valueOf=Ze.val=Ze.toJSON=Ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,s=Xs(t),r=t.constructor;return Dl(t,s<=r.toExpNeg||s>=r.toExpPos)};function P5(t,s){var r,n,a,i,l,o,c,d,u=t.constructor,m=u.precision;if(!t.s||!s.s)return s.s||(s=new u(t)),Ts?ds(s,m):s;if(c=t.d,d=s.d,l=t.e,a=s.e,c=c.slice(),i=l-a,i){for(i<0?(n=c,i=-i,o=d.length):(n=d,a=l,o=c.length),l=Math.ceil(m/Ns),o=l>o?l+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/or|0,c[i]%=or;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return s.d=c,s.e=a,Ts?ds(s,m):s}function fa(t,s,r){if(t!==~~t||t<s||t>r)throw Error(pl+t)}function ta(t){var s,r,n,a=t.length-1,i="",l=t[0];if(a>0){for(i+=l,s=1;s<a;s++)n=t[s]+"",r=Ns-n.length,r&&(i+=hi(r)),i+=n;l=t[s],n=l+"",r=Ns-n.length,r&&(i+=hi(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Fa=function(){function t(n,a){var i,l=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+l,n[o]=i%or|0,l=i/or|0;return l&&n.unshift(l),n}function s(n,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var l=0;i--;)n[i]-=l,l=n[i]<a[i]?1:0,n[i]=l*or+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,l){var o,c,d,u,m,h,x,g,p,f,v,b,y,S,w,C,k,A,N=n.constructor,M=n.s==a.s?1:-1,F=n.d,I=a.d;if(!n.s)return new N(n);if(!a.s)throw Error(jn+"Division by zero");for(c=n.e-a.e,k=I.length,w=F.length,x=new N(M),g=x.d=[],d=0;I[d]==(F[d]||0);)++d;if(I[d]>(F[d]||0)&&--c,i==null?b=i=N.precision:l?b=i+(Xs(n)-Xs(a))+1:b=i,b<0)return new N(0);if(b=b/Ns+2|0,d=0,k==1)for(u=0,I=I[0],b++;(d<w||u)&&b--;d++)y=u*or+(F[d]||0),g[d]=y/I|0,u=y%I|0;else{for(u=or/(I[0]+1)|0,u>1&&(I=t(I,u),F=t(F,u),k=I.length,w=F.length),S=k,p=F.slice(0,k),f=p.length;f<k;)p[f++]=0;A=I.slice(),A.unshift(0),C=I[0],I[1]>=or/2&&++C;do u=0,o=s(I,p,k,f),o<0?(v=p[0],k!=f&&(v=v*or+(p[1]||0)),u=v/C|0,u>1?(u>=or&&(u=or-1),m=t(I,u),h=m.length,f=p.length,o=s(m,p,h,f),o==1&&(u--,r(m,k<h?A:I,h))):(u==0&&(o=u=1),m=I.slice()),h=m.length,h<f&&m.unshift(0),r(p,m,f),o==-1&&(f=p.length,o=s(I,p,k,f),o<1&&(u++,r(p,k<f?A:I,f))),f=p.length):o===0&&(u++,p=[0]),g[d++]=u,o&&p[0]?p[f++]=F[S]||0:(p=[F[S]],f=1);while((S++<w||p[0]!==void 0)&&b--)}return g[0]||g.shift(),x.e=c,ds(x,l?i+Xs(x)+1:i)}}();function k5(t,s){var r,n,a,i,l,o,c=0,d=0,u=t.constructor,m=u.precision;if(Xs(t)>16)throw Error(yN+Xs(t));if(!t.s)return new u(Kr);for(Ts=!1,o=m,l=new u(.03125);t.abs().gte(.1);)t=t.times(l),d+=5;for(n=Math.log(Ji(2,d))/Math.LN10*2+5|0,o+=n,r=a=i=new u(Kr),u.precision=o;;){if(a=ds(a.times(t),o),r=r.times(++c),l=i.plus(Fa(a,r,o)),ta(l.d).slice(0,o)===ta(i.d).slice(0,o)){for(;d--;)i=ds(i.times(i),o);return u.precision=m,s==null?(Ts=!0,ds(i,m)):i}i=l}}function Xs(t){for(var s=t.e*Ns,r=t.d[0];r>=10;r/=10)s++;return s}function Wg(t,s,r){if(s>t.LN10.sd())throw Ts=!0,r&&(t.precision=r),Error(jn+"LN10 precision limit exceeded");return ds(new t(t.LN10),s)}function hi(t){for(var s="";t--;)s+="0";return s}function du(t,s){var r,n,a,i,l,o,c,d,u,m=1,h=10,x=t,g=x.d,p=x.constructor,f=p.precision;if(x.s<1)throw Error(jn+(x.s?"NaN":"-Infinity"));if(x.eq(Kr))return new p(0);if(s==null?(Ts=!1,d=f):d=s,x.eq(10))return s==null&&(Ts=!0),Wg(p,d);if(d+=h,p.precision=d,r=ta(g),n=r.charAt(0),i=Xs(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(t),r=ta(x.d),n=r.charAt(0),m++;i=Xs(x),n>1?(x=new p("0."+r),i++):x=new p(n+"."+r.slice(1))}else return c=Wg(p,d+2,f).times(i+""),x=du(new p(n+"."+r.slice(1)),d-h).plus(c),p.precision=f,s==null?(Ts=!0,ds(x,f)):x;for(o=l=x=Fa(x.minus(Kr),x.plus(Kr),d),u=ds(x.times(x),d),a=3;;){if(l=ds(l.times(u),d),c=o.plus(Fa(l,new p(a),d)),ta(c.d).slice(0,d)===ta(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(Wg(p,d+2,f).times(i+""))),o=Fa(o,new p(m),d),p.precision=f,s==null?(Ts=!0,ds(o,f)):o;o=c,a+=2}}function xC(t,s){var r,n,a;for((r=s.indexOf("."))>-1&&(s=s.replace(".","")),(n=s.search(/e/i))>0?(r<0&&(r=n),r+=+s.slice(n+1),s=s.substring(0,n)):r<0&&(r=s.length),n=0;s.charCodeAt(n)===48;)++n;for(a=s.length;s.charCodeAt(a-1)===48;)--a;if(s=s.slice(n,a),s){if(a-=n,r=r-n-1,t.e=Uc(r/Ns),t.d=[],n=(r+1)%Ns,r<0&&(n+=Ns),n<a){for(n&&t.d.push(+s.slice(0,n)),a-=Ns;n<a;)t.d.push(+s.slice(n,n+=Ns));s=s.slice(n),n=Ns-s.length}else n-=a;for(;n--;)s+="0";if(t.d.push(+s),Ts&&(t.e>cx||t.e<-cx))throw Error(yN+r)}else t.s=0,t.e=0,t.d=[0];return t}function ds(t,s,r){var n,a,i,l,o,c,d,u,m=t.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(n=s-l,n<0)n+=Ns,a=s,d=m[u=0];else{if(u=Math.ceil((n+1)/Ns),i=m.length,u>=i)return t;for(d=i=m[u],l=1;i>=10;i/=10)l++;n%=Ns,a=n-Ns+l}if(r!==void 0&&(i=Ji(10,l-a-1),o=d/i%10|0,c=s<0||m[u+1]!==void 0||d%i,c=r<4?(o||c)&&(r==0||r==(t.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?d/Ji(10,l-a):0:m[u-1])%10&1||r==(t.s<0?8:7))),s<1||!m[0])return c?(i=Xs(t),m.length=1,s=s-i-1,m[0]=Ji(10,(Ns-s%Ns)%Ns),t.e=Uc(-s/Ns)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=u,i=1,u--):(m.length=u+1,i=Ji(10,Ns-n),m[u]=a>0?(d/Ji(10,l-a)%Ji(10,a)|0)*i:0),c)for(;;)if(u==0){(m[0]+=i)==or&&(m[0]=1,++t.e);break}else{if(m[u]+=i,m[u]!=or)break;m[u--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Ts&&(t.e>cx||t.e<-cx))throw Error(yN+Xs(t));return t}function A5(t,s){var r,n,a,i,l,o,c,d,u,m,h=t.constructor,x=h.precision;if(!t.s||!s.s)return s.s?s.s=-s.s:s=new h(t),Ts?ds(s,x):s;if(c=t.d,m=s.d,n=s.e,d=t.e,c=c.slice(),l=d-n,l){for(u=l<0,u?(r=c,l=-l,o=m.length):(r=m,n=d,o=c.length),a=Math.max(Math.ceil(x/Ns),o)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=m.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=m[a]){u=c[a]<m[a];break}l=0}for(u&&(r=c,c=m,m=r,s.s=-s.s),o=c.length,a=m.length-o;a>0;--a)c[o++]=0;for(a=m.length;a>l;){if(c[--a]<m[a]){for(i=a;i&&c[--i]===0;)c[i]=or-1;--c[i],c[a]+=or}c[a]-=m[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(s.d=c,s.e=n,Ts?ds(s,x):s):new h(0)}function Dl(t,s,r){var n,a=Xs(t),i=ta(t.d),l=i.length;return s?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+hi(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+hi(-a-1)+i,r&&(n=r-l)>0&&(i+=hi(n))):a>=l?(i+=hi(a+1-l),r&&(n=r-a-1)>0&&(i=i+"."+hi(n))):((n=a+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(i+="."),i+=hi(n))),t.s<0?"-"+i:i}function pC(t,s){if(t.length>s)return t.length=s,!0}function T5(t){var s,r,n;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(pl+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return xC(l,i.toString())}else if(typeof i!="string")throw Error(pl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,rme.test(i))xC(l,i);else throw Error(pl+i)}if(a.prototype=Ze,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=T5,a.config=a.set=nme,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<n.length;)t.hasOwnProperty(r=n[s++])||(t[r]=this[r]);return a.config(t),a}function nme(t){if(!t||typeof t!="object")throw Error(jn+"Object expected");var s,r,n,a=["precision",1,qc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(s=0;s<a.length;s+=3)if((n=t[r=a[s]])!==void 0)if(Uc(n)===n&&n>=a[s+1]&&n<=a[s+2])this[r]=n;else throw Error(pl+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(pl+r+": "+n);return this}var bN=T5(sme);Kr=new bN(1);const ns=bN;function ame(t){return cme(t)||ome(t)||lme(t)||ime()}function ime(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lme(t,s){if(t){if(typeof t=="string")return Hv(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hv(t,s)}}function ome(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function cme(t){if(Array.isArray(t))return Hv(t)}function Hv(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var dme=function(s){return s},D5={},O5=function(s){return s===D5},fC=function(s){return function r(){return arguments.length===0||arguments.length===1&&O5(arguments.length<=0?void 0:arguments[0])?r:s.apply(void 0,arguments)}},ume=function t(s,r){return s===1?r:fC(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==D5}).length;return l>=s?r.apply(void 0,a):t(s-l,fC(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(m){return O5(m)?c.shift():m});return r.apply(void 0,ame(u).concat(c))}))})},ff=function(s){return ume(s.length,s)},Kv=function(s,r){for(var n=[],a=s;a<r;++a)n[a-s]=a;return n},mme=ff(function(t,s){return Array.isArray(s)?s.map(t):Object.keys(s).map(function(r){return s[r]}).map(t)}),hme=function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];if(!r.length)return dme;var a=r.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},Wv=function(s){return Array.isArray(s)?s.reverse():s.split("").reverse.join("")},E5=function(s){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r&&i.every(function(o,c){return o===r[c]})||(r=i,n=s.apply(void 0,i)),n}};function xme(t){var s;return t===0?s=1:s=Math.floor(new ns(t).abs().log(10).toNumber())+1,s}function pme(t,s,r){for(var n=new ns(t),a=0,i=[];n.lt(s)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var fme=ff(function(t,s,r){var n=+t,a=+s;return n+r*(a-n)}),gme=ff(function(t,s,r){var n=s-+t;return n=n||1/0,(r-t)/n}),jme=ff(function(t,s,r){var n=s-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const gf={rangeStep:pme,getDigitCount:xme,interpolateNumber:fme,uninterpolateNumber:gme,uninterpolateTruncation:jme};function Yv(t){return bme(t)||yme(t)||M5(t)||vme()}function vme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yme(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function bme(t){if(Array.isArray(t))return Qv(t)}function uu(t,s){return Sme(t)||wme(t,s)||M5(t,s)||Nme()}function Nme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M5(t,s){if(t){if(typeof t=="string")return Qv(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qv(t,s)}}function Qv(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function wme(t,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var l=t[Symbol.iterator](),o;!(n=(o=l.next()).done)&&(r.push(o.value),!(s&&r.length===s));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&l.return!=null&&l.return()}finally{if(a)throw i}}return r}}function Sme(t){if(Array.isArray(t))return t}function R5(t){var s=uu(t,2),r=s[0],n=s[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function _5(t,s,r){if(t.lte(0))return new ns(0);var n=gf.getDigitCount(t.toNumber()),a=new ns(10).pow(n),i=t.div(a),l=n!==1?.05:.1,o=new ns(Math.ceil(i.div(l).toNumber())).add(r).mul(l),c=o.mul(a);return s?c:new ns(Math.ceil(c))}function Cme(t,s,r){var n=1,a=new ns(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new ns(10).pow(gf.getDigitCount(t)-1),a=new ns(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new ns(Math.floor(t)))}else t===0?a=new ns(Math.floor((s-1)/2)):r||(a=new ns(Math.floor(t)));var l=Math.floor((s-1)/2),o=hme(mme(function(c){return a.add(new ns(c-l).mul(n)).toNumber()}),Kv);return o(0,s)}function I5(t,s,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(r-1)))return{step:new ns(0),tickMin:new ns(0),tickMax:new ns(0)};var i=_5(new ns(s).sub(t).div(r-1),n,a),l;t<=0&&s>=0?l=new ns(0):(l=new ns(t).add(s).div(2),l=l.sub(new ns(l).mod(i)));var o=Math.ceil(l.sub(t).div(i).toNumber()),c=Math.ceil(new ns(s).sub(l).div(i).toNumber()),d=o+c+1;return d>r?I5(t,s,r,n,a+1):(d<r&&(c=s>0?c+(r-d):c,o=s>0?o:o+(r-d)),{step:i,tickMin:l.sub(new ns(o).mul(i)),tickMax:l.add(new ns(c).mul(i))})}function Pme(t){var s=uu(t,2),r=s[0],n=s[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=R5([r,n]),c=uu(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(Yv(Kv(0,a-1).map(function(){return 1/0}))):[].concat(Yv(Kv(0,a-1).map(function(){return-1/0})),[u]);return r>n?Wv(m):m}if(d===u)return Cme(d,a,i);var h=I5(d,u,l,i),x=h.step,g=h.tickMin,p=h.tickMax,f=gf.rangeStep(g,p.add(new ns(.1).mul(x)),x);return r>n?Wv(f):f}function kme(t,s){var r=uu(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=R5([n,a]),o=uu(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var u=Math.max(s,2),m=_5(new ns(d).sub(c).div(u-1),i,0),h=[].concat(Yv(gf.rangeStep(new ns(c),new ns(d).sub(new ns(.99).mul(m)),m)),[d]);return n>a?Wv(h):h}var Ame=E5(Pme),Tme=E5(kme),Dme="Invariant failed";function Ol(t,s){throw new Error(Dme)}var Ome=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jo(t){"@babel/helpers - typeof";return Jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Jo(t)}function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dx.apply(this,arguments)}function Eme(t,s){return Ime(t)||_me(t,s)||Rme(t,s)||Mme()}function Mme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rme(t,s){if(t){if(typeof t=="string")return gC(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gC(t,s)}}function gC(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function _me(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Ime(t){if(Array.isArray(t))return t}function $me(t,s){if(t==null)return{};var r=Fme(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fme(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Lme(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Bme(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L5(n.key),n)}}function Vme(t,s,r){return s&&Bme(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function qme(t,s,r){return s=ux(s),Ume(t,$5()?Reflect.construct(s,r||[],ux(t).constructor):s.apply(t,r))}function Ume(t,s){if(s&&(Jo(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zme(t)}function zme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($5=function(){return!!t})()}function ux(t){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ux(t)}function Gme(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Xv(t,s)}function Xv(t,s){return Xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xv(t,s)}function F5(t,s,r){return s=L5(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function L5(t){var s=Hme(t,"string");return Jo(s)=="symbol"?s:s+""}function Hme(t,s){if(Jo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Jo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pm=function(t){function s(){return Lme(this,s),qme(this,s,arguments)}return Gme(s,t),Vme(s,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,l=n.width,o=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,m=n.yAxis,h=$me(n,Ome),x=pt(h,!1);this.props.direction==="x"&&u.type!=="number"&&Ol();var g=c.map(function(p){var f=d(p,o),v=f.x,b=f.y,y=f.value,S=f.errorVal;if(!S)return null;var w=[],C,k;if(Array.isArray(S)){var A=Eme(S,2);C=A[0],k=A[1]}else C=k=S;if(i==="vertical"){var N=u.scale,M=b+a,F=M+l,I=M-l,V=N(y-C),E=N(y+k);w.push({x1:E,y1:F,x2:E,y2:I}),w.push({x1:V,y1:M,x2:E,y2:M}),w.push({x1:V,y1:F,x2:V,y2:I})}else if(i==="horizontal"){var G=m.scale,Y=v+a,Q=Y-l,T=Y+l,B=G(y-C),W=G(y+k);w.push({x1:Q,y1:W,x2:T,y2:W}),w.push({x1:Y,y1:B,x2:Y,y2:W}),w.push({x1:Q,y1:B,x2:T,y2:B})}return X.createElement(qt,dx({className:"recharts-errorBar",key:"bar-".concat(w.map(function(he){return"".concat(he.x1,"-").concat(he.x2,"-").concat(he.y1,"-").concat(he.y2)}))},x),w.map(function(he){return X.createElement("line",dx({},he,{key:"line-".concat(he.x1,"-").concat(he.x2,"-").concat(he.y1,"-").concat(he.y2)}))}))});return X.createElement(qt,{className:"recharts-errorBars"},g)}}])}(X.Component);F5(pm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});F5(pm,"displayName","ErrorBar");function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},mu(t)}function jC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ki(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?jC(Object(r),!0).forEach(function(n){Kme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kme(t,s,r){return s=Wme(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Wme(t){var s=Yme(t,"string");return mu(s)=="symbol"?s:s+""}function Yme(t,s){if(mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var B5=function(s){var r=s.children,n=s.formattedGraphicalItems,a=s.legendWidth,i=s.legendContent,l=qr(r,$a);if(!l)return null;var o=$a.defaultProps,c=o!==void 0?Ki(Ki({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(n||[]).reduce(function(u,m){var h=m.item,x=m.props,g=x.sectors||x.data||[];return u.concat(g.map(function(p){return{type:l.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(n||[]).map(function(u){var m=u.item,h=m.type.defaultProps,x=h!==void 0?Ki(Ki({},h),m.props):{},g=x.dataKey,p=x.name,f=x.legendType,v=x.hide;return{inactive:v,dataKey:g,type:c.iconType||f||"square",color:NN(m),value:p||g,payload:x}}),Ki(Ki(Ki({},c),$a.getWithHeight(l,a)),{},{payload:d,item:l})};function hu(t){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hu(t)}function vC(t){return Jme(t)||Zme(t)||Xme(t)||Qme()}function Qme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xme(t,s){if(t){if(typeof t=="string")return Zv(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zv(t,s)}}function Zme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jme(t){if(Array.isArray(t))return Zv(t)}function Zv(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function yC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ms(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?yC(Object(r),!0).forEach(function(n){ko(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ko(t,s,r){return s=ehe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function ehe(t){var s=the(t,"string");return hu(s)=="symbol"?s:s+""}function the(t,s){if(hu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function rr(t,s,r){return kt(t)||kt(s)?r:nr(s)?Qr(t,s,r):bt(s)?s(t):r}function Nd(t,s,r,n){var a=Zue(t,function(o){return rr(o,s)});if(r==="number"){var i=a.filter(function(o){return Fe(o)||parseFloat(o)});return i.length?[pf(i),xf(i)]:[1/0,-1/0]}var l=n?a.filter(function(o){return!kt(o)}):a;return l.map(function(o){return nr(o)||o instanceof Date?o:""})}var she=function(s){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(r=n?.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,m=a[d].coordinate,h=d>=o-1?a[0].coordinate:a[d+1].coordinate,x=void 0;if(kr(m-u)!==kr(h-m)){var g=[];if(kr(h-m)===kr(c[1]-c[0])){x=h;var p=m+c[1]-c[0];g[0]=Math.min(p,(p+u)/2),g[1]=Math.max(p,(p+u)/2)}else{x=u;var f=h+c[1]-c[0];g[0]=Math.min(m,(f+m)/2),g[1]=Math.max(m,(f+m)/2)}var v=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(s>v[0]&&s<=v[1]||s>=g[0]&&s<=g[1]){l=a[d].index;break}}else{var b=Math.min(u,h),y=Math.max(u,h);if(s>(b+m)/2&&s<=(y+m)/2){l=a[d].index;break}}}else for(var S=0;S<o;S++)if(S===0&&s<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<o-1&&s>(n[S].coordinate+n[S-1].coordinate)/2&&s<=(n[S].coordinate+n[S+1].coordinate)/2||S===o-1&&s>(n[S].coordinate+n[S-1].coordinate)/2){l=n[S].index;break}return l},NN=function(s){var r,n=s,a=n.type.displayName,i=(r=s.type)!==null&&r!==void 0&&r.defaultProps?Ms(Ms({},s.type.defaultProps),s.props):s.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},rhe=function(s){var r=s.barSize,n=s.totalSize,a=s.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,m=Object.keys(u),h=0,x=m.length;h<x;h++){var g=u[m[h]],p=g.items,f=g.cateAxisId,v=p.filter(function(k){return Ia(k.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,y=b!==void 0?Ms(Ms({},b),v[0].props):v[0].props,S=y.barSize,w=y[f];l[w]||(l[w]=[]);var C=kt(S)?r:S;l[w].push({item:v[0],stackList:v.slice(1),barSize:kt(C)?void 0:Ar(C,n,0)})}}return l},nhe=function(s){var r=s.barGap,n=s.barCategoryGap,a=s.bandSize,i=s.sizeList,l=i===void 0?[]:i,o=s.maxBarSize,c=l.length;if(c<1)return null;var d=Ar(r,a,0,!0),u,m=[];if(l[0].barSize===+l[0].barSize){var h=!1,x=a/c,g=l.reduce(function(S,w){return S+w.barSize||0},0);g+=(c-1)*d,g>=a&&(g-=(c-1)*d,d=0),g>=a&&x>0&&(h=!0,x*=.9,g=c*x);var p=(a-g)/2>>0,f={offset:p-d,size:0};u=l.reduce(function(S,w){var C={item:w.item,position:{offset:f.offset+f.size+d,size:h?x:w.barSize}},k=[].concat(vC(S),[C]);return f=k[k.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){k.push({item:A,position:f})}),k},m)}else{var v=Ar(n,a,0,!0);a-2*v-(c-1)*d<=0&&(d=0);var b=(a-2*v-(c-1)*d)/c;b>1&&(b>>=0);var y=o===+o?Math.min(b,o):b;u=l.reduce(function(S,w,C){var k=[].concat(vC(S),[{item:w.item,position:{offset:v+(b+d)*C+(b-y)/2,size:y}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(A){k.push({item:A,position:k[k.length-1].position})}),k},m)}return u},ahe=function(s,r,n,a){var i=n.children,l=n.width,o=n.margin,c=l-(o.left||0)-(o.right||0),d=B5({children:i,legendWidth:c});if(d){var u=a||{},m=u.width,h=u.height,x=d.align,g=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&x!=="center"&&Fe(s[x]))return Ms(Ms({},s),{},ko({},x,s[x]+(m||0)));if((p==="horizontal"||p==="vertical"&&x==="center")&&g!=="middle"&&Fe(s[g]))return Ms(Ms({},s),{},ko({},g,s[g]+(h||0)))}return s},ihe=function(s,r,n){return kt(r)?!0:s==="horizontal"?r==="yAxis":s==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},V5=function(s,r,n,a,i){var l=r.props.children,o=Xr(l,pm).filter(function(d){return ihe(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return s.reduce(function(d,u){var m=rr(u,n);if(kt(m))return d;var h=Array.isArray(m)?[pf(m),xf(m)]:[m,m],x=c.reduce(function(g,p){var f=rr(u,p,0),v=h[0]-Math.abs(Array.isArray(f)?f[0]:f),b=h[1]+Math.abs(Array.isArray(f)?f[1]:f);return[Math.min(v,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},lhe=function(s,r,n,a,i){var l=r.map(function(o){return V5(s,o,n,i,a)}).filter(function(o){return!kt(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},q5=function(s,r,n,a,i){var l=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&V5(s,c,d,a)||Nd(s,d,n,i)});if(n==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},U5=function(s,r){return s==="horizontal"&&r==="xAxis"||s==="vertical"&&r==="yAxis"||s==="centric"&&r==="angleAxis"||s==="radial"&&r==="radiusAxis"},z5=function(s,r,n,a){if(a)return s.map(function(c){return c.coordinate});var i,l,o=s.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(l=!0),c.coordinate});return i||o.push(r),l||o.push(n),o},Ra=function(s,r,n){if(!s)return null;var a=s.scale,i=s.duplicateDomain,l=s.type,o=s.range,c=s.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||n)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=s.axisType==="angleAxis"&&o?.length>=2?kr(o[0]-o[1])*2*d:d,r&&(s.ticks||s.niceTicks)){var u=(s.ticks||s.niceTicks).map(function(m){var h=i?i.indexOf(m):m;return{coordinate:a(h)+d,value:m,offset:d}});return u.filter(function(m){return!om(m.coordinate)})}return s.isCategorical&&s.categoricalDomain?s.categoricalDomain.map(function(m,h){return{coordinate:a(m)+d,value:m,index:h,offset:d}}):a.ticks&&!n?a.ticks(s.tickCount).map(function(m){return{coordinate:a(m)+d,value:m,offset:d}}):a.domain().map(function(m,h){return{coordinate:a(m)+d,value:i?i[m]:m,index:h,offset:d}})},Yg=new WeakMap,Vm=function(s,r){if(typeof r!="function")return s;Yg.has(s)||Yg.set(s,new WeakMap);var n=Yg.get(s);if(n.has(r))return n.get(r);var a=function(){s.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},G5=function(s,r,n){var a=s.scale,i=s.type,l=s.layout,o=s.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:au(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:ax(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:bd(),realScaleType:"point"}:i==="category"?{scale:au(),realScaleType:"band"}:{scale:ax(),realScaleType:"linear"};if(kl(a)){var c="scale".concat(Jp(a));return{scale:(hC[c]||bd)(),realScaleType:hC[c]?c:"point"}}return bt(a)?{scale:a}:{scale:bd(),realScaleType:"point"}},bC=1e-4,H5=function(s){var r=s.domain();if(!(!r||r.length<=2)){var n=r.length,a=s.range(),i=Math.min(a[0],a[1])-bC,l=Math.max(a[0],a[1])+bC,o=s(r[0]),c=s(r[n-1]);(o<i||o>l||c<i||c>l)&&s.domain([r[0],r[n-1]])}},ohe=function(s,r){if(!s)return null;for(var n=0,a=s.length;n<a;n++)if(s[n].item===r)return s[n].position;return null},che=function(s,r){if(!r||r.length!==2||!Fe(r[0])||!Fe(r[1]))return s;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[s[0],s[1]];return(!Fe(s[0])||s[0]<n)&&(i[0]=n),(!Fe(s[1])||s[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},dhe=function(s){var r=s.length;if(!(r<=0))for(var n=0,a=s[0].length;n<a;++n)for(var i=0,l=0,o=0;o<r;++o){var c=om(s[o][n][1])?s[o][n][0]:s[o][n][1];c>=0?(s[o][n][0]=i,s[o][n][1]=i+c,i=s[o][n][1]):(s[o][n][0]=l,s[o][n][1]=l+c,l=s[o][n][1])}},uhe=function(s){var r=s.length;if(!(r<=0))for(var n=0,a=s[0].length;n<a;++n)for(var i=0,l=0;l<r;++l){var o=om(s[l][n][1])?s[l][n][0]:s[l][n][1];o>=0?(s[l][n][0]=i,s[l][n][1]=i+o,i=s[l][n][1]):(s[l][n][0]=0,s[l][n][1]=0)}},mhe={sign:dhe,expand:OJ,none:zo,silhouette:EJ,wiggle:MJ,positive:uhe},hhe=function(s,r,n){var a=r.map(function(o){return o.props.dataKey}),i=mhe[n],l=DJ().keys(a).value(function(o,c){return+rr(o,c,0)}).order(wv).offset(i);return l(s)},xhe=function(s,r,n,a,i,l){if(!s)return null;var o=l?r.reverse():r,c={},d=o.reduce(function(m,h){var x,g=(x=h.type)!==null&&x!==void 0&&x.defaultProps?Ms(Ms({},h.type.defaultProps),h.props):h.props,p=g.stackId,f=g.hide;if(f)return m;var v=g[n],b=m[v]||{hasStack:!1,stackGroups:{}};if(nr(p)){var y=b.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};y.items.push(h),b.hasStack=!0,b.stackGroups[p]=y}else b.stackGroups[$c("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Ms(Ms({},m),{},ko({},v,b))},c),u={};return Object.keys(d).reduce(function(m,h){var x=d[h];if(x.hasStack){var g={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(p,f){var v=x.stackGroups[f];return Ms(Ms({},p),{},ko({},f,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:hhe(s,v.items,i)}))},g)}return Ms(Ms({},m),{},ko({},h,x))},u)},K5=function(s,r){var n=r.realScaleType,a=r.type,i=r.tickCount,l=r.originalDomain,o=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=s.domain();if(!d.length)return null;var u=Ame(d,i,o);return s.domain([pf(u),xf(u)]),{niceTicks:u}}if(i&&a==="number"){var m=s.domain(),h=Tme(m,i,o);return{niceTicks:h}}return null};function NC(t){var s=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,l=t.dataKey;if(s.type==="category"){if(!s.allowDuplicatedCategory&&s.dataKey&&!kt(a[s.dataKey])){var o=Fh(r,"value",a[s.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=rr(a,kt(l)?s.dataKey:l);return kt(c)?null:s.scale(c)}var wC=function(s){var r=s.axis,n=s.ticks,a=s.offset,i=s.bandSize,l=s.entry,o=s.index;if(r.type==="category")return n[o]?n[o].coordinate+a:null;var c=rr(l,r.dataKey,r.domain[o]);return kt(c)?null:r.scale(c)-i/2+a},phe=function(s){var r=s.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},fhe=function(s,r){var n,a=(n=s.type)!==null&&n!==void 0&&n.defaultProps?Ms(Ms({},s.type.defaultProps),s.props):s.props,i=a.stackId;if(nr(i)){var l=r[i];if(l){var o=l.items.indexOf(s);return o>=0?l.stackedData[o]:null}}return null},ghe=function(s){return s.reduce(function(r,n){return[pf(n.concat([r[0]]).filter(Fe)),xf(n.concat([r[1]]).filter(Fe))]},[1/0,-1/0])},W5=function(s,r,n){return Object.keys(s).reduce(function(a,i){var l=s[i],o=l.stackedData,c=o.reduce(function(d,u){var m=ghe(u.slice(r,n+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},SC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Jv=function(s,r,n){if(bt(s))return s(r,n);if(!Array.isArray(s))return r;var a=[];if(Fe(s[0]))a[0]=n?s[0]:Math.min(s[0],r[0]);else if(SC.test(s[0])){var i=+SC.exec(s[0])[1];a[0]=r[0]-i}else bt(s[0])?a[0]=s[0](r[0]):a[0]=r[0];if(Fe(s[1]))a[1]=n?s[1]:Math.max(s[1],r[1]);else if(CC.test(s[1])){var l=+CC.exec(s[1])[1];a[1]=r[1]+l}else bt(s[1])?a[1]=s[1](r[1]):a[1]=r[1];return a},mx=function(s,r,n){if(s&&s.scale&&s.scale.bandwidth){var a=s.scale.bandwidth();if(!n||a>0)return a}if(s&&r&&r.length>=2){for(var i=Qb(r,function(m){return m.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return n?void 0:0},PC=function(s,r,n){return!s||!s.length||xm(s,Qr(n,"type.defaultProps.domain"))?r:s},Y5=function(s,r){var n=s.type.defaultProps?Ms(Ms({},s.type.defaultProps),s.props):s.props,a=n.dataKey,i=n.name,l=n.unit,o=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return Ms(Ms({},pt(s,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:NN(s),value:rr(r,a),type:c,payload:r,chartType:d,hide:u})};function xu(t){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xu(t)}function kC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Aa(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?kC(Object(r),!0).forEach(function(n){Q5(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q5(t,s,r){return s=jhe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function jhe(t){var s=vhe(t,"string");return xu(s)=="symbol"?s:s+""}function vhe(t,s){if(xu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function yhe(t,s){return She(t)||whe(t,s)||Nhe(t,s)||bhe()}function bhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nhe(t,s){if(t){if(typeof t=="string")return AC(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AC(t,s)}}function AC(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function whe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function She(t){if(Array.isArray(t))return t}var hx=Math.PI/180,Che=function(s){return s*180/Math.PI},gs=function(s,r,n,a){return{x:s+Math.cos(-hx*a)*n,y:r+Math.sin(-hx*a)*n}},X5=function(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(s-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Phe=function(s,r,n,a,i){var l=s.width,o=s.height,c=s.startAngle,d=s.endAngle,u=Ar(s.cx,l,l/2),m=Ar(s.cy,o,o/2),h=X5(l,o,n),x=Ar(s.innerRadius,h,0),g=Ar(s.outerRadius,h,h*.8),p=Object.keys(r);return p.reduce(function(f,v){var b=r[v],y=b.domain,S=b.reversed,w;if(kt(b.range))a==="angleAxis"?w=[c,d]:a==="radiusAxis"&&(w=[x,g]),S&&(w=[w[1],w[0]]);else{w=b.range;var C=w,k=yhe(C,2);c=k[0],d=k[1]}var A=G5(b,i),N=A.realScaleType,M=A.scale;M.domain(y).range(w),H5(M);var F=K5(M,Aa(Aa({},b),{},{realScaleType:N})),I=Aa(Aa(Aa({},b),F),{},{range:w,radius:g,realScaleType:N,scale:M,cx:u,cy:m,innerRadius:x,outerRadius:g,startAngle:c,endAngle:d});return Aa(Aa({},f),{},Q5({},v,I))},{})},khe=function(s,r){var n=s.x,a=s.y,i=r.x,l=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-l,2))},Ahe=function(s,r){var n=s.x,a=s.y,i=r.cx,l=r.cy,o=khe({x:n,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(n-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:Che(d),angleInRadian:d}},The=function(s){var r=s.startAngle,n=s.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(a,i);return{startAngle:r-l*360,endAngle:n-l*360}},Dhe=function(s,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),l=Math.floor(a/360),o=Math.min(i,l);return s+o*360},TC=function(s,r){var n=s.x,a=s.y,i=Ahe({x:n,y:a},r),l=i.radius,o=i.angle,c=r.innerRadius,d=r.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=The(r),m=u.startAngle,h=u.endAngle,x=o,g;if(m<=h){for(;x>h;)x-=360;for(;x<m;)x+=360;g=x>=m&&x<=h}else{for(;x>m;)x-=360;for(;x<h;)x+=360;g=x>=h&&x<=m}return g?Aa(Aa({},r),{},{radius:l,angle:Dhe(x,r)}):null},Z5=function(s){return!j.isValidElement(s)&&!bt(s)&&typeof s!="boolean"?s.className:""};function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},pu(t)}var Ohe=["offset"];function Ehe(t){return Ihe(t)||_he(t)||Rhe(t)||Mhe()}function Mhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rhe(t,s){if(t){if(typeof t=="string")return ey(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ey(t,s)}}function _he(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ihe(t){if(Array.isArray(t))return ey(t)}function ey(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function $he(t,s){if(t==null)return{};var r=Fhe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fhe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function DC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?DC(Object(r),!0).forEach(function(n){Lhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lhe(t,s,r){return s=Bhe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Bhe(t){var s=Vhe(t,"string");return pu(s)=="symbol"?s:s+""}function Vhe(t,s){if(pu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fu.apply(this,arguments)}var qhe=function(s){var r=s.value,n=s.formatter,a=kt(s.children)?r:s.children;return bt(n)?n(a):a},Uhe=function(s,r){var n=kr(r-s),a=Math.min(Math.abs(r-s),360);return n*a},zhe=function(s,r,n){var a=s.position,i=s.viewBox,l=s.offset,o=s.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,h=c.outerRadius,x=c.startAngle,g=c.endAngle,p=c.clockWise,f=(m+h)/2,v=Uhe(x,g),b=v>=0?1:-1,y,S;a==="insideStart"?(y=x+b*l,S=p):a==="insideEnd"?(y=g-b*l,S=!p):a==="end"&&(y=g+b*l,S=p),S=v<=0?S:!S;var w=gs(d,u,f,y),C=gs(d,u,f,y+(S?1:-1)*359),k="M".concat(w.x,",").concat(w.y,`
    A`).concat(f,",").concat(f,",0,1,").concat(S?0:1,`,
    `).concat(C.x,",").concat(C.y),A=kt(s.id)?$c("recharts-radial-line-"):s.id;return X.createElement("text",fu({},n,{dominantBaseline:"central",className:At("recharts-radial-bar-label",o)}),X.createElement("defs",null,X.createElement("path",{id:A,d:k})),X.createElement("textPath",{xlinkHref:"#".concat(A)},r))},Ghe=function(s){var r=s.viewBox,n=s.offset,a=s.position,i=r,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,m=i.endAngle,h=(u+m)/2;if(a==="outside"){var x=gs(l,o,d+n,h),g=x.x,p=x.y;return{x:g,y:p,textAnchor:g>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var f=(c+d)/2,v=gs(l,o,f,h),b=v.x,y=v.y;return{x:b,y,textAnchor:"middle",verticalAnchor:"middle"}},Hhe=function(s){var r=s.viewBox,n=s.parentViewBox,a=s.offset,i=s.position,l=r,o=l.x,c=l.y,d=l.width,u=l.height,m=u>=0?1:-1,h=m*a,x=m>0?"end":"start",g=m>0?"start":"end",p=d>=0?1:-1,f=p*a,v=p>0?"end":"start",b=p>0?"start":"end";if(i==="top"){var y={x:o+d/2,y:c-m*a,textAnchor:"middle",verticalAnchor:x};return tr(tr({},y),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var S={x:o+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:g};return tr(tr({},S),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(i==="left"){var w={x:o-f,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return tr(tr({},w),n?{width:Math.max(w.x-n.x,0),height:u}:{})}if(i==="right"){var C={x:o+d+f,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return tr(tr({},C),n?{width:Math.max(n.x+n.width-C.x,0),height:u}:{})}var k=n?{width:d,height:u}:{};return i==="insideLeft"?tr({x:o+f,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},k):i==="insideRight"?tr({x:o+d-f,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},k):i==="insideTop"?tr({x:o+d/2,y:c+h,textAnchor:"middle",verticalAnchor:g},k):i==="insideBottom"?tr({x:o+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:x},k):i==="insideTopLeft"?tr({x:o+f,y:c+h,textAnchor:b,verticalAnchor:g},k):i==="insideTopRight"?tr({x:o+d-f,y:c+h,textAnchor:v,verticalAnchor:g},k):i==="insideBottomLeft"?tr({x:o+f,y:c+u-h,textAnchor:b,verticalAnchor:x},k):i==="insideBottomRight"?tr({x:o+d-f,y:c+u-h,textAnchor:v,verticalAnchor:x},k):Mc(i)&&(Fe(i.x)||ll(i.x))&&(Fe(i.y)||ll(i.y))?tr({x:o+Ar(i.x,d),y:c+Ar(i.y,u),textAnchor:"end",verticalAnchor:"end"},k):tr({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},Khe=function(s){return"cx"in s&&Fe(s.cx)};function cr(t){var s=t.offset,r=s===void 0?5:s,n=$he(t,Ohe),a=tr({offset:r},n),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,m=u===void 0?"":u,h=a.textBreakAll;if(!i||kt(o)&&kt(c)&&!j.isValidElement(d)&&!bt(d))return null;if(j.isValidElement(d))return j.cloneElement(d,a);var x;if(bt(d)){if(x=j.createElement(d,a),j.isValidElement(x))return x}else x=qhe(a);var g=Khe(i),p=pt(a,!0);if(g&&(l==="insideStart"||l==="insideEnd"||l==="end"))return zhe(a,x,p);var f=g?Ghe(a):Hhe(a);return X.createElement(Tl,fu({className:At("recharts-label",m)},p,f,{breakAll:h}),x)}cr.displayName="Label";var J5=function(s){var r=s.cx,n=s.cy,a=s.angle,i=s.startAngle,l=s.endAngle,o=s.r,c=s.radius,d=s.innerRadius,u=s.outerRadius,m=s.x,h=s.y,x=s.top,g=s.left,p=s.width,f=s.height,v=s.clockWise,b=s.labelViewBox;if(b)return b;if(Fe(p)&&Fe(f)){if(Fe(m)&&Fe(h))return{x:m,y:h,width:p,height:f};if(Fe(x)&&Fe(g))return{x,y:g,width:p,height:f}}return Fe(m)&&Fe(h)?{x:m,y:h,width:0,height:0}:Fe(r)&&Fe(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:v}:s.viewBox?s.viewBox:{}},Whe=function(s,r){return s?s===!0?X.createElement(cr,{key:"label-implicit",viewBox:r}):nr(s)?X.createElement(cr,{key:"label-implicit",viewBox:r,value:s}):j.isValidElement(s)?s.type===cr?j.cloneElement(s,{key:"label-implicit",viewBox:r}):X.createElement(cr,{key:"label-implicit",content:s,viewBox:r}):bt(s)?X.createElement(cr,{key:"label-implicit",content:s,viewBox:r}):Mc(s)?X.createElement(cr,fu({viewBox:r},s,{key:"label-implicit"})):null:null},Yhe=function(s,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!s||!s.children&&n&&!s.label)return null;var a=s.children,i=J5(s),l=Xr(a,cr).map(function(c,d){return j.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return l;var o=Whe(s.label,r||i);return[o].concat(Ehe(l))};cr.parseViewBox=J5;cr.renderCallByParent=Yhe;function Qhe(t){var s=t==null?0:t.length;return s?t[s-1]:void 0}var Xhe=Qhe;const Zhe=ls(Xhe);function gu(t){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},gu(t)}var Jhe=["valueAccessor"],exe=["data","dataKey","clockWise","id","textBreakAll"];function txe(t){return axe(t)||nxe(t)||rxe(t)||sxe()}function sxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rxe(t,s){if(t){if(typeof t=="string")return ty(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ty(t,s)}}function nxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function axe(t){if(Array.isArray(t))return ty(t)}function ty(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function xx(){return xx=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xx.apply(this,arguments)}function OC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EC(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?OC(Object(r),!0).forEach(function(n){ixe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ixe(t,s,r){return s=lxe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function lxe(t){var s=oxe(t,"string");return gu(s)=="symbol"?s:s+""}function oxe(t,s){if(gu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function MC(t,s){if(t==null)return{};var r=cxe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cxe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var dxe=function(s){return Array.isArray(s.value)?Zhe(s.value):s.value};function La(t){var s=t.valueAccessor,r=s===void 0?dxe:s,n=MC(t,Jhe),a=n.data,i=n.dataKey,l=n.clockWise,o=n.id,c=n.textBreakAll,d=MC(n,exe);return!a||!a.length?null:X.createElement(qt,{className:"recharts-label-list"},a.map(function(u,m){var h=kt(i)?r(u,m):rr(u&&u.payload,i),x=kt(o)?{}:{id:"".concat(o,"-").concat(m)};return X.createElement(cr,xx({},pt(u,!0),d,x,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:cr.parseViewBox(kt(l)?u:EC(EC({},u),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}La.displayName="LabelList";function uxe(t,s){return t?t===!0?X.createElement(La,{key:"labelList-implicit",data:s}):X.isValidElement(t)||bt(t)?X.createElement(La,{key:"labelList-implicit",data:s,content:t}):Mc(t)?X.createElement(La,xx({data:s},t,{key:"labelList-implicit"})):null:null}function mxe(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Xr(n,La).map(function(l,o){return j.cloneElement(l,{data:s,key:"labelList-".concat(o)})});if(!r)return a;var i=uxe(t.label,s);return[i].concat(txe(a))}La.renderCallByParent=mxe;function ju(t){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ju(t)}function sy(){return sy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sy.apply(this,arguments)}function RC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _C(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?RC(Object(r),!0).forEach(function(n){hxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hxe(t,s,r){return s=xxe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function xxe(t){var s=pxe(t,"string");return ju(s)=="symbol"?s:s+""}function pxe(t,s){if(ju(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var fxe=function(s,r){var n=kr(r-s),a=Math.min(Math.abs(r-s),359.999);return n*a},qm=function(s){var r=s.cx,n=s.cy,a=s.radius,i=s.angle,l=s.sign,o=s.isExternal,c=s.cornerRadius,d=s.cornerIsExternal,u=c*(o?1:-1)+a,m=Math.asin(c/u)/hx,h=d?i:i+l*m,x=gs(r,n,u,h),g=gs(r,n,a,h),p=d?i-l*m:i,f=gs(r,n,u*Math.cos(m*hx),p);return{center:x,circleTangency:g,lineTangency:f,theta:m}},e6=function(s){var r=s.cx,n=s.cy,a=s.innerRadius,i=s.outerRadius,l=s.startAngle,o=s.endAngle,c=fxe(l,o),d=l+c,u=gs(r,n,i,l),m=gs(r,n,i,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var x=gs(r,n,a,l),g=gs(r,n,a,d);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},gxe=function(s){var r=s.cx,n=s.cy,a=s.innerRadius,i=s.outerRadius,l=s.cornerRadius,o=s.forceCornerRadius,c=s.cornerIsExternal,d=s.startAngle,u=s.endAngle,m=kr(u-d),h=qm({cx:r,cy:n,radius:i,angle:d,sign:m,cornerRadius:l,cornerIsExternal:c}),x=h.circleTangency,g=h.lineTangency,p=h.theta,f=qm({cx:r,cy:n,radius:i,angle:u,sign:-m,cornerRadius:l,cornerIsExternal:c}),v=f.circleTangency,b=f.lineTangency,y=f.theta,S=c?Math.abs(d-u):Math.abs(d-u)-p-y;if(S<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):e6({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var w="M ".concat(g.x,",").concat(g.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var C=qm({cx:r,cy:n,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),k=C.circleTangency,A=C.lineTangency,N=C.theta,M=qm({cx:r,cy:n,radius:a,angle:u,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),F=M.circleTangency,I=M.lineTangency,V=M.theta,E=c?Math.abs(d-u):Math.abs(d-u)-N-V;if(E<0&&l===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(I.x,",").concat(I.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(E>180),",").concat(+(m>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},jxe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},t6=function(s){var r=_C(_C({},jxe),s),n=r.cx,a=r.cy,i=r.innerRadius,l=r.outerRadius,o=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,m=r.endAngle,h=r.className;if(l<i||u===m)return null;var x=At("recharts-sector",h),g=l-i,p=Ar(o,g,0,!0),f;return p>0&&Math.abs(u-m)<360?f=gxe({cx:n,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):f=e6({cx:n,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:m}),X.createElement("path",sy({},pt(r,!0),{className:x,d:f,role:"img"}))};function vu(t){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},vu(t)}function ry(){return ry=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ry.apply(this,arguments)}function IC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $C(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?IC(Object(r),!0).forEach(function(n){vxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vxe(t,s,r){return s=yxe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function yxe(t){var s=bxe(t,"string");return vu(s)=="symbol"?s:s+""}function bxe(t,s){if(vu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var FC={curveBasisClosed:vJ,curveBasisOpen:yJ,curveBasis:jJ,curveBumpX:nJ,curveBumpY:aJ,curveLinearClosed:bJ,curveLinear:tf,curveMonotoneX:NJ,curveMonotoneY:wJ,curveNatural:SJ,curveStep:CJ,curveStepAfter:kJ,curveStepBefore:PJ},Um=function(s){return s.x===+s.x&&s.y===+s.y},rd=function(s){return s.x},nd=function(s){return s.y},Nxe=function(s,r){if(bt(s))return s;var n="curve".concat(Jp(s));return(n==="curveMonotone"||n==="curveBump")&&r?FC["".concat(n).concat(r==="vertical"?"Y":"X")]:FC[n]||tf},wxe=function(s){var r=s.type,n=r===void 0?"linear":r,a=s.points,i=a===void 0?[]:a,l=s.baseLine,o=s.layout,c=s.connectNulls,d=c===void 0?!1:c,u=Nxe(n,o),m=d?i.filter(function(p){return Um(p)}):i,h;if(Array.isArray(l)){var x=d?l.filter(function(p){return Um(p)}):l,g=m.map(function(p,f){return $C($C({},p),{},{base:x[f]})});return o==="vertical"?h=Mm().y(nd).x1(rd).x0(function(p){return p.base.x}):h=Mm().x(rd).y1(nd).y0(function(p){return p.base.y}),h.defined(Um).curve(u),h(g)}return o==="vertical"&&Fe(l)?h=Mm().y(nd).x1(rd).x0(l):Fe(l)?h=Mm().x(rd).y1(nd).y0(l):h=YR().x(rd).y(nd),h.defined(Um).curve(u),h(m)},px=function(s){var r=s.className,n=s.points,a=s.path,i=s.pathRef;if((!n||!n.length)&&!a)return null;var l=n&&n.length?wxe(s):a;return j.createElement("path",ry({},pt(s,!1),Lh(s),{className:At("recharts-curve",r),d:l,ref:i}))},s6={exports:{}},Sxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cxe=Sxe,Pxe=Cxe;function r6(){}function n6(){}n6.resetWarningCache=r6;var kxe=function(){function t(n,a,i,l,o,c){if(c!==Pxe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n6,resetWarningCache:r6};return r.PropTypes=r,r};s6.exports=kxe();var Axe=s6.exports;const Xt=ls(Axe);var Txe=Object.getOwnPropertyNames,Dxe=Object.getOwnPropertySymbols,Oxe=Object.prototype.hasOwnProperty;function LC(t,s){return function(n,a,i){return t(n,a,i)&&s(n,a,i)}}function zm(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var i=a.cache,l=i.get(r),o=i.get(n);if(l&&o)return l===n&&o===r;i.set(r,n),i.set(n,r);var c=t(r,n,a);return i.delete(r),i.delete(n),c}}function BC(t){return Txe(t).concat(Dxe(t))}var Exe=Object.hasOwn||function(t,s){return Oxe.call(t,s)};function Ul(t,s){return t===s||!t&&!s&&t!==t&&s!==s}var Mxe="__v",Rxe="__o",_xe="_owner",VC=Object.getOwnPropertyDescriptor,qC=Object.keys;function Ixe(t,s,r){var n=t.length;if(s.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],s[n],n,n,t,s,r))return!1;return!0}function $xe(t,s){return Ul(t.getTime(),s.getTime())}function Fxe(t,s){return t.name===s.name&&t.message===s.message&&t.cause===s.cause&&t.stack===s.stack}function Lxe(t,s){return t===s}function UC(t,s,r){var n=t.size;if(n!==s.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=s.entries(),u=!1,m=0;(o=d.next())&&!o.done;){if(a[m]){m++;continue}var h=l.value,x=o.value;if(r.equals(h[0],x[0],c,m,t,s,r)&&r.equals(h[1],x[1],h[0],x[0],t,s,r)){u=a[m]=!0;break}m++}if(!u)return!1;c++}return!0}var Bxe=Ul;function Vxe(t,s,r){var n=qC(t),a=n.length;if(qC(s).length!==a)return!1;for(;a-- >0;)if(!a6(t,s,r,n[a]))return!1;return!0}function ad(t,s,r){var n=BC(t),a=n.length;if(BC(s).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=n[a],!a6(t,s,r,i)||(l=VC(t,i),o=VC(s,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function qxe(t,s){return Ul(t.valueOf(),s.valueOf())}function Uxe(t,s){return t.source===s.source&&t.flags===s.flags}function zC(t,s,r){var n=t.size;if(n!==s.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.values(),l,o;(l=i.next())&&!l.done;){for(var c=s.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&r.equals(l.value,o.value,l.value,o.value,t,s,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function zxe(t,s){var r=t.length;if(s.length!==r)return!1;for(;r-- >0;)if(t[r]!==s[r])return!1;return!0}function Gxe(t,s){return t.hostname===s.hostname&&t.pathname===s.pathname&&t.protocol===s.protocol&&t.port===s.port&&t.hash===s.hash&&t.username===s.username&&t.password===s.password}function a6(t,s,r,n){return(n===_xe||n===Rxe||n===Mxe)&&(t.$$typeof||s.$$typeof)?!0:Exe(s,n)&&r.equals(t[n],s[n],n,n,t,s,r)}var Hxe="[object Arguments]",Kxe="[object Boolean]",Wxe="[object Date]",Yxe="[object Error]",Qxe="[object Map]",Xxe="[object Number]",Zxe="[object Object]",Jxe="[object RegExp]",epe="[object Set]",tpe="[object String]",spe="[object URL]",rpe=Array.isArray,GC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,HC=Object.assign,npe=Object.prototype.toString.call.bind(Object.prototype.toString);function ape(t){var s=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,l=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,m=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(g,p,f){if(g===p)return!0;if(g==null||p==null)return!1;var v=typeof g;if(v!==typeof p)return!1;if(v!=="object")return v==="number"?l(g,p,f):v==="function"?a(g,p,f):!1;var b=g.constructor;if(b!==p.constructor)return!1;if(b===Object)return o(g,p,f);if(rpe(g))return s(g,p,f);if(GC!=null&&GC(g))return m(g,p,f);if(b===Date)return r(g,p,f);if(b===RegExp)return d(g,p,f);if(b===Map)return i(g,p,f);if(b===Set)return u(g,p,f);var y=npe(g);return y===Wxe?r(g,p,f):y===Jxe?d(g,p,f):y===Qxe?i(g,p,f):y===epe?u(g,p,f):y===Zxe?typeof g.then!="function"&&typeof p.then!="function"&&o(g,p,f):y===spe?h(g,p,f):y===Yxe?n(g,p,f):y===Hxe?o(g,p,f):y===Kxe||y===Xxe||y===tpe?c(g,p,f):!1}}function ipe(t){var s=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?ad:Ixe,areDatesEqual:$xe,areErrorsEqual:Fxe,areFunctionsEqual:Lxe,areMapsEqual:n?LC(UC,ad):UC,areNumbersEqual:Bxe,areObjectsEqual:n?ad:Vxe,arePrimitiveWrappersEqual:qxe,areRegExpsEqual:Uxe,areSetsEqual:n?LC(zC,ad):zC,areTypedArraysEqual:n?ad:zxe,areUrlsEqual:Gxe};if(r&&(a=HC({},a,r(a))),s){var i=zm(a.areArraysEqual),l=zm(a.areMapsEqual),o=zm(a.areObjectsEqual),c=zm(a.areSetsEqual);a=HC({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function lpe(t){return function(s,r,n,a,i,l,o){return t(s,r,o)}}function ope(t){var s=t.circular,r=t.comparator,n=t.createState,a=t.equals,i=t.strict;if(n)return function(c,d){var u=n(),m=u.cache,h=m===void 0?s?new WeakMap:void 0:m,x=u.meta;return r(c,d,{cache:h,equals:a,meta:x,strict:i})};if(s)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,l)}}var cpe=Ui();Ui({strict:!0});Ui({circular:!0});Ui({circular:!0,strict:!0});Ui({createInternalComparator:function(){return Ul}});Ui({strict:!0,createInternalComparator:function(){return Ul}});Ui({circular:!0,createInternalComparator:function(){return Ul}});Ui({circular:!0,createInternalComparator:function(){return Ul},strict:!0});function Ui(t){t===void 0&&(t={});var s=t.circular,r=s===void 0?!1:s,n=t.createInternalComparator,a=t.createState,i=t.strict,l=i===void 0?!1:i,o=ipe(t),c=ape(o),d=n?n(c):lpe(c);return ope({circular:r,comparator:c,createState:a,equals:d,strict:l})}function dpe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function KC(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>s?(t(i),r=-1):dpe(a)};requestAnimationFrame(n)}function ny(t){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ny(t)}function upe(t){return ppe(t)||xpe(t)||hpe(t)||mpe()}function mpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hpe(t,s){if(t){if(typeof t=="string")return WC(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WC(t,s)}}function WC(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function xpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ppe(t){if(Array.isArray(t))return t}function fpe(){var t={},s=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var l=i,o=upe(l),c=o[0],d=o.slice(1);if(typeof c=="number"){KC(a.bind(null,d),c);return}a(c),KC(a.bind(null,d));return}ny(i)==="object"&&(t=i,s(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return s=i,function(){s=function(){return null}}}}}function yu(t){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},yu(t)}function YC(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function QC(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?YC(Object(r),!0).forEach(function(n){i6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i6(t,s,r){return s=gpe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function gpe(t){var s=jpe(t,"string");return yu(s)==="symbol"?s:String(s)}function jpe(t,s){if(yu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(yu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var vpe=function(s,r){return[Object.keys(s),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},ype=function(s){return s},bpe=function(s){return s.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},wd=function(s,r){return Object.keys(r).reduce(function(n,a){return QC(QC({},n),{},i6({},a,s(a,r[a])))},{})},XC=function(s,r,n){return s.map(function(a){return"".concat(bpe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Npe(t,s){return Cpe(t)||Spe(t,s)||l6(t,s)||wpe()}function wpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Spe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Cpe(t){if(Array.isArray(t))return t}function Ppe(t){return Tpe(t)||Ape(t)||l6(t)||kpe()}function kpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l6(t,s){if(t){if(typeof t=="string")return ay(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ay(t,s)}}function Ape(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tpe(t){if(Array.isArray(t))return ay(t)}function ay(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var fx=1e-4,o6=function(s,r){return[0,3*s,3*r-6*s,3*s-3*r+1]},c6=function(s,r){return s.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},ZC=function(s,r){return function(n){var a=o6(s,r);return c6(a,n)}},Dpe=function(s,r){return function(n){var a=o6(s,r),i=[].concat(Ppe(a.map(function(l,o){return l*o}).slice(1)),[0]);return c6(i,n)}},JC=function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];var a=r[0],i=r[1],l=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(f){return parseFloat(f)}),u=Npe(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var m=ZC(a,l),h=ZC(i,o),x=Dpe(a,l),g=function(v){return v>1?1:v<0?0:v},p=function(v){for(var b=v>1?1:v,y=b,S=0;S<8;++S){var w=m(y)-b,C=x(y);if(Math.abs(w-b)<fx||C<fx)return h(y);y=g(y-w/C)}return h(y)};return p.isStepper=!1,p},Ope=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=s.stiff,n=r===void 0?100:r,a=s.damping,i=a===void 0?8:a,l=s.dt,o=l===void 0?17:l,c=function(u,m,h){var x=-(u-m)*n,g=h*i,p=h+(x-g)*o/1e3,f=h*o/1e3+u;return Math.abs(f-m)<fx&&Math.abs(p)<fx?[m,0]:[f,p]};return c.isStepper=!0,c.dt=o,c},Epe=function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JC(a);case"spring":return Ope();default:if(a.split("(")[0]==="cubic-bezier")return JC(a)}return typeof a=="function"?a:null};function bu(t){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},bu(t)}function eP(t){return _pe(t)||Rpe(t)||d6(t)||Mpe()}function Mpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _pe(t){if(Array.isArray(t))return ly(t)}function tP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?tP(Object(r),!0).forEach(function(n){iy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iy(t,s,r){return s=Ipe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Ipe(t){var s=$pe(t,"string");return bu(s)==="symbol"?s:String(s)}function $pe(t,s){if(bu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(bu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Fpe(t,s){return Vpe(t)||Bpe(t,s)||d6(t,s)||Lpe()}function Lpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d6(t,s){if(t){if(typeof t=="string")return ly(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ly(t,s)}}function ly(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Bpe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Vpe(t){if(Array.isArray(t))return t}var gx=function(s,r,n){return s+(r-s)*n},oy=function(s){var r=s.from,n=s.to;return r!==n},qpe=function t(s,r,n){var a=wd(function(i,l){if(oy(l)){var o=s(l.from,l.to,l.velocity),c=Fpe(o,2),d=c[0],u=c[1];return hr(hr({},l),{},{from:d,velocity:u})}return l},r);return n<1?wd(function(i,l){return oy(l)?hr(hr({},l),{},{velocity:gx(l.velocity,a[i].velocity,n),from:gx(l.from,a[i].from,n)}):l},r):t(s,a,n-1)};const Upe=function(t,s,r,n,a){var i=vpe(t,s),l=i.reduce(function(f,v){return hr(hr({},f),{},iy({},v,[t[v],s[v]]))},{}),o=i.reduce(function(f,v){return hr(hr({},f),{},iy({},v,{from:t[v],velocity:0,to:s[v]}))},{}),c=-1,d,u,m=function(){return null},h=function(){return wd(function(v,b){return b.from},o)},x=function(){return!Object.values(o).filter(oy).length},g=function(v){d||(d=v);var b=v-d,y=b/r.dt;o=qpe(r,o,y),a(hr(hr(hr({},t),s),h())),d=v,x()||(c=requestAnimationFrame(m))},p=function(v){u||(u=v);var b=(v-u)/n,y=wd(function(w,C){return gx.apply(void 0,eP(C).concat([r(b)]))},l);if(a(hr(hr(hr({},t),s),y)),b<1)c=requestAnimationFrame(m);else{var S=wd(function(w,C){return gx.apply(void 0,eP(C).concat([r(1)]))},l);a(hr(hr(hr({},t),s),S))}};return m=r.isStepper?g:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function ec(t){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ec(t)}var zpe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Gpe(t,s){if(t==null)return{};var r=Hpe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hpe(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Qg(t){return Qpe(t)||Ype(t)||Wpe(t)||Kpe()}function Kpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wpe(t,s){if(t){if(typeof t=="string")return cy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cy(t,s)}}function Ype(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qpe(t){if(Array.isArray(t))return cy(t)}function cy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function sP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cn(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?sP(Object(r),!0).forEach(function(n){xd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xd(t,s,r){return s=u6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Xpe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Zpe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u6(n.key),n)}}function Jpe(t,s,r){return s&&Zpe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function u6(t){var s=efe(t,"string");return ec(s)==="symbol"?s:String(s)}function efe(t,s){if(ec(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(ec(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function tfe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&dy(t,s)}function dy(t,s){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},dy(t,s)}function sfe(t){var s=rfe();return function(){var n=jx(t),a;if(s){var i=jx(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return uy(this,a)}}function uy(t,s){if(s&&(ec(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return my(t)}function my(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jx(t){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jx(t)}var ga=function(t){tfe(r,t);var s=sfe(r);function r(n,a){var i;Xpe(this,r),i=s.call(this,n,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,m=l.steps,h=l.children,x=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(my(i)),i.changeStyle=i.changeStyle.bind(my(i)),!o||x<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),uy(i);if(m&&m.length)i.state={style:m[0].style};else if(d){if(typeof h=="function")return i.state={style:d},uy(i);i.state={style:c?xd({},c,d):d}}else i.state={style:{}};return i}return Jpe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,m=i.from,h=this.state.style;if(o){if(!l){var x={style:c?xd({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(x);return}if(!(cpe(a.to,u)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||d?m:a.to;if(this.state&&h){var f={style:c?xd({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(f)}this.runAnimation(Cn(Cn({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,m=a.onAnimationEnd,h=a.onAnimationStart,x=Upe(l,o,Epe(d),c,this.changeStyle),g=function(){i.stopJSAnimation=x()};this.manager.start([h,u,g,c,m])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,m=d.duration,h=m===void 0?0:m,x=function(p,f,v){if(v===0)return p;var b=f.duration,y=f.easing,S=y===void 0?"ease":y,w=f.style,C=f.properties,k=f.onAnimationEnd,A=v>0?l[v-1]:f,N=C||Object.keys(w);if(typeof S=="function"||S==="spring")return[].concat(Qg(p),[i.runJSAnimation.bind(i,{from:A.style,to:w,duration:b,easing:S}),b]);var M=XC(N,b,S),F=Cn(Cn(Cn({},A.style),w),{},{transition:M});return[].concat(Qg(p),[F,b,k]).filter(ype)};return this.manager.start([c].concat(Qg(l.reduce(x,[u,Math.max(h,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=fpe());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,m=a.onAnimationEnd,h=a.steps,x=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=o?xd({},o,c):c,f=XC(Object.keys(p),l,d);g.start([u,i,Cn(Cn({},p),{},{transition:f}),l,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Gpe(a,zpe),d=j.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var m=function(x){var g=x.props,p=g.style,f=p===void 0?{}:p,v=g.className,b=j.cloneElement(x,Cn(Cn({},c),{},{style:Cn(Cn({},f),u),className:v}));return b};return d===1?m(j.Children.only(i)):X.createElement("div",null,j.Children.map(i,function(h){return m(h)}))}}]),r}(j.PureComponent);ga.displayName="Animate";ga.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ga.propTypes={from:Xt.oneOfType([Xt.object,Xt.string]),to:Xt.oneOfType([Xt.object,Xt.string]),attributeName:Xt.string,duration:Xt.number,begin:Xt.number,easing:Xt.oneOfType([Xt.string,Xt.func]),steps:Xt.arrayOf(Xt.shape({duration:Xt.number.isRequired,style:Xt.object.isRequired,easing:Xt.oneOfType([Xt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Xt.func]),properties:Xt.arrayOf("string"),onAnimationEnd:Xt.func})),children:Xt.oneOfType([Xt.node,Xt.func]),isActive:Xt.bool,canBegin:Xt.bool,onAnimationEnd:Xt.func,shouldReAnimate:Xt.bool,onAnimationStart:Xt.func,onAnimationReStart:Xt.func};function Nu(t){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Nu(t)}function vx(){return vx=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vx.apply(this,arguments)}function nfe(t,s){return ofe(t)||lfe(t,s)||ife(t,s)||afe()}function afe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ife(t,s){if(t){if(typeof t=="string")return rP(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rP(t,s)}}function rP(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function lfe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function ofe(t){if(Array.isArray(t))return t}function nP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?nP(Object(r),!0).forEach(function(n){cfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cfe(t,s,r){return s=dfe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function dfe(t){var s=ufe(t,"string");return Nu(s)=="symbol"?s:s+""}function ufe(t,s){if(Nu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var iP=function(s,r,n,a,i){var l=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,c=n>=0?1:-1,d=a>=0&&n>=0||a<0&&n<0?1:0,u;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],h=0,x=4;h<x;h++)m[h]=i[h]>l?l:i[h];u="M".concat(s,",").concat(r+o*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(s+c*m[0],",").concat(r)),u+="L ".concat(s+n-c*m[1],",").concat(r),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(s+n,",").concat(r+o*m[1])),u+="L ".concat(s+n,",").concat(r+a-o*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(s+n-c*m[2],",").concat(r+a)),u+="L ".concat(s+c*m[3],",").concat(r+a),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(s,",").concat(r+a-o*m[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var g=Math.min(l,i);u="M ".concat(s,",").concat(r+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(s+c*g,",").concat(r,`
            L `).concat(s+n-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(s+n,",").concat(r+o*g,`
            L `).concat(s+n,",").concat(r+a-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(s+n-c*g,",").concat(r+a,`
            L `).concat(s+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(s,",").concat(r+a-o*g," Z")}else u="M ".concat(s,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},mfe=function(s,r){if(!s||!r)return!1;var n=s.x,a=s.y,i=r.x,l=r.y,o=r.width,c=r.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),m=Math.min(l,l+c),h=Math.max(l,l+c);return n>=d&&n<=u&&a>=m&&a<=h}return!1},hfe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wN=function(s){var r=aP(aP({},hfe),s),n=j.useRef(),a=j.useState(-1),i=nfe(a,2),l=i[0],o=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&o(S)}catch{}},[]);var c=r.x,d=r.y,u=r.width,m=r.height,h=r.radius,x=r.className,g=r.animationEasing,p=r.animationDuration,f=r.animationBegin,v=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var y=At("recharts-rectangle",x);return b?X.createElement(ga,{canBegin:l>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:p,animationEasing:g,isActive:b},function(S){var w=S.width,C=S.height,k=S.x,A=S.y;return X.createElement(ga,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,isActive:v,easing:g},X.createElement("path",vx({},pt(r,!0),{className:y,d:iP(k,A,w,C,h),ref:n})))}):X.createElement("path",vx({},pt(r,!0),{className:y,d:iP(c,d,u,m,h)}))},xfe=["points","className","baseLinePoints","connectNulls"];function co(){return co=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},co.apply(this,arguments)}function pfe(t,s){if(t==null)return{};var r=ffe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ffe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lP(t){return yfe(t)||vfe(t)||jfe(t)||gfe()}function gfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jfe(t,s){if(t){if(typeof t=="string")return hy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hy(t,s)}}function vfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yfe(t){if(Array.isArray(t))return hy(t)}function hy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var oP=function(s){return s&&s.x===+s.x&&s.y===+s.y},bfe=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return s.forEach(function(n){oP(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),oP(s[0])&&r[r.length-1].push(s[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Sd=function(s,r){var n=bfe(s);r&&(n=[n.reduce(function(i,l){return[].concat(lP(i),lP(l))},[])]);var a=n.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Nfe=function(s,r,n){var a=Sd(s,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Sd(r.reverse(),n).slice(1))},wfe=function(s){var r=s.points,n=s.className,a=s.baseLinePoints,i=s.connectNulls,l=pfe(s,xfe);if(!r||!r.length)return null;var o=At("recharts-polygon",n);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=Nfe(r,a,i);return X.createElement("g",{className:o},X.createElement("path",co({},pt(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?X.createElement("path",co({},pt(l,!0),{fill:"none",d:Sd(r,i)})):null,c?X.createElement("path",co({},pt(l,!0),{fill:"none",d:Sd(a,i)})):null)}var u=Sd(r,i);return X.createElement("path",co({},pt(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function xy(){return xy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xy.apply(this,arguments)}var jf=function(s){var r=s.cx,n=s.cy,a=s.r,i=s.className,l=At("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",xy({},pt(s,!1),Lh(s),{className:l,cx:r,cy:n,r:a})):null};function wu(t){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},wu(t)}var Sfe=["x","y","top","left","width","height","className"];function py(){return py=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},py.apply(this,arguments)}function cP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cfe(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?cP(Object(r),!0).forEach(function(n){Pfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pfe(t,s,r){return s=kfe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function kfe(t){var s=Afe(t,"string");return wu(s)=="symbol"?s:s+""}function Afe(t,s){if(wu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Tfe(t,s){if(t==null)return{};var r=Dfe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Dfe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Ofe=function(s,r,n,a,i,l){return"M".concat(s,",").concat(i,"v").concat(a,"M").concat(l,",").concat(r,"h").concat(n)},Efe=function(s){var r=s.x,n=r===void 0?0:r,a=s.y,i=a===void 0?0:a,l=s.top,o=l===void 0?0:l,c=s.left,d=c===void 0?0:c,u=s.width,m=u===void 0?0:u,h=s.height,x=h===void 0?0:h,g=s.className,p=Tfe(s,Sfe),f=Cfe({x:n,y:i,top:o,left:d,width:m,height:x},p);return!Fe(n)||!Fe(i)||!Fe(m)||!Fe(x)||!Fe(o)||!Fe(d)?null:X.createElement("path",py({},pt(f,!0),{className:At("recharts-cross",g),d:Ofe(n,i,m,x,o,d)}))},Mfe=hf,Rfe=w5,_fe=Na;function Ife(t,s){return t&&t.length?Mfe(t,_fe(s),Rfe):void 0}var $fe=Ife;const Ffe=ls($fe);var Lfe=hf,Bfe=Na,Vfe=S5;function qfe(t,s){return t&&t.length?Lfe(t,Bfe(s),Vfe):void 0}var Ufe=qfe;const zfe=ls(Ufe);var Gfe=["cx","cy","angle","ticks","axisLine"],Hfe=["ticks","tick","angle","tickFormatter","stroke"];function tc(t){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tc(t)}function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cd.apply(this,arguments)}function dP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wi(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?dP(Object(r),!0).forEach(function(n){vf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uP(t,s){if(t==null)return{};var r=Kfe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Kfe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Wfe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function mP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h6(n.key),n)}}function Yfe(t,s,r){return s&&mP(t.prototype,s),r&&mP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qfe(t,s,r){return s=yx(s),Xfe(t,m6()?Reflect.construct(s,r||[],yx(t).constructor):s.apply(t,r))}function Xfe(t,s){if(s&&(tc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zfe(t)}function Zfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m6=function(){return!!t})()}function yx(t){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yx(t)}function Jfe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&fy(t,s)}function fy(t,s){return fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fy(t,s)}function vf(t,s,r){return s=h6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function h6(t){var s=ege(t,"string");return tc(s)=="symbol"?s:s+""}function ege(t,s){if(tc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yf=function(t){function s(){return Wfe(this,s),Qfe(this,s,arguments)}return Jfe(s,t),Yfe(s,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return gs(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.angle,o=n.ticks,c=Ffe(o,function(u){return u.coordinate||0}),d=zfe(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.angle,o=n.ticks,c=n.axisLine,d=uP(n,Gfe),u=o.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),m=gs(a,i,u[0],l),h=gs(a,i,u[1],l),x=Wi(Wi(Wi({},pt(d,!1)),{},{fill:"none"},pt(c,!1)),{},{x1:m.x,y1:m.y,x2:h.x,y2:h.y});return X.createElement("line",Cd({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=uP(a,Hfe),m=this.getTickTextAnchor(),h=pt(u,!1),x=pt(l,!1),g=i.map(function(p,f){var v=n.getTickValueCoord(p),b=Wi(Wi(Wi(Wi({textAnchor:m,transform:"rotate(".concat(90-o,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:d},x),{},{index:f},v),{},{payload:p});return X.createElement(qt,Cd({className:At("recharts-polar-radius-axis-tick",Z5(l)),key:"tick-".concat(p.coordinate)},Al(n.props,p,f)),s.renderTickItem(l,b,c?c(p.value,f):p.value))});return X.createElement(qt,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,l=n.tick;return!a||!a.length?null:X.createElement(qt,{className:At("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),cr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var l;return X.isValidElement(n)?l=X.cloneElement(n,a):bt(n)?l=n(a):l=X.createElement(Tl,Cd({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(j.PureComponent);vf(yf,"displayName","PolarRadiusAxis");vf(yf,"axisType","radiusAxis");vf(yf,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function sc(t){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sc(t)}function sl(){return sl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sl.apply(this,arguments)}function hP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yi(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?hP(Object(r),!0).forEach(function(n){bf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tge(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function xP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p6(n.key),n)}}function sge(t,s,r){return s&&xP(t.prototype,s),r&&xP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rge(t,s,r){return s=bx(s),nge(t,x6()?Reflect.construct(s,r||[],bx(t).constructor):s.apply(t,r))}function nge(t,s){if(s&&(sc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return age(t)}function age(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x6=function(){return!!t})()}function bx(t){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bx(t)}function ige(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&gy(t,s)}function gy(t,s){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gy(t,s)}function bf(t,s,r){return s=p6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function p6(t){var s=lge(t,"string");return sc(s)=="symbol"?s:s+""}function lge(t,s){if(sc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oge=Math.PI/180,pP=1e-5,Nf=function(t){function s(){return tge(this,s),rge(this,s,arguments)}return ige(s,t),sge(s,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,m=gs(i,l,o,n.coordinate),h=gs(i,l,o+(c==="inner"?-1:1)*u,n.coordinate);return{x1:m.x,y1:m.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*oge),l;return i>pP?l=a==="outer"?"start":"end":i<-pP?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.radius,o=n.axisLine,c=n.axisLineType,d=Yi(Yi({},pt(this.props,!1)),{},{fill:"none"},pt(o,!1));if(c==="circle")return X.createElement(jf,sl({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,m=u.map(function(h){return gs(a,i,l,h.coordinate)});return X.createElement(wfe,sl({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=pt(this.props,!1),m=pt(l,!1),h=Yi(Yi({},u),{},{fill:"none"},pt(o,!1)),x=i.map(function(g,p){var f=n.getTickLineCoord(g),v=n.getTickTextAnchor(g),b=Yi(Yi(Yi({textAnchor:v},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:g,x:f.x2,y:f.y2});return X.createElement(qt,sl({className:At("recharts-polar-angle-axis-tick",Z5(l)),key:"tick-".concat(g.coordinate)},Al(n.props,g,p)),o&&X.createElement("line",sl({className:"recharts-polar-angle-axis-tick-line"},h,f)),l&&s.renderTickItem(l,b,c?c(g.value,p):g.value))});return X.createElement(qt,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,l=n.axisLine;return i<=0||!a||!a.length?null:X.createElement(qt,{className:At("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var l;return X.isValidElement(n)?l=X.cloneElement(n,a):bt(n)?l=n(a):l=X.createElement(Tl,sl({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(j.PureComponent);bf(Nf,"displayName","PolarAngleAxis");bf(Nf,"axisType","angleAxis");bf(Nf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var cge=v_,dge=cge(Object.getPrototypeOf,Object),uge=dge,mge=Xa,hge=uge,xge=Za,pge="[object Object]",fge=Function.prototype,gge=Object.prototype,f6=fge.toString,jge=gge.hasOwnProperty,vge=f6.call(Object);function yge(t){if(!xge(t)||mge(t)!=pge)return!1;var s=hge(t);if(s===null)return!0;var r=jge.call(s,"constructor")&&s.constructor;return typeof r=="function"&&r instanceof r&&f6.call(r)==vge}var bge=yge;const Nge=ls(bge);var wge=Xa,Sge=Za,Cge="[object Boolean]";function Pge(t){return t===!0||t===!1||Sge(t)&&wge(t)==Cge}var kge=Pge;const Age=ls(kge);function Su(t){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Su(t)}function Nx(){return Nx=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nx.apply(this,arguments)}function Tge(t,s){return Mge(t)||Ege(t,s)||Oge(t,s)||Dge()}function Dge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oge(t,s){if(t){if(typeof t=="string")return fP(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fP(t,s)}}function fP(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function Ege(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Mge(t){if(Array.isArray(t))return t}function gP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?gP(Object(r),!0).forEach(function(n){Rge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rge(t,s,r){return s=_ge(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function _ge(t){var s=Ige(t,"string");return Su(s)=="symbol"?s:s+""}function Ige(t,s){if(Su(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var vP=function(s,r,n,a,i){var l=n-a,o;return o="M ".concat(s,",").concat(r),o+="L ".concat(s+n,",").concat(r),o+="L ".concat(s+n-l/2,",").concat(r+i),o+="L ".concat(s+n-l/2-a,",").concat(r+i),o+="L ".concat(s,",").concat(r," Z"),o},$ge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fge=function(s){var r=jP(jP({},$ge),s),n=j.useRef(),a=j.useState(-1),i=Tge(a,2),l=i[0],o=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&o(y)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,m=r.lowerWidth,h=r.height,x=r.className,g=r.animationEasing,p=r.animationDuration,f=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||h!==+h||u===0&&m===0||h===0)return null;var b=At("recharts-trapezoid",x);return v?X.createElement(ga,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:h,x:c,y:d},duration:p,animationEasing:g,isActive:v},function(y){var S=y.upperWidth,w=y.lowerWidth,C=y.height,k=y.x,A=y.y;return X.createElement(ga,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,easing:g},X.createElement("path",Nx({},pt(r,!0),{className:b,d:vP(k,A,S,w,C),ref:n})))}):X.createElement("g",null,X.createElement("path",Nx({},pt(r,!0),{className:b,d:vP(c,d,u,m,h)})))},Lge=["option","shapeType","propTransformer","activeClassName","isActive"];function Cu(t){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cu(t)}function Bge(t,s){if(t==null)return{};var r=Vge(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vge(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wx(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?yP(Object(r),!0).forEach(function(n){qge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qge(t,s,r){return s=Uge(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Uge(t){var s=zge(t,"string");return Cu(s)=="symbol"?s:s+""}function zge(t,s){if(Cu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Gge(t,s){return wx(wx({},s),t)}function Hge(t,s){return t==="symbols"}function bP(t){var s=t.shapeType,r=t.elementProps;switch(s){case"rectangle":return X.createElement(wN,r);case"trapezoid":return X.createElement(Fge,r);case"sector":return X.createElement(t6,r);case"symbols":if(Hge(s))return X.createElement(qb,r);break;default:return null}}function Kge(t){return j.isValidElement(t)?t.props:t}function g6(t){var s=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?Gge:n,i=t.activeClassName,l=i===void 0?"recharts-active-shape":i,o=t.isActive,c=Bge(t,Lge),d;if(j.isValidElement(s))d=j.cloneElement(s,wx(wx({},c),Kge(s)));else if(bt(s))d=s(c);else if(Nge(s)&&!Age(s)){var u=a(s,c);d=X.createElement(bP,{shapeType:r,elementProps:u})}else{var m=c;d=X.createElement(bP,{shapeType:r,elementProps:m})}return o?X.createElement(qt,{className:l},d):d}function wf(t,s){return s!=null&&"trapezoids"in t.props}function Sf(t,s){return s!=null&&"sectors"in t.props}function Pu(t,s){return s!=null&&"points"in t.props}function Wge(t,s){var r,n,a=t.x===(s==null||(r=s.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===s.x,i=t.y===(s==null||(n=s.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===s.y;return a&&i}function Yge(t,s){var r=t.endAngle===s.endAngle,n=t.startAngle===s.startAngle;return r&&n}function Qge(t,s){var r=t.x===s.x,n=t.y===s.y,a=t.z===s.z;return r&&n&&a}function Xge(t,s){var r;return wf(t,s)?r=Wge:Sf(t,s)?r=Yge:Pu(t,s)&&(r=Qge),r}function Zge(t,s){var r;return wf(t,s)?r="trapezoids":Sf(t,s)?r="sectors":Pu(t,s)&&(r="points"),r}function Jge(t,s){if(wf(t,s)){var r;return(r=s.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Sf(t,s)){var n;return(n=s.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Pu(t,s)?s.payload:{}}function eje(t){var s=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=Zge(r,s),i=Jge(r,s),l=n.filter(function(c,d){var u=xm(i,c),m=r.props[a].filter(function(g){var p=Xge(r,s);return p(g,s)}),h=r.props[a].indexOf(m[m.length-1]),x=d===h;return u&&x}),o=n.indexOf(l[l.length-1]);return o}var ch;function rc(t){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rc(t)}function uo(){return uo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uo.apply(this,arguments)}function NP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hs(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?NP(Object(r),!0).forEach(function(n){un(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tje(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function wP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v6(n.key),n)}}function sje(t,s,r){return s&&wP(t.prototype,s),r&&wP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rje(t,s,r){return s=Sx(s),nje(t,j6()?Reflect.construct(s,r||[],Sx(t).constructor):s.apply(t,r))}function nje(t,s){if(s&&(rc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aje(t)}function aje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j6=function(){return!!t})()}function Sx(t){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sx(t)}function ije(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&jy(t,s)}function jy(t,s){return jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jy(t,s)}function un(t,s,r){return s=v6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function v6(t){var s=lje(t,"string");return rc(s)=="symbol"?s:s+""}function lje(t,s){if(rc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hn=function(t){function s(r){var n;return tje(this,s),n=rje(this,s,[r]),un(n,"pieRef",null),un(n,"sectorRefs",[]),un(n,"id",$c("recharts-pie-")),un(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),bt(a)&&a()}),un(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),bt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return ije(s,t),sje(s,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=pt(this.props,!1),m=pt(l,!1),h=pt(o,!1),x=l&&l.offsetRadius||20,g=n.map(function(p,f){var v=(p.startAngle+p.endAngle)/2,b=gs(p.cx,p.cy,p.outerRadius+x,v),y=hs(hs(hs(hs({},u),p),{},{stroke:"none"},m),{},{index:f,textAnchor:s.getTextAnchor(b.x,p.cx)},b),S=hs(hs(hs(hs({},u),p),{},{fill:"none",stroke:p.fill},h),{},{index:f,points:[gs(p.cx,p.cy,p.outerRadius,v),b]}),w=c;return kt(c)&&kt(d)?w="value":kt(c)&&(w=d),X.createElement(qt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(f)},o&&s.renderLabelLineItem(o,S,"line"),s.renderLabelItem(l,y,rr(p,w)))});return X.createElement(qt,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return n.map(function(d,u){if(d?.startAngle===0&&d?.endAngle===0&&n.length!==1)return null;var m=a.isActiveIndex(u),h=c&&a.hasActiveIndex()?c:null,x=m?l:h,g=hs(hs({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return X.createElement(qt,uo({ref:function(f){f&&!a.sectorRefs.includes(f)&&a.sectorRefs.push(f)},tabIndex:-1,className:"recharts-pie-sector"},Al(a.props,d,u),{key:"sector-".concat(d?.startAngle,"-").concat(d?.endAngle,"-").concat(d.midAngle,"-").concat(u)}),X.createElement(g6,uo({option:x,isActive:m,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,m=this.state,h=m.prevSectors,x=m.prevIsAnimationActive;return X.createElement(ga,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,f=[],v=i&&i[0],b=v.startAngle;return i.forEach(function(y,S){var w=h&&h[S],C=S>0?Qr(y,"paddingAngle",0):0;if(w){var k=Hr(w.endAngle-w.startAngle,y.endAngle-y.startAngle),A=hs(hs({},y),{},{startAngle:b+C,endAngle:b+k(p)+C});f.push(A),b=A.endAngle}else{var N=y.endAngle,M=y.startAngle,F=Hr(0,N-M),I=F(p),V=hs(hs({},y),{},{startAngle:b+C,endAngle:b+I+C});f.push(V),b=V.endAngle}}),X.createElement(qt,null,n.renderSectorsStatically(f))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!xm(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,m=a.innerRadius,h=a.outerRadius,x=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!l||!l.length||!Fe(d)||!Fe(u)||!Fe(m)||!Fe(h))return null;var p=At("recharts-pie",o);return X.createElement(qt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(v){n.pieRef=v}},this.renderSectors(),c&&this.renderLabels(l),cr.renderCallByParent(this.props,null,!1),(!x||g)&&La.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(X.isValidElement(n))return X.cloneElement(n,a);if(bt(n))return n(a);var l=At("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return X.createElement(px,uo({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(n,a,i){if(X.isValidElement(n))return X.cloneElement(n,a);var l=i;if(bt(n)&&(l=n(a),X.isValidElement(l)))return l;var o=At("recharts-pie-label-text",typeof n!="boolean"&&!bt(n)?n.className:"");return X.createElement(Tl,uo({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(j.PureComponent);ch=Hn;un(Hn,"displayName","Pie");un(Hn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Bl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});un(Hn,"parseDeltaAngle",function(t,s){var r=kr(s-t),n=Math.min(Math.abs(s-t),360);return r*n});un(Hn,"getRealPieData",function(t){var s=t.data,r=t.children,n=pt(t,!1),a=Xr(r,Yo);return s&&s.length?s.map(function(i,l){return hs(hs(hs({payload:i},n),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return hs(hs({},n),i.props)}):[]});un(Hn,"parseCoordinateOfPie",function(t,s){var r=s.top,n=s.left,a=s.width,i=s.height,l=X5(a,i),o=n+Ar(t.cx,a,a/2),c=r+Ar(t.cy,i,i/2),d=Ar(t.innerRadius,l,0),u=Ar(t.outerRadius,l,l*.8),m=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});un(Hn,"getComposedData",function(t){var s=t.item,r=t.offset,n=s.type.defaultProps!==void 0?hs(hs({},s.type.defaultProps),s.props):s.props,a=ch.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,l=n.startAngle,o=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,m=n.valueKey,h=n.tooltipType,x=Math.abs(n.minAngle),g=ch.parseCoordinateOfPie(n,r),p=ch.parseDeltaAngle(l,o),f=Math.abs(p),v=d;kt(d)&&kt(m)?(Ln(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):kt(d)&&(Ln(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=m);var b=a.filter(function(A){return rr(A,v,0)!==0}).length,y=(f>=360?b:b-1)*c,S=f-b*x-y,w=a.reduce(function(A,N){var M=rr(N,v,0);return A+(Fe(M)?M:0)},0),C;if(w>0){var k;C=a.map(function(A,N){var M=rr(A,v,0),F=rr(A,u,N),I=(Fe(M)?M:0)/w,V;N?V=k.endAngle+kr(p)*c*(M!==0?1:0):V=l;var E=V+kr(p)*((M!==0?x:0)+I*S),G=(V+E)/2,Y=(g.innerRadius+g.outerRadius)/2,Q=[{name:F,value:M,payload:A,dataKey:v,type:h}],T=gs(g.cx,g.cy,Y,G);return k=hs(hs(hs({percent:I,cornerRadius:i,name:F,tooltipPayload:Q,midAngle:G,middleRadius:Y,tooltipPosition:T},A),g),{},{value:rr(A,v),startAngle:V,endAngle:E,payload:A,paddingAngle:kr(p)*c}),k})}return hs(hs({},g),{},{sectors:C,data:a})});var oje=Math.ceil,cje=Math.max;function dje(t,s,r,n){for(var a=-1,i=cje(oje((s-t)/(r||1)),0),l=Array(i);i--;)l[n?i:++a]=t,t+=r;return l}var uje=dje,mje=F_,SP=1/0,hje=17976931348623157e292;function xje(t){if(!t)return t===0?t:0;if(t=mje(t),t===SP||t===-SP){var s=t<0?-1:1;return s*hje}return t===t?t:0}var y6=xje,pje=uje,fje=af,Xg=y6;function gje(t){return function(s,r,n){return n&&typeof n!="number"&&fje(s,r,n)&&(r=n=void 0),s=Xg(s),r===void 0?(r=s,s=0):r=Xg(r),n=n===void 0?s<r?1:-1:Xg(n),pje(s,r,n,t)}}var jje=gje,vje=jje,yje=vje(),bje=yje;const Cx=ls(bje);function ku(t){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ku(t)}function CP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function PP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?CP(Object(r),!0).forEach(function(n){b6(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b6(t,s,r){return s=Nje(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Nje(t){var s=wje(t,"string");return ku(s)=="symbol"?s:s+""}function wje(t,s){if(ku(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Sje=["Webkit","Moz","O","ms"],Cje=function(s,r){var n=s.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Sje.reduce(function(i,l){return PP(PP({},i),{},b6({},l+n,r))},{});return a[s]=r,a};function nc(t){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},nc(t)}function Px(){return Px=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Px.apply(this,arguments)}function kP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zg(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?kP(Object(r),!0).forEach(function(n){Br(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pje(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function AP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w6(n.key),n)}}function kje(t,s,r){return s&&AP(t.prototype,s),r&&AP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aje(t,s,r){return s=kx(s),Tje(t,N6()?Reflect.construct(s,r||[],kx(t).constructor):s.apply(t,r))}function Tje(t,s){if(s&&(nc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dje(t)}function Dje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N6=function(){return!!t})()}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kx(t)}function Oje(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&vy(t,s)}function vy(t,s){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vy(t,s)}function Br(t,s,r){return s=w6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function w6(t){var s=Eje(t,"string");return nc(s)=="symbol"?s:s+""}function Eje(t,s){if(nc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mje=function(s){var r=s.data,n=s.startIndex,a=s.endIndex,i=s.x,l=s.width,o=s.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=bd().domain(Cx(0,c)).range([i,i+l-o]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(a),scale:d,scaleValues:u}},TP=function(s){return s.changedTouches&&!!s.changedTouches.length},ac=function(t){function s(r){var n;return Pje(this,s),n=Aje(this,s,[r]),Br(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Br(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Br(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l?.({endIndex:i,startIndex:o})}),n.detachDragEndListener()}),Br(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Br(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Br(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Br(n,"handleSlideDragStart",function(a){var i=TP(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Oje(s,t),kje(s,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,m=Math.min(a,i),h=Math.max(a,i),x=s.getIndexInRange(l,m),g=s.getIndexInRange(l,h);return{startIndex:x-x%c,endIndex:g===u?u:g-g%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=rr(i[n],o,n);return bt(l)?l(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,h=c.startIndex,x=c.endIndex,g=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,d+u-m-o,d+u-m-l):p<0&&(p=Math.max(p,d-l,d-o));var f=this.getIndex({startX:l+p,endX:o+p});(f.startIndex!==h||f.endIndex!==x)&&g&&g(f),this.setState({startX:l+p,endX:o+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=TP(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,m=u.x,h=u.width,x=u.travellerWidth,g=u.onChange,p=u.gap,f=u.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,m+h-x-d):b<0&&(b=Math.max(b,m-d)),v[l]=d+b;var y=this.getIndex(v),S=y.startIndex,w=y.endIndex,C=function(){var A=f.length-1;return l==="startX"&&(o>c?S%p===0:w%p===0)||o<c&&w===A||l==="endX"&&(o>c?w%p===0:S%p===0)||o>c&&w===A};this.setState(Br(Br({},l,d+b),"brushMoveStartX",n.pageX),function(){g&&C()&&g(y)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],m=o.indexOf(u);if(m!==-1){var h=m+n;if(!(h===-1||h>=o.length)){var x=o[h];a==="startX"&&x>=d||a==="endX"&&x<=c||this.setState(Br({},a,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.fill,d=n.stroke;return X.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.data,d=n.children,u=n.padding,m=j.Children.only(d);return m?X.cloneElement(m,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,h=c.traveller,x=c.ariaLabel,g=c.data,p=c.startIndex,f=c.endIndex,v=Math.max(n,this.props.x),b=Zg(Zg({},pt(this.props,!1)),{},{x:v,y:d,width:u,height:m}),y=x||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=g[f])===null||l===void 0?void 0:l.name);return X.createElement(qt,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),o.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},s.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(n,a)+d,m=Math.max(Math.abs(a-n)-d,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:m,height:o})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,l=n.y,o=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,m=u.startX,h=u.endX,x=5,g={pointerEvents:"none",fill:d};return X.createElement(qt,{className:"recharts-brush-texts"},X.createElement(Tl,Px({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,h)-x,y:l+o/2},g),this.getTextOfTick(a)),X.createElement(Tl,Px({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,h)+c+x,y:l+o/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,l=n.children,o=n.x,c=n.y,d=n.width,u=n.height,m=n.alwaysShowText,h=this.state,x=h.startX,g=h.endX,p=h.isTextActive,f=h.isSlideMoving,v=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!Fe(o)||!Fe(c)||!Fe(d)||!Fe(u)||d<=0||u<=0)return null;var y=At("recharts-brush",i),S=X.Children.count(l)===1,w=Cje("userSelect","none");return X.createElement(qt,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(x,g),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(g,"endX"),(p||f||v||b||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,l=n.width,o=n.height,c=n.stroke,d=Math.floor(i+o/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),X.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return X.isValidElement(n)?i=X.cloneElement(n,a):bt(n)?i=n(a):i=s.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,l=n.width,o=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,m=n.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return Zg({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?Mje({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var h=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);n[c]>a?o=c:l=c}return a>=n[o]?o:l}}])}(j.PureComponent);Br(ac,"displayName","Brush");Br(ac,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Rje=Yb;function _je(t,s){var r;return Rje(t,function(n,a,i){return r=s(n,a,i),!r}),!!r}var Ije=_je,$je=u_,Fje=Na,Lje=Ije,Bje=Fr,Vje=af;function qje(t,s,r){var n=Bje(t)?$je:Lje;return r&&Vje(t,s,r)&&(s=void 0),n(t,Fje(s))}var Uje=qje;const zje=ls(Uje);var oa=function(s,r){var n=s.alwaysShow,a=s.ifOverflow;return n&&(a="extendDomain"),a===r},DP=M_;function Gje(t,s,r){s=="__proto__"&&DP?DP(t,s,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[s]=r}var Hje=Gje,Kje=Hje,Wje=O_,Yje=Na;function Qje(t,s){var r={};return s=Yje(s),Wje(t,function(n,a,i){Kje(r,a,s(n,a,i))}),r}var Xje=Qje;const Zje=ls(Xje);function Jje(t,s){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!s(t[r],r,t))return!1;return!0}var eve=Jje,tve=Yb;function sve(t,s){var r=!0;return tve(t,function(n,a,i){return r=!!s(n,a,i),r}),r}var rve=sve,nve=eve,ave=rve,ive=Na,lve=Fr,ove=af;function cve(t,s,r){var n=lve(t)?nve:ave;return r&&ove(t,s,r)&&(s=void 0),n(t,ive(s))}var dve=cve;const S6=ls(dve);var uve=["x","y"];function Au(t){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Au(t)}function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yy.apply(this,arguments)}function OP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function id(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?OP(Object(r),!0).forEach(function(n){mve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mve(t,s,r){return s=hve(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function hve(t){var s=xve(t,"string");return Au(s)=="symbol"?s:s+""}function xve(t,s){if(Au(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function pve(t,s){if(t==null)return{};var r=fve(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fve(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function gve(t,s){var r=t.x,n=t.y,a=pve(t,uve),i="".concat(r),l=parseInt(i,10),o="".concat(n),c=parseInt(o,10),d="".concat(s.height||a.height),u=parseInt(d,10),m="".concat(s.width||a.width),h=parseInt(m,10);return id(id(id(id(id({},s),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:h,name:s.name,radius:s.radius})}function EP(t){return X.createElement(g6,yy({shapeType:"rectangle",propTransformer:gve,activeClassName:"recharts-active-bar"},t))}var jve=function(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof s=="number")return s;var i=Fe(n)||UX(n);return i?s(n,a):(i||Ol(),r)}},vve=["value","background"],C6;function ic(t){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ic(t)}function yve(t,s){if(t==null)return{};var r=bve(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bve(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ax(){return Ax=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ax.apply(this,arguments)}function MP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ws(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?MP(Object(r),!0).forEach(function(n){vi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nve(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function RP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k6(n.key),n)}}function wve(t,s,r){return s&&RP(t.prototype,s),r&&RP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sve(t,s,r){return s=Tx(s),Cve(t,P6()?Reflect.construct(s,r||[],Tx(t).constructor):s.apply(t,r))}function Cve(t,s){if(s&&(ic(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pve(t)}function Pve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P6=function(){return!!t})()}function Tx(t){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tx(t)}function kve(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&by(t,s)}function by(t,s){return by=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},by(t,s)}function vi(t,s,r){return s=k6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function k6(t){var s=Ave(t,"string");return ic(s)=="symbol"?s:s+""}function Ave(t,s){if(ic(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ba=function(t){function s(){var r;Nve(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Sve(this,s,[].concat(a)),vi(r,"state",{isAnimationFinished:!1}),vi(r,"id",$c("recharts-bar-")),vi(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),l&&l()}),vi(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),l&&l()}),r}return kve(s,t),wve(s,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=pt(this.props,!1);return n&&n.map(function(m,h){var x=h===c,g=x?d:l,p=Ws(Ws(Ws({},u),m),{},{isActive:x,option:g,index:h,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return X.createElement(qt,Ax({className:"recharts-bar-rectangle"},Al(a.props,m,h),{key:"rectangle-".concat(m?.x,"-").concat(m?.y,"-").concat(m?.value,"-").concat(h)}),X.createElement(EP,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,h=this.state.prevData;return X.createElement(ga,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t,p=i.map(function(f,v){var b=h&&h[v];if(b){var y=Hr(b.x,f.x),S=Hr(b.y,f.y),w=Hr(b.width,f.width),C=Hr(b.height,f.height);return Ws(Ws({},f),{},{x:y(g),y:S(g),width:w(g),height:C(g)})}if(l==="horizontal"){var k=Hr(0,f.height),A=k(g);return Ws(Ws({},f),{},{y:f.y+f.height-A,height:A})}var N=Hr(0,f.width),M=N(g);return Ws(Ws({},f),{},{width:M})});return X.createElement(qt,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!xm(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=pt(this.props.background,!1);return i.map(function(d,u){d.value;var m=d.background,h=yve(d,vve);if(!m)return null;var x=Ws(Ws(Ws(Ws(Ws({},h),{},{fill:"#eee"},m),c),Al(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return X.createElement(EP,Ax({key:"background-bar-".concat(u),option:n.props.background,isActive:u===o},x))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=Xr(u,pm);if(!m)return null;var h=d==="vertical"?l[0].height/2:l[0].width/2,x=function(f,v){var b=Array.isArray(f.value)?f.value[1]:f.value;return{x:f.x,y:f.y,value:b,errorVal:rr(f,v)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return X.createElement(qt,g,m.map(function(p){return X.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:h,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,l=n.className,o=n.xAxis,c=n.yAxis,d=n.left,u=n.top,m=n.width,h=n.height,x=n.isAnimationActive,g=n.background,p=n.id;if(a||!i||!i.length)return null;var f=this.state.isAnimationFinished,v=At("recharts-bar",l),b=o&&o.allowDataOverflow,y=c&&c.allowDataOverflow,S=b||y,w=kt(p)?this.id:p;return X.createElement(qt,{className:v},b||y?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(w)},X.createElement("rect",{x:b?d:d-m/2,y:y?u:u-h/2,width:b?m:m*2,height:y?h:h*2}))):null,X.createElement(qt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(w,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,w),(!x||f)&&La.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);C6=Ba;vi(Ba,"displayName","Bar");vi(Ba,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Bl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});vi(Ba,"getComposedData",function(t){var s=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,l=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,x=ohe(n,r);if(!x)return null;var g=s.layout,p=r.type.defaultProps,f=p!==void 0?Ws(Ws({},p),r.props):r.props,v=f.dataKey,b=f.children,y=f.minPointSize,S=g==="horizontal"?l:i,w=d?S.scale.domain():null,C=phe({numericAxis:S}),k=Xr(b,Yo),A=m.map(function(N,M){var F,I,V,E,G,Y;d?F=che(d[u+M],w):(F=rr(N,v),Array.isArray(F)||(F=[C,F]));var Q=jve(y,C6.defaultProps.minPointSize)(F[1],M);if(g==="horizontal"){var T,B=[l.scale(F[0]),l.scale(F[1])],W=B[0],he=B[1];I=wC({axis:i,ticks:o,bandSize:a,offset:x.offset,entry:N,index:M}),V=(T=he??W)!==null&&T!==void 0?T:void 0,E=x.size;var Se=W-he;if(G=Number.isNaN(Se)?0:Se,Y={x:I,y:l.y,width:E,height:l.height},Math.abs(Q)>0&&Math.abs(G)<Math.abs(Q)){var z=kr(G||Q)*(Math.abs(Q)-Math.abs(G));V-=z,G+=z}}else{var L=[i.scale(F[0]),i.scale(F[1])],le=L[0],Z=L[1];if(I=le,V=wC({axis:l,ticks:c,bandSize:a,offset:x.offset,entry:N,index:M}),E=Z-le,G=x.size,Y={x:i.x,y:V,width:i.width,height:G},Math.abs(Q)>0&&Math.abs(E)<Math.abs(Q)){var me=kr(E||Q)*(Math.abs(Q)-Math.abs(E));E+=me}}return Ws(Ws(Ws({},N),{},{x:I,y:V,width:E,height:G,value:d?F:F[1],payload:N,background:Y},k&&k[M]&&k[M].props),{},{tooltipPayload:[Y5(r,N)],tooltipPosition:{x:I+E/2,y:V+G/2}})});return Ws({data:A,layout:g},h)});function Tu(t){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tu(t)}function Tve(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _P(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A6(n.key),n)}}function Dve(t,s,r){return s&&_P(t.prototype,s),r&&_P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function IP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function An(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?IP(Object(r),!0).forEach(function(n){Cf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cf(t,s,r){return s=A6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function A6(t){var s=Ove(t,"string");return Tu(s)=="symbol"?s:s+""}function Ove(t,s){if(Tu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var T6=function(s,r,n,a,i){var l=s.width,o=s.height,c=s.layout,d=s.children,u=Object.keys(r),m={left:n.left,leftMirror:n.left,right:l-n.right,rightMirror:l-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!qr(d,Ba);return u.reduce(function(x,g){var p=r[g],f=p.orientation,v=p.domain,b=p.padding,y=b===void 0?{}:b,S=p.mirror,w=p.reversed,C="".concat(f).concat(S?"Mirror":""),k,A,N,M,F;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var I=v[1]-v[0],V=1/0,E=p.categoricalDomain.sort(HX);if(E.forEach(function(L,le){le>0&&(V=Math.min((L||0)-(E[le-1]||0),V))}),Number.isFinite(V)){var G=V/I,Y=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(k=G*Y/2),p.padding==="no-gap"){var Q=Ar(s.barCategoryGap,G*Y),T=G*Y/2;k=T-Q-(T-Q)/Y*Q}}}a==="xAxis"?A=[n.left+(y.left||0)+(k||0),n.left+n.width-(y.right||0)-(k||0)]:a==="yAxis"?A=c==="horizontal"?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(k||0),n.top+n.height-(y.bottom||0)-(k||0)]:A=p.range,w&&(A=[A[1],A[0]]);var B=G5(p,i,h),W=B.scale,he=B.realScaleType;W.domain(v).range(A),H5(W);var Se=K5(W,An(An({},p),{},{realScaleType:he}));a==="xAxis"?(F=f==="top"&&!S||f==="bottom"&&S,N=n.left,M=m[C]-F*p.height):a==="yAxis"&&(F=f==="left"&&!S||f==="right"&&S,N=m[C]-F*p.width,M=n.top);var z=An(An(An({},p),Se),{},{realScaleType:he,x:N,y:M,scale:W,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return z.bandSize=mx(z,Se),!p.hide&&a==="xAxis"?m[C]+=(F?-1:1)*z.height:p.hide||(m[C]+=(F?-1:1)*z.width),An(An({},x),{},Cf({},g,z))},{})},D6=function(s,r){var n=s.x,a=s.y,i=r.x,l=r.y;return{x:Math.min(n,i),y:Math.min(a,l),width:Math.abs(i-n),height:Math.abs(l-a)}},Eve=function(s){var r=s.x1,n=s.y1,a=s.x2,i=s.y2;return D6({x:r,y:n},{x:a,y:i})},O6=function(){function t(s){Tve(this,t),this.scale=s}return Dve(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])}();Cf(O6,"EPS",1e-4);var SN=function(s){var r=Object.keys(s).reduce(function(n,a){return An(An({},n),{},Cf({},a,O6.create(s[a])))},{});return An(An({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return Zje(a,function(c,d){return r[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return S6(a,function(i,l){return r[l].isInRange(i)})}})};function Mve(t){return(t%180+180)%180}var Rve=function(s){var r=s.width,n=s.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Mve(a),l=i*Math.PI/180,o=Math.atan(n/r),c=l>o&&l<Math.PI-o?n/Math.sin(l):r/Math.cos(l);return Math.abs(c)},_ve=Na,Ive=cm,$ve=rf;function Fve(t){return function(s,r,n){var a=Object(s);if(!Ive(s)){var i=_ve(r);s=$ve(s),r=function(o){return i(a[o],o,a)}}var l=t(s,r,n);return l>-1?a[i?s[l]:l]:void 0}}var Lve=Fve,Bve=y6;function Vve(t){var s=Bve(t),r=s%1;return s===s?r?s-r:s:0}var qve=Vve,Uve=C_,zve=Na,Gve=qve,Hve=Math.max;function Kve(t,s,r){var n=t==null?0:t.length;if(!n)return-1;var a=r==null?0:Gve(r);return a<0&&(a=Hve(n+a,0)),Uve(t,zve(s),a)}var Wve=Kve,Yve=Lve,Qve=Wve,Xve=Yve(Qve),Zve=Xve;const Jve=ls(Zve);var eye=YQ(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),CN=j.createContext(void 0),PN=j.createContext(void 0),E6=j.createContext(void 0),M6=j.createContext({}),R6=j.createContext(void 0),_6=j.createContext(0),I6=j.createContext(0),$P=function(s){var r=s.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,l=s.clipPathId,o=s.children,c=s.width,d=s.height,u=eye(i);return X.createElement(CN.Provider,{value:n},X.createElement(PN.Provider,{value:a},X.createElement(M6.Provider,{value:i},X.createElement(E6.Provider,{value:u},X.createElement(R6.Provider,{value:l},X.createElement(_6.Provider,{value:d},X.createElement(I6.Provider,{value:c},o)))))))},tye=function(){return j.useContext(R6)},$6=function(s){var r=j.useContext(CN);r==null&&Ol();var n=r[s];return n==null&&Ol(),n},sye=function(){var s=j.useContext(CN);return pi(s)},rye=function(){var s=j.useContext(PN),r=Jve(s,function(n){return S6(n.domain,Number.isFinite)});return r||pi(s)},F6=function(s){var r=j.useContext(PN);r==null&&Ol();var n=r[s];return n==null&&Ol(),n},nye=function(){var s=j.useContext(E6);return s},aye=function(){return j.useContext(M6)},kN=function(){return j.useContext(I6)},AN=function(){return j.useContext(_6)};function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},lc(t)}function iye(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function lye(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B6(n.key),n)}}function oye(t,s,r){return s&&lye(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function cye(t,s,r){return s=Dx(s),dye(t,L6()?Reflect.construct(s,r||[],Dx(t).constructor):s.apply(t,r))}function dye(t,s){if(s&&(lc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uye(t)}function uye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L6=function(){return!!t})()}function Dx(t){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dx(t)}function mye(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ny(t,s)}function Ny(t,s){return Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ny(t,s)}function FP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?FP(Object(r),!0).forEach(function(n){TN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TN(t,s,r){return s=B6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function B6(t){var s=hye(t,"string");return lc(s)=="symbol"?s:s+""}function hye(t,s){if(lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xye(t,s){return jye(t)||gye(t,s)||fye(t,s)||pye()}function pye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fye(t,s){if(t){if(typeof t=="string")return BP(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BP(t,s)}}function BP(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function gye(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function jye(t){if(Array.isArray(t))return t}function wy(){return wy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wy.apply(this,arguments)}var vye=function(s,r){var n;return X.isValidElement(s)?n=X.cloneElement(s,r):bt(s)?n=s(r):n=X.createElement("line",wy({},r,{className:"recharts-reference-line-line"})),n},yye=function(s,r,n,a,i,l,o,c,d){var u=i.x,m=i.y,h=i.width,x=i.height;if(n){var g=d.y,p=s.y.apply(g,{position:l});if(oa(d,"discard")&&!s.y.isInRange(p))return null;var f=[{x:u+h,y:p},{x:u,y:p}];return c==="left"?f.reverse():f}if(r){var v=d.x,b=s.x.apply(v,{position:l});if(oa(d,"discard")&&!s.x.isInRange(b))return null;var y=[{x:b,y:m+x},{x:b,y:m}];return o==="top"?y.reverse():y}if(a){var S=d.segment,w=S.map(function(C){return s.apply(C,{position:l})});return oa(d,"discard")&&zje(w,function(C){return!s.isInRange(C)})?null:w}return null};function bye(t){var s=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,l=t.shape,o=t.className,c=t.alwaysShow,d=tye(),u=$6(a),m=F6(i),h=nye();if(!d||!h)return null;Ln(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=SN({x:u.scale,y:m.scale}),g=nr(s),p=nr(r),f=n&&n.length===2,v=yye(x,g,p,f,h,t.position,u.orientation,m.orientation,t);if(!v)return null;var b=xye(v,2),y=b[0],S=y.x,w=y.y,C=b[1],k=C.x,A=C.y,N=oa(t,"hidden")?"url(#".concat(d,")"):void 0,M=LP(LP({clipPath:N},pt(t,!0)),{},{x1:S,y1:w,x2:k,y2:A});return X.createElement(qt,{className:At("recharts-reference-line",o)},vye(l,M),cr.renderCallByParent(t,Eve({x1:S,y1:w,x2:k,y2:A})))}var DN=function(t){function s(){return iye(this,s),cye(this,s,arguments)}return mye(s,t),oye(s,[{key:"render",value:function(){return X.createElement(bye,this.props)}}])}(X.Component);TN(DN,"displayName","ReferenceLine");TN(DN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Sy(){return Sy=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sy.apply(this,arguments)}function oc(t){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},oc(t)}function VP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?VP(Object(r),!0).forEach(function(n){Pf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nye(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function wye(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q6(n.key),n)}}function Sye(t,s,r){return s&&wye(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cye(t,s,r){return s=Ox(s),Pye(t,V6()?Reflect.construct(s,r||[],Ox(t).constructor):s.apply(t,r))}function Pye(t,s){if(s&&(oc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kye(t)}function kye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V6=function(){return!!t})()}function Ox(t){return Ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ox(t)}function Aye(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Cy(t,s)}function Cy(t,s){return Cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Cy(t,s)}function Pf(t,s,r){return s=q6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function q6(t){var s=Tye(t,"string");return oc(s)=="symbol"?s:s+""}function Tye(t,s){if(oc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Dye=function(s){var r=s.x,n=s.y,a=s.xAxis,i=s.yAxis,l=SN({x:a.scale,y:i.scale}),o=l.apply({x:r,y:n},{bandAware:!0});return oa(s,"discard")&&!l.isInRange(o)?null:o},kf=function(t){function s(){return Nye(this,s),Cye(this,s,arguments)}return Aye(s,t),Sye(s,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,l=n.r,o=n.alwaysShow,c=n.clipPathId,d=nr(a),u=nr(i);if(Ln(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=Dye(this.props);if(!m)return null;var h=m.x,x=m.y,g=this.props,p=g.shape,f=g.className,v=oa(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=qP(qP({clipPath:v},pt(this.props,!0)),{},{cx:h,cy:x});return X.createElement(qt,{className:At("recharts-reference-dot",f)},s.renderDot(p,b),cr.renderCallByParent(this.props,{x:h-l,y:x-l,width:2*l,height:2*l}))}}])}(X.Component);Pf(kf,"displayName","ReferenceDot");Pf(kf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Pf(kf,"renderDot",function(t,s){var r;return X.isValidElement(t)?r=X.cloneElement(t,s):bt(t)?r=t(s):r=X.createElement(jf,Sy({},s,{cx:s.cx,cy:s.cy,className:"recharts-reference-dot-dot"})),r});function Py(){return Py=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Py.apply(this,arguments)}function cc(t){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},cc(t)}function UP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zP(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?UP(Object(r),!0).forEach(function(n){Af(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Oye(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Eye(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z6(n.key),n)}}function Mye(t,s,r){return s&&Eye(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rye(t,s,r){return s=Ex(s),_ye(t,U6()?Reflect.construct(s,r||[],Ex(t).constructor):s.apply(t,r))}function _ye(t,s){if(s&&(cc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iye(t)}function Iye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U6=function(){return!!t})()}function Ex(t){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ex(t)}function $ye(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&ky(t,s)}function ky(t,s){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ky(t,s)}function Af(t,s,r){return s=z6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function z6(t){var s=Fye(t,"string");return cc(s)=="symbol"?s:s+""}function Fye(t,s){if(cc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lye=function(s,r,n,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var h=SN({x:u.scale,y:m.scale}),x={x:s?h.x.apply(l,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return oa(i,"discard")&&(!h.isInRange(x)||!h.isInRange(g))?null:D6(x,g)},Tf=function(t){function s(){return Oye(this,s),Rye(this,s,arguments)}return $ye(s,t),Mye(s,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,l=n.y1,o=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;Ln(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=nr(a),h=nr(i),x=nr(l),g=nr(o),p=this.props.shape;if(!m&&!h&&!x&&!g&&!p)return null;var f=Lye(m,h,x,g,this.props);if(!f&&!p)return null;var v=oa(this.props,"hidden")?"url(#".concat(u,")"):void 0;return X.createElement(qt,{className:At("recharts-reference-area",c)},s.renderRect(p,zP(zP({clipPath:v},pt(this.props,!0)),f)),cr.renderCallByParent(this.props,f))}}])}(X.Component);Af(Tf,"displayName","ReferenceArea");Af(Tf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Af(Tf,"renderRect",function(t,s){var r;return X.isValidElement(t)?r=X.cloneElement(t,s):bt(t)?r=t(s):r=X.createElement(wN,Py({},s,{className:"recharts-reference-area-rect"})),r});function G6(t,s,r){if(s<1)return[];if(s===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=s)n.push(t[a]);return n}function Bye(t,s,r){var n={width:t.width+s.width,height:t.height+s.height};return Rve(n,r)}function Vye(t,s,r){var n=r==="width",a=t.x,i=t.y,l=t.width,o=t.height;return s===1?{start:n?a:i,end:n?a+l:i+o}:{start:n?a+l:i+o,end:n?a:i}}function Mx(t,s,r,n,a){if(t*s<t*n||t*s>t*a)return!1;var i=r();return t*(s-t*i/2-n)>=0&&t*(s+t*i/2-a)<=0}function qye(t,s){return G6(t,s+1)}function Uye(t,s,r,n,a){for(var i=(n||[]).slice(),l=s.start,o=s.end,c=0,d=1,u=l,m=function(){var g=n?.[c];if(g===void 0)return{v:G6(n,d)};var p=c,f,v=function(){return f===void 0&&(f=r(g,p)),f},b=g.coordinate,y=c===0||Mx(t,b,v,u,o);y||(c=0,u=l,d+=1),y&&(u=b+t*(v()/2+a),c+=d)},h;d<=i.length;)if(h=m(),h)return h.v;return[]}function Du(t){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Du(t)}function GP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?GP(Object(r),!0).forEach(function(n){zye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zye(t,s,r){return s=Gye(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Gye(t){var s=Hye(t,"string");return Du(s)=="symbol"?s:s+""}function Hye(t,s){if(Du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Kye(t,s,r,n,a){for(var i=(n||[]).slice(),l=i.length,o=s.start,c=s.end,d=function(h){var x=i[h],g,p=function(){return g===void 0&&(g=r(x,h)),g};if(h===l-1){var f=t*(x.coordinate+t*p()/2-c);i[h]=x=fr(fr({},x),{},{tickCoord:f>0?x.coordinate-f*t:x.coordinate})}else i[h]=x=fr(fr({},x),{},{tickCoord:x.coordinate});var v=Mx(t,x.tickCoord,p,o,c);v&&(c=x.tickCoord-t*(p()/2+a),i[h]=fr(fr({},x),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function Wye(t,s,r,n,a,i){var l=(n||[]).slice(),o=l.length,c=s.start,d=s.end;if(i){var u=n[o-1],m=r(u,o-1),h=t*(u.coordinate+t*m/2-d);l[o-1]=u=fr(fr({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var x=Mx(t,u.tickCoord,function(){return m},c,d);x&&(d=u.tickCoord-t*(m/2+a),l[o-1]=fr(fr({},u),{},{isShow:!0}))}for(var g=i?o-1:o,p=function(b){var y=l[b],S,w=function(){return S===void 0&&(S=r(y,b)),S};if(b===0){var C=t*(y.coordinate-t*w()/2-c);l[b]=y=fr(fr({},y),{},{tickCoord:C<0?y.coordinate-C*t:y.coordinate})}else l[b]=y=fr(fr({},y),{},{tickCoord:y.coordinate});var k=Mx(t,y.tickCoord,w,c,d);k&&(c=y.tickCoord+t*(w()/2+a),l[b]=fr(fr({},y),{},{isShow:!0}))},f=0;f<g;f++)p(f);return l}function ON(t,s,r){var n=t.tick,a=t.ticks,i=t.viewBox,l=t.minTickGap,o=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(Fe(c)||Bl.isSsr)return qye(a,typeof c=="number"&&Fe(c)?c:0);var h=[],x=o==="top"||o==="bottom"?"width":"height",g=u&&x==="width"?yd(u,{fontSize:s,letterSpacing:r}):{width:0,height:0},p=function(y,S){var w=bt(d)?d(y.value,S):y.value;return x==="width"?Bye(yd(w,{fontSize:s,letterSpacing:r}),g,m):yd(w,{fontSize:s,letterSpacing:r})[x]},f=a.length>=2?kr(a[1].coordinate-a[0].coordinate):1,v=Vye(i,f,x);return c==="equidistantPreserveStart"?Uye(f,v,p,a,l):(c==="preserveStart"||c==="preserveStartEnd"?h=Wye(f,v,p,a,l,c==="preserveStartEnd"):h=Kye(f,v,p,a,l),h.filter(function(b){return b.isShow}))}var Yye=["viewBox"],Qye=["viewBox"],Xye=["ticks"];function dc(t){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},dc(t)}function mo(){return mo=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mo.apply(this,arguments)}function HP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function er(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?HP(Object(r),!0).forEach(function(n){EN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jg(t,s){if(t==null)return{};var r=Zye(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zye(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Jye(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function KP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,K6(n.key),n)}}function e0e(t,s,r){return s&&KP(t.prototype,s),r&&KP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function t0e(t,s,r){return s=Rx(s),s0e(t,H6()?Reflect.construct(s,r||[],Rx(t).constructor):s.apply(t,r))}function s0e(t,s){if(s&&(dc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r0e(t)}function r0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H6=function(){return!!t})()}function Rx(t){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rx(t)}function n0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ay(t,s)}function Ay(t,s){return Ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ay(t,s)}function EN(t,s,r){return s=K6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function K6(t){var s=a0e(t,"string");return dc(s)=="symbol"?s:s+""}function a0e(t,s){if(dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zc=function(t){function s(r){var n;return Jye(this,s),n=t0e(this,s,[r]),n.state={fontSize:"",letterSpacing:""},n}return n0e(s,t),e0e(s,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,l=Jg(n,Yye),o=this.props,c=o.viewBox,d=Jg(o,Qye);return!Co(i,c)||!Co(l,d)||!Co(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,m=a.mirror,h=a.tickMargin,x,g,p,f,v,b,y=m?-1:1,S=n.tickSize||u,w=Fe(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":x=g=n.coordinate,f=l+ +!m*c,p=f-y*S,b=p-y*h,v=w;break;case"left":p=f=n.coordinate,g=i+ +!m*o,x=g-y*S,v=x-y*h,b=w;break;case"right":p=f=n.coordinate,g=i+ +m*o,x=g+y*S,v=x+y*h,b=w;break;default:x=g=n.coordinate,f=l+ +m*c,p=f+y*S,b=p+y*h,v=w;break}return{line:{x1:x,y1:p,x2:g,y2:f},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,m=er(er(er({},pt(this.props,!1)),pt(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);m=er(er({},m),{},{x1:a,y1:i+h*o,x2:a+l,y2:i+h*o})}else{var x=+(c==="left"&&!d||c==="right"&&d);m=er(er({},m),{},{x1:a+x*l,y1:i,x2:a+x*l,y2:i+o})}return X.createElement("line",mo({},m,{className:At("recharts-cartesian-axis-line",Qr(u,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,m=o.tickFormatter,h=o.unit,x=ON(er(er({},this.props),{},{ticks:n}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),f=pt(this.props,!1),v=pt(u,!1),b=er(er({},f),{},{fill:"none"},pt(c,!1)),y=x.map(function(S,w){var C=l.getTickLineCoord(S),k=C.line,A=C.tick,N=er(er(er(er({textAnchor:g,verticalAnchor:p},f),{},{stroke:"none",fill:d},v),A),{},{index:w,payload:S,visibleTicksCount:x.length,tickFormatter:m});return X.createElement(qt,mo({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Al(l.props,S,w)),c&&X.createElement("line",mo({},b,k,{className:At("recharts-cartesian-axis-tick-line",Qr(c,"className"))})),u&&s.renderTickItem(u,N,"".concat(bt(m)?m(S.value,w):S.value).concat(h||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var m=this.props,h=m.ticks,x=Jg(m,Xye),g=h;return bt(c)&&(g=h&&h.length>0?c(this.props):c(x)),l<=0||o<=0||!g||!g.length?null:X.createElement(qt,{className:At("recharts-cartesian-axis",d),ref:function(f){n.layerReference=f}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),cr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var l,o=At(a.className,"recharts-cartesian-axis-tick-value");return X.isValidElement(n)?l=X.cloneElement(n,er(er({},a),{},{className:o})):bt(n)?l=n(er(er({},a),{},{className:o})):l=X.createElement(Tl,mo({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(j.Component);EN(zc,"displayName","CartesianAxis");EN(zc,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var i0e=["x1","y1","x2","y2","key"],l0e=["offset"];function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},El(t)}function WP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?WP(Object(r),!0).forEach(function(n){o0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o0e(t,s,r){return s=c0e(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function c0e(t){var s=d0e(t,"string");return El(s)=="symbol"?s:s+""}function d0e(t,s){if(El(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(El(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dl.apply(this,arguments)}function YP(t,s){if(t==null)return{};var r=u0e(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function u0e(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}var m0e=function(s){var r=s.fill;if(!r||r==="none")return null;var n=s.fillOpacity,a=s.x,i=s.y,l=s.width,o=s.height,c=s.ry;return X.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function W6(t,s){var r;if(X.isValidElement(t))r=X.cloneElement(t,s);else if(bt(t))r=t(s);else{var n=s.x1,a=s.y1,i=s.x2,l=s.y2,o=s.key,c=YP(s,i0e),d=pt(c,!1);d.offset;var u=YP(d,l0e);r=X.createElement("line",dl({},u,{x1:n,y1:a,x2:i,y2:l,fill:"none",key:o}))}return r}function h0e(t){var s=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=jr(jr({},t),{},{x1:s,y1:o,x2:s+r,y2:o,key:"line-".concat(c),index:c});return W6(a,d)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function x0e(t){var s=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=jr(jr({},t),{},{x1:o,y1:s,x2:o,y2:s+r,key:"line-".concat(c),index:c});return W6(a,d)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function p0e(t){var s=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,l=t.height,o=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!s||!s.length)return null;var u=o.map(function(h){return Math.round(h+a-a)}).sort(function(h,x){return h-x});a!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var g=!u[x+1],p=g?a+l-h:u[x+1]-h;if(p<=0)return null;var f=x%s.length;return X.createElement("rect",{key:"react-".concat(x),y:h,x:n,height:p,width:i,stroke:"none",fill:s[f],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function f0e(t){var s=t.vertical,r=s===void 0?!0:s,n=t.verticalFill,a=t.fillOpacity,i=t.x,l=t.y,o=t.width,c=t.height,d=t.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,x){return h-x});i!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var g=!u[x+1],p=g?i+o-h:u[x+1]-h;if(p<=0)return null;var f=x%n.length;return X.createElement("rect",{key:"react-".concat(x),x:h,y:l,width:p,height:c,stroke:"none",fill:n[f],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var g0e=function(s,r){var n=s.xAxis,a=s.width,i=s.height,l=s.offset;return z5(ON(jr(jr(jr({},zc.defaultProps),n),{},{ticks:Ra(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,r)},j0e=function(s,r){var n=s.yAxis,a=s.width,i=s.height,l=s.offset;return z5(ON(jr(jr(jr({},zc.defaultProps),n),{},{ticks:Ra(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,r)},Zl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ty(t){var s,r,n,a,i,l,o=kN(),c=AN(),d=aye(),u=jr(jr({},t),{},{stroke:(s=t.stroke)!==null&&s!==void 0?s:Zl.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Zl.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Zl.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Zl.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Zl.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:Zl.verticalFill,x:Fe(t.x)?t.x:d.left,y:Fe(t.y)?t.y:d.top,width:Fe(t.width)?t.width:d.width,height:Fe(t.height)?t.height:d.height}),m=u.x,h=u.y,x=u.width,g=u.height,p=u.syncWithTicks,f=u.horizontalValues,v=u.verticalValues,b=sye(),y=rye();if(!Fe(x)||x<=0||!Fe(g)||g<=0||!Fe(m)||m!==+m||!Fe(h)||h!==+h)return null;var S=u.verticalCoordinatesGenerator||g0e,w=u.horizontalCoordinatesGenerator||j0e,C=u.horizontalPoints,k=u.verticalPoints;if((!C||!C.length)&&bt(w)){var A=f&&f.length,N=w({yAxis:y?jr(jr({},y),{},{ticks:A?f:y.ticks}):void 0,width:o,height:c,offset:d},A?!0:p);Ln(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(El(N),"]")),Array.isArray(N)&&(C=N)}if((!k||!k.length)&&bt(S)){var M=v&&v.length,F=S({xAxis:b?jr(jr({},b),{},{ticks:M?v:b.ticks}):void 0,width:o,height:c,offset:d},M?!0:p);Ln(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(El(F),"]")),Array.isArray(F)&&(k=F)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(m0e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),X.createElement(h0e,dl({},u,{offset:d,horizontalPoints:C,xAxis:b,yAxis:y})),X.createElement(x0e,dl({},u,{offset:d,verticalPoints:k,xAxis:b,yAxis:y})),X.createElement(p0e,dl({},u,{horizontalPoints:C})),X.createElement(f0e,dl({},u,{verticalPoints:k})))}Ty.displayName="CartesianGrid";var v0e=["type","layout","connectNulls","ref"],y0e=["key"];function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},uc(t)}function QP(t,s){if(t==null)return{};var r=b0e(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function b0e(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pd.apply(this,arguments)}function XP(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?XP(Object(r),!0).forEach(function(n){Tn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jl(t){return C0e(t)||S0e(t)||w0e(t)||N0e()}function N0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w0e(t,s){if(t){if(typeof t=="string")return Dy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dy(t,s)}}function S0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function C0e(t){if(Array.isArray(t))return Dy(t)}function Dy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function P0e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ZP(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q6(n.key),n)}}function k0e(t,s,r){return s&&ZP(t.prototype,s),r&&ZP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0e(t,s,r){return s=_x(s),T0e(t,Y6()?Reflect.construct(s,r||[],_x(t).constructor):s.apply(t,r))}function T0e(t,s){if(s&&(uc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(t)}function D0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y6=function(){return!!t})()}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_x(t)}function O0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Oy(t,s)}function Oy(t,s){return Oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Oy(t,s)}function Tn(t,s,r){return s=Q6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Q6(t){var s=E0e(t,"string");return uc(s)=="symbol"?s:s+""}function E0e(t,s){if(uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fl=function(t){function s(){var r;P0e(this,s);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=A0e(this,s,[].concat(a)),Tn(r,"state",{isAnimationFinished:!0,totalLength:0}),Tn(r,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),Tn(r,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(v,b){return v+b});if(!d)return r.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),m=l%d,h=o-l,x=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>m){x=[].concat(Jl(c.slice(0,g)),[m-p]);break}var f=x.length%2===0?[0,h]:[h];return[].concat(Jl(s.repeat(c,u)),Jl(x),f).map(function(v){return"".concat(v,"px")}).join(", ")}),Tn(r,"id",$c("recharts-line-")),Tn(r,"pathRef",function(l){r.mainCurve=l}),Tn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Tn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return O0e(s,t),k0e(s,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=Xr(u,pm);if(!m)return null;var h=function(p,f){return{x:p.x,y:p.y,value:p.value,errorVal:rr(p.payload,f)}},x={clipPath:n?"url(#clipPath-".concat(a,")"):null};return X.createElement(qt,x,m.map(function(g){return X.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,m=pt(this.props,!1),h=pt(c,!0),x=d.map(function(p,f){var v=Lr(Lr(Lr({key:"dot-".concat(f),r:3},m),h),{},{index:f,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return s.renderDotItem(c,v)}),g={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return X.createElement(qt,Pd({className:"recharts-line-dots",key:"dots"},g),x)}},{key:"renderCurveStatically",value:function(n,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var m=QP(o,v0e),h=Lr(Lr(Lr({},pt(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},l),{},{type:c,layout:d,connectNulls:u});return X.createElement(px,Pd({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,h=l.animationEasing,x=l.animationId,g=l.animateNewValues,p=l.width,f=l.height,v=this.state,b=v.prevPoints,y=v.totalLength;return X.createElement(ga,{begin:u,duration:m,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var w=S.t;if(b){var C=b.length/o.length,k=o.map(function(I,V){var E=Math.floor(V*C);if(b[E]){var G=b[E],Y=Hr(G.x,I.x),Q=Hr(G.y,I.y);return Lr(Lr({},I),{},{x:Y(w),y:Q(w)})}if(g){var T=Hr(p*2,I.x),B=Hr(f/2,I.y);return Lr(Lr({},I),{},{x:T(w),y:B(w)})}return Lr(Lr({},I),{},{x:I.x,y:I.y})});return i.renderCurveStatically(k,n,a)}var A=Hr(0,y),N=A(w),M;if(c){var F="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});M=i.getStrokeDasharray(N,y,F)}else M=i.generateSimpleStrokeDasharray(y,N);return i.renderCurveStatically(o,n,a,{strokeDasharray:M})})}},{key:"renderCurve",value:function(n,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!xm(d,l))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,m=a.top,h=a.left,x=a.width,g=a.height,p=a.isAnimationActive,f=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=o.length===1,y=At("recharts-line",c),S=d&&d.allowDataOverflow,w=u&&u.allowDataOverflow,C=S||w,k=kt(f)?this.id:f,A=(n=pt(l,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},N=A.r,M=N===void 0?3:N,F=A.strokeWidth,I=F===void 0?2:F,V=tZ(l)?l:{},E=V.clipDot,G=E===void 0?!0:E,Y=M*2+I;return X.createElement(qt,{className:y},S||w?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(k)},X.createElement("rect",{x:S?h:h-x/2,y:w?m:m-g/2,width:S?x:x*2,height:w?g:g*2})),!G&&X.createElement("clipPath",{id:"clipPath-dots-".concat(k)},X.createElement("rect",{x:h-Y/2,y:m-Y/2,width:x+Y,height:g+Y}))):null,!b&&this.renderCurve(C,k),this.renderErrorBar(C,k),(b||l)&&this.renderDots(C,G,k),(!p||v)&&La.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Jl(n),[0]):n,l=[],o=0;o<a;++o)l=[].concat(Jl(l),Jl(i));return l}},{key:"renderDotItem",value:function(n,a){var i;if(X.isValidElement(n))i=X.cloneElement(n,a);else if(bt(n))i=n(a);else{var l=a.key,o=QP(a,y0e),c=At("recharts-line-dot",typeof n!="boolean"?n.className:"");i=X.createElement(jf,Pd({key:l},o,{className:c}))}return i}}])}(j.PureComponent);Tn(fl,"displayName","Line");Tn(fl,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Bl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Tn(fl,"getComposedData",function(t){var s=t.props,r=t.xAxis,n=t.yAxis,a=t.xAxisTicks,i=t.yAxisTicks,l=t.dataKey,o=t.bandSize,c=t.displayedData,d=t.offset,u=s.layout,m=c.map(function(h,x){var g=rr(h,l);return u==="horizontal"?{x:NC({axis:r,ticks:a,bandSize:o,entry:h,index:x}),y:kt(g)?null:n.scale(g),value:g,payload:h}:{x:kt(g)?null:r.scale(g),y:NC({axis:n,ticks:i,bandSize:o,entry:h,index:x}),value:g,payload:h}});return Lr({points:m,layout:u},d)});function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},mc(t)}function M0e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function R0e(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J6(n.key),n)}}function _0e(t,s,r){return s&&R0e(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function I0e(t,s,r){return s=Ix(s),$0e(t,X6()?Reflect.construct(s,r||[],Ix(t).constructor):s.apply(t,r))}function $0e(t,s){if(s&&(mc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F0e(t)}function F0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X6=function(){return!!t})()}function Ix(t){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ix(t)}function L0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ey(t,s)}function Ey(t,s){return Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ey(t,s)}function Z6(t,s,r){return s=J6(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function J6(t){var s=B0e(t,"string");return mc(s)=="symbol"?s:s+""}function B0e(t,s){if(mc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function My(){return My=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},My.apply(this,arguments)}function V0e(t){var s=t.xAxisId,r=kN(),n=AN(),a=$6(s);return a==null?null:j.createElement(zc,My({},a,{className:At("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(l){return Ra(l,!0)}}))}var hc=function(t){function s(){return M0e(this,s),I0e(this,s,arguments)}return L0e(s,t),_0e(s,[{key:"render",value:function(){return j.createElement(V0e,this.props)}}])}(j.Component);Z6(hc,"displayName","XAxis");Z6(hc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function xc(t){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xc(t)}function q0e(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function U0e(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sI(n.key),n)}}function z0e(t,s,r){return s&&U0e(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function G0e(t,s,r){return s=$x(s),H0e(t,eI()?Reflect.construct(s,r||[],$x(t).constructor):s.apply(t,r))}function H0e(t,s){if(s&&(xc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K0e(t)}function K0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eI=function(){return!!t})()}function $x(t){return $x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$x(t)}function W0e(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ry(t,s)}function Ry(t,s){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ry(t,s)}function tI(t,s,r){return s=sI(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function sI(t){var s=Y0e(t,"string");return xc(s)=="symbol"?s:s+""}function Y0e(t,s){if(xc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_y.apply(this,arguments)}var Q0e=function(s){var r=s.yAxisId,n=kN(),a=AN(),i=F6(r);return i==null?null:j.createElement(zc,_y({},i,{className:At("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return Ra(o,!0)}}))},pc=function(t){function s(){return q0e(this,s),G0e(this,s,arguments)}return W0e(s,t),z0e(s,[{key:"render",value:function(){return j.createElement(Q0e,this.props)}}])}(j.Component);tI(pc,"displayName","YAxis");tI(pc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JP(t){return ebe(t)||J0e(t)||Z0e(t)||X0e()}function X0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z0e(t,s){if(t){if(typeof t=="string")return Iy(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iy(t,s)}}function J0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ebe(t){if(Array.isArray(t))return Iy(t)}function Iy(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}var $y=function(s,r,n,a,i){var l=Xr(s,DN),o=Xr(s,kf),c=[].concat(JP(l),JP(o)),d=Xr(s,Tf),u="".concat(a,"Id"),m=a[0],h=r;if(c.length&&(h=c.reduce(function(p,f){if(f.props[u]===n&&oa(f.props,"extendDomain")&&Fe(f.props[m])){var v=f.props[m];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},h)),d.length){var x="".concat(m,"1"),g="".concat(m,"2");h=d.reduce(function(p,f){if(f.props[u]===n&&oa(f.props,"extendDomain")&&Fe(f.props[x])&&Fe(f.props[g])){var v=f.props[x],b=f.props[g];return[Math.min(p[0],v,b),Math.max(p[1],v,b)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,f){return Fe(f)?[Math.min(p[0],f),Math.max(p[1],f)]:p},h)),h},rI={exports:{}};(function(t){var s=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,m,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new a(u,m||c,h),g=r?r+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],x]:c._events[g].push(x):(c._events[g]=x,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)s.call(u,m)&&d.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=r?r+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,x=m.length,g=new Array(x);h<x;h++)g[h]=m[h].fn;return g},o.prototype.listenerCount=function(d){var u=r?r+d:d,m=this._events[u];return m?m.fn?1:m.length:0},o.prototype.emit=function(d,u,m,h,x,g){var p=r?r+d:d;if(!this._events[p])return!1;var f=this._events[p],v=arguments.length,b,y;if(f.fn){switch(f.once&&this.removeListener(d,f.fn,void 0,!0),v){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,u),!0;case 3:return f.fn.call(f.context,u,m),!0;case 4:return f.fn.call(f.context,u,m,h),!0;case 5:return f.fn.call(f.context,u,m,h,x),!0;case 6:return f.fn.call(f.context,u,m,h,x,g),!0}for(y=1,b=new Array(v-1);y<v;y++)b[y-1]=arguments[y];f.fn.apply(f.context,b)}else{var S=f.length,w;for(y=0;y<S;y++)switch(f[y].once&&this.removeListener(d,f[y].fn,void 0,!0),v){case 1:f[y].fn.call(f[y].context);break;case 2:f[y].fn.call(f[y].context,u);break;case 3:f[y].fn.call(f[y].context,u,m);break;case 4:f[y].fn.call(f[y].context,u,m,h);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];f[y].fn.apply(f[y].context,b)}}return!0},o.prototype.on=function(d,u,m){return i(this,d,u,m,!1)},o.prototype.once=function(d,u,m){return i(this,d,u,m,!0)},o.prototype.removeListener=function(d,u,m,h){var x=r?r+d:d;if(!this._events[x])return this;if(!u)return l(this,x),this;var g=this._events[x];if(g.fn)g.fn===u&&(!h||g.once)&&(!m||g.context===m)&&l(this,x);else{for(var p=0,f=[],v=g.length;p<v;p++)(g[p].fn!==u||h&&!g[p].once||m&&g[p].context!==m)&&f.push(g[p]);f.length?this._events[x]=f.length===1?f[0]:f:l(this,x)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&l(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(rI);var tbe=rI.exports;const sbe=ls(tbe);var ej=new sbe,tj="recharts.syncMouseEvents";function Ou(t){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ou(t)}function rbe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function nbe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nI(n.key),n)}}function abe(t,s,r){return s&&nbe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function sj(t,s,r){return s=nI(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function nI(t){var s=ibe(t,"string");return Ou(s)=="symbol"?s:s+""}function ibe(t,s){if(Ou(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lbe=function(){function t(){rbe(this,t),sj(this,"activeIndex",0),sj(this,"coordinateList",[]),sj(this,"layout","horizontal")}return abe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,l=r.container,o=l===void 0?null:l,c=r.layout,d=c===void 0?null:c,u=r.offset,m=u===void 0?null:u,h=r.mouseHandlerCallback,x=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+c+d,h=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:m,pageY:h})}}}])}();function obe(t,s,r){if(r==="number"&&s===!0&&Array.isArray(t)){var n=t?.[0],a=t?.[1];if(n&&a&&Fe(n)&&Fe(a))return!0}return!1}function cbe(t,s,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?s.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:s.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function aI(t){var s=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,l=gs(s,r,n,a),o=gs(s,r,n,i);return{points:[l,o],cx:s,cy:r,radius:n,startAngle:a,endAngle:i}}function dbe(t,s,r){var n,a,i,l;if(t==="horizontal")n=s.x,i=n,a=r.top,l=r.top+r.height;else if(t==="vertical")a=s.y,l=a,n=r.left,i=r.left+r.width;else if(s.cx!=null&&s.cy!=null)if(t==="centric"){var o=s.cx,c=s.cy,d=s.innerRadius,u=s.outerRadius,m=s.angle,h=gs(o,c,d,m),x=gs(o,c,u,m);n=h.x,a=h.y,i=x.x,l=x.y}else return aI(s);return[{x:n,y:a},{x:i,y:l}]}function Eu(t){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Eu(t)}function ek(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gm(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?ek(Object(r),!0).forEach(function(n){ube(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ube(t,s,r){return s=mbe(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function mbe(t){var s=hbe(t,"string");return Eu(s)=="symbol"?s:s+""}function hbe(t,s){if(Eu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function xbe(t){var s,r,n=t.element,a=t.tooltipEventType,i=t.isActive,l=t.activeCoordinate,o=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,h=t.chartName,x=(s=n.props.cursor)!==null&&s!==void 0?s:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!l||h!=="ScatterChart"&&a!=="axis")return null;var g,p=px;if(h==="ScatterChart")g=l,p=Efe;else if(h==="BarChart")g=cbe(m,l,c,u),p=wN;else if(m==="radial"){var f=aI(l),v=f.cx,b=f.cy,y=f.radius,S=f.startAngle,w=f.endAngle;g={cx:v,cy:b,startAngle:S,endAngle:w,innerRadius:y,outerRadius:y},p=t6}else g={points:dbe(m,l,c)},p=px;var C=Gm(Gm(Gm(Gm({stroke:"#ccc",pointerEvents:"none"},c),g),pt(x,!1)),{},{payload:o,payloadIndex:d,className:At("recharts-tooltip-cursor",x.className)});return j.isValidElement(x)?j.cloneElement(x,C):j.createElement(p,C)}var pbe=["item"],fbe=["children","className","width","height","style","compact","title","desc"];function fc(t){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},fc(t)}function ho(){return ho=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ho.apply(this,arguments)}function tk(t,s){return vbe(t)||jbe(t,s)||lI(t,s)||gbe()}function gbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jbe(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,s!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==s);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function vbe(t){if(Array.isArray(t))return t}function sk(t,s){if(t==null)return{};var r=ybe(t,s),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ybe(t,s){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(s.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bbe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Nbe(t,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oI(n.key),n)}}function wbe(t,s,r){return s&&Nbe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sbe(t,s,r){return s=Fx(s),Cbe(t,iI()?Reflect.construct(s,r||[],Fx(t).constructor):s.apply(t,r))}function Cbe(t,s){if(s&&(fc(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pbe(t)}function Pbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iI=function(){return!!t})()}function Fx(t){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fx(t)}function kbe(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Fy(t,s)}function Fy(t,s){return Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fy(t,s)}function gc(t){return Dbe(t)||Tbe(t)||lI(t)||Abe()}function Abe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lI(t,s){if(t){if(typeof t=="string")return Ly(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ly(t,s)}}function Tbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dbe(t){if(Array.isArray(t))return Ly(t)}function Ly(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,n=new Array(s);r<s;r++)n[r]=t[r];return n}function rk(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function De(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?rk(Object(r),!0).forEach(function(n){ft(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ft(t,s,r){return s=oI(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function oI(t){var s=Obe(t,"string");return fc(s)=="symbol"?s:s+""}function Obe(t,s){if(fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,s);if(fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Ebe={xAxis:["bottom","top"],yAxis:["left","right"]},Mbe={width:"100%",height:"100%"},cI={x:0,y:0};function Hm(t){return t}var Rbe=function(s,r){return r==="horizontal"?s.x:r==="vertical"?s.y:r==="centric"?s.angle:s.radius},_be=function(s,r,n,a){var i=r.find(function(u){return u&&u.index===n});if(i){if(s==="horizontal")return{x:i.coordinate,y:a.y};if(s==="vertical")return{x:a.x,y:i.coordinate};if(s==="centric"){var l=i.coordinate,o=a.radius;return De(De(De({},a),gs(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return De(De(De({},a),gs(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return cI},Df=function(s,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,l=(n??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(gc(o),gc(d)):o},[]);return l.length>0?l:s&&s.length&&Fe(a)&&Fe(i)?s.slice(a,i+1):[]};function dI(t){return t==="number"?[0,"auto"]:void 0}var By=function(s,r,n,a){var i=s.graphicalItems,l=s.tooltipAxis,o=Df(r,s);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:r;m&&s.dataStartIndex+s.dataEndIndex!==0&&s.dataEndIndex-s.dataStartIndex>=n&&(m=m.slice(s.dataStartIndex,s.dataEndIndex+1));var h;if(l.dataKey&&!l.allowDuplicatedCategory){var x=m===void 0?o:m;h=Fh(x,l.dataKey,a)}else h=m&&m[n]||o[n];return h?[].concat(gc(c),[Y5(d,h)]):c},[])},nk=function(s,r,n,a){var i=a||{x:s.chartX,y:s.chartY},l=Rbe(i,n),o=s.orderedTooltipTicks,c=s.tooltipAxis,d=s.tooltipTicks,u=she(l,o,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,h=By(s,r,u,m),x=_be(n,o,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:h,activeCoordinate:x}}return null},Ibe=function(s,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=s.layout,m=s.children,h=s.stackOffset,x=U5(u,i);return n.reduce(function(g,p){var f,v=p.type.defaultProps!==void 0?De(De({},p.type.defaultProps),p.props):p.props,b=v.type,y=v.dataKey,S=v.allowDataOverflow,w=v.allowDuplicatedCategory,C=v.scale,k=v.ticks,A=v.includeHidden,N=v[l];if(g[N])return g;var M=Df(s.data,{graphicalItems:a.filter(function(Se){var z,L=l in Se.props?Se.props[l]:(z=Se.type.defaultProps)===null||z===void 0?void 0:z[l];return L===N}),dataStartIndex:c,dataEndIndex:d}),F=M.length,I,V,E;obe(v.domain,S,b)&&(I=Jv(v.domain,null,S),x&&(b==="number"||C!=="auto")&&(E=Nd(M,y,"category")));var G=dI(b);if(!I||I.length===0){var Y,Q=(Y=v.domain)!==null&&Y!==void 0?Y:G;if(y){if(I=Nd(M,y,b),b==="category"&&x){var T=GX(I);w&&T?(V=I,I=Cx(0,F)):w||(I=PC(Q,I,p).reduce(function(Se,z){return Se.indexOf(z)>=0?Se:[].concat(gc(Se),[z])},[]))}else if(b==="category")w?I=I.filter(function(Se){return Se!==""&&!kt(Se)}):I=PC(Q,I,p).reduce(function(Se,z){return Se.indexOf(z)>=0||z===""||kt(z)?Se:[].concat(gc(Se),[z])},[]);else if(b==="number"){var B=lhe(M,a.filter(function(Se){var z,L,le=l in Se.props?Se.props[l]:(z=Se.type.defaultProps)===null||z===void 0?void 0:z[l],Z="hide"in Se.props?Se.props.hide:(L=Se.type.defaultProps)===null||L===void 0?void 0:L.hide;return le===N&&(A||!Z)}),y,i,u);B&&(I=B)}x&&(b==="number"||C!=="auto")&&(E=Nd(M,y,"category"))}else x?I=Cx(0,F):o&&o[N]&&o[N].hasStack&&b==="number"?I=h==="expand"?[0,1]:W5(o[N].stackGroups,c,d):I=q5(M,a.filter(function(Se){var z=l in Se.props?Se.props[l]:Se.type.defaultProps[l],L="hide"in Se.props?Se.props.hide:Se.type.defaultProps.hide;return z===N&&(A||!L)}),b,u,!0);if(b==="number")I=$y(m,I,N,i,k),Q&&(I=Jv(Q,I,S));else if(b==="category"&&Q){var W=Q,he=I.every(function(Se){return W.indexOf(Se)>=0});he&&(I=W)}}return De(De({},g),{},ft({},N,De(De({},v),{},{axisType:i,domain:I,categoricalDomain:E,duplicateDomain:V,originalDomain:(f=v.domain)!==null&&f!==void 0?f:G,isCategorical:x,layout:u})))},{})},$be=function(s,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,l=r.axisIdKey,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=s.layout,m=s.children,h=Df(s.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),x=h.length,g=U5(u,i),p=-1;return n.reduce(function(f,v){var b=v.type.defaultProps!==void 0?De(De({},v.type.defaultProps),v.props):v.props,y=b[l],S=dI("number");if(!f[y]){p++;var w;return g?w=Cx(0,x):o&&o[y]&&o[y].hasStack?(w=W5(o[y].stackGroups,c,d),w=$y(m,w,y,i)):(w=Jv(S,q5(h,n.filter(function(C){var k,A,N=l in C.props?C.props[l]:(k=C.type.defaultProps)===null||k===void 0?void 0:k[l],M="hide"in C.props?C.props.hide:(A=C.type.defaultProps)===null||A===void 0?void 0:A.hide;return N===y&&!M}),"number",u),a.defaultProps.allowDataOverflow),w=$y(m,w,y,i)),De(De({},f),{},ft({},y,De(De({axisType:i},a.defaultProps),{},{hide:!0,orientation:Qr(Ebe,"".concat(i,".").concat(p%2),null),domain:w,originalDomain:S,isCategorical:g,layout:u})))}return f},{})},Fbe=function(s,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,l=r.graphicalItems,o=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=s.children,m="".concat(a,"Id"),h=Xr(u,i),x={};return h&&h.length?x=Ibe(s,{axes:h,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(x=$be(s,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),x},Lbe=function(s){var r=pi(s),n=Ra(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Qb(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:mx(r,n)}},ak=function(s){var r=s.children,n=s.defaultShowTooltip,a=qr(r,ac),i=0,l=0;return s.data&&s.data.length!==0&&(l=s.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!n}},Bbe=function(s){return!s||!s.length?!1:s.some(function(r){var n=Ia(r&&r.type);return n&&n.indexOf("Bar")>=0})},ik=function(s){return s==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:s==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:s==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Vbe=function(s,r){var n=s.props,a=s.graphicalItems,i=s.xAxisMap,l=i===void 0?{}:i,o=s.yAxisMap,c=o===void 0?{}:o,d=n.width,u=n.height,m=n.children,h=n.margin||{},x=qr(m,ac),g=qr(m,$a),p=Object.keys(c).reduce(function(w,C){var k=c[C],A=k.orientation;return!k.mirror&&!k.hide?De(De({},w),{},ft({},A,w[A]+k.width)):w},{left:h.left||0,right:h.right||0}),f=Object.keys(l).reduce(function(w,C){var k=l[C],A=k.orientation;return!k.mirror&&!k.hide?De(De({},w),{},ft({},A,Qr(w,"".concat(A))+k.height)):w},{top:h.top||0,bottom:h.bottom||0}),v=De(De({},f),p),b=v.bottom;x&&(v.bottom+=x.props.height||ac.defaultProps.height),g&&r&&(v=ahe(v,a,n,r));var y=d-v.left-v.right,S=u-v.top-v.bottom;return De(De({brushBottom:b},v),{},{width:Math.max(y,0),height:Math.max(S,0)})},qbe=function(s,r){if(r==="xAxis")return s[r].width;if(r==="yAxis")return s[r].height},MN=function(s){var r=s.chartName,n=s.GraphicalChild,a=s.defaultTooltipEventType,i=a===void 0?"axis":a,l=s.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=s.axisComponents,d=s.legendContent,u=s.formatAxisMap,m=s.defaultProps,h=function(v,b){var y=b.graphicalItems,S=b.stackGroups,w=b.offset,C=b.updateId,k=b.dataStartIndex,A=b.dataEndIndex,N=v.barSize,M=v.layout,F=v.barGap,I=v.barCategoryGap,V=v.maxBarSize,E=ik(M),G=E.numericAxisName,Y=E.cateAxisName,Q=Bbe(y),T=[];return y.forEach(function(B,W){var he=Df(v.data,{graphicalItems:[B],dataStartIndex:k,dataEndIndex:A}),Se=B.type.defaultProps!==void 0?De(De({},B.type.defaultProps),B.props):B.props,z=Se.dataKey,L=Se.maxBarSize,le=Se["".concat(G,"Id")],Z=Se["".concat(Y,"Id")],me={},U=c.reduce(function(be,ke){var Ge=b["".concat(ke.axisType,"Map")],Be=Se["".concat(ke.axisType,"Id")];Ge&&Ge[Be]||ke.axisType==="zAxis"||Ol();var Ie=Ge[Be];return De(De({},be),{},ft(ft({},ke.axisType,Ie),"".concat(ke.axisType,"Ticks"),Ra(Ie)))},me),je=U[Y],ye=U["".concat(Y,"Ticks")],ae=S&&S[le]&&S[le].hasStack&&fhe(B,S[le].stackGroups),pe=Ia(B.type).indexOf("Bar")>=0,Je=mx(je,ye),et=[],Pe=Q&&rhe({barSize:N,stackGroups:S,totalSize:qbe(U,Y)});if(pe){var mt,Mt,os=kt(L)?V:L,lr=(mt=(Mt=mx(je,ye,!0))!==null&&Mt!==void 0?Mt:os)!==null&&mt!==void 0?mt:0;et=nhe({barGap:F,barCategoryGap:I,bandSize:lr!==Je?lr:Je,sizeList:Pe[Z],maxBarSize:os}),lr!==Je&&(et=et.map(function(be){return De(De({},be),{},{position:De(De({},be.position),{},{offset:be.position.offset-lr/2})})}))}var ie=B&&B.type&&B.type.getComposedData;ie&&T.push({props:De(De({},ie(De(De({},U),{},{displayedData:he,props:v,dataKey:z,item:B,bandSize:Je,barPosition:et,offset:w,stackedData:ae,layout:M,dataStartIndex:k,dataEndIndex:A}))),{},ft(ft(ft({key:B.key||"item-".concat(W)},G,U[G]),Y,U[Y]),"animationId",C)),childIndex:nZ(B,v.children),item:B})}),T},x=function(v,b){var y=v.props,S=v.dataStartIndex,w=v.dataEndIndex,C=v.updateId;if(!v2({props:y}))return null;var k=y.children,A=y.layout,N=y.stackOffset,M=y.data,F=y.reverseStackOrder,I=ik(A),V=I.numericAxisName,E=I.cateAxisName,G=Xr(k,n),Y=xhe(M,G,"".concat(V,"Id"),"".concat(E,"Id"),N,F),Q=c.reduce(function(Se,z){var L="".concat(z.axisType,"Map");return De(De({},Se),{},ft({},L,Fbe(y,De(De({},z),{},{graphicalItems:G,stackGroups:z.axisType===V&&Y,dataStartIndex:S,dataEndIndex:w}))))},{}),T=Vbe(De(De({},Q),{},{props:y,graphicalItems:G}),b?.legendBBox);Object.keys(Q).forEach(function(Se){Q[Se]=u(y,Q[Se],T,Se.replace("Map",""),r)});var B=Q["".concat(E,"Map")],W=Lbe(B),he=h(y,De(De({},Q),{},{dataStartIndex:S,dataEndIndex:w,updateId:C,graphicalItems:G,stackGroups:Y,offset:T}));return De(De({formattedGraphicalItems:he,graphicalItems:G,offset:T,stackGroups:Y},W),Q)},g=function(f){function v(b){var y,S,w;return bbe(this,v),w=Sbe(this,v,[b]),ft(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ft(w,"accessibilityManager",new lbe),ft(w,"handleLegendBBoxUpdate",function(C){if(C){var k=w.state,A=k.dataStartIndex,N=k.dataEndIndex,M=k.updateId;w.setState(De({legendBBox:C},x({props:w.props,dataStartIndex:A,dataEndIndex:N,updateId:M},De(De({},w.state),{},{legendBBox:C}))))}}),ft(w,"handleReceiveSyncEvent",function(C,k,A){if(w.props.syncId===C){if(A===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(k)}}),ft(w,"handleBrushChange",function(C){var k=C.startIndex,A=C.endIndex;if(k!==w.state.dataStartIndex||A!==w.state.dataEndIndex){var N=w.state.updateId;w.setState(function(){return De({dataStartIndex:k,dataEndIndex:A},x({props:w.props,dataStartIndex:k,dataEndIndex:A,updateId:N},w.state))}),w.triggerSyncEvent({dataStartIndex:k,dataEndIndex:A})}}),ft(w,"handleMouseEnter",function(C){var k=w.getMouseInfo(C);if(k){var A=De(De({},k),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var N=w.props.onMouseEnter;bt(N)&&N(A,C)}}),ft(w,"triggeredAfterMouseMove",function(C){var k=w.getMouseInfo(C),A=k?De(De({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(A),w.triggerSyncEvent(A);var N=w.props.onMouseMove;bt(N)&&N(A,C)}),ft(w,"handleItemMouseEnter",function(C){w.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),ft(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),ft(w,"handleMouseMove",function(C){C.persist(),w.throttleTriggeredAfterMouseMove(C)}),ft(w,"handleMouseLeave",function(C){w.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};w.setState(k),w.triggerSyncEvent(k);var A=w.props.onMouseLeave;bt(A)&&A(k,C)}),ft(w,"handleOuterEvent",function(C){var k=rZ(C),A=Qr(w.props,"".concat(k));if(k&&bt(A)){var N,M;/.*touch.*/i.test(k)?M=w.getMouseInfo(C.changedTouches[0]):M=w.getMouseInfo(C),A((N=M)!==null&&N!==void 0?N:{},C)}}),ft(w,"handleClick",function(C){var k=w.getMouseInfo(C);if(k){var A=De(De({},k),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var N=w.props.onClick;bt(N)&&N(A,C)}}),ft(w,"handleMouseDown",function(C){var k=w.props.onMouseDown;if(bt(k)){var A=w.getMouseInfo(C);k(A,C)}}),ft(w,"handleMouseUp",function(C){var k=w.props.onMouseUp;if(bt(k)){var A=w.getMouseInfo(C);k(A,C)}}),ft(w,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),ft(w,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseDown(C.changedTouches[0])}),ft(w,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseUp(C.changedTouches[0])}),ft(w,"handleDoubleClick",function(C){var k=w.props.onDoubleClick;if(bt(k)){var A=w.getMouseInfo(C);k(A,C)}}),ft(w,"handleContextMenu",function(C){var k=w.props.onContextMenu;if(bt(k)){var A=w.getMouseInfo(C);k(A,C)}}),ft(w,"triggerSyncEvent",function(C){w.props.syncId!==void 0&&ej.emit(tj,w.props.syncId,C,w.eventEmitterSymbol)}),ft(w,"applySyncEvent",function(C){var k=w.props,A=k.layout,N=k.syncMethod,M=w.state.updateId,F=C.dataStartIndex,I=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)w.setState(De({dataStartIndex:F,dataEndIndex:I},x({props:w.props,dataStartIndex:F,dataEndIndex:I,updateId:M},w.state)));else if(C.activeTooltipIndex!==void 0){var V=C.chartX,E=C.chartY,G=C.activeTooltipIndex,Y=w.state,Q=Y.offset,T=Y.tooltipTicks;if(!Q)return;if(typeof N=="function")G=N(T,C);else if(N==="value"){G=-1;for(var B=0;B<T.length;B++)if(T[B].value===C.activeLabel){G=B;break}}var W=De(De({},Q),{},{x:Q.left,y:Q.top}),he=Math.min(V,W.x+W.width),Se=Math.min(E,W.y+W.height),z=T[G]&&T[G].value,L=By(w.state,w.props.data,G),le=T[G]?{x:A==="horizontal"?T[G].coordinate:he,y:A==="horizontal"?Se:T[G].coordinate}:cI;w.setState(De(De({},C),{},{activeLabel:z,activeCoordinate:le,activePayload:L,activeTooltipIndex:G}))}else w.setState(C)}),ft(w,"renderCursor",function(C){var k,A=w.state,N=A.isTooltipActive,M=A.activeCoordinate,F=A.activePayload,I=A.offset,V=A.activeTooltipIndex,E=A.tooltipAxisBandSize,G=w.getTooltipEventType(),Y=(k=C.props.active)!==null&&k!==void 0?k:N,Q=w.props.layout,T=C.key||"_recharts-cursor";return X.createElement(xbe,{key:T,activeCoordinate:M,activePayload:F,activeTooltipIndex:V,chartName:r,element:C,isActive:Y,layout:Q,offset:I,tooltipAxisBandSize:E,tooltipEventType:G})}),ft(w,"renderPolarAxis",function(C,k,A){var N=Qr(C,"type.axisType"),M=Qr(w.state,"".concat(N,"Map")),F=C.type.defaultProps,I=F!==void 0?De(De({},F),C.props):C.props,V=M&&M[I["".concat(N,"Id")]];return j.cloneElement(C,De(De({},V),{},{className:At(N,V.className),key:C.key||"".concat(k,"-").concat(A),ticks:Ra(V,!0)}))}),ft(w,"renderPolarGrid",function(C){var k=C.props,A=k.radialLines,N=k.polarAngles,M=k.polarRadius,F=w.state,I=F.radiusAxisMap,V=F.angleAxisMap,E=pi(I),G=pi(V),Y=G.cx,Q=G.cy,T=G.innerRadius,B=G.outerRadius;return j.cloneElement(C,{polarAngles:Array.isArray(N)?N:Ra(G,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(M)?M:Ra(E,!0).map(function(W){return W.coordinate}),cx:Y,cy:Q,innerRadius:T,outerRadius:B,key:C.key||"polar-grid",radialLines:A})}),ft(w,"renderLegend",function(){var C=w.state.formattedGraphicalItems,k=w.props,A=k.children,N=k.width,M=k.height,F=w.props.margin||{},I=N-(F.left||0)-(F.right||0),V=B5({children:A,formattedGraphicalItems:C,legendWidth:I,legendContent:d});if(!V)return null;var E=V.item,G=sk(V,pbe);return j.cloneElement(E,De(De({},G),{},{chartWidth:N,chartHeight:M,margin:F,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),ft(w,"renderTooltip",function(){var C,k=w.props,A=k.children,N=k.accessibilityLayer,M=qr(A,_r);if(!M)return null;var F=w.state,I=F.isTooltipActive,V=F.activeCoordinate,E=F.activePayload,G=F.activeLabel,Y=F.offset,Q=(C=M.props.active)!==null&&C!==void 0?C:I;return j.cloneElement(M,{viewBox:De(De({},Y),{},{x:Y.left,y:Y.top}),active:Q,label:G,payload:Q?E:[],coordinate:V,accessibilityLayer:N})}),ft(w,"renderBrush",function(C){var k=w.props,A=k.margin,N=k.data,M=w.state,F=M.offset,I=M.dataStartIndex,V=M.dataEndIndex,E=M.updateId;return j.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Vm(w.handleBrushChange,C.props.onChange),data:N,x:Fe(C.props.x)?C.props.x:F.left,y:Fe(C.props.y)?C.props.y:F.top+F.height+F.brushBottom-(A.bottom||0),width:Fe(C.props.width)?C.props.width:F.width,startIndex:I,endIndex:V,updateId:"brush-".concat(E)})}),ft(w,"renderReferenceElement",function(C,k,A){if(!C)return null;var N=w,M=N.clipPathId,F=w.state,I=F.xAxisMap,V=F.yAxisMap,E=F.offset,G=C.type.defaultProps||{},Y=C.props,Q=Y.xAxisId,T=Q===void 0?G.xAxisId:Q,B=Y.yAxisId,W=B===void 0?G.yAxisId:B;return j.cloneElement(C,{key:C.key||"".concat(k,"-").concat(A),xAxis:I[T],yAxis:V[W],viewBox:{x:E.left,y:E.top,width:E.width,height:E.height},clipPathId:M})}),ft(w,"renderActivePoints",function(C){var k=C.item,A=C.activePoint,N=C.basePoint,M=C.childIndex,F=C.isRange,I=[],V=k.props.key,E=k.item.type.defaultProps!==void 0?De(De({},k.item.type.defaultProps),k.item.props):k.item.props,G=E.activeDot,Y=E.dataKey,Q=De(De({index:M,dataKey:Y,cx:A.x,cy:A.y,r:4,fill:NN(k.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},pt(G,!1)),Lh(G));return I.push(v.renderActiveDot(G,Q,"".concat(V,"-activePoint-").concat(M))),N?I.push(v.renderActiveDot(G,De(De({},Q),{},{cx:N.x,cy:N.y}),"".concat(V,"-basePoint-").concat(M))):F&&I.push(null),I}),ft(w,"renderGraphicChild",function(C,k,A){var N=w.filterFormatItem(C,k,A);if(!N)return null;var M=w.getTooltipEventType(),F=w.state,I=F.isTooltipActive,V=F.tooltipAxis,E=F.activeTooltipIndex,G=F.activeLabel,Y=w.props.children,Q=qr(Y,_r),T=N.props,B=T.points,W=T.isRange,he=T.baseLine,Se=N.item.type.defaultProps!==void 0?De(De({},N.item.type.defaultProps),N.item.props):N.item.props,z=Se.activeDot,L=Se.hide,le=Se.activeBar,Z=Se.activeShape,me=!!(!L&&I&&Q&&(z||le||Z)),U={};M!=="axis"&&Q&&Q.props.trigger==="click"?U={onClick:Vm(w.handleItemMouseEnter,C.props.onClick)}:M!=="axis"&&(U={onMouseLeave:Vm(w.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Vm(w.handleItemMouseEnter,C.props.onMouseEnter)});var je=j.cloneElement(C,De(De({},N.props),U));function ye(ke){return typeof V.dataKey=="function"?V.dataKey(ke.payload):null}if(me)if(E>=0){var ae,pe;if(V.dataKey&&!V.allowDuplicatedCategory){var Je=typeof V.dataKey=="function"?ye:"payload.".concat(V.dataKey.toString());ae=Fh(B,Je,G),pe=W&&he&&Fh(he,Je,G)}else ae=B?.[E],pe=W&&he&&he[E];if(Z||le){var et=C.props.activeIndex!==void 0?C.props.activeIndex:E;return[j.cloneElement(C,De(De(De({},N.props),U),{},{activeIndex:et})),null,null]}if(!kt(ae))return[je].concat(gc(w.renderActivePoints({item:N,activePoint:ae,basePoint:pe,childIndex:E,isRange:W})))}else{var Pe,mt=(Pe=w.getItemByXY(w.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:je},Mt=mt.graphicalItem,os=Mt.item,lr=os===void 0?C:os,ie=Mt.childIndex,be=De(De(De({},N.props),U),{},{activeIndex:ie});return[j.cloneElement(lr,be),null,null]}return W?[je,null,null]:[je,null]}),ft(w,"renderCustomized",function(C,k,A){return j.cloneElement(C,De(De({key:"recharts-customized-".concat(A)},w.props),w.state))}),ft(w,"renderMap",{CartesianGrid:{handler:Hm,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Hm},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Hm},YAxis:{handler:Hm},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((y=b.id)!==null&&y!==void 0?y:$c("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=L_(w.triggeredAfterMouseMove,(S=b.throttleDelay)!==null&&S!==void 0?S:1e3/60),w.state={},w}return kbe(v,f),wbe(v,[{key:"componentDidMount",value:function(){var y,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,S=y.children,w=y.data,C=y.height,k=y.layout,A=qr(S,_r);if(A){var N=A.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,F=By(this.state,w,N,M),I=this.state.tooltipTicks[N].coordinate,V=(this.state.offset.top+C)/2,E=k==="horizontal",G=E?{x:I,y:V}:{y:I,x:V},Y=this.state.formattedGraphicalItems.find(function(T){var B=T.item;return B.type.name==="Scatter"});Y&&(G=De(De({},G),Y.props.points[N].tooltipPosition),F=Y.props.points[N].tooltipPayload);var Q={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:M,activePayload:F,activeCoordinate:G};this.setState(Q),this.renderCursor(A),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var w,C;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(y){xv([qr(y.children,_r)],[qr(this.props.children,_r)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=qr(this.props.children,_r);if(y&&typeof y.props.shared=="boolean"){var S=y.props.shared?"axis":"item";return o.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var S=this.container,w=S.getBoundingClientRect(),C=Doe(w),k={chartX:Math.round(y.pageX-C.left),chartY:Math.round(y.pageY-C.top)},A=w.width/S.offsetWidth||1,N=this.inRange(k.chartX,k.chartY,A);if(!N)return null;var M=this.state,F=M.xAxisMap,I=M.yAxisMap,V=this.getTooltipEventType(),E=nk(this.state,this.props.data,this.props.layout,N);if(V!=="axis"&&F&&I){var G=pi(F).scale,Y=pi(I).scale,Q=G&&G.invert?G.invert(k.chartX):null,T=Y&&Y.invert?Y.invert(k.chartY):null;return De(De({},k),{},{xValue:Q,yValue:T},E)}return E?De(De({},k),E):null}},{key:"inRange",value:function(y,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,k=y/w,A=S/w;if(C==="horizontal"||C==="vertical"){var N=this.state.offset,M=k>=N.left&&k<=N.left+N.width&&A>=N.top&&A<=N.top+N.height;return M?{x:k,y:A}:null}var F=this.state,I=F.angleAxisMap,V=F.radiusAxisMap;if(I&&V){var E=pi(I);return TC({x:k,y:A},E)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,S=this.getTooltipEventType(),w=qr(y,_r),C={};w&&S==="axis"&&(w.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=Lh(this.props,this.handleOuterEvent);return De(De({},k),C)}},{key:"addListener",value:function(){ej.on(tj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ej.removeListener(tj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,S,w){for(var C=this.state.formattedGraphicalItems,k=0,A=C.length;k<A;k++){var N=C[k];if(N.item===y||N.props.key===y.key||S===Ia(N.item.type)&&w===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,S=this.state.offset,w=S.left,C=S.top,k=S.height,A=S.width;return X.createElement("defs",null,X.createElement("clipPath",{id:y},X.createElement("rect",{x:w,y:C,height:k,width:A})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(S,w){var C=tk(w,2),k=C[0],A=C[1];return De(De({},S),{},ft({},k,A.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(S,w){var C=tk(w,2),k=C[0],A=C[1];return De(De({},S),{},ft({},k,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[y])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(y){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[y])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(y){var S=this.state,w=S.formattedGraphicalItems,C=S.activeItem;if(w&&w.length)for(var k=0,A=w.length;k<A;k++){var N=w[k],M=N.props,F=N.item,I=F.type.defaultProps!==void 0?De(De({},F.type.defaultProps),F.props):F.props,V=Ia(F.type);if(V==="Bar"){var E=(M.data||[]).find(function(T){return mfe(y,T)});if(E)return{graphicalItem:N,payload:E}}else if(V==="RadialBar"){var G=(M.data||[]).find(function(T){return TC(y,T)});if(G)return{graphicalItem:N,payload:G}}else if(wf(N,C)||Sf(N,C)||Pu(N,C)){var Y=eje({graphicalItem:N,activeTooltipItem:C,itemData:I.data}),Q=I.activeIndex===void 0?Y:I.activeIndex;return{graphicalItem:De(De({},N),{},{childIndex:Q}),payload:Pu(N,C)?I.data[Y]:N.props.data[Y]}}}return null}},{key:"render",value:function(){var y=this;if(!v2(this))return null;var S=this.props,w=S.children,C=S.className,k=S.width,A=S.height,N=S.style,M=S.compact,F=S.title,I=S.desc,V=sk(S,fbe),E=pt(V,!1);if(M)return X.createElement($P,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(fv,ho({},E,{width:k,height:A,title:F,desc:I}),this.renderClipPath(),b2(w,this.renderMap)));if(this.props.accessibilityLayer){var G,Y;E.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,E.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",E.onKeyDown=function(T){y.accessibilityManager.keyboardEvent(T)},E.onFocus=function(){y.accessibilityManager.focus()}}var Q=this.parseEventsOfWrapper();return X.createElement($P,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",ho({className:At("recharts-wrapper",C),style:De({position:"relative",cursor:"default",width:k,height:A},N)},Q,{ref:function(B){y.container=B}}),X.createElement(fv,ho({},E,{width:k,height:A,title:F,desc:I,style:Mbe}),this.renderClipPath(),b2(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);ft(g,"displayName",r),ft(g,"defaultProps",De({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),ft(g,"getDerivedStateFromProps",function(f,v){var b=f.dataKey,y=f.data,S=f.children,w=f.width,C=f.height,k=f.layout,A=f.stackOffset,N=f.margin,M=v.dataStartIndex,F=v.dataEndIndex;if(v.updateId===void 0){var I=ak(f);return De(De(De({},I),{},{updateId:0},x(De(De({props:f},I),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:y,prevWidth:w,prevHeight:C,prevLayout:k,prevStackOffset:A,prevMargin:N,prevChildren:S})}if(b!==v.prevDataKey||y!==v.prevData||w!==v.prevWidth||C!==v.prevHeight||k!==v.prevLayout||A!==v.prevStackOffset||!Co(N,v.prevMargin)){var V=ak(f),E={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},G=De(De({},nk(v,y,k)),{},{updateId:v.updateId+1}),Y=De(De(De({},V),E),G);return De(De(De({},Y),x(De({props:f},Y),v)),{},{prevDataKey:b,prevData:y,prevWidth:w,prevHeight:C,prevLayout:k,prevStackOffset:A,prevMargin:N,prevChildren:S})}if(!xv(S,v.prevChildren)){var Q,T,B,W,he=qr(S,ac),Se=he&&(Q=(T=he.props)===null||T===void 0?void 0:T.startIndex)!==null&&Q!==void 0?Q:M,z=he&&(B=(W=he.props)===null||W===void 0?void 0:W.endIndex)!==null&&B!==void 0?B:F,L=Se!==M||z!==F,le=!kt(y),Z=le&&!L?v.updateId:v.updateId+1;return De(De({updateId:Z},x(De(De({props:f},v),{},{updateId:Z,dataStartIndex:Se,dataEndIndex:z}),v)),{},{prevChildren:S,dataStartIndex:Se,dataEndIndex:z})}return null}),ft(g,"renderActiveDot",function(f,v,b){var y;return j.isValidElement(f)?y=j.cloneElement(f,v):bt(f)?y=f(v):y=X.createElement(jf,v),X.createElement(qt,{className:"recharts-active-dot",key:b},y)});var p=j.forwardRef(function(v,b){return X.createElement(g,ho({},v,{ref:b}))});return p.displayName=g.displayName,p},Ube=MN({chartName:"LineChart",GraphicalChild:fl,axisComponents:[{axisType:"xAxis",AxisComp:hc},{axisType:"yAxis",AxisComp:pc}],formatAxisMap:T6}),zbe=MN({chartName:"BarChart",GraphicalChild:Ba,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:hc},{axisType:"yAxis",AxisComp:pc}],formatAxisMap:T6}),Vy=MN({chartName:"PieChart",GraphicalChild:Hn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Nf},{axisType:"radiusAxis",AxisComp:yf}],formatAxisMap:Phe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Gbe=[{name:"Airbnb",value:45,color:"#FF5A5F"},{name:"Booking.com",value:25,color:"#003580"},{name:"VRBO",value:20,color:"#FFD700"},{name:"Direct",value:10,color:"#4CAF50"}];function Hbe(t){const s=t.match(/src="([^"]+)"/);if(s&&s[1]){const r=s[1];if(r.match(/pb=([^&]+)/)){const a=r.match(/!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/);if(a){const i=a[1],l=a[2];return`https://www.google.com/maps/search/?api=1&query=${i},${l}`}}return r.includes("maps.google.com")&&!r.includes("/embed"),r}return t}const eo={description:"Beautiful luxury villa with stunning ocean views, private pool, and modern amenities. Perfect for families or groups seeking a premium tropical experience.",spaceDescription:"3 spacious bedrooms with en-suite bathrooms, open-plan living area, fully equipped kitchen, private infinity pool, and multiple terraces with panoramic views.",interaction:"Our dedicated property manager is available 24/7 to assist with any requests. We provide personalized concierge services and local recommendations.",neighborhood:"Located in the prestigious Bophut area, close to pristine beaches, luxury resorts, world-class restaurants, and vibrant nightlife.",transit:"15 minutes from Samui Airport, complimentary airport transfers available. Scooter and car rental services can be arranged.",otherNotes:"Strict no-smoking policy. No pets allowed. Minimum 3-night stay required. Check-in: 3 PM, Check-out: 11 AM."};function oi({label:t,href:s,icon:r,variant:n="default",propertyId:a,onClick:i}){const[,l]=pr(),{toast:o}=Xe(),c=()=>{try{i?i():(s.includes("/property/")||s.includes("/finances")||s.includes("/finance-hub")||s.includes("/bookings")||s.includes("/tasks")||s.includes("/utility"))&&a?l(`${s}?propertyId=${a}`):l(s)}catch(d){o({title:"Navigation Error",description:`Failed to navigate to ${t}. This feature will be available soon.`,variant:"destructive"}),console.error("Navigation error:",d)}};return e.jsxs(R,{variant:n,onClick:c,className:"w-full h-12 flex items-center justify-center gap-2",children:[e.jsx(r,{className:"w-4 h-4"}),t]})}function Kbe({property:t,onUpdate:s}){const[r,n]=j.useState(t.googleMapsLink||""),[a,i]=j.useState(!1),{toast:l}=Xe(),o=ut(),c=Ce({mutationFn:async u=>fe("PUT",`/api/properties/${t.id}`,u),onSuccess:()=>{o.invalidateQueries({queryKey:[`/api/properties/${t.id}`]}),l({title:"Success",description:"Google Maps link updated successfully"}),i(!1),s()},onError:u=>{l({title:"Error",description:`Failed to update map link: ${u.message}`,variant:"destructive"})}}),d=()=>{c.mutate({googleMapsLink:r})};return e.jsxs(Ve,{open:a,onOpenChange:i,children:[e.jsx(Yt,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"sm",className:"ml-2 p-1 h-6 w-6",children:e.jsx(Or,{className:"w-3 h-3"})})}),e.jsxs(qe,{className:"max-w-2xl",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Edit Google Maps Link"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"mapLink",children:"Google Maps Link or Embed HTML"}),e.jsx(nt,{id:"mapLink",value:r,onChange:u=>n(u.target.value),placeholder:"Paste Google Maps share link or embed HTML code here...",className:"mt-2 min-h-[100px]"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"You can paste either a Google Maps share link (https://maps.google.com/...) or full embed HTML code"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(R,{onClick:d,disabled:c.isPending,children:c.isPending?"Saving...":"Save"})]})]})]})]})}function to({title:t,text:s}){return e.jsxs(O,{className:"h-full",children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-base",children:t})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s||"Not available."})})]})}function Wbe({data:t}){return e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Booking Source Breakdown"]})}),e.jsx(D,{children:e.jsx("div",{className:"h-80",children:e.jsx(hd,{width:"100%",height:"100%",children:e.jsxs(Vy,{children:[e.jsx(Hn,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:r})=>`${s} ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((s,r)=>e.jsx(Yo,{fill:s.color},`cell-${r}`))}),e.jsx(_r,{}),e.jsx($a,{})]})})})})]})}const Ybe=Qt({docType:Ne().min(1,"Document type is required"),fileUrl:Ne().min(1,"File URL is required"),expiryDate:Ne().optional()});function Qbe({propertyId:t,onSuccess:s}){const[r,n]=j.useState(!1),{toast:a}=Xe(),{user:i}=Rr(),l=ut(),o=Ft({resolver:es(Ybe),defaultValues:{docType:"",fileUrl:"",expiryDate:""}}),c=Ce({mutationFn:async d=>{console.log("🚀 Document upload mutation started",d);const u={...d,propertyId:parseInt(t),organizationId:i?.organizationId||"default-org",uploadedBy:i?.id||"unknown"};console.log("📦 Payload:",u);const m=await fe("POST","/api/property-documents",u);return console.log("✅ Document upload response:",m),m},onSuccess:()=>{console.log("✅ Document upload successful"),mn.delete("/api/property-documents/expiring?days=30"),a({title:"Document Uploaded",description:"Property document has been uploaded successfully."}),l.invalidateQueries({queryKey:["/api/property-documents"]}),l.invalidateQueries({queryKey:[`/api/property-documents/property/${t}`]}),l.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),l.refetchQueries({queryKey:["/api/property-documents/expiring?days=30"]}),l.refetchQueries({queryKey:[`/api/property-documents/property/${t}`]}),o.reset(),n(!1),s()},onError:d=>{console.error("❌ Document upload failed:",d),a({title:"Upload Failed",description:d.message,variant:"destructive"})}});return e.jsxs(Ve,{open:r,onOpenChange:n,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{className:"w-full","data-testid":"upload-document-button",children:[e.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Upload Document"]})}),e.jsxs(qe,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Upload Property Document"})}),e.jsx(Wt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d=>{console.log("📝 Form submitted with data:",d),console.log("🔍 Form errors:",o.formState.errors),c.mutate(d)}),className:"space-y-4",children:[e.jsx(de,{control:o.control,name:"docType",render:({field:d})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Document Type"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"e.g., License, Contract, Invoice",...d,"data-testid":"input-doc-type"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"fileUrl",render:({field:d})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Document Name / File URL"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"e.g., tourism-license-2025.pdf",...d,"data-testid":"input-file-url"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"expiryDate",render:({field:d})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Expiry Date (Optional)"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...d,"data-testid":"input-expiry-date"})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-document",children:c.isPending?"Uploading...":"Upload"})]})]})})]})]})}const Xbe=Qt({insurerName:Ne().min(1,"Insurance provider is required"),policyNumber:Ne().optional(),coverageDetails:Ne().optional(),expiryDate:Ne().optional()});function Zbe({propertyId:t,onSuccess:s}){const[r,n]=j.useState(!1),{toast:a}=Xe(),{user:i}=Rr(),l=ut(),o=Ft({resolver:es(Xbe),defaultValues:{insurerName:"",policyNumber:"",coverageDetails:"",expiryDate:""}}),c=Ce({mutationFn:async d=>{console.log("🚀 Insurance mutation started",d);const u={...d,propertyId:parseInt(t),uploadedBy:i?.id||"unknown"};console.log("📦 Payload:",u);const m=await fe("POST","/api/property-insurance",u);return console.log("✅ Insurance response:",m),m},onSuccess:()=>{console.log("✅ Insurance added successful"),mn.delete("/api/property-insurance/expiring/30"),a({title:"Insurance Added",description:"Property insurance has been added successfully."}),l.invalidateQueries({queryKey:["/api/property-insurance"]}),l.invalidateQueries({queryKey:[`/api/property-insurance/property/${t}`]}),l.invalidateQueries({queryKey:["/api/property-insurance/expiring/30"]}),l.refetchQueries({queryKey:["/api/property-insurance/expiring/30"]}),l.refetchQueries({queryKey:[`/api/property-insurance/property/${t}`]}),o.reset(),n(!1),s()},onError:d=>{console.error("❌ Insurance failed:",d),a({title:"Failed to Add Insurance",description:d.message,variant:"destructive"})}});return e.jsxs(Ve,{open:r,onOpenChange:n,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{className:"w-full","data-testid":"add-insurance-button",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Add Insurance"]})}),e.jsxs(qe,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Add Property Insurance"})}),e.jsx(Wt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d=>{console.log("📝 Insurance form submitted with data:",d),console.log("🔍 Form errors:",o.formState.errors),c.mutate(d)}),className:"space-y-4",children:[e.jsx(de,{control:o.control,name:"insurerName",render:({field:d})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Insurance Provider"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"e.g., AXA Thailand, Bangkok Insurance",...d,"data-testid":"input-insurer-name"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"policyNumber",render:({field:d})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Policy Number (Optional)"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"e.g., POL-2025-12345",...d,"data-testid":"input-policy-number"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"coverageDetails",render:({field:d})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Coverage Details (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"e.g., Fire, flood, theft coverage up to 10M THB",...d,"data-testid":"input-coverage-details"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"expiryDate",render:({field:d})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Expiry Date (Optional)"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...d,"data-testid":"input-insurance-expiry"})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:c.isPending,"data-testid":"button-submit-insurance",children:c.isPending?"Adding...":"Add Insurance"})]})]})})]})]})}function Jbe(){const[,t]=sF("/property/:id"),[,s]=pr(),r=t?.id,{user:n}=Rr(),a=n?.role||"guest",{toast:i}=Xe(),{data:l,isLoading:o}=ge({queryKey:[`/api/properties/${r}`],enabled:!!r}),{data:c=[],refetch:d}=ge({queryKey:[`/api/property-documents/property/${r}`],enabled:!!r,staleTime:0});console.log("📄 Documents data:",c,"Length:",Array.isArray(c)?c.length:"not array");const{data:u=[],refetch:m}=ge({queryKey:[`/api/property-insurance/property/${r}`],enabled:!!r,staleTime:0});if(console.log("🛡️ Insurance data:",u,"Length:",Array.isArray(u)?u.length:"not array"),j.useEffect(()=>{if(c&&Array.isArray(c)&&c.length>0){const v=new Date,b=c.filter(y=>y.expiryDate?new Date(y.expiryDate)<v:!1);b.length>0&&b.forEach(y=>{i({title:"⚠️ Document Expired",description:`${y.docType} for ${l?.name||"this property"} expired on ${new Date(y.expiryDate).toLocaleDateString()}`,variant:"destructive"})})}},[c,l,i]),j.useEffect(()=>{if(u&&Array.isArray(u)&&u.length>0){const v=new Date,b=u.filter(y=>y.expiryDate?new Date(y.expiryDate)<v:!1);b.length>0&&b.forEach(y=>{i({title:"⚠️ Insurance Expired",description:`${y.insuranceType} for ${l?.name||"this property"} expired on ${new Date(y.expiryDate).toLocaleDateString()}`,variant:"destructive"})})}},[u,l,i]),o)return e.jsx("div",{className:"fixed inset-0 z-[9999] grid place-items-center bg-white/70 backdrop-blur-sm",children:e.jsx("div",{className:"text-lg font-medium text-slate-600",children:"Loading property details..."})});if(!l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Property Not Found"}),e.jsx(R,{onClick:()=>s("/property-hub"),children:"Back to Properties"})]})});if(a==="guest")return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to view this property"}),e.jsx(R,{onClick:()=>s("/"),children:"Go to Dashboard"})]})});const h=l.address||[l.addressLine1,l.city,l.country].filter(Boolean).join(", ")||"Location unavailable";l.bedrooms??l.rooms?.bedrooms??l.numBedrooms??l.bedroomCount,l.bathrooms??l.rooms?.bathrooms??l.numBathrooms??l.bathroomCount,l.maxGuests??l.accommodates??l.guests??l.maxOccupancy,l.pricePerNight??null??l.baseNightlyRate??l.defaultDailyPrice??l.pricing?.defaultDailyPrice,l.currency??l.pricing?.currency;const x=l.status==="active"?"default":l.status==="maintenance"?"secondary":"destructive";return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>s("/property-hub"),className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"w-4 h-4"}),"Back to Properties"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"w-full lg:w-2/3",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(is,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("button",{onClick:()=>{const v=l.googleMapsLink?l.googleMapsLink.includes("<iframe")?Hbe(l.googleMapsLink):l.googleMapsLink:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(l.address)}`;window.open(v,"_blank")},className:"text-lg text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors flex items-center gap-1",title:"View on Google Maps",children:[h,e.jsx(ma,{className:"w-4 h-4"})]}),a==="admin"&&e.jsx(Kbe,{property:l,onUpdate:()=>{}})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ki,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.bathrooms," Bathrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(UT,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.bathrooms," Bathrooms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.maxGuests||"N/A"," Guests"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsxs("span",{children:[xt(parseFloat(l.pricePerNight||"0")),"/night"]})]})]})]}),e.jsx("div",{className:"w-full lg:w-1/3",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Quick Stats"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(q,{variant:x,children:l.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Property ID:"}),e.jsxs("span",{className:"font-medium",children:["#",l.id]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Occupancy:"}),e.jsxs("span",{className:"font-medium",children:[78,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Rating:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(us,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:4.8}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",152," reviews)"]})]})]})]})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsx(Wbe,{data:Gbe})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(to,{title:"General Description",text:eo.description}),e.jsx(to,{title:"Space Description",text:eo.spaceDescription}),e.jsx(to,{title:"Guest Interaction",text:eo.interaction}),e.jsx(to,{title:"Neighborhood",text:eo.neighborhood}),e.jsx(to,{title:"Transportation",text:eo.transit}),e.jsx(to,{title:"Other Notes",text:eo.otherNotes})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),"Property Management Actions"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(oi,{label:"View Tasks",href:"/tasks",icon:Ai,propertyId:l?.id}),e.jsx(oi,{label:"View Bookings",href:"/bookings",icon:We,propertyId:l?.id}),e.jsx(oi,{label:"Edit Property",href:`/property/${l?.id}/edit`,icon:Lt,propertyId:l?.id}),e.jsx(oi,{label:"View Utilities",href:"/utility-tracker",icon:yo,variant:"outline"}),e.jsx(oi,{label:"View Finances",href:"/finance-hub",icon:He,variant:"outline",propertyId:l.id.toString()}),e.jsx(oi,{label:"Property Info",href:"/property-info",icon:$j,variant:"outline",onClick:()=>{i({title:"Property Information",description:"Detailed property information panel is displayed above. Additional settings available in admin dashboard."})}}),e.jsx(oi,{label:"Documents",href:"#documents-section",icon:dt,variant:"outline",onClick:()=>{document.getElementById("documents-section")?.scrollIntoView({behavior:"smooth"})}}),e.jsx(oi,{label:"View Calendar",href:"/multi-property-calendar",icon:us})]})})]}),e.jsxs("div",{id:"documents-section",className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),"Property Documents"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload property documents like licenses, contracts, and permits with expiry dates to receive alerts."}),e.jsx(Qbe,{propertyId:l.id,onSuccess:()=>{}}),c.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Uploaded Documents"}),c.map(v=>{const b=v.expiryDate&&new Date(v.expiryDate)<=new Date(Date.now()+2592e6),y=v.expiryDate&&new Date(v.expiryDate)<new Date;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg","data-testid":`document-${v.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:v.docType}),e.jsx("div",{className:"text-xs text-muted-foreground",children:v.fileUrl}),v.expiryDate&&e.jsxs("div",{className:"text-xs mt-1",children:["Expires:"," ",new Date(v.expiryDate).toLocaleDateString()]})]}),y&&e.jsx(q,{variant:"destructive",className:"ml-2",children:"🔴 Expired"}),b&&!y&&e.jsx(q,{variant:"secondary",className:"ml-2 bg-orange-500 text-white",children:"🟠 Expiring Soon"})]},v.id)})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5"}),"Property Insurance"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add property insurance details with expiry dates to track coverage and receive renewal alerts."}),e.jsx(Zbe,{propertyId:l.id,onSuccess:()=>{}}),u.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Insurance Policies"}),u.map(v=>{const b=v.expiryDate&&new Date(v.expiryDate)<=new Date(Date.now()+2592e6),y=v.expiryDate&&new Date(v.expiryDate)<new Date;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg","data-testid":`insurance-${v.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:v.insurerName}),v.policyNumber&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Policy: ",v.policyNumber]}),v.expiryDate&&e.jsxs("div",{className:"text-xs mt-1",children:["Expires:"," ",new Date(v.expiryDate).toLocaleDateString()]})]}),y&&e.jsx(q,{variant:"destructive",className:"ml-2",children:"🔴 Expired"}),b&&!y&&e.jsx(q,{variant:"secondary",className:"ml-2 bg-orange-500 text-white",children:"🟠 Expiring Soon"})]},v.id)})]})]})]})]})]})})}function eNe(){const{id:t}=JA(),[,s]=pr(),{toast:r}=Xe(),n=ut(),{data:a,isLoading:i}=ge({queryKey:[`/api/properties/${t}`]}),[l,o]=j.useState({name:"",address:"",description:"",bedrooms:"",bathrooms:"",maxGuests:"",pricePerNight:"",status:"active",ownerId:""});j.useEffect(()=>{a&&o({name:a.name||"",address:a.address||"",description:a.description||"",bedrooms:a.bedrooms?.toString()||"",bathrooms:a.bathrooms?.toString()||"",maxGuests:a.maxGuests?.toString()||"",pricePerNight:a.pricePerNight?.toString()||"",status:a.status||"active",ownerId:a.ownerId?.toString()||""})},[a]);const c=Ce({mutationFn:async u=>await fe("PUT",`/api/properties/${t}`,u),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/properties"]}),n.invalidateQueries({queryKey:[`/api/properties/${t}`]}),r({title:"Success",description:"Property updated successfully"}),s(`/property/${t}`)},onError:u=>{r({title:"Error",description:u.message||"Failed to update property",variant:"destructive"})}}),d=u=>{u.preventDefault();const m={name:l.name,address:l.address,description:l.description,bedrooms:parseInt(l.bedrooms)||0,bathrooms:parseInt(l.bathrooms)||0,maxGuests:parseInt(l.maxGuests)||0,pricePerNight:parseFloat(l.pricePerNight)||0,status:l.status,ownerId:l.ownerId?parseInt(l.ownerId):null};c.mutate(m)};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ts,{className:"h-8 w-8 animate-spin text-primary"})}):a?e.jsx("div",{className:"min-h-screen mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(R,{variant:"ghost",onClick:()=>s(`/property/${t}`),className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Back to Property Details"]})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{children:["Edit Property: ",a.name]})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"name",children:"Property Name *"}),e.jsx(H,{id:"name",value:l.name,onChange:u=>o({...l,name:u.target.value}),required:!0,"data-testid":"input-property-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"address",children:"Address *"}),e.jsx(H,{id:"address",value:l.address,onChange:u=>o({...l,address:u.target.value}),required:!0,"data-testid":"input-property-address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(H,{id:"bedrooms",type:"number",value:l.bedrooms,onChange:u=>o({...l,bedrooms:u.target.value}),min:"0","data-testid":"input-property-bedrooms"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(H,{id:"bathrooms",type:"number",value:l.bathrooms,onChange:u=>o({...l,bathrooms:u.target.value}),min:"0",step:"0.5","data-testid":"input-property-bathrooms"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"maxGuests",children:"Max Guests"}),e.jsx(H,{id:"maxGuests",type:"number",value:l.maxGuests,onChange:u=>o({...l,maxGuests:u.target.value}),min:"0","data-testid":"input-property-maxGuests"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"pricePerNight",children:"Price Per Night"}),e.jsx(H,{id:"pricePerNight",type:"number",value:l.pricePerNight,onChange:u=>o({...l,pricePerNight:u.target.value}),min:"0",step:"0.01","data-testid":"input-property-price"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"status",children:"Status"}),e.jsxs(te,{value:l.status,onValueChange:u=>o({...l,status:u}),children:[e.jsx(J,{"data-testid":"select-property-status",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"inactive",children:"Inactive"}),e.jsx(P,{value:"maintenance",children:"Maintenance"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"description",children:"Description"}),e.jsx(nt,{id:"description",value:l.description,onChange:u=>o({...l,description:u.target.value}),rows:4,"data-testid":"textarea-property-description"})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>s(`/property/${t}`),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(R,{type:"submit",disabled:c.isPending,"data-testid":"button-save-property",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Uu,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Property Not Found"}),e.jsxs(R,{onClick:()=>s("/properties"),children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Back to Properties"]})]})})}function tNe(){const[t,s]=j.useState(""),[r,n]=j.useState("all"),[a,i]=j.useState(new Date),{data:l=[],isLoading:o}=ge({queryKey:["/api/properties"]}),{data:c=[],isLoading:d}=ge({queryKey:["/api/bookings"]}),u=j.useMemo(()=>Array.from({length:30},(S,w)=>sr(a,w)),[a]),m=l.filter(S=>S.name.toLowerCase().includes(t.toLowerCase())&&(r==="all"||S.id.toString()===r)),h=S=>{const w=c.filter(N=>N.propertyId===S),C=[],k=Xn(u[0]),A=sr(Xn(u[u.length-1]),1);return w.forEach(N=>{const M=Xn(new Date(N.checkIn)),F=Xn(new Date(N.checkOut));if(M<A&&F>k){const V=M<k?k:M,E=F>A?A:F,G=u.findIndex(Y=>vr(Xn(Y),V));if(G>=0){const Y=Sj(E,V);Y>0&&C.push({booking:N,startIndex:G,span:Y})}}}),C},x=(S,w,C)=>C.some(k=>w>=k.startIndex&&w<k.startIndex+k.span),g=(S,w,C)=>C.find(k=>k.startIndex===w)||null,p=S=>{switch(S?.toLowerCase()){case"confirmed":return"bg-emerald-500 hover:bg-emerald-600";case"pending":return"bg-amber-500 hover:bg-amber-600";case"completed":return"bg-blue-500 hover:bg-blue-600";case"cancelled":return"bg-red-500 hover:bg-red-600";default:return"bg-gray-400 hover:bg-gray-500"}},f=()=>{i(sr(a,-7))},v=()=>{i(sr(a,7))},b=()=>{i(new Date)},y=o||d;return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Multi-Property Calendar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Horizontal timeline with live booking data"})]}),e.jsx(q,{variant:"outline",className:"text-blue-600",children:"Timeline View"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:f,"data-testid":"button-prev-week",children:[e.jsx(Vu,{className:"w-4 h-4"}),"Previous"]}),e.jsx(R,{variant:"outline",size:"sm",onClick:b,"data-testid":"button-today",children:"Today"}),e.jsxs(R,{variant:"outline",size:"sm",onClick:v,"data-testid":"button-next-week",children:["Next",e.jsx(Rl,{className:"w-4 h-4"})]})]})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Filters"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search Property"}),e.jsx(H,{type:"text",placeholder:"Search property name...",value:t,onChange:S=>s(S.target.value),"data-testid":"input-search-property"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Filter by Property"}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{"data-testid":"select-filter-property",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),l.map(S=>e.jsx(P,{value:S.id.toString(),children:S.name},S.id))]})]})]})]})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-0",children:y?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar data..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex border-b sticky top-0 bg-white dark:bg-gray-900 z-10",children:[e.jsx("div",{className:"w-64 flex-shrink-0 border-r p-4 font-semibold bg-gray-50 dark:bg-gray-800",children:"Property"}),u.map((S,w)=>{const C=vr(S,new Date);return e.jsxs("div",{className:`w-32 flex-shrink-0 border-r p-2 text-center text-sm ${C?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[e.jsx("div",{className:`font-semibold ${C?"text-blue-600":""}`,children:rt(S,"EEE")}),e.jsx("div",{className:`text-xs ${C?"text-blue-600":"text-muted-foreground"}`,children:rt(S,"MMM d")})]},w)})]}),m.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Us,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No properties found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your search criteria"})]}):m.map(S=>{const w=h(S.id);return e.jsxs("div",{className:"flex border-b hover:bg-muted/30 transition-colors",children:[e.jsxs("div",{className:"w-64 flex-shrink-0 border-r p-4 bg-gray-50 dark:bg-gray-800",children:[e.jsx("div",{className:"font-medium text-sm mb-1",children:S.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[S.bedrooms&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ki,{className:"w-3 h-3"}),e.jsxs("span",{children:[S.bedrooms," BR"]})]}),S.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"w-3 h-3"}),e.jsx("span",{children:S.location})]})]})]}),e.jsx("div",{className:"flex relative",children:u.map((C,k)=>{const A=g(S.id,k,w),N=x(S.id,k,w);return e.jsx("div",{className:"w-32 flex-shrink-0 border-r p-1 relative","data-testid":`cell-${S.id}-${k}`,children:A?e.jsxs("div",{className:`absolute top-1 left-1 h-[calc(100%-8px)] rounded px-2 py-1 text-white text-xs cursor-pointer transition-colors ${p(A.booking.status)}`,style:{width:`calc(${A.span*128}px - 8px)`,zIndex:5},title:`${A.booking.guestName}
${A.booking.checkIn} - ${A.booking.checkOut}
Status: ${A.booking.status}`,children:[e.jsx("div",{className:"font-medium truncate",children:A.booking.guestName}),e.jsx("div",{className:"text-[10px] opacity-90",children:A.booking.status}),e.jsxs("div",{className:"text-[10px] opacity-75",children:[A.span," ",A.span===1?"day":"days"]})]}):!N&&e.jsx("div",{className:"h-full bg-gray-100 dark:bg-gray-700/30 rounded opacity-50 hover:opacity-75 transition-opacity"})},k)})})]},S.id)})]})})})}),e.jsx(O,{className:"mt-4",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-6 text-sm flex-wrap",children:[e.jsx("span",{className:"font-medium",children:"Status Legend:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-emerald-500"}),e.jsx("span",{children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-amber-500"}),e.jsx("span",{children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-blue-500"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),e.jsx("span",{children:"Cancelled"})]})]})})}),e.jsx(O,{className:"mt-4",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground flex-wrap gap-4",children:[e.jsxs("span",{children:["Showing ",m.length," of ",l.length," properties"]}),e.jsxs("span",{children:["Total bookings: ",c.length]}),e.jsxs("span",{children:[rt(u[0],"MMM d, yyyy")," - ",rt(u[u.length-1],"MMM d, yyyy")]})]})})})]})})}const Km=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];function sNe(){const[t,s]=j.useState("all"),[r,n]=j.useState("all"),[a,i]=j.useState("all"),[l,o]=j.useState(""),[c,d]=j.useState(""),{data:u=[]}=ge({queryKey:["/api/properties"]}),{data:m=[]}=ge({queryKey:["/api/finance"]}),{data:h=[]}=ge({queryKey:["/api/bookings"]}),x=j.useMemo(()=>[...new Set(m.map(E=>E.category))].filter(Boolean),[m]),g=j.useMemo(()=>m.filter(V=>{const E=t==="all"||V.propertyId.toString()===t,G=r==="all"||V.type===r,Y=a==="all"||V.category===a;let Q=!0;return l&&V.date&&(Q=Q&&!Ed(xs(V.date),xs(l))),c&&V.date&&(Q=Q&&!hh(xs(V.date),xs(c))),E&&G&&Y&&Q}),[m,t,r,a,l,c]),p=j.useMemo(()=>h.filter(V=>{if(V.status==="cancelled")return!1;const E=t==="all"||V.propertyId.toString()===t;let G=!0;if(l||c){const Y=xs(V.checkIn),Q=xs(V.checkOut);if(l&&c){const T=xs(l),B=xs(c);G=Y<=B&&Q>=T}else if(l){const T=xs(l);G=Q>=T}else if(c){const T=xs(c);G=Y<=T}}return E&&G}),[h,t,l,c]),f=p.reduce((V,E)=>{const G=parseFloat(E.platformPayout||E.totalAmount||"0");return V+G},0),v=g.filter(V=>V.type==="income").reduce((V,E)=>V+parseFloat(E.amount||"0"),0),b=f+v,y=g.filter(V=>V.type==="expense").reduce((V,E)=>V+parseFloat(E.amount||"0"),0),S=b-y,w=b>0?S/b*100:0,C=j.useMemo(()=>{const V=new Map;return f>0&&V.set("Booking Revenue",f),g.filter(E=>E.type==="income").forEach(E=>{const G=V.get(E.category)||0;V.set(E.category,G+parseFloat(E.amount||"0"))}),Array.from(V.entries()).map(([E,G])=>({name:E,value:G})).sort((E,G)=>G.value-E.value)},[g,f]),k=j.useMemo(()=>{const V=new Map;return g.filter(E=>E.type==="expense").forEach(E=>{const G=V.get(E.category)||0;V.set(E.category,G+parseFloat(E.amount||"0"))}),Array.from(V.entries()).map(([E,G])=>({name:E,value:G})).sort((E,G)=>G.value-E.value)},[g]),A=j.useMemo(()=>t!=="all"?[]:u.map(V=>{const E=g.filter(W=>W.propertyId===V.id),G=p.filter(W=>W.propertyId===V.id),Y=E.filter(W=>W.type==="income").reduce((W,he)=>W+parseFloat(he.amount||"0"),0),Q=G.reduce((W,he)=>{const Se=parseFloat(he.platformPayout||he.totalAmount||"0");return W+Se},0),T=Y+Q,B=E.filter(W=>W.type==="expense").reduce((W,he)=>W+parseFloat(he.amount||"0"),0);return{name:V.name.length>15?V.name.substring(0,15)+"...":V.name,revenue:T,expenses:B,profit:T-B}}).filter(V=>V.revenue>0||V.expenses>0),[u,g,p,t]),N=j.useMemo(()=>{const V=new Map;return g.forEach(E=>{if(!E.date)return;const G=xs(E.date),Y=ar(G),Q=Y.toISOString(),T=V.get(Q)||{revenue:0,expenses:0,sortDate:Y};E.type==="income"?T.revenue+=parseFloat(E.amount||"0"):T.expenses+=parseFloat(E.amount||"0"),V.set(Q,T)}),p.forEach(E=>{if(!E.checkIn)return;const G=xs(E.checkIn),Y=ar(G),Q=Y.toISOString(),T=V.get(Q)||{revenue:0,expenses:0,sortDate:Y},B=parseFloat(E.platformPayout||E.totalAmount||"0");T.revenue+=B,V.set(Q,T)}),Array.from(V.entries()).map(([E,G])=>({month:rt(G.sortDate,"MMM yyyy"),revenue:G.revenue,expenses:G.expenses,profit:G.revenue-G.expenses,sortDate:G.sortDate})).sort((E,G)=>E.sortDate.getTime()-G.sortDate.getTime())},[g,p]),M=j.useMemo(()=>{const V=new Map;return g.filter(E=>E.type==="income").forEach(E=>{const G=V.get(E.propertyId)||0;V.set(E.propertyId,G+parseFloat(E.amount||"0"))}),Array.from(V.entries()).map(([E,G])=>({property:u.find(Y=>Y.id===E)?.name||"Unknown",revenue:G})).sort((E,G)=>G.revenue-E.revenue).slice(0,5)},[g,u]),F=()=>{s("all"),n("all"),i("all"),o(""),d("")},I=(t!=="all"?1:0)+(r!=="all"?1:0)+(a!=="all"?1:0)+(l?1:0)+(c?1:0);return e.jsxs("div",{className:"min-h-screen bg-background p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Advanced Financial Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Multi-dimensional insights with dynamic filtering"})]}),e.jsxs(R,{variant:"outline","data-testid":"button-export",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Export Report"]})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"w-5 h-5"}),"Advanced Filters",I>0&&e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",I," active)"]})]}),I>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:F,"data-testid":"button-clear-filters",children:"Clear All"})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{"data-testid":"select-property",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),u.map(V=>e.jsx(P,{value:V.id.toString(),children:V.name},V.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{"data-testid":"select-type",children:e.jsx(se,{placeholder:"All Types"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Types"}),e.jsx(P,{value:"income",children:"Income"}),e.jsx(P,{value:"expense",children:"Expense"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{"data-testid":"select-category",children:e.jsx(se,{placeholder:"All Categories"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Categories"}),x.map(V=>e.jsx(P,{value:V,children:V},V))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"From Date"}),e.jsx(H,{type:"date",value:l,onChange:V=>o(V.target.value),"data-testid":"input-date-from"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"To Date"}),e.jsx(H,{type:"date",value:c,onChange:V=>d(V.target.value),"data-testid":"input-date-to"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Ot,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"metric-revenue",children:xt(b)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[g.filter(V=>V.type==="income").length," transactions"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(_l,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"metric-expenses",children:xt(y)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[g.filter(V=>V.type==="expense").length," transactions"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(He,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${S>=0?"text-blue-600":"text-red-600"}`,"data-testid":"metric-profit",children:xt(S)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[w.toFixed(1),"% margin"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Data Points"}),e.jsx(qs,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:g.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Filtered transactions"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[N.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Monthly Trend Analysis"})}),e.jsx(D,{children:e.jsx(hd,{width:"100%",height:300,children:e.jsxs(Ube,{data:N,children:[e.jsx(Ty,{strokeDasharray:"3 3"}),e.jsx(hc,{dataKey:"month"}),e.jsx(pc,{}),e.jsx(_r,{formatter:V=>xt(Number(V))}),e.jsx($a,{}),e.jsx(fl,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Revenue"}),e.jsx(fl,{type:"monotone",dataKey:"expenses",stroke:"#ef4444",strokeWidth:2,name:"Expenses"}),e.jsx(fl,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:2,name:"Profit"})]})})})]}),C.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Revenue Distribution by Category"})}),e.jsx(D,{children:e.jsx(hd,{width:"100%",height:300,children:e.jsxs(Vy,{children:[e.jsx(Hn,{data:C,cx:"50%",cy:"50%",labelLine:!1,label:({name:V,percent:E})=>`${V}: ${(E*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:C.map((V,E)=>e.jsx(Yo,{fill:Km[E%Km.length]},`cell-${E}`))}),e.jsx(_r,{formatter:V=>xt(Number(V))})]})})})]})]}),A.length>0&&t==="all"&&e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsx($,{children:"Property Performance Comparison"})}),e.jsx(D,{children:e.jsx(hd,{width:"100%",height:350,children:e.jsxs(zbe,{data:A,children:[e.jsx(Ty,{strokeDasharray:"3 3"}),e.jsx(hc,{dataKey:"name"}),e.jsx(pc,{}),e.jsx(_r,{formatter:V=>xt(Number(V))}),e.jsx($a,{}),e.jsx(Ba,{dataKey:"revenue",fill:"#10b981",name:"Revenue"}),e.jsx(Ba,{dataKey:"expenses",fill:"#ef4444",name:"Expenses"}),e.jsx(Ba,{dataKey:"profit",fill:"#3b82f6",name:"Profit"})]})})})]}),k.length>0&&e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsx($,{children:"Expense Breakdown by Category"})}),e.jsx(D,{children:e.jsx(hd,{width:"100%",height:300,children:e.jsxs(Vy,{children:[e.jsx(Hn,{data:k,cx:"50%",cy:"50%",labelLine:!1,label:({name:V,percent:E})=>`${V}: ${(E*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:k.map((V,E)=>e.jsx(Yo,{fill:Km[E%Km.length]},`cell-${E}`))}),e.jsx(_r,{formatter:V=>xt(Number(V))})]})})})]}),M.length>0&&t==="all"&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Top 5 Revenue Generating Properties"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:M.map((V,E)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold",children:E+1}),e.jsx("span",{className:"font-medium",children:V.property})]}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:xt(V.revenue)})]},E))})})]}),g.length===0&&e.jsx(O,{children:e.jsxs(D,{className:"p-12 text-center",children:[e.jsx(qs,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No data available for the selected filters"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your filter criteria"})]})})]})}async function rNe(t){try{return(await fe("POST","/api/ai/test",{prompt:t})).result||"No response received"}catch(s){throw console.error("AI Assistant Error:",s),new Error(`AI Assistant failed: ${s.message}`)}}async function nNe(t){try{return(await fe("POST","/api/ai/property-description",{propertyDetails:t})).description||"No description generated"}catch(s){throw console.error("Property Description Error:",s),new Error(`Failed to generate property description: ${s.message}`)}}async function aNe(t){try{return(await fe("POST","/api/ai/analyze-review",{reviewText:t})).analysis||{}}catch(s){throw console.error("Review Analysis Error:",s),new Error(`Failed to analyze guest review: ${s.message}`)}}async function iNe(t,s){try{return(await fe("POST","/api/ai/maintenance-suggestions",{propertyType:t,lastMaintenanceDate:s})).suggestions||{}}catch(r){throw console.error("Maintenance Suggestions Error:",r),new Error(`Failed to generate maintenance suggestions: ${r.message}`)}}function lNe(){const[t,s]=j.useState(!1),[r,n]=j.useState(""),{toast:a}=Xe(),i=async()=>{s(!0);try{const d=await rNe("Hello! Can you confirm that you're working properly?");n(d||"No response received"),a({title:"Success",description:"AI Assistant is working!"})}catch(d){console.error("AI Test Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"AI Assistant failed to respond",variant:"destructive"})}finally{s(!1)}},l=async()=>{s(!0);try{const d=await nNe({name:"Villa Test",bedrooms:3,bathrooms:2,amenities:["Pool","WiFi","Kitchen"],location:"Koh Samui, Thailand"});n(d||"No description generated"),a({title:"Success",description:"Property description generated!"})}catch(d){console.error("Property Description Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"Failed to generate property description",variant:"destructive"})}finally{s(!1)}},o=async()=>{s(!0);try{const d=await aNe("The villa was amazing! Great location, clean rooms, and helpful staff. Only issue was the WiFi was slow.");n(JSON.stringify(d,null,2)),a({title:"Success",description:"Review analysis completed!"})}catch(d){console.error("Review Analysis Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"Failed to analyze review",variant:"destructive"})}finally{s(!1)}},c=async()=>{s(!0);try{const d=await iNe("villa","2025-01-01");n(JSON.stringify(d,null,2)),a({title:"Success",description:"Maintenance suggestions generated!"})}catch(d){console.error("Maintenance Suggestions Error:",d),n(`Error: ${d.message}`),a({title:"Error",description:"Failed to generate maintenance suggestions",variant:"destructive"})}finally{s(!1)}};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"AI Integration Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Test the OpenAI integration in HostPilotPro"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(hn,{className:"w-5 h-5"}),"Basic AI Test"]})}),e.jsx(D,{children:e.jsx(R,{onClick:i,disabled:t,className:"w-full",children:"Test AI Assistant"})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5"}),"Property Description"]})}),e.jsx(D,{children:e.jsx(R,{onClick:l,disabled:t,className:"w-full",children:"Generate Description"})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"w-5 h-5"}),"Review Analysis"]})}),e.jsx(D,{children:e.jsx(R,{onClick:o,disabled:t,className:"w-full",children:"Analyze Sample Review"})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5"}),"Maintenance Suggestions"]})}),e.jsx(D,{children:e.jsx(R,{onClick:c,disabled:t,className:"w-full",children:"Generate Suggestions"})})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"AI Response"})}),e.jsx(D,{children:e.jsx(nt,{value:r,readOnly:!0,placeholder:"AI responses will appear here...",className:"min-h-[200px] font-mono text-sm"})})]})]})}function oNe(){const[t,s]=j.useState(!1),[r,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState("The villa was amazing! Great location, clean rooms, and helpful staff. Only issue was the WiFi was slow."),{toast:c}=Xe(),d=async()=>{s(!0);try{const p=await(await fe("POST","/api/ai/test",{prompt:"Hello! Please confirm you're working and tell me about HostPilotPro's AI capabilities."})).json();n(p.result||"No response received"),c({title:"AI Assistant Working!",description:"Basic AI functionality confirmed"})}catch(g){console.error("AI Test Error:",g),n(`Error: ${g.message}`),c({title:"AI Error",description:"Check if OpenAI API key is configured",variant:"destructive"})}finally{s(!1)}},u=async()=>{s(!0);try{const p=await(await fe("POST","/api/ai/property-description",{propertyDetails:{name:"Villa Sunset Paradise",bedrooms:4,bathrooms:3,amenities:["Private Pool","Ocean View","WiFi","Modern Kitchen","Air Conditioning"],location:"Koh Samui, Thailand"}})).json();n(p.description||"No description generated"),c({title:"Success!",description:"AI property description generated"})}catch(g){console.error("Property Description Error:",g),n(`Error: ${g.message}`),c({title:"Error",description:"Failed to generate property description",variant:"destructive"})}finally{s(!1)}},m=async()=>{s(!0);try{const p=await(await fe("POST","/api/ai/analyze-review",{reviewText:l})).json();n(JSON.stringify(p.analysis,null,2)),c({title:"Review Analyzed!",description:"AI sentiment analysis completed"})}catch(g){console.error("Review Analysis Error:",g),n(`Error: ${g.message}`),c({title:"Error",description:"Failed to analyze review",variant:"destructive"})}finally{s(!1)}},h=async()=>{s(!0);try{const p=await(await fe("POST","/api/ai/maintenance-suggestions",{propertyType:"luxury villa",lastMaintenanceDate:"2024-01-15"})).json();n(JSON.stringify(p.suggestions,null,2)),c({title:"Maintenance Suggestions Generated!",description:"AI-powered maintenance recommendations ready"})}catch(g){console.error("Maintenance Suggestions Error:",g),n(`Error: ${g.message}`),c({title:"Error",description:"Failed to generate maintenance suggestions",variant:"destructive"})}finally{s(!1)}},x=async()=>{if(!a.trim()){c({title:"Empty Prompt",description:"Please enter a custom prompt to test",variant:"destructive"});return}s(!0);try{const p=await(await fe("POST","/api/ai/custom",{prompt:a})).json();n(p.result||"No response received"),c({title:"Custom AI Response!",description:"Your custom prompt was processed"})}catch(g){console.error("Custom Prompt Error:",g),n(`Error: ${g.message}`),c({title:"Error",description:"Failed to process custom prompt",variant:"destructive"})}finally{s(!1)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(hn,{className:"h-8 w-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"AI Feature Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Test and explore HostPilotPro's AI capabilities"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"AI Status"}),e.jsx(Bn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"OpenAI GPT-4o Integration"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"AI Features"}),e.jsx(Ld,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"8+"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"AI-powered tools available"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Integration"}),e.jsx(Ut,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Live"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Real-time AI responses"})]})]})]}),e.jsxs(ot,{defaultValue:"testing",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"testing",children:"AI Testing"}),e.jsx(re,{value:"features",children:"AI Features"}),e.jsx(re,{value:"examples",children:"Live Examples"}),e.jsx(re,{value:"integration",children:"Integration"})]}),e.jsx(ne,{value:"testing",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-5 w-5"}),"AI Test Suite"]})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs(R,{onClick:d,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Test Basic AI Assistant"]}),e.jsxs(R,{onClick:u,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),"Generate Property Description"]}),e.jsxs(R,{onClick:h,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),"Generate Maintenance Tasks"]}),e.jsxs(R,{onClick:m,disabled:t,variant:"outline",className:"w-full justify-start",children:[e.jsx($d,{className:"h-4 w-4 mr-2"}),"Analyze Guest Review"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Custom AI Prompt"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(nt,{placeholder:"Enter your custom AI prompt here...",value:a,onChange:g=>i(g.target.value),rows:3}),e.jsxs(R,{onClick:x,disabled:t||!a.trim(),className:"w-full",children:[e.jsx(Ld,{className:"h-4 w-4 mr-2"}),"Send Custom Prompt"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Review Analysis Test"})}),e.jsx(D,{className:"space-y-3",children:e.jsx(nt,{placeholder:"Enter a guest review to analyze...",value:l,onChange:g=>o(g.target.value),rows:3})})]})]}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-primary border-t-transparent rounded-full"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),"AI Response"]})})}),e.jsx(D,{children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 min-h-[300px] max-h-[500px] overflow-y-auto",children:r?e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:r}):e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"Click any test button to see AI results here"})})})]})})]})}),e.jsx(ne,{value:"features",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5 text-blue-600"}),"Property AI"]})}),e.jsx(D,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Property Description Generation"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Amenity Recommendations"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Pricing Suggestions"]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-5 w-5 text-purple-600"}),"Guest AI"]})}),e.jsx(D,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Review Sentiment Analysis"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Smart Guest Responses"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Guest Request Processing"]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5 text-orange-600"}),"Maintenance AI"]})}),e.jsx(D,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Task Suggestions"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Priority Assessment"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-green-600"}),"Preventive Scheduling"]})]})})]})]})}),e.jsx(ne,{value:"examples",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"AI in Daily Operations"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(q,{variant:"secondary",children:"✨ AI Features Active"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI is actively working in these areas:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• Guest review analysis and sentiment tracking"}),e.jsx("li",{children:"• Automated maintenance task suggestions"}),e.jsx("li",{children:"• Smart guest communication responses"}),e.jsx("li",{children:"• Property description optimization"}),e.jsx("li",{children:"• Task priority assessment"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Available AI Tools"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(q,{variant:"outline",children:"Navigation: Settings → AI Tools"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• AI Feedback Monitor (Guest insights)"}),e.jsx("li",{children:"• AI Task Manager (Smart scheduling)"}),e.jsx("li",{children:"• AI Notifications & Reminders"}),e.jsx("li",{children:"• Guest Portal Smart Requests"}),e.jsx("li",{children:"• Property AI Recommendations"})]})]})})]})]})}),e.jsx(ne,{value:"integration",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"AI Integration Status"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"OpenAI GPT-4o Integration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Latest AI model with enhanced capabilities"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Real-time Processing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Instant AI responses for guest and property management"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Multi-language Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI works in multiple languages for global guests"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Context-Aware Responses"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI understands property and guest context"})]})]})]})})]})})]})]})}function cNe(){const[t,s]=j.useState(!1),[r,n]=j.useState(!1),[a,i]=j.useState(!1),{toast:l}=Xe(),o=ut(),c=Ft({defaultValues:{amount:"",source:"",guestName:"",property:"",notes:"",receiptPhoto:""}}),d=Ft({defaultValues:{amount:"",description:"",category:"",property:"",receipt:"",receiptPhoto:""}}),u=(S,w)=>{const C=S.target.files?.[0];if(C){const k=new FileReader;k.onload=A=>{const N=A.target?.result;w==="cash"?c.setValue("receiptPhoto",N):d.setValue("receiptPhoto",N)},k.readAsDataURL(C)}},{data:m,isLoading:h,error:x}=ge({queryKey:["/api/staff-wallet/staff-pool"],enabled:!0,retry:3,staleTime:3e4}),{data:g=[],isLoading:p}=ge({queryKey:["/api/staff-wallet/staff-pool/transactions"],enabled:!0,retry:3,staleTime:3e4}),f=[{value:"transport",label:"Transport & Fuel",icon:bi},{value:"supplies",label:"Office Supplies",icon:m8},{value:"maintenance",label:"Emergency Repairs",icon:As},{value:"meals",label:"Staff Meals",icon:WT},{value:"other",label:"Other Expenses",icon:xa}],v=Ce({mutationFn:async S=>{const w=await fetch("/api/staff-wallet/staff-pool/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!w.ok)throw new Error("Failed to add expense");return w.json()},onSuccess:()=>{l({title:"Expense added successfully"}),s(!1),d.reset(),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}}),b=Ce({mutationFn:async S=>{const w=await fetch("/api/staff-wallet/staff-pool/cash-income",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!w.ok)throw new Error("Failed to record cash collection");return w.json()},onSuccess:()=>{l({title:"Cash collection recorded"}),n(!1),c.reset(),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}}),y=Ce({mutationFn:async()=>{const S=await fetch("/api/staff-wallet/staff-pool/clear-balance",{method:"POST",headers:{"Content-Type":"application/json"}});if(!S.ok)throw new Error("Failed to clear balance");return S.json()},onSuccess:()=>{l({title:"Balance cleared and reset to base petty cash amount"}),i(!1),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool"]}),o.invalidateQueries({queryKey:["/api/staff-wallet/staff-pool/transactions"]})}});return h||p?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-gray-600",children:"Loading your wallet data..."})]}),e.jsxs(q,{variant:"outline",className:"text-green-600 border-green-200",children:[e.jsx(na,{className:"w-4 h-4 mr-1"}),"Staff Wallet"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(S=>e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})})},S))})]}):x?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-red-600",children:"Error loading wallet data. Please try again."})]}),e.jsxs(q,{variant:"outline",className:"text-red-600 border-red-200",children:[e.jsx(Et,{className:"w-4 h-4 mr-1"}),"Error"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Wallet & Petty Cash"}),e.jsx("p",{className:"text-gray-600",children:"Manage your petty cash, expenses, and cash collections"})]}),e.jsxs(q,{variant:"outline",className:"text-green-600 border-green-200",children:[e.jsx(na,{className:"w-4 h-4 mr-1"}),"Staff Wallet"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:xt(m?.currentBalance||0)})]}),e.jsx(na,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Base Petty Cash"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:xt(m?.basePettyCash||5e3)})]}),e.jsx(He,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cash Collected"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",xt(m?.totalCollected||0)]})]}),e.jsx(Ot,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["-",xt(m?.totalExpenses||0)]})]}),e.jsx(xa,{className:"w-8 h-8 text-red-500"})]})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(Ve,{open:r,onOpenChange:n,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Cash Collection"]})}),e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Record Cash Collection"})}),e.jsxs("form",{onSubmit:c.handleSubmit(S=>b.mutate(S)),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Amount Collected (THB)"}),e.jsx(H,{type:"number",placeholder:"Enter amount",...c.register("amount",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Source"}),e.jsxs(te,{onValueChange:S=>c.setValue("source",S),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select source"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"checkout_electric",children:"Check-out - Electricity Payment"}),e.jsx(P,{value:"checkout_deposit",children:"Check-out - Deposit Collection"}),e.jsx(P,{value:"checkout_damages",children:"Check-out - Damage Charges"}),e.jsx(P,{value:"service_payment",children:"Service Payment"}),e.jsx(P,{value:"other",children:"Other Cash Collection"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Guest Name"}),e.jsx(H,{placeholder:"Enter guest name",...c.register("guestName")})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Property"}),e.jsxs(te,{onValueChange:S=>c.setValue("property",S),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"Villa Aruna",children:"Villa Aruna"}),e.jsx(P,{value:"Villa Samui Breeze",children:"Villa Samui Breeze"}),e.jsx(P,{value:"Villa Paradise",children:"Villa Paradise"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Notes"}),e.jsx(nt,{placeholder:"Additional details...",...c.register("notes")})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Receipt Photo (Optional)"}),e.jsx(H,{type:"file",accept:"image/*",onChange:S=>u(S,"cash")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload receipt photo or proof of collection"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:b.isPending,children:b.isPending?"Recording...":"Record Collection"})]})]})]})]}),e.jsxs(Ve,{open:t,onOpenChange:s,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"outline",children:[e.jsx(Fd,{className:"w-4 h-4 mr-2"}),"Add Expense"]})}),e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Record Expense"})}),e.jsxs("form",{onSubmit:d.handleSubmit(S=>v.mutate(S)),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Amount Spent (THB)"}),e.jsx(H,{type:"number",placeholder:"Enter amount",...d.register("amount",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Category"}),e.jsxs(te,{onValueChange:S=>d.setValue("category",S),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select category"})}),e.jsx(ee,{children:f.map(S=>e.jsx(P,{value:S.value,children:S.label},S.value))})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Description"}),e.jsx(nt,{placeholder:"What was purchased/paid for?",...d.register("description",{required:!0})})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Property"}),e.jsxs(te,{onValueChange:S=>d.setValue("property",S),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"Villa Aruna",children:"Villa Aruna"}),e.jsx(P,{value:"Villa Samui Breeze",children:"Villa Samui Breeze"}),e.jsx(P,{value:"Villa Paradise",children:"Villa Paradise"}),e.jsx(P,{value:"NA",children:"N/A - General Expense"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Receipt Number/Details (Optional)"}),e.jsx(H,{placeholder:"Receipt number or store details",...d.register("receipt")})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Receipt Photo (Optional)"}),e.jsx(H,{type:"file",accept:"image/*",onChange:S=>u(S,"expense")}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload receipt photo for expense verification"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:v.isPending,children:v.isPending?"Recording...":"Record Expense"})]})]})]})]}),e.jsxs(Ve,{open:a,onOpenChange:i,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"outline",className:"border-orange-300 text-orange-600 hover:bg-orange-50",children:[e.jsx(Et,{className:"w-4 h-4 mr-2"}),"Clear Balance"]})}),e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Clear Wallet Balance"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-orange-800",children:["This will clear your current balance and reset your wallet to the base petty cash amount of ",xt(m.basePettyCash),"."]}),e.jsxs("p",{className:"text-sm text-orange-600 mt-2 font-medium",children:["Current balance: ",xt(m.currentBalance)," → ",xt(m.basePettyCash)]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Reason for clearing"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select reason"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"end_of_day",children:"End of day clearing"}),e.jsx(P,{value:"bank_deposit",children:"Depositing excess cash"}),e.jsx(P,{value:"handover",children:"Shift handover"}),e.jsx(P,{value:"audit",children:"Audit requirement"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Notes"}),e.jsx(nt,{placeholder:"Additional notes about the clearing..."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(R,{onClick:()=>y.mutate(),className:"bg-orange-600 hover:bg-orange-700",children:"Clear Balance"})]})]})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Recent Transactions"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:g.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ke,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-sm",children:"Add an expense or record cash collection to see transactions here"})]}):g.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${S.type==="income"?"bg-green-100":"bg-red-100"}`,children:S.type==="income"?e.jsx(ht,{className:"w-5 h-5 text-green-600"}):e.jsx(Fd,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S.description}),e.jsx("p",{className:"text-sm text-gray-600",children:S.date}),S.guestName&&e.jsxs("p",{className:"text-xs text-blue-600",children:[S.guestName," • ",S.propertyName]}),S.receipt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Receipt: ",S.receipt]}),S.receiptPhoto&&e.jsx("p",{className:"text-xs text-blue-600",children:"📸 Photo attached"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`text-lg font-semibold ${S.type==="income"?"text-green-600":"text-red-600"}`,children:[S.type==="income"?"+":"-",xt(S.amount)]}),e.jsx(q,{variant:"outline",className:"text-xs",children:S.category.replace("_"," ")})]})]},S.id))})})]})]})}function dNe(){const[t,s]=j.useState(!1),[r,n]=j.useState(null),{toast:a}=Xe(),i=ut(),l=[{id:1,guestName:"Michael Johnson",propertyName:"Villa Aruna",checkoutDate:"2025-01-23",checkoutTime:"11:00",electricityReading:{start:1250,end:1387,rate:7},estimatedCash:959,status:"pending_collection"},{id:2,guestName:"Emma Wilson",propertyName:"Villa Breeze",checkoutDate:"2025-01-23",checkoutTime:"14:30",electricityReading:{start:2100,end:2198,rate:7},estimatedCash:686,status:"pending_collection"}],o=[{id:3,guestName:"John Smith",propertyName:"Villa Aruna",checkoutDate:"2025-01-22",electricityUsage:250,cashCollected:1750,collectedBy:"Niran Thepsiri",collectionTime:"16:45",receiptPhoto:"receipt-001.jpg",addedToWallet:!0},{id:4,guestName:"Sarah Davis",propertyName:"Villa Paradise",checkoutDate:"2025-01-21",electricityUsage:180,cashCollected:1260,collectedBy:"Somchai Jaidee",collectionTime:"10:30",receiptPhoto:"receipt-002.jpg",addedToWallet:!0}],c=Ce({mutationFn:async u=>{const m=await fetch("/api/staff-wallet/cash-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!m.ok)throw new Error("Failed to record cash collection");return m.json()},onSuccess:()=>{a({title:"Cash collection recorded and added to your wallet"}),s(!1),i.invalidateQueries({queryKey:["/api/staff-cash-collection"]})}}),d=u=>{n(u),s(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Cash Collection Tracker"}),e.jsx("p",{className:"text-gray-600",children:"Track cash collections from guest check-outs"})]}),e.jsxs(q,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(Dr,{className:"w-4 h-4 mr-1"}),"Cash Tracker"]})]}),e.jsxs(ot,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(it,{children:[e.jsxs(re,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Pending Collections (",l.length,")"]}),e.jsxs(re,{value:"completed",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"}),"Completed (",o.length,")"]})]}),e.jsx(ne,{value:"pending",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-orange-500"}),"Pending Cash Collections"]})}),e.jsx(D,{children:l.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Dr,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No pending cash collections"})]}):e.jsx("div",{className:"space-y-4",children:l.map(u=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(It,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:u.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Tt,{className:"w-4 h-4"}),u.propertyName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"}),u.checkoutDate," at ",u.checkoutTime]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-blue-600 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ut,{className:"w-4 h-4"}),u.electricityReading.start," → ",u.electricityReading.end," kWh"]}),e.jsxs("span",{children:["Usage: ",u.electricityReading.end-u.electricityReading.start," kWh × ",xt(u.electricityReading.rate)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:xt(u.estimatedCash)}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Expected cash"}),e.jsxs(R,{onClick:()=>d(u),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(xa,{className:"w-4 h-4 mr-2"}),"Collect Cash"]})]})]})},u.id))})})]})}),e.jsx(ne,{value:"completed",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-green-500"}),"Completed Collections"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:o.map(u=>e.jsx("div",{className:"border rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:u.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Tt,{className:"w-4 h-4"}),u.propertyName]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"}),u.checkoutDate," at ",u.collectionTime]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsxs("span",{children:["Collected by: ",u.collectedBy]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ut,{className:"w-4 h-4"}),u.electricityUsage," kWh"]}),u.receiptPhoto&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(Bu,{className:"w-4 h-4"}),"Receipt photo"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:xt(u.cashCollected)}),e.jsx(q,{variant:"outline",className:"text-green-600 border-green-200",children:"Added to wallet"})]})]})},u.id))})})]})})]}),e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Record Cash Collection"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(It,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:r.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:r.propertyName})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Electricity Usage"}),e.jsxs("p",{className:"font-semibold",children:[r.electricityReading.end-r.electricityReading.start," kWh"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Expected Amount"}),e.jsx("p",{className:"font-semibold text-green-600",children:xt(r.estimatedCash)})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Actual Amount Collected (THB)"}),e.jsx(H,{type:"number",defaultValue:r.estimatedCash,placeholder:"Enter actual amount collected"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Collection Method"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"How was payment collected?"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"cash",children:"Cash Payment"}),e.jsx(P,{value:"card_cash",children:"Card + Cash"}),e.jsx(P,{value:"transfer_cash",children:"Bank Transfer + Cash"})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Receipt Photo (Optional)"}),e.jsx(H,{type:"file",accept:"image/*"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Take a photo of the receipt or payment proof"})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Collection Notes"}),e.jsx(nt,{placeholder:"Any additional notes about the collection...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsxs(R,{onClick:()=>c.mutate({}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(xa,{className:"w-4 h-4 mr-2"}),"Record & Add to Wallet"]})]})]})]})})]})}function uNe(){const[t,s]=j.useState(null),[r,n]=j.useState(!1),[a,i]=j.useState(new Date().toISOString().split("T")[0]),{toast:l}=Xe(),o=ut(),c=[{id:1,staffName:"Niran Thepsiri",staffId:"staff-pool",amount:450,description:"Gasoline for property visits",category:"transport",date:"2025-01-23",time:"10:15",receipt:"receipt-gas-001.jpg",status:"pending_review",suggestedProperty:"villa-aruna",suggestedCategory:"company_expense"},{id:2,staffName:"Somchai Jaidee",staffId:"staff-maintenance",amount:850,description:"Emergency plumbing supplies for villa repair",category:"maintenance",date:"2025-01-23",time:"14:30",receipt:"receipt-plumbing-002.jpg",status:"pending_review",suggestedProperty:"villa-breeze",suggestedCategory:"billed_to_owner"},{id:3,staffName:"Apinya Khamchong",staffId:"staff-guest-services",amount:300,description:"Guest welcome snacks and beverages",category:"supplies",date:"2025-01-23",time:"16:00",receipt:"receipt-snacks-003.jpg",status:"pending_review",suggestedProperty:"villa-paradise",suggestedCategory:"billed_to_guest"}],d=[{id:4,staffName:"Wichai Suwanapong",amount:200,description:"Security patrol fuel",category:"transport",date:"2025-01-22",finalCategory:"company_expense",property:null,reviewedBy:"Admin",reviewDate:"2025-01-23 09:00",status:"approved"},{id:5,staffName:"Niran Thepsiri",amount:1250,description:"Pool chemical supplies",category:"maintenance",date:"2025-01-22",finalCategory:"billed_to_owner",property:"villa-aruna",reviewedBy:"Property Manager",reviewDate:"2025-01-23 08:30",status:"approved"}],u=[{value:"villa-aruna",label:"Villa Aruna"},{value:"villa-breeze",label:"Villa Samui Breeze"},{value:"villa-paradise",label:"Villa Paradise"},{value:"villa-charm",label:"Villa Balinese Charm"}],m=[{value:"company_expense",label:"Company Expense",color:"blue",description:"General business cost"},{value:"billed_to_guest",label:"Billed to Guest",color:"green",description:"Guest should be charged"},{value:"billed_to_owner",label:"Billed to Owner",color:"orange",description:"Property owner responsibility"}],h=Ce({mutationFn:async f=>{const v=await fetch(`/api/staff-expenses/${t?.id}/review`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!v.ok)throw new Error("Failed to review expense");return v.json()},onSuccess:()=>{l({title:"Expense reviewed and categorized successfully"}),n(!1),o.invalidateQueries({queryKey:["/api/staff-expenses"]})}}),x=f=>{s(f),n(!0)},g=()=>c.reduce((f,v)=>f+v.amount,0),p=f=>d.filter(v=>v.finalCategory===f).reduce((v,b)=>v+b.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Expense Management"}),e.jsx("p",{className:"text-gray-600",children:"Review and categorize staff petty cash expenses"})]}),e.jsxs(q,{variant:"outline",className:"text-red-600 border-red-200",children:[e.jsx(Et,{className:"w-4 h-4 mr-1"}),c.length," Pending Review"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:xt(g())})]}),e.jsx(Ke,{className:"w-8 h-8 text-red-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Company Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:xt(p("company_expense"))})]}),e.jsx(Tt,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guest Billable"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:xt(p("billed_to_guest"))})]}),e.jsx(It,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Owner Billable"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:xt(p("billed_to_owner"))})]}),e.jsx(He,{className:"w-8 h-8 text-orange-500"})]})})})]}),e.jsxs(ot,{defaultValue:"pending",className:"space-y-6",children:[e.jsxs(it,{children:[e.jsxs(re,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Pending Review (",c.length,")"]}),e.jsxs(re,{value:"reviewed",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"}),"Reviewed (",d.length,")"]})]}),e.jsx(ne,{value:"pending",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-red-500"}),"Expenses Pending Review"]})}),e.jsx(D,{children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Me,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No pending expenses to review"})]}):e.jsx("div",{className:"space-y-4",children:c.map(f=>e.jsx("div",{className:"border rounded-lg p-4 bg-red-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(xa,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:f.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(It,{className:"w-4 h-4"}),f.staffName]}),e.jsxs("span",{children:[f.date," at ",f.time]}),e.jsxs("span",{className:"text-blue-600",children:["Category: ",f.category]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mt-1",children:[e.jsxs(q,{variant:"outline",className:"text-blue-600",children:["AI Suggests: ",u.find(v=>v.value===f.suggestedProperty)?.label||"Company-wide"]}),e.jsxs(q,{variant:"outline",className:"text-green-600",children:["Category: ",m.find(v=>v.value===f.suggestedCategory)?.label]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:xt(f.amount)}),e.jsxs(R,{onClick:()=>x(f),className:"mt-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Review & Categorize"]})]})]})},f.id))})})]})}),e.jsx(ne,{value:"reviewed",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-green-500"}),"Reviewed & Categorized Expenses"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:d.map(f=>e.jsx("div",{className:"border rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:f.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(It,{className:"w-4 h-4"}),f.staffName]}),e.jsx("span",{children:f.date}),e.jsxs("span",{children:["Reviewed by: ",f.reviewedBy]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mt-1",children:[e.jsx(q,{variant:"outline",className:`${f.finalCategory==="company_expense"?"text-blue-600 border-blue-200":f.finalCategory==="billed_to_guest"?"text-green-600 border-green-200":"text-orange-600 border-orange-200"}`,children:m.find(v=>v.value===f.finalCategory)?.label}),f.property&&e.jsxs(q,{variant:"outline",className:"text-purple-600",children:[e.jsx(Tt,{className:"w-3 h-3 mr-1"}),u.find(v=>v.value===f.property)?.label]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:xt(f.amount)}),e.jsx(q,{variant:"outline",className:"text-green-600 border-green-200",children:"Approved"})]})]})},f.id))})})]})})]}),e.jsx(Ve,{open:r,onOpenChange:n,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Review & Categorize Expense"})}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 border rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-600",children:"Staff Member"}),e.jsx("p",{className:"font-semibold",children:t.staffName})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-600",children:"Amount"}),e.jsx("p",{className:"font-semibold text-green-600",children:xt(t.amount)})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-600",children:"Date & Time"}),e.jsxs("p",{className:"font-semibold",children:[t.date," at ",t.time]})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-600",children:"Category"}),e.jsx("p",{className:"font-semibold",children:t.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(K,{className:"text-sm text-gray-600",children:"Description"}),e.jsx("p",{className:"font-semibold",children:t.description})]}),t.receipt&&e.jsxs("div",{className:"col-span-2",children:[e.jsx(K,{className:"text-sm text-gray-600",children:"Receipt"}),e.jsx("p",{className:"text-blue-600 text-sm",children:t.receipt})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"AI Recommendations"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-blue-600",children:"Suggested Property"}),e.jsx("p",{children:u.find(f=>f.value===t.suggestedProperty)?.label||"Company-wide"})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-blue-600",children:"Suggested Category"}),e.jsx("p",{children:m.find(f=>f.value===t.suggestedCategory)?.label})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Expense Category *"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"How should this expense be categorized?"})}),e.jsx(ee,{children:m.map(f=>e.jsx(P,{value:f.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full bg-${f.color}-500`}),e.jsx("span",{children:f.label}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",f.description,")"]})]})},f.value))})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Assign to Property (Optional)"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property or leave blank for company-wide"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"none",children:"Company-wide (No specific property)"}),u.map(f=>e.jsx(P,{value:f.value,children:f.label},f.value))]})]})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Review Notes"}),e.jsx(nt,{placeholder:"Add any notes about this expense categorization...",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(R,{onClick:()=>h.mutate({}),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Approve & Categorize"]})]})]})]})})]})}function lk(){const{data:t}=ge({queryKey:["/api/staff-wallet/staff-pool"],enabled:!0}),{data:s}=ge({queryKey:["/api/tasks"],enabled:!0}),r=t?.currentBalance||6750,n=t?.basePettyCash||5e3,a=2,i=s?.filter(h=>{const x=new Date().toDateString();return new Date(h.dueDate).toDateString()===x})?.length||4,l=s?.filter(h=>{const x=new Date().toDateString();return h.status==="completed"&&new Date(h.completedAt||h.updatedAt).toDateString()===x})?.length||2,o=[{title:"My Tasks Today",count:i,icon:_a,href:"/tasks",color:"blue",description:`${l} completed`},{title:"My Wallet Balance",count:xt(r),icon:na,href:"/staff-wallet-petty-cash",color:"green",description:`Base: ${xt(n)}`},{title:"Pending Expenses",count:a,icon:Et,href:"/staff-expense-management",color:"orange",description:"Awaiting review"},{title:"Cash Collections",count:"2 pending",icon:He,href:"/staff-cash-collection",color:"purple",description:"Guest check-outs"}],c=[{id:1,title:"Villa Aruna - Pool Cleaning",property:"Villa Aruna",priority:"normal",status:"pending",time:"09:00",category:"pool"},{id:2,title:"Villa Breeze - Guest Check-out",property:"Villa Breeze",priority:"high",status:"in_progress",time:"11:00",category:"checkout"},{id:3,title:"Villa Paradise - Maintenance Check",property:"Villa Paradise",priority:"normal",status:"pending",time:"14:00",category:"maintenance"},{id:4,title:"Villa Samui - Guest Check-in Prep",property:"Villa Samui",priority:"high",status:"completed",time:"15:30",category:"checkin"}],d=h=>{switch(h){case"high":return"destructive";case"normal":return"secondary";case"low":return"outline";default:return"secondary"}},u=h=>{switch(h){case"completed":return"bg-green-100 text-green-700";case"in_progress":return"bg-blue-100 text-blue-700";case"pending":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},m=h=>{switch(h){case"pool":return Me;case"maintenance":return As;case"checkout":case"checkin":return Ke;default:return _a}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your daily overview"})]}),e.jsxs(q,{variant:"outline",className:"text-blue-600 border-blue-200",children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),"Staff Portal"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map(h=>{const x=h.icon;return e.jsx(Es,{href:h.href,children:e.jsxs(O,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:h.title}),e.jsx(x,{className:`h-4 w-4 text-${h.color}-600`})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.count}),e.jsx("p",{className:`text-xs text-${h.color}-600`,children:h.description})]})]})},h.title)})}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"w-5 h-5"}),"Today's Tasks (",c.length,")"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"space-y-3",children:c.map(h=>{const x=m(h.category);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:h.title}),e.jsxs("div",{className:"text-sm text-gray-500",children:[h.property," • ",h.time]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:d(h.priority),children:h.priority}),e.jsx(q,{variant:"outline",className:u(h.status),children:h.status.replace("_"," ")})]})]},h.id)})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(Es,{href:"/tasks",children:e.jsx(R,{variant:"outline",className:"w-full",children:"View All My Tasks"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"💰 Wallet & Expenses"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(Es,{href:"/staff-wallet-petty-cash",children:e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(na,{className:"w-4 h-4 mr-2"}),"Manage Petty Cash"]})}),e.jsx(Es,{href:"/staff-cash-collection",children:e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Cash Collection"]})})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"🏘️ Property Tasks"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(Es,{href:"/checkin-checkout-workflow",children:e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Check-in/Out"]})}),e.jsx(Es,{href:"/maintenance-log-warranty-tracker",children:e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(As,{className:"w-4 h-4 mr-2"}),"Maintenance"]})})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"💬 Guest Services"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsx(Es,{href:"/guest-portal-smart-requests",children:e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(gn,{className:"w-4 h-4 mr-2"}),"Guest Requests"]})}),e.jsx(Es,{href:"/daily-operations",children:e.jsxs(R,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Daily Operations"]})})]})]})]})]})}function mNe(){const[t,s]=j.useState(!1),[r,n]=j.useState(!1),[a,i]=j.useState(""),{toast:l}=Xe(),o=ut(),{data:c=[],isLoading:d}=ge({queryKey:["/api/admin/staff-permissions"]}),u=Ce({mutationFn:async g=>fe(`/api/admin/staff-permissions/${g.staffId}/grant-task-creation`,{method:"POST",body:JSON.stringify(g)}),onSuccess:()=>{l({title:"Permission Granted",description:"Task creation permission has been granted to the staff member."}),o.invalidateQueries({queryKey:["/api/admin/staff-permissions"]}),s(!1)},onError:g=>{l({title:"Error",description:g.message||"Failed to grant permission",variant:"destructive"})}}),m=Ce({mutationFn:async g=>fe(`/api/admin/staff-permissions/${g.staffId}/revoke-task-creation`,{method:"POST",body:JSON.stringify(g)}),onSuccess:()=>{l({title:"Permission Revoked",description:"Task creation permission has been revoked from the staff member."}),o.invalidateQueries({queryKey:["/api/admin/staff-permissions"]}),n(!1)},onError:g=>{l({title:"Error",description:g.message||"Failed to revoke permission",variant:"destructive"})}}),h=g=>{g.preventDefault();const p=new FormData(g.currentTarget),f={staffId:p.get("staffId"),reason:p.get("reason"),departments:p.get("departments").split(",").map(v=>v.trim()),maxTasksPerDay:parseInt(p.get("maxTasksPerDay")),expiresAt:p.get("expiresAt")||void 0};u.mutate(f)},x=g=>{g.preventDefault();const p=new FormData(g.currentTarget),f={staffId:p.get("staffId"),reason:p.get("reason")};m.mutate(f)};return d?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_t,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Permission Management"})]}),e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"Loading staff permissions..."})})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_t,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Permission Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage task creation permissions for staff members"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ve,{open:t,onOpenChange:s,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(zu,{className:"w-4 h-4 mr-2"}),"Grant Permission"]})}),e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Grant Task Creation Permission"})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"staffId",children:"Staff User ID"}),e.jsx(H,{name:"staffId",placeholder:"staff-pool",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"reason",children:"Reason for granting permission"}),e.jsx(nt,{name:"reason",placeholder:"e.g., Experienced staff member needs to create maintenance tasks",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"departments",children:"Allowed Departments (comma-separated)"}),e.jsx(H,{name:"departments",placeholder:"cleaning, maintenance, general",defaultValue:"general",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"maxTasksPerDay",children:"Maximum Tasks Per Day"}),e.jsx(H,{name:"maxTasksPerDay",type:"number",defaultValue:"3",min:"1",max:"10",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"expiresAt",children:"Expiration Date (optional)"}),e.jsx(H,{name:"expiresAt",type:"date"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:u.isPending,children:u.isPending?"Granting...":"Grant Permission"})]})]})]})]}),e.jsxs(Ve,{open:r,onOpenChange:n,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"destructive",children:[e.jsx(e4,{className:"w-4 h-4 mr-2"}),"Revoke Permission"]})}),e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Revoke Task Creation Permission"})}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"staffId",children:"Staff User ID"}),e.jsx(H,{name:"staffId",placeholder:"staff-pool",required:!0})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"reason",children:"Reason for revoking permission"}),e.jsx(nt,{name:"reason",placeholder:"e.g., Staff member no longer needs task creation access",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx(R,{type:"submit",variant:"destructive",disabled:m.isPending,children:m.isPending?"Revoking...":"Revoke Permission"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Staff"}),e.jsx(st,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Can Create Tasks"}),e.jsx(Me,{className:"h-4 w-4 text-green-600"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.filter(g=>g.canCreateTasks&&g.isActive).length})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Permission Requests"}),e.jsx(Et,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No pending requests"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-5 h-5"}),"Staff Permissions"]})}),e.jsx(D,{children:c.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_t,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"No staff permissions configured"}),e.jsx("p",{className:"text-sm",children:"Grant permissions to staff members to allow task creation"})]}):e.jsx("div",{className:"space-y-4",children:c.map(g=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${g.canCreateTasks&&g.isActive?"bg-green-100":"bg-gray-100"}`,children:g.canCreateTasks&&g.isActive?e.jsx(Me,{className:"w-5 h-5 text-green-600"}):e.jsx(Et,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Staff ID: ",g.staffUserId]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Max tasks: ",g.maxTasksPerDay,"/day • Departments: ",g.allowedDepartments.join(", ")]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Granted by: ",g.grantedBy," • ",g.reason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:g.canCreateTasks&&g.isActive?"default":"secondary",children:g.canCreateTasks&&g.isActive?"Active":"Inactive"}),g.expiresAt&&e.jsxs(q,{variant:"outline",className:"text-xs",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"}),"Expires: ",new Date(g.expiresAt).toLocaleDateString()]})]})]})},g.id))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Permission Guidelines"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Default Behavior:"})," Staff members cannot create tasks unless explicitly granted permission by an administrator."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Daily Limits:"})," Staff can only create a limited number of tasks per day to prevent system overload."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Department Restrictions:"})," Staff can only create tasks for departments they are authorized to work with."]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Approval Process:"})," Staff-created tasks may require admin approval before being executed."]})]})]})})]})]})}const hNe=()=>{const[t,s]=j.useState(!1),[r,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(!1),c=async()=>{if(r.trim()){o(!0),console.log("🔍 Processing query:",JSON.stringify(r));try{console.log("📤 Sending request to /api/ai-bot/query...");const u=await fetch("/api/ai-bot/query",{method:"POST",headers:{"Content-Type":"application/json",credentials:"include"},credentials:"include",body:JSON.stringify({question:r})});if(console.log("📥 Response status:",u.status),!u.ok){const h=await u.json().catch(()=>({error:"Unknown error"}));console.error("❌ API Error:",u.status,h),u.status===401?i("🔒 Authentication required. Please refresh the page to log in automatically, then try again."):i(`Error (${u.status}): ${h.error||h.message||"Failed to get response from AI assistant."}`);return}const m=await u.json();console.log("✅ Received data:",m),m.response?i(m.response):(console.warn("⚠️ No response field in data:",m),i("No response received from AI. Please try again or contact support."))}catch(u){console.error("❌ Exception in askCortex:",u),i(`Connection error: ${u.message||"Could not connect to AI assistant. Please check your internet connection."}`)}finally{o(!1)}}},d=u=>{u.key==="Enter"&&u.ctrlKey&&c()};return e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t?e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg border dark:border-gray-700 rounded-lg w-96 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100",children:"Captain Cortex"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",title:"Close",children:"❌"})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"The Smart Co-Pilot for Property Management by HostPilotPro"}),e.jsx("textarea",{className:"w-full p-2 border dark:border-gray-600 rounded mb-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Ask about your tasks, properties, or any management question...",value:r,onChange:u=>n(u.target.value),onKeyDown:d}),e.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded w-full disabled:bg-gray-400 transition-colors",onClick:c,disabled:l||!r.trim(),children:l?"Thinking...":"Ask (Ctrl+Enter)"}),a&&e.jsxs("div",{className:"mt-2 p-2 border dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700 text-sm",children:[e.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:"Response:"}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap mt-1",children:a})]})]}):e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-colors",onClick:()=>s(!0),title:"Open Captain Cortex AI Assistant",children:"👨‍✈️ Captain Cortex"})})};function xNe(){return j.useEffect(()=>{["/api/properties","/api/tasks","/api/bookings","/api/dashboard/stats","/api/finance","/api/finance/analytics","/api/users"].forEach(r=>{ws.prefetchQuery({queryKey:[r],staleTime:60*60*1e3})}),["/dashboard-hub","/property-hub","/finance-hub","/system-hub"].forEach(r=>{ws.prefetchQuery({queryKey:["route",r],queryFn:()=>Promise.resolve(!0),staleTime:60*60*1e3})})},[]),null}const pNe=[{value:"villa",label:"Villa Management"},{value:"hotel",label:"Hotel / Resort"},{value:"apartment",label:"Apartment Complex"},{value:"bnb",label:"B&B / Guesthouse"},{value:"other",label:"Other"}],ok=[{value:"hostaway",label:"Hostaway",description:"Full integration available",supported:!0},{value:"guesty",label:"Guesty",description:"Integration coming soon",supported:!1},{value:"lodgify",label:"Lodgify",description:"Integration coming soon",supported:!1},{value:"airbnb",label:"Airbnb Direct",description:"Manual import only",supported:!1},{value:"none",label:"No PMS / Manual Entry",description:"Start without PMS integration",supported:!0}],ck=[{id:"starter",name:"Starter",icon:e.jsx(us,{className:"h-5 w-5"}),description:"Perfect for small property managers",propertyRange:"1-10 properties",price:"$15",priceDetail:"per property/month",features:["Property & booking management","Basic task tracking","Financial reporting","Email support","Mobile app access"]},{id:"professional",name:"Professional",icon:e.jsx(hl,{className:"h-5 w-5"}),description:"For growing management companies",propertyRange:"11-50 properties",price:"$12",priceDetail:"per property/month",popular:!0,features:["Everything in Starter","PMS integrations (Hostaway)","Advanced analytics","Staff management","API access","Priority support"]},{id:"enterprise",name:"Enterprise",icon:e.jsx(Ut,{className:"h-5 w-5"}),description:"For large-scale operations",propertyRange:"50+ properties",price:"$8",priceDetail:"per property/month",features:["Everything in Professional","White-label branding","Custom integrations","Advanced reporting","Dedicated account manager","Custom training"]}],fNe=[{id:"hostaway",label:"Hostaway PMS",description:"Property sync & calendar"},{id:"stripe",label:"Stripe Payments",description:"Payment processing"},{id:"quickbooks",label:"QuickBooks",description:"Accounting integration"},{id:"twilio",label:"SMS/WhatsApp",description:"Guest communication"},{id:"mailchimp",label:"Email Marketing",description:"Guest outreach"}],gNe=["Thailand","Singapore","Malaysia","Indonesia","Philippines","Vietnam","Cambodia","Laos","Myanmar","Brunei","Other"],jNe=[{value:"0-10k",label:"$0 - $10k/month"},{value:"10k-50k",label:"$10k - $50k/month"},{value:"50k-100k",label:"$50k - $100k/month"},{value:"100k+",label:"$100k+/month"}];function vNe(){const{toast:t}=Xe(),[s,r]=j.useState("business"),[n,a]=j.useState(!1),[i,l]=j.useState({companyName:"",contactName:"",email:"",phone:"",country:"",website:"",propertyCount:"",businessType:"",subscriptionTier:"professional",subscriptionType:"trial",estimatedMonthlyRevenue:"",pmsSystem:"",currentSoftware:"",integrationPriority:[],staffStructure:{ceoCount:1,managerCount:1,supervisorCount:2,staffCount:5,agentCount:0},message:"",requestedFeatures:[]}),o=(p,f)=>{l(v=>({...v,integrationPriority:f?[...v.integrationPriority,p]:v.integrationPriority.filter(b=>b!==p)}))},c=()=>{const p=parseInt(i.propertyCount)||0,f=ck.find(b=>b.id===i.subscriptionTier);if(!f||p===0)return{monthly:0,tier:null};const v=parseInt(f.price.replace("$",""));return{monthly:p*v,tier:f,count:p}},d=()=>{const p=parseInt(i.propertyCount)||0;return p<=10?"starter":p<=50?"professional":"enterprise"},u=()=>{const p=["business","subscription","pms","staff","review"],f=p.indexOf(s);f<p.length-1&&r(p[f+1])},m=()=>{const p=["business","subscription","pms","staff","review"],f=p.indexOf(s);f>0&&r(p[f-1])},h=p=>{switch(p){case"business":return i.companyName&&i.contactName&&i.email&&i.country&&i.propertyCount;case"subscription":return i.subscriptionTier&&i.subscriptionType;case"pms":return i.pmsSystem!==void 0;case"staff":return!0;default:return!0}},x=async p=>{p.preventDefault(),a(!0);try{await fe("/api/saas/signup-request","POST",{...i,propertyCount:parseInt(i.propertyCount)||0}),t({title:"Request Submitted!",description:`Thank you for your interest in HostPilotPro! We'll provision your ${i.subscriptionType==="trial"?"trial":"paid"} environment and send setup instructions to ${i.email} within 24 hours.`}),r("success")}catch{t({title:"Submission Failed",description:"Unable to submit your request. Please try again.",variant:"destructive"})}finally{a(!1)}},g=c();return d(),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Join HostPilotPro"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Scale your property management business with our comprehensive SaaS platform. Get your dedicated environment with PMS integrations, staff management, and enterprise-grade tools."})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex justify-center space-x-4",children:[{id:"business",label:"Business",icon:_s},{id:"subscription",label:"Plan",icon:hl},{id:"pms",label:"PMS",icon:Lt},{id:"staff",label:"Team",icon:st},{id:"review",label:"Review",icon:Me}].map((p,f)=>{const v=s===p.id,b=["business","subscription","pms","staff"].slice(0,["business","subscription","pms","staff","review"].indexOf(s)).includes(p.id),y=p.icon;return e.jsxs("div",{className:`flex items-center ${f<4?"flex-1":""}`,children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${b?"bg-green-500 text-white":v?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:e.jsx(y,{className:"h-5 w-5"})}),e.jsx("span",{className:`ml-2 text-sm font-medium ${v?"text-blue-600":b?"text-green-600":"text-gray-500"}`,children:p.label}),f<4&&e.jsx("div",{className:`flex-1 h-1 mx-4 ${b?"bg-green-500":"bg-gray-300"}`})]},p.id)})})}),e.jsxs(O,{className:"shadow-lg",children:[s==="business"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-6 w-6 text-blue-600"}),"Business Information"]}),e.jsx(Te,{children:"Tell us about your property management company"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"companyName",className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Company Name *"]}),e.jsx(H,{id:"companyName",value:i.companyName,onChange:p=>l(f=>({...f,companyName:p.target.value})),placeholder:"Mr Property Siam",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"contactName",className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Contact Person *"]}),e.jsx(H,{id:"contactName",value:i.contactName,onChange:p=>l(f=>({...f,contactName:p.target.value})),placeholder:"Your Full Name",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"Email Address *"]}),e.jsx(H,{id:"email",type:"email",value:i.email,onChange:p=>l(f=>({...f,email:p.target.value})),placeholder:"contact@yourcompany.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4"}),"Phone Number"]}),e.jsx(H,{id:"phone",value:i.phone,onChange:p=>l(f=>({...f,phone:p.target.value})),placeholder:"+66 123 456 789"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"country",className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),"Country *"]}),e.jsxs(te,{value:i.country,onValueChange:p=>l(f=>({...f,country:p})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select your country"})}),e.jsx(ee,{children:gNe.map(p=>e.jsx(P,{value:p,children:p},p))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"website",className:"flex items-center gap-2",children:[e.jsx(sa,{className:"h-4 w-4"}),"Website"]}),e.jsx(H,{id:"website",value:i.website,onChange:p=>l(f=>({...f,website:p.target.value})),placeholder:"https://yourcompany.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"propertyCount",className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Number of Properties *"]}),e.jsx(H,{id:"propertyCount",type:"number",min:"1",max:"500",value:i.propertyCount,onChange:p=>{const f=parseInt(p.target.value)||0;l(v=>({...v,propertyCount:p.target.value,subscriptionTier:f<=10?"starter":f<=50?"professional":"enterprise"}))},placeholder:"50"}),i.propertyCount&&e.jsxs("p",{className:"text-sm text-blue-600",children:["Recommended plan: ",d()==="starter"?"Starter":d()==="professional"?"Professional":"Enterprise"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"businessType",children:"Business Type"}),e.jsxs(te,{value:i.businessType,onValueChange:p=>l(f=>({...f,businessType:p})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select business type"})}),e.jsx(ee,{children:pNe.map(p=>e.jsx(P,{value:p.value,children:p.label},p.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"estimatedRevenue",children:"Estimated Monthly Revenue"}),e.jsxs(te,{value:i.estimatedMonthlyRevenue,onValueChange:p=>l(f=>({...f,estimatedMonthlyRevenue:p})),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select revenue range (optional)"})}),e.jsx(ee,{children:jNe.map(p=>e.jsx(P,{value:p.value,children:p.label},p.value))})]})]})]})]}),s==="subscription"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(hl,{className:"h-6 w-6 text-blue-600"}),"Choose Your Plan"]}),e.jsx(Te,{children:"Select the subscription tier that fits your business size"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-gray-100 p-1 rounded-lg flex",children:[e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i.subscriptionType==="trial"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,onClick:()=>l(p=>({...p,subscriptionType:"trial"})),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"14-Day Free Trial"]})}),e.jsx("button",{type:"button",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${i.subscriptionType==="paid"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,onClick:()=>l(p=>({...p,subscriptionType:"paid"})),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Start Paid Plan"]})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:ck.map(p=>e.jsxs("div",{className:`relative p-6 rounded-lg border-2 cursor-pointer transition-all ${i.subscriptionTier===p.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-blue-300"} ${p.popular?"ring-2 ring-blue-200":""}`,onClick:()=>l(f=>({...f,subscriptionTier:p.id})),children:[p.popular&&e.jsx(q,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-600",children:"Most Popular"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:p.icon}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:p.name}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:p.description}),e.jsx("p",{className:"text-sm text-blue-600 mb-4",children:p.propertyRange}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-3xl font-bold",children:p.price}),e.jsxs("span",{className:"text-gray-600",children:["/",p.priceDetail]})]}),i.propertyCount&&e.jsxs("div",{className:"mb-4 p-2 bg-gray-50 rounded",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[parseInt(i.propertyCount)," properties × ",p.price]}),e.jsxs("p",{className:"font-bold text-lg",children:["$",parseInt(i.propertyCount)*parseInt(p.price.replace("$","")),"/month"]})]}),e.jsx("ul",{className:"text-left space-y-2 text-sm",children:p.features.map((f,v)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Me,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),f]},v))})]})]},p.id))}),g.monthly>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Your Plan Summary"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[g.count," properties on ",g.tier?.name," plan"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.subscriptionType==="trial"?"14-day free trial, then ":"","$",g.monthly,"/month"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.subscriptionType==="trial"?"FREE":`$${g.monthly}`}),e.jsx("p",{className:"text-sm text-gray-600",children:i.subscriptionType==="trial"?"for 14 days":"per month"})]})]})]})]})})]}),s==="pms"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-6 w-6 text-blue-600"}),"PMS Integration"]}),e.jsx(Te,{children:"Connect your Property Management System for seamless data sync"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:ok.map(p=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${i.pmsSystem===p.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"} ${p.supported?"":"opacity-60"}`,onClick:()=>l(f=>({...f,pmsSystem:p.value})),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[p.label,p.value==="hostaway"&&e.jsx(q,{className:"bg-green-100 text-green-800",children:"Ready for Mr Property Siam"}),!p.supported&&e.jsx(q,{variant:"secondary",children:"Coming Soon"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:p.description})]}),i.pmsSystem===p.value&&e.jsx(Me,{className:"h-5 w-5 text-blue-500"})]})},p.value))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(K,{htmlFor:"currentSoftware",children:"What software do you currently use?"}),e.jsx(H,{id:"currentSoftware",value:i.currentSoftware,onChange:p=>l(f=>({...f,currentSoftware:p.target.value})),placeholder:"e.g., Excel, QuickBooks, custom system"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(K,{className:"text-base font-semibold",children:"Integration Priorities (optional)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:fNe.map(p=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nl,{id:p.id,checked:i.integrationPriority.includes(p.id),onCheckedChange:f=>o(p.id,f)}),e.jsx(K,{htmlFor:p.id,className:"text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:p.label}),e.jsx("p",{className:"text-gray-500 text-xs",children:p.description})]})})]},p.id))})]})]})]}),s==="staff"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-6 w-6 text-blue-600"}),"Team Structure"]}),e.jsx(Te,{children:"Plan your staff hierarchy for role-based access control"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"ceoCount",className:"flex items-center gap-2",children:[e.jsx(hl,{className:"h-4 w-4"}),"CEO/Owners (Full Access)"]}),e.jsx(H,{id:"ceoCount",type:"number",min:"1",max:"5",value:i.staffStructure.ceoCount,onChange:p=>l(f=>({...f,staffStructure:{...f.staffStructure,ceoCount:parseInt(p.target.value)||1}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"System administration, billing, full property access"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"managerCount",className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-4 w-4"}),"Managers (Property Oversight)"]}),e.jsx(H,{id:"managerCount",type:"number",min:"0",max:"10",value:i.staffStructure.managerCount,onChange:p=>l(f=>({...f,staffStructure:{...f.staffStructure,managerCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Property portfolio management, staff oversight"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"supervisorCount",className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"Supervisors (Operations)"]}),e.jsx(H,{id:"supervisorCount",type:"number",min:"0",max:"20",value:i.staffStructure.supervisorCount,onChange:p=>l(f=>({...f,staffStructure:{...f.staffStructure,supervisorCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Task management, quality control, reporting"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"staffCount",className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Staff Members (Execution)"]}),e.jsx(H,{id:"staffCount",type:"number",min:"0",max:"100",value:i.staffStructure.staffCount,onChange:p=>l(f=>({...f,staffStructure:{...f.staffStructure,staffCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Housekeeping, maintenance, guest services"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"agentCount",className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-4 w-4"}),"Agents (Bookings)"]}),e.jsx(H,{id:"agentCount",type:"number",min:"0",max:"50",value:i.staffStructure.agentCount,onChange:p=>l(f=>({...f,staffStructure:{...f.staffStructure,agentCount:parseInt(p.target.value)||0}}))}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sales agents, booking management, commissions"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Total Team Size"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Object.values(i.staffStructure).reduce((p,f)=>p+f,0)," team members"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Accounts will be created during setup based on your structure"})]})]})]}),s==="review"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-6 w-6 text-blue-600"}),"Review & Submit"]}),e.jsx(Te,{children:"Review your configuration and submit your request"})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-base",children:"Business Information"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company:"})," ",i.companyName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",i.contactName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",i.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Properties:"})," ",i.propertyCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",i.country]})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-base",children:"Subscription Plan"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tier:"})," ",i.subscriptionTier.charAt(0).toUpperCase()+i.subscriptionTier.slice(1)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",i.subscriptionType==="trial"?"14-day Free Trial":"Paid Plan"]}),g.monthly>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Monthly Cost:"})," ",i.subscriptionType==="trial"?"FREE (then $"+g.monthly+")":"$"+g.monthly]})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-base",children:"PMS Integration"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"System:"})," ",ok.find(p=>p.value===i.pmsSystem)?.label||"None selected"]}),i.currentSoftware&&e.jsxs("p",{children:[e.jsx("strong",{children:"Current Software:"})," ",i.currentSoftware]}),i.integrationPriority.length>0&&e.jsxs("p",{children:[e.jsx("strong",{children:"Priority Integrations:"})," ",i.integrationPriority.length," selected"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-base",children:"Team Structure"})}),e.jsxs(D,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"CEOs/Owners:"})," ",i.staffStructure.ceoCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Managers:"})," ",i.staffStructure.managerCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Supervisors:"})," ",i.staffStructure.supervisorCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Staff:"})," ",i.staffStructure.staffCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Agents:"})," ",i.staffStructure.agentCount]}),e.jsxs("p",{className:"font-semibold border-t pt-1",children:[e.jsx("strong",{children:"Total:"})," ",Object.values(i.staffStructure).reduce((p,f)=>p+f,0)," accounts"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"finalMessage",className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-4 w-4"}),"Additional Requirements (optional)"]}),e.jsx(nt,{id:"finalMessage",value:i.message,onChange:p=>l(f=>({...f,message:p.target.value})),placeholder:"Any special requirements, questions, or timeline preferences...",rows:3})]})]})]}),s!=="success"&&e.jsxs("div",{className:"flex justify-between p-6 border-t bg-gray-50",children:[e.jsxs(R,{type:"button",variant:"outline",onClick:m,disabled:s==="business",className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-4 w-4"}),"Back"]}),e.jsx("div",{className:"flex gap-2",children:s==="review"?e.jsxs(R,{type:"button",onClick:x,disabled:n,className:"flex items-center gap-2",children:[n?"Submitting...":"Submit Request",e.jsx(Me,{className:"h-4 w-4"})]}):e.jsxs(R,{type:"button",onClick:u,disabled:!h(s),className:"flex items-center gap-2",children:["Next",e.jsx(VT,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-blue-600"}),"Quick Provisioning"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Your dedicated environment will be provisioned within 24 hours with all selected integrations ready to use."})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5 text-blue-600"}),"PMS Integration"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Seamless integration with Hostaway and other PMS systems. Perfect for companies like Mr Property Siam."})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5 text-blue-600"}),"Team Ready"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Role-based access control with accounts for CEOs, managers, staff, and agents from day one."})})]})]})]})})}function uI(){const{toast:t}=Xe(),s=ut(),[r,n]=j.useState(null),[a,i]=j.useState(""),[l,o]=j.useState(""),{data:c=[],isLoading:d}=ge({queryKey:["/api/saas/signup-requests"]}),{data:u=[],isLoading:m}=ge({queryKey:["/api/saas/tenant-organizations"]}),h=Ce({mutationFn:async({requestId:v,hostawayApiKey:b})=>fe(`/api/saas/signup-requests/${v}/approve`,"POST",{hostawayApiKey:b}),onSuccess:()=>{t({title:"Request Approved",description:"Environment provisioning has started. The client will receive login details shortly."}),s.invalidateQueries({queryKey:["/api/saas/signup-requests"]}),s.invalidateQueries({queryKey:["/api/saas/tenant-organizations"]}),n(null),i("")},onError:v=>{t({title:"Approval Failed",description:v.message||"Failed to approve request",variant:"destructive"})}}),x=Ce({mutationFn:async({requestId:v,reason:b})=>fe(`/api/saas/signup-requests/${v}/reject`,"POST",{reason:b}),onSuccess:()=>{t({title:"Request Rejected",description:"The client has been notified of the rejection."}),s.invalidateQueries({queryKey:["/api/saas/signup-requests"]}),n(null),o("")}}),g=Ce({mutationFn:async({organizationId:v,status:b})=>fe(`/api/saas/tenant-organizations/${v}/status`,"PATCH",{status:b}),onSuccess:()=>{t({title:"Status Updated",description:"Tenant organization status has been updated successfully."}),s.invalidateQueries({queryKey:["/api/saas/tenant-organizations"]})}}),p=v=>{switch(v){case"pending":return e.jsxs(q,{variant:"outline",className:"text-yellow-600",children:[e.jsx(Ke,{className:"h-3 w-3 mr-1"}),"Pending"]});case"approved":return e.jsxs(q,{variant:"outline",className:"text-green-600",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return e.jsxs(q,{variant:"outline",className:"text-red-600",children:[e.jsx(br,{className:"h-3 w-3 mr-1"}),"Rejected"]});case"active":return e.jsxs(q,{variant:"outline",className:"text-green-600",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Active"]});case"suspended":return e.jsxs(q,{variant:"outline",className:"text-yellow-600",children:[e.jsx(Ke,{className:"h-3 w-3 mr-1"}),"Suspended"]});case"terminated":return e.jsxs(q,{variant:"outline",className:"text-red-600",children:[e.jsx(br,{className:"h-3 w-3 mr-1"}),"Terminated"]});default:return e.jsx(q,{variant:"outline",children:v})}},f=v=>{const b={basic:"bg-blue-100 text-blue-800",pro:"bg-purple-100 text-purple-800",enterprise:"bg-amber-100 text-amber-800"};return e.jsx(q,{className:b[v]||"",children:v.toUpperCase()})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"SaaS Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage signup requests and tenant organizations"})]})}),e.jsxs(ot,{defaultValue:"requests",className:"space-y-4",children:[e.jsxs(it,{children:[e.jsxs(re,{value:"requests",className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Signup Requests"]}),e.jsxs(re,{value:"organizations",className:"flex items-center gap-2",children:[e.jsx(sa,{className:"h-4 w-4"}),"Organizations"]})]}),e.jsx(ne,{value:"requests",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Pending Signup Requests"}),e.jsx(Te,{children:"Review and approve new management company requests"})]}),e.jsx(D,{children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):c.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No signup requests found"}):e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Company"}),e.jsx(Oe,{children:"Contact"}),e.jsx(Oe,{children:"Country"}),e.jsx(Oe,{children:"Properties"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Submitted"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:c.map(v=>e.jsxs(wt,{children:[e.jsx(Ae,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:v.companyName}),v.website&&e.jsx("div",{className:"text-sm text-gray-500",children:v.website})]})}),e.jsx(Ae,{children:e.jsxs("div",{children:[e.jsx("div",{children:v.contactName}),e.jsx("div",{className:"text-sm text-gray-500",children:v.email})]})}),e.jsx(Ae,{children:v.country}),e.jsx(Ae,{children:v.propertyCount||"N/A"}),e.jsx(Ae,{children:p(v.status)}),e.jsx(Ae,{children:Md(new Date(v.submittedAt),{addSuffix:!0})}),e.jsx(Ae,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>n(v),children:[e.jsx($t,{className:"h-4 w-4 mr-1"}),"Review"]})}),e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Review Signup Request"}),e.jsxs(Pt,{children:[v.companyName," - ",v.contactName]})]}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Company Name"}),e.jsx("p",{children:r.companyName})]}),e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Contact Person"}),e.jsx("p",{children:r.contactName})]}),e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Email"}),e.jsx("p",{children:r.email})]}),e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Phone"}),e.jsx("p",{children:r.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Country"}),e.jsx("p",{children:r.country})]}),e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Properties"}),e.jsx("p",{children:r.propertyCount||"N/A"})]})]}),r.message&&e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Message"}),e.jsx("p",{className:"mt-1 text-sm",children:r.message})]}),r.requestedFeatures&&r.requestedFeatures.length>0&&e.jsxs("div",{children:[e.jsx(K,{className:"font-semibold",children:"Requested Features"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:r.requestedFeatures.map(b=>e.jsx(q,{variant:"outline",children:b},b))})]}),r.status==="pending"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"hostawayApiKey",children:"Hostaway API Key (Optional)"}),e.jsx(H,{id:"hostawayApiKey",value:a,onChange:b=>i(b.target.value),placeholder:"Enter Hostaway API key for integration"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(R,{onClick:()=>h.mutate({requestId:r.id,hostawayApiKey:a}),disabled:h.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Approve & Deploy"]}),e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"destructive",children:[e.jsx(br,{className:"h-4 w-4 mr-1"}),"Reject"]})}),e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Reject Request"}),e.jsx(Pt,{children:"Please provide a reason for rejection"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(nt,{value:l,onChange:b=>o(b.target.value),placeholder:"Reason for rejection...",rows:3}),e.jsx(R,{onClick:()=>x.mutate({requestId:r.id,reason:l}),disabled:!l.trim()||x.isPending,variant:"destructive",className:"w-full",children:"Confirm Rejection"})]})]})]})]})]})]})]})]})})})]},v.id))})]})})]})}),e.jsx(ne,{value:"organizations",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Active Organizations"}),e.jsx(Te,{children:"Manage existing tenant organizations and their environments"})]}),e.jsx(D,{children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):u.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No organizations found"}):e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Company"}),e.jsx(Oe,{children:"Subdomain"}),e.jsx(Oe,{children:"Plan"}),e.jsx(Oe,{children:"Limits"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:u.map(v=>e.jsxs(wt,{children:[e.jsx(Ae,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:v.companyName}),e.jsx("div",{className:"text-sm text-gray-500",children:v.contactEmail})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sa,{className:"h-4 w-4 text-gray-400"}),v.subdomain,".hostpilotpro.com"]})}),e.jsx(Ae,{children:f(v.planType)}),e.jsx(Ae,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[v.maxProperties," properties"]}),e.jsxs("div",{className:"text-gray-500",children:[v.maxUsers," users"]})]})}),e.jsx(Ae,{children:p(v.status)}),e.jsx(Ae,{children:Md(new Date(v.createdAt),{addSuffix:!0})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>window.open(`https://${v.subdomain}.hostpilotpro.com`,"_blank"),children:[e.jsx(sa,{className:"h-4 w-4 mr-1"}),"Visit"]}),e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",children:[e.jsx(Lt,{className:"h-4 w-4 mr-1"}),"Manage"]})}),e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Manage Organization"}),e.jsx(Pt,{children:v.companyName})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(R,{onClick:()=>g.mutate({organizationId:v.organizationId,status:v.status==="active"?"suspended":"active"}),variant:v.status==="active"?"destructive":"default",disabled:g.isPending,children:v.status==="active"?"Suspend":"Activate"})})})]})]})]})})]},v.id))})]})})]})})]})]})}const yNe=Object.freeze(Object.defineProperty({__proto__:null,default:uI},Symbol.toStringTag,{value:"Module"})),bNe={task:{name:"Task Master",icon:Me,color:"text-blue-600"},booking:{name:"Booking Expert",icon:We,color:"text-green-600"},finance:{name:"Finance Pro",icon:Ot,color:"text-yellow-600"},property:{name:"Property Guru",icon:dr,color:"text-purple-600"},system:{name:"System Elite",icon:hl,color:"text-red-600"}},xo=[0,100,250,500,1e3,2e3,4e3,8e3,15e3,3e4,5e4];function NNe(t){for(let s=xo.length-1;s>=0;s--)if(t>=xo[s])return s+1;return 1}function wNe(t){const s=NNe(t),r=xo[s-1]||0,n=xo[s]||xo[xo.length-1],a=(t-r)/(n-r)*100;return{current:r,next:n,progress:Math.min(a,100)}}function SNe({userId:t,organizationId:s}){const[r,n]=j.useState("all"),{data:a,isLoading:i}=ge({queryKey:[`/api/achievements/user/${t}`],enabled:!!t}),{data:l=[],isLoading:o}=ge({queryKey:["/api/achievements/definitions"]}),c=i||o;l.filter(m=>m.isEarned);const d=wNe(a?.totalPoints||0),u=r==="all"?l:l.filter(m=>m.category===r);return c?e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{className:"bg-gradient-to-r from-primary/10 to-secondary/10",children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:e.jsx(hl,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Level ",a?.level||1]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a?.totalPoints||0," total points"]})]})]}),e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(QT,{className:"h-3 w-3"}),a?.currentStreak||0," day streak"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Progress to Level ",(a?.level||1)+1]}),e.jsxs("span",{children:[Math.round(d.progress),"%"]})]}),e.jsx(Gn,{value:d.progress,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[d.current," pts"]}),e.jsxs("span",{children:[d.next," pts"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(O,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(Me,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:a?.tasksCompleted||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Tasks Completed"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(We,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:a?.bookingsProcessed||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Bookings Processed"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx(dr,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:a?.propertiesManaged||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Properties Managed"})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Rn,{className:"h-5 w-5 text-yellow-600"}),"Achievements"]}),e.jsx(Te,{children:"Track your progress and unlock rewards"})]}),e.jsx(D,{children:e.jsxs(ot,{value:r,onValueChange:n,children:[e.jsxs(it,{className:"grid w-full grid-cols-6",children:[e.jsx(re,{value:"all",children:"All"}),Object.entries(bNe).map(([m,h])=>e.jsxs(re,{value:m,className:"flex items-center gap-1",children:[e.jsx(h.icon,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:h.name.split(" ")[0]})]},m))]}),e.jsx(ne,{value:r,className:"mt-4",children:e.jsx(Uo,{className:"h-96",children:e.jsx("div",{className:"grid gap-3",children:u.map(m=>e.jsxs("div",{className:_e("flex items-center gap-4 p-4 rounded-lg border transition-all",m.isEarned?"bg-primary/5 border-primary/20":"bg-muted/30 border-muted"),children:[e.jsx("div",{className:_e("w-12 h-12 rounded-full flex items-center justify-center",m.isEarned?"bg-primary text-primary-foreground":"bg-muted"),children:m.isEarned?e.jsx(ZL,{className:"h-6 w-6"}):e.jsx(us,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:m.name}),e.jsxs(q,{variant:"outline",style:{color:m.badgeColor,borderColor:m.badgeColor+"40",backgroundColor:m.badgeColor+"10"},children:[m.points," pts"]}),m.isEarned&&e.jsx(q,{variant:"secondary",className:"bg-green-100 text-green-800",children:"✓ Earned"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:m.description}),!m.isEarned&&m.progress!==void 0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[m.progress,"%"]})]}),e.jsx(Gn,{value:m.progress,className:"h-1"})]}),m.isEarned&&m.earnedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Earned ",new Date(m.earnedAt).toLocaleDateString()]})]})]},m.id))})})})]})})]})]})}const RN=j.createContext({});function _N(t){const s=j.useRef(null);return s.current===null&&(s.current=t()),s.current}const Of=j.createContext(null),IN=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class CNe extends j.Component{getSnapshotBeforeUpdate(s){const r=this.props.childRef.current;if(r&&s.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PNe({children:t,isPresent:s}){const r=j.useId(),n=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=j.useContext(IN);return j.useInsertionEffect(()=>{const{width:l,height:o,top:c,left:d}=a.current;if(s||!n.current||!l||!o)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[s]),e.jsx(CNe,{isPresent:s,childRef:n,sizeRef:a,children:j.cloneElement(t,{ref:n})})}const kNe=({children:t,initial:s,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:l})=>{const o=_N(ANe),c=j.useId(),d=j.useCallback(m=>{o.set(m,!0);for(const h of o.values())if(!h)return;n&&n()},[o,n]),u=j.useMemo(()=>({id:c,initial:s,isPresent:r,custom:a,onExitComplete:d,register:m=>(o.set(m,!1),()=>o.delete(m))}),i?[Math.random(),d]:[r,d]);return j.useMemo(()=>{o.forEach((m,h)=>o.set(h,!1))},[r]),j.useEffect(()=>{!r&&!o.size&&n&&n()},[r]),l==="popLayout"&&(t=e.jsx(PNe,{isPresent:r,children:t})),e.jsx(Of.Provider,{value:u,children:t})};function ANe(){return new Map}function mI(t=!0){const s=j.useContext(Of);if(s===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=s,i=j.useId();j.useEffect(()=>{t&&a(i)},[t]);const l=j.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,l]:[!0]}const Wm=t=>t.key||"";function dk(t){const s=[];return j.Children.forEach(t,r=>{j.isValidElement(r)&&s.push(r)}),s}const $N=typeof window<"u",hI=$N?j.useLayoutEffect:j.useEffect,TNe=({children:t,custom:s,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:l=!1})=>{const[o,c]=mI(l),d=j.useMemo(()=>dk(t),[t]),u=l&&!o?[]:d.map(Wm),m=j.useRef(!0),h=j.useRef(d),x=_N(()=>new Map),[g,p]=j.useState(d),[f,v]=j.useState(d);hI(()=>{m.current=!1,h.current=d;for(let S=0;S<f.length;S++){const w=Wm(f[S]);u.includes(w)?x.delete(w):x.get(w)!==!0&&x.set(w,!1)}},[f,u.length,u.join("-")]);const b=[];if(d!==g){let S=[...d];for(let w=0;w<f.length;w++){const C=f[w],k=Wm(C);u.includes(k)||(S.splice(w,0,C),b.push(C))}i==="wait"&&b.length&&(S=b),v(dk(S)),p(d);return}const{forceRender:y}=j.useContext(RN);return e.jsx(e.Fragment,{children:f.map(S=>{const w=Wm(S),C=l&&!o?!1:d===f||u.includes(w),k=()=>{if(x.has(w))x.set(w,!0);else return;let A=!0;x.forEach(N=>{N||(A=!1)}),A&&(y?.(),v(h.current),l&&c?.(),n&&n())};return e.jsx(kNe,{isPresent:C,initial:!m.current||r?void 0:!1,custom:C?void 0:s,presenceAffectsLayout:a,mode:i,onExitComplete:C?void 0:k,children:S},w)})})},Zr=t=>t;let xI=Zr;function FN(t){let s;return()=>(s===void 0&&(s=t()),s)}const jc=(t,s,r)=>{const n=s-t;return n===0?1:(r-t)/n},Va=t=>t*1e3,qa=t=>t/1e3,DNe={useManualTiming:!1};function ONe(t){let s=new Set,r=new Set,n=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function o(d){i.has(d)&&(c.schedule(d),t()),d(l)}const c={schedule:(d,u=!1,m=!1)=>{const x=m&&n?s:r;return u&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(l=d,n){a=!0;return}n=!0,[s,r]=[r,s],s.forEach(o),s.clear(),n=!1,a&&(a=!1,c.process(d))}};return c}const Ym=["read","resolveKeyframes","update","preRender","render","postRender"],ENe=40;function pI(t,s){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,l=Ym.reduce((v,b)=>(v[b]=ONe(i),v),{}),{read:o,resolveKeyframes:c,update:d,preRender:u,render:m,postRender:h}=l,x=()=>{const v=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(v-a.timestamp,ENe),1),a.timestamp=v,a.isProcessing=!0,o.process(a),c.process(a),d.process(a),u.process(a),m.process(a),h.process(a),a.isProcessing=!1,r&&s&&(n=!1,t(x))},g=()=>{r=!0,n=!0,a.isProcessing||t(x)};return{schedule:Ym.reduce((v,b)=>{const y=l[b];return v[b]=(S,w=!1,C=!1)=>(r||g(),y.schedule(S,w,C)),v},{}),cancel:v=>{for(let b=0;b<Ym.length;b++)l[Ym[b]].cancel(v)},state:a,steps:l}}const{schedule:Ps,cancel:Ri,state:xr,steps:rj}=pI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zr,!0),fI=j.createContext({strict:!1}),uk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vc={};for(const t in uk)vc[t]={isEnabled:s=>uk[t].some(r=>!!s[r])};function MNe(t){for(const s in t)vc[s]={...vc[s],...t[s]}}const RNe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||RNe.has(t)}let gI=t=>!Lx(t);function _Ne(t){t&&(gI=s=>s.startsWith("on")?!Lx(s):t(s))}try{_Ne(require("@emotion/is-prop-valid").default)}catch{}function INe(t,s,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(gI(a)||r===!0&&Lx(a)||!s&&!Lx(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}function $Ne(t){if(typeof Proxy>"u")return t;const s=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,a)=>a==="create"?t:(s.has(a)||s.set(a,t(a)),s.get(a))})}const Ef=j.createContext({});function Mu(t){return typeof t=="string"||Array.isArray(t)}function Mf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const LN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],BN=["initial",...LN];function Rf(t){return Mf(t.animate)||BN.some(s=>Mu(t[s]))}function jI(t){return!!(Rf(t)||t.variants)}function FNe(t,s){if(Rf(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Mu(r)?r:void 0,animate:Mu(n)?n:void 0}}return t.inherit!==!1?s:{}}function LNe(t){const{initial:s,animate:r}=FNe(t,j.useContext(Ef));return j.useMemo(()=>({initial:s,animate:r}),[mk(s),mk(r)])}function mk(t){return Array.isArray(t)?t.join(" "):t}const BNe=Symbol.for("motionComponentSymbol");function po(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function VNe(t,s,r){return j.useCallback(n=>{n&&t.onMount&&t.onMount(n),s&&(n?s.mount(n):s.unmount()),r&&(typeof r=="function"?r(n):po(r)&&(r.current=n))},[s])}const VN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qNe="framerAppearId",vI="data-"+VN(qNe),{schedule:qN}=pI(queueMicrotask,!1),yI=j.createContext({});function UNe(t,s,r,n,a){var i,l;const{visualElement:o}=j.useContext(Ef),c=j.useContext(fI),d=j.useContext(Of),u=j.useContext(IN).reducedMotion,m=j.useRef(null);n=n||c.renderer,!m.current&&n&&(m.current=n(t,{visualState:s,parent:o,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const h=m.current,x=j.useContext(yI);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&zNe(m.current,r,a,x);const g=j.useRef(!1);j.useInsertionEffect(()=>{h&&g.current&&h.update(r,d)});const p=r[vI],f=j.useRef(!!p&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,p))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,p)));return hI(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),qN.render(h.render),f.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,p)}),f.current=!1))}),h}function zNe(t,s,r,n){const{layoutId:a,layout:i,drag:l,dragConstraints:o,layoutScroll:c,layoutRoot:d}=s;t.projection=new r(t.latestValues,s["data-framer-portal-id"]?void 0:bI(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!l||o&&po(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function bI(t){if(t)return t.options.allowProjection!==!1?t.projection:bI(t.parent)}function GNe({preloadedFeatures:t,createVisualElement:s,useRender:r,useVisualState:n,Component:a}){var i,l;t&&MNe(t);function o(d,u){let m;const h={...j.useContext(IN),...d,layoutId:HNe(d)},{isStatic:x}=h,g=LNe(d),p=n(d,x);if(!x&&$N){KNe();const f=WNe(h);m=f.MeasureLayout,g.visualElement=UNe(a,p,h,s,f.ProjectionNode)}return e.jsxs(Ef.Provider,{value:g,children:[m&&g.visualElement?e.jsx(m,{visualElement:g.visualElement,...h}):null,r(a,d,VNe(p,g.visualElement,u),p,x,g.visualElement)]})}o.displayName=`motion.${typeof a=="string"?a:`create(${(l=(i=a.displayName)!==null&&i!==void 0?i:a.name)!==null&&l!==void 0?l:""})`}`;const c=j.forwardRef(o);return c[BNe]=a,c}function HNe({layoutId:t}){const s=j.useContext(RN).id;return s&&t!==void 0?s+"-"+t:t}function KNe(t,s){j.useContext(fI).strict}function WNe(t){const{drag:s,layout:r}=vc;if(!s&&!r)return{};const n={...s,...r};return{MeasureLayout:s?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const YNe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function UN(t){return typeof t!="string"||t.includes("-")?!1:!!(YNe.indexOf(t)>-1||/[A-Z]/u.test(t))}function hk(t){const s=[{},{}];return t?.values.forEach((r,n)=>{s[0][n]=r.get(),s[1][n]=r.getVelocity()}),s}function zN(t,s,r,n){if(typeof s=="function"){const[a,i]=hk(n);s=s(r!==void 0?r:t.custom,a,i)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[a,i]=hk(n);s=s(r!==void 0?r:t.custom,a,i)}return s}const qy=t=>Array.isArray(t),QNe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),XNe=t=>qy(t)?t[t.length-1]||0:t,yr=t=>!!(t&&t.getVelocity);function dh(t){const s=yr(t)?t.get():t;return QNe(s)?s.toValue():s}function ZNe({scrapeMotionValuesFromProps:t,createRenderState:s,onUpdate:r},n,a,i){const l={latestValues:JNe(n,a,i,t),renderState:s()};return r&&(l.onMount=o=>r({props:n,current:o,...l}),l.onUpdate=o=>r(o)),l}const NI=t=>(s,r)=>{const n=j.useContext(Ef),a=j.useContext(Of),i=()=>ZNe(t,s,n,a);return r?i():_N(i)};function JNe(t,s,r,n){const a={},i=n(t,{});for(const h in i)a[h]=dh(i[h]);let{initial:l,animate:o}=t;const c=Rf(t),d=jI(t);s&&d&&!c&&t.inherit!==!1&&(l===void 0&&(l=s.initial),o===void 0&&(o=s.animate));let u=r?r.initial===!1:!1;u=u||l===!1;const m=u?o:l;if(m&&typeof m!="boolean"&&!Mf(m)){const h=Array.isArray(m)?m:[m];for(let x=0;x<h.length;x++){const g=zN(t,h[x]);if(g){const{transitionEnd:p,transition:f,...v}=g;for(const b in v){let y=v[b];if(Array.isArray(y)){const S=u?y.length-1:0;y=y[S]}y!==null&&(a[b]=y)}for(const b in p)a[b]=p[b]}}}return a}const Gc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zl=new Set(Gc),wI=t=>s=>typeof s=="string"&&s.startsWith(t),SI=wI("--"),ewe=wI("var(--"),GN=t=>ewe(t)?twe.test(t.split("/*")[0].trim()):!1,twe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,CI=(t,s)=>s&&typeof t=="number"?s.transform(t):t,Qa=(t,s,r)=>r>s?s:r<t?t:r,Hc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ru={...Hc,transform:t=>Qa(0,1,t)},Qm={...Hc,default:1},fm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),di=fm("deg"),ca=fm("%"),gt=fm("px"),swe=fm("vh"),rwe=fm("vw"),xk={...ca,parse:t=>ca.parse(t)/100,transform:t=>ca.transform(t*100)},nwe={borderWidth:gt,borderTopWidth:gt,borderRightWidth:gt,borderBottomWidth:gt,borderLeftWidth:gt,borderRadius:gt,radius:gt,borderTopLeftRadius:gt,borderTopRightRadius:gt,borderBottomRightRadius:gt,borderBottomLeftRadius:gt,width:gt,maxWidth:gt,height:gt,maxHeight:gt,top:gt,right:gt,bottom:gt,left:gt,padding:gt,paddingTop:gt,paddingRight:gt,paddingBottom:gt,paddingLeft:gt,margin:gt,marginTop:gt,marginRight:gt,marginBottom:gt,marginLeft:gt,backgroundPositionX:gt,backgroundPositionY:gt},awe={rotate:di,rotateX:di,rotateY:di,rotateZ:di,scale:Qm,scaleX:Qm,scaleY:Qm,scaleZ:Qm,skew:di,skewX:di,skewY:di,distance:gt,translateX:gt,translateY:gt,translateZ:gt,x:gt,y:gt,z:gt,perspective:gt,transformPerspective:gt,opacity:Ru,originX:xk,originY:xk,originZ:gt},pk={...Hc,transform:Math.round},HN={...nwe,...awe,zIndex:pk,size:gt,fillOpacity:Ru,strokeOpacity:Ru,numOctaves:pk},iwe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lwe=Gc.length;function owe(t,s,r){let n="",a=!0;for(let i=0;i<lwe;i++){const l=Gc[i],o=t[l];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(l.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||r){const d=CI(o,HN[l]);if(!c){a=!1;const u=iwe[l]||l;n+=`${u}(${d}) `}r&&(s[l]=d)}}return n=n.trim(),r?n=r(s,a?"":n):a&&(n="none"),n}function KN(t,s,r){const{style:n,vars:a,transformOrigin:i}=t;let l=!1,o=!1;for(const c in s){const d=s[c];if(zl.has(c)){l=!0;continue}else if(SI(c)){a[c]=d;continue}else{const u=CI(d,HN[c]);c.startsWith("origin")?(o=!0,i[c]=u):n[c]=u}}if(s.transform||(l||r?n.transform=owe(s,t.transform,r):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${d} ${u}`}}const cwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},dwe={offset:"strokeDashoffset",array:"strokeDasharray"};function uwe(t,s,r=1,n=0,a=!0){t.pathLength=1;const i=a?cwe:dwe;t[i.offset]=gt.transform(-n);const l=gt.transform(s),o=gt.transform(r);t[i.array]=`${l} ${o}`}function fk(t,s,r){return typeof t=="string"?t:gt.transform(s+r*t)}function mwe(t,s,r){const n=fk(s,t.x,t.width),a=fk(r,t.y,t.height);return`${n} ${a}`}function WN(t,{attrX:s,attrY:r,attrScale:n,originX:a,originY:i,pathLength:l,pathSpacing:o=1,pathOffset:c=0,...d},u,m){if(KN(t,d,m),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:x,dimensions:g}=t;h.transform&&(g&&(x.transform=h.transform),delete h.transform),g&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=mwe(g,a!==void 0?a:.5,i!==void 0?i:.5)),s!==void 0&&(h.x=s),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),l!==void 0&&uwe(h,l,o,c,!1)}const YN=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),PI=()=>({...YN(),attrs:{}}),QN=t=>typeof t=="string"&&t.toLowerCase()==="svg";function kI(t,{style:s,vars:r},n,a){Object.assign(t.style,s,a&&a.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const AI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TI(t,s,r,n){kI(t,s,void 0,n);for(const a in s.attrs)t.setAttribute(AI.has(a)?a:VN(a),s.attrs[a])}const Bx={};function hwe(t){Object.assign(Bx,t)}function DI(t,{layout:s,layoutId:r}){return zl.has(t)||t.startsWith("origin")||(s||r!==void 0)&&(!!Bx[t]||t==="opacity")}function XN(t,s,r){var n;const{style:a}=t,i={};for(const l in a)(yr(a[l])||s.style&&yr(s.style[l])||DI(l,t)||((n=r?.getValue(l))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[l]=a[l]);return i}function OI(t,s,r){const n=XN(t,s,r);for(const a in t)if(yr(t[a])||yr(s[a])){const i=Gc.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=t[a]}return n}function xwe(t,s){try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}const gk=["x","y","width","height","cx","cy","r"],pwe={useVisualState:NI({scrapeMotionValuesFromProps:OI,createRenderState:PI,onUpdate:({props:t,prevProps:s,current:r,renderState:n,latestValues:a})=>{if(!r)return;let i=!!t.drag;if(!i){for(const o in a)if(zl.has(o)){i=!0;break}}if(!i)return;let l=!s;if(s)for(let o=0;o<gk.length;o++){const c=gk[o];t[c]!==s[c]&&(l=!0)}l&&Ps.read(()=>{xwe(r,n),Ps.render(()=>{WN(n,a,QN(r.tagName),t.transformTemplate),TI(r,n)})})}})},fwe={useVisualState:NI({scrapeMotionValuesFromProps:XN,createRenderState:YN})};function EI(t,s,r){for(const n in s)!yr(s[n])&&!DI(n,r)&&(t[n]=s[n])}function gwe({transformTemplate:t},s){return j.useMemo(()=>{const r=YN();return KN(r,s,t),Object.assign({},r.vars,r.style)},[s])}function jwe(t,s){const r=t.style||{},n={};return EI(n,r,t),Object.assign(n,gwe(t,s)),n}function vwe(t,s){const r={},n=jwe(t,s);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function ywe(t,s,r,n){const a=j.useMemo(()=>{const i=PI();return WN(i,s,QN(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[s]);if(t.style){const i={};EI(i,t.style,t),a.style={...i,...a.style}}return a}function bwe(t=!1){return(r,n,a,{latestValues:i},l)=>{const c=(UN(r)?ywe:vwe)(n,i,l,r),d=INe(n,typeof r=="string",t),u=r!==j.Fragment?{...d,...c,ref:a}:{},{children:m}=n,h=j.useMemo(()=>yr(m)?m.get():m,[m]);return j.createElement(r,{...u,children:h})}}function Nwe(t,s){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...UN(n)?pwe:fwe,preloadedFeatures:t,useRender:bwe(a),createVisualElement:s,Component:n};return GNe(l)}}function MI(t,s){if(!Array.isArray(s))return!1;const r=s.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(s[n]!==t[n])return!1;return!0}function _f(t,s,r){const n=t.getProps();return zN(n,s,r!==void 0?r:n.custom,t)}const wwe=FN(()=>window.ScrollTimeline!==void 0);class Swe{constructor(s){this.stop=()=>this.runAll("stop"),this.animations=s.filter(Boolean)}get finished(){return Promise.all(this.animations.map(s=>"finished"in s?s.finished:s))}getAll(s){return this.animations[0][s]}setAll(s,r){for(let n=0;n<this.animations.length;n++)this.animations[n][s]=r}attachTimeline(s,r){const n=this.animations.map(a=>{if(wwe()&&a.attachTimeline)return a.attachTimeline(s);if(typeof r=="function")return r(a)});return()=>{n.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(s){this.setAll("time",s)}get speed(){return this.getAll("speed")}set speed(s){this.setAll("speed",s)}get startTime(){return this.getAll("startTime")}get duration(){let s=0;for(let r=0;r<this.animations.length;r++)s=Math.max(s,this.animations[r].duration);return s}runAll(s){this.animations.forEach(r=>r[s]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Cwe extends Swe{then(s,r){return Promise.all(this.animations).then(s).catch(r)}}function ZN(t,s){return t?t[s]||t.default||t:void 0}const Uy=2e4;function RI(t){let s=0;const r=50;let n=t.next(s);for(;!n.done&&s<Uy;)s+=r,n=t.next(s);return s>=Uy?1/0:s}function JN(t){return typeof t=="function"}function jk(t,s){t.timeline=s,t.onfinish=null}const ew=t=>Array.isArray(t)&&typeof t[0]=="number",Pwe={linearEasing:void 0};function kwe(t,s){const r=FN(t);return()=>{var n;return(n=Pwe[s])!==null&&n!==void 0?n:r()}}const Vx=kwe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_I=(t,s,r=10)=>{let n="";const a=Math.max(Math.round(s/r),2);for(let i=0;i<a;i++)n+=t(jc(0,a-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function II(t){return!!(typeof t=="function"&&Vx()||!t||typeof t=="string"&&(t in zy||Vx())||ew(t)||Array.isArray(t)&&t.every(II))}const pd=([t,s,r,n])=>`cubic-bezier(${t}, ${s}, ${r}, ${n})`,zy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pd([0,.65,.55,1]),circOut:pd([.55,0,1,.45]),backIn:pd([.31,.01,.66,-.59]),backOut:pd([.33,1.53,.69,.99])};function $I(t,s){if(t)return typeof t=="function"&&Vx()?_I(t,s):ew(t)?pd(t):Array.isArray(t)?t.map(r=>$I(r,s)||zy.easeOut):zy[t]}const kn={x:!1,y:!1};function FI(){return kn.x||kn.y}function Awe(t,s,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let a=document;const i=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function LI(t,s){const r=Awe(t),n=new AbortController,a={passive:!0,...s,signal:n.signal};return[r,a,()=>n.abort()]}function vk(t){return s=>{s.pointerType==="touch"||FI()||t(s)}}function Twe(t,s,r={}){const[n,a,i]=LI(t,r),l=vk(o=>{const{target:c}=o,d=s(o);if(typeof d!="function"||!c)return;const u=vk(m=>{d(m),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,a)});return n.forEach(o=>{o.addEventListener("pointerenter",l,a)}),i}const BI=(t,s)=>s?t===s?!0:BI(t,s.parentElement):!1,tw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Dwe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Owe(t){return Dwe.has(t.tagName)||t.tabIndex!==-1}const fd=new WeakSet;function yk(t){return s=>{s.key==="Enter"&&t(s)}}function nj(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const Ewe=(t,s)=>{const r=t.currentTarget;if(!r)return;const n=yk(()=>{if(fd.has(r))return;nj(r,"down");const a=yk(()=>{nj(r,"up")}),i=()=>nj(r,"cancel");r.addEventListener("keyup",a,s),r.addEventListener("blur",i,s)});r.addEventListener("keydown",n,s),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),s)};function bk(t){return tw(t)&&!FI()}function Mwe(t,s,r={}){const[n,a,i]=LI(t,r),l=o=>{const c=o.currentTarget;if(!bk(o)||fd.has(c))return;fd.add(c);const d=s(o),u=(x,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",h),!(!bk(x)||!fd.has(c))&&(fd.delete(c),typeof d=="function"&&d(x,{success:g}))},m=x=>{u(x,r.useGlobalTarget||BI(c,x.target))},h=x=>{u(x,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",h,a)};return n.forEach(o=>{!Owe(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(r.useGlobalTarget?window:o).addEventListener("pointerdown",l,a),o.addEventListener("focus",d=>Ewe(d,a),a)}),i}function Rwe(t){return t==="x"||t==="y"?kn[t]?null:(kn[t]=!0,()=>{kn[t]=!1}):kn.x||kn.y?null:(kn.x=kn.y=!0,()=>{kn.x=kn.y=!1})}const VI=new Set(["width","height","top","left","right","bottom",...Gc]);let uh;function _we(){uh=void 0}const da={now:()=>(uh===void 0&&da.set(xr.isProcessing||DNe.useManualTiming?xr.timestamp:performance.now()),uh),set:t=>{uh=t,queueMicrotask(_we)}};function sw(t,s){t.indexOf(s)===-1&&t.push(s)}function rw(t,s){const r=t.indexOf(s);r>-1&&t.splice(r,1)}class nw{constructor(){this.subscriptions=[]}add(s){return sw(this.subscriptions,s),()=>rw(this.subscriptions,s)}notify(s,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](s,r,n);else for(let i=0;i<a;i++){const l=this.subscriptions[i];l&&l(s,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function qI(t,s){return s?t*(1e3/s):0}const Nk=30,Iwe=t=>!isNaN(parseFloat(t));class $we{constructor(s,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const i=da.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(s),this.owner=r.owner}setCurrent(s){this.current=s,this.updatedAt=da.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=Iwe(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,r){this.events[s]||(this.events[s]=new nw);const n=this.events[s].add(r);return s==="change"?()=>{n(),Ps.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,r){this.passiveEffect=s,this.stopPassiveEffect=r}set(s,r=!0){!r||!this.passiveEffect?this.updateAndNotify(s,r):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-n}jump(s,r=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=da.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>Nk)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Nk);return qI(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(s){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=s(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _u(t,s){return new $we(t,s)}function Fwe(t,s,r){t.hasValue(s)?t.getValue(s).set(r):t.addValue(s,_u(r))}function Lwe(t,s){const r=_f(t,s);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const l in i){const o=XNe(i[l]);Fwe(t,l,o)}}function Bwe(t){return!!(yr(t)&&t.add)}function Gy(t,s){const r=t.getValue("willChange");if(Bwe(r))return r.add(s)}function UI(t){return t.props[vI]}const zI=(t,s,r)=>(((1-3*r+3*s)*t+(3*r-6*s))*t+3*s)*t,Vwe=1e-7,qwe=12;function Uwe(t,s,r,n,a){let i,l,o=0;do l=s+(r-s)/2,i=zI(l,n,a)-t,i>0?r=l:s=l;while(Math.abs(i)>Vwe&&++o<qwe);return l}function gm(t,s,r,n){if(t===s&&r===n)return Zr;const a=i=>Uwe(i,0,1,t,r);return i=>i===0||i===1?i:zI(a(i),s,n)}const GI=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,HI=t=>s=>1-t(1-s),KI=gm(.33,1.53,.69,.99),aw=HI(KI),WI=GI(aw),YI=t=>(t*=2)<1?.5*aw(t):.5*(2-Math.pow(2,-10*(t-1))),iw=t=>1-Math.sin(Math.acos(t)),QI=HI(iw),XI=GI(iw),ZI=t=>/^0[^.\s]+$/u.test(t);function zwe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||ZI(t):!0}const kd=t=>Math.round(t*1e5)/1e5,lw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Gwe(t){return t==null}const Hwe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ow=(t,s)=>r=>!!(typeof r=="string"&&Hwe.test(r)&&r.startsWith(t)||s&&!Gwe(r)&&Object.prototype.hasOwnProperty.call(r,s)),JI=(t,s,r)=>n=>{if(typeof n!="string")return n;const[a,i,l,o]=n.match(lw);return{[t]:parseFloat(a),[s]:parseFloat(i),[r]:parseFloat(l),alpha:o!==void 0?parseFloat(o):1}},Kwe=t=>Qa(0,255,t),aj={...Hc,transform:t=>Math.round(Kwe(t))},ul={test:ow("rgb","red"),parse:JI("red","green","blue"),transform:({red:t,green:s,blue:r,alpha:n=1})=>"rgba("+aj.transform(t)+", "+aj.transform(s)+", "+aj.transform(r)+", "+kd(Ru.transform(n))+")"};function Wwe(t){let s="",r="",n="",a="";return t.length>5?(s=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(s=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),s+=s,r+=r,n+=n,a+=a),{red:parseInt(s,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const Hy={test:ow("#"),parse:Wwe,transform:ul.transform},fo={test:ow("hsl","hue"),parse:JI("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+ca.transform(kd(s))+", "+ca.transform(kd(r))+", "+kd(Ru.transform(n))+")"},gr={test:t=>ul.test(t)||Hy.test(t)||fo.test(t),parse:t=>ul.test(t)?ul.parse(t):fo.test(t)?fo.parse(t):Hy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ul.transform(t):fo.transform(t)},Ywe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qwe(t){var s,r;return isNaN(t)&&typeof t=="string"&&(((s=t.match(lw))===null||s===void 0?void 0:s.length)||0)+(((r=t.match(Ywe))===null||r===void 0?void 0:r.length)||0)>0}const e3="number",t3="color",Xwe="var",Zwe="var(",wk="${}",Jwe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Iu(t){const s=t.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const o=s.replace(Jwe,c=>(gr.test(c)?(n.color.push(i),a.push(t3),r.push(gr.parse(c))):c.startsWith(Zwe)?(n.var.push(i),a.push(Xwe),r.push(c)):(n.number.push(i),a.push(e3),r.push(parseFloat(c))),++i,wk)).split(wk);return{values:r,split:o,indexes:n,types:a}}function s3(t){return Iu(t).values}function r3(t){const{split:s,types:r}=Iu(t),n=s.length;return a=>{let i="";for(let l=0;l<n;l++)if(i+=s[l],a[l]!==void 0){const o=r[l];o===e3?i+=kd(a[l]):o===t3?i+=gr.transform(a[l]):i+=a[l]}return i}}const e1e=t=>typeof t=="number"?0:t;function t1e(t){const s=s3(t);return r3(t)(s.map(e1e))}const _i={test:Qwe,parse:s3,createTransformer:r3,getAnimatableNone:t1e},s1e=new Set(["brightness","contrast","saturate","opacity"]);function r1e(t){const[s,r]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[n]=r.match(lw)||[];if(!n)return t;const a=r.replace(n,"");let i=s1e.has(s)?1:0;return n!==r&&(i*=100),s+"("+i+a+")"}const n1e=/\b([a-z-]*)\(.*?\)/gu,Ky={..._i,getAnimatableNone:t=>{const s=t.match(n1e);return s?s.map(r1e).join(" "):t}},a1e={...HN,color:gr,backgroundColor:gr,outlineColor:gr,fill:gr,stroke:gr,borderColor:gr,borderTopColor:gr,borderRightColor:gr,borderBottomColor:gr,borderLeftColor:gr,filter:Ky,WebkitFilter:Ky},cw=t=>a1e[t];function n3(t,s){let r=cw(t);return r!==Ky&&(r=_i),r.getAnimatableNone?r.getAnimatableNone(s):void 0}const i1e=new Set(["auto","none","0"]);function l1e(t,s,r){let n=0,a;for(;n<t.length&&!a;){const i=t[n];typeof i=="string"&&!i1e.has(i)&&Iu(i).values.length&&(a=t[n]),n++}if(a&&r)for(const i of s)t[i]=n3(r,a)}const Sk=t=>t===Hc||t===gt,Ck=(t,s)=>parseFloat(t.split(", ")[s]),Pk=(t,s)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return Ck(a[1],s);{const i=n.match(/^matrix\((.+)\)$/u);return i?Ck(i[1],t):0}},o1e=new Set(["x","y","z"]),c1e=Gc.filter(t=>!o1e.has(t));function d1e(t){const s=[];return c1e.forEach(r=>{const n=t.getValue(r);n!==void 0&&(s.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),s}const yc={width:({x:t},{paddingLeft:s="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),height:({y:t},{paddingTop:s="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(s)-parseFloat(r),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:Pk(4,13),y:Pk(5,14)};yc.translateX=yc.x;yc.translateY=yc.y;const gl=new Set;let Wy=!1,Yy=!1;function a3(){if(Yy){const t=Array.from(gl).filter(n=>n.needsMeasurement),s=new Set(t.map(n=>n.element)),r=new Map;s.forEach(n=>{const a=d1e(n);a.length&&(r.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),s.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,l])=>{var o;(o=n.getValue(i))===null||o===void 0||o.set(l)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Yy=!1,Wy=!1,gl.forEach(t=>t.complete()),gl.clear()}function i3(){gl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Yy=!0)})}function u1e(){i3(),a3()}class dw{constructor(s,r,n,a,i,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...s],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(gl.add(this),Wy||(Wy=!0,Ps.read(i3),Ps.resolveKeyframes(a3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:r,element:n,motionValue:a}=this;for(let i=0;i<s.length;i++)if(s[i]===null)if(i===0){const l=a?.get(),o=s[s.length-1];if(l!==void 0)s[0]=l;else if(n&&r){const c=n.readValue(r,o);c!=null&&(s[0]=c)}s[0]===void 0&&(s[0]=o),a&&l===void 0&&a.set(s[0])}else s[i]=s[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),gl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,gl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const l3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),m1e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h1e(t){const s=m1e.exec(t);if(!s)return[,];const[,r,n,a]=s;return[`--${r??n}`,a]}function o3(t,s,r=1){const[n,a]=h1e(t);if(!n)return;const i=window.getComputedStyle(s).getPropertyValue(n);if(i){const l=i.trim();return l3(l)?parseFloat(l):l}return GN(a)?o3(a,s,r+1):a}const c3=t=>s=>s.test(t),x1e={test:t=>t==="auto",parse:t=>t},d3=[Hc,gt,ca,di,rwe,swe,x1e],kk=t=>d3.find(c3(t));class u3 extends dw{constructor(s,r,n,a,i){super(s,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<s.length;c++){let d=s[c];if(typeof d=="string"&&(d=d.trim(),GN(d))){const u=o3(d,r.current);u!==void 0&&(s[c]=u),c===s.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!VI.has(n)||s.length!==2)return;const[a,i]=s,l=kk(a),o=kk(i);if(l!==o)if(Sk(l)&&Sk(o))for(let c=0;c<s.length;c++){const d=s[c];typeof d=="string"&&(s[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:r}=this,n=[];for(let a=0;a<s.length;a++)zwe(s[a])&&n.push(a);n.length&&l1e(s,n,r)}measureInitialState(){const{element:s,unresolvedKeyframes:r,name:n}=this;if(!s||!s.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yc[n](s.measureViewportBox(),window.getComputedStyle(s.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&s.getValue(n,a).jump(a,!1)}measureEndState(){var s;const{element:r,name:n,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const l=a.length-1,o=a[l];a[l]=yc[n](r.measureViewportBox(),window.getComputedStyle(r.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((s=this.removedTransforms)===null||s===void 0)&&s.length&&this.removedTransforms.forEach(([c,d])=>{r.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const Ak=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_i.test(t)||t==="0")&&!t.startsWith("url("));function p1e(t){const s=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==s)return!0}function f1e(t,s,r,n){const a=t[0];if(a===null)return!1;if(s==="display"||s==="visibility")return!0;const i=t[t.length-1],l=Ak(a,s),o=Ak(i,s);return!l||!o?!1:p1e(t)||(r==="spring"||JN(r))&&n}const g1e=t=>t!==null;function If(t,{repeat:s,repeatType:r="loop"},n){const a=t.filter(g1e),i=s&&r!=="loop"&&s%2===1?0:a.length-1;return!i||n===void 0?a[i]:n}const j1e=40;class m3{constructor({autoplay:s=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:l="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=da.now(),this.options={autoplay:s,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:l,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>j1e?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&u1e(),this._resolved}onKeyframesResolved(s,r){this.resolvedAt=da.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:i,delay:l,onComplete:o,onUpdate:c,isGenerator:d}=this.options;if(!d&&!f1e(s,n,a,i))if(l)this.options.duration=0;else{c&&c(If(s,this.options,r)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(s,r);u!==!1&&(this._resolved={keyframes:s,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(s,r){return this.currentFinishedPromise.then(s,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(s=>{this.resolveFinishedPromise=s})}}const Ds=(t,s,r)=>t+(s-t)*r;function ij(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(s-t)*6*r:r<1/2?s:r<2/3?t+(s-t)*(2/3-r)*6:t}function v1e({hue:t,saturation:s,lightness:r,alpha:n}){t/=360,s/=100,r/=100;let a=0,i=0,l=0;if(!s)a=i=l=r;else{const o=r<.5?r*(1+s):r+s-r*s,c=2*r-o;a=ij(c,o,t+1/3),i=ij(c,o,t),l=ij(c,o,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:n}}function qx(t,s){return r=>r>0?s:t}const lj=(t,s,r)=>{const n=t*t,a=r*(s*s-n)+n;return a<0?0:Math.sqrt(a)},y1e=[Hy,ul,fo],b1e=t=>y1e.find(s=>s.test(t));function Tk(t){const s=b1e(t);if(!s)return!1;let r=s.parse(t);return s===fo&&(r=v1e(r)),r}const Dk=(t,s)=>{const r=Tk(t),n=Tk(s);if(!r||!n)return qx(t,s);const a={...r};return i=>(a.red=lj(r.red,n.red,i),a.green=lj(r.green,n.green,i),a.blue=lj(r.blue,n.blue,i),a.alpha=Ds(r.alpha,n.alpha,i),ul.transform(a))},N1e=(t,s)=>r=>s(t(r)),jm=(...t)=>t.reduce(N1e),Qy=new Set(["none","hidden"]);function w1e(t,s){return Qy.has(t)?r=>r<=0?t:s:r=>r>=1?s:t}function S1e(t,s){return r=>Ds(t,s,r)}function uw(t){return typeof t=="number"?S1e:typeof t=="string"?GN(t)?qx:gr.test(t)?Dk:k1e:Array.isArray(t)?h3:typeof t=="object"?gr.test(t)?Dk:C1e:qx}function h3(t,s){const r=[...t],n=r.length,a=t.map((i,l)=>uw(i)(i,s[l]));return i=>{for(let l=0;l<n;l++)r[l]=a[l](i);return r}}function C1e(t,s){const r={...t,...s},n={};for(const a in r)t[a]!==void 0&&s[a]!==void 0&&(n[a]=uw(t[a])(t[a],s[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function P1e(t,s){var r;const n=[],a={color:0,var:0,number:0};for(let i=0;i<s.values.length;i++){const l=s.types[i],o=t.indexes[l][a[l]],c=(r=t.values[o])!==null&&r!==void 0?r:0;n[i]=c,a[l]++}return n}const k1e=(t,s)=>{const r=_i.createTransformer(s),n=Iu(t),a=Iu(s);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?Qy.has(t)&&!a.values.length||Qy.has(s)&&!n.values.length?w1e(t,s):jm(h3(P1e(n,a),a.values),r):qx(t,s)};function x3(t,s,r){return typeof t=="number"&&typeof s=="number"&&typeof r=="number"?Ds(t,s,r):uw(t)(t,s)}const A1e=5;function p3(t,s,r){const n=Math.max(s-A1e,0);return qI(r-t(n),s-n)}const Os={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oj=.001;function T1e({duration:t=Os.duration,bounce:s=Os.bounce,velocity:r=Os.velocity,mass:n=Os.mass}){let a,i,l=1-s;l=Qa(Os.minDamping,Os.maxDamping,l),t=Qa(Os.minDuration,Os.maxDuration,qa(t)),l<1?(a=d=>{const u=d*l,m=u*t,h=u-r,x=Xy(d,l),g=Math.exp(-m);return oj-h/x*g},i=d=>{const m=d*l*t,h=m*r+r,x=Math.pow(l,2)*Math.pow(d,2)*t,g=Math.exp(-m),p=Xy(Math.pow(d,2),l);return(-a(d)+oj>0?-1:1)*((h-x)*g)/p}):(a=d=>{const u=Math.exp(-d*t),m=(d-r)*t+1;return-oj+u*m},i=d=>{const u=Math.exp(-d*t),m=(r-d)*(t*t);return u*m});const o=5/t,c=O1e(a,i,o);if(t=Va(t),isNaN(c))return{stiffness:Os.stiffness,damping:Os.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:l*2*Math.sqrt(n*d),duration:t}}}const D1e=12;function O1e(t,s,r){let n=r;for(let a=1;a<D1e;a++)n=n-t(n)/s(n);return n}function Xy(t,s){return t*Math.sqrt(1-s*s)}const E1e=["duration","bounce"],M1e=["stiffness","damping","mass"];function Ok(t,s){return s.some(r=>t[r]!==void 0)}function R1e(t){let s={velocity:Os.velocity,stiffness:Os.stiffness,damping:Os.damping,mass:Os.mass,isResolvedFromDuration:!1,...t};if(!Ok(t,M1e)&&Ok(t,E1e))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*Qa(.05,1,1-(t.bounce||0))*Math.sqrt(a);s={...s,mass:Os.mass,stiffness:a,damping:i}}else{const r=T1e(t);s={...s,...r,mass:Os.mass},s.isResolvedFromDuration=!0}return s}function f3(t=Os.visualDuration,s=Os.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],l=r.keyframes[r.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:m,velocity:h,isResolvedFromDuration:x}=R1e({...r,velocity:-qa(r.velocity||0)}),g=h||0,p=d/(2*Math.sqrt(c*u)),f=l-i,v=qa(Math.sqrt(c/u)),b=Math.abs(f)<5;n||(n=b?Os.restSpeed.granular:Os.restSpeed.default),a||(a=b?Os.restDelta.granular:Os.restDelta.default);let y;if(p<1){const w=Xy(v,p);y=C=>{const k=Math.exp(-p*v*C);return l-k*((g+p*v*f)/w*Math.sin(w*C)+f*Math.cos(w*C))}}else if(p===1)y=w=>l-Math.exp(-v*w)*(f+(g+v*f)*w);else{const w=v*Math.sqrt(p*p-1);y=C=>{const k=Math.exp(-p*v*C),A=Math.min(w*C,300);return l-k*((g+p*v*f)*Math.sinh(A)+w*f*Math.cosh(A))/w}}const S={calculatedDuration:x&&m||null,next:w=>{const C=y(w);if(x)o.done=w>=m;else{let k=0;p<1&&(k=w===0?Va(g):p3(y,w,C));const A=Math.abs(k)<=n,N=Math.abs(l-C)<=a;o.done=A&&N}return o.value=o.done?l:C,o},toString:()=>{const w=Math.min(RI(S),Uy),C=_I(k=>S.next(w*k).value,w,30);return w+"ms "+C}};return S}function Ek({keyframes:t,velocity:s=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:l,min:o,max:c,restDelta:d=.5,restSpeed:u}){const m=t[0],h={done:!1,value:m},x=A=>o!==void 0&&A<o||c!==void 0&&A>c,g=A=>o===void 0?c:c===void 0||Math.abs(o-A)<Math.abs(c-A)?o:c;let p=r*s;const f=m+p,v=l===void 0?f:l(f);v!==f&&(p=v-m);const b=A=>-p*Math.exp(-A/n),y=A=>v+b(A),S=A=>{const N=b(A),M=y(A);h.done=Math.abs(N)<=d,h.value=h.done?v:M};let w,C;const k=A=>{x(h.value)&&(w=A,C=f3({keyframes:[h.value,g(h.value)],velocity:p3(y,A,h.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return k(0),{calculatedDuration:null,next:A=>{let N=!1;return!C&&w===void 0&&(N=!0,S(A),k(A)),w!==void 0&&A>=w?C.next(A-w):(!N&&S(A),h)}}}const _1e=gm(.42,0,1,1),I1e=gm(0,0,.58,1),g3=gm(.42,0,.58,1),$1e=t=>Array.isArray(t)&&typeof t[0]!="number",F1e={linear:Zr,easeIn:_1e,easeInOut:g3,easeOut:I1e,circIn:iw,circInOut:XI,circOut:QI,backIn:aw,backInOut:WI,backOut:KI,anticipate:YI},Mk=t=>{if(ew(t)){xI(t.length===4);const[s,r,n,a]=t;return gm(s,r,n,a)}else if(typeof t=="string")return F1e[t];return t};function L1e(t,s,r){const n=[],a=r||x3,i=t.length-1;for(let l=0;l<i;l++){let o=a(t[l],t[l+1]);if(s){const c=Array.isArray(s)?s[l]||Zr:s;o=jm(c,o)}n.push(o)}return n}function B1e(t,s,{clamp:r=!0,ease:n,mixer:a}={}){const i=t.length;if(xI(i===s.length),i===1)return()=>s[0];if(i===2&&s[0]===s[1])return()=>s[1];const l=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),s=[...s].reverse());const o=L1e(s,n,a),c=o.length,d=u=>{if(l&&u<t[0])return s[0];let m=0;if(c>1)for(;m<t.length-2&&!(u<t[m+1]);m++);const h=jc(t[m],t[m+1],u);return o[m](h)};return r?u=>d(Qa(t[0],t[i-1],u)):d}function V1e(t,s){const r=t[t.length-1];for(let n=1;n<=s;n++){const a=jc(0,s,n);t.push(Ds(r,1,a))}}function q1e(t){const s=[0];return V1e(s,t.length-1),s}function U1e(t,s){return t.map(r=>r*s)}function z1e(t,s){return t.map(()=>s||g3).splice(0,t.length-1)}function Ux({duration:t=300,keyframes:s,times:r,ease:n="easeInOut"}){const a=$1e(n)?n.map(Mk):Mk(n),i={done:!1,value:s[0]},l=U1e(r&&r.length===s.length?r:q1e(s),t),o=B1e(l,s,{ease:Array.isArray(a)?a:z1e(s,a)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const G1e=t=>{const s=({timestamp:r})=>t(r);return{start:()=>Ps.update(s,!0),stop:()=>Ri(s),now:()=>xr.isProcessing?xr.timestamp:da.now()}},H1e={decay:Ek,inertia:Ek,tween:Ux,keyframes:Ux,spring:f3},K1e=t=>t/100;class mw extends m3{constructor(s){super(s),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:a,keyframes:i}=this.options,l=a?.KeyframeResolver||dw,o=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new l(i,o,r,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(s){const{type:r="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:l=0}=this.options,o=JN(r)?r:H1e[r]||Ux;let c,d;o!==Ux&&typeof s[0]!="number"&&(c=jm(K1e,x3(s[0],s[1])),s=[0,100]);const u=o({...this.options,keyframes:s});i==="mirror"&&(d=o({...this.options,keyframes:[...s].reverse(),velocity:-l})),u.calculatedDuration===null&&(u.calculatedDuration=RI(u));const{calculatedDuration:m}=u,h=m+a,x=h*(n+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:h,totalDuration:x}}onPostResolved(){const{autoplay:s=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!s?this.pause():this.state=this.pendingPlayState}tick(s,r=!1){const{resolved:n}=this;if(!n){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:l,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:m}=n;if(this.startTime===null)return i.next(0);const{delay:h,repeat:x,repeatType:g,repeatDelay:p,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-u/this.speed,this.startTime)),r?this.currentTime=s:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(s-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let y=this.currentTime,S=i;if(x){const A=Math.min(this.currentTime,u)/m;let N=Math.floor(A),M=A%1;!M&&A>=1&&(M=1),M===1&&N--,N=Math.min(N,x+1),!!(N%2)&&(g==="reverse"?(M=1-M,p&&(M-=p/m)):g==="mirror"&&(S=l)),y=Qa(0,1,M)*m}const w=b?{done:!1,value:c[0]}:S.next(y);o&&(w.value=o(w.value));let{done:C}=w;!b&&d!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return k&&a!==void 0&&(w.value=If(c,this.options,a)),f&&f(w.value),k&&this.finish(),w}get duration(){const{resolved:s}=this;return s?qa(s.calculatedDuration):0}get time(){return qa(this.currentTime)}set time(s){s=Va(s),this.currentTime=s,this.holdTime!==null||this.speed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.speed)}get speed(){return this.playbackSpeed}set speed(s){const r=this.playbackSpeed!==s;this.playbackSpeed=s,r&&(this.time=qa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:s=G1e,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=s(i=>this.tick(i))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var s;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(s=this.currentTime)!==null&&s!==void 0?s:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:s}=this.options;s&&s()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}}const W1e=new Set(["opacity","clipPath","filter","transform"]);function Y1e(t,s,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:l="loop",ease:o="easeInOut",times:c}={}){const d={[s]:r};c&&(d.offset=c);const u=$I(o,a);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"})}const Q1e=FN(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zx=10,X1e=2e4;function Z1e(t){return JN(t.type)||t.type==="spring"||!II(t.ease)}function J1e(t,s){const r=new mw({...s,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const a=[];let i=0;for(;!n.done&&i<X1e;)n=r.sample(i),a.push(n.value),i+=zx;return{times:void 0,keyframes:a,duration:i-zx,ease:"linear"}}const j3={anticipate:YI,backInOut:WI,circInOut:XI};function e2e(t){return t in j3}class Rk extends m3{constructor(s){super(s);const{name:r,motionValue:n,element:a,keyframes:i}=this.options;this.resolver=new u3(i,(l,o)=>this.onKeyframesResolved(l,o),r,n,a),this.resolver.scheduleResolve()}initPlayback(s,r){let{duration:n=300,times:a,ease:i,type:l,motionValue:o,name:c,startTime:d}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof i=="string"&&Vx()&&e2e(i)&&(i=j3[i]),Z1e(this.options)){const{onComplete:m,onUpdate:h,motionValue:x,element:g,...p}=this.options,f=J1e(s,p);s=f.keyframes,s.length===1&&(s[1]=s[0]),n=f.duration,a=f.times,i=f.ease,l="keyframes"}const u=Y1e(o.owner.current,c,s,{...this.options,duration:n,times:a,ease:i});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(jk(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:m}=this.options;o.set(If(s,this.options,r)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:a,type:l,ease:i,keyframes:s}}get duration(){const{resolved:s}=this;if(!s)return 0;const{duration:r}=s;return qa(r)}get time(){const{resolved:s}=this;if(!s)return 0;const{animation:r}=s;return qa(r.currentTime||0)}set time(s){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Va(s)}get speed(){const{resolved:s}=this;if(!s)return 1;const{animation:r}=s;return r.playbackRate}set speed(s){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=s}get state(){const{resolved:s}=this;if(!s)return"idle";const{animation:r}=s;return r.playState}get startTime(){const{resolved:s}=this;if(!s)return null;const{animation:r}=s;return r.startTime}attachTimeline(s){if(!this._resolved)this.pendingTimeline=s;else{const{resolved:r}=this;if(!r)return Zr;const{animation:n}=r;jk(n,s)}return Zr}play(){if(this.isStopped)return;const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:s}=this;if(!s)return;const{animation:r}=s;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:s}=this;if(!s)return;const{animation:r,keyframes:n,duration:a,type:i,ease:l,times:o}=s;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:m,element:h,...x}=this.options,g=new mw({...x,keyframes:n,duration:a,type:i,ease:l,times:o,isGenerator:!0}),p=Va(this.time);d.setWithVelocity(g.sample(p-zx).value,g.sample(p).value,zx)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:s}=this;s&&s.animation.finish()}cancel(){const{resolved:s}=this;s&&s.animation.cancel()}static supports(s){const{motionValue:r,name:n,repeatDelay:a,repeatType:i,damping:l,type:o}=s;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=r.owner.getProps();return Q1e()&&n&&W1e.has(n)&&!c&&!d&&!a&&i!=="mirror"&&l!==0&&o!=="inertia"}}const t2e={type:"spring",stiffness:500,damping:25,restSpeed:10},s2e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),r2e={type:"keyframes",duration:.8},n2e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},a2e=(t,{keyframes:s})=>s.length>2?r2e:zl.has(t)?t.startsWith("scale")?s2e(s[1]):t2e:n2e;function i2e({when:t,delay:s,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:l,repeatDelay:o,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const hw=(t,s,r,n={},a,i)=>l=>{const o=ZN(n,t)||{},c=o.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Va(c);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:s.getVelocity(),...o,delay:-d,onUpdate:h=>{s.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{l(),o.onComplete&&o.onComplete()},name:t,motionValue:s,element:i?void 0:a};i2e(o)||(u={...u,...a2e(t,u)}),u.duration&&(u.duration=Va(u.duration)),u.repeatDelay&&(u.repeatDelay=Va(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(m=!0)),m&&!i&&s.get()!==void 0){const h=If(u.keyframes,o);if(h!==void 0)return Ps.update(()=>{u.onUpdate(h),u.onComplete()}),new Cwe([])}return!i&&Rk.supports(u)?new Rk(u):new mw(u)};function l2e({protectedKeys:t,needsAnimating:s},r){const n=t.hasOwnProperty(r)&&s[r]!==!0;return s[r]=!1,n}function v3(t,s,{delay:r=0,transitionOverride:n,type:a}={}){var i;let{transition:l=t.getDefaultTransition(),transitionEnd:o,...c}=s;n&&(l=n);const d=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const m in c){const h=t.getValue(m,(i=t.latestValues[m])!==null&&i!==void 0?i:null),x=c[m];if(x===void 0||u&&l2e(u,m))continue;const g={delay:r,...ZN(l||{},m)};let p=!1;if(window.MotionHandoffAnimation){const v=UI(t);if(v){const b=window.MotionHandoffAnimation(v,m,Ps);b!==null&&(g.startTime=b,p=!0)}}Gy(t,m),h.start(hw(m,h,x,t.shouldReduceMotion&&VI.has(m)?{type:!1}:g,t,p));const f=h.animation;f&&d.push(f)}return o&&Promise.all(d).then(()=>{Ps.update(()=>{o&&Lwe(t,o)})}),d}function Zy(t,s,r={}){var n;const a=_f(t,s,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const l=a?()=>Promise.all(v3(t,a,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:m,staggerDirection:h}=i;return o2e(t,s,u+d,m,h,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[l,o]:[o,l];return d().then(()=>u())}else return Promise.all([l(),o(r.delay)])}function o2e(t,s,r=0,n=0,a=1,i){const l=[],o=(t.variantChildren.size-1)*n,c=a===1?(d=0)=>d*n:(d=0)=>o-d*n;return Array.from(t.variantChildren).sort(c2e).forEach((d,u)=>{d.notify("AnimationStart",s),l.push(Zy(d,s,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",s)))}),Promise.all(l)}function c2e(t,s){return t.sortNodePosition(s)}function d2e(t,s,r={}){t.notify("AnimationStart",s);let n;if(Array.isArray(s)){const a=s.map(i=>Zy(t,i,r));n=Promise.all(a)}else if(typeof s=="string")n=Zy(t,s,r);else{const a=typeof s=="function"?_f(t,s,r.custom):s;n=Promise.all(v3(t,a,r))}return n.then(()=>{t.notify("AnimationComplete",s)})}const u2e=BN.length;function y3(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?y3(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const s={};for(let r=0;r<u2e;r++){const n=BN[r],a=t.props[n];(Mu(a)||a===!1)&&(s[n]=a)}return s}const m2e=[...LN].reverse(),h2e=LN.length;function x2e(t){return s=>Promise.all(s.map(({animation:r,options:n})=>d2e(t,r,n)))}function p2e(t){let s=x2e(t),r=_k(),n=!0;const a=c=>(d,u)=>{var m;const h=_f(t,u,c==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(h){const{transition:x,transitionEnd:g,...p}=h;d={...d,...p,...g}}return d};function i(c){s=c(t)}function l(c){const{props:d}=t,u=y3(t.parent)||{},m=[],h=new Set;let x={},g=1/0;for(let f=0;f<h2e;f++){const v=m2e[f],b=r[v],y=d[v]!==void 0?d[v]:u[v],S=Mu(y),w=v===c?b.isActive:null;w===!1&&(g=f);let C=y===u[v]&&y!==d[v]&&S;if(C&&n&&t.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...x},!b.isActive&&w===null||!y&&!b.prevProp||Mf(y)||typeof y=="boolean")continue;const k=f2e(b.prevProp,y);let A=k||v===c&&b.isActive&&!C&&S||f>g&&S,N=!1;const M=Array.isArray(y)?y:[y];let F=M.reduce(a(v),{});w===!1&&(F={});const{prevResolvedValues:I={}}=b,V={...I,...F},E=Q=>{A=!0,h.has(Q)&&(N=!0,h.delete(Q)),b.needsAnimating[Q]=!0;const T=t.getValue(Q);T&&(T.liveStyle=!1)};for(const Q in V){const T=F[Q],B=I[Q];if(x.hasOwnProperty(Q))continue;let W=!1;qy(T)&&qy(B)?W=!MI(T,B):W=T!==B,W?T!=null?E(Q):h.add(Q):T!==void 0&&h.has(Q)?E(Q):b.protectedKeys[Q]=!0}b.prevProp=y,b.prevResolvedValues=F,b.isActive&&(x={...x,...F}),n&&t.blockInitialAnimation&&(A=!1),A&&(!(C&&k)||N)&&m.push(...M.map(Q=>({animation:Q,options:{type:v}})))}if(h.size){const f={};h.forEach(v=>{const b=t.getBaseTarget(v),y=t.getValue(v);y&&(y.liveStyle=!0),f[v]=b??null}),m.push({animation:f})}let p=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(p=!1),n=!1,p?s(m):Promise.resolve()}function o(c,d){var u;if(r[c].isActive===d)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var x;return(x=h.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),r[c].isActive=d;const m=l(c);for(const h in r)r[h].protectedKeys={};return m}return{animateChanges:l,setActive:o,setAnimateFunction:i,getState:()=>r,reset:()=>{r=_k(),n=!0}}}function f2e(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!MI(s,t):!1}function Qi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _k(){return{animate:Qi(!0),whileInView:Qi(),whileHover:Qi(),whileTap:Qi(),whileDrag:Qi(),whileFocus:Qi(),exit:Qi()}}class zi{constructor(s){this.isMounted=!1,this.node=s}update(){}}class g2e extends zi{constructor(s){super(s),s.animationState||(s.animationState=p2e(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();Mf(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:r}=this.node.prevProps||{};s!==r&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)===null||s===void 0||s.call(this)}}let j2e=0;class v2e extends zi{constructor(){super(...arguments),this.id=j2e++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===n)return;const a=this.node.animationState.setActive("exit",!s);r&&!s&&a.then(()=>r(this.id))}mount(){const{register:s}=this.node.presenceContext||{};s&&(this.unmount=s(this.id))}unmount(){}}const y2e={animation:{Feature:g2e},exit:{Feature:v2e}};function $u(t,s,r,n={passive:!0}){return t.addEventListener(s,r,n),()=>t.removeEventListener(s,r)}function vm(t){return{point:{x:t.pageX,y:t.pageY}}}const b2e=t=>s=>tw(s)&&t(s,vm(s));function Ad(t,s,r,n){return $u(t,s,b2e(r),n)}const Ik=(t,s)=>Math.abs(t-s);function N2e(t,s){const r=Ik(t.x,s.x),n=Ik(t.y,s.y);return Math.sqrt(r**2+n**2)}class b3{constructor(s,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=dj(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,x=N2e(m.offset,{x:0,y:0})>=3;if(!h&&!x)return;const{point:g}=m,{timestamp:p}=xr;this.history.push({...g,timestamp:p});const{onStart:f,onMove:v}=this.handlers;h||(f&&f(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,m)},this.handlePointerMove=(m,h)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=cj(h,this.transformPagePoint),Ps.update(this.updatePoint,!0)},this.handlePointerUp=(m,h)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=dj(m.type==="pointercancel"?this.lastMoveEventInfo:cj(h,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,f),g&&g(m,f)},!tw(s))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const l=vm(s),o=cj(l,this.transformPagePoint),{point:c}=o,{timestamp:d}=xr;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(s,dj(o,this.history)),this.removeListeners=jm(Ad(this.contextWindow,"pointermove",this.handlePointerMove),Ad(this.contextWindow,"pointerup",this.handlePointerUp),Ad(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Ri(this.updatePoint)}}function cj(t,s){return s?{point:s(t.point)}:t}function $k(t,s){return{x:t.x-s.x,y:t.y-s.y}}function dj({point:t},s){return{point:t,delta:$k(t,N3(s)),offset:$k(t,w2e(s)),velocity:S2e(s,.1)}}function w2e(t){return t[0]}function N3(t){return t[t.length-1]}function S2e(t,s){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=N3(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>Va(s)));)r--;if(!n)return{x:0,y:0};const i=qa(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const l={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const w3=1e-4,C2e=1-w3,P2e=1+w3,S3=.01,k2e=0-S3,A2e=0+S3;function tn(t){return t.max-t.min}function T2e(t,s,r){return Math.abs(t-s)<=r}function Fk(t,s,r,n=.5){t.origin=n,t.originPoint=Ds(s.min,s.max,t.origin),t.scale=tn(r)/tn(s),t.translate=Ds(r.min,r.max,t.origin)-t.originPoint,(t.scale>=C2e&&t.scale<=P2e||isNaN(t.scale))&&(t.scale=1),(t.translate>=k2e&&t.translate<=A2e||isNaN(t.translate))&&(t.translate=0)}function Td(t,s,r,n){Fk(t.x,s.x,r.x,n?n.originX:void 0),Fk(t.y,s.y,r.y,n?n.originY:void 0)}function Lk(t,s,r){t.min=r.min+s.min,t.max=t.min+tn(s)}function D2e(t,s,r){Lk(t.x,s.x,r.x),Lk(t.y,s.y,r.y)}function Bk(t,s,r){t.min=s.min-r.min,t.max=t.min+tn(s)}function Dd(t,s,r){Bk(t.x,s.x,r.x),Bk(t.y,s.y,r.y)}function O2e(t,{min:s,max:r},n){return s!==void 0&&t<s?t=n?Ds(s,t,n.min):Math.max(t,s):r!==void 0&&t>r&&(t=n?Ds(r,t,n.max):Math.min(t,r)),t}function Vk(t,s,r){return{min:s!==void 0?t.min+s:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function E2e(t,{top:s,left:r,bottom:n,right:a}){return{x:Vk(t.x,r,a),y:Vk(t.y,s,n)}}function qk(t,s){let r=s.min-t.min,n=s.max-t.max;return s.max-s.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function M2e(t,s){return{x:qk(t.x,s.x),y:qk(t.y,s.y)}}function R2e(t,s){let r=.5;const n=tn(t),a=tn(s);return a>n?r=jc(s.min,s.max-n,t.min):n>a&&(r=jc(t.min,t.max-a,s.min)),Qa(0,1,r)}function _2e(t,s){const r={};return s.min!==void 0&&(r.min=s.min-t.min),s.max!==void 0&&(r.max=s.max-t.min),r}const Jy=.35;function I2e(t=Jy){return t===!1?t=0:t===!0&&(t=Jy),{x:Uk(t,"left","right"),y:Uk(t,"top","bottom")}}function Uk(t,s,r){return{min:zk(t,s),max:zk(t,r)}}function zk(t,s){return typeof t=="number"?t:t[s]||0}const Gk=()=>({translate:0,scale:1,origin:0,originPoint:0}),go=()=>({x:Gk(),y:Gk()}),Hk=()=>({min:0,max:0}),Bs=()=>({x:Hk(),y:Hk()});function on(t){return[t("x"),t("y")]}function C3({top:t,left:s,right:r,bottom:n}){return{x:{min:s,max:r},y:{min:t,max:n}}}function $2e({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function F2e(t,s){if(!s)return t;const r=s({x:t.left,y:t.top}),n=s({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function uj(t){return t===void 0||t===1}function e0({scale:t,scaleX:s,scaleY:r}){return!uj(t)||!uj(s)||!uj(r)}function el(t){return e0(t)||P3(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function P3(t){return Kk(t.x)||Kk(t.y)}function Kk(t){return t&&t!=="0%"}function Gx(t,s,r){const n=t-r,a=s*n;return r+a}function Wk(t,s,r,n,a){return a!==void 0&&(t=Gx(t,a,n)),Gx(t,r,n)+s}function t0(t,s=0,r=1,n,a){t.min=Wk(t.min,s,r,n,a),t.max=Wk(t.max,s,r,n,a)}function k3(t,{x:s,y:r}){t0(t.x,s.translate,s.scale,s.originPoint),t0(t.y,r.translate,r.scale,r.originPoint)}const Yk=.999999999999,Qk=1.0000000000001;function L2e(t,s,r,n=!1){const a=r.length;if(!a)return;s.x=s.y=1;let i,l;for(let o=0;o<a;o++){i=r[o],l=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&vo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(s.x*=l.x.scale,s.y*=l.y.scale,k3(t,l)),n&&el(i.latestValues)&&vo(t,i.latestValues))}s.x<Qk&&s.x>Yk&&(s.x=1),s.y<Qk&&s.y>Yk&&(s.y=1)}function jo(t,s){t.min=t.min+s,t.max=t.max+s}function Xk(t,s,r,n,a=.5){const i=Ds(t.min,t.max,a);t0(t,s,r,i,n)}function vo(t,s){Xk(t.x,s.x,s.scaleX,s.scale,s.originX),Xk(t.y,s.y,s.scaleY,s.scale,s.originY)}function A3(t,s){return C3(F2e(t.getBoundingClientRect(),s))}function B2e(t,s,r){const n=A3(t,r),{scroll:a}=s;return a&&(jo(n.x,a.offset.x),jo(n.y,a.offset.y)),n}const T3=({current:t})=>t?t.ownerDocument.defaultView:null,V2e=new WeakMap;class q2e{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bs(),this.visualElement=s}start(s,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(vm(u).point)},i=(u,m)=>{const{drag:h,dragPropagation:x,onDragStart:g}=this.getProps();if(h&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Rwe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),on(f=>{let v=this.getAxisMotionValue(f).get()||0;if(ca.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const y=b.layout.layoutBox[f];y&&(v=tn(y)*(parseFloat(v)/100))}}this.originPoint[f]=v}),g&&Ps.postRender(()=>g(u,m)),Gy(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},l=(u,m)=>{const{dragPropagation:h,dragDirectionLock:x,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:f}=m;if(x&&this.currentDirection===null){this.currentDirection=U2e(f),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",m.point,f),this.updateAxis("y",m.point,f),this.visualElement.render(),p&&p(u,m)},o=(u,m)=>this.stop(u,m),c=()=>on(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new b3(s,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:T3(this.visualElement)})}stop(s,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Ps.postRender(()=>i(s,r))}cancel(){this.isDragging=!1;const{projection:s,animationState:r}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(s,r,n){const{drag:a}=this.getProps();if(!n||!Xm(s,a,this.currentDirection))return;const i=this.getAxisMotionValue(s);let l=this.originPoint[s]+n[s];this.constraints&&this.constraints[s]&&(l=O2e(l,this.constraints[s],this.elastic[s])),i.set(l)}resolveConstraints(){var s;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)===null||s===void 0?void 0:s.layout,i=this.constraints;r&&po(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=E2e(a.layoutBox,r):this.constraints=!1,this.elastic=I2e(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&on(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=_2e(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:r}=this.getProps();if(!s||!po(s))return!1;const n=s.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=B2e(n,a.root,this.visualElement.getTransformPagePoint());let l=M2e(a.layout.layoutBox,i);if(r){const o=r($2e(l));this.hasMutatedConstraints=!!o,o&&(l=C3(o))}return l}startAnimation(s){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},d=on(u=>{if(!Xm(u,r,this.currentDirection))return;let m=c&&c[u]||{};l&&(m={min:0,max:0});const h=a?200:1e6,x=a?40:1e7,g={type:"inertia",velocity:n?s[u]:0,bounceStiffness:h,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(o)}startAxisValueAnimation(s,r){const n=this.getAxisMotionValue(s);return Gy(this.visualElement,s),n.start(hw(s,n,0,r,this.visualElement,!1))}stopAnimation(){on(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){on(s=>{var r;return(r=this.getAxisMotionValue(s).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(s){var r;return(r=this.getAxisMotionValue(s).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(s){const r=`_drag${s.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(s,(n.initial?n.initial[s]:void 0)||0)}snapToCursor(s){on(r=>{const{drag:n}=this.getProps();if(!Xm(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:l,max:o}=a.layout.layoutBox[r];i.set(s[r]-Ds(l,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!po(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};on(l=>{const o=this.getAxisMotionValue(l);if(o&&this.constraints!==!1){const c=o.get();a[l]=R2e({min:c,max:c},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),on(l=>{if(!Xm(l,s,null))return;const o=this.getAxisMotionValue(l),{min:c,max:d}=this.constraints[l];o.set(Ds(c,d,a[l]))})}addListeners(){if(!this.visualElement.current)return;V2e.set(this.visualElement,this);const s=this.visualElement.current,r=Ad(s,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();po(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ps.read(n);const l=$u(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(on(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{l(),r(),i(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:l=Jy,dragMomentum:o=!0}=s;return{...s,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:l,dragMomentum:o}}}function Xm(t,s,r){return(s===!0||s===t)&&(r===null||r===t)}function U2e(t,s=10){let r=null;return Math.abs(t.y)>s?r="y":Math.abs(t.x)>s&&(r="x"),r}class z2e extends zi{constructor(s){super(s),this.removeGroupControls=Zr,this.removeListeners=Zr,this.controls=new q2e(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zk=t=>(s,r)=>{t&&Ps.postRender(()=>t(s,r))};class G2e extends zi{constructor(){super(...arguments),this.removePointerDownListener=Zr}onPointerDown(s){this.session=new b3(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:T3(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Zk(s),onStart:Zk(r),onMove:n,onEnd:(i,l)=>{delete this.session,a&&Ps.postRender(()=>a(i,l))}}}mount(){this.removePointerDownListener=Ad(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Jk(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const ld={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(gt.test(t))t=parseFloat(t);else return t;const r=Jk(t,s.target.x),n=Jk(t,s.target.y);return`${r}% ${n}%`}},H2e={correct:(t,{treeScale:s,projectionDelta:r})=>{const n=t,a=_i.parse(t);if(a.length>5)return n;const i=_i.createTransformer(t),l=typeof a[0]!="number"?1:0,o=r.x.scale*s.x,c=r.y.scale*s.y;a[0+l]/=o,a[1+l]/=c;const d=Ds(o,c,.5);return typeof a[2+l]=="number"&&(a[2+l]/=d),typeof a[3+l]=="number"&&(a[3+l]/=d),i(a)}};class K2e extends j.Component{componentDidMount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=s;hwe(W2e),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),mh.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,l=n.projection;return l&&(l.isPresent=i,a||s.layoutDependency!==r||r===void 0?l.willUpdate():this.safeToRemove(),s.isPresent!==i&&(i?l.promote():l.relegate()||Ps.postRender(()=>{const o=l.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),qN.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=s;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function D3(t){const[s,r]=mI(),n=j.useContext(RN);return e.jsx(K2e,{...t,layoutGroup:n,switchLayoutGroup:j.useContext(yI),isPresent:s,safeToRemove:r})}const W2e={borderRadius:{...ld,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ld,borderTopRightRadius:ld,borderBottomLeftRadius:ld,borderBottomRightRadius:ld,boxShadow:H2e};function Y2e(t,s,r){const n=yr(t)?t:_u(t);return n.start(hw("",n,s,r)),n.animation}function Q2e(t){return t instanceof SVGElement&&t.tagName!=="svg"}const X2e=(t,s)=>t.depth-s.depth;class Z2e{constructor(){this.children=[],this.isDirty=!1}add(s){sw(this.children,s),this.isDirty=!0}remove(s){rw(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(X2e),this.isDirty=!1,this.children.forEach(s)}}function J2e(t,s){const r=da.now(),n=({timestamp:a})=>{const i=a-r;i>=s&&(Ri(n),t(i-s))};return Ps.read(n,!0),()=>Ri(n)}const O3=["TopLeft","TopRight","BottomLeft","BottomRight"],eSe=O3.length,eA=t=>typeof t=="string"?parseFloat(t):t,tA=t=>typeof t=="number"||gt.test(t);function tSe(t,s,r,n,a,i){a?(t.opacity=Ds(0,r.opacity!==void 0?r.opacity:1,sSe(n)),t.opacityExit=Ds(s.opacity!==void 0?s.opacity:1,0,rSe(n))):i&&(t.opacity=Ds(s.opacity!==void 0?s.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let l=0;l<eSe;l++){const o=`border${O3[l]}Radius`;let c=sA(s,o),d=sA(r,o);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||tA(c)===tA(d)?(t[o]=Math.max(Ds(eA(c),eA(d),n),0),(ca.test(d)||ca.test(c))&&(t[o]+="%")):t[o]=d}(s.rotate||r.rotate)&&(t.rotate=Ds(s.rotate||0,r.rotate||0,n))}function sA(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const sSe=E3(0,.5,QI),rSe=E3(.5,.95,Zr);function E3(t,s,r){return n=>n<t?0:n>s?1:r(jc(t,s,n))}function rA(t,s){t.min=s.min,t.max=s.max}function an(t,s){rA(t.x,s.x),rA(t.y,s.y)}function nA(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function aA(t,s,r,n,a){return t-=s,t=Gx(t,1/r,n),a!==void 0&&(t=Gx(t,1/a,n)),t}function nSe(t,s=0,r=1,n=.5,a,i=t,l=t){if(ca.test(s)&&(s=parseFloat(s),s=Ds(l.min,l.max,s/100)-l.min),typeof s!="number")return;let o=Ds(i.min,i.max,n);t===i&&(o-=s),t.min=aA(t.min,s,r,o,a),t.max=aA(t.max,s,r,o,a)}function iA(t,s,[r,n,a],i,l){nSe(t,s[r],s[n],s[a],s.scale,i,l)}const aSe=["x","scaleX","originX"],iSe=["y","scaleY","originY"];function lA(t,s,r,n){iA(t.x,s,aSe,r?r.x:void 0,n?n.x:void 0),iA(t.y,s,iSe,r?r.y:void 0,n?n.y:void 0)}function oA(t){return t.translate===0&&t.scale===1}function M3(t){return oA(t.x)&&oA(t.y)}function cA(t,s){return t.min===s.min&&t.max===s.max}function lSe(t,s){return cA(t.x,s.x)&&cA(t.y,s.y)}function dA(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function R3(t,s){return dA(t.x,s.x)&&dA(t.y,s.y)}function uA(t){return tn(t.x)/tn(t.y)}function mA(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class oSe{constructor(){this.members=[]}add(s){sw(this.members,s),s.scheduleRender()}remove(s){if(rw(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(s){const r=this.members.findIndex(a=>s===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(s,r){const n=this.lead;if(s!==n&&(this.prevLead=n,this.lead=s,s.show(),n)){n.instance&&n.scheduleRender(),s.scheduleRender(),s.resumeFrom=n,r&&(s.resumeFrom.preserveOpacity=!0),n.snapshot&&(s.snapshot=n.snapshot,s.snapshot.latestValues=n.animationValues||n.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:a}=s.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:r,resumingFrom:n}=s;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cSe(t,s,r){let n="";const a=t.x.translate/s.x,i=t.y.translate/s.y,l=r?.z||0;if((a||i||l)&&(n=`translate3d(${a}px, ${i}px, ${l}px) `),(s.x!==1||s.y!==1)&&(n+=`scale(${1/s.x}, ${1/s.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:m,rotateY:h,skewX:x,skewY:g}=r;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),m&&(n+=`rotateX(${m}deg) `),h&&(n+=`rotateY(${h}deg) `),x&&(n+=`skewX(${x}deg) `),g&&(n+=`skewY(${g}deg) `)}const o=t.x.scale*s.x,c=t.y.scale*s.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const tl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},gd=typeof window<"u"&&window.MotionDebug!==void 0,mj=["","X","Y","Z"],dSe={visibility:"hidden"},hA=1e3;let uSe=0;function hj(t,s,r,n){const{latestValues:a}=s;a[t]&&(r[t]=a[t],s.setStaticValue(t,0),n&&(n[t]=0))}function _3(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const r=UI(s);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Ps,!(a||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&_3(n)}function I3({attachResizeListener:t,defaultParent:s,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(l={},o=s?.()){this.id=uSe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,gd&&(tl.totalNodes=tl.resolvedTargetDeltas=tl.recalculatedProjection=0),this.nodes.forEach(xSe),this.nodes.forEach(vSe),this.nodes.forEach(ySe),this.nodes.forEach(pSe),gd&&window.MotionDebug.record(tl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Z2e)}addEventListener(l,o){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new nw),this.eventHandlers.get(l).add(o)}notifyListeners(l,...o){const c=this.eventHandlers.get(l);c&&c.notify(...o)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Q2e(l),this.instance=l;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(d||c)&&(this.isLayoutDirty=!0),t){let m;const h=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=J2e(h,250),mh.hasAnimatedSinceResize&&(mh.hasAnimatedSinceResize=!1,this.nodes.forEach(pA))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeTargetChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||CSe,{onLayoutAnimationStart:f,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!R3(this.targetLayout,g)||x,y=!h&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,y);const S={...ZN(p,"layout"),onPlay:f,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else h||pA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ri(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bSe),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xA);return}this.isUpdating||this.nodes.forEach(gSe),this.isUpdating=!1,this.nodes.forEach(jSe),this.nodes.forEach(mSe),this.nodes.forEach(hSe),this.clearAllSnapshots();const o=da.now();xr.delta=Qa(0,1e3/60,o-xr.timestamp),xr.timestamp=o,xr.isProcessing=!0,rj.update.process(xr),rj.preRender.process(xr),rj.render.process(xr),xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fSe),this.sharedNodes.forEach(NSe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ps.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ps.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(o=!1),o){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!M3(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;l&&(o||el(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return l&&(c=this.removeTransform(c)),PSe(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:o}=this.options;if(!o)return Bs();const c=o.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(kSe))){const{scroll:u}=this.root;u&&(jo(c.x,u.offset.x),jo(c.y,u.offset.y))}return c}removeElementScroll(l){var o;const c=Bs();if(an(c,l),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:m,options:h}=u;u!==this.root&&m&&h.layoutScroll&&(m.wasRoot&&an(c,l),jo(c.x,m.offset.x),jo(c.y,m.offset.y))}return c}applyTransform(l,o=!1){const c=Bs();an(c,l);for(let d=0;d<this.path.length;d++){const u=this.path[d];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&vo(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),el(u.latestValues)&&vo(c,u.latestValues)}return el(this.latestValues)&&vo(c,this.latestValues),c}removeTransform(l){const o=Bs();an(o,l);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!el(d.latestValues))continue;e0(d.latestValues)&&d.updateSnapshot();const u=Bs(),m=d.measurePageBox();an(u,m),lA(o,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return el(this.latestValues)&&lA(o,this.latestValues),o}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=xr.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bs(),this.relativeTargetOrigin=Bs(),Dd(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),an(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Bs(),this.targetWithTransforms=Bs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D2e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):an(this.target,this.layout.layoutBox),k3(this.target,this.targetDelta)):an(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bs(),this.relativeTargetOrigin=Bs(),Dd(this.relativeTargetOrigin,this.target,x.target),an(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}gd&&tl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||e0(this.parent.latestValues)||P3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===xr.timestamp&&(d=!1),d)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;an(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,x=this.treeScale.y;L2e(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Bs());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nA(this.prevProjectionDelta.x,this.projectionDelta.x),nA(this.prevProjectionDelta.y,this.projectionDelta.y)),Td(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==x||!mA(this.projectionDelta.x,this.prevProjectionDelta.x)||!mA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),gd&&tl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=go(),this.projectionDelta=go(),this.projectionDeltaWithTransform=go()}setAnimationOrigin(l,o=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=go();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Bs(),x=c?c.source:void 0,g=this.layout?this.layout.source:void 0,p=x!==g,f=this.getStack(),v=!f||f.members.length<=1,b=!!(p&&!v&&this.options.crossfade===!0&&!this.path.some(SSe));this.animationProgress=0;let y;this.mixTargetDelta=S=>{const w=S/1e3;fA(m.x,l.x,w),fA(m.y,l.y,w),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dd(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wSe(this.relativeTarget,this.relativeTargetOrigin,h,w),y&&lSe(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Bs()),an(y,this.relativeTarget)),p&&(this.animationValues=u,tSe(u,d,this.latestValues,w,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ri(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ps.update(()=>{mh.hasAnimatedSinceResize=!0,this.currentAnimation=Y2e(0,hA,{...l,onUpdate:o=>{this.mixTargetDelta(o),l.onUpdate&&l.onUpdate(o)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:o,target:c,layout:d,latestValues:u}=l;if(!(!o||!c||!d)){if(this!==l&&this.layout&&d&&$3(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Bs();const m=tn(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+m;const h=tn(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+h}an(o,c),vo(o,u),Td(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(l,o){this.sharedNodes.has(l)||this.sharedNodes.set(l,new oSe),this.sharedNodes.get(l).add(o);const d=o.options.initialPromotionConfig;o.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(o):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:o,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let o=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const d={};c.z&&hj("z",l,d,this.animationValues);for(let u=0;u<mj.length;u++)hj(`rotate${mj[u]}`,l,d,this.animationValues),hj(`skew${mj[u]}`,l,d,this.animationValues);l.render();for(const u in d)l.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);l.scheduleRender()}getProjectionStyles(l){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return dSe;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=dh(l?.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=dh(l?.pointerEvents)||""),this.hasProjected&&!el(this.latestValues)&&(p.transform=u?u({},""):"none",this.hasProjected=!1),p}const h=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=cSe(this.projectionDeltaWithTransform,this.treeScale,h),u&&(d.transform=u(h,d.transform));const{x,y:g}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:d.opacity=m===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in Bx){if(h[p]===void 0)continue;const{correct:f,applyTo:v}=Bx[p],b=d.transform==="none"?h[p]:f(h[p],m);if(v){const y=v.length;for(let S=0;S<y;S++)d[v[S]]=b}else d[p]=b}return this.options.layoutId&&(d.pointerEvents=m===this?dh(l?.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var o;return(o=l.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(xA),this.root.sharedNodes.clear()}}}function mSe(t){t.updateLayout()}function hSe(t){var s;const r=((s=t.resumeFrom)===null||s===void 0?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=t.layout,{animationType:i}=t.options,l=r.source!==t.layout.source;i==="size"?on(m=>{const h=l?r.measuredBox[m]:r.layoutBox[m],x=tn(h);h.min=n[m].min,h.max=h.min+x}):$3(i,r.layoutBox,n)&&on(m=>{const h=l?r.measuredBox[m]:r.layoutBox[m],x=tn(n[m]);h.max=h.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+x)});const o=go();Td(o,n,r.layoutBox);const c=go();l?Td(c,t.applyTransform(a,!0),r.measuredBox):Td(c,n,r.layoutBox);const d=!M3(o);let u=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:x}=m;if(h&&x){const g=Bs();Dd(g,r.layoutBox,h.layoutBox);const p=Bs();Dd(p,n,x.layoutBox),R3(g,p)||(u=!0),m.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=g,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function xSe(t){gd&&tl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pSe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function fSe(t){t.clearSnapshot()}function xA(t){t.clearMeasurements()}function gSe(t){t.isLayoutDirty=!1}function jSe(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function pA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function vSe(t){t.resolveTargetDelta()}function ySe(t){t.calcProjection()}function bSe(t){t.resetSkewAndRotation()}function NSe(t){t.removeLeadSnapshot()}function fA(t,s,r){t.translate=Ds(s.translate,0,r),t.scale=Ds(s.scale,1,r),t.origin=s.origin,t.originPoint=s.originPoint}function gA(t,s,r,n){t.min=Ds(s.min,r.min,n),t.max=Ds(s.max,r.max,n)}function wSe(t,s,r,n){gA(t.x,s.x,r.x,n),gA(t.y,s.y,r.y,n)}function SSe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const CSe={duration:.45,ease:[.4,0,.1,1]},jA=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),vA=jA("applewebkit/")&&!jA("chrome/")?Math.round:Zr;function yA(t){t.min=vA(t.min),t.max=vA(t.max)}function PSe(t){yA(t.x),yA(t.y)}function $3(t,s,r){return t==="position"||t==="preserve-aspect"&&!T2e(uA(s),uA(r),.2)}function kSe(t){var s;return t!==t.root&&((s=t.scroll)===null||s===void 0?void 0:s.wasRoot)}const ASe=I3({attachResizeListener:(t,s)=>$u(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xj={current:void 0},F3=I3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xj.current){const t=new ASe({});t.mount(window),t.setOptions({layoutScroll:!0}),xj.current=t}return xj.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),TSe={pan:{Feature:G2e},drag:{Feature:z2e,ProjectionNode:F3,MeasureLayout:D3}};function bA(t,s,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=n[a];i&&Ps.postRender(()=>i(s,vm(s)))}class DSe extends zi{mount(){const{current:s}=this.node;s&&(this.unmount=Twe(s,r=>(bA(this.node,r,"Start"),n=>bA(this.node,n,"End"))))}unmount(){}}class OSe extends zi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jm($u(this.node.current,"focus",()=>this.onFocus()),$u(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NA(t,s,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=n[a];i&&Ps.postRender(()=>i(s,vm(s)))}class ESe extends zi{mount(){const{current:s}=this.node;s&&(this.unmount=Mwe(s,r=>(NA(this.node,r,"Start"),(n,{success:a})=>NA(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const s0=new WeakMap,pj=new WeakMap,MSe=t=>{const s=s0.get(t.target);s&&s(t)},RSe=t=>{t.forEach(MSe)};function _Se({root:t,...s}){const r=t||document;pj.has(r)||pj.set(r,{});const n=pj.get(r),a=JSON.stringify(s);return n[a]||(n[a]=new IntersectionObserver(RSe,{root:t,...s})),n[a]}function ISe(t,s,r){const n=_Se(s);return s0.set(t,r),n.observe(t),()=>{s0.delete(t),n.unobserve(t)}}const $Se={some:0,all:1};class FSe extends zi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=s,l={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:$Se[a]},o=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),h=d?u:m;h&&h(c)};return ISe(this.node.current,l,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:r}=this.node;["amount","margin","root"].some(LSe(s,r))&&this.startObserver()}unmount(){}}function LSe({viewport:t={}},{viewport:s={}}={}){return r=>t[r]!==s[r]}const BSe={inView:{Feature:FSe},tap:{Feature:ESe},focus:{Feature:OSe},hover:{Feature:DSe}},VSe={layout:{ProjectionNode:F3,MeasureLayout:D3}},r0={current:null},L3={current:!1};function qSe(){if(L3.current=!0,!!$N)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>r0.current=t.matches;t.addListener(s),s()}else r0.current=!1}const USe=[...d3,gr,_i],zSe=t=>USe.find(c3(t)),wA=new WeakMap;function GSe(t,s,r){for(const n in s){const a=s[n],i=r[n];if(yr(a))t.addValue(n,a);else if(yr(i))t.addValue(n,_u(a,{owner:t}));else if(i!==a)if(t.hasValue(n)){const l=t.getValue(n);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(n);t.addValue(n,_u(l!==void 0?l:a,{owner:t}))}}for(const n in r)s[n]===void 0&&t.removeValue(n);return s}const SA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class HSe{scrapeMotionValuesFromProps(s,r,n){return{}}constructor({parent:s,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:l},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=da.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Ps.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:u}=l;this.onUpdate=u,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=s,this.props=r,this.presenceContext=n,this.depth=s?s.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Rf(r),this.isVariantNode=jI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const x in h){const g=h[x];c[x]!==void 0&&yr(g)&&g.set(c[x],!1)}}mount(s){this.current=s,wA.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),L3.current||qSe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:r0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){wA.delete(this.current),this.projection&&this.projection.unmount(),Ri(this.notifyUpdate),Ri(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(s,r){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const n=zl.has(s),a=r.on("change",o=>{this.latestValues[s]=o,this.props.onUpdate&&Ps.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,s,r)),this.valueSubscriptions.set(s,()=>{a(),i(),l&&l(),r.owner&&r.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in vc){const r=vc[s];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[s]&&a&&n(this.props)&&(this.features[s]=new a(this)),this.features[s]){const i=this.features[s];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bs()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,r){this.latestValues[s]=r}update(s,r){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<SA.length;n++){const a=SA[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,l=s[i];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=GSe(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(s),()=>r.variantChildren.delete(s)}addValue(s,r){const n=this.values.get(s);r!==n&&(n&&this.removeValue(s),this.bindToMotionValue(s,r),this.values.set(s,r),this.latestValues[s]=r.get())}removeValue(s){this.values.delete(s);const r=this.valueSubscriptions.get(s);r&&(r(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,r){if(this.props.values&&this.props.values[s])return this.props.values[s];let n=this.values.get(s);return n===void 0&&r!==void 0&&(n=_u(r===null?void 0:r,{owner:this}),this.addValue(s,n)),n}readValue(s,r){var n;let a=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:(n=this.getBaseTargetFromProps(this.props,s))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,s,this.options);return a!=null&&(typeof a=="string"&&(l3(a)||ZI(a))?a=parseFloat(a):!zSe(a)&&_i.test(r)&&(a=n3(s,r)),this.setBaseTarget(s,yr(a)?a.get():a)),yr(a)?a.get():a}setBaseTarget(s,r){this.baseTarget[s]=r}getBaseTarget(s){var r;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const l=zN(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);l&&(a=l[s])}if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,s);return i!==void 0&&!yr(i)?i:this.initialValues[s]!==void 0&&a===void 0?void 0:this.baseTarget[s]}on(s,r){return this.events[s]||(this.events[s]=new nw),this.events[s].add(r)}notify(s,...r){this.events[s]&&this.events[s].notify(...r)}}class B3 extends HSe{constructor(){super(...arguments),this.KeyframeResolver=u3}sortInstanceNodePosition(s,r){return s.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(s,r){return s.style?s.style[r]:void 0}removeValueFromRenderState(s,{vars:r,style:n}){delete r[s],delete n[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;yr(s)&&(this.childSubscription=s.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function KSe(t){return window.getComputedStyle(t)}class WSe extends B3{constructor(){super(...arguments),this.type="html",this.renderInstance=kI}readValueFromInstance(s,r){if(zl.has(r)){const n=cw(r);return n&&n.default||0}else{const n=KSe(s),a=(SI(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(s,{transformPagePoint:r}){return A3(s,r)}build(s,r,n){KN(s,r,n.transformTemplate)}scrapeMotionValuesFromProps(s,r,n){return XN(s,r,n)}}class YSe extends B3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bs}getBaseTargetFromProps(s,r){return s[r]}readValueFromInstance(s,r){if(zl.has(r)){const n=cw(r);return n&&n.default||0}return r=AI.has(r)?r:VN(r),s.getAttribute(r)}scrapeMotionValuesFromProps(s,r,n){return OI(s,r,n)}build(s,r,n){WN(s,r,this.isSVGTag,n.transformTemplate)}renderInstance(s,r,n,a){TI(s,r,n,a)}mount(s){this.isSVGTag=QN(s.tagName),super.mount(s)}}const QSe=(t,s)=>UN(t)?new YSe(s):new WSe(s,{allowProjection:t!==j.Fragment}),XSe=Nwe({...y2e,...BSe,...TSe,...VSe},QSe),fj=$Ne(XSe);function ZSe({userId:t,organizationId:s}){const[r,n]=j.useState([]),[a,i]=j.useState(!1),[l,o]=j.useState(null);j.useEffect(()=>{(()=>{const g={id:Date.now(),achievementId:1,achievement:{name:"Welcome Aboard!",description:"You've successfully logged into HostPilotPro",points:10,badgeColor:"#3B82F6",category:"system"},isRead:!1,createdAt:new Date().toISOString()};r.length===0&&setTimeout(()=>{c(g)},3e3)})()},[t,s]);const c=x=>{o(x),i(!0),n(g=>[x,...g]),setTimeout(()=>{i(!1)},5e3)},d=x=>{n(g=>g.map(p=>p.id===x?{...p,isRead:!0}:p))},u=()=>{i(!1),l&&d(l.id)},m=()=>!a||!l?null:e.jsx(Ve,{open:a,onOpenChange:u,children:e.jsxs(qe,{className:"sm:max-w-md",children:[e.jsx(Ue,{children:e.jsx(ze,{className:"text-center",children:e.jsxs(fj.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(fj.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 border-4 border-dashed border-yellow-400 rounded-full"}),e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-white text-2xl",style:{backgroundColor:l.achievement.badgeColor},children:e.jsx(Rn,{})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-600",children:"Achievement Unlocked!"}),e.jsx("h4",{className:"text-lg font-semibold",children:l.achievement.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.achievement.description}),e.jsxs(q,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:["+",l.achievement.points," points"]})]})]})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(R,{onClick:u,className:"w-full",children:[e.jsx(Id,{className:"h-4 w-4 mr-2"}),"Awesome!"]})})]})}),h=()=>{const x=r.filter(g=>!g.isRead);return x.length===0||a?null:e.jsx(TNe,{children:x.slice(0,1).map(g=>e.jsx(fj.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:"fixed bottom-4 right-4 z-50",children:e.jsx(O,{className:"w-80 border-l-4 border-l-yellow-400 shadow-lg",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white flex-shrink-0",style:{backgroundColor:g.achievement.badgeColor},children:e.jsx(us,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ld,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"Achievement Unlocked!"})]}),e.jsx("h4",{className:"font-semibold text-sm",children:g.achievement.name}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:g.achievement.description}),e.jsxs(q,{variant:"outline",className:"mt-1 text-xs",children:["+",g.achievement.points," pts"]})]}),e.jsx(R,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0",onClick:()=>d(g.id),children:e.jsx(Is,{className:"h-3 w-3"})})]})})})},g.id))})};return e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(h,{})]})}function JSe(){const{user:t}=vn();return t?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Rn,{className:"h-8 w-8 text-yellow-600"}),"Achievements"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your progress and unlock rewards as you use HostPilotPro"})]}),e.jsxs(q,{variant:"outline",className:"bg-gradient-to-r from-yellow-50 to-orange-50 text-yellow-700 border-yellow-200",children:[e.jsx(us,{className:"h-3 w-3 mr-1"}),"Gamification System"]})]}),e.jsx(SNe,{userId:t.id,organizationId:t.organizationId||"default-org"}),e.jsx(ZSe,{userId:t.id,organizationId:t.organizationId||"default-org"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(y0,{className:"h-5 w-5 text-blue-600"}),"How It Works"]})}),e.jsxs(D,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Complete tasks, process bookings, and manage properties to earn points"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Level up by accumulating points and maintaining activity streaks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Unlock badges and achievements for reaching milestones"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Track your progress across different categories"})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-green-600"}),"Benefits"]})}),e.jsxs(D,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Visual progress tracking keeps you motivated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Recognition for your contributions and improvements"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Competitive elements to drive engagement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"• Personalized goals based on your role and activities"})]})]})]})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(O,{children:e.jsx(D,{className:"p-6 text-center",children:e.jsx("p",{children:"Please log in to view your achievements."})})})})}var V3="AlertDialog",[eCe,bke]=Zs(V3,[FD]),ei=FD(),q3=t=>{const{__scopeAlertDialog:s,...r}=t,n=ei(s);return e.jsx(eO,{...n,...r,modal:!0})};q3.displayName=V3;var tCe="AlertDialogTrigger",sCe=j.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ei(r);return e.jsx(tO,{...a,...n,ref:s})});sCe.displayName=tCe;var rCe="AlertDialogPortal",U3=t=>{const{__scopeAlertDialog:s,...r}=t,n=ei(s);return e.jsx(sO,{...n,...r})};U3.displayName=rCe;var nCe="AlertDialogOverlay",z3=j.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ei(r);return e.jsx(F0,{...a,...n,ref:s})});z3.displayName=nCe;var Ao="AlertDialogContent",[aCe,iCe]=eCe(Ao),lCe=xT("AlertDialogContent"),G3=j.forwardRef((t,s)=>{const{__scopeAlertDialog:r,children:n,...a}=t,i=ei(r),l=j.useRef(null),o=jt(s,l),c=j.useRef(null);return e.jsx(RU,{contentName:Ao,titleName:H3,docsSlug:"alert-dialog",children:e.jsx(aCe,{scope:r,cancelRef:c,children:e.jsxs(L0,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:Re(a.onOpenAutoFocus,d=>{d.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(lCe,{children:n}),e.jsx(cCe,{contentRef:l})]})})})});G3.displayName=Ao;var H3="AlertDialogTitle",K3=j.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ei(r);return e.jsx(B0,{...a,...n,ref:s})});K3.displayName=H3;var W3="AlertDialogDescription",Y3=j.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ei(r);return e.jsx(V0,{...a,...n,ref:s})});Y3.displayName=W3;var oCe="AlertDialogAction",Q3=j.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,a=ei(r);return e.jsx(q0,{...a,...n,ref:s})});Q3.displayName=oCe;var X3="AlertDialogCancel",Z3=j.forwardRef((t,s)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=iCe(X3,r),i=ei(r),l=jt(s,a);return e.jsx(q0,{...i,...n,ref:l})});Z3.displayName=X3;var cCe=({contentRef:t})=>{const s=`\`${Ao}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ao}\` by passing a \`${W3}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ao}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},dCe=q3,uCe=U3,J3=z3,e$=G3,t$=Q3,s$=Z3,r$=K3,n$=Y3;const xw=dCe,mCe=uCe,a$=j.forwardRef(({className:t,...s},r)=>e.jsx(J3,{className:_e("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));a$.displayName=J3.displayName;const $f=j.forwardRef(({className:t,...s},r)=>e.jsxs(mCe,{children:[e.jsx(a$,{}),e.jsx(e$,{ref:r,className:_e("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));$f.displayName=e$.displayName;const Ff=({className:t,...s})=>e.jsx("div",{className:_e("flex flex-col space-y-2 text-center sm:text-left",t),...s});Ff.displayName="AlertDialogHeader";const Lf=({className:t,...s})=>e.jsx("div",{className:_e("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Lf.displayName="AlertDialogFooter";const Bf=j.forwardRef(({className:t,...s},r)=>e.jsx(r$,{ref:r,className:_e("text-lg font-semibold",t),...s}));Bf.displayName=r$.displayName;const Vf=j.forwardRef(({className:t,...s},r)=>e.jsx(n$,{ref:r,className:_e("text-sm text-muted-foreground",t),...s}));Vf.displayName=n$.displayName;const qf=j.forwardRef(({className:t,...s},r)=>e.jsx(t$,{ref:r,className:_e(Ud(),t),...s}));qf.displayName=t$.displayName;const Uf=j.forwardRef(({className:t,...s},r)=>e.jsx(s$,{ref:r,className:_e(Ud({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));Uf.displayName=s$.displayName;function gj(){const{toast:t}=Xe(),[s,r]=j.useState("staff"),[n,a]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(!1),[d,u]=j.useState(!1),[m,h]=j.useState(null),[x,g]=j.useState({firstName:"",lastName:"",position:"",department:"",salary:"",email:"",phone:""}),[p,f]=j.useState({firstName:"",lastName:"",position:"",department:"",salary:""}),{data:v}=ge({queryKey:["/api/auth/user"]}),b=v?.organizationId||"default-org",{data:y=[],isLoading:S}=ge({queryKey:["/api/staff-members",b],queryFn:async()=>{const z=await fetch(`/api/staff-members?organizationId=${b}`);if(!z.ok){const L=await z.json();throw new Error(L.error||"Failed to fetch staff members")}return z.json()},enabled:!0});console.log("staffList:",y);const{data:w=[],isLoading:C,error:k}=ge({queryKey:["/api/payroll-records",b],queryFn:async()=>{const z=await fetch(`/api/payroll-records?organizationId=${b}`);if(!z.ok){const L=await z.json();throw new Error(L.error||"Failed to fetch payroll records")}return z.json()},enabled:s==="payroll"&&!0});console.log("payrollRecords:",w);const A=Ce({mutationFn:async z=>fe("POST","/api/staff-members",z),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member added successfully"}),a(!1),g({firstName:"",lastName:"",position:"",department:"",salary:"",email:"",phone:""})},onError:z=>{t({title:"Error",description:z.message||"Failed to add staff member",variant:"destructive"})}}),N=Ce({mutationFn:async({id:z,data:L})=>fe("PUT",`/api/staff-members/${z}`,L),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member updated successfully"}),c(!1),h(null)},onError:z=>{t({title:"Error",description:z.message||"Failed to update staff member",variant:"destructive"})}}),M=Ce({mutationFn:async z=>fe("DELETE",`/api/staff-members/${z}`),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/staff-members"]}),t({title:"Success",description:"Staff member deleted successfully"}),u(!1),h(null)},onError:z=>{t({title:"Error",description:z.message||"Failed to delete staff member",variant:"destructive"})}}),F=z=>{if(!z&&z!==0)return"฿0";const L=typeof z=="string"?parseFloat(z):z;return isNaN(L)?"฿0":`฿${L.toLocaleString()}`},I=z=>z==="active"||z==="Active"?"bg-green-100 text-green-800 px-2 py-1 rounded text-xs":"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",V=()=>{if(!x.firstName||!x.lastName||!x.position||!x.department||!x.salary){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const z=y.length>0?Math.max(...y.map(le=>le.id))+1:1,L=`EMP${String(z).padStart(3,"0")}`;A.mutate({organizationId:b,employeeId:L,firstName:x.firstName,lastName:x.lastName,position:x.position,department:x.department,monthlySalary:x.salary,salaryType:"monthly",startDate:new Date().toISOString().split("T")[0],status:"active",email:x.email||void 0,phoneNumber:x.phone||void 0})},E=z=>{h(z),l(!0)},G=z=>{h(z),f({firstName:z.firstName,lastName:z.lastName,position:z.position,department:z.department,salary:z.monthlySalary}),c(!0)},Y=()=>{if(!m||!p.firstName||!p.lastName||!p.position||!p.department||!p.salary){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}N.mutate({id:m.id,data:{firstName:p.firstName,lastName:p.lastName,position:p.position,department:p.department,monthlySalary:p.salary}})},Q=z=>{h(z),u(!0)},T=()=>{m&&M.mutate(m.id)},B=y.length,W=y.reduce((z,L)=>z+parseFloat(L.monthlySalary||"0"),0),he=B>0?Math.round(W/B):0;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Staff Salaries & Wages"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Admin-only staff salary and wage management system"})]}),e.jsxs(R,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2","data-testid":"button-add-staff",children:[e.jsx(ht,{className:"h-4 w-4"}),"Add Staff Member"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-total-staff",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-total-staff",children:B})]}),e.jsx("div",{className:"text-blue-600",children:"👥"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-monthly-payroll",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Monthly Payroll"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-monthly-payroll",children:F(W)})]}),e.jsx("div",{className:"text-green-600",children:"💰"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-average-salary",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average Salary"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-average-salary",children:F(he)})]}),e.jsx("div",{className:"text-purple-600",children:"📊"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border","data-testid":"card-pending-payments",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Payments"}),e.jsx("p",{className:"text-2xl font-bold","data-testid":"text-pending-payments",children:0})]}),e.jsx("div",{className:"text-orange-600",children:"⏰"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"border-b",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="staff"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>r("staff"),"data-testid":"tab-staff-members",children:"Staff Members"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="payroll"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>r("payroll"),"data-testid":"tab-payroll-records",children:"Payroll Records"}),e.jsx("button",{className:`py-4 px-1 border-b-2 font-medium text-sm ${s==="departments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>r("departments"),"data-testid":"tab-departments",children:"Departments"})]})}),e.jsxs("div",{className:"p-6",children:[s==="staff"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Staff Members"}),S?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ts,{className:"h-8 w-8 animate-spin text-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:'No staff members found. Click "Add Staff Member" to get started.'})}):y.map(z=>e.jsxs("tr",{"data-testid":`row-staff-${z.id}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.employeeId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:`${z.firstName} ${z.lastName}`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.position}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(z.monthlySalary)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:I(z.status),children:z.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 p-1",onClick:()=>E(z),"data-testid":`button-view-${z.id}`,title:"View Details",children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-yellow-600 hover:text-yellow-900 p-1",onClick:()=>G(z),"data-testid":`button-edit-${z.id}`,title:"Edit Staff",children:e.jsx(l8,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900 p-1",onClick:()=>Q(z),"data-testid":`button-delete-${z.id}`,title:"Delete Staff",children:e.jsx(Er,{className:"h-4 w-4"})})]})})]},z.id))})]})})]}),s==="payroll"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payroll Records"}),C?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(ts,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading payroll records..."})]}):k?e.jsx("div",{className:"text-center py-8 text-red-500",children:"Error loading payroll records. Please try again later."}):w.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No payroll records yet. Payroll records will appear here once staff payments are processed."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(z=>{const L=y.find(Z=>Z.id===z.staffMemberId),le=L?`${L.firstName} ${L.lastName} (${L.employeeId})`:`Staff ID: ${z.staffMemberId}`;return e.jsxs("tr",{"data-testid":`row-payroll-${z.id}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(z.payPeriodStart).toLocaleDateString()," ","-"," ",new Date(z.payPeriodEnd).toLocaleDateString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:le}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(z.grossPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:F(z.deductions)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:F(z.netPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:z.status==="paid"||z.status==="Paid"?"bg-green-100 text-green-800 px-2 py-1 rounded text-xs":z.status==="pending"||z.status==="Pending"?"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs":"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs",children:z.status||"Unknown"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.paymentDate?new Date(z.paymentDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:z.notes||"-"})]},z.id)})})]})})]}),s==="departments"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Department Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:["Operations","Maintenance","Customer Service","Finance","Management","IT"].map(z=>e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-lg mb-2",children:z}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Staff Count:"}),e.jsx("span",{className:"font-medium",children:y.filter(L=>L.department===z).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Salary:"}),e.jsx("span",{className:"font-medium",children:F(y.filter(L=>L.department===z).reduce((L,le)=>L+parseFloat(le.monthlySalary||"0"),0))})]})]})]},z))})]})]})]}),e.jsx(Ve,{open:n,onOpenChange:a,children:e.jsxs(qe,{className:"sm:max-w-[500px]",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Add New Staff Member"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"add-first-name",children:"First Name *"}),e.jsx(H,{id:"add-first-name",placeholder:"First name",value:x.firstName,onChange:z=>g({...x,firstName:z.target.value}),"data-testid":"input-add-first-name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"add-last-name",children:"Last Name *"}),e.jsx(H,{id:"add-last-name",placeholder:"Last name",value:x.lastName,onChange:z=>g({...x,lastName:z.target.value}),"data-testid":"input-add-last-name"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"add-position",children:"Position *"}),e.jsx(H,{id:"add-position",placeholder:"Enter position",value:x.position,onChange:z=>g({...x,position:z.target.value}),"data-testid":"input-add-position"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"add-department",children:"Department *"}),e.jsxs(te,{value:x.department,onValueChange:z=>g({...x,department:z}),children:[e.jsx(J,{"data-testid":"select-add-department",children:e.jsx(se,{placeholder:"Select department"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"Operations",children:"Operations"}),e.jsx(P,{value:"Maintenance",children:"Maintenance"}),e.jsx(P,{value:"Customer Service",children:"Customer Service"}),e.jsx(P,{value:"Finance",children:"Finance"}),e.jsx(P,{value:"Management",children:"Management"}),e.jsx(P,{value:"IT",children:"IT"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"add-salary",children:"Monthly Salary (฿) *"}),e.jsx(H,{id:"add-salary",type:"number",placeholder:"Enter salary amount",value:x.salary,onChange:z=>g({...x,salary:z.target.value}),"data-testid":"input-add-salary"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"add-email",children:"Email"}),e.jsx(H,{id:"add-email",type:"email",placeholder:"email@example.com",value:x.email,onChange:z=>g({...x,email:z.target.value}),"data-testid":"input-add-email"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"add-phone",children:"Phone"}),e.jsx(H,{id:"add-phone",type:"tel",placeholder:"+66 XXX XXX XXX",value:x.phone,onChange:z=>g({...x,phone:z.target.value}),"data-testid":"input-add-phone"})]})]}),e.jsxs(Nr,{children:[e.jsx(R,{variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-add",disabled:A.isPending,children:"Cancel"}),e.jsxs(R,{onClick:V,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-confirm-add",disabled:A.isPending,children:[A.isPending&&e.jsx(ts,{className:"h-4 w-4 mr-2 animate-spin"}),"Add Staff Member"]})]})]})}),e.jsx(Ve,{open:i,onOpenChange:l,children:e.jsxs(qe,{className:"sm:max-w-[500px]",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Staff Member Details"})}),m&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Employee ID"}),e.jsx("p",{className:"font-medium","data-testid":"view-employee-id",children:m.employeeId})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium","data-testid":"view-status",children:m.status})]})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Full Name"}),e.jsx("p",{className:"font-medium","data-testid":"view-name",children:`${m.firstName} ${m.lastName}`})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Position"}),e.jsx("p",{className:"font-medium","data-testid":"view-position",children:m.position})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Department"}),e.jsx("p",{className:"font-medium","data-testid":"view-department",children:m.department})]}),e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Monthly Salary"}),e.jsx("p",{className:"font-medium text-lg","data-testid":"view-salary",children:F(m.monthlySalary)})]}),m.email&&e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:m.email})]}),m.phone&&e.jsxs("div",{children:[e.jsx(K,{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:m.phone})]})]}),e.jsx(Nr,{children:e.jsx(R,{onClick:()=>l(!1),"data-testid":"button-close-view",children:"Close"})})]})}),e.jsx(Ve,{open:o,onOpenChange:c,children:e.jsxs(qe,{className:"sm:max-w-[500px]",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Edit Staff Member"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"edit-first-name",children:"First Name *"}),e.jsx(H,{id:"edit-first-name",placeholder:"First name",value:p.firstName,onChange:z=>f({...p,firstName:z.target.value}),"data-testid":"input-edit-first-name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"edit-last-name",children:"Last Name *"}),e.jsx(H,{id:"edit-last-name",placeholder:"Last name",value:p.lastName,onChange:z=>f({...p,lastName:z.target.value}),"data-testid":"input-edit-last-name"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"edit-position",children:"Position *"}),e.jsx(H,{id:"edit-position",placeholder:"Enter position",value:p.position,onChange:z=>f({...p,position:z.target.value}),"data-testid":"input-edit-position"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"edit-department",children:"Department *"}),e.jsxs(te,{value:p.department,onValueChange:z=>f({...p,department:z}),children:[e.jsx(J,{"data-testid":"select-edit-department",children:e.jsx(se,{placeholder:"Select department"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"Operations",children:"Operations"}),e.jsx(P,{value:"Maintenance",children:"Maintenance"}),e.jsx(P,{value:"Customer Service",children:"Customer Service"}),e.jsx(P,{value:"Finance",children:"Finance"}),e.jsx(P,{value:"Management",children:"Management"}),e.jsx(P,{value:"IT",children:"IT"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(K,{htmlFor:"edit-salary",children:"Monthly Salary (฿) *"}),e.jsx(H,{id:"edit-salary",type:"number",placeholder:"Enter salary amount",value:p.salary,onChange:z=>f({...p,salary:z.target.value}),"data-testid":"input-edit-salary"})]})]}),e.jsxs(Nr,{children:[e.jsx(R,{variant:"outline",onClick:()=>c(!1),"data-testid":"button-cancel-edit",disabled:N.isPending,children:"Cancel"}),e.jsxs(R,{onClick:Y,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-save-edit",disabled:N.isPending,children:[N.isPending&&e.jsx(ts,{className:"h-4 w-4 mr-2 animate-spin"}),"Save Changes"]})]})]})}),e.jsx(xw,{open:d,onOpenChange:u,children:e.jsxs($f,{children:[e.jsxs(Ff,{children:[e.jsx(Bf,{children:"Are you sure?"}),e.jsxs(Vf,{children:['This will permanently delete the staff member "',m?.firstName," ",m?.lastName,'". This action cannot be undone.']})]}),e.jsxs(Lf,{children:[e.jsx(Uf,{"data-testid":"button-cancel-delete",disabled:M.isPending,children:"Cancel"}),e.jsxs(qf,{onClick:T,className:"bg-red-600 hover:bg-red-700","data-testid":"button-confirm-delete",disabled:M.isPending,children:[M.isPending&&e.jsx(ts,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete"]})]})]})})]})}const hCe=Qt({propertyId:Zt(),applianceType:Ne().min(1,"Appliance type is required"),brand:Ne().optional(),model:Ne().optional(),serialNumber:Ne().optional(),installDate:Ne().optional(),warrantyExpiry:Ne().optional(),notes:Ne().optional()}),xCe=Qt({applianceId:Zt(),issueReported:Ne().min(1,"Issue description is required"),fixDescription:Ne().optional(),technicianName:Ne().optional(),repairCost:Zt().optional(),receiptUrl:Ne().optional(),repairedAt:Ne().optional()});function pCe(){const[t,s]=j.useState(""),[r,n]=j.useState("all"),[a,i]=j.useState(!1),[l,o]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState(null),{toast:h}=Xe(),x=ut(),{data:g=[],isLoading:p}=ge({queryKey:["/api/properties"]}),{data:f=[],isLoading:v}=ge({queryKey:["/api/property-appliances"]}),{data:b=[],isLoading:y}=ge({queryKey:["/api/appliance-repairs"]}),{data:S}=ge({queryKey:["/api/property-appliances/analytics"]}),w=Ft({resolver:es(hCe),defaultValues:{propertyId:0,applianceType:"",brand:"",model:"",serialNumber:"",installDate:"",warrantyExpiry:"",notes:""}}),C=Ft({resolver:es(xCe),defaultValues:{applianceId:0,issueReported:"",fixDescription:"",technicianName:"",repairCost:0,receiptUrl:"",repairedAt:""}}),k=Ce({mutationFn:U=>fe("POST","/api/property-appliances",U),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/property-appliances"]}),x.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),i(!1),w.reset(),h({title:"Success",description:"Appliance added successfully"})},onError:()=>{h({title:"Error",description:"Failed to add appliance",variant:"destructive"})}}),A=Ce({mutationFn:({id:U,data:je})=>fe("PUT",`/api/property-appliances/${U}`,je),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/property-appliances"]}),x.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),i(!1),d(null),w.reset(),h({title:"Success",description:"Appliance updated successfully"})},onError:()=>{h({title:"Error",description:"Failed to update appliance",variant:"destructive"})}}),N=Ce({mutationFn:U=>fe("DELETE",`/api/property-appliances/${U}`),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/property-appliances"]}),x.invalidateQueries({queryKey:["/api/property-appliances/analytics"]}),h({title:"Success",description:"Appliance deleted successfully"})},onError:()=>{h({title:"Error",description:"Failed to delete appliance",variant:"destructive"})}}),M=Ce({mutationFn:U=>fe("POST","/api/appliance-repairs",U),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/appliance-repairs"]}),o(!1),C.reset(),h({title:"Success",description:"Repair record added successfully"})},onError:()=>{h({title:"Error",description:"Failed to add repair record",variant:"destructive"})}}),F=Ce({mutationFn:({id:U,data:je})=>fe("PUT",`/api/appliance-repairs/${U}`,je),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/appliance-repairs"]}),o(!1),m(null),C.reset(),h({title:"Success",description:"Repair record updated successfully"})},onError:()=>{h({title:"Error",description:"Failed to update repair record",variant:"destructive"})}}),I=Ce({mutationFn:U=>fe("DELETE",`/api/appliance-repairs/${U}`),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/appliance-repairs"]}),h({title:"Success",description:"Repair record deleted successfully"})},onError:()=>{h({title:"Error",description:"Failed to delete repair record",variant:"destructive"})}}),V=()=>{d(null),w.reset(),i(!0)},E=U=>{d(U),w.reset({propertyId:U.propertyId,applianceType:U.applianceType,brand:U.brand||"",model:U.model||"",serialNumber:U.serialNumber||"",installDate:U.installDate||"",warrantyExpiry:U.warrantyExpiry||"",notes:U.notes||""}),i(!0)},G=U=>{confirm("Are you sure you want to delete this appliance?")&&N.mutate(U)},Y=()=>{m(null),C.reset(),o(!0)},Q=U=>{m(U),C.reset({applianceId:U.applianceId,issueReported:U.issueReported,fixDescription:U.fixDescription||"",technicianName:U.technicianName||"",repairCost:parseFloat(U.repairCost||"0"),receiptUrl:U.receiptUrl||"",repairedAt:U.repairedAt||""}),o(!0)},T=U=>{confirm("Are you sure you want to delete this repair record?")&&I.mutate(U)},B=U=>{c?A.mutate({id:c.id,data:U}):k.mutate(U)},W=U=>{u?F.mutate({id:u.id,data:U}):M.mutate(U)};if(p||v||y)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-8"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})});const he=f.filter(U=>{const je=U.brand?.toLowerCase().includes(t.toLowerCase())||U.model?.toLowerCase().includes(t.toLowerCase())||U.applianceType?.toLowerCase().includes(t.toLowerCase()),ye=r==="all"||U.propertyId?.toString()===r;return je&&ye}),Se=U=>g.find(ye=>ye.id===U)?.name||"Unknown Property",z=U=>{const je=f.find(ye=>ye.id===U);return je?`${je.applianceType} - ${je.brand} ${je.model}`:"Unknown Appliance"},L=U=>{if(!U)return null;const je=new Date,ae=new Date(U).getTime()-je.getTime(),pe=Math.ceil(ae/(1e3*60*60*24));return pe<0?{status:"expired",days:Math.abs(pe)}:pe<=30?{status:"expiring",days:pe}:{status:"active",days:pe}},le=f.length,Z=b.reduce((U,je)=>U+(je.repairCost||0),0),me=f.filter(U=>{const je=L(U.warrantyExpiry);return je&&(je.status==="expiring"||je.status==="expired")}).length;return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Property Appliances Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track appliances, warranties, and repair history"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:V,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Appliance"]}),e.jsxs(R,{onClick:Y,variant:"outline",children:[e.jsx(As,{className:"w-4 h-4 mr-2"}),"Add Repair"]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"appliances",children:"Appliances"}),e.jsx(re,{value:"repairs",children:"Repair History"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Appliances"}),e.jsx(As,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:le}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all properties"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Repair Costs"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:xt(Z)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All-time repair expenses"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Warranty Issues"}),e.jsx(Nt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:me}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expired or expiring soon"})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Recent Activity"}),e.jsx(Te,{children:"Latest appliance installations and repairs"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:b.slice(0,3).map(U=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(As,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:z(U.applianceId)}),e.jsx("p",{className:"text-sm text-gray-600",children:U.issueReported})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:xt(U.repairCost)}),e.jsx("p",{className:"text-sm text-gray-600",children:U.repairedAt})]})]},U.id))})})]})]}),e.jsx(ne,{value:"appliances",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Appliances"}),e.jsx(Te,{children:"Manage property appliances and warranties"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(H,{placeholder:"Search appliances...",value:t,onChange:U=>s(U.target.value),className:"pl-10"})]}),e.jsxs("select",{value:r,onChange:U=>n(U.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Properties"}),g.map(U=>e.jsx("option",{value:U.id.toString(),children:U.name},U.id))]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Appliance"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Brand & Model"}),e.jsx(Oe,{children:"Warranty Status"}),e.jsx(Oe,{children:"Install Date"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:he.length===0?e.jsx(wt,{children:e.jsx(Ae,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(As,{className:"mx-auto h-12 w-12 mb-4 text-gray-300"}),e.jsx("p",{children:"No appliances found"}),e.jsx("p",{className:"text-sm",children:"Add appliances to start tracking them"})]})})}):he.map(U=>{const je=L(U.warrantyExpiry);return e.jsxs(wt,{children:[e.jsx(Ae,{className:"font-medium",children:U.applianceType}),e.jsx(Ae,{children:Se(U.propertyId)}),e.jsx(Ae,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:U.brand}),e.jsx("p",{className:"text-sm text-gray-600",children:U.model})]})}),e.jsx(Ae,{children:je?e.jsx(q,{variant:je.status==="expired"?"destructive":je.status==="expiring"?"secondary":"default",children:je.status==="expired"?"Expired":je.status==="expiring"?`Expires in ${je.days} days`:"Active"}):e.jsx("span",{className:"text-gray-400",children:"No warranty"})}),e.jsx(Ae,{children:U.installDate||"N/A"}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>E(U),children:e.jsx(Or,{className:"w-4 h-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>G(U.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Er,{className:"w-4 h-4"})})]})})]},U.id)})})]})})]})]})}),e.jsx(ne,{value:"repairs",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Repair History"}),e.jsx(Te,{children:"Track maintenance and repair records"})]}),e.jsx(D,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Appliance"}),e.jsx(Oe,{children:"Issue"}),e.jsx(Oe,{children:"Technician"}),e.jsx(Oe,{children:"Cost"}),e.jsx(Oe,{children:"Date"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:b.length===0?e.jsx(wt,{children:e.jsx(Ae,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(We,{className:"mx-auto h-12 w-12 mb-4 text-gray-300"}),e.jsx("p",{children:"No repair records found"}),e.jsx("p",{className:"text-sm",children:"Repair history will appear here"})]})})}):b.map(U=>e.jsxs(wt,{children:[e.jsx(Ae,{className:"font-medium",children:z(U.applianceId)}),e.jsx(Ae,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:U.issueReported}),U.fixDescription&&e.jsx("p",{className:"text-sm text-gray-600",children:U.fixDescription})]})}),e.jsx(Ae,{children:U.technicianName||"N/A"}),e.jsx(Ae,{className:"font-medium",children:U.repairCost?xt(U.repairCost):"N/A"}),e.jsx(Ae,{children:U.repairedAt||"N/A"}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>Q(U),children:e.jsx(Or,{className:"w-4 h-4"})}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>T(U.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Er,{className:"w-4 h-4"})})]})})]},U.id))})]})})})]})}),e.jsx(ne,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Appliance Types"}),e.jsx(Te,{children:"Distribution by appliance type"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:Array.from(new Set(f.map(U=>U.applianceType))).map(U=>{const je=f.filter(ae=>ae.applianceType===U).length,ye=je/f.length*100;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:U}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${ye}%`}})}),e.jsx("span",{className:"text-sm text-gray-600 w-8",children:je})]})]},U)})})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Repair Costs by Property"}),e.jsx(Te,{children:"Total repair expenses per property"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:g.map(U=>{const je=f.filter(pe=>pe.propertyId===U.id),ae=b.filter(pe=>je.some(Je=>Je.id===pe.applianceId)).reduce((pe,Je)=>pe+(Je.repairCost||0),0);return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:U.name}),e.jsx("span",{className:"text-sm font-medium",children:xt(ae)})]},U.id)})})})]})]})})]}),e.jsx(Ve,{open:a,onOpenChange:i,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsx(Ue,{children:e.jsx(ze,{children:c?"Edit Appliance":"Add New Appliance"})}),e.jsx(Wt,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(B),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:w.control,name:"propertyId",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Property"}),e.jsxs(te,{onValueChange:je=>U.onChange(parseInt(je)),value:U.value?.toString(),children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})})}),e.jsx(ee,{children:g.map(je=>e.jsx(P,{value:je.id.toString(),children:je.name},je.id))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"applianceType",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Appliance Type"}),e.jsx(ce,{children:e.jsx(H,{...U,placeholder:"e.g., Air Conditioner"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:w.control,name:"brand",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Brand"}),e.jsx(ce,{children:e.jsx(H,{...U,placeholder:"e.g., Daikin"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"model",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Model"}),e.jsx(ce,{children:e.jsx(H,{...U,placeholder:"e.g., FTXS25K"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:w.control,name:"serialNumber",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Serial Number"}),e.jsx(ce,{children:e.jsx(H,{...U,placeholder:"e.g., DAI-2024-001"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"installDate",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Install Date"}),e.jsx(ce,{children:e.jsx(H,{...U,type:"date"})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:w.control,name:"warrantyExpiry",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Warranty Expiry"}),e.jsx(ce,{children:e.jsx(H,{...U,type:"date"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"notes",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Notes"}),e.jsx(ce,{children:e.jsx(nt,{...U,placeholder:"Additional notes..."})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:k.isPending||A.isPending,children:k.isPending||A.isPending?"Saving...":c?"Update Appliance":"Add Appliance"})]})]})})]})}),e.jsx(Ve,{open:l,onOpenChange:o,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsx(Ue,{children:e.jsx(ze,{children:u?"Edit Repair Record":"Add New Repair Record"})}),e.jsx(Wt,{...C,children:e.jsxs("form",{onSubmit:C.handleSubmit(W),className:"space-y-4",children:[e.jsx(de,{control:C.control,name:"applianceId",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Appliance"}),e.jsxs(te,{onValueChange:je=>U.onChange(parseInt(je)),value:U.value?.toString(),children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select appliance"})})}),e.jsx(ee,{children:f.map(je=>e.jsxs(P,{value:je.id.toString(),children:[je.applianceType," - ",je.brand," ",je.model," (",Se(je.propertyId),")"]},je.id))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:C.control,name:"issueReported",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Issue Reported"}),e.jsx(ce,{children:e.jsx(nt,{...U,placeholder:"Describe the issue..."})}),e.jsx(xe,{})]})}),e.jsx(de,{control:C.control,name:"fixDescription",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Fix Description"}),e.jsx(ce,{children:e.jsx(nt,{...U,placeholder:"Describe what was done to fix the issue..."})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:C.control,name:"technicianName",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Technician Name"}),e.jsx(ce,{children:e.jsx(H,{...U,placeholder:"e.g., Somchai Repair Service"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:C.control,name:"repairCost",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Repair Cost (THB)"}),e.jsx(ce,{children:e.jsx(H,{...U,type:"number",placeholder:"0"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:C.control,name:"receiptUrl",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Receipt URL"}),e.jsx(ce,{children:e.jsx(H,{...U,placeholder:"Link to receipt/invoice"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:C.control,name:"repairedAt",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Repair Date"}),e.jsx(ce,{children:e.jsx(H,{...U,type:"date"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:M.isPending||F.isPending,children:M.isPending||F.isPending?"Saving...":u?"Update Repair":"Add Repair"})]})]})})]})})]})}function fCe(){const[t,s]=j.useState(""),[r,n]=j.useState("all"),[a,i]=j.useState("all"),{data:l=[],isLoading:o}=ge({queryKey:["/api/tasks"],select:h=>h.map(x=>({id:x.id,title:x.title||"Untitled Task",description:x.description||"No description",status:x.status||"pending",priority:x.priority||"medium",assignedTo:x.assignedTo||"Unassigned",propertyName:x.propertyName||"Unknown Property",dueDate:x.dueDate||new Date().toISOString(),createdAt:x.createdAt||new Date().toISOString()}))}),c=h=>{switch(h){case"completed":return e.jsx(Me,{className:"w-4 h-4 text-green-500"});case"in-progress":return e.jsx(Ke,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(Et,{className:"w-4 h-4 text-yellow-500"})}},d=h=>{switch(h){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=l.filter(h=>{const x=h.title.toLowerCase().includes(t.toLowerCase())||h.description.toLowerCase().includes(t.toLowerCase())||h.propertyName.toLowerCase().includes(t.toLowerCase()),g=r==="all"||h.status===r,p=a==="all"||h.priority===a;return x&&g&&p}),m={total:l.length,pending:l.filter(h=>h.status==="pending").length,inProgress:l.filter(h=>h.status==="in-progress").length,completed:l.filter(h=>h.status==="completed").length};return o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((h,x)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},x))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Task Overview"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and monitor all property tasks"})]}),e.jsxs(R,{children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Schedule Task"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:m.total})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Et,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Ke,{className:"w-6 h-6 text-yellow-600"})})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m.inProgress})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ke,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:m.completed})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})})]})})})]}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx(H,{placeholder:"Search tasks...",value:t,onChange:h=>s(h.target.value),className:"pl-10"})]})}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{className:"w-40",children:e.jsx(se,{placeholder:"Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"in-progress",children:"In Progress"}),e.jsx(P,{value:"completed",children:"Completed"})]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{className:"w-40",children:e.jsx(se,{placeholder:"Priority"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Priority"}),e.jsx(P,{value:"high",children:"High"}),e.jsx(P,{value:"medium",children:"Medium"}),e.jsx(P,{value:"low",children:"Low"})]})]})]})})}),e.jsx("div",{className:"grid gap-4",children:u.length===0?e.jsx(O,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx(Et,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]})}):u.map(h=>e.jsx(O,{className:"hover:shadow-md transition-shadow",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c(h.status),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:h.title}),e.jsx(q,{className:`${d(h.priority)} border`,children:h.priority})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:h.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{className:"w-4 h-4"}),h.propertyName]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(It,{className:"w-4 h-4"}),h.assignedTo]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-4 h-4"}),"Due: ",new Date(h.dueDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:"Edit"}),e.jsx(R,{variant:"outline",size:"sm",children:"View"})]})]})})},h.id))})]})}function gCe(){const[t,s]=j.useState(new Date().toISOString().split("T")[0]),{data:r=[],isLoading:n}=ge({queryKey:["/api/tasks"],select:x=>x.map(g=>({id:g.id,title:g.title||"Untitled Task",status:g.status||"pending",priority:g.priority||"medium",assignedTo:g.assignedTo||"Unassigned",propertyName:g.propertyName||"Unknown Property",dueDate:g.dueDate||new Date().toISOString(),type:g.type||"maintenance"}))}),{data:a=[],isLoading:i}=ge({queryKey:["/api/bookings"],select:x=>x.map(g=>({id:g.id,guestName:g.guestName||"Unknown Guest",propertyName:g.propertyName||"Unknown Property",checkIn:g.checkIn||new Date().toISOString(),checkOut:g.checkOut||new Date().toISOString(),status:g.status||"confirmed",totalAmount:g.totalAmount||0}))}),{data:l=[],isLoading:o}=ge({queryKey:["/api/properties"],select:x=>x.map(g=>({id:g.id,name:g.name||"Unnamed Property",status:g.status||"active",occupancyRate:Math.floor(Math.random()*100),revenue:Math.floor(Math.random()*5e4)+1e4,maintenanceIssues:Math.floor(Math.random()*5)}))}),c=r.filter(x=>{const g=new Date(x.dueDate).toDateString(),p=new Date().toDateString();return g===p}),d=a.filter(x=>{const g=new Date(x.checkIn).toDateString(),p=new Date().toDateString();return g===p}),u=a.filter(x=>{const g=new Date(x.checkOut).toDateString(),p=new Date().toDateString();return g===p}),m={totalProperties:l.length,activeProperties:l.filter(x=>x.status==="active").length,todayTasks:c.length,completedTasks:c.filter(x=>x.status==="completed").length,checkInsToday:d.length,checkOutsToday:u.length,averageOccupancy:l.length?Math.round(l.reduce((x,g)=>x+g.occupancyRate,0)/l.length):0,dailyRevenue:a.reduce((x,g)=>x+(g.totalAmount||0),0)};return n||i||o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(8)].map((x,g)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},g))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Daily Operations"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Today's overview - ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",children:[e.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Alerts"]}),e.jsxs(R,{children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),"Live Status"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Properties Active"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.activeProperties,"/",m.totalProperties]})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Tt,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Today's Tasks"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.completedTasks,"/",m.todayTasks]})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check-ins / Outs"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.checkInsToday," /"," ",m.checkOutsToday]})]}),e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(st,{className:"w-6 h-6 text-purple-600"})})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Occupancy"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.averageOccupancy,"%"]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Ot,{className:"w-6 h-6 text-yellow-600"})})]})})})]}),e.jsxs(ot,{defaultValue:"tasks",className:"space-y-4",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"tasks",children:"Today's Tasks"}),e.jsx(re,{value:"bookings",children:"Guest Activities"}),e.jsx(re,{value:"properties",children:"Property Status"}),e.jsx(re,{value:"alerts",children:"Alerts & Issues"})]}),e.jsx(ne,{value:"tasks",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Today's Tasks (",c.length,")"]})}),e.jsx(D,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"All tasks completed!"}),e.jsx("p",{className:"text-gray-600",children:"No pending tasks for today."})]}):e.jsx("div",{className:"space-y-3",children:c.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${x.status==="completed"?"bg-green-500":x.status==="in-progress"?"bg-blue-500":"bg-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[x.propertyName," • ",x.assignedTo]})]})]}),e.jsx(q,{variant:x.priority==="high"?"destructive":"secondary",children:x.priority})]},x.id))})})]})}),e.jsx(ne,{value:"bookings",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"text-green-600",children:["Today's Check-ins (",d.length,")"]})}),e.jsx(D,{children:d.length===0?e.jsx("p",{className:"text-gray-600",children:"No check-ins scheduled today"}):e.jsx("div",{className:"space-y-2",children:d.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.propertyName})]}),e.jsx(q,{variant:"outline",className:"text-green-600",children:new Date(x.checkIn).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.id))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"text-blue-600",children:["Today's Check-outs (",u.length,")"]})}),e.jsx(D,{children:u.length===0?e.jsx("p",{className:"text-gray-600",children:"No check-outs scheduled today"}):e.jsx("div",{className:"space-y-2",children:u.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.guestName}),e.jsx("p",{className:"text-sm text-gray-600",children:x.propertyName})]}),e.jsx(q,{variant:"outline",className:"text-blue-600",children:new Date(x.checkOut).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.id))})})]})]})}),e.jsx(ne,{value:"properties",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:l.map(x=>e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg",children:x.name}),e.jsx("div",{className:"mt-2 space-y-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Occupancy:"}),e.jsx(Gn,{value:x.occupancyRate,className:"w-20"}),e.jsxs("span",{className:"text-sm font-medium",children:[x.occupancyRate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm",children:["฿",x.revenue.toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[x.maintenanceIssues>0&&e.jsxs(q,{variant:"destructive",children:[x.maintenanceIssues," Issues"]}),e.jsx(q,{variant:x.status==="active"?"default":"secondary",children:x.status})]})]})})},x.id))})}),e.jsx(ne,{value:"alerts",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2 text-orange-600",children:[e.jsx(Nt,{className:"w-5 h-5"}),"Active Alerts & Issues"]})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-red-200 bg-red-50 rounded-lg",children:[e.jsx(Nt,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-red-800",children:"High Priority Task Overdue"}),e.jsx("p",{className:"text-sm text-red-600",children:"Pool maintenance at Villa Samui Breeze is 2 days overdue"})]}),e.jsx(q,{variant:"destructive",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-yellow-200 bg-yellow-50 rounded-lg",children:[e.jsx(Ke,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Upcoming Maintenance Due"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"AC service required at Villa Ocean View in 3 days"})]}),e.jsx(q,{variant:"outline",className:"text-yellow-600",children:"Warning"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-blue-200 bg-blue-50 rounded-lg",children:[e.jsx(st,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Guest Check-in Reminder"}),e.jsx("p",{className:"text-sm text-blue-600",children:"3 guests checking in today - ensure properties are ready"})]}),e.jsx(q,{variant:"outline",className:"text-blue-600",children:"Info"})]})]})})]})})]})]})}function jCe(){const[t,s]=j.useState("overview"),[r,n]=j.useState(""),a=[{id:1,name:"Appliance Repair Overdue",description:"Alert when appliance repairs are overdue by more than 24 hours",triggerType:"appliance_repair",alertLevel:"warning",isActive:!0,createdAt:new Date().toISOString()},{id:2,name:"Critical System Health",description:"Alert for critical system health issues requiring immediate attention",triggerType:"system_health",alertLevel:"critical",isActive:!0,createdAt:new Date().toISOString()},{id:3,name:"Booking Payment Overdue",description:"Alert when guest payment is overdue",triggerType:"booking_overdue",alertLevel:"warning",isActive:!1,createdAt:new Date().toISOString()}],i=[{id:1,message:"AC Unit #AC-001 repair overdue by 2 days",details:"Villa Samui Breeze - Central AC unit requires maintenance attention",triggerType:"appliance_repair",alertLevel:"warning",status:"pending",createdAt:new Date(Date.now()-864e5).toISOString()},{id:2,message:"Database connection issues detected",details:"System experiencing intermittent connectivity problems affecting booking system",triggerType:"system_health",alertLevel:"critical",status:"acknowledged",createdAt:new Date(Date.now()-36e5).toISOString()},{id:3,message:"Pool Pump #PP-003 maintenance scheduled",details:"Villa Tropical Paradise - Weekly pool pump maintenance due",triggerType:"property_maintenance",alertLevel:"warning",status:"resolved",createdAt:new Date(Date.now()-72e5).toISOString()}],l={totalAlerts:47,resolutionRate:87,pendingAlerts:i.filter(m=>m.status==="pending").length,criticalAlerts:i.filter(m=>m.alertLevel==="critical"&&m.status==="pending").length},o=m=>m==="pending"?e.jsx(q,{className:"bg-yellow-500",children:"Pending"}):m==="acknowledged"?e.jsx(q,{className:"bg-blue-500",children:"Acknowledged"}):m==="resolved"?e.jsx(q,{className:"bg-green-500",children:"Resolved"}):e.jsx(q,{className:"bg-gray-500",children:"Dismissed"}),c=m=>m==="critical"?e.jsx(q,{variant:"destructive",children:"Critical"}):e.jsx(q,{variant:"secondary",children:"Warning"}),d=m=>m==="appliance_repair"?e.jsx(Et,{className:"h-4 w-4"}):m==="booking_overdue"?e.jsx(Ke,{className:"h-4 w-4"}):m==="property_maintenance"?e.jsx(_t,{className:"h-4 w-4"}):m==="utility_bill"?e.jsx(Ot,{className:"h-4 w-4"}):m==="staff_task"?e.jsx(st,{className:"h-4 w-4"}):m==="guest_complaint"?e.jsx(Nt,{className:"h-4 w-4"}):m==="system_health"?e.jsx(Vs,{className:"h-4 w-4"}):e.jsx(Et,{className:"h-4 w-4"}),u=m=>new Date(m).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Alert Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and manage system alerts and notifications"})]}),e.jsxs(ot,{value:t,onValueChange:s,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"rules",children:"Alert Rules"}),e.jsx(re,{value:"logs",children:"Alert Logs"}),e.jsx(re,{value:"settings",children:"Settings"})]}),e.jsxs(ne,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-600",children:"Total Alerts"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.totalAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"All time"})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-600",children:"Pending Alerts"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.pendingAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"Requires attention"})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-600",children:"Critical Alerts"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.criticalAlerts}),e.jsx("p",{className:"text-xs text-gray-500",children:"Urgent action needed"})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm font-medium text-gray-600",children:"Resolution Rate"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[l.resolutionRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Last 30 days"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Recent Alerts"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:i.slice(0,5).map(m=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:d(m.triggerType)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.message}),e.jsx("p",{className:"text-sm text-gray-500",children:m.details})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[c(m.alertLevel),o(m.status)]}),e.jsx("div",{className:"text-sm text-gray-500",children:u(m.createdAt)})]},m.id))})})]})]}),e.jsxs(ne,{value:"rules",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Rules"}),e.jsxs(R,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]}),e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Name"}),e.jsx(Oe,{children:"Trigger Type"}),e.jsx(Oe,{children:"Alert Level"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:a.map(m=>e.jsxs(wt,{children:[e.jsx(Ae,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.name}),e.jsx("div",{className:"text-sm text-gray-500",children:m.description})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[d(m.triggerType),e.jsx("span",{className:"capitalize",children:m.triggerType.replace("_"," ")})]})}),e.jsx(Ae,{children:c(m.alertLevel)}),e.jsx(Ae,{children:e.jsx(q,{variant:m.isActive?"default":"secondary",children:m.isActive?"Active":"Inactive"})}),e.jsx(Ae,{children:u(m.createdAt)}),e.jsx(Ae,{children:e.jsx(R,{variant:"outline",size:"sm",children:"Edit"})})]},m.id))})]})})})]}),e.jsxs(ne,{value:"logs",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Logs"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(H,{placeholder:"Search alerts...",value:r,onChange:m=>n(m.target.value),className:"pl-10 w-64"})]})})]}),e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Alert"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Level"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:i.map(m=>e.jsxs(wt,{children:[e.jsx(Ae,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.message}),e.jsx("div",{className:"text-sm text-gray-500",children:m.details})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[d(m.triggerType),e.jsx("span",{className:"capitalize",children:m.triggerType.replace("_"," ")})]})}),e.jsx(Ae,{children:c(m.alertLevel)}),e.jsx(Ae,{children:o(m.status)}),e.jsx(Ae,{children:u(m.createdAt)}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex space-x-2",children:[m.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"outline",size:"sm",children:"Acknowledge"}),e.jsx(R,{variant:"outline",size:"sm",children:"Resolve"})]}),m.status==="acknowledged"&&e.jsx(R,{variant:"outline",size:"sm",children:"Resolve"})]})})]},m.id))})]})})})]}),e.jsxs(ne,{value:"settings",className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Alert Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Notification Preferences"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Email Notifications"}),e.jsx(q,{variant:"default",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"SMS Alerts"}),e.jsx(q,{variant:"secondary",children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Push Notifications"}),e.jsx(q,{variant:"default",children:"Enabled"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Alert Thresholds"})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Critical Alert Threshold"}),e.jsx("span",{className:"font-medium",children:"Immediate"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Warning Alert Threshold"}),e.jsx("span",{className:"font-medium",children:"5 minutes"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Auto-resolve After"}),e.jsx("span",{className:"font-medium",children:"24 hours"})]})]})]})]})]})]})]})})}function i$(){const{user:t}=vn(),[s,r]=j.useState("overview"),{data:n=[],isLoading:a}=ge({queryKey:["/api/properties"],staleTime:10*60*1e3}),{data:i=[],isLoading:l}=ge({queryKey:["/api/tasks"],staleTime:5*60*1e3}),{data:o=[],isLoading:c}=ge({queryKey:["/api/bookings"],staleTime:10*60*1e3}),{data:d=[],isLoading:u}=ge({queryKey:["/api/finance"],staleTime:10*60*1e3}),m=a||l||c||u,h=Array.isArray(i)?i.slice(0,5):[],x=Array.isArray(o)?o.slice(0,5):[],g=Array.isArray(d)?d.slice(0,5):[],p=new Map;Array.isArray(n)&&n.forEach(b=>{p.set(b.id,b.name)});const f=b=>{if(b==null)return"฿0";const y=typeof b=="string"?parseFloat(b):b;return`฿${(Number.isFinite(y)&&y>0?y:0).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})}`},v=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return m?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading dashboard..."})]})}):e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(Mi,{title:"Enhanced Admin Dashboard"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-slate-200/60",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-5xl font-extrabold text-slate-900 dark:text-slate-100 tracking-tight",children:"Enhanced Admin Dashboard"}),e.jsxs("p",{className:"text-slate-400 dark:text-slate-500 mt-3 text-lg font-medium",children:["Welcome back, ",t?.firstName||t?.email]})]}),e.jsxs(R,{onClick:()=>window.location.reload(),className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 px-6 py-3",children:[e.jsx(Xf,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-10",children:[e.jsx(O,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-emerald-100/50 hover:border-emerald-200 bg-gradient-to-br from-emerald-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Properties"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:n.length})]}),e.jsx("div",{className:"p-3 bg-emerald-100/80 rounded-xl",children:e.jsx(Tt,{className:"h-8 w-8 text-emerald-600"})})]})})}),e.jsx(O,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-teal-100/50 hover:border-teal-200 bg-gradient-to-br from-teal-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Active Tasks"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:i.length})]}),e.jsx("div",{className:"p-3 bg-teal-100/80 rounded-xl",children:e.jsx(vd,{className:"h-8 w-8 text-teal-600"})})]})})}),e.jsx(O,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-cyan-100/50 hover:border-cyan-200 bg-gradient-to-br from-cyan-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Bookings"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:o.length})]}),e.jsx("div",{className:"p-3 bg-cyan-100/80 rounded-xl",children:e.jsx(We,{className:"h-8 w-8 text-cyan-600"})})]})})}),e.jsx(O,{className:"rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300 border-2 border-green-100/50 hover:border-green-200 bg-gradient-to-br from-green-50/30 to-white cursor-pointer",children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-400",children:"Finances"}),e.jsx("p",{className:"text-3xl font-extrabold text-slate-800 mt-2",children:d.length})]}),e.jsx("div",{className:"p-3 bg-green-100/80 rounded-xl",children:e.jsx(He,{className:"h-8 w-8 text-green-600"})})]})})})]}),e.jsxs(ot,{value:s,onValueChange:r,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4 bg-slate-100/60 rounded-xl p-1 shadow-inner",children:[e.jsx(re,{value:"overview",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Overview"}),e.jsx(re,{value:"tasks",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Tasks"}),e.jsx(re,{value:"bookings",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Bookings"}),e.jsx(re,{value:"finances",className:"rounded-lg font-semibold data-[state=active]:bg-emerald-500 data-[state=active]:text-white data-[state=active]:shadow-md transition-all duration-200",children:"Finances"})]}),e.jsx(ne,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(O,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-emerald-100/50",children:[e.jsx(_,{className:"pb-4 px-6 pt-6",children:e.jsxs($,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-emerald-100/80 rounded-lg",children:e.jsx(Tt,{className:"h-6 w-6 text-emerald-600"})}),"Properties (",n.length,")"]})}),e.jsxs(D,{className:"space-y-4 px-6 pb-6",children:[n.slice(0,4).map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-emerald-50/50 to-slate-50/80 rounded-lg border border-emerald-100/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:b.name}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[b.bedrooms," BR"]})]}),e.jsx(q,{variant:b.status==="active"?"default":"secondary",className:b.status==="active"?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600 border-slate-200",children:b.status})]},b.id)),n.length>4&&e.jsxs("p",{className:"text-sm text-center text-slate-500 pt-2 font-medium",children:["+",n.length-4," more properties"]})]})]}),e.jsxs(O,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-teal-100/50",children:[e.jsx(_,{className:"pb-4 px-6 pt-6",children:e.jsxs($,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-teal-100/80 rounded-lg",children:e.jsx(vd,{className:"h-6 w-6 text-teal-600"})}),"Recent Tasks"]})}),e.jsx(D,{className:"space-y-4 px-6 pb-6",children:h.map(b=>e.jsxs("div",{className:"space-y-3 p-4 bg-gradient-to-r from-teal-50/50 to-slate-50/80 rounded-lg border border-teal-100/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:b.title}),e.jsx(R,{size:"sm",className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg transition-all duration-300 hover:scale-110 p-2",children:e.jsx(Xf,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{variant:"outline",className:"text-xs",children:b.status}),e.jsx(q,{variant:"outline",className:"text-xs",children:b.priority})]}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:["Due: ",v(b.dueDate)]})]},b.id))})]}),e.jsxs(O,{className:"rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-cyan-100/50",children:[e.jsx(_,{className:"pb-4 px-6 pt-6",children:e.jsxs($,{className:"text-xl font-bold flex items-center gap-3 text-slate-800",children:[e.jsx("div",{className:"p-2 bg-cyan-100/80 rounded-lg",children:e.jsx(We,{className:"h-6 w-6 text-cyan-600"})}),"Recent Bookings"]})}),e.jsx(D,{className:"space-y-4 px-6 pb-6",children:x.map(b=>{const y=p.get(b.propertyId)||`Property #${b.propertyId}`,S=b.totalAmount||b.guestTotalPrice||b.platformPayout||b.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-cyan-50/50 to-slate-50/80 rounded-lg border border-cyan-100/30",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-slate-800",children:b.guestName}),e.jsx("p",{className:"text-xs text-cyan-600 font-semibold",children:y}),e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[v(b.checkInDate||b.checkIn)," - ",v(b.checkOutDate||b.checkOut)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-sm text-slate-800",children:f(S)}),e.jsx(q,{variant:b.status==="confirmed"?"default":"secondary",className:b.status==="confirmed"?"bg-emerald-100 text-emerald-700 border-emerald-200":"bg-slate-100 text-slate-600 border-slate-200",children:b.status})]})]},b.id)})})]})]})}),e.jsx(ne,{value:"tasks",className:"space-y-6",children:e.jsxs(O,{className:"rounded-xl shadow-lg border-2 border-teal-100/50",children:[e.jsx(_,{className:"pb-4 px-6 pt-6",children:e.jsxs($,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-100/80 rounded-lg",children:e.jsx(vd,{className:"h-6 w-6 text-teal-600"})}),"All Tasks"]})}),e.jsx(D,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:Array.isArray(i)&&i.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-teal-50/50 to-slate-50/80 rounded-xl border-2 border-teal-100/30 hover:border-teal-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b.title}),e.jsx(q,{variant:"outline",className:"bg-emerald-100/80 text-emerald-700 border-emerald-200 font-semibold",children:b.type})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(q,{variant:"outline",className:"text-xs",children:b.status}),e.jsx(q,{variant:"outline",className:"text-xs",children:b.priority})]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Assigned to: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:b.assignedTo})," | Due: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:v(b.dueDate)})]})]}),e.jsx(R,{size:"sm",className:"rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white shadow-md hover:shadow-lg transition-all duration-300 hover:scale-110 p-3",children:e.jsx(Xf,{className:"h-5 w-5"})})]},b.id))})})]})}),e.jsx(ne,{value:"bookings",className:"space-y-6",children:e.jsxs(O,{className:"rounded-xl shadow-lg border-2 border-cyan-100/50",children:[e.jsx(_,{className:"pb-4 px-6 pt-6",children:e.jsxs($,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-cyan-100/80 rounded-lg",children:e.jsx(We,{className:"h-6 w-6 text-cyan-600"})}),"All Bookings"]})}),e.jsx(D,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:Array.isArray(o)&&o.map(b=>{const y=p.get(b.propertyId)||`Property #${b.propertyId}`,S=b.totalAmount||b.guestTotalPrice||b.platformPayout||b.netHostPayout||0;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-cyan-50/50 to-slate-50/80 rounded-xl border-2 border-cyan-100/30 hover:border-cyan-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b.guestName}),e.jsx(q,{variant:b.status==="confirmed"?"default":"secondary",className:b.status==="confirmed"?"bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold":b.status==="pending"?"bg-amber-100 text-amber-700 border-amber-200 font-semibold":"bg-slate-100 text-slate-600 border-slate-200 font-semibold",children:b.status})]}),e.jsxs("p",{className:"text-sm text-cyan-600 font-bold mb-2",children:["Property: ",y]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[v(b.checkInDate||b.checkIn)," - ",v(b.checkOutDate||b.checkOut)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-xl text-slate-800 mb-1",children:f(S)}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:b.source||"Direct"})]})]},b.id)})})})]})}),e.jsx(ne,{value:"finances",className:"space-y-6",children:e.jsxs(O,{className:"rounded-xl shadow-lg border-2 border-green-100/50",children:[e.jsx(_,{className:"pb-4 px-6 pt-6",children:e.jsxs($,{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100/80 rounded-lg",children:e.jsx(He,{className:"h-6 w-6 text-green-600"})}),"Recent Financial Activity"]})}),e.jsx(D,{className:"px-6 pb-6",children:e.jsx("div",{className:"space-y-4",children:g.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50/50 to-slate-50/80 rounded-xl border-2 border-green-100/30 hover:border-green-200/50 transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:b.description}),e.jsx(q,{variant:b.type==="income"?"default":b.type==="expense"?"destructive":"secondary",className:b.type==="income"?"bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold":b.type==="expense"?"bg-red-100 text-red-700 border-red-200 font-semibold":"bg-slate-100 text-slate-600 border-slate-200 font-semibold",children:b.type})]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[e.jsx("span",{className:"text-slate-700 font-semibold",children:v(b.date)})," | Property: ",e.jsx("span",{className:"text-slate-700 font-semibold",children:b.propertyName||"General"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-bold text-xl mb-1 ${b.type==="income"?"text-emerald-600":b.type==="expense"?"text-red-600":"text-slate-600"}`,children:[b.type==="expense"?"-":"+",f(b.amount)]})})]},b.id))})})]})})]})]})]})})}const vCe=Object.freeze(Object.defineProperty({__proto__:null,default:i$},Symbol.toStringTag,{value:"Module"}));function l$(){const{toast:t}=Xe(),[s,r]=j.useState(!1),[n,a]=j.useState({commissionAutomation:!0,utilityAlerts:!0,lastRun:{commissionCheck:"2025-01-26 09:00:00",utilityCheck:"2025-01-26 09:00:00"},alerts:[]}),i=async()=>{r(!0);try{const d=(await fe("POST","/api/automation/test-commission")).data||{};t({title:"Commission Test Complete",description:`Processed ${d.processed||0} bookings`})}catch{t({title:"Test Failed",description:"Could not run commission automation test",variant:"destructive"})}finally{r(!1)}},l=async()=>{r(!0);try{const d=(await fe("POST","/api/automation/test-utility-alerts")).data||{};t({title:"Utility Alert Test Complete",description:`Generated ${d.alerts||0} alerts`})}catch{t({title:"Test Failed",description:"Could not run utility alerts test",variant:"destructive"})}finally{r(!1)}},o=async()=>{r(!0);try{const d=(await fe("GET","/api/automation/status")).data||{};a(d),t({title:"Status Updated",description:"Automation status refreshed"})}catch{t({title:"Status Check Failed",description:"Could not get automation status",variant:"destructive"})}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Lt,{className:"h-8 w-8 text-blue-600"}),"Automation Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Monitor and control commission automation and utility alert systems"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Commission Automation"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.commissionAutomation?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-red-600",children:"Inactive"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Real-time processing"})]}),e.jsx(q,{variant:n.commissionAutomation?"default":"destructive",children:n.commissionAutomation?"Live":"Stopped"})]})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Vs,{className:"h-4 w-4"}),"Utility Alerts"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.utilityAlerts?e.jsx("span",{className:"text-green-600",children:"Active"}):e.jsx("span",{className:"text-red-600",children:"Inactive"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Daily 9:00 AM checks"})]}),e.jsx(q,{variant:n.utilityAlerts?"default":"destructive",children:n.utilityAlerts?"Live":"Stopped"})]})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"System Health"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Healthy"}),e.jsx("p",{className:"text-xs text-gray-500",children:"All systems operational"})]}),e.jsx(Me,{className:"h-6 w-6 text-green-500"})]})})]})]}),e.jsxs(O,{className:"mb-8",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Eo,{className:"h-5 w-5"}),"Manual Testing & Controls"]})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(R,{onClick:i,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Test Commission Automation"]}),e.jsxs(R,{onClick:l,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"h-4 w-4"}),"Test Utility Alerts"]}),e.jsxs(R,{onClick:o,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"Refresh Status"]})]})})]}),e.jsxs(O,{className:"mb-8",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Last Run Information"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Commission Processing"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last Run: ",n.lastRun.commissionCheck]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Runs automatically on booking confirmations"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Utility Alert Check"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last Run: ",n.lastRun.utilityCheck]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Runs daily at 9:00 AM + weekly Monday reviews"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-5 w-5"}),"Current Alerts (",n.alerts?.length||0,")"]})}),e.jsx(D,{children:!n.alerts||n.alerts.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Active Alerts"}),e.jsx("p",{className:"text-gray-600",children:"All automation systems are running smoothly."})]}):e.jsx("div",{className:"space-y-4",children:n.alerts.map(c=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nt,{className:"h-5 w-5 text-amber-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.type}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:c.createdAt})]})]}),e.jsx(q,{variant:c.severity==="high"?"destructive":"secondary",children:c.severity})]})},c.id))})})]}),e.jsx(Gr,{className:"my-8"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"Automation systems powered by node-cron scheduling"}),e.jsx("p",{className:"mt-1",children:"Commission: 10% rates • Utility alerts: Daily checks • Auto-payouts: ฿5,000 threshold"})]})]})})}const yCe=Object.freeze(Object.defineProperty({__proto__:null,default:l$},Symbol.toStringTag,{value:"Module"})),bCe=Qt({baseCurrency:Ne().length(3,"Currency code must be 3 characters"),targetCurrency:Ne().length(3,"Currency code must be 3 characters"),rate:Zt().positive("Rate must be positive")}),NCe=Qt({region:Ne().min(1,"Region is required"),vatRate:Zt().min(0).max(100).optional(),gstRate:Zt().min(0).max(100).optional(),whtRate:Zt().min(0).max(100).optional()}),wCe=Qt({amount:Zt().positive("Amount must be positive"),from:Ne().length(3,"Currency code must be 3 characters"),to:Ne().length(3,"Currency code must be 3 characters")}),SCe=Qt({amount:Zt().positive("Amount must be positive"),region:Ne().min(1,"Region is required"),taxType:Cs(["vat","gst","wht"])});function CCe(){const{toast:t}=Xe(),[s,r]=j.useState("rates"),[n,a]=j.useState(!1),[i,l]=j.useState([]),[o,c]=j.useState([]),[d,u]=j.useState(null),[m,h]=j.useState(null),x=Ft({resolver:es(bCe),defaultValues:{baseCurrency:"",targetCurrency:"",rate:0}}),g=Ft({resolver:es(NCe),defaultValues:{region:"",vatRate:void 0,gstRate:void 0,whtRate:void 0}}),p=Ft({resolver:es(wCe),defaultValues:{amount:0,from:"",to:""}}),f=Ft({resolver:es(SCe),defaultValues:{amount:0,region:"",taxType:"vat"}}),v=async()=>{a(!0);try{const[A,N]=await Promise.all([fe("GET","/api/currency/rates"),fe("GET","/api/tax/rules")]);l(A.data||[]),c(N.data||[])}catch{t({title:"Error",description:"Failed to fetch data",variant:"destructive"})}finally{a(!1)}};j.useEffect(()=>{v()},[]);const b=async A=>{try{await fe("PUT",`/api/currency/rates/${A.baseCurrency}/${A.targetCurrency}`,{rate:A.rate}),t({title:"Success",description:"Currency rate updated successfully"}),x.reset(),v()}catch{t({title:"Error",description:"Failed to update currency rate",variant:"destructive"})}},y=async A=>{try{await fe("PUT",`/api/tax/rules/${A.region}`,A),t({title:"Success",description:"Tax rule updated successfully"}),g.reset(),v()}catch{t({title:"Error",description:"Failed to update tax rule",variant:"destructive"})}},S=async A=>{try{const N=await fe("POST","/api/currency/convert",A);u(N.data),t({title:"Conversion Complete",description:`${A.amount} ${A.from} = ${N.data.convertedAmount.toFixed(2)} ${A.to}`})}catch{t({title:"Error",description:"Failed to convert currency",variant:"destructive"})}},w=async A=>{try{const N=await fe("POST","/api/tax/calculate",A);h(N.data),t({title:"Tax Calculated",description:`Tax: ${N.data.taxAmount.toFixed(2)} (${N.data.rate}%)`})}catch{t({title:"Error",description:"Failed to calculate tax",variant:"destructive"})}},C=["THB","USD","EUR","GBP"],k=["thailand","singapore","usa","uk","australia","default"];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(He,{className:"h-8 w-8 text-green-600"}),"Currency & Tax Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Multi-currency support and international tax compliance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(sa,{className:"h-4 w-4"}),"Currency Rates"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Exchange rate pairs"})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Tax Regions"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Configured regions"})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Base Currency"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"THB"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Thai Baht"})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx(yo,{className:"h-4 w-4"}),"Multi-Currency"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"Active"}),e.jsx("p",{className:"text-xs text-gray-500",children:"System enabled"})]})]})]}),e.jsxs(ot,{value:s,onValueChange:r,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"rates",children:"Exchange Rates"}),e.jsx(re,{value:"taxes",children:"Tax Rules"}),e.jsx(re,{value:"convert",children:"Currency Converter"}),e.jsx(re,{value:"calculate",children:"Tax Calculator"})]}),e.jsxs(ne,{value:"rates",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Currency Exchange Rates"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{onClick:v,variant:"outline",size:"sm",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{size:"sm",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Rate"]})}),e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Add/Update Currency Rate"})}),e.jsx(Wt,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(b),className:"space-y-4",children:[e.jsx(de,{control:x.control,name:"baseCurrency",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Base Currency"}),e.jsxs(te,{onValueChange:A.onChange,defaultValue:A.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select base currency"})})}),e.jsx(ee,{children:C.map(N=>e.jsx(P,{value:N,children:N},N))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:x.control,name:"targetCurrency",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Target Currency"}),e.jsxs(te,{onValueChange:A.onChange,defaultValue:A.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select target currency"})})}),e.jsx(ee,{children:C.map(N=>e.jsx(P,{value:N,children:N},N))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:x.control,name:"rate",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Exchange Rate"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.000001",placeholder:"1.234567",...A,onChange:N=>A.onChange(parseFloat(N.target.value))})}),e.jsx(xe,{})]})}),e.jsx(R,{type:"submit",className:"w-full",children:"Update Rate"})]})})]})]})]})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"From"}),e.jsx(Oe,{children:"To"}),e.jsx(Oe,{children:"Rate"}),e.jsx(Oe,{children:"Last Updated"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:i.map(A=>e.jsxs(wt,{children:[e.jsx(Ae,{children:e.jsx(q,{variant:"outline",children:A.baseCurrency})}),e.jsx(Ae,{children:e.jsx(q,{variant:"outline",children:A.targetCurrency})}),e.jsx(Ae,{className:"font-mono",children:parseFloat(A.rate).toFixed(6)}),e.jsx(Ae,{className:"text-gray-500",children:new Date(A.updatedAt).toLocaleDateString()}),e.jsx(Ae,{children:e.jsx(R,{variant:"ghost",size:"sm",children:e.jsx(Or,{className:"h-4 w-4"})})})]},`${A.baseCurrency}-${A.targetCurrency}`))})]})})})]}),e.jsxs(ne,{value:"taxes",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Tax Rules by Region"}),e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{size:"sm",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Tax Rule"]})}),e.jsxs(qe,{children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Add/Update Tax Rule"})}),e.jsx(Wt,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(y),className:"space-y-4",children:[e.jsx(de,{control:g.control,name:"region",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Region"}),e.jsxs(te,{onValueChange:A.onChange,defaultValue:A.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select region"})})}),e.jsx(ee,{children:k.map(N=>e.jsx(P,{value:N,children:N.charAt(0).toUpperCase()+N.slice(1)},N))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:g.control,name:"vatRate",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"VAT Rate (%)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",placeholder:"7.00",...A,onChange:N=>A.onChange(N.target.value?parseFloat(N.target.value):void 0)})}),e.jsx(xe,{})]})}),e.jsx(de,{control:g.control,name:"gstRate",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"GST Rate (%)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",placeholder:"8.00",...A,onChange:N=>A.onChange(N.target.value?parseFloat(N.target.value):void 0)})}),e.jsx(xe,{})]})}),e.jsx(de,{control:g.control,name:"whtRate",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"WHT Rate (%)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",placeholder:"3.00",...A,onChange:N=>A.onChange(N.target.value?parseFloat(N.target.value):void 0)})}),e.jsx(xe,{})]})}),e.jsx(R,{type:"submit",className:"w-full",children:"Update Tax Rule"})]})})]})]})]}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Region"}),e.jsx(Oe,{children:"VAT Rate"}),e.jsx(Oe,{children:"GST Rate"}),e.jsx(Oe,{children:"WHT Rate"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsx(Hs,{children:o.map(A=>e.jsxs(wt,{children:[e.jsx(Ae,{children:e.jsx(q,{variant:"secondary",children:A.region.charAt(0).toUpperCase()+A.region.slice(1)})}),e.jsx(Ae,{children:A.vatRate?`${A.vatRate}%`:"—"}),e.jsx(Ae,{children:A.gstRate?`${A.gstRate}%`:"—"}),e.jsx(Ae,{children:A.whtRate?`${A.whtRate}%`:"—"}),e.jsx(Ae,{children:e.jsx(R,{variant:"ghost",size:"sm",children:e.jsx(Or,{className:"h-4 w-4"})})})]},A.region))})]})})})]}),e.jsx(ne,{value:"convert",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Currency Converter"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(Wt,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(S),className:"space-y-4",children:[e.jsx(de,{control:p.control,name:"amount",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Amount"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",placeholder:"1000",...A,onChange:N=>A.onChange(parseFloat(N.target.value))})}),e.jsx(xe,{})]})}),e.jsx(de,{control:p.control,name:"from",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"From Currency"}),e.jsxs(te,{onValueChange:A.onChange,defaultValue:A.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select currency"})})}),e.jsx(ee,{children:C.map(N=>e.jsx(P,{value:N,children:N},N))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:p.control,name:"to",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"To Currency"}),e.jsxs(te,{onValueChange:A.onChange,defaultValue:A.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select currency"})})}),e.jsx(ee,{children:C.map(N=>e.jsx(P,{value:N,children:N},N))})]}),e.jsx(xe,{})]})}),e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(yo,{className:"h-4 w-4 mr-2"}),"Convert"]})]})}),d&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Conversion Result"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[d.convertedAmount.toFixed(2)," ",d.to]}),e.jsxs("div",{className:"text-gray-600",children:[d.amount," ",d.from]})]}),e.jsx(Gr,{}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Exchange Rate"}),e.jsxs("div",{className:"font-mono text-lg",children:["1 ",d.from," = ",d.rate," ",d.to]})]})]})})]})]})})]})}),e.jsx(ne,{value:"calculate",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Tax Calculator"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(Wt,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(w),className:"space-y-4",children:[e.jsx(de,{control:f.control,name:"amount",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Amount"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",placeholder:"10000",...A,onChange:N=>A.onChange(parseFloat(N.target.value))})}),e.jsx(xe,{})]})}),e.jsx(de,{control:f.control,name:"region",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Region"}),e.jsxs(te,{onValueChange:A.onChange,defaultValue:A.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select region"})})}),e.jsx(ee,{children:k.map(N=>e.jsx(P,{value:N,children:N.charAt(0).toUpperCase()+N.slice(1)},N))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:f.control,name:"taxType",render:({field:A})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Tax Type"}),e.jsxs(te,{onValueChange:A.onChange,defaultValue:A.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select tax type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"vat",children:"VAT"}),e.jsx(P,{value:"gst",children:"GST"}),e.jsx(P,{value:"wht",children:"WHT"})]})]}),e.jsx(xe,{})]})}),e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(yo,{className:"h-4 w-4 mr-2"}),"Calculate Tax"]})]})}),m&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{className:"text-lg",children:"Tax Calculation Result"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Original Amount"}),e.jsxs("div",{className:"text-lg font-semibold",children:["฿",m.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[m.taxType.toUpperCase()," (",m.rate,"%)"]}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["฿",m.taxAmount.toLocaleString()]})]}),e.jsx(Gr,{}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["฿",m.totalAmount.toLocaleString()]})]})]})})]})]})})]})})]}),e.jsx(Gr,{className:"my-8"}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Multi-currency system for international property management"})]}),e.jsx("p",{children:"Exchange rates updated automatically • Tax compliance for multiple regions"})]})]})})}const PCe=Qt({guestId:Ne().min(1,"Guest ID is required"),propertyId:Zt().min(1,"Property selection is required"),recommendationType:Cs(["extra_cleaning","private_chef","spa_service","tour_guide","grocery_delivery","laundry_service","transportation","other"]),message:Ne().min(10,"Message must be at least 10 characters"),status:Cs(["pending","sent","accepted","declined","expired"]).default("pending")}),kCe={pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",accepted:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"},CA={extra_cleaning:"🧹",private_chef:"👨‍🍳",spa_service:"💆‍♀️",tour_guide:"🗺️",grocery_delivery:"🛒",laundry_service:"👕",transportation:"🚗",other:"✨"};function ACe(){const[t,s]=j.useState(""),[r,n]=j.useState(),[a,i]=j.useState(),[l,o]=j.useState(),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(null),g=ut(),{toast:p}=Xe(),{data:f=[],isLoading:v}=ge({queryKey:["/api/upsell-recommendations",{propertyId:r,recommendationType:a,status:l,search:t}],queryFn:()=>{const E=new URLSearchParams;return r&&E.append("propertyId",r.toString()),a&&E.append("recommendationType",a),l&&E.append("status",l),t&&E.append("q",t),fetch(`/api/upsell-recommendations${t?"/search":""}?${E}`).then(G=>G.json())}}),{data:b=[]}=ge({queryKey:["/api/properties"],queryFn:()=>fetch("/api/properties").then(E=>E.json())}),{data:y}=ge({queryKey:["/api/upsell-recommendations/analytics"],queryFn:()=>fetch("/api/upsell-recommendations/analytics").then(E=>E.json())}),{data:S=[]}=ge({queryKey:["/api/upsell-recommendations/types"],queryFn:()=>fetch("/api/upsell-recommendations/types").then(E=>E.json())}),w=Ft({resolver:es(PCe),defaultValues:{guestId:"",propertyId:void 0,recommendationType:"extra_cleaning",message:"",status:"pending"}}),C=Ce({mutationFn:E=>fe("POST","/api/upsell-recommendations",E),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),g.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),g.invalidateQueries({queryKey:["/api/upsell-recommendations/types"]}),d(!1),w.reset(),p({title:"Success",description:"Upsell recommendation created successfully"})},onError:E=>{p({title:"Error",description:E.message||"Failed to create recommendation",variant:"destructive"})}}),k=Ce({mutationFn:({id:E,data:G})=>fe("PUT",`/api/upsell-recommendations/${E}`,G),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),g.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),m(!1),x(null),p({title:"Success",description:"Recommendation updated successfully"})},onError:E=>{p({title:"Error",description:E.message||"Failed to update recommendation",variant:"destructive"})}}),A=Ce({mutationFn:E=>fe("DELETE",`/api/upsell-recommendations/${E}`),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),g.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),p({title:"Success",description:"Recommendation deleted successfully"})},onError:E=>{p({title:"Error",description:E.message||"Failed to delete recommendation",variant:"destructive"})}}),N=Ce({mutationFn:({guestId:E,propertyId:G})=>fe("POST","/api/upsell-recommendations/generate",{guestId:E,propertyId:G}),onSuccess:E=>{g.invalidateQueries({queryKey:["/api/upsell-recommendations"]}),g.invalidateQueries({queryKey:["/api/upsell-recommendations/analytics"]}),p({title:"Success",description:`Generated ${E.recommendations?.length||0} smart recommendations with ฿${E.totalEstimatedValue?.toLocaleString()} potential value`})},onError:E=>{p({title:"Error",description:E.message||"Failed to generate recommendations",variant:"destructive"})}}),M=E=>{C.mutate(E)},F=E=>{x(E),m(!0)},I=(E,G)=>{k.mutate({id:E,data:{status:G}})},V=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Upsell Recommendations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage guest service recommendations and track conversion rates"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(Ve,{open:c,onOpenChange:d,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(ht,{className:"mr-2 h-4 w-4"}),"New Recommendation"]})}),e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create Upsell Recommendation"}),e.jsx(Pt,{children:"Create targeted service recommendations for guests"})]}),e.jsx(Wt,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(M),className:"space-y-4",children:[e.jsx(de,{control:w.control,name:"guestId",render:({field:E})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest ID"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Enter guest identifier",...E})}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"propertyId",render:({field:E})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Property"}),e.jsxs(te,{onValueChange:G=>E.onChange(parseInt(G)),value:E.value?.toString(),children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})})}),e.jsx(ee,{children:b.map(G=>e.jsx(P,{value:G.id.toString(),children:G.name},G.id))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"recommendationType",render:({field:E})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Recommendation Type"}),e.jsxs(te,{onValueChange:E.onChange,value:E.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select service type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"extra_cleaning",children:"🧹 Extra Cleaning"}),e.jsx(P,{value:"private_chef",children:"👨‍🍳 Private Chef"}),e.jsx(P,{value:"spa_service",children:"💆‍♀️ Spa Service"}),e.jsx(P,{value:"tour_guide",children:"🗺️ Tour Guide"}),e.jsx(P,{value:"grocery_delivery",children:"🛒 Grocery Delivery"}),e.jsx(P,{value:"laundry_service",children:"👕 Laundry Service"}),e.jsx(P,{value:"transportation",children:"🚗 Transportation"}),e.jsx(P,{value:"other",children:"✨ Other Service"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"message",render:({field:E})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Recommendation Message"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Describe the service offering and benefits...",className:"min-h-[80px]",...E})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(R,{type:"submit",disabled:C.isPending,children:[C.isPending&&e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Recommendation"]})]})]})})]})]})})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(it,{children:[e.jsx(re,{value:"overview",children:"📊 Overview"}),e.jsx(re,{value:"recommendations",children:"📋 Recommendations"}),e.jsx(re,{value:"analytics",children:"📈 Analytics"}),e.jsx(re,{value:"types",children:"🎯 Service Types"})]}),e.jsxs(ne,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Recommendations"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y?.totalRecommendations||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time recommendations"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Conversion Rate"}),e.jsx(dr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[y?.conversionRate||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted vs declined"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Unique Guests"}),e.jsx(st,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y?.uniqueGuests||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests with recommendations"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending"}),e.jsx(qs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y?.pendingCount||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting guest response"})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Quick Actions"}),e.jsx(Te,{children:"Generate AI-powered recommendations for your guests"})]}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Generate personalized recommendations based on guest preferences and property amenities"})}),e.jsxs(R,{onClick:()=>N.mutate({guestId:"guest-demo-123",propertyId:b[0]?.id}),disabled:N.isPending||!b.length,children:[N.isPending&&e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(us,{className:"mr-2 h-4 w-4"}),"Generate Smart Recommendations"]})]})})]})]}),e.jsxs(ne,{value:"recommendations",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(H,{placeholder:"Search recommendations...",value:t,onChange:E=>s(E.target.value),className:"max-w-sm"}),e.jsxs(te,{value:r?.toString()||"",onValueChange:E=>n(E?parseInt(E):void 0),children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Properties"}),b.map(E=>e.jsx(P,{value:E.id.toString(),children:E.name},E.id))]})]}),e.jsxs(te,{value:a||"",onValueChange:i,children:[e.jsx(J,{className:"w-[180px]",children:e.jsx(se,{placeholder:"All Types"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Types"}),e.jsx(P,{value:"extra_cleaning",children:"Extra Cleaning"}),e.jsx(P,{value:"private_chef",children:"Private Chef"}),e.jsx(P,{value:"spa_service",children:"Spa Service"}),e.jsx(P,{value:"tour_guide",children:"Tour Guide"}),e.jsx(P,{value:"grocery_delivery",children:"Grocery Delivery"}),e.jsx(P,{value:"laundry_service",children:"Laundry Service"}),e.jsx(P,{value:"transportation",children:"Transportation"}),e.jsx(P,{value:"other",children:"Other"})]})]}),e.jsxs(te,{value:l||"",onValueChange:o,children:[e.jsx(J,{className:"w-[150px]",children:e.jsx(se,{placeholder:"All Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"sent",children:"Sent"}),e.jsx(P,{value:"accepted",children:"Accepted"}),e.jsx(P,{value:"declined",children:"Declined"}),e.jsx(P,{value:"expired",children:"Expired"})]})]})]}),e.jsx(O,{children:e.jsx(D,{className:"p-0",children:v?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(ts,{className:"h-8 w-8 animate-spin"})}):e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Guest"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Service Type"}),e.jsx(Oe,{children:"Message"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Created"}),e.jsx(Oe,{children:"Days Since"}),e.jsx(Oe,{className:"text-right",children:"Actions"})]})}),e.jsx(Hs,{children:f.map(E=>e.jsxs(wt,{children:[e.jsx(Ae,{className:"font-medium",children:E.guestName||E.guestId}),e.jsx(Ae,{children:E.propertyName}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:CA[E.recommendationType]}),e.jsx("span",{className:"capitalize",children:E.recommendationType?.replace("_"," ")})]})}),e.jsx(Ae,{className:"max-w-xs truncate",children:E.message}),e.jsxs(Ae,{children:[e.jsx(q,{className:kCe[E.status],children:E.status}),E.isExpired&&e.jsx(q,{variant:"destructive",className:"ml-1",children:"Expired"})]}),e.jsx(Ae,{children:V(E.createdAt)}),e.jsxs(Ae,{children:[E.daysSinceCreated," days"]}),e.jsx(Ae,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>F(E),children:e.jsx(Or,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>A.mutate(E.id),disabled:A.isPending,children:e.jsx(Er,{className:"h-4 w-4"})}),E.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>I(E.id,"sent"),children:"Send"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>I(E.id,"accepted"),children:"Accept"})]})]})})]},E.id))})]})})})]}),e.jsx(ne,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Status Distribution"}),e.jsx(Te,{children:"Breakdown of recommendation statuses"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pending"}),e.jsx("span",{className:"font-medium",children:y?.pendingCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sent"}),e.jsx("span",{className:"font-medium",children:y?.sentCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Accepted"}),e.jsx("span",{className:"font-medium text-green-600",children:y?.acceptedCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Declined"}),e.jsx("span",{className:"font-medium text-red-600",children:y?.declinedCount||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Expired"}),e.jsx("span",{className:"font-medium text-gray-600",children:y?.expiredCount||0})]})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Performance Metrics"}),e.jsx(Te,{children:"Key performance indicators"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Conversion Rate"}),e.jsxs("span",{className:"font-medium",children:[y?.conversionRate||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg. Recommendations/Guest"}),e.jsx("span",{className:"font-medium",children:y?.avgRecommendationsPerGuest||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Properties"}),e.jsx("span",{className:"font-medium",children:y?.uniqueProperties||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Guests"}),e.jsx("span",{className:"font-medium",children:y?.uniqueGuests||0})]})]})})]})]})}),e.jsx(ne,{value:"types",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Service Type Performance"}),e.jsx(Te,{children:"Analyze conversion rates by recommendation type"})]}),e.jsx(D,{children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Service Type"}),e.jsx(Oe,{children:"Total"}),e.jsx(Oe,{children:"Pending"}),e.jsx(Oe,{children:"Accepted"}),e.jsx(Oe,{children:"Declined"}),e.jsx(Oe,{children:"Conversion Rate"})]})}),e.jsx(Hs,{children:S.map(E=>e.jsxs(wt,{children:[e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:CA[E.recommendationType]}),e.jsx("span",{className:"capitalize",children:E.recommendationType?.replace("_"," ")})]})}),e.jsx(Ae,{children:E.recommendationCount}),e.jsx(Ae,{children:E.pendingCount}),e.jsx(Ae,{className:"text-green-600",children:E.acceptedCount}),e.jsx(Ae,{className:"text-red-600",children:E.declinedCount}),e.jsx(Ae,{children:e.jsxs(q,{variant:E.conversionRate>50?"default":"secondary",children:[E.conversionRate,"%"]})})]},E.recommendationType))})]})})]})})]}),e.jsx(Ve,{open:u,onOpenChange:m,children:e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Update Recommendation"}),e.jsx(Pt,{children:"Modify recommendation details and status"})]}),h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(te,{value:h.status,onValueChange:E=>I(h.id,E),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"sent",children:"Sent"}),e.jsx(P,{value:"accepted",children:"Accepted"}),e.jsx(P,{value:"declined",children:"Declined"}),e.jsx(P,{value:"expired",children:"Expired"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx(R,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})})]})]})})]})}function TCe({className:t}){const[s,r]=j.useState([{id:"1",type:"bot",content:"👨‍✈️ Hello! I'm Captain Cortex – your smart co-pilot for property management, powered by HostPilotPro. Ready to navigate tasks, finances, and data with you!",timestamp:new Date}]),[n,a]=j.useState(""),i=j.useRef(null);ut();const{data:l=[]}=ge({queryKey:["/api/ai-bot/suggestions"],staleTime:1e3*60*10}),o=Ce({mutationFn:async m=>await fe("/api/ai-bot/query",{method:"POST",body:{question:m}}),onSuccess:(m,h)=>{r(x=>[...x.filter(p=>!p.isLoading),{id:Date.now().toString(),type:"bot",content:m.response,timestamp:new Date}])},onError:m=>{r(h=>[...h.filter(g=>!g.isLoading),{id:Date.now().toString(),type:"bot",content:"I apologize, but I encountered an error processing your question. Please try again.",timestamp:new Date}])}}),c=async()=>{if(!n.trim())return;const m={id:Date.now().toString(),type:"user",content:n,timestamp:new Date},h={id:(Date.now()+1).toString(),type:"bot",content:"Analyzing your question and fetching relevant data...",timestamp:new Date,isLoading:!0};r(x=>[...x,m,h]),a(""),o.mutate(n)},d=m=>{a(m)},u=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),c())};return j.useEffect(()=>{if(i.current){const m=i.current.querySelector("[data-radix-scroll-area-viewport]");m&&(m.scrollTop=m.scrollHeight)}},[s]),e.jsxs(O,{className:`h-[600px] flex flex-col ${t}`,children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Bn,{className:"h-5 w-5 text-blue-500"}),"MR Pilot AI Assistant",e.jsx(q,{variant:"secondary",className:"ml-auto",children:"Connected to Live Data"})]})}),e.jsxs(D,{className:"flex-1 flex flex-col gap-3 p-4",children:[e.jsx(Uo,{ref:i,className:"flex-1 pr-3",children:e.jsx("div",{className:"space-y-4",children:s.map(m=>e.jsxs("div",{className:`flex items-start gap-3 ${m.type==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${m.type==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600"}`,children:m.type==="user"?e.jsx(It,{className:"h-4 w-4"}):m.isLoading?e.jsx(ts,{className:"h-4 w-4 animate-spin"}):e.jsx(Bn,{className:"h-4 w-4"})}),e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${m.type==="user"?"bg-blue-500 text-white":"bg-gray-50 text-gray-900"}`,children:[e.jsx("div",{className:"text-sm whitespace-pre-wrap",children:m.content}),e.jsx("div",{className:"text-xs mt-1 opacity-70",children:m.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},m.id))})}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx($d,{className:"h-4 w-4"}),"Suggested questions:"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.slice(0,3).map((m,h)=>e.jsx(R,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>d(m),disabled:o.isPending,children:m},h))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{value:n,onChange:m=>a(m.target.value),onKeyPress:u,placeholder:"Ask about tasks, revenue, expenses, bookings...",disabled:o.isPending,className:"flex-1"}),e.jsx(R,{onClick:c,disabled:!n.trim()||o.isPending,size:"icon",children:o.isPending?e.jsx(ts,{className:"h-4 w-4 animate-spin"}):e.jsx(N0,{className:"h-4 w-4"})})]})]})]})}function DCe(){return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsx(Bn,{className:"h-8 w-8 text-blue-500"}),"Captain Cortex AI Assistant"]}),e.jsx("p",{className:"text-muted-foreground",children:"Ask questions about your properties, tasks, revenue, expenses, and bookings. Captain Cortex is the Smart Co-Pilot for Property Management with real-time access to all your data."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(TCe,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-yellow-500"}),"AI Capabilities"]})}),e.jsx(D,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"What MR Pilot can help with:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Task scheduling and tracking"}),e.jsx("li",{children:"• Revenue and expense analysis"}),e.jsx("li",{children:"• Property performance insights"}),e.jsx("li",{children:"• Booking status and availability"}),e.jsx("li",{children:"• Financial reporting"}),e.jsx("li",{children:"• Maintenance scheduling"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(pn,{className:"h-5 w-5 text-green-500"}),"Live Data Access"]})}),e.jsx(D,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Connected to:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• All property records"}),e.jsx("li",{children:"• Task management system"}),e.jsx("li",{children:"• Booking calendar"}),e.jsx("li",{children:"• Financial transactions"}),e.jsx("li",{children:"• Expense tracking"}),e.jsx("li",{children:"• Revenue reporting"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5 text-blue-500"}),"Security & Privacy"]})}),e.jsx(D,{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Data Protection:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Organization-level data isolation"}),e.jsx("li",{children:"• Role-based access control"}),e.jsx("li",{children:"• Encrypted API communication"}),e.jsx("li",{children:"• No data stored by AI provider"})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-lg",children:"Example Questions"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"What tasks do we have for tomorrow?"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"Show me revenue from Villa Tropical Paradise in March"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"What were the electric charges for Villa Aruna in May?"'}),e.jsx("div",{className:"p-2 bg-muted rounded text-sm",children:'"Which properties have bookings this week?"'})]})})]})]})]})]})}const OCe=[{id:1,name:"Villa Samui Breeze",location:"Samui, Thailand",price:8e3,bedrooms:3,bathrooms:2,guests:6,rating:4.8,image:"🏖️",commission:800,amenities:["Pool","WiFi","Kitchen","AC"]},{id:2,name:"Villa Ocean View",location:"Phuket, Thailand",price:6500,bedrooms:2,bathrooms:2,guests:4,rating:4.7,image:"🌊",commission:650,amenities:["Ocean View","WiFi","Kitchen","Pool"]},{id:3,name:"Villa Tropical Paradise",location:"Koh Phi Phi, Thailand",price:12e3,bedrooms:4,bathrooms:3,guests:8,rating:4.9,image:"🌴",commission:1200,amenities:["Private Beach","Pool","WiFi","Kitchen"]},{id:4,name:"Villa Aruna Demo",location:"Krabi, Thailand",price:2e4,bedrooms:5,bathrooms:4,guests:10,rating:4.9,image:"🏝️",commission:2e3,amenities:["Luxury","Pool","WiFi","Kitchen","Spa"]}];function ECe(){const[t,s]=j.useState(""),[r,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(""),[c,d]=j.useState(!1),u=j.useMemo(()=>OCe.filter(h=>{const x=t===""||h.name.toLowerCase().includes(t.toLowerCase())||h.location.toLowerCase().includes(t.toLowerCase()),g=(!r||h.price>=parseInt(r))&&(!a||h.price<=parseInt(a)),p=!l||h.guests>=parseInt(l);return x&&g&&p}),[t,r,a,l]),m=h=>{h.preventDefault(),d(!0)};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Generate Client Quote"]})}),e.jsx(D,{children:e.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Destination"}),e.jsx(H,{placeholder:"Search destination...",value:t,onChange:h=>s(h.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Budget Range (THB)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{placeholder:"Min",type:"number",value:r,onChange:h=>n(h.target.value)}),e.jsx(H,{placeholder:"Max",type:"number",value:a,onChange:h=>i(h.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Guests"}),e.jsx(H,{placeholder:"Number of guests",type:"number",value:l,onChange:h=>o(h.target.value)})]}),e.jsxs(R,{type:"submit",className:"md:col-span-3 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Search Properties"]})]})})]}),(c||t||r||a||l)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Found ",u.length," Properties"]}),e.jsxs(q,{variant:"secondary",children:["Total Commission: ฿",u.reduce((h,x)=>h+x.commission,0).toLocaleString()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(h=>e.jsx(O,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:h.image}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.name}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(is,{className:"h-3 w-3"}),h.location]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(us,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:h.rating})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[h.bedrooms," bed"]}),e.jsxs("span",{children:[h.bathrooms," bath"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"h-3 w-3"}),h.guests]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["฿",h.price.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Commission: ฿",h.commission.toLocaleString()]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:h.amenities.map(x=>e.jsx(q,{variant:"outline",className:"text-xs",children:x},x))}),e.jsx(R,{className:"w-full bg-green-600 hover:bg-green-700",children:"Generate Quote"})]})},h.id))}),u.length===0&&e.jsx(O,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No properties match your search criteria."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters."})]})})]})]})}function MCe(){return e.jsx(ECe,{})}function RCe(){return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"My Commissions"}),e.jsxs("table",{className:"w-full table-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Villa"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Guest"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Booking"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Commission"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"20/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Sky"}),e.jsx("td",{className:"px-4 py-2",children:"John D."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"Paid"})}),e.jsx("td",{className:"px-4 py-2",children:"฿42,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"฿4,200"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"18/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Samui Breeze"}),e.jsx("td",{className:"px-4 py-2",children:"Sarah M."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm",children:"Pending"})}),e.jsx("td",{className:"px-4 py-2",children:"฿35,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"฿3,500"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"15/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Tropical Paradise"}),e.jsx("td",{className:"px-4 py-2",children:"Mike J."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"Paid"})}),e.jsx("td",{className:"px-4 py-2",children:"฿48,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"฿4,800"})]}),e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-4 py-2",children:"12/07/2025"}),e.jsx("td",{className:"px-4 py-2",children:"Villa Ocean View"}),e.jsx("td",{className:"px-4 py-2",children:"Lisa T."}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm",children:"Paid"})}),e.jsx("td",{className:"px-4 py-2",children:"฿28,000"}),e.jsx("td",{className:"px-4 py-2 font-bold",children:"฿2,800"})]})]})]})]})}function _Ce(){return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Client Proposals"}),e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:"Proposal #1 – Villa Sky – ฿42,000 – Status: Sent"}),e.jsx("li",{children:"Proposal #2 – Villa Waterfall – ฿33,000 – Status: Confirmed"}),e.jsx("li",{children:"Proposal #3 – Villa Samui Breeze – ฿40,000 – Status: Draft"}),e.jsx("li",{children:"Proposal #4 – Villa Ocean View – ฿26,000 – Status: Sent"}),e.jsx("li",{children:"Proposal #5 – Villa Tropical Paradise – ฿48,000 – Status: Confirmed"})]})]})}const ICe=[{id:1,name:"Villa Samui Breeze - Pool View",property:"Villa Samui Breeze",type:"image",size:"4.2MB",resolution:"4K",format:"JPG",category:"exterior",icon:"🏖️",downloadUrl:"#"},{id:2,name:"Villa Ocean View - Sunset",property:"Villa Ocean View",type:"image",size:"3.8MB",resolution:"4K",format:"JPG",category:"exterior",icon:"🌊",downloadUrl:"#"},{id:3,name:"Villa Tropical Paradise - Tour",property:"Villa Tropical Paradise",type:"video",size:"45MB",resolution:"1080p",format:"MP4",category:"tour",icon:"🌴",downloadUrl:"#"},{id:4,name:"Villa Aruna - Luxury Interior",property:"Villa Aruna Demo",type:"image",size:"5.1MB",resolution:"4K",format:"JPG",category:"interior",icon:"🏝️",downloadUrl:"#"},{id:5,name:"Villa Samui Breeze - Bedroom",property:"Villa Samui Breeze",type:"image",size:"3.2MB",resolution:"4K",format:"JPG",category:"interior",icon:"🏖️",downloadUrl:"#"},{id:6,name:"Villa Ocean View - Kitchen",property:"Villa Ocean View",type:"image",size:"2.9MB",resolution:"4K",format:"JPG",category:"interior",icon:"🌊",downloadUrl:"#"},{id:7,name:"Villa Tropical Paradise - Aerial",property:"Villa Tropical Paradise",type:"video",size:"32MB",resolution:"4K",format:"MP4",category:"aerial",icon:"🌴",downloadUrl:"#"},{id:8,name:"Villa Aruna - Fact Sheet",property:"Villa Aruna Demo",type:"document",size:"1.2MB",resolution:"PDF",format:"PDF",category:"marketing",icon:"🏝️",downloadUrl:"#"}],$Ce=["All Properties","Villa Samui Breeze","Villa Ocean View","Villa Tropical Paradise","Villa Aruna Demo"],FCe=["All Categories","exterior","interior","tour","aerial","marketing"],LCe=["All Types","image","video","document"];function BCe(){const[t,s]=j.useState(""),[r,n]=j.useState("All Properties"),[a,i]=j.useState("All Categories"),[l,o]=j.useState("All Types"),c=j.useMemo(()=>ICe.filter(x=>{const g=t===""||x.name.toLowerCase().includes(t.toLowerCase())||x.property.toLowerCase().includes(t.toLowerCase()),p=r==="All Properties"||x.property===r,f=a==="All Categories"||x.category===a,v=l==="All Types"||x.type===l;return g&&p&&f&&v}),[t,r,a,l]),d=x=>{switch(x){case"image":return e.jsx(b0,{className:"h-4 w-4"});case"video":return e.jsx(t4,{className:"h-4 w-4"});case"document":return e.jsx(dt,{className:"h-4 w-4"});default:return e.jsx(dt,{className:"h-4 w-4"})}},u=x=>{switch(x){case"image":return"bg-blue-100 text-blue-800";case"video":return"bg-purple-100 text-purple-800";case"document":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=x=>{console.log(`Downloading ${x.name}`)},h=()=>{s(""),n("All Properties"),i("All Categories"),o("All Types")};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs(O,{className:"mb-6",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5"}),"Media Library"]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(H,{placeholder:"Search media...",value:t,onChange:x=>s(x.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Property"}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsx(ee,{children:$Ce.map(x=>e.jsx(P,{value:x,children:x},x))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsx(ee,{children:FCe.map(x=>e.jsx(P,{value:x,children:x},x))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(te,{value:l,onValueChange:o,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsx(ee,{children:LCe.map(x=>e.jsx(P,{value:x,children:x},x))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{variant:"secondary",children:[c.length," items found"]}),e.jsxs(q,{variant:"outline",children:["Total size: ",c.reduce((x,g)=>x+parseFloat(g.size),0).toFixed(1),"MB"]})]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(ja,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(x=>e.jsx(O,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 rounded-lg mb-3 flex items-center justify-center relative",children:[e.jsx("div",{className:"text-4xl",children:x.icon}),e.jsx(q,{className:`absolute top-2 right-2 ${u(x.type)}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[d(x.type),e.jsx("span",{className:"text-xs",children:x.type})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm leading-tight",children:x.name}),e.jsx("p",{className:"text-xs text-gray-600",children:x.property}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{children:x.resolution}),e.jsx("span",{children:x.size})]}),e.jsx(q,{variant:"outline",className:"text-xs",children:x.category}),e.jsxs(R,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",onClick:()=>m(x),children:[e.jsx(as,{className:"h-3 w-3 mr-1"}),"Download ",x.format]})]})]})},x.id))}),c.length===0&&e.jsx(O,{children:e.jsxs(D,{className:"p-12 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No media files match your criteria"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your search or filters"})]})})]})}function VCe(){return e.jsx(BCe,{})}const jj=[{rank:1,name:"Ploy",bookings:12,earnings:89e3,bonus:"Dinner voucher",trend:"+15%"},{rank:2,name:"Sarah",bookings:8,earnings:65e3,bonus:"Spa day",trend:"+8%"},{rank:3,name:"Lisa",bookings:6,earnings:42e3,bonus:"Gift card",trend:"+3%"},{rank:4,name:"Anna",bookings:5,earnings:38e3,bonus:"Movie tickets",trend:"-2%"},{rank:5,name:"Emma",bookings:4,earnings:28e3,bonus:"Coffee voucher",trend:"+5%"}],vj=[{rank:1,name:"George",referrals:9,earnings:54e3,bonus:"2-night stay",trend:"+12%"},{rank:2,name:"Mike",referrals:7,earnings:42e3,bonus:"Restaurant voucher",trend:"+6%"},{rank:3,name:"David",referrals:5,earnings:31e3,bonus:"Spa treatment",trend:"+4%"},{rank:4,name:"James",referrals:4,earnings:24e3,bonus:"Shopping voucher",trend:"-1%"},{rank:5,name:"Robert",referrals:3,earnings:18e3,bonus:"Activity pass",trend:"+2%"}],Zm={name:"Anna K.",type:"Retail Agent",earnings:125e3,prize:"Weekend getaway prize"};function qCe(){const t=r=>{switch(r){case 1:return e.jsx(Rn,{className:"h-5 w-5 text-yellow-500"});case 2:return e.jsx(y0,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(us,{className:"h-5 w-5 text-orange-500"});default:return e.jsx("span",{className:"h-5 w-5 flex items-center justify-center text-sm font-bold",children:r})}},s=r=>r.startsWith("+")?"text-green-600":r.startsWith("-")?"text-red-600":"text-gray-600";return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Agent Leaderboard"}),e.jsx("p",{className:"text-gray-600",children:"Top performing agents this month"})]}),e.jsxs(O,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(Rn,{className:"h-6 w-6"}),"Last Month's Champion"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:Zm.name}),e.jsx("p",{className:"text-gray-600",children:Zm.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["฿",Zm.earnings.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:Zm.prize})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-blue-600"}),"Retail Agents - This Month"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:jj.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(r.rank),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.bookings," bookings"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["฿",r.earnings.toLocaleString()]}),e.jsx(q,{variant:"outline",className:s(r.trend),children:r.trend})]}),e.jsx("p",{className:"text-xs text-gray-500",children:r.bonus})]})]},r.rank))})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5 text-purple-600"}),"Referral Agents - This Month"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:vj.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t(r.rank),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.referrals," referrals"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["฿",r.earnings.toLocaleString()]}),e.jsx(q,{variant:"outline",className:s(r.trend),children:r.trend})]}),e.jsx("p",{className:"text-xs text-gray-500",children:r.bonus})]})]},r.rank))})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(O,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:jj.reduce((r,n)=>r+n.bookings,0)}),e.jsx("p",{className:"text-sm text-gray-500",children:"This month"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Referrals"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:vj.reduce((r,n)=>r+n.referrals,0)}),e.jsx("p",{className:"text-sm text-gray-500",children:"This month"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold text-gray-600",children:"Total Earnings"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["฿",(jj.reduce((r,n)=>r+n.earnings,0)+vj.reduce((r,n)=>r+n.earnings,0)).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Combined"})]})})]})]})}function UCe(){return e.jsx(qCe,{})}function zCe(){const[t,s]=j.useState(""),n=j.useMemo(()=>[{title:"Admin Dashboard",emoji:"📊",description:"Comprehensive overview of all properties, bookings, tasks, and financial metrics",href:"/",icon:qs,badge:"Main",color:"bg-emerald-50/50 hover:bg-emerald-100/70 border-emerald-200/60",keywords:["admin","overview","main","dashboard","analytics"]},{title:"Financial Dashboard",emoji:"💰",description:"Revenue tracking, expense analysis, and financial performance insights",href:"/finance-hub",icon:He,badge:"Finance",color:"bg-teal-50/50 hover:bg-teal-100/70 border-teal-200/60",keywords:["finance","revenue","money","financial","analytics"]},{title:"Property Dashboard",emoji:"🏢",description:"Property-specific metrics, occupancy rates, and performance analytics",href:"/property-hub",icon:_s,badge:"Properties",color:"bg-cyan-50/50 hover:bg-cyan-100/70 border-cyan-200/60",keywords:["property","building","occupancy","real estate"]},{title:"Task Overview",emoji:"✅",description:"Global task monitoring across all properties with staff performance tracking",href:"/tasks",icon:_a,badge:"Operations",color:"bg-green-50/50 hover:bg-green-100/70 border-green-200/60",keywords:["tasks","operations","staff","monitoring","workflow"]},{title:"Daily Operations",emoji:"⚡",description:"Today's activities, urgent tasks, and operational status overview",href:"/daily-operations",icon:ks,badge:"Today",color:"bg-slate-50/50 hover:bg-slate-100/70 border-slate-200/60",keywords:["daily","today","urgent","activities","operations"]},{title:"Portfolio Manager Dashboard",emoji:"📈",description:"Multi-property portfolio insights and management tools",href:"/portfolio-manager-dashboard",icon:Ot,badge:"Portfolio",color:"bg-emerald-50/50 hover:bg-emerald-100/70 border-emerald-200/60",keywords:["portfolio","manager","insights","analytics","trends"]}],[]).filter(i=>{if(!t.trim())return!0;const l=t.toLowerCase();return i.title.toLowerCase().includes(l)||i.description.toLowerCase().includes(l)||i.badge.toLowerCase().includes(l)||i.keywords.some(o=>o.includes(l))}),a=new Date().toLocaleDateString();return e.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-6 lg:px-8 py-3",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx(Mi,{title:"Dashboard Hub",subtitle:"Access all dashboard views and analytics from one central location"}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl mt-2 font-bold text-slate-900 dark:text-slate-100 tracking-tight",children:"Dashboard Hub"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 sm:mt-3 text-base sm:text-lg font-medium tracking-wide",children:"Access all dashboard views and analytics from one central location"})]}),e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsxs("div",{className:"relative max-w-xl sm:max-w-2xl mx-auto",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx(H,{type:"text",placeholder:"Search dashboards...",value:t,onChange:i=>s(i.target.value),className:"pl-10 pr-4 py-3 rounded-xl border-2 border-slate-200/60 focus:border-emerald-300 focus:ring-2 focus:ring-emerald-100 transition-all duration-200 shadow-sm hover:shadow-md bg-white/80 backdrop-blur-sm w-full","aria-label":"Search dashboards"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mt-6",children:n.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsxs("div",{className:"text-slate-400 text-lg font-medium",children:['No dashboards found matching "',t,'"']}),e.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Try adjusting your search terms"})]}):n.map(i=>(i.icon,e.jsx(Es,{href:i.href,children:e.jsx("a",{className:`block h-full no-underline rounded-2xl focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-200 ${i.color}`,"aria-label":`Open ${i.title}`,children:e.jsxs(O,{className:"h-full cursor-pointer transition-all duration-300 ease-in-out hover:shadow-xl hover:-translate-y-1 hover:scale-[1.02] border-2 shadow-lg bg-gradient-to-br from-emerald-50/30 to-white rounded-2xl",children:[e.jsx(_,{className:"pb-4 pt-6 px-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:i.emoji}),e.jsx($,{className:"text-base sm:text-lg md:text-lg font-bold text-slate-800 dark:text-slate-100 leading-tight whitespace-normal break-words",children:i.title})]})}),e.jsx(q,{variant:"secondary",className:"bg-emerald-100 text-emerald-700 border-emerald-200 rounded-md px-2 py-0.5 font-semibold text-xs flex-shrink-0",children:i.badge})]})}),e.jsx(D,{className:"px-6 pb-6 flex-1",children:e.jsx("p",{className:"text-sm sm:text-sm text-slate-500 dark:text-slate-400 leading-relaxed font-medium",children:i.description})})]})})},i.href)))}),e.jsx("div",{className:"mt-10 sm:mt-12 pt-6 border-t border-slate-200/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-6 text-sm text-slate-400 font-medium",children:[e.jsxs("span",{children:["Last updated: ",a]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"System Online"})]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-1 rounded-md text-xs font-semibold",children:"v2.0.1"})]})})]})}function GCe({filters:t,onFiltersChange:s,totalProperties:r,filteredCount:n}){const[a,i]=X.useState(!1),l=(d,u)=>s({...t,[d]:u}),o=()=>s({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),c=(t.search?1:0)+(t.location?1:0)+(t.status?1:0)+(t.propertyType?1:0)+(t.occupancyMin>0||t.occupancyMax<100?1:0)+(t.roiMin>0||t.roiMax<50?1:0)+(t.hasMaintenanceTasks?1:0)+(t.lastBookingFrom||t.lastBookingTo?1:0);return e.jsxs(O,{className:"mb-6 bg-gradient-to-br from-white/60 to-slate-50/40 border-slate-200/40 shadow-sm",children:[e.jsx(_,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:e.jsx(ja,{className:"h-5 w-5 text-emerald-700"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx($,{className:"text-sm font-semibold truncate text-slate-800",children:"Property Filters"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[n," / ",r," shown",c>0&&e.jsxs("span",{className:"ml-2 inline-flex items-center bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full text-[11px]",children:[c," active"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>{const d=`name,location,status
`,u=new Blob([d],{type:"text/csv"}),m=document.createElement("a");m.href=URL.createObjectURL(u),m.download="properties.csv",m.click()},children:"📊 Export"}),e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>window.print(),children:"📋 Print"}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>c?o():i(d=>!d),children:c?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"})," Clear"]}):e.jsx("span",{className:"text-sm",children:a?"Close":"Advanced"})})]})]})}),e.jsxs(D,{className:"p-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 items-center",children:[e.jsx("div",{className:"col-span-1 sm:col-span-2",children:e.jsx(H,{placeholder:"Search properties...",value:t.search,onChange:d=>l("search",d.target.value),className:"w-full bg-white/80"})}),e.jsx("div",{className:"flex gap-2 items-center justify-end",children:e.jsxs(te,{value:t.location||"all",onValueChange:d=>l("location",d==="all"?"":d),children:[e.jsx(J,{className:"min-w-[120px] text-sm",children:e.jsx(se,{placeholder:"Location"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All"}),e.jsx(P,{value:"chaweng",children:"Chaweng"}),e.jsx(P,{value:"lamai",children:"Lamai"}),e.jsx(P,{value:"bophut",children:"Bophut"}),e.jsx(P,{value:"maenam",children:"Maenam"}),e.jsx(P,{value:"bangrak",children:"Bang Rak"})]})]})})]}),e.jsxs("div",{className:`mt-3 grid gap-3 ${a?"grid-cols-1 md:grid-cols-3":"hidden"}`,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(is,{className:"h-4 w-4 text-emerald-600"}),"Status & Type"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{value:t.status||"all",onValueChange:d=>l("status",d==="all"?"":d),children:[e.jsx(J,{className:"min-w-[140px] text-sm",children:e.jsx(se,{placeholder:"Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All"}),e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(te,{value:t.propertyType||"all",onValueChange:d=>l("propertyType",d==="all"?"":d),children:[e.jsx(J,{className:"min-w-[140px] text-sm",children:e.jsx(se,{placeholder:"Type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Types"}),e.jsx(P,{value:"villa",children:"Villa"}),e.jsx(P,{value:"apartment",children:"Apartment"}),e.jsx(P,{value:"condo",children:"Condo"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(Ot,{className:"h-4 w-4 text-teal-600"}),"Occupancy & ROI"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{type:"number",value:t.occupancyMin,onChange:d=>l("occupancyMin",parseInt(d.target.value)||0),className:"w-20 text-sm",placeholder:"Min %"}),e.jsx(H,{type:"number",value:t.occupancyMax,onChange:d=>l("occupancyMax",parseInt(d.target.value)||100),className:"w-20 text-sm",placeholder:"Max %"}),e.jsx(H,{type:"number",value:t.roiMin,onChange:d=>l("roiMin",parseInt(d.target.value)||0),className:"w-20 text-sm",placeholder:"ROI Min"}),e.jsx(H,{type:"number",value:t.roiMax,onChange:d=>l("roiMax",parseInt(d.target.value)||50),className:"w-20 text-sm",placeholder:"ROI Max"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[e.jsx(We,{className:"h-4 w-4 text-emerald-600"}),"Last Booking"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(H,{type:"date",value:t.lastBookingFrom,onChange:d=>l("lastBookingFrom",d.target.value),className:"text-sm"}),e.jsx(H,{type:"date",value:t.lastBookingTo,onChange:d=>l("lastBookingTo",d.target.value),className:"text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:t.hasMaintenanceTasks,onChange:d=>l("hasMaintenanceTasks",d.target.checked),className:"h-4 w-4"}),e.jsx("span",{children:"Has maintenance"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>i(!1),children:"Close"}),e.jsx(R,{size:"sm",onClick:()=>{i(!1)},children:"Apply"})]})]})]})]}),c>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t.search&&e.jsxs(q,{className:"flex items-center gap-2",children:["Search: ",t.search,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("search","")})]}),t.location&&e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-3 w-3"}),t.location,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("location","")})]}),t.status&&e.jsxs(q,{className:"flex items-center gap-2",children:["Status: ",t.status,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>l("status","")})]})]})]})]})}function HCe({selectedProperties:t,onClearSelection:s,onRefresh:r}){const[n,a]=j.useState({isOpen:!1,action:"",data:null}),{toast:i}=Xe();if(t.length===0)return null;const l=()=>{a({isOpen:!0,action:"assign-manager",data:{selectedCount:t.length}})},o=()=>{a({isOpen:!0,action:"update-status",data:{selectedCount:t.length}})},c=()=>{a({isOpen:!0,action:"archive",data:{selectedCount:t.length}})},d=async(u,m)=>{try{await new Promise(x=>setTimeout(x,1e3));let h="";switch(u){case"assign-manager":h=`Assigned ${m.manager} to ${t.length} properties`;break;case"update-status":h=`Updated status to "${m.status}" for ${t.length} properties`;break;case"archive":h=`Archived ${t.length} properties`;break}i({title:"Bulk Action Completed",description:h}),a({isOpen:!1,action:"",data:null}),s(),r()}catch{i({title:"Error",description:"Failed to execute bulk action. Please try again.",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mb-6 border-blue-200 bg-blue-50",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-5 w-5 text-blue-600"}),e.jsxs("span",{className:"font-medium text-blue-900",children:[t.length," propert",t.length===1?"y":"ies"," selected"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.slice(0,3).map((u,m)=>e.jsx(q,{variant:"secondary",className:"text-xs",children:u.name},m)),t.length>3&&e.jsxs(q,{variant:"secondary",className:"text-xs",children:["+",t.length-3," more"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:l,className:"flex items-center gap-1",children:[e.jsx(st,{className:"h-4 w-4"}),"Assign Manager"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:o,className:"flex items-center gap-1",children:[e.jsx(Lt,{className:"h-4 w-4"}),"Update Status"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-1 text-orange-600 hover:text-orange-700",children:[e.jsx(VL,{className:"h-4 w-4"}),"Archive"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-slate-700",children:e.jsx(Is,{className:"h-4 w-4"})})]})]})})}),e.jsx(Ve,{open:n.isOpen,onOpenChange:u=>a({isOpen:u,action:"",data:null}),children:e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsxs(ze,{children:[n.action==="assign-manager"&&"Assign Property Manager",n.action==="update-status"&&"Update Property Status",n.action==="archive"&&"Archive Properties"]}),e.jsxs(Pt,{children:[n.action==="assign-manager"&&`Select a property manager to assign to ${n.data?.selectedCount} selected properties.`,n.action==="update-status"&&`Choose the new status for ${n.data?.selectedCount} selected properties.`,n.action==="archive"&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[e.jsx(Nt,{className:"h-4 w-4"}),"This will archive ",n.data?.selectedCount," properties. They will be hidden from the main view but can be restored later."]})]})]}),e.jsxs("div",{className:"py-4",children:[n.action==="assign-manager"&&e.jsxs(te,{defaultValue:"manager1",children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select Property Manager"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"manager1",children:"John Smith"}),e.jsx(P,{value:"manager2",children:"Sarah Johnson"}),e.jsx(P,{value:"manager3",children:"Mike Chen"}),e.jsx(P,{value:"manager4",children:"Lisa Wong"})]})]}),n.action==="update-status"&&e.jsxs(te,{defaultValue:"active",children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select Status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"maintenance",children:"Under Maintenance"}),e.jsx(P,{value:"inactive",children:"Inactive"})]})]}),n.action==="archive"&&e.jsx("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:e.jsx("p",{className:"text-sm text-orange-800",children:"Archived properties will be moved to the archive section and will not appear in regular property listings. You can restore them at any time from the archive."})})]}),e.jsxs(Nr,{children:[e.jsx(R,{variant:"outline",onClick:()=>a({isOpen:!1,action:"",data:null}),children:"Cancel"}),e.jsx(R,{onClick:()=>{const u=n.action==="assign-manager"?{manager:"John Smith"}:n.action==="update-status"?{status:"active"}:{};d(n.action,u)},children:n.action==="archive"?"Archive Properties":"Apply Changes"})]})]})})]})}function KCe({properties:t,bookings:s,onBookingReschedule:r}){const[,n]=pr(),[a,i]=j.useState(new Date),[l,o]=j.useState("all"),[c,d]=j.useState("month"),[u,m]=j.useState(null),[h,x]=j.useState(null),[g,p]=j.useState(null);console.log("selectedBooking",g);const[f,v]=j.useState(!1),{toast:b}=Xe(),y=ut(),[S,w]=j.useState(s);X.useEffect(()=>{w(s)},[s]);const C=Ce({mutationFn:async({bookingId:le,newCheckIn:Z,newCheckOut:me})=>fe("PATCH",`/api/bookings/${le}`,{checkIn:Z,checkOut:me}),onMutate:async({bookingId:le,newCheckIn:Z,newCheckOut:me})=>{const U=S,je=S.map(ye=>ye.id===le?{...ye,checkIn:Z,checkOut:me}:ye);return w(je),r?.(le,Z,me),{previousBookings:U}},onSuccess:(le,Z)=>{Xd(y),b({title:"✅ Booking Rescheduled",description:"Successfully moved booking to new dates",variant:"default"})},onError:(le,Z,me)=>{me?.previousBookings&&w(me.previousBookings),console.error("Error rescheduling booking:",le),b({title:"❌ Rescheduling Failed",description:"Unable to reschedule booking. Please try again.",variant:"destructive"})}}),k=le=>{const Z=new Date(le.getFullYear(),le.getMonth(),1),U=new Date(le.getFullYear(),le.getMonth()+1,0).getDate(),je=Z.getDay(),ye=[];for(let ae=0;ae<je;ae++)ye.push(null);for(let ae=1;ae<=U;ae++)ye.push(new Date(le.getFullYear(),le.getMonth(),ae));return ye},A=le=>{const Z=le.getFullYear(),me=String(le.getMonth()+1).padStart(2,"0"),U=String(le.getDate()).padStart(2,"0");return`${Z}-${me}-${U}`},N=le=>{if(!le)return[];const Z=A(le);return S.filter(me=>{const U=me.checkIn.split("T")[0],je=me.checkOut.split("T")[0];return Z>=U&&Z<je}).filter(me=>l==="all"||me.propertyId.toString()===l)},M=(le,Z)=>{const me=new Date(Z.checkIn),U=new Date(Z.checkOut),je=Math.ceil((U.getTime()-me.getTime())/(1e3*60*60*24)),ye=new Date(le);return ye.setDate(ye.getDate()+je),S.some(ae=>{if(ae.id===Z.id||ae.propertyId!==Z.propertyId)return!1;const pe=new Date(ae.checkIn),Je=new Date(ae.checkOut);return le>=pe&&le<Je||ye>pe&&ye<=Je||le<=pe&&ye>=Je})},F=le=>{switch(le){case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"checked-in":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=le=>{switch(le){case"confirmed":return"bg-blue-500";case"pending":return"bg-yellow-500";case"cancelled":return"bg-red-500";case"checked-in":return"bg-green-500";case"completed":return"bg-purple-500";default:return"bg-gray-500"}},V=(le,Z)=>{m(Z),le.dataTransfer.effectAllowed="move"},E=(le,Z)=>{le.preventDefault(),le.dataTransfer.dropEffect="move",x(Z)},G=()=>{x(null)},Y=(le,Z)=>{if(le.preventDefault(),u&&Z){if(u.status==="checked-in"||u.status==="completed"){b({title:"❌ Cannot Reschedule",description:"Bookings that are checked-in or completed cannot be rescheduled.",variant:"destructive"}),m(null),x(null);return}if(M(Z,u)){b({title:"❌ Scheduling Conflict",description:"These dates conflict with an existing booking for this property.",variant:"destructive"}),m(null),x(null);return}const me=new Date(u.checkIn),U=new Date(u.checkOut),je=Math.ceil((U.getTime()-me.getTime())/(1e3*60*60*24)),ye=new Date(Z),ae=new Date(Z);ae.setDate(ae.getDate()+je);const pe=new Date;if(pe.setHours(0,0,0,0),ye<pe){b({title:"❌ Invalid Date",description:"Cannot schedule bookings in the past.",variant:"destructive"}),m(null),x(null);return}C.mutate({bookingId:u.id,newCheckIn:ye.toISOString(),newCheckOut:ae.toISOString()})}m(null),x(null)},Q=le=>e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:le.guestName}),e.jsx("div",{className:"text-xs text-slate-600",children:le.propertyName}),e.jsx("div",{className:"text-xs font-medium text-emerald-600",children:T(le.totalAmount)}),e.jsx("div",{className:"text-xs text-slate-500",children:"Click to view details"})]}),T=le=>`฿${le?.toLocaleString()||"0"}`,B=(le,Z)=>{if(le.stopPropagation(),Z.guestId)n(`/guests/${Z.guestId}`);else{const me=[];Z.guestEmail&&me.push(`Email: ${Z.guestEmail}`),Z.guestPhone&&me.push(`Phone: ${Z.guestPhone}`),b({title:`Guest: ${Z.guestName}`,description:me.length>0?me.join(`
`):"No contact information available"})}},W=(le,Z)=>{le.stopPropagation(),Z.invoiceId?n(`/finance?invoice=${Z.invoiceId}`):b({title:"Booking Invoice",description:`Booking #${Z.id}
Amount: ${T(Z.totalAmount)}
Status: ${Z.status}`})},he=(le,Z)=>{le.stopPropagation(),p(Z),v(!0)},Se=le=>{i(Z=>{const me=new Date(Z);return le==="prev"?me.setMonth(Z.getMonth()-1):me.setMonth(Z.getMonth()+1),me})},z=["January","February","March","April","May","June","July","August","September","October","November","December"],L=k(a);return l==="all"||t.filter(le=>le.id.toString()===l),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Multi-Property Calendar"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(te,{value:l,onValueChange:o,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"Select Property"})}),e.jsxs(ee,{children:[e.jsxs(P,{value:"all",children:["All Properties (",t.length,")"]}),t.map(le=>e.jsx(P,{value:le.id.toString(),children:le.name},le.id))]})]}),u&&e.jsxs("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full border border-blue-200 animate-pulse",children:["🔄 Rescheduling ",u.guestName,"..."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Se("prev"),children:e.jsx(Vu,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-lg font-semibold min-w-[140px] text-center",children:[z[a.getMonth()]," ",a.getFullYear()]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Se("next"),children:e.jsx(Rl,{className:"h-4 w-4"})})]})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(le=>e.jsx("div",{className:"p-2 text-center font-medium text-slate-600 bg-slate-50 rounded",children:le},le))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:L.map((le,Z)=>{const me=N(le),U=le?le.toDateString()===new Date().toDateString():!1,je=h&&le&&h.toDateString()===le.toDateString();return e.jsx(Yu,{children:e.jsx("div",{className:`min-h-[120px] p-2 border rounded-lg transition-all ${le?"bg-white hover:bg-slate-50":"bg-slate-50"} ${U?"ring-2 ring-emerald-500":""} ${je?"ring-2 ring-blue-400 bg-blue-50":""}`,onDragOver:le?ye=>E(ye,le):void 0,onDragLeave:G,onDrop:le?ye=>Y(ye,le):void 0,children:le&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`text-sm font-medium ${U?"text-emerald-600":"text-slate-700"}`,children:le.getDate()}),me.length>0&&e.jsxs("div",{className:"flex gap-1",children:[Array.from(new Set(me.map(ye=>ye.status))).slice(0,3).map((ye,ae)=>e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${I(ye)} cursor-help hover:scale-125 transition-transform`})}),e.jsx(Da,{children:e.jsxs("div",{className:"text-xs",children:[ye.charAt(0).toUpperCase()+ye.slice(1)," ","(",me.filter(pe=>pe.status===ye).length,")"]})})]},ae)),me.length>3&&e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400 cursor-help hover:scale-125 transition-transform"})}),e.jsx(Da,{children:e.jsxs("div",{className:"text-xs",children:[me.length," total bookings"]})})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[me.slice(0,2).map(ye=>e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:e.jsxs("div",{className:"group cursor-pointer",draggable:!0,onDragStart:ae=>V(ae,ye),onClick:ae=>he(ae,ye),children:[e.jsxs("div",{className:`text-xs p-1 rounded border transition-all hover:shadow-md group-hover:shadow-emerald-200 ${F(ye.status)} ${u?.id===ye.id?"opacity-50 scale-95":""}`,children:[e.jsxs("div",{className:"font-medium truncate flex items-center gap-1",children:[e.jsx(zw,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity text-slate-600"}),ye.guestName]}),e.jsx("div",{className:"truncate opacity-75",children:ye.propertyName}),e.jsx("div",{className:"text-[10px] font-medium text-emerald-600",children:T(ye.totalAmount)})]}),e.jsxs("div",{className:"invisible group-hover:visible flex gap-1 mt-1",children:[e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Guest Profile",onClick:ae=>B(ae,ye),"data-testid":`button-guest-${ye.id}`,children:e.jsx(It,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Invoice",onClick:ae=>W(ae,ye),"data-testid":`button-invoice-${ye.id}`,children:e.jsx(dt,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"ghost",className:"h-6 px-1 text-xs hover:bg-emerald-100",title:"View Details",onClick:ae=>he(ae,ye),"data-testid":`button-details-${ye.id}`,children:e.jsx($t,{className:"h-3 w-3"})})]})]})}),e.jsx(Da,{side:"top",className:"p-0",children:Q(ye)})]},ye.id)),me.length>2&&e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:e.jsxs("div",{className:"text-xs text-slate-500 text-center py-1 hover:text-slate-700 cursor-pointer rounded hover:bg-slate-100",children:["+",me.length-2," more"]})}),e.jsx(Da,{children:e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx("div",{className:"font-semibold text-sm",children:"Additional Bookings"}),me.slice(2).map(ye=>e.jsxs("div",{className:"text-xs",children:[ye.guestName," -"," ",ye.propertyName]},ye.id))]})})]})]})]})})},Z)})})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Booking Status Legend"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),e.jsx("span",{className:"text-xs",children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),e.jsx("span",{className:"text-xs",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),e.jsx("span",{className:"text-xs",children:"Checked-in"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-purple-500"}),e.jsx("span",{className:"text-xs",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),e.jsx("span",{className:"text-xs",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("h4",{className:"text-sm font-medium mb-2 text-emerald-800",children:"Enterprise Features"}),e.jsxs("div",{className:"text-xs text-emerald-700 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zw,{className:"h-3 w-3"}),e.jsx("span",{children:"Drag bookings to reschedule dates instantly"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-3 w-3"}),e.jsx("span",{children:"Hover over bookings for detailed revenue & guest info"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{children:"Status dots show booking states at a glance"})]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-lg font-bold text-blue-800",children:s.filter(le=>le.status==="confirmed").length}),e.jsx("div",{className:"text-xs text-blue-600",children:"Confirmed Bookings"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-lg font-bold text-green-800",children:s.filter(le=>le.status==="checked-in").length}),e.jsx("div",{className:"text-xs text-green-600",children:"Currently Checked-in"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-800",children:s.filter(le=>le.status==="pending").length}),e.jsx("div",{className:"text-xs text-yellow-600",children:"Pending Confirmation"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-lg font-bold text-purple-800",children:T(s.reduce((le,Z)=>le+(Z.totalAmount||0),0))}),e.jsx("div",{className:"text-xs text-purple-600",children:"Total Revenue"})]})]})]}),e.jsx(Ve,{open:f,onOpenChange:v,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsx(Ue,{children:e.jsx(ze,{children:"Booking Details"})}),g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Guest Name"}),e.jsx("div",{className:"text-lg font-semibold",children:g.guestName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Property"}),e.jsx("div",{className:"text-lg font-semibold",children:g.propertyName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Check-in"}),e.jsx("div",{className:"text-lg",children:new Date(g.checkIn).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Check-out"}),e.jsx("div",{className:"text-lg",children:new Date(g.checkOut).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Status"}),e.jsx("div",{children:e.jsx(q,{className:F(g.status),children:g.status.charAt(0).toUpperCase()+g.status.slice(1)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Total Amount"}),e.jsx("div",{className:"text-lg font-bold text-emerald-600",children:T(g.totalAmount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Booking ID"}),e.jsxs("div",{className:"text-sm font-mono",children:["#",g.id]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Nights"}),e.jsxs("div",{className:"text-lg",children:[Math.ceil((new Date(g.checkOut).getTime()-new Date(g.checkIn).getTime())/(1e3*60*60*24))," ","night(s)"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>{v(!1),n(`/bookings?id=${g.id}`)},children:"View Full Booking"}),e.jsx(R,{variant:"outline",className:"flex-1",onClick:()=>{v(!1),n(`/property/${g.propertyId}`)},children:"View Property"})]})]})]})})]})}function WCe({onCreateTask:t,selectedProperties:s}){const[r,n]=j.useState(!1),[a,i]=j.useState(null),[l,o]=j.useState(""),[c,d]=j.useState("all"),[u,m]=j.useState("all"),[h,x]=j.useState("all"),[g,p]=j.useState(new Set),{toast:f}=Xe(),v=Ft({defaultValues:{propertyId:"",dueDate:new Date(Date.now()+24*60*60*1e3).toISOString().split("T")[0],estimatedCost:void 0,notes:""}}),{register:b}=v,y=v.watch("propertyId")??"",S=ut(),w=Ce({mutationFn:async T=>{const B=await fe("POST","/api/tasks",T);return B.json?B.json():B},onSuccess:()=>{S.invalidateQueries({queryKey:["/api/tasks"],exact:!1}),S.refetchQueries({queryKey:["/api/tasks"],exact:!1})}}),{data:C=[]}=ge({queryKey:["/api/properties"]}),k=s.length>0?s:Array.isArray(C)?C:[],A=[{id:"clean-checkin",title:"Pre-Arrival Deep Clean",description:"Complete cleaning and preparation for guest arrival",type:"cleaning",priority:"high",estimatedDuration:120,category:"Guest Services",instructions:["Deep clean all rooms including bathrooms","Change all bed linens and towels","Stock amenities and toiletries","Check and clean pool area","Inspect all appliances and electronics","Final walkthrough and photo documentation"],isCommon:!0},{id:"maintenance-ac",title:"Air Conditioning Maintenance",description:"Routine AC system inspection and maintenance",type:"maintenance",priority:"medium",estimatedDuration:90,category:"Maintenance",instructions:["Check and replace air filters","Clean condenser coils","Inspect refrigerant levels","Test thermostat functionality","Clean drainage system","Document findings and recommendations"],isCommon:!0},{id:"pool-weekly",title:"Weekly Pool Maintenance",description:"Comprehensive pool cleaning and chemical balance",type:"maintenance",priority:"medium",estimatedDuration:60,category:"Pool & Spa",instructions:["Test and balance water chemistry","Skim surface and empty baskets","Brush walls and vacuum pool","Clean pool deck and furniture","Inspect equipment and filters","Update maintenance log"],isCommon:!0},{id:"security-check",title:"Security & Safety Inspection",description:"Monthly security and safety systems check",type:"inspection",priority:"high",estimatedDuration:45,category:"Security",instructions:["Test all door and window locks","Check security cameras and lighting","Inspect fire safety equipment","Verify alarm system functionality","Test smoke and carbon monoxide detectors","Document any security concerns"],isCommon:!0},{id:"garden-maintenance",title:"Garden & Landscaping",description:"Regular garden maintenance and landscaping",type:"maintenance",priority:"low",estimatedDuration:120,category:"Landscaping",instructions:["Trim and prune plants and trees","Water all plants and gardens","Remove weeds and dead vegetation","Fertilize plants as needed","Clean outdoor furniture and decorations","Inspect irrigation system"],isCommon:!0},{id:"checkout-inspection",title:"Post-Checkout Inspection",description:"Property inspection after guest departure",type:"inspection",priority:"high",estimatedDuration:30,category:"Guest Services",instructions:["Complete room-by-room inspection","Document any damages or issues","Check inventory and missing items","Take photos of property condition","Report maintenance needs","Prepare damage assessment if needed"],isCommon:!0}],N=T=>{switch(T){case"high":return"bg-gradient-to-r from-red-100 to-red-50 text-red-800 border-red-300 shadow-red-100";case"medium":return"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border-yellow-300 shadow-yellow-100";case"low":return"bg-gradient-to-r from-blue-100 to-blue-50 text-blue-800 border-blue-300 shadow-blue-100";default:return"bg-gradient-to-r from-gray-100 to-gray-50 text-gray-800 border-gray-300 shadow-gray-100"}},M=T=>{switch(T){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-blue-500";default:return"bg-gray-500"}},F=T=>{switch(T){case"high":return e.jsx(Nt,{className:"h-3 w-3"});case"medium":return e.jsx(Ke,{className:"h-3 w-3"});case"low":return e.jsx(Me,{className:"h-3 w-3"});default:return e.jsx(Ke,{className:"h-3 w-3"})}},I=T=>{i(T),n(!0)},V=T=>{const B=new Set(g);B.has(T)?B.delete(T):B.add(T),p(B)},E=j.useMemo(()=>A.filter(T=>{const B=T.title.toLowerCase().includes(l.toLowerCase())||T.description.toLowerCase().includes(l.toLowerCase())||T.category.toLowerCase().includes(l.toLowerCase()),W=c==="all"||T.priority===c,he=u==="all"||T.category===u;let Se=!0;return h==="short"?Se=T.estimatedDuration<=60:h==="medium"?Se=T.estimatedDuration>60&&T.estimatedDuration<=120:h==="long"&&(Se=T.estimatedDuration>120),B&&W&&he&&Se}),[l,c,u,h]),G=j.useMemo(()=>Array.from(new Set(A.map(T=>T.category))),[]),Y=j.useMemo(()=>{const T={high:0,medium:0,low:0};return E.forEach(B=>T[B.priority]+=1),T},[E]),Q=async T=>{try{if(!a){f({title:"Error",description:"No template selected. Please try again.",variant:"destructive"});return}if(!T.propertyId){f({title:"Error",description:"Please select a property before creating the task.",variant:"destructive"});return}const B=parseInt(T.propertyId);if(isNaN(B)||B<=0){f({title:"Error",description:"Invalid property selected. Please choose a valid property.",variant:"destructive"});return}const W={title:a.title,description:a.description,type:a.type,department:void 0,priority:a.priority,propertyId:B,assignedTo:null,dueDate:T.dueDate?new Date(T.dueDate).toISOString():null,estimatedCost:T.estimatedCost??null,isRecurring:!1,recurringType:null,recurringInterval:null,notes:T.notes||null,status:"pending"};await w.mutateAsync(W),t?.(a,B),f({title:"✅ Task Created Successfully",description:`"${a.title}" has been created for the selected property.`}),n(!1),i(null),v.reset()}catch(B){console.error("Error creating task:",B),f({title:"❌ Failed to Create Task",description:"Something went wrong while creating the task. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{className:"bg-gradient-to-br from-white to-slate-50/50 backdrop-blur-sm border border-slate-200/50",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ai,{className:"h-5 w-5"}),"Task Templates",e.jsxs(q,{variant:"secondary",className:"ml-2 bg-emerald-100 text-emerald-700 border-emerald-300",children:[E.length," of ",A.length," templates"]})]})}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(H,{placeholder:"Search templates by name, description, or category...",value:l,onChange:T=>o(T.target.value),className:"pl-10 bg-white/50 backdrop-blur-sm border-slate-200/50 focus:border-emerald-300 focus:ring-emerald-200"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{value:c,onValueChange:d,children:[e.jsx(J,{className:"w-32 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(se,{placeholder:"Priority"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Priority"}),e.jsx(P,{value:"high",children:"High"}),e.jsx(P,{value:"medium",children:"Medium"}),e.jsx(P,{value:"low",children:"Low"})]})]}),e.jsxs(te,{value:u,onValueChange:m,children:[e.jsx(J,{className:"w-40 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(se,{placeholder:"Category"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Categories"}),G.map(T=>e.jsx(P,{value:T,children:T},T))]})]}),e.jsxs(te,{value:h,onValueChange:x,children:[e.jsx(J,{className:"w-32 bg-white/50 backdrop-blur-sm border-slate-200/50",children:e.jsx(se,{placeholder:"Duration"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"Any Duration"}),e.jsxs(P,{value:"short",children:["≤"," 1 hour"]}),e.jsx(P,{value:"medium",children:"1–2 hours"}),e.jsxs(P,{value:"long",children:[">"," 2 hours"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(T=>e.jsxs(O,{className:"group hover:shadow-xl hover:shadow-emerald-500/20 hover:scale-[1.02] transition-all duration-300 bg-gradient-to-br from-white via-white to-slate-50/30 backdrop-blur-sm border border-slate-200/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/60 via-transparent to-white/30 pointer-events-none"}),e.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${M(T.priority)} opacity-80`}),e.jsx(_,{className:"pb-3 relative",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1 text-slate-800",children:T.title}),e.jsx("p",{className:"text-xs text-slate-600 mb-3 leading-relaxed",children:T.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{variant:"outline",className:`${N(T.priority)} shadow-sm transition-all duration-200 hover:scale-105 animate-pulse`,children:[F(T.priority),e.jsx("span",{className:"capitalize font-medium",children:T.priority})]}),e.jsxs(q,{variant:"outline",className:"text-xs bg-slate-50 text-slate-700 border-slate-200",children:[e.jsx(Ke,{className:"h-3 w-3 mr-1"}),T.estimatedDuration,"min"]})]})]})})}),e.jsx(D,{className:"pt-0 relative",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-emerald-50/50 rounded-lg p-2 border border-emerald-100",children:[e.jsxs("span",{className:"text-xs text-emerald-700 font-medium",children:["Category:"," "]}),e.jsx("span",{className:"text-xs font-semibold text-emerald-800",children:T.category})]}),e.jsx("div",{children:e.jsxs(jR,{open:g.has(T.id),onOpenChange:()=>V(T.id),children:[e.jsx(vR,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"sm",className:"w-full justify-between p-2 h-auto bg-slate-50/50 hover:bg-slate-100/50 border border-slate-200/50",children:[e.jsxs("span",{className:"text-xs font-medium text-slate-700",children:["Instructions (",T.instructions.length," ","steps)"]}),g.has(T.id)?e.jsx(HT,{className:"h-3 w-3"}):e.jsx(Jx,{className:"h-3 w-3"})]})}),e.jsx(yR,{className:"mt-2",children:e.jsx("ul",{className:"text-xs text-slate-600 space-y-2 max-h-32 overflow-y-auto bg-white/50 rounded-lg p-3 border border-slate-200/50",children:T.instructions.map((B,W)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-100 border border-emerald-300 flex items-center justify-center mt-0.5 flex-shrink-0",children:e.jsx("span",{className:"text-[10px] font-medium text-emerald-700",children:W+1})}),e.jsx("span",{className:"leading-relaxed",children:B})]},W))})}),!g.has(T.id)&&e.jsx("div",{className:"mt-2",children:e.jsx("ul",{className:"text-xs text-slate-600 space-y-1",children:T.instructions.slice(0,2).map((B,W)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-500 font-medium",children:"•"}),e.jsx("span",{className:"truncate",children:B})]},W))})})]})}),e.jsxs(R,{size:"sm",onClick:()=>I(T),className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-lg hover:shadow-emerald-500/25 transition-all duration-200 hover:scale-105","data-testid":`button-create-task-${T.id}`,children:[e.jsx(ht,{className:"h-3 w-3 mr-1"}),"Create Task"]})]})})]},T.id))}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ai,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-slate-500",children:"Try adjusting your search or filter criteria"})]})]})]}),e.jsx(O,{className:"bg-gradient-to-r from-emerald-50 to-emerald-100/50 border border-emerald-200",children:e.jsx(D,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"h-5 w-5 text-emerald-600"}),e.jsx("h3",{className:"font-semibold text-emerald-800",children:"Task Template Insights"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["High Priority: ",Y.high]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Medium Priority: ",Y.medium]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Low Priority: ",Y.low]})]})]})]})})}),s.length>0&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(R,{size:"lg",onClick:()=>{E.length>0&&I(E[0])},className:"rounded-full shadow-2xl bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white border-4 border-white hover:scale-110 transition-all duration-300 animate-pulse",children:[e.jsx(Ut,{className:"h-5 w-5 mr-2"}),"Quick Create"]})}),e.jsx(Ve,{open:r,onOpenChange:n,children:e.jsxs(qe,{className:"max-w-md max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create Task from Template"}),e.jsx(Pt,{children:a&&`Create "${a.title}" task. Select a property and assign the task.`})]}),e.jsx(Wt,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(Q),className:"space-y-4 overflow-y-auto pr-2",style:{maxHeight:"calc(90vh - 120px)"},children:[e.jsx("input",{type:"hidden",...v.register("propertyId",{required:!0})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Property *"}),e.jsxs(te,{value:y,onValueChange:T=>{v.setValue("propertyId",T,{shouldValidate:!0})},children:[e.jsx(J,{"data-testid":"select-task-property",children:e.jsx(se,{placeholder:"Choose a property"})}),e.jsx(ee,{children:k.map(T=>e.jsx(P,{value:T.id.toString(),children:T.name},T.id))})]}),s.length===0&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Showing all ",k.length," properties"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Assign To"}),e.jsxs(te,{children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select staff member"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"staff1",children:"John Smith (Maintenance)"}),e.jsx(P,{value:"staff2",children:"Sarah Johnson (Cleaning)"}),e.jsx(P,{value:"staff3",children:"Mike Chen (General)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Due Date"}),e.jsx(H,{type:"date",...b("dueDate",{required:!0})})]}),e.jsx(de,{control:v.control,name:"estimatedCost",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Estimated Cost (THB)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",placeholder:"0.00",...T,onChange:B=>{const W=B.target.value;T.onChange(W===""?void 0:parseFloat(W))}})}),e.jsx(Kt,{children:"Optional estimated cost in Thai Baht"}),e.jsx(xe,{})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Additional Notes"}),e.jsx(nt,{placeholder:"Any specific instructions or requirements...",...b("notes"),rows:3})]}),e.jsxs(Nr,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(R,{type:"submit",children:"Create Task"})]})]})})]})})]})}function YCe({open:t,onClose:s}){const{toast:r}=Xe(),[n,a]=j.useState("bookings"),i=Ce({mutationFn:async()=>fe("POST","/api/reports/generate",{type:n}),onSuccess:o=>{r({title:"Report Generated",description:`${n} report has been created successfully`}),s()},onError:o=>{r({title:"Error",description:o.message||"Failed to generate report",variant:"destructive"})}}),l=()=>{i.mutate()};return e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"sm:max-w-md",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Generate Report"}),e.jsx(Pt,{children:"Select a report type to generate comprehensive analytics"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"report-type",children:"Report Type"}),e.jsxs(te,{value:n,onValueChange:a,children:[e.jsx(J,{id:"report-type","data-testid":"select-report-type",children:e.jsx(se,{placeholder:"Select report type"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"bookings",children:"Bookings Report"}),e.jsx(P,{value:"finances",children:"Financial Report"}),e.jsx(P,{value:"tasks",children:"Tasks Report"}),e.jsx(P,{value:"properties",children:"Properties Report"}),e.jsx(P,{value:"occupancy",children:"Occupancy Report"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(R,{onClick:l,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",disabled:i.isPending,"data-testid":"button-generate-report",children:i.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Report"}),e.jsx(R,{variant:"outline",onClick:s,disabled:i.isPending,"data-testid":"button-cancel-report",children:"Cancel"})]})]})]})})}function QCe({open:t,onClose:s}){const{toast:r}=Xe(),n=ut(),[a,i]=j.useState({name:"",description:"",trigger:"booking_due",action:"email",schedule:"0 9 * * *"}),l=Ce({mutationFn:async()=>fe("POST","/api/automations",a),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/automations"]}),r({title:"Automation Created",description:"Your automation rule has been created successfully"}),s(),i({name:"",description:"",trigger:"booking_due",action:"email",schedule:"0 9 * * *"})},onError:c=>{r({title:"Error",description:c.message||"Failed to create automation",variant:"destructive"})}}),o=()=>{if(!a.name||!a.trigger||!a.action){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}l.mutate()};return e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"max-h-[90vh] overflow-y-auto sm:max-w-lg",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create Automation"}),e.jsx(Pt,{children:"Set up automated workflows for property management"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"automation-name",children:"Name *"}),e.jsx(H,{id:"automation-name",placeholder:"e.g., Send booking confirmation",value:a.name,onChange:c=>i({...a,name:c.target.value}),"data-testid":"input-automation-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"automation-description",children:"Description"}),e.jsx(nt,{id:"automation-description",placeholder:"Optional description",value:a.description,onChange:c=>i({...a,description:c.target.value}),"data-testid":"input-automation-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"automation-trigger",children:"Trigger *"}),e.jsxs(te,{value:a.trigger,onValueChange:c=>i({...a,trigger:c}),children:[e.jsx(J,{id:"automation-trigger","data-testid":"select-automation-trigger",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"booking_due",children:"Booking Check-in Due"}),e.jsx(P,{value:"task_overdue",children:"Task Overdue"}),e.jsx(P,{value:"payment_pending",children:"Payment Pending"}),e.jsx(P,{value:"document_expiring",children:"Document Expiring"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"automation-action",children:"Action *"}),e.jsxs(te,{value:a.action,onValueChange:c=>i({...a,action:c}),children:[e.jsx(J,{id:"automation-action","data-testid":"select-automation-action",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"email",children:"Send Email"}),e.jsx(P,{value:"sms",children:"Send SMS"}),e.jsx(P,{value:"push_notification",children:"Push Notification"}),e.jsx(P,{value:"whatsapp",children:"WhatsApp Message"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"automation-schedule",children:"Schedule (Cron Expression)"}),e.jsx(H,{id:"automation-schedule",placeholder:"e.g., 0 9 * * * (daily at 9 AM)",value:a.schedule,onChange:c=>i({...a,schedule:c.target.value}),"data-testid":"input-automation-schedule"})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(R,{onClick:o,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700",disabled:l.isPending,"data-testid":"button-create-automation",children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Automation"}),e.jsx(R,{variant:"outline",onClick:s,disabled:l.isPending,"data-testid":"button-cancel-automation",children:"Cancel"})]})]})]})})}function XCe(){const[t,s]=j.useState(""),[r,n]=j.useState(""),[a,i]=j.useState(null),[l,o]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState(null),[h,x]=j.useState(!1),[g,p]=j.useState(null),[f,v]=j.useState(null),[b,y]=j.useState(!1),{toast:S}=Xe(),w=async()=>{if(!t||!r){S({title:"Missing Information",description:"Please enter both city and state",variant:"destructive"});return}o(!0);try{const A=await fetch(`/api/rentcast/market/search?city=${encodeURIComponent(t)}&state=${encodeURIComponent(r)}&limit=10`),N=await A.json();if(!A.ok)throw new Error(N.message||"Search failed");i(N),S({title:"Search Complete",description:`Found ${N.propertiesCount} properties in ${t}, ${r}`})}catch(A){S({title:"Search Error",description:A.message||"Failed to search market",variant:"destructive"})}finally{o(!1)}},C=async A=>{d(A),x(!0);try{const N=await fetch(`/api/rentcast/properties/${encodeURIComponent(A.id)}/enrich`),M=await N.json();if(N.ok)m(M);else throw new Error(M.message||"Failed to load details")}catch(N){S({title:"Error",description:N.message||"Failed to load property details",variant:"destructive"})}finally{x(!1)}},k=async A=>{p(A),y(!0);try{const N=await fetch(`/api/rentcast/listings/rental/${encodeURIComponent(A.id)}/enrich`),M=await N.json();if(N.ok)v(M);else throw new Error(M.message||"Failed to load details")}catch(N){S({title:"Error",description:N.message||"Failed to load listing details",variant:"destructive"})}finally{y(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-5 w-5 text-purple-600"}),"Search RentCast Market by City/State"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"City"}),e.jsx("input",{type:"text",placeholder:"e.g., Los Angeles",value:t,onChange:A=>s(A.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"w-32",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"State"}),e.jsx("input",{type:"text",placeholder:"CA",value:r,onChange:A=>n(A.target.value.toUpperCase()),maxLength:2,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(R,{onClick:w,disabled:l,className:"bg-purple-600 hover:bg-purple-700",children:l?"Searching...":"Search Market"})})]})})]}),a&&e.jsxs("div",{className:"space-y-6",children:[a.marketData&&e.jsxs(O,{className:"bg-gradient-to-br from-purple-50 to-indigo-50",children:[e.jsx(_,{children:e.jsxs($,{children:["Market Statistics - ",a.city,", ",a.state]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-semibold",children:"Median Rent"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",a.marketData.medianRent?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-indigo-600 font-semibold",children:"Median Price"}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900",children:["$",a.marketData.medianPrice?Math.round(a.marketData.medianPrice/1e3)+"k":"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 font-semibold",children:"Avg Rent"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",a.marketData.averageRent?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-white/80 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-indigo-600 font-semibold",children:"Total Listings"}),e.jsx("div",{className:"text-2xl font-bold text-indigo-900",children:a.marketData.totalListings?.toLocaleString()||"N/A"})]})]})})]}),a.properties&&a.properties.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{children:["Properties Found (",a.propertiesCount,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:a.properties.map((A,N)=>e.jsx("div",{className:"border rounded-lg p-4 bg-slate-50 hover:bg-slate-100 transition-colors cursor-pointer",onClick:()=>C(A),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:A.address}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Type:"})," ",e.jsx("span",{className:"font-medium",children:A.propertyType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Beds:"})," ",e.jsx("span",{className:"font-medium",children:A.bedrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Baths:"})," ",e.jsx("span",{className:"font-medium",children:A.bathrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-600",children:"Sq Ft:"})," ",e.jsx("span",{className:"font-medium",children:A.squareFootage?.toLocaleString()||"N/A"})]})]}),A.lastSalePrice&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Last Sale:"}),e.jsxs("span",{className:"font-medium text-emerald-700 ml-2",children:["$",A.lastSalePrice.toLocaleString(),A.lastSaleDate&&` (${new Date(A.lastSaleDate).getFullYear()})`]})]})]}),e.jsx(R,{variant:"ghost",size:"sm",className:"ml-4",children:"View Details →"})]})},N))})})]}),a.rentalListings&&a.rentalListings.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{children:["Active Rental Listings (",a.rentalListingsCount,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:a.rentalListings.map((A,N)=>e.jsx("div",{className:"border rounded-lg p-4 bg-purple-50 hover:bg-purple-100 transition-colors cursor-pointer",onClick:()=>k(A),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-lg",children:A.address}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Price:"})," ",e.jsxs("span",{className:"font-bold text-purple-900",children:["$",A.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Beds:"})," ",e.jsx("span",{className:"font-medium",children:A.bedrooms})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Baths:"})," ",e.jsx("span",{className:"font-medium",children:A.bathrooms})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"DOM:"})," ",e.jsxs("span",{className:"font-medium",children:[A.daysOnMarket," days"]})]})]})]}),e.jsx(R,{variant:"ghost",size:"sm",className:"ml-4",children:"View Details →"})]})},N))})})]}),(!a.properties||a.properties.length===0)&&(!a.rentalListings||a.rentalListings.length===0)&&e.jsx(O,{children:e.jsx(D,{className:"py-12 text-center text-slate-500",children:"No properties or listings found in this market"})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>d(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:c.address}),e.jsx(R,{variant:"ghost",onClick:()=>d(null),children:"✕"})]}),e.jsx("div",{className:"p-6 space-y-6",children:h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading comprehensive property data..."})]}):u?e.jsxs("div",{className:"space-y-6",children:[(u.rentEstimate||u.valueEstimate)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.rentEstimate&&e.jsxs(O,{className:"bg-gradient-to-br from-purple-50 to-purple-100",children:[e.jsx(_,{children:e.jsx($,{className:"text-purple-900",children:"Estimated Monthly Rent"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:["$",u.rentEstimate.estimatedRent?.toLocaleString()]}),u.rentEstimate.rentRangeLow&&u.rentEstimate.rentRangeHigh&&e.jsxs("div",{className:"text-sm text-purple-700",children:["Range: $",u.rentEstimate.rentRangeLow.toLocaleString()," - $",u.rentEstimate.rentRangeHigh.toLocaleString()]}),u.rentEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:["Based on ",u.rentEstimate.comparablesCount," comparable properties"]})]})]}),u.valueEstimate&&e.jsxs(O,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100",children:[e.jsx(_,{children:e.jsx($,{className:"text-indigo-900",children:"Estimated Property Value"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-indigo-900 mb-2",children:["$",u.valueEstimate.estimatedValue?.toLocaleString()]}),u.valueEstimate.valueRangeLow&&u.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-sm text-indigo-700",children:["Range: $",u.valueEstimate.valueRangeLow.toLocaleString()," - $",u.valueEstimate.valueRangeHigh.toLocaleString()]}),u.valueEstimate.comparablesCount>0&&e.jsxs("div",{className:"text-xs text-indigo-600 mt-2",children:["Based on ",u.valueEstimate.comparablesCount," comparable sales"]})]})]})]}),u.propertyDetails&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Property Information"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Property Type"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.propertyType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Square Footage"}),e.jsxs("div",{className:"font-semibold",children:[u.propertyDetails.squareFootage?.toLocaleString()||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Lot Size"}),e.jsxs("div",{className:"font-semibold",children:[u.propertyDetails.lotSize?.toLocaleString()||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Year Built"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.yearBuilt||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"County"}),e.jsx("div",{className:"font-semibold",children:u.propertyDetails.county||"N/A"})]}),u.propertyDetails.lastSalePrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Last Sale"}),e.jsxs("div",{className:"font-semibold text-emerald-700",children:["$",u.propertyDetails.lastSalePrice.toLocaleString(),u.propertyDetails.lastSaleDate&&` (${new Date(u.propertyDetails.lastSaleDate).getFullYear()})`]})]})]})})]}),u.rentEstimate?.comparables&&u.rentEstimate.comparables.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Rental Comparables"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.rentEstimate.comparables.map((A,N)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-purple-50",children:[e.jsx("div",{className:"font-medium",children:A.formattedAddress}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Rent:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",A.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Beds/Baths:"})," ",A.bedrooms,"bd / ",A.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Distance:"})," ",A.distance.toFixed(1)," mi"]})]})]},N))})})]}),u.nearbyRentals?.listings&&u.nearbyRentals.listings.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{children:["Nearby Rental Listings (",u.nearbyRentals.count,")"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:u.nearbyRentals.listings.map((A,N)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-indigo-50",children:[e.jsx("div",{className:"font-medium",children:A.address}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Price:"})," ",e.jsxs("span",{className:"font-bold",children:["$",A.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Size:"})," ",A.bedrooms,"bd / ",A.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"DOM:"})," ",A.daysOnMarket," days"]})]})]},N))})})]}),u.marketData&&e.jsxs(O,{className:"bg-gradient-to-br from-emerald-50 to-teal-50",children:[e.jsx(_,{children:e.jsx($,{children:"Local Market Statistics"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.marketData.medianRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Median Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",u.marketData.medianRent.toLocaleString()]})]}),u.marketData.averageRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Avg Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",u.marketData.averageRent.toLocaleString()]})]}),u.marketData.medianPrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Median Price"}),e.jsxs("div",{className:"text-xl font-bold text-teal-900",children:["$",Math.round(u.marketData.medianPrice/1e3),"k"]})]}),u.marketData.inventoryCount&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Inventory"}),e.jsx("div",{className:"text-xl font-bold text-teal-900",children:u.marketData.inventoryCount.toLocaleString()})]})]})})]})]}):e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No detailed data available for this property"})})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>p(null),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:g.address}),e.jsx(R,{variant:"ghost",onClick:()=>p(null),children:"✕"})]}),e.jsx("div",{className:"p-6 space-y-6",children:b?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading comprehensive listing data..."})]}):f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(O,{className:"bg-gradient-to-br from-purple-50 to-purple-100",children:[e.jsx(_,{children:e.jsx($,{className:"text-purple-900",children:"Monthly Rent"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-900 mb-2",children:["$",f.listingDetails?.price?.toLocaleString(),"/mo"]}),e.jsx("div",{className:"text-sm text-purple-700",children:f.listingDetails?.status||"Active"}),e.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:["Listed ",f.listingDetails?.daysOnMarket||0," days ago"]})]})]}),e.jsxs(O,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100",children:[e.jsx(_,{children:e.jsx($,{className:"text-indigo-900",children:"Property Details"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Type:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:f.listingDetails?.propertyType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Bedrooms:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:f.listingDetails?.bedrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Bathrooms:"})," ",e.jsx("span",{className:"font-semibold ml-2",children:f.listingDetails?.bathrooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-indigo-600",children:"Square Footage:"})," ",e.jsxs("span",{className:"font-semibold ml-2",children:[f.listingDetails?.squareFootage?.toLocaleString()||"N/A"," sq ft"]})]})]})})]})]}),f.comparableListings&&f.comparableListings.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Comparable Rental Listings"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:f.comparableListings.map((A,N)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-purple-50",children:[e.jsx("div",{className:"font-medium",children:A.address}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Rent:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",A.price.toLocaleString(),"/mo"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"Size:"})," ",A.bedrooms,"bd / ",A.bathrooms,"ba"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-600",children:"DOM:"})," ",A.daysOnMarket," days"]})]})]},N))})})]}),f.marketData&&e.jsxs(O,{className:"bg-gradient-to-br from-emerald-50 to-teal-50",children:[e.jsx(_,{children:e.jsx($,{children:"Local Market Statistics"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.marketData.medianRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Median Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",f.marketData.medianRent.toLocaleString()]})]}),f.marketData.averageRent&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-emerald-700",children:"Avg Rent"}),e.jsxs("div",{className:"text-xl font-bold text-emerald-900",children:["$",f.marketData.averageRent.toLocaleString()]})]}),f.marketData.medianPrice&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Median Price"}),e.jsxs("div",{className:"text-xl font-bold text-teal-900",children:["$",Math.round(f.marketData.medianPrice/1e3),"k"]})]}),f.marketData.inventoryCount&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-teal-700",children:"Inventory"}),e.jsx("div",{className:"text-xl font-bold text-teal-900",children:f.marketData.inventoryCount.toLocaleString()})]})]})})]}),f.valueEstimate&&e.jsxs(O,{className:"bg-gradient-to-br from-amber-50 to-yellow-50",children:[e.jsx(_,{children:e.jsx($,{className:"text-amber-900",children:"Estimated Property Value"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-3xl font-bold text-amber-900 mb-2",children:["$",f.valueEstimate.estimatedValue?.toLocaleString()]}),f.valueEstimate.valueRangeLow&&f.valueEstimate.valueRangeHigh&&e.jsxs("div",{className:"text-sm text-amber-700",children:["Range: $",f.valueEstimate.valueRangeLow.toLocaleString()," - $",f.valueEstimate.valueRangeHigh.toLocaleString()]})]})]})]}):e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No detailed data available for this listing"})})]})})]})}function ZCe(){const{user:t}=vn(),[,s]=pr(),[r,n]=j.useState("properties"),[a,i]=j.useState([]),[l,o]=j.useState({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),[c,d]=j.useState(1),[u]=j.useState(12),[m,h]=j.useState(!1),[x,g]=j.useState(!1),[p,f]=j.useState(!1),[v,b]=j.useState(!1),[y,S]=j.useState(!1),w=ut(),{toast:C}=Xe(),k=Ce({mutationFn:async Pe=>{await fe("DELETE",`/api/properties/${Pe}`)},onSuccess:()=>{w.invalidateQueries({queryKey:["/api/properties"]}),C({title:"Success",description:"Property deleted successfully"}),i(Pe=>Pe.filter(mt=>mt.id!==k.variables))},onError:Pe=>{C({title:"Error",description:"Failed to delete property",variant:"destructive"})}}),A=Pe=>{window.confirm("Are you sure you want to delete this property? This action cannot be undone.")&&k.mutate(Pe)},N=()=>{o({search:"",location:"",status:"",propertyType:"",occupancyMin:0,occupancyMax:100,roiMin:0,roiMax:50,hasMaintenanceTasks:!1,lastBookingFrom:"",lastBookingTo:""}),F(null),window.location.search&&window.history.replaceState({},"",window.location.pathname),E(),C({title:"Refreshed",description:"Property list updated and filters reset"})},[M,F]=j.useState(null);j.useEffect(()=>{const mt=new URLSearchParams(window.location.search).get("property");mt&&F(parseInt(mt,10))},[]);const{data:I=[],isLoading:V,refetch:E}=ge({queryKey:["/api/properties"],staleTime:10*60*1e3});console.log("properties",I);const{data:G=[],isLoading:Y}=ge({queryKey:["/api/bookings"],staleTime:10*60*1e3}),{data:Q=[]}=ge({queryKey:["/api/property-documents/expiring?days=30"],staleTime:0}),{data:T=[]}=ge({queryKey:["/api/property-insurance/expiring/30"],staleTime:0}),B=Array.isArray(I)?I:[],W=Array.isArray(G)?G:[],{data:he={}}=ge({queryKey:["/api/rentcast/enrich-properties"],enabled:B.length>0,staleTime:60*60*1e3}),Se=he||{},z=Pe=>{const mt=Q.some(os=>os.propertyId===Pe),Mt=T.some(os=>os.propertyId===Pe);if(mt||Mt){const os=Q.find(ie=>ie.propertyId===Pe&&new Date(ie.expiryDate)<new Date),lr=T.find(ie=>ie.propertyId===Pe&&new Date(ie.expiryDate)<new Date);return os||lr?"expired":"expiring"}return null},L=j.useMemo(()=>B.filter(Pe=>{if(M!==null&&Pe.id!==M||l.search&&!Pe.name.toLowerCase().includes(l.search.toLowerCase())||l.location&&!Pe.address?.toLowerCase().includes(l.location.toLowerCase())||l.status&&Pe.status!==l.status)return!1;const mt=Pe.occupancyRate||Math.floor(Math.random()*30)+60;if(mt<l.occupancyMin||mt>l.occupancyMax)return!1;const Mt=Pe.roi||Math.random()*20+5;if(Mt<l.roiMin||Mt>l.roiMax||l.propertyType&&(Pe.propertyType||(Pe.name?.toLowerCase().includes("villa")?"villa":Pe.name?.toLowerCase().includes("apartment")?"apartment":Pe.name?.toLowerCase().includes("condo")?"condo":Pe.name?.toLowerCase().includes("resort")?"resort":"villa"))!==l.propertyType)return!1;if(l.lastBookingFrom||l.lastBookingTo){const os=Pe.lastBookingDate||"2024-12-15",lr=new Date(os);if(l.lastBookingFrom){const ie=new Date(l.lastBookingFrom);if(lr<ie)return!1}if(l.lastBookingTo){const ie=new Date(l.lastBookingTo);if(lr>ie)return!1}}return!(l.hasMaintenanceTasks&&(Pe.maintenanceTasks||Math.floor(Math.random()*5))===0)}),[B,l,M]),le=Math.ceil(L.length/u),Z=j.useMemo(()=>{const Pe=(c-1)*u;return L.slice(Pe,Pe+u)},[L,c,u]);j.useEffect(()=>{d(1)},[l]);const me=()=>{c<le&&d(Pe=>Pe+1)},U=(Pe,mt)=>{i(mt?Mt=>[...Mt,Pe]:Mt=>Mt.filter(os=>os.id!==Pe.id))},je=()=>{a.length===L.length?i([]):i(L)},ye=()=>{i([])},ae=Pe=>{s(`/property/${Pe.id}`)},pe=(Pe,mt)=>{C({title:"Task Created",description:`Created "${Pe.title}" for property ID ${mt}`})},Je=B.map((Pe,mt)=>({id:Pe.id,name:Pe.name,color:`hsl(${mt*137.5%360}, 70%, 50%)`})),et=W.map(Pe=>({id:Pe.id,propertyId:Pe.propertyId||Math.floor(Math.random()*B.length)+1,propertyName:Pe.propertyName||"Unknown Property",guestName:Pe.guestName||"Guest",guestEmail:Pe.guestEmail,guestPhone:Pe.guestPhone,checkIn:Pe.checkInDate||Pe.checkIn||"2024-08-01",checkOut:Pe.checkOutDate||Pe.checkOut||"2024-08-02",status:Pe.status||"confirmed",totalAmount:Pe.totalAmount||0,invoiceId:Pe.invoiceId,guestId:Pe.guestId}));return V||Y?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading Property Hub..."})]})}):e.jsxs("div",{className:"min-h-screen flex bg-background",children:[e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(Mi,{title:"Property Management"}),e.jsxs("main",{className:"flex-1 overflow-auto p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute top-0 left-0 z-50",children:e.jsx(Oc,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex items-center justify-between pt-10",children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-3 flex items-center gap-4",children:"🏠 Property Management Hub"}),e.jsx("p",{className:"text-lg text-slate-600 mb-2",children:"Enhanced property management with advanced filtering, bulk actions, and calendar views"}),e.jsxs("div",{className:"mt-3 text-sm text-emerald-600 font-medium flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 bg-emerald-500 rounded-full animate-pulse"}),"Connected to Dashboard • Showing Real Data from API"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[t?.role==="admin"&&e.jsxs(R,{onClick:()=>h(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white hover:scale-105 transition-all duration-200","data-testid":"button-add-property",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Property"]}),e.jsxs(R,{variant:"outline",onClick:N,className:"hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-700 hover:scale-105 transition-all duration-200","data-testid":"button-refresh",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(q,{variant:"outline",className:"px-4 py-2 text-sm bg-emerald-100 text-emerald-700 border-emerald-200 font-semibold cursor-pointer hover:bg-emerald-200 hover:scale-105 transition-all duration-200 flex items-center gap-2 whitespace-nowrap rounded-lg",onClick:N,"data-testid":"badge-properties-counter",children:[B.length," Properties"]})]})]})]}),e.jsxs(ot,{value:r,onValueChange:n,className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsxs(re,{value:"properties",className:"flex items-center gap-2",children:[e.jsx(qw,{className:"h-4 w-4"}),"Property Cards"]}),e.jsxs(re,{value:"rentcast-search",className:"flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"RentCast Search"]}),e.jsxs(re,{value:"calendar",className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Calendar View"]}),e.jsxs(re,{value:"templates",className:"flex items-center gap-2",children:[e.jsx(Ai,{className:"h-4 w-4"}),"Task Templates"]}),e.jsxs(re,{value:"grid",className:"flex items-center gap-2",children:[e.jsx(XT,{className:"h-4 w-4"}),"Management Tools"]})]}),e.jsxs(ne,{value:"properties",className:"space-y-8",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2"}),e.jsx(GCe,{filters:l,onFiltersChange:o,totalProperties:B.length,filteredCount:L.length}),e.jsx(HCe,{selectedProperties:a,onClearSelection:ye,onRefresh:E}),L.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-white/50 p-4 rounded-lg border border-slate-200/50 backdrop-blur-sm",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:je,className:"hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-700 hover:scale-105 transition-all duration-200",children:[a.length===L.length?"Deselect All":"Select All","(",L.length,")"]}),e.jsxs("div",{className:"text-sm text-slate-600 font-medium",children:[a.length," of ",L.length," ","selected"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:Z.map(Pe=>e.jsx(IM,{property:Pe,isSelected:a.some(mt=>mt.id===Pe.id),onSelect:mt=>U(Pe,mt),onViewDetails:()=>ae(Pe),onDelete:()=>A(Pe.id),expiryStatus:z(Pe.id),rentcastData:Se[Pe.id]},Pe.id))}),L.length>u&&e.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-600 bg-white/50 px-4 py-2 rounded-lg border border-slate-200/50 backdrop-blur-sm",children:["Showing"," ",Math.min(c*u,L.length)," ","of ",L.length," properties",c<le&&` • Page ${c} of ${le}`]}),c<le&&e.jsxs(R,{onClick:me,variant:"outline",size:"lg",className:"bg-emerald-50 hover:bg-emerald-100 border-emerald-200 text-emerald-700 hover:text-emerald-800 hover:scale-105 transition-all duration-200 shadow-sm",children:["📄 Load More Properties (",L.length-c*u," ","remaining)"]}),c>=le&&L.length>u&&e.jsx("div",{className:"text-sm text-emerald-600 font-medium bg-emerald-50 px-4 py-2 rounded-lg border border-emerald-200",children:"✅ All properties loaded!"})]}),L.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_s,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No properties found"}),e.jsx("p",{className:"text-slate-600",children:"Try adjusting your filters to see more properties."})]})]}),e.jsx(ne,{value:"rentcast-search",className:"space-y-6",children:e.jsx(XCe,{})}),e.jsx(ne,{value:"calendar",children:Je.length>0?e.jsx(KCe,{properties:Je,bookings:et}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(We,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No Properties Available"}),e.jsx("p",{className:"text-slate-600",children:"Add properties to view the calendar."})]})}),e.jsx(ne,{value:"templates",children:e.jsx(WCe,{selectedProperties:a,onCreateTask:pe})}),e.jsxs(ne,{value:"grid",className:"space-y-6",children:[e.jsx(O,{className:"bg-gradient-to-r from-emerald-50 via-emerald-100/50 to-emerald-50 backdrop-blur-sm border border-emerald-200/50",children:e.jsx(D,{className:"py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-8 text-sm font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"📊"}),e.jsxs("span",{className:"text-emerald-800",children:["Active Bookings:"," ",e.jsx("strong",{children:W.length})]})]}),e.jsx("div",{className:"text-emerald-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🔧"}),e.jsxs("span",{className:"text-emerald-800",children:["Pending Tasks: ",e.jsx("strong",{children:"7"})]})]}),e.jsx("div",{className:"text-emerald-300",children:"|"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🏢"}),e.jsxs("span",{className:"text-emerald-800",children:["Total Properties:"," ",e.jsx("strong",{children:B.length})]})]})]})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Properties List",description:"View and manage all properties with detailed information and status",href:"/property-hub",icon:_s,badge:"Core",badgeIcon:"🏠",stats:`${B.length} total properties`,actionText:"Add Property",actionIcon:"➕"},{title:"Calendar & Bookings",description:"Booking calendar, reservations management, and availability tracking",href:"/bookings",icon:We,badge:"Bookings",badgeIcon:"📅",stats:`${W.length} bookings this week`,actionText:"Create Booking",actionIcon:"📅"},{title:"Property Tasks",description:"Task management for cleaning, maintenance, and property operations",href:"/tasks",icon:Ai,badge:"Tasks",badgeIcon:"✅",stats:"7 open tasks",actionText:"Add Task",actionIcon:"📝"},{title:"Reports & Analytics",description:"Generate comprehensive reports and analytics with PDF/CSV export capabilities",href:"/reports",icon:qw,badge:"Analytics",badgeIcon:"📊",stats:"3 reports ready",actionText:"Generate Report",actionIcon:"📈"},{title:"Automation & Alerts",description:"Smart reminders, AI insights, and automated property management workflows",href:"/automation",icon:cs,badge:"AI & Auto",badgeIcon:"🤖",stats:"5 active rules",actionText:"Setup Alert",actionIcon:"⚡"}].map(Pe=>{const mt=Pe.icon,Mt=e.jsxs(O,{className:`h-full flex flex-col group cursor-pointer transition-all duration-500 ease-in-out bg-gradient-to-br from-white via-slate-50/40 to-emerald-50/20 backdrop-blur-sm border border-slate-200/60 hover:border-emerald-300/50 hover:shadow-2xl hover:shadow-emerald-500/30 hover:scale-[1.05] hover:-translate-y-2 relative overflow-hidden ${Pe.isComingSoon?"opacity-85":""}`,onClick:()=>!Pe.isComingSoon&&s(Pe.href),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/70 via-emerald-50/30 to-white/40 opacity-80 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-500/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),Pe.isComingSoon&&e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx(q,{className:"bg-gradient-to-r from-yellow-100 to-yellow-50 text-yellow-800 border-yellow-400/50 text-xs shadow-lg backdrop-blur-sm",children:"Coming Soon"})}),e.jsxs(_,{className:"pb-3 relative z-10 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-emerald-100/80 via-emerald-50/60 to-white/40 backdrop-blur-sm rounded-xl shadow-xl border border-emerald-200/50 group-hover:shadow-emerald-300/60 group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 ease-out flex-shrink-0",children:e.jsx(mt,{className:"h-5 w-5 text-emerald-700 group-hover:text-emerald-800 transition-colors duration-300"})}),e.jsx($,{className:"text-base font-semibold text-slate-800 group-hover:text-slate-900 transition-colors duration-300 line-clamp-2",children:Pe.title})]}),e.jsxs(q,{className:"bg-gradient-to-r from-emerald-100/90 via-emerald-50/70 to-white/50 text-emerald-800 border-emerald-300/60 shadow-lg backdrop-blur-sm group-hover:shadow-emerald-200/80 transition-all duration-300 text-xs whitespace-nowrap flex-shrink-0",children:[e.jsx("span",{className:"mr-1",children:Pe.badgeIcon}),Pe.badge]})]}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50/80 via-white/60 to-slate-50/80 backdrop-blur-sm rounded-lg p-2.5 border border-slate-200/60 group-hover:border-emerald-200/60 group-hover:bg-gradient-to-r group-hover:from-emerald-50/40 group-hover:via-white/70 group-hover:to-emerald-50/40 transition-all duration-300",children:e.jsx("p",{className:"text-xs font-medium text-slate-700 group-hover:text-emerald-800 transition-colors duration-300 truncate",children:Pe.stats})})]}),e.jsxs(D,{className:"flex flex-col flex-1 relative z-10 pt-0",children:[e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-700 transition-colors duration-300 line-clamp-3 mb-4 flex-1",children:Pe.description}),e.jsxs(R,{size:"sm",className:`w-full bg-gradient-to-r from-emerald-500 via-emerald-600 to-emerald-500 hover:from-emerald-600 hover:via-emerald-700 hover:to-emerald-600 text-white shadow-xl hover:shadow-2xl hover:shadow-emerald-500/40 transition-all duration-300 group-hover:scale-105 backdrop-blur-sm border border-emerald-400/30 hover:border-emerald-300/50 mt-auto ${Pe.isComingSoon?"opacity-60 cursor-not-allowed":""}`,disabled:Pe.isComingSoon,onClick:os=>{os.stopPropagation(),Pe.isComingSoon||(Pe.actionText==="Add Property"?h(!0):Pe.actionText==="Create Booking"?g(!0):Pe.actionText==="Add Task"?f(!0):Pe.actionText==="Generate Report"?b(!0):Pe.actionText==="Setup Alert"&&S(!0))},children:[e.jsx("span",{className:"mr-2 text-base group-hover:scale-110 transition-transform duration-200",children:Pe.actionIcon}),Pe.isComingSoon?"Coming Soon":Pe.actionText]})]})]},Pe.href);return Pe.isComingSoon?e.jsx(Yu,{children:e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:Mt}),e.jsx(Da,{side:"top",className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white border border-slate-600 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold text-sm",children:Pe.title}),e.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Feature launching soon!"}),e.jsx("p",{className:"text-xs text-emerald-300 mt-1",children:"Stay tuned for updates"})]})})]})},Pe.href):Mt})})]})]})]}),e.jsx("footer",{className:"mt-12 border-t border-slate-200 bg-slate-50/30 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-8 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"font-medium",children:"System Online"})]}),e.jsx("div",{className:"text-slate-400",children:"|"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:"Last Updated: Today"})}),e.jsx("div",{className:"text-slate-400",children:"|"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold text-emerald-600",children:"v2.0.1"})})]})}),e.jsx("div",{className:"text-center text-sm text-slate-500 mt-2",children:"HostPilotPro Property Management • Enterprise Edition"})]})})]})]}),e.jsx(Rp,{open:m,onOpenChange:h}),e.jsx(Ep,{open:x,onOpenChange:g}),e.jsx(Tp,{isOpen:p,onOpenChange:f}),e.jsx(YCe,{open:v,onClose:()=>b(!1)}),e.jsx(QCe,{open:y,onClose:()=>S(!1)})]})}function yj(t){return/^401: .*Unauthorized/.test(t.message)}const JCe=Qt({type:Ne().min(1,"Type is required"),source:Ne().min(1,"Source is required"),sourceType:Ne().optional(),category:Ne().min(1,"Category is required"),subcategory:Ne().optional(),amount:Ne().min(1,"Amount is required"),description:Ne().optional(),date:Ne().min(1,"Date is required"),dueDate:Ne().optional(),status:Ne().default("pending"),propertyId:Ne().optional(),bookingId:Ne().optional(),ownerId:Ne().optional(),agentId:Ne().optional(),referenceNumber:Ne().optional(),isRecurring:Vr().default(!1),recurringType:Ne().optional()}),bj=[{value:"guest-payment",label:"Guest Payment",icon:Dr,description:"Payment received from guests",color:"text-green-600"},{value:"owner-charge",label:"Owner Charge",icon:It,description:"Expense charged to property owner",color:"text-blue-600"},{value:"company-expense",label:"Company Expense",icon:_s,description:"Business operational expense",color:"text-purple-600"},{value:"complimentary",label:"Complimentary",icon:Id,description:"Complimentary service or gift",color:"text-orange-600"}],ePe={"booking-payment":"Booking Payment",cleaning:"Cleaning Services",maintenance:"Property Maintenance",utilities:"Utilities",electricity:"Electricity",water:"Water",gas:"Gas",internet:"Internet/WiFi",commission:"Agent Commission","add-on-service":"Add-on Services",massage:"Massage Services","chef-service":"Chef Services",transportation:"Transportation","pool-service":"Pool Maintenance","garden-service":"Garden Maintenance",supplies:"Property Supplies",repairs:"Repairs",insurance:"Insurance","management-fee":"Management Fee",marketing:"Marketing/Advertising",other:"Other"};function tPe({open:t,onOpenChange:s}){const{user:r}=Rr(),{toast:n}=Xe(),a=ut(),[i,l]=j.useState(!1),o=Ft({resolver:es(JCe),defaultValues:{type:"expense",source:"",sourceType:"",category:"",subcategory:"",amount:"",description:"",date:new Date().toISOString().split("T")[0],dueDate:"",status:"pending",propertyId:"",bookingId:"",ownerId:"",agentId:"",referenceNumber:"",isRecurring:!1,recurringType:""}}),{data:c=[]}=ge({queryKey:["/api/properties"],retry:(p,f)=>yj(f)?!1:p<3}),{data:d=[]}=ge({queryKey:["/api/bookings"],retry:(p,f)=>yj(f)?!1:p<3}),u=Ce({mutationFn:async p=>{const{referenceNumber:f,isRecurring:v,recurringType:b,...y}=p,S={type:y.type,source:y.source,category:y.category,amount:y.amount,date:y.date,processedBy:r?.id,organizationId:r?.organizationId||"default-org",department:"administration",currency:"THB",status:y.status||"pending"};return y.sourceType&&(S.sourceType=y.sourceType),y.subcategory&&(S.subcategory=y.subcategory),y.description&&(S.description=y.description),y.dueDate&&(S.dueDate=y.dueDate),y.propertyId&&(S.propertyId=parseInt(y.propertyId)),y.bookingId&&(S.bookingId=parseInt(y.bookingId)),y.ownerId&&(S.ownerId=y.ownerId),y.agentId&&(S.agentId=y.agentId),console.log("Creating finance record with data:",S),await fe("POST","/api/finances",S)},onSuccess:async()=>{yM(a),n({title:"Finance Record Created",description:"The financial record has been added successfully."}),o.reset(),s(!1)},onError:p=>{if(yj(p)){n({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}n({title:"Failed to Create Record",description:"Please check all fields and try again.",variant:"destructive"})}}),m=p=>{u.mutate(p)},h=o.watch("source");o.watch("type");const x=p=>{o.setValue("source",p),l(p==="complimentary"),p!=="complimentary"&&o.setValue("sourceType","")},g=p=>{const f=bj.find(v=>v.value===p);return f?f.icon:He};return e.jsx(Ve,{open:t,onOpenChange:s,children:e.jsxs(qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ue,{children:e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(xa,{className:"h-5 w-5"}),"Create Financial Record"]})}),e.jsx(Wt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(m),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4 text-blue-500"}),e.jsx("h3",{className:"font-medium text-sm",children:"Source & Traceability"})]}),e.jsx(de,{control:o.control,name:"source",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Financial Source *"}),e.jsxs(te,{onValueChange:x,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select source of funds"})})}),e.jsx(ee,{children:bj.map(f=>{const v=f.icon;return e.jsx(P,{value:f.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:`h-4 w-4 ${f.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:f.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:f.description})]})]})},f.value)})})]}),e.jsx(xe,{})]})}),i&&e.jsx(de,{control:o.control,name:"sourceType",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Complimentary Type"}),e.jsxs(te,{onValueChange:p.onChange,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select complimentary type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"owner-gift",children:"Owner Gift"}),e.jsx(P,{value:"company-gift",children:"Company Gift"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"referenceNumber",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Reference Number"}),e.jsx(ce,{children:e.jsx(H,{...p,placeholder:"Invoice #, Receipt #, or external reference",className:"font-mono text-sm"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:o.control,name:"type",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Record Type *"}),e.jsxs(te,{onValueChange:p.onChange,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"income",children:"Income"}),e.jsx(P,{value:"expense",children:"Expense"}),e.jsx(P,{value:"commission",children:"Commission"}),e.jsx(P,{value:"fee",children:"Fee"}),e.jsx(P,{value:"payout",children:"Payout"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"category",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Category *"}),e.jsxs(te,{onValueChange:p.onChange,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select category"})})}),e.jsx(ee,{children:Object.entries(ePe).map(([f,v])=>e.jsx(P,{value:f,children:v},f))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"amount",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Amount *"}),e.jsx(ce,{children:e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(H,{...p,type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"pl-10"})]})}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"date",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Date *"}),e.jsx(ce,{children:e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(H,{...p,type:"date",className:"pl-10"})]})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:o.control,name:"propertyId",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Property (Optional)"}),e.jsxs(te,{onValueChange:p.onChange,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})})}),e.jsx(ee,{children:c.map(f=>e.jsx(P,{value:f.id.toString(),children:f.name},f.id))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:o.control,name:"status",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Status"}),e.jsxs(te,{onValueChange:p.onChange,value:p.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select status"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"paid",children:"Paid"}),e.jsx(P,{value:"overdue",children:"Overdue"}),e.jsx(P,{value:"scheduled",children:"Scheduled"})]})]}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:o.control,name:"description",render:({field:p})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Description"}),e.jsx(ce,{children:e.jsx(nt,{...p,placeholder:"Additional details about this financial record...",className:"min-h-[80px]"})}),e.jsx(xe,{})]})}),h&&e.jsxs("div",{className:"p-3 border rounded-lg bg-blue-50 dark:bg-blue-950",children:[e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const p=g(h),f=bj.find(v=>v.value===h);return e.jsxs(e.Fragment,{children:[e.jsx(p,{className:`h-4 w-4 ${f?.color||"text-blue-500"}`}),e.jsxs("span",{className:"font-medium text-sm",children:["Record will be tagged as: ",f?.label]})]})})()}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Processed by: ",r?.firstName," ",r?.lastName," • ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:u.isPending,className:"min-w-[100px]",children:u.isPending?"Creating...":"Create Record"})]})]})})]})})}function sPe(){const{toast:t}=Xe(),[s,r]=j.useState(!1),[n,a]=j.useState(!1),[i,l]=j.useState("all"),[o,c]=j.useState("all"),[d,u]=j.useState(""),[m,h]=j.useState(""),{data:x,isLoading:g}=ge({queryKey:i!=="all"?fs.finance.analytics(i):fs.finance.analytics()}),{data:p=[],isLoading:f}=ge({queryKey:fs.finance.all()}),{data:v=[]}=ge({queryKey:fs.properties.all()}),{data:b=[]}=ge({queryKey:i!=="all"?fs.bookings.withSource(i):fs.bookings.all()}),S=new URLSearchParams(window.location.search).get("propertyId");j.useEffect(()=>{S&&l(S)},[S]);const w=S?v.find(E=>E.id===parseInt(S)):null,C=async()=>{r(!0);try{await Promise.all([ws.refetchQueries({queryKey:fs.finance.all()}),ws.refetchQueries({predicate:E=>{const G=E.queryKey[0];return typeof G=="string"&&G.includes("/api/finance/analytics")}})]),t({title:"Refreshed",description:"Finance data has been updated."})}catch{t({title:"Error",description:"Failed to refresh finance data.",variant:"destructive"})}finally{r(!1)}},k=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(E),A=j.useMemo(()=>{let E=[...p];return i!=="all"&&(E=E.filter(G=>String(G.propertyId)===i)),o!=="all"&&(E=E.filter(G=>G.category===o)),d&&(E=E.filter(G=>new Date(G.date)>=new Date(d))),m&&(E=E.filter(G=>new Date(G.date)<=new Date(m))),E.sort((G,Y)=>new Date(Y.date).getTime()-new Date(G.date).getTime())},[p,i,o,d,m]),N=j.useMemo(()=>{const E=new Set(p.map(G=>G.category));return Array.from(E).sort()},[p]),M=j.useMemo(()=>A.slice(0,10),[A]),F=j.useMemo(()=>b.filter(E=>parseFloat(E.amountDue||"0")>0),[b]),I=j.useMemo(()=>F.reduce((E,G)=>E+parseFloat(G.amountDue||"0"),0),[F]),V=()=>{l("all"),c("all"),u(""),h("")};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:S&&w?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(Oc,{fallbackRoute:S?`/bookings?propertyId=${S}`:"/bookings",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Property"})})}),e.jsxs("h1",{className:"text-3xl mt-4 font-bold text-gray-900",children:["Finance Hub - ",w.name]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Financial data for this property"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Finance Hub"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Comprehensive financial management and analytics"})]})}),e.jsxs("div",{className:"flex gap-2",children:[S&&e.jsx(R,{variant:"outline",onClick:()=>window.location.href="/finance-hub","data-testid":"button-view-all-finances",children:"View All Finances"}),e.jsxs(R,{onClick:C,variant:"outline",disabled:s,"data-testid":"button-refresh-finance",children:[e.jsx(cs,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),e.jsxs(R,{onClick:()=>a(!0),"data-testid":"button-create-finance",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Ot,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k(x?.totalRevenue||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["From ",x?.confirmedBookingsCount||0," confirmed bookings"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Expenses"}),e.jsx(_l,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:k(x?.totalExpenses||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["From ",p.filter(E=>E.type==="expense").length," ","expense transactions"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Net Profit"}),e.jsx(He,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:`text-2xl font-bold ${(x?.netProfit||0)>=0?"text-green-600":"text-red-600"}`,children:k(x?.netProfit||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x?.profitMargin?.toFixed(1),"% profit margin"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Payments"}),e.jsx(na,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:k(x?.pendingPayments||0)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["From ",x?.pendingBookingsCount||0," pending bookings"]})]})]})]}),!S&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{children:"Filters"}),(i!=="all"||o!=="all"||d||m)&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:V,"data-testid":"button-clear-filters",children:[e.jsx(Is,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"property-filter",children:"Property"}),e.jsxs(te,{value:i,onValueChange:l,children:[e.jsx(J,{id:"property-filter","data-testid":"select-property-filter",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),v.map(E=>e.jsx(P,{value:String(E.id),children:E.name},E.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"category-filter",children:"Category"}),e.jsxs(te,{value:o,onValueChange:c,children:[e.jsx(J,{id:"category-filter","data-testid":"select-category-filter",children:e.jsx(se,{placeholder:"All Categories"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Categories"}),N.map(E=>e.jsx(P,{value:E,children:E},E))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"date-from",children:"Date From"}),e.jsx(H,{id:"date-from",type:"date",value:d,onChange:E=>u(E.target.value),"data-testid":"input-date-from"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"date-to",children:"Date To"}),e.jsx(H,{id:"date-to",type:"date",value:m,onChange:E=>h(E.target.value),"data-testid":"input-date-to"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Recent Transactions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",M.length," of"," ",A.length," transactions"]})]}),e.jsx(D,{children:f?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(cs,{className:"h-8 w-8 animate-spin text-gray-400"})}):M.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(na,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No transactions found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters or add a new transaction"})]}):e.jsx("div",{className:"space-y-3",children:M.map(E=>{const G=v.find(T=>T.id===E.propertyId),Y=E.attachments&&E.attachments.length>0,Q=E.referenceNumber?.startsWith("TASK-");return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors","data-testid":`transaction-${E.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full ${E.type==="income"?"bg-green-100":"bg-red-100"}`,children:E.type==="income"?e.jsx(qT,{className:"h-4 w-4 text-green-600"}):e.jsx(BT,{className:"h-4 w-4 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:E.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:new Date(E.date).toLocaleDateString()}),G&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500",children:G.name})]}),e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsx(q,{variant:"outline",className:"text-xs",children:E.category}),Q&&e.jsx(As,{className:"h-4 w-4 text-blue-600 ml-1",title:"Task expense","data-testid":`task-indicator-${E.id}`}),Y&&e.jsx(Mn,{className:"h-4 w-4 text-green-600 ml-1",title:`${E.attachments?.length} evidence photo(s) attached`,"data-testid":`evidence-indicator-${E.id}`})]})]})]}),e.jsxs("div",{className:`text-lg font-semibold ${E.type==="income"?"text-green-600":"text-red-600"}`,children:[E.type==="income"?"+":"-",k(Math.abs(E.amount))]})]},E.id)})})})]}),e.jsxs(O,{className:"border-l-4 border-l-red-500",children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Dr,{className:"h-5 w-5 text-red-600"}),"Outstanding Payments"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Payments due from bookings"})]}),I>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Outstanding"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["$",k(I).replace("$","")]})]})]})}),e.jsx(D,{children:F.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Mn,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 font-medium",children:"All Payments Up to Date"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No outstanding payments from bookings"})]}):e.jsx("div",{className:"space-y-3",children:F.map(E=>{const G=v.find(W=>W.id===E.propertyId),Y=parseFloat(E.amountDue||"0"),Q=parseFloat(E.totalAmount||"0"),T=parseFloat(E.amountPaid||"0"),B=Q>0?T/Q*100:0;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50/50","data-testid":`outstanding-booking-${E.id}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:E.guestName}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[G&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-600",children:G.name}),e.jsx("span",{className:"text-gray-300",children:"•"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Check-in:"," ",new Date(E.checkIn).toLocaleDateString()]}),e.jsx("span",{className:"text-gray-300",children:"•"}),e.jsx(q,{className:`${E.paymentStatus==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"} text-xs`,children:E.paymentStatus})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${B}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:["$",k(T).replace("$","")," / $",k(Q).replace("$","")]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Amount Due"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:["$",k(Y).replace("$","")]})]})]},E.id)})})})]})]}),e.jsx(tPe,{open:n,onOpenChange:a})]})}function o$({endpoints:t=["/api/dashboard/stats","/api/properties","/api/tasks","/api/bookings","/api/finance","/api/finance/analytics","/api/users"],variant:s="outline",size:r="sm",showStats:n=!1,showLastUpdate:a=!1,className:i=""}){const[l,o]=j.useState(!1),{refreshData:c,clearCache:d}=U4(),{toast:u}=Xe(),m=async()=>{o(!0);try{const x=t.map(async v=>{try{return await c(v),{endpoint:v,success:!0}}catch(b){return console.error(`Failed to refresh ${v}:`,b),{endpoint:v,success:!1,error:b}}}),g=await Promise.allSettled(x),p=g.filter(v=>v.status==="fulfilled").length,f=g.length-p;u({title:"Data Refreshed",description:`Updated ${p} endpoints${f>0?`, ${f} failed`:""}`,variant:f>0?"destructive":"default"})}catch(x){console.error("Data refresh failed:",x),u({title:"Refresh Failed",description:"Unable to refresh data",variant:"destructive"})}finally{o(!1)}},h=ui.getCacheStats();return e.jsxs("div",{className:`flex items-center gap-2 ${i}`,children:[e.jsxs(R,{variant:s,size:r,onClick:m,disabled:l,className:"flex items-center gap-2",children:[e.jsx(cs,{className:`h-4 w-4 ${l?"animate-spin":""}`}),r!=="sm"&&(l?"Refreshing...":"Refresh Data")]}),n&&e.jsxs(q,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(pn,{className:"h-3 w-3"}),e.jsxs("span",{children:[h.active," cached"]})]}),a&&e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"h-3 w-3"}),e.jsx("span",{children:"Updated"})]})]})}function rPe(){return z4("/api/dashboard/stats",void 0,{backgroundRefresh:!0,refetchInterval:5*60*1e3})}function nPe(){return z4("/api/users",void 0,{backgroundRefresh:!0,refetchInterval:10*60*1e3})}const aPe=j.lazy(()=>ur(()=>import("./Settings-CgxdD_eN.js"),__vite__mapDeps([4,1,2]))),iPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>BK),void 0)),lPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>yCe),void 0)),oPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>uW),void 0)),cPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>HK),void 0)),dPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>PK),void 0)),uPe=j.lazy(()=>ur(()=>import("./AdminGodModeRoleManager-DR13_X9Z.js"),__vite__mapDeps([5,1,2]))),mPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>yNe),void 0)),hPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>YK),void 0)),xPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>cW),void 0)),pPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>tW),void 0)),fPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>PPe),void 0)),gPe=j.lazy(()=>ur(()=>Promise.resolve().then(()=>vCe),void 0));function jPe(){const[t,s]=j.useState(null);rPe(),nPe();const r=[{title:"🔑 API Connections",description:"Configure Stripe, Hostaway, OpenAI, Twilio and other third-party API integrations",key:"api-connections",icon:ZT,badge:"APIs",color:"bg-emerald-50 hover:bg-emerald-100 border-emerald-300 border-2",component:hPe},{title:"Settings",description:"General settings, branding, legal templates, and currency & tax configuration",key:"settings",icon:Lt,badge:"Core",color:"bg-blue-50 hover:bg-blue-100 border-blue-200",component:aPe},{title:"Staff Management",description:"Manage staff members, roles, permissions, and granular access control across all platform modules",key:"user-management",icon:st,badge:"Staff",color:"bg-green-50 hover:bg-green-100 border-green-200",component:iPe},{title:"Automation Management",description:"Configure automated workflows, scheduling, and system automation rules",key:"automation-management",icon:Ut,badge:"Auto",color:"bg-yellow-50 hover:bg-yellow-100 border-yellow-200",component:lPe},{title:"AI Features",description:"AI task management, notifications, feedback monitoring, and smart suggestions",key:"ai-features",icon:hn,badge:"AI",color:"bg-purple-50 hover:bg-purple-100 border-purple-200",component:oPe},{title:"Activity Logs",description:"System activity monitoring, user actions, and audit trail management",key:"activity-logs",icon:ks,badge:"Logs",color:"bg-orange-50 hover:bg-orange-100 border-orange-200",component:cPe},{title:"Sandbox Testing",description:"Demo data testing environment and system validation tools",key:"sandbox-testing",icon:ep,badge:"Test",color:"bg-pink-50 hover:bg-pink-100 border-pink-200",component:dPe},{title:"Admin God Mode",description:"Advanced admin controls, role management, and system override capabilities",key:"admin-god-mode-role-manager",icon:_t,badge:"Admin",color:"bg-red-50 hover:bg-red-100 border-red-200",component:uPe},{title:"SaaS Management",description:"Multi-tenant organization management, signup requests, and tenant provisioning",key:"saas-management",icon:pn,badge:"SaaS",color:"bg-indigo-50 hover:bg-indigo-100 border-indigo-200",component:mPe},{title:"System Integrity Check",description:"System health monitoring, integrity scanning, and diagnostic tools",key:"system-integrity-check",icon:_t,badge:"Diagnostics",color:"bg-red-50 hover:bg-red-100 border-red-200",component:xPe},{title:"AI Operations & Anomalies",description:"AI operations monitoring, anomaly detection, and performance analytics",key:"ai-ops-anomalies",icon:hn,badge:"AI Ops",color:"bg-purple-50 hover:bg-purple-100 border-purple-200",component:pPe},{title:"Additional Settings",description:"Extended admin configuration options and advanced system settings",key:"additional-settings",icon:Lt,badge:"Extended",color:"bg-gray-50 hover:bg-gray-100 border-gray-200",component:fPe},{title:"Upgraded Admin Dashboard",description:"Enhanced admin control center with advanced monitoring capabilities",key:"upgraded-admin-dashboard",icon:qs,badge:"Enhanced",color:"bg-blue-50 hover:bg-blue-100 border-blue-200",component:gPe}],n=i=>{s(i)},a=r.find(i=>i.key===t);if(t&&a){const i=a.component;return e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(Mi,{title:a.title}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsx("div",{className:"p-4 border-b bg-white",children:e.jsxs(R,{variant:"outline",onClick:()=>s(null),className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-4 w-4"}),"Back to System Hub"]})}),e.jsx(j.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsxs("p",{className:"text-muted-foreground",children:["Loading ",a.title,"..."]})]})}),children:e.jsx(i,{})})]})]})})}return e.jsx("div",{className:"min-h-screen flex bg-background",children:e.jsxs("div",{className:"flex-1 flex flex-col lg:ml-0",children:[e.jsx(Mi,{title:"System Hub"}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"System Hub"}),e.jsx("p",{className:"text-gray-600",children:"Complete system administration suite for user management, automation, and platform configuration"})]}),e.jsx(o$,{endpoints:["/api/dashboard/stats","/api/users"],variant:"outline",size:"sm",showStats:!0,showLastUpdate:!0})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(i=>{const l=i.icon;return e.jsxs(O,{className:`h-full ${i.color} border-2 transition-all duration-200 hover:scale-105 hover:shadow-lg hover:border-opacity-60 cursor-pointer group`,onClick:()=>n(i.key),children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/50",children:e.jsx(l,{className:"h-6 w-6 text-gray-700"})}),e.jsx("div",{children:e.jsx($,{className:"text-lg font-semibold text-gray-900",children:i.title})})]}),e.jsx(q,{variant:"secondary",className:"bg-white/70 text-gray-700 border border-gray-300",children:i.badge})]})}),e.jsx(D,{className:"pt-0",children:e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:i.description})})]},i.key)})})]})})]})})}function vPe({size:t="md",className:s=""}){const r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return e.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${r[t]} ${s}`})}function yPe({show:t,text:s="Loading…"}){return t?e.jsx("div",{className:"fixed inset-0 z-[1000] grid place-items-center bg-white/70 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border bg-white px-4 py-3 shadow-lg",children:[e.jsx(vPe,{size:"lg",className:"border-t-emerald-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:s})]})}):null}function bPe(){const{toast:t}=Xe(),[s,r]=j.useState(!1),{data:n,isLoading:a,error:i}=ge({queryKey:["/api/system"]}),l=async()=>{r(!0),await ws.invalidateQueries({queryKey:["/api/system"]}),await ws.refetchQueries({queryKey:["/api/system"]}),t({title:"System data refreshed",description:"Latest system information loaded successfully"}),setTimeout(()=>r(!1),500)};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx(yPe,{show:!0,text:"Loading system information..."})]})}):i||!n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-6",children:e.jsxs(O,{className:"max-w-md w-full",children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(br,{className:"h-6 w-6"}),"System Data Unavailable"]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-gray-600 mb-4",children:i instanceof Error?i.message:"No system data available"}),e.jsxs(R,{onClick:l,className:"w-full",children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Lt,{className:"h-8 w-8 text-blue-600"}),"System Hub"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Platform administration and system monitoring"})]}),e.jsxs(R,{onClick:l,disabled:s,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(cs,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{className:"border-2 border-blue-200 bg-blue-50",children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium text-blue-900",children:"System Version"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:n.version}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"HostPilotPro"})]})]}),e.jsxs(O,{className:"border-2 border-green-200 bg-green-50",children:[e.jsx(_,{className:"pb-3",children:e.jsxs($,{className:"text-sm font-medium text-green-900 flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"System Status"]})}),e.jsxs(D,{children:[e.jsxs(q,{className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Mn,{className:"h-3 w-3 mr-1"}),n.status.toUpperCase()]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"All systems operational"})]})]}),e.jsxs(O,{className:"border-2 border-purple-200 bg-purple-50",children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium text-purple-900",children:"Last Updated"})}),e.jsxs(D,{children:[e.jsx("div",{className:"text-sm font-semibold text-purple-700",children:new Date(n.lastUpdated).toLocaleString()}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Real-time monitoring"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5 text-yellow-600"}),"System Health"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pn,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Database"})]}),e.jsx(q,{className:n.health.database==="healthy"?"bg-green-600":"bg-red-600",children:n.health.database})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bw,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"API"})]}),e.jsx(q,{className:n.health.api==="operational"?"bg-green-600":"bg-red-600",children:n.health.api})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ut,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:"Cache"})]}),e.jsx(q,{className:n.health.cache==="active"?"bg-green-600":"bg-red-600",children:n.health.cache})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-blue-600"}),"Active Modules"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(od,{icon:_s,name:"Properties",count:n.modules.properties.count,active:n.modules.properties.active,color:"blue"}),e.jsx("a",{href:"/admin/user-management",className:"block","data-testid":"module-link-users",children:e.jsx(od,{icon:st,name:"Users",count:n.modules.users.count,active:n.modules.users.active,color:"green",clickable:!0})}),e.jsx(od,{icon:He,name:"Finance",count:n.modules.finance.count,active:n.modules.finance.active,color:"emerald"}),e.jsx(od,{icon:Ai,name:"Tasks",count:n.modules.tasks.count,active:n.modules.tasks.active,color:"orange"}),e.jsx(od,{icon:We,name:"Bookings",count:n.modules.bookings.count,active:n.modules.bookings.active,color:"purple"})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Bw,{className:"h-5 w-5 text-purple-600"}),"API Configurations"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Jm,{name:"Stripe",active:n.apiConfigs.hasStripe}),e.jsx(Jm,{name:"Hostaway",active:n.apiConfigs.hasHostaway}),e.jsx(Jm,{name:"OpenAI",active:n.apiConfigs.hasOpenAI}),e.jsx(Jm,{name:"Twilio",active:n.apiConfigs.hasTwilio})]})})]}),e.jsxs(O,{className:"border-2 border-indigo-200 bg-indigo-50",children:[e.jsx(_,{children:e.jsx($,{className:"text-indigo-900",children:"Organization"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"Name:"}),e.jsx("span",{className:"text-indigo-900 font-semibold",children:n.organization.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-indigo-700",children:"ID:"}),e.jsx("span",{className:"text-indigo-900 font-mono text-sm",children:n.organization.id})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5 text-indigo-600"}),"System Administration"]})}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsxs("a",{href:"/admin/user-management",className:"block p-4 bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border-2 border-blue-200 rounded-lg transition-all cursor-pointer group","data-testid":"link-user-management",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(st,{className:"h-6 w-6 text-blue-600 group-hover:scale-110 transition-transform"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"User Management"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Create and manage user accounts with role-based access control"})]})})})]})]})})}function od({icon:t,name:s,count:r,active:n,color:a,clickable:i=!1}){const l={blue:"bg-blue-50 border-blue-200 text-blue-700",green:"bg-green-50 border-green-200 text-green-700",emerald:"bg-emerald-50 border-emerald-200 text-emerald-700",orange:"bg-orange-50 border-orange-200 text-orange-700",purple:"bg-purple-50 border-purple-200 text-purple-700"};return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${l[a]} ${i?"hover:shadow-lg hover:scale-105 transition-all cursor-pointer":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(t,{className:"h-5 w-5"}),n?e.jsx(Mn,{className:"h-4 w-4 text-green-600"}):e.jsx(br,{className:"h-4 w-4 text-red-600"})]}),e.jsx("div",{className:"font-semibold text-lg",children:s}),e.jsxs("div",{className:"text-sm opacity-80",children:[r," records"]}),i&&e.jsx("div",{className:"text-xs mt-2 font-medium opacity-70",children:"Click to manage →"})]})}function Jm({name:t,active:s}){return e.jsxs("div",{className:`p-3 rounded-lg border-2 flex items-center justify-between ${s?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("span",{className:"font-medium text-sm",children:t}),s?e.jsx(Mn,{className:"h-4 w-4 text-green-600"}):e.jsx(br,{className:"h-4 w-4 text-gray-400"})]})}function c$({userId:t,userRole:s,userEmail:r,userName:n,currentBalance:a,onBalanceReset:i}){const[l,o]=j.useState(!1),[c,d]=j.useState(""),[u,m]=j.useState(null),{user:h}=Rr(),{toast:x}=Xe(),g=ut();if(h?.role!=="admin"||!["owner","portfolio-manager","retail-agent","referral-agent"].includes(s))return null;const f=Ce({mutationFn:async()=>await fe("GET",`/api/admin/balance-reset/user/${t}/balance`),onSuccess:C=>{m(C),o(!0)},onError:C=>{x({title:"Error",description:C.message||"Failed to fetch balance information",variant:"destructive"})}}),v=Ce({mutationFn:async C=>await fe("POST","/api/admin/balance-reset/execute",C),onSuccess:()=>{x({title:"Balance Reset Successful",description:`${n}'s balance has been reset to zero.`}),g.invalidateQueries({queryKey:["/api/admin/balance-reset"]}),g.invalidateQueries({queryKey:["/api/owner"]}),g.invalidateQueries({queryKey:["/api/agent"]}),g.invalidateQueries({queryKey:["/api/referral"]}),o(!1),d(""),m(null),i?.()},onError:C=>{x({title:"Reset Failed",description:C.message||"Failed to reset user balance",variant:"destructive"})}}),b=()=>{f.mutate()},y=()=>{v.mutate({userId:t,resetReason:c.trim()||void 0})},S=C=>{switch(C){case"owner":return"Property Owner";case"portfolio-manager":return"Portfolio Manager";case"retail-agent":return"Retail Agent";case"referral-agent":return"Referral Agent";default:return C}},w=C=>{switch(C){case"owner":return"pending payouts and commission deductions";case"portfolio-manager":return"commission earnings and payout requests";case"retail-agent":return"commission earnings and payout requests";case"referral-agent":return"referral commissions and payout requests";default:return"financial balances"}};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{className:"border-red-200 bg-red-50/50",children:[e.jsxs(_,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"h-5 w-5 text-red-600"}),e.jsx($,{className:"text-lg text-red-900",children:"Admin Controls"})]}),e.jsxs(Te,{className:"text-red-700",children:["Administrative balance management for ",S(s)]})]}),e.jsxs(D,{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Current Balance:"}),e.jsx("span",{className:"text-sm text-red-700",children:a!==void 0?`$${a.toFixed(2)}`:"Loading..."})]})}),e.jsx(R,{onClick:b,disabled:f.isPending||v.isPending,variant:"destructive",size:"sm",className:"w-full",children:f.isPending?"Loading Balance...":"Reset Balance to $0"}),e.jsxs("p",{className:"text-xs text-red-600",children:["⚠️ This action will clear all ",w(s)," and cannot be undone."]})]})]}),e.jsx(xw,{open:l,onOpenChange:o,children:e.jsxs($f,{children:[e.jsxs(Ff,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-6 w-6 text-red-600"}),e.jsx(Bf,{children:"Confirm Balance Reset"})]}),e.jsxs(Vf,{className:"space-y-3",children:[e.jsxs("div",{children:["Are you sure you want to reset ",e.jsx("strong",{children:n}),"'s balance to zero?"]}),u&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"User:"}),e.jsxs("span",{className:"text-sm",children:[n," (",r,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Role:"}),e.jsx("span",{className:"text-sm",children:S(s)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Current Balance:"}),e.jsxs("span",{className:"text-sm font-bold text-red-600",children:["$",u.currentBalance.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"resetReason",className:"text-sm font-medium",children:"Reason for Reset (optional):"}),e.jsx(nt,{id:"resetReason",placeholder:"Enter reason for balance reset...",value:c,onChange:C=>d(C.target.value),className:"min-h-16"})]}),e.jsxs("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:[e.jsx("strong",{children:"Warning:"})," This action will be logged and cannot be undone."]})]})]}),e.jsxs(Lf,{children:[e.jsx(Uf,{onClick:()=>d(""),children:"Cancel"}),e.jsx(qf,{onClick:y,disabled:v.isPending,className:"bg-red-600 hover:bg-red-700",children:v.isPending?"Resetting...":"Reset Balance"})]})]})})]})}const NPe=Qt({checkIn:Ne().min(1,"Check-in date required"),checkOut:Ne().min(1,"Check-out date required"),guests:Zt().min(1,"At least 1 guest required"),bedrooms:Zt().optional(),priceMin:Zt().optional(),priceMax:Zt().optional()}),wPe=Qt({propertyId:Zt(),guestName:Ne().min(1,"Guest name required"),guestEmail:Ne().email("Valid email required"),guestPhone:Ne().min(1,"Phone number required"),guestCountry:Ne().optional(),checkIn:Ne().min(1,"Check-in date required"),checkOut:Ne().min(1,"Check-out date required"),guests:Zt().min(1,"At least 1 guest required"),totalAmount:Zt().min(1,"Amount required"),commissionType:Cs(["fixed_percentage","custom_topup"]).default("fixed_percentage"),netPrice:Zt().optional(),topupAmount:Zt().optional(),bookingPolicy:Cs(["standard","non_refundable"]).default("standard"),paymentMethod:Cs(["stripe_instant","bank_transfer","cash","other"]).default("stripe_instant"),paymentAmount:Zt().min(1,"Payment amount required"),dueDate:Ne().optional(),specialRequests:Ne().optional(),notes:Ne().optional()}),SPe=Qt({payoutAmount:Zt().min(1,"Amount required"),payoutMethod:Ne().min(1,"Payment method required"),requestNotes:Ne().optional(),agentBankDetails:Ne().min(1,"Bank details required")});function CPe(){const[t,s]=j.useState({checkIn:"",checkOut:"",guests:2}),[r,n]=j.useState(null),[a,i]=j.useState(!1),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState("booking-engine"),[h]=pr();j.useEffect(()=>{const B=new URLSearchParams(window.location.search).get("tab");B&&m(B)},[h]);const{toast:x}=Xe(),g=ut(),{user:p}=Rr(),f=Ft({resolver:es(NPe),defaultValues:t}),v=Ft({resolver:es(wPe),defaultValues:{guests:2,totalAmount:0,commissionType:"fixed_percentage",netPrice:0,topupAmount:0,bookingPolicy:"standard",paymentMethod:"stripe_instant",paymentAmount:0,dueDate:""}}),b=Ft({resolver:es(SPe),defaultValues:{payoutMethod:"bank_transfer"}}),{data:y=[],isLoading:S,error:w}=ge({queryKey:["/api/agent/properties",t],queryFn:async()=>{try{const T=new URLSearchParams;t.checkIn&&T.append("checkIn",t.checkIn),t.checkOut&&T.append("checkOut",t.checkOut),t.guests&&T.append("guests",t.guests.toString()),t.bedrooms&&T.append("bedrooms",t.bedrooms.toString()),t.priceMin&&T.append("priceMin",t.priceMin.toString()),t.priceMax&&T.append("priceMax",t.priceMax.toString());const B=await fe("GET",`/api/agent/properties?${T.toString()}`);return Array.isArray(B)?B:[]}catch(T){return console.error("Failed to fetch properties:",T),[]}},enabled:!!(t.checkIn&&t.checkOut),retry:2,staleTime:3e4}),{data:C=[],error:k}=ge({queryKey:["/api/agent/bookings"],queryFn:async()=>{try{const T=await fe("GET","/api/agent/bookings");return Array.isArray(T)?T:[]}catch(T){return console.error("Failed to fetch bookings:",T),[]}},retry:2,staleTime:6e4}),{data:A,error:N}=ge({queryKey:["/api/agent/commission-summary"],queryFn:async()=>{try{return await fe("GET","/api/agent/commission-summary")||{totalCommissionEarned:0,totalCommissionPaid:0,pendingCommission:0,totalBookings:0,thisMonthCommission:0,thisMonthBookings:0,lastMonthCommission:0,lastMonthBookings:0,averageCommissionPerBooking:0,commissionRate:15,currency:"THB"}}catch(T){return console.error("Failed to fetch commission summary:",T),{totalCommissionEarned:0,totalCommissionPaid:0,pendingCommission:0,totalBookings:0,thisMonthCommission:0,thisMonthBookings:0,lastMonthCommission:0,lastMonthBookings:0,averageCommissionPerBooking:0,commissionRate:15,currency:"THB"}}},retry:2,staleTime:6e4}),{data:M=[],error:F}=ge({queryKey:["/api/agent/payouts"],queryFn:async()=>{try{const T=await fe("GET","/api/agent/payouts");return Array.isArray(T)?T:[]}catch(T){return console.error("Failed to fetch payouts:",T),[]}},retry:2,staleTime:6e4}),I=Ce({mutationFn:T=>{let B=0,W=10;T.commissionType==="fixed_percentage"?B=T.totalAmount*.1:T.commissionType==="custom_topup"&&T.netPrice&&T.totalAmount&&(B=T.totalAmount-T.netPrice,W=B/T.totalAmount*100);const he={...T,propertyId:r?.id||0,commissionAmount:B,commissionRate:W};return fe("POST","/api/agent/bookings",he)},onSuccess:()=>{x({title:"Success",description:"Booking created successfully with commission calculated!"}),i(!1),v.reset(),n(null),g.invalidateQueries({queryKey:["/api/agent/bookings"]}),g.invalidateQueries({queryKey:["/api/agent/commission-summary"]})},onError:T=>{x({title:"Error",description:T?.message||"Failed to create booking",variant:"destructive"})}}),V=Ce({mutationFn:T=>fe("POST","/api/agent/payouts",T),onSuccess:()=>{x({title:"Success",description:"Payout request submitted!"}),o(!1),b.reset(),g.invalidateQueries({queryKey:["/api/agent/payouts"]})},onError:()=>{x({title:"Error",description:"Failed to submit payout request",variant:"destructive"})}}),E=T=>{s(T)},G=T=>{n(T),v.setValue("propertyId",T.id),v.setValue("checkIn",t.checkIn),v.setValue("checkOut",t.checkOut),v.setValue("guests",t.guests);const B=new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime(),W=Math.ceil(B/(1e3*60*60*24)),he=parseFloat(T.pricePerNight)*W;v.setValue("totalAmount",he);const z=(v.getValues("bookingPolicy")||"standard")==="non_refundable"?he:he*.3;v.setValue("paymentAmount",z),i(!0)},Y=T=>{switch(T){case"confirmed":return e.jsx(q,{className:"bg-green-100 text-green-800",children:"Confirmed"});case"pending":return e.jsx(q,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"cancelled":return e.jsx(q,{className:"bg-red-100 text-red-800",children:"Cancelled"});default:return e.jsx(q,{children:T})}},Q=T=>{switch(T){case"paid":return e.jsx(q,{className:"bg-green-100 text-green-800",children:"Paid"});case"pending":return e.jsx(q,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"approved":return e.jsx(q,{className:"bg-blue-100 text-blue-800",children:"Approved"});case"rejected":return e.jsx(q,{className:"bg-red-100 text-red-800",children:"Rejected"});default:return e.jsx(q,{children:T})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Retail Agent Booking Engine"}),e.jsx("p",{className:"text-muted-foreground",children:"Live property booking system with commission tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[A&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"}),e.jsxs("p",{className:"text-lg font-semibold",children:[A.currency||"THB"," ",A.totalCommissionEarned||0]})]})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Commission"}),e.jsxs("p",{className:"text-lg font-semibold",children:[A.currency||"THB"," ",A.pendingCommission||0]})]})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-4 w-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Bookings"}),e.jsx("p",{className:"text-lg font-semibold",children:A.totalBookings||0})]})]})})})]}),e.jsxs(R,{variant:"outline",onClick:()=>window.location.href="/api/auth/demo-logout",className:"flex items-center gap-2",children:[e.jsx(cn,{className:"h-4 w-4"}),"Logout"]})]})]}),(w||k||N||F)&&e.jsx(O,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"API Connection Notice"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["Some data may be temporarily unavailable. The system is using fallback data to ensure continued operation.",w&&" Properties data may be limited.",k&&" Booking history may be incomplete.",N&&" Commission data may be delayed.",F&&" Payout information may be outdated."]})]})]})})}),e.jsxs(ot,{value:u,onValueChange:m,className:"space-y-4",children:[e.jsxs(it,{children:[e.jsx(re,{value:"booking-engine",children:"Live Booking Engine"}),e.jsx(re,{value:"my-bookings",children:"My Reservations"}),e.jsx(re,{value:"commission-tracker",children:"Commission Tracker"}),e.jsx(re,{value:"payout-requests",children:"Payout Requests"})]}),e.jsxs(ne,{value:"booking-engine",className:"space-y-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),e.jsx("span",{children:"Property Search"})]}),e.jsx(Te,{children:"Search available properties with live availability"})]}),e.jsx(D,{children:e.jsx(Wt,{...f,children:e.jsxs("form",{onSubmit:f.handleSubmit(E),className:"grid grid-cols-6 gap-4",children:[e.jsx(de,{control:f.control,name:"checkIn",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Check-in"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:f.control,name:"checkOut",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Check-out"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:f.control,name:"guests",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guests"}),e.jsx(ce,{children:e.jsx(H,{type:"number",min:"1",...T,onChange:B=>T.onChange(parseInt(B.target.value))})}),e.jsx(xe,{})]})}),e.jsx(de,{control:f.control,name:"bedrooms",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Min Bedrooms"}),e.jsx(ce,{children:e.jsx(H,{type:"number",min:"0",placeholder:"Any",...T,onChange:B=>T.onChange(B.target.value?parseInt(B.target.value):void 0)})}),e.jsx(xe,{})]})}),e.jsx(de,{control:f.control,name:"priceMax",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Max Price/Night"}),e.jsx(ce,{children:e.jsx(H,{type:"number",min:"0",placeholder:"Any",...T,onChange:B=>T.onChange(B.target.value?parseFloat(B.target.value):void 0)})}),e.jsx(xe,{})]})}),e.jsx("div",{className:"flex items-end",children:e.jsxs(R,{type:"submit",className:"w-full",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Search"]})})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Searching properties..."})]}):y.length===0?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Et,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:t.checkIn&&t.checkOut?"No available properties found for your search criteria":"Enter search criteria to see available properties"})]}):y.map(T=>e.jsxs(O,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:T.images&&T.images.length>0?e.jsx("img",{src:T.images[0],alt:T.name,className:"w-full h-full object-cover"}):e.jsx(is,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:T.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:T.address})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ki,{className:"h-4 w-4"}),e.jsxs("span",{children:[T.bedrooms," bed"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(st,{className:"h-4 w-4"}),e.jsxs("span",{children:[T.maxGuests," guests"]})]})]}),T.isAvailable?e.jsx(q,{className:"bg-green-100 text-green-800",children:"Available"}):e.jsx(q,{className:"bg-red-100 text-red-800",children:"Unavailable"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-semibold",children:[T.currency||"THB"," ",parseFloat(T.pricePerNight||0).toLocaleString(),"/night"]}),t.checkIn&&t.checkOut&&e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:["Total: ",T.currency||"THB"," ",(parseFloat(T.pricePerNight||0)*Math.ceil((new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime())/(1e3*60*60*24))).toLocaleString()," for ",Math.ceil((new Date(t.checkOut).getTime()-new Date(t.checkIn).getTime())/(1e3*60*60*24))," nights"]}),T.commission&&e.jsxs("p",{className:"text-sm text-green-600",children:[T.commission,"% commission"]})]}),e.jsx(R,{onClick:()=>G(T),disabled:!T.isAvailable||!t.checkIn||!t.checkOut,size:"sm",children:"Book Now"})]})]})})]},T.id))})]}),e.jsx(ne,{value:"my-bookings",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"My Reservations"}),e.jsx(Te,{children:"Track all your agent reservations and their status"})]}),e.jsx(D,{children:C.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(GT,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No bookings found"})]}):e.jsx("div",{className:"space-y-4",children:C.map(T=>e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:T.propertyName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.guestName}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(ha,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:T.guestEmail})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Dates"}),e.jsxs("p",{className:"font-medium",children:[new Date(T.checkIn).toLocaleDateString()," - ",new Date(T.checkOut).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm",children:[T.guests," guests"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount & Commission"}),e.jsxs("p",{className:"font-medium",children:["฿",T.totalAmount]}),e.jsxs("p",{className:"text-sm text-green-600",children:["Commission: ฿",T.commissionAmount]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[Y(T.bookingStatus),e.jsxs("p",{className:"text-xs mt-1",children:["Commission: ",Y(T.commissionStatus)]})]}),T.hostawayBookingId&&e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(ma,{className:"h-4 w-4"})})]})]})})},T.id))})})]})}),e.jsxs(ne,{value:"commission-tracker",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(He,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Earned"}),e.jsxs("p",{className:"text-2xl font-bold",children:["฿",A?.totalEarned||A?.totalCommissionEarned||0]})]})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Paid"}),e.jsxs("p",{className:"text-2xl font-bold",children:["฿",A?.totalPaid||A?.totalCommissionPaid||0]})]})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Balance"}),e.jsxs("p",{className:"text-2xl font-bold",children:["฿",A?.currentBalance||(A?.totalCommissionEarned||0)-(A?.totalCommissionPaid||0)]})]})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),e.jsxs("p",{className:"text-2xl font-bold",children:["฿",A?.pendingCommissions||A?.pendingCommission||0]})]})]})})})]}),p&&e.jsx(c$,{userId:p.id,userRole:"retail-agent",userEmail:p.email||"",userName:`${p.firstName||""} ${p.lastName||""}`.trim()||p.email||"",currentBalance:A?.currentBalance,onBalanceReset:()=>{g.invalidateQueries({queryKey:["/api/agent/commission-summary"]}),g.invalidateQueries({queryKey:["/api/agent/payouts"]})}})]}),e.jsxs(ne,{value:"payout-requests",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Payout Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Request payouts for your earned commissions"})]}),e.jsxs(Ve,{open:l,onOpenChange:o,children:[e.jsx(Yt,{asChild:!0,children:e.jsx(R,{children:"Request Payout"})}),e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Request Commission Payout"}),e.jsx(Pt,{children:"Request a payout for your earned commissions"})]}),e.jsx(Wt,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(T=>V.mutate(T)),className:"space-y-4",children:[e.jsx(de,{control:b.control,name:"payoutAmount",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Payout Amount"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",placeholder:"0.00",...T,onChange:B=>T.onChange(parseFloat(B.target.value))})}),e.jsx(xe,{})]})}),e.jsx(de,{control:b.control,name:"payoutMethod",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Payment Method"}),e.jsxs(te,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select payment method"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(P,{value:"paypal",children:"PayPal"}),e.jsx(P,{value:"check",children:"Check"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:b.control,name:"agentBankDetails",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Bank Details"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Enter your bank account details...",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:b.control,name:"requestNotes",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Notes (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Any additional notes...",...T})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:V.isPending,children:V.isPending?"Submitting...":"Submit Request"})]})]})})]})]})]}),e.jsx(O,{children:e.jsx(D,{className:"p-4",children:M.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(He,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No payout requests yet"})]}):e.jsx("div",{className:"space-y-4",children:M.map(T=>e.jsx(O,{children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["$",T.payoutAmount]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested on ",new Date(T.requestedAt).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm",children:["Method: ",T.payoutMethod]})]}),e.jsxs("div",{className:"text-right",children:[Q(T.payoutStatus),T.paidAt&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Paid on ",new Date(T.paidAt).toLocaleDateString()]})]})]})})},T.id))})})})]})]}),e.jsx(Ve,{open:a,onOpenChange:i,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{children:["Create Booking - ",r?.name]}),e.jsx(Pt,{children:"Complete the booking details for your client"})]}),e.jsx(Wt,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(T=>I.mutate(T)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:v.control,name:"guestName",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Name"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Full name",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"guestEmail",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Email"}),e.jsx(ce,{children:e.jsx(H,{type:"email",placeholder:"email@example.com",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"guestPhone",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Phone Number"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"+1 (555) 123-4567",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"guestCountry",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Country (Optional)"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Country",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"checkIn",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Check-in Date"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"checkOut",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Check-out Date"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"guests",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Number of Guests"}),e.jsx(ce,{children:e.jsx(H,{type:"number",min:"1",...T,onChange:B=>T.onChange(parseInt(B.target.value))})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"totalAmount",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Total Amount"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",...T,onChange:B=>T.onChange(parseFloat(B.target.value))})}),e.jsx(xe,{})]})})]}),e.jsxs(O,{className:"p-4 bg-blue-50 border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5 text-blue-600"}),"Commission Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(de,{control:v.control,name:"commissionType",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Commission Type"}),e.jsxs(te,{onValueChange:T.onChange,defaultValue:T.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select commission type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"fixed_percentage",children:"Fixed 10% Commission"}),e.jsx(P,{value:"custom_topup",children:"Custom Top-up Amount"})]})]}),e.jsx(xe,{})]})}),v.watch("commissionType")==="custom_topup"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($j,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Important: Top-up Commission Guidelines"})]}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>d(!0),className:"flex items-center gap-1 text-amber-700 border-amber-300 hover:bg-amber-100",children:[e.jsx(dt,{className:"h-3 w-3"}),"Read Me"]})]}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Please read our guidelines before setting custom margins to ensure optimal customer experience."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:v.control,name:"netPrice",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Net Price (USD)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",placeholder:"1050.00",...T,onChange:B=>{T.onChange(parseFloat(B.target.value));const W=parseFloat(B.target.value)||0,he=v.getValues("totalAmount")||0;if(W&&he>W){const Se=he-W;v.setValue("topupAmount",Se)}}})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"topupAmount",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Your Commission (Auto-calculated)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",readOnly:!0,className:"bg-gray-100",...T})}),e.jsx(Kt,{children:"Total Amount - Net Price = Your Commission"}),e.jsx(xe,{})]})})]})]}),v.watch("commissionType")==="fixed_percentage"&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Fixed 10% Commission:"})," You'll earn 10% of the total booking amount as commission."]}),e.jsxs("p",{className:"text-sm font-medium text-green-600 mt-1",children:["Commission: $",((v.watch("totalAmount")||0)*.1).toFixed(2)]})]}),v.watch("commissionType")==="custom_topup"&&v.watch("netPrice")&&v.watch("totalAmount")&&e.jsx("div",{className:"p-3 bg-white rounded-lg border",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Net Price:"})," $",v.watch("netPrice")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Guest Pays:"})," $",v.watch("totalAmount")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Your Commission:"})," ",e.jsxs("span",{className:"text-green-600 font-medium",children:["$",((v.watch("totalAmount")||0)-(v.watch("netPrice")||0)).toFixed(2)]})]})]})})]})]}),e.jsxs(O,{className:"p-4 bg-green-50 border-green-200",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),"Booking Policy & Payment"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(de,{control:v.control,name:"bookingPolicy",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Booking Policy"}),e.jsxs(te,{onValueChange:B=>{T.onChange(B);const W=v.getValues("totalAmount")||0;B==="non_refundable"?v.setValue("paymentAmount",W):v.setValue("paymentAmount",W*.3)},defaultValue:T.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select booking policy"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"standard",children:"Standard - 30% Deposit Required"}),e.jsx(P,{value:"non_refundable",children:"Non-Refundable - Full Payment Required"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"paymentAmount",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Payment Amount (฿)"}),e.jsx(ce,{children:e.jsx(H,{type:"number",step:"0.01",...T,onChange:B=>T.onChange(parseFloat(B.target.value))})}),e.jsx(Kt,{children:v.watch("bookingPolicy")==="non_refundable"?"Non-refundable: Full payment required upfront":"Standard: 30% deposit required, remaining balance due at check-in"}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"paymentMethod",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Payment Method"}),e.jsxs(te,{onValueChange:B=>{if(T.onChange(B),B!=="stripe_instant"){const W=new Date;W.setDate(W.getDate()+3),v.setValue("dueDate",W.toISOString().split("T")[0])}else v.setValue("dueDate","")},defaultValue:T.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select payment method"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"stripe_instant",children:"💳 Stripe - Instant Payment"}),e.jsx(P,{value:"bank_transfer",children:"🏦 Bank Transfer"}),e.jsx(P,{value:"cash",children:"💵 Cash Payment"}),e.jsx(P,{value:"other",children:"📄 Other (Manual Invoice)"})]})]}),e.jsx(xe,{})]})}),v.watch("paymentMethod")!=="stripe_instant"&&e.jsx(de,{control:v.control,name:"dueDate",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Payment Due Date"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...T})}),e.jsx(Kt,{children:"Invoice will be generated with this due date"}),e.jsx(xe,{})]})}),e.jsx("div",{className:"p-3 bg-white rounded-lg border",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Booking Amount:"}),e.jsxs("span",{className:"font-medium",children:["฿",v.watch("totalAmount")||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Required Now:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["฿",v.watch("paymentAmount")||0]})]}),v.watch("bookingPolicy")==="standard"&&e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:"Remaining Balance:"}),e.jsxs("span",{children:["฿",((v.watch("totalAmount")||0)-(v.watch("paymentAmount")||0)).toFixed(2)]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Your Commission:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["฿",v.watch("commissionType")==="fixed_percentage"?((v.watch("totalAmount")||0)*.1).toFixed(2):((v.watch("totalAmount")||0)-(v.watch("netPrice")||0)).toFixed(2)]})]})})]})})]})]}),e.jsx(de,{control:v.control,name:"specialRequests",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Special Requests (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Any special requests from the guest...",...T})}),e.jsx(xe,{})]})}),e.jsx(de,{control:v.control,name:"notes",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Agent Notes (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Internal notes about this booking...",...T})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),v.watch("paymentMethod")==="stripe_instant"?e.jsx(R,{type:"submit",disabled:I.isPending,className:"bg-purple-600 hover:bg-purple-700",children:I.isPending?"Processing...":"💳 Pay Now with Stripe"}):e.jsx(R,{type:"submit",disabled:I.isPending,children:I.isPending?"Creating...":"Create Booking & Generate Invoice"})]})]})})]})}),e.jsx(Ve,{open:c,onOpenChange:d,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx($j,{className:"h-5 w-5 text-blue-600"}),"Top-up Commission Guidelines"]}),e.jsx(Pt,{children:"Important information about setting custom margins for bookings"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Market-Based Pricing Policy"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Our rates are calculated according to current market conditions and are close to real market values. This ensures fair pricing for both guests and property owners while maintaining competitive positioning."})]}),e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),"Warning: Excessive Margins"]}),e.jsx("p",{className:"text-amber-700 text-sm mb-2",children:e.jsx("strong",{children:"Setting excessive margins may negatively impact customer experience."})}),e.jsxs("ul",{className:"text-amber-700 text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Higher prices create elevated guest expectations"}),e.jsx("li",{children:"Guests may expect premium services that exceed actual property offerings"}),e.jsx("li",{children:"This disconnect can lead to negative reviews and customer dissatisfaction"}),e.jsx("li",{children:"Poor reviews affect property reputation and future bookings"})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Recommended Practice"}),e.jsxs("ul",{className:"text-green-700 text-sm space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Keep margins reasonable (typically 10-15% above net price)"}),e.jsx("li",{children:"Consider property amenities and market positioning"}),e.jsx("li",{children:"Ensure guest expectations align with actual offerings"}),e.jsx("li",{children:"Focus on long-term customer satisfaction over short-term profits"}),e.jsx("li",{children:"Use the fixed 10% commission option for standard bookings"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Example Scenarios"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"✓ Reasonable:"}),e.jsx("span",{children:"Net $1000 → Guest Pays $1150 (15% margin)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-600",children:"✗ Excessive:"}),e.jsx("span",{children:"Net $1000 → Guest Pays $1400 (40% margin)"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(R,{onClick:()=>d(!1),children:"I Understand"})})]})})]})}const d$=()=>{const t=[{title:"Activity Logs",description:"View system activity logs and user actions",icon:ks,href:"/admin/activity-log",badge:null},{title:"Finance Reset",description:"Administrative finance system reset controls",icon:_t,href:"/admin/finance-reset",badge:null},{title:"AI Notifications & Reminders",description:"Configure AI-powered notifications and reminder systems",icon:hn,href:"/ai-notifications-reminders",badge:"New"},{title:"Sandbox Testing",description:"Quality assurance testing environment",icon:ks,href:"/sandbox-testing",badge:"QA"},{title:"System Integrity Check",description:"Verify system health and data integrity",icon:_t,href:"/admin/system-integrity-check",badge:"QA"},{title:"System-Wide Demo Integration",description:"Demo data management and system integration tools",icon:pn,href:"/system-wide-demo-integration",badge:"Demo"}];return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Additional Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Administrative tools and advanced configuration options"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2",children:t.map((s,r)=>{const n=s.icon;return e.jsxs(O,{className:"hover:shadow-md transition-shadow",children:[e.jsx(_,{className:"flex flex-row items-center space-y-0 pb-2",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(n,{className:"h-5 w-5 text-primary"})}),e.jsx("div",{className:"space-y-1",children:e.jsxs($,{className:"text-lg flex items-center gap-2",children:[s.title,s.badge&&e.jsx(q,{variant:"secondary",className:"text-xs",children:s.badge})]})})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsx(Te,{className:"text-sm",children:s.description}),e.jsx(Es,{href:s.href,children:e.jsxs(R,{className:"w-full",variant:"outline",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Open ",s.title]})})]})]},r)})}),e.jsx("div",{className:"mt-8 p-4 bg-muted/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{children:"These settings require administrative privileges"})]})})]})},PPe=Object.freeze(Object.defineProperty({__proto__:null,default:d$},Symbol.toStringTag,{value:"Module"}));function PA(){const[t,s]=j.useState("all"),[r,n]=j.useState(null),[a,i]=j.useState(""),{toast:l}=Xe(),o=ut(),{data:c,isLoading:d}=ge({queryKey:["/api/smart-pricing/dashboard",t],queryFn:()=>fe("GET",`/api/smart-pricing/dashboard${t!=="all"?`?propertyId=${t}`:""}`)}),{data:u,isLoading:m}=ge({queryKey:["/api/smart-pricing/year-on-year",t],queryFn:()=>fe("GET",`/api/smart-pricing/year-on-year${t!=="all"?`?propertyId=${t}`:""}`)}),{data:h,isLoading:x}=ge({queryKey:["/api/smart-pricing/holidays"],queryFn:()=>fe("GET","/api/smart-pricing/holidays"),retry:!1}),g=Array.isArray(h)?h:[],{data:p,isLoading:f}=ge({queryKey:["/api/smart-pricing/price-deviation",t],queryFn:()=>fe("GET",`/api/smart-pricing/price-deviation${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),{data:v,isLoading:b}=ge({queryKey:["/api/smart-pricing/booking-gaps",t],queryFn:()=>fe("GET",`/api/smart-pricing/booking-gaps${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),y=Array.isArray(p)?p:[],S=Array.isArray(v)?v:[],{data:w,isLoading:C}=ge({queryKey:["/api/smart-pricing/alerts",t],queryFn:()=>fe("GET",`/api/smart-pricing/alerts${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),{data:k,isLoading:A}=ge({queryKey:["/api/smart-pricing/ai-summary",t],queryFn:()=>fe("GET",`/api/smart-pricing/ai-summary${t!=="all"?`?propertyId=${t}`:""}`),retry:!1}),N=Array.isArray(w)?w:[],M=Array.isArray(k)?k:[],{data:F,isLoading:I}=ge({queryKey:["/api/smart-pricing/direct-booking",t],queryFn:()=>fe("GET",`/api/smart-pricing/direct-booking${t!=="all"?`?propertyId=${t}`:""}`)}),{data:V,isLoading:E}=ge({queryKey:["/api/smart-pricing/heatmap",t],queryFn:()=>fe("GET",`/api/smart-pricing/heatmap${t!=="all"?`?propertyId=${t}`:""}`)}),{data:G,isLoading:Y}=ge({queryKey:["/api/smart-pricing/historical-patterns",t],queryFn:()=>fe("GET",`/api/smart-pricing/historical-patterns${t!=="all"?`?propertyId=${t}`:""}`)}),Q=Ce({mutationFn:z=>fe("PATCH",`/api/smart-pricing/alerts/${z}/read`),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/alerts"]}),l({title:"Alert marked as read"})}}),T=Ce({mutationFn:({alertId:z,actionTaken:L})=>fe("PATCH",`/api/smart-pricing/alerts/${z}/resolve`,{actionTaken:L}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/alerts"]}),n(null),i(""),l({title:"Alert resolved successfully"})}}),B=Ce({mutationFn:({gapId:z,actionTaken:L})=>fe("PATCH",`/api/smart-pricing/booking-gaps/${z}/resolve`,{actionTaken:L}),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/smart-pricing/booking-gaps"]}),l({title:"Booking gap resolved"})}}),W=z=>{switch(z){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}},he=z=>{switch(z){case"high":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"low":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}},Se=z=>z.startsWith("A")?"text-green-600 dark:text-green-400":z.startsWith("B")?"text-blue-600 dark:text-blue-400":z.startsWith("C")?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return d?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(cs,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading Smart Pricing Toolkit..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Smart Pricing & Performance Toolkit"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered pricing optimization and performance insights for your property portfolio"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"Select property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),e.jsx(P,{value:"999",children:"Villa Demo12345"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Properties"}),e.jsx(is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:c?.totalProperties||0})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Active Alerts"}),e.jsx(Nt,{className:"h-4 w-4 text-orange-500"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c?.activeAlerts||0})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Avg Occupancy"}),e.jsx(st,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[c?.avgOccupancyRate||0,"%"]})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Price Opportunities"}),e.jsx(dr,{className:"h-4 w-4 text-green-500"})]}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c?.priceOptimizationOpportunities||0})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Performance Grade"}),e.jsx(us,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(D,{children:e.jsx("div",{className:`text-2xl font-bold ${Se(c?.recentPerformanceGrade||"C")}`,children:c?.recentPerformanceGrade||"C"})})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"YoY Growth"}),e.jsx(Ot,{className:"h-4 w-4 text-green-500"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",c?.yearOverYearGrowth||0,"%"]})})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(it,{className:"grid w-full grid-cols-9",children:[e.jsx(re,{value:"overview",children:"📊 Overview"}),e.jsx(re,{value:"performance",children:"📈 Performance"}),e.jsx(re,{value:"holidays",children:"🌍 Holidays"}),e.jsx(re,{value:"pricing",children:"💸 Pricing"}),e.jsx(re,{value:"gaps",children:"🔍 Gaps"}),e.jsx(re,{value:"ai-insights",children:"🧠 AI Insights"}),e.jsx(re,{value:"direct-booking",children:"🔁 Direct Booking"}),e.jsx(re,{value:"alerts",children:"🔔 Alerts"}),e.jsx(re,{value:"calendar",children:"📅 Calendar"})]}),e.jsxs(ne,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center",children:[e.jsx(Nt,{className:"mr-2 h-5 w-5 text-orange-500"}),"Critical Alerts"]})}),e.jsx(D,{children:C?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(cs,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-3",children:[N.filter(z=>z.severity==="critical"||z.severity==="high").slice(0,3).map(z=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[e.jsx(Et,{className:`h-4 w-4 mt-0.5 ${z.severity==="critical"?"text-red-500":"text-orange-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:z.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:z.message}),e.jsx(q,{className:`text-xs mt-1 ${W(z.severity)}`,children:z.severity.toUpperCase()})]})]},z.id)),(!N||N.length===0)&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No critical alerts"})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center",children:[e.jsx(qs,{className:"mr-2 h-5 w-5 text-blue-500"}),"Performance Summary"]})}),e.jsx(D,{children:m?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(cs,{className:"h-6 w-6 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:u&&u.length>=2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["฿",Number(u[0]?.totalRevenue||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",((Number(u[0]?.totalRevenue||0)-Number(u[1]?.totalRevenue||0))/Number(u[1]?.totalRevenue||1)*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Occupancy Rate"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[u[0]?.occupancyRate||0,"%"]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",(Number(u[0]?.occupancyRate||0)-Number(u[1]?.occupancyRate||0)).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Daily Rate"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["฿",Number(u[0]?.averageDailyRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["+",((Number(u[0]?.averageDailyRate||0)-Number(u[1]?.averageDailyRate||0))/Number(u[1]?.averageDailyRate||1)*100).toFixed(1),"%"]})]})]})]})})})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center",children:[e.jsx(hn,{className:"mr-2 h-5 w-5 text-purple-500"}),"Recent AI Insights"]})}),e.jsx(D,{children:A?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(cs,{className:"h-6 w-6 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[M.slice(0,1).map(z=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Performance Grade: "}),e.jsx(q,{className:`${Se(z.performanceGrade||"C")}`,children:z.performanceGrade})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:z.keyInsights}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"AI Suggestions:"}),e.jsx("ul",{className:"space-y-1",children:z.aiSuggestions?.slice(0,3).map((L,le)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start",children:[e.jsx(Ut,{className:"h-3 w-3 mt-1 mr-2 text-yellow-500 flex-shrink-0"}),L]},le))})]})]},z.id)),(!M||M.length===0)&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No AI insights available"})]})})]})]}),e.jsx(ne,{value:"performance",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(Ot,{className:"mr-2 h-5 w-5"}),"Year-on-Year Performance Tracker"]}),e.jsx(Te,{children:"Compare current performance with the same period last year"})]}),e.jsx(D,{children:m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-6",children:u&&u.length>=2?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm",children:"Total Revenue"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["฿",Number(u[0]?.totalRevenue||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1 text-green-500"}),"+",((Number(u[0]?.totalRevenue||0)-Number(u[1]?.totalRevenue||0))/Number(u[1]?.totalRevenue||1)*100).toFixed(1),"% vs last year"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm",children:"Occupancy Rate"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[u[0]?.occupancyRate||0,"%"]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1 text-green-500"}),"+",(Number(u[0]?.occupancyRate||0)-Number(u[1]?.occupancyRate||0)).toFixed(1),"% vs last year"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm",children:"Average Daily Rate"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["฿",Number(u[0]?.averageDailyRate||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1 text-green-500"}),"+",((Number(u[0]?.averageDailyRate||0)-Number(u[1]?.averageDailyRate||0))/Number(u[1]?.averageDailyRate||1)*100).toFixed(1),"% vs last year"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-2",children:e.jsx($,{className:"text-sm",children:"Average Lead Time"})}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[u[0]?.averageLeadTime||0," days"]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(_l,{className:"h-3 w-3 mr-1 text-red-500"}),Number(u[0]?.averageLeadTime||0)-Number(u[1]?.averageLeadTime||0)," days vs last year"]})]})]})]}),Number(u[0]?.totalRevenue||0)<Number(u[1]?.totalRevenue||0)&&e.jsxs($n,{children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsxs(Fn,{children:["Revenue is down ",((Number(u[1]?.totalRevenue||0)-Number(u[0]?.totalRevenue||0))/Number(u[1]?.totalRevenue||1)*100).toFixed(1),"% compared to the same month last year. Consider reviewing pricing strategy and marketing efforts."]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No performance data available for comparison"})]})})})]})}),e.jsx(ne,{value:"holidays",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(We,{className:"mr-2 h-5 w-5"}),"Global Holiday & Event Awareness"]}),e.jsx(Te,{children:"Track international holidays and events that impact demand"})]}),e.jsx(D,{children:x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:g&&g.length>0?e.jsx("div",{className:"grid gap-4",children:g.map(z=>e.jsx(O,{children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-medium",children:z.eventName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),new Date(z.eventDate).toLocaleDateString()]}),e.jsx("span",{children:z.country||z.region}),e.jsxs(q,{className:he(z.demandImpact),children:[z.demandImpact," demand"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[Number(z.pricingMultiplier).toFixed(2),"x"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pricing multiplier"})]})]})})},z.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(We,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No upcoming holidays or events"})]})})})]})}),e.jsx(ne,{value:"pricing",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(He,{className:"mr-2 h-5 w-5"}),"Internal Price Deviation Checker"]}),e.jsx(Te,{children:"Identify underpriced and overpriced properties in your portfolio"})]}),e.jsx(D,{children:f?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:y&&y.length>0?e.jsx("div",{className:"grid gap-4",children:y.map(z=>e.jsx(O,{className:`border-l-4 ${z.isUnderpriced?"border-l-orange-500":z.isOverpriced?"border-l-red-500":"border-l-green-500"}`,children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:z.propertyName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Current: ฿",Number(z.currentPrice).toLocaleString()]}),z.marketAverage&&e.jsxs("span",{children:["Market Avg: ฿",Number(z.marketAverage).toLocaleString()]}),z.portfolioAverage&&e.jsxs("span",{children:["Portfolio Avg: ฿",Number(z.portfolioAverage).toLocaleString()]})]}),z.deviationPercentage&&e.jsxs(q,{className:z.isUnderpriced?"bg-orange-100 text-orange-800":z.isOverpriced?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:[Number(z.deviationPercentage)>0?"+":"",Number(z.deviationPercentage).toFixed(1),"% deviation"]})]}),e.jsx("div",{className:"text-right",children:z.recommendedPrice&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["฿",Number(z.recommendedPrice).toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Recommended"}),z.confidence&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(Number(z.confidence)*100).toFixed(0),"% confidence"]})]})})]}),z.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:z.notes})]})},z.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(He,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No price deviation analysis available"})]})})})]})}),e.jsx(ne,{value:"gaps",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(dr,{className:"mr-2 h-5 w-5"}),"Booking Gap & Undervalued Dates Detector"]}),e.jsx(Te,{children:"Identify and resolve booking gaps to maximize revenue"})]}),e.jsx(D,{children:b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:S&&S.length>0?e.jsx("div",{className:"grid gap-4",children:S.map(z=>e.jsx(O,{className:`border-l-4 ${z.isResolved?"border-l-green-500":"border-l-orange-500"}`,children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:z.propertyName}),e.jsx(q,{variant:z.isResolved?"default":"secondary",children:z.isResolved?"Resolved":"Active"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),new Date(z.gapStartDate).toLocaleDateString()," - ",new Date(z.gapEndDate).toLocaleDateString()]}),e.jsxs("span",{children:[z.gapDuration," nights"]}),e.jsx(q,{className:"text-xs",children:z.gapType.replace("_"," ")})]}),z.recommendedAction&&e.jsxs("p",{className:"text-sm text-blue-600",children:["💡 ",z.recommendedAction.replace("_"," ")]})]}),e.jsxs("div",{className:"text-right",children:[z.estimatedRevenueLoss&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:["-฿",Number(z.estimatedRevenueLoss).toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Estimated loss"})]}),!z.isResolved&&e.jsx(R,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>{const L=prompt("Enter action taken to resolve this gap:");L&&B.mutate({gapId:z.id,actionTaken:L})},children:"Mark Resolved"})]})]})})},z.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No booking gaps detected"})]})})})]})}),e.jsx(ne,{value:"ai-insights",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(hn,{className:"mr-2 h-5 w-5"}),"AI-Powered Performance Summary"]}),e.jsx(Te,{children:"Comprehensive AI analysis of your property performance"})]}),e.jsx(D,{children:A?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-6",children:M&&M.length>0?M.map(z=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Performance Grade"}),e.jsx("div",{className:`text-3xl font-bold ${Se(z.performanceGrade||"C")}`,children:z.performanceGrade})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"AI Confidence"}),e.jsxs("div",{className:"text-xl font-bold",children:[(Number(z.confidenceScore)*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Report Date"}),e.jsx("div",{className:"font-medium",children:new Date(z.summaryDate).toLocaleDateString()})]})]}),z.keyInsights&&e.jsxs($n,{children:[e.jsx(hn,{className:"h-4 w-4"}),e.jsx(Fn,{children:z.keyInsights})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsxs(D,{className:"pt-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:z.summaryData?.totalBookings||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Bookings"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[z.summaryData?.averageOccupancy||0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Occupancy"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["฿",z.summaryData?.averageRate||0]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average Rate"})]})}),e.jsx(O,{children:e.jsxs(D,{className:"pt-4",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[z.summaryData?.leadTime||0," days"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Lead Time"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center",children:[e.jsx(Ut,{className:"mr-2 h-4 w-4 text-yellow-500"}),"AI Suggestions"]}),e.jsx("div",{className:"grid gap-2",children:z.aiSuggestions?.map((L,le)=>e.jsx(O,{children:e.jsx(D,{className:"pt-3",children:e.jsx("p",{className:"text-sm",children:L})})},le))})]}),z.actionItems&&z.actionItems.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center",children:[e.jsx(Me,{className:"mr-2 h-4 w-4 text-green-500"}),"Recommended Actions"]}),e.jsx("div",{className:"grid gap-2",children:z.actionItems.map((L,le)=>e.jsx(O,{children:e.jsx(D,{className:"pt-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:L.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:L.estimatedImpact})]}),e.jsx(q,{className:L.priority==="high"?"bg-red-100 text-red-800":L.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:L.priority})]})})},le))})]})]},z.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(hn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No AI performance summary available"})]})})})]})}),e.jsx(ne,{value:"direct-booking",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(Fd,{className:"mr-2 h-5 w-5"}),"Direct Booking Price Optimizer"]}),e.jsx(Te,{children:"Optimize direct booking rates to compete with OTA platforms"})]}),e.jsx(D,{children:I?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:F&&F.length>0?e.jsx("div",{className:"grid gap-4",children:F.map(z=>e.jsx(O,{children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:z.propertyName}),e.jsxs(q,{className:z.conversionPotential==="high"?"bg-green-100 text-green-800":z.conversionPotential==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800",children:[z.conversionPotential," conversion potential"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Direct Rate"}),e.jsxs("div",{className:"text-xl font-bold",children:["฿",Number(z.currentDirectRate).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"OTA Guest Rate"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["฿",Number(z.otaGuestRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Net payout: ฿",Number(z.otaNetPayout||0).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Recommended Direct Rate"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["฿",Number(z.recommendedDirectRate||0).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-600",children:["฿",Number(z.competitiveAdvantage||0).toLocaleString()," savings vs OTA"]})]})]}),z.suggestedPerks&&z.suggestedPerks.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Suggested Perks to Add Value:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z.suggestedPerks.map((L,le)=>e.jsx(q,{variant:"outline",className:"text-xs",children:L},le))})]}),z.otaCommissionRate&&e.jsxs($n,{children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsxs(Fn,{children:["By pricing direct bookings at ฿",Number(z.recommendedDirectRate||0).toLocaleString(),", guests save ฿",Number(z.competitiveAdvantage||0).toLocaleString(),"while you avoid the ",Number(z.otaCommissionRate).toFixed(1),"% OTA commission."]})]})]})})},z.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fd,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No direct booking optimization data available"})]})})})]})}),e.jsxs(ne,{value:"alerts",className:"space-y-4",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(Nt,{className:"mr-2 h-5 w-5"}),"Smart Alert System"]}),e.jsx(Te,{children:"Real-time alerts for pricing opportunities and performance issues"})]}),e.jsx(D,{children:C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsx("div",{className:"space-y-4",children:N&&N.length>0?e.jsx("div",{className:"grid gap-4",children:N.map(z=>e.jsx(O,{className:`border-l-4 ${z.severity==="critical"?"border-l-red-500":z.severity==="high"?"border-l-orange-500":z.severity==="medium"?"border-l-yellow-500":"border-l-blue-500"}`,children:e.jsx(D,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-medium",children:z.title}),e.jsx(q,{className:W(z.severity),children:z.severity.toUpperCase()}),!z.isRead&&e.jsx(q,{variant:"secondary",className:"text-xs",children:"NEW"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:z.message}),z.propertyName&&e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(is,{className:"h-3 w-3 mr-1"}),z.propertyName]}),z.recommendedAction&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["💡 ",e.jsx("strong",{children:"Recommended Action:"})," ",z.recommendedAction]})})]}),e.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[!z.isRead&&e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Q.mutate(z.id),disabled:Q.isPending,children:e.jsx($t,{className:"h-3 w-3"})}),!z.isResolved&&e.jsx(R,{variant:"outline",size:"sm",onClick:()=>n(z),children:"Resolve"}),z.isResolved&&e.jsx(q,{variant:"default",className:"text-xs",children:"Resolved"})]})]})})},z.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active alerts"})]})})})]}),r&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{children:["Resolve Alert: ",r.title]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"action",children:"Action Taken"}),e.jsx(nt,{id:"action",placeholder:"Describe the action you took to resolve this alert...",value:a,onChange:z=>i(z.target.value)})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{variant:"outline",onClick:()=>n(null),children:"Cancel"}),e.jsx(R,{onClick:()=>{a.trim()&&T.mutate({alertId:r.id,actionTaken:a})},disabled:!a.trim()||T.isPending,children:T.isPending?"Resolving...":"Resolve Alert"})]})]})]})]}),e.jsx(ne,{value:"calendar",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center",children:[e.jsx(We,{className:"mr-2 h-5 w-5"}),"Holiday Heatmap Calendar View"]}),e.jsx(Te,{children:"Color-coded calendar for strategic pricing decisions"})]}),e.jsx(D,{children:E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(cs,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-6 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm",children:"High Demand - Increase Price"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Normal - Maintain Price"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm",children:"Low Demand - Promote/Reduce"})]})]}),V&&V.length>0?e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(z=>e.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground p-2",children:z},z)),V.slice(0,28).map(z=>{const L=new Date(z.date);return L.getDay(),e.jsx(O,{className:`p-2 cursor-pointer transition-all hover:scale-105 ${z.colorCode==="green"?"bg-green-100 border-green-300":z.colorCode==="yellow"?"bg-yellow-100 border-yellow-300":"bg-red-100 border-red-300"}`,children:e.jsxs(D,{className:"p-0 space-y-1",children:[e.jsx("div",{className:"text-sm font-bold text-center",children:L.getDate()}),e.jsxs("div",{className:"text-xs text-center",children:["฿",Number(z.recommendedRate).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:[Math.round(z.historicalOccupancy),"%"]}),z.events&&z.events.length>0&&e.jsx("div",{className:"text-xs text-center font-medium",children:"🎉"})]})},z.id)})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(We,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No heatmap data available"})]})]})})]})})]})]})}const kPe=Qt({requestedAmount:Ne().min(1,"Amount is required"),payoutType:Cs(["full","partial"]),propertyId:Zt().optional(),bankAccountName:Ne().min(1,"Account name is required"),bankAccountNumber:Ne().min(1,"Account number is required"),bankName:Ne().min(1,"Bank name is required"),bankBranch:Ne().optional(),routingNumber:Ne().optional(),swiftCode:Ne().optional(),ownerNotes:Ne().optional(),urgencyLevel:Cs(["normal","urgent"]),preferredPayoutDate:ji().optional()}),APe=Qt({fromParty:Cs(["owner","management","portfolio_manager"]),fromPartyId:Ne().min(1,"From party ID is required"),toParty:Cs(["owner","management","portfolio_manager"]),toPartyId:Ne().min(1,"To party ID is required"),propertyId:Zt().optional(),invoiceDate:ji(),dueDate:ji().optional(),periodStart:ji(),periodEnd:ji(),invoiceType:Cs(["management_fee","expenses","revenue_share","services"]),category:Cs(["rental_income","cleaning","maintenance","utilities","management"]),description:Ne().optional(),headerText:Ne().optional(),footerText:Ne().optional(),ownerNotes:Ne().optional()}),TPe=Qt({description:Ne().min(1,"Description is required"),category:Ne().min(1,"Category is required"),quantity:Ne().default("1"),unitPrice:Ne().min(1,"Unit price is required"),chargeType:Cs(["guest_billable","owner_billable","company_expense","complimentary"]),sourceType:Cs(["booking","service","utility","manual"]).optional(),sourceId:Zt().optional(),serviceDate:ji().optional(),referenceNumber:Ne().optional(),vendorName:Ne().optional(),taxable:Vr().default(!0)});function kA(){const[t,s]=j.useState("overview"),[r,n]=j.useState("current"),[a,i]=j.useState(!1),[l,o]=j.useState(!1),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,x]=j.useState(null),[g,p]=j.useState("all"),{toast:f}=Xe(),v=ut(),b=Ft({resolver:es(kPe),defaultValues:{payoutType:"full",urgencyLevel:"normal"}}),y=Ft({resolver:es(APe),defaultValues:{fromParty:"management",toParty:"owner",invoiceType:"revenue_share",category:"rental_income",invoiceDate:new Date,periodStart:new Date,periodEnd:new Date}}),S=Ft({resolver:es(TPe),defaultValues:{description:"",category:"",quantity:"1",unitPrice:"",chargeType:"owner_billable",referenceNumber:"",vendorName:"",taxable:!0}}),{data:w}=ge({queryKey:["/api/owner-invoicing/analytics",h,r],queryFn:()=>fe("GET",`/api/owner-invoicing/analytics?${new URLSearchParams({...h&&{propertyId:h.toString()},period:r})}`)}),{data:C}=ge({queryKey:["/api/owner-balance",h],queryFn:()=>fe("GET",`/api/owner-balance?${new URLSearchParams({...h&&{propertyId:h.toString()}})}`)}),{data:k}=ge({queryKey:["/api/owner-payout-requests",g,h],queryFn:()=>fe("GET",`/api/owner-payout-requests?${new URLSearchParams({...g!=="all"&&{status:g},...h&&{propertyId:h.toString()}})}`),retry:!1}),A=Array.isArray(k)?k:[],{data:N}=ge({queryKey:["/api/owner-invoices",g,h],queryFn:()=>fe("GET",`/api/owner-invoices?${new URLSearchParams({...g!=="all"&&{status:g},...h&&{propertyId:h.toString()}})}`),retry:!1}),M=Array.isArray(N)?N:[],{data:F}=ge({queryKey:["/api/properties"]}),{data:I}=ge({queryKey:["/api/users"]}),{data:V}=ge({queryKey:["/api/owner-invoices",u?.id,"line-items"],queryFn:()=>u?fe("GET",`/api/owner-invoices/${u.id}/line-items`):null,enabled:!!u}),E=Ce({mutationFn:L=>fe("POST","/api/owner-payout-requests",L),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/owner-payout-requests"]}),v.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),i(!1),b.reset(),f({title:"Success",description:"Payout request created successfully"})},onError:L=>{f({title:"Error",description:L.message||"Failed to create payout request",variant:"destructive"})}}),G=Ce({mutationFn:({id:L,...le})=>fe("PUT",`/api/owner-payout-requests/${L}`,le),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/owner-payout-requests"]}),v.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),f({title:"Success",description:"Payout request updated successfully"})},onError:L=>{f({title:"Error",description:L.message||"Failed to update payout request",variant:"destructive"})}}),Y=Ce({mutationFn:L=>fe("POST","/api/owner-invoices",L),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/owner-invoices"]}),v.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),o(!1),y.reset(),f({title:"Success",description:"Invoice created successfully"})},onError:L=>{f({title:"Error",description:L.message||"Failed to create invoice",variant:"destructive"})}}),Q=Ce({mutationFn:({invoiceId:L,...le})=>fe("POST",`/api/owner-invoices/${L}/line-items`,le),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/owner-invoices",u?.id,"line-items"]}),v.invalidateQueries({queryKey:["/api/owner-invoices"]}),d(!1),S.reset(),f({title:"Success",description:"Line item added successfully"})},onError:L=>{f({title:"Error",description:L.message||"Failed to add line item",variant:"destructive"})}});Ce({mutationFn:L=>fe("POST","/api/owner-invoices/generate-from-bookings",L),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/owner-invoices"]}),v.invalidateQueries({queryKey:["/api/owner-invoicing/analytics"]}),f({title:"Success",description:"Invoice generated from booking data successfully"})},onError:L=>{f({title:"Error",description:L.message||"Failed to generate invoice",variant:"destructive"})}});const T=L=>{const Z={pending:{variant:"secondary",icon:Ke},approved:{variant:"default",icon:Me},processing:{variant:"default",icon:Qf},completed:{variant:"default",icon:Me},rejected:{variant:"destructive",icon:br},draft:{variant:"secondary",icon:Or},sent:{variant:"default",icon:dt},viewed:{variant:"default",icon:$t},paid:{variant:"default",icon:Me},overdue:{variant:"destructive",icon:Nt},cancelled:{variant:"destructive",icon:br}}[L]||{variant:"secondary",icon:Ke},me=Z.icon;return e.jsxs(q,{variant:Z.variant,className:"flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"}),L.charAt(0).toUpperCase()+L.slice(1)]})},B=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(typeof L=="string"?parseFloat(L):L),W=L=>{const le={...L,requestedAmount:L.requestedAmount,availableBalance:C?.currentBalance||"0",preferredPayoutDate:L.preferredPayoutDate?.toISOString().split("T")[0]};E.mutate(le)},he=L=>{const le={...L,invoiceDate:L.invoiceDate.toISOString().split("T")[0],dueDate:L.dueDate?.toISOString().split("T")[0],periodStart:L.periodStart.toISOString().split("T")[0],periodEnd:L.periodEnd.toISOString().split("T")[0],subtotal:"0",totalAmount:"0"};Y.mutate(le)},Se=L=>{const le=parseFloat(L.quantity)*parseFloat(L.unitPrice),Z={...L,invoiceId:u.id,lineTotal:le.toString(),serviceDate:L.serviceDate?.toISOString().split("T")[0]};Q.mutate(Z)},z=(L,le)=>{G.mutate({id:L,status:le})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(yb,{role:"admin",className:"mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Owner Invoicing & Payouts"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive owner financial integration with automated invoicing and payout management"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{value:h?.toString()||"all",onValueChange:L=>x(L==="all"?null:parseInt(L)),children:[e.jsx(J,{className:"w-[200px]",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),F?.map(L=>e.jsx(P,{value:L.id.toString(),children:L.name},L.id))]})]}),e.jsxs(R,{onClick:()=>i(!0),children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Request Payout"]})]})]}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Current Balance"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w.currentBalance?B(w.currentBalance.currentBalance):"$0.00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for payout"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Payout Requests"}),e.jsx(Qf,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w.totalPayoutRequests}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.pendingPayoutRequests," pending"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Invoices"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w.totalInvoices}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.unpaidInvoices," unpaid"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Performance"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:w.completedPayoutRequests}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed payouts"})]})]})]}),e.jsxs(ot,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"balance",children:"Balance"}),e.jsx(re,{value:"payouts",children:"Payout Requests"}),e.jsx(re,{value:"invoices",children:"Invoices"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsx(ne,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Recent Payout Requests"}),e.jsx(Te,{children:"Latest payout requests and their status"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[w?.recentPayoutRequests?.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:B(L.requestedAmount)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:rt(new Date(L.requestedAt),"MMM dd, yyyy")})]}),T(L.status)]},L.id)),(!w?.recentPayoutRequests||w.recentPayoutRequests.length===0)&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No recent payout requests"})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Recent Invoices"}),e.jsx(Te,{children:"Latest invoices and payment status"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[w?.recentInvoices?.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:L.invoiceNumber}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[B(L.totalAmount)," • ",rt(new Date(L.invoiceDate),"MMM dd, yyyy")]})]}),T(L.status)]},L.id)),(!w?.recentInvoices||w.recentInvoices.length===0)&&e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No recent invoices"})]})})]})]})}),e.jsx(ne,{value:"balance",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Owner Balance Details"}),e.jsx(Te,{children:"Detailed breakdown of current balance and financial activity"})]}),e.jsx(D,{children:C?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold",children:B(C.currentBalance)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:B(C.pendingRevenue)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold",children:B(C.totalExpenses)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Management Fees"}),e.jsx("p",{className:"text-2xl font-bold",children:B(C.managementFees)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Rental Income"}),e.jsx("p",{className:"text-2xl font-bold",children:B(C.monthlyRentalIncome)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Utilities"}),e.jsx("p",{className:"text-2xl font-bold",children:B(C.monthlyUtilities)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Maintenance"}),e.jsx("p",{className:"text-2xl font-bold",children:B(C.monthlyMaintenance)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Payout"}),e.jsx("p",{className:"text-2xl font-bold",children:C.lastPayoutAmount?B(C.lastPayoutAmount):"None"}),C.lastPayoutDate&&e.jsx("p",{className:"text-xs text-muted-foreground",children:rt(new Date(C.lastPayoutDate),"MMM dd, yyyy")})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No balance data available"})})})]})}),e.jsxs(ne,{value:"payouts",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs(te,{value:g,onValueChange:p,children:[e.jsx(J,{className:"w-[150px]",children:e.jsx(se,{placeholder:"Filter by status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"approved",children:"Approved"}),e.jsx(P,{value:"processing",children:"Processing"}),e.jsx(P,{value:"completed",children:"Completed"}),e.jsx(P,{value:"rejected",children:"Rejected"})]})]})}),e.jsxs(R,{onClick:()=>i(!0),children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"New Payout Request"]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Payout Requests"}),e.jsx(Te,{children:"Manage your payout requests and track their status"})]}),e.jsx(D,{children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Request Date"}),e.jsx(Oe,{children:"Amount"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Property"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsxs(Hs,{children:[A?.map(L=>e.jsxs(wt,{children:[e.jsx(Ae,{children:rt(new Date(L.requestedAt),"MMM dd, yyyy")}),e.jsx(Ae,{className:"font-medium",children:B(L.requestedAmount)}),e.jsx(Ae,{children:e.jsx(q,{variant:"outline",children:L.payoutType})}),e.jsx(Ae,{children:F?.find(le=>le.id===L.propertyId)?.name||"All Properties"}),e.jsx(Ae,{children:T(L.status)}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",children:e.jsx($t,{className:"w-4 h-4"})}),L.status==="pending"&&e.jsx(R,{variant:"outline",size:"sm",onClick:()=>z(L.id,"cancelled"),children:"Cancel"})]})})]},L.id)),(!A||A.length===0)&&e.jsx(wt,{children:e.jsx(Ae,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No payout requests found"})})]})]})})]})]}),e.jsxs(ne,{value:"invoices",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs(te,{value:g,onValueChange:p,children:[e.jsx(J,{className:"w-[150px]",children:e.jsx(se,{placeholder:"Filter by status"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"draft",children:"Draft"}),e.jsx(P,{value:"sent",children:"Sent"}),e.jsx(P,{value:"viewed",children:"Viewed"}),e.jsx(P,{value:"paid",children:"Paid"}),e.jsx(P,{value:"overdue",children:"Overdue"})]})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(R,{variant:"outline",onClick:()=>o(!0),children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Create Invoice"]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Owner Invoices"}),e.jsx(Te,{children:"View and manage invoices between owners and management"})]}),e.jsx(D,{children:e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Invoice #"}),e.jsx(Oe,{children:"Date"}),e.jsx(Oe,{children:"From"}),e.jsx(Oe,{children:"To"}),e.jsx(Oe,{children:"Amount"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{children:"Actions"})]})}),e.jsxs(Hs,{children:[M?.map(L=>e.jsxs(wt,{children:[e.jsx(Ae,{className:"font-medium",children:L.invoiceNumber}),e.jsx(Ae,{children:rt(new Date(L.invoiceDate),"MMM dd, yyyy")}),e.jsx(Ae,{children:e.jsx(q,{variant:"outline",children:L.fromParty})}),e.jsx(Ae,{children:e.jsx(q,{variant:"outline",children:L.toParty})}),e.jsx(Ae,{className:"font-medium",children:B(L.totalAmount)}),e.jsx(Ae,{children:T(L.status)}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>m(L),children:e.jsx($t,{className:"w-4 h-4"})}),e.jsx(R,{variant:"outline",size:"sm",children:e.jsx(as,{className:"w-4 h-4"})})]})})]},L.id)),(!M||M.length===0)&&e.jsx(wt,{children:e.jsx(Ae,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No invoices found"})})]})]})})]})]}),e.jsx(ne,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Financial Summary"}),e.jsx(Te,{children:"Overview of financial performance"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Balance"}),e.jsx("span",{className:"font-medium",children:w?.currentBalance?B(w.currentBalance.currentBalance):"$0.00"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pending Payouts"}),e.jsx("span",{className:"font-medium",children:w?.pendingPayoutRequests||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completed Payouts"}),e.jsx("span",{className:"font-medium",children:w?.completedPayoutRequests||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Invoices"}),e.jsx("span",{className:"font-medium",children:w?.totalInvoices||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Paid Invoices"}),e.jsx("span",{className:"font-medium",children:w?.paidInvoices||0})]})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Quick Actions"}),e.jsx(Te,{children:"Common tasks and utilities"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>i(!0),children:[e.jsx(Qf,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Request Payout"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex flex-col gap-2",onClick:()=>o(!0),children:[e.jsx(dt,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Create Invoice"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[e.jsx(as,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"Export Data"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex flex-col gap-2",children:[e.jsx(xa,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:"View Reports"})]})]})})]})]})})]}),e.jsx(Ve,{open:a,onOpenChange:i,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create Payout Request"}),e.jsx(Pt,{children:"Request a payout from your available balance"})]}),e.jsx(Wt,{...b,children:e.jsxs("form",{onSubmit:b.handleSubmit(W),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:b.control,name:"requestedAmount",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Requested Amount"}),e.jsx(ce,{children:e.jsx(H,{...L,type:"number",step:"0.01",placeholder:"0.00"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:b.control,name:"payoutType",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Payout Type"}),e.jsxs(te,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"full",children:"Full Balance"}),e.jsx(P,{value:"partial",children:"Partial Amount"})]})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:b.control,name:"bankAccountName",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Account Name"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Account holder name"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:b.control,name:"bankAccountNumber",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Account Number"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Bank account number"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:b.control,name:"bankName",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Bank Name"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Bank name"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:b.control,name:"bankBranch",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Bank Branch (Optional)"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Branch name"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:b.control,name:"urgencyLevel",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Urgency Level"}),e.jsxs(te,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select urgency"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"normal",children:"Normal"}),e.jsx(P,{value:"urgent",children:"Urgent"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:b.control,name:"preferredPayoutDate",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Preferred Date (Optional)"}),e.jsxs(io,{children:[e.jsx(lo,{asChild:!0,children:e.jsx(ce,{children:e.jsxs(R,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[L.value?rt(L.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(We,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(il,{className:"w-auto p-0",align:"start",children:e.jsx(al,{mode:"single",selected:L.value,onSelect:L.onChange,disabled:le=>le<new Date,initialFocus:!0})})]}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:b.control,name:"ownerNotes",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Notes (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{...L,placeholder:"Additional notes or special instructions",rows:3})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:E.isPending,children:E.isPending?"Creating...":"Create Request"})]})]})})]})}),e.jsx(Ve,{open:l,onOpenChange:o,children:e.jsxs(qe,{className:"max-w-3xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create Owner Invoice"}),e.jsx(Pt,{children:"Create a new invoice between owners and management"})]}),e.jsx(Wt,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(he),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"fromParty",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"From"}),e.jsxs(te,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select sender"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"owner",children:"Owner"}),e.jsx(P,{value:"management",children:"Management"}),e.jsx(P,{value:"portfolio_manager",children:"Portfolio Manager"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"toParty",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"To"}),e.jsxs(te,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select recipient"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"owner",children:"Owner"}),e.jsx(P,{value:"management",children:"Management"}),e.jsx(P,{value:"portfolio_manager",children:"Portfolio Manager"})]})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"fromPartyId",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"From User"}),e.jsxs(te,{onValueChange:L.onChange,value:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select user"})})}),e.jsx(ee,{children:I?.map(le=>e.jsxs(P,{value:le.id,children:[le.firstName," ",le.lastName," (",le.role,")"]},le.id))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"toPartyId",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"To User"}),e.jsxs(te,{onValueChange:L.onChange,value:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select user"})})}),e.jsx(ee,{children:I?.map(le=>e.jsxs(P,{value:le.id,children:[le.firstName," ",le.lastName," (",le.role,")"]},le.id))})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"invoiceType",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Invoice Type"}),e.jsxs(te,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"management_fee",children:"Management Fee"}),e.jsx(P,{value:"expenses",children:"Expenses"}),e.jsx(P,{value:"revenue_share",children:"Revenue Share"}),e.jsx(P,{value:"services",children:"Services"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"category",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Category"}),e.jsxs(te,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select category"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"rental_income",children:"Rental Income"}),e.jsx(P,{value:"cleaning",children:"Cleaning"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"utilities",children:"Utilities"}),e.jsx(P,{value:"management",children:"Management"})]})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(de,{control:y.control,name:"invoiceDate",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Invoice Date"}),e.jsxs(io,{children:[e.jsx(lo,{asChild:!0,children:e.jsx(ce,{children:e.jsxs(R,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[L.value?rt(L.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(We,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(il,{className:"w-auto p-0",align:"start",children:e.jsx(al,{mode:"single",selected:L.value,onSelect:L.onChange,initialFocus:!0})})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"periodStart",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Period Start"}),e.jsxs(io,{children:[e.jsx(lo,{asChild:!0,children:e.jsx(ce,{children:e.jsxs(R,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[L.value?rt(L.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(We,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(il,{className:"w-auto p-0",align:"start",children:e.jsx(al,{mode:"single",selected:L.value,onSelect:L.onChange,initialFocus:!0})})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"periodEnd",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Period End"}),e.jsxs(io,{children:[e.jsx(lo,{asChild:!0,children:e.jsx(ce,{children:e.jsxs(R,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:[L.value?rt(L.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(We,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(il,{className:"w-auto p-0",align:"start",children:e.jsx(al,{mode:"single",selected:L.value,onSelect:L.onChange,initialFocus:!0})})]}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:y.control,name:"description",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Description"}),e.jsx(ce,{children:e.jsx(nt,{...L,placeholder:"Invoice description",rows:3})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:Y.isPending,children:Y.isPending?"Creating...":"Create Invoice"})]})]})})]})}),u&&e.jsx(Ve,{open:!!u,onOpenChange:()=>m(null),children:e.jsxs(qe,{className:"max-w-4xl",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{children:["Invoice Details - ",u.invoiceNumber]}),e.jsx(Pt,{children:"View invoice details and line items"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Invoice Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",rt(new Date(u.invoiceDate),"PPP")]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Due Date:"})," ",u.dueDate?rt(new Date(u.dueDate),"PPP"):"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Period:"})," ",rt(new Date(u.periodStart),"MMM dd")," - ",rt(new Date(u.periodEnd),"MMM dd, yyyy")]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"})," ",u.invoiceType]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Category:"})," ",u.category]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"})," ",B(u.subtotal)]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax:"})," ",B(u.taxAmount||0)]}),e.jsxs("p",{className:"font-medium",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total:"})," ",B(u.totalAmount)]}),e.jsx("div",{className:"pt-2",children:T(u.status)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:"Line Items"}),e.jsxs(R,{size:"sm",onClick:()=>d(!0),children:[e.jsx(ht,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Description"}),e.jsx(Oe,{children:"Category"}),e.jsx(Oe,{children:"Qty"}),e.jsx(Oe,{children:"Unit Price"}),e.jsx(Oe,{children:"Total"}),e.jsx(Oe,{children:"Type"})]})}),e.jsxs(Hs,{children:[V?.map(L=>e.jsxs(wt,{children:[e.jsx(Ae,{children:L.description}),e.jsx(Ae,{children:e.jsx(q,{variant:"outline",children:L.category})}),e.jsx(Ae,{children:L.quantity}),e.jsx(Ae,{children:B(L.unitPrice)}),e.jsx(Ae,{className:"font-medium",children:B(L.lineTotal)}),e.jsx(Ae,{children:e.jsx(q,{variant:"secondary",children:L.chargeType})})]},L.id)),(!V||V.length===0)&&e.jsx(wt,{children:e.jsx(Ae,{colSpan:6,className:"text-center py-4 text-muted-foreground",children:"No line items found"})})]})]})]}),u.description&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.description})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{variant:"outline",onClick:()=>m(null),children:"Close"}),e.jsxs(R,{children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})]})}),e.jsx(Ve,{open:c,onOpenChange:d,children:e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Add Line Item"}),e.jsx(Pt,{children:"Add a new line item to the invoice"})]}),e.jsx(Wt,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit(Se),className:"space-y-4",children:[e.jsx(de,{control:S.control,name:"description",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Description"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Item description"})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:S.control,name:"category",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Category"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Item category"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:S.control,name:"chargeType",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Charge Type"}),e.jsxs(te,{onValueChange:L.onChange,defaultValue:L.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select charge type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"guest_billable",children:"Guest Billable"}),e.jsx(P,{value:"owner_billable",children:"Owner Billable"}),e.jsx(P,{value:"company_expense",children:"Company Expense"}),e.jsx(P,{value:"complimentary",children:"Complimentary"})]})]}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:S.control,name:"quantity",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Quantity"}),e.jsx(ce,{children:e.jsx(H,{...L,type:"number",step:"0.01",placeholder:"1"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:S.control,name:"unitPrice",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Unit Price"}),e.jsx(ce,{children:e.jsx(H,{...L,type:"number",step:"0.01",placeholder:"0.00"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:S.control,name:"referenceNumber",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Reference Number (Optional)"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Reference number"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:S.control,name:"vendorName",render:({field:L})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Vendor Name (Optional)"}),e.jsx(ce,{children:e.jsx(H,{...L,placeholder:"Vendor name"})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:Q.isPending,children:Q.isPending?"Adding...":"Add Line Item"})]})]})})]})})]})}const DPe=Qt({amount:Ne().min(1,"Amount is required"),requestNotes:Ne().optional()}),OPe=Qt({description:Ne().min(1,"Description is required"),quantity:Ne().min(1,"Quantity is required"),unitPrice:Ne().min(1,"Unit price is required"),referenceId:Ne().optional(),referenceType:Ne().optional()}),EPe=Qt({receiverType:Cs(["user","organization","external"]),receiverId:Ne().optional(),receiverName:Ne().min(1,"Receiver name is required"),receiverAddress:Ne().optional(),invoiceType:Ne().min(1,"Invoice type is required"),description:Ne().min(1,"Description is required"),lineItems:n7(OPe).min(1,"At least one line item is required"),taxRate:Ne().optional(),notes:Ne().optional(),dueDate:Ne().optional(),referenceNumber:Ne().optional()});function MPe(){const{toast:t}=Xe(),s=ut(),{user:r}=Rr(),[n,a]=j.useState({startDate:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[i,l]=j.useState("all"),[o,c]=j.useState(""),[d,u]=j.useState(!1),[m,h]=j.useState(!1),[x,g]=j.useState({department:"all",status:"all",search:""}),p=r?.role==="admin",{data:f=[]}=ge({queryKey:["/api/users","portfolio-manager"],queryFn:()=>fe("GET","/api/users?role=portfolio-manager"),enabled:p});j.useEffect(()=>{p&&f.length>0&&!o?c(f[0]?.id):!p&&r?.id&&c(r?.id)},[p,f,r,o]);const{data:v,isLoading:b}=ge({queryKey:["/api/pm/dashboard/financial-overview",n.startDate,n.endDate,i,o],queryFn:async()=>{const U=new URLSearchParams({startDate:n.startDate,endDate:n.endDate,...i!=="all"&&{propertyId:i},...o&&{portfolioManagerId:o}});return fe("GET",`/api/pm/dashboard/financial-overview?${U}`)},enabled:!!o}),{data:y,isLoading:S}=ge({queryKey:["/api/pm/dashboard/balance",o],queryFn:()=>{const U=new URLSearchParams({...o&&{portfolioManagerId:o}});return fe("GET",`/api/pm/dashboard/balance?${U}`)},enabled:!!o}),{data:w,isLoading:C}=ge({queryKey:["/api/pm/dashboard/payouts",o],queryFn:()=>{const U=new URLSearchParams({...o&&{portfolioManagerId:o}});return fe("GET",`/api/pm/dashboard/payouts?${U}`)},enabled:!!o}),{data:k,isLoading:A}=ge({queryKey:["/api/pm/dashboard/task-logs",x.department,x.status,n.startDate,n.endDate,o],queryFn:async()=>{const U=new URLSearchParams({startDate:n.startDate,endDate:n.endDate,limit:"100",...x.department!=="all"&&{department:x.department},...x.status!=="all"&&{status:x.status},...o&&{portfolioManagerId:o}});return fe("GET",`/api/pm/dashboard/task-logs?${U}`)},enabled:!!o}),{data:N=[]}=ge({queryKey:["/api/pm/dashboard/portfolio",o],queryFn:()=>{const U=new URLSearchParams({...o&&{portfolioManagerId:o}});return fe("GET",`/api/pm/dashboard/portfolio?${U}`)},enabled:!!o}),{data:M,isLoading:F}=ge({queryKey:["/api/pm/dashboard/notifications",o],queryFn:()=>{const U=new URLSearchParams({limit:"20",...o&&{portfolioManagerId:o}});return fe("GET",`/api/pm/dashboard/notifications?${U}`)},enabled:!!o}),{data:I,isLoading:V}=ge({queryKey:["/api/pm/dashboard/invoices"],queryFn:()=>fe("GET","/api/pm/dashboard/invoices")}),E=Ce({mutationFn:U=>fe("POST","/api/pm/dashboard/payouts",U),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),t({title:"Payout Request Submitted",description:"Your payout request has been submitted for approval."}),u(!1)},onError:U=>{t({title:"Error",description:U.message,variant:"destructive"})}}),G=Ce({mutationFn:U=>fe("PATCH",`/api/pm/dashboard/payouts/${U}/received`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/payouts"]}),s.invalidateQueries({queryKey:["/api/pm/dashboard/balance"]}),t({title:"Payment Confirmed",description:"Payment receipt confirmed successfully."})},onError:U=>{t({title:"Error",description:U.message,variant:"destructive"})}}),Y=Ce({mutationFn:U=>fe("POST","/api/pm/dashboard/invoices",U),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/invoices"]}),t({title:"Invoice Created",description:"Invoice has been created successfully."}),h(!1)},onError:U=>{t({title:"Error",description:U.message,variant:"destructive"})}}),Q=Ce({mutationFn:U=>fe("PATCH",`/api/pm/dashboard/notifications/${U}/read`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]})}}),T=Ft({resolver:es(DPe),defaultValues:{amount:"",requestNotes:""}}),B=Ft({resolver:es(EPe),defaultValues:{receiverType:"organization",receiverId:"",receiverName:"",receiverAddress:"",invoiceType:"management_commission",description:"",lineItems:[{description:"",quantity:"1",unitPrice:"",referenceId:"",referenceType:""}],taxRate:"10",notes:"",dueDate:"",referenceNumber:""}}),{fields:W,append:he,remove:Se}=Az({control:B.control,name:"lineItems"}),z=U=>{E.mutate(U)},L=U=>{Y.mutate(U)},le=({status:U})=>{const je={pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",overdue:"bg-red-100 text-red-800"};return e.jsx(q,{className:je[U]||"bg-gray-100 text-gray-800",children:U})},Z=U=>({cleaning:"bg-blue-100 text-blue-800",maintenance:"bg-orange-100 text-orange-800",gardening:"bg-green-100 text-green-800",pool:"bg-cyan-100 text-cyan-800",security:"bg-red-100 text-red-800",inspection:"bg-purple-100 text-purple-800"})[U]||"bg-gray-100 text-gray-800",me=U=>{switch(U){case"urgent":return e.jsx(Et,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(Et,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Vs,{className:"h-4 w-4 text-blue-500"})}};return b||S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"container px-6",children:[e.jsx("div",{className:"mt-3",children:e.jsx(Oc,{fallbackRoute:"/dashboard-hub",variant:"ghost",className:"!p-2 !rounded-md bg-white/90 backdrop-blur-md border border-slate-200 shadow-sm",children:e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back to Dashboard"})})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Portfolio Manager Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("p",{className:"text-muted-foreground",children:p?"Viewing data for:":"Manage your portfolio, track commissions, and create invoices"}),p&&o&&e.jsxs(q,{variant:"outline",className:"bg-blue-50 text-blue-700",children:[e.jsx(It,{className:"h-3 w-3 mr-1"}),(f&&Array.isArray(f)?f:[]).find(U=>U.id===o)?.name||"Portfolio Manager"]})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[p&&e.jsxs(te,{value:o,onValueChange:c,children:[e.jsx(J,{className:"w-56",children:e.jsx(se,{placeholder:"Select Portfolio Manager",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),(f&&Array.isArray(f)?f:[]).find(U=>U.id===o)?.name||"Select Portfolio Manager"]})})}),e.jsx(ee,{children:(f&&Array.isArray(f)?f:[]).map(U=>e.jsx(P,{value:U.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),U.name," (",U.email,")"]})},U.id))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{type:"date",value:n.startDate,onChange:U=>a(je=>({...je,startDate:U.target.value})),className:"w-40"}),e.jsx(H,{type:"date",value:n.endDate,onChange:U=>a(je=>({...je,endDate:U.target.value})),className:"w-40"})]}),e.jsxs(te,{value:i,onValueChange:l,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),(N&&Array.isArray(N)?N:[])?.map(U=>e.jsx(P,{value:U.id.toString(),children:U.name},U.id))]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Commission Earnings"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",v?.totalCommissionEarnings?.toLocaleString()||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"From management fees"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Portfolio Properties"}),e.jsx(Tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(N&&Array.isArray(N)?N.length:0)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Under management"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Balance"}),e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",y?.currentBalance?.toLocaleString()||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for payout"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Unread Notifications"}),e.jsx(Vs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(M&&Array.isArray(M)?M.filter(U=>!U.isRead).length:0)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]})]}),e.jsxs(ot,{defaultValue:"overview",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-6",children:[e.jsx(re,{value:"overview",children:"Overview"}),e.jsx(re,{value:"balance",children:"Balance"}),e.jsx(re,{value:"invoices",children:"Invoices"}),e.jsx(re,{value:"tasks",children:"Task Logs"}),e.jsx(re,{value:"notifications",children:"Notifications"}),e.jsx(re,{value:"analytics",children:"Analytics"})]}),e.jsxs(ne,{value:"overview",className:"space-y-4",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Portfolio Management"}),e.jsx(Te,{children:"Quick access to property management tools"})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/properties",children:[e.jsx(Tt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Property Access"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/property-documents-management",children:[e.jsx(dt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Document Center"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/tasks",children:[e.jsx(Lt,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Maintenance"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/services",children:[e.jsx(We,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Service Tracker"})]}),e.jsxs(R,{variant:"outline",className:"h-20 flex-col",onClick:()=>window.location.href="/invoice-generator",children:[e.jsx(xa,{className:"h-6 w-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Invoices"})]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Property Performance"}),e.jsx(Te,{children:"Commission earnings by property"})]}),e.jsx(D,{className:"space-y-3",children:(v?.propertyBreakdown&&Array.isArray(v.propertyBreakdown)?v.propertyBreakdown:[]).map(U=>e.jsxs("div",{className:"flex justify-between items-center p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:U.propertyName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[U.bookingCount," bookings"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["$",U.commissionEarned?.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Revenue: $",U.totalRevenue?.toLocaleString()]})]})]},U.propertyId))||e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No properties in portfolio"})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Monthly Earnings Trend"}),e.jsx(Te,{children:"Commission earnings over time"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-2",children:(v?.monthlyTrend&&Array.isArray(v.monthlyTrend)?v.monthlyTrend:[]).map(U=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:U.period}),e.jsxs("span",{className:"font-semibold",children:["$",U.earnings?.toLocaleString()]})]},U.period))||e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No earnings data available"})})})]})]})]}),e.jsxs(ne,{value:"balance",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Commission Balance"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track your earnings and request payouts"})]}),e.jsxs(Ve,{open:d,onOpenChange:u,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{disabled:!y?.currentBalance||y.currentBalance<=0,children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Request Payout"]})}),e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Request Commission Payout"}),e.jsx(Pt,{children:"Submit a payout request for your earned commissions"})]}),e.jsx(Wt,{...T,children:e.jsxs("form",{onSubmit:T.handleSubmit(z),className:"space-y-4",children:[e.jsx(de,{control:T.control,name:"amount",render:({field:U})=>e.jsxs(oe,{children:[e.jsxs(ue,{children:["Amount (Max: $",y?.currentBalance?.toLocaleString(),")"]}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Enter amount",...U})}),e.jsx(xe,{})]})}),e.jsx(de,{control:T.control,name:"requestNotes",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Notes (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Additional details...",...U})}),e.jsx(xe,{})]})}),e.jsxs(Nr,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:E.isPending,children:E.isPending?"Submitting...":"Submit Request"})]})]})})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Balance Summary"})}),e.jsxs(D,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Earned"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["$",y?.totalEarned?.toLocaleString()||"0"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Paid"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["$",y?.totalPaid?.toLocaleString()||"0"]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Current Balance"}),e.jsxs("span",{className:"text-green-600",children:["$",y?.currentBalance?.toLocaleString()||"0"]})]}),y?.lastPayoutDate&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last payout:"," ",rt(xs(y.lastPayoutDate),"MMM d, yyyy")]})]})]}),r&&e.jsx(c$,{userId:r.id,userRole:"portfolio-manager",userEmail:r.email||"",userName:`${r.firstName||""} ${r.lastName||""}`.trim()||r.email||"",currentBalance:y?.currentBalance,onBalanceReset:()=>{s.invalidateQueries({queryKey:["/api/pm/dashboard"]})}}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Payout Requests"})}),e.jsx(D,{children:C?e.jsx("div",{className:"text-center py-4",children:"Loading..."}):e.jsx("div",{className:"space-y-3",children:(w&&Array.isArray(w)?w.slice(0,5):[]).map(U=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-medium",children:["$",U.amount?.toLocaleString()," ",U.currency]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Requested:"," ",rt(xs(U.requestedAt),"MMM d, yyyy")]})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsx(le,{status:U.status}),U.status==="approved"&&U.receiptUrl&&e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>G.mutate(U.id),disabled:G.isPending,children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Payment Received"]})]})]},U.id))||e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No payout requests found"})})})]})]})]}),e.jsxs(ne,{value:"invoices",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage invoices for commissions and services"})]}),e.jsxs(Ve,{open:m,onOpenChange:h,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Create Invoice"]})}),e.jsxs(qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create New Invoice"}),e.jsx(Pt,{children:"Generate a professional invoice for commissions or services"})]}),e.jsx(Wt,{...B,children:e.jsxs("form",{onSubmit:B.handleSubmit(L),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:B.control,name:"receiverType",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Receiver Type"}),e.jsx(ce,{children:e.jsxs(te,{value:U.value,onValueChange:U.onChange,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"organization",children:"Organization"}),e.jsx(P,{value:"user",children:"User"}),e.jsx(P,{value:"external",children:"External Party"})]})]})}),e.jsx(xe,{})]})}),e.jsx(de,{control:B.control,name:"receiverName",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Receiver Name"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Company or person name",...U})}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:B.control,name:"invoiceType",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Invoice Type"}),e.jsx(ce,{children:e.jsxs(te,{value:U.value,onValueChange:U.onChange,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"management_commission",children:"Management Commission"}),e.jsx(P,{value:"booking_commission",children:"Booking Commission"}),e.jsx(P,{value:"service_fee",children:"Service Fee"}),e.jsx(P,{value:"consultation",children:"Consultation"}),e.jsx(P,{value:"maintenance",children:"Maintenance Charge"})]})]})}),e.jsx(xe,{})]})}),e.jsx(de,{control:B.control,name:"dueDate",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Due Date (Optional)"}),e.jsx(ce,{children:e.jsx(H,{type:"date",...U})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:B.control,name:"description",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Description"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Invoice description...",...U})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{children:"Line Items"}),e.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>he({description:"",quantity:"1",unitPrice:"",referenceId:"",referenceType:""}),children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),W.map((U,je)=>e.jsxs("div",{className:"grid grid-cols-6 gap-2 items-end",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(de,{control:B.control,name:`lineItems.${je}.description`,render:({field:ye})=>e.jsx(oe,{children:e.jsx(ce,{children:e.jsx(H,{placeholder:"Description",...ye})})})})}),e.jsx(de,{control:B.control,name:`lineItems.${je}.quantity`,render:({field:ye})=>e.jsx(oe,{children:e.jsx(ce,{children:e.jsx(H,{placeholder:"Qty",...ye})})})}),e.jsx(de,{control:B.control,name:`lineItems.${je}.unitPrice`,render:({field:ye})=>e.jsx(oe,{children:e.jsx(ce,{children:e.jsx(H,{placeholder:"Price",...ye})})})}),e.jsx(de,{control:B.control,name:`lineItems.${je}.referenceId`,render:({field:ye})=>e.jsx(oe,{children:e.jsx(ce,{children:e.jsx(H,{placeholder:"Reference",...ye})})})}),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>Se(je),disabled:W.length===1,children:e.jsx(Fd,{className:"h-4 w-4"})})]},U.id))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:B.control,name:"taxRate",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Tax Rate (%)"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"10",...U})}),e.jsx(xe,{})]})}),e.jsx(de,{control:B.control,name:"referenceNumber",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Reference Number (Optional)"}),e.jsx(ce,{children:e.jsx(H,{placeholder:"Booking ID, etc.",...U})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:B.control,name:"notes",render:({field:U})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Notes (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{placeholder:"Additional notes...",...U})}),e.jsx(xe,{})]})}),e.jsxs(Nr,{children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:Y.isPending,children:Y.isPending?"Creating...":"Create Invoice"})]})]})})]})]})]}),e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:V?e.jsx("div",{className:"text-center py-8",children:"Loading invoices..."}):e.jsx("div",{className:"space-y-4",children:(I&&Array.isArray(I)?I:[])?.map(U=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:U.invoiceNumber}),e.jsx("p",{className:"text-sm text-muted-foreground",children:U.receiverName}),e.jsx("p",{className:"text-sm",children:U.description}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created:"," ",rt(xs(U.createdAt),"MMM d, yyyy")]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsxs("p",{className:"font-semibold",children:["$",U.totalAmount?.toLocaleString()]}),e.jsx(le,{status:U.status}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{size:"sm",variant:"outline",children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs(R,{size:"sm",variant:"outline",children:[e.jsx(as,{className:"h-3 w-3 mr-1"}),"PDF"]})]})]})]},U.id))||e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"})})})})]}),e.jsxs(ne,{value:"tasks",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Task & Portfolio Logs"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track tasks completed across your portfolio properties"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{value:x.department,onValueChange:U=>g(je=>({...je,department:U})),children:[e.jsx(J,{className:"w-40",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Departments"}),e.jsx(P,{value:"cleaning",children:"Cleaning"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"gardening",children:"Gardening"}),e.jsx(P,{value:"pool",children:"Pool"}),e.jsx(P,{value:"security",children:"Security"}),e.jsx(P,{value:"inspection",children:"Inspection"})]})]}),e.jsxs(te,{value:x.status,onValueChange:U=>g(je=>({...je,status:U})),children:[e.jsx(J,{className:"w-32",children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Status"}),e.jsx(P,{value:"pending",children:"Pending"}),e.jsx(P,{value:"in_progress",children:"In Progress"}),e.jsx(P,{value:"completed",children:"Completed"}),e.jsx(P,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:A?e.jsx("div",{className:"text-center py-8",children:"Loading task logs..."}):e.jsx("div",{className:"space-y-4",children:(k&&Array.isArray(k)?k:[])?.map(U=>e.jsxs("div",{className:"flex items-start justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:U.taskTitle}),e.jsx(q,{className:Z(U.department),children:U.department}),e.jsx(le,{status:U.status})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Property: ",U.propertyName]}),U.staffAssigned&&e.jsxs("p",{children:["Staff: ",U.staffAssigned]}),e.jsxs("p",{children:["Created:"," ",rt(xs(U.createdAt),"MMM d, yyyy HH:mm")]}),U.completedAt&&e.jsxs("p",{children:["Completed:"," ",rt(xs(U.completedAt),"MMM d, yyyy HH:mm")]})]}),U.result&&e.jsx("p",{className:"text-sm",children:U.result}),U.notes&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Notes: ",U.notes]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[U.evidencePhotos&&U.evidencePhotos.length>0&&e.jsxs(R,{size:"sm",variant:"outline",children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),"Photos (",U.evidencePhotos.length,")"]}),U.receipts&&U.receipts.length>0&&e.jsxs(R,{size:"sm",variant:"outline",children:[e.jsx(xa,{className:"h-3 w-3 mr-1"}),"Receipts (",U.receipts.length,")"]})]})]},U.id))||e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No task logs found"})})})})]}),e.jsxs(ne,{value:"notifications",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notifications & Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay updated on guest issues, approvals, and system suggestions"})]}),e.jsxs(R,{variant:"outline",onClick:()=>s.invalidateQueries({queryKey:["/api/pm/dashboard/notifications"]}),children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:F?e.jsx("div",{className:"text-center py-8",children:"Loading notifications..."}):e.jsx("div",{className:"space-y-4",children:(M&&Array.isArray(M)?M:[])?.map(U=>e.jsxs("div",{className:`flex items-start gap-3 p-4 border rounded-lg cursor-pointer transition-colors ${U.isRead?"hover:bg-gray-50":"bg-blue-50 border-blue-200"}`,onClick:()=>!U.isRead&&Q.mutate(U.id),children:[e.jsx("div",{className:"mt-1",children:me(U.severity)}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium",children:U.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:rt(xs(U.createdAt),"MMM d, HH:mm")})]}),e.jsx("p",{className:"text-sm",children:U.message}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:"outline",children:U.type}),e.jsx(q,{className:`text-xs ${U.severity==="urgent"?"bg-red-100 text-red-800":U.severity==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:U.severity}),U.actionRequired&&e.jsx(q,{className:"bg-orange-100 text-orange-800",children:"Action Required"})]})]}),U.relatedType&&U.relatedId&&e.jsx(R,{size:"sm",variant:"outline",children:e.jsx(ma,{className:"h-3 w-3"})})]},U.id))||e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No notifications found"})})})})]}),e.jsxs(ne,{value:"analytics",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Portfolio Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Performance insights and AI-powered suggestions"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Performance Summary"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Advanced analytics coming soon"}),e.jsx("p",{className:"text-xs",children:"AI-powered property performance insights"})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"AI Suggestions"})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Smart recommendations coming soon"}),e.jsx("p",{className:"text-xs",children:"Automated guest satisfaction analysis"})]})})]})]})]})]})]})]})}function RPe(){const{toast:t}=Xe(),s=ut(),[r,n]=j.useState(!1),[a,i]=j.useState({exportType:"pdf",dateRangeType:"month",startDate:rt(ar(new Date),"yyyy-MM-dd"),endDate:rt(ml(new Date),"yyyy-MM-dd"),selectedProperties:[],includeNotes:!1,includeServiceLogs:!1,includeBranding:!0}),{data:l=[],isLoading:o}=ge({queryKey:["/api/properties"],select:y=>y.filter(S=>S.id)}),{data:c=[],isLoading:d}=ge({queryKey:["/api/owner-statement-exports"],refetchInterval:5e3}),u=Ce({mutationFn:async y=>fe("POST","/api/owner-statement-exports",y),onSuccess:y=>{t({title:"Export Started",description:`Your ${a.exportType.toUpperCase()} statement is being generated. You'll be notified when it's ready.`}),n(!1),s.invalidateQueries({queryKey:["/api/owner-statement-exports"]})},onError:y=>{t({title:"Export Failed",description:y.message||"Failed to start statement export",variant:"destructive"})}}),m=Ce({mutationFn:async y=>{const S=await fetch(`/api/owner-statement-exports/${y}/download`);if(!S.ok)throw new Error("Download failed");const w=c.find(C=>C.id===y);if(w?.exportType==="csv"){const C=await S.text(),k=new Blob([C],{type:"text/csv"}),A=window.URL.createObjectURL(k),N=document.createElement("a");N.href=A,N.download=w.fileName,document.body.appendChild(N),N.click(),document.body.removeChild(N),window.URL.revokeObjectURL(A)}else await S.json(),window.open(`/api/owner-statement-exports/${y}/pdf-data`,"_blank")},onSuccess:()=>{t({title:"Download Started",description:"Your statement file is being downloaded."})},onError:y=>{t({title:"Download Failed",description:y.message||"Failed to download statement",variant:"destructive"})}}),h=y=>{i(S=>{if(y==="month"){const w=new Date;return{...S,dateRangeType:y,startDate:rt(ar(w),"yyyy-MM-dd"),endDate:rt(ml(w),"yyyy-MM-dd")}}return{...S,dateRangeType:y}})},x=y=>{const S=N$(new Date,y);i(w=>({...w,startDate:rt(ar(S),"yyyy-MM-dd"),endDate:rt(ml(S),"yyyy-MM-dd")}))},g=y=>{i(S=>({...S,selectedProperties:S.selectedProperties.includes(y)?S.selectedProperties.filter(w=>w!==y):[...S.selectedProperties,y]}))},p=()=>{i(y=>({...y,selectedProperties:y.selectedProperties.length===l.length?[]:l.map(S=>S.id)}))},f=()=>{if(!a.selectedProperties.length){t({title:"Selection Required",description:"Please select at least one property for the statement.",variant:"destructive"});return}u.mutate({exportType:a.exportType,dateRangeType:a.dateRangeType,startDate:a.startDate,endDate:a.endDate,propertyIds:a.selectedProperties,includeNotes:a.includeNotes,includeServiceLogs:a.includeServiceLogs,includeBranding:a.includeBranding})},v=y=>{switch(y){case"completed":return e.jsx(Me,{className:"h-4 w-4 text-green-500"});case"generating":return e.jsx(Ke,{className:"h-4 w-4 text-yellow-500"});case"failed":return e.jsx(Et,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ke,{className:"h-4 w-4 text-gray-500"})}},b=y=>{const S={completed:"default",generating:"secondary",failed:"destructive"};return e.jsx(q,{variant:S[y]||"secondary",children:y.charAt(0).toUpperCase()+y.slice(1)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(dt,{className:"h-6 w-6 text-blue-500"}),"Financial Statements"]}),e.jsx("p",{className:"text-muted-foreground",children:"Export detailed financial reports for your properties"})]}),e.jsxs(Ve,{open:r,onOpenChange:n,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{className:"gap-2",children:[e.jsx(ht,{className:"h-4 w-4"}),"Export Statement"]})}),e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Export Owner Statement"}),e.jsx(Pt,{children:"Generate a comprehensive financial report for your properties"})]}),e.jsxs(ot,{defaultValue:"basic",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-3",children:[e.jsx(re,{value:"basic",children:"Basic Settings"}),e.jsx(re,{value:"properties",children:"Properties"}),e.jsx(re,{value:"options",children:"Options"})]}),e.jsxs(ne,{value:"basic",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"exportType",children:"Export Format"}),e.jsxs(te,{value:a.exportType,onValueChange:y=>i(S=>({...S,exportType:y})),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"PDF Document"]})}),e.jsx(P,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(XL,{className:"h-4 w-4"}),"CSV Spreadsheet"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"dateRangeType",children:"Date Range"}),e.jsxs(te,{value:a.dateRangeType,onValueChange:h,children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsxs(ee,{children:[e.jsx(P,{value:"month",children:"Monthly"}),e.jsx(P,{value:"custom",children:"Custom Range"})]})]})]})]}),a.dateRangeType==="month"&&e.jsxs("div",{children:[e.jsx(K,{children:"Quick Month Selection"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>x(0),children:"This Month"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>x(1),children:"Last Month"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>x(2),children:"2 Months Ago"}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>x(3),children:"3 Months Ago"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"startDate",children:"Start Date"}),e.jsx(H,{id:"startDate",type:"date",value:a.startDate,onChange:y=>i(S=>({...S,startDate:y.target.value}))})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"endDate",children:"End Date"}),e.jsx(H,{id:"endDate",type:"date",value:a.endDate,onChange:y=>i(S=>({...S,endDate:y.target.value}))})]})]})]}),e.jsxs(ne,{value:"properties",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(K,{children:"Select Properties"}),e.jsx(R,{variant:"outline",size:"sm",onClick:p,children:a.selectedProperties.length===l.length?"Deselect All":"Select All"})]}),o?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ts,{className:"h-6 w-6 animate-spin"})}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map(y=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nl,{id:`property-${y.id}`,checked:a.selectedProperties.includes(y.id),onCheckedChange:()=>g(y.id)}),e.jsxs(K,{htmlFor:`property-${y.id}`,className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Us,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:y.address})]})]})]},y.id))})]}),e.jsxs(ne,{value:"options",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nl,{id:"includeNotes",checked:a.includeNotes,onCheckedChange:y=>i(S=>({...S,includeNotes:y}))}),e.jsx(K,{htmlFor:"includeNotes",children:"Include property notes and comments"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nl,{id:"includeServiceLogs",checked:a.includeServiceLogs,onCheckedChange:y=>i(S=>({...S,includeServiceLogs:y}))}),e.jsx(K,{htmlFor:"includeServiceLogs",children:"Include service and maintenance logs"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(nl,{id:"includeBranding",checked:a.includeBranding,onCheckedChange:y=>i(S=>({...S,includeBranding:y}))}),e.jsx(K,{htmlFor:"includeBranding",children:"Include company branding and logo"})]})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Statement Will Include:"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{children:"• All booking earnings by platform"}),e.jsx("li",{children:"• Property expenses and maintenance costs"}),e.jsx("li",{children:"• Management commission breakdown"}),e.jsx("li",{children:"• Add-on service charges"}),e.jsx("li",{children:"• Net balance calculation"}),a.includeNotes&&e.jsx("li",{children:"• Property notes and comments"}),a.includeServiceLogs&&e.jsx("li",{children:"• Service and maintenance logs"})]})]})]})]}),e.jsxs(Nr,{children:[e.jsx(R,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(R,{onClick:f,disabled:u.isPending||!a.selectedProperties.length,className:"gap-2",children:[u.isPending?e.jsx(ts,{className:"h-4 w-4 animate-spin"}):e.jsx(as,{className:"h-4 w-4"}),"Generate Statement"]})]})]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Recent Statements"]}),e.jsx(Te,{children:"Your exported financial statements and their status"})]}),e.jsx(D,{children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ts,{className:"h-6 w-6 animate-spin"})}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No statements yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Export your first financial statement to get started"}),e.jsxs(R,{onClick:()=>n(!0),className:"gap-2",children:[e.jsx(ht,{className:"h-4 w-4"}),"Export Statement"]})]}):e.jsx("div",{className:"space-y-3",children:c.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[v(y.status),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y.fileName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[rt(new Date(y.createdAt),"MMM dd, yyyy at HH:mm")," •"," ",y.status==="completed"&&y.fileSize&&`${Math.round(y.fileSize/1024)} KB`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Net: $",parseFloat(y.netBalance).toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[rt(new Date(y.startDate),"MMM dd")," - ",rt(new Date(y.endDate),"MMM dd, yyyy")]})]}),b(y.status),y.status==="completed"&&e.jsxs(R,{size:"sm",onClick:()=>m.mutate(y.id),disabled:m.isPending,className:"gap-2",children:[m.isPending?e.jsx(ts,{className:"h-4 w-4 animate-spin"}):e.jsx(as,{className:"h-4 w-4"}),"Download"]}),y.status==="failed"&&e.jsx("div",{className:"text-xs text-red-500 max-w-xs",children:y.errorMessage})]})]},y.id))})})]})]})}function _Pe({guestTotalPrice:t,platformPayout:s,otaCommissionAmount:r,currency:n="THB",platform:a="OTA"}){const i=(o,c)=>new Intl.NumberFormat("en-US",{style:"currency",currency:c,minimumFractionDigits:0,maximumFractionDigits:0}).format(o),l=r||t-s;return e.jsx(Yu,{children:e.jsxs(fi,{children:[e.jsx(gi,{asChild:!0,children:e.jsxs("div",{className:"text-center cursor-help",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Guest: ",i(t,n)]}),e.jsxs("div",{className:"font-semibold text-green-600",children:["Payout: ",i(s,n)]}),l>0&&e.jsxs("div",{className:"text-xs text-red-600",children:["-",i(l,n)]})]})}),e.jsx(Da,{children:e.jsxs("p",{children:["⚠️ ",a," commission already deducted from payout"]})})]})})}const IPe=[{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"},{value:"last-month",label:"Last Month"},{value:"custom",label:"Custom Period"}],$Pe={airbnb:"bg-red-100 text-red-800 border-red-200",vrbo:"bg-blue-100 text-blue-800 border-blue-200",bookingCom:"bg-purple-100 text-purple-800 border-purple-200",direct:"bg-green-100 text-green-800 border-green-200",marriott:"bg-yellow-100 text-yellow-800 border-yellow-200"},FPe={maintenance:As,amenity:us,experience:Do,safety:_t,communication:Oo},LPe={checkin:zu,checkout:e4,cleaning:Ld,pool:qu,garden:j8,maintenance:As,note:gn,expense:He,booking:We,repair:Lt};function BPe(){const[t,s]=j.useState("earnings"),[r,n]=j.useState("month"),[a,i]=j.useState("all"),[l,o]=j.useState("all"),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,x]=j.useState(null),[g,p]=j.useState({propertyId:"",amount:"",notes:""}),{toast:f}=Xe(),v=ut(),{user:b,isLoading:y}=Rr(),{data:S,isLoading:w}=ge({queryKey:["/api/owner/earnings",r,a],enabled:!!b&&b.role==="owner"}),{data:C,isLoading:k}=ge({queryKey:["/api/owner/balance"],enabled:!!b&&b.role==="owner"}),{data:A,isLoading:N}=ge({queryKey:["/api/owner/ai-suggestions"],enabled:!!b&&b.role==="owner"}),{data:M,isLoading:F}=ge({queryKey:["/api/owner/timeline",a,l],enabled:!!b&&b.role==="owner"}),{data:I}=ge({queryKey:["/api/properties"],enabled:!!b}),V=Ce({mutationFn:async L=>fe("POST","/api/owner/payout-request",L),onSuccess:()=>{f({title:"Payout request submitted successfully"}),d(!1),v.invalidateQueries({queryKey:["/api/owner/balance"]}),p({propertyId:"",amount:"",notes:""})},onError:L=>{f({title:"Error submitting payout request",description:L.message,variant:"destructive"})}}),E=Ce({mutationFn:async L=>fe("POST",`/api/owner/ai-suggestions/${L}/acknowledge`),onSuccess:()=>{f({title:"Suggestion acknowledged"}),v.invalidateQueries({queryKey:["/api/owner/ai-suggestions"]})}}),G=Ce({mutationFn:async L=>fe("POST",`/api/owner/ai-suggestions/${L}/dismiss`),onSuccess:()=>{f({title:"Suggestion dismissed"}),v.invalidateQueries({queryKey:["/api/owner/ai-suggestions"]})}}),Y=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(L),Q=L=>`${Math.round(L)}%`,T=L=>{const le=new Date,Z=new Date(L),me=Math.floor((le.getTime()-Z.getTime())/(1e3*60));return me<60?`${me}m ago`:me<1440?`${Math.floor(me/60)}h ago`:`${Math.floor(me/1440)}d ago`},B=L=>{switch(L){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};if(y)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(!b||b.role!=="owner")return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Et,{className:"mx-auto h-12 w-12 text-yellow-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Owner Access Required"}),e.jsx("p",{className:"text-gray-600",children:"This dashboard is only available for property owners."})]})})})});const W=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"h-5 w-5 text-blue-500"}),"Earnings Overview"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"Select period"})}),e.jsx(ee,{children:IPe.map(L=>e.jsx(P,{value:L.value,children:L.label},L.value))})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),I?.map(L=>e.jsx(P,{value:L.id.toString(),children:L.name},L.id))]})]})]})]})}),e.jsx(D,{children:w?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-600 text-sm font-medium",children:"Avg Nightly Rate"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:Y(S?.averageNightlyRate||0)})]}),e.jsx(ki,{className:"h-8 w-8 text-blue-500"})]})}),e.jsx("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-600 text-sm font-medium",children:"Total Earnings"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:Y(S?.totalEarnings?.[r]||0)})]}),e.jsx(WL,{className:"h-8 w-8 text-green-500"})]})}),e.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-600 text-sm font-medium",children:"Occupancy Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:Q(S?.occupancyRate?.thisMonth||0)}),S?.occupancyRate?.trend==="up"?e.jsx(Ot,{className:"h-4 w-4 text-green-500"}):S?.occupancyRate?.trend==="down"?e.jsx(_l,{className:"h-4 w-4 text-red-500"}):e.jsx("div",{className:"h-4 w-4"})]})]}),e.jsx(st,{className:"h-8 w-8 text-purple-500"})]})}),e.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-600 text-sm font-medium",children:"Total Properties"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:I?.length||0})]}),e.jsx(Tt,{className:"h-8 w-8 text-yellow-500"})]})})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(_d,{className:"h-5 w-5 text-orange-500"}),"Platform Revenue Split"]})}),e.jsxs(D,{children:[e.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Et,{className:"h-4 w-4 text-amber-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800",children:"OTA Commission Information"}),e.jsx("p",{className:"text-amber-700",children:"Platform revenue shown reflects actual payout received after OTA commissions. Hover over amounts for guest price details."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:S?.platformSplit&&Object.entries(S.platformSplit).map(([L,le])=>e.jsx("div",{className:`p-4 rounded-lg border ${$Pe[L]}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"font-semibold capitalize",children:L==="bookingCom"?"Booking.com":L}),e.jsx("p",{className:"text-2xl font-bold",children:Q(le.percentage)}),L!=="direct"&&le.guestTotalPrice&&le.otaCommissionAmount?e.jsx("div",{className:"space-y-1",children:e.jsx(_Pe,{guestTotalPrice:le.guestTotalPrice,platformPayout:le.revenue,otaCommissionAmount:le.otaCommissionAmount,currency:"THB",platform:L})}):e.jsx("p",{className:"text-sm",children:Y(le.revenue)}),e.jsxs("p",{className:"text-xs",children:[le.bookings," bookings"]}),L!=="direct"&&le.otaCommissionRate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[le.otaCommissionRate,"% OTA fee"]})]})},L))})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(HL,{className:"h-5 w-5 text-indigo-500"}),"Revenue Trend"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:S?.monthlyTrend?.map((L,le)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"font-medium",children:L.month}),e.jsxs(q,{variant:"outline",children:[L.bookings," bookings"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:Y(L.revenue)}),e.jsxs("div",{className:"text-sm text-gray-600",children:[Q(L.occupancy)," occupancy"]})]}),e.jsx(Gn,{value:L.occupancy,className:"w-24"})]})]},le))})})]})]}),he=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(qL,{className:"h-5 w-5 text-green-500"}),"Balance Summary"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 bg-green-50 rounded-lg border border-green-200 text-center",children:[e.jsx("h3",{className:"text-green-600 font-medium mb-2",children:"Total Available Balance"}),e.jsx("p",{className:"text-3xl font-bold text-green-800",children:Y(C?.totalBalance||0)})]}),e.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[e.jsx("h3",{className:"text-blue-600 font-medium mb-2",children:"Pending Payouts"}),e.jsx("p",{className:"text-3xl font-bold text-blue-800",children:C?.pendingPayoutRequests?.length||0})]}),e.jsxs("div",{className:"p-6 bg-purple-50 rounded-lg border border-purple-200 text-center",children:[e.jsx("h3",{className:"text-purple-600 font-medium mb-2",children:"Properties"}),e.jsx("p",{className:"text-3xl font-bold text-purple-800",children:C?.propertyBalances?.length||0})]})]})})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-5 w-5 text-blue-500"}),"Property Balances"]}),e.jsxs(R,{onClick:()=>d(!0),children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Request Payout"]})]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-4",children:C?.propertyBalances?.map(L=>e.jsxs(O,{className:"border border-gray-200",children:[e.jsx(_,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:L.propertyName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Property ID: ",L.propertyId]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Y(L.currentBalance)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Available Balance"})]})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("p",{className:"text-blue-600 text-sm",children:"Total Revenue"}),e.jsx("p",{className:"font-semibold",children:Y(L.totalRevenue)})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[e.jsx("p",{className:"text-red-600 text-sm",children:"Management"}),e.jsx("p",{className:"font-semibold",children:Y(L.expenses.management)})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded",children:[e.jsx("p",{className:"text-yellow-600 text-sm",children:"Utilities"}),e.jsx("p",{className:"font-semibold",children:Y(L.expenses.utilities)})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[e.jsx("p",{className:"text-purple-600 text-sm",children:"Maintenance"}),e.jsx("p",{className:"font-semibold",children:Y(L.expenses.maintenance)})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("p",{className:"text-green-600 text-sm",children:"Add-ons"}),e.jsx("p",{className:"font-semibold",children:Y(L.expenses.addons)})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{x(L),m(!0)},children:[e.jsx($t,{className:"h-4 w-4 mr-1"}),"See Finances"]}),e.jsxs(R,{size:"sm",onClick:()=>{p({...g,propertyId:L.propertyId.toString(),amount:L.currentBalance.toString()}),d(!0)},children:[e.jsx(as,{className:"h-4 w-4 mr-1"}),"Request Payout"]})]})]})]},L.propertyId))})})]}),C?.pendingPayoutRequests?.length>0&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-orange-500"}),"Pending Payout Requests"]})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:C.pendingPayoutRequests.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium",children:["Property ID: ",L.propertyId]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Requested: ",rt(xs(L.requestDate),"MMM d, yyyy")]}),L.notes&&e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:L.notes})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-lg",children:Y(L.amount)}),e.jsx(q,{className:L.status==="pending"?"bg-yellow-100 text-yellow-800":L.status==="approved"?"bg-blue-100 text-blue-800":L.status==="processing"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800",children:L.status})]})]},L.id))})})]})]}),Se=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx($d,{className:"h-5 w-5 text-yellow-500"}),"AI-Powered Review Suggestions"]}),e.jsx(Te,{children:"Automatic analysis of guest reviews to extract improvement suggestions and maintenance needs."})]}),e.jsx(D,{children:N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[A?.map(L=>{const le=FPe[L.category];return e.jsxs(O,{className:"border-l-4 border-l-yellow-500",children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(le,{className:"h-4 w-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:L.suggestion}),e.jsx("p",{className:"text-sm text-gray-600",children:L.propertyName})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:B(L.priority),children:L.priority}),e.jsx(q,{variant:"outline",children:L.category})]})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-gray-700",children:L.reason})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Source Review"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium text-sm",children:L.sourceReview.guestName}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((Z,me)=>e.jsx(us,{className:`h-3 w-3 ${me<L.sourceReview.rating?"text-yellow-400 fill-current":"text-gray-300"}`},me))}),e.jsxs("span",{className:"text-xs text-gray-600",children:[L.sourceReview.platform," • ",rt(xs(L.sourceReview.date),"MMM d")]})]}),e.jsxs("p",{className:"text-sm text-blue-700 italic",children:['"',L.sourceReview.excerpt,'"']})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Estimated Cost:"}),e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:Y(L.estimatedCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expected Impact:"}),e.jsx("br",{}),e.jsxs(q,{variant:"outline",className:L.estimatedImpact==="high"?"bg-green-100 text-green-800":L.estimatedImpact==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:[L.estimatedImpact," impact"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[L.status==="new"&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{size:"sm",onClick:()=>E.mutate(L.id),disabled:E.isPending,children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Acknowledge"]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>G.mutate(L.id),disabled:G.isPending,children:"Dismiss"})]}),L.status==="acknowledged"&&e.jsxs(q,{className:"bg-blue-100 text-blue-800",children:[e.jsx($t,{className:"h-3 w-3 mr-1"}),"Acknowledged"]}),L.status==="implemented"&&e.jsxs(q,{className:"bg-green-100 text-green-800",children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Implemented on ",rt(xs(L.implementationDate),"MMM d")]})]})]})]},L.id)}),A?.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Bn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No AI Suggestions Yet"}),e.jsx("p",{className:"text-gray-600",children:"AI will analyze guest reviews and suggest improvements automatically."})]})]})})]})}),z=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-indigo-500"}),"Property Timeline Activity"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Properties"}),I?.map(L=>e.jsx(P,{value:L.id.toString(),children:L.name},L.id))]})]}),e.jsxs(te,{value:l,onValueChange:o,children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"All Activities"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Activities"}),e.jsx(P,{value:"guest",children:"Guest Activities"}),e.jsx(P,{value:"staff",children:"Staff Activities"}),e.jsx(P,{value:"maintenance",children:"Maintenance"}),e.jsx(P,{value:"expenses",children:"Expenses"})]})]})]})]})}),e.jsx(D,{children:F?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"space-y-4",children:[M?.map((L,le)=>{const Z=LPe[L.category];return e.jsxs("div",{className:"flex gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`p-2 rounded-full ${L.type==="guest"?"bg-blue-100":L.type==="staff"?"bg-green-100":L.type==="maintenance"?"bg-orange-100":"bg-purple-100"}`,children:e.jsx(Z,{className:`h-4 w-4 ${L.type==="guest"?"text-blue-600":L.type==="staff"?"text-green-600":L.type==="maintenance"?"text-orange-600":"text-purple-600"}`})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:L.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:L.description}),L.metadata?.guestName&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(User,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Guest: ",L.metadata.guestName]}),L.metadata.rating&&e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((me,U)=>e.jsx(us,{className:`h-3 w-3 ${U<L.metadata.rating?"text-yellow-400 fill-current":"text-gray-300"}`},U))})]}),L.metadata?.amount&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(He,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:Y(L.metadata.amount)})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:T(L.timestamp)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(_n,{className:"h-6 w-6",children:[e.jsx(Fl,{src:L.user.avatar}),e.jsx(In,{className:"text-xs",children:L.user.name.split(" ").map(me=>me[0]).join("")})]}),e.jsx("span",{className:"text-xs text-gray-600",children:L.user.name})]})]})]}),L.status&&e.jsx(q,{className:`mt-2 ${L.status==="completed"?"bg-green-100 text-green-800":L.status==="in-progress"?"bg-blue-100 text-blue-800":L.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:L.status}),L.attachments&&L.attachments.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:L.attachments.map((me,U)=>e.jsxs(R,{variant:"outline",size:"sm",children:[me.type==="image"?e.jsx(Bu,{className:"h-3 w-3 mr-1"}):e.jsx(dt,{className:"h-3 w-3 mr-1"}),me.name]},U))}),L.metadata?.taskId&&e.jsxs(R,{variant:"link",size:"sm",className:"mt-2 p-0 h-auto",children:[e.jsx(ma,{className:"h-3 w-3 mr-1"}),"View Task Details"]})]})]},L.id)}),M?.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ks,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No Activity Yet"}),e.jsx("p",{className:"text-gray-600",children:"Property activity will appear here as staff complete tasks and guests interact with your properties."})]})]})})]})});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(yb,{role:"owner",className:"mb-4"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Us,{className:"h-8 w-8 text-blue-500"}),"Owner Dashboard"]}),e.jsx("p",{className:"text-muted-foreground",children:"Complete property performance overview with earnings, balance management, AI suggestions, and activity timeline"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(R,{variant:"outline",onClick:()=>v.invalidateQueries(),children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})})]}),e.jsxs(ot,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsxs(re,{value:"earnings",className:"flex items-center gap-2",children:[e.jsx(qs,{className:"h-4 w-4"}),"📊 Earnings Overview"]}),e.jsxs(re,{value:"balance",className:"flex items-center gap-2",children:[e.jsx(Dr,{className:"h-4 w-4"}),"🧾 Balance & Withdrawals"]}),e.jsxs(re,{value:"suggestions",className:"flex items-center gap-2",children:[e.jsx($d,{className:"h-4 w-4"}),"💡 AI Suggestions"]}),e.jsxs(re,{value:"timeline",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"📋 Timeline Feed"]}),e.jsxs(re,{value:"finance",className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),"📄 Financial Reports"]})]}),e.jsx(ne,{value:"earnings",children:e.jsx(W,{})}),e.jsx(ne,{value:"balance",children:e.jsx(he,{})}),e.jsx(ne,{value:"suggestions",children:e.jsx(Se,{})}),e.jsx(ne,{value:"timeline",children:e.jsx(z,{})}),e.jsx(ne,{value:"finance",children:e.jsx(RPe,{})})]}),e.jsx(Ve,{open:c,onOpenChange:d,children:e.jsxs(qe,{className:"max-w-md",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Request Balance Payout"}),e.jsx(Pt,{children:"Submit a payout request for your property balance. Your assigned PM will be notified."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"property",children:"Property"}),e.jsxs(te,{value:g.propertyId,onValueChange:L=>p({...g,propertyId:L}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsx(ee,{children:C?.propertyBalances?.map(L=>e.jsxs(P,{value:L.propertyId.toString(),children:[L.propertyName," - ",Y(L.currentBalance)]},L.propertyId))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"amount",children:"Amount"}),e.jsx(H,{id:"amount",type:"number",step:"0.01",value:g.amount,onChange:L=>p({...g,amount:L.target.value}),placeholder:"Enter amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(nt,{id:"notes",value:g.notes,onChange:L=>p({...g,notes:L.target.value}),placeholder:"Add any notes for the payout request...",rows:3})]})]}),e.jsxs(Nr,{children:[e.jsx(R,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(R,{onClick:()=>V.mutate(g),disabled:V.isPending||!g.propertyId||!g.amount,children:V.isPending?"Submitting...":"Submit Request"})]})]})}),e.jsx(Ve,{open:u,onOpenChange:m,children:e.jsxs(qe,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{children:["Financial Details - ",h?.propertyName]}),e.jsx(Pt,{children:"Detailed breakdown of income, expenses, and transactions for this property."})]}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border",children:[e.jsx("h4",{className:"text-green-600 font-medium",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:Y(h.totalRevenue)})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border",children:[e.jsx("h4",{className:"text-red-600 font-medium",children:"Total Expenses"}),e.jsx("p",{className:"text-2xl font-bold text-red-800",children:Y(Object.values(h.expenses).reduce((L,le)=>L+le,0))})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border",children:[e.jsx("h4",{className:"text-blue-600 font-medium",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:Y(h.currentBalance)})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border",children:[e.jsx("h4",{className:"text-purple-600 font-medium",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-purple-800",children:Y(h.pendingPayouts)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:h.breakdown?.map((L,le)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:L.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:[rt(xs(L.date),"MMM d, yyyy")," • ",L.category]})]}),e.jsxs("div",{className:`font-semibold ${L.amount>0?"text-green-600":"text-red-600"}`,children:[L.amount>0?"+":"",Y(L.amount)]})]},le))})]})]}),e.jsxs(Nr,{children:[e.jsx(R,{variant:"outline",onClick:()=>m(!1),children:"Close"}),e.jsxs(R,{children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]})})]})}const VPe=Qt({guestName:Ne().min(1,"Guest name is required"),guestEmail:Ne().email("Valid email is required"),propertyId:Zt().min(1,"Property selection is required"),messageContent:Ne().min(1,"Message content is required"),messageType:Cs(["chat","request","feedback","complaint"])}),qPe=Qt({guestName:Ne().min(1,"Guest name is required"),propertyId:Zt().min(1,"Property selection is required"),serviceType:Cs(["massage","taxi","chef","cleaning","amenities"]),serviceName:Ne().min(1,"Service name is required"),requestedDate:ji(),requestedTime:Ne().min(1,"Time is required"),numberOfGuests:Zt().min(1).max(20),specialRequests:Ne().optional()});function AA(){const{toast:t}=Xe(),s=ut(),[r,n]=j.useState(1),[a,i]=j.useState(null),[l,o]=j.useState(null),{data:c,isLoading:d}=ge({queryKey:["/api/guest-portal/messages",r]}),{data:u,isLoading:m}=ge({queryKey:["/api/guest-portal/ai-tasks",r]}),{data:h,isLoading:x}=ge({queryKey:["/api/guest-portal/service-requests",r]}),{data:g,isLoading:p}=ge({queryKey:["/api/guest-portal/ai-suggestions"]}),{data:f,isLoading:v}=ge({queryKey:["/api/guest-portal/settings",r]}),{data:b,isLoading:y}=ge({queryKey:["/api/guest-portal/analytics",r]}),S=Ft({resolver:es(VPe),defaultValues:{propertyId:r,messageType:"chat"}}),w=Ft({resolver:es(qPe),defaultValues:{propertyId:r,numberOfGuests:2,requestedDate:new Date}}),C=Ce({mutationFn:T=>fe("POST","/api/guest-portal/messages",T),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/messages"]}),t({title:"Success",description:"Message sent successfully"}),i(null),S.reset()},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),k=Ce({mutationFn:T=>fe("POST","/api/guest-portal/service-requests",T),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/service-requests"]}),t({title:"Success",description:"Service request submitted successfully"}),i(null),w.reset()},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),A=Ce({mutationFn:({id:T,response:B})=>fe("PATCH",`/api/guest-portal/messages/${T}/respond`,{response:B}),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/messages"]}),t({title:"Success",description:"Response sent successfully"})},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),N=Ce({mutationFn:T=>fe("PATCH",`/api/guest-portal/ai-tasks/${T}/approve`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/ai-tasks"]}),t({title:"Success",description:"AI task approved successfully"})},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),M=Ce({mutationFn:T=>fe("PATCH",`/api/guest-portal/ai-tasks/${T}/reject`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/guest-portal/ai-tasks"]}),t({title:"Success",description:"AI task rejected successfully"})},onError:T=>{t({title:"Error",description:T.message,variant:"destructive"})}}),F=T=>{const B={new:"outline",acknowledged:"secondary",resolved:"default",pending:"outline",confirmed:"default",completed:"secondary",cancelled:"destructive"};return e.jsx(q,{variant:B[T]||"outline",children:T})},I=T=>{const B={low:"outline",normal:"secondary",high:"destructive",urgent:"destructive",critical:"destructive"};return e.jsx(q,{variant:B[T]||"outline",children:T})},V=T=>{switch(T){case"positive":return e.jsx(Me,{className:"h-4 w-4 text-green-500"});case"negative":return e.jsx(br,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Et,{className:"h-4 w-4 text-yellow-500"})}},E=T=>{switch(T){case"massage":return e.jsx(Do,{className:"h-5 w-5"});case"taxi":return e.jsx(bi,{className:"h-5 w-5"});case"chef":return e.jsx(Gu,{className:"h-5 w-5"});case"cleaning":return e.jsx(Us,{className:"h-5 w-5"});default:return e.jsx(WT,{className:"h-5 w-5"})}},G=T=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"THB"}).format(typeof T=="string"?parseFloat(T):T),Y=T=>rt(new Date(T),"PPP"),Q=T=>rt(new Date(T),"p");return e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"AI Guest Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Smart communication center with AI-powered task automation and guest services"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(te,{value:r.toString(),onValueChange:T=>n(parseInt(T)),children:[e.jsx(J,{className:"w-48",children:e.jsx(se,{placeholder:"Select property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"1",children:"Villa Sunset"}),e.jsx(P,{value:"2",children:"Ocean Breeze"}),e.jsx(P,{value:"3",children:"Mountain View"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Messages"}),e.jsx(gn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?b[0].totalMessages:0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest communications"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Service Requests"}),e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?b[0].totalServiceRequests:0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bookings & requests"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Response Time"}),e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?`${b[0].averageResponseTime}m`:"0m"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average response"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Satisfaction"}),e.jsx(us,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b&&b[0]?`${b[0].guestSatisfactionScore}/5`:"0/5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guest rating"})]})]})]}),e.jsxs(ot,{defaultValue:"messages",className:"space-y-6",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"messages",children:"💬 Messages"}),e.jsx(re,{value:"ai-tasks",children:"🤖 AI Tasks"}),e.jsx(re,{value:"services",children:"🛎️ Services"}),e.jsx(re,{value:"suggestions",children:"💡 AI Insights"}),e.jsx(re,{value:"settings",children:"⚙️ Settings"})]}),e.jsxs(ne,{value:"messages",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Communication Center"}),e.jsxs(Ve,{open:a==="create-message",onOpenChange:T=>i(T?"create-message":null),children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Simulate Guest Message"]})}),e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Simulate Guest Message"}),e.jsx(Pt,{children:"Create a demo guest message to test AI processing"})]}),e.jsx(Wt,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit(T=>C.mutate(T)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:S.control,name:"guestName",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Name"}),e.jsx(ce,{children:e.jsx(H,{...T,placeholder:"Sarah Johnson"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:S.control,name:"guestEmail",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Email"}),e.jsx(ce,{children:e.jsx(H,{...T,placeholder:"sarah.johnson@example.com"})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:S.control,name:"messageType",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Message Type"}),e.jsxs(te,{onValueChange:T.onChange,value:T.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select message type"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"chat",children:"Chat"}),e.jsx(P,{value:"request",children:"Request"}),e.jsx(P,{value:"feedback",children:"Feedback"}),e.jsx(P,{value:"complaint",children:"Complaint"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:S.control,name:"messageContent",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Message Content"}),e.jsx(ce,{children:e.jsx(nt,{...T,placeholder:"The pool seems dirty and there's no hot water in the bathroom. Could someone please look into this?",rows:4})}),e.jsx(Kt,{children:"AI will process this message for keywords and sentiment"}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:C.isPending,children:C.isPending?"Processing...":"Send Message"})]})]})})]})]})]}),e.jsx("div",{className:"space-y-4",children:d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):c?.map(T=>e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(Oo,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"font-semibold",children:T.guestName}),e.jsx(q,{variant:"outline",children:T.messageType}),I(T.priority),V(T.aiSentiment)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.guestEmail}),e.jsx("p",{className:"mt-2",children:T.messageContent}),T.aiProcessed&&e.jsxs("div",{className:"mt-3 p-3 bg-secondary/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Bn,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Analysis"}),e.jsxs(q,{variant:"secondary",children:[Math.round(parseFloat(T.aiConfidence)*100),"% confidence"]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Keywords:"})," ",T.aiKeywords?.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Suggestions:"})," ",T.aiSuggestions?.join(", ")]})]})]}),T.staffResponse&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Me,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Staff Response"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",T.respondedBy," •"," ",Q(T.respondedAt)]})]}),e.jsx("p",{className:"text-sm",children:T.staffResponse})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:Y(T.createdAt)}),F(T.status),!T.staffResponse&&T.status!=="resolved"&&e.jsxs(R,{size:"sm",className:"mt-2",onClick:()=>{o(T),i("respond-message")},children:[e.jsx(N0,{className:"h-4 w-4 mr-1"}),"Respond"]})]})]})})},T.id))}),e.jsx(Ve,{open:a==="respond-message",onOpenChange:T=>i(T?"respond-message":null),children:e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Respond to Guest"}),e.jsxs(Pt,{children:["Send a response to ",l?.guestName]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-secondary/50 rounded-lg",children:e.jsx("p",{className:"text-sm",children:l?.messageContent})}),e.jsx(nt,{placeholder:"Type your response here...",rows:4,id:"response-text"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(R,{onClick:()=>{const T=document.getElementById("response-text")?.value;T&&l&&(A.mutate({id:l.id,response:T}),i(null))},children:"Send Response"})]})]})]})})]}),e.jsxs(ne,{value:"ai-tasks",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI-Generated Tasks"}),e.jsx("div",{className:"space-y-4",children:m?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):u?.map(T=>e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-secondary/50 rounded-lg",children:e.jsx(Bn,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("h3",{className:"font-semibold",children:["AI Task: ",T.department]}),e.jsx(q,{variant:"outline",children:T.taskType.replace("_"," ")}),I(T.urgency),e.jsxs(q,{variant:"secondary",children:[Math.round(parseFloat(T.confidence)*100),"% confidence"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Guest: ",T.guestId," • Property: ",T.propertyId]}),e.jsx("p",{className:"mb-3",children:T.aiDescription}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Keywords:"})," ",T.aiKeywords?.join(", ")]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Created:"})," ",Y(T.createdAt)]}),T.assignedTo&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Assigned to:"})," ",T.assignedTo]})]})]})]}),e.jsxs("div",{className:"text-right",children:[F(T.status),T.status==="pending"&&e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsxs(R,{size:"sm",onClick:()=>N.mutate(T.id),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(R,{size:"sm",variant:"outline",onClick:()=>M.mutate(T.id),children:[e.jsx(br,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]})})},T.id))})]}),e.jsxs(ne,{value:"services",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Service Requests"}),e.jsxs(Ve,{open:a==="create-service",onOpenChange:T=>i(T?"create-service":null),children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"New Service Request"]})}),e.jsxs(qe,{className:"max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create Service Request"}),e.jsx(Pt,{children:"Book a service for guests"})]}),e.jsx(Wt,{...w,children:e.jsxs("form",{onSubmit:w.handleSubmit(T=>k.mutate(T)),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:w.control,name:"guestName",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guest Name"}),e.jsx(ce,{children:e.jsx(H,{...T,placeholder:"Mike Chen"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"serviceType",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Service Type"}),e.jsxs(te,{onValueChange:T.onChange,value:T.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select service"})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"massage",children:"Massage"}),e.jsx(P,{value:"taxi",children:"Taxi/Transport"}),e.jsx(P,{value:"chef",children:"Private Chef"}),e.jsx(P,{value:"cleaning",children:"Extra Cleaning"}),e.jsx(P,{value:"amenities",children:"Extra Amenities"})]})]}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:w.control,name:"serviceName",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Service Name"}),e.jsx(ce,{children:e.jsx(H,{...T,placeholder:"Traditional Thai Massage"})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(de,{control:w.control,name:"requestedDate",render:({field:T})=>e.jsxs(oe,{className:"flex flex-col",children:[e.jsx(ue,{children:"Date"}),e.jsxs(io,{children:[e.jsx(lo,{asChild:!0,children:e.jsx(ce,{children:e.jsxs(R,{variant:"outline",className:`w-full pl-3 text-left font-normal ${!T.value&&"text-muted-foreground"}`,children:[T.value?rt(T.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(We,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(il,{className:"w-auto p-0",align:"start",children:e.jsx(al,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:B=>B<new Date,initialFocus:!0})})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"requestedTime",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Time"}),e.jsx(ce,{children:e.jsx(H,{...T,placeholder:"19:00"})}),e.jsx(xe,{})]})}),e.jsx(de,{control:w.control,name:"numberOfGuests",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Guests"}),e.jsx(ce,{children:e.jsx(H,{...T,type:"number",min:"1",max:"20"})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:w.control,name:"specialRequests",render:({field:T})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Special Requests"}),e.jsx(ce,{children:e.jsx(nt,{...T,placeholder:"Couples massage preferred"})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:k.isPending,children:k.isPending?"Creating...":"Create Request"})]})]})})]})]})]}),e.jsx("div",{className:"grid gap-6",children:x?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):h?.map(T=>e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:E(T.serviceType)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:T.serviceName}),e.jsx(q,{variant:"outline",children:T.serviceType})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Guest: ",T.guestName," •"," ",T.numberOfGuests," guests"]}),e.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",Y(T.requestedDate)," at"," ",T.requestedTime]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Cost:"})," ",G(T.estimatedCost)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",T.paymentMethod.replace("_"," ")]})]}),T.specialRequests&&e.jsx("p",{className:"text-sm text-muted-foreground",children:T.specialRequests}),T.guestFeedback&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border-l-4 border-green-500",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(us,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Guest Feedback"}),e.jsx("div",{className:"flex",children:Array.from({length:T.guestRating},(B,W)=>e.jsx(us,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"},W))})]}),e.jsx("p",{className:"text-sm",children:T.guestFeedback})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:Y(T.createdAt)}),F(T.status)]})]})})},T.id))})]}),e.jsxs(ne,{value:"suggestions",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"AI Smart Suggestions"}),e.jsx("div",{className:"grid gap-6",children:p?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):g?.map(T=>e.jsx(O,{children:e.jsx(D,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-secondary/50 rounded-lg",children:e.jsx($d,{className:"h-5 w-5 text-yellow-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:T.suggestionTitle}),e.jsx(q,{variant:"outline",children:T.suggestionType.replace("_"," ")}),e.jsxs(q,{variant:"secondary",children:[Math.round(parseFloat(T.confidence)*100),"% confidence"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Target: ",T.targetAudience," • Based on:"," ",T.basedOnData.replace("_"," ")]}),e.jsx("p",{className:"mb-3",children:T.suggestionDescription}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[T.potentialRevenue&&parseFloat(T.potentialRevenue)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Potential Revenue:"})," ",G(T.potentialRevenue)]}),T.implementationCost&&parseFloat(T.implementationCost)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Implementation Cost:"})," ",G(T.implementationCost)]})]}),T.notes&&e.jsx("div",{className:"mt-3 p-3 bg-secondary/30 rounded-lg",children:e.jsx("p",{className:"text-sm",children:T.notes})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:Y(T.createdAt)}),I(T.priority),F(T.status)]})]})})},T.id))})]}),e.jsxs(ne,{value:"settings",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Guest Portal Settings"}),v?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):f&&e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Portal Configuration"}),e.jsx(Te,{children:"Enable or disable guest portal features"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(K,{htmlFor:"enable-portal",children:"Guest Portal"}),e.jsx(yt,{id:"enable-portal",checked:f.enableGuestPortal})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(K,{htmlFor:"enable-ai",children:"AI Assistant"}),e.jsx(yt,{id:"enable-ai",checked:f.enableAiAssistant})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(K,{htmlFor:"enable-services",children:"Service Booking"}),e.jsx(yt,{id:"enable-services",checked:f.enableServiceBooking})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsx(K,{htmlFor:"enable-chat",children:"Chat System"}),e.jsx(yt,{id:"enable-chat",checked:f.enableChatSystem})]})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Guest Information"}),e.jsx(Te,{children:"Information displayed to guests"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Welcome Message"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.welcomeMessage})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(K,{className:"flex items-center space-x-2",children:[e.jsx(Hu,{className:"h-4 w-4"}),e.jsx("span",{children:"WiFi Password"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.wifiPassword})]}),e.jsxs("div",{children:[e.jsxs(K,{className:"flex items-center space-x-2",children:[e.jsx(ra,{className:"h-4 w-4"}),e.jsx("span",{children:"Emergency Contact"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.emergencyContact})]})]})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Local Recommendations"}),e.jsx(Te,{children:"Places and activities recommended to guests"})]}),e.jsx(D,{children:e.jsx("div",{className:"space-y-2",children:f.localRecommendations?.map((T,B)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(is,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:T})]},B))})})]})]})]})]})]})}const UPe=Qt({description:Ne().optional(),marketingDescription:Ne().optional(),electricityRate:ln.number().min(0),waterRate:ln.number().min(0),internetRate:ln.number().min(0),gasRate:ln.number().min(0),securityDeposit:ln.number().min(0),cleaningFee:ln.number().min(0),poolMaintenanceFee:ln.number().min(0),pestControlFee:ln.number().min(0),gpsLatitude:ln.number().optional(),gpsLongitude:ln.number().optional(),accessInstructions:Ne().optional(),maxGuests:ln.number().min(1),allowPets:Vr(),allowSmoking:Vr(),allowParties:Vr(),quietHoursStart:Ne(),quietHoursEnd:Ne(),guestRules:Ne().optional(),massageService:Vr(),chefService:Vr(),housekeepingService:Vr(),laundryService:Vr(),carRentalService:Vr(),airportTransfer:Vr()}),zPe=[{id:"wifi",name:"WiFi",icon:Hu},{id:"pool",name:"Swimming Pool",icon:qu},{id:"aircon",name:"Air Conditioning",icon:Ut},{id:"kitchen",name:"Full Kitchen",icon:Tt},{id:"parking",name:"Free Parking",icon:Tt},{id:"tv",name:"Smart TV",icon:Tt},{id:"washer",name:"Washing Machine",icon:Tt},{id:"balcony",name:"Balcony/Terrace",icon:Tt},{id:"garden",name:"Garden",icon:Tt},{id:"gym",name:"Gym/Fitness",icon:Tt}];function TA(){const[t,s]=j.useState(null),[r,n]=j.useState(!1),[a,i]=j.useState("basic"),{toast:l}=Xe(),o=ut(),{data:c,isLoading:d}=ge({queryKey:["/api/auth/user"],retry:!1}),u=c?.role||c?.primaryRole,m=["admin","portfolio-manager"].includes(u),h=["admin","portfolio-manager","owner"].includes(u),x=u==="owner"&&!1,{data:g,isLoading:p}=ge({queryKey:["/api/properties"],enabled:!!c}),{data:f,isLoading:v}=ge({queryKey:["/api/property-settings",t],enabled:!!t}),b=Ce({mutationFn:async w=>await fe("PUT",`/api/property-settings/${t}`,w),onSuccess:()=>{l({title:"Settings Updated",description:"Property settings have been updated successfully."}),o.invalidateQueries({queryKey:["/api/property-settings"]}),n(!1)},onError:w=>{l({title:"Update Failed",description:w.message,variant:"destructive"})}}),y=Ft({resolver:es(UPe),defaultValues:{description:"",marketingDescription:"",electricityRate:7,waterRate:25,internetRate:800,gasRate:30,securityDeposit:5e3,cleaningFee:2e3,poolMaintenanceFee:1e3,pestControlFee:500,gpsLatitude:0,gpsLongitude:0,accessInstructions:"",maxGuests:4,allowPets:!1,allowSmoking:!1,allowParties:!1,quietHoursStart:"22:00",quietHoursEnd:"08:00",guestRules:"",massageService:!0,chefService:!1,housekeepingService:!0,laundryService:!0,carRentalService:!1,airportTransfer:!0}});X.useEffect(()=>{f&&y.reset(f)},[f,y]);const S=w=>{b.mutate({...w,updatedBy:c?.id})};return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):h?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"⚙️ Property Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure property details, utilities, amenities, and guest rules"})]}),(m||x)&&t&&e.jsx("div",{className:"flex gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsxs(R,{variant:"outline",onClick:()=>n(!1),children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(R,{onClick:y.handleSubmit(S),disabled:b.isPending,children:[e.jsx(Uu,{className:"h-4 w-4 mr-2"}),b.isPending?"Saving...":"Save Changes"]})]}):e.jsxs(R,{onClick:()=>n(!0),children:[e.jsx(Or,{className:"h-4 w-4 mr-2"}),"Edit Settings"]})})]}),u==="owner"&&!x&&e.jsx(O,{className:"border-amber-200 bg-amber-50/50",children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(_t,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"View-Only Mode"})]}),e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"Settings are in view-only mode. Contact your property manager to request edit permissions."})]})}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Select Property"}),e.jsx(Te,{children:"Choose a property to view and edit its settings"})]}),e.jsx(D,{children:e.jsxs(te,{value:t?.toString(),onValueChange:w=>s(Number(w)),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select a property..."})}),e.jsx(ee,{children:g?.map(w=>e.jsxs(P,{value:w.id.toString(),children:[w.name," - ",w.address]},w.id))})]})})]}),t&&e.jsx(Wt,{...y,children:e.jsx("form",{onSubmit:y.handleSubmit(S),children:e.jsxs(ot,{value:a,onValueChange:i,children:[e.jsxs(it,{className:"grid w-full grid-cols-6",children:[e.jsx(re,{value:"basic",children:"Basic Info"}),e.jsx(re,{value:"utilities",children:"Utilities"}),e.jsx(re,{value:"charges",children:"Fees & Charges"}),e.jsx(re,{value:"rules",children:"Guest Rules"}),e.jsx(re,{value:"services",children:"Services"}),e.jsx(re,{value:"goals",children:"Goals & Plan"})]}),e.jsxs(ne,{value:"basic",className:"space-y-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-5 w-5"}),"Property Description"]}),e.jsx(Te,{children:"Internal description and marketing content for the property"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsx(de,{control:y.control,name:"description",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Internal Description"}),e.jsx(ce,{children:e.jsx(nt,{...w,placeholder:"Internal notes and description for staff...",disabled:!r,rows:3})}),e.jsx(Kt,{children:"Internal description for staff and management use"}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"marketingDescription",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Marketing Description"}),e.jsx(ce,{children:e.jsx(nt,{...w,placeholder:"Marketing description for guests and booking platforms...",disabled:!r,rows:4})}),e.jsx(Kt,{children:"Public description used for marketing and booking platforms"}),e.jsx(xe,{})]})})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5"}),"Location & Access"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"gpsLatitude",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"GPS Latitude"}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",step:"any",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"gpsLongitude",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"GPS Longitude"}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",step:"any",disabled:!r})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:y.control,name:"accessInstructions",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Access Instructions"}),e.jsx(ce,{children:e.jsx(nt,{...w,placeholder:"Detailed access instructions for guests...",disabled:!r,rows:3})}),e.jsx(Kt,{children:"Instructions for guests on how to access the property"}),e.jsx(xe,{})]})})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Amenities"}),e.jsx(Te,{children:"Available amenities and features"})]}),e.jsx(D,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:zPe.map(w=>{const C=w.icon;return e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[e.jsx(C,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"flex-1",children:w.name}),e.jsx(yt,{disabled:!r})]},w.id)})})})]})]}),e.jsx(ne,{value:"utilities",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-5 w-5"}),"Utility Rates"]}),e.jsx(Te,{children:"Set utility rates charged to guests (THB)"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"electricityRate",render:({field:w})=>e.jsxs(oe,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Electricity Rate (THB/kWh)"]}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",step:"0.01",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"waterRate",render:({field:w})=>e.jsxs(oe,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(qu,{className:"h-4 w-4"}),"Water Rate (THB/m³)"]}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",step:"0.01",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"internetRate",render:({field:w})=>e.jsxs(oe,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Hu,{className:"h-4 w-4"}),"Internet Rate (THB/month)"]}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"gasRate",render:({field:w})=>e.jsxs(oe,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4"}),"Gas Rate (THB/kg)"]}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",step:"0.01",disabled:!r})}),e.jsx(xe,{})]})})]})})]})}),e.jsx(ne,{value:"charges",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"Fees & Charges"]}),e.jsx(Te,{children:"Standard fees and charges for guests"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"securityDeposit",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Security Deposit (THB)"}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"cleaningFee",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Cleaning Fee (THB)"}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"poolMaintenanceFee",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Pool Maintenance (THB)"}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"pestControlFee",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Pest Control (THB)"}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",disabled:!r})}),e.jsx(xe,{})]})})]})})]})}),e.jsx(ne,{value:"rules",className:"space-y-6",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5"}),"Guest Policies"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsx(de,{control:y.control,name:"maxGuests",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Maximum Guests"}),e.jsx(ce,{children:e.jsx(H,{...w,type:"number",min:"1",disabled:!r})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{control:y.control,name:"allowPets",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Allow Pets"}),e.jsx(Kt,{children:"Whether pets are allowed in the property"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})}),e.jsx(de,{control:y.control,name:"allowSmoking",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Allow Smoking"}),e.jsx(Kt,{children:"Whether smoking is allowed in the property"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})}),e.jsx(de,{control:y.control,name:"allowParties",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Allow Parties"}),e.jsx(Kt,{children:"Whether parties and events are allowed"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"quietHoursStart",render:({field:w})=>e.jsxs(oe,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Quiet Hours Start"]}),e.jsx(ce,{children:e.jsx(H,{...w,type:"time",disabled:!r})}),e.jsx(xe,{})]})}),e.jsx(de,{control:y.control,name:"quietHoursEnd",render:({field:w})=>e.jsxs(oe,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Quiet Hours End"]}),e.jsx(ce,{children:e.jsx(H,{...w,type:"time",disabled:!r})}),e.jsx(xe,{})]})})]}),e.jsx(de,{control:y.control,name:"guestRules",render:({field:w})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Additional Guest Rules"}),e.jsx(ce,{children:e.jsx(nt,{...w,placeholder:"Additional rules and guidelines for guests...",disabled:!r,rows:4})}),e.jsx(Kt,{children:"Any additional rules or guidelines for guests"}),e.jsx(xe,{})]})})]})]})}),e.jsx(ne,{value:"services",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Service Availability"}),e.jsx(Te,{children:"Configure which services are available for guests"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(de,{control:y.control,name:"massageService",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Massage Service"}),e.jsx(Kt,{children:"Professional massage service available"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})}),e.jsx(de,{control:y.control,name:"chefService",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Chef Service"}),e.jsx(Kt,{children:"Private chef service available"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})}),e.jsx(de,{control:y.control,name:"housekeepingService",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Housekeeping"}),e.jsx(Kt,{children:"Daily housekeeping service"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})}),e.jsx(de,{control:y.control,name:"laundryService",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Laundry Service"}),e.jsx(Kt,{children:"Professional laundry service"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})}),e.jsx(de,{control:y.control,name:"carRentalService",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Car Rental"}),e.jsx(Kt,{children:"Car rental service available"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})}),e.jsx(de,{control:y.control,name:"airportTransfer",render:({field:w})=>e.jsxs(oe,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ue,{className:"text-base",children:"Airport Transfer"}),e.jsx(Kt,{children:"Airport pickup and drop-off service"})]}),e.jsx(ce,{children:e.jsx(yt,{checked:w.value,onCheckedChange:w.onChange,disabled:!r})})]})})]})})]})}),e.jsx(ne,{value:"goals",className:"space-y-6",children:e.jsx(GPe,{propertyId:t,canEdit:m||x,editMode:r})})]})})})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(O,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx(Tt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Property Settings are only accessible to Admin, Portfolio Manager, and Owner roles."})]})})})}function GPe({propertyId:t,canEdit:s,editMode:r}){const[n,a]=j.useState("overview"),i=Ft({resolver:es(Qt({revenueTargetType:Ne().optional(),revenueTargetAmount:Ne().optional(),rewardCondition:Ne().optional()})),defaultValues:{revenueTargetType:"monthly",revenueTargetAmount:"150000",rewardCondition:"If revenue exceeds target, purchase new outdoor furniture set"}});return e.jsx(Wt,{...i,children:e.jsxs(ot,{value:n,onValueChange:a,children:[e.jsxs(it,{className:"grid w-full grid-cols-4",children:[e.jsx(re,{value:"overview",children:"📊 Overview"}),e.jsx(re,{value:"goals",children:"🎯 Revenue Goals"}),e.jsx(re,{value:"upgrades",children:"🏗️ Planned Upgrades"}),e.jsx(re,{value:"notes",children:"📝 Notes & Comments"})]}),e.jsx(ne,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-5 w-5 text-green-600"}),"Active Goals"]}),e.jsx(Te,{children:"Current revenue targets and progress"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Monthly Target:"}),e.jsx("span",{className:"font-semibold",children:"150,000 THB"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Current Progress:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:"125,000 THB (83%)"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"83%"}})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target reward: New outdoor sofa set"})]})})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5 text-blue-600"}),"Planned Upgrades"]}),e.jsx(Te,{children:"Upcoming property improvements"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Pool Renovation"}),e.jsx(q,{variant:"outline",children:"High Priority"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Kitchen Upgrade"}),e.jsx(q,{variant:"secondary",children:"Medium"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Garden Landscaping"}),e.jsx(q,{variant:"secondary",children:"Low"})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Budget: 350,000 THB"})})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-orange-600"}),"Recent Activity"]}),e.jsx(Te,{children:"Latest updates and milestones"})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Goal Updated"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"2 days ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"New Upgrade Added"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"1 week ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Note Added"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"2 weeks ago"})]})]})})]})]})}),e.jsx(ne,{value:"goals",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-5 w-5"}),"Revenue Goals & Rewards"]}),e.jsx(Te,{children:"Set revenue targets and reward conditions for achieving goals"})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{control:i.control,name:"revenueTargetType",render:({field:l})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Target Period"}),e.jsx(ce,{children:e.jsxs(te,{value:l.value||"monthly",onValueChange:l.onChange,disabled:!r,children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select period"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"monthly",children:"Monthly"}),e.jsx(P,{value:"quarterly",children:"Quarterly"}),e.jsx(P,{value:"yearly",children:"Yearly"})]})]})}),e.jsx(xe,{})]})}),e.jsx(de,{control:i.control,name:"revenueTargetAmount",render:({field:l})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Target Amount (THB)"}),e.jsx(ce,{children:e.jsx(H,{...l,placeholder:"150,000",disabled:!r,type:"number"})}),e.jsx(Kt,{children:"Enter the revenue target for the selected period"}),e.jsx(xe,{})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{control:i.control,name:"rewardCondition",render:({field:l})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Reward Condition"}),e.jsx(ce,{children:e.jsx(nt,{...l,placeholder:"If revenue exceeds target, purchase new outdoor furniture set",disabled:!r,rows:3})}),e.jsx(Kt,{children:"Describe what reward/upgrade will be triggered when goal is achieved"}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 font-medium",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Current Progress"]}),e.jsx("div",{className:"mt-2 text-sm text-green-600",children:"125,000 THB of 150,000 THB target (83% complete)"}),e.jsx("div",{className:"mt-2 w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"83%"}})})]})]})]})})]})}),e.jsxs(ne,{value:"upgrades",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Property Upgrades & Improvements"}),e.jsx("p",{className:"text-muted-foreground",children:"Plan and track property enhancement projects"})]}),s&&r&&e.jsxs(R,{children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Upgrade"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx($,{className:"text-lg",children:"Pool Renovation Project"}),e.jsx(Te,{children:"Complete pool resurfacing and equipment upgrade"})]}),e.jsx(q,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"High Priority"})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Budget"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"200,000 THB"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Target Date"}),e.jsx("div",{className:"text-sm",children:"Q2 2025"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(q,{variant:"secondary",children:"Pending Approval"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Condition Trigger"}),e.jsx("div",{className:"text-sm text-muted-foreground bg-amber-50 p-3 rounded border",children:"⚠️ Only proceed if monthly revenue exceeds 180,000 THB for 3 consecutive months"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx($,{className:"text-lg",children:"Kitchen Appliance Upgrade"}),e.jsx(Te,{children:"Replace refrigerator and install new dishwasher"})]}),e.jsx(q,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Medium Priority"})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Budget"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"80,000 THB"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Target Date"}),e.jsx("div",{className:"text-sm",children:"Q3 2025"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Status"}),e.jsx(q,{variant:"secondary",children:"Planning"})]})]})})]})]})]}),e.jsxs(ne,{value:"notes",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notes & Communications"}),e.jsx("p",{className:"text-muted-foreground",children:"Internal notes and stakeholder comments"})]}),s&&r&&e.jsxs(R,{children:[e.jsx(gn,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_n,{className:"h-8 w-8",children:e.jsx(In,{children:"PM"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Portfolio Manager"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"2 days ago"})]})]}),e.jsx(q,{variant:"outline",children:"General"})]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm",children:"Revenue target for this month is looking achievable. Guest feedback has been consistently positive about the property condition. The pool renovation should be our next priority once we hit the target threshold."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx($t,{className:"h-3 w-3"}),e.jsx("span",{children:"Visible to: Owner, Staff"})]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_n,{className:"h-8 w-8",children:e.jsx(In,{children:"OW"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Property Owner"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"1 week ago"})]})]}),e.jsx(q,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Milestone"})]})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm",children:"Approved the budget for kitchen upgrades. Let's prioritize the dishwasher installation as guests have mentioned this in several reviews. The refrigerator can wait until next quarter."}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx($t,{className:"h-3 w-3"}),e.jsx("span",{children:"Visible to: Owner, Staff"})]})]})]})]})]})]})})}const HPe=["Chaweng","Lamai","Nathon","Bophut","Maenam","Choeng Mon","Taling Ngam","Lipa Noi"],KPe=[{label:"1 Bedroom",value:1},{label:"2 Bedrooms",value:2},{label:"3 Bedrooms",value:3},{label:"4 Bedrooms",value:4},{label:"5 Bedrooms",value:5},{label:"6 Bedrooms",value:6},{label:"7+ Bedrooms",value:7}],DA=[{id:1,name:"Villa Samui Breeze"},{id:2,name:"Villa Tropical Paradise"},{id:3,name:"Villa Balinese Charm"},{id:4,name:"Villa Ocean View"},{id:5,name:"Villa Sunset Dreams"}],OA=[{id:"owner1",name:"John Smith"},{id:"owner2",name:"Sarah Johnson"},{id:"owner3",name:"Michael Brown"},{id:"owner4",name:"Emma Davis"}],EA=[{id:"pm1",name:"Alex Thompson"},{id:"pm2",name:"Jessica Wilson"},{id:"pm3",name:"David Miller"}];function WPe({onFiltersChange:t,className:s}){const[r,n]=j.useState({}),[a,i]=j.useState(!1),l=u=>{const m={...r,...u};n(m),t(m)},o=()=>{n({}),t({})},c=u=>{const m={...r};delete m[u],n(m),t(m)},d=Object.keys(r).filter(u=>r[u]!==void 0&&r[u]!=="").length;return e.jsx(O,{className:`border-l-4 border-l-blue-500 ${s}`,children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Global Filters"}),d>0&&e.jsxs(q,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[d," active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d>0&&e.jsx(R,{variant:"ghost",size:"sm",onClick:o,className:"text-gray-500 hover:text-gray-700",children:"Clear All"}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>i(!a),className:"text-blue-600 hover:text-blue-700",children:a?"Collapse":"Expand"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(H,{placeholder:"Search properties, guests, tasks...",value:r.searchText||"",onChange:u=>l({searchText:u.target.value}),className:"pl-10"})]})}),d>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[r.propertyId&&e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Tt,{className:"h-3 w-3"}),"Property: ",DA.find(u=>u.id===r.propertyId)?.name,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("propertyId")})]}),r.ownerId&&e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(It,{className:"h-3 w-3"}),"Owner: ",OA.find(u=>u.id===r.ownerId)?.name,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("ownerId")})]}),r.portfolioManagerId&&e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(st,{className:"h-3 w-3"}),"PM: ",EA.find(u=>u.id===r.portfolioManagerId)?.name,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("portfolioManagerId")})]}),r.area&&e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(is,{className:"h-3 w-3"}),"Area: ",r.area,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("area")})]}),r.bedroomCount&&e.jsxs(q,{variant:"outline",className:"flex items-center gap-1",children:["Bedrooms: ",r.bedroomCount===7?"7+":r.bedroomCount,e.jsx(Is,{className:"h-3 w-3 cursor-pointer",onClick:()=>c("bedroomCount")})]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsxs(te,{value:r.propertyId?.toString()||"",onValueChange:u=>l({propertyId:u?parseInt(u):void 0}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Properties"}),DA.map(u=>e.jsx(P,{value:u.id.toString(),children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Owner"}),e.jsxs(te,{value:r.ownerId||"",onValueChange:u=>l({ownerId:u||void 0}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Owners"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Owners"}),OA.map(u=>e.jsx(P,{value:u.id,children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Portfolio Manager"}),e.jsxs(te,{value:r.portfolioManagerId||"",onValueChange:u=>l({portfolioManagerId:u||void 0}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All PMs"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Portfolio Managers"}),EA.map(u=>e.jsx(P,{value:u.id,children:u.name},u.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Area"}),e.jsxs(te,{value:r.area||"",onValueChange:u=>l({area:u||void 0}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"All Areas"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Areas"}),HPe.map(u=>e.jsx(P,{value:u,children:u},u))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),e.jsxs(te,{value:r.bedroomCount?.toString()||"",onValueChange:u=>l({bedroomCount:u?parseInt(u):void 0}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Any"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"Any"}),KPe.map(u=>e.jsx(P,{value:u.value.toString(),children:u.label},u.value))]})]})]})]})]})})}function YPe(){const{user:t}=vn(),[s,r]=j.useState({}),[n,a]=j.useState(!1),[i,l]=j.useState(!1),[o,c]=j.useState(!1),{data:d=[]}=ge({queryKey:["/api/properties"]}),{data:u=[]}=ge({queryKey:["/api/tasks"]}),{data:m=[]}=ge({queryKey:["/api/bookings"]}),{data:h=[]}=ge({queryKey:["/api/finance"]}),[x,g]=j.useState({properties:[],tasks:[],bookings:[],finances:[],utilities:[],maintenance:[]}),p={properties:Array.isArray(d)?d:[],tasks:Array.isArray(u)?u:[],bookings:Array.isArray(m)?m:[],finances:Array.isArray(h)?h:[],utilities:[],maintenance:[]};j.useEffect(()=>{const y=(S,w)=>S.filter(C=>{if(s.propertyId&&C.propertyId!==s.propertyId)return!1;if(s.searchText){const k=s.searchText.toLowerCase();if(!Object.values(C).join(" ").toLowerCase().includes(k))return!1}return!0});g({properties:y(p.properties),tasks:y(p.tasks),bookings:y(p.bookings),finances:y(p.finances),utilities:y(p.utilities),maintenance:y(p.maintenance)})},[s,d,u,m,h]);const f=y=>{switch(y){case"active":case"confirmed":case"paid":case"completed":return"default";case"pending":case"scheduled":return"secondary";case"overdue":case"high":return"destructive";case"maintenance":case"in_progress":case"medium":return"outline";default:return"secondary"}},v=y=>{switch(y){case"high":return e.jsx(Nt,{className:"h-4 w-4 text-red-500"});case"medium":return e.jsx(Ke,{className:"h-4 w-4 text-yellow-500"});case"low":return e.jsx(Me,{className:"h-4 w-4 text-green-500"});default:return null}},b=y=>{const S=y.dueDate||y.due_date||y.due||y.deadline;if(!S)return"No date";try{const w=S instanceof Date?S:new Date(S);return isNaN(w.getTime())?"No date":w.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch{return"No date"}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(yb,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive property management overview with global filtering"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{variant:"outline",className:"text-sm",children:t?.role==="admin"?"System Administrator":"Portfolio Manager"}),e.jsx(R,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>{try{window.location.href="/settings"}catch(y){console.error("Settings navigation error:",y),window.location.href="/simple-settings"}},title:"Settings",children:e.jsx(Lt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(WPe,{onFiltersChange:r,className:"flex-1"}),e.jsx(o$,{variant:"outline",size:"sm",showStats:!0,showLastUpdate:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Properties"}),e.jsx("p",{className:"text-2xl font-bold",children:x.properties.length})]}),e.jsx(Tt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Tasks"}),e.jsx("p",{className:"text-2xl font-bold",children:x.tasks.filter(y=>y.status!=="completed").length})]}),e.jsx(vd,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Bookings"}),e.jsx("p",{className:"text-2xl font-bold",children:x.bookings.length})]}),e.jsx(We,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenue (THB)"}),e.jsx("p",{className:"text-2xl font-bold",children:x.finances.filter(y=>y.type==="revenue").reduce((y,S)=>y+S.amount,0).toLocaleString()})]}),e.jsx(He,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(ot,{defaultValue:"properties",className:"w-full",children:[e.jsxs(it,{className:"grid w-full grid-cols-6",children:[e.jsx(re,{value:"properties",children:"Properties"}),e.jsx(re,{value:"tasks",children:"Tasks"}),e.jsx(re,{value:"bookings",children:"Bookings"}),e.jsx(re,{value:"finances",children:"Finances"}),e.jsx(re,{value:"utilities",children:"Utilities"}),e.jsx(re,{value:"maintenance",children:"Maintenance"})]}),e.jsx(ne,{value:"properties",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-5 w-5"}),"Properties (",x.properties.length,")"]}),e.jsxs(R,{onClick:()=>c(!0),size:"sm",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),"Add Property"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.properties.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:y.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:y.address}),e.jsxs("span",{children:[y.bedrooms," bedrooms"]}),e.jsxs("span",{children:[y.maxGuests," max guests"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-semibold text-green-600",children:y.pricePerNight?`₹${y.pricePerNight}/night`:"No rate set"})}),e.jsx(q,{variant:f(y.status),children:y.status})]})]},y.id)),x.properties.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No properties match your current filters"})]})})]})}),e.jsx(ne,{value:"tasks",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(vd,{className:"h-5 w-5"}),"Tasks (",x.tasks.length,")"]}),e.jsxs(R,{onClick:()=>a(!0),size:"sm",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),"Create Task"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.tasks.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[v(y.priority),e.jsx("h3",{className:"font-semibold",children:y.title})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:y.description}),e.jsxs("span",{children:["Assigned: ",y.assignedTo]}),e.jsxs("span",{children:["Due: ",b(y)]})]})]}),e.jsx(q,{variant:f(y.status),children:y.status})]},y.id)),x.tasks.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No tasks match your current filters"})]})})]})}),e.jsx(ne,{value:"bookings",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Bookings (",x.bookings.length,")"]}),e.jsxs(R,{onClick:()=>l(!0),size:"sm",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),"Create Booking"]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.bookings.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:y.guestName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:y.property}),e.jsxs("span",{children:[y.checkIn," - ",y.checkOut]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-green-600",children:["₹",y.amount.toLocaleString()]})}),e.jsx(q,{variant:f(y.status),children:y.status})]})]},y.id)),x.bookings.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No bookings match your current filters"})]})})]})}),e.jsx(ne,{value:"finances",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"Financial Transactions (",x.finances.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.finances.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:y.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:y.property}),e.jsx("span",{children:y.date})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-semibold ${y.type==="revenue"?"text-green-600":y.type==="expense"?"text-red-600":"text-blue-600"}`,children:[y.type==="expense"?"-":"+","₹",y.amount.toLocaleString()]})}),e.jsx(q,{variant:y.type==="revenue"?"default":y.type==="expense"?"destructive":"secondary",children:y.type})]})]},y.id)),x.finances.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No financial transactions match your current filters"})]})})]})}),e.jsx(ne,{value:"utilities",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Utility Bills (",x.utilities.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.utilities.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold capitalize",children:y.type}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:y.property}),e.jsxs("span",{children:["Due: ",y.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold",children:["₹",y.amount.toLocaleString()]})}),e.jsx(q,{variant:f(y.status),children:y.status})]})]},y.id)),x.utilities.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No utility bills match your current filters"})]})})]})}),e.jsx(ne,{value:"maintenance",className:"space-y-4",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5"}),"Maintenance Issues (",x.maintenance.length,")"]})}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-4",children:[x.maintenance.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[v(y.priority),e.jsx("h3",{className:"font-semibold",children:y.issue})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[e.jsx("span",{children:y.property}),e.jsxs("span",{children:["Cost: ₹",y.cost.toLocaleString()]})]})]}),e.jsx(q,{variant:f(y.status),children:y.status})]},y.id)),x.maintenance.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No maintenance issues match your current filters"})]})})]})})]}),e.jsx(Tp,{isOpen:n,onOpenChange:a}),e.jsx(Ep,{open:i,onOpenChange:l}),e.jsx(Rp,{open:o,onOpenChange:c})]})}const eh=[{value:"contracts",label:"📄 Signed Contracts",icon:"📄"},{value:"licenses",label:"🏛️ Government Licenses",icon:"🏛️"},{value:"manuals",label:"📖 House Manuals",icon:"📖"},{value:"floorplans",label:"🏗️ Floor Plans",icon:"🏗️"},{value:"inventory",label:"📋 Inventory Lists",icon:"📋"},{value:"logs",label:"📊 Service Logs",icon:"📊"},{value:"identification",label:"🆔 Owner ID/Passport",icon:"🆔"},{value:"utility_accounts",label:"⚡ Utility Screenshots",icon:"⚡"},{value:"insurance",label:"🛡️ Insurance Documents",icon:"🛡️"},{value:"certificates",label:"🎖️ Safety Certificates",icon:"🎖️"}],MA=[{value:"admin_pm_only",label:"Admin/PM Only",icon:_t},{value:"owner_visible",label:"Owner Visible",icon:st},{value:"staff_visible",label:"Staff Visible",icon:Tt},{value:"all_visible",label:"All Visible",icon:$t}];function QPe(){const[t,s]=j.useState("overview"),[r,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(""),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,x]=j.useState({title:"",category:"",visibility:"admin_pm_only",description:"",hasExpiration:!1,expirationDate:"",propertyId:"",tags:""}),{toast:g}=Xe(),p=ut(),{data:f=[]}=ge({queryKey:["/api/properties"]}),{data:v=[],isLoading:b}=ge({queryKey:["/api/documents",r,a,l],queryFn:()=>{const I=new URLSearchParams;return r&&I.append("propertyId",r),a&&I.append("category",a),l&&I.append("search",l),fe("GET",`/api/documents?${I.toString()}`)}}),{data:y}=ge({queryKey:["/api/documents/summary",r],queryFn:()=>{const I=new URLSearchParams;return r&&I.append("propertyId",r),fe("GET",`/api/documents/summary?${I.toString()}`)}}),{data:S=[]}=ge({queryKey:["/api/documents/expiring"],queryFn:()=>fe("GET","/api/documents/expiring")}),w=Ce({mutationFn:async I=>fe("POST","/api/documents",I),onSuccess:()=>{g({title:"Document uploaded successfully",description:"The document has been added to the system."}),d(!1),x({title:"",category:"",visibility:"admin_pm_only",description:"",hasExpiration:!1,expirationDate:"",propertyId:"",tags:""}),p.invalidateQueries({queryKey:["/api/documents"]}),p.invalidateQueries({queryKey:["/api/documents/summary"]})},onError:I=>{g({title:"Upload failed",description:I.message||"Failed to upload document",variant:"destructive"})}}),C=()=>{if(!h.title||!h.category){g({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const I={...h,filename:`${h.title.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.pdf`,originalFilename:`${h.title}.pdf`,propertyId:h.propertyId?parseInt(h.propertyId):null,tags:h.tags?h.tags.split(",").map(V=>V.trim()):[],expirationDate:h.hasExpiration?h.expirationDate:null};w.mutate(I)},k=I=>{switch(I){case"active":return e.jsx(q,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"});case"pending_approval":return e.jsx(q,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"expired":return e.jsx(q,{variant:"destructive",children:"Expired"});default:return e.jsx(q,{variant:"outline",children:I})}},A=I=>{const E=MA.find(G=>G.value===I)?.icon||$t;return e.jsx(E,{className:"h-4 w-4"})},N=I=>eh.find(E=>E.value===I)?.icon||"📄",M=I=>{if(I===0)return"0 Bytes";const V=1024,E=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(I)/Math.log(V));return parseFloat((I/Math.pow(V,G)).toFixed(2))+" "+E[G]},F=I=>{if(!I.hasExpiration||!I.expirationDate)return!1;const V=new Date(I.expirationDate),E=new Date(Date.now()+30*24*60*60*1e3);return V<=E};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"📂 Document Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure document vault and owner onboarding file management"})]}),e.jsxs(Ve,{open:c,onOpenChange:d,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Upload Document"]})}),e.jsxs(qe,{className:"sm:max-w-[500px]",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Upload New Document"}),e.jsx(Pt,{children:"Add a new document to the property management system"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"title",children:"Document Title*"}),e.jsx(H,{id:"title",value:h.title,onChange:I=>x({...h,title:I.target.value}),placeholder:"Enter document title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"property",children:"Property"}),e.jsxs(te,{value:h.propertyId,onValueChange:I=>x({...h,propertyId:I}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select property"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Properties"}),f.map(I=>e.jsx(P,{value:I.id.toString(),children:I.name},I.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"category",children:"Category*"}),e.jsxs(te,{value:h.category,onValueChange:I=>x({...h,category:I}),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select category"})}),e.jsx(ee,{children:eh.map(I=>e.jsx(P,{value:I.value,children:I.label},I.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"visibility",children:"Visibility"}),e.jsxs(te,{value:h.visibility,onValueChange:I=>x({...h,visibility:I}),children:[e.jsx(J,{children:e.jsx(se,{})}),e.jsx(ee,{children:MA.map(I=>e.jsx(P,{value:I.value,children:I.label},I.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"description",children:"Description"}),e.jsx(nt,{id:"description",value:h.description,onChange:I=>x({...h,description:I.target.value}),placeholder:"Brief description of the document",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(H,{id:"tags",value:h.tags,onChange:I=>x({...h,tags:I.target.value}),placeholder:"important, signed, current"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"hasExpiration",checked:h.hasExpiration,onChange:I=>x({...h,hasExpiration:I.target.checked})}),e.jsx(K,{htmlFor:"hasExpiration",children:"Document has expiration date"})]}),h.hasExpiration&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"expirationDate",children:"Expiration Date"}),e.jsx(H,{id:"expirationDate",type:"date",value:h.expirationDate,onChange:I=>x({...h,expirationDate:I.target.value})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(R,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(R,{onClick:C,disabled:w.isPending,children:w.isPending?"Uploading...":"Upload Document"})]})]})]})]})]}),e.jsxs(ot,{value:t,onValueChange:s,className:"space-y-4",children:[e.jsxs(it,{className:"grid w-full grid-cols-5",children:[e.jsx(re,{value:"overview",children:"📊 Overview"}),e.jsx(re,{value:"documents",children:"📁 All Documents"}),e.jsx(re,{value:"expiring",children:"⚠️ Expiring Soon"}),e.jsx(re,{value:"onboarding",children:"✅ Owner Onboarding"}),e.jsx(re,{value:"access-logs",children:"📋 Access Logs"})]}),e.jsxs(ne,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Total Documents"}),e.jsx(dt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y?.totalDocuments||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",y?.recentUploads||0," this week"]})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Expiring Soon"}),e.jsx(Nt,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:y?.expiringCount||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Pending Approval"}),e.jsx(Ke,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y?.pendingApproval||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires review"})]})]}),e.jsxs(O,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium",children:"Categories"}),e.jsx(Ij,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y?.documentsByCategory?.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Document types"})]})]})]}),y?.documentsByCategory&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Documents by Category"})}),e.jsx(D,{children:e.jsx("div",{className:"space-y-3",children:y.documentsByCategory.map(I=>{const V=eh.find(G=>G.value===I.category),E=y.totalDocuments>0?I.count/y.totalDocuments*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:N(I.category)}),V?.label||I.category]}),e.jsx("span",{className:"font-medium",children:I.count})]}),e.jsx(Gn,{value:E,className:"h-2"})]},I.category)})})})]})]}),e.jsxs(ne,{value:"documents",className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(H,{placeholder:"Search documents...",value:l,onChange:I=>o(I.target.value),className:"pl-8"})]})}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{className:"w-[200px]",children:e.jsx(se,{placeholder:"All Properties"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Properties"}),f.map(I=>e.jsx(P,{value:I.id.toString(),children:I.name},I.id))]})]}),e.jsxs(te,{value:a,onValueChange:i,children:[e.jsx(J,{className:"w-[200px]",children:e.jsx(se,{placeholder:"All Categories"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"",children:"All Categories"}),eh.map(I=>e.jsx(P,{value:I.value,children:I.label},I.value))]})]})]}),b?e.jsx("div",{className:"text-center py-8",children:"Loading documents..."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(I=>e.jsxs(O,{className:"hover:shadow-md transition-shadow",children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:N(I.category)}),e.jsxs("div",{children:[e.jsx($,{className:"text-sm font-medium line-clamp-1",children:I.title}),e.jsx(Te,{className:"text-xs",children:M(I.fileSize)})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[A(I.visibility),F(I)&&e.jsx(Nt,{className:"h-4 w-4 text-orange-500"})]})]})}),e.jsx(D,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[k(I.status),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(I.createdAt).toLocaleDateString()})]}),I.description&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:I.description}),I.tags&&I.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.tags.slice(0,3).map((V,E)=>e.jsx(q,{variant:"outline",className:"text-xs",children:V},E)),I.tags.length>3&&e.jsxs(q,{variant:"outline",className:"text-xs",children:["+",I.tags.length-3]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(R,{size:"sm",variant:"outline",children:e.jsx($t,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"outline",children:e.jsx(as,{className:"h-3 w-3"})}),e.jsx(R,{size:"sm",variant:"outline",children:e.jsx(Or,{className:"h-3 w-3"})})]}),I.hasExpiration&&I.expirationDate&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Expires: ",new Date(I.expirationDate).toLocaleDateString()]})]})]})})]},I.id))})]}),e.jsx(ne,{value:"expiring",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-5 w-5 text-orange-500"}),"Documents Expiring Soon"]}),e.jsx(Te,{children:"Documents that will expire within the next 30 days"})]}),e.jsx(D,{children:S.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No documents expiring soon"})]}):e.jsx("div",{className:"space-y-3",children:S.map(I=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:N(I.category)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:I.title}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Expires: ",I.expirationDate?new Date(I.expirationDate).toLocaleDateString():"N/A"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k(I.status),e.jsx(R,{size:"sm",variant:"outline",children:e.jsx($t,{className:"h-3 w-3"})})]})]},I.id))})})]})}),e.jsx(ne,{value:"onboarding",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"✅ Owner Onboarding Checklist"}),e.jsx(Te,{children:"Track document collection and setup progress for new owners"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(st,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Owner onboarding checklist interface coming soon"}),e.jsx("p",{className:"text-sm",children:"Will include step-by-step document collection workflow"})]})})]})}),e.jsx(ne,{value:"access-logs",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"📋 Document Access Logs"}),e.jsx(Te,{children:"Audit trail of all document access and modifications"})]}),e.jsx(D,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(_t,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Access logs interface coming soon"}),e.jsx("p",{className:"text-sm",children:"Will display detailed audit trail for compliance"})]})})]})})]})]})}const XPe=Qt({fileName:Ne().min(1,"File name is required"),category:Ne().min(1,"Category is required"),fileType:Ne(),tags:Ne().optional(),description:Ne().optional(),propertyId:ln.number()}),so=[{id:"legal",name:"Legal Documents",icon:dt,color:"bg-blue-100 text-blue-700"},{id:"contracts",name:"Contracts",icon:dt,color:"bg-green-100 text-green-700"},{id:"licenses",name:"Licenses & Permits",icon:dt,color:"bg-purple-100 text-purple-700"},{id:"utility_bills",name:"Utility Bills",icon:dt,color:"bg-orange-100 text-orange-700"},{id:"insurance",name:"Insurance Documents",icon:dt,color:"bg-red-100 text-red-700"},{id:"financial",name:"Financial Records",icon:dt,color:"bg-yellow-100 text-yellow-700"},{id:"maintenance",name:"Maintenance Records",icon:dt,color:"bg-gray-100 text-gray-700"},{id:"photos",name:"Property Photos",icon:b0,color:"bg-pink-100 text-pink-700"}],ZPe=t=>{if(!t)return"document";const s=t.split("/");return s[s.length-1].replace(/^\d+_/,"")||"document"},ro=t=>t.fileName?t.fileName:t.fileUrl?ZPe(t.fileUrl):"document";function RA(){const[t,s]=j.useState(null),[r,n]=j.useState("all"),[a,i]=j.useState(""),[l,o]=j.useState(!1),[c,d]=j.useState(null),[u,m]=j.useState(!1),[h,x]=j.useState(null),[g,p]=j.useState(""),[f,v]=j.useState(""),[b,y]=j.useState("all"),[S,w]=j.useState(10),[C,k]=j.useState(null),{toast:A}=Xe(),N=ut(),M=async ae=>{if(!ae.id){A({title:"Download Failed",description:"Document ID is missing.",variant:"destructive"});return}try{const pe=await fetch(`/api/property-documents/${ae.id}/download`);if(!pe.ok)throw new Error("Failed to download file");const Je=await pe.blob(),et=window.URL.createObjectURL(Je),Pe=window.document.createElement("a");Pe.href=et,Pe.download=ro(ae),window.document.body.appendChild(Pe),Pe.click(),window.document.body.removeChild(Pe),window.URL.revokeObjectURL(et),A({title:"Download Started",description:"Your file is being downloaded."})}catch{A({title:"Download Failed",description:"Failed to download the file. Please try again.",variant:"destructive"})}},F=Ce({mutationFn:async ae=>await fe("DELETE",`/api/property-documents/${ae}`),onSuccess:()=>{mn.delete("/api/property-documents/expiring?days=30"),A({title:"Document Deleted",description:"Document has been deleted successfully."}),N.invalidateQueries({predicate:ae=>ae.queryKey[0]&&typeof ae.queryKey[0]=="string"&&ae.queryKey[0].startsWith("/api/property-documents/property/")}),N.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),k(null)},onError:ae=>{A({title:"Delete Failed",description:ae.message,variant:"destructive"})}}),I=(ae,pe)=>ae?ae.startsWith("image/")?"IMAGE":ae==="application/pdf"?"PDF":ae.includes("spreadsheet")||ae.includes("excel")?"EXCEL":ae.split("/")[1]?.toUpperCase()||"FILE":pe?.split(".").pop()?.toUpperCase()||"FILE",{data:V,isLoading:E}=ge({queryKey:["/api/auth/user"],retry:!1}),G=V?.role,Y=["admin","portfolio-manager"].includes(G),Q=["admin","portfolio-manager","owner"].includes(G),{data:T,isLoading:B}=ge({queryKey:["/api/properties"],enabled:!!V}),{data:W,isLoading:he}=ge({queryKey:[`/api/property-documents/property/${t}`],enabled:!!t&&!!V}),Se=ae=>["application/pdf","image/jpeg","image/png","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(ae.type)?ae.size>10485760?(A({title:"File Too Large",description:"File size must be less than 10 MB.",variant:"destructive"}),!1):!0:(A({title:"Invalid File Type",description:"Please upload a PDF, JPG, PNG, XLSX, or XLS file.",variant:"destructive"}),!1),z=ae=>{const pe=ae.target.files?.[0];pe&&Se(pe)&&(x(pe),le.getValues("fileName")||le.setValue("fileName",pe.name))},L=Ce({mutationFn:async ae=>{const pe=await fetch("/api/property-documents/upload",{method:"POST",body:ae,credentials:"include"});if(!pe.ok){const Je=await pe.json();throw new Error(Je.error||"Failed to upload document")}return pe.json()},onSuccess:()=>{mn.delete("/api/property-documents/expiring?days=30"),A({title:"Document Uploaded",description:"Document has been uploaded successfully."}),N.invalidateQueries({predicate:ae=>ae.queryKey[0]&&typeof ae.queryKey[0]=="string"&&ae.queryKey[0].startsWith("/api/property-documents/property/")}),N.invalidateQueries({queryKey:["/api/property-documents/expiring?days=30"]}),o(!1),x(null),le.reset()},onError:ae=>{A({title:"Upload Failed",description:ae.message,variant:"destructive"})}}),le=Ft({resolver:es(XPe),defaultValues:{fileName:"",category:"",fileType:"pdf",tags:"",description:"",propertyId:t||0}}),Z=ae=>{if(!h){A({title:"No File Selected",description:"Please select a file to upload.",variant:"destructive"});return}const pe=new FormData;pe.append("file",h),pe.append("fileName",ae.fileName),pe.append("category",ae.category),pe.append("fileType",ae.fileType),pe.append("tags",ae.tags||""),pe.append("description",ae.description||""),pe.append("propertyId",t?.toString()||""),L.mutate(pe)};let me=W?.filter(ae=>{const pe=r==="all"||ae.category===r||ae.docType===r,Je=!a||ae.fileName?.toLowerCase().includes(a.toLowerCase())||ae.description?.toLowerCase().includes(a.toLowerCase())||ae.tags?.some(Mt=>Mt?.toLowerCase().includes(a.toLowerCase())),et=ae.createdAt?new Date(ae.createdAt).toISOString().split("T")[0]:null,Pe=!g||!et||et>=g,mt=!f||!et||et<=f;return pe&&Je&&Pe&&mt})||[];if(b!=="all"){const ae=parseInt(b);me=me.slice(0,ae)}const U=me.slice(0,S),je=me.length>S,ye=ae=>{switch(ae){case"image":return e.jsx(b0,{className:"h-4 w-4"});case"pdf":return e.jsx(dt,{className:"h-4 w-4"});default:return e.jsx(_j,{className:"h-4 w-4"})}};return E?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):Q?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"🧾 Property Document Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage legal documents, contracts, licenses, and utility bills"})]}),Y&&e.jsxs(R,{onClick:()=>o(!0),children:[e.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Select Property"}),e.jsx(Te,{children:"Choose a property to view its documents"})]}),e.jsx(D,{children:e.jsxs(te,{value:t?.toString(),onValueChange:ae=>s(Number(ae)),children:[e.jsx(J,{children:e.jsx(se,{placeholder:"Select a property..."})}),e.jsx(ee,{children:T?.map(ae=>e.jsxs(P,{value:ae.id.toString(),children:[ae.name," - ",ae.address]},ae.id))})]})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(H,{placeholder:"Search documents by name, description, or tags...",value:a,onChange:ae=>i(ae.target.value),className:"pl-10"})]})}),e.jsxs(te,{value:r,onValueChange:n,children:[e.jsx(J,{className:"md:w-48",children:e.jsx(se,{placeholder:"Filter by category"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All Categories"}),so.map(ae=>e.jsx(P,{value:ae.id,children:ae.name},ae.id))]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Date From:"}),e.jsx(H,{type:"date",value:g,onChange:ae=>p(ae.target.value),className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Date To:"}),e.jsx(H,{type:"date",value:f,onChange:ae=>v(ae.target.value),className:"flex-1"})]}),e.jsxs(te,{value:b,onValueChange:ae=>{y(ae),w(10)},children:[e.jsx(J,{className:"md:w-32",children:e.jsx(se,{placeholder:"Limit"})}),e.jsxs(ee,{children:[e.jsx(P,{value:"all",children:"All"}),e.jsx(P,{value:"20",children:"20"}),e.jsx(P,{value:"50",children:"50"}),e.jsx(P,{value:"80",children:"80"}),e.jsx(P,{value:"100",children:"100"})]})]})]})]})})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:so.map(ae=>{const pe=W?.filter(et=>et.category===ae.id)?.length||0,Je=ae.icon;return e.jsx(O,{className:`cursor-pointer transition-all hover:shadow-md ${r===ae.id?"ring-2 ring-primary":""}`,onClick:()=>n(ae.id),children:e.jsxs(D,{className:"p-4 text-center",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg ${ae.color} flex items-center justify-center mx-auto mb-2`,children:e.jsx(Je,{className:"h-6 w-6"})}),e.jsx("h3",{className:"text-sm font-medium mb-1",children:ae.name}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:pe})]})},ae.id)})}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ij,{className:"h-5 w-5"}),"Documents",r!=="all"&&e.jsx(q,{variant:"secondary",children:so.find(ae=>ae.id===r)?.name})]}),e.jsxs(Te,{children:[me.length," documents found"]})]}),e.jsx(D,{children:he?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"})}):me.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ij,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:a||r!=="all"?"Try adjusting your search or filter criteria.":"Upload your first document to get started."}),Y&&e.jsxs(R,{onClick:()=>o(!0),children:[e.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Upload Document"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:U.map(ae=>{const pe=so.find(Je=>Je.id===ae.category);return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${pe?.color||"bg-gray-100 text-gray-700"}`,children:ye(ae.fileType)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:ro(ae)}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(q,{variant:"outline",className:"text-xs",children:pe?.name||ae.category}),e.jsx("span",{children:"•"}),e.jsx(It,{className:"h-3 w-3"}),e.jsx("span",{children:ae.uploadedBy}),e.jsx("span",{children:"•"}),e.jsx(We,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(ae.createdAt).toLocaleDateString()})]}),ae.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:ae.description}),ae.tags&&ae.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:ae.tags.map((Je,et)=>e.jsxs(q,{variant:"secondary",className:"text-xs",children:[e.jsx(p8,{className:"h-2 w-2 mr-1"}),Je]},et))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>{d(ae),m(!0)},"data-testid":`button-view-${ae.id}`,children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>M(ae),"data-testid":`button-download-${ae.id}`,children:e.jsx(as,{className:"h-4 w-4"})}),Y&&e.jsx(R,{variant:"outline",size:"sm",onClick:()=>k(ae),className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${ae.id}`,children:e.jsx(Er,{className:"h-4 w-4"})})]})]},ae.id)})}),je&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(R,{variant:"outline",onClick:()=>w(ae=>ae+10),"data-testid":"button-view-more",children:["View More (",me.length-S," remaining)"]})})]})})]})]}),e.jsx(Ve,{open:l,onOpenChange:o,children:e.jsxs(qe,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Upload Document"}),e.jsx(Pt,{children:"Upload a new document to the property document center"})]}),e.jsx(Wt,{...le,children:e.jsxs("form",{onSubmit:le.handleSubmit(Z),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"file-upload",className:"text-sm font-medium",children:"Select File *"}),e.jsx(H,{id:"file-upload",type:"file",accept:".pdf,.jpg,.jpeg,.png,.xlsx,.xls",onChange:z,className:"cursor-pointer"}),h&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",h.name," (",(h.size/1024).toFixed(2)," KB)"]})]}),e.jsx(de,{control:le.control,name:"fileName",render:({field:ae})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"File Name"}),e.jsx(ce,{children:e.jsx(H,{...ae,placeholder:"Enter file name..."})}),e.jsx(xe,{})]})}),e.jsx(de,{control:le.control,name:"category",render:({field:ae})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Category"}),e.jsxs(te,{onValueChange:ae.onChange,defaultValue:ae.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{placeholder:"Select category..."})})}),e.jsx(ee,{children:so.map(pe=>e.jsx(P,{value:pe.id,children:pe.name},pe.id))})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:le.control,name:"fileType",render:({field:ae})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"File Type"}),e.jsxs(te,{onValueChange:ae.onChange,defaultValue:ae.value,children:[e.jsx(ce,{children:e.jsx(J,{children:e.jsx(se,{})})}),e.jsxs(ee,{children:[e.jsx(P,{value:"pdf",children:"PDF Document"}),e.jsx(P,{value:"image",children:"Image"}),e.jsx(P,{value:"doc",children:"Word Document"}),e.jsx(P,{value:"excel",children:"Excel Spreadsheet"})]})]}),e.jsx(xe,{})]})}),e.jsx(de,{control:le.control,name:"tags",render:({field:ae})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Tags (Optional)"}),e.jsx(ce,{children:e.jsx(H,{...ae,placeholder:"Enter tags separated by commas..."})}),e.jsx(xe,{})]})}),e.jsx(de,{control:le.control,name:"description",render:({field:ae})=>e.jsxs(oe,{children:[e.jsx(ue,{children:"Description (Optional)"}),e.jsx(ce,{children:e.jsx(nt,{...ae,placeholder:"Brief description of the document..."})}),e.jsx(xe,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(R,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(R,{type:"submit",disabled:L.isPending,children:L.isPending?"Uploading...":"Upload"})]})]})})]})}),e.jsx(Ve,{open:u,onOpenChange:m,children:e.jsxs(qe,{className:"sm:max-w-2xl",children:[e.jsxs(Ue,{children:[e.jsxs(ze,{className:"flex items-center gap-2",children:[c&&ye(c.fileType),c&&ro(c)]}),e.jsx(Pt,{children:"Document preview and details"})]}),c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"}),e.jsx(q,{variant:"outline",className:"ml-2",children:so.find(ae=>ae.id===c.category)?.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded by:"}),e.jsx("span",{className:"ml-2",children:c.uploadedBy})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Upload date:"}),e.jsx("span",{className:"ml-2",children:new Date(c.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"File type:"}),e.jsx("span",{className:"ml-2",children:I(c.mimeType,c.fileUrl)})]})]}),c.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Description:"}),e.jsx("p",{className:"mt-1",children:c.description})]}),c.tags&&c.tags.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.tags.map((ae,pe)=>e.jsx(q,{variant:"secondary",children:ae},pe))})]}),e.jsx("div",{className:"border rounded-lg bg-gray-50 overflow-hidden",children:(()=>{const ae=I(c.mimeType,c.fileUrl),pe=c.fileUrl;return ae==="IMAGE"||ae==="JPEG"||ae==="JPG"||ae==="PNG"?e.jsx("div",{className:"w-full max-h-[500px] flex items-center justify-center bg-white",children:e.jsx("img",{src:pe,alt:ro(c),className:"max-w-full max-h-[500px] object-contain","data-testid":"image-preview"})}):ae==="PDF"?e.jsx("div",{className:"w-full h-[500px]",children:e.jsx("iframe",{src:pe,className:"w-full h-full border-0",title:ro(c),"data-testid":"pdf-preview"})}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(dt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Preview not available for this file type"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["File type: ",ae]})]})})()})]})]})}),e.jsx(xw,{open:!!C,onOpenChange:ae=>!ae&&k(null),children:e.jsxs($f,{children:[e.jsxs(Ff,{children:[e.jsx(Bf,{children:"Delete Document"}),e.jsxs(Vf,{children:['Are you sure you want to delete "',C&&ro(C),'"? This action cannot be undone.']})]}),e.jsxs(Lf,{children:[e.jsx(Uf,{children:"Cancel"}),e.jsx(qf,{onClick:()=>{C&&F.mutate(C.id)},className:"bg-red-600 hover:bg-red-700",children:F.isPending?"Deleting...":"Delete"})]})]})})]}):e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(O,{children:e.jsxs(D,{className:"p-8 text-center",children:[e.jsx(Tt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-muted-foreground",children:"Document Center is only accessible to Admin, Portfolio Manager, and Owner roles."})]})})})}const Nj=[{value:"ownership",label:"Proof of Ownership",required:!0,icon:dt},{value:"floorplan",label:"Floorplan",required:!1,icon:QL},{value:"license",label:"Rental License",required:!0,icon:dt},{value:"insurance",label:"Property Insurance",required:!0,icon:dt},{value:"welcome",label:"Welcome Book / Guest Manual",required:!1,icon:_j},{value:"safety",label:"Safety Certificates",required:!1,icon:dt},{value:"hoa",label:"HOA / Residence Rules",required:!1,icon:_j}];function JPe(){const[t,s]=j.useState(""),[r,n]=j.useState(null),{toast:a}=Xe(),i=ut(),{data:l}=ge({queryKey:["/api/owner/properties"]}),{data:o,isLoading:c}=ge({queryKey:["/api/owner/documents",t],enabled:!!t}),d=Ce({mutationFn:async({propertyId:f,category:v,files:b})=>{const y=new FormData;return y.append("propertyId",f),y.append("category",v),b.forEach((S,w)=>{y.append(`file${w}`,S)}),fetch("/api/owner/documents/upload",{method:"POST",body:y})},onSuccess:()=>{a({title:"Documents uploaded successfully",description:"Your documents have been uploaded and will be reviewed."}),i.invalidateQueries({queryKey:["/api/owner/documents",t]}),n(null)},onError:()=>{a({title:"Upload failed",description:"There was an error uploading your documents. Please try again.",variant:"destructive"}),n(null)}}),u=Ce({mutationFn:async f=>fe("DELETE",`/api/owner/documents/${f}`),onSuccess:()=>{a({title:"Document deleted",description:"The document has been successfully deleted."}),i.invalidateQueries({queryKey:["/api/owner/documents",t]})},onError:()=>{a({title:"Delete failed",description:"There was an error deleting the document. Please try again.",variant:"destructive"})}}),m=(f,v)=>{if(!v||!t)return;const b=Array.from(v).filter(y=>{const S=y.type.includes("pdf")||y.type.includes("image"),w=y.size<=10*1024*1024;return S&&w});if(b.length===0){a({title:"Invalid files",description:"Please select PDF or image files under 10MB each.",variant:"destructive"});return}n(f),d.mutate({propertyId:t,category:f,files:b})},h=f=>{switch(f){case"approved":return e.jsx(Me,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(Et,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Et,{className:"h-4 w-4 text-yellow-500"})}},x=f=>{const v=f==="approved"?"default":f==="rejected"?"destructive":"secondary";return e.jsx(q,{variant:v,children:f})},p=o?Nj.reduce((v,b)=>(o.filter(S=>S.category===b.value).length>0&&v.completed++,b.required&&v.required++,v),{completed:0,required:0}):{completed:0,required:0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Property Documents"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload and manage important documents for your properties"})]}),t&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completion Status"}),e.jsxs("div",{className:"text-lg font-semibold",children:[p.completed,"/",Nj.length," Categories"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.required," required categories"]})]})]}),e.jsxs(O,{children:[e.jsx(_,{children:e.jsx($,{children:"Select Property"})}),e.jsx(D,{children:e.jsxs(te,{value:t,onValueChange:s,children:[e.jsx(J,{className:"w-full",children:e.jsx(se,{placeholder:"Choose a property to manage documents"})}),e.jsx(ee,{children:l?.map(f=>e.jsxs(P,{value:f.id.toString(),children:[f.name," - ",f.address]},f.id))})]})})]}),t&&e.jsx("div",{className:"grid gap-6",children:Nj.map(f=>{const v=f.icon,b=o?.filter(S=>S.category===f.value)||[],y=r===f.value;return e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx($,{className:"text-lg",children:f.label}),f.required&&e.jsx(q,{variant:"outline",className:"text-xs",children:"Required"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:b.length>0&&e.jsxs(q,{variant:"outline",children:[b.length," file(s)"]})})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Vn,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:S=>m(f.value,S.target.files),className:"hidden",id:`upload-${f.value}`,disabled:y}),e.jsx("label",{htmlFor:`upload-${f.value}`,className:`cursor-pointer text-blue-600 hover:text-blue-500 ${y?"opacity-50 cursor-not-allowed":""}`,children:y?"Uploading...":"Click to upload files"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG up to 10MB each"})]})]}),b.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Uploaded Documents"}),b.map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(dt,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:S.filename}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Uploaded ",new Date(S.uploadedAt).toLocaleDateString()]})]}),h(S.status),x(S.status)]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Ve,{children:[e.jsx(Yt,{asChild:!0,children:e.jsx(R,{variant:"outline",size:"sm",children:e.jsx($t,{className:"h-4 w-4"})})}),e.jsxs(qe,{className:"max-w-4xl max-h-[80vh]",children:[e.jsx(Ue,{children:e.jsx(ze,{children:S.filename})}),e.jsx("div",{className:"flex-1 overflow-auto",children:S.fileType?.includes("pdf")?e.jsx("iframe",{src:S.fileUrl,className:"w-full h-96",title:S.filename}):e.jsx("img",{src:S.fileUrl,alt:S.filename,className:"max-w-full h-auto"})})]})]}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>window.open(S.fileUrl,"_blank"),children:e.jsx(as,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>u.mutate(S.id),disabled:u.isPending,children:e.jsx(Er,{className:"h-4 w-4"})})]})]},S.id))]}),e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 p-3 rounded",children:[e.jsx("strong",{children:"Document Requirements:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[f.value==="ownership"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Title deed or purchase agreement"}),e.jsx("li",{children:"• Property registration documents"})]}),f.value==="license"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Short-term rental license"}),e.jsx("li",{children:"• Business registration certificate"})]}),f.value==="insurance"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Property insurance policy"}),e.jsx("li",{children:"• Liability coverage documentation"})]}),f.value==="floorplan"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Architectural drawings or floor plans"}),e.jsx("li",{children:"• Room layout with dimensions"})]}),f.value==="safety"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Fire safety certificates"}),e.jsx("li",{children:"• Electrical safety inspections"})]}),f.value==="welcome"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Guest welcome instructions"}),e.jsx("li",{children:"• Property usage guidelines"})]}),f.value==="hoa"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Homeowners association rules"}),e.jsx("li",{children:"• Building or residence regulations"})]})]})]})]})]},f.value)})})]})}function _A(){const{toast:t}=Xe(),[s,r]=j.useState("bookings"),[n,a]=j.useState(null),[i,l]=j.useState("generate"),{data:o=[],isLoading:c}=ge({queryKey:["/api/reports"]}),d=Ce({mutationFn:async v=>fe("POST","/api/reports/generate",{type:v}),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/reports"]}),t({title:"Report Generated",description:"Your report has been generated successfully"})},onError:v=>{t({title:"Error",description:v.message||"Failed to generate report",variant:"destructive"})}}),u=Ce({mutationFn:async v=>fe("DELETE",`/api/reports/${v}`),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/reports"]}),a(null),t({title:"Report Deleted",description:"Report has been deleted successfully"})},onError:v=>{t({title:"Error",description:v.message||"Failed to delete report",variant:"destructive"})}}),m=()=>{d.mutate(s)},h=async v=>{try{const b=await fetch(`/api/reports/${v}/export`,{credentials:"include"});if(!b.ok)throw new Error("Export failed");const y=await b.blob(),S=window.URL.createObjectURL(y),w=document.createElement("a");w.href=S,w.download=`report_${v}.csv`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(S),t({title:"Export Successful",description:"Report has been exported to CSV"})}catch{t({title:"Export Failed",description:"Failed to export report",variant:"destructive"})}},x=v=>{confirm("Are you sure you want to delete this report?")&&u.mutate(v)},g=[{value:"bookings",label:"Bookings Report",icon:dt},{value:"finances",label:"Financial Report",icon:Ot},{value:"tasks",label:"Tasks Report",icon:qs},{value:"properties",label:"Properties Report",icon:_d}],p=v=>g.find(y=>y.value===v)?.label||v,f=v=>({bookings:"bg-blue-100 text-blue-800",finances:"bg-green-100 text-green-800",tasks:"bg-orange-100 text-orange-800",properties:"bg-purple-100 text-purple-800"})[v]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight","data-testid":"title-reports",children:"Reports & Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive reports and analytics"})]})}),e.jsxs(ot,{value:i,onValueChange:l,className:"space-y-6",children:[e.jsxs(it,{children:[e.jsx(re,{value:"generate","data-testid":"tab-generate",children:"Generate Report"}),e.jsx(re,{value:"history","data-testid":"tab-history",children:"Report History"}),e.jsx(re,{value:"view","data-testid":"tab-view",disabled:!n,children:"View Report"})]}),e.jsx(ne,{value:"generate",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Generate New Report"}),e.jsx(Te,{children:"Select a report type to generate comprehensive analytics"})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:g.map(v=>e.jsx(O,{className:`cursor-pointer transition-all hover:shadow-md ${s===v.value?"ring-2 ring-primary":""}`,onClick:()=>r(v.value),"data-testid":`card-report-type-${v.value}`,children:e.jsxs(D,{className:"p-6 text-center",children:[e.jsx(v.icon,{className:"h-12 w-12 mx-auto mb-3 text-primary"}),e.jsx("h3",{className:"font-semibold",children:v.label})]})},v.value))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(te,{value:s,onValueChange:r,children:[e.jsx(J,{className:"flex-1","data-testid":"select-report-type",children:e.jsx(se,{placeholder:"Select report type"})}),e.jsx(ee,{children:g.map(v=>e.jsx(P,{value:v.value,children:v.label},v.value))})]}),e.jsx(R,{onClick:m,disabled:d.isPending,"data-testid":"button-generate-report",children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"mr-2 h-4 w-4"}),"Generate Report"]})})]})]})]})}),e.jsx(ne,{value:"history",className:"space-y-4",children:e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Report History"}),e.jsx(Te,{children:"View and manage previously generated reports"})]}),e.jsx(D,{children:c?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(ts,{className:"h-8 w-8 animate-spin text-primary"})}):o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(dt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No reports generated yet"}),e.jsx("p",{className:"text-sm",children:"Generate your first report to get started"})]}):e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Report Title"}),e.jsx(Oe,{children:"Type"}),e.jsx(Oe,{children:"Generated"}),e.jsx(Oe,{className:"text-right",children:"Actions"})]})}),e.jsx(Hs,{children:o.map(v=>e.jsxs(wt,{"data-testid":`row-report-${v.id}`,children:[e.jsx(Ae,{className:"font-medium",children:v.title}),e.jsx(Ae,{children:e.jsx(q,{className:f(v.type),children:p(v.type)})}),e.jsx(Ae,{children:rt(new Date(v.createdAt),"MMM dd, yyyy HH:mm")}),e.jsxs(Ae,{className:"text-right space-x-2",children:[e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{a(v),l("view")},"data-testid":`button-view-${v.id}`,children:[e.jsx(dt,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>h(v.id),"data-testid":`button-export-${v.id}`,children:[e.jsx(as,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsxs(R,{variant:"outline",size:"sm",onClick:()=>x(v.id),"data-testid":`button-delete-${v.id}`,children:[e.jsx(Er,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},v.id))})]})})]})}),e.jsx(ne,{value:"view",className:"space-y-4",children:n&&e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx($,{children:n.title}),e.jsxs(Te,{children:["Generated on ",rt(new Date(n.createdAt),"MMMM dd, yyyy at HH:mm")]})]}),e.jsxs(R,{variant:"outline",onClick:()=>h(n.id),"data-testid":"button-export-current",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),e.jsxs(D,{className:"space-y-6",children:[n.data.summary&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(n.data.summary).map(([v,b])=>e.jsx(O,{children:e.jsxs(D,{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:v.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-2xl font-bold",children:typeof b=="number"?b.toLocaleString():b})]})},v))}),n.data.details&&n.data.details.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Detailed Data"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsx(wt,{children:Object.keys(n.data.details[0]).map(v=>e.jsx(Oe,{className:"capitalize",children:v.replace(/([A-Z])/g," $1").trim()},v))})}),e.jsx(Hs,{children:n.data.details.slice(0,10).map((v,b)=>e.jsx(wt,{children:Object.values(v).map((y,S)=>e.jsx(Ae,{children:typeof y=="object"?JSON.stringify(y):String(y)},S))},b))})]}),n.data.details.length>10&&e.jsxs("div",{className:"p-3 text-center text-sm text-muted-foreground bg-muted",children:["Showing 10 of ",n.data.details.length," records. Export to CSV to view all."]})]})]})]})]})})]})]})}function IA(){const{toast:t}=Xe(),[s,r]=j.useState(!1),[n,a]=j.useState(!1),[i,l]=j.useState(null),[o,c]=j.useState({name:"",description:"",trigger:"",action:"",schedule:""}),{data:d=[],isLoading:u}=ge({queryKey:["/api/automations"],refetchOnWindowFocus:!1,staleTime:3e4}),m=Ce({mutationFn:async N=>fe("POST","/api/automations",N),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/automations"]}),r(!1),p(),t({title:"Automation Created",description:"Your automation rule has been created successfully"})},onError:N=>{t({title:"Error",description:N.message||"Failed to create automation",variant:"destructive"})}}),h=Ce({mutationFn:async({id:N,data:M})=>fe("PUT",`/api/automations/${N}`,M),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/automations"]}),a(!1),l(null),p(),t({title:"Automation Updated",description:"Your automation rule has been updated successfully"})},onError:N=>{t({title:"Error",description:N.message||"Failed to update automation",variant:"destructive"})}}),x=Ce({mutationFn:async({id:N,isActive:M})=>fe("PATCH",`/api/automations/${N}/toggle`,{isActive:M}),onMutate:async({id:N,isActive:M})=>{await ws.cancelQueries({queryKey:["/api/automations"]});const F=ws.getQueryData(["/api/automations"]);return ws.setQueryData(["/api/automations"],I=>I&&I.map(V=>V.id===N?{...V,isActive:M}:V)),{previousAutomations:F}},onSuccess:N=>{ws.setQueryData(["/api/automations"],M=>M&&M.map(F=>F.id===N.id?N:F)),t({title:"Automation Updated",description:"Automation status has been updated"})},onError:(N,M,F)=>{ws.setQueryData(["/api/automations"],F?.previousAutomations),t({title:"Error",description:N.message||"Failed to toggle automation",variant:"destructive"})}}),g=Ce({mutationFn:async N=>fe("DELETE",`/api/automations/${N}`),onSuccess:()=>{ws.invalidateQueries({queryKey:["/api/automations"]}),t({title:"Automation Deleted",description:"Automation rule has been deleted successfully"})},onError:N=>{t({title:"Error",description:N.message||"Failed to delete automation",variant:"destructive"})}}),p=()=>{c({name:"",description:"",trigger:"",action:"",schedule:""})},f=()=>{if(!o.name||!o.trigger||!o.action){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}m.mutate(o)},v=N=>{l(N),c({name:N.name,description:N.description||"",trigger:N.trigger,action:N.action,schedule:N.schedule||""}),a(!0)},b=()=>{i&&h.mutate({id:i.id,data:o})},y=N=>{confirm("Are you sure you want to delete this automation?")&&g.mutate(N)},S=(N,M)=>{x.mutate({id:N,isActive:M})},w=[{value:"booking_due",label:"Booking Check-in Due",icon:Ke},{value:"task_overdue",label:"Task Overdue",icon:Vs},{value:"payment_pending",label:"Payment Pending",icon:ha},{value:"utility_threshold",label:"Utility Threshold Exceeded",icon:Ut}],C=[{value:"send_email",label:"Send Email",icon:ha},{value:"send_sms",label:"Send SMS",icon:gn},{value:"create_task",label:"Create Task",icon:Mn},{value:"send_notification",label:"Send Notification",icon:Vs}],k=N=>{const F=w.find(I=>I.value===N)?.icon||Ke;return e.jsx(F,{className:"h-4 w-4"})},A=N=>{const F=C.find(I=>I.value===N)?.icon||Vs;return e.jsx(F,{className:"h-4 w-4"})};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight","data-testid":"title-automation",children:"Automation & Alerts"}),e.jsx("p",{className:"text-muted-foreground",children:"Smart reminders, AI insights, and automated property management workflows"})]}),e.jsxs(Ve,{open:s,onOpenChange:r,children:[e.jsx(Yt,{asChild:!0,children:e.jsxs(R,{"data-testid":"button-create-automation",children:[e.jsx(ht,{className:"mr-2 h-4 w-4"}),"Create Automation"]})}),e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Create New Automation"}),e.jsx(Pt,{children:"Set up a new automation rule for your property management"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"name",children:"Name *"}),e.jsx(H,{id:"name",placeholder:"e.g., Send check-in reminder",value:o.name,onChange:N=>c({...o,name:N.target.value}),"data-testid":"input-automation-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"description",children:"Description"}),e.jsx(nt,{id:"description",placeholder:"Describe what this automation does",value:o.description,onChange:N=>c({...o,description:N.target.value}),"data-testid":"input-automation-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"trigger",children:"Trigger *"}),e.jsxs(te,{value:o.trigger,onValueChange:N=>c({...o,trigger:N}),children:[e.jsx(J,{"data-testid":"select-trigger",children:e.jsx(se,{placeholder:"Select trigger"})}),e.jsx(ee,{children:w.map(N=>e.jsx(P,{value:N.value,children:N.label},N.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"action",children:"Action *"}),e.jsxs(te,{value:o.action,onValueChange:N=>c({...o,action:N}),children:[e.jsx(J,{"data-testid":"select-action",children:e.jsx(se,{placeholder:"Select action"})}),e.jsx(ee,{children:C.map(N=>e.jsx(P,{value:N.value,children:N.label},N.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"schedule",children:"Schedule (Optional)"}),e.jsx(H,{id:"schedule",placeholder:"e.g., daily, weekly, or cron expression",value:o.schedule,onChange:N=>c({...o,schedule:N.target.value}),"data-testid":"input-schedule"})]}),e.jsx(R,{onClick:f,className:"w-full",disabled:m.isPending,"data-testid":"button-submit-create",children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Automation"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium text-muted-foreground",children:"Total Rules"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium text-muted-foreground",children:"Active"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.filter(N=>N.isActive).length})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium text-muted-foreground",children:"Inactive"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:d.filter(N=>!N.isActive).length})})]}),e.jsxs(O,{children:[e.jsx(_,{className:"pb-3",children:e.jsx($,{className:"text-sm font-medium text-muted-foreground",children:"Total Triggers"})}),e.jsx(D,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.reduce((N,M)=>N+M.triggerCount,0)})})]})]}),e.jsxs(O,{children:[e.jsxs(_,{children:[e.jsx($,{children:"Automation Rules"}),e.jsx(Te,{children:"Manage your automated workflows and alerts"})]}),e.jsx(D,{children:u?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(ts,{className:"h-8 w-8 animate-spin text-primary"})}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ut,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No automation rules created yet"}),e.jsx("p",{className:"text-sm",children:"Create your first automation to get started"})]}):e.jsxs(zs,{children:[e.jsx(Gs,{children:e.jsxs(wt,{children:[e.jsx(Oe,{children:"Name"}),e.jsx(Oe,{children:"Trigger"}),e.jsx(Oe,{children:"Action"}),e.jsx(Oe,{children:"Triggered"}),e.jsx(Oe,{children:"Status"}),e.jsx(Oe,{className:"text-right",children:"Actions"})]})}),e.jsx(Hs,{children:d.map(N=>e.jsxs(wt,{"data-testid":`row-automation-${N.id}`,children:[e.jsx(Ae,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:N.name}),N.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:N.description})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[k(N.trigger),e.jsx("span",{className:"text-sm",children:w.find(M=>M.value===N.trigger)?.label||N.trigger})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[A(N.action),e.jsx("span",{className:"text-sm",children:C.find(M=>M.value===N.action)?.label||N.action})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[N.triggerCount," times"]}),N.lastTriggered&&e.jsxs("div",{className:"text-muted-foreground",children:["Last: ",rt(new Date(N.lastTriggered),"MMM dd, HH:mm")]})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{checked:N.isActive,onCheckedChange:M=>S(N.id,M),"data-testid":`switch-active-${N.id}`}),e.jsx(q,{variant:N.isActive?"default":"secondary",children:N.isActive?"Active":"Inactive"})]})}),e.jsxs(Ae,{className:"text-right space-x-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>v(N),"data-testid":`button-edit-${N.id}`,children:e.jsx(Or,{className:"h-4 w-4"})}),e.jsx(R,{variant:"outline",size:"sm",onClick:()=>y(N.id),"data-testid":`button-delete-${N.id}`,children:e.jsx(Er,{className:"h-4 w-4"})})]})]},N.id))})]})})]}),e.jsx(Ve,{open:n,onOpenChange:a,children:e.jsxs(qe,{children:[e.jsxs(Ue,{children:[e.jsx(ze,{children:"Edit Automation"}),e.jsx(Pt,{children:"Update your automation rule settings"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"edit-name",children:"Name *"}),e.jsx(H,{id:"edit-name",value:o.name,onChange:N=>c({...o,name:N.target.value}),"data-testid":"input-edit-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"edit-description",children:"Description"}),e.jsx(nt,{id:"edit-description",value:o.description,onChange:N=>c({...o,description:N.target.value}),"data-testid":"input-edit-description"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"edit-trigger",children:"Trigger *"}),e.jsxs(te,{value:o.trigger,onValueChange:N=>c({...o,trigger:N}),children:[e.jsx(J,{"data-testid":"select-edit-trigger",children:e.jsx(se,{})}),e.jsx(ee,{children:w.map(N=>e.jsx(P,{value:N.value,children:N.label},N.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"edit-action",children:"Action *"}),e.jsxs(te,{value:o.action,onValueChange:N=>c({...o,action:N}),children:[e.jsx(J,{"data-testid":"select-edit-action",children:e.jsx(se,{})}),e.jsx(ee,{children:C.map(N=>e.jsx(P,{value:N.value,children:N.label},N.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"edit-schedule",children:"Schedule (Optional)"}),e.jsx(H,{id:"edit-schedule",value:o.schedule,onChange:N=>c({...o,schedule:N.target.value}),"data-testid":"input-edit-schedule"})]}),e.jsx(R,{onClick:b,className:"w-full",disabled:h.isPending,"data-testid":"button-submit-update",children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Automation"})]})]})})]})}function eke(){const{user:t,isLoading:s}=vn();return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"text-lg font-medium text-blue-700",children:"Loading HostPilotPro..."})]})}):t?e.jsxs("div",{className:"flex min-h-screen bg-background",children:[e.jsx(HV,{}),e.jsxs(Cj,{children:[e.jsx(Ee,{path:"/",component:FH}),e.jsx(Ee,{path:"/properties",component:LH}),e.jsx(Ee,{path:"/property/:id/edit",component:eNe}),e.jsx(Ee,{path:"/property/:id",component:Jbe}),e.jsx(Ee,{path:"/tasks",component:aH}),e.jsx(Ee,{path:"/bookings",component:GH}),e.jsx(Ee,{path:"/services",component:aK}),e.jsx(Ee,{path:"/finances",component:iK}),e.jsx(Ee,{path:"/advanced-analytics",component:sNe}),e.jsx(Ee,{path:"/settings",component:Q1}),e.jsx(Ee,{path:"/profile",component:xK}),e.jsx(Ee,{path:"/help",component:t2}),e.jsx(Ee,{path:"/dashboard-hub",component:zCe}),e.jsx(Ee,{path:"/property-hub",component:ZCe}),e.jsx(Ee,{path:"/finance-hub",component:sPe}),e.jsx(Ee,{path:"/enhanced-finances",children:()=>{const r=j.lazy(()=>ur(()=>import("./EnhancedFinances-DYJ82SbE.js"),__vite__mapDeps([6,1,2])));return e.jsx(j.Suspense,{fallback:e.jsx("div",{children:"Loading Enhanced Finance Analytics..."}),children:e.jsx(r,{})})}}),e.jsx(Ee,{path:"/admin/finance",component:j.lazy(()=>ur(()=>import("./AdminFinance-Dd1Ubfdf.js"),__vite__mapDeps([7,1,2])))}),e.jsx(Ee,{path:"/system-hub",component:bPe}),e.jsx(Ee,{path:"/system-hub-old",component:jPe}),e.jsx(Ee,{path:"/enhanced-admin-dashboard",component:YPe}),e.jsx(Ee,{path:"/simple-filtered-financial-dashboard",component:JV}),e.jsx(Ee,{path:"/filtered-property-dashboard",component:CU}),e.jsx(Ee,{path:"/multi-property-calendar",component:tNe}),e.jsx(Ee,{path:"/maintenance-suggestions",component:gK}),e.jsx(Ee,{path:"/checkin-checkout-workflow",component:Sg}),e.jsx(Ee,{path:"/daily-operations",component:Z1}),e.jsx(Ee,{path:"/task-overview",component:fCe}),e.jsx(Ee,{path:"/daily-operations-overview",component:gCe}),e.jsx(Ee,{path:"/sandbox-testing",component:hR}),e.jsx(Ee,{path:"/guest-portal-smart-requests",component:AK}),e.jsx(Ee,{path:"/guest-activity-recommendations",component:OK}),e.jsx(Ee,{path:"/upsell-recommendations-management",component:ACe}),e.jsx(Ee,{path:"/admin/api-connections",component:bR}),e.jsx(Ee,{path:"/admin/organization-branding",component:ZK}),e.jsx(Ee,{path:"/admin/legal-templates",component:JK}),e.jsx(Ee,{path:"/admin/marketing-pack-management",component:eW}),e.jsx(Ee,{path:"/admin/ai-ops-anomalies",component:NR}),e.jsx(Ee,{path:"/admin/user-management",component:dv}),e.jsx(Ee,{path:"/user-management",component:s2}),e.jsx(Ee,{path:"/user-management/edit",component:s2}),e.jsx(Ee,{path:"/legacy-user-management",component:dv}),e.jsx(Ee,{path:"/admin/activity-log",component:uv}),e.jsx(Ee,{path:"/owner-target-upgrade-tracker",component:GK}),e.jsx(Ee,{path:"/auto-scheduling-recurring-task-generator",component:sW}),e.jsx(Ee,{path:"/ota-revenue-net-payout-calculation",component:rW}),e.jsx(Ee,{path:"/ota-payout-logic-smart-revenue",component:nW}),e.jsx(Ee,{path:"/loyalty-guest-tracker",component:n2}),e.jsx(Ee,{path:"/loyalty-tracker",component:n2}),e.jsx(Ee,{path:"/invoice-generator",component:a2}),e.jsx(Ee,{path:"/invoices",component:a2}),e.jsx(Ee,{path:"/staff-advance-salary-overtime-tracker",component:aW}),e.jsx(Ee,{path:"/staff-wallet-petty-cash",component:cNe}),e.jsx(Ee,{path:"/staff-cash-collection",component:dNe}),e.jsx(Ee,{path:"/staff-expense-management",component:uNe}),e.jsx(Ee,{path:"/admin/staff-permission-management",component:mNe}),e.jsx(Ee,{path:"/system-wide-demo-integration",component:iW}),e.jsx(Ee,{path:"/maintenance-log-warranty-tracker",component:lW}),e.jsx(Ee,{path:"/staff-profile-payroll",component:oW}),e.jsx(Ee,{path:"/admin/system-integrity-check",component:wR}),e.jsx(Ee,{path:"/utility-tracker",component:dW}),e.jsx(Ee,{path:"/ai-notifications-reminders",component:SR}),e.jsx(Ee,{path:"/finance-engine",component:mW}),e.jsx(Ee,{path:"/property-appliances-management",component:pCe}),e.jsx(Ee,{path:"/alert-management",component:jCe}),e.jsx(Ee,{path:"/automation-management",component:l$}),e.jsx(Ee,{path:"/currency-tax-management",component:CCe}),e.jsx(Ee,{path:"/document-center",component:QPe}),e.jsx(Ee,{path:"/property-document-center",component:RA}),e.jsx(Ee,{path:"/property-documents-management",component:RA}),e.jsx(Ee,{path:"/property-document-upload",component:JPe}),e.jsx(Ee,{path:"/ai-test",component:lNe}),e.jsx(Ee,{path:"/ai-features",component:oNe}),e.jsx(Ee,{path:"/retail-agent",component:CPe}),e.jsx(Ee,{path:"/referral-agent",component:_M}),e.jsx(Ee,{path:"/agent/hub",component:RM}),e.jsx(Ee,{path:"/agent/quote-generator",component:MCe}),e.jsx(Ee,{path:"/agent/commissions",component:RCe}),e.jsx(Ee,{path:"/agent/proposals",component:_Ce}),e.jsx(Ee,{path:"/agent/media-download",component:VCe}),e.jsx(Ee,{path:"/agent/leaderboard",component:UCe}),e.jsx(Ee,{path:"/signup-request",component:vNe}),e.jsx(Ee,{path:"/admin/saas-management",component:uI}),e.jsx(Ee,{path:"/simple-settings",component:Q1}),e.jsx(Ee,{path:"/help",component:MK}),e.jsx(Ee,{path:"/simple-help",component:EK}),e.jsx(Ee,{path:"/fast-help",component:t2}),e.jsx(Ee,{path:"/admin/additional-settings",component:d$}),e.jsx(Ee,{path:"/admin/upgraded-dashboard",component:i$}),e.jsx(Ee,{path:"/smart-pricing-performance-toolkit",component:PA}),e.jsx(Ee,{path:"/smart-pricing",component:PA}),e.jsx(Ee,{path:"/owner-invoicing-payouts",component:kA}),e.jsx(Ee,{path:"/owner-invoicing",component:kA}),e.jsx(Ee,{path:"/portfolio-manager-dashboard",component:MPe}),e.jsx(Ee,{path:"/owner-dashboard",component:BPe}),e.jsx(Ee,{path:"/guest-services",component:AA}),e.jsx(Ee,{path:"/guest-portal",component:AA}),e.jsx(Ee,{path:"/property-settings",component:TA}),e.jsx(Ee,{path:"/property-settings-module",component:TA}),e.jsx(Ee,{path:"/staff-operations",component:lk}),e.jsx(Ee,{path:"/staff-dashboard",component:lk}),e.jsx(Ee,{path:"/check-in-check-out",component:Sg}),e.jsx(Ee,{path:"/checkin-checkout",component:Sg}),e.jsx(Ee,{path:"/guest-checkin-checkout-tracker",component:X1}),e.jsx(Ee,{path:"/guest-check-in-check-out",component:X1}),e.jsx(Ee,{path:"/activity-logs",component:uv}),e.jsx(Ee,{path:"/daily-operations",component:Z1}),e.jsx(Ee,{path:"/ai-bot",component:DCe}),e.jsx(Ee,{path:"/achievements",component:JSe}),e.jsx(Ee,{path:"/salaries-wages",component:gj}),e.jsx(Ee,{path:"/staff-salaries",component:gj}),e.jsx(Ee,{path:"/admin/salaries-wages",component:gj}),e.jsx(Ee,{path:"/reports",component:_A}),e.jsx(Ee,{path:"/reports-analytics",component:_A}),e.jsx(Ee,{path:"/automation",component:IA}),e.jsx(Ee,{path:"/automation-alerts",component:IA}),e.jsx(Ee,{component:fK})]})]}):e.jsxs(Cj,{children:[e.jsx(Ee,{path:"/login",component:hK}),e.jsx(Ee,{component:pK})]})}function tke(){return j.useEffect(()=>{WV()},[]),e.jsx(CF,{client:ws,children:e.jsx(YV,{children:e.jsx(zV,{children:e.jsxs(Yu,{children:[e.jsx(xNe,{}),e.jsx(eke,{}),e.jsx(hNe,{}),e.jsx(sB,{})]})})})})}window.addEventListener("error",t=>{console.error("🚨 JS Error:",t.message,"at",t.filename,":",t.lineno)});window.addEventListener("unhandledrejection",t=>{console.error("🚨 Unhandled Promise Rejection:",t.reason)});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.querySelectorAll("button").forEach(t=>{!(t.onclick||t.getAttribute("onclick")||t.hasAttribute("data-testid")||t.closest("form")||t.type==="submit"||t.getAttribute("aria-expanded")!==null)&&t.innerText.trim()&&!t.disabled&&console.warn("⚠️ Button may have no action:",t.innerText.trim())})},3e3)});qA(document.getElementById("root")).render(e.jsx(tke,{}));export{Ve as $,_r as A,q as B,O as C,as as D,Ba as E,ja as F,Vy as G,Hn as H,H as I,Yo as J,pr as K,K as L,Mi as M,Ua as N,we as O,io as P,zs as Q,cs as R,te as S,Ot as T,Gs as U,wt as V,Oe as W,Is as X,pc as Y,Hs as Z,Ae as _,D as a,Yt as a0,$t as a1,qe as a2,Ue as a3,ze as a4,Ke as a5,Me as a6,zu as a7,_s as a8,Hw as a9,sa as aA,yt as aB,YT as aC,Gr as aD,Us as aE,Yn as aF,As as aG,qs as aH,_a as aI,hn as aJ,dt as aK,d8 as aL,hl as aM,Te as aN,_n as aO,Fl as aP,In as aQ,m8 as aa,dr as ab,It as ac,Xe as ad,ut as ae,Ce as af,fe as ag,Lt as ah,Uu as ai,Or as aj,o8 as ak,ht as al,st as am,xt as an,Jt as ao,us as ap,Nt as aq,is as ar,ki as as,UT as at,Rr as au,yj as av,_t as aw,Dr as ax,Ut as ay,ZT as az,_ as b,$ as c,R as d,J as e,se as f,ee as g,P as h,lo as i,e as j,_e as k,We as l,il as m,al as n,He as o,_l as p,Tt as q,ot as r,it as s,re as t,ge as u,ne as v,hd as w,zbe as x,Ty as y,hc as z};
